import{ic as I,s as g,j5 as R,j6 as b,ba as v,j7 as A}from"./chunk-CuaFhuP3.js";import{a as S,q as $}from"./chunk-BEVXRkwK.js";import{p as h}from"./chunk-b-Uii-I4.js";import"./chunk-Dpk1TJd9.js";import"./chunk-iOPJXyP1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./chunk-DGmg3LSc.js";import"./chunk-Betj5hoa.js";import"./chunk-Cj6q1fp6.js";import"./chunk-BvxomRZN.js";import"./chunk-Ci_uqM5T.js";import"./chunk-Btn-XPY7.js";import"./chunk-BIcMZiQX.js";import"./chunk-C33bkuGJ.js";function St(e){const n=new S,m=e.spatialReference??e.layerView.view.spatialReference;return n.externalSources.add({extent:e.extent??j(e,m),source:{type:"loadable",load:p=>C(p,e)}}),new $({metadata:n,vertexSpace:new I,spatialReference:m})}function j({layerView:e,nodeIndex:n,featureIndex:m},p){const i=e.getAABB(n,m);if(!i)return null;const a=e.view.spatialReference;return a.equals(p)||v(i,a,0,i,p,0),A(i,p)}async function C(e,{layerView:n,nodeIndex:m,featureIndex:p}){const i=n.getNodeComponentHandle(m);if(!i?.intersectionGeometry)throw new g("i3s-layer-view-geometry-missing","Cannot load mesh because scene layer view data is no longer available.");const a={indices:null,data:null,stride:0,startIndex:0,endIndex:0};i.intersectionGeometry.getComponentPositions(p,a);const{indices:l,data:r,stride:c,startIndex:w,endIndex:x}=a,t=new Float64Array(3*(x-w));let o=0;for(let s=w;s<x;s+=3){const d=c*l[s],f=c*l[s+1],u=c*l[s+2];t[o++]=r[d],t[o++]=r[d+1],t[o++]=r[d+2],t[o++]=r[f],t[o++]=r[f+1],t[o++]=r[f+2],t[o++]=r[u],t[o++]=r[u+1],t[o++]=r[u+2]}const y=i.transform;R(t,t,y.rotationScale),b(t,t,y.position),v(t,n.view.renderSpatialReference,0,t,e.spatialReference,0),e.vertexAttributes=new h({position:t})}export{St as createMesh};
