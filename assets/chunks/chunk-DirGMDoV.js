import{io as I,s as g,ji as R,jj as b,bh as v,jk as h}from"./chunk-XGpVqsM_.js";import{a as j,q as A}from"./chunk-DXi67G30.js";import{p as S}from"./chunk-Bx7fkuVu.js";import"./chunk-DyqHK6XP.js";import"./chunk-Dix477Sg.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./chunk-CrMA_peF.js";import"./chunk-C7gn2wxf.js";import"./chunk-Cj6q1fp6.js";import"./chunk-cMC_YIeN.js";import"./chunk-DtU9Beb_.js";import"./chunk-jK6zzuUE.js";import"./chunk-F2mY9cXg.js";import"./chunk-pBCC0IDc.js";function jt(e){const n=new j,m=e.spatialReference??e.layerView.view.spatialReference;return n.externalSources.add({extent:e.extent??$(e,m),source:{type:"loadable",load:p=>C(p,e)}}),new A({metadata:n,vertexSpace:new I,spatialReference:m})}function $({layerView:e,nodeIndex:n,featureIndex:m},p){const i=e.getAABB(n,m);if(!i)return null;const a=e.view.spatialReference;return a.equals(p)||v(i,a,0,i,p,0),h(i,p)}async function C(e,{layerView:n,nodeIndex:m,featureIndex:p}){const i=n.getNodeComponentHandle(m);if(!i?.intersectionGeometry)throw new g("i3s-layer-view-geometry-missing","Cannot load mesh because scene layer view data is no longer available.");const a={indices:null,data:null,stride:0,startIndex:0,endIndex:0};i.intersectionGeometry.getComponentPositions(p,a);const{indices:l,data:r,stride:c,startIndex:w,endIndex:x}=a,t=new Float64Array(3*(x-w));let o=0;for(let s=w;s<x;s+=3){const d=c*l[s],f=c*l[s+1],u=c*l[s+2];t[o++]=r[d],t[o++]=r[d+1],t[o++]=r[d+2],t[o++]=r[f],t[o++]=r[f+1],t[o++]=r[f+2],t[o++]=r[u],t[o++]=r[u+1],t[o++]=r[u+2]}const y=i.transform;R(t,t,y.rotationScale),b(t,t,y.position),v(t,n.view.renderSpatialReference,0,t,e.spatialReference,0),e.vertexAttributes=new S({position:t})}export{jt as createMesh};
