import{s as n,qG as c,qH as q,qI as t,qJ as g,qK as v,qL as L,qM as h,qN as x,qO as E,qP as S,qQ as $}from"./chunk-DbiObNSB.js";import"./chunk-DsYbGKja.js";import"./chunk-BBnM6NiO.js";/* empty css              */function C(e,a){if(!e.view)throw new n(`${a}:missing-parameters`,"'view' parameter is required for binning");if(e.sqlExpression)throw new n(`${a}:invalid-parameters`,"'sqlExpression' parameter is not supported for binning");if(e.view.type==="3d")throw new n(`${a}:invalid-parameters`,"3d view is not supported for binning")}const o={0:{adapter:t,type:"catalog",label:"CatalogLayer"},1:{adapter:t,type:"catalog-footprint",label:"CatalogFootprintLayer"},2:{adapter:x,type:"csv",label:"CSVLayer"},3:{adapter:t,type:"feature",label:"FeatureLayer"},5:{adapter:t,type:"imagery",label:"ImageryLayer"},4:{adapter:t,type:"geojson",label:"GeoJSONLayer"},6:{adapter:t,type:"knowledge-graph-sublayer",label:"KnowledgeGraphSublayer"},7:{adapter:h,type:"ogc-feature",label:"OGCFeatureLayer"},8:{adapter:t,type:"oriented-imagery",label:"OrientedImageryLayer"},9:{adapter:t,type:"parquet",label:"ParquetLayer"},10:{adapter:L,type:"point-cloud",label:"PointCloudLayer"},11:{adapter:v,type:"scene",label:"SceneLayer"},12:{adapter:g,type:"stream",label:"StreamLayer"},13:{adapter:t,type:"subtype-group",label:"SubtypeGroupLayer"},14:{adapter:t,type:"subtype-sublayer",label:"SubtypeSublayer"},15:{adapter:t,type:"wfs",label:"WFSLayer"}},u=[0,1,2,3,4,6,7,8,9,10,11,12,13,14,15],G=[2,3,4,7,6,8,9,12,15];function F(e){return e.map(a=>o[a].label)}function O(e,a=u,i){if(e instanceof c)return e;const s=A(e,a);return s?i?new q({layer:e}):new s({layer:e}):null}function A(e,a=u){let i=null;return a.some(s=>{const l=e.type===o[s].type;return l&&(i=o[s].adapter),l}),i}async function B(e){if(!e?.layer||!e.field&&!e.valueExpression)throw new n("unique-values:missing-parameters","'layer' and 'field' or 'valueExpression' parameters are required");const a=e.valueExpression||e.sqlExpression,i=a&&!e.sqlExpression;if(a){if(i){if(!e.view)throw new n("unique-values:missing-parameters","View is required when 'valueExpression' is specified")}else if(!e.valueExpression)throw new n("unique-values:missing-parameters","'valueExpression' parameters are required")}e.forBinning&&C(e,"unique-values");const{layer:s,...l}=e,m=[...u,5],y=e.forBinning?G:m,p=O(s,y,e.forBinning);if(!p)throw new n("unique-values:invalid-parameters","'layer' must be one of these types: "+F(y).join(", "));const r={layerAdapter:p,...l},w=r.signal!=null?{signal:r.signal}:null;await p.load(w);const b=await E({field:r.field,field2:r.field2,field3:r.field3,valueExpression:r.valueExpression}),d=S(p,b,"unique-values:invalid-parameters");if(d)throw d;r.filter&&!r.filter.spatialRelationship&&(r.filter.spatialRelationship="intersects");const f=$(r.filter,"summary-statistics:invalid-parameters");if(f)throw f;return r}async function j(e){const{layerAdapter:a,...i}=await B(e);return a.uniqueValues(i)}export{j as default};
