const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-S48GxbI4.js","assets/chunks/chunk-BuZVacDv.js","assets/chunks/chunk-XokVNh2R.js","assets/chunks/chunk-D3r4aXmB.js","assets/static/onCreateApp.CVc6Fr7R.css","assets/static/src_layouts_default_aside-6ea01de8.BjbON5Ij.css","assets/static/src_layouts_default_navbar-403af73f.u3IytZI2.css","assets/static/vitepress_components_VPDocOutlineItem-0942cada.tkRPm3MX.css","assets/static/vitepress_components_VPDocAsideOutline-b0d47973.Ds9uynvM.css","assets/static/src_styles_common_reset-f7a68b0e.BAKp5MHC.css","assets/static/src_styles_common_color-a7a524c7.CVau4Kly.css","assets/static/src_styles_common_is-19c6c24d.DKAKruk7.css","assets/static/style-1f8c8354.BaI2aKL6.css","assets/static/style-cb16b146.XreLeJ0E.css","assets/static/src_styles_element-plus_reset-752cc03d.htEpr2M-.css","assets/static/src_styles_element-plus_form-item-877afd6a.Dy4HJB2K.css","assets/static/src_styles_element-plus_table-6cbc5816.DXG1SsxY.css","assets/static/src_styles_element-plus_tabs-67d1a98b.BMDMQPDv.css","assets/static/src_styles_element-plus_tree-cc28503d.nmT5n0wM.css","assets/static/src_styles_element-plus_dialog-7f91a00e.D4nTsJge.css","assets/static/src_styles_element-plus_breadcrumb-8ce3a1a1.CwEEGJYc.css","assets/static/src_styles_element-plus_menu-33b44202.hFAFO4eV.css","assets/static/style-cc9c5536.DDhCRjCR.css","assets/static/style-22d30bfc.TwvRHEyK.css","assets/static/style-d089cd8f.Cc2PI5FU.css","assets/static/style-796ddcb0.CW1Rymyr.css","assets/static/style-51eec318.o0zCZ1y4.css","assets/static/src_styles_form_sub-7371c85e.y3zh-mS3.css","assets/static/src_styles_layout_index-2891f17b.BNCqvENj.css","assets/static/style-ab3e4bd5.BuWAVw4m.css","assets/static/style-0d817eda.B5pr9hWz.css","assets/static/style-6704f213.BZwgKm1s.css","assets/static/style-9b61c906.CFNWXuiE.css","assets/static/style-350993b7.X9gIGpBH.css","assets/static/style-f0d82e57.D5V-vz_C.css","assets/static/style-7faf3e7a.CTEwL9GB.css","assets/static/src_styles_markdown_reset-fbd16bdd.D3vNaEcf.css","assets/static/src_styles_markdown_shiki-0d2326df.uut6VZYd.css","assets/static/style-e4c28ba0.BILCMoKv.css","assets/static/style-cd9b15b3.ChwmoEkt.css","assets/static/pages_uno-88a4f3d7.QGISs3Ta.css","assets/chunks/chunk-DVBvMn51.js","assets/chunks/chunk-Dd0WQyhZ.js","assets/chunks/chunk-DsYbGKja.js","assets/chunks/chunk-BkD7Hj8s.js","assets/chunks/chunk-yQcwDFE8.js","assets/chunks/chunk-d4Eu7_zm.js","assets/chunks/chunk-CSVzDSO0.js","assets/chunks/chunk-DU1-uaYd.js","assets/chunks/chunk-CyDA0WRY.js","assets/chunks/chunk-BuDPUeRL.js","assets/chunks/chunk-D2nGpDRe.js","assets/chunks/chunk-1LCcg9PS.js","assets/chunks/chunk-_gMROmfM.js","assets/chunks/chunk-BEmiJd4I.js","assets/chunks/chunk-OtVwhkKS.js","assets/chunks/chunk-BrhG_RNf.js","assets/chunks/chunk-DNKO0ees.js","assets/chunks/chunk-COoHjZYh.js","assets/chunks/chunk-5g5JI2bR.js"])))=>i.map(i=>d[i]);
import{E as J8e,h as e7e,D as Ure,a as t7e,_ as n7e,V as r7e}from"./chunk-XokVNh2R.js";import{be as Ni,d8 as v_,d9 as eTe,Q as i7e,da as a7e,cQ as jre,cB as o7e,d as SK,r as tTe,aA as s7e,h as l7e,o as TK,f as c7e,c as nTe,u as qL,w as rTe,a as ZV,g as u7e}from"./chunk-D3r4aXmB.js";import{o as ZL,c as zre,a as f7e,r as h7e,b as IF,N as iTe,d as d7e,e as AK,s as p7e,p as g7e,t as v7e,f as m7e,h as LF}from"./chunk-DVBvMn51.js";import{t as y7e,c as Zk,a as ze,b as Z,_ as wK,u as _7e}from"./chunk-Dd0WQyhZ.js";import{e as Ot,f as _r,g as Cr,h as Ae,i as yo,j as O8,k as $p,l as b7e,d as Pi,m as lA}from"./chunk-DsYbGKja.js";import{I as E7e}from"./chunk-BkD7Hj8s.js";import{e as Rc,c as KV,a as x7e,b as S7e,n as T7e,f as $re,g as A7e,d as qE,h as w7e}from"./chunk-yQcwDFE8.js";import{a as OK}from"./chunk-d4Eu7_zm.js";import{p as iv}from"./chunk-CSVzDSO0.js";import{m as Nd,a as _o,d as O7e,r as C7e}from"./chunk-CyDA0WRY.js";import{c as CK,l as xw}from"./chunk-BuDPUeRL.js";import{f as $x}from"./chunk-D2nGpDRe.js";import{c as ca,d as R7e}from"./chunk-1LCcg9PS.js";import{R as aTe,r as M7e,d as P7e,e as N7e,y as Hre,z as Gre,C as I7e,n as KL,h as L7e,t as k7e,b as D7e,A as B7e,B as F7e,q as RK,v as oTe,m as sTe,o as lTe,k as cTe,s as uTe,l as fTe}from"./chunk-_gMROmfM.js";import{a as QV}from"./chunk-BEmiJd4I.js";import{r as YT}from"./chunk-OtVwhkKS.js";import{_ as JV}from"./chunk-BuZVacDv.js";import{L as U7e,i as y3}from"./chunk-BrhG_RNf.js";import{s as J_,h as mP,w as j7e,f as kF,a as hTe,b as dTe,p as Wre,e as Vre,n as Yre,z as pTe,d as z7e,c as Xre}from"./chunk-DNKO0ees.js";function gTe(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}function vTe(t,e){let n=0;for(let r of t)r!=null&&(r=+r)>=r&&++n;return n}function $7e(t,e){let n=0,r,i=0,a=0;if(e===void 0)for(let o of t)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,a+=r*(o-i));else{let o=-1;for(let s of t)(s=e(s,++o,t))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,a+=r*(s-i))}if(n>1)return a/(n-1)}function mTe(t,e){const n=$7e(t,e);return n&&Math.sqrt(n)}function fy(t,e){let n,r;if(e===void 0)for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class cx{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const a=n[i],o=e+a,s=Math.abs(e)<Math.abs(a)?e-(o-a):a-(o-e);s&&(n[r++]=s),e=o}return n[r]=e,this._n=r+1,this}valueOf(){const e=this._partials;let n=this._n,r,i,a,o=0;if(n>0){for(o=e[--n];n>0&&(r=o,i=e[--n],o=r+i,a=i-(o-r),!a););n>0&&(a<0&&e[n-1]<0||a>0&&e[n-1]>0)&&(i=a*2,r=o+i,i==r-o&&(o=r))}return o}}function _R(t){return t}function Go(t,...e){return DF(t,_R,_R,e)}function MK(t,...e){return DF(t,Array.from,_R,e)}function PK(t,e,...n){return DF(t,_R,e,n)}function NK(t,e,...n){return DF(t,Array.from,e,n)}function DF(t,e,n,r){return(function i(a,o){if(o>=r.length)return n(a);const s=new E7e,l=r[o++];let c=-1;for(const u of a){const f=l(u,++c,a),h=s.get(f);h?h.push(u):s.set(f,[u])}for(const[u,f]of s)s.set(u,i(f,o));return e(s)})(t,0)}function H7e(t,e){return Array.from(e,n=>t[n])}function Xg(t,...e){if(typeof t[Symbol.iterator]!="function")throw new TypeError("values is not iterable");t=Array.from(t);let[n]=e;if(n&&n.length!==2||e.length>1){const r=Uint32Array.from(t,(i,a)=>a);return e.length>1?(e=e.map(i=>t.map(i)),r.sort((i,a)=>{for(const o of e){const s=bR(o[i],o[a]);if(s)return s}})):(n=t.map(n),r.sort((i,a)=>bR(n[i],n[a]))),H7e(t,r)}return t.sort(yTe(n))}function yTe(t=Rc){if(t===Rc)return bR;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function bR(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}function G7e(t,e,n){return(e.length!==2?Xg(PK(t,e,n),(([r,i],[a,o])=>Rc(i,o)||Rc(r,a))):Xg(Go(t,n),(([r,i],[a,o])=>e(i,o)||Rc(r,a)))).map(([r])=>r)}var W7e=Array.prototype,V7e=W7e.slice;function C8(t){return()=>t}function Y7e(t,e,n){let r;for(;;){const i=KV(t,e,n);if(i===r||i===0||!isFinite(i))return[t,e];i>0?(t=Math.floor(t/i)*i,e=Math.ceil(e/i)*i):i<0&&(t=Math.ceil(t*i)/i,e=Math.floor(e*i)/i),r=i}}function X7e(t){return Math.max(1,Math.ceil(Math.log(vTe(t))/Math.LN2)+1)}function q7e(){var t=_R,e=fy,n=X7e;function r(i){Array.isArray(i)||(i=Array.from(i));var a,o=i.length,s,l,c=new Array(o);for(a=0;a<o;++a)c[a]=t(i[a],a,i);var u=e(c),f=u[0],h=u[1],d=n(c,f,h);if(!Array.isArray(d)){const E=h,x=+d;if(e===fy&&([f,h]=Y7e(f,h,x)),d=x7e(f,h,x),d[0]<=f&&(l=KV(f,h,x)),d[d.length-1]>=h)if(E>=h&&e===fy){const T=KV(f,h,x);isFinite(T)&&(T>0?h=(Math.floor(h/T)+1)*T:T<0&&(h=(Math.ceil(h*-T)+1)/-T))}else d.pop()}for(var p=d.length,g=0,v=p;d[g]<=f;)++g;for(;d[v-1]>h;)--v;(g||v<p)&&(d=d.slice(g,v),p=v-g);var y=new Array(p+1),_;for(a=0;a<=p;++a)_=y[a]=[],_.x0=a>0?d[a-1]:f,_.x1=a<p?d[a]:h;if(isFinite(l)){if(l>0)for(a=0;a<o;++a)(s=c[a])!=null&&f<=s&&s<=h&&y[Math.min(p,Math.floor((s-f)/l))].push(i[a]);else if(l<0){for(a=0;a<o;++a)if((s=c[a])!=null&&f<=s&&s<=h){const E=Math.floor((f-s)*l);y[Math.min(p,E+(d[E]<=s))].push(i[a])}}}else for(a=0;a<o;++a)(s=c[a])!=null&&f<=s&&s<=h&&y[S7e(d,s,0,p)].push(i[a]);return y}return r.value=function(i){return arguments.length?(t=typeof i=="function"?i:C8(i),r):t},r.domain=function(i){return arguments.length?(e=typeof i=="function"?i:C8([i[0],i[1]]),r):e},r.thresholds=function(i){return arguments.length?(n=typeof i=="function"?i:C8(Array.isArray(i)?V7e.call(i):i),r):n},r}function Sw(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n<a||n===void 0&&a>=a)&&(n=a,r=i);return r}function yP(t,e){let n,r=-1,i=-1;if(e===void 0)for(const a of t)++i,a!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);else for(let a of t)(a=e(a,++i,t))!=null&&(n>a||n===void 0&&a>=a)&&(n=a,r=i);return r}function IK(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?bR:yTe(i);r>n;){if(r-n>600){const l=r-n+1,c=e-n+1,u=Math.log(l),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(l-f)/l)*(c-l/2<0?-1:1),d=Math.max(n,Math.floor(e-c*f/l+h)),p=Math.min(r,Math.floor(e+(l-c)*f/l+h));IK(t,e,d,p,i)}const a=t[e];let o=n,s=r;for(qO(t,n,e),i(t[r],a)>0&&qO(t,n,r);o<s;){for(qO(t,o,s),++o,--s;i(t[o],a)<0;)++o;for(;i(t[s],a)>0;)--s}i(t[n],a)===0?qO(t,n,s):(++s,qO(t,s,r)),s<=e&&(n=s+1),e<=s&&(r=s-1)}return t}function qO(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Z7e(t,e=Rc){let n,r=!1;if(e.length===1){let i;for(const a of t){const o=e(a);(r?Rc(o,i)>0:Rc(o,o)===0)&&(n=a,i=o,r=!0)}}else for(const i of t)(r?e(i,n)>0:e(i,i)===0)&&(n=i,r=!0);return n}function BF(t,e,n){if(t=Float64Array.from(T7e(t,n)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return Nd(t);if(e>=1)return _o(t);var r,i=(r-1)*e,a=Math.floor(i),o=_o(IK(t,a).subarray(0,a+1)),s=Nd(t.subarray(a+1));return o+(s-o)*(i-a)}}function K7e(t,e,n=$re){if(!isNaN(e=+e)){if(r=Float64Array.from(t,(s,l)=>$re(n(t[l],l,t))),e<=0)return yP(r);if(e>=1)return Sw(r);var r,i=Uint32Array.from(t,(s,l)=>l),a=r.length-1,o=Math.floor(a*e);return IK(i,o,0,a,(s,l)=>bR(r[s],r[l])),o=Z7e(i.subarray(0,o+1),s=>r[s]),o>=0?o:-1}}function Q7e(t,e,n){const r=vTe(t),i=mTe(t);return r&&i?Math.ceil((n-e)*Math.cbrt(r)/(3.49*i)):1}function ER(t,e){let n=0,r=0;if(e===void 0)for(let i of t)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of t)(a=e(a,++i,t))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function LK(t,e){return BF(t,.5,e)}function J7e(t,e){return K7e(t,.5,e)}function*eUe(t){for(const e of t)yield*e}function _Te(t){return Array.from(eUe(t))}function jp(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}var bTe=-.14861,kK=1.78277,DK=-.29227,FF=-.90649,xR=1.97294,qre=xR*FF,Zre=xR*kK,Kre=kK*DK-FF*bTe;function tUe(t){if(t instanceof ZE)return new ZE(t.h,t.s,t.l,t.opacity);t instanceof aTe||(t=M7e(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(Kre*r+qre*e-Zre*n)/(Kre+qre-Zre),a=r-i,o=(xR*(n-i)-DK*a)/FF,s=Math.sqrt(o*o+a*a)/(xR*i*(1-i)),l=s?Math.atan2(o,a)*O7e-120:NaN;return new ZE(l<0?l+360:l,s,i,t.opacity)}function Um(t,e,n,r){return arguments.length===1?tUe(t):new ZE(t,e,n,r??1)}function ZE(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}P7e(ZE,Um,N7e(I7e,{brighter(t){return t=t==null?Gre:Math.pow(Gre,t),new ZE(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Hre:Math.pow(Hre,t),new ZE(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*C7e,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new aTe(255*(e+n*(bTe*r+kK*i)),255*(e+n*(DK*r+FF*i)),255*(e+n*(xR*r)),this.opacity)}}));function ETe(t){return(function e(n){n=+n;function r(i,a){var o=t((i=Um(i)).h,(a=Um(a)).h),s=KL(i.s,a.s),l=KL(i.l,a.l),c=KL(i.opacity,a.opacity);return function(u){return i.h=o(u),i.s=s(u),i.l=l(Math.pow(u,n)),i.opacity=c(u),i+""}}return r.gamma=e,r})(1)}ETe(L7e);var BK=ETe(KL);const hy=11102230246251565e-32,qu=134217729,nUe=(3+8*hy)*hy;function R8(t,e,n,r,i){let a,o,s,l,c=e[0],u=r[0],f=0,h=0;u>c==u>-c?(a=c,c=e[++f]):(a=u,u=r[++h]);let d=0;if(f<t&&h<n)for(u>c==u>-c?(o=c+a,s=a-(o-c),c=e[++f]):(o=u+a,s=a-(o-u),u=r[++h]),a=o,s!==0&&(i[d++]=s);f<t&&h<n;)u>c==u>-c?(o=a+c,l=o-a,s=a-(o-l)+(c-l),c=e[++f]):(o=a+u,l=o-a,s=a-(o-l)+(u-l),u=r[++h]),a=o,s!==0&&(i[d++]=s);for(;f<t;)o=a+c,l=o-a,s=a-(o-l)+(c-l),c=e[++f],a=o,s!==0&&(i[d++]=s);for(;h<n;)o=a+u,l=o-a,s=a-(o-l)+(u-l),u=r[++h],a=o,s!==0&&(i[d++]=s);return(a!==0||d===0)&&(i[d++]=a),d}function rUe(t,e){let n=e[0];for(let r=1;r<t;r++)n+=e[r];return n}function _P(t){return new Float64Array(t)}const iUe=(3+16*hy)*hy,aUe=(2+12*hy)*hy,oUe=(9+64*hy)*hy*hy,lT=_P(4),Qre=_P(8),Jre=_P(12),eie=_P(16),Lf=_P(4);function sUe(t,e,n,r,i,a,o){let s,l,c,u,f,h,d,p,g,v,y,_,E,x,T,S,w,C;const D=t-i,L=n-i,B=e-a,I=r-a;x=D*I,h=qu*D,d=h-(h-D),p=D-d,h=qu*I,g=h-(h-I),v=I-g,T=p*v-(x-d*g-p*g-d*v),S=B*L,h=qu*B,d=h-(h-B),p=B-d,h=qu*L,g=h-(h-L),v=L-g,w=p*v-(S-d*g-p*g-d*v),y=T-w,f=T-y,lT[0]=T-(y+f)+(f-w),_=x+y,f=_-x,E=x-(_-f)+(y-f),y=E-S,f=E-y,lT[1]=E-(y+f)+(f-S),C=_+y,f=C-_,lT[2]=_-(C-f)+(y-f),lT[3]=C;let U=rUe(4,lT),$=aUe*o;if(U>=$||-U>=$||(f=t-D,s=t-(D+f)+(f-i),f=n-L,c=n-(L+f)+(f-i),f=e-B,l=e-(B+f)+(f-a),f=r-I,u=r-(I+f)+(f-a),s===0&&l===0&&c===0&&u===0)||($=oUe*o+nUe*Math.abs(U),U+=D*u+I*s-(B*c+L*l),U>=$||-U>=$))return U;x=s*I,h=qu*s,d=h-(h-s),p=s-d,h=qu*I,g=h-(h-I),v=I-g,T=p*v-(x-d*g-p*g-d*v),S=l*L,h=qu*l,d=h-(h-l),p=l-d,h=qu*L,g=h-(h-L),v=L-g,w=p*v-(S-d*g-p*g-d*v),y=T-w,f=T-y,Lf[0]=T-(y+f)+(f-w),_=x+y,f=_-x,E=x-(_-f)+(y-f),y=E-S,f=E-y,Lf[1]=E-(y+f)+(f-S),C=_+y,f=C-_,Lf[2]=_-(C-f)+(y-f),Lf[3]=C;const X=R8(4,lT,4,Lf,Qre);x=D*u,h=qu*D,d=h-(h-D),p=D-d,h=qu*u,g=h-(h-u),v=u-g,T=p*v-(x-d*g-p*g-d*v),S=B*c,h=qu*B,d=h-(h-B),p=B-d,h=qu*c,g=h-(h-c),v=c-g,w=p*v-(S-d*g-p*g-d*v),y=T-w,f=T-y,Lf[0]=T-(y+f)+(f-w),_=x+y,f=_-x,E=x-(_-f)+(y-f),y=E-S,f=E-y,Lf[1]=E-(y+f)+(f-S),C=_+y,f=C-_,Lf[2]=_-(C-f)+(y-f),Lf[3]=C;const N=R8(X,Qre,4,Lf,Jre);x=s*u,h=qu*s,d=h-(h-s),p=s-d,h=qu*u,g=h-(h-u),v=u-g,T=p*v-(x-d*g-p*g-d*v),S=l*c,h=qu*l,d=h-(h-l),p=l-d,h=qu*c,g=h-(h-c),v=c-g,w=p*v-(S-d*g-p*g-d*v),y=T-w,f=T-y,Lf[0]=T-(y+f)+(f-w),_=x+y,f=_-x,E=x-(_-f)+(y-f),y=E-S,f=E-y,Lf[1]=E-(y+f)+(f-S),C=_+y,f=C-_,Lf[2]=_-(C-f)+(y-f),Lf[3]=C;const M=R8(N,Jre,4,Lf,eie);return eie[M-1]}function lUe(t,e,n,r,i,a){const o=(e-a)*(n-i),s=(t-i)*(r-a),l=o-s,c=Math.abs(o+s);return Math.abs(l)>=iUe*c?l:-sUe(t,e,n,r,i,a,c)}var tie={},M8={},P8=34,ZO=10,N8=13;function xTe(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function cUe(t,e){var n=xTe(t);return function(r,i){return e(n(r),i,t)}}function nie(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Th(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function uUe(t){return t<0?"-"+Th(-t,6):t>9999?"+"+Th(t,6):Th(t,4)}function fUe(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":uUe(t.getUTCFullYear())+"-"+Th(t.getUTCMonth()+1,2)+"-"+Th(t.getUTCDate(),2)+(i?"T"+Th(e,2)+":"+Th(n,2)+":"+Th(r,2)+"."+Th(i,3)+"Z":r?"T"+Th(e,2)+":"+Th(n,2)+":"+Th(r,2)+"Z":n||e?"T"+Th(e,2)+":"+Th(n,2)+"Z":"")}function hUe(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var d,p,g=i(f,function(v,y){if(d)return d(v,y-1);p=v,d=h?cUe(v,h):xTe(v)});return g.columns=p||[],g}function i(f,h){var d=[],p=f.length,g=0,v=0,y,_=p<=0,E=!1;f.charCodeAt(p-1)===ZO&&--p,f.charCodeAt(p-1)===N8&&--p;function x(){if(_)return M8;if(E)return E=!1,tie;var S,w=g,C;if(f.charCodeAt(w)===P8){for(;g++<p&&f.charCodeAt(g)!==P8||f.charCodeAt(++g)===P8;);return(S=g)>=p?_=!0:(C=f.charCodeAt(g++))===ZO?E=!0:C===N8&&(E=!0,f.charCodeAt(g)===ZO&&++g),f.slice(w+1,S-1).replace(/""/g,'"')}for(;g<p;){if((C=f.charCodeAt(S=g++))===ZO)E=!0;else if(C===N8)E=!0,f.charCodeAt(g)===ZO&&++g;else if(C!==n)continue;return f.slice(w,S)}return _=!0,f.slice(w,p)}for(;(y=x())!==M8;){for(var T=[];y!==tie&&y!==M8;)T.push(y),y=x();h&&(T=h(T,v++))==null||d.push(T)}return d}function a(f,h){return f.map(function(d){return h.map(function(p){return u(d[p])}).join(t)})}function o(f,h){return h==null&&(h=nie(f)),[h.map(u).join(t)].concat(a(f,h)).join(`
`)}function s(f,h){return h==null&&(h=nie(f)),a(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?fUe(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:c,formatValue:u}}function dUe(t){for(var e in t){var n=t[e].trim(),r,i;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(r=+n))n=r;else if(i=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))pUe&&i[4]&&!i[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}const pUe=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function STe(t,e){var n,r=1;t==null&&(t=0),e==null&&(e=0);function i(){var a,o=n.length,s,l=0,c=0;for(a=0;a<o;++a)s=n[a],l+=s.x,c+=s.y;for(l=(l/o-t)*r,c=(c/o-e)*r,a=0;a<o;++a)s=n[a],s.x-=l,s.y-=c}return i.initialize=function(a){n=a},i.x=function(a){return arguments.length?(t=+a,i):t},i.y=function(a){return arguments.length?(e=+a,i):e},i.strength=function(a){return arguments.length?(r=+a,i):r},i}function gUe(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return TTe(this.cover(e,n),e,n,t)}function TTe(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a=t._root,o={data:r},s=t._x0,l=t._y0,c=t._x1,u=t._y1,f,h,d,p,g,v,y,_;if(!a)return t._root=o,t;for(;a.length;)if((g=e>=(f=(s+c)/2))?s=f:c=f,(v=n>=(h=(l+u)/2))?l=h:u=h,i=a,!(a=a[y=v<<1|g]))return i[y]=o,t;if(d=+t._x.call(null,a.data),p=+t._y.call(null,a.data),e===d&&n===p)return o.next=a,i?i[y]=o:t._root=o,t;do i=i?i[y]=new Array(4):t._root=new Array(4),(g=e>=(f=(s+c)/2))?s=f:c=f,(v=n>=(h=(l+u)/2))?l=h:u=h;while((y=v<<1|g)===(_=(p>=h)<<1|d>=f));return i[_]=a,i[y]=o,t}function vUe(t){var e,n,r=t.length,i,a,o=new Array(r),s=new Array(r),l=1/0,c=1/0,u=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(a=+this._y.call(null,e))||(o[n]=i,s[n]=a,i<l&&(l=i),i>u&&(u=i),a<c&&(c=a),a>f&&(f=a));if(l>u||c>f)return this;for(this.cover(l,c).cover(u,f),n=0;n<r;++n)TTe(this,o[n],s[n],t[n]);return this}function mUe(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{for(var o=i-n||1,s=this._root,l,c;n>t||t>=i||r>e||e>=a;)switch(c=(e<r)<<1|t<n,l=new Array(4),l[c]=s,s=l,o*=2,c){case 0:i=n+o,a=r+o;break;case 1:n=i-o,a=r+o;break;case 2:i=n+o,r=a-o;break;case 3:n=i-o,r=a-o;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function yUe(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function _Ue(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Gf(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function bUe(t,e,n){var r,i=this._x0,a=this._y0,o,s,l,c,u=this._x1,f=this._y1,h=[],d=this._root,p,g;for(d&&h.push(new Gf(d,i,a,u,f)),n==null?n=1/0:(i=t-n,a=e-n,u=t+n,f=e+n,n*=n);p=h.pop();)if(!(!(d=p.node)||(o=p.x0)>u||(s=p.y0)>f||(l=p.x1)<i||(c=p.y1)<a))if(d.length){var v=(o+l)/2,y=(s+c)/2;h.push(new Gf(d[3],v,y,l,c),new Gf(d[2],o,y,v,c),new Gf(d[1],v,s,l,y),new Gf(d[0],o,s,v,y)),(g=(e>=y)<<1|t>=v)&&(p=h[h.length-1],h[h.length-1]=h[h.length-1-g],h[h.length-1-g]=p)}else{var _=t-+this._x.call(null,d.data),E=e-+this._y.call(null,d.data),x=_*_+E*E;if(x<n){var T=Math.sqrt(n=x);i=t-T,a=e-T,u=t+T,f=e+T,r=d.data}}return r}function EUe(t){if(isNaN(u=+this._x.call(null,t))||isNaN(f=+this._y.call(null,t)))return this;var e,n=this._root,r,i,a,o=this._x0,s=this._y0,l=this._x1,c=this._y1,u,f,h,d,p,g,v,y;if(!n)return this;if(n.length)for(;;){if((p=u>=(h=(o+l)/2))?o=h:l=h,(g=f>=(d=(s+c)/2))?s=d:c=d,e=n,!(n=n[v=g<<1|p]))return this;if(!n.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(r=e,y=v)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[v]=a:delete e[v],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=a,this)}function xUe(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function SUe(){return this._root}function TUe(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function AUe(t){var e=[],n,r=this._root,i,a,o,s,l;for(r&&e.push(new Gf(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,a=n.x0,o=n.y0,s=n.x1,l=n.y1)&&r.length){var c=(a+s)/2,u=(o+l)/2;(i=r[3])&&e.push(new Gf(i,c,u,s,l)),(i=r[2])&&e.push(new Gf(i,a,u,c,l)),(i=r[1])&&e.push(new Gf(i,c,o,s,u)),(i=r[0])&&e.push(new Gf(i,a,o,c,u))}return this}function wUe(t){var e=[],n=[],r;for(this._root&&e.push(new Gf(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,l=r.x1,c=r.y1,u=(o+l)/2,f=(s+c)/2;(a=i[0])&&e.push(new Gf(a,o,s,u,f)),(a=i[1])&&e.push(new Gf(a,u,s,l,f)),(a=i[2])&&e.push(new Gf(a,o,f,u,c)),(a=i[3])&&e.push(new Gf(a,u,f,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function OUe(t){return t[0]}function CUe(t){return arguments.length?(this._x=t,this):this._x}function RUe(t){return t[1]}function MUe(t){return arguments.length?(this._y=t,this):this._y}function UF(t,e,n){var r=new FK(e??OUe,n??RUe,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function FK(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function rie(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Qf=UF.prototype=FK.prototype;Qf.copy=function(){var t=new FK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=rie(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=rie(r));return t};Qf.add=gUe;Qf.addAll=vUe;Qf.cover=mUe;Qf.data=yUe;Qf.extent=_Ue;Qf.find=bUe;Qf.remove=EUe;Qf.removeAll=xUe;Qf.root=SUe;Qf.size=TUe;Qf.visit=AUe;Qf.visitAfter=wUe;Qf.x=CUe;Qf.y=MUe;function Nc(t){return function(){return t}}function m_(t){return(t()-.5)*1e-6}function PUe(t){return t.x+t.vx}function NUe(t){return t.y+t.vy}function ATe(t){var e,n,r,i=1,a=1;typeof t!="function"&&(t=Nc(t==null?1:+t));function o(){for(var c,u=e.length,f,h,d,p,g,v,y=0;y<a;++y)for(f=UF(e,PUe,NUe).visitAfter(s),c=0;c<u;++c)h=e[c],g=n[h.index],v=g*g,d=h.x+h.vx,p=h.y+h.vy,f.visit(_);function _(E,x,T,S,w){var C=E.data,D=E.r,L=g+D;if(C){if(C.index>h.index){var B=d-C.x-C.vx,I=p-C.y-C.vy,U=B*B+I*I;U<L*L&&(B===0&&(B=m_(r),U+=B*B),I===0&&(I=m_(r),U+=I*I),U=(L-(U=Math.sqrt(U)))/U*i,h.vx+=(B*=U)*(L=(D*=D)/(v+D)),h.vy+=(I*=U)*L,C.vx-=B*(L=1-L),C.vy-=I*L)}return}return x>d+L||S<d-L||T>p+L||w<p-L}}function s(c){if(c.data)return c.r=n[c.data.index];for(var u=c.r=0;u<4;++u)c[u]&&c[u].r>c.r&&(c.r=c[u].r)}function l(){if(e){var c,u=e.length,f;for(n=new Array(u),c=0;c<u;++c)f=e[c],n[f.index]=+t(f,c,e)}}return o.initialize=function(c,u){e=c,r=u,l()},o.iterations=function(c){return arguments.length?(a=+c,o):a},o.strength=function(c){return arguments.length?(i=+c,o):i},o.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Nc(+c),l(),o):t},o}function IUe(t){return t.index}function iie(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function wTe(t){var e=IUe,n=f,r,i=Nc(30),a,o,s,l,c,u=1;t==null&&(t=[]);function f(v){return 1/Math.min(s[v.source.index],s[v.target.index])}function h(v){for(var y=0,_=t.length;y<u;++y)for(var E=0,x,T,S,w,C,D,L;E<_;++E)x=t[E],T=x.source,S=x.target,w=S.x+S.vx-T.x-T.vx||m_(c),C=S.y+S.vy-T.y-T.vy||m_(c),D=Math.sqrt(w*w+C*C),D=(D-a[E])/D*v*r[E],w*=D,C*=D,S.vx-=w*(L=l[E]),S.vy-=C*L,T.vx+=w*(L=1-L),T.vy+=C*L}function d(){if(o){var v,y=o.length,_=t.length,E=new Map(o.map((T,S)=>[e(T,S,o),T])),x;for(v=0,s=new Array(y);v<_;++v)x=t[v],x.index=v,typeof x.source!="object"&&(x.source=iie(E,x.source)),typeof x.target!="object"&&(x.target=iie(E,x.target)),s[x.source.index]=(s[x.source.index]||0)+1,s[x.target.index]=(s[x.target.index]||0)+1;for(v=0,l=new Array(_);v<_;++v)x=t[v],l[v]=s[x.source.index]/(s[x.source.index]+s[x.target.index]);r=new Array(_),p(),a=new Array(_),g()}}function p(){if(o)for(var v=0,y=t.length;v<y;++v)r[v]=+n(t[v],v,t)}function g(){if(o)for(var v=0,y=t.length;v<y;++v)a[v]=+i(t[v],v,t)}return h.initialize=function(v,y){o=v,c=y,d()},h.links=function(v){return arguments.length?(t=v,d(),h):t},h.id=function(v){return arguments.length?(e=v,h):e},h.iterations=function(v){return arguments.length?(u=+v,h):u},h.strength=function(v){return arguments.length?(n=typeof v=="function"?v:Nc(+v),p(),h):n},h.distance=function(v){return arguments.length?(i=typeof v=="function"?v:Nc(+v),g(),h):i},h}const LUe=1664525,kUe=1013904223,aie=4294967296;function DUe(){let t=1;return()=>(t=(LUe*t+kUe)%aie)/aie}function BUe(t){return t.x}function FUe(t){return t.y}var UUe=10,jUe=Math.PI*(3-Math.sqrt(5));function UK(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),a=0,o=.6,s=new Map,l=k7e(f),c=D7e("tick","end"),u=DUe();t==null&&(t=[]);function f(){h(),c.call("tick",e),n<r&&(l.stop(),c.call("end",e))}function h(g){var v,y=t.length,_;g===void 0&&(g=1);for(var E=0;E<g;++E)for(n+=(a-n)*i,s.forEach(function(x){x(n)}),v=0;v<y;++v)_=t[v],_.fx==null?_.x+=_.vx*=o:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=o:(_.y=_.fy,_.vy=0);return e}function d(){for(var g=0,v=t.length,y;g<v;++g){if(y=t[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var _=UUe*Math.sqrt(.5+g),E=g*jUe;y.x=_*Math.cos(E),y.y=_*Math.sin(E)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(g){return g.initialize&&g.initialize(t,u),g}return d(),e={tick:h,restart:function(){return l.restart(f),e},stop:function(){return l.stop(),e},nodes:function(g){return arguments.length?(t=g,d(),s.forEach(p),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(r=+g,e):r},alphaDecay:function(g){return arguments.length?(i=+g,e):+i},alphaTarget:function(g){return arguments.length?(a=+g,e):a},velocityDecay:function(g){return arguments.length?(o=1-g,e):1-o},randomSource:function(g){return arguments.length?(u=g,s.forEach(p),e):u},force:function(g,v){return arguments.length>1?(v==null?s.delete(g):s.set(g,p(v)),e):s.get(g)},find:function(g,v,y){var _=0,E=t.length,x,T,S,w,C;for(y==null?y=1/0:y*=y,_=0;_<E;++_)w=t[_],x=g-w.x,T=v-w.y,S=x*x+T*T,S<y&&(C=w,y=S);return C},on:function(g,v){return arguments.length>1?(c.on(g,v),e):c.on(g)}}}function OTe(){var t,e,n,r,i=Nc(-30),a,o=1,s=1/0,l=.81;function c(d){var p,g=t.length,v=UF(t,BUe,FUe).visitAfter(f);for(r=d,p=0;p<g;++p)e=t[p],v.visit(h)}function u(){if(t){var d,p=t.length,g;for(a=new Array(p),d=0;d<p;++d)g=t[d],a[g.index]=+i(g,d,t)}}function f(d){var p=0,g,v,y=0,_,E,x;if(d.length){for(_=E=x=0;x<4;++x)(g=d[x])&&(v=Math.abs(g.value))&&(p+=g.value,y+=v,_+=v*g.x,E+=v*g.y);d.x=_/y,d.y=E/y}else{g=d,g.x=g.data.x,g.y=g.data.y;do p+=a[g.data.index];while(g=g.next)}d.value=p}function h(d,p,g,v){if(!d.value)return!0;var y=d.x-e.x,_=d.y-e.y,E=v-p,x=y*y+_*_;if(E*E/l<x)return x<s&&(y===0&&(y=m_(n),x+=y*y),_===0&&(_=m_(n),x+=_*_),x<o&&(x=Math.sqrt(o*x)),e.vx+=y*d.value*r/x,e.vy+=_*d.value*r/x),!0;if(d.length||x>=s)return;(d.data!==e||d.next)&&(y===0&&(y=m_(n),x+=y*y),_===0&&(_=m_(n),x+=_*_),x<o&&(x=Math.sqrt(o*x)));do d.data!==e&&(E=a[d.data.index]*r/x,e.vx+=y*E,e.vy+=_*E);while(d=d.next)}return c.initialize=function(d,p){t=d,n=p,u()},c.strength=function(d){return arguments.length?(i=typeof d=="function"?d:Nc(+d),u(),c):i},c.distanceMin=function(d){return arguments.length?(o=d*d,c):Math.sqrt(o)},c.distanceMax=function(d){return arguments.length?(s=d*d,c):Math.sqrt(s)},c.theta=function(d){return arguments.length?(l=d*d,c):Math.sqrt(l)},c}function zUe(t,e,n){var r,i=Nc(.1),a,o;typeof t!="function"&&(t=Nc(+t)),e==null&&(e=0),n==null&&(n=0);function s(c){for(var u=0,f=r.length;u<f;++u){var h=r[u],d=h.x-e||1e-6,p=h.y-n||1e-6,g=Math.sqrt(d*d+p*p),v=(o[u]-g)*a[u]*c/g;h.vx+=d*v,h.vy+=p*v}}function l(){if(r){var c,u=r.length;for(a=new Array(u),o=new Array(u),c=0;c<u;++c)o[c]=+t(r[c],c,r),a[c]=isNaN(o[c])?0:+i(r[c],c,r)}}return s.initialize=function(c){r=c,l()},s.strength=function(c){return arguments.length?(i=typeof c=="function"?c:Nc(+c),l(),s):i},s.radius=function(c){return arguments.length?(t=typeof c=="function"?c:Nc(+c),l(),s):t},s.x=function(c){return arguments.length?(e=+c,s):e},s.y=function(c){return arguments.length?(n=+c,s):n},s}function jK(t){var e=Nc(.1),n,r,i;typeof t!="function"&&(t=Nc(t==null?0:+t));function a(s){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vx+=(i[l]-u.x)*r[l]*s}function o(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Nc(+s),o(),a):e},a.x=function(s){return arguments.length?(t=typeof s=="function"?s:Nc(+s),o(),a):t},a}function zK(t){var e=Nc(.1),n,r,i;typeof t!="function"&&(t=Nc(t==null?0:+t));function a(s){for(var l=0,c=n.length,u;l<c;++l)u=n[l],u.vy+=(i[l]-u.y)*r[l]*s}function o(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+t(n[s],s,n))?0:+e(n[s],s,n)}}return a.initialize=function(s){n=s,o()},a.strength=function(s){return arguments.length?(e=typeof s=="function"?s:Nc(+s),o(),a):e},a.y=function(s){return arguments.length?(t=typeof s=="function"?s:Nc(+s),o(),a):t},a}var Si=1e-6,CTe=1e-12,Ta=Math.PI,Ml=Ta/2,oie=Ta/4,Id=Ta*2,ef=180/Ta,cl=Ta/180,oo=Math.abs,Tw=Math.atan,by=Math.atan2,pa=Math.cos,_3=Math.ceil,RTe=Math.exp,Kk=Math.log,I8=Math.pow,ra=Math.sin,kp=Math.sign||function(t){return t>0?1:t<0?-1:0},zh=Math.sqrt,$K=Math.tan;function MTe(t){return t>1?0:t<-1?Ta:Math.acos(t)}function Hp(t){return t>1?Ml:t<-1?-Ml:Math.asin(t)}function Dp(){}function Qk(t,e){t&&lie.hasOwnProperty(t.type)&&lie[t.type](t,e)}var sie={Feature:function(t,e){Qk(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Qk(n[r].geometry,e)}},lie={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){eY(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)eY(n[r],e,0)},Polygon:function(t,e){cie(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)cie(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Qk(n[r],e)}};function eY(t,e,n){var r=-1,i=t.length-n,a;for(e.lineStart();++r<i;)a=t[r],e.point(a[0],a[1],a[2]);e.lineEnd()}function cie(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)eY(t[n],e,1);e.polygonEnd()}function UT(t,e){t&&sie.hasOwnProperty(t.type)?sie[t.type](t,e):Qk(t,e)}function tY(t){return[by(t[1],t[0]),Hp(t[2])]}function PA(t){var e=t[0],n=t[1],r=pa(n);return[r*pa(e),r*ra(e),ra(n)]}function b3(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Jk(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function L8(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function E3(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function nY(t){var e=zh(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function rY(t,e){function n(r,i){return r=t(r,i),e(r[0],r[1])}return t.invert&&e.invert&&(n.invert=function(r,i){return r=e.invert(r,i),r&&t.invert(r[0],r[1])}),n}function iY(t,e){return oo(t)>Ta&&(t-=Math.round(t/Id)*Id),[t,e]}iY.invert=iY;function PTe(t,e,n){return(t%=Id)?e||n?rY(fie(t),hie(e,n)):fie(t):e||n?hie(e,n):iY}function uie(t){return function(e,n){return e+=t,oo(e)>Ta&&(e-=Math.round(e/Id)*Id),[e,n]}}function fie(t){var e=uie(t);return e.invert=uie(-t),e}function hie(t,e){var n=pa(t),r=ra(t),i=pa(e),a=ra(e);function o(s,l){var c=pa(l),u=pa(s)*c,f=ra(s)*c,h=ra(l),d=h*n+u*r;return[by(f*i-d*a,u*n-h*r),Hp(d*i+f*a)]}return o.invert=function(s,l){var c=pa(l),u=pa(s)*c,f=ra(s)*c,h=ra(l),d=h*i-f*a;return[by(f*i+h*a,u*n+d*r),Hp(d*n-u*r)]},o}function $Ue(t){t=PTe(t[0]*cl,t[1]*cl,t.length>2?t[2]*cl:0);function e(n){return n=t(n[0]*cl,n[1]*cl),n[0]*=ef,n[1]*=ef,n}return e.invert=function(n){return n=t.invert(n[0]*cl,n[1]*cl),n[0]*=ef,n[1]*=ef,n},e}function HUe(t,e,n,r,i,a){if(n){var o=pa(e),s=ra(e),l=r*n;i==null?(i=e+r*Id,a=e-l/2):(i=die(o,i),a=die(o,a),(r>0?i<a:i>a)&&(i+=r*Id));for(var c,u=i;r>0?u>a:u<a;u-=l)c=tY([o,-s*pa(u),-s*ra(u)]),t.point(c[0],c[1])}}function die(t,e){e=PA(e),e[0]-=t,nY(e);var n=MTe(-e[1]);return((-e[2]<0?-n:n)+Id-Si)%Id}function NTe(){var t=[],e;return{point:function(n,r,i){e.push([n,r,i])},lineStart:function(){t.push(e=[])},lineEnd:Dp,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function QL(t,e){return oo(t[0]-e[0])<Si&&oo(t[1]-e[1])<Si}function x3(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ITe(t,e,n,r,i){var a=[],o=[],s,l;if(t.forEach(function(p){if(!((g=p.length-1)<=0)){var g,v=p[0],y=p[g],_;if(QL(v,y)){if(!v[2]&&!y[2]){for(i.lineStart(),s=0;s<g;++s)i.point((v=p[s])[0],v[1]);i.lineEnd();return}y[0]+=2*Si}a.push(_=new x3(v,p,null,!0)),o.push(_.o=new x3(v,null,_,!1)),a.push(_=new x3(y,p,null,!1)),o.push(_.o=new x3(y,null,_,!0))}}),!!a.length){for(o.sort(e),pie(a),pie(o),s=0,l=o.length;s<l;++s)o[s].e=n=!n;for(var c=a[0],u,f;;){for(var h=c,d=!0;h.v;)if((h=h.n)===c)return;u=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(s=0,l=u.length;s<l;++s)i.point((f=u[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(u=h.p.z,s=u.length-1;s>=0;--s)i.point((f=u[s])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,u=h.z,d=!d}while(!h.v);i.lineEnd()}}}function pie(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}function k8(t){return oo(t[0])<=Ta?t[0]:kp(t[0])*((oo(t[0])+Ta)%Id-Ta)}function GUe(t,e){var n=k8(e),r=e[1],i=ra(r),a=[ra(n),-pa(n),0],o=0,s=0,l=new cx;i===1?r=Ml+Si:i===-1&&(r=-Ml-Si);for(var c=0,u=t.length;c<u;++c)if(h=(f=t[c]).length)for(var f,h,d=f[h-1],p=k8(d),g=d[1]/2+oie,v=ra(g),y=pa(g),_=0;_<h;++_,p=x,v=S,y=w,d=E){var E=f[_],x=k8(E),T=E[1]/2+oie,S=ra(T),w=pa(T),C=x-p,D=C>=0?1:-1,L=D*C,B=L>Ta,I=v*S;if(l.add(by(I*D*ra(L),y*w+I*pa(L))),o+=B?C+D*Id:C,B^p>=n^x>=n){var U=Jk(PA(d),PA(E));nY(U);var $=Jk(a,U);nY($);var X=(B^C>=0?-1:1)*Hp($[2]);(r>X||r===X&&(U[0]||U[1]))&&(s+=B^C>=0?1:-1)}}return(o<-Si||o<Si&&l<-CTe)^s&1}function LTe(t,e,n,r){return function(i){var a=e(i),o=NTe(),s=e(o),l=!1,c,u,f,h={point:d,lineStart:g,lineEnd:v,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=E,u=[],c=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=v,u=_Te(u);var x=GUe(c,r);u.length?(l||(i.polygonStart(),l=!0),ITe(u,VUe,x,n,i)):x&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),u=c=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(x,T){t(x,T)&&i.point(x,T)}function p(x,T){a.point(x,T)}function g(){h.point=p,a.lineStart()}function v(){h.point=d,a.lineEnd()}function y(x,T){f.push([x,T]),s.point(x,T)}function _(){s.lineStart(),f=[]}function E(){y(f[0][0],f[0][1]),s.lineEnd();var x=s.clean(),T=o.result(),S,w=T.length,C,D,L;if(f.pop(),c.push(f),f=null,!!w){if(x&1){if(D=T[0],(C=D.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),S=0;S<C;++S)i.point((L=D[S])[0],L[1]);i.lineEnd()}return}w>1&&x&2&&T.push(T.pop().concat(T.shift())),u.push(T.filter(WUe))}}return h}}function WUe(t){return t.length>1}function VUe(t,e){return((t=t.x)[0]<0?t[1]-Ml-Si:Ml-t[1])-((e=e.x)[0]<0?e[1]-Ml-Si:Ml-e[1])}const gie=LTe(function(){return!0},YUe,qUe,[-Ta,-Ml]);function YUe(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(a,o){var s=a>0?Ta:-Ta,l=oo(a-e);oo(l-Ta)<Si?(t.point(e,n=(n+o)/2>0?Ml:-Ml),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(a,n),i=0):r!==s&&l>=Ta&&(oo(e-r)<Si&&(e-=r*Si),oo(a-s)<Si&&(a-=s*Si),n=XUe(e,n,a,o),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(s,n),i=0),t.point(e=a,n=o),r=s},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function XUe(t,e,n,r){var i,a,o=ra(t-n);return oo(o)>Si?Tw((ra(e)*(a=pa(r))*ra(n)-ra(r)*(i=pa(e))*ra(t))/(i*a*o)):(e+r)/2}function qUe(t,e,n,r){var i;if(t==null)i=n*Ml,r.point(-Ta,i),r.point(0,i),r.point(Ta,i),r.point(Ta,0),r.point(Ta,-i),r.point(0,-i),r.point(-Ta,-i),r.point(-Ta,0),r.point(-Ta,i);else if(oo(t[0]-e[0])>Si){var a=t[0]<e[0]?Ta:-Ta;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function ZUe(t){var e=pa(t),n=2*cl,r=e>0,i=oo(e)>Si;function a(u,f,h,d){HUe(d,t,n,h,u,f)}function o(u,f){return pa(u)*pa(f)>e}function s(u){var f,h,d,p,g;return{lineStart:function(){p=d=!1,g=1},point:function(v,y){var _=[v,y],E,x=o(v,y),T=r?x?0:c(v,y):x?c(v+(v<0?Ta:-Ta),y):0;if(!f&&(p=d=x)&&u.lineStart(),x!==d&&(E=l(f,_),(!E||QL(f,E)||QL(_,E))&&(_[2]=1)),x!==d)g=0,x?(u.lineStart(),E=l(_,f),u.point(E[0],E[1])):(E=l(f,_),u.point(E[0],E[1],2),u.lineEnd()),f=E;else if(i&&f&&r^x){var S;!(T&h)&&(S=l(_,f,!0))&&(g=0,r?(u.lineStart(),u.point(S[0][0],S[0][1]),u.point(S[1][0],S[1][1]),u.lineEnd()):(u.point(S[1][0],S[1][1]),u.lineEnd(),u.lineStart(),u.point(S[0][0],S[0][1],3)))}x&&(!f||!QL(f,_))&&u.point(_[0],_[1]),f=_,d=x,h=T},lineEnd:function(){d&&u.lineEnd(),f=null},clean:function(){return g|(p&&d)<<1}}}function l(u,f,h){var d=PA(u),p=PA(f),g=[1,0,0],v=Jk(d,p),y=b3(v,v),_=v[0],E=y-_*_;if(!E)return!h&&u;var x=e*y/E,T=-e*_/E,S=Jk(g,v),w=E3(g,x),C=E3(v,T);L8(w,C);var D=S,L=b3(w,D),B=b3(D,D),I=L*L-B*(b3(w,w)-1);if(!(I<0)){var U=zh(I),$=E3(D,(-L-U)/B);if(L8($,w),$=tY($),!h)return $;var X=u[0],N=f[0],M=u[1],k=f[1],z;N<X&&(z=X,X=N,N=z);var j=N-X,V=oo(j-Ta)<Si,Q=V||j<Si;if(!V&&k<M&&(z=M,M=k,k=z),Q?V?M+k>0^$[1]<(oo($[0]-X)<Si?M:k):M<=$[1]&&$[1]<=k:j>Ta^(X<=$[0]&&$[0]<=N)){var ee=E3(D,(-L+U)/B);return L8(ee,w),[$,tY(ee)]}}}function c(u,f){var h=r?t:Ta-t,d=0;return u<-h?d|=1:u>h&&(d|=2),f<-h?d|=4:f>h&&(d|=8),d}return LTe(o,s,a,r?[0,-t]:[-Ta,t-Ta])}function KUe(t,e,n,r,i,a){var o=t[0],s=t[1],l=e[0],c=e[1],u=0,f=1,h=l-o,d=c-s,p;if(p=n-o,!(!h&&p>0)){if(p/=h,h<0){if(p<u)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>u&&(u=p)}if(p=i-o,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>u&&(u=p)}else if(h>0){if(p<u)return;p<f&&(f=p)}if(p=r-s,!(!d&&p>0)){if(p/=d,d<0){if(p<u)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>u&&(u=p)}if(p=a-s,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>u&&(u=p)}else if(d>0){if(p<u)return;p<f&&(f=p)}return u>0&&(t[0]=o+u*h,t[1]=s+u*d),f<1&&(e[0]=o+f*h,e[1]=s+f*d),!0}}}}}var K2=1e9,S3=-K2;function kTe(t,e,n,r){function i(c,u){return t<=c&&c<=n&&e<=u&&u<=r}function a(c,u,f,h){var d=0,p=0;if(c==null||(d=o(c,f))!==(p=o(u,f))||l(c,u)<0^f>0)do h.point(d===0||d===3?t:n,d>1?r:e);while((d=(d+f+4)%4)!==p);else h.point(u[0],u[1])}function o(c,u){return oo(c[0]-t)<Si?u>0?0:3:oo(c[0]-n)<Si?u>0?2:1:oo(c[1]-e)<Si?u>0?1:0:u>0?3:2}function s(c,u){return l(c.x,u.x)}function l(c,u){var f=o(c,1),h=o(u,1);return f!==h?f-h:f===0?u[1]-c[1]:f===1?c[0]-u[0]:f===2?c[1]-u[1]:u[0]-c[0]}return function(c){var u=c,f=NTe(),h,d,p,g,v,y,_,E,x,T,S,w={point:C,lineStart:I,lineEnd:U,polygonStart:L,polygonEnd:B};function C(X,N){i(X,N)&&u.point(X,N)}function D(){for(var X=0,N=0,M=d.length;N<M;++N)for(var k=d[N],z=1,j=k.length,V=k[0],Q,ee,re=V[0],ne=V[1];z<j;++z)Q=re,ee=ne,V=k[z],re=V[0],ne=V[1],ee<=r?ne>r&&(re-Q)*(r-ee)>(ne-ee)*(t-Q)&&++X:ne<=r&&(re-Q)*(r-ee)<(ne-ee)*(t-Q)&&--X;return X}function L(){u=f,h=[],d=[],S=!0}function B(){var X=D(),N=S&&X,M=(h=_Te(h)).length;(N||M)&&(c.polygonStart(),N&&(c.lineStart(),a(null,null,1,c),c.lineEnd()),M&&ITe(h,s,X,a,c),c.polygonEnd()),u=c,h=d=p=null}function I(){w.point=$,d&&d.push(p=[]),T=!0,x=!1,_=E=NaN}function U(){h&&($(g,v),y&&x&&f.rejoin(),h.push(f.result())),w.point=C,x&&u.lineEnd()}function $(X,N){var M=i(X,N);if(d&&p.push([X,N]),T)g=X,v=N,y=M,T=!1,M&&(u.lineStart(),u.point(X,N));else if(M&&x)u.point(X,N);else{var k=[_=Math.max(S3,Math.min(K2,_)),E=Math.max(S3,Math.min(K2,E))],z=[X=Math.max(S3,Math.min(K2,X)),N=Math.max(S3,Math.min(K2,N))];KUe(k,z,t,e,n,r)?(x||(u.lineStart(),u.point(k[0],k[1])),u.point(z[0],z[1]),M||u.lineEnd(),S=!1):M&&(u.lineStart(),u.point(X,N),S=!1)}_=X,E=N,x=M}return w}}function vie(t,e,n){var r=YT(t,e-Si,n).concat(e);return function(i){return r.map(function(a){return[i,a]})}}function mie(t,e,n){var r=YT(t,e-Si,n).concat(e);return function(i){return r.map(function(a){return[a,i]})}}function QUe(){var t,e,n,r,i,a,o,s,l=10,c=l,u=90,f=360,h,d,p,g,v=2.5;function y(){return{type:"MultiLineString",coordinates:_()}}function _(){return YT(_3(r/u)*u,n,u).map(p).concat(YT(_3(s/f)*f,o,f).map(g)).concat(YT(_3(e/l)*l,t,l).filter(function(E){return oo(E%u)>Si}).map(h)).concat(YT(_3(a/c)*c,i,c).filter(function(E){return oo(E%f)>Si}).map(d))}return y.lines=function(){return _().map(function(E){return{type:"LineString",coordinates:E}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(g(o).slice(1),p(n).reverse().slice(1),g(s).reverse().slice(1))]}},y.extent=function(E){return arguments.length?y.extentMajor(E).extentMinor(E):y.extentMinor()},y.extentMajor=function(E){return arguments.length?(r=+E[0][0],n=+E[1][0],s=+E[0][1],o=+E[1][1],r>n&&(E=r,r=n,n=E),s>o&&(E=s,s=o,o=E),y.precision(v)):[[r,s],[n,o]]},y.extentMinor=function(E){return arguments.length?(e=+E[0][0],t=+E[1][0],a=+E[0][1],i=+E[1][1],e>t&&(E=e,e=t,t=E),a>i&&(E=a,a=i,i=E),y.precision(v)):[[e,a],[t,i]]},y.step=function(E){return arguments.length?y.stepMajor(E).stepMinor(E):y.stepMinor()},y.stepMajor=function(E){return arguments.length?(u=+E[0],f=+E[1],y):[u,f]},y.stepMinor=function(E){return arguments.length?(l=+E[0],c=+E[1],y):[l,c]},y.precision=function(E){return arguments.length?(v=+E,h=vie(a,i,90),d=mie(e,t,v),p=vie(s,o,90),g=mie(r,n,v),y):v},y.extentMajor([[-180,-90+Si],[180,90-Si]]).extentMinor([[-180,-80-Si],[180,80+Si]])}function JUe(){return QUe()()}const SR=t=>t;var D8=new cx,aY=new cx,DTe,BTe,oY,sY,ty={point:Dp,lineStart:Dp,lineEnd:Dp,polygonStart:function(){ty.lineStart=eje,ty.lineEnd=nje},polygonEnd:function(){ty.lineStart=ty.lineEnd=ty.point=Dp,D8.add(oo(aY)),aY=new cx},result:function(){var t=D8/2;return D8=new cx,t}};function eje(){ty.point=tje}function tje(t,e){ty.point=FTe,DTe=oY=t,BTe=sY=e}function FTe(t,e){aY.add(sY*t-oY*e),oY=t,sY=e}function nje(){FTe(DTe,BTe)}var NA=1/0,eD=NA,TR=-NA,tD=TR,nD={point:rje,lineStart:Dp,lineEnd:Dp,polygonStart:Dp,polygonEnd:Dp,result:function(){var t=[[NA,eD],[TR,tD]];return TR=tD=-(eD=NA=1/0),t}};function rje(t,e){t<NA&&(NA=t),t>TR&&(TR=t),e<eD&&(eD=e),e>tD&&(tD=e)}var lY=0,cY=0,Q2=0,rD=0,iD=0,XT=0,uY=0,fY=0,J2=0,UTe,jTe,_m,bm,Np={point:ux,lineStart:yie,lineEnd:_ie,polygonStart:function(){Np.lineStart=oje,Np.lineEnd=sje},polygonEnd:function(){Np.point=ux,Np.lineStart=yie,Np.lineEnd=_ie},result:function(){var t=J2?[uY/J2,fY/J2]:XT?[rD/XT,iD/XT]:Q2?[lY/Q2,cY/Q2]:[NaN,NaN];return lY=cY=Q2=rD=iD=XT=uY=fY=J2=0,t}};function ux(t,e){lY+=t,cY+=e,++Q2}function yie(){Np.point=ije}function ije(t,e){Np.point=aje,ux(_m=t,bm=e)}function aje(t,e){var n=t-_m,r=e-bm,i=zh(n*n+r*r);rD+=i*(_m+t)/2,iD+=i*(bm+e)/2,XT+=i,ux(_m=t,bm=e)}function _ie(){Np.point=ux}function oje(){Np.point=lje}function sje(){zTe(UTe,jTe)}function lje(t,e){Np.point=zTe,ux(UTe=_m=t,jTe=bm=e)}function zTe(t,e){var n=t-_m,r=e-bm,i=zh(n*n+r*r);rD+=i*(_m+t)/2,iD+=i*(bm+e)/2,XT+=i,i=bm*t-_m*e,uY+=i*(_m+t),fY+=i*(bm+e),J2+=i*3,ux(_m=t,bm=e)}function $Te(t){this._context=t}$Te.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Id);break}}},result:Dp};var hY=new cx,B8,HTe,GTe,eC,tC,AR={point:Dp,lineStart:function(){AR.point=cje},lineEnd:function(){B8&&WTe(HTe,GTe),AR.point=Dp},polygonStart:function(){B8=!0},polygonEnd:function(){B8=null},result:function(){var t=+hY;return hY=new cx,t}};function cje(t,e){AR.point=WTe,HTe=eC=t,GTe=tC=e}function WTe(t,e){eC-=t,tC-=e,hY.add(zh(eC*eC+tC*tC)),eC=t,tC=e}let bie,aD,Eie,xie;class Sie{constructor(e){this._append=e==null?VTe:uje(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(e,n){switch(this._point){case 0:{this._append`M${e},${n}`,this._point=1;break}case 1:{this._append`L${e},${n}`;break}default:{if(this._append`M${e},${n}`,this._radius!==Eie||this._append!==aD){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Eie=r,aD=this._append,xie=this._,this._=i}this._+=xie;break}}}result(){const e=this._;return this._="",e.length?e:null}}function VTe(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function uje(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return VTe;if(e!==bie){const n=10**e;bie=e,aD=function(i){let a=1;this._+=i[0];for(const o=i.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+i[a]}}return aD}function YTe(t,e){let n=3,r=4.5,i,a;function o(s){return s&&(typeof r=="function"&&a.pointRadius(+r.apply(this,arguments)),UT(s,i(a))),a.result()}return o.area=function(s){return UT(s,i(ty)),ty.result()},o.measure=function(s){return UT(s,i(AR)),AR.result()},o.bounds=function(s){return UT(s,i(nD)),nD.result()},o.centroid=function(s){return UT(s,i(Np)),Np.result()},o.projection=function(s){return arguments.length?(i=s==null?(t=null,SR):(t=s).stream,o):t},o.context=function(s){return arguments.length?(a=s==null?(e=null,new Sie(n)):new $Te(e=s),typeof r!="function"&&a.pointRadius(r),o):e},o.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(a.pointRadius(+s),+s),o):r},o.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return e===null&&(a=new Sie(n)),o},o.projection(t).digits(n).context(e)}function jF(t){return function(e){var n=new dY;for(var r in t)n[r]=t[r];return n.stream=e,n}}function dY(){}dY.prototype={constructor:dY,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function HK(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),r!=null&&t.clipExtent(null),UT(n,t.stream(nD)),e(nD.result()),r!=null&&t.clipExtent(r),t}function zF(t,e,n){return HK(t,function(r){var i=e[1][0]-e[0][0],a=e[1][1]-e[0][1],o=Math.min(i/(r[1][0]-r[0][0]),a/(r[1][1]-r[0][1])),s=+e[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+e[0][1]+(a-o*(r[1][1]+r[0][1]))/2;t.scale(150*o).translate([s,l])},n)}function GK(t,e,n){return zF(t,[[0,0],e],n)}function WK(t,e,n){return HK(t,function(r){var i=+e,a=i/(r[1][0]-r[0][0]),o=(i-a*(r[1][0]+r[0][0]))/2,s=-a*r[0][1];t.scale(150*a).translate([o,s])},n)}function VK(t,e,n){return HK(t,function(r){var i=+e,a=i/(r[1][1]-r[0][1]),o=-a*r[0][0],s=(i-a*(r[1][1]+r[0][1]))/2;t.scale(150*a).translate([o,s])},n)}var Tie=16,fje=pa(30*cl);function Aie(t,e){return+e?dje(t,e):hje(t)}function hje(t){return jF({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function dje(t,e){function n(r,i,a,o,s,l,c,u,f,h,d,p,g,v){var y=c-r,_=u-i,E=y*y+_*_;if(E>4*e&&g--){var x=o+h,T=s+d,S=l+p,w=zh(x*x+T*T+S*S),C=Hp(S/=w),D=oo(oo(S)-1)<Si||oo(a-f)<Si?(a+f)/2:by(T,x),L=t(D,C),B=L[0],I=L[1],U=B-r,$=I-i,X=_*U-y*$;(X*X/E>e||oo((y*U+_*$)/E-.5)>.3||o*h+s*d+l*p<fje)&&(n(r,i,a,o,s,l,B,I,D,x/=w,T/=w,S,g,v),v.point(B,I),n(B,I,D,x,T,S,c,u,f,h,d,p,g,v))}}return function(r){var i,a,o,s,l,c,u,f,h,d,p,g,v={point:y,lineStart:_,lineEnd:x,polygonStart:function(){r.polygonStart(),v.lineStart=T},polygonEnd:function(){r.polygonEnd(),v.lineStart=_}};function y(C,D){C=t(C,D),r.point(C[0],C[1])}function _(){f=NaN,v.point=E,r.lineStart()}function E(C,D){var L=PA([C,D]),B=t(C,D);n(f,h,u,d,p,g,f=B[0],h=B[1],u=C,d=L[0],p=L[1],g=L[2],Tie,r),r.point(f,h)}function x(){v.point=y,r.lineEnd()}function T(){_(),v.point=S,v.lineEnd=w}function S(C,D){E(i=C,D),a=f,o=h,s=d,l=p,c=g,v.point=E}function w(){n(f,h,u,d,p,g,a,o,i,s,l,c,Tie,r),v.lineEnd=x,x()}return v}}var pje=jF({point:function(t,e){this.stream.point(t*cl,e*cl)}});function gje(t){return jF({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function vje(t,e,n,r,i){function a(o,s){return o*=r,s*=i,[e+t*o,n-t*s]}return a.invert=function(o,s){return[(o-e)/t*r,(n-s)/t*i]},a}function wie(t,e,n,r,i,a){if(!a)return vje(t,e,n,r,i);var o=pa(a),s=ra(a),l=o*t,c=s*t,u=o/t,f=s/t,h=(s*n-o*e)/t,d=(s*e+o*n)/t;function p(g,v){return g*=r,v*=i,[l*g-c*v+e,n-c*g-l*v]}return p.invert=function(g,v){return[r*(u*g-f*v+h),i*(d-f*g-u*v)]},p}function Km(t){return YK(function(){return t})()}function YK(t){var e,n=150,r=480,i=250,a=0,o=0,s=0,l=0,c=0,u,f=0,h=1,d=1,p=null,g=gie,v=null,y,_,E,x=SR,T=.5,S,w,C,D,L;function B(X){return C(X[0]*cl,X[1]*cl)}function I(X){return X=C.invert(X[0],X[1]),X&&[X[0]*ef,X[1]*ef]}B.stream=function(X){return D&&L===X?D:D=pje(gje(u)(g(S(x(L=X)))))},B.preclip=function(X){return arguments.length?(g=X,p=void 0,$()):g},B.postclip=function(X){return arguments.length?(x=X,v=y=_=E=null,$()):x},B.clipAngle=function(X){return arguments.length?(g=+X?ZUe(p=X*cl):(p=null,gie),$()):p*ef},B.clipExtent=function(X){return arguments.length?(x=X==null?(v=y=_=E=null,SR):kTe(v=+X[0][0],y=+X[0][1],_=+X[1][0],E=+X[1][1]),$()):v==null?null:[[v,y],[_,E]]},B.scale=function(X){return arguments.length?(n=+X,U()):n},B.translate=function(X){return arguments.length?(r=+X[0],i=+X[1],U()):[r,i]},B.center=function(X){return arguments.length?(a=X[0]%360*cl,o=X[1]%360*cl,U()):[a*ef,o*ef]},B.rotate=function(X){return arguments.length?(s=X[0]%360*cl,l=X[1]%360*cl,c=X.length>2?X[2]%360*cl:0,U()):[s*ef,l*ef,c*ef]},B.angle=function(X){return arguments.length?(f=X%360*cl,U()):f*ef},B.reflectX=function(X){return arguments.length?(h=X?-1:1,U()):h<0},B.reflectY=function(X){return arguments.length?(d=X?-1:1,U()):d<0},B.precision=function(X){return arguments.length?(S=Aie(w,T=X*X),$()):zh(T)},B.fitExtent=function(X,N){return zF(B,X,N)},B.fitSize=function(X,N){return GK(B,X,N)},B.fitWidth=function(X,N){return WK(B,X,N)},B.fitHeight=function(X,N){return VK(B,X,N)};function U(){var X=wie(n,0,0,h,d,f).apply(null,e(a,o)),N=wie(n,r-X[0],i-X[1],h,d,f);return u=PTe(s,l,c),w=rY(e,N),C=rY(u,w),S=Aie(w,T),$()}function $(){return D=L=null,B}return function(){return e=t.apply(this,arguments),B.invert=e.invert&&I,U()}}function XK(t){var e=0,n=Ta/3,r=YK(t),i=r(e,n);return i.parallels=function(a){return arguments.length?r(e=a[0]*cl,n=a[1]*cl):[e*ef,n*ef]},i}function mje(t){var e=pa(t);function n(r,i){return[r*e,ra(i)/e]}return n.invert=function(r,i){return[r/e,Hp(i*e)]},n}function XTe(t,e){var n=ra(t),r=(n+ra(e))/2;if(oo(r)<Si)return mje(t);var i=1+n*(2*r-n),a=zh(i)/r;function o(s,l){var c=zh(i-2*r*ra(l))/r;return[c*ra(s*=r),a-c*pa(s)]}return o.invert=function(s,l){var c=a-l,u=by(s,oo(c))*kp(c);return c*r<0&&(u-=Ta*kp(s)*kp(c)),[u/r,Hp((i-(s*s+c*c)*r*r)/(2*r))]},o}function oD(){return XK(XTe).scale(155.424).center([0,33.6442])}function qTe(){return oD().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function yje(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function _je(){var t,e,n=qTe(),r,i=oD().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=oD().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,c={point:function(h,d){l=[h,d]}};function u(h){var d=h[0],p=h[1];return l=null,r.point(d,p),l||(a.point(d,p),l)||(s.point(d,p),l)}u.invert=function(h){var d=n.scale(),p=n.translate(),g=(h[0]-p[0])/d,v=(h[1]-p[1])/d;return(v>=.12&&v<.234&&g>=-.425&&g<-.214?i:v>=.166&&v<.234&&g>=-.214&&g<-.115?o:n).invert(h)},u.stream=function(h){return t&&e===h?t:t=yje([n.stream(e=h),i.stream(h),o.stream(h)])},u.precision=function(h){return arguments.length?(n.precision(h),i.precision(h),o.precision(h),f()):n.precision()},u.scale=function(h){return arguments.length?(n.scale(h),i.scale(h*.35),o.scale(h),u.translate(n.translate())):n.scale()},u.translate=function(h){if(!arguments.length)return n.translate();var d=n.scale(),p=+h[0],g=+h[1];return r=n.translate(h).clipExtent([[p-.455*d,g-.238*d],[p+.455*d,g+.238*d]]).stream(c),a=i.translate([p-.307*d,g+.201*d]).clipExtent([[p-.425*d+Si,g+.12*d+Si],[p-.214*d-Si,g+.234*d-Si]]).stream(c),s=o.translate([p-.205*d,g+.212*d]).clipExtent([[p-.214*d+Si,g+.166*d+Si],[p-.115*d-Si,g+.234*d-Si]]).stream(c),f()},u.fitExtent=function(h,d){return zF(u,h,d)},u.fitSize=function(h,d){return GK(u,h,d)},u.fitWidth=function(h,d){return WK(u,h,d)},u.fitHeight=function(h,d){return VK(u,h,d)};function f(){return t=e=null,u}return u.scale(1070)}function ZTe(t){return function(e,n){var r=pa(e),i=pa(n),a=t(r*i);return a===1/0?[2,0]:[a*i*ra(e),a*ra(n)]}}function bP(t){return function(e,n){var r=zh(e*e+n*n),i=t(r),a=ra(i),o=pa(i);return[by(e*a,r*o),Hp(r&&n*a/r)]}}var qK=ZTe(function(t){return zh(2/(1+t))});qK.invert=bP(function(t){return 2*Hp(t/2)});function bje(){return Km(qK).scale(124.75).clipAngle(180-.001)}var ZK=ZTe(function(t){return(t=MTe(t))&&t/ra(t)});ZK.invert=bP(function(t){return t});function Eje(){return Km(ZK).scale(79.4188).clipAngle(180-.001)}function EP(t,e){return[t,Kk($K((Ml+e)/2))]}EP.invert=function(t,e){return[t,2*Tw(RTe(e))-Ml]};function xje(){return KTe(EP).scale(961/Id)}function KTe(t){var e=Km(t),n=e.center,r=e.scale,i=e.translate,a=e.clipExtent,o=null,s,l,c;e.scale=function(f){return arguments.length?(r(f),u()):r()},e.translate=function(f){return arguments.length?(i(f),u()):i()},e.center=function(f){return arguments.length?(n(f),u()):n()},e.clipExtent=function(f){return arguments.length?(f==null?o=s=l=c=null:(o=+f[0][0],s=+f[0][1],l=+f[1][0],c=+f[1][1]),u()):o==null?null:[[o,s],[l,c]]};function u(){var f=Ta*r(),h=e($Ue(e.rotate()).invert([0,0]));return a(o==null?[[h[0]-f,h[1]-f],[h[0]+f,h[1]+f]]:t===EP?[[Math.max(h[0]-f,o),s],[Math.min(h[0]+f,l),c]]:[[o,Math.max(h[1]-f,s)],[l,Math.min(h[1]+f,c)]])}return u()}function T3(t){return $K((Ml+t)/2)}function QTe(t,e){var n=pa(t),r=t===e?ra(t):Kk(n/pa(e))/Kk(T3(e)/T3(t)),i=n*I8(T3(t),r)/r;if(!r)return EP;function a(o,s){i>0?s<-Ml+Si&&(s=-Ml+Si):s>Ml-Si&&(s=Ml-Si);var l=i/I8(T3(s),r);return[l*ra(r*o),i-l*pa(r*o)]}return a.invert=function(o,s){var l=i-s,c=kp(r)*zh(o*o+l*l),u=by(o,oo(l))*kp(l);return l*r<0&&(u-=Ta*kp(o)*kp(l)),[u/r,2*Tw(I8(i/c,1/r))-Ml]},a}function Sje(){return XK(QTe).scale(109.5).parallels([30,30])}function wR(t,e){return[t,e]}wR.invert=wR;function Tje(){return Km(wR).scale(152.63)}function JTe(t,e){var n=pa(t),r=t===e?ra(t):(n-pa(e))/(e-t),i=n/r+t;if(oo(r)<Si)return wR;function a(o,s){var l=i-s,c=r*o;return[l*ra(c),i-l*pa(c)]}return a.invert=function(o,s){var l=i-s,c=by(o,oo(l))*kp(l);return l*r<0&&(c-=Ta*kp(o)*kp(l)),[c/r,i-kp(r)*zh(o*o+l*l)]},a}function Aje(){return XK(JTe).scale(131.154).center([0,13.9389])}var IC=1.340264,LC=-.081106,kC=893e-6,DC=.003796,sD=zh(3)/2,wje=12;function KK(t,e){var n=Hp(sD*ra(e)),r=n*n,i=r*r*r;return[t*pa(n)/(sD*(IC+3*LC*r+i*(7*kC+9*DC*r))),n*(IC+LC*r+i*(kC+DC*r))]}KK.invert=function(t,e){for(var n=e,r=n*n,i=r*r*r,a=0,o,s,l;a<wje&&(s=n*(IC+LC*r+i*(kC+DC*r))-e,l=IC+3*LC*r+i*(7*kC+9*DC*r),n-=o=s/l,r=n*n,i=r*r*r,!(oo(o)<CTe));++a);return[sD*t*(IC+3*LC*r+i*(7*kC+9*DC*r))/pa(n),Hp(ra(n)/sD)]};function Oje(){return Km(KK).scale(177.158)}function QK(t,e){var n=pa(e),r=pa(t)*n;return[n*ra(t)/r,ra(e)/r]}QK.invert=bP(Tw);function Cje(){return Km(QK).scale(144.049).clipAngle(60)}function Rje(){var t=1,e=0,n=0,r=1,i=1,a=0,o,s,l=null,c,u,f,h=1,d=1,p=jF({point:function(x,T){var S=E([x,T]);this.stream.point(S[0],S[1])}}),g=SR,v,y;function _(){return h=t*r,d=t*i,v=y=null,E}function E(x){var T=x[0]*h,S=x[1]*d;if(a){var w=S*o-T*s;T=T*o+S*s,S=w}return[T+e,S+n]}return E.invert=function(x){var T=x[0]-e,S=x[1]-n;if(a){var w=S*o+T*s;T=T*o-S*s,S=w}return[T/h,S/d]},E.stream=function(x){return v&&y===x?v:v=p(g(y=x))},E.postclip=function(x){return arguments.length?(g=x,l=c=u=f=null,_()):g},E.clipExtent=function(x){return arguments.length?(g=x==null?(l=c=u=f=null,SR):kTe(l=+x[0][0],c=+x[0][1],u=+x[1][0],f=+x[1][1]),_()):l==null?null:[[l,c],[u,f]]},E.scale=function(x){return arguments.length?(t=+x,_()):t},E.translate=function(x){return arguments.length?(e=+x[0],n=+x[1],_()):[e,n]},E.angle=function(x){return arguments.length?(a=x%360*cl,s=ra(a),o=pa(a),_()):a*ef},E.reflectX=function(x){return arguments.length?(r=x?-1:1,_()):r<0},E.reflectY=function(x){return arguments.length?(i=x?-1:1,_()):i<0},E.fitExtent=function(x,T){return zF(E,x,T)},E.fitSize=function(x,T){return GK(E,x,T)},E.fitWidth=function(x,T){return WK(E,x,T)},E.fitHeight=function(x,T){return VK(E,x,T)},E}function JK(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),e*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}JK.invert=function(t,e){var n=e,r=25,i;do{var a=n*n,o=a*a;n-=i=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-e)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(oo(i)>Si&&--r>0);return[t/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Mje(){return Km(JK).scale(175.295)}function eQ(t,e){return[pa(e)*ra(t),ra(e)]}eQ.invert=bP(Hp);function Pje(){return Km(eQ).scale(249.5).clipAngle(90+Si)}function tQ(t,e){var n=pa(e),r=1+pa(t)*n;return[n*ra(t)/r,ra(e)/r]}tQ.invert=bP(function(t){return 2*Tw(t)});function Nje(){return Km(tQ).scale(250).clipAngle(142)}function nQ(t,e){return[Kk($K((Ml+e)/2)),-t]}nQ.invert=function(t,e){return[-e,2*Tw(RTe(t))-Ml]};function Ije(){var t=KTe(nQ),e=t.center,n=t.rotate;return t.center=function(r){return arguments.length?e([-r[1],r[0]]):(r=e(),[r[1],-r[0]])},t.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Lje(t,e){return t.parent===e.parent?1:2}function kje(t){return t.reduce(Dje,0)/t.length}function Dje(t,e){return t+e.x}function Bje(t){return 1+t.reduce(Fje,0)}function Fje(t,e){return Math.max(t,e.y)}function Uje(t){for(var e;e=t.children;)t=e[0];return t}function jje(t){for(var e;e=t.children;)t=e[e.length-1];return t}function zje(){var t=Lje,e=1,n=1,r=!1;function i(a){var o,s=0;a.eachAfter(function(h){var d=h.children;d?(h.x=kje(d),h.y=Bje(d)):(h.x=o?s+=t(h,o):0,h.y=0,o=h)});var l=Uje(a),c=jje(a),u=l.x-t(l,c)/2,f=c.x+t(c,l)/2;return a.eachAfter(r?function(h){h.x=(h.x-a.x)*e,h.y=(a.y-h.y)*n}:function(h){h.x=(h.x-u)/(f-u)*e,h.y=(1-(a.y?h.y/a.y:1))*n})}return i.separation=function(a){return arguments.length?(t=a,i):t},i.size=function(a){return arguments.length?(r=!1,e=+a[0],n=+a[1],i):r?null:[e,n]},i.nodeSize=function(a){return arguments.length?(r=!0,e=+a[0],n=+a[1],i):r?[e,n]:null},i}const $je=1664525,Hje=1013904223,Oie=4294967296;function Gje(){let t=1;return()=>(t=($je*t+Hje)%Oie)/Oie}function Wje(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Vje(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function Yje(t,e){for(var n=0,r=(t=Vje(Array.from(t),e)).length,i=[],a,o;n<r;)a=t[n],o&&eAe(o,a)?++n:(o=qje(i=Xje(i,a)),n=0);return o}function Xje(t,e){var n,r;if(F8(e,t))return[e];for(n=0;n<t.length;++n)if(A3(e,t[n])&&F8(nC(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(A3(nC(t[n],t[r]),e)&&A3(nC(t[n],e),t[r])&&A3(nC(t[r],e),t[n])&&F8(tAe(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function A3(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function eAe(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function F8(t,e){for(var n=0;n<e.length;++n)if(!eAe(t,e[n]))return!1;return!0}function qje(t){switch(t.length){case 1:return Zje(t[0]);case 2:return nC(t[0],t[1]);case 3:return tAe(t[0],t[1],t[2])}}function Zje(t){return{x:t.x,y:t.y,r:t.r}}function nC(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,s=e.r,l=a-n,c=o-r,u=s-i,f=Math.sqrt(l*l+c*c);return{x:(n+a+l/f*u)/2,y:(r+o+c/f*u)/2,r:(f+i+s)/2}}function tAe(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,s=e.y,l=e.r,c=n.x,u=n.y,f=n.r,h=r-o,d=r-c,p=i-s,g=i-u,v=l-a,y=f-a,_=r*r+i*i-a*a,E=_-o*o-s*s+l*l,x=_-c*c-u*u+f*f,T=d*p-h*g,S=(p*x-g*E)/(T*2)-r,w=(g*v-p*y)/T,C=(d*E-h*x)/(T*2)-i,D=(h*y-d*v)/T,L=w*w+D*D-1,B=2*(a+S*w+C*D),I=S*S+C*C-a*a,U=-(Math.abs(L)>1e-6?(B+Math.sqrt(B*B-4*L*I))/(2*L):I/B);return{x:r+S+w*U,y:i+C+D*U,r:U}}function Cie(t,e,n){var r=t.x-e.x,i,a,o=t.y-e.y,s,l,c=r*r+o*o;c?(a=e.r+n.r,a*=a,l=t.r+n.r,l*=l,a>l?(i=(c+l-a)/(2*c),s=Math.sqrt(Math.max(0,l/c-i*i)),n.x=t.x-i*r-s*o,n.y=t.y-i*o+s*r):(i=(c+a-l)/(2*c),s=Math.sqrt(Math.max(0,a/c-i*i)),n.x=e.x+i*r-s*o,n.y=e.y+i*o+s*r)):(n.x=e.x+n.r,n.y=e.y)}function Rie(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Mie(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,a=(e.y*n.r+n.y*e.r)/r;return i*i+a*a}function w3(t){this._=t,this.next=null,this.previous=null}function Kje(t,e){if(!(a=(t=Wje(t)).length))return 0;var n,r,i,a,o,s,l,c,u,f,h;if(n=t[0],n.x=0,n.y=0,!(a>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(a>2))return n.r+r.r;Cie(r,n,i=t[2]),n=new w3(n),r=new w3(r),i=new w3(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<a;++l){Cie(n._,r._,i=t[l]),i=new w3(i),c=r.next,u=n.previous,f=r._.r,h=n._.r;do if(f<=h){if(Rie(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.next}else{if(Rie(u._,i._)){n=u,n.next=r,r.previous=n,--l;continue e}h+=u._.r,u=u.previous}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Mie(n);(i=i.next)!==r;)(s=Mie(i))<o&&(n=i,o=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Yje(n,e),l=0;l<a;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function Qje(t){return Math.sqrt(t.value)}function Jje(){var t=null,e=1,n=1,r=zre;function i(a){const o=Gje();return a.x=e/2,a.y=n/2,t?a.eachBefore(Pie(t)).eachAfter(U8(r,.5,o)).eachBefore(Nie(1)):a.eachBefore(Pie(Qje)).eachAfter(U8(zre,1,o)).eachAfter(U8(r,a.r/Math.min(e,n),o)).eachBefore(Nie(Math.min(e,n)/(2*a.r))),a}return i.radius=function(a){return arguments.length?(t=ZL(a),i):t},i.size=function(a){return arguments.length?(e=+a[0],n=+a[1],i):[e,n]},i.padding=function(a){return arguments.length?(r=typeof a=="function"?a:f7e(+a),i):r},i}function Pie(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function U8(t,e,n){return function(r){if(i=r.children){var i,a,o=i.length,s=t(r)*e||0,l;if(s)for(a=0;a<o;++a)i[a].r+=s;if(l=Kje(i,n),s)for(a=0;a<o;++a)i[a].r-=s;r.r=l+s}}}function Nie(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function eze(){var t=1,e=1,n=0,r=!1;function i(o){var s=o.height+1;return o.x0=o.y0=n,o.x1=t,o.y1=e/s,o.eachBefore(a(e,s)),r&&o.eachBefore(h7e),o}function a(o,s){return function(l){l.children&&IF(l,l.x0,o*(l.depth+1)/s,l.x1,o*(l.depth+2)/s);var c=l.x0,u=l.y0,f=l.x1-n,h=l.y1-n;f<c&&(c=f=(c+f)/2),h<u&&(u=h=(u+h)/2),l.x0=c,l.y0=u,l.x1=f,l.y1=h}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(t=+o[0],e=+o[1],i):[t,e]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var tze={depth:-1},Iie={},j8={};function nze(t){return t.id}function rze(t){return t.parentId}function pY(){var t=nze,e=rze,n;function r(i){var a=Array.from(i),o=t,s=e,l,c,u,f,h,d,p,g,v=new Map;if(n!=null){const y=a.map((x,T)=>ize(n(x,T,i))),_=y.map(Lie),E=new Set(y).add("");for(const x of _)E.has(x)||(E.add(x),y.push(x),_.push(Lie(x)),a.push(j8));o=(x,T)=>y[T],s=(x,T)=>_[T]}for(u=0,l=a.length;u<l;++u)c=a[u],d=a[u]=new iTe(c),(p=o(c,u,i))!=null&&(p+="")&&(g=d.id=p,v.set(g,v.has(g)?Iie:d)),(p=s(c,u,i))!=null&&(p+="")&&(d.parent=p);for(u=0;u<l;++u)if(d=a[u],p=d.parent){if(h=v.get(p),!h)throw new Error("missing: "+p);if(h===Iie)throw new Error("ambiguous: "+p);h.children?h.children.push(d):h.children=[d],d.parent=h}else{if(f)throw new Error("multiple roots");f=d}if(!f)throw new Error("no root");if(n!=null){for(;f.data===j8&&f.children.length===1;)f=f.children[0],--l;for(let y=a.length-1;y>=0&&(d=a[y],d.data===j8);--y)d.data=null}if(f.parent=tze,f.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(d7e),f.parent=null,l>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(t=ZL(i),r):t},r.parentId=function(i){return arguments.length?(e=ZL(i),r):e},r.path=function(i){return arguments.length?(n=ZL(i),r):n},r}function ize(t){t=`${t}`;let e=t.length;return gY(t,e-1)&&!gY(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function Lie(t){let e=t.length;if(e<2)return"";for(;--e>1&&!gY(t,e););return t.slice(0,e)}function gY(t,e){if(t[e]==="/"){let n=0;for(;e>0&&t[--e]==="\\";)++n;if((n&1)===0)return!0}return!1}function aze(t,e){return t.parent===e.parent?1:2}function z8(t){var e=t.children;return e?e[0]:t.t}function $8(t){var e=t.children;return e?e[e.length-1]:t.t}function oze(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function sze(t){for(var e=0,n=0,r=t.children,i=r.length,a;--i>=0;)a=r[i],a.z+=e,a.m+=e,e+=a.s+(n+=a.c)}function lze(t,e,n){return t.a.parent===e.parent?t.a:n}function JL(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}JL.prototype=Object.create(iTe.prototype);function cze(t){for(var e=new JL(t,0),n,r=[e],i,a,o,s;n=r.pop();)if(a=n._.children)for(n.children=new Array(s=a.length),o=s-1;o>=0;--o)r.push(i=n.children[o]=new JL(a[o],o)),i.parent=n;return(e.parent=new JL(null,0)).children=[e],e}function uze(){var t=aze,e=1,n=1,r=null;function i(c){var u=cze(c);if(u.eachAfter(a),u.parent.m=-u.z,u.eachBefore(o),r)c.eachBefore(l);else{var f=c,h=c,d=c;c.eachBefore(function(_){_.x<f.x&&(f=_),_.x>h.x&&(h=_),_.depth>d.depth&&(d=_)});var p=f===h?1:t(f,h)/2,g=p-f.x,v=e/(h.x+p+g),y=n/(d.depth||1);c.eachBefore(function(_){_.x=(_.x+g)*v,_.y=_.depth*y})}return c}function a(c){var u=c.children,f=c.parent.children,h=c.i?f[c.i-1]:null;if(u){sze(c);var d=(u[0].z+u[u.length-1].z)/2;h?(c.z=h.z+t(c._,h._),c.m=c.z-d):c.z=d}else h&&(c.z=h.z+t(c._,h._));c.parent.A=s(c,h,c.parent.A||f[0])}function o(c){c._.x=c.z+c.parent.m,c.m+=c.parent.m}function s(c,u,f){if(u){for(var h=c,d=c,p=u,g=h.parent.children[0],v=h.m,y=d.m,_=p.m,E=g.m,x;p=$8(p),h=z8(h),p&&h;)g=z8(g),d=$8(d),d.a=c,x=p.z+_-h.z-v+t(p._,h._),x>0&&(oze(lze(p,c,f),c,x),v+=x,y+=x),_+=p.m,v+=h.m,E+=g.m,y+=d.m;p&&!$8(d)&&(d.t=p,d.m+=_-y),h&&!z8(g)&&(g.t=h,g.m+=v-E,f=c)}return f}function l(c){c.x*=e,c.y=c.depth*n}return i.separation=function(c){return arguments.length?(t=c,i):t},i.size=function(c){return arguments.length?(r=!1,e=+c[0],n=+c[1],i):r?null:[e,n]},i.nodeSize=function(c){return arguments.length?(r=!0,e=+c[0],n=+c[1],i):r?[e,n]:null},i}function fze(t,e,n,r,i){var a=t.children,o,s=a.length,l,c=new Array(s+1);for(c[0]=l=o=0;o<s;++o)c[o+1]=l+=a[o].value;u(0,s,t.value,e,n,r,i);function u(f,h,d,p,g,v,y){if(f>=h-1){var _=a[f];_.x0=p,_.y0=g,_.x1=v,_.y1=y;return}for(var E=c[f],x=d/2+E,T=f+1,S=h-1;T<S;){var w=T+S>>>1;c[w]<x?T=w+1:S=w}x-c[T-1]<c[T]-x&&f+1<T&&--T;var C=c[T]-E,D=d-C;if(v-p>y-g){var L=d?(p*D+v*C)/d:v;u(f,T,C,p,g,L,y),u(T,h,D,L,g,v,y)}else{var B=d?(g*D+y*C)/d:y;u(f,T,C,p,g,v,B),u(T,h,D,p,B,v,y)}}}function hze(t,e,n,r,i){(t.depth&1?AK:IF)(t,e,n,r,i)}const dze=(function t(e){function n(r,i,a,o,s){if((l=r._squarify)&&l.ratio===e)for(var l,c,u,f,h=-1,d,p=l.length,g=r.value;++h<p;){for(c=l[h],u=c.children,f=c.value=0,d=u.length;f<d;++f)c.value+=u[f].value;c.dice?IF(c,i,a,o,g?a+=(s-a)*c.value/g:s):AK(c,i,a,g?i+=(o-i)*c.value/g:o,s),g-=c.value}else r._squarify=l=p7e(e,r,i,a,o,s),l.ratio=e}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(g7e),pze=ca("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),gze=ca("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),vze=ca("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),mze=ca("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),yze=ca("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),_ze=ca("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),bze=ca("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Eze=ca("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),xze=ca("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Sze=ca("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),ps=t=>B7e(t[t.length-1]);var nAe=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ca);const Tze=ps(nAe);var rAe=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ca);const Aze=ps(rAe);var iAe=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ca);const wze=ps(iAe);var aAe=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ca);const Oze=ps(aAe);var oAe=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ca);const Cze=ps(oAe);var sAe=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ca);const Rze=ps(sAe);var lAe=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ca);const Mze=ps(lAe);var cAe=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ca);const Pze=ps(cAe);var uAe=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ca);const Nze=ps(uAe);var fAe=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ca);const Ize=ps(fAe);var hAe=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ca);const Lze=ps(hAe);var dAe=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ca);const kze=ps(dAe);var pAe=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ca);const Dze=ps(pAe);var gAe=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ca);const Bze=ps(gAe);var vAe=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ca);const Fze=ps(vAe);var mAe=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ca);const Uze=ps(mAe);var yAe=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ca);const jze=ps(yAe);var _Ae=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ca);const zze=ps(_Ae);var bAe=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ca);const $ze=ps(bAe);var EAe=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ca);const Hze=ps(EAe);var xAe=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ca);const Gze=ps(xAe);var SAe=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ca);const Wze=ps(SAe);var TAe=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ca);const Vze=ps(TAe);var AAe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ca);const Yze=ps(AAe);var wAe=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ca);const Xze=ps(wAe);var OAe=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ca);const qze=ps(OAe);var CAe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ca);const Zze=ps(CAe);function Kze(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const Qze=BK(Um(300,.5,0),Um(-240,.5,1));var Jze=BK(Um(-100,.75,.35),Um(80,1.5,.8)),e9e=BK(Um(260,.75,.35),Um(80,1.5,.8)),O3=Um();function t9e(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return O3.h=360*t-100,O3.s=1.5-1.5*e,O3.l=.8-.9*e,O3+""}var C3=F7e(),n9e=Math.PI/3,r9e=Math.PI*2/3;function i9e(t){var e;return t=(.5-t)*Math.PI,C3.r=255*(e=Math.sin(t))*e,C3.g=255*(e=Math.sin(t+n9e))*e,C3.b=255*(e=Math.sin(t+r9e))*e,C3+""}function a9e(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function $F(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const o9e=$F(ca("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var s9e=$F(ca("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),l9e=$F(ca("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),c9e=$F(ca("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),RAe=rQ(CK);function MAe(t){this._curve=t}MAe.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function rQ(t){function e(n){return new MAe(t(n))}return e._curve=t,e}function rC(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(rQ(n)):e()._curve},t}function u9e(){return rC(xw().curve(RAe))}function f9e(){var t=QV().curve(RAe),e=t.curve,n=t.lineX0,r=t.lineX1,i=t.lineY0,a=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return rC(n())},delete t.lineX0,t.lineEndAngle=function(){return rC(r())},delete t.lineX1,t.lineInnerRadius=function(){return rC(i())},delete t.lineY0,t.lineOuterRadius=function(){return rC(a())},delete t.lineY1,t.curve=function(o){return arguments.length?e(rQ(o)):e()._curve},t}var Bo=(function(t){return t.Area="area",t.Bar="bar",t.Boxplot="boxplot",t.Column="column",t.DualAxes="dual-axes",t.FishboneDiagram="fishbone-diagram",t.FlowDiagram="flow-diagram",t.Funnel="funnel",t.HeatMap="heat-map",t.Histogram="histogram",t.IndentedTree="indented-tree",t.Line="line",t.Liquid="liquid",t.MindMap="mind-map",t.NetworkGraph="network-graph",t.OrganizationChart="organization-chart",t.PathMap="path-map",t.Pie="pie",t.PinMap="pin-map",t.Radar="radar",t.Sankey="sankey",t.Scatter="scatter",t.Treemap="treemap",t.Venn="venn",t.Violin="violin",t.Table="table",t.VisText="vis-text",t.WordCloud="word-cloud",t})({});const PAe=()=>[["cartesian"]];PAe.props={};function h9e(t,e){return t=t%(2*Math.PI),e=e%(2*Math.PI),t<0&&(t=2*Math.PI+t),e<0&&(e=2*Math.PI+e),t>=e&&(e=e+2*Math.PI),{startAngle:t,endAngle:e}}const NAe=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},n=Object.assign(Object.assign({},e),t);return Object.assign(Object.assign({},n),h9e(n.startAngle,n.endAngle))},xP=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=NAe(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",e,n,r,i]]};xP.props={};const IAe=({startAngle:t=0,endAngle:e=Math.PI*6,innerRadius:n=0,outerRadius:r=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",t,e,n,r]];IAe.props={};const iQ=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];iQ.props={transform:!0};const d9e=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},LAe=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=d9e(t);return[...iQ(),...xP({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};LAe.props={};const kAe=(t={})=>{const e={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},e),t)},aQ=t=>{const{startAngle:e,endAngle:n,innerRadius:r,outerRadius:i}=kAe(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...xP({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};aQ.props={};const oQ=()=>[["parallel",0,1,0,1]];oQ.props={};const DAe=({focusX:t=0,focusY:e=0,distortionX:n=2,distortionY:r=2,visual:i=!1})=>[["fisheye",t,e,n,r,i]];DAe.props={transform:!0};const BAe=t=>{const{startAngle:e=-Math.PI/2,endAngle:n=Math.PI*3/2,innerRadius:r=0,outerRadius:i=1}=t;return[...oQ(),...xP({startAngle:e,endAngle:n,innerRadius:r,outerRadius:i})]};BAe.props={};const FAe=({value:t})=>e=>e.map(()=>t);FAe.props={};const UAe=({value:t})=>e=>e.map(t);UAe.props={};const jAe=({value:t})=>e=>e.map(n=>n[t]);jAe.props={};const zAe=({value:t})=>()=>t;zAe.props={};var Ey=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},p9e=function(t,e){return Ey(t)?t.indexOf(e)>-1:!1},sQ=function(t,e){if(!Ey(t))return t;for(var n=[],r=0;r<t.length;r++){var i=t[r];e(i,r)&&n.push(i)}return n},g9e=function(t,e){return e===void 0&&(e=[]),sQ(t,function(n){return!p9e(e,n)})};function ur(t){return typeof t=="function"}function Kn(t){return t==null}function Us(t){return Array.isArray(t)}const dl=(function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"});function lQ(t,e){if(t){var n;if(Us(t))for(var r=0,i=t.length;r<i&&(n=e(t[r],r),n!==!1);r++);else if(dl(t)){for(var a in t)if(t.hasOwnProperty(a)&&(n=e(t[a],a),n===!1))break}}}var HF=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return lQ(t,function(n,r){ur(t)&&r==="prototype"||e.push(r)}),e};function v9e(t,e){var n=HF(e),r=n.length;if(Kn(t))return!r;for(var i=0;i<r;i+=1){var a=n[i];if(e[a]!==t[a]||!(a in t))return!1}return!0}var vY=function(t){return typeof t=="object"&&t!==null},m9e={}.toString,$Ae=function(t,e){return m9e.call(t)==="[object "+e+"]"},xy=function(t){if(!vY(t)||!$Ae(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function IA(t,e){if(!Us(t))return null;var n;if(ur(e)&&(n=e),xy(e)&&(n=function(i){return v9e(i,e)}),n){for(var r=0;r<t.length;r+=1)if(n(t[r]))return t[r]}return null}var y9e=function(t){if(!Us(t))return[];for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e};function LA(t){if(!Array.isArray(t))return-1/0;var e=t.length;if(!e)return-1/0;for(var n=t[0],r=1;r<e;r++)n=Math.max(n,t[r]);return n}const kA=(function(t){if(Us(t))return t.reduce(function(e,n){return Math.min(e,n)},t[0])});var HAe=function(t,e,n){if(!Us(t)&&!xy(t))return t;var r=n;return lQ(t,function(i,a){r=e(r,i,a)}),r};function $i(t){return typeof t=="string"}function _9e(t,e){e===void 0&&(e=new Map);var n=[];if(Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var a=t[r];e.has(a)||(n.push(a),e.set(a,!0))}return n}function b9e(t){if(Ey(t))return t[0]}function bd(t){if(Ey(t)){var e=t;return e[e.length-1]}}var E9e=Object.prototype.hasOwnProperty;function GF(t,e){if(!e||!Us(t))return{};for(var n={},r=ur(e)?e:function(s){return s[e]},i,a=0;a<t.length;a++){var o=t[a];i=r(o),E9e.call(n,i)?n[i].push(o):n[i]=[o]}return n}var ga=function(t,e,n){return t<e?e:t>n?n:t};function Ln(t){return typeof t=="number"}var x9e=1e-5;function cA(t,e,n){return n===void 0&&(n=x9e),t===e||Math.abs(t-e)<n}const S9e=(function(t,e){if(Us(t)){for(var n,r=-1/0,i=0;i<t.length;i++){var a=t[i],o=ur(e)?e(a):a[e];o>r&&(n=a,r=o)}return n}}),T9e=(function(t,e){if(Us(t)){for(var n,r=1/0,i=0;i<t.length;i++){var a=t[i],o=ur(e)?e(a):a[e];o<r&&(n=a,r=o)}return n}});var WF=function(t,e){return(t%e+e)%e};const GAe=(function(t){return Kn(t)?"":t.toString()});var cQ=function(t){var e=GAe(t);return e.charAt(0).toLowerCase()+e.substring(1)};function A9e(t,e){return!t||!e?t:t.replace(/\\?\{([^{}]+)\}/g,function(n,r){return n.charAt(0)==="\\"?n.slice(1):e[r]===void 0?"":e[r]})}var Gp=function(t){var e=GAe(t);return e.charAt(0).toUpperCase()+e.substring(1)},w9e={}.toString,O9e=function(t){return w9e.call(t).replace(/^\[object /,"").replace(/]$/,"")},fx=function(t){return $Ae(t,"Boolean")};function C9e(t){return t instanceof Date}function WAe(t){return t===null}var R9e=Object.prototype,M9e=function(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||R9e;return t===n},mr=function(t){return t===void 0};function P9e(t){return t instanceof Element||t instanceof Document}function kie(t,e){for(var n in e)e.hasOwnProperty(n)&&n!=="constructor"&&e[n]!==void 0&&(t[n]=e[n])}function VAe(t,e,n,r){return e&&kie(t,e),n&&kie(t,n),t}var $_=function(t){if(typeof t!="object"||t===null)return t;var e;if(Us(t)){e=[];for(var n=0,r=t.length;n<r;n++)typeof t[n]=="object"&&t[n]!=null?e[n]=$_(t[n]):e[n]=t[n]}else{e={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?e[i]=$_(t[i]):e[i]=t[i]}return e};function Aw(t,e,n){var r;return function(){var i=this,a=arguments,o=function(){r=null,t.apply(i,a)};clearTimeout(r),r=setTimeout(o,e)}}function N9e(t){var e,n,r,i=t||1;function a(s,l){++e>i&&(r=n,o(1),++e),n[s]=l}function o(s){e=0,n=Object.create(null),s||(r=Object.create(null))}return o(),{clear:o,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var l=n[s];if(l!==void 0)return l;if((l=r[s])!==void 0)return a(s,l),l},set:function(s,l){n[s]!==void 0?n[s]=l:a(s,l)}}}var H8=new Map;function mY(t,e,n){n===void 0&&(n=128);var r=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=e?e.apply(this,i):i[0];H8.has(t)||H8.set(t,N9e(n));var s=H8.get(t);if(s.has(o))return s.get(o);var l=t.apply(this,i);return s.set(o,l),l};return r}var I9e=5;function L9e(t,e){if(Object.hasOwn)return Object.hasOwn(t,e);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),e)}function YAe(t,e,n,r){n=n||0,r=r||I9e;for(var i in e)if(L9e(e,i)){var a=e[i];a!==null&&xy(a)?(xy(t[i])||(t[i]={}),n<r?YAe(t[i],a,n+1,r):t[i]=e[i]):Us(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var Nt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)YAe(t,e[r]);return t},XAe=function(t,e){if(!Ey(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var r=-1,i=0;i<t.length;i++)if(t[i]===e){r=i;break}return r},k9e=Object.prototype.hasOwnProperty;function Em(t){if(Kn(t))return!0;if(Ey(t))return!t.length;var e=O9e(t);if(e==="Map"||e==="Set")return!t.size;if(M9e(t))return!Object.keys(t).length;for(var n in t)if(k9e.call(t,n))return!1;return!0}var Fs=function(t,e){if(t===e)return!0;if(!t||!e||$i(t)||$i(e))return!1;if(Ey(t)||Ey(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=Fs(t[r],e[r]),!!n);r++);return n}if(vY(t)||vY(e)){var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var n=!0,r=0;r<i.length&&(n=Fs(t[i[r]],e[i[r]]),!!n);r++);return n}return!1},D9e=function(t){return t};const B9e=(function(t,e){e===void 0&&(e=D9e);var n={};return dl(t)&&!Kn(t)&&Object.keys(t).forEach(function(r){n[r]=e(t[r],r)}),n}),Wr=(function(t,e,n){for(var r=0,i=$i(e)?e.split("."):e;t&&r<i.length;)t=t[i[r++]];return t===void 0||r<i.length?n:t}),H_=(function(t,e,n){var r=t,i=$i(e)?e.split("."):e;return i.forEach(function(a,o){o<i.length-1?(dl(r[a])||(r[a]=Ln(i[o+1])?[]:{}),r=r[a]):r[a]=n}),t});var F9e=Object.prototype.hasOwnProperty;const Wp=(function(t,e){if(t===null||!xy(t))return{};var n={};return lQ(e,function(r){F9e.call(t,r)&&(n[r]=t[r])}),n}),ww=(function(t,e){return HAe(t,function(n,r,i){return e.includes(i)||(n[i]=r),n},{})}),Sy=(function(t,e,n){var r,i,a,o,s=0;n||(n={});var l=function(){s=n.leading===!1?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},c=function(){var u=Date.now();!s&&n.leading===!1&&(s=u);var f=e-(u-s);return i=this,a=arguments,f<=0||f>e?(r&&(clearTimeout(r),r=null),s=u,o=t.apply(i,a),r||(i=a=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,f)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c});var R3={};const U9e=(function(t){return t=t||"g",R3[t]?R3[t]+=1:R3[t]=1,t+R3[t]}),G8=(function(){}),jm=(function(t){return t});function OR(t){return Kn(t)?0:Ey(t)?t.length:Object.keys(t).length}var Ns=1e-6,Ks=typeof Float32Array<"u"?Float32Array:Array,j9e="zyx";function z9e(){var t=new Ks(4);return Ks!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function $9e(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*s,t[1]=i*l+o*s,t[2]=r*-s+a*l,t[3]=i*-s+o*l,t}function Hx(){var t=new Ks(9);return Ks!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function qAe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function H9e(t){var e=new Ks(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ZAe(t,e,n,r,i,a,o,s,l){var c=new Ks(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=l,c}function G9e(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=u*o-s*c,h=-u*a+s*l,d=c*a-o*l,p=n*f+r*h+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-u*r+i*c)*p,t[2]=(s*r-i*o)*p,t[3]=h*p,t[4]=(u*n-i*l)*p,t[5]=(-s*n+i*a)*p,t[6]=d*p,t[7]=(-c*n+r*l)*p,t[8]=(o*n-r*a)*p,t):null}function W9e(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=n[0],d=n[1],p=n[2],g=n[3],v=n[4],y=n[5],_=n[6],E=n[7],x=n[8];return t[0]=h*r+d*o+p*c,t[1]=h*i+d*s+p*u,t[2]=h*a+d*l+p*f,t[3]=g*r+v*o+y*c,t[4]=g*i+v*s+y*u,t[5]=g*a+v*l+y*f,t[6]=_*r+E*o+x*c,t[7]=_*i+E*s+x*u,t[8]=_*a+E*l+x*f,t}function V9e(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Y9e(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function X9e(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}var q9e=W9e;function Zr(){var t=new Ks(16);return Ks!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function SP(t){var e=new Ks(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ty(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function uQ(t,e,n,r,i,a,o,s,l,c,u,f,h,d,p,g){var v=new Ks(16);return v[0]=t,v[1]=e,v[2]=n,v[3]=r,v[4]=i,v[5]=a,v[6]=o,v[7]=s,v[8]=l,v[9]=c,v[10]=u,v[11]=f,v[12]=h,v[13]=d,v[14]=p,v[15]=g,v}function CR(t,e,n,r,i,a,o,s,l,c,u,f,h,d,p,g,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=l,t[8]=c,t[9]=u,t[10]=f,t[11]=h,t[12]=d,t[13]=p,t[14]=g,t[15]=v,t}function Pu(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function fQ(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function qs(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],g=e[13],v=e[14],y=e[15],_=n*s-r*o,E=n*l-i*o,x=n*c-a*o,T=r*l-i*s,S=r*c-a*s,w=i*c-a*l,C=u*g-f*p,D=u*v-h*p,L=u*y-d*p,B=f*v-h*g,I=f*y-d*g,U=h*y-d*v,$=_*U-E*I+x*B+T*L-S*D+w*C;return $?($=1/$,t[0]=(s*U-l*I+c*B)*$,t[1]=(i*I-r*U-a*B)*$,t[2]=(g*w-v*S+y*T)*$,t[3]=(h*S-f*w-d*T)*$,t[4]=(l*L-o*U-c*D)*$,t[5]=(n*U-i*L+a*D)*$,t[6]=(v*x-p*w-y*E)*$,t[7]=(u*w-h*x+d*E)*$,t[8]=(o*I-s*L+c*C)*$,t[9]=(r*L-n*I-a*C)*$,t[10]=(p*S-g*x+y*_)*$,t[11]=(f*x-u*S-d*_)*$,t[12]=(s*D-o*B-l*C)*$,t[13]=(n*B-r*D+i*C)*$,t[14]=(g*E-p*T-v*_)*$,t[15]=(u*T-f*E+h*_)*$,t):null}function Z9e(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=e[6],c=e[7],u=e[8],f=e[9],h=e[10],d=e[11],p=e[12],g=e[13],v=e[14],y=e[15],_=n*s-r*o,E=n*l-i*o,x=n*c-a*o,T=r*l-i*s,S=r*c-a*s,w=i*c-a*l,C=u*g-f*p,D=u*v-h*p,L=u*y-d*p,B=f*v-h*g,I=f*y-d*g,U=h*y-d*v;return t[0]=s*U-l*I+c*B,t[1]=i*I-r*U-a*B,t[2]=g*w-v*S+y*T,t[3]=h*S-f*w-d*T,t[4]=l*L-o*U-c*D,t[5]=n*U-i*L+a*D,t[6]=v*x-p*w-y*E,t[7]=u*w-h*x+d*E,t[8]=o*I-s*L+c*C,t[9]=r*L-n*I-a*C,t[10]=p*S-g*x+y*_,t[11]=f*x-u*S-d*_,t[12]=s*D-o*B-l*C,t[13]=n*B-r*D+i*C,t[14]=g*E-p*T-v*_,t[15]=u*T-f*E+h*_,t}function hQ(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],f=t[10],h=t[11],d=t[12],p=t[13],g=t[14],v=t[15],y=e*o-n*a,_=e*s-r*a,E=n*s-r*o,x=c*p-u*d,T=c*g-f*d,S=u*g-f*p,w=e*S-n*T+r*x,C=a*S-o*T+s*x,D=c*E-u*_+f*y,L=d*E-p*_+g*y;return l*w-i*C+v*D-h*L}function qa(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=e[8],h=e[9],d=e[10],p=e[11],g=e[12],v=e[13],y=e[14],_=e[15],E=n[0],x=n[1],T=n[2],S=n[3];return t[0]=E*r+x*s+T*f+S*g,t[1]=E*i+x*l+T*h+S*v,t[2]=E*a+x*c+T*d+S*y,t[3]=E*o+x*u+T*p+S*_,E=n[4],x=n[5],T=n[6],S=n[7],t[4]=E*r+x*s+T*f+S*g,t[5]=E*i+x*l+T*h+S*v,t[6]=E*a+x*c+T*d+S*y,t[7]=E*o+x*u+T*p+S*_,E=n[8],x=n[9],T=n[10],S=n[11],t[8]=E*r+x*s+T*f+S*g,t[9]=E*i+x*l+T*h+S*v,t[10]=E*a+x*c+T*d+S*y,t[11]=E*o+x*u+T*p+S*_,E=n[12],x=n[13],T=n[14],S=n[15],t[12]=E*r+x*s+T*f+S*g,t[13]=E*i+x*l+T*h+S*v,t[14]=E*a+x*c+T*d+S*y,t[15]=E*o+x*u+T*p+S*_,t}function Vs(t,e,n){var r=n[0],i=n[1],a=n[2],o,s,l,c,u,f,h,d,p,g,v,y;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*a+e[12],t[13]=e[1]*r+e[5]*i+e[9]*a+e[13],t[14]=e[2]*r+e[6]*i+e[10]*a+e[14],t[15]=e[3]*r+e[7]*i+e[11]*a+e[15]):(o=e[0],s=e[1],l=e[2],c=e[3],u=e[4],f=e[5],h=e[6],d=e[7],p=e[8],g=e[9],v=e[10],y=e[11],t[0]=o,t[1]=s,t[2]=l,t[3]=c,t[4]=u,t[5]=f,t[6]=h,t[7]=d,t[8]=p,t[9]=g,t[10]=v,t[11]=y,t[12]=o*r+u*i+p*a+e[12],t[13]=s*r+f*i+g*a+e[13],t[14]=l*r+h*i+v*a+e[14],t[15]=c*r+d*i+y*a+e[15]),t}function Hf(t,e,n){var r=n[0],i=n[1],a=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function K9e(t,e,n,r){var i=r[0],a=r[1],o=r[2],s=Math.sqrt(i*i+a*a+o*o),l,c,u,f,h,d,p,g,v,y,_,E,x,T,S,w,C,D,L,B,I,U,$,X;return s<Ns?null:(s=1/s,i*=s,a*=s,o*=s,l=Math.sin(n),c=Math.cos(n),u=1-c,f=e[0],h=e[1],d=e[2],p=e[3],g=e[4],v=e[5],y=e[6],_=e[7],E=e[8],x=e[9],T=e[10],S=e[11],w=i*i*u+c,C=a*i*u+o*l,D=o*i*u-a*l,L=i*a*u-o*l,B=a*a*u+c,I=o*a*u+i*l,U=i*o*u+a*l,$=a*o*u-i*l,X=o*o*u+c,t[0]=f*w+g*C+E*D,t[1]=h*w+v*C+x*D,t[2]=d*w+y*C+T*D,t[3]=p*w+_*C+S*D,t[4]=f*L+g*B+E*I,t[5]=h*L+v*B+x*I,t[6]=d*L+y*B+T*I,t[7]=p*L+_*B+S*I,t[8]=f*U+g*$+E*X,t[9]=h*U+v*$+x*X,t[10]=d*U+y*$+T*X,t[11]=p*U+_*$+S*X,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Qm(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[4],o=e[5],s=e[6],l=e[7],c=e[8],u=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*r,t[5]=o*i+u*r,t[6]=s*i+f*r,t[7]=l*i+h*r,t[8]=c*i-a*r,t[9]=u*i-o*r,t[10]=f*i-s*r,t[11]=h*i-l*r,t}function Dy(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[8],u=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*r,t[1]=o*i-u*r,t[2]=s*i-f*r,t[3]=l*i-h*r,t[8]=a*r+c*i,t[9]=o*r+u*i,t[10]=s*r+f*i,t[11]=l*r+h*i,t}function eb(t,e,n){var r=Math.sin(n),i=Math.cos(n),a=e[0],o=e[1],s=e[2],l=e[3],c=e[4],u=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*r,t[1]=o*i+u*r,t[2]=s*i+f*r,t[3]=l*i+h*r,t[4]=c*i-a*r,t[5]=u*i-o*r,t[6]=f*i-s*r,t[7]=h*i-l*r,t}function rf(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function Sd(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dQ(t,e,n){var r=n[0],i=n[1],a=n[2],o=Math.sqrt(r*r+i*i+a*a),s,l,c;return o<Ns?null:(o=1/o,r*=o,i*=o,a*=o,s=Math.sin(e),l=Math.cos(e),c=1-l,t[0]=r*r*c+l,t[1]=i*r*c+a*s,t[2]=a*r*c-i*s,t[3]=0,t[4]=r*i*c-a*s,t[5]=i*i*c+l,t[6]=a*i*c+r*s,t[7]=0,t[8]=r*a*c+i*s,t[9]=i*a*c-r*s,t[10]=a*a*c+l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function pQ(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function gQ(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function RR(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function KAe(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=r+r,l=i+i,c=a+a,u=r*s,f=r*l,h=r*c,d=i*l,p=i*c,g=a*c,v=o*s,y=o*l,_=o*c;return t[0]=1-(d+g),t[1]=f+_,t[2]=h-y,t[3]=0,t[4]=f-_,t[5]=1-(u+g),t[6]=p+v,t[7]=0,t[8]=h+y,t[9]=p-v,t[10]=1-(u+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function Q9e(t,e){var n=new Ks(3),r=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],l=e[5],c=e[6],u=e[7],f=r*r+i*i+a*a+o*o;return f>0?(n[0]=(s*o+u*r+l*a-c*i)*2/f,n[1]=(l*o+u*i+c*r-s*a)*2/f,n[2]=(c*o+u*a+s*i-l*r)*2/f):(n[0]=(s*o+u*r+l*a-c*i)*2,n[1]=(l*o+u*i+c*r-s*a)*2,n[2]=(c*o+u*a+s*i-l*r)*2),KAe(t,e,n),t}function hx(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function zm(t,e){var n=e[0],r=e[1],i=e[2],a=e[4],o=e[5],s=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(a*a+o*o+s*s),t[2]=Math.sqrt(l*l+c*c+u*u),t}function dx(t,e){var n=new Ks(3);zm(n,e);var r=1/n[0],i=1/n[1],a=1/n[2],o=e[0]*r,s=e[1]*i,l=e[2]*a,c=e[4]*r,u=e[5]*i,f=e[6]*a,h=e[8]*r,d=e[9]*i,p=e[10]*a,g=o+u+p,v=0;return g>0?(v=Math.sqrt(g+1)*2,t[3]=.25*v,t[0]=(f-d)/v,t[1]=(h-l)/v,t[2]=(s-c)/v):o>u&&o>p?(v=Math.sqrt(1+o-u-p)*2,t[3]=(f-d)/v,t[0]=.25*v,t[1]=(s+c)/v,t[2]=(h+l)/v):u>p?(v=Math.sqrt(1+u-o-p)*2,t[3]=(h-l)/v,t[0]=(s+c)/v,t[1]=.25*v,t[2]=(f+d)/v):(v=Math.sqrt(1+p-o-u)*2,t[3]=(s-c)/v,t[0]=(h+l)/v,t[1]=(f+d)/v,t[2]=.25*v),t}function J9e(t,e,n,r){e[0]=r[12],e[1]=r[13],e[2]=r[14];var i=r[0],a=r[1],o=r[2],s=r[4],l=r[5],c=r[6],u=r[8],f=r[9],h=r[10];n[0]=Math.sqrt(i*i+a*a+o*o),n[1]=Math.sqrt(s*s+l*l+c*c),n[2]=Math.sqrt(u*u+f*f+h*h);var d=1/n[0],p=1/n[1],g=1/n[2],v=i*d,y=a*p,_=o*g,E=s*d,x=l*p,T=c*g,S=u*d,w=f*p,C=h*g,D=v+x+C,L=0;return D>0?(L=Math.sqrt(D+1)*2,t[3]=.25*L,t[0]=(T-w)/L,t[1]=(S-_)/L,t[2]=(y-E)/L):v>x&&v>C?(L=Math.sqrt(1+v-x-C)*2,t[3]=(T-w)/L,t[0]=.25*L,t[1]=(y+E)/L,t[2]=(S+_)/L):x>C?(L=Math.sqrt(1+x-v-C)*2,t[3]=(S-_)/L,t[0]=(y+E)/L,t[1]=.25*L,t[2]=(T+w)/L):(L=Math.sqrt(1+C-v-x)*2,t[3]=(y-E)/L,t[0]=(S+_)/L,t[1]=(T+w)/L,t[2]=.25*L),t}function e$e(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=i+i,c=a+a,u=o+o,f=i*l,h=i*c,d=i*u,p=a*c,g=a*u,v=o*u,y=s*l,_=s*c,E=s*u,x=r[0],T=r[1],S=r[2];return t[0]=(1-(p+v))*x,t[1]=(h+E)*x,t[2]=(d-_)*x,t[3]=0,t[4]=(h-E)*T,t[5]=(1-(f+v))*T,t[6]=(g+y)*T,t[7]=0,t[8]=(d+_)*S,t[9]=(g-y)*S,t[10]=(1-(f+p))*S,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function dy(t,e,n,r,i){var a=e[0],o=e[1],s=e[2],l=e[3],c=a+a,u=o+o,f=s+s,h=a*c,d=a*u,p=a*f,g=o*u,v=o*f,y=s*f,_=l*c,E=l*u,x=l*f,T=r[0],S=r[1],w=r[2],C=i[0],D=i[1],L=i[2],B=(1-(g+y))*T,I=(d+x)*T,U=(p-E)*T,$=(d-x)*S,X=(1-(h+y))*S,N=(v+_)*S,M=(p+E)*w,k=(v-_)*w,z=(1-(h+g))*w;return t[0]=B,t[1]=I,t[2]=U,t[3]=0,t[4]=$,t[5]=X,t[6]=N,t[7]=0,t[8]=M,t[9]=k,t[10]=z,t[11]=0,t[12]=n[0]+C-(B*C+$*D+M*L),t[13]=n[1]+D-(I*C+X*D+k*L),t[14]=n[2]+L-(U*C+N*D+z*L),t[15]=1,t}function TP(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,l=i+i,c=n*o,u=r*o,f=r*s,h=i*o,d=i*s,p=i*l,g=a*o,v=a*s,y=a*l;return t[0]=1-f-p,t[1]=u+y,t[2]=h-v,t[3]=0,t[4]=u-y,t[5]=1-c-p,t[6]=d+g,t[7]=0,t[8]=h+v,t[9]=d-g,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function t$e(t,e,n,r,i,a,o){var s=1/(n-e),l=1/(i-r),c=1/(a-o);return t[0]=a*2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(i+r)*l,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function QAe(t,e,n,r,i){var a=1/Math.tan(e/2);if(t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){var o=1/(r-i);t[10]=(i+r)*o,t[14]=2*i*r*o}else t[10]=-1,t[14]=-2*r;return t}var vQ=QAe;function n$e(t,e,n,r,i){var a=1/Math.tan(e/2);if(t[0]=a/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0){var o=1/(r-i);t[10]=i*o,t[14]=i*r*o}else t[10]=-1,t[14]=-r;return t}function r$e(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+s),c=2/(i+a);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((o-s)*l*.5),t[9]=(i-a)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function JAe(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=(o+a)*c,t[15]=1,t}var mQ=JAe;function yQ(t,e,n,r,i,a,o){var s=1/(e-n),l=1/(r-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+n)*s,t[13]=(i+r)*l,t[14]=a*c,t[15]=1,t}function _Q(t,e,n,r){var i,a,o,s,l,c,u,f,h,d,p=e[0],g=e[1],v=e[2],y=r[0],_=r[1],E=r[2],x=n[0],T=n[1],S=n[2];return Math.abs(p-x)<Ns&&Math.abs(g-T)<Ns&&Math.abs(v-S)<Ns?Pu(t):(u=p-x,f=g-T,h=v-S,d=1/Math.sqrt(u*u+f*f+h*h),u*=d,f*=d,h*=d,i=_*h-E*f,a=E*u-y*h,o=y*f-_*u,d=Math.sqrt(i*i+a*a+o*o),d?(d=1/d,i*=d,a*=d,o*=d):(i=0,a=0,o=0),s=f*o-h*a,l=h*i-u*o,c=u*a-f*i,d=Math.sqrt(s*s+l*l+c*c),d?(d=1/d,s*=d,l*=d,c*=d):(s=0,l=0,c=0),t[0]=i,t[1]=s,t[2]=u,t[3]=0,t[4]=a,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*p+a*g+o*v),t[13]=-(s*p+l*g+c*v),t[14]=-(u*p+f*g+h*v),t[15]=1,t)}function i$e(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=r[0],l=r[1],c=r[2],u=i-n[0],f=a-n[1],h=o-n[2],d=u*u+f*f+h*h;d>0&&(d=1/Math.sqrt(d),u*=d,f*=d,h*=d);var p=l*h-c*f,g=c*u-s*h,v=s*f-l*u;return d=p*p+g*g+v*v,d>0&&(d=1/Math.sqrt(d),p*=d,g*=d,v*=d),t[0]=p,t[1]=g,t[2]=v,t[3]=0,t[4]=f*v-h*g,t[5]=h*p-u*v,t[6]=u*g-f*p,t[7]=0,t[8]=u,t[9]=f,t[10]=h,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function a$e(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function o$e(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8]+t[9]*t[9]+t[10]*t[10]+t[11]*t[11]+t[12]*t[12]+t[13]*t[13]+t[14]*t[14]+t[15]*t[15])}function s$e(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function ewe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function l$e(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function c$e(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function yY(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function _Y(t,e){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],f=t[9],h=t[10],d=t[11],p=t[12],g=t[13],v=t[14],y=t[15],_=e[0],E=e[1],x=e[2],T=e[3],S=e[4],w=e[5],C=e[6],D=e[7],L=e[8],B=e[9],I=e[10],U=e[11],$=e[12],X=e[13],N=e[14],M=e[15];return Math.abs(n-_)<=Ns*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-E)<=Ns*Math.max(1,Math.abs(r),Math.abs(E))&&Math.abs(i-x)<=Ns*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(a-T)<=Ns*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(o-S)<=Ns*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(s-w)<=Ns*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(l-C)<=Ns*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-D)<=Ns*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(u-L)<=Ns*Math.max(1,Math.abs(u),Math.abs(L))&&Math.abs(f-B)<=Ns*Math.max(1,Math.abs(f),Math.abs(B))&&Math.abs(h-I)<=Ns*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(d-U)<=Ns*Math.max(1,Math.abs(d),Math.abs(U))&&Math.abs(p-$)<=Ns*Math.max(1,Math.abs(p),Math.abs($))&&Math.abs(g-X)<=Ns*Math.max(1,Math.abs(g),Math.abs(X))&&Math.abs(v-N)<=Ns*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(y-M)<=Ns*Math.max(1,Math.abs(y),Math.abs(M))}var VF=qa,u$e=ewe;const twe=Object.freeze(Object.defineProperty({__proto__:null,add:s$e,adjoint:Z9e,clone:SP,copy:Ty,create:Zr,decompose:J9e,determinant:hQ,equals:_Y,exactEquals:yY,frob:o$e,fromQuat:TP,fromQuat2:Q9e,fromRotation:dQ,fromRotationTranslation:KAe,fromRotationTranslationScale:e$e,fromRotationTranslationScaleOrigin:dy,fromScaling:Sd,fromTranslation:rf,fromValues:uQ,fromXRotation:pQ,fromYRotation:gQ,fromZRotation:RR,frustum:t$e,getRotation:dx,getScaling:zm,getTranslation:hx,identity:Pu,invert:qs,lookAt:_Q,mul:VF,multiply:qa,multiplyScalar:l$e,multiplyScalarAndAdd:c$e,ortho:mQ,orthoNO:JAe,orthoZO:yQ,perspective:vQ,perspectiveFromFieldOfView:r$e,perspectiveNO:QAe,perspectiveZO:n$e,rotate:K9e,rotateX:Qm,rotateY:Dy,rotateZ:eb,scale:Hf,set:CR,str:a$e,sub:u$e,subtract:ewe,targetTo:i$e,translate:Vs,transpose:fQ},Symbol.toStringTag,{value:"Module"}));function Pr(){var t=new Ks(3);return Ks!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Yc(t){var e=new Ks(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Ou(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function yr(t,e,n){var r=new Ks(3);return r[0]=t,r[1]=e,r[2]=n,r}function dc(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Co(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function cf(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function MR(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function nwe(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function rwe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function iwe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function Ay(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function f$e(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function h$e(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function Ic(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function pc(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function uA(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],l=n[2];return t[0]=i*l-a*s,t[1]=a*o-r*l,t[2]=r*s-i*o,t}function DA(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t}function ka(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t}function bQ(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t}function awe(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],l=e[1],c=e[2],u=i*c-a*l,f=a*s-r*c,h=r*l-i*s;return u=u+u,f=f+f,h=h+h,t[0]=s+o*u+i*h-a*f,t[1]=l+o*f+a*u-r*h,t[2]=c+o*h+r*f-i*u,t}function Die(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2],l=Math.sqrt((n*n+r*r+i*i)*(a*a+o*o+s*s)),c=l&&pc(t,e)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function xm(t,e){var n=t[0],r=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(n-a)<=Ns*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=Ns*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=Ns*Math.max(1,Math.abs(i),Math.abs(s))}var lD=MR,cD=f$e,EQ=Ou;(function(){var t=Pr();return function(e,n,r,i,a,o){var s,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}})();function gc(){var t=new Ks(4);return Ks!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Om(t,e,n,r){var i=new Ks(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function d$e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function p$e(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function g$e(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function v$e(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=i*o,t[3]=a*o,t}function fs(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,t}(function(){var t=gc();return function(e,n,r,i,a,o){var s,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}})();function wa(){var t=new Ks(4);return Ks!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Vf(t,e,n){n=n*.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function qf(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=r*u+o*s+i*c-a*l,t[1]=i*u+o*l+a*s-r*c,t[2]=a*u+o*c+r*l-i*s,t[3]=o*u-r*s-i*l-a*c,t}function W8(t,e,n,r){var i=e[0],a=e[1],o=e[2],s=e[3],l=n[0],c=n[1],u=n[2],f=n[3],h,d,p,g,v;return d=i*l+a*c+o*u+s*f,d<0&&(d=-d,l=-l,c=-c,u=-u,f=-f),1-d>Ns?(h=Math.acos(d),p=Math.sin(h),g=Math.sin((1-r)*h)/p,v=Math.sin(r*h)/p):(g=1-r,v=r),t[0]=g*i+v*l,t[1]=g*a+v*c,t[2]=g*o+v*u,t[3]=g*s+v*f,t}function fA(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-r*s,t[2]=-i*s,t[3]=a*s,t}function m$e(t,e){var n=e[0]+e[4]+e[8],r;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[i*3+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[i*3+i]-e[a*3+a]-e[o*3+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[a*3+o]-e[o*3+a])*r,t[a]=(e[a*3+i]+e[i*3+a])*r,t[o]=(e[o*3+i]+e[i*3+o])*r}return t}function y_(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:j9e,a=Math.PI/360;e*=a,r*=a,n*=a;var o=Math.sin(e),s=Math.cos(e),l=Math.sin(n),c=Math.cos(n),u=Math.sin(r),f=Math.cos(r);switch(i){case"xyz":t[0]=o*c*f+s*l*u,t[1]=s*l*f-o*c*u,t[2]=s*c*u+o*l*f,t[3]=s*c*f-o*l*u;break;case"xzy":t[0]=o*c*f-s*l*u,t[1]=s*l*f-o*c*u,t[2]=s*c*u+o*l*f,t[3]=s*c*f+o*l*u;break;case"yxz":t[0]=o*c*f+s*l*u,t[1]=s*l*f-o*c*u,t[2]=s*c*u-o*l*f,t[3]=s*c*f+o*l*u;break;case"yzx":t[0]=o*c*f+s*l*u,t[1]=s*l*f+o*c*u,t[2]=s*c*u-o*l*f,t[3]=s*c*f-o*l*u;break;case"zxy":t[0]=o*c*f-s*l*u,t[1]=s*l*f+o*c*u,t[2]=s*c*u+o*l*f,t[3]=s*c*f-o*l*u;break;case"zyx":t[0]=o*c*f-s*l*u,t[1]=s*l*f+o*c*u,t[2]=s*c*u-o*l*f,t[3]=s*c*f+o*l*u;break;default:throw new Error("Unknown angle order "+i)}return t}var owe=Om,__=d$e,YF=p$e,uD=qf,BA=v$e;(function(){var t=Pr(),e=yr(1,0,0),n=yr(0,1,0);return function(r,i,a){var o=pc(i,a);return o<-.999999?(uA(t,e,i),EQ(t)<1e-6&&uA(t,n,i),Ic(t,t),Vf(r,t,Math.PI),r):o>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(uA(t,i,a),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+o,BA(r,r))}})();(function(){var t=wa(),e=wa();return function(n,r,i,a,o,s){return W8(t,r,o,s),W8(e,i,a,s),W8(n,t,e,2*s*(1-s)),n}})();(function(){var t=Hx();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],BA(e,m$e(e,t))}})();function Xc(){var t=new Ks(2);return Ks!=Float32Array&&(t[0]=0,t[1]=0),t}function bY(t,e){var n=new Ks(2);return n[0]=t,n[1]=e,n}function BC(t,e){return t[0]=e[0],t[1]=e[1],t}function xQ(t,e,n){return t[0]=e,t[1]=n,t}function h_(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function EY(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function y$e(t,e){return t[0]=-e[0],t[1]=-e[1],t}function PR(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function fD(t,e){return t[0]*e[0]+t[1]*e[1]}function _$e(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t}function b$e(t,e){return t[0]===e[0]&&t[1]===e[1]}var swe=EY;(function(){var t=Xc();return function(e,n,r,i,a,o){var s,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,s=r;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}})();var lwe={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function E$e(t,e,n){if(t[n].length>7){t[n].shift();for(var r=t[n],i=n;r.length;)e[n]="A",t.splice(i+=1,0,["C"].concat(r.splice(0,6)));t.splice(n,1)}}var FC={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function cwe(t){return Array.isArray(t)&&t.every(function(e){var n=e[0].toLowerCase();return FC[n]===e.length-1&&"achlmqstvz".includes(n)})}function uwe(t){return cwe(t)&&t.every(function(e){var n=e[0];return n===n.toUpperCase()})}function fwe(t){return uwe(t)&&t.every(function(e){var n=e[0];return"ACLMQZ".includes(n)})}function Bie(t){for(var e=t.pathValue[t.segmentStart],n=e.toLowerCase(),r=t.data;r.length>=FC[n]&&(n==="m"&&r.length>2?(t.segments.push([e].concat(r.splice(0,2))),n="l",e=e==="m"?"l":"L"):t.segments.push([e].concat(r.splice(0,FC[n]))),!!FC[n]););}function x$e(t){var e=t.index,n=t.pathValue,r=n.charCodeAt(e);if(r===48){t.param=0,t.index+=1;return}if(r===49){t.param=1,t.index+=1;return}t.err='[path-util]: invalid Arc flag "'.concat(n[e],'", expecting 0 or 1 at index ').concat(e)}function S$e(t){return t>=48&&t<=57||t===43||t===45||t===46}function cT(t){return t>=48&&t<=57}function T$e(t){var e=t.max,n=t.pathValue,r=t.index,i=r,a=!1,o=!1,s=!1,l=!1,c;if(i>=e){t.err="[path-util]: Invalid path value at index ".concat(i,', "pathValue" is missing param');return}if(c=n.charCodeAt(i),(c===43||c===45)&&(i+=1,c=n.charCodeAt(i)),!cT(c)&&c!==46){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" is not a number');return}if(c!==46){if(a=c===48,i+=1,c=n.charCodeAt(i),a&&i<e&&c&&cT(c)){t.err="[path-util]: Invalid path value at index ".concat(r,', "').concat(n[r],'" illegal number');return}for(;i<e&&cT(n.charCodeAt(i));)i+=1,o=!0;c=n.charCodeAt(i)}if(c===46){for(l=!0,i+=1;cT(n.charCodeAt(i));)i+=1,s=!0;c=n.charCodeAt(i)}if(c===101||c===69){if(l&&!o&&!s){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" invalid float exponent');return}if(i+=1,c=n.charCodeAt(i),(c===43||c===45)&&(i+=1),i<e&&cT(n.charCodeAt(i)))for(;i<e&&cT(n.charCodeAt(i));)i+=1;else{t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(n[i],'" invalid integer exponent');return}}t.index=i,t.param=+t.pathValue.slice(r,i)}function A$e(t){var e=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&e.includes(t)}function ek(t){for(var e=t.pathValue,n=t.max;t.index<n&&A$e(e.charCodeAt(t.index));)t.index+=1}function w$e(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function O$e(t){return(t|32)===97}function C$e(t){var e=t.max,n=t.pathValue,r=t.index,i=n.charCodeAt(r),a=FC[n[r].toLowerCase()];if(t.segmentStart=r,!w$e(i)){t.err='[path-util]: Invalid path value "'.concat(n[r],'" is not a path command');return}if(t.index+=1,ek(t),t.data=[],!a){Bie(t);return}for(;;){for(var o=a;o>0;o-=1){if(O$e(i)&&(o===3||o===4)?x$e(t):T$e(t),t.err.length)return;t.data.push(t.param),ek(t),t.index<e&&n.charCodeAt(t.index)===44&&(t.index+=1,ek(t))}if(t.index>=t.max||!S$e(n.charCodeAt(t.index)))break}Bie(t)}var R$e=(function(){function t(e){this.pathValue=e,this.segments=[],this.max=e.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t})();function M$e(t){if(cwe(t))return[].concat(t);var e=new R$e(t);for(ek(e);e.index<e.max&&!e.err.length;)C$e(e);return e.err?e.err:e.segments}function P$e(t){if(uwe(t))return[].concat(t);var e=M$e(t),n=0,r=0,i=0,a=0;return e.map(function(o){var s=o.slice(1).map(Number),l=o[0],c=l.toUpperCase();if(l==="M")return n=s[0],r=s[1],i=n,a=r,["M",n,r];var u;if(l!==c)switch(c){case"A":u=[c,s[0],s[1],s[2],s[3],s[4],s[5]+n,s[6]+r];break;case"V":u=[c,s[0]+r];break;case"H":u=[c,s[0]+n];break;default:{var f=s.map(function(d,p){return d+(p%2?r:n)});u=[c].concat(f)}}else u=[c].concat(s);var h=u.length;switch(c){case"Z":n=i,r=a;break;case"H":n=u[1];break;case"V":r=u[1];break;default:n=u[h-2],r=u[h-1],c==="M"&&(i=n,a=r)}return u})}function N$e(t,e){var n=t[0],r=e.x1,i=e.y1,a=e.x2,o=e.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(n)||(e.qx=null,e.qy=null),n==="H")l=["L",t[1],i];else if(n==="V")l=["L",r,t[1]];else if(n==="S"){var c=r*2-a,u=i*2-o;e.x1=c,e.y1=u,l=["C",c,u].concat(s)}else if(n==="T"){var f=r*2-e.qx,h=i*2-e.qy;e.qx=f,e.qy=h,l=["Q",f,h].concat(s)}else if(n==="Q"){var d=s[0],p=s[1];e.qx=d,e.qy=p}return l}function FA(t){if(fwe(t))return[].concat(t);for(var e=P$e(t),n=Ot({},lwe),r=0;r<e.length;r+=1){e[r]=N$e(e[r],n);var i=e[r],a=i.length;n.x1=+i[a-2],n.y1=+i[a-1],n.x2=+i[a-4]||n.x1,n.y2=+i[a-3]||n.y1}return e}function I$e(t){return fwe(t)&&t.every(function(e){var n=e[0];return"MC".includes(n)})}function M3(t,e,n){var r=t*Math.cos(n)-e*Math.sin(n),i=t*Math.sin(n)+e*Math.cos(n);return{x:r,y:i}}function SQ(t,e,n,r,i,a,o,s,l,c){var u=t,f=e,h=n,d=r,p=s,g=l,v=Math.PI*120/180,y=Math.PI/180*(+i||0),_=[],E,x,T,S,w;if(c)x=c[0],T=c[1],S=c[2],w=c[3];else{E=M3(u,f,-y),u=E.x,f=E.y,E=M3(p,g,-y),p=E.x,g=E.y;var C=(u-p)/2,D=(f-g)/2,L=C*C/(h*h)+D*D/(d*d);L>1&&(L=Math.sqrt(L),h*=L,d*=L);var B=h*h,I=d*d,U=(a===o?-1:1)*Math.sqrt(Math.abs((B*I-B*D*D-I*C*C)/(B*D*D+I*C*C)));S=U*h*D/d+(u+p)/2,w=U*-d*C/h+(f+g)/2,x=Math.asin(((f-w)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),T=Math.asin(((g-w)/d*Math.pow(10,9)>>0)/Math.pow(10,9)),x=u<S?Math.PI-x:x,T=p<S?Math.PI-T:T,x<0&&(x=Math.PI*2+x),T<0&&(T=Math.PI*2+T),o&&x>T&&(x-=Math.PI*2),!o&&T>x&&(T-=Math.PI*2)}var $=T-x;if(Math.abs($)>v){var X=T,N=p,M=g;T=x+v*(o&&T>x?1:-1),p=S+h*Math.cos(T),g=w+d*Math.sin(T),_=SQ(p,g,h,d,i,0,o,N,M,[T,X,S,w])}$=T-x;var k=Math.cos(x),z=Math.sin(x),j=Math.cos(T),V=Math.sin(T),Q=Math.tan($/4),ee=4/3*h*Q,re=4/3*d*Q,ne=[u,f],le=[u+ee*z,f-re*k],ue=[p+ee*V,g-re*j],ve=[p,g];if(le[0]=2*ne[0]-le[0],le[1]=2*ne[1]-le[1],c)return le.concat(ue,ve,_);_=le.concat(ue,ve,_);for(var Se=[],Re=0,Xe=_.length;Re<Xe;Re+=1)Se[Re]=Re%2?M3(_[Re-1],_[Re],y).y:M3(_[Re],_[Re+1],y).x;return Se}function L$e(t,e,n,r,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*n,o*e+s*r,o*i+s*n,o*a+s*r,i,a]}function a_(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return[r+(a-r)*n,i+(o-i)*n]}var Fie=function(t,e,n,r){var i=.5,a=a_([t,e],[n,r],i);return _r(_r([],a,!0),[n,r,n,r],!1)};function k$e(t,e){var n=t[0],r=t.slice(1).map(Number),i=r[0],a=r[1],o,s=e.x1,l=e.y1,c=e.x,u=e.y;switch("TQ".includes(n)||(e.qx=null,e.qy=null),n){case"M":return e.x=i,e.y=a,t;case"A":return o=[s,l].concat(r),["C"].concat(SQ(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return e.qx=i,e.qy=a,o=[s,l].concat(r),["C"].concat(L$e(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(Fie(s,l,i,a));case"Z":return s===c&&l===u?["C",s,l,c,u,c,u]:["C"].concat(Fie(s,l,c,u))}return t}function NR(t,e){if(e===void 0&&(e=!1),I$e(t)){var n=[].concat(t);return e?[n,[]]:n}for(var r=FA(t),i=Ot({},lwe),a=[],o="",s=r.length,l,c,u=[],f=0;f<s;f+=1){r[f]&&(o=r[f][0]),a[f]=o;var h=k$e(r[f],i);r[f]=h,E$e(r,a,f),s=r.length,o==="Z"&&u.push(f),l=r[f],c=l.length,i.x1=+l[c-2],i.y1=+l[c-1],i.x2=+l[c-4]||i.x1,i.y2=+l[c-3]||i.y1}return e?[r,u]:r}function hwe(t){return t.map(function(e){return Array.isArray(e)?[].concat(e):e})}function dwe(t){var e=t.slice(1).map(function(n,r,i){return r?i[r-1].slice(-2).concat(n.slice(1)):t[0].slice(1).concat(n.slice(1))}).map(function(n){return n.map(function(r,i){return n[n.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(e[0].slice(0,2))].concat(e.map(function(n){return["C"].concat(n.slice(2))}))}function Rh(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function xY(t,e,n,r,i){var a=Rh([t,e],[n,r]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:t,y:e};else if(i>=a)o={x:n,y:r};else{var s=a_([t,e],[n,r],i/a),l=s[0],c=s[1];o={x:l,y:c}}return{length:a,point:o,min:{x:Math.min(t,n),y:Math.min(e,r)},max:{x:Math.max(t,n),y:Math.max(e,r)}}}function Uie(t,e){var n=t.x,r=t.y,i=e.x,a=e.y,o=n*i+r*a,s=Math.sqrt((Math.pow(n,2)+Math.pow(r,2))*(Math.pow(i,2)+Math.pow(a,2))),l=n*a-r*i<0?-1:1,c=l*Math.acos(o/s);return c}function D$e(t,e,n,r,i,a,o,s,l,c){var u=Math.abs,f=Math.sin,h=Math.cos,d=Math.sqrt,p=Math.PI,g=u(n),v=u(r),y=(i%360+360)%360,_=y*(p/180);if(t===s&&e===l)return{x:t,y:e};if(g===0||v===0)return xY(t,e,s,l,c).point;var E=(t-s)/2,x=(e-l)/2,T={x:h(_)*E+f(_)*x,y:-f(_)*E+h(_)*x},S=Math.pow(T.x,2)/Math.pow(g,2)+Math.pow(T.y,2)/Math.pow(v,2);S>1&&(g*=d(S),v*=d(S));var w=Math.pow(g,2)*Math.pow(v,2)-Math.pow(g,2)*Math.pow(T.y,2)-Math.pow(v,2)*Math.pow(T.x,2),C=Math.pow(g,2)*Math.pow(T.y,2)+Math.pow(v,2)*Math.pow(T.x,2),D=w/C;D=D<0?0:D;var L=(a!==o?1:-1)*d(D),B={x:L*(g*T.y/v),y:L*(-(v*T.x)/g)},I={x:h(_)*B.x-f(_)*B.y+(t+s)/2,y:f(_)*B.x+h(_)*B.y+(e+l)/2},U={x:(T.x-B.x)/g,y:(T.y-B.y)/v},$=Uie({x:1,y:0},U),X={x:(-T.x-B.x)/g,y:(-T.y-B.y)/v},N=Uie(U,X);!o&&N>0?N-=2*p:o&&N<0&&(N+=2*p),N%=2*p;var M=$+N*c,k=g*h(M),z=v*f(M),j={x:h(_)*k-f(_)*z+I.x,y:f(_)*k+h(_)*z+I.y};return j}function B$e(t,e,n,r,i,a,o,s,l,c,u){var f,h=u.bbox,d=h===void 0?!0:h,p=u.length,g=p===void 0?!0:p,v=u.sampleSize,y=v===void 0?30:v,_=typeof c=="number",E=t,x=e,T=0,S=[E,x,T],w=[E,x],C=0,D={x:0,y:0},L=[{x:E,y:x}];_&&c<=0&&(D={x:E,y:x});for(var B=0;B<=y;B+=1){if(C=B/y,f=D$e(t,e,n,r,i,a,o,s,l,C),E=f.x,x=f.y,d&&L.push({x:E,y:x}),g&&(T+=Rh(w,[E,x])),w=[E,x],_&&T>=c&&c>S[2]){var I=(T-c)/(T-S[2]);D={x:w[0]*(1-I)+S[0]*I,y:w[1]*(1-I)+S[1]*I}}S=[E,x,T]}return _&&c>=T&&(D={x:s,y:l}),{length:T,point:D,min:{x:Math.min.apply(null,L.map(function(U){return U.x})),y:Math.min.apply(null,L.map(function(U){return U.y}))},max:{x:Math.max.apply(null,L.map(function(U){return U.x})),y:Math.max.apply(null,L.map(function(U){return U.y}))}}}function F$e(t,e,n,r,i,a,o,s,l){var c=1-l;return{x:Math.pow(c,3)*t+3*Math.pow(c,2)*l*n+3*c*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(c,3)*e+3*Math.pow(c,2)*l*r+3*c*Math.pow(l,2)*a+Math.pow(l,3)*s}}function pwe(t,e,n,r,i,a,o,s,l,c){var u,f=c.bbox,h=f===void 0?!0:f,d=c.length,p=d===void 0?!0:d,g=c.sampleSize,v=g===void 0?10:g,y=typeof l=="number",_=t,E=e,x=0,T=[_,E,x],S=[_,E],w=0,C={x:0,y:0},D=[{x:_,y:E}];y&&l<=0&&(C={x:_,y:E});for(var L=0;L<=v;L+=1){if(w=L/v,u=F$e(t,e,n,r,i,a,o,s,w),_=u.x,E=u.y,h&&D.push({x:_,y:E}),p&&(x+=Rh(S,[_,E])),S=[_,E],y&&x>=l&&l>T[2]){var B=(x-l)/(x-T[2]);C={x:S[0]*(1-B)+T[0]*B,y:S[1]*(1-B)+T[1]*B}}T=[_,E,x]}return y&&l>=x&&(C={x:o,y:s}),{length:x,point:C,min:{x:Math.min.apply(null,D.map(function(I){return I.x})),y:Math.min.apply(null,D.map(function(I){return I.y}))},max:{x:Math.max.apply(null,D.map(function(I){return I.x})),y:Math.max.apply(null,D.map(function(I){return I.y}))}}}function U$e(t,e,n,r,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*n+Math.pow(o,2)*i,y:Math.pow(s,2)*e+2*s*o*r+Math.pow(o,2)*a}}function j$e(t,e,n,r,i,a,o,s){var l,c=s.bbox,u=c===void 0?!0:c,f=s.length,h=f===void 0?!0:f,d=s.sampleSize,p=d===void 0?10:d,g=typeof o=="number",v=t,y=e,_=0,E=[v,y,_],x=[v,y],T=0,S={x:0,y:0},w=[{x:v,y}];g&&o<=0&&(S={x:v,y});for(var C=0;C<=p;C+=1){if(T=C/p,l=U$e(t,e,n,r,i,a,T),v=l.x,y=l.y,u&&w.push({x:v,y}),h&&(_+=Rh(x,[v,y])),x=[v,y],g&&_>=o&&o>E[2]){var D=(_-o)/(_-E[2]);S={x:x[0]*(1-D)+E[0]*D,y:x[1]*(1-D)+E[1]*D}}E=[v,y,_]}return g&&o>=_&&(S={x:i,y:a}),{length:_,point:S,min:{x:Math.min.apply(null,w.map(function(L){return L.x})),y:Math.min.apply(null,w.map(function(L){return L.y}))},max:{x:Math.max.apply(null,w.map(function(L){return L.x})),y:Math.max.apply(null,w.map(function(L){return L.y}))}}}function gwe(t,e,n){for(var r,i,a,o,s,l,c=FA(t),u=typeof e=="number",f,h=[],d,p=0,g=0,v=0,y=0,_,E=[],x=[],T=0,S={x:0,y:0},w=S,C=S,D=S,L=0,B=0,I=c.length;B<I;B+=1)_=c[B],d=_[0],f=d==="M",h=f?h:[p,g].concat(_.slice(1)),f?(v=_[1],y=_[2],S={x:v,y},w=S,T=0,u&&e<.001&&(D=S)):d==="L"?(r=xY(h[0],h[1],h[2],h[3],(e||0)-L),T=r.length,S=r.min,w=r.max,C=r.point):d==="A"?(i=B$e(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],(e||0)-L,n||{}),T=i.length,S=i.min,w=i.max,C=i.point):d==="C"?(a=pwe(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],(e||0)-L,n||{}),T=a.length,S=a.min,w=a.max,C=a.point):d==="Q"?(o=j$e(h[0],h[1],h[2],h[3],h[4],h[5],(e||0)-L,n||{}),T=o.length,S=o.min,w=o.max,C=o.point):d==="Z"&&(h=[p,g,v,y],s=xY(h[0],h[1],h[2],h[3],(e||0)-L),T=s.length,S=s.min,w=s.max,C=s.point),u&&L<e&&L+T>=e&&(D=C),x.push(w),E.push(S),L+=T,l=d!=="Z"?_.slice(-2):[v,y],p=l[0],g=l[1];return u&&e>=L&&(D={x:p,y:g}),{length:L,point:D,min:{x:Math.min.apply(null,E.map(function(U){return U.x})),y:Math.min.apply(null,E.map(function(U){return U.y}))},max:{x:Math.max.apply(null,x.map(function(U){return U.x})),y:Math.max.apply(null,x.map(function(U){return U.y}))}}}function vwe(t,e){return gwe(t,void 0,Ot(Ot({},e),{bbox:!1,length:!0})).length}function z$e(t){var e=t.length,n=e-1;return t.map(function(r,i){return t.map(function(a,o){var s=i+o,l;return o===0||t[s]&&t[s][0]==="M"?(l=t[s],["M"].concat(l.slice(-2))):(s>=e&&(s-=n),t[s])})})}function mwe(t,e){var n=t.length-1,r=[],i=0,a=0,o=z$e(t);return o.forEach(function(s,l){t.slice(1).forEach(function(c,u){a+=Rh(t[(l+u)%n].slice(-2),e[u%n].slice(-2))}),r[l]=a,a=0}),i=r.indexOf(Math.min.apply(null,r)),o[i]}function $$e(t,e,n,r,i,a,o,s){return 3*((s-e)*(n+i)-(o-t)*(r+a)+r*(t-i)-n*(e-a)+s*(i+t/3)-o*(a+e/3))/20}function H$e(t){var e=0,n=0,r=0;return NR(t).map(function(i){var a;switch(i[0]){case"M":return e=i[1],n=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],c=o[2],u=o[3],f=o[4],h=o[5];return r=$$e(e,n,s,l,c,u,f,h),a=i.slice(-2),e=a[0],n=a[1],r}}).reduce(function(i,a){return i+a},0)}function hD(t){return H$e(t)>=0}function ywe(t,e,n){return gwe(t,e,Ot(Ot({},n),{bbox:!1,length:!0})).point}var G$e=50;function W$e(t,e){e===void 0&&(e=.5);var n=t.slice(0,2),r=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=a_(n,r,e),s=a_(r,i,e),l=a_(i,a,e),c=a_(o,s,e),u=a_(s,l,e),f=a_(c,u,e);return[["C"].concat(o,c,f),["C"].concat(u,l,a)]}function jie(t){return t.map(function(e,n,r){var i=n&&r[n-1].slice(-2).concat(e.slice(1)),a=n?pwe(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return n?o=a?W$e(i):[e,e]:o=[e],{s:e,ss:o,l:a}})}function TQ(t,e,n,r){if(r===void 0&&(r=0),r>G$e)return console.warn("Maximum recursion depth reached in equalizeSegments"),[t,e];var i=jie(t),a=jie(e),o=i.length,s=a.length,l=i.filter(function(y){return y.l}).length,c=a.filter(function(y){return y.l}).length,u=i.filter(function(y){return y.l}).reduce(function(y,_){var E=_.l;return y+E},0)/l||0,f=a.filter(function(y){return y.l}).reduce(function(y,_){var E=_.l;return y+E},0)/c||0,h=n||Math.max(o,s),d=[u,f],p=[h-o,h-s],g=0,v=[i,a].map(function(y,_){return y.l===h?y.map(function(E){return E.s}):y.map(function(E,x){return g=x&&p[_]&&E.l>=d[_],p[_]-=g?1:0,g?E.ss:[E.s]}).flat()});return v[0].length===v[1].length?v:TQ(v[0],v[1],h,r+1)}function SY(t){var e=document.createElement("div");e.innerHTML=t;var n=e.childNodes[0];return n&&e.contains(n)&&e.removeChild(n),n}function Vo(t,e){if(t!==null)return{type:"column",value:t,field:e}}function IR(t,e){const n=Vo(t,e);return Object.assign(Object.assign({},n),{inferred:!0})}function dD(t,e){if(t!==null)return{type:"column",value:t,field:e,visual:!0}}function V$e(t,e){const n=Vo(t,e);return Object.assign(Object.assign({},n),{constant:!1})}function k_(t,e){const n=[];for(const r of t)n[r]=e;return n}function Da(t,e){const n=t[e];if(!n)return[null,null];const{value:r,field:i=null}=n;return[r,i]}function pD(t,...e){for(const n of e)if(typeof n=="string"){const[r,i]=Da(t,n);if(r!==null)return[r,i]}else return[n,null];return[null,null]}function AP(t){return t instanceof Date?!1:typeof t=="object"}const wP=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;return r!==void 0?[t,e]:[t,Nt({},e,{encode:{y1:IR(k_(t,0))}})]};wP.props={};function UA(t,...e){return e.reduce((n,r)=>i=>n(r(i)),t)}function gD(t,e){return e-t?n=>(n-t)/(e-t):n=>.5}function Y$e(t,e){const n=e<t?e:t,r=t>e?t:e;return i=>Math.min(Math.max(n,i),r)}function AQ(t,e,n,r,i){let a=n||0,o=r||t.length;const s=i||(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>e?o=l:a=l+1}return a}const TY=Math.sqrt(50),AY=Math.sqrt(10),wY=Math.sqrt(2);function tk(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=TY?10:a>=AY?5:a>=wY?2:1)*10**i:-(10**-i)/(a>=TY?10:a>=AY?5:a>=wY?2:1)}function zie(t,e,n){const r=Math.abs(e-t)/Math.max(0,n);let i=10**Math.floor(Math.log(r)/Math.LN10);const a=r/i;return a>=TY?i*=10:a>=AY?i*=5:a>=wY&&(i*=2),e<t?-i:i}const wQ=(t,e,n=5)=>{const r=[t,e];let i=0,a=r.length-1,o=r[i],s=r[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=tk(o,s,n),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=tk(o,s,n)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=tk(o,s,n)),l>0?(r[i]=Math.floor(o/l)*l,r[a]=Math.ceil(s/l)*l):l<0&&(r[i]=Math.ceil(o*l)/l,r[a]=Math.floor(s*l)/l),r},LR=1e3,kR=LR*60,DR=kR*60,px=DR*24,UC=px*7,_we=px*30,bwe=px*365;function ff(t,e,n,r){const i=(c,u)=>{const f=d=>r(d)%u===0;let h=u;for(;h&&!f(c);)n(c,-1),h-=1;return c},a=(c,u)=>{u&&i(c,u),e(c)},o=(c,u)=>{const f=new Date(+c);return a(f,u),f},s=(c,u)=>{const f=new Date(+c-1);return a(f,u),n(f,u),a(f),f};return{ceil:s,floor:o,range:(c,u,f,h)=>{const d=[],p=Math.floor(f),g=h?s(c,f):s(c);for(let v=g;v<u;n(v,p),a(v))d.push(new Date(+v));return d},duration:t}}const X$e=ff(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),q$e=ff(LR,t=>{t.setMilliseconds(0)},(t,e=1)=>{t.setTime(+t+LR*e)},t=>t.getSeconds()),Z$e=ff(kR,t=>{t.setSeconds(0,0)},(t,e=1)=>{t.setTime(+t+kR*e)},t=>t.getMinutes()),K$e=ff(DR,t=>{t.setMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+DR*e)},t=>t.getHours()),Q$e=ff(px,t=>{t.setHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+px*e)},t=>t.getDate()-1),Ewe=ff(_we,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getMonth();t.setMonth(n+e)},t=>t.getMonth()),J$e=ff(UC,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,e=1)=>{t.setDate(t.getDate()+7*e)},t=>{const e=Ewe.floor(t),n=new Date(+t);return Math.floor((+n-+e)/UC)}),eHe=ff(bwe,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e=1)=>{const n=t.getFullYear();t.setFullYear(n+e)},t=>t.getFullYear()),xwe={millisecond:X$e,second:q$e,minute:Z$e,hour:K$e,day:Q$e,week:J$e,month:Ewe,year:eHe},tHe=ff(1,t=>t,(t,e=1)=>{t.setTime(+t+e)},t=>t.getTime()),nHe=ff(LR,t=>{t.setUTCMilliseconds(0)},(t,e=1)=>{t.setTime(+t+LR*e)},t=>t.getUTCSeconds()),rHe=ff(kR,t=>{t.setUTCSeconds(0,0)},(t,e=1)=>{t.setTime(+t+kR*e)},t=>t.getUTCMinutes()),iHe=ff(DR,t=>{t.setUTCMinutes(0,0,0)},(t,e=1)=>{t.setTime(+t+DR*e)},t=>t.getUTCHours()),aHe=ff(px,t=>{t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+px*e)},t=>t.getUTCDate()-1),Swe=ff(_we,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCMonth();t.setUTCMonth(n+e)},t=>t.getUTCMonth()),oHe=ff(UC,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,e=1)=>{t.setTime(+t+UC*e)},t=>{const e=Swe.floor(t),n=new Date(+t);return Math.floor((+n-+e)/UC)}),sHe=ff(bwe,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e=1)=>{const n=t.getUTCFullYear();t.setUTCFullYear(n+e)},t=>t.getUTCFullYear()),Twe={millisecond:tHe,second:nHe,minute:rHe,hour:iHe,day:aHe,week:oHe,month:Swe,year:sHe};function lHe(t){const e=t?Twe:xwe,{year:n,month:r,week:i,day:a,hour:o,minute:s,second:l,millisecond:c}=e;return{tickIntervals:[[l,1],[l,5],[l,15],[l,30],[s,1],[s,5],[s,15],[s,30],[o,1],[o,3],[o,6],[o,12],[a,1],[a,2],[i,1],[r,1],[r,3],[n,1]],year:n,millisecond:c}}function Awe(t,e,n,r,i){const a=+t,o=+e,{tickIntervals:s,year:l,millisecond:c}=lHe(i),u=([v,y])=>v.duration*y,f=r?(o-a)/r:n||5,h=r||(o-a)/f,d=s.length,p=AQ(s,h,0,d,u);let g;if(p===d){const v=zie(a/l.duration,o/l.duration,f);g=[l,v]}else if(p){const v=h/u(s[p-1])<u(s[p])/h,[y,_]=v?s[p-1]:s[p],E=r?Math.ceil(r/y.duration):_;g=[y,E]}else{const v=Math.max(zie(a,o,f),1);g=[c,v]}return g}const cHe=(t,e,n,r,i)=>{const a=t>e,o=a?e:t,s=a?t:e,[l,c]=Awe(o,s,n,r,i),u=[l.floor(o,c),l.ceil(s,c)];return a?u.reverse():u};function vD(t){return!mr(t)&&!WAe(t)&&!Number.isNaN(t)}const wwe=t=>e=>-t(-e),OQ=(t,e)=>{const n=Math.log(t),r=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:i=>Math.log(i)/n;return e?wwe(r):r},CQ=(t,e)=>{const n=t===Math.E?Math.exp:r=>t**r;return e?wwe(n):n},uHe=(t,e,n,r)=>{const i=t<0,a=OQ(r,i),o=CQ(r,i),s=t>e,l=s?e:t,c=s?t:e,u=[o(Math.floor(a(l))),o(Math.ceil(a(c)))];return s?u.reverse():u},fHe=t=>e=>{const n=t(e);return Ln(n)?Math.round(n):n};function hHe(t,e){return n=>{n.prototype.rescale=function(){this.initRange(),this.nice();const[r]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r))},n.prototype.initRange=function(){const{interpolator:r}=this.options;this.options.range=t(r)},n.prototype.composeOutput=function(r,i){const{domain:a,interpolator:o,round:s}=this.getOptions(),l=e(a.map(r)),c=s?fHe(o):o;this.output=UA(c,l,i,r)},n.prototype.invert=void 0}}var V8={exports:{}},Y8,$ie;function dHe(){return $ie||($ie=1,Y8={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Y8}var X8={exports:{}},q8,Hie;function pHe(){return Hie||(Hie=1,q8=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}),q8}var Gie;function gHe(){if(Gie)return X8.exports;Gie=1;var t=pHe(),e=Array.prototype.concat,n=Array.prototype.slice,r=X8.exports=function(a){for(var o=[],s=0,l=a.length;s<l;s++){var c=a[s];t(c)?o=e.call(o,n.call(c)):o.push(c)}return o};return r.wrap=function(i){return function(){return i(r(arguments))}},X8.exports}var Wie;function vHe(){if(Wie)return V8.exports;Wie=1;var t=dHe(),e=gHe(),n=Object.hasOwnProperty,r=Object.create(null);for(var i in t)n.call(t,i)&&(r[t[i]]=i);var a=V8.exports={to:{},get:{}};a.get=function(l){var c=l.substring(0,3).toLowerCase(),u,f;switch(c){case"hsl":u=a.get.hsl(l),f="hsl";break;case"hwb":u=a.get.hwb(l),f="hwb";break;default:u=a.get.rgb(l),f="rgb";break}return u?{model:f,value:u}:null},a.get.rgb=function(l){if(!l)return null;var c=/^#([a-f0-9]{3,4})$/i,u=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,f=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,h=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,d=/^(\w+)$/,p=[0,0,0,1],g,v,y;if(g=l.match(u)){for(y=g[2],g=g[1],v=0;v<3;v++){var _=v*2;p[v]=parseInt(g.slice(_,_+2),16)}y&&(p[3]=parseInt(y,16)/255)}else if(g=l.match(c)){for(g=g[1],y=g[3],v=0;v<3;v++)p[v]=parseInt(g[v]+g[v],16);y&&(p[3]=parseInt(y+y,16)/255)}else if(g=l.match(f)){for(v=0;v<3;v++)p[v]=parseInt(g[v+1],0);g[4]&&(g[5]?p[3]=parseFloat(g[4])*.01:p[3]=parseFloat(g[4]))}else if(g=l.match(h)){for(v=0;v<3;v++)p[v]=Math.round(parseFloat(g[v+1])*2.55);g[4]&&(g[5]?p[3]=parseFloat(g[4])*.01:p[3]=parseFloat(g[4]))}else return(g=l.match(d))?g[1]==="transparent"?[0,0,0,0]:n.call(t,g[1])?(p=t[g[1]],p[3]=1,p):null:null;for(v=0;v<3;v++)p[v]=o(p[v],0,255);return p[3]=o(p[3],0,1),p},a.get.hsl=function(l){if(!l)return null;var c=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,u=l.match(c);if(u){var f=parseFloat(u[4]),h=(parseFloat(u[1])%360+360)%360,d=o(parseFloat(u[2]),0,100),p=o(parseFloat(u[3]),0,100),g=o(isNaN(f)?1:f,0,1);return[h,d,p,g]}return null},a.get.hwb=function(l){if(!l)return null;var c=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,u=l.match(c);if(u){var f=parseFloat(u[4]),h=(parseFloat(u[1])%360+360)%360,d=o(parseFloat(u[2]),0,100),p=o(parseFloat(u[3]),0,100),g=o(isNaN(f)?1:f,0,1);return[h,d,p,g]}return null},a.to.hex=function(){var l=e(arguments);return"#"+s(l[0])+s(l[1])+s(l[2])+(l[3]<1?s(Math.round(l[3]*255)):"")},a.to.rgb=function(){var l=e(arguments);return l.length<4||l[3]===1?"rgb("+Math.round(l[0])+", "+Math.round(l[1])+", "+Math.round(l[2])+")":"rgba("+Math.round(l[0])+", "+Math.round(l[1])+", "+Math.round(l[2])+", "+l[3]+")"},a.to.rgb.percent=function(){var l=e(arguments),c=Math.round(l[0]/255*100),u=Math.round(l[1]/255*100),f=Math.round(l[2]/255*100);return l.length<4||l[3]===1?"rgb("+c+"%, "+u+"%, "+f+"%)":"rgba("+c+"%, "+u+"%, "+f+"%, "+l[3]+")"},a.to.hsl=function(){var l=e(arguments);return l.length<4||l[3]===1?"hsl("+l[0]+", "+l[1]+"%, "+l[2]+"%)":"hsla("+l[0]+", "+l[1]+"%, "+l[2]+"%, "+l[3]+")"},a.to.hwb=function(){var l=e(arguments),c="";return l.length>=4&&l[3]!==1&&(c=", "+l[3]),"hwb("+l[0]+", "+l[1]+"%, "+l[2]+"%"+c+")"},a.to.keyword=function(l){return r[l.slice(0,3)]};function o(l,c,u){return Math.min(Math.max(c,l),u)}function s(l){var c=Math.round(l).toString(16).toUpperCase();return c.length<2?"0"+c:c}return V8.exports}var mHe=vHe();const Owe=Ni(mHe);function Z8(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function yHe(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(n===0)return[r*255,r*255,r*255,i];const a=r<.5?r*(1+n):r+n-r*n,o=2*r-a,s=Z8(o,a,e+1/3),l=Z8(o,a,e),c=Z8(o,a,e-1/3);return[s*255,l*255,c*255,i]}function Vie(t){const e=Owe.get(t);if(!e)return null;const{model:n,value:r}=e;return n==="rgb"?r:n==="hsl"?yHe(r):null}const jA=(t,e)=>n=>t*(1-n)+e*n,_He=(t,e)=>{const n=Vie(t),r=Vie(e);return n===null||r===null?n?()=>t:()=>e:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=n[u],h=r[u];a[u]=f*(1-i)+h*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},OP=(t,e)=>typeof t=="number"&&typeof e=="number"?jA(t,e):typeof t=="string"&&typeof e=="string"?_He(t,e):()=>t,bHe=(t,e)=>{const n=jA(t,e);return r=>Math.round(n(r))};function EHe(t,e){const{second:n,minute:r,hour:i,day:a,week:o,month:s,year:l}=e;return n.floor(t)<t?".SSS":r.floor(t)<t?":ss":i.floor(t)<t?"hh:mm":a.floor(t)<t?"hh A":s.floor(t)<t?o.floor(t)<t?"MMM DD":"ddd DD":l.floor(t)<t?"MMMM":"YYYY"}function Yie({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function xHe({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function SHe({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function THe(t){return typeof t=="object"?t.valueOf():t}let Xie=class extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=THe,e!==null)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(Yie({map:this.map,initKey:this.initKey},e))}has(e){return super.has(Yie({map:this.map,initKey:this.initKey},e))}set(e,n){return super.set(xHe({map:this.map,initKey:this.initKey},e),n)}delete(e){return super.delete(SHe({map:this.map,initKey:this.initKey},e))}},CP=class{transformBreaks(e){return e}constructor(e){var n;this.options=Nt({},this.getDefaultOptions()),this.update(!((n=e?.breaks)===null||n===void 0)&&n.length?this.transformBreaks(e):e)}getOptions(){return this.options}update(e={}){const n=e.breaks?this.transformBreaks(e):e;this.options=Nt({},this.options,n),this.rescale(n)}rescale(e){}};const XF=Symbol("defaultUnknown");function qie(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function Zie(t){const{value:e,from:n,to:r,mapper:i,notFoundReturn:a}=t;let o=i.get(e);if(o===void 0){if(a!==XF)return a;o=n.push(e)-1,i.set(e,o)}return r[o%r.length]}function Kie(t){return t instanceof Date?e=>`${e}`:typeof t=="object"?e=>JSON.stringify(e):e=>e}let Cwe=class Rwe extends CP{getDefaultOptions(){return{domain:[],range:[],unknown:XF}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&qie(this.domainIndexMap,this.getDomain(),this.domainKey),Zie({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&qie(this.rangeIndexMap,this.getRange(),this.rangeKey),Zie({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=Kie(n),this.rangeKey=Kie(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new Rwe(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:n}=this.options;return this.sortedDomain=n?[...e].sort(n):e,this.sortedDomain}};function AHe(t){const e=t.reduce((n,r)=>Math.min(n,r),1/0);return e===1/0?[]:t.map(n=>n/e)}function wHe(t,e){const n=t.length,r=e-n;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,e):t}function OHe(t){return Math.round(t*1e12)/1e12}function CHe(t){const{domain:e,range:n,paddingOuter:r,paddingInner:i,flex:a,round:o,align:s}=t,l=e.length,c=wHe(a,l),[u,f]=n,h=f-u,d=2/l*r+1-1/l*i,p=h/d,g=p*i/l,v=p-l*g,y=AHe(c),_=y.reduce((I,U)=>I+U),E=v/_,x=new Xie(e.map((I,U)=>{const $=y[U]*E;return[I,o?Math.floor($):$]})),T=new Xie(e.map((I,U)=>{const X=y[U]*E+g;return[I,o?Math.floor(X):X]})),S=Array.from(T.values()).reduce((I,U)=>I+U),C=(h-(S-S/l*i))*s,D=u+C;let L=o?Math.round(D):D;const B=new Array(l);for(let I=0;I<l;I+=1){B[I]=OHe(L);const U=e[I];L+=T.get(U)}return{valueBandWidth:x,valueStep:T,adjustedRange:B}}function RHe(t){var e;const{domain:n}=t,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=t.flex)===null||e===void 0)&&e.length))return CHe(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,h=a[0];const p=a[1]-h,g=o*2,v=r-s;u=p/Math.max(1,g+v),l&&(u=Math.floor(u)),h+=(p-u*(r-s))*c,f=u*(1-s),l&&(h=Math.round(h),f=Math.round(f));const y=new Array(r).fill(0).map((_,E)=>h+E*u);return{valueStep:u,valueBandWidth:f,adjustedRange:y}}let BR=class Mwe extends Cwe{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:XF,flex:[]}}constructor(e){super(e)}clone(){return new Mwe(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:n}=this.options;return e>0?e:n}getPaddingOuter(){const{padding:e,paddingOuter:n}=this.options;return e>0?e:n}rescale(){super.rescale();const{align:e,domain:n,range:r,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=RHe({align:e,range:r,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}};const MHe=(t,e)=>{if(!e?.length)return t;const n=[...t,...e.flatMap(a=>[a.start,a.end])],i=Array.from(new Set(n)).sort((a,o)=>a-o).filter(a=>!e.some(({start:o,end:s})=>a>o&&a<s));return i.length?i:t},G_=(t,e,n,r)=>{let i,a,o=t,s=e;if(o===s&&n>0)return[o];let l=tk(o,s,n);if(l===0||!Number.isFinite(l))return[];if(l>0){o=Math.ceil(o/l),s=Math.floor(s/l),a=new Array(i=Math.ceil(s-o+1));for(let c=0;c<i;c+=1)a[c]=(o+c)*l}else{l=-l,o=Math.ceil(o*l),s=Math.floor(s*l),a=new Array(i=Math.ceil(s-o+1));for(let c=0;c<i;c+=1)a[c]=(o+c)/l}return MHe(a,r)};let RQ=class Pwe extends CP{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:G_}}map(e){const[n]=this.options.range;return n!==void 0?n:this.options.unknown}invert(e){const[n]=this.options.range;return e===n&&n!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:e,domain:n,tickCount:r}=this.options,[i,a]=n;return!Ln(i)||!Ln(a)?[]:e(i,a,r)}clone(){return new Pwe(this.options)}};function KO(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const PHe=[1,5,2,2.5,4,3],Qie=Number.EPSILON*100;function NHe(t,e){return(t%e+e)%e}function IHe(t){return Math.round(t*1e12)/1e12}function LHe(t,e,n,r,i,a){const o=OR(e),s=XAe(e,t);let l=0;const c=NHe(r,a);return(c<Qie||a-c<Qie)&&r<=0&&i>=0&&(l=1),1-s/(o-1)-n+l}function kHe(t,e,n){const r=OR(e);return 1-XAe(e,t)/(r-1)-n+1}function DHe(t,e,n,r,i,a){const o=(t-1)/(a-i),s=(e-1)/(Math.max(a,r)-Math.min(n,i));return 2-Math.max(o/s,s/o)}function BHe(t,e){return t>=e?2-(t-1)/(e-1):1}function FHe(t,e,n,r){const i=e-t;return 1-.5*((e-r)**2+(t-n)**2)/(.1*i)**2}function UHe(t,e,n){const r=e-t;return n>r?1-((n-r)/2)**2/(.1*r)**2:1}function jHe(){return 1}const MQ=(t,e,n=5,r=!0,i=PHe,a=[.25,.2,.5,.05])=>{const o=n<0?0:Math.round(n);if(Number.isNaN(t)||Number.isNaN(e)||typeof t!="number"||typeof e!="number"||!o)return[];if(e-t<1e-15||o===1)return[t];const s={score:-2,lmin:0,lmax:0,lstep:0};let l=1;for(;l<1/0;){for(let p=0;p<i.length;p+=1){const g=i[p],v=kHe(g,i,l);if(a[0]*v+a[1]+a[2]+a[3]<s.score){l=1/0;break}let y=2;for(;y<1/0;){const _=BHe(y,o);if(a[0]*v+a[1]+a[2]*_+a[3]<s.score)break;const E=(e-t)/(y+1)/l/g;let x=Math.ceil(Math.log10(E));for(;x<1/0;){const T=l*g*10**x,S=UHe(t,e,T*(y-1));if(a[0]*v+a[1]*S+a[2]*_+a[3]<s.score)break;const w=Math.floor(e/T)*l-(y-1)*l,C=Math.ceil(t/T)*l;if(w<=C){const D=C-w;for(let L=0;L<=D;L+=1){const I=(w+L)*(T/l),U=I+T*(y-1),$=T,X=LHe(g,i,l,I,U,$),N=FHe(t,e,I,U),M=DHe(y,o,t,e,I,U),k=jHe(),z=a[0]*X+a[1]*N+a[2]*M+a[3]*k;z>s.score&&(!r||I<=t&&U>=e)&&(s.lmin=I,s.lmax=U,s.lstep=$,s.score=z)}}x+=1}y+=1}}l+=1}const c=KO(s.lmax),u=KO(s.lmin),f=KO(s.lstep),h=Math.floor(IHe((c-u)/f))+1,d=new Array(h);d[0]=KO(u);for(let p=1;p<h;p+=1)d[p]=KO(d[p-1]+f);return d};let Nwe=class Iwe extends CP{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:MQ}}map(e){return vD(e)?e:this.options.unknown}invert(e){return this.map(e)}clone(){return new Iwe(this.options)}getTicks(){const{domain:e,tickCount:n,tickMethod:r}=this.options,[i,a]=e;return!Ln(i)||!Ln(a)?[]:r(i,a,n)}};const zHe=(t,e,n)=>{const[r,i]=t,[a,o]=e;let s,l;return r<i?(s=gD(r,i),l=n(a,o)):(s=gD(i,r),l=n(o,a)),UA(l,s)},$He=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=t[0]>t[r],s=o?[...t].reverse():t,l=o?[...e].reverse():e;for(let c=0;c<r;c+=1)i[c]=gD(s[c],s[c+1]),a[c]=n(l[c],l[c+1]);return c=>{const u=AQ(t,c,1,r)-1,f=i[u],h=a[u];return UA(h,f)(c)}},Jie=(t,e,n,r)=>(Math.min(t.length,e.length)>2?$He:zHe)(t,e,r?bHe:n);let qF=class extends CP{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:jA,tickCount:5}}map(e){return vD(e)?this.output(e):this.options.unknown}invert(e){return vD(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice||Us(this.options.breaks))return;const[e,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,n,r,...i)}getTicks(){const{tickMethod:e}=this.options,[n,r,i,...a]=this.getTickMethodOptions();return e(n,r,i,...a)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],i=e[e.length-1];return[r,i,n]}chooseNice(){return wQ}rescale(){this.nice();const[e,n]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}chooseClamp(e){const{clamp:n,range:r}=this.options,i=this.options.domain.map(e),a=Math.min(i.length,r.length);return n?Y$e(i[0],i[a-1]):jm}composeOutput(e,n){const{domain:r,range:i,round:a,interpolate:o}=this.options,s=Jie(r.map(e),i,o,a);this.output=UA(s,n,e)}composeInput(e,n,r){const{domain:i,range:a}=this.options,o=Jie(a,i.map(e),jA);this.input=UA(n,r,o)}},wy=class Lwe extends qF{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:OP,tickMethod:G_,tickCount:5}}removeUnsortedValues(e,n,r){let i=-1/0;return n.reduce((o,s,l)=>{if(l===0)return o;const c=i>0?i:s;return i>0&&(r?s>i:s<i)?o.push(l):(c-n[l-1])*(r?-1:1)<0?(i<0&&(i=n[l-1]),o.push(l)):i=-1/0,o},[]).slice().reverse().forEach(o=>{e.splice(o,1),n.splice(o,1)}),{breaksDomain:e,breaksRange:n}}transformDomain(e){const n=[.2,.8],r=.03,{domain:i=[],range:a=[1,0],breaks:o=[],tickCount:s=5,nice:l}=e,[c,u]=[Math.min(...i),Math.max(...i)];let f=c,h=u;if(l&&o.length<2){const D=this.chooseNice()(c,u,s);f=D[0],h=D[D.length-1]}const d=Math.min(f,c);let p=Math.max(h,u);const g=o.filter(({end:D})=>D<p).sort((D,L)=>D.start-L.start),v=G_(d,p,s,g);if(bd(v)<p){const D=wQ(0,p-bd(v),3);v.push(bd(v)+bd(D)),p=bd(v)}const[y,_]=[a[0],bd(a)],E=p-d,x=Math.abs(_-y),T=y>_,S=v.map(D=>{const L=(D-d)/E;return T?y-L*x:y+L*x}),[w,C]=n;return g.forEach(({start:D,end:L,gap:B=r,compress:I="middle"})=>{const U=v.indexOf(D),$=v.indexOf(L);let X=(S[U]+S[$])/2;I==="start"&&(X=S[U]),I==="end"&&(X=S[$]);const N=B*x/2;let M=T?X+N:X-N,k=T?X-N:X+N;M<w&&(k+=w-M,M=w),k>C&&(M-=k-C,k=C),M>C&&(k-=M-C,M=C),k<w&&(M+=w-k,k=w),S[U]=M,S[$]=k}),this.removeUnsortedValues(v,S,T)}transformBreaks(e){const{domain:n,breaks:r=[]}=e;if(!Us(e.breaks))return e;const i=Math.max(...n),a=r.filter(({end:c})=>c<i),o={...e,breaks:a},{breaksDomain:s,breaksRange:l}=this.transformDomain(o);return{...e,domain:s,range:l,breaks:a,tickMethod:()=>[...s]}}chooseTransforms(){return[jm,jm]}clone(){return new Lwe(this.options)}},HHe=class kwe extends BR{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:XF,paddingInner:1,paddingOuter:0}}constructor(e){super(e)}getPaddingInner(){return 1}clone(){return new kwe(this.options)}update(e){super.update(e)}getPaddingOuter(){return this.options.padding}};const GHe=t=>e=>e<0?-((-e)**t):e**t,WHe=t=>e=>e<0?-((-e)**(1/t)):e**(1/t),VHe=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);let Dwe=class Bwe extends qF{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:OP,tickMethod:G_,tickCount:5}}constructor(e){super(e)}chooseTransforms(){const{exponent:e}=this.options;if(e===1)return[jm,jm];const n=e===.5?VHe:GHe(e),r=WHe(e);return[n,r]}clone(){return new Bwe(this.options)}},YHe=class Fwe extends Dwe{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:OP,tickMethod:G_,tickCount:5,exponent:.5}}constructor(e){super(e)}update(e){super.update(e)}clone(){return new Fwe(this.options)}},ZF=class Uwe extends CP{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(e){super(e)}map(e){if(!vD(e))return this.options.unknown;const n=AQ(this.thresholds,e,0,this.n);return this.options.range[n]}invert(e){const{range:n}=this.options,r=n.indexOf(e),i=this.thresholds;return[i[r-1],i[r]]}clone(){return new Uwe(this.options)}rescale(){const{domain:e,range:n}=this.options;this.n=Math.min(e.length,n.length-1),this.thresholds=e}};const XHe=(t,e,n,r=10)=>{const i=t<0,a=CQ(r,i),o=OQ(r,i),s=e<t,l=s?e:t,c=s?t:e;let u=o(l),f=o(c),h=[];if(!(r%1)&&f-u<n){if(u=Math.floor(u),f=Math.ceil(f),i)for(;u<=f;u+=1){const d=a(u);for(let p=r-1;p>=1;p-=1){const g=d*p;if(g>c)break;g>=l&&h.push(g)}}else for(;u<=f;u+=1){const d=a(u);for(let p=1;p<r;p+=1){const g=d*p;if(g>c)break;g>=l&&h.push(g)}}h.length*2<n&&(h=G_(l,c,n))}else{const d=n===-1?f-u:Math.min(f-u,n);h=G_(u,f,d).map(a)}return s?h.reverse():h};let qHe=class jwe extends qF{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:OP,tickMethod:XHe,tickCount:5}}chooseNice(){return uHe}getTickMethodOptions(){const{domain:e,tickCount:n,base:r}=this.options,i=e[0],a=e[e.length-1];return[i,a,n,r]}chooseTransforms(){const{base:e,domain:n}=this.options,r=n[0]<0;return[OQ(e,r),CQ(e,r)]}clone(){return new jwe(this.options)}},zwe=class $we extends ZF{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:MQ}}constructor(e){super(e)}nice(){const{nice:e}=this.options;if(e){const[n,r,i]=this.getTickMethodOptions();this.options.domain=wQ(n,r,i)}}getTicks(){const{tickMethod:e}=this.options,[n,r,i]=this.getTickMethodOptions();return e(n,r,i)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],i=e[e.length-1];return[r,i,n]}rescale(){this.nice();const{range:e,domain:n}=this.options,[r,i]=n;this.n=e.length-1,this.thresholds=new Array(this.n);for(let a=0;a<this.n;a+=1)this.thresholds[a]=((a+1)*i-(a-this.n)*r)/(this.n+1)}invert(e){const[n,r]=super.invert(e),[i,a]=this.options.domain;return n===void 0&&r===void 0?[n,r]:[n||i,r||a]}getThresholds(){return this.thresholds}clone(){return new $we(this.options)}};function ZHe(t,e){const n=t.length;if(!n)return;if(n<2)return t[n-1];const r=(n-1)*e,i=Math.floor(r),a=t[i],o=t[i+1];return a+(o-a)*(r-i)}function KHe(t,e,n=!1){const r=t;n||r.sort((a,o)=>a-o);const i=[];for(let a=1;a<e;a+=1)i.push(ZHe(r,a/e));return i}let Hwe=class Gwe extends ZF{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:MQ}}constructor(e){super(e)}rescale(){const{domain:e,range:n}=this.options;this.n=n.length-1,this.thresholds=KHe(e,this.n+1,!1)}invert(e){const[n,r]=super.invert(e),{domain:i}=this.options,a=i[0],o=i[i.length-1];return n===void 0&&r===void 0?[n,r]:[n||a,r||o]}getThresholds(){return this.thresholds}clone(){return new Gwe(this.options)}getTicks(){const{tickCount:e,domain:n,tickMethod:r}=this.options,i=n.length-1,a=n[0],o=n[i];return r(a,o,e)}};var QHe=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,JHe=/\[([^]*?)\]/gm;function Wwe(t,e){for(var n=[],r=0,i=t.length;r<i;r++)n.push(t[r].substr(0,e));return n}function OY(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var a=i[r];for(var o in a)t[o]=a[o]}return t}var Vwe=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Ywe=["January","February","March","April","May","June","July","August","September","October","November","December"],eGe=Wwe(Ywe,3),tGe=Wwe(Vwe,3),nGe={dayNamesShort:tGe,dayNames:Vwe,monthNamesShort:eGe,monthNames:Ywe,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10?1:0)*t%10]}},rGe=OY({},nGe),mh=function(t,e){for(e===void 0&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},iGe={D:function(t){return String(t.getDate())},DD:function(t){return mh(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return mh(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return mh(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return mh(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return mh(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return mh(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return mh(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return mh(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return mh(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return mh(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return mh(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+mh(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+mh(Math.floor(Math.abs(e)/60),2)+":"+mh(Math.abs(e)%60,2)}},eae={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},aGe=function(t,e,n){if(e===void 0&&(e=eae.default),n===void 0&&(n={}),typeof t=="number"&&(t=new Date(t)),Object.prototype.toString.call(t)!=="[object Date]"||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");e=eae[e]||e;var r=[];e=e.replace(JHe,function(a,o){return r.push(o),"@@@"});var i=OY(OY({},rGe),n);return e=e.replace(QHe,function(a){return iGe[a](t,i)}),e.replace(/@@@/g,function(){return r.shift()})};const oGe=(t,e,n,r,i)=>{const a=t>e,o=a?e:t,s=a?t:e,[l,c]=Awe(o,s,n,r,i),u=l.range(o,new Date(+s+1),c,!0);return a?u.reverse():u};function sGe(t){const e=t.getTimezoneOffset(),n=new Date(t);return n.setMinutes(n.getMinutes()+e,n.getSeconds(),n.getMilliseconds()),n}let lGe=class Xwe extends qF{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:oGe,interpolate:jA,mask:void 0,utc:!1}}chooseTransforms(){return[r=>+r,r=>new Date(r)]}chooseNice(){return cHe}getTickMethodOptions(){const{domain:e,tickCount:n,tickInterval:r,utc:i}=this.options,a=e[0],o=e[e.length-1];return[a,o,n,r,i]}getFormatter(){const{mask:e,utc:n}=this.options,r=n?Twe:xwe,i=n?sGe:jm;return a=>aGe(i(a),e||EHe(a,r))}clone(){return new Xwe(this.options)}};var cGe=function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},CY;function uGe(t){return[t(0),t(1)]}const fGe=t=>{const[e,n]=t;return UA(jA(0,1),gD(e,n))};let RY=CY=class extends wy{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:jm,tickMethod:G_,tickCount:5}}constructor(e){super(e)}clone(){return new CY(this.options)}};RY=CY=cGe([hHe(uGe,fGe)],RY);var hGe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};function dGe(t){var e;let n=t;for(;n;){if(((e=n.attributes)===null||e===void 0?void 0:e.class)==="view")return n;n=n.parentNode}return null}function KF(t){const{markType:e,nodeName:n}=t;return e==="heatmap"&&n==="image"}function PQ(t,e){const n=e??dGe(t).__data__,r=t.__data__,{markKey:i,index:a,seriesIndex:o,normalized:s={x:0}}=r,{markState:l}=n,c=Array.from(l.keys()).find(u=>u.key===i);if(c)return o?o.map(u=>c.data[u]):KF(t)?c.data[Math.round(c.data.length*s.x)]:c.data[a]}function pGe(t,e){var n,r,i,a;const o=(n=e.markKey)!==null&&n!==void 0?n:(i=(r=e.element)===null||r===void 0?void 0:r.__data__)===null||i===void 0?void 0:i.markKey,s=Object.keys(t).find(l=>{if(l.startsWith("series")){const c=t[l].getOptions();return c.name==="series"&&c.markKey===o}});return(a=t[s])!==null&&a!==void 0?a:t.series}function gGe(t,e){const{color:n,facet:r=!1}=t,{color:i,series:a}=e,o=pGe(t,e),s=l=>l&&l.invert&&!(l instanceof BR)&&!(l instanceof RQ);if(s(o))return o.clone().invert(a);if(a&&o instanceof BR&&o.invert(a)!==i&&!r)return o.invert(a);if(s(n)){const l=n.invert(i);return Array.isArray(l)?null:l}return null}function gx(t){return t}function NQ(t){return t.reduce((e,n)=>(r,...i)=>n(e(r,...i),...i),gx)}function vGe(t){return t.reduce((e,n)=>r=>hGe(this,void 0,void 0,function*(){const i=yield e(r);return n(i)}),gx)}function IQ(t){return t.replace(/( |^)[a-z]/g,e=>e.toUpperCase())}function zA(t=""){throw new Error(t)}function QF(t,e){const{attributes:n}=e,r=new Set(["id","className"]);for(const[i,a]of Object.entries(n))r.has(i)||t.attr(i,a)}function Yo(t){return t!=null&&!Number.isNaN(t)}function mGe(t){const e=new Map;return n=>{if(e.has(n))return e.get(n);const r=t(n);return e.set(n,r),r}}function yGe(t,e){const{transform:n}=t.style,i=(a=>a==="none"||a===void 0)(n)?"":n;t.style.transform=`${i} ${e}`.trimStart()}function Vn(t,e){return qwe(t,e)||{}}function qwe(t,e){const n=Object.entries(t||{}).filter(([r])=>r.startsWith(e)).map(([r,i])=>[cQ(r.replace(e,"").trim()),i]).filter(([r])=>!!r);return n.length===0?null:Object.fromEntries(n)}function _Ge(t,e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.find(r=>n.startsWith(r))))}function nk(t,...e){return Object.fromEntries(Object.entries(t).filter(([n])=>e.every(r=>!n.startsWith(r))))}function tae(t,e){if(t===void 0)return null;if(typeof t=="number")return t;const n=+t.replace("%","");return Number.isNaN(n)?null:n/100*e}function $A(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function Oy(t){return t===null||t===!1}function Zwe(t,e,n=5,r=0){if(!(r>=n)){for(const i of Object.keys(e)){const a=e[i];!xy(a)||!xy(t[i])?t[i]=a:Zwe(t[i],a,n,r+1)}return t}}function $m(t,e){return Object.entries(t).reduce((n,[r,i])=>(n[r]=e(i,r,t),n),{})}function Gx(t){return t.map((e,n)=>n)}function bGe(t){return t[0]}function Kwe(t){return t[t.length-1]}function EGe(t){return Array.from(new Set(t))}function Qwe(t,e){const n=[[],[]];return t.forEach(r=>{n[e(r)?0:1].push(r)}),n}function Jwe(t,e=t.length){if(e===1)return t.map(r=>[r]);const n=[];for(let r=0;r<t.length;r++){const i=t.slice(r+1);Jwe(i,e-1).forEach(o=>{n.push([t[r],...o])})}return n}function xGe(t){if(t.length===1)return[t];const e=[];for(let n=1;n<=t.length;n++)e.push(...Jwe(t,n));return e}function tb(t,e,n){const{encode:r}=n;if(t===null)return[e];const i=SGe(t).map(o=>{var s;return[o,(s=Da(r,o))===null||s===void 0?void 0:s[0]]}).filter(([,o])=>Yo(o));return Array.from(Go(e,o=>i.map(([,s])=>s[o]).join("-")).values())}function eOe(t){return Array.isArray(t)?wGe(t):typeof t=="function"?AGe(t):t==="series"?TGe:t==="value"?OGe:t==="sum"?CGe:t==="maxIndex"?RGe:null}function tOe(t,e){for(const n of t)n.sort(e)}function nOe(t,e){return e?.domain||Array.from(new Set(t))}function SGe(t){return Array.isArray(t)?t:[t]}function TGe(t,e,n){return RP(r=>n[r])}function AGe(t){return(e,n,r)=>RP(i=>t(e[i]))}function wGe(t){return(e,n,r)=>(i,a)=>t.reduce((o,s)=>o!==0?o:Rc(e[i][s],e[a][s]),0)}function OGe(t,e,n){return RP(r=>e[r])}function CGe(t,e,n){const r=Gx(t),i=Array.from(Go(r,o=>n[+o]).entries()),a=new Map(i.map(([o,s])=>[o,s.reduce((l,c)=>l+ +e[c])]));return RP(o=>a.get(n[o]))}function RGe(t,e,n){const r=Gx(t),i=Array.from(Go(r,o=>n[+o]).entries()),a=new Map(i.map(([o,s])=>[o,Sw(s,l=>e[l])]));return RP(o=>a.get(n[o]))}function RP(t){return(e,n)=>Rc(t(e),t(n))}const rOe=(t={})=>{const{groupBy:e="x",orderBy:n=null,reverse:r=!1,y:i="y",y1:a="y1",series:o=!0}=t;return(s,l)=>{var c;const{data:u,encode:f,style:h={}}=l,[d,p]=Da(f,"y"),[g,v]=Da(f,"y1"),[y]=o?pD(f,"series","color"):Da(f,"color"),_=tb(e,s,l),x=((c=eOe(n))!==null&&c!==void 0?c:(()=>null))(u,d,y);x&&tOe(_,x);const T=new Array(s.length),S=new Array(s.length),w=new Array(s.length),C=[],D=[];for(const X of _){r&&X.reverse();const N=g?+g[X[0]]:0,M=[],k=[];for(const ne of X){const le=w[ne]=+d[ne]-N;le<0?k.push(ne):le>=0&&M.push(ne)}const z=M.length>0?M:k,j=k.length>0?k:M;let V=M.length-1,Q=0;for(;V>0&&d[z[V]]===0;)V--;for(;Q<j.length-1&&d[j[Q]]===0;)Q++;C.push(z[V]),D.push(j[Q]);let ee=N;for(const ne of k.reverse()){const le=w[ne];ee=T[ne]=(S[ne]=ee)+le}let re=N;for(const ne of M){const le=w[ne];le>0?re=T[ne]=(S[ne]=re)+le:T[ne]=S[ne]=re}}const L=new Set(C),B=new Set(D),I=i==="y"?T:S,U=a==="y"?T:S;let $;return l.type==="point"?$={y0:IR(d,p),y:Vo(I,p)}:$={y0:IR(d,p),y:Vo(I,p),y1:Vo(U,v)},[s,Nt({},l,{encode:Object.assign({},$),style:Object.assign({first:(X,N)=>L.has(N),last:(X,N)=>B.has(N)},h)})]}};rOe.props={};function QO(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function MGe(t){const e=t.getFullYear(),n=QO(t.getMonth()+1),r=QO(t.getDate()),i=`${e}-${n}-${r}`,a=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return a||o||s?`${i} ${QO(a)}:${QO(o)}:${QO(s)}`:i}const JF=(t={})=>{const{channel:e="x"}=t;return(n,r)=>{const{encode:i}=r,{tooltip:a}=r;if(Oy(a))return[n,r];const{title:o}=a;if(o!==void 0)return[n,r];const s=Object.keys(i).filter(c=>c.startsWith(e)).filter(c=>!i[c].inferred).map(c=>Da(i,c)).filter(([c])=>c).map(c=>c[0]);if(s.length===0)return[n,r];const l=[];for(const c of n)l[c]={value:s.map(u=>u[c]instanceof Date?MGe(u[c]):u[c]).join(", ")};return[n,Nt({},r,{tooltip:{title:l}})]}};JF.props={};const nb=()=>(t,e)=>{const{encode:n}=e,{x:r}=n;return r!==void 0?[t,e]:[t,Nt({},e,{encode:{x:IR(k_(t,0))},scale:{x:{guide:null}}})]};nb.props={};const MP=()=>(t,e)=>{const{encode:n}=e,{y:r}=n;return r!==void 0?[t,e]:[t,Nt({},e,{encode:{y:IR(k_(t,0))},scale:{y:{guide:null}}})]};MP.props={};const LQ=()=>(t,e)=>{const{encode:n}=e,{size:r}=n;return r!==void 0?[t,e]:[t,Nt({},e,{encode:{size:dD(k_(t,3))}})]};LQ.props={};var PGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const iOe=()=>(t,e)=>{const{encode:n}=e,{key:r}=n,i=PGe(n,["key"]);if(r!==void 0)return[t,e];const a=Object.values(i).map(({value:s})=>s),o=t.map(s=>a.filter(Array.isArray).map(l=>l[s]).join("-"));return[t,Nt({},e,{encode:{key:Vo(o)}})]};iOe.props={};const kQ=()=>(t,e)=>{const{encode:n}=e,{series:r,color:i}=n;if(r!==void 0||i===void 0)return[t,e];const[a,o]=Da(n,"color");return[t,Nt({},e,{encode:{series:Vo(a,o)}})]};kQ.props={};const aOe=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(AP)?[t,e]:[t,Nt({},e,{encode:{y:Vo(n)}})]};aOe.props={};const oOe=()=>(t,e)=>{const{data:n}=e;return!Array.isArray(n)||n.some(AP)?[t,e]:[t,Nt({},e,{encode:{x:Vo(n)}})]};oOe.props={};const sOe=()=>(t,e)=>{const{encode:n}=e,{y1:r}=n;if(r)return[t,e];const[i]=Da(n,"y");return[t,Nt({},e,{encode:{y1:Vo([...i])}})]};sOe.props={};const lOe=()=>(t,e)=>{const{encode:n}=e,{x1:r}=n;if(r)return[t,e];const[i]=Da(n,"x");return[t,Nt({},e,{encode:{x1:Vo([...i])}})]};lOe.props={};const cOe=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(AP))){const r=(i,a)=>Array.isArray(i[0])?i.map(o=>o[a]):[i[a]];return[t,Nt({},e,{encode:{x:Vo(r(n,0)),x1:Vo(r(n,1))}})]}return[t,e]};cOe.props={};const uOe=()=>(t,e)=>{const{data:n}=e;if(Array.isArray(n)&&(n.every(Array.isArray)||!n.some(AP))){const r=(i,a)=>Array.isArray(i[0])?i.map(o=>o[a]):[i[a]];return[t,Nt({},e,{encode:{y:Vo(r(n,0)),y1:Vo(r(n,1))}})]}return[t,e]};uOe.props={};const e4=t=>{const{channel:e}=t;return(n,r)=>{const{encode:i,tooltip:a}=r;if(Oy(a))return[n,r];const{items:o=[]}=a;if(!o||o.length>0)return[n,r];const l=(Array.isArray(e)?e:[e]).flatMap(c=>Object.keys(i).filter(u=>u.startsWith(c)).map(u=>{const{field:f,value:h,inferred:d=!1,aggregate:p}=i[u];return d?null:p&&h?{channel:u}:f?{field:f}:h?{channel:u}:null}).filter(u=>u!==null));return[n,Nt({},r,{tooltip:{items:l}})]}};e4.props={};const DQ=()=>(t,e)=>[t,Nt({scale:{x:{padding:0},y:{padding:0}}},e)];DQ.props={};var nae=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const t4=()=>(t,e)=>{const{data:n,style:r={}}=e,i=nae(e,["data","style"]),{x:a,y:o}=r,s=nae(r,["x","y"]);if(a==null||o==null)return[t,e];const l=a||0,c=o||0;return[[0],Nt({},i,{data:[0],cartesian:!0,encode:{x:Vo([l]),y:Vo([c])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]};t4.props={};const fOe=()=>(t,e)=>{const{style:n={}}=e;return[t,Nt({},e,{style:Object.assign(Object.assign({},n),Object.fromEntries(Object.entries(n).filter(([,r])=>typeof r=="function").map(([r,i])=>[r,()=>i])))})]};fOe.props={};const n4=()=>(t,e)=>{const{data:n}=e;if(!Array.isArray(n)||n.some(AP))return[t,e];const r=Array.isArray(n[0])?n:[n],i=r.map(o=>o[0]),a=r.map(o=>o[1]);return[t,Nt({},e,{encode:{x:Vo(i),y:Vo(a)}})]};n4.props={};const hOe=()=>(t,e)=>{const{style:n={},encode:r}=e,{series:i}=r,{gradient:a}=n;return!a||i?[t,e]:[t,Nt({},e,{encode:{series:dD(k_(t,void 0))}})]};hOe.props={};var NGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const dOe=(t={})=>{const{groupBy:e="x",reverse:n=!1,orderBy:r,padding:i}=t;return NGe(t,["groupBy","reverse","orderBy","padding"]),(a,o)=>{const{data:s,encode:l,scale:c}=o,{series:u}=c,[f]=Da(l,"y"),[h]=pD(l,"series","color"),d=nOe(h,u),p=Nt({},o,{scale:{series:{domain:d,paddingInner:i}}}),g=tb(e,a,o),v=eOe(r);if(!v)return[a,Nt(p,{encode:{series:Vo(h)}})];const y=v(s,f,h);y&&tOe(g,y);const _=new Array(a.length);for(const E of g){n&&E.reverse();for(let x=0;x<E.length;x++)_[E[x]]=d[x]}return[a,Nt(p,{encode:{series:Vo(r?_:h)}})]}};dOe.props={};const pOe=t=>{const{groupBy:e=["x"],reducer:n=(o,s)=>s[o[0]],orderBy:r=null,reverse:i=!1,duration:a}=t;return(o,s)=>{const{encode:l}=s,u=(Array.isArray(e)?e:[e]).map(v=>[v,Da(l,v)[0]]);if(u.length===0)return[o,s];let f=[o];for(const[,v]of u){const y=[];for(const _ of f){const E=Array.from(Go(_,x=>v[x]).values());y.push(...E)}f=y}if(r){const[v]=Da(l,r);v&&f.sort((y,_)=>n(y,v)-n(_,v)),i&&f.reverse()}const h=(a||3e3)/f.length,[d]=a?[k_(o,h)]:pD(l,"enterDuration",k_(o,h)),[p]=pD(l,"enterDelay",k_(o,0)),g=new Array(o.length);for(let v=0,y=0;v<f.length;v++){const _=f[v],E=_o(_,x=>+d[x]);for(const x of _)g[x]=+p[x]+y;y+=E}return[o,Nt({},s,{encode:{enterDuration:dD(d),enterDelay:dD(g)}})]}};pOe.props={};var IGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function LGe(t){return typeof t=="function"?t:{min:(n,r)=>Nd(n,i=>r[+i]),max:(n,r)=>_o(n,i=>r[+i]),first:(n,r)=>r[n[0]],last:(n,r)=>r[n[n.length-1]],mean:(n,r)=>ER(n,i=>r[+i]),median:(n,r)=>LK(n,i=>r[+i]),sum:(n,r)=>jp(n,i=>r[+i]),deviation:(n,r)=>mTe(n,i=>r[+i])}[t]||_o}const gOe=(t={})=>{const{groupBy:e="x",basis:n="max"}=t;return(r,i)=>{const{encode:a,tooltip:o}=i,{x:s}=a,l=IGe(a,["x"]),c=Object.entries(l).filter(([g])=>g.startsWith("y")).map(([g])=>[g,Da(a,g)[0]]),[,u]=c.find(([g])=>g==="y"),f=c.map(([g])=>[g,new Array(r.length)]),h=tb(e,r,i),d=LGe(n);for(const g of h){const v=d(g,u);for(const y of g)for(let _=0;_<c.length;_++){const[,E]=c[_],[,x]=f[_];x[y]=+E[y]/v}}const p=Oy(o)||o?.items&&o?.items.length!==0;return[r,Nt({},i,Object.assign({encode:Object.fromEntries(f.map(([g,v])=>[g,Vo(v,Da(a,g)[1])]))},!p&&a.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};gOe.props={};function mD(t,e,n){if(t===null)return[-.5,.5];const r=nOe(t,e),a=new BR({domain:r,range:[0,1],padding:n}).getBandWidth();return[-a/2,a/2]}function yD(t,e,n){return e*(1-t)+n*t}const vOe=(t={})=>{const{padding:e=0,paddingX:n=e,paddingY:r=e,random:i=Math.random}=t;return(a,o)=>{const{encode:s,scale:l}=o,{x:c,y:u}=l,[f]=Da(s,"x"),[h]=Da(s,"y"),d=mD(f,c,n),p=mD(h,u,r),g=a.map(()=>yD(i(),...p)),v=a.map(()=>yD(i(),...d));return[a,Nt({scale:{x:{padding:.5},y:{padding:.5}}},o,{encode:{dy:Vo(g),dx:Vo(v)}})]}};vOe.props={};const mOe=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,i)=>{const{encode:a,scale:o}=i,{x:s}=o,[l]=Da(a,"x"),c=mD(l,s,e),u=r.map(()=>yD(n(),...c));return[r,Nt({scale:{x:{padding:.5}}},i,{encode:{dx:Vo(u)}})]}};mOe.props={};const yOe=(t={})=>{const{padding:e=0,random:n=Math.random}=t;return(r,i)=>{const{encode:a,scale:o}=i,{y:s}=o,[l]=Da(a,"y"),c=mD(l,s,e),u=r.map(()=>yD(n(),...c));return[r,Nt({scale:{y:{padding:.5}}},i,{encode:{dy:Vo(u)}})]}};yOe.props={};var kGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const _Oe=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:i}=r,{x:a}=i,o=kGe(i,["x"]),s=Object.entries(o).filter(([h])=>h.startsWith("y")).map(([h])=>[h,Da(i,h)[0]]),l=s.map(([h])=>[h,new Array(n.length)]),c=tb(e,n,r),u=new Array(c.length);for(let h=0;h<c.length;h++){const p=c[h].flatMap(y=>s.map(([,_])=>+_[y])),[g,v]=fy(p);u[h]=(g+v)/2}const f=Math.max(...u);for(let h=0;h<c.length;h++){const d=f-u[h],p=c[h];for(const g of p)for(let v=0;v<s.length;v++){const[,y]=s[v],[,_]=l[v];_[g]=+y[g]+d}}return[n,Nt({},r,{encode:Object.fromEntries(l.map(([h,d])=>[h,Vo(d,Da(i,h)[1])]))})]}};_Oe.props={};const bOe=(t={})=>{const{groupBy:e="x"}=t;return(n,r)=>{const{encode:i}=r,[a]=Da(i,"y"),[o,s]=Da(i,"y1"),l=tb(e,n,r),c=new Array(n.length);for(const u of l){const f=u.map(h=>+a[h]);for(let h=0;h<u.length;h++){const d=u[h],p=Math.max(...f.filter((g,v)=>v!==h));c[d]=+a[d]>p?p:a[d]}}return[n,Nt({},r,{encode:{y1:Vo(c,s)}})]}};bOe.props={};function rae(t,e){return[t[0]]}function DGe(t,e){const n=t.length-1;return[t[n]]}function BGe(t,e){const n=Sw(t,r=>e[r]);return[t[n]]}function FGe(t,e){const n=yP(t,r=>e[r]);return[t[n]]}function UGe(t){return typeof t=="function"?t:{first:rae,last:DGe,max:BGe,min:FGe}[t]||rae}const r4=(t={})=>{const{groupBy:e="series",channel:n,selector:r}=t;return(i,a)=>{const{encode:o}=a,s=tb(e,i,a),[l]=Da(o,n),c=UGe(r);return[s.flatMap(u=>c(u,l)),a]}};r4.props={};var jGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const EOe=(t={})=>{const{selector:e}=t,n=jGe(t,["selector"]);return r4(Object.assign({channel:"x",selector:e},n))};EOe.props={};var zGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const xOe=(t={})=>{const{selector:e}=t,n=zGe(t,["selector"]);return r4(Object.assign({channel:"y",selector:e},n))};xOe.props={};var $Ge=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function rb(t){return e=>e===null?t:`${t} of ${e}`}function HGe(t){if(typeof t=="function")return[t,null];const n={mean:GGe,max:VGe,count:XGe,first:ZGe,last:KGe,sum:qGe,min:YGe,median:WGe}[t];if(!n)throw new Error(`Unknown reducer: ${t}.`);return n()}function GGe(){const t=(n,r)=>ER(n,i=>+r[i]),e=rb("mean");return[t,e]}function WGe(){const t=(n,r)=>LK(n,i=>+r[i]),e=rb("median");return[t,e]}function VGe(){const t=(n,r)=>_o(n,i=>+r[i]),e=rb("max");return[t,e]}function YGe(){const t=(n,r)=>Nd(n,i=>+r[i]),e=rb("min");return[t,e]}function XGe(){const t=(n,r)=>n.length,e=rb("count");return[t,e]}function qGe(){const t=(n,r)=>jp(n,i=>+r[i]),e=rb("sum");return[t,e]}function ZGe(){const t=(n,r)=>r[n[0]],e=rb("first");return[t,e]}function KGe(){const t=(n,r)=>r[n[n.length-1]],e=rb("last");return[t,e]}const BQ=(t={})=>{const{groupBy:e}=t,n=$Ge(t,["groupBy"]);return(r,i)=>{const{data:a,encode:o}=i,s=e(r,i);if(!s)return[r,i];const l=(d,p)=>{if(d)return d;const{from:g}=p;if(!g)return d;const[,v]=Da(o,g);return v},c=Object.entries(n).map(([d,p])=>{const[g,v]=HGe(p),[y,_]=Da(o,d),E=l(_,p),x=s.map(T=>g(T,y??a));return[d,Object.assign(Object.assign({},V$e(x,v?.(E)||E)),{aggregate:!0})]}),u=Object.keys(o).map(d=>{const[p,g]=Da(o,d),v=s.map(y=>p[y[0]]);return[d,Vo(v,g)]}),f=s.map(d=>a[d[0]]);return[Gx(s),Nt({},i,{data:f,encode:Object.fromEntries([...u,...c])})]}};BQ.props={};var QGe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const PP=(t={})=>{const{channels:e=["x","y"]}=t,n=QGe(t,["channels"]),r=(i,a)=>tb(e,i,a);return BQ(Object.assign(Object.assign({},n),{groupBy:r}))};PP.props={};const SOe=(t={})=>PP(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));SOe.props={};const TOe=(t={})=>PP(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));TOe.props={};const AOe=(t={})=>PP(Object.assign(Object.assign({},t),{channels:["color"]}));AOe.props={};function JGe(t,e,n){const{by:r=t,reducer:i="max"}=e,[a]=Da(n,r);if(typeof i=="function")return o=>i(o,a);if(i==="max")return o=>_o(o,s=>+a[s]);if(i==="min")return o=>Nd(o,s=>+a[s]);if(i==="sum")return o=>jp(o,s=>+a[s]);if(i==="median")return o=>LK(o,s=>+a[s]);if(i==="mean")return o=>ER(o,s=>+a[s]);if(i==="first")return o=>a[o[0]];if(i==="last")return o=>a[o[o.length-1]];throw new Error(`Unknown reducer: ${i}`)}function eWe(t,e,n){if(!Array.isArray(n))return t;const r=new Set(n);return t.filter(i=>r.has(e[i]))}const i4=(t={})=>(e,n)=>{const{reverse:r,slice:i,channel:a,by:o,ordinal:s=!0,reducer:l}=t,{encode:c,scale:u={}}=n,f=u[a].domain,[h]=Da(c,o??a),[d]=Da(c,a),p=JGe(a,{by:o,reducer:l},c),g=eWe(e,d,f),v=G7e(g,p,x=>d[x]),y=s?e:Xg(e,x=>h[x]);r&&(!s&&y.reverse(),v.reverse());const _=typeof i=="number"?[0,i]:i,E=i?v.slice(..._):v;return[y,Nt(n,{scale:{[a]:{domain:E}}})]};i4.props={};const wOe=(t={})=>i4(Object.assign(Object.assign({},t),{channel:"x"}));wOe.props={};const OOe=(t={})=>i4(Object.assign(Object.assign({},t),{channel:"color"}));OOe.props={};const COe=(t={})=>i4(Object.assign(Object.assign({},t),{channel:"y"}));COe.props={};function tWe(t,e){return typeof e=="string"?t.map(n=>n[e]):t.map(e)}function nWe(t,e){if(typeof t=="function")return n=>t(n,e);if(t==="sum")return n=>jp(n,r=>+e[r]);throw new Error(`Unknown reducer: ${t}`)}const ROe=(t={})=>{const{field:e,channel:n="y",reducer:r="sum"}=t;return(i,a)=>{const{data:o,encode:s}=a,[l]=Da(s,"x"),c=e?tWe(o,e):Da(s,n)[0],u=nWe(r,c),f=NK(i,u,h=>l[h]).map(h=>h[1]);return[i,Nt({},a,{scale:{x:{flex:f}}})]}};ROe.props={};function ul([t,e],[n,r]){return[t-n,e-r]}function P3([t,e],[n,r]){return[t+n,e+r]}function Xs([t,e],[n,r]){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))}function Vp([t,e]){return Math.atan2(e,t)}function HA([t,e]){return Vp([t,e])+Math.PI/2}function MOe(t,e){const n=Vp(t),r=Vp(e);return n<r?r-n:Math.PI*2-(n-r)}function FQ(t){let e=1/0,n=-1/0,r=1/0,i=-1/0;for(const[s,l]of t)e=Math.min(s,e),n=Math.max(s,n),r=Math.min(l,r),i=Math.max(l,i);const a=n-e,o=i-r;return[e,r,a,o]}function POe([t,e],[n,r]){return[(t+n)/2,(e+r)/2]}function rWe(t){const{padding:e=0,direction:n="col"}=t;return(r,i,a)=>{const o=r.length;if(o===0)return[];const{innerWidth:s,innerHeight:l}=a,c=l/s;let u=Math.ceil(Math.sqrt(i/c)),f=s/u,h=Math.ceil(i/u),d=h*f;for(;d>l;)u=u+1,f=s/u,h=Math.ceil(i/u),d=h*f;const p=l-h*f,g=h<=1?0:p/(h-1),[v,y]=h<=1?[(s-o*f)/(o-1),(l-f)/2]:[0,0];return r.map((_,E)=>{const[x,T,S,w]=FQ(_),C=n==="col"?E%u:Math.floor(E/h),D=n==="col"?Math.floor(E/u):E%h,L=C*f,B=(h-D-1)*f+p,I=(f-e)/S,U=(f-e)/w,$=L-x+v*C+1/2*e,X=B-T-g*D-y+1/2*e;return`translate(${$}, ${X}) scale(${I}, ${U})`})}}const NOe=t=>(e,n)=>[e,Nt({},n,{modifier:rWe(t),axis:!1})];NOe.props={};var iWe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const iae="thresholds";function aWe(t){const[e,n]=fy(t);return Math.min(200,Q7e(t,e,n))}const UQ=(t={})=>{const{groupChannels:e=["color"],binChannels:n=["x","y"]}=t,r=iWe(t,["groupChannels","binChannels"]),i={},a=(o,s)=>{const{encode:l}=s,c=n.map(p=>{const[g]=Da(l,p);return g}),u=Vn(r,iae),f=o.filter(p=>c.every(g=>Yo(g[p]))),h=[...e.map(p=>{const[g]=Da(l,p);return g}).filter(Yo).map(p=>g=>p[g]),...n.map((p,g)=>{const v=c[g],y=u[p]||aWe(v),_=q7e().thresholds(y).value(x=>+v[x])(f),E=new Map(_.flatMap(x=>{const{x0:T,x1:S}=x,w=`${T},${S}`;return x.map(C=>[C,w])}));return i[p]=E,x=>E.get(x)})];return Array.from(Go(f,p=>h.map(g=>g(p)).join("-")).values())};return BQ(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(r).filter(([o])=>!o.startsWith(iae)))),Object.fromEntries(n.flatMap(o=>{const s=([c])=>+i[o].get(c).split(",")[0],l=([c])=>+i[o].get(c).split(",")[1];return l.from=o,[[o,s],[`${o}1`,l]]}))),{groupBy:a}))};UQ.props={};const IOe=(t={})=>{const{thresholds:e}=t;return UQ(Object.assign(Object.assign({},t),{thresholdsX:e,groupChannels:["color"],binChannels:["x"]}))};IOe.props={};function oWe(t,e,n,r){const i=t.length;if(r>=i||r===0)return t;const a=d=>e[t[d]]*1,o=d=>n[t[d]]*1,s=[],l=(i-2)/(r-2);let c=0,u,f,h;s.push(c);for(let d=0;d<r-2;d++){let p=0,g=0,v=Math.floor((d+1)*l)+1,y=Math.floor((d+2)*l)+1;y=Math.min(y,i);const _=y-v;for(;v<y;v++)p+=a(v),g+=o(v);p/=_,g/=_;let E=Math.floor((d+0)*l)+1;const x=Math.floor((d+1)*l)+1,T=[a(c),o(c)];for(u=f=-1;E<x;E++)f=Math.abs((T[0]-p)*(a(E)-T[1])-(T[0]-o(E))*(g-T[0]))*.5,f>u&&(u=f,h=E);s.push(h),c=h}return s.push(i-1),s.map(d=>t[d])}function sWe(t){if(typeof t=="function")return t;if(t==="lttb")return oWe;const e={first:r=>[r[0]],last:r=>[r[r.length-1]],min:(r,i,a)=>[r[yP(r,o=>a[o])]],max:(r,i,a)=>[r[Sw(r,o=>a[o])]],median:(r,i,a)=>[r[J7e(r,o=>a[o])]]},n=e[t]||e.median;return(r,i,a,o)=>{const s=Math.max(1,Math.floor(r.length/o));return lWe(r,s).flatMap(c=>n(c,i,a))}}function lWe(t,e){const n=t.length,r=[];let i=0;for(;i<n;)r.push(t.slice(i,i+=e));return r}const LOe=(t={})=>{const{strategy:e="median",thresholds:n=2e3,groupBy:r=["series","color"]}=t,i=sWe(e);return(a,o)=>{const{encode:s}=o,l=tb(r,a,o),[c]=Da(s,"x"),[u]=Da(s,"y");return[l.flatMap(f=>i(f,c,u,n)),o]}};LOe.props={};function cWe(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}function uWe(t){var e;const{encode:n}=t,r=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),i=(e=n?.color)===null||e===void 0?void 0:e.field;if(!n||!i)return r;let a;for(const[o,s]of Object.entries(n))(o==="x"||o==="y")&&s.field===i&&(a=Object.assign(Object.assign({},a),{[o]:Object.assign(Object.assign({},s),{value:[]})}));return a?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),a)}):r}const kOe=(t={})=>(e,n)=>{const{encode:r,data:i}=n,a=Object.entries(t).map(([u,f])=>{const[h]=Da(r,u);if(!h)return null;const[d,p=!0]=cWe(f);if(typeof d=="function")return g=>d(h[g]);if(p){const g=Array.isArray(d)?d:[d];return g.length===0?null:v=>g.includes(h[v])}else{const[g,v]=d;return y=>h[y]>=g&&h[y]<=v}}).filter(Yo),o=u=>a.every(f=>f(u)),s=e.filter(o),l=s.map((u,f)=>f);if(a.length===0){const u=uWe(n);return[e,u]}const c=Object.entries(r).map(([u,f])=>[u,Object.assign(Object.assign({},f),{value:l.map(h=>f.value[s[h]]).filter(h=>h!==void 0)})]);return[l,Nt({},n,{encode:Object.fromEntries(c),data:s.map(u=>i[u])})]};kOe.props={};function as(t){const{transformations:e}=t.getOptions();return e.map(([r])=>r).filter(r=>r==="transpose").length%2!==0}function Mo(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="polar")}function a4(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="reflect")&&e.some(([n])=>n.startsWith("transpose"))}function DOe(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="helix")}function o4(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="parallel")}function BOe(t){const{transformations:e}=t.getOptions();return e.some(([n])=>n==="fisheye")}function fWe(t){return o4(t)&&Mo(t)}function Ow(t){return DOe(t)||Mo(t)}function hWe(t){return Mo(t)&&as(t)}function dWe(t){if(Ow(t)){const[e,n]=t.getSize(),r=t.getOptions().transformations.find(i=>i[0]==="polar");if(r)return Math.max(e,n)/2*r[4]}return 0}function s4(t){const{transformations:e}=t.getOptions(),[,,,n,r]=e.find(i=>i[0]==="polar");return[+n,+r]}function jQ(t,e=!0){const{transformations:n}=t.getOptions(),[,r,i]=n.find(a=>a[0]==="polar");return e?[+r*180/Math.PI,+i*180/Math.PI]:[r,i]}function pWe(t,e){const{transformations:n}=t.getOptions(),[,...r]=n.find(i=>i[0]===e);return r}function it(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function aae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y7e(r.key),r)}}function at(t,e,n){return e&&aae(t.prototype,e),n&&aae(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function MY(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function gWe(t){if(Array.isArray(t))return MY(t)}function vWe(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zQ(t,e){if(t){if(typeof t=="string")return MY(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?MY(t,e):void 0}}function mWe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(t){return gWe(t)||vWe(t)||zQ(t)||mWe()}function vx(t){return vx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},vx(t)}function FOe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(FOe=function(){return!!t})()}function iC(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function UOe(t,e){if(e&&(Zk(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return iC(t)}function Ar(t,e,n){return e=vx(e),UOe(t,FOe()?Reflect.construct(e,n||[],vx(t).constructor):e.apply(t,n))}function PY(t,e){return PY=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},PY(t,e)}function Sr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PY(t,e)}function yWe(t){if(Array.isArray(t))return t}function _We(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function bWe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ir(t,e){return yWe(t)||_We(t,e)||zQ(t,e)||bWe()}var K8={exports:{}},oae;function EWe(){return oae||(oae=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},s.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,u,f,h,d,p){var g=n?n+c:c;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,_,E;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,h),!0;case 5:return v.fn.call(v.context,u,f,h,d),!0;case 6:return v.fn.call(v.context,u,f,h,d,p),!0}for(E=1,_=new Array(y-1);E<y;E++)_[E-1]=arguments[E];v.fn.apply(v.context,_)}else{var x=v.length,T;for(E=0;E<x;E++)switch(v[E].once&&this.removeListener(c,v[E].fn,void 0,!0),y){case 1:v[E].fn.call(v[E].context);break;case 2:v[E].fn.call(v[E].context,u);break;case 3:v[E].fn.call(v[E].context,u,f);break;case 4:v[E].fn.call(v[E].context,u,f,h);break;default:if(!_)for(T=1,_=new Array(y-1);T<y;T++)_[T-1]=arguments[T];v[E].fn.apply(v[E].context,_)}}return!0},s.prototype.on=function(c,u,f){return a(this,c,u,f,!1)},s.prototype.once=function(c,u,f){return a(this,c,u,f,!0)},s.prototype.removeListener=function(c,u,f,h){var d=n?n+c:c;if(!this._events[d])return this;if(!u)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===u&&(!h||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var g=0,v=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||f&&p[g].context!==f)&&v.push(p[g]);v.length?this._events[d]=v.length===1?v[0]:v:o(this,d)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(K8)),K8.exports}var xWe=EWe();const Cw=Ni(xWe);function SWe(t,e){for(;!{}.hasOwnProperty.call(t,e)&&(t=vx(t))!==null;);return t}function NY(){return NY=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=SWe(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(arguments.length<3?t:n):i.value}},NY.apply(null,arguments)}function _D(t,e,n,r){var i=NY(vx(t.prototype),e,n);return typeof i=="function"?function(a){return i.apply(n,a)}:i}/*!
 * @antv/g-math
 * @description Geometry util
 * @version 3.0.1
 * @date 5/9/2025, 8:18:51 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function py(t,e,n,r){var i=t-n,a=e-r;return Math.sqrt(i*i+a*a)}function jOe(t,e){var n=Math.min.apply(Math,Dr(t)),r=Math.min.apply(Math,Dr(e)),i=Math.max.apply(Math,Dr(t)),a=Math.max.apply(Math,Dr(e));return{x:n,y:r,width:i-n,height:a-r}}function TWe(t,e,n){return Math.atan(-e/t*Math.tan(n))}function AWe(t,e,n){return Math.atan(e/(t*Math.tan(n)))}function wWe(t,e,n,r,i,a){return n*Math.cos(i)*Math.cos(a)-r*Math.sin(i)*Math.sin(a)+t}function OWe(t,e,n,r,i,a){return n*Math.sin(i)*Math.cos(a)+r*Math.cos(i)*Math.sin(a)+e}function zOe(t,e,n,r,i,a,o){for(var s=TWe(n,r,i),l=1/0,c=-1/0,u=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var h=s+f;a<o?a<h&&h<o&&u.push(h):o<h&&h<a&&u.push(h)}for(var d=0;d<u.length;d++){var p=wWe(t,e,n,r,i,u[d]);p<l&&(l=p),p>c&&(c=p)}for(var g=AWe(n,r,i),v=1/0,y=-1/0,_=[a,o],E=-Math.PI*2;E<=Math.PI*2;E+=Math.PI){var x=g+E;a<o?a<x&&x<o&&_.push(x):o<x&&x<a&&_.push(x)}for(var T=0;T<_.length;T++){var S=OWe(t,e,n,r,i,_[T]);S<v&&(v=S),S>y&&(y=S)}return{x:l,y:v,width:c-l,height:y-v}}var CWe=1e-4;function $Oe(t,e,n,r,i,a){var o=-1,s=1/0,l=[n,r],c=20;a&&a>200&&(c=a/10);for(var u=1/c,f=u/10,h=0;h<=c;h++){var d=h*u,p=[i.apply(void 0,Dr(t.concat([d]))),i.apply(void 0,Dr(e.concat([d])))],g=py(l[0],l[1],p[0],p[1]);g<s&&(o=d,s=g)}if(o===0)return{x:t[0],y:e[0]};if(o===1){var v=t.length;return{x:t[v-1],y:e[v-1]}}s=1/0;for(var y=0;y<32&&!(f<CWe);y++){var _=o-f,E=o+f,x=[i.apply(void 0,Dr(t.concat([_]))),i.apply(void 0,Dr(e.concat([_])))],T=py(l[0],l[1],x[0],x[1]);if(_>=0&&T<s)o=_,s=T;else{var S=[i.apply(void 0,Dr(t.concat([E]))),i.apply(void 0,Dr(e.concat([E])))],w=py(l[0],l[1],S[0],S[1]);E<=1&&w<s?(o=E,s=w):f*=.5}}return{x:i.apply(void 0,Dr(t.concat([o]))),y:i.apply(void 0,Dr(e.concat([o])))}}function l4(t,e,n,r){return py(t,e,n,r)}function c4(t,e,n,r,i){return{x:(1-i)*t+i*n,y:(1-i)*e+i*r}}function RWe(t,e,n,r,i,a){var o=[n-t,r-e];if(b$e(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-e)*(a-e));var s=[-o[1],o[0]];PR(s,s);var l=[i-t,a-e];return Math.abs(fD(l,s))}function IY(t,e,n,r,i){var a=1-i;return a*a*a*t+3*e*i*a*a+3*n*i*i*a+r*i*i*i}function sae(t,e,n,r){var i=-3*t+9*e-9*n+3*r,a=6*t-12*e+6*n,o=3*e-3*t,s=[],l,c,u;if(cA(i,0))cA(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;cA(f,0)?s.push(-a/(2*i)):f>0&&(u=Math.sqrt(f),l=(-a+u)/(2*i),c=(-a-u)/(2*i),l>=0&&l<=1&&s.push(l),c>=0&&c<=1&&s.push(c))}return s}function HOe(t,e,n,r,i,a,o,s){for(var l=[t,o],c=[e,s],u=sae(t,n,i,o),f=sae(e,r,a,s),h=0;h<u.length;h++)l.push(IY(t,n,i,o,u[h]));for(var d=0;d<f.length;d++)c.push(IY(e,r,a,s,f[d]));return jOe(l,c)}function MWe(t,e,n,r,i,a,o,s,l,c,u){return $Oe([t,n,i,o],[e,r,a,s],l,c,IY,u)}function lae(t,e,n,r,i,a,o,s,l,c,u){var f=MWe(t,e,n,r,i,a,o,s,l,c,u);return py(f.x,f.y,l,c)}function PWe(t){if(t.length<2)return 0;for(var e=0,n=0;n<t.length-1;n++){var r=t[n],i=t[n+1];e+=py(r[0],r[1],i[0],i[1])}return e}function GOe(t){return PWe(t)}function LY(t,e,n,r){var i=1-r;return i*i*t+2*r*i*e+r*r*n}function cae(t,e,n){var r=t+n-2*e;if(cA(r,0))return[.5];var i=(t-e)/r;return i<=1&&i>=0?[i]:[]}function WOe(t,e,n,r,i,a){var o=cae(t,n,i)[0],s=cae(e,r,a)[0],l=[t,i],c=[e,a];return o!==void 0&&l.push(LY(t,n,i,o)),s!==void 0&&c.push(LY(e,r,a,s)),jOe(l,c)}function NWe(t,e,n,r,i,a,o,s){return $Oe([t,n,i],[e,r,a],o,s,LY)}function IWe(t,e,n,r,i,a,o,s){var l=NWe(t,e,n,r,i,a,o,s);return py(l.x,l.y,o,s)}function VOe(t,e){this.v=t,this.k=e}function Ju(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch{i=0}Ju=function(o,s,l,c){function u(f,h){Ju(o,f,function(d){return this._invoke(f,h,d)})}s?i?i(o,s,{value:l,enumerable:!c,configurable:!c,writable:!c}):o[s]=l:(u("next",0),u("throw",1),u("return",2))},Ju(t,e,n,r)}function $Q(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,e,n=typeof Symbol=="function"?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(d,p,g,v){var y=p&&p.prototype instanceof s?p:s,_=Object.create(y.prototype);return Ju(_,"_invoke",(function(E,x,T){var S,w,C,D=0,L=T||[],B=!1,I={p:0,n:0,v:t,a:U,f:U.bind(t,4),d:function(X,N){return S=X,w=0,C=t,I.n=N,o}};function U($,X){for(w=$,C=X,e=0;!B&&D&&!N&&e<L.length;e++){var N,M=L[e],k=I.p,z=M[2];$>3?(N=z===X)&&(C=M[(w=M[4])?5:(w=3,3)],M[4]=M[5]=t):M[0]<=k&&((N=$<2&&k<M[1])?(w=0,I.v=X,I.n=M[1]):k<z&&(N=$<3||M[0]>X||X>z)&&(M[4]=$,M[5]=X,I.n=z,w=0))}if(N||$>1)return o;throw B=!0,X}return function($,X,N){if(D>1)throw TypeError("Generator is already running");for(B&&X===1&&U(X,N),w=X,C=N;(e=w<2?t:C)||!B;){S||(w?w<3?(w>1&&(I.n=-1),U(w,C)):I.n=C:I.v=C);try{if(D=2,S){if(w||($="next"),e=S[$]){if(!(e=e.call(S,C)))throw TypeError("iterator result is not an object");if(!e.done)return e;C=e.value,w<2&&(w=0)}else w===1&&(e=S.return)&&e.call(S),w<2&&(C=TypeError("The iterator does not provide a '"+$+"' method"),w=1);S=t}else if((e=(B=I.n<0)?C:E.call(x,I))!==o)break}catch(M){S=t,w=1,C=M}finally{D=1}}return{value:e,done:B}}})(d,g,v),!0),_}var o={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var u=[][r]?e(e([][r]())):(Ju(e={},r,function(){return this}),e),f=c.prototype=s.prototype=Object.create(u);function h(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,c):(d.__proto__=c,Ju(d,i,"GeneratorFunction")),d.prototype=Object.create(f),d}return l.prototype=c,Ju(f,"constructor",c),Ju(c,"constructor",l),l.displayName="GeneratorFunction",Ju(c,i,"GeneratorFunction"),Ju(f),Ju(f,i,"Generator"),Ju(f,r,function(){return this}),Ju(f,"toString",function(){return"[object Generator]"}),($Q=function(){return{w:a,m:h}})()}function bD(t,e){function n(i,a,o,s){try{var l=t[i](a),c=l.value;return c instanceof VOe?e.resolve(c.v).then(function(u){n("next",u,o,s)},function(u){n("throw",u,o,s)}):e.resolve(c).then(function(u){l.value=u,o(l)},function(u){return n("throw",u,o,s)})}catch(u){s(u)}}var r;this.next||(Ju(bD.prototype),Ju(bD.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),Ju(this,"_invoke",function(i,a,o){function s(){return new e(function(l,c){n(i,o,l,c)})}return r=r?r.then(s,s):s()},!0)}function YOe(t,e,n,r,i){return new bD($Q().w(t,e,n,r),i||Promise)}function LWe(t,e,n,r,i){var a=YOe(t,e,n,r,i);return a.next().then(function(o){return o.done?o.value:a.next()})}function kWe(t){var e=Object(t),n=[];for(var r in e)n.unshift(r);return function i(){for(;n.length;)if((r=n.pop())in e)return i.value=r,i.done=!1,i;return i.done=!0,i}}function uae(t){if(t!=null){var e=t[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if(typeof t.next=="function")return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Zk(t)+" is not iterable")}function Zs(){var t=$Q(),e=t.m(Zs),n=(Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__).constructor;function r(o){var s=typeof o=="function"&&o.constructor;return!!s&&(s===n||(s.displayName||s.name)==="GeneratorFunction")}var i={throw:1,return:2,break:3,continue:3};function a(o){var s,l;return function(c){s||(s={stop:function(){return l(c.a,2)},catch:function(){return c.v},abrupt:function(f,h){return l(c.a,i[f],h)},delegateYield:function(f,h,d){return s.resultName=h,l(c.d,uae(f),d)},finish:function(f){return l(c.f,f)}},l=function(f,h,d){c.p=s.prev,c.n=s.next;try{return f(h,d)}finally{s.next=c.n}}),s.resultName&&(s[s.resultName]=c.v,s.resultName=void 0),s.sent=c.v,s.next=c.n;try{return o.call(this,s)}finally{c.p=s.prev,c.n=s.next}}}return(Zs=function(){return{wrap:function(l,c,u,f){return t.w(a(l),c,u,f&&f.reverse())},isGeneratorFunction:r,mark:t.m,awrap:function(l,c){return new VOe(l,c)},AsyncIterator:bD,async:function(l,c,u,f,h){return(r(c)?YOe:LWe)(a(l),c,u,f,h)},keys:kWe,values:uae}})()}function fae(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(r,i)}function kt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(l){fae(a,r,i,o,s,"next",l)}function s(l){fae(a,r,i,o,s,"throw",l)}o(void 0)})}}function Td(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=zQ(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return o=c.done,c},e:function(c){s=!0,a=c},f:function(){try{o||n.return==null||n.return()}finally{if(s)throw a}}}}function DWe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Ro(t,e){if(t==null)return{};var n,r,i=DWe(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.3.1
 * @date 7/18/2025, 7:12:41 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var BWe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},XOe={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(BWe,function(){function n(T,S,w,C,D){r(T,S,w||0,C||T.length-1,D||a)}function r(T,S,w,C,D){for(;C>w;){if(C-w>600){var L=C-w+1,B=S-w+1,I=Math.log(L),U=.5*Math.exp(2*I/3),$=.5*Math.sqrt(I*U*(L-U)/L)*(B-L/2<0?-1:1),X=Math.max(w,Math.floor(S-B*U/L+$)),N=Math.min(C,Math.floor(S+(L-B)*U/L+$));r(T,S,X,N,D)}var M=T[S],k=w,z=C;for(i(T,w,S),D(T[C],M)>0&&i(T,w,C);k<z;){for(i(T,k,z),k++,z--;D(T[k],M)<0;)k++;for(;D(T[z],M)>0;)z--}D(T[w],M)===0?i(T,w,z):(z++,i(T,z,C)),z<=S&&(w=z+1),S<=z&&(C=z-1)}}function i(T,S,w){var C=T[S];T[S]=T[w],T[w]=C}function a(T,S){return T<S?-1:T>S?1:0}var o=function(S){S===void 0&&(S=9),this._maxEntries=Math.max(4,S),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(S){var w=this.data,C=[];if(!_(S,w))return C;for(var D=this.toBBox,L=[];w;){for(var B=0;B<w.children.length;B++){var I=w.children[B],U=w.leaf?D(I):I;_(S,U)&&(w.leaf?C.push(I):y(S,U)?this._all(I,C):L.push(I))}w=L.pop()}return C},o.prototype.collides=function(S){var w=this.data;if(!_(S,w))return!1;for(var C=[];w;){for(var D=0;D<w.children.length;D++){var L=w.children[D],B=w.leaf?this.toBBox(L):L;if(_(S,B)){if(w.leaf||y(S,B))return!0;C.push(L)}}w=C.pop()}return!1},o.prototype.load=function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var w=0;w<S.length;w++)this.insert(S[w]);return this}var C=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=C;else if(this.data.height===C.height)this._splitRoot(this.data,C);else{if(this.data.height<C.height){var D=this.data;this.data=C,C=D}this._insert(C,this.data.height-C.height-1,!0)}return this},o.prototype.insert=function(S){return S&&this._insert(S,this.data.height-1),this},o.prototype.clear=function(){return this.data=E([]),this},o.prototype.remove=function(S,w){if(!S)return this;for(var C=this.data,D=this.toBBox(S),L=[],B=[],I,U,$;C||L.length;){if(C||(C=L.pop(),U=L[L.length-1],I=B.pop(),$=!0),C.leaf){var X=s(S,C.children,w);if(X!==-1)return C.children.splice(X,1),L.push(C),this._condense(L),this}!$&&!C.leaf&&y(C,D)?(L.push(C),B.push(I),I=0,U=C,C=C.children[0]):U?(I++,C=U.children[I],$=!1):C=null}return this},o.prototype.toBBox=function(S){return S},o.prototype.compareMinX=function(S,w){return S.minX-w.minX},o.prototype.compareMinY=function(S,w){return S.minY-w.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(S){return this.data=S,this},o.prototype._all=function(S,w){for(var C=[];S;)S.leaf?w.push.apply(w,S.children):C.push.apply(C,S.children),S=C.pop();return w},o.prototype._build=function(S,w,C,D){var L=C-w+1,B=this._maxEntries,I;if(L<=B)return I=E(S.slice(w,C+1)),l(I,this.toBBox),I;D||(D=Math.ceil(Math.log(L)/Math.log(B)),B=Math.ceil(L/Math.pow(B,D-1))),I=E([]),I.leaf=!1,I.height=D;var U=Math.ceil(L/B),$=U*Math.ceil(Math.sqrt(B));x(S,w,C,$,this.compareMinX);for(var X=w;X<=C;X+=$){var N=Math.min(X+$-1,C);x(S,X,N,U,this.compareMinY);for(var M=X;M<=N;M+=U){var k=Math.min(M+U-1,N);I.children.push(this._build(S,M,k,D-1))}}return l(I,this.toBBox),I},o.prototype._chooseSubtree=function(S,w,C,D){for(;D.push(w),!(w.leaf||D.length-1===C);){for(var L=1/0,B=1/0,I=void 0,U=0;U<w.children.length;U++){var $=w.children[U],X=d($),N=g(S,$)-X;N<B?(B=N,L=X<L?X:L,I=$):N===B&&X<L&&(L=X,I=$)}w=I||w.children[0]}return w},o.prototype._insert=function(S,w,C){var D=C?S:this.toBBox(S),L=[],B=this._chooseSubtree(D,this.data,w,L);for(B.children.push(S),u(B,D);w>=0&&L[w].children.length>this._maxEntries;)this._split(L,w),w--;this._adjustParentBBoxes(D,L,w)},o.prototype._split=function(S,w){var C=S[w],D=C.children.length,L=this._minEntries;this._chooseSplitAxis(C,L,D);var B=this._chooseSplitIndex(C,L,D),I=E(C.children.splice(B,C.children.length-B));I.height=C.height,I.leaf=C.leaf,l(C,this.toBBox),l(I,this.toBBox),w?S[w-1].children.push(I):this._splitRoot(C,I)},o.prototype._splitRoot=function(S,w){this.data=E([S,w]),this.data.height=S.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(S,w,C){for(var D,L=1/0,B=1/0,I=w;I<=C-w;I++){var U=c(S,0,I,this.toBBox),$=c(S,I,C,this.toBBox),X=v(U,$),N=d(U)+d($);X<L?(L=X,D=I,B=N<B?N:B):X===L&&N<B&&(B=N,D=I)}return D||C-w},o.prototype._chooseSplitAxis=function(S,w,C){var D=S.leaf?this.compareMinX:f,L=S.leaf?this.compareMinY:h,B=this._allDistMargin(S,w,C,D),I=this._allDistMargin(S,w,C,L);B<I&&S.children.sort(D)},o.prototype._allDistMargin=function(S,w,C,D){S.children.sort(D);for(var L=this.toBBox,B=c(S,0,w,L),I=c(S,C-w,C,L),U=p(B)+p(I),$=w;$<C-w;$++){var X=S.children[$];u(B,S.leaf?L(X):X),U+=p(B)}for(var N=C-w-1;N>=w;N--){var M=S.children[N];u(I,S.leaf?L(M):M),U+=p(I)}return U},o.prototype._adjustParentBBoxes=function(S,w,C){for(var D=C;D>=0;D--)u(w[D],S)},o.prototype._condense=function(S){for(var w=S.length-1,C=void 0;w>=0;w--)S[w].children.length===0?w>0?(C=S[w-1].children,C.splice(C.indexOf(S[w]),1)):this.clear():l(S[w],this.toBBox)};function s(T,S,w){if(!w)return S.indexOf(T);for(var C=0;C<S.length;C++)if(w(T,S[C]))return C;return-1}function l(T,S){c(T,0,T.children.length,S,T)}function c(T,S,w,C,D){D||(D=E(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var L=S;L<w;L++){var B=T.children[L];u(D,T.leaf?C(B):B)}return D}function u(T,S){return T.minX=Math.min(T.minX,S.minX),T.minY=Math.min(T.minY,S.minY),T.maxX=Math.max(T.maxX,S.maxX),T.maxY=Math.max(T.maxY,S.maxY),T}function f(T,S){return T.minX-S.minX}function h(T,S){return T.minY-S.minY}function d(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function p(T){return T.maxX-T.minX+(T.maxY-T.minY)}function g(T,S){return(Math.max(S.maxX,T.maxX)-Math.min(S.minX,T.minX))*(Math.max(S.maxY,T.maxY)-Math.min(S.minY,T.minY))}function v(T,S){var w=Math.max(T.minX,S.minX),C=Math.max(T.minY,S.minY),D=Math.min(T.maxX,S.maxX),L=Math.min(T.maxY,S.maxY);return Math.max(0,D-w)*Math.max(0,L-C)}function y(T,S){return T.minX<=S.minX&&T.minY<=S.minY&&S.maxX<=T.maxX&&S.maxY<=T.maxY}function _(T,S){return S.minX<=T.maxX&&S.minY<=T.maxY&&S.maxX>=T.minX&&S.maxY>=T.minY}function E(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(T,S,w,C,D){for(var L=[S,w];L.length;)if(w=L.pop(),S=L.pop(),!(w-S<=C)){var B=S+Math.ceil((w-S)/C/2)*C;n(T,B,S,w,D),L.push(S,B,B,w)}}return o})})(XOe);var FWe=XOe.exports,nr=(function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t})({}),Q8=(function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t})({}),J8=cf,uT=dc,UWe=iwe,jWe=rwe,hae=Ay,e7=lD,tf=(function(){function t(){it(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return at(t,[{key:"update",value:function(n,r){uT(this.center,n),uT(this.halfExtents,r),e7(this.min,this.center,this.halfExtents),J8(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(n,r){J8(this.center,r,n),hae(this.center,this.center,.5),e7(this.halfExtents,r,n),hae(this.halfExtents,this.halfExtents,.5),uT(this.min,n),uT(this.max,r)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(n){if(!t.isEmpty(n)){if(t.isEmpty(this)){this.setMinMax(n.getMin(),n.getMax());return}var r=this.center,i=r[0],a=r[1],o=r[2],s=this.halfExtents,l=s[0],c=s[1],u=s[2],f=i-l,h=i+l,d=a-c,p=a+c,g=o-u,v=o+u,y=n.center,_=y[0],E=y[1],x=y[2],T=n.halfExtents,S=T[0],w=T[1],C=T[2],D=_-S,L=_+S,B=E-w,I=E+w,U=x-C,$=x+C;D<f&&(f=D),L>h&&(h=L),B<d&&(d=B),I>p&&(p=I),U<g&&(g=U),$>v&&(v=$),r[0]=(f+h)*.5,r[1]=(d+p)*.5,r[2]=(g+v)*.5,s[0]=(h-f)*.5,s[1]=(p-d)*.5,s[2]=(v-g)*.5,this.min[0]=f,this.min[1]=d,this.min[2]=g,this.max[0]=h,this.max[1]=p,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(n,r){var i=this.center,a=this.halfExtents,o=n.center,s=n.halfExtents,l=r[0],c=r[4],u=r[8],f=r[1],h=r[5],d=r[9],p=r[2],g=r[6],v=r[10],y=Math.abs(l),_=Math.abs(c),E=Math.abs(u),x=Math.abs(f),T=Math.abs(h),S=Math.abs(d),w=Math.abs(p),C=Math.abs(g),D=Math.abs(v);i[0]=r[12]+l*o[0]+c*o[1]+u*o[2],i[1]=r[13]+f*o[0]+h*o[1]+d*o[2],i[2]=r[14]+p*o[0]+g*o[1]+v*o[2],a[0]=y*s[0]+_*s[1]+E*s[2],a[1]=x*s[0]+T*s[1]+S*s[2],a[2]=w*s[0]+C*s[1]+D*s[2],e7(this.min,i,a),J8(this.max,i,a)}},{key:"intersects",value:function(n){var r=this.getMax(),i=this.getMin(),a=n.getMax(),o=n.getMin();return i[0]<=a[0]&&r[0]>=o[0]&&i[1]<=a[1]&&r[1]>=o[1]&&i[2]<=a[2]&&r[2]>=o[2]}},{key:"intersection",value:function(n){if(!this.intersects(n))return null;var r=new t,i=UWe([0,0,0],this.getMin(),n.getMin()),a=jWe([0,0,0],this.getMax(),n.getMax());return r.setMinMax(i,a),r}},{key:"getNegativeFarPoint",value:function(n){return n.pnVertexFlag===273?uT([0,0,0],this.min):n.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:n.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:n.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:n.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:n.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:n.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(n){return n.pnVertexFlag===273?uT([0,0,0],this.max):n.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:n.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:n.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:n.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:n.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:n.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(n){return!n||n.halfExtents[0]===0&&n.halfExtents[1]===0&&n.halfExtents[2]===0}}])})(),zWe=(function(){function t(e,n){it(this,t),this.distance=e||0,this.normal=n||yr(0,1,0),this.updatePNVertexFlag()}return at(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(n){return pc(n,this.normal)-this.distance}},{key:"normalize",value:function(){var n=1/EQ(this.normal);Ay(this.normal,this.normal,n),this.distance*=n}},{key:"intersectsLine",value:function(n,r,i){var a=this.distanceToPoint(n),o=this.distanceToPoint(r),s=a/(a-o),l=s>=0&&s<=1;return l&&i&&DA(i,n,r,s),l}}])})(),fT=(function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t})({}),$We=(function(){function t(e){if(it(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new zWe)}return at(t,[{key:"extractFromVPMatrix",value:function(n){var r=ir(n,16),i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],c=r[5],u=r[6],f=r[7],h=r[8],d=r[9],p=r[10],g=r[11],v=r[12],y=r[13],_=r[14],E=r[15];Co(this.planes[0].normal,s-i,f-l,g-h),this.planes[0].distance=E-v,Co(this.planes[1].normal,s+i,f+l,g+h),this.planes[1].distance=E+v,Co(this.planes[2].normal,s+a,f+c,g+d),this.planes[2].distance=E+y,Co(this.planes[3].normal,s-a,f-c,g-d),this.planes[3].distance=E-y,Co(this.planes[4].normal,s-o,f-u,g-p),this.planes[4].distance=E-_,Co(this.planes[5].normal,s+o,f+u,g+p),this.planes[5].distance=E+_,this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})}}])})(),af=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;it(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return at(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(n){this.x=n.x,this.y=n.y}}])})(),GA=(function(){function t(e,n,r,i){it(this,t),this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return at(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(n){return new t(n.x,n.y,n.width,n.height)}},{key:"applyTransform",value:function(n,r){var i=Om(n.x,n.y,0,1),a=Om(n.x+n.width,n.y,0,1),o=Om(n.x,n.y+n.height,0,1),s=Om(n.x+n.width,n.y+n.height,0,1),l=gc(),c=gc(),u=gc(),f=gc();fs(l,i,r),fs(c,a,r),fs(u,o,r),fs(f,s,r);var h=Math.min(l[0],c[0],u[0],f[0]),d=Math.min(l[1],c[1],u[1],f[1]),p=Math.max(l[0],c[0],u[0],f[0]),g=Math.max(l[1],c[1],u[1],f[1]);return t.fromRect({x:h,y:d,width:p-h,height:g-d})}}])})(),jo="Method not implemented.",hT="Use document.documentElement instead.",HWe="Cannot append a destroyed element.";function hA(t){return t===void 0?0:t>360||t<-360?t%360:t}var t7=Pr();function zf(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(t)&&t.length===3?r?Yc(t):dc(t7,t):Ln(t)?r?yr(t,e,n):Co(t7,t,e,n):r?yr(t[0],t[1]||e,t[2]||n):Co(t7,t[0],t[1]||e,t[2]||n)}var GWe=Math.PI/180;function ns(t){return t*GWe}var WWe=180/Math.PI;function Ap(t){return t*WWe}function VWe(t){return 360*t}var ED=Math.PI/2;function YWe(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n,s=r*r,l=i*i,c=a*a,u=o+s+l+c,f=n*a-r*i;return f>.499995*u?(t[0]=ED,t[1]=2*Math.atan2(r,n),t[2]=0):f<-.499995*u?(t[0]=-ED,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-a*r)),t[1]=Math.atan2(2*(n*a+r*i),1-2*(l+c)),t[2]=Math.atan2(2*(n*r+i*a),1-2*(s+l))),t}function XWe(t,e){var n,r,i=zm(Pr(),e),a=ir(i,3),o=a[0],s=a[1],l=a[2],c=Math.asin(-e[2]/o);return c<ED?c>-ED?(n=Math.atan2(e[6]/s,e[10]/l),r=Math.atan2(e[1]/o,e[0]/o)):(r=0,n=-Math.atan2(e[4]/s,e[5]/s)):(r=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=c,t[2]=r,t}function n7(t,e){return e.length===16?XWe(t,e):YWe(t,e)}function qWe(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t);return ZAe(r*a,i*o,0,-r*o,i*a,0,e,n,1)}function ZWe(t,e,n,r,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,l=2*a,c=n-e,u=r-i,f=l/c,h=l/u,d=(n+e)/c,p=(r+i)/u,g,v,y=o-a,_=o*a;return s?(g=-o/y,v=-_/y):(g=-(o+a)/y,v=-2*_/y),t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=d,t[9]=p,t[10]=g,t[11]=-1,t[12]=0,t[13]=0,t[14]=v,t[15]=0,t}function dae(t){var e=t[0],n=t[1],r=t[3],i=t[4],a=Math.sqrt(e*e+n*n),o=Math.sqrt(r*r+i*i),s=e*i-n*r;if(s<0&&(e<i?a=-a:o=-o),a){var l=1/a;e*=l,n*=l}if(o){var c=1/o;r*=c,i*=c}var u=Math.atan2(n,e),f=Ap(u);return[t[6],t[7],a,o,f]}var rm=Zr(),Rg=Zr(),JO=gc(),Ci=[Pr(),Pr(),Pr()],pae=Pr();function KWe(t,e,n,r,i,a){if(!QWe(rm,t)||(Ty(Rg,rm),Rg[3]=0,Rg[7]=0,Rg[11]=0,Rg[15]=1,Math.abs(hQ(Rg))<1e-8))return!1;var o=rm[3],s=rm[7],l=rm[11],c=rm[12],u=rm[13],f=rm[14],h=rm[15];if(o!==0||s!==0||l!==0){JO[0]=o,JO[1]=s,JO[2]=l,JO[3]=h;var d=qs(Rg,Rg);if(!d)return!1;fQ(Rg,Rg),fs(i,JO,Rg)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=c,e[1]=u,e[2]=f,JWe(Ci,rm),n[0]=Ou(Ci[0]),Ic(Ci[0],Ci[0]),r[0]=pc(Ci[0],Ci[1]),r7(Ci[1],Ci[1],Ci[0],1,-r[0]),n[1]=Ou(Ci[1]),Ic(Ci[1],Ci[1]),r[0]/=n[1],r[1]=pc(Ci[0],Ci[2]),r7(Ci[2],Ci[2],Ci[0],1,-r[1]),r[2]=pc(Ci[1],Ci[2]),r7(Ci[2],Ci[2],Ci[1],1,-r[2]),n[2]=Ou(Ci[2]),Ic(Ci[2],Ci[2]),r[1]/=n[2],r[2]/=n[2],uA(pae,Ci[1],Ci[2]),pc(Ci[0],pae)<0)for(var p=0;p<3;p++)n[p]*=-1,Ci[p][0]*=-1,Ci[p][1]*=-1,Ci[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+Ci[0][0]-Ci[1][1]-Ci[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-Ci[0][0]+Ci[1][1]-Ci[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-Ci[0][0]-Ci[1][1]+Ci[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+Ci[0][0]+Ci[1][1]+Ci[2][2],0)),Ci[2][1]>Ci[1][2]&&(a[0]=-a[0]),Ci[0][2]>Ci[2][0]&&(a[1]=-a[1]),Ci[1][0]>Ci[0][1]&&(a[2]=-a[2]),!0}function QWe(t,e){var n=e[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}function JWe(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}function r7(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var Fo=(function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t})({}),kY=(function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t})({}),yp=(function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t})({}),qOe={UPDATED:"updated"},gae=2e-4,ZOe=(function(){function t(){it(this,t),this.clipSpaceNearZ=Q8.NEGATIVE_ONE,this.eventEmitter=new Cw,this.matrix=Zr(),this.right=yr(1,0,0),this.up=yr(0,1,0),this.forward=yr(0,0,1),this.position=yr(0,0,1),this.focalPoint=yr(0,0,0),this.distanceVector=yr(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Zr(),this.projectionMatrixInverse=Zr(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Fo.EXPLORING,this.trackingMode=kY.DEFAULT,this.projectionMode=yp.PERSPECTIVE,this.frustum=new $We,this.orthoMatrix=Zr()}return at(t,[{key:"isOrtho",value:function(){return this.projectionMode===yp.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(n){this.enableUpdate=n}},{key:"setType",value:function(n,r){return this.type=n,this.type===Fo.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Fo.TRACKING&&r!==void 0&&this.setTrackingMode(r),this}},{key:"setProjectionMode",value:function(n){return this.projectionMode=n,this}},{key:"setTrackingMode",value:function(n){if(this.type!==Fo.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=n,this}},{key:"setWorldRotation",value:function(n){return this.rotateWorld=n,this._getAngles(),this}},{key:"getViewTransform",value:function(){return qs(Zr(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(n,r){var i=rf(Zr(),[n,r,0]);this.jitteredProjectionMatrix=qa(Zr(),i,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(n){return this.matrix=n,this._update(),this}},{key:"setProjectionMatrix",value:function(n){this.projectionMatrix=n}},{key:"setFov",value:function(n){return this.setPerspective(this.near,this.far,n,this.aspect),this}},{key:"setAspect",value:function(n){return this.setPerspective(this.near,this.far,this.fov,n),this}},{key:"setNear",value:function(n){return this.projectionMode===yp.PERSPECTIVE?this.setPerspective(n,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,n,this.far),this}},{key:"setFar",value:function(n){return this.projectionMode===yp.PERSPECTIVE?this.setPerspective(this.near,n,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,n),this}},{key:"setViewOffset",value:function(n,r,i,a,o,s){return this.aspect=n/r,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===yp.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===yp.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(n){return this.zoom=n,this.projectionMode===yp.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===yp.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(n,r){var i=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),a=i.x,o=i.y,s=this.roll;this.rotate(0,0,-s),this.setPosition(a,o),this.setFocalPoint(a,o),this.setZoom(n),this.rotate(0,0,s);var l=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),c=l.x,u=l.y,f=yr(c-a,u-o,0),h=pc(f,this.right)/Ou(this.right),d=pc(f,this.up)/Ou(this.up),p=this.getPosition(),g=ir(p,2),v=g[0],y=g[1],_=this.getFocalPoint(),E=ir(_,2),x=E[0],T=E[1];return this.setPosition(v-h,y-d),this.setFocalPoint(x-h,T-d),this}},{key:"setPerspective",value:function(n,r,i,a){var o;this.projectionMode=yp.PERSPECTIVE,this.fov=i,this.near=n,this.far=r,this.aspect=a;var s=this.near*Math.tan(ns(.5*this.fov))/this.zoom,l=2*s,c=this.aspect*l,u=-.5*c;if((o=this.view)!==null&&o!==void 0&&o.enabled){var f=this.view.fullWidth,h=this.view.fullHeight;u+=this.view.offsetX*c/f,s-=this.view.offsetY*l/h,c*=this.view.width/f,l*=this.view.height/h}return ZWe(this.projectionMatrix,u,u+c,s-l,s,n,this.far,this.clipSpaceNearZ===Q8.ZERO),qs(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(n,r,i,a,o,s){var l;this.projectionMode=yp.ORTHOGRAPHIC,this.rright=r,this.left=n,this.top=i,this.bottom=a,this.near=o,this.far=s;var c=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),f=(this.rright+this.left)/2,h=(this.top+this.bottom)/2,d=f-c,p=f+c,g=h+u,v=h-u;if((l=this.view)!==null&&l!==void 0&&l.enabled){var y=(this.rright-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=y*this.view.offsetX,p=d+y*this.view.width,g-=_*this.view.offsetY,v=g-_*this.view.height}return this.clipSpaceNearZ===Q8.NEGATIVE_ONE?mQ(this.projectionMatrix,d,p,g,v,o,s):yQ(this.projectionMatrix,d,p,g,v,o,s),qs(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],a=zf(n,r,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],a=yr(0,1,0);if(this.focalPoint=zf(n,r,i),this.trackingMode===kY.CINEMATIC){var o=MR(Pr(),this.focalPoint,this.position);n=o[0],r=o[1],i=o[2];var s=Ou(o),l=Ap(Math.asin(r/s)),c=90+Ap(Math.atan2(i,n)),u=Zr();Dy(u,u,ns(c)),Qm(u,u,ns(l)),a=ka(Pr(),[0,1,0],u)}return qs(this.matrix,_Q(Zr(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(n){if(this.distance===n||n<0)return this;this.distance=n,this.distance<gae&&(this.distance=gae),this.dollyingStep=this.distance/100;var r=Pr();n=this.distance;var i=this.forward,a=this.focalPoint;return r[0]=n*i[0]+a[0],r[1]=n*i[1]+a[1],r[2]=n*i[2]+a[2],this._setPosition(r),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(n){return this.maxDistance=n,this}},{key:"setMinDistance",value:function(n){return this.minDistance=n,this}},{key:"setAzimuth",value:function(n){return this.azimuth=hA(n),this.computeMatrix(),this._getAxes(),this.type===Fo.ORBITING||this.type===Fo.EXPLORING?this._getPosition():this.type===Fo.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(n){return this.elevation=hA(n),this.computeMatrix(),this._getAxes(),this.type===Fo.ORBITING||this.type===Fo.EXPLORING?this._getPosition():this.type===Fo.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(n){return this.roll=hA(n),this.computeMatrix(),this._getAxes(),this.type===Fo.ORBITING||this.type===Fo.EXPLORING?this._getPosition():this.type===Fo.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var n=Vf(wa(),[0,0,1],ns(this.roll));Pu(this.matrix);var r=Vf(wa(),[1,0,0],ns((this.rotateWorld&&this.type!==Fo.TRACKING||this.type===Fo.TRACKING?1:-1)*this.elevation)),i=Vf(wa(),[0,1,0],ns((this.rotateWorld&&this.type!==Fo.TRACKING||this.type===Fo.TRACKING?1:-1)*this.azimuth)),a=qf(wa(),i,r);a=qf(wa(),a,n);var o=TP(Zr(),a);this.type===Fo.ORBITING||this.type===Fo.EXPLORING?(Vs(this.matrix,this.matrix,this.focalPoint),qa(this.matrix,this.matrix,o),Vs(this.matrix,this.matrix,[0,0,this.distance])):this.type===Fo.TRACKING&&(Vs(this.matrix,this.matrix,this.position),qa(this.matrix,this.matrix,o))}},{key:"_setPosition",value:function(n,r,i){this.position=zf(n,r,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){dc(this.right,zf(fs(gc(),[1,0,0,0],this.matrix))),dc(this.up,zf(fs(gc(),[0,1,0,0],this.matrix))),dc(this.forward,zf(fs(gc(),[0,0,1,0],this.matrix))),Ic(this.right,this.right),Ic(this.up,this.up),Ic(this.forward,this.forward)}},{key:"_getAngles",value:function(){var n=this.distanceVector[0],r=this.distanceVector[1],i=this.distanceVector[2],a=Ou(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===Fo.TRACKING?(this.elevation=Ap(Math.asin(r/a)),this.azimuth=Ap(Math.atan2(-n,-i))):this.rotateWorld?(this.elevation=Ap(Math.asin(r/a)),this.azimuth=Ap(Math.atan2(-n,-i))):(this.elevation=-Ap(Math.asin(r/a)),this.azimuth=-Ap(Math.atan2(-n,-i)))}},{key:"_getPosition",value:function(){dc(this.position,zf(fs(gc(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){bQ(this.distanceVector,[0,0,-this.distance],qAe(Hx(),this.matrix)),cf(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=MR(Pr(),this.focalPoint,this.position),this.distance=Ou(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===yp.ORTHOGRAPHIC){var n=this.position,r=Vf(wa(),[0,0,1],-this.roll*Math.PI/180);dy(this.orthoMatrix,r,yr((this.rright-this.left)/2-n[0],(this.top-this.bottom)/2-n[1],0),yr(this.zoom,this.zoom,1),n)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var n=this.getViewTransform(),r=qa(Zr(),this.getPerspective(),n);this.getFrustum().extractFromVPMatrix(r),this.eventEmitter.emit(qOe.UPDATED)}}},{key:"rotate",value:function(n,r,i){throw new Error(jo)}},{key:"pan",value:function(n,r){throw new Error(jo)}},{key:"dolly",value:function(n){throw new Error(jo)}},{key:"createLandmark",value:function(n,r){throw new Error(jo)}},{key:"gotoLandmark",value:function(n,r){throw new Error(jo)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(jo)}}])})(),eVe=(function(t){return t[t.Standard=0]="Standard",t})({}),xD=(function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t})({}),tVe=Pr(),e2=Zr(),nVe=wa();function vae(t){if(t.localDirtyFlag){var e=t.localSkew[0]!==0||t.localSkew[1]!==0;if(e){dy(t.localTransform,t.localRotation,t.localPosition,yr(1,1,1),t.origin),(t.localSkew[0]!==0||t.localSkew[1]!==0)&&(Pu(e2),e2[4]=Math.tan(t.localSkew[0]),e2[1]=Math.tan(t.localSkew[1]),qa(t.localTransform,t.localTransform,e2));var n=dy(e2,YF(nVe,0,0,0,1),Co(tVe,1,1,1),t.localScale,t.origin);qa(t.localTransform,t.localTransform,n)}else{var r=t.localTransform,i=t.localPosition,a=t.localRotation,o=t.localScale,s=t.origin,l=i[0]!==0||i[1]!==0||i[2]!==0,c=a[3]!==1||a[0]!==0||a[1]!==0||a[2]!==0,u=o[0]!==1||o[1]!==1||o[2]!==1,f=s[0]!==0||s[1]!==0||s[2]!==0;!c&&!u&&!f?l?rf(r,i):Pu(r):dy(r,a,i,o,s)}t.localDirtyFlag=!1}}function rVe(t,e){t.dirtyFlag&&(e?qa(t.worldTransform,e.worldTransform,t.localTransform):Ty(t.worldTransform,t.localTransform),t.dirtyFlag=!1)}var KOe={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new GA(0,0,0,0)},Jn=(function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t})({});function HQ(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function QOe(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function NP(){}var FR=.7,SD=1/FR,dA="\\s*([+-]?\\d+)\\s*",UR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iVe=/^#([0-9a-f]{3,8})$/,aVe=new RegExp(`^rgb\\(${dA},${dA},${dA}\\)$`),oVe=new RegExp(`^rgb\\(${Mm},${Mm},${Mm}\\)$`),sVe=new RegExp(`^rgba\\(${dA},${dA},${dA},${UR}\\)$`),lVe=new RegExp(`^rgba\\(${Mm},${Mm},${Mm},${UR}\\)$`),cVe=new RegExp(`^hsl\\(${UR},${Mm},${Mm}\\)$`),uVe=new RegExp(`^hsla\\(${UR},${Mm},${Mm},${UR}\\)$`),mae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};HQ(NP,u4,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:yae,formatHex:yae,formatHex8:fVe,formatHsl:hVe,formatRgb:_ae,toString:_ae});function yae(){return this.rgb().formatHex()}function fVe(){return this.rgb().formatHex8()}function hVe(){return JOe(this).formatHsl()}function _ae(){return this.rgb().formatRgb()}function u4(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=iVe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?bae(e):n===3?new Dh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?N3(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?N3(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=aVe.exec(t))?new Dh(e[1],e[2],e[3],1):(e=oVe.exec(t))?new Dh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=sVe.exec(t))?N3(e[1],e[2],e[3],e[4]):(e=lVe.exec(t))?N3(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=cVe.exec(t))?Sae(e[1],e[2]/100,e[3]/100,1):(e=uVe.exec(t))?Sae(e[1],e[2]/100,e[3]/100,e[4]):mae.hasOwnProperty(t)?bae(mae[t]):t==="transparent"?new Dh(NaN,NaN,NaN,0):null}function bae(t){return new Dh(t>>16&255,t>>8&255,t&255,1)}function N3(t,e,n,r){return r<=0&&(t=e=n=NaN),new Dh(t,e,n,r)}function dVe(t){return t instanceof NP||(t=u4(t)),t?(t=t.rgb(),new Dh(t.r,t.g,t.b,t.opacity)):new Dh}function pVe(t,e,n,r){return arguments.length===1?dVe(t):new Dh(t,e,n,r??1)}function Dh(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}HQ(Dh,pVe,QOe(NP,{brighter(t){return t=t==null?SD:Math.pow(SD,t),new Dh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?FR:Math.pow(FR,t),new Dh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Dh(KE(this.r),KE(this.g),KE(this.b),TD(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Eae,formatHex:Eae,formatHex8:gVe,formatRgb:xae,toString:xae}));function Eae(){return`#${DE(this.r)}${DE(this.g)}${DE(this.b)}`}function gVe(){return`#${DE(this.r)}${DE(this.g)}${DE(this.b)}${DE((isNaN(this.opacity)?1:this.opacity)*255)}`}function xae(){const t=TD(this.opacity);return`${t===1?"rgb(":"rgba("}${KE(this.r)}, ${KE(this.g)}, ${KE(this.b)}${t===1?")":`, ${t})`}`}function TD(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function KE(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function DE(t){return t=KE(t),(t<16?"0":"")+t.toString(16)}function Sae(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ug(t,e,n,r)}function JOe(t){if(t instanceof Ug)return new Ug(t.h,t.s,t.l,t.opacity);if(t instanceof NP||(t=u4(t)),!t)return new Ug;if(t instanceof Ug)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Ug(o,s,l,t.opacity)}function vVe(t,e,n,r){return arguments.length===1?JOe(t):new Ug(t,e,n,r??1)}function Ug(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}HQ(Ug,vVe,QOe(NP,{brighter(t){return t=t==null?SD:Math.pow(SD,t),new Ug(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?FR:Math.pow(FR,t),new Ug(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Dh(i7(t>=240?t-240:t+120,i,r),i7(t,i,r),i7(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ug(Tae(this.h),I3(this.s),I3(this.l),TD(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=TD(this.opacity);return`${t===1?"hsl(":"hsla("}${Tae(this.h)}, ${I3(this.s)*100}%, ${I3(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Tae(t){return t=(t||0)%360,t<0?t+360:t}function I3(t){return Math.max(0,Math.min(1,t||0))}function i7(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function mc(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=e?e.apply(this,a):a[0],l=n.cache;if(l.has(s))return l.get(s);var c=t.apply(this,a);return n.cache=l.set(s,c)||l,c};return n.cache=new(mc.Cache||Map),mc.cacheList.push(n.cache),n}mc.Cache=Map;mc.cacheList=[];mc.clearCache=function(){mc.cacheList.forEach(function(t){return t.clear()})};var or=(function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t})({}),Bg=(function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t})({}),mVe=(function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t})({}),yVe=(function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t})({}),_Ve=[{name:"em",unit_type:or.kEms},{name:"px",unit_type:or.kPixels},{name:"deg",unit_type:or.kDegrees},{name:"rad",unit_type:or.kRadians},{name:"grad",unit_type:or.kGradians},{name:"ms",unit_type:or.kMilliseconds},{name:"s",unit_type:or.kSeconds},{name:"rem",unit_type:or.kRems},{name:"turn",unit_type:or.kTurns}],WA=(function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t})({}),bVe=function(e){return _Ve.find(function(n){return n.name===e}).unit_type},EVe=function(e){return e?e==="number"?or.kNumber:e==="percent"||e==="%"?or.kPercentage:bVe(e):or.kUnknown},xVe=function(e){switch(e){case or.kNumber:case or.kInteger:return Bg.kUNumber;case or.kPercentage:return Bg.kUPercent;case or.kPixels:return Bg.kULength;case or.kMilliseconds:case or.kSeconds:return Bg.kUTime;case or.kDegrees:case or.kRadians:case or.kGradians:case or.kTurns:return Bg.kUAngle;default:return Bg.kUOther}},SVe=function(e){switch(e){case Bg.kUNumber:return or.kNumber;case Bg.kULength:return or.kPixels;case Bg.kUPercent:return or.kPercentage;case Bg.kUTime:return or.kSeconds;case Bg.kUAngle:return or.kDegrees;default:return or.kUnknown}},Aae=function(e){var n=1;switch(e){case or.kPixels:case or.kDegrees:case or.kSeconds:break;case or.kMilliseconds:n=.001;break;case or.kRadians:n=180/Math.PI;break;case or.kGradians:n=.9;break;case or.kTurns:n=360;break}return n},DY=function(e){switch(e){case or.kNumber:case or.kInteger:return"";case or.kPercentage:return"%";case or.kEms:return"em";case or.kRems:return"rem";case or.kPixels:return"px";case or.kDegrees:return"deg";case or.kRadians:return"rad";case or.kGradians:return"grad";case or.kMilliseconds:return"ms";case or.kSeconds:return"s";case or.kTurns:return"turn"}return""},f4=(function(){function t(){it(this,t)}return at(t,[{key:"toString",value:function(){return this.buildCSSText(mVe.kNo,yVe.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=WA.kUnitType&&this.getType()<=WA.kClampType}}],[{key:"isAngle",value:function(n){return n===or.kDegrees||n===or.kRadians||n===or.kGradians||n===or.kTurns}},{key:"isLength",value:function(n){return n>=or.kEms&&n<or.kDegrees}},{key:"isRelativeUnit",value:function(n){return n===or.kPercentage||n===or.kEms||n===or.kRems}},{key:"isTime",value:function(n){return n===or.kSeconds||n===or.kMilliseconds}}])})(),TVe=(function(t){function e(n){var r;return it(this,e),r=Ar(this,e),r.colorSpace=n,r}return Sr(e,t),at(e,[{key:"getType",value:function(){return WA.kColorType}},{key:"to",value:function(r){return this}}])})(f4),L3=(function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t})({}),k3=(function(t){function e(n,r){var i;return it(this,e),i=Ar(this,e),i.type=n,i.value=r,i}return Sr(e,t),at(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(r,i,a){return a}},{key:"getType",value:function(){return WA.kColorType}}])})(f4),av=(function(t){function e(n){var r;return it(this,e),r=Ar(this,e),r.value=n,r}return Sr(e,t),at(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return WA.kKeywordType}},{key:"buildCSSText",value:function(r,i,a){return a+this.value}}])})(f4),AVe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r="";return Number.isFinite(e)?r="NaN":e>0?r="infinity":r="-infinity",r+=n},BY=function(e){return SVe(xVe(e))},ts=(function(t){function e(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:or.kNumber;it(this,e),r=Ar(this,e);var a;return typeof i=="string"?a=EVe(i):a=i,r.unit=a,r.value=n,r}return Sr(e,t),at(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(r){var i=r;return this.value===i.value&&this.unit===i.unit}},{key:"getType",value:function(){return WA.kUnitType}},{key:"convertTo",value:function(r){if(this.unit===r)return new e(this.value,this.unit);var i=BY(this.unit);if(i!==BY(r)||i===or.kUnknown)return null;var a=Aae(this.unit)/Aae(r);return new e(this.value*a,r)}},{key:"buildCSSText",value:function(r,i,a){var o;switch(this.unit){case or.kUnknown:break;case or.kInteger:o=Number(this.value).toFixed(0);break;case or.kNumber:case or.kPercentage:case or.kEms:case or.kRems:case or.kPixels:case or.kDegrees:case or.kRadians:case or.kGradians:case or.kMilliseconds:case or.kSeconds:case or.kTurns:{var s=-999999,l=999999,c=this.value,u=DY(this.unit);if(c<s||c>l){var f=DY(this.unit);!Number.isFinite(c)||Number.isNaN(c)?o=AVe(c,f):o=c+(f||"")}else o="".concat(c).concat(u)}}return a+=o,a}}])})(f4),Ng=new ts(0,"px");new ts(1,"px");var mx=new ts(0,"deg"),GQ=(function(t){function e(n,r,i){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return it(this,e),a=Ar(this,e,["rgb"]),a.r=n,a.g=r,a.b=i,a.alpha=o,a.isNone=s,a}return Sr(e,t),at(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(r,i,a){return"".concat(a,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])})(TVe),wae=new av("unset"),wVe=new av("initial"),OVe=new av("inherit"),a7={"":wae,unset:wae,initial:wVe,inherit:OVe},CVe=function(e){return a7[e]||(a7[e]=new av(e)),a7[e]},e2e=new GQ(0,0,0,0,!0),t2e=new GQ(0,0,0,0),RVe=mc(function(t,e,n,r){return new GQ(t,e,n,r)},function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")}),Ds=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:or.kNumber;return new ts(e,n)};new ts(50,"%");function MVe(t){var e=t.type,n=t.value;return e==="hex"?"#".concat(n):e==="literal"?n:e==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var PVe=(function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function n(M){throw new Error("".concat(e,": ").concat(M))}function r(){var M=i();return e.length>0&&n("Invalid input not EOF"),M}function i(){return E(a)}function a(){return o("linear-gradient",t.linearGradient,l)||o("repeating-linear-gradient",t.repeatingLinearGradient,l)||o("radial-gradient",t.radialGradient,f)||o("repeating-radial-gradient",t.repeatingRadialGradient,f)||o("conic-gradient",t.conicGradient,f)}function o(M,k,z){return s(k,function(j){var V=z();return V&&(X(t.comma)||n("Missing comma before color stops")),{type:M,orientation:V,colorStops:E(x)}})}function s(M,k){var z=X(M);if(z){X(t.startCall)||n("Missing (");var j=k(z);return X(t.endCall)||n("Missing )"),j}}function l(){return c()||u()}function c(){return $("directional",t.sideOrCorner,1)}function u(){return $("angular",t.angleValue,1)}function f(){var M,k=h(),z;return k&&(M=[],M.push(k),z=e,X(t.comma)&&(k=h(),k?M.push(k):e=z)),M}function h(){var M=d()||p();if(M)M.at=v();else{var k=g();if(k){M=k;var z=v();z&&(M.at=z)}else{var j=y();j&&(M={type:"default-radial",at:j})}}return M}function d(){var M=$("shape",/^(circle)/i,0);return M&&(M.style=U()||g()),M}function p(){var M=$("shape",/^(ellipse)/i,0);return M&&(M.style=B()||g()),M}function g(){return $("extent-keyword",t.extentKeywords,1)}function v(){if($("position",/^at/,0)){var M=y();return M||n("Missing positioning value"),M}}function y(){var M=_();if(M.x||M.y)return{type:"position",value:M}}function _(){return{x:B(),y:B()}}function E(M){var k=M(),z=[];if(k)for(z.push(k);X(t.comma);)k=M(),k?z.push(k):n("One extra comma");return z}function x(){var M=T();return M||n("Expected color definition"),M.length=B(),M}function T(){return w()||D()||C()||S()}function S(){return $("literal",t.literalColor,0)}function w(){return $("hex",t.hexColor,1)}function C(){return s(t.rgbColor,function(){return{type:"rgb",value:E(L)}})}function D(){return s(t.rgbaColor,function(){return{type:"rgba",value:E(L)}})}function L(){return X(t.number)[1]}function B(){return $("%",t.percentageValue,1)||I()||U()}function I(){return $("position-keyword",t.positionKeywords,1)}function U(){return $("px",t.pixelValue,1)||$("em",t.emValue,1)}function $(M,k,z){var j=X(k);if(j)return{type:M,value:j[z]}}function X(M){var k=/^[\n\r\t\s]+/.exec(e);k&&N(k[0].length);var z=M.exec(e);return z&&N(z[0].length),z}function N(M){e=e.substring(M)}return function(M){return e=M,r()}})(),NVe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,IVe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,LVe=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,n2e=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function kVe(t){var e,n=t.length;if(t[n-1].length=(e=t[n-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},n>1){var r;t[0].length=(r=t[0].length)!==null&&r!==void 0?r:{type:"%",value:"0"}}for(var i=0,a=Number(t[0].length.value),o=1;o<n;o++){var s,l=(s=t[o].length)===null||s===void 0?void 0:s.value;if(!Kn(l)&&!Kn(a)){for(var c=1;c<o-i;c++)t[i+c].length={type:"%",value:"".concat(a+(Number(l)-a)*c/(o-i))};i=o,a=Number(l)}}}var DVe={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},BVe=mc(function(t){var e;return t.type==="angular"?e=Number(t.value):e=DVe[t.value]||0,Ds(e,"deg")}),FVe=mc(function(t){var e=50,n=50,r="%",i="%";if(t?.type==="position"){var a=t.value,o=a.x,s=a.y;o?.type==="position-keyword"&&(o.value==="left"?e=0:o.value==="center"?e=50:o.value==="right"?e=100:o.value==="top"?n=0:o.value==="bottom"&&(n=100)),s?.type==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?n=50:s.value==="right"?e=100:s.value==="top"?n=0:s.value==="bottom"&&(n=100)),(o?.type==="px"||o?.type==="%"||o?.type==="em")&&(r=o?.type,e=Number(o.value)),(s?.type==="px"||s?.type==="%"||s?.type==="em")&&(i=s?.type,n=Number(s.value))}return{cx:Ds(e,r),cy:Ds(n,i)}}),UVe=mc(function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var e=PVe(t);return e.map(function(s){var l=s.type,c=s.orientation,u=s.colorStops;kVe(u);var f=u.map(function(E){return{offset:Ds(Number(E.length.value),"%"),color:MVe(E)}});if(l==="linear-gradient")return new k3(L3.LinearGradient,{angle:c?BVe(c):mx,steps:f});if(l==="radial-gradient"&&(c||(c=[{type:"shape",value:"circle"}]),c[0].type==="shape"&&c[0].value==="circle")){var h=FVe(c[0].at),d=h.cx,p=h.cy,g;if(c[0].style){var v=c[0].style,y=v.type,_=v.value;y==="extent-keyword"?g=CVe(_):g=Ds(_,y)}return new k3(L3.RadialGradient,{cx:d,cy:p,size:g,steps:f})}})}var n=t[0];if(t[1]==="("||t[2]==="("){if(n==="l"){var r=NVe.exec(t);if(r){var i,a=((i=r[2].match(n2e))===null||i===void 0?void 0:i.map(function(s){return s.split(":")}))||[];return[new k3(L3.LinearGradient,{angle:Ds(parseFloat(r[1]),"deg"),steps:a.map(function(s){var l=ir(s,2),c=l[0],u=l[1];return{offset:Ds(Number(c)*100,"%"),color:u}})})]}}else if(n==="r"){var o=jVe(t);if(o)if($i(o))t=o;else return[new k3(L3.RadialGradient,o)]}else if(n==="p")return zVe(t)}});function jVe(t){var e=IVe.exec(t);if(e){var n,r=((n=e[4].match(n2e))===null||n===void 0?void 0:n.map(function(i){return i.split(":")}))||[];return{cx:Ds(50,"%"),cy:Ds(50,"%"),steps:r.map(function(i){var a=ir(i,2),o=a[0],s=a[1];return{offset:Ds(Number(o)*100,"%"),color:s}})}}return null}function zVe(t){var e=LVe.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function $Ve(t){return t&&!!t.image}function Oae(t){return t&&!Kn(t.r)&&!Kn(t.g)&&!Kn(t.b)}var QE=mc(function(t){if($Ve(t))return ze({repetition:"repeat"},t);if(Kn(t)&&(t=""),t==="transparent")return t2e;if(t==="currentColor")t="black";else if(t==="none")return e2e;var e=UVe(t);if(e)return e;var n=u4(t),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),RVe.apply(void 0,r)});function HVe(t,e){if(!(!Oae(t)||!Oae(e)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(ga(r[i],0,255));return r[3]=ga(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function IP(t,e){if(Kn(e))return Ds(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return Ds(Number(e),"px");if("deg".search(t)>=0)return Ds(Number(e),"deg")}var n=[];e=e.replace(t,function(i){return n.push(i),"U".concat(i)});var r="U(".concat(t.source,")");return n.map(function(i){return Ds(Number(e.replace(new RegExp("U".concat(i),"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var r2e=function(e){return IP(new RegExp("px","g"),e)},GVe=mc(r2e),WVe=function(e){return IP(new RegExp("%","g"),e)};mc(WVe);var i2e=function(e){return Ln(e)||isFinite(Number(e))?Ds(Number(e)||0,"px"):IP(new RegExp("px|%|em|rem","g"),e)},FY=mc(i2e),a2e=function(e){return IP(new RegExp("deg|rad|grad|turn","g"),e)},VVe=mc(a2e);function YVe(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a="",o=t.value||0,s=e.value||0,l=BY(t.unit),c=t.convertTo(l),u=e.convertTo(l);return c&&u?(o=c.value,s=u.value,a=DY(t.unit)):(ts.isLength(t.unit)||ts.isLength(e.unit))&&(o=yd(t,i,n),s=yd(e,i,n),a="px"),[o,s,function(f){return f+a}]}function Mh(t){var e=0;return t.unit===or.kDegrees?e=t.value:t.unit===or.kRadians?e=Ap(Number(t.value)):t.unit===or.kTurns?e=VWe(Number(t.value)):t.value&&(e=t.value),e}function Cae(t,e){var n;return Array.isArray(t)?n=t.map(function(r){return Number(r)}):$i(t)?n=t.split(" ").map(function(r){return Number(r)}):Ln(t)&&(n=[t]),e===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:e===4?n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:e==="even"&&n.length%2===1?[].concat(Dr(n),Dr(n)):n}function yd(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.unit===or.kPixels)return Number(t.value);if(t.unit===or.kPercentage&&n){var i=n.nodeName===nr.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var XVe=function(e){return IP(/deg|rad|grad|turn|px|%/g,e)},qVe=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function ZVe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(t=t.toLowerCase().trim(),t==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];if(i=r.index+r[0].length,qVe.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(a){return XVe(a)||QE(a)})}),e.lastIndex===t.length)return n}return[]}function o2e(t){return t.toString()}var s2e=function(e){return typeof e=="number"?Ds(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?Ds(Number(e)):Ds(0)},UY=mc(s2e);mc(function(t){return $i(t)?t.split(" ").map(UY):t.map(UY)});function WQ(t,e){return[t,e,o2e]}function VQ(t,e){return function(n,r){return[n,r,function(i){return o2e(ga(i,t,e))}]}}function l2e(t,e){if(t.length===e.length)return[t,e,function(n){return n}]}function Rae(t){return t.parsedStyle.d.totalLength===0&&(t.parsedStyle.d.totalLength=vwe(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function KVe(t){return t.parsedStyle.points.totalLength===0&&(t.parsedStyle.points.totalLength=GOe(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function QVe(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e],i=r[0];if(i==="M"&&n){var a=n[0],o=[r[1],r[2]],s=void 0;a==="L"||a==="M"?s=[n[1],n[2]]:(a==="C"||a==="A"||a==="Q")&&(s=[n[n.length-2],n[n.length-1]]),s&&AD(o,s)&&(t.splice(e,1),e--)}}}function JVe(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function eYe(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a[0];o==="M"?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):o==="Z"?r.length&&(e.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}function AD(t,e){return t[0]===e[0]&&t[1]===e[1]}function tYe(t,e){for(var n=[],r=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,c=o.prePoint,u=void 0;switch(o.command){case"Q":u=WOe(c[0],c[1],l[1],l[2],l[3],l[4]);break;case"C":u=HOe(c[0],c[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;u=zOe(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}u&&(o.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height))}n=n.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0}),r=r.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0});var h=kA(n),d=kA(r),p=LA(n),g=LA(r);if(i.length===0)return{x:h,y:d,width:p-h,height:g-d};for(var v=0;v<i.length;v++){var y=i[v],_=y.currentPoint,E=void 0;_[0]===h?(E=D3(y,e),h-=E.xExtra):_[0]===p&&(E=D3(y,e),p+=E.xExtra),_[1]===d?(E=D3(y,e),d-=E.yExtra):_[1]===g&&(E=D3(y,e),g+=E.yExtra)}return{x:h,y:d,width:p-h,height:g-d}}function D3(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||cA(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(l/2-c)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(u-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return f}function Mae(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}var Pae=function(e,n){var r=e.x*n.x+e.y*n.y,i=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(n.x,2)+Math.pow(n.y,2))),a=e.x*n.y-e.y*n.x<0?-1:1,o=a*Math.acos(r/i);return o},Nae=function(e,n,r,i,a,o,s,l){n=Math.abs(n),r=Math.abs(r),i=WF(i,360);var c=ns(i);if(e.x===s.x&&e.y===s.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(n===0||r===0)return{x:0,y:0,ellipticalArcAngle:0};var u=(e.x-s.x)/2,f=(e.y-s.y)/2,h={x:Math.cos(c)*u+Math.sin(c)*f,y:-Math.sin(c)*u+Math.cos(c)*f},d=Math.pow(h.x,2)/Math.pow(n,2)+Math.pow(h.y,2)/Math.pow(r,2);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var p=Math.pow(n,2)*Math.pow(r,2)-Math.pow(n,2)*Math.pow(h.y,2)-Math.pow(r,2)*Math.pow(h.x,2),g=Math.pow(n,2)*Math.pow(h.y,2)+Math.pow(r,2)*Math.pow(h.x,2),v=p/g;v=v<0?0:v;var y=(a!==o?1:-1)*Math.sqrt(v),_={x:y*(n*h.y/r),y:y*(-(r*h.x)/n)},E={x:Math.cos(c)*_.x-Math.sin(c)*_.y+(e.x+s.x)/2,y:Math.sin(c)*_.x+Math.cos(c)*_.y+(e.y+s.y)/2},x={x:(h.x-_.x)/n,y:(h.y-_.y)/r},T=Pae({x:1,y:0},x),S={x:(-h.x-_.x)/n,y:(-h.y-_.y)/r},w=Pae(x,S);!o&&w>0?w-=2*Math.PI:o&&w<0&&(w+=2*Math.PI),w%=2*Math.PI;var C=T+w*l,D=n*Math.cos(C),L=r*Math.sin(C),B={x:Math.cos(c)*D-Math.sin(c)*L+E.x,y:Math.sin(c)*D+Math.cos(c)*L+E.y,ellipticalArcStartAngle:T,ellipticalArcEndAngle:T+w,ellipticalArcAngle:C,ellipticalArcCenter:E,resultantRx:n,resultantRy:r};return B};function nYe(t){for(var e=[],n=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];r=t[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=rYe(n,l);u.arcParams=f;break}if(c==="Z")n=i,r=t[a+1];else{var h=l.length;n=[l[h-2],l[h-1]]}r&&r[0]==="Z"&&(r=t[a],e[a]&&(e[a].prePoint=n)),u.currentPoint=n,e[a]&&AD(n,e[a].currentPoint)&&(e[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]];else if(c==="Q"){var g=[l[1],l[2]];u.startTangent=[p[0]-g[0],p[1]-g[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]}else if(c==="T"){var v=e[s-1],y=Mae(v.currentPoint,p);v.command==="Q"?(u.command="Q",u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]]):(u.command="TL",u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]])}else if(c==="C"){var _=[l[1],l[2]],E=[l[3],l[4]];u.startTangent=[p[0]-_[0],p[1]-_[1]],u.endTangent=[n[0]-E[0],n[1]-E[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[_[0]-E[0],_[1]-E[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[E[0]-_[0],E[1]-_[1]])}else if(c==="S"){var x=e[s-1],T=Mae(x.currentPoint,p),S=[l[1],l[2]];x.command==="C"?(u.command="C",u.startTangent=[p[0]-T[0],p[1]-T[1]],u.endTangent=[n[0]-S[0],n[1]-S[1]]):(u.command="SQ",u.startTangent=[p[0]-S[0],p[1]-S[1]],u.endTangent=[n[0]-S[0],n[1]-S[1]])}else if(c==="A"){var w=Iae(u,0),C=w.x,D=w.y,L=Iae(u,1,!1),B=L.x,I=L.y;u.startTangent=[C,D],u.endTangent=[B,I]}e.push(u)}return e}function Iae(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t.arcParams,i=r.rx,a=i===void 0?0:i,o=r.ry,s=o===void 0?0:o,l=r.xRotation,c=r.arcFlag,u=r.sweepFlag,f=Nae({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e),h=Nae({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),d=h.x-f.x,p=h.y-f.y,g=Math.sqrt(d*d+p*p);return{x:-d/g,y:-p/g}}function B3(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function jY(t,e){return B3(t)*B3(e)?(t[0]*e[0]+t[1]*e[1])/(B3(t)*B3(e)):1}function Lae(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(jY(t,e))}function rYe(t,e){var n=e[1],r=e[2],i=WF(ns(e[3]),Math.PI*2),a=e[4],o=e[5],s=t[0],l=t[1],c=e[6],u=e[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,h=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=f*f/(n*n)+h*h/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var p=n*n*(h*h)+r*r*(f*f),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*h/r:0,y=n?g*-r*f/n:0,_=(s+c)/2+Math.cos(i)*v-Math.sin(i)*y,E=(l+u)/2+Math.sin(i)*v+Math.cos(i)*y,x=[(f-v)/n,(h-y)/r],T=[(-1*f-v)/n,(-1*h-y)/r],S=Lae([1,0],x),w=Lae(x,T);return jY(x,T)<=-1&&(w=Math.PI),jY(x,T)>=1&&(w=0),o===0&&w>0&&(w-=2*Math.PI),o===1&&w<0&&(w+=2*Math.PI),{cx:_,cy:E,rx:AD(t,[c,u])?0:n,ry:AD(t,[c,u])?0:r,startAngle:S,endAngle:S+w,xRotation:i,arcFlag:a,sweepFlag:o}}function iYe(t,e,n){return t.reduce(function(r,i){var a="";if(i[0]==="M"||i[0]==="L"){var o=yr(i[1],i[2],0);n&&ka(o,o,n),a="".concat(i[0]).concat(o[0],",").concat(o[1])}else if(i[0]==="Z")a=i[0];else if(i[0]==="C"){var s=yr(i[1],i[2],0),l=yr(i[3],i[4],0),c=yr(i[5],i[6],0);n&&(ka(s,s,n),ka(l,l,n),ka(c,c,n)),a="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(l[0],",").concat(l[1],",").concat(c[0],",").concat(c[1])}else if(i[0]==="A"){var u=yr(i[6],i[7],0);n&&ka(u,u,n),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(u[0],",").concat(u[1])}else if(i[0]==="Q"){var f=yr(i[1],i[2],0),h=yr(i[3],i[4],0);n&&(ka(f,f,n),ka(h,h,n)),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return r+=a},"")}function aYe(t,e,n,r){return[["M",t,e],["L",n,r]]}function kae(t,e,n,r){var i=(-1+Math.sqrt(2))/3*4,a=t*i,o=e*i,s=n-t,l=n+t,c=r-e,u=r+e;return[["M",s,r],["C",s,r-o,n-a,c,n,c],["C",n+a,c,l,r-o,l,r],["C",l,r+o,n+a,u,n,u],["C",n-a,u,s,r+o,s,r],["Z"]]}function oYe(t,e){var n=t.map(function(r,i){return[i===0?"M":"L",r[0],r[1]]});return e&&n.push(["Z"]),n}function sYe(t,e,n,r,i){if(i){var a=ir(i,4),o=a[0],s=a[1],l=a[2],c=a[3],u=t>0?1:-1,f=e>0?1:-1,h=u+f!==0?1:0;return[["M",u*o+n,r],["L",t-u*s+n,r],s?["A",s,s,0,0,h,t+n,f*s+r]:null,["L",t+n,e-f*l+r],l?["A",l,l,0,0,h,t+n-u*l,e+r]:null,["L",n+u*c,e+r],c?["A",c,c,0,0,h,n,e+r-f*c]:null,["L",n,f*o+r],o?["A",o,o,0,0,h,u*o+n,r]:null,["Z"]].filter(function(d){return d})}return[["M",n,r],["L",n+t,r],["L",n+t,r+e],["L",n,r+e],["Z"]]}function lYe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLocalTransform(),n=[];switch(t.nodeName){case nr.LINE:var r=t.parsedStyle,i=r.x1,a=i===void 0?0:i,o=r.y1,s=o===void 0?0:o,l=r.x2,c=l===void 0?0:l,u=r.y2,f=u===void 0?0:u;n=aYe(a,s,c,f);break;case nr.CIRCLE:{var h=t.parsedStyle,d=h.r,p=d===void 0?0:d,g=h.cx,v=g===void 0?0:g,y=h.cy,_=y===void 0?0:y;n=kae(p,p,v,_);break}case nr.ELLIPSE:{var E=t.parsedStyle,x=E.rx,T=x===void 0?0:x,S=E.ry,w=S===void 0?0:S,C=E.cx,D=C===void 0?0:C,L=E.cy,B=L===void 0?0:L;n=kae(T,w,D,B);break}case nr.POLYLINE:case nr.POLYGON:var I=t.parsedStyle.points;n=oYe(I.points,t.nodeName===nr.POLYGON);break;case nr.RECT:var U=t.parsedStyle,$=U.width,X=$===void 0?0:$,N=U.height,M=N===void 0?0:N,k=U.x,z=k===void 0?0:k,j=U.y,V=j===void 0?0:j,Q=U.radius,ee=Q&&Q.some(function(ne){return ne!==0});n=sYe(X,M,z,V,ee&&Q.map(function(ne){return ga(ne,0,Math.min(Math.abs(X)/2,Math.abs(M)/2))}));break;case nr.PATH:var re=t.parsedStyle.d.absolutePath;n=Dr(re);break}if(n.length)return iYe(n,t,e)}var c2e=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var n;try{n=FA(e)}catch{n=FA(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}QVe(n);var r=JVe(n),i=eYe(n),a=i.polygons,o=i.polylines,s=nYe(n),l=tYe(s,0),c=l.x,u=l.y,f=l.width,h=l.height;return{absolutePath:n,hasArc:r,segments:s,polygons:a,polylines:o,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(f)?f:0,height:Number.isFinite(h)?h:0}}},cYe=mc(c2e);function u2e(t){return $i(t)?cYe(t):c2e(t)}function uYe(t,e,n){var r=t.curve,i=e.curve;(!r||r.length===0)&&(r=NR(t.absolutePath,!1),t.curve=r),(!i||i.length===0)&&(i=NR(e.absolutePath,!1),e.curve=i);var a=[r,i];r.length!==i.length&&(a=TQ(r,i));var o=hD(a[0])!==hD(a[1])?dwe(a[0]):hwe(a[0]);return[o,mwe(a[1],o),function(s){return s}]}function fYe(t,e){var n;return $i(t)?n=t.split(" ").map(function(r){var i=r.split(","),a=ir(i,2),o=a[0],s=a[1];return[Number(o),Number(s)]}):n=t,{points:n,totalLength:0,segments:[]}}function hYe(t,e){return[t.points,e.points,function(n){return n}]}var il=null,pA=/\s*(\w+)\(([^)]*)\)/g;function yh(t){return function(e){var n=0;return t.map(function(r){return r===il?e[n++]:r})}}function lE(t){return t}var jR={matrix:["NNNNNN",[il,il,0,0,il,il,0,0,0,0,1,0,il,il,0,1],lE],matrix3d:["NNNNNNNNNNNNNNNN",lE],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",yh([il,il,new ts(1)]),lE],scaleX:["N",yh([il,new ts(1),new ts(1)]),yh([il,new ts(1)])],scaleY:["N",yh([new ts(1),il,new ts(1)]),yh([new ts(1),il])],scaleZ:["N",yh([new ts(1),new ts(1),il])],scale3d:["NNN",lE],skew:["Aa",null,lE],skewX:["A",null,yh([il,mx])],skewY:["A",null,yh([mx,il])],translate:["Tt",yh([il,il,Ng]),lE],translateX:["T",yh([il,Ng,Ng]),yh([il,Ng])],translateY:["T",yh([Ng,il,Ng]),yh([Ng,il])],translateZ:["L",yh([Ng,Ng,il])],translate3d:["TTL",lE]};function f2e(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r],a=i[0],o=i.slice(1);a==="translate"||a==="skew"?o.length===1&&o.push(0):a==="scale"&&o.length===1&&o.push(o[0]);var s=jR[a];if(!s)return[];var l=o.map(function(c){return Ds(c)});e.push({t:a,d:l})}return e}function dYe(t){if(Array.isArray(t))return f2e(t);if(t=(t||"none").trim(),t==="none")return[];var e=[],n,r=0;for(pA.lastIndex=0;n=pA.exec(t);){if(n.index!==r)return[];r=n.index+n[0].length;var i=n[1],a=jR[i];if(!a)return[];var o=n[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],c=0;c<s.length;c++){var u=o[c],f=s[c],h=void 0;if(u?h={A:function(p){return p.trim()==="0"?mx:VVe(p)},N:UY,T:FY,L:GVe}[f.toUpperCase()](u):h={a:mx,n:l[0],t:Ng}[f],h===void 0)return[];l.push(h)}if(e.push({t:i,d:l}),pA.lastIndex===t.length)return e}return[]}function pYe(t){if(Array.isArray(t))return f2e(t);if(t=(t||"none").trim(),t==="none")return[];var e=[],n,r=0;for(pA.lastIndex=0;n=pA.exec(t);){if(n.index!==r)return[];r=n.index+n[0].length;var i=n[1],a=jR[i];if(!a)return[];var o=n[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],c=0;c<s.length;c++){var u=o[c],f=s[c],h=void 0;if(u?h={A:function(p){return p.trim()==="0"?mx:a2e(p)},N:s2e,T:i2e,L:r2e}[f.toUpperCase()](u):h={a:mx,n:l[0],t:Ng}[f],h===void 0)return[];l.push(h)}if(e.push({t:i,d:l}),pA.lastIndex===t.length)return e}return[]}function gYe(t){var e,n,r,i;switch(t.t){case"rotateX":return i=ns(Mh(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=ns(Mh(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=ns(Mh(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=ns(Mh(t.d[3]));var a=e*e+n*n+r*r;if(a===0)e=1,n=0,r=0;else if(a!==1){var o=Math.sqrt(a);e/=o,n/=o,r/=o}var s=Math.sin(i/2),l=s*Math.cos(i/2),c=s*s;return[1-2*(n*n+r*r)*c,2*(e*n*c+r*l),2*(e*r*c-n*l),0,2*(e*n*c-r*l),1-2*(e*e+r*r)*c,2*(n*r*c+e*l),0,2*(e*r*c+n*l),2*(n*r*c-e*l),1-2*(e*e+n*n)*c,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=ns(Mh(t.d[0])),f=ns(Mh(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=ns(Mh(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=ns(Mh(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=yd(t.d[0],0,null)||0,n=yd(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1];case"translateX":return e=yd(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translateY":return n=yd(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translateZ":return r=yd(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return e=yd(t.d[0],0,null)||0,n=yd(t.d[1],0,null)||0,r=yd(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1];case"perspective":var h=yd(t.d[0],0,null)||0,d=h?-1/h:0;return[1,0,0,0,0,1,0,0,0,0,1,d,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function vYe(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function mYe(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(gYe).reduce(vYe)}function Dae(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return KWe(mYe(t),e,n,r,i,a),[[e,n,r,a,i]]}var yYe=(function(){function t(r,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=0;o<4;o++)for(var s=0;s<4;s++)for(var l=0;l<4;l++)a[o][s]+=i[o][l]*r[l][s];return a}function e(r){return r[0][2]===0&&r[0][3]===0&&r[1][2]===0&&r[1][3]===0&&r[2][0]===0&&r[2][1]===0&&r[2][2]===1&&r[2][3]===0&&r[3][2]===0&&r[3][3]===1}function n(r,i,a,o,s){for(var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)l[c][3]=s[c];for(var u=0;u<3;u++)for(var f=0;f<3;f++)l[3][u]+=r[f]*l[f][u];var h=o[0],d=o[1],p=o[2],g=o[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(d*d+p*p),v[0][1]=2*(h*d-p*g),v[0][2]=2*(h*p+d*g),v[1][0]=2*(h*d+p*g),v[1][1]=1-2*(h*h+p*p),v[1][2]=2*(d*p-h*g),v[2][0]=2*(h*p-d*g),v[2][1]=2*(d*p+h*g),v[2][2]=1-2*(h*h+d*d),l=t(l,v);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(y[2][1]=a[2],l=t(l,y)),a[1]&&(y[2][1]=0,y[2][0]=a[0],l=t(l,y)),a[0]&&(y[2][0]=0,y[1][0]=a[0],l=t(l,y));for(var _=0;_<3;_++)for(var E=0;E<3;E++)l[_][E]*=i[_];return e(l)?[l[0][0],l[0][1],l[1][0],l[1][1],l[3][0],l[3][1]]:l[0].concat(l[1],l[2],l[3])}return n})();function _Ye(t){return t.toFixed(6).replace(".000000","")}function o7(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=Dae(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=Dae(e)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var a=EYe(n[0][3],r[0][3],i[5]),o=yYe(i[0],i[1],i[2],a,i[4]),s=o.map(_Ye).join(",");return s}])}function bYe(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function EYe(t,e,n){var r=bYe(t,e);r=ga(r,-1,1);var i=[];if(r===1)i=t;else for(var a=Math.acos(r),o=Math.sin(n*a)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*a)-r*o)+e[s]*o);return i}function s7(t){return t.replace(/[XY]/,"")}function l7(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var xYe=function(e,n){return e==="perspective"&&n==="perspective"||(e==="matrix"||e==="matrix3d")&&(n==="matrix"||n==="matrix3d")};function SYe(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(){var B=t[a],I=B.t,U=B.d,$=I.substring(0,5)==="scale"?1:0;e.push({t:I,d:U.map(function(X){return typeof X=="number"?Ds($):Ds($,X.unit)})})},a=0;a<t.length;a++)i()}var o=[],s=[],l=[];if(t.length!==e.length){var c=o7(t,e);o=[c[0]],s=[c[1]],l=[["matrix",[c[2]]]]}else for(var u=0;u<t.length;u++){var f=t[u].t,h=e[u].t,d=t[u].d,p=e[u].d,g=jR[f],v=jR[h],y=void 0;if(xYe(f,h)){var _=o7([t[u]],[e[u]]);o.push(_[0]),s.push(_[1]),l.push(["matrix",[_[2]]]);continue}else if(f===h)y=f;else if(g[2]&&v[2]&&s7(f)===s7(h))y=s7(f),d=g[2](d),p=v[2](p);else if(g[1]&&v[1]&&l7(f)===l7(h))y=l7(f),d=g[1](d),p=v[1](p);else{var E=o7(t,e);o=[E[0]],s=[E[1]],l=[["matrix",[E[2]]]];break}for(var x=[],T=[],S=[],w=0;w<d.length;w++){var C=YVe(d[w],p[w],n,!1,w);x[w]=C[0],T[w]=C[1],S.push(C[2])}o.push(x),s.push(T),l.push([y,S])}if(r){var D=o;o=s,s=D}return[o,s,function(L){return L.map(function(B,I){var U=B.map(function($,X){return l[I][1][X]($)}).join(",");return l[I][0]==="matrix"&&U.split(",").length===16&&(l[I][0]="matrix3d"),l[I][0]==="matrix3d"&&U.split(",").length===6&&(l[I][0]="matrix"),"".concat(l[I][0],"(").concat(U,")")}).join(" ")}]}var TYe=mc(function(t){if($i(t)){if(t==="text-anchor")return[Ds(0,"px"),Ds(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[FY(Bae(e[0])),FY(Bae(e[1]))]}return[Ds(t[0]||0,"px"),Ds(t[1]||0,"px")]});function Bae(t){return t==="center"?"50%":t==="left"||t==="top"?"0%":t==="right"||t==="bottom"?"100%":t}var YQ=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:Jn.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:Jn.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:Jn.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:Jn.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:Jn.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:Jn.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:Jn.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:Jn.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:Jn.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:Jn.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:Jn.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:Jn.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:Jn.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:Jn.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:Jn.FILTER},{n:"clipPath",syntax:Jn.DEFINED_PATH},{n:"textPath",syntax:Jn.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:Jn.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:Jn.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:Jn.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:Jn.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:Jn.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:Jn.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:Jn.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:Jn.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:Jn.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:Jn.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:Jn.COORDINATE},{n:"y1",int:!0,l:!0,syntax:Jn.COORDINATE},{n:"z1",int:!0,l:!0,syntax:Jn.COORDINATE},{n:"x2",int:!0,l:!0,syntax:Jn.COORDINATE},{n:"y2",int:!0,l:!0,syntax:Jn.COORDINATE},{n:"z2",int:!0,l:!0,syntax:Jn.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:Jn.PATH,p:50},{n:"points",int:!0,l:!0,syntax:Jn.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:Jn.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:Jn.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:Jn.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:Jn.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:Jn.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:Jn.NUMBER,d:function(e){return e===nr.PATH||e===nr.POLYGON||e===nr.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:Jn.MARKER},{n:"markerEnd",syntax:Jn.MARKER},{n:"markerMid",syntax:Jn.MARKER},{n:"markerStartOffset",syntax:Jn.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:Jn.LENGTH,l:!0,int:!0,d:"0"}],AYe=new Set(YQ.filter(function(t){return!!t.l}).map(function(t){return t.n})),h2e={},wYe=(function(){function t(e){var n=this;it(this,t),this.runtime=e,YQ.forEach(function(r){n.registerMetadata(r)})}return at(t,[{key:"registerMetadata",value:function(n){[n.n].concat(Dr(n.a||[])).forEach(function(r){h2e[r]=n})}},{key:"getPropertySyntax",value:function(n){return this.runtime.CSSPropertySyntaxFactory[n]}},{key:"processProperties",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{forceUpdateGeometry:!1};Object.assign(n.attributes,r);var a=n.parsedStyle.clipPath,o=n.parsedStyle.offsetPath;OYe(n,r);var s=!!i.forceUpdateGeometry;if(!s){for(var l in r)if(AYe.has(l)){s=!0;break}}var c=d2e(n);c.has("fill")&&r.fill&&(n.parsedStyle.fill=QE(r.fill)),c.has("stroke")&&r.stroke&&(n.parsedStyle.stroke=QE(r.stroke)),c.has("shadowColor")&&r.shadowColor&&(n.parsedStyle.shadowColor=QE(r.shadowColor)),c.has("filter")&&r.filter&&(n.parsedStyle.filter=ZVe(r.filter)),c.has("radius")&&!Kn(r.radius)&&(n.parsedStyle.radius=Cae(r.radius,4)),c.has("lineDash")&&!Kn(r.lineDash)&&(n.parsedStyle.lineDash=Cae(r.lineDash,"even")),c.has("points")&&r.points&&(n.parsedStyle.points=fYe(r.points)),c.has("d")&&r.d===""&&(n.parsedStyle.d=ze({},KOe)),c.has("d")&&r.d&&(n.parsedStyle.d=u2e(r.d)),c.has("textTransform")&&r.textTransform&&this.runtime.CSSPropertySyntaxFactory[Jn.TEXT_TRANSFORM].calculator(null,null,{value:r.textTransform},n,null),c.has("clipPath")&&!mr(r.clipPath)&&this.runtime.CSSPropertySyntaxFactory[Jn.DEFINED_PATH].calculator("clipPath",a,r.clipPath,n,this.runtime),c.has("offsetPath")&&r.offsetPath&&this.runtime.CSSPropertySyntaxFactory[Jn.DEFINED_PATH].calculator("offsetPath",o,r.offsetPath,n,this.runtime),c.has("transform")&&r.transform&&(n.parsedStyle.transform=dYe(r.transform)),c.has("transformOrigin")&&r.transformOrigin&&(n.parsedStyle.transformOrigin=TYe(r.transformOrigin)),c.has("markerStart")&&r.markerStart&&(n.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[Jn.MARKER].calculator(null,r.markerStart,r.markerStart,null,null)),c.has("markerEnd")&&r.markerEnd&&(n.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[Jn.MARKER].calculator(null,r.markerEnd,r.markerEnd,null,null)),c.has("markerMid")&&r.markerMid&&(n.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[Jn.MARKER].calculator("",r.markerMid,r.markerMid,null,null)),c.has("zIndex")&&!Kn(r.zIndex)&&this.runtime.CSSPropertySyntaxFactory[Jn.Z_INDEX].postProcessor(n),c.has("offsetDistance")&&!Kn(r.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[Jn.OFFSET_DISTANCE].postProcessor(n),c.has("transform")&&r.transform&&this.runtime.CSSPropertySyntaxFactory[Jn.TRANSFORM].postProcessor(n),c.has("transformOrigin")&&r.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[Jn.TRANSFORM_ORIGIN].postProcessor(n),s&&(n.geometry.dirty=!0,n.dirty(!0,!0),i.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(n))}},{key:"updateGeometry",value:function(n){var r=n.nodeName,i=this.runtime.geometryUpdaterFactory[r];if(i){var a=n.geometry;a.contentBounds||(a.contentBounds=new tf),a.renderBounds||(a.renderBounds=new tf);var o=n.parsedStyle,s=i.update(o,n),l=s.cx,c=l===void 0?0:l,u=s.cy,f=u===void 0?0:u,h=s.cz,d=h===void 0?0:h,p=s.hwidth,g=p===void 0?0:p,v=s.hheight,y=v===void 0?0:v,_=s.hdepth,E=_===void 0?0:_,x=[Math.abs(g),Math.abs(y),E],T=o.stroke,S=o.lineWidth,w=S===void 0?1:S,C=o.increasedLineWidthForHitTesting,D=C===void 0?0:C,L=o.shadowType,B=L===void 0?"outer":L,I=o.shadowColor,U=o.filter,$=U===void 0?[]:U,X=o.transformOrigin,N=[c,f,d];a.contentBounds.update(N,x);var M=r===nr.POLYLINE||r===nr.POLYGON||r===nr.PATH?Math.SQRT2:.5,k=T&&!T.isNone;if(k){var z=((w||0)+(D||0))*M;x[0]+=z,x[1]+=z}if(a.renderBounds.update(N,x),I&&B&&B!=="inner"){var j=a.renderBounds,V=j.min,Q=j.max,ee=o.shadowBlur,re=o.shadowOffsetX,ne=o.shadowOffsetY,le=ee||0,ue=re||0,ve=ne||0,Se=V[0]-le+ue,Re=Q[0]+le+ue,Xe=V[1]-le+ve,Le=Q[1]+le+ve;V[0]=Math.min(V[0],Se),Q[0]=Math.max(Q[0],Re),V[1]=Math.min(V[1],Xe),Q[1]=Math.max(Q[1],Le),a.renderBounds.setMinMax(V,Q)}$.forEach(function(At){var zt=At.name,rn=At.params;if(zt==="blur"){var Wn=rn[0].value;a.renderBounds.update(a.renderBounds.center,cf(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[Wn,Wn,0]))}else if(zt==="drop-shadow"){var Sn=rn[0].value,In=rn[1].value,de=rn[2].value,sr=a.renderBounds,zr=sr.min,st=sr.max,Ft=zr[0]-de+Sn,An=st[0]+de+Sn,wn=zr[1]-de+In,$n=st[1]+de+In;zr[0]=Math.min(zr[0],Ft),st[0]=Math.max(st[0],An),zr[1]=Math.min(zr[1],wn),st[1]=Math.max(st[1],$n),a.renderBounds.setMinMax(zr,st)}}),n.geometry.dirty=!1;var Lt=g<0,xt=y<0,dt=(Lt?-1:1)*(X?yd(X[0],0,n,!0):0),Bt=(xt?-1:1)*(X?yd(X[1],1,n,!0):0);(dt||Bt)&&n.setOrigin(dt,Bt)}}},{key:"updateSizeAttenuation",value:function(n,r){n.style.isSizeAttenuation?(n.style.rawLineWidth||(n.style.rawLineWidth=n.style.lineWidth),n.style.lineWidth=(n.style.rawLineWidth||1)/r,n.nodeName===nr.CIRCLE&&(n.style.rawR||(n.style.rawR=n.style.r),n.style.r=(n.style.rawR||1)/r)):(n.style.rawLineWidth&&(n.style.lineWidth=n.style.rawLineWidth,delete n.style.rawLineWidth),n.nodeName===nr.CIRCLE&&n.style.rawR&&(n.style.r=n.style.rawR,delete n.style.rawR))}}])})();function OYe(t,e){var n=d2e(t);for(var r in e)n.has(r)&&(t.parsedStyle[r]=e[r])}function d2e(t){return t.constructor.PARSED_STYLE_LIST}var CYe=(function(){function t(){it(this,t),this.mixer=WQ}return at(t,[{key:"calculator",value:function(n,r,i,a){return Mh(i)}}])})(),RYe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a,o){return i instanceof av&&(i=null),o.sceneGraphService.updateDisplayObjectDependency(n,r,i,a),n==="clipPath"&&a.forEach(function(s){s.childNodes.length===0&&o.sceneGraphService.dirtyToRoot(s)}),i}}])})(),MYe=(function(){function t(){it(this,t),this.parser=QE,this.mixer=HVe}return at(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof av?i.value==="none"?e2e:t2e:i}}])})(),PYe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i){return i instanceof av?[]:i}}])})();function Fae(t){var e=t.parsedStyle,n=e.fontSize;return Kn(n)?null:n}var zY=(function(){function t(){it(this,t),this.mixer=WQ}return at(t,[{key:"calculator",value:function(n,r,i,a,o){if(Ln(i))return i;if(ts.isRelativeUnit(i.unit)){if(i.unit===or.kPercentage)return 0;if(i.unit===or.kEms){if(a.parentNode){var s=Fae(a.parentNode);if(s)return s*=i.value,s}return 0}if(i.unit===or.kRems){var l;if(a!=null&&(l=a.ownerDocument)!==null&&l!==void 0&&l.documentElement){var c=Fae(a.ownerDocument.documentElement);if(c)return c*=i.value,c}return 0}}else return i.value}}])})(),NYe=(function(){function t(){it(this,t),this.mixer=l2e}return at(t,[{key:"calculator",value:function(n,r,i){return i.map(function(a){return a.value})}}])})(),IYe=(function(){function t(){it(this,t),this.mixer=l2e}return at(t,[{key:"calculator",value:function(n,r,i){return i.map(function(a){return a.value})}}])})(),LYe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a){var o;i instanceof av&&(i=null);var s=(o=i)===null||o===void 0?void 0:o.cloneNode(!0);return s&&(s.style.isMarker=!0),s}}])})(),kYe=(function(){function t(){it(this,t),this.mixer=WQ}return at(t,[{key:"calculator",value:function(n,r,i){return i.value}}])})(),DYe=(function(){function t(){it(this,t),this.mixer=VQ(0,1)}return at(t,[{key:"calculator",value:function(n,r,i){return i.value}},{key:"postProcessor",value:function(n){var r=n.parsedStyle,i=r.offsetPath,a=r.offsetDistance;if(i){var o=i.nodeName;if(o===nr.LINE||o===nr.PATH||o===nr.POLYLINE){var s=i.getPoint(a);s&&n.setLocalPosition(s.x,s.y)}}}}])})(),BYe=(function(){function t(){it(this,t),this.mixer=VQ(0,1)}return at(t,[{key:"calculator",value:function(n,r,i){return i.value}}])})(),FYe=(function(){function t(){it(this,t),this.parser=u2e,this.mixer=uYe}return at(t,[{key:"calculator",value:function(n,r,i){return i instanceof av&&i.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new GA(0,0,0,0)}:i}}])})(),UYe=at(function t(){it(this,t),this.mixer=hYe}),jYe=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.mixer=VQ(0,1/0),n}return Sr(e,t),at(e)})(zY),zYe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof av?i.value==="unset"?"":i.value:"".concat(i)}},{key:"postProcessor",value:function(n){n.nodeValue="".concat(n.parsedStyle.text)||""}}])})(),$Ye=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a){var o=a.getAttribute("text");if(o){var s=o;i.value==="capitalize"?s=o.charAt(0).toUpperCase()+o.slice(1):i.value==="lowercase"?s=o.toLowerCase():i.value==="uppercase"&&(s=o.toUpperCase()),a.parsedStyle.text=s}return i.value}}])})(),c7=new WeakMap;function HYe(t,e,n){if(t){var r=typeof t=="string"?document.getElementById(t):t;c7.has(r)&&c7.get(r).destroy(n),c7.set(r,e)}}var p2e=typeof window<"u"&&typeof window.document<"u";function GYe(t){return!!t.getAttribute}function WYe(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;g2e(t[i],e)<0?n=i+1:r=i}return n}function g2e(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(e)}}return n-r}function VYe(t){var e=t;do{var n,r=(n=e.parsedStyle)===null||n===void 0?void 0:n.clipPath;if(r)return e;e=e.parentElement}while(e!==null);return null}function v2e(t,e){if(p2e)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function YYe(t){var e=v2e(t,"width");return e==="auto"?t.offsetWidth:parseFloat(e)}function XYe(t){var e=v2e(t,"height");return e==="auto"?t.offsetHeight:parseFloat(e)}var qYe=1,ZYe={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},$Y=typeof performance=="object"&&performance.now?performance:Date;function wD(t){return t.nodeName===nr.FRAGMENT?!0:t.getRootNode().nodeName===nr.FRAGMENT}var KYe=1,QYe=function(){return KYe++},Pm=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},JYe=Date.now(),eXe=function(){return Pm.performance&&typeof Pm.performance.now=="function"?Pm.performance.now():Date.now()-JYe},aC={},Uae=Date.now(),tXe=function(e){if(typeof e!="function")throw new TypeError("".concat(e," is not a function"));var n=Date.now(),r=n-Uae,i=r>16?0:16-r,a=QYe();return aC[a]=e,Object.keys(aC).length>1||setTimeout(function(){Uae=n;var o=aC;aC={},Object.keys(o).forEach(function(s){return o[s](eXe())})},i),a},nXe=function(e){delete aC[e]},rXe=["","webkit","moz","ms","o"],m2e=function(e){return typeof e!="string"?tXe:e===""?Pm.requestAnimationFrame:Pm["".concat(e,"RequestAnimationFrame")]},iXe=function(e){return typeof e!="string"?nXe:e===""?Pm.cancelAnimationFrame:Pm["".concat(e,"CancelAnimationFrame")]||Pm["".concat(e,"CancelRequestAnimationFrame")]},aXe=function(e,n){for(var r=0;e[r]!==void 0;){if(n(e[r]))return e[r];r+=1}},y2e=aXe(rXe,function(t){return!!m2e(t)}),XQ=m2e(y2e),_2e=iXe(y2e);Pm.requestAnimationFrame=XQ;Pm.cancelAnimationFrame=_2e;var oXe=(function(){function t(){it(this,t),this.callbacks=[]}return at(t,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(n,r){this.callbacks.push(r)}},{key:"promise",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Promise.all(this.callbacks.map(function(a){return a.apply(void 0,r)}))}}])})(),sXe=(function(){function t(){it(this,t),this.callbacks=[]}return at(t,[{key:"tapPromise",value:function(n,r){this.callbacks.push(r)}},{key:"promise",value:(function(){var e=kt(Zs().mark(function r(){var i,a,o,s,l=arguments;return Zs().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.callbacks.length){c.next=6;break}return c.next=1,(i=this.callbacks)[0].apply(i,l);case 1:a=c.sent,o=0;case 2:if(!(o<this.callbacks.length-1)){c.next=5;break}return s=this.callbacks[o],c.next=3,s(a);case 3:a=c.sent;case 4:o++,c.next=2;break;case 5:return c.abrupt("return",a);case 6:return c.abrupt("return",null);case 7:case"end":return c.stop()}},r,this)}));function n(){return e.apply(this,arguments)}return n})()}])})(),kf=(function(){function t(){it(this,t),this.callbacks=[]}return at(t,[{key:"tap",value:function(n,r){this.callbacks.push(r)}},{key:"call",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(o){o.apply(void 0,a)})}}])})(),u7=(function(){function t(){it(this,t),this.callbacks=[]}return at(t,[{key:"tap",value:function(n,r){this.callbacks.push(r)}},{key:"call",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,o=this.callbacks[0].apply(void 0,a),s=0;s<this.callbacks.length-1;s++){var l=this.callbacks[s];o=l(o)}return o}return null}}])})(),lXe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],cXe=/([\"\'])[^\'\"]+\1/;function uXe(t){for(var e=t.fontSize,n=e===void 0?16:e,r=t.fontFamily,i=r===void 0?"sans-serif":r,a=t.fontStyle,o=a===void 0?"normal":a,s=t.fontVariant,l=s===void 0?"normal":s,c=t.fontWeight,u=c===void 0?"normal":c,f=Ln(n)&&"".concat(n,"px")||"16px",h=i.split(","),d=h.length-1;d>=0;d--){var p=h[d].trim();!cXe.test(p)&&lXe.indexOf(p)<0&&(p='"'.concat(p,'"')),h[d]=p}return"".concat(o," ").concat(l," ").concat(u," ").concat(f," ").concat(h.join(","))}function f7(t,e,n){return Pu(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var Gl=Zr(),fXe=Zr(),hXe={scale:function(e){Sd(Gl,[e[0].value,e[1].value,1])},scaleX:function(e){Sd(Gl,[e[0].value,1,1])},scaleY:function(e){Sd(Gl,[1,e[0].value,1])},scaleZ:function(e){Sd(Gl,[1,1,e[0].value])},scale3d:function(e){Sd(Gl,[e[0].value,e[1].value,e[2].value])},translate:function(e){rf(Gl,[e[0].value,e[1].value,0])},translateX:function(e){rf(Gl,[e[0].value,0,0])},translateY:function(e){rf(Gl,[0,e[0].value,0])},translateZ:function(e){rf(Gl,[0,0,e[0].value])},translate3d:function(e){rf(Gl,[e[0].value,e[1].value,e[2].value])},rotate:function(e){RR(Gl,ns(Mh(e[0])))},rotateX:function(e){pQ(Gl,ns(Mh(e[0])))},rotateY:function(e){gQ(Gl,ns(Mh(e[0])))},rotateZ:function(e){RR(Gl,ns(Mh(e[0])))},rotate3d:function(e){dQ(Gl,ns(Mh(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){f7(Gl,ns(e[0].value),ns(e[1].value))},skewX:function(e){f7(Gl,ns(e[0].value),0)},skewY:function(e){f7(Gl,0,ns(e[0].value))},matrix:function(e){CR(Gl,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){CR.apply(twe,[Gl].concat(Dr(e.map(function(n){return n.value}))))}},dXe=yr(1,1,1),pXe=Pr(),jae={translate:function(e,n){Cn.sceneGraphService.setLocalScale(e,dXe,!1),Cn.sceneGraphService.setLocalEulerAngles(e,pXe,void 0,void 0,!1),Cn.sceneGraphService.setLocalPosition(e,[n[0].value,n[1].value,0],!1),Cn.sceneGraphService.dirtyLocalTransform(e,e.transformable)}};function gXe(t,e){if(t.length){if(t.length===1&&jae[t[0].t]){jae[t[0].t](e,t[0].d);return}for(var n=Pu(fXe),r=0;r<t.length;r++){var i=t[r],a=i.t,o=i.d,s=hXe[a];s&&(s(o),VF(n,n,Gl))}e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var vXe=(function(){function t(){it(this,t),this.parser=pYe,this.mixer=SYe}return at(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof av?[]:i}},{key:"postProcessor",value:function(n){gXe(n.parsedStyle.transform,n)}}])})(),mXe=(function(){function t(){it(this,t)}return at(t,[{key:"postProcessor",value:function(n){var r=n.parsedStyle.transformOrigin;r[0].unit===or.kPixels&&r[1].unit===or.kPixels?n.setOrigin(r[0].value,r[1].value):n.getGeometryBounds()}}])})(),yXe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a){return i.value}},{key:"postProcessor",value:function(n){if(n.parentNode){var r=n.parentNode,i=r.renderable,a=r.sortable;i&&r.dirty(),a&&(a.dirty=!0,a.dirtyReason=xD.Z_INDEX_CHANGED)}}}])})(),_Xe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){var i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.r,c=l===void 0?0:l;return{cx:a,cy:s,hwidth:c,hheight:c}}}])})(),bXe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){var i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.rx,c=l===void 0?0:l,u=n.ry,f=u===void 0?0:u;return{cx:a,cy:s,hwidth:c,hheight:f}}}])})(),EXe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n){var r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=Math.min(r,a),l=Math.max(r,a),c=Math.min(i,o),u=Math.max(i,o),f=l-s,h=u-c,d=f/2,p=h/2;return{cx:s+d,cy:c+p,hwidth:d,hheight:p}}}])})(),xXe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n){var r=n.d,i=r.rect,a=i.x,o=i.y,s=i.width,l=i.height,c=s/2,u=l/2;return{cx:a+c,cy:o+u,hwidth:c,hheight:u}}}])})(),SXe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n){if(n.points&&Us(n.points.points)){var r=n.points.points,i=Math.min.apply(Math,Dr(r.map(function(h){return h[0]}))),a=Math.max.apply(Math,Dr(r.map(function(h){return h[0]}))),o=Math.min.apply(Math,Dr(r.map(function(h){return h[1]}))),s=Math.max.apply(Math,Dr(r.map(function(h){return h[1]}))),l=a-i,c=s-o,u=l/2,f=c/2;return{cx:i+u,cy:o+f,hwidth:u,hheight:f}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])})(),TXe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,l=n.src,c=n.width,u=c===void 0?0:c,f=n.height,h=f===void 0?0:f,d=u,p=h;return l&&!$i(l)&&(d||(d=l.width,n.width=d),p||(p=l.height,n.height=p)),{cx:a+d/2,cy:s+p/2,hwidth:d/2,hheight:p/2}}}])})(),AXe=(function(){function t(e){it(this,t),this.globalRuntime=e}return at(t,[{key:"isReadyToMeasure",value:function(n,r){var i=n.text;return i}},{key:"update",value:function(n,r){var i,a=n.text,o=n.textAlign,s=o===void 0?"start":o,l=n.lineWidth,c=l===void 0?1:l,u=n.textBaseline,f=u===void 0?"alphabetic":u,h=n.dx,d=h===void 0?0:h,p=n.dy,g=p===void 0?0:p,v=n.x,y=v===void 0?0:v,_=n.y,E=_===void 0?0:_;if(!this.isReadyToMeasure(n,r))return n.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var x=(r==null||(i=r.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getConfig())||{},T=x.offscreenCanvas,S=this.globalRuntime.textService.measureText(a,n,T);n.metrics=S;var w=S.width,C=S.height,D=w/2,L=C/2,B=y+D;s==="center"||s==="middle"?B+=c/2-D:(s==="right"||s==="end")&&(B+=c-D*2);var I=E-L;return f==="middle"?I+=L:f==="top"||f==="hanging"?I+=L*2:f==="alphabetic"||(f==="bottom"||f==="ideographic")&&(I+=0),d&&(B+=d),g&&(I+=g),{cx:B,cy:I,hwidth:D,hheight:L}}}])})(),wXe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){return{cx:0,cy:0,hwidth:0,hheight:0}}}])})(),OXe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,l=n.width,c=l===void 0?0:l,u=n.height,f=u===void 0?0:u;return{cx:a+c/2,cy:s+f/2,hwidth:c/2,hheight:f/2}}}])})(),h4=(function(){function t(e){it(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new af,this.page=new af,this.canvas=new af,this.viewport=new af,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return at(t,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(jo)}}])})(),b2e=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.client=new af,n.movement=new af,n.offset=new af,n.global=new af,n.screen=new af,n}return Sr(e,t),at(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(r){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(r)}},{key:"initMouseEvent",value:function(){throw new Error(jo)}}])})(h4),HY=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.width=0,n.height=0,n.isPrimary=!1,n}return Sr(e,t),at(e,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])})(b2e),GY=(function(t){function e(){return it(this,e),Ar(this,e,arguments)}return Sr(e,t),at(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])})(b2e),Kc=(function(t){function e(n,r){var i;return it(this,e),i=Ar(this,e,[null]),i.type=n,i.detail=r,Object.assign(i,r),i}return Sr(e,t),at(e)})(h4),E2e=(function(){function t(){it(this,t),this.emitter=new Cw}return at(t,[{key:"on",value:function(n,r,i){return this.addEventListener(n,r,i),this}},{key:"addEventListener",value:function(n,r,i){var a=!1,o=!1;if(fx(i))a=i;else if(i){var s=i.capture;a=s===void 0?!1:s;var l=i.once;o=l===void 0?!1:l}a&&(n+="capture"),r=ur(r)?r:r.handleEvent;var c=ur(r)?void 0:r;return o?this.emitter.once(n,r,c):this.emitter.on(n,r,c),this}},{key:"off",value:function(n,r,i){return n?this.removeEventListener(n,r,i):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var n;(n=this.emitter)===null||n===void 0||n.removeAllListeners()}},{key:"removeEventListener",value:function(n,r,i){var a;if(!this.emitter)return this;var o=fx(i)?i:i?.capture;o&&(n+="capture"),r=ur(r)?r:(a=r)===null||a===void 0?void 0:a.handleEvent;var s=ur(r)?void 0:r;return this.emitter.off(n,r,s),this}},{key:"emit",value:function(n,r){this.dispatchEvent(new Kc(n,r))}},{key:"dispatchEventToSelf",value:function(n){n.target||(n.target=this),n.currentTarget=this,this.emitter.emit(n.type,n)}},{key:"dispatchEvent",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(n),!0;var a;if(this.document)a=this;else if(this.defaultView)a=this.defaultView;else{var o;a=(o=this.ownerDocument)===null||o===void 0?void 0:o.defaultView}if(a){if(n.manager=a.getEventService(),!n.manager)return!1;n.defaultPrevented=!1,n.path?n.path.length=0:n.page=[],r||(n.target=this),n.manager.dispatchEvent(n,n.type,r)}else this.dispatchEventToSelf(n);return!n.defaultPrevented}}])})(),ol=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n.destroyed=!1,n}return Sr(e,t),at(e,[{key:"textContent",get:function(){var r="";this.nodeName===nr.TEXT&&(r+=this.style.text);var i=Td(this.childNodes),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.nodeName===nr.TEXT?r+=o.nodeValue:r+=o.textContent}}catch(s){i.e(s)}finally{i.f()}return r},set:function(r){var i=this;this.childNodes.slice().forEach(function(a){i.removeChild(a)}),this.nodeName===nr.TEXT&&(this.style.text="".concat(r))}},{key:"getRootNode",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(r):r.composed&&this.host?this.host.getRootNode(r):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(r){throw new Error(jo)}},{key:"lookupNamespaceURI",value:function(r){throw new Error(jo)}},{key:"lookupPrefix",value:function(r){throw new Error(jo)}},{key:"normalize",value:function(){throw new Error(jo)}},{key:"isEqualNode",value:function(r){return this===r}},{key:"isSameNode",value:function(r){return this.isEqualNode(r)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(r){if(r===this)return 0;for(var i=r,a=this,o=[i],s=[a];(l=i.parentNode)!==null&&l!==void 0?l:a.parentNode;){var l;i=i.parentNode?(o.push(i.parentNode),i.parentNode):i,a=a.parentNode?(s.push(a.parentNode),a.parentNode):a}if(i!==a)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var c=o.length>s.length?o:s,u=c===o?s:o;if(c[c.length-u.length]===u[0])return c===o?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var f=c.length-u.length,h=u.length-1;h>=0;h--){var d=u[h],p=c[f+h];if(p!==d){var g=d.parentNode.childNodes;return g.indexOf(d)<g.indexOf(p)?u===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:c===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(r){return this.contains(r)}},{key:"contains",value:function(r){for(var i=r;i&&this!==i;)i=i.parentNode;return!!i}},{key:"getAncestor",value:function(r){for(var i=this;r>0&&i;)i=i.parentNode,r--;return i}},{key:"forEach",value:function(r){for(var i=[this];i.length>0;){var a=i.pop(),o=r(a);if(o===!1)break;for(var s=a.childNodes.length-1;s>=0;s--)i.push(a.childNodes[s])}}}],[{key:"isNode",value:function(r){return!!r.childNodes}}])})(E2e);ol.DOCUMENT_POSITION_DISCONNECTED=1;ol.DOCUMENT_POSITION_PRECEDING=2;ol.DOCUMENT_POSITION_FOLLOWING=4;ol.DOCUMENT_POSITION_CONTAINS=8;ol.DOCUMENT_POSITION_CONTAINED_BY=16;ol.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var CXe=2048,RXe=(function(){function t(e,n){var r=this;it(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Zr(),this.tmpVec3=Pr(),this.onPointerDown=function(i){var a=r.createPointerEvent(i);if(r.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")r.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;r.dispatchEvent(a,o?"rightdown":"mousedown")}var s=r.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=a.composedPath(),r.freeEvent(a)},this.onPointerUp=function(i){var a=$Y.now(),o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(o,"pointerup"),o.pointerType==="touch")r.dispatchEvent(o,"touchend");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;r.dispatchEvent(o,s?"rightup":"mouseup")}var l=r.trackingData(i.pointerId),c=r.findMountedTarget(l.pressTargetsByButton[i.button]),u=c;if(c&&!o.composedPath().includes(c)){for(var f=c;f&&!o.composedPath().includes(f);){if(o.currentTarget=f,r.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch")r.notifyTarget(o,"touchendoutside");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var h=o.button===2;r.notifyTarget(o,h?"rightupoutside":"mouseupoutside")}ol.isNode(f)&&(f=f.parentNode)}delete l.pressTargetsByButton[i.button],u=f}if(u){var d,p=r.clonePointerEvent(o,"click");p.target=u,p.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:p.target,timeStamp:a});var g=r.context.renderingContext.root.ownerDocument.defaultView,v=l.clicksByButton[i.button];v.target===p.target&&a-v.timeStamp<g.getConfig().dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=p.target,v.timeStamp=a,p.detail=v.clickCount,(d=o.detail)!==null&&d!==void 0&&d.preventClick||(!r.context.config.useNativeClickEvent&&(p.pointerType==="mouse"||p.pointerType==="touch")&&r.dispatchEvent(p,"click"),r.dispatchEvent(p,"pointertap")),r.freeEvent(p)}r.freeEvent(o)},this.onPointerMove=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),o=a.pointerType==="mouse"||a.pointerType==="pen",s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.overTargets);if(s.overTargets&&l!==a.target){var c=i.type==="mousemove"?"mouseout":"pointerout",u=r.createPointerEvent(i,c,l||void 0);if(r.dispatchEvent(u,"pointerout"),o&&r.dispatchEvent(u,"mouseout"),!a.composedPath().includes(l)){var f=r.createPointerEvent(i,"pointerleave",l||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!a.composedPath().includes(f.target);)f.currentTarget=f.target,r.notifyTarget(f),o&&r.notifyTarget(f,"mouseleave"),ol.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}if(l!==a.target){var h=i.type==="mousemove"?"mouseover":"pointerover",d=r.clonePointerEvent(a,h);r.dispatchEvent(d,"pointerover"),o&&r.dispatchEvent(d,"mouseover");for(var p=l&&ol.isNode(l)&&l.parentNode;p&&p!==(ol.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&p!==a.target;)p=p.parentNode;var g=!p||p===(ol.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(g){var v=r.clonePointerEvent(a,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==l&&v.target!==(ol.isNode(r.rootTarget)&&r.rootTarget.parentNode);)v.currentTarget=v.target,r.notifyTarget(v),o&&r.notifyTarget(v,"mouseenter"),ol.isNode(v.target)&&(v.target=v.target.parentNode);r.freeEvent(v)}r.freeEvent(d)}r.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&r.dispatchEvent(a,"touchmove"),o&&(r.dispatchEvent(a,"mousemove"),r.cursor=r.getCursor(a.target)),s.overTargets=a.composedPath(),r.freeEvent(a)},this.onPointerOut=function(i){var a=r.trackingData(i.pointerId);if(a.overTargets){var o=i.pointerType==="mouse"||i.pointerType==="pen",s=r.findMountedTarget(a.overTargets),l=r.createPointerEvent(i,"pointerout",s||void 0);r.dispatchEvent(l),o&&r.dispatchEvent(l,"mouseout");var c=r.createPointerEvent(i,"pointerleave",s||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(ol.isNode(r.rootTarget)&&r.rootTarget.parentNode);)c.currentTarget=c.target,r.notifyTarget(c),o&&r.notifyTarget(c,"mouseleave"),ol.isNode(c.target)&&(c.target=c.target.parentNode);a.overTargets=null,r.freeEvent(l),r.freeEvent(c)}r.cursor=null},this.onPointerOver=function(i){var a=r.trackingData(i.pointerId),o=r.createPointerEvent(i),s=o.pointerType==="mouse"||o.pointerType==="pen";r.dispatchEvent(o,"pointerover"),s&&r.dispatchEvent(o,"mouseover"),o.pointerType==="mouse"&&(r.cursor=r.getCursor(o.target));var l=r.clonePointerEvent(o,"pointerenter");for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(ol.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),s&&r.notifyTarget(l,"mouseenter"),ol.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=o.composedPath(),r.freeEvent(o),r.freeEvent(l)},this.onPointerUpOutside=function(i){var a=r.trackingData(i.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[i.button]),s=r.createPointerEvent(i);if(o){for(var l=o;l;)s.currentTarget=l,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&r.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),ol.isNode(l)&&(l=l.parentNode);delete a.pressTargetsByButton[i.button]}r.freeEvent(s)},this.onWheel=function(i){var a=r.createWheelEvent(i);r.dispatchEvent(a),r.freeEvent(a)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var a=r.createPointerEvent(i);r.dispatchEvent(a),r.freeEvent(a)}},this.onPointerCancel=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(a),r.freeEvent(a)},this.globalRuntime=e,this.context=n}return at(t,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var n=this.context.contextService.getBoundingClientRect(),r=1,i=1,a=this.context.contextService.getDomElement();if(a&&n){var o=a.offsetWidth,s=a.offsetHeight;o&&s&&(r=n.width/o,i=n.height/s)}return{scaleX:r,scaleY:i,bbox:n}}},{key:"client2Viewport",value:function(n){var r=this.getScale(),i=r.scaleX,a=r.scaleY,o=r.bbox;return new af((n.x-(o?.left||0))/i,(n.y-(o?.top||0))/a)}},{key:"viewport2Client",value:function(n){var r=this.getScale(),i=r.scaleX,a=r.scaleY,o=r.bbox;return new af((n.x+(o?.left||0))*i,(n.y+(o?.top||0))*a)}},{key:"viewport2Canvas",value:function(n){var r=n.x,i=n.y,a=this.rootTarget.defaultView,o=a.getCamera(),s=this.context.config,l=s.width,c=s.height,u=o.getPerspectiveInverse(),f=o.getWorldTransform(),h=qa(this.tmpMatrix,f,u),d=Co(this.tmpVec3,r/l*2-1,(1-i/c)*2-1,0);return ka(d,d,h),new af(d[0],d[1])}},{key:"canvas2Viewport",value:function(n){var r=this.rootTarget.defaultView,i=r.getCamera(),a=i.getPerspective(),o=i.getViewTransform(),s=qa(this.tmpMatrix,a,o),l=Co(this.tmpVec3,n.x,n.y,0);ka(this.tmpVec3,this.tmpVec3,s);var c=this.context.config,u=c.width,f=c.height;return new af((l[0]+1)/2*u,(1-(l[1]+1)/2)*f)}},{key:"setPickHandler",value:function(n){this.pickHandler=n}},{key:"addEventMapping",value:function(n,r){this.mappingTable[n]||(this.mappingTable[n]=[]),this.mappingTable[n].push({fn:r,priority:0}),this.mappingTable[n].sort(function(i,a){return i.priority-a.priority})}},{key:"mapEvent",value:function(n){if(this.rootTarget){var r=this.mappingTable[n.type];if(r)for(var i=0,a=r.length;i<a;i++)r[i].fn(n);else console.warn("[EventService]: Event mapping not defined for ".concat(n.type))}}},{key:"dispatchEvent",value:function(n,r,i){if(!i)n.propagationStopped=!1,n.propagationImmediatelyStopped=!1,this.propagate(n,r);else{n.eventPhase=n.AT_TARGET;var a=this.rootTarget.defaultView||null;n.currentTarget=a,this.notifyListeners(n,r)}}},{key:"propagate",value:function(n,r){if(n.target){var i=n.composedPath();n.eventPhase=n.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(n.currentTarget=i[a],this.notifyTarget(n,r),n.propagationStopped||n.propagationImmediatelyStopped)return;if(n.eventPhase=n.AT_TARGET,n.currentTarget=n.target,this.notifyTarget(n,r),!(n.propagationStopped||n.propagationImmediatelyStopped)){var o=i.indexOf(n.currentTarget);n.eventPhase=n.BUBBLING_PHASE;for(var s=o+1;s<i.length;s++)if(n.currentTarget=i[s],this.notifyTarget(n,r),n.propagationStopped||n.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(n){var r=[n],i=this.rootTarget.defaultView||null;if(i&&i===n)return r.unshift(i.document),r;for(var a=0;a<CXe&&n!==this.rootTarget;a++)ol.isNode(n)&&n.parentNode&&(r.push(n.parentNode),n=n.parentNode);return i&&r.push(i),r}},{key:"hitTest",value:function(n){var r=n.viewportX,i=n.viewportY,a=this.context.config,o=a.width,s=a.height,l=a.disableHitTesting;return r<0||i<0||r>o||i>s?null:!l&&this.pickHandler(n)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(n,r){var i,a=r?.target;if((i=a)!==null&&i!==void 0&&i.shadowRoot&&(a=r.composedPath()[0]),a){if(a===n)return!0;if(n&&n.contains)return n.contains(a)}return r!=null&&r.composedPath?r.composedPath().indexOf(n)>-1:!1}},{key:"getExistedHTML",value:function(n){if(n.nativeEvent.composedPath)for(var r=0,i=n.nativeEvent.composedPath();r<i.length;r++){var a=i[r],o=this.nativeHTMLMap.get(a);if(o)return o}return null}},{key:"pickTarget",value:function(n){return this.hitTest({clientX:n.clientX,clientY:n.clientY,viewportX:n.viewportX,viewportY:n.viewportY,x:n.canvasX,y:n.canvasY})}},{key:"createPointerEvent",value:function(n,r,i,a){var o=this.allocateEvent(HY);this.copyPointerData(n,o),this.copyMouseData(n,o),this.copyData(n,o),o.nativeEvent=n.nativeEvent,o.originalEvent=n;var s=this.getExistedHTML(o),l=this.context.contextService.getDomElement();return o.target=i??(s||this.isNativeEventFromCanvas(l,o.nativeEvent)&&this.pickTarget(o)||a),typeof r=="string"&&(o.type=r),o}},{key:"createWheelEvent",value:function(n){var r=this.allocateEvent(GY);this.copyWheelData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.nativeEvent=n.nativeEvent,r.originalEvent=n;var i=this.getExistedHTML(r),a=this.context.contextService.getDomElement();return r.target=i||this.isNativeEventFromCanvas(a,r.nativeEvent)&&this.pickTarget(r),r}},{key:"trackingData",value:function(n){return this.mappingState.trackingData[n]||(this.mappingState.trackingData[n]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[n]}},{key:"cloneWheelEvent",value:function(n){var r=this.allocateEvent(GY);return r.nativeEvent=n.nativeEvent,r.originalEvent=n.originalEvent,this.copyWheelData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.target=n.target,r.path=n.composedPath().slice(),r.type=n.type,r}},{key:"clonePointerEvent",value:function(n,r){var i=this.allocateEvent(HY);return i.nativeEvent=n.nativeEvent,i.originalEvent=n.originalEvent,this.copyPointerData(n,i),this.copyMouseData(n,i),this.copyData(n,i),i.target=n.target,i.path=n.composedPath().slice(),i.type=r??i.type,i}},{key:"copyPointerData",value:function(n,r){r.pointerId=n.pointerId,r.width=n.width,r.height=n.height,r.isPrimary=n.isPrimary,r.pointerType=n.pointerType,r.pressure=n.pressure,r.tangentialPressure=n.tangentialPressure,r.tiltX=n.tiltX,r.tiltY=n.tiltY,r.twist=n.twist}},{key:"copyMouseData",value:function(n,r){r.altKey=n.altKey,r.button=n.button,r.buttons=n.buttons,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,r.client.copyFrom(n.client),r.movement.copyFrom(n.movement),r.canvas.copyFrom(n.canvas),r.screen.copyFrom(n.screen),r.global.copyFrom(n.global),r.offset.copyFrom(n.offset)}},{key:"copyWheelData",value:function(n,r){r.deltaMode=n.deltaMode,r.deltaX=n.deltaX,r.deltaY=n.deltaY,r.deltaZ=n.deltaZ}},{key:"copyData",value:function(n,r){r.isTrusted=n.isTrusted,r.timeStamp=$Y.now(),r.type=n.type,r.detail=n.detail,r.view=n.view,r.page.copyFrom(n.page),r.viewport.copyFrom(n.viewport)}},{key:"allocateEvent",value:function(n){this.eventPool.has(n)||this.eventPool.set(n,[]);var r=this.eventPool.get(n).pop()||new n(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.target=null,r}},{key:"freeEvent",value:function(n){if(n.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var r=n.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(n)}},{key:"notifyTarget",value:function(n,r){r=r??n.type;var i=n.eventPhase===n.CAPTURING_PHASE||n.eventPhase===n.AT_TARGET?"".concat(r,"capture"):r;this.notifyListeners(n,i),n.eventPhase===n.AT_TARGET&&this.notifyListeners(n,r)}},{key:"notifyListeners",value:function(n,r){var i=n.currentTarget.emitter,a=i._events[r];if(a)if("fn"in a)a.once&&i.removeListener(r,a.fn,void 0,!0),a.fn.call(n.currentTarget||a.context,n);else for(var o=0;o<a.length&&!n.propagationImmediatelyStopped;o++)a[o].once&&i.removeListener(r,a[o].fn,void 0,!0),a[o].fn.call(n.currentTarget||a[o].context,n)}},{key:"findMountedTarget",value:function(n){if(!n)return null;for(var r=n[n.length-1],i=n.length-2;i>=0;i--){var a=n[i];if(a===this.rootTarget||ol.isNode(a)&&a.parentNode===r)r=n[i];else break}return r}},{key:"getCursor",value:function(n){for(var r=n;r;){var i=GYe(r)&&r.getAttribute("cursor");if(i)return i;r=ol.isNode(r)&&r.parentNode}}}])})(),MXe=(function(){function t(){it(this,t)}return at(t,[{key:"getOrCreateCanvas",value:function(n,r){if(this.canvas)return this.canvas;if(n||Cn.offscreenCanvas)this.canvas=n||Cn.offscreenCanvas,this.context=this.canvas.getContext("2d",ze({willReadFrequently:!0},r));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",ze({willReadFrequently:!0},r)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",ze({willReadFrequently:!0},r))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(n,r){return this.context?this.context:(this.getOrCreateCanvas(n,r),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])})(),rk=(function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t})({}),PXe=(function(){function t(e,n){it(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new kf,initAsync:new oXe,dirtycheck:new u7,cull:new u7,beginFrame:new kf,beforeRender:new kf,render:new kf,afterRender:new kf,endFrame:new kf,destroy:new kf,pick:new sXe,pickSync:new u7,pointerDown:new kf,pointerUp:new kf,pointerMove:new kf,pointerOut:new kf,pointerOver:new kf,pointerWheel:new kf,pointerCancel:new kf,click:new kf},this.globalRuntime=e,this.context=n}return at(t,[{key:"init",value:function(n){var r=this,i=ze(ze({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(a){a.apply(i,r.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,n()):this.hooks.initAsync.promise().then(function(){r.inited=!0,n()}).catch(function(a){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var n=this.context.config.renderer,r=n.getConfig(),i=r.enableDirtyRectangleRendering;return!i||this.context.renderingContext.renderReasons.has(rk.CAMERA_CHANGED)}},{key:"render",value:function(n,r,i){var a=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var s=o.renderReasons.size===1&&o.renderReasons.has(rk.CAMERA_CHANGED),l=!n.disableRenderHooks||!s;l&&this.renderDisplayObject(o.root,n,o),this.hooks.beginFrame.call(r),l&&o.renderListCurrentFrame.forEach(function(c){a.hooks.beforeRender.call(c),a.hooks.render.call(c),a.hooks.afterRender.call(c)}),this.hooks.endFrame.call(r),o.renderListCurrentFrame=[],o.renderReasons.clear(),i()}}},{key:"renderDisplayObject",value:function(n,r,i){var a=this,o=r.renderer.getConfig(),s=o.enableDirtyCheck,l=o.enableCulling;function c(g){var v=g.renderable,y=g.sortable,_=s?v.dirty||i.dirtyRectangleRenderingDisabled?g:null:g,E=null;_&&(E=l?a.hooks.cull.call(_,a.context.camera):_,E&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(E))),g.dirty(!1),y.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,y.dirty&&(a.sort(g,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0)}for(var u=[n];u.length>0;){var f,h=u.pop();c(h);for(var d=((f=h.sortable)===null||f===void 0||(f=f.sorted)===null||f===void 0?void 0:f.length)>0?h.sortable.sorted:h.childNodes,p=d.length-1;p>=0;p--)u.push(d[p])}}},{key:"sort",value:function(n,r){var i,a;(r==null||(i=r.sorted)===null||i===void 0?void 0:i.length)>0&&r.dirtyReason!==xD.Z_INDEX_CHANGED?r.dirtyChildren.forEach(function(o){var s=r.sorted.indexOf(o);s>-1&&r.sorted.splice(s,1);var l=n.childNodes.indexOf(o);if(l>-1)if(r.sorted.length===0)r.sorted.push(o);else{var c=WYe(r.sorted,o);r.sorted.splice(c,0,o)}}):r.sorted=n.childNodes.slice().sort(g2e),((a=r.sorted)===null||a===void 0?void 0:a.length)>0&&n.childNodes.filter(function(o){return o.parsedStyle.zIndex}).length===0&&(r.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(rk.DISPLAY_OBJECT_CHANGED)}}])})(),NXe=/\[\s*(.*)=(.*)\s*\]/,IXe=(function(){function t(){it(this,t)}return at(t,[{key:"selectOne",value:function(n,r){var i=this;if(n.startsWith("."))return r.find(function(l){return(l?.classList||[]).indexOf(i.getIdOrClassname(n))>-1});if(n.startsWith("#"))return r.find(function(l){return l.id===i.getIdOrClassname(n)});if(n.startsWith("[")){var a=this.getAttribute(n),o=a.name,s=a.value;return o?r.find(function(l){return r!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):null}return r.find(function(l){return r!==l&&l.nodeName===n})}},{key:"selectAll",value:function(n,r){var i=this;if(n.startsWith("."))return r.findAll(function(l){return r!==l&&(l?.classList||[]).indexOf(i.getIdOrClassname(n))>-1});if(n.startsWith("#"))return r.findAll(function(l){return r!==l&&l.id===i.getIdOrClassname(n)});if(n.startsWith("[")){var a=this.getAttribute(n),o=a.name,s=a.value;return o?r.findAll(function(l){return r!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):[]}return r.findAll(function(l){return r!==l&&l.nodeName===n})}},{key:"is",value:function(n,r){if(n.startsWith("."))return r.className===this.getIdOrClassname(n);if(n.startsWith("#"))return r.id===this.getIdOrClassname(n);if(n.startsWith("[")){var i=this.getAttribute(n),a=i.name,o=i.value;return a==="name"?r.name===o:this.attributeToString(r,a)===o}return r.nodeName===n}},{key:"getIdOrClassname",value:function(n){return n.substring(1)}},{key:"getAttribute",value:function(n){var r=n.match(NXe),i="",a="";return r&&r.length>2&&(i=r[1].replace(/"/g,""),a=r[2].replace(/"/g,"")),{name:i,value:a}}},{key:"attributeToString",value:function(n,r){if(!n.getAttribute)return"";var i=n.getAttribute(r);return Kn(i)?"":i.toString?i.toString():""}}])})(),qc=(function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t})({}),Hm=(function(t){function e(n,r,i,a,o,s,l,c){var u;return it(this,e),u=Ar(this,e,[null]),u.relatedNode=r,u.prevValue=i,u.newValue=a,u.attrName=o,u.attrChange=s,u.prevParsedValue=l,u.newParsedValue=c,u.type=n,u}return Sr(e,t),at(e)})(h4);Hm.ADDITION=2;Hm.MODIFICATION=1;Hm.REMOVAL=3;var LXe=new Hm(qc.REPARENT,null,"","","",0,"",""),kXe=Xc(),F3=Pr(),DXe=yr(1,1,1),BXe=Zr(),FXe=Xc(),cE=Pr(),UXe=Zr(),uE=wa(),jXe=Pr(),zXe=wa(),$Xe=Pr(),t2=Pr(),fE=Pr(),U3=Zr(),zae=wa(),$ae=wa(),j3=wa(),z3={affectChildren:!0},HXe=(function(){function t(e){it(this,t),this.pendingEvents=new Map,this.boundsChangedEvent=new Kc(qc.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}return at(t,[{key:"matches",value:function(n,r){return this.runtime.sceneGraphSelector.is(n,r)}},{key:"querySelector",value:function(n,r){return this.runtime.sceneGraphSelector.selectOne(n,r)}},{key:"querySelectorAll",value:function(n,r){return this.runtime.sceneGraphSelector.selectAll(n,r)}},{key:"attach",value:function(n,r,i){var a,o=!1;n.parentNode&&(o=n.parentNode!==r,this.detach(n));var s=n.nodeName===nr.FRAGMENT,l=wD(r);n.parentNode=r;var c=s?n.childNodes:[n];Ln(i)?c.forEach(function(g){r.childNodes.splice(i,0,g),g.parentNode=r}):c.forEach(function(g){r.childNodes.push(g),g.parentNode=r});var u=r,f=u.sortable;if((f!=null&&(a=f.sorted)!==null&&a!==void 0&&a.length||f.dirty||n.parsedStyle.zIndex)&&(f.dirtyChildren.indexOf(n)===-1&&f.dirtyChildren.push(n),f.dirty=!0,f.dirtyReason=xD.ADDED),!l){if(s)this.dirtifyFragment(n);else{var h=n.transformable;h&&this.dirtyWorldTransform(n,h)}if(o){var d,p=((d=r.ownerDocument)===null||d===void 0||(d=d.defaultView)===null||d===void 0||(d=d.getConfig())===null||d===void 0||(d=d.future)===null||d===void 0?void 0:d.experimentalCancelEventPropagation)===!0;n.dispatchEvent(LXe,p,p)}}}},{key:"detach",value:function(n){var r,i;if(n.parentNode){var a=n.transformable,o=n.parentNode,s=o.sortable;(s!=null&&(r=s.sorted)!==null&&r!==void 0&&r.length||(i=n.style)!==null&&i!==void 0&&i.zIndex)&&(s.dirtyChildren.indexOf(n)===-1&&s.dirtyChildren.push(n),s.dirty=!0,s.dirtyReason=xD.REMOVED);var l=n.parentNode.childNodes.indexOf(n);l>-1&&n.parentNode.childNodes.splice(l,1),a&&this.dirtyWorldTransform(n,a),n.parentNode=null}}},{key:"getLocalPosition",value:function(n){return n.transformable.localPosition}},{key:"getLocalRotation",value:function(n){return n.transformable.localRotation}},{key:"getLocalScale",value:function(n){return n.transformable.localScale}},{key:"getLocalSkew",value:function(n){return n.transformable.localSkew}},{key:"getLocalTransform",value:function(n){var r=n.transformable;return vae(r),r.localTransform}},{key:"setLocalPosition",value:function(n,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=n.transformable;t2[0]=r[0],t2[1]=r[1],t2[2]=(i=r[2])!==null&&i!==void 0?i:0,!xm(o.localPosition,t2)&&(dc(o.localPosition,t2),a&&this.dirtyLocalTransform(n,o))}},{key:"translateLocal",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=yr(r,i,a));var o=n.transformable;xm(r,F3)||(awe(r,r,o.localRotation),cf(o.localPosition,o.localPosition,r),this.dirtyLocalTransform(n,o))}},{key:"setLocalRotation",value:function(n,r,i,a,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof r=="number"&&(r=YF(uE,r,i,a,o));var l=n.transformable;__(l.localRotation,r),s&&this.dirtyLocalTransform(n,l)}},{key:"rotateLocal",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=yr(r,i,a));var o=n.transformable;y_($ae,r[0],r[1],r[2]),uD(o.localRotation,o.localRotation,$ae),this.dirtyLocalTransform(n,o)}},{key:"setLocalScale",value:function(n,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=n.transformable;Co(cE,r[0],r[1],(i=r[2])!==null&&i!==void 0?i:o.localScale[2]),!xm(cE,o.localScale)&&(dc(o.localScale,cE),a&&this.dirtyLocalTransform(n,o))}},{key:"scaleLocal",value:function(n,r){var i,a=n.transformable;nwe(a.localScale,a.localScale,Co(cE,r[0],r[1],(i=r[2])!==null&&i!==void 0?i:1)),this.dirtyLocalTransform(n,a)}},{key:"setLocalSkew",value:function(n,r,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof r=="number"&&(r=xQ(FXe,r,i));var o=n.transformable;BC(o.localSkew,r),a&&this.dirtyLocalTransform(n,o)}},{key:"setLocalEulerAngles",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof r=="number"&&(r=yr(r,i,a));var s=n.transformable;y_(s.localRotation,r[0],r[1],r[2]),o&&this.dirtyLocalTransform(n,s)}},{key:"setLocalTransform",value:function(n,r){var i=hx(jXe,r),a=dx(zXe,r),o=zm($Xe,r);this.setLocalScale(n,o,!1),this.setLocalPosition(n,i,!1),this.setLocalRotation(n,a,void 0,void 0,void 0,!1),this.dirtyLocalTransform(n,n.transformable)}},{key:"resetLocalTransform",value:function(n){this.setLocalScale(n,DXe,!1),this.setLocalPosition(n,F3,!1),this.setLocalEulerAngles(n,F3,void 0,void 0,!1),this.setLocalSkew(n,kXe,void 0,!1),this.dirtyLocalTransform(n,n.transformable)}},{key:"getPosition",value:function(n){var r=n.transformable;return hx(r.position,this.getWorldTransform(n,r))}},{key:"getRotation",value:function(n){var r=n.transformable;return dx(r.rotation,this.getWorldTransform(n,r))}},{key:"getScale",value:function(n){var r=n.transformable;return zm(r.scaling,this.getWorldTransform(n,r))}},{key:"getOrigin",value:function(n){return n.getGeometryBounds(),n.transformable.origin}},{key:"getWorldTransform",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.transformable;return!r.localDirtyFlag&&!r.dirtyFlag||(n.parentNode&&n.parentNode.transformable&&this.getWorldTransform(n.parentNode),this.internalUpdateTransform(n)),r.worldTransform}},{key:"setPosition",value:function(n,r){var i,a=n.transformable;if(fE[0]=r[0],fE[1]=r[1],fE[2]=(i=r[2])!==null&&i!==void 0?i:0,!xm(this.getPosition(n),fE)){if(dc(a.position,fE),n.parentNode===null||!n.parentNode.transformable)dc(a.localPosition,fE);else{var o=n.parentNode.transformable;Ty(U3,o.worldTransform),qs(U3,U3),ka(a.localPosition,fE,U3)}this.dirtyLocalTransform(n,a)}}},{key:"translate",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=Co(cE,r,i,a)),!xm(r,F3)&&(cf(cE,this.getPosition(n),r),this.setPosition(n,cE))}},{key:"setRotation",value:function(n,r,i,a,o){var s=n.transformable;if(typeof r=="number"&&(r=owe(r,i,a,o)),n.parentNode===null||!n.parentNode.transformable)this.setLocalRotation(n,r);else{var l=this.getRotation(n.parentNode);__(uE,l),fA(uE,uE),qf(s.localRotation,uE,r),BA(s.localRotation,s.localRotation),this.dirtyLocalTransform(n,s)}}},{key:"rotate",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=yr(r,i,a));var o=n.transformable;if(n.parentNode===null||!n.parentNode.transformable)this.rotateLocal(n,r);else{var s=uE;y_(s,r[0],r[1],r[2]);var l=this.getRotation(n),c=this.getRotation(n.parentNode);__(j3,c),fA(j3,j3),qf(s,j3,s),qf(o.localRotation,s,l),BA(o.localRotation,o.localRotation),this.dirtyLocalTransform(n,o)}}},{key:"setOrigin",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=[r,i,a]);var o=n.transformable;if(!(r[0]===o.origin[0]&&r[1]===o.origin[1]&&r[2]===o.origin[2])){var s=o.origin;s[0]=r[0],s[1]=r[1],s[2]=r[2]||0,this.dirtyLocalTransform(n,o)}}},{key:"setEulerAngles",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=yr(r,i,a));var o=n.transformable;if(n.parentNode===null||!n.parentNode.transformable)this.setLocalEulerAngles(n,r);else{y_(o.localRotation,r[0],r[1],r[2]);var s=this.getRotation(n.parentNode);__(zae,fA(uE,s)),uD(o.localRotation,o.localRotation,zae),this.dirtyLocalTransform(n,o)}}},{key:"getTransformedGeometryBounds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(n,r);if(!tf.isEmpty(a)){var o=i||new tf;return o.setFromTransformedAABB(a,this.getWorldTransform(n)),o}return null}},{key:"getGeometryBounds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=n,a=i.geometry;a.dirty&&Cn.styleValueRegistry.updateGeometry(n);var o=r?a.renderBounds:a.contentBounds||null;return o||new tf}},{key:"getBounds",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=n,o=a.renderable;if(!o.boundsDirty&&!i&&o.bounds)return o.bounds;if(!o.renderBoundsDirty&&i&&o.renderBounds)return o.renderBounds;var s=i?o.renderBounds:o.bounds,l=this.getTransformedGeometryBounds(n,i,s),c=n.childNodes;if(c.forEach(function(h){var d=r.getBounds(h,i);d&&(l?l.add(d):(l=s||new tf,l.update(d.center,d.halfExtents)))}),l||(l=new tf),i){var u=VYe(n);if(u){var f=u.parsedStyle.clipPath.getBounds(i);l?f&&(l=f.intersection(l)):l.update(f.center,f.halfExtents)}}return i?(o.renderBounds=l,o.renderBoundsDirty=!1):(o.bounds=l,o.boundsDirty=!1),l}},{key:"getLocalBounds",value:function(n){if(n.parentNode){var r=BXe;n.parentNode.transformable&&(r=qs(UXe,this.getWorldTransform(n.parentNode)));var i=this.getBounds(n);if(!tf.isEmpty(i)){var a=new tf;return a.setFromTransformedAABB(i,r),a}}return this.getBounds(n)}},{key:"getBoundingClientRect",value:function(n){var r,i,a=this.getGeometryBounds(n);tf.isEmpty(a)||(i=new tf,i.setFromTransformedAABB(a,this.getWorldTransform(n)));var o=(r=n.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var s=i.getMin(),l=ir(s,2),c=l[0],u=l[1],f=i.getMax(),h=ir(f,2),d=h[0],p=h[1];return new GA(c+(o?.left||0),u+(o?.top||0),d-c,p-u)}return new GA(o?.left||0,o?.top||0,0,0)}},{key:"internalUpdateTransform",value:function(n){var r,i=(r=n.parentNode)===null||r===void 0?void 0:r.transformable;vae(n.transformable),rVe(n.transformable,i)}},{key:"internalUpdateElement",value:function(n,r){var i,a,o,s,l=((i=n.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0,c=r[r.length-1],u=c?.transformDirty||((a=n.transformable)===null||a===void 0?void 0:a.localDirtyFlag);if(n.transformable){var f;(f=n.transformable).dirtyFlag||(f.dirtyFlag=u)}if(this.internalUpdateTransform(n),u){var h;(h=n.dirty)===null||h===void 0||h.call(n,!0,!0)}var d=((o=n.renderable)===null||o===void 0?void 0:o.boundsDirty)||((s=n.renderable)===null||s===void 0?void 0:s.renderBoundsDirty);if((u||d)&&c?.shapeUpdated===!1&&l)for(var p=r.length-1;p>=0;){var g,v,y=r[p];if(y.shapeUpdated)break;(g=(v=y.node).dirty)===null||g===void 0||g.call(v,!0,!0),y.shapeUpdated=!0,p-=1}return u}},{key:"syncHierarchy",value:function(n){for(var r,i,a=[n],o=n.parentNode?[{node:n.parentNode,transformDirty:((r=n.parentNode.transformable)===null||r===void 0?void 0:r.localDirtyFlag)||((i=n.parentNode.transformable)===null||i===void 0?void 0:i.dirtyFlag),shapeUpdated:!1}]:[];a.length>0;){for(var s=a.pop(),l=o[o.length-1];o.length>0&&s.parentNode!==l.node;)l=o.pop();var c=this.internalUpdateElement(s,o);if(s.childNodes.length>0){for(var u=s.childNodes.length-1;u>=0;u--)a.push(s.childNodes[u]);o.push({node:s,transformDirty:c,shapeUpdated:!1})}}}},{key:"dirtyLocalTransform",value:function(n,r){wD(n)||r.localDirtyFlag||(r.localDirtyFlag=!0,r.dirtyFlag||this.dirtyWorldTransform(n,r))}},{key:"dirtyWorldTransform",value:function(n,r){this.dirtifyWorldInternal(n,r),this.dirtyToRoot(n,!0)}},{key:"dirtifyWorldInternal",value:function(n,r){var i,a=this,o=((i=n.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0;r.dirtyFlag||(r.dirtyFlag=!0,n.dirty(!0,!0),o||n.childNodes.forEach(function(s){var l=s.transformable;a.dirtifyWorldInternal(s,l)}))}},{key:"dirtyToRoot",value:function(n){for(var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=n,o=((r=n.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0||(r=r.getConfig())===null||r===void 0||(r=r.future)===null||r===void 0?void 0:r.experimentalAttributeUpdateOptimization)===!0;a;){var s,l;if((s=(l=a).dirty)===null||s===void 0||s.call(l,!0,!0),o)break;a=a.parentNode}i&&n.forEach(function(c){var u;(u=c.dirty)===null||u===void 0||u.call(c,!0,!0)}),this.informDependentDisplayObjects(n),this.pendingEvents.set(n,i)}},{key:"dirtifyFragment",value:function(n){var r,i,a=n.transformable;a&&(a.dirtyFlag=!0,a.localDirtyFlag=!0),(r=(i=n).dirty)===null||r===void 0||r.call(i,!0,!0);for(var o=n.childNodes.length,s=0;s<o;s++)this.dirtifyFragment(n.childNodes[s]);n.nodeName===nr.FRAGMENT&&this.pendingEvents.set(n,!1)}},{key:"triggerPendingEvents",value:function(){var n=this,r=new Set,i,a,o=function(l,c){if(!(!l.isConnected||r.has(l)||l.nodeName===nr.FRAGMENT)){if(n.boundsChangedEvent.detail=c,n.boundsChangedEvent.target=l,l.isMutationObserved)l.dispatchEvent(n.boundsChangedEvent);else{if(i===void 0){var u;i=((u=l.ownerDocument.defaultView)===null||u===void 0||(u=u.getConfig())===null||u===void 0||(u=u.future)===null||u===void 0?void 0:u.experimentalCancelEventPropagation)===!0}l.ownerDocument.defaultView.dispatchEvent(n.boundsChangedEvent,!0,i)}r.add(l)}};this.pendingEvents.forEach(function(s,l){if(l.nodeName!==nr.FRAGMENT){if(a===void 0){var c;a=((c=l.ownerDocument)===null||c===void 0||(c=c.defaultView)===null||c===void 0||(c=c.getConfig())===null||c===void 0||(c=c.future)===null||c===void 0?void 0:c.experimentalAttributeUpdateOptimization)===!0}z3.affectChildren=s,a?o(l,z3):s?l.forEach(function(u){o(u,z3)}):o(l,z3)}}),r.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"updateDisplayObjectDependency",value:function(n,r,i,a){if(r&&r!==i){var o=this.displayObjectDependencyMap.get(r);if(o&&o[n]){var s=o[n].indexOf(a);o[n].splice(s,1)}}if(i){var l=this.displayObjectDependencyMap.get(i);l||(this.displayObjectDependencyMap.set(i,{}),l=this.displayObjectDependencyMap.get(i)),l[n]||(l[n]=[]),l[n].push(a)}}},{key:"informDependentDisplayObjects",value:function(n){var r,i=this,a=this.displayObjectDependencyMap.get(n);if(a){var o=(r=n.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0||(r=r.getConfig())===null||r===void 0||(r=r.future)===null||r===void 0?void 0:r.experimentalCancelEventPropagation;Object.keys(a).forEach(function(s){a[s].forEach(function(l){i.dirtyToRoot(l,!0),l.dispatchEvent(new Hm(qc.ATTR_MODIFIED,l,i,i,s,Hm.MODIFICATION,i,i),o,o),l.isCustomElement&&l.isConnected&&l.attributeChangedCallback&&l.attributeChangedCallback(s,i,i)})})}}}])})(),hE={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Hae=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,GXe=/[!%),.:;?\]}'""]/,WXe=/[$('"]/,VXe=/[!),.:;?\]}'""]/,YXe=/[([{'"]/,XXe=/[)\]'"?!:;,.]/,qXe=/[(['"...]/,ZXe=/[!%),.:;?\]}'"]/,KXe=/[$([{'"#]/,QXe=new RegExp("".concat(GXe.source,"|").concat(VXe.source,"|").concat(XXe.source,"|").concat(ZXe.source)),JXe=new RegExp("".concat(WXe.source,"|").concat(YXe.source,"|").concat(qXe.source,"|").concat(KXe.source)),eqe=(function(){function t(e){var n=this;it(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(JXe.exec(i)||QXe.exec(r)))},this.trimByKinsokuShorui=function(r){var i=Dr(r),a=i[i.length-2];if(!a)return r;var o=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=o+i[i.length-1],i},this.runtime=e}return at(t,[{key:"measureFont",value:function(n,r){if(this.fontMetricsCache[n])return this.fontMetricsCache[n];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(r),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(r,{willReadFrequently:!0});o.font=n;var s=hE.MetricsString+hE.BaselineSymbol,l=Math.ceil(o.measureText(s).width),c=Math.ceil(o.measureText(hE.BaselineSymbol).width),u=hE.HeightMultiplier*c;c=c*hE.BaselineMultiplier|0,a.width=l,a.height=u,o.fillStyle="#f00",o.fillRect(0,0,l,u),o.font=n,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(s,0,c);var f=o.getImageData(0,0,l||1,u||1).data,h=f.length,d=l*4,p=0,g=0,v=!1;for(p=0;p<c;++p){for(var y=0;y<d;y+=4)if(f[g+y]!==255){v=!0;break}if(!v)g+=d;else break}for(i.ascent=c-p,g=h-d,v=!1,p=u;p>c;--p){for(var _=0;_<d;_+=4)if(f[g+_]!==255){v=!0;break}if(!v)g-=d;else break}return i.descent=p-c,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[n]=i,i}},{key:"measureText",value:function(n,r,i){var a=r.fontSize,o=a===void 0?16:a,s=r.wordWrap,l=s===void 0?!1:s,c=r.lineHeight,u=r.lineWidth,f=u===void 0?1:u,h=r.textBaseline,d=h===void 0?"alphabetic":h,p=r.textAlign,g=p===void 0?"start":p,v=r.letterSpacing,y=v===void 0?0:v,_=r.textPath;r.textPathSide,r.textPathStartOffset;var E=r.leading,x=E===void 0?0:E,T=uXe(r),S=this.measureFont(T,i);S.fontSize===0&&(S.fontSize=o,S.ascent=o);var w=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);w.font=T,r.isOverflowing=!1;var C=l?this.wordWrap(n,r,i):n,D=C.split(/(?:\r\n|\r|\n)/),L=new Array(D.length),B=0;if(_){_.getTotalLength();for(var I=0;I<D.length;I++)w.measureText(D[I]).width+(D[I].length-1)*y}else{for(var U=0;U<D.length;U++){var $=w.measureText(D[U]).width+(D[U].length-1)*y;L[U]=$,B=Math.max(B,$)}var X=B+f,N=c||S.fontSize+f,M=Math.max(N,S.fontSize+f)+(D.length-1)*(N+x);N+=x;var k=0;return d==="middle"?k=-M/2:d==="bottom"||d==="alphabetic"||d==="ideographic"?k=-M:(d==="top"||d==="hanging")&&(k=0),{font:T,width:X,height:M,lines:D,lineWidths:L,lineHeight:N,maxLineWidth:B,fontProperties:S,lineMetrics:L.map(function(z,j){var V=0;return g==="center"||g==="middle"?V-=z/2:(g==="right"||g==="end")&&(V-=z),new GA(V-f/2,k+j*N,z+f,N)})}}}},{key:"wordWrap",value:function(n,r,i){var a=this,o=Array.from(n);if(o.length===0)return"";var s=this,l=r.wordWrapWidth,c=l===void 0?0:l,u=r.letterSpacing,f=u===void 0?0:u,h=r.maxLines,d=h===void 0?1/0:h,p=r.textOverflow,g=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),v=c+f,y="";p==="ellipsis"?y="...":p&&p!=="clip"&&(y=p);var _=[""],E=0,x=0,T=-1,S={},w=function(k){return a.getFromCache(k,f,S,g)},C=w(y);function D(M,k,z,j){for(;w(M)<j&&k<o.length-1&&!s.isNewline(o[k+1]);)k+=1,M+=o[k];for(;w(M)>j&&k>=z;)k-=1,M=M.slice(0,-1);return{lineTxt:M,txtLastCharIndex:k}}function L(M,k){if(!(C<=0||C>v)){if(!_[M]){_[M]=y;return}var z=D(_[M],k,T+1,v-C);_[M]=z.lineTxt+y}}for(var B=0;B<o.length;B++){var I=o[B],U=o[B-1],$=o[B+1],X=w(I);if(this.isNewline(I)){if(E+1>=d){B<o.length-1&&L(E,B-1),r.isOverflowing=!0;break}T=B-1,E+=1,x=0,_[E]="";continue}if(X>v){L(E,B-1),r.isOverflowing=!0;break}if(x>0&&x+X>v){var N=D(_[E],B-1,T+1,v);if(N.txtLastCharIndex!==B-1){if(_[E]=N.lineTxt,N.txtLastCharIndex===o.length-1)break;B=N.txtLastCharIndex+1,I=o[B],U=o[B-1],$=o[B+1],X=w(I)}if(E+1>=d){L(E,B-1),r.isOverflowing=!0;break}if(T=B-1,E+=1,x=0,_[E]="",this.isBreakingSpace(I))continue;this.canBreakInLastChar(I)||(_=this.trimToBreakable(_),x=this.sumTextWidthByCache(_[E]||"",w)),this.shouldBreakByKinsokuShorui(I,$)&&(_=this.trimByKinsokuShorui(_),x+=w(U||""))}x+=X,_[E]+=I}return _.join(`
`)}},{key:"isBreakingSpace",value:function(n){return typeof n!="string"?!1:hE.BreakingSpaces.indexOf(n.charCodeAt(0))>=0}},{key:"isNewline",value:function(n){return typeof n!="string"?!1:hE.Newlines.indexOf(n.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(n){var r=Dr(n),i=r[r.length-2],a=this.findBreakableIndex(i);if(a===-1||!i)return r;var o=i.slice(a,a+1),s=this.isBreakingSpace(o),l=a+1,c=a+(s?0:1);return r[r.length-1]+=i.slice(l,i.length),r[r.length-2]=i.slice(0,c),r}},{key:"canBreakInLastChar",value:function(n){return!(n&&Hae.test(n))}},{key:"sumTextWidthByCache",value:function(n,r){return n.split("").reduce(function(i,a){return i+r(a)},0)}},{key:"findBreakableIndex",value:function(n){for(var r=n.length-1;r>=0;r--)if(!Hae.test(n[r]))return r;return-1}},{key:"getFromCache",value:function(n,r,i,a){var o=i[n];if(typeof o!="number"){var s=n.length*r,l=a.measureText(n);o=l.width+s,i[n]=o}return o}}])})(),Cn={},tqe=(function(t){var e=new TXe,n=new SXe;return t={},Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(t,nr.FRAGMENT,null),nr.CIRCLE,new _Xe),nr.ELLIPSE,new bXe),nr.RECT,e),nr.IMAGE,e),nr.GROUP,new wXe),nr.LINE,new EXe),nr.TEXT,new AXe(Cn)),nr.POLYLINE,n),nr.POLYGON,n),Z(Z(Z(t,nr.PATH,new xXe),nr.HTML,new OXe),nr.MESH,null)})(),nqe=(function(t){var e=new MYe,n=new zY;return t={},Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(t,Jn.PERCENTAGE,null),Jn.NUMBER,new kYe),Jn.ANGLE,new CYe),Jn.DEFINED_PATH,new RYe),Jn.PAINT,e),Jn.COLOR,e),Jn.FILTER,new PYe),Jn.LENGTH,n),Jn.LENGTH_PERCENTAGE,n),Jn.LENGTH_PERCENTAGE_12,new NYe),Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(t,Jn.LENGTH_PERCENTAGE_14,new IYe),Jn.COORDINATE,new zY),Jn.OFFSET_DISTANCE,new DYe),Jn.OPACITY_VALUE,new BYe),Jn.PATH,new FYe),Jn.LIST_OF_POINTS,new UYe),Jn.SHADOW_BLUR,new jYe),Jn.TEXT,new zYe),Jn.TEXT_TRANSFORM,new $Ye),Jn.TRANSFORM,new vXe),Z(Z(Z(t,Jn.TRANSFORM_ORIGIN,new mXe),Jn.Z_INDEX,new yXe),Jn.MARKER,new LYe)})(),rqe=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};Cn.CameraContribution=ZOe;Cn.AnimationTimeline=null;Cn.EasingFunction=null;Cn.offscreenCanvasCreator=new MXe;Cn.sceneGraphSelector=new IXe;Cn.sceneGraphService=new HXe(Cn);Cn.textService=new eqe(Cn);Cn.geometryUpdaterFactory=tqe;Cn.CSSPropertySyntaxFactory=nqe;Cn.styleValueRegistry=new wYe(Cn);Cn.layoutRegistry=null;Cn.globalThis=rqe();Cn.enableStyleSyntax=!0;Cn.enableSizeAttenuation=!1;var iqe=0,WY=new Hm(qc.INSERTED,null,"","","",0,"",""),VY=new Hm(qc.REMOVED,null,"","","",0,"",""),x2e=new Kc(qc.DESTROY),aqe=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.entity=iqe++,n.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.cullable={strategy:eVe.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.style={},n.computedStyle={},n.parsedStyle={},n.attributes={},n}return Sr(e,t),at(e,[{key:"dirty",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.renderable.dirty=r,i&&(this.renderable.boundsDirty=r,this.renderable.renderBoundsDirty=r)}},{key:"className",get:function(){return this.getAttribute("class")||""},set:function(r){this.setAttribute("class",r)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(r){return r!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[r+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[r-1]||null}return null}},{key:"cloneNode",value:function(r){throw new Error(jo)}},{key:"appendChild",value:function(r,i){var a;if(r.destroyed)throw new Error(HWe);return Cn.sceneGraphService.attach(r,this,i),(a=this.ownerDocument)!==null&&a!==void 0&&a.defaultView&&(!wD(this)&&r.nodeName===nr.FRAGMENT?this.ownerDocument.defaultView.mountFragment(r):this.ownerDocument.defaultView.mountChildren(r)),this.isMutationObserved&&(WY.relatedNode=this,r.dispatchEvent(WY)),r}},{key:"insertBefore",value:function(r,i){if(!i)this.appendChild(r);else{r.parentElement&&r.parentElement.removeChild(r);var a=this.childNodes.indexOf(i);a===-1?this.appendChild(r):this.appendChild(r,a)}return r}},{key:"replaceChild",value:function(r,i){var a=this.childNodes.indexOf(i);return this.removeChild(i),this.appendChild(r,a),i}},{key:"removeChild",value:function(r){var i,a,o=((i=this.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;return VY.relatedNode=this,r.dispatchEvent(VY,o,o),(a=r.ownerDocument)!==null&&a!==void 0&&a.defaultView&&r.ownerDocument.defaultView.unmountChildren(r),Cn.sceneGraphService.detach(r),r}},{key:"removeChildren",value:function(){for(var r=this.childNodes.length-1;r>=0;r--){var i=this.childNodes[r];this.removeChild(i)}}},{key:"destroyChildren",value:function(){for(var r=this.childNodes.length-1;r>=0;r--){var i=this.childNodes[r];i.childNodes.length>0&&i.destroyChildren(),i.destroy()}}},{key:"matches",value:function(r){return Cn.sceneGraphService.matches(r,this)}},{key:"getElementById",value:function(r){return Cn.sceneGraphService.querySelector("#".concat(r),this)}},{key:"getElementsByName",value:function(r){return Cn.sceneGraphService.querySelectorAll('[name="'.concat(r,'"]'),this)}},{key:"getElementsByClassName",value:function(r){return Cn.sceneGraphService.querySelectorAll(".".concat(r),this)}},{key:"getElementsByTagName",value:function(r){return Cn.sceneGraphService.querySelectorAll(r,this)}},{key:"querySelector",value:function(r){return Cn.sceneGraphService.querySelector(r,this)}},{key:"querySelectorAll",value:function(r){return Cn.sceneGraphService.querySelectorAll(r,this)}},{key:"closest",value:function(r){var i=this;do{if(Cn.sceneGraphService.matches(r,i))return i;i=i.parentElement}while(i!==null);return null}},{key:"find",value:function(r){var i=this,a=null;return this.forEach(function(o){return o!==i&&r(o)?(a=o,!1):!0}),a}},{key:"findAll",value:function(r){var i=this,a=[];return this.forEach(function(o){o!==i&&r(o)&&a.push(o)}),a}},{key:"after",value:function(){var r=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];o.forEach(function(l,c){var u;return(u=r.parentNode)===null||u===void 0?void 0:u.appendChild(l,i+c+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var r,i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],c=o.slice(1);this.parentNode.appendChild(l,i),(r=l).after.apply(r,Dr(c))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s){return r.appendChild(s)})}},{key:"prepend",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s,l){return r.appendChild(s,l)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){var r,i=((r=this.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0||(r=r.getConfig().future)===null||r===void 0?void 0:r.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(x2e,i,i),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return Cn.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return Cn.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return Cn.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return Cn.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return Cn.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(r){if(typeof r!="symbol"){var i=this.attributes[r];return i}}},{key:"hasAttribute",value:function(r){return this.getAttributeNames().includes(r)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(r){this.setAttribute(r,null),delete this.attributes[r]}},{key:"setAttribute",value:function(r,i,a,o){this.attributes[r]=i}},{key:"getAttributeNS",value:function(r,i){throw new Error(jo)}},{key:"getAttributeNode",value:function(r){throw new Error(jo)}},{key:"getAttributeNodeNS",value:function(r,i){throw new Error(jo)}},{key:"hasAttributeNS",value:function(r,i){throw new Error(jo)}},{key:"removeAttributeNS",value:function(r,i){throw new Error(jo)}},{key:"removeAttributeNode",value:function(r){throw new Error(jo)}},{key:"setAttributeNS",value:function(r,i,a){throw new Error(jo)}},{key:"setAttributeNode",value:function(r){throw new Error(jo)}},{key:"setAttributeNodeNS",value:function(r){throw new Error(jo)}},{key:"toggleAttribute",value:function(r,i){throw new Error(jo)}}])})(ol);function ys(t){return!!(t!=null&&t.nodeName)}var oqe=Cn.globalThis.Proxy?Cn.globalThis.Proxy:function(){},sm=new Hm(qc.ATTR_MODIFIED,null,null,null,null,Hm.MODIFICATION,null,null),n2=Pr(),sqe=wa(),Qs=(function(t){function e(n){var r;return it(this,e),r=Ar(this,e),r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=n.id||"",r.name=n.name||"",(n.className||n.class)&&(r.className=n.className||n.class),r.nodeName=n.type||nr.GROUP,n.initialParsedStyle&&Object.assign(r.parsedStyle,n.initialParsedStyle),r.initAttributes(n.style),Cn.enableStyleSyntax&&(r.style=new oqe({setProperty:function(a,o){r.setAttribute(a,o)},getPropertyValue:function(a){return r.getAttribute(a)},removeProperty:function(a){r.removeAttribute(a)},item:function(){return""}},{get:function(a,o){return a[o]!==void 0?a[o]:r.getAttribute(o)},set:function(a,o,s){return r.setAttribute(o,s),!0}})),r}return Sr(e,t),at(e,[{key:"destroy",value:function(){_D(e,"destroy",this)([]),this.getAnimations().forEach(function(r){r.cancel()})}},{key:"cloneNode",value:function(r,i){var a=ze({},this.attributes);for(var o in a){var s=a[o];ys(s)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(a[o]=s.cloneNode(r)),i&&(a[o]=i(o,s))}var l=new this.constructor(ze(ze({},this.config),{},{style:a}));return l.setLocalTransform(this.getLocalTransform()),r&&this.children.forEach(function(c){if(!c.style.isMarker){var u=c.cloneNode(r);l.appendChild(u)}}),l}},{key:"initAttributes",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={forceUpdateGeometry:!0};Cn.styleValueRegistry.processProperties(this,r,i),this.dirty()}},{key:"setAttribute",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;mr(i)||(a||i!==this.attributes[r])&&(this.internalSetAttribute(r,i,{memoize:o}),_D(e,"setAttribute",this)([r,i]))}},{key:"internalSetAttribute",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.attributes[r],s=this.parsedStyle[r];Cn.styleValueRegistry.processProperties(this,Z({},r,i),a),this.dirty();var l=this.parsedStyle[r];if(this.isConnected)if(sm.relatedNode=this,sm.prevValue=o,sm.newValue=i,sm.attrName=r,sm.prevParsedValue=s,sm.newParsedValue=l,this.isMutationObserved)this.dispatchEvent(sm);else{var c,u=((c=this.ownerDocument.defaultView.getConfig().future)===null||c===void 0?void 0:c.experimentalCancelEventPropagation)===!0;sm.target=this,this.ownerDocument.defaultView.dispatchEvent(sm,!0,u)}if(this.isCustomElement&&this.isConnected||!this.isCustomElement){var f,h;(f=(h=this).attributeChangedCallback)===null||f===void 0||f.call(h,r,o,i,s,l)}}},{key:"getBBox",value:function(){var r=this.getBounds(),i=r.getMin(),a=ir(i,2),o=a[0],s=a[1],l=r.getMax(),c=ir(l,2),u=c[0],f=c[1];return new GA(o,s,u-o,f-s)}},{key:"setOrigin",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Cn.sceneGraphService.setOrigin(this,zf(r,i,a,!1)),this}},{key:"getOrigin",value:function(){return Cn.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Cn.sceneGraphService.setPosition(this,zf(r,i,a,!1)),this}},{key:"setLocalPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Cn.sceneGraphService.setLocalPosition(this,zf(r,i,a,!1)),this}},{key:"translate",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Cn.sceneGraphService.translate(this,zf(r,i,a,!1)),this}},{key:"translateLocal",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Cn.sceneGraphService.translateLocal(this,zf(r,i,a,!1)),this}},{key:"getPosition",value:function(){return Cn.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return Cn.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(r,i,a){return this.scaleLocal(r,i,a)}},{key:"scaleLocal",value:function(r,i,a){return typeof r=="number"&&(i=i||r,a=a||r,r=zf(r,i,a,!1)),Cn.sceneGraphService.scaleLocal(this,r),this}},{key:"setLocalScale",value:function(r,i,a){return typeof r=="number"&&(i=i||r,a=a||r,r=zf(r,i,a,!1)),Cn.sceneGraphService.setLocalScale(this,r),this}},{key:"getLocalScale",value:function(){return Cn.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return Cn.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var r=n7(n2,Cn.sceneGraphService.getWorldTransform(this)),i=ir(r,3),a=i[2];return Ap(a)}},{key:"getLocalEulerAngles",value:function(){var r=n7(n2,Cn.sceneGraphService.getLocalRotation(this)),i=ir(r,3),a=i[2];return Ap(a)}},{key:"setEulerAngles",value:function(r){return Cn.sceneGraphService.setEulerAngles(this,0,0,r),this}},{key:"setLocalEulerAngles",value:function(r){return Cn.sceneGraphService.setLocalEulerAngles(this,0,0,r),this}},{key:"rotateLocal",value:function(r,i,a){return Kn(i)&&Kn(a)?Cn.sceneGraphService.rotateLocal(this,0,0,r):Cn.sceneGraphService.rotateLocal(this,r,i,a),this}},{key:"rotate",value:function(r,i,a){return Kn(i)&&Kn(a)?Cn.sceneGraphService.rotate(this,0,0,r):Cn.sceneGraphService.rotate(this,r,i,a),this}},{key:"setRotation",value:function(r,i,a,o){return Cn.sceneGraphService.setRotation(this,r,i,a,o),this}},{key:"setLocalRotation",value:function(r,i,a,o){return Cn.sceneGraphService.setLocalRotation(this,r,i,a,o),this}},{key:"setLocalSkew",value:function(r,i){return Cn.sceneGraphService.setLocalSkew(this,r,i),this}},{key:"getRotation",value:function(){return Cn.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return Cn.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return Cn.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return Cn.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return Cn.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(r){return Cn.sceneGraphService.setLocalTransform(this,r),this}},{key:"resetLocalTransform",value:function(){Cn.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(r,i){var a,o=(a=this.ownerDocument)===null||a===void 0?void 0:a.timeline;return o?o.play(this,r,i):null}},{key:"isVisible",value:function(){var r;return((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(r){this.style.pointerEvents=r?"auto":"none"}},{key:"isInteractive",value:function(){var r;return((r=this.parsedStyle)===null||r===void 0?void 0:r.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,Dr(this.parentNode.children.map(function(r){return Number(r.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,Dr(this.parentNode.children.map(function(r){return Number(r.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=a[0],l=a[1];return s?dl(s)?(Object.keys(s).forEach(function(c){r.setAttribute(c,s[c])}),this):a.length===2?(this.setAttribute(s,l),this):this.attributes[s]:this.attributes}},{key:"getMatrix",value:function(r){var i=r||this.getWorldTransform(),a=hx(n2,i),o=ir(a,2),s=o[0],l=o[1],c=zm(n2,i),u=ir(c,2),f=u[0],h=u[1],d=dx(sqe,i),p=n7(n2,d),g=ir(p,3),v=g[0],y=g[2];return qWe(v||y,s,l,f,h)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(r){var i=dae(r),a=ir(i,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4];this.setEulerAngles(u).setPosition(o,s).setLocalScale(l,c)}},{key:"setLocalMatrix",value:function(r){var i=dae(r),a=ir(i,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4];this.setLocalEulerAngles(u).setLocalPosition(o,s).setLocalScale(l,c)}},{key:"show",value:function(){this.forEach(function(r){r.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(r){r.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(r){return this.children[r]||null}},{key:"add",value:function(r,i){return this.appendChild(r,i)}},{key:"set",value:function(r,i){this.config[r]=i}},{key:"get",value:function(r){return this.config[r]}},{key:"moveTo",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(r,i,a),this}},{key:"move",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(r,i,a),this}},{key:"setZIndex",value:function(r){return this.style.zIndex=r,this}}])})(aqe);Qs.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var yx=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:nr.CIRCLE},n)])}return Sr(e,t),at(e)})(Qs);yx.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var lqe=["style"],d4=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,lqe);return it(this,e),n=Ar(this,e,[ze({style:i},a)]),n.isCustomElement=!0,n}return Sr(e,t),at(e)})(Qs);d4.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var qQ=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:nr.ELLIPSE},n)])}return Sr(e,t),at(e)})(Qs);qQ.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var cqe=(function(t){function e(){return it(this,e),Ar(this,e,[{type:nr.FRAGMENT}])}return Sr(e,t),at(e)})(Qs);cqe.PARSED_STYLE_LIST=new Set(["class","className"]);var Cy=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:nr.GROUP},n)])}return Sr(e,t),at(e)})(Qs);Cy.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var uqe=["style"],p4=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,uqe);return it(this,e),n=Ar(this,e,[ze({type:nr.HTML,style:i},a)]),n.cullable.enable=!1,n}return Sr(e,t),at(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var r=qs(Zr(),this.parentNode.getWorldTransform()),i=this.getBounds();if(!tf.isEmpty(i)){var a=new tf;return a.setFromTransformedAABB(i,r),a}}return this.getBounds()}}])})(Qs);p4.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var ZQ=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:nr.IMAGE},n)])}return Sr(e,t),at(e)})(Qs);ZQ.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var fqe=["style"],Rw=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,fqe);it(this,e),n=Ar(this,e,[ze({type:nr.LINE,style:ze({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a)]),n.markerStartAngle=0,n.markerEndAngle=0;var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd;return s&&ys(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),l&&ys(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Sr(e,t),at(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="x1"||r==="y1"||r==="x2"||r==="y2"||r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&ys(o)&&(this.markerStartAngle=0,o.remove()),s&&ys(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"&&(o&&ys(o)&&(this.markerEndAngle=0,o.remove()),s&&ys(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1)))}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=i.x1,u=i.x2,f=i.y1,h=i.y2,d=r?a:o;if(!(!d||!ys(d))){var p=0,g,v,y,_,E,x;r?(y=c,_=f,g=u-c,v=h-f,E=s||0,x=this.markerStartAngle):(y=u,_=h,g=c-u,v=f-h,E=l||0,x=this.markerEndAngle),p=Math.atan2(v,g),d.setLocalEulerAngles(p*180/Math.PI+x),d.setLocalPosition(y+Math.cos(p)*E,_+Math.sin(p)*E)}}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle,o=a.x1,s=a.y1,l=a.x2,c=a.y2,u=c4(o,s,l,c,r),f=u.x,h=u.y,d=ka(Pr(),yr(f,h,0),i?this.getWorldTransform():this.getLocalTransform());return new af(d[0],d[1])}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(r/this.getTotalLength(),i)}},{key:"getTotalLength",value:function(){var r=this.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2;return l4(i,a,o,s)}}])})(Qs);Rw.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var hqe=["style"],Kf=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,hqe);it(this,e),n=Ar(this,e,[ze({type:nr.PATH,style:i,initialParsedStyle:{miterLimit:4,d:ze({},KOe)}},a)]),n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&ys(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),c&&ys(c)&&n.placeMarkerMid(c),l&&ys(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Sr(e,t),at(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&ys(o)&&(this.markerStartAngle=0,o.remove()),s&&ys(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"?(o&&ys(o)&&(this.markerEndAngle=0,o.remove()),s&&ys(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):r==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=r?a:o;if(!(!c||!ys(c))){var u=0,f,h,d,p,g,v;if(r){var y=this.getStartTangent(),_=ir(y,2),E=_[0],x=_[1];d=x[0],p=x[1],f=E[0]-x[0],h=E[1]-x[1],g=s||0,v=this.markerStartAngle}else{var T=this.getEndTangent(),S=ir(T,2),w=S[0],C=S[1];d=C[0],p=C[1],f=w[0]-C[0],h=w[1]-C[1],g=l||0,v=this.markerEndAngle}u=Math.atan2(h,f),c.setLocalEulerAngles(u*180/Math.PI+v),c.setLocalPosition(d+Math.cos(u)*g,p+Math.sin(u)*g)}}},{key:"placeMarkerMid",value:function(r){var i=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(u){u.remove()}),r&&ys(r))for(var a=1;a<i.length-1;a++){var o=ir(i[a].currentPoint,2),s=o[0],l=o[1],c=a===1?r:r.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(s,l)}}},{key:"getTotalLength",value:function(){return Rae(this)}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.d.absolutePath,o=ywe(a,r),s=o.x,l=o.y,c=ka(Pr(),yr(s,l,0),i?this.getWorldTransform():this.getLocalTransform());return new af(c[0],c[1])}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(r*Rae(this),i)}},{key:"getStartTangent",value:function(){var r=this.parsedStyle.d.segments,i=[];if(r.length>1){var a=r[0].currentPoint,o=r[1].currentPoint,s=r[1].startTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i}},{key:"getEndTangent",value:function(){var r=this.parsedStyle.d.segments,i=r.length,a=[];if(i>1){var o=r[i-2].currentPoint,s=r[i-1].currentPoint,l=r[i-1].endTangent;a=[],l?(a.push([s[0]-l[0],s[1]-l[1]]),a.push([s[0],s[1]])):(a.push([o[0],o[1]]),a.push([s[0],s[1]]))}return a}}])})(Qs);Kf.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var dqe=["style"],Mw=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,dqe);it(this,e),n=Ar(this,e,[ze({type:nr.POLYGON,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a)]),n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&ys(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),c&&ys(c)&&n.placeMarkerMid(c),l&&ys(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Sr(e,t),at(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&ys(o)&&(this.markerStartAngle=0,o.remove()),s&&ys(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"?(o&&ys(o)&&(this.markerEndAngle=0,o.remove()),s&&ys(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):r==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=i.points,u=c||{},f=u.points,h=r?a:o;if(!(!h||!ys(h)||!f)){var d=0,p,g,v,y,_,E;if(v=f[0][0],y=f[0][1],r)p=f[1][0]-f[0][0],g=f[1][1]-f[0][1],_=s||0,E=this.markerStartAngle;else{var x=f.length;this.parsedStyle.isClosed?(p=f[x-1][0]-f[0][0],g=f[x-1][1]-f[0][1]):(v=f[x-1][0],y=f[x-1][1],p=f[x-2][0]-f[x-1][0],g=f[x-2][1]-f[x-1][1]),_=l||0,E=this.markerEndAngle}d=Math.atan2(g,p),h.setLocalEulerAngles(d*180/Math.PI+E),h.setLocalPosition(v+Math.cos(d)*_,y+Math.sin(d)*_)}}},{key:"placeMarkerMid",value:function(r){var i=this.parsedStyle.points,a=i||{},o=a.points;if(this.markerMidList.forEach(function(f){f.remove()}),this.markerMidList=[],r&&ys(r)&&o)for(var s=1;s<(this.parsedStyle.isClosed?o.length:o.length-1);s++){var l=o[s][0],c=o[s][1],u=s===1?r:r.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(l,c)}}}])})(Qs);Mw.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var pqe=["style"],KQ=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Ro(n,pqe);return it(this,e),Ar(this,e,[ze({type:nr.POLYLINE,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i)])}return Sr(e,t),at(e,[{key:"getTotalLength",value:function(){return KVe(this)}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(r/this.getTotalLength(),i)}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],s=0,l,c,u=this.getTotalLength();a.forEach(function(y,_){a[_+1]&&(l=[0,0],l[0]=s/u,c=l4(y[0],y[1],a[_+1][0],a[_+1][1]),s+=c,l[1]=s/u,o.push(l))}),this.parsedStyle.points.segments=o}var f=0,h=0;this.parsedStyle.points.segments.forEach(function(y,_){r>=y[0]&&r<=y[1]&&(f=(r-y[0])/(y[1]-y[0]),h=_)});var d=c4(a[h][0],a[h][1],a[h+1][0],a[h+1][1],f),p=d.x,g=d.y,v=ka(Pr(),yr(p,g,0),i?this.getWorldTransform():this.getLocalTransform());return new af(v[0],v[1])}},{key:"getStartTangent",value:function(){var r=this.parsedStyle.points.points,i=[];return i.push([r[1][0],r[1][1]]),i.push([r[0][0],r[0][1]]),i}},{key:"getEndTangent",value:function(){var r=this.parsedStyle.points.points,i=r.length-1,a=[];return a.push([r[i-1][0],r[i-1][1]]),a.push([r[i][0],r[i][1]]),a}}])})(Mw);KQ.PARSED_STYLE_LIST=new Set([].concat(Dr(Mw.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Wx=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:nr.RECT},n)])}return Sr(e,t),at(e)})(Qs);Wx.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var gqe=["style"],Jg=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Ro(n,gqe);return it(this,e),Ar(this,e,[ze({type:nr.TEXT,style:ze({fill:"black"},r)},i)])}return Sr(e,t),at(e,[{key:"getComputedTextLength",value:function(){var r;return this.getGeometryBounds(),((r=this.parsedStyle.metrics)===null||r===void 0?void 0:r.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var r;return this.getGeometryBounds(),((r=this.parsedStyle.metrics)===null||r===void 0?void 0:r.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])})(Qs);Jg.PARSED_STYLE_LIST=new Set([].concat(Dr(Qs.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var vqe=(function(){function t(){it(this,t),this.registry={},this.define(nr.CIRCLE,yx),this.define(nr.ELLIPSE,qQ),this.define(nr.RECT,Wx),this.define(nr.IMAGE,ZQ),this.define(nr.LINE,Rw),this.define(nr.GROUP,Cy),this.define(nr.PATH,Kf),this.define(nr.POLYGON,Mw),this.define(nr.POLYLINE,KQ),this.define(nr.TEXT,Jg),this.define(nr.HTML,p4)}return at(t,[{key:"define",value:function(n,r){this.registry[n]=r}},{key:"get",value:function(n){return this.registry[n]}}])})(),S2e={number:function(e){return new ts(e)},percent:function(e){return new ts(e,"%")},px:function(e){return new ts(e,"px")},em:function(e){return new ts(e,"em")},rem:function(e){return new ts(e,"rem")},deg:function(e){return new ts(e,"deg")},grad:function(e){return new ts(e,"grad")},rad:function(e){return new ts(e,"rad")},turn:function(e){return new ts(e,"turn")},s:function(e){return new ts(e,"s")},ms:function(e){return new ts(e,"ms")},registerProperty:function(e){var n=e.name,r=e.inherits,i=e.interpolable,a=e.initialValue,o=e.syntax;Cn.styleValueRegistry.registerMetadata({n,inh:r,int:i,d:a,syntax:o})},registerLayout:function(e,n){Cn.layoutRegistry.registerLayout(e,n)}},mqe=(function(t){function e(){var n;it(this,e),n=Ar(this,e),n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new Cn.AnimationTimeline(n)}catch{}var r={};return YQ.forEach(function(i){var a=i.n,o=i.inh,s=i.d;o&&s&&(r[a]=ur(s)?s(nr.GROUP):s)}),n.documentElement=new Cy({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Sr(e,t),at(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(r,i){if(r==="svg")return this.documentElement;var a=this.defaultView.customElements.get(r);a||(console.warn("Unsupported tagName: ",r),a=r==="tspan"?Jg:Cy);var o=new a(i);return o.ownerDocument=this,o}},{key:"createElementNS",value:function(r,i,a){return this.createElement(i,a)}},{key:"cloneNode",value:function(r){throw new Error(jo)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(r,i,a,o){var s=this.defaultView.context.rBushRoot,l=s.search({minX:r,minY:i,maxX:a,maxY:o}),c=[];return l.forEach(function(u){var f=u.displayObject,h=f.parsedStyle.pointerEvents,d=h===void 0?"auto":h,p=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(d);(!p||p&&f.isVisible())&&!f.isCulled()&&f.isInteractive()&&c.push(f)}),c.sort(function(u,f){return f.sortable.renderOrder-u.sortable.renderOrder}),c}},{key:"elementFromPointSync",value:function(r,i){var a=this.defaultView.canvas2Viewport({x:r,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),c=l.width,u=l.height;if(o<0||s<0||o>c||s>u)return null;var f=this.defaultView.viewport2Client({x:o,y:s}),h=f.x,d=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:r,y:i,viewportX:o,viewportY:s,clientX:h,clientY:d},picked:[]}),g=p.picked;return g&&g[0]||this.documentElement}},{key:"elementFromPoint",value:(function(){var n=kt(Zs().mark(function i(a,o){var s,l,c,u,f,h,d,p,g,v,y;return Zs().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,c=s.y,u=this.defaultView.getConfig(),f=u.width,h=u.height,!(l<0||c<0||l>f||c>h)){_.next=1;break}return _.abrupt("return",null);case 1:return d=this.defaultView.viewport2Client({x:l,y:c}),p=d.x,g=d.y,_.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:a,y:o,viewportX:l,viewportY:c,clientX:p,clientY:g},picked:[]});case 2:return v=_.sent,y=v.picked,_.abrupt("return",y&&y[0]||this.documentElement);case 3:case"end":return _.stop()}},i,this)}));function r(i,a){return n.apply(this,arguments)}return r})()},{key:"elementsFromPointSync",value:function(r,i){var a=this.defaultView.canvas2Viewport({x:r,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),c=l.width,u=l.height;if(o<0||s<0||o>c||s>u)return[];var f=this.defaultView.viewport2Client({x:o,y:s}),h=f.x,d=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:r,y:i,viewportX:o,viewportY:s,clientX:h,clientY:d},picked:[]}),g=p.picked;return g[g.length-1]!==this.documentElement&&g.push(this.documentElement),g}},{key:"elementsFromPoint",value:(function(){var n=kt(Zs().mark(function i(a,o){var s,l,c,u,f,h,d,p,g,v,y;return Zs().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,c=s.y,u=this.defaultView.getConfig(),f=u.width,h=u.height,!(l<0||c<0||l>f||c>h)){_.next=1;break}return _.abrupt("return",[]);case 1:return d=this.defaultView.viewport2Client({x:l,y:c}),p=d.x,g=d.y,_.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:a,y:o,viewportX:l,viewportY:c,clientX:p,clientY:g},picked:[]});case 2:return v=_.sent,y=v.picked,y[y.length-1]!==this.documentElement&&y.push(this.documentElement),_.abrupt("return",y);case 3:case"end":return _.stop()}},i,this)}));function r(i,a){return n.apply(this,arguments)}return r})()},{key:"appendChild",value:function(r,i){throw new Error(hT)}},{key:"insertBefore",value:function(r,i){throw new Error(hT)}},{key:"removeChild",value:function(r,i){throw new Error(hT)}},{key:"replaceChild",value:function(r,i,a){throw new Error(hT)}},{key:"append",value:function(){throw new Error(hT)}},{key:"prepend",value:function(){throw new Error(hT)}},{key:"getElementById",value:function(r){return this.documentElement.getElementById(r)}},{key:"getElementsByName",value:function(r){return this.documentElement.getElementsByName(r)}},{key:"getElementsByTagName",value:function(r){return this.documentElement.getElementsByTagName(r)}},{key:"getElementsByClassName",value:function(r){return this.documentElement.getElementsByClassName(r)}},{key:"querySelector",value:function(r){return this.documentElement.querySelector(r)}},{key:"querySelectorAll",value:function(r){return this.documentElement.querySelectorAll(r)}},{key:"find",value:function(r){return this.documentElement.find(r)}},{key:"findAll",value:function(r){return this.documentElement.findAll(r)}}])})(ol),T2e=(function(){function t(e){it(this,t),this.strategies=e}return at(t,[{key:"apply",value:function(n){var r=n.config,i=n.camera,a=n.renderingService,o=n.renderingContext,s=this.strategies;a.hooks.cull.tap(t.tag,function(l){if(l){var c,u=l.cullable;if(s.length===0?u.visible=o.unculledEntities.indexOf(l.entity)>-1:u.visible=s.every(function(h){return h.isVisible(i,l)}),!l.isCulled()&&l.isVisible())return l;var f=((c=r.future)===null||c===void 0?void 0:c.experimentalCancelEventPropagation)===!0;return l.dispatchEvent(new Kc(qc.CULLED),f,f),null}return l}),a.hooks.afterRender.tap(t.tag,function(l){l.cullable.visibilityPlaneMask=-1})}}])})();T2e.tag="Culling";var A2e=(function(){function t(){var e=this;it(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new HY(null),this.rootWheelEvent=new GY(null),this.onPointerMove=function(n){var r,i=(r=e.context.renderingContext.root)===null||r===void 0||(r=r.ownerDocument)===null||r===void 0?void 0:r.defaultView;if(!(i.supportsTouchEvents&&n.pointerType==="touch")){var a=e.normalizeToPointerEvent(n,i),o=Td(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,c=e.bootstrapEvent(e.rootPointerEvent,l,i,n);e.context.eventService.mapEvent(c)}}catch(u){o.e(u)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(n){var r,i=(r=e.context.renderingContext.root)===null||r===void 0||(r=r.ownerDocument)===null||r===void 0?void 0:r.defaultView,a=e.normalizeToPointerEvent(n,i),o=Td(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,c=e.bootstrapEvent(e.rootPointerEvent,l,i,n);e.context.eventService.mapEvent(c)}}catch(u){o.e(u)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}}return at(t,[{key:"apply",value:function(n){var r=this;this.context=n;var i=n.renderingService,a=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var s=r.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}),l=s.picked;return l[0]||null}),i.hooks.pointerWheel.tap(t.tag,function(o){var s=r.normalizeWheelEvent(o);r.context.eventService.mapEvent(s)}),i.hooks.pointerDown.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=r.normalizeToPointerEvent(o,a);if(r.autoPreventDefault&&s[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}var c=Td(s),u;try{for(c.s();!(u=c.n()).done;){var f=u.value,h=r.bootstrapEvent(r.rootPointerEvent,f,a,o);r.context.eventService.mapEvent(h)}}catch(d){c.e(d)}finally{c.f()}r.setCursor(r.context.eventService.cursor)}}),i.hooks.pointerUp.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=r.context.contextService.getDomElement(),l=r.context.eventService.isNativeEventFromCanvas(s,o),c=l?"":"outside",u=r.normalizeToPointerEvent(o,a),f=Td(u),h;try{for(f.s();!(h=f.n()).done;){var d=h.value,p=r.bootstrapEvent(r.rootPointerEvent,d,a,o);p.type+=c,r.context.eventService.mapEvent(p)}}catch(g){f.e(g)}finally{f.f()}r.setCursor(r.context.eventService.cursor)}}),i.hooks.pointerMove.tap(t.tag,this.onPointerMove),i.hooks.pointerOver.tap(t.tag,this.onPointerMove),i.hooks.pointerOut.tap(t.tag,this.onPointerMove),i.hooks.click.tap(t.tag,this.onClick),i.hooks.pointerCancel.tap(t.tag,function(o){var s=r.normalizeToPointerEvent(o,a),l=Td(s),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,f=r.bootstrapEvent(r.rootPointerEvent,u,a,o);r.context.eventService.mapEvent(f)}}catch(h){l.e(h)}finally{l.f()}r.setCursor(r.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(n,r,i,a){n.view=i,n.originalEvent=null,n.nativeEvent=a,n.pointerId=r.pointerId,n.width=r.width,n.height=r.height,n.isPrimary=r.isPrimary,n.pointerType=r.pointerType,n.pressure=r.pressure,n.tangentialPressure=r.tangentialPressure,n.tiltX=r.tiltX,n.tiltY=r.tiltY,n.twist=r.twist,this.transferMouseData(n,r);var o=this.context.eventService.client2Viewport({x:r.clientX,y:r.clientY}),s=o.x,l=o.y;n.viewport.x=s,n.viewport.y=l;var c=this.context.eventService.viewport2Canvas(n.viewport),u=c.x,f=c.y;return n.canvas.x=u,n.canvas.y=f,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.isTrusted=a.isTrusted,n.type==="pointerleave"&&(n.type="pointerout"),n.type.startsWith("mouse")&&(n.type=n.type.replace("mouse","pointer")),n.type.startsWith("touch")&&(n.type=ZYe[n.type]||n.type),n}},{key:"normalizeWheelEvent",value:function(n){var r=this.rootWheelEvent;this.transferMouseData(r,n),r.deltaMode=n.deltaMode,r.deltaX=n.deltaX,r.deltaY=n.deltaY,r.deltaZ=n.deltaZ;var i=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),a=i.x,o=i.y;r.viewport.x=a,r.viewport.y=o;var s=this.context.eventService.viewport2Canvas(r.viewport),l=s.x,c=s.y;return r.canvas.x=l,r.canvas.y=c,r.global.copyFrom(r.canvas),r.offset.copyFrom(r.canvas),r.nativeEvent=n,r.type=n.type,r}},{key:"transferMouseData",value:function(n,r){n.isTrusted=r.isTrusted,n.srcElement=r.srcElement,n.timeStamp=$Y.now(),n.type=r.type,n.altKey=r.altKey,n.metaKey=r.metaKey,n.shiftKey=r.shiftKey,n.ctrlKey=r.ctrlKey,n.button=r.button,n.buttons=r.buttons,n.client.x=r.clientX,n.client.y=r.clientY,n.movement.x=r.movementX,n.movement.y=r.movementY,n.page.x=r.pageX,n.page.y=r.pageY,n.screen.x=r.screenX,n.screen.y=r.screenY,n.relatedTarget=null}},{key:"setCursor",value:function(n){this.context.contextService.applyCursorStyle(n||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(n,r){var i=[];if(r.isTouchEvent(n))for(var a=0;a<n.changedTouches.length;a++){var o=n.changedTouches[a];mr(o.button)&&(o.button=0),mr(o.buttons)&&(o.buttons=1),mr(o.isPrimary)&&(o.isPrimary=n.touches.length===1&&n.type==="touchstart"),mr(o.width)&&(o.width=o.radiusX||1),mr(o.height)&&(o.height=o.radiusY||1),mr(o.tiltX)&&(o.tiltX=0),mr(o.tiltY)&&(o.tiltY=0),mr(o.pointerType)&&(o.pointerType="touch"),mr(o.pointerId)&&(o.pointerId=o.identifier||0),mr(o.pressure)&&(o.pressure=o.force||.5),mr(o.twist)&&(o.twist=0),mr(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=n.type,i.push(o)}else if(r.isMouseEvent(n)){var s=n;mr(s.isPrimary)&&(s.isPrimary=!0),mr(s.width)&&(s.width=1),mr(s.height)&&(s.height=1),mr(s.tiltX)&&(s.tiltX=0),mr(s.tiltY)&&(s.tiltY=0),mr(s.pointerType)&&(s.pointerType="mouse"),mr(s.pointerId)&&(s.pointerId=qYe),mr(s.pressure)&&(s.pressure=.5),mr(s.twist)&&(s.twist=0),mr(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,i.push(s)}else i.push(n);return i}}])})();A2e.tag="Event";var yqe=[nr.CIRCLE,nr.ELLIPSE,nr.IMAGE,nr.RECT,nr.LINE,nr.POLYLINE,nr.POLYGON,nr.TEXT,nr.PATH,nr.HTML],_qe=(function(){function t(){it(this,t)}return at(t,[{key:"isVisible",value:function(n,r){var i,a=r.cullable;if(!a.enable)return!0;var o=r.getRenderBounds();if(tf.isEmpty(o))return!1;var s=n.getFrustum(),l=(i=r.parentNode)===null||i===void 0||(i=i.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(r,o,l||fT.INDETERMINATE,s.planes),a.visible=a.visibilityPlaneMask!==fT.OUTSIDE,a.visible}},{key:"computeVisibilityWithPlaneMask",value:function(n,r,i,a){if(i===fT.OUTSIDE||i===fT.INSIDE)return i;for(var o=fT.INSIDE,s=yqe.indexOf(n.nodeName)>-1,l=0,c=a.length;l<c;++l){var u=1<<l;if((i&u)!==0&&!(s&&(l===4||l===5))){var f=a[l],h=f.normal,d=f.distance;if(pc(h,r.getPositiveFarPoint(a[l]))+d<0)return fT.OUTSIDE;pc(h,r.getNegativeFarPoint(a[l]))+d<0&&(o|=u)}}return o}}])})(),w2e=(function(){function t(){it(this,t),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return at(t,[{key:"apply",value:function(n){var r=this,i,a,o=n.config,s=n.renderingService,l=n.renderingContext,c=n.rBushRoot,u=l.root.ownerDocument.defaultView;this.rBush=c;var f=function(_){s.dirtify()},h=function(_){r.syncTasks.set(_.target,_.detail.affectChildren),s.dirtify()},d=function(_){var E=_.target;Cn.enableSizeAttenuation&&Cn.styleValueRegistry.updateSizeAttenuation(E,u.getCamera().getZoom())},p=function(_){var E=_.target,x=E.rBushNode;x!=null&&x.aabb&&r.rBush.remove(x.aabb),r.syncTasks.delete(E),Cn.sceneGraphService.dirtyToRoot(E),s.dirtify()};s.hooks.init.tap(t.tag,function(){u.addEventListener(qc.MOUNTED,d),u.addEventListener(qc.UNMOUNTED,p),u.addEventListener(qc.ATTR_MODIFIED,f),u.addEventListener(qc.BOUNDS_CHANGED,h)}),s.hooks.destroy.tap(t.tag,function(){u.removeEventListener(qc.MOUNTED,d),u.removeEventListener(qc.UNMOUNTED,p),u.removeEventListener(qc.ATTR_MODIFIED,f),u.removeEventListener(qc.BOUNDS_CHANGED,h),r.syncTasks.clear()});var g=(i=Cn.globalThis.requestIdleCallback)!==null&&i!==void 0?i:XQ.bind(Cn.globalThis),v=((a=o.future)===null||a===void 0?void 0:a.experimentalRICSyncRTree)===!0;s.hooks.endFrame.tap(t.tag,function(){r.isFirstTimeRendering?(r.isFirstTimeRendering=!1,r.syncing=!0,g(function(){r.syncRTree(!0),r.isFirstTimeRenderingFinished=!0})):v&&Cn.globalThis.requestIdleCallback&&Cn.globalThis.cancelIdleCallback?(Cn.globalThis.cancelIdleCallback(r.ricSyncRTreeId),r.ricSyncRTreeId=Cn.globalThis.requestIdleCallback(function(){return r.syncRTree()})):r.syncRTree()})}},{key:"syncNode",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n.isConnected){var i=n.rBushNode;i.aabb&&this.rBush.remove(i.aabb);var a=n.getRenderBounds();if(a){var o=n.renderable;r&&(o.dirtyRenderBounds||(o.dirtyRenderBounds=new tf),o.dirtyRenderBounds.update(a.center,a.halfExtents));var s=a.getMin(),l=ir(s,2),c=l[0],u=l[1],f=a.getMax(),h=ir(f,2),d=h[0],p=h[1];i.aabb||(i.aabb={}),i.aabb.displayObject=n,i.aabb.minX=c,i.aabb.minY=u,i.aabb.maxX=d,i.aabb.maxY=p}if(i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY))return i.aabb}}},{key:"syncRTree",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var i=[],a=new Set,o=function(l){if(!a.has(l)&&l.renderable){var c=n.syncNode(l,r);c&&(i.push(c),a.add(l))}};this.syncTasks.forEach(function(s,l){s&&l.forEach(o);for(var c=l;c;)o(c),c=c.parentElement}),this.rBush.load(i),i.length=0,this.syncing=!1}}}])})();w2e.tag="Prepare";var Z0=(function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t})({}),Gae=500,bqe=.1,Eqe=1e3,$3=new Kc(qc.MOUNTED),H3=new Kc(qc.UNMOUNTED),h7=new Kc(Z0.BEFORE_RENDER),Wae=new Kc(Z0.RERENDER),d7=new Kc(Z0.AFTER_RENDER),O2e=(function(t){function e(n){var r;it(this,e),r=Ar(this,e),r.Element=Qs,r.inited=!1,r.context={};var i=n.container,a=n.canvas,o=n.renderer,s=n.width,l=n.height,c=n.background,u=n.cursor,f=n.supportsMutipleCanvasesInOneContainer,h=n.cleanUpOnDestroy,d=h===void 0?!0:h,p=n.offscreenCanvas,g=n.devicePixelRatio,v=n.requestAnimationFrame,y=n.cancelAnimationFrame,_=n.createImage,E=n.supportsTouchEvents,x=n.supportsPointerEvents,T=n.isTouchEvent,S=n.isMouseEvent,w=n.dblClickSpeed,C=s,D=l,L=g||p2e&&window.devicePixelRatio||1;return L=L>=1?Math.ceil(L):1,a&&(C=s||YYe(a)||a.width/L,D=l||XYe(a)||a.height/L),r.customElements=new vqe,r.devicePixelRatio=L,r.requestAnimationFrame=v??XQ.bind(Cn.globalThis),r.cancelAnimationFrame=y??_2e.bind(Cn.globalThis),r.createImage=_??function(){return new window.Image},r.supportsTouchEvents=E??"ontouchstart"in Cn.globalThis,r.supportsPointerEvents=x??!!Cn.globalThis.PointerEvent,r.isTouchEvent=T??function(B){return r.supportsTouchEvents&&B instanceof Cn.globalThis.TouchEvent},r.isMouseEvent=S??function(B){return!Cn.globalThis.MouseEvent||B instanceof Cn.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(B instanceof Cn.globalThis.PointerEvent))},p&&(Cn.offscreenCanvas=p),r.document=new mqe,r.document.defaultView=r,f||HYe(i,r,d),r.initRenderingContext(ze(ze({},n),{},{width:C,height:D,background:c??"transparent",cursor:u??"default",cleanUpOnDestroy:d,devicePixelRatio:L,requestAnimationFrame:r.requestAnimationFrame,cancelAnimationFrame:r.cancelAnimationFrame,createImage:r.createImage,supportsTouchEvents:r.supportsTouchEvents,supportsPointerEvents:r.supportsPointerEvents,isTouchEvent:r.isTouchEvent,isMouseEvent:r.isMouseEvent,dblClickSpeed:w??200})),r.initDefaultCamera(C,D,o.clipSpaceNearZ),r.initRenderer(o,!0),r}return Sr(e,t),at(e,[{key:"initRenderingContext",value:function(r){this.context.config=r,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(r,i,a){var o=this,s=new Cn.CameraContribution;s.clipSpaceNearZ=a,s.setType(Fo.EXPLORING,kY.DEFAULT).setPosition(r/2,i/2,Gae).setFocalPoint(r/2,i/2,0).setOrthographic(r/-2,r/2,i/2,i/-2,bqe,Eqe),s.canvas=this,s.eventEmitter.on(qOe.UPDATED,function(){o.context.renderingContext.renderReasons.add(rk.CAMERA_CHANGED),Cn.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=s}},{key:"updateSizeAttenuation",value:function(){var r=this.getCamera().getZoom();this.document.documentElement.forEach(function(i){Cn.styleValueRegistry.updateSizeAttenuation(i,r)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var r=this;return this.readyPromise||(this.readyPromise=new Promise(function(i){r.resolveReadyPromise=function(){i(r)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1?arguments[1]:void 0;mc.clearCache();var o=((r=this.getConfig().future)===null||r===void 0?void 0:r.experimentalCancelEventPropagation)===!0;a||this.dispatchEvent(new Kc(Z0.BEFORE_DESTROY),o,o),this.frameId&&this.cancelAnimationFrame(this.frameId);var s=this.getRoot();i&&(this.unmountChildren(s),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),a||this.dispatchEvent(new Kc(Z0.AFTER_DESTROY),o,o);var l=function(u){u.currentTarget=null,u.manager=null,u.target=null,u.relatedNode=null};l($3),l(H3),l(h7),l(Wae),l(d7),l(sm),l(WY),l(VY),l(x2e)}},{key:"changeSize",value:function(r,i){this.resize(r,i)}},{key:"resize",value:function(r,i){var a,o=this.context.config;o.width=r,o.height=i,this.getContextService().resize(r,i);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(r/2,i/2,Gae).setFocalPoint(r/2,i/2,0),l===yp.ORTHOGRAPHIC?s.setOrthographic(r/-2,r/2,i/2,i/-2,s.getNear(),s.getFar()):s.setAspect(r/i);var c=((a=o.future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;this.dispatchEvent(new Kc(Z0.RESIZE,{width:r,height:i}),c,c)}},{key:"appendChild",value:function(r,i){return this.document.documentElement.appendChild(r,i)}},{key:"insertBefore",value:function(r,i){return this.document.documentElement.insertBefore(r,i)}},{key:"removeChild",value:function(r){return this.document.documentElement.removeChild(r)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(r){var i,a=this;r&&(h7.detail=r,d7.detail=r);var o=((i=this.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;this.dispatchEvent(h7,o,o);var s=this.getRenderingService();s.render(this.getConfig(),r,function(){a.dispatchEvent(Wae,o,o)}),this.dispatchEvent(d7,o,o)}},{key:"run",value:function(){var r=this,i=function(o,s){r.render(s),r.frameId=r.requestAnimationFrame(i)};i()}},{key:"initRenderer",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new FWe,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new A2e,new w2e,new T2e([new _qe])),this.loadRendererContainerModule(r),this.context.contextService=new this.context.ContextService(ze(ze({},Cn),this.context)),this.context.renderingService=new PXe(Cn,this.context),this.context.eventService=new RXe(Cn,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(r,a,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(r,a)}).catch(function(o){console.error(o)})}},{key:"initRenderingService",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){var s;i.inited=!0;var l=((s=i.getConfig().future)===null||s===void 0?void 0:s.experimentalCancelEventPropagation)===!0;a?o?i.requestAnimationFrame(function(){i.dispatchEvent(new Kc(Z0.READY),l,l)}):i.dispatchEvent(new Kc(Z0.READY),l,l):i.dispatchEvent(new Kc(Z0.RENDERER_CHANGED),l,l),i.readyPromise&&i.resolveReadyPromise(),a||i.getRoot().forEach(function(c){var u,f;(u=(f=c).dirty)===null||u===void 0||u.call(f,!0,!0)}),i.mountChildren(i.getRoot()),r.getConfig().enableAutoRendering&&i.run()})}},{key:"loadRendererContainerModule",value:function(r){var i=this,a=r.getPlugins();a.forEach(function(o){o.context=i.context,o.init(Cn)})}},{key:"setRenderer",value:function(r){var i=this.getConfig();if(i.renderer!==r){var a=i.renderer;i.renderer=r,this.destroy(!1,!0),Dr(a?.getPlugins()||[]).reverse().forEach(function(o){o.destroy(Cn)}),this.initRenderer(r)}}},{key:"setCursor",value:function(r){var i=this.getConfig();i.cursor=r,this.getContextService().applyCursorStyle(r)}},{key:"unmountChildren",value:function(r){var i=this;if(r.childNodes.forEach(function(s){i.unmountChildren(s)}),this.inited){if(r.isMutationObserved)r.dispatchEvent(H3);else{var a,o=((a=this.getConfig().future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;H3.target=r,this.dispatchEvent(H3,!0,o)}r!==this.document.documentElement&&(r.ownerDocument=null),r.isConnected=!1}r.isCustomElement&&r.disconnectedCallback&&r.disconnectedCallback()}},{key:"mountChildren",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wD(r);if(this.inited){if(!r.isConnected&&(r.ownerDocument=this.document,r.isConnected=!0,!a))if(r.isMutationObserved)r.dispatchEvent($3);else{var o,s=((o=this.getConfig().future)===null||o===void 0?void 0:o.experimentalCancelEventPropagation)===!0;$3.target=r,this.dispatchEvent($3,!0,s)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",r.nodeName);r.childNodes.forEach(function(l){i.mountChildren(l,a)}),r.isCustomElement&&r.connectedCallback&&r.connectedCallback()}},{key:"mountFragment",value:function(r){this.mountChildren(r,!1)}},{key:"client2Viewport",value:function(r){return this.getEventService().client2Viewport(r)}},{key:"viewport2Client",value:function(r){return this.getEventService().viewport2Client(r)}},{key:"viewport2Canvas",value:function(r){return this.getEventService().viewport2Canvas(r)}},{key:"canvas2Viewport",value:function(r){return this.getEventService().canvas2Viewport(r)}},{key:"getPointByClient",value:function(r,i){return this.client2Viewport({x:r,y:i})}},{key:"getClientByPoint",value:function(r,i){return this.viewport2Client({x:r,y:i})}}])})(E2e);/*!
 * @antv/g-camera-api
 * @description A simple implementation of Camera API.
 * @version 2.0.40
 * @date 7/18/2025, 7:12:58 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var xqe=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.landmarks=[],n}return Sr(e,t),at(e,[{key:"rotate",value:function(r,i,a){if(this.relElevation=hA(i),this.relAzimuth=hA(r),this.relRoll=hA(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Fo.EXPLORING){var o=Vf(wa(),[1,0,0],ns((this.rotateWorld?1:-1)*this.relElevation)),s=Vf(wa(),[0,1,0],ns((this.rotateWorld?1:-1)*this.relAzimuth)),l=Vf(wa(),[0,0,1],ns(this.relRoll)),c=qf(wa(),s,o);c=qf(wa(),c,l);var u=TP(Zr(),c);Vs(this.matrix,this.matrix,[0,0,-this.distance]),qa(this.matrix,this.matrix,u),Vs(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Fo.ORBITING||this.type===Fo.EXPLORING?this._getPosition():this.type===Fo.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,i){var a=zf(r,i,0),o=Yc(this.position);return cf(o,o,Ay(Pr(),this.right,a[0])),cf(o,o,Ay(Pr(),this.up,a[1])),this._setPosition(o),this.triggerUpdate(),this}},{key:"dolly",value:function(r){var i=this.forward,a=Yc(this.position),o=r*this.dollyingStep,s=this.distance+r*this.dollyingStep;return o=Math.max(Math.min(s,this.maxDistance),this.minDistance)-this.distance,a[0]+=o*i[0],a[1]+=o*i[1],a[2]+=o*i[2],this._setPosition(a),this.type===Fo.ORBITING||this.type===Fo.EXPLORING?this._getDistance():this.type===Fo.TRACKING&&cf(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(r){var i,a,o,s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.position,u=c===void 0?this.position:c,f=l.focalPoint,h=f===void 0?this.focalPoint:f,d=l.roll,p=l.zoom,g=new Cn.CameraContribution;g.setType(this.type,void 0),g.setPosition(u[0],(i=u[1])!==null&&i!==void 0?i:this.position[1],(a=u[2])!==null&&a!==void 0?a:this.position[2]),g.setFocalPoint(h[0],(o=h[1])!==null&&o!==void 0?o:this.focalPoint[1],(s=h[2])!==null&&s!==void 0?s:this.focalPoint[2]),g.setRoll(d??this.roll),g.setZoom(p??this.zoom);var v={name:r,matrix:SP(g.getWorldTransform()),right:Yc(g.right),up:Yc(g.up),forward:Yc(g.forward),position:Yc(g.getPosition()),focalPoint:Yc(g.getFocalPoint()),distanceVector:Yc(g.getDistanceVector()),distance:g.getDistance(),dollyingStep:g.getDollyingStep(),azimuth:g.getAzimuth(),elevation:g.getElevation(),roll:g.getRoll(),relAzimuth:g.relAzimuth,relElevation:g.relElevation,relRoll:g.relRoll,zoom:g.getZoom()};return this.landmarks.push(v),v}},{key:"gotoLandmark",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=$i(r)?this.landmarks.find(function(B){return B.name===r}):r;if(o){var s=Ln(a)?{duration:a}:a,l=s.easing,c=l===void 0?"linear":l,u=s.duration,f=u===void 0?100:u,h=s.easingFunction,d=h===void 0?void 0:h,p=s.onfinish,g=p===void 0?void 0:p,v=s.onframe,y=v===void 0?void 0:v,_=.01;this.cancelLandmarkAnimation();var E=o.position,x=o.focalPoint,T=o.zoom,S=o.roll,w=d||Cn.EasingFunction(c),C,D=function(){i.setFocalPoint(x),i.setPosition(E),i.setRoll(S),i.setZoom(T),i.computeMatrix(),i.triggerUpdate(),g?.()};if(f===0)return D();var L=function(I){C===void 0&&(C=I);var U=I-C;if(U>=f){D();return}var $=w(U/f),X=Pr(),N=Pr(),M=1,k=0;DA(X,i.focalPoint,x,$),DA(N,i.position,E,$),k=i.roll*(1-$)+S*$,M=i.zoom*(1-$)+T*$,i.setFocalPoint(X),i.setPosition(N),i.setRoll(k),i.setZoom(M);var z=cD(X,x)+cD(N,E);if(z<=_&&T===void 0&&S===void 0)return D();i.computeMatrix(),i.triggerUpdate(),U<f&&(y?.($),i.landmarkAnimationID=i.canvas.requestAnimationFrame(L))};this.canvas.requestAnimationFrame(L)}}}])})(ZOe);Cn.CameraContribution=xqe;/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.27
 * @date 7/18/2025, 7:14:45 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var p7=(function(t){function e(n,r,i,a){var o;return it(this,e),o=Ar(this,e,[n]),o.currentTime=i,o.timelineTime=a,o.target=r,o.type="finish",o.bubbles=!1,o.currentTarget=r,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=i,o.timelineTime=a,o}return Sr(e,t),at(e)})(h4),Sqe=0,Tqe=(function(){function t(e,n){var r;it(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(Sqe++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return at(t,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(r,i){n.resolveReadyPromise=function(){r(n)},n.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var n=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(r,i){n.resolveFinishedPromise=function(){r(n)},n.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(n){if(n=Number(n),!isNaN(n)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var r;this._startTime=Number((r=this.timeline)===null||r===void 0?void 0:r.currentTime)-n/this.playbackRate}this.currentTimePending=!1,this._currentTime!==n&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(n,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(n){if(n!==null){if(this.updatePromises(),n=Number(n),isNaN(n)||this._paused||this._idle)return;this._startTime=n,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(n){if(n!==this._playbackRate){this.updatePromises();var r=this.currentTime;this._playbackRate=n,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),r!==null&&(this.currentTime=r),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var n;if((n=this.effect.target)!==null&&n!==void 0&&n.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var r=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==r&&(i==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):r==="pending"?this.resolveReadyPromise():i==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&i!==r&&(i==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):i==="finished"?this.resolveFinishedPromise():r==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var n=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var r=new p7(null,this,this.currentTime,null);setTimeout(function(){n.oncancel(r)})}}},{key:"reverse",value:function(){this.updatePromises();var n=this.currentTime;this.playbackRate*=-1,this.play(),n!==null&&(this.currentTime=n),this.updatePromises()}},{key:"updatePlaybackRate",value:function(n){this.playbackRate=n}},{key:"targetAnimations",value:function(){var n,r=(n=this.effect)===null||n===void 0?void 0:n.target;return r.getAnimations()}},{key:"markTarget",value:function(){var n=this.targetAnimations();n.indexOf(this)===-1&&n.push(this)}},{key:"unmarkTarget",value:function(){var n=this.targetAnimations(),r=n.indexOf(this);r!==-1&&n.splice(r,1)}},{key:"tick",value:function(n,r){!this._idle&&!this._paused&&(this._startTime===null?r&&(this.startTime=n-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((n-this._startTime)*this.playbackRate)),r&&(this.currentTimePending=!1,this.fireEvents(n))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(jo)}},{key:"addEventListener",value:function(n,r,i){throw new Error(jo)}},{key:"removeEventListener",value:function(n,r,i){throw new Error(jo)}},{key:"dispatchEvent",value:function(n){throw new Error(jo)}},{key:"commitStyles",value:function(){throw new Error(jo)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(-1))}else{var r;this._inEffect=!!((r=this.effect)!==null&&r!==void 0&&r.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(n,r){n!==this._currentTime&&(this._currentTime=n,this._isFinished&&!r&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(n){var r=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new p7(null,this,this.currentTime,n);setTimeout(function(){r.onfinish&&r.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new p7(null,this,this.currentTime,n);this.onframe(a)}this._finishedFlag=!1}}}])})(),Aqe=4,wqe=.001,Oqe=1e-7,Cqe=10,oC=11,G3=1/(oC-1),Rqe=typeof Float32Array=="function",C2e=function(e,n){return 1-3*n+3*e},R2e=function(e,n){return 3*n-6*e},M2e=function(e){return 3*e},OD=function(e,n,r){return((C2e(n,r)*e+R2e(n,r))*e+M2e(n))*e},P2e=function(e,n,r){return 3*C2e(n,r)*e*e+2*R2e(n,r)*e+M2e(n)},Mqe=function(e,n,r,i,a){var o,s,l=0;do s=n+(r-n)/2,o=OD(s,i,a)-e,o>0?r=s:n=s;while(Math.abs(o)>Oqe&&++l<Cqe);return s},Pqe=function(e,n,r,i){for(var a=0;a<Aqe;++a){var o=P2e(n,r,i);if(o===0)return n;var s=OD(n,r,i)-e;n-=s/o}return n},QQ=function(e,n,r,i){if(!(e>=0&&e<=1&&r>=0&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===i)return function(l){return l};for(var a=Rqe?new Float32Array(oC):new Array(oC),o=0;o<oC;++o)a[o]=OD(o*G3,e,r);var s=function(c){for(var u=0,f=1,h=oC-1;f!==h&&a[f]<=c;++f)u+=G3;--f;var d=(c-a[f])/(a[f+1]-a[f]),p=u+d*G3,g=P2e(p,e,r);return g>=wqe?Pqe(c,p,e,r):g===0?p:Mqe(c,u,u+G3,e,r)};return function(l){return l===0||l===1?l:OD(s(l),n,i)}},Nqe=function(e){return e=e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},W3=function(e){return Math.pow(e,2)},V3=function(e){return Math.pow(e,3)},Y3=function(e){return Math.pow(e,4)},X3=function(e){return Math.pow(e,5)},q3=function(e){return Math.pow(e,6)},Z3=function(e){return 1-Math.cos(e*Math.PI/2)},K3=function(e){return 1-Math.sqrt(1-e*e)},Q3=function(e){return e*e*(3*e-2)},J3=function(e){for(var n,r=4;e<((n=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((n*3-2)/22-e,2)},eI=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=ir(n,2),i=r[0],a=i===void 0?1:i,o=r[1],s=o===void 0?.5:o,l=ga(Number(a),1,10),c=ga(Number(s),.1,2);return e===0||e===1?e:-l*Math.pow(2,10*(e-1))*Math.sin((e-1-c/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/c)},r2=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=ir(n,4),a=i[0],o=a===void 0?1:a,s=i[1],l=s===void 0?100:s,c=i[2],u=c===void 0?10:c,f=i[3],h=f===void 0?0:f;o=ga(o,.1,1e3),l=ga(l,.1,1e3),u=ga(u,.1,1e3),h=ga(h,.1,1e3);var d=Math.sqrt(l/o),p=u/(2*Math.sqrt(l*o)),g=p<1?d*Math.sqrt(1-p*p):0,v=1,y=p<1?(p*d+-h)/g:-h+d,_=r?r*e/1e3:e;return p<1?_=Math.exp(-_*p*d)*(v*Math.cos(g*_)+y*Math.sin(g*_)):_=(v+y*_)*Math.exp(-_*d),e===0||e===1?e:1-_},g7=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n,i=ir(r,2),a=i[0],o=a===void 0?10:a,s=i[1],l=s==="start"?Math.ceil:Math.floor;return l(ga(e,0,1)*o)/o},Vae=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=ir(n,4),i=r[0],a=r[1],o=r[2],s=r[3];return QQ(i,a,o,s)(e)},tI=QQ(.42,0,1,1),fp=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-e(1-n,r,i)}},hp=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return n<.5?e(n*2,r,i)/2:1-e(n*-2+2,r,i)/2}},dp=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return n<.5?(1-e(1-n*2,r,i))/2:(e(n*2-1,r,i)+1)/2}},Yae={steps:g7,"step-start":function(e){return g7(e,[1,"start"])},"step-end":function(e){return g7(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":Vae,ease:function(e){return Vae(e,[.25,.1,.25,1])},in:tI,out:fp(tI),"in-out":hp(tI),"out-in":dp(tI),"in-quad":W3,"out-quad":fp(W3),"in-out-quad":hp(W3),"out-in-quad":dp(W3),"in-cubic":V3,"out-cubic":fp(V3),"in-out-cubic":hp(V3),"out-in-cubic":dp(V3),"in-quart":Y3,"out-quart":fp(Y3),"in-out-quart":hp(Y3),"out-in-quart":dp(Y3),"in-quint":X3,"out-quint":fp(X3),"in-out-quint":hp(X3),"out-in-quint":dp(X3),"in-expo":q3,"out-expo":fp(q3),"in-out-expo":hp(q3),"out-in-expo":dp(q3),"in-sine":Z3,"out-sine":fp(Z3),"in-out-sine":hp(Z3),"out-in-sine":dp(Z3),"in-circ":K3,"out-circ":fp(K3),"in-out-circ":hp(K3),"out-in-circ":dp(K3),"in-back":Q3,"out-back":fp(Q3),"in-out-back":hp(Q3),"out-in-back":dp(Q3),"in-bounce":J3,"out-bounce":fp(J3),"in-out-bounce":hp(J3),"out-in-bounce":dp(J3),"in-elastic":eI,"out-elastic":fp(eI),"in-out-elastic":hp(eI),"out-in-elastic":dp(eI),spring:r2,"spring-in":r2,"spring-out":fp(r2),"spring-in-out":hp(r2),"spring-out-in":dp(r2)},Iqe=function(e){return Nqe(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},Lqe=function(e){return Yae[Iqe(e)]||Yae.linear},kqe=function(e){return e},Dqe=1,Bqe=.5,Xae=0;function qae(t,e){return function(n){if(n>=1)return 1;var r=1/t;return n+=e*r,n-n%r}}var nI="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",Fqe=new RegExp("cubic-bezier\\(".concat(nI,",").concat(nI,",").concat(nI,",").concat(nI,"\\)")),Uqe=/steps\(\s*(\d+)\s*\)/,jqe=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function JQ(t){var e=Fqe.exec(t);if(e)return QQ.apply(void 0,Dr(e.slice(1).map(Number)));var n=Uqe.exec(t);if(n)return qae(Number(n[1]),Xae);var r=jqe.exec(t);return r?qae(Number(r[1]),{start:Dqe,middle:Bqe,end:Xae}[r[2]]):Lqe(t)}function zqe(t){return Math.abs($qe(t)/(t.playbackRate||1))}function $qe(t){var e;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((e=t.iterations)!==null&&e!==void 0?e:1)}var N2e=0,eJ=1,g4=2,I2e=3;function Hqe(t,e,n){if(e===null)return N2e;var r=n.endTime;return e<Math.min(n.delay,r)?eJ:e>=Math.min(n.delay+t+n.endDelay,r)?g4:I2e}function Gqe(t,e,n,r,i){switch(r){case eJ:return e==="backwards"||e==="both"?0:null;case I2e:return n-i;case g4:return e==="forwards"||e==="both"?t:null;case N2e:return null}}function Wqe(t,e,n,r,i){var a=i;return t===0?e!==eJ&&(a+=n):a+=r/t,a}function Vqe(t,e,n,r,i,a){var o=t===1/0?e%1:t%1;return o===0&&n===g4&&r!==0&&(i!==0||a===0)&&(o=1),o}function Yqe(t,e,n,r){return t===g4&&e===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function Xqe(t,e,n){var r=t;if(t!=="normal"&&t!=="reverse"){var i=e;t==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function qqe(t,e,n){var r=Hqe(t,e,n),i=Gqe(t,n.fill,e,r,n.delay);if(i===null)return null;var a=n.duration==="auto"?0:n.duration,o=Wqe(a,r,n.iterations,i,n.iterationStart),s=Vqe(o,n.iterationStart,r,n.iterations,i,a),l=Yqe(r,n.iterations,s,o),c=Xqe(n.direction,l,s);return n.currentIteration=l,n.progress=c,n.easingFunction(c)}function Zqe(t,e,n){var r=Kqe(t,e),i=Qqe(r,n);return function(a,o){if(o!==null)i.filter(function(l){return o>=l.applyFrom&&o<l.applyTo}).forEach(function(l){var c=o-l.startOffset,u=l.endOffset-l.startOffset,f=u===0?0:c/u;a.setAttribute(l.property,l.interpolation(f),!1,!1)});else for(var s in r)L2e(s)&&a.setAttribute(s,null)}}function L2e(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function Kqe(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(L2e(i)){var a={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:JQ(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}function Qqe(t,e){var n=[];for(var r in t)for(var i=t[r],a=0;a<i.length-1;a++){var o=a,s=a+1,l=i[o].computedOffset,c=i[s].computedOffset,u=l,f=c;a===0&&(u=-1/0,c===0&&(s=o)),a===i.length-2&&(f=1/0,l===1&&(o=s)),n.push({applyFrom:u,applyTo:f,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:Jqe(r,i[o].value,i[s].value,e)})}return n.sort(function(h,d){return h.startOffset-d.startOffset}),n}var Zae=function(e,n,r){return function(i){var a=k2e(e,n,i);return Ln(a)?a:r(a)}};function Jqe(t,e,n,r){var i=h2e[t];if(i&&i.syntax&&i.int){var a=Cn.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(e,r):e,l=o?o(n,r):n,c=a.mixer(s,l,r);if(c){var u=Zae.apply(void 0,Dr(c));return function(f){return f===0?e:f===1?n:u(f)}}}}return Zae(!1,!0,function(f){return f?n:e})}function k2e(t,e,n){if(typeof t=="number"&&typeof e=="number")return t*(1-n)+e*n;if(typeof t=="boolean"&&typeof e=="boolean"||typeof t=="string"&&typeof e=="string")return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(k2e(t[s<r?s:r-1],e[s<i?s:i-1],n));return o}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var eZe=(function(){function t(){it(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=kqe,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return at(t,[{key:"easing",get:function(){return this._easing},set:function(n){this.easingFunction=JQ(n),this._easing=n}}])})();function tZe(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!e[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),e[a]=o}r[a]!==void 0&&r[a]!==null&&(e[a][n]=r[a])}}return e.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),e}function Kae(t,e){if(t===null)return[];Array.isArray(t)||(t=tZe(t));for(var n=t.map(function(l){var c={};e!=null&&e.composite&&(c.composite="auto");for(var u in l){var f=l[u];if(u==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");c.computedOffset=f}}else if(u==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));c[u]=f}return c.offset===void 0&&(c.offset=null),c.easing===void 0&&(c.easing=e?.easing||"linear"),c.composite===void 0&&(c.composite="auto"),c}),r=!0,i=-1/0,a=0;a<n.length;a++){var o=n[a].offset;if(Kn(o))r=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}n=n.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,c=n,u=c.length;if(n[u-1].computedOffset=Number((l=n[u-1].offset)!==null&&l!==void 0?l:1),u>1){var f;n[0].computedOffset=Number((f=n[0].offset)!==null&&f!==void 0?f:0)}for(var h=0,d=Number(n[0].computedOffset),p=1;p<u;p++){var g=n[p].computedOffset;if(!Kn(g)&&!Kn(d)){for(var v=1;v<p-h;v++)n[h+v].computedOffset=d+(Number(g)-d)*v/(p-h);h=p,d=Number(g)}}}return r||s(),n}var nZe="backwards|forwards|both|none".split("|"),rZe="reverse|alternate|alternate-reverse".split("|");function iZe(t,e){var n=new eZe;return typeof t=="number"&&!isNaN(t)?n.duration=t:t!==void 0&&Object.keys(t).forEach(function(r){if(t[r]!==void 0&&t[r]!==null&&t[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof t[r]!="number"||isNaN(t[r]))||r==="fill"&&nZe.indexOf(t[r])===-1||r==="direction"&&rZe.indexOf(t[r])===-1)return;n[r]=t[r]}}),n}function aZe(t,e){return t=oZe(t??{duration:"auto"}),iZe(t)}function oZe(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var sZe=(function(){function t(e,n,r){var i=this;it(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=aZe(r),this.timing.effect=this,this.timing.activeDuration=zqe(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=Kae(n,this.timing),this.interpolations=Zqe(this.normalizedKeyframes,this.timing,this.target);var a=Cn.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(s,l){return l==="duration"?s.duration==="auto"?0:s.duration:l==="fill"?s.fill==="auto"?"none":s.fill:l==="localTime"?i.animation&&i.animation.currentTime||null:l==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:s.currentIteration||0:l==="progress"?!i.animation||i.animation.playState!=="running"?null:s.progress||0:s[l]},set:function(){return!0}}):this.timing}return at(t,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(n){return n===null?!1:(this.timeFraction=qqe(this.timing.activeDuration,n,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(n){this.normalizedKeyframes=Kae(n)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(n){var r=this;Object.keys(n||{}).forEach(function(i){r.timing[i]=n[i]})}}])})();function Qae(t,e){return Number(t.id)-Number(e.id)}var lZe=(function(){function t(e){var n=this;it(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(Qae),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(a){a[1](r)}),n.applyPendingEffects()},this.document=e}return at(t,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(n,r,i){var a=new sZe(n,r,i),o=new Tqe(a,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o}},{key:"applyDirtiedAnimation",value:function(n){var r=this;if(!this.inTick){n.markTarget();var i=n.targetAnimations();i.sort(Qae);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(o){var s=r.animations.indexOf(o);s!==-1&&r.animations.splice(s,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(n){n?.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(n){return n.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(n){return n.playState!=="finished"&&n.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(n){var r=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([r,n]),r}},{key:"requestAnimationFrame",value:function(n){var r=this;return this.rAF(function(i){r.updateAnimationsPromises(),n(i),r.updateAnimationsPromises()})}},{key:"tick",value:function(n,r,i){var a=this,o,s;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1;var l=[],c=[],u=[],f=[];return i.forEach(function(h){h.tick(n,r),h._inEffect?(c.push(h.effect),h.markTarget()):(l.push(h.effect),h.unmarkTarget()),h._needsTick&&(a.ticking=!0);var d=h._inEffect||h._needsTick;h._inTimeline=d,d?u.push(h):f.push(h)}),(o=this.pendingEffects).push.apply(o,l),(s=this.pendingEffects).push.apply(s,c),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[u,f]}}])})();Cn.EasingFunction=JQ;Cn.AnimationTimeline=lZe;function ai(t){return new CD([t],null,t,t.ownerDocument)}let CD=class Tu{constructor(e=null,n=null,r=null,i=null,a=[null,null,null,null,null],o=[],s=[]){this._elements=Array.from(e),this._data=n,this._parent=r,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}selectAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new Tu(n,null,this._elements[0],this._document)}selectFacetAll(e){const n=typeof e=="string"?this._parent.querySelectorAll(e):e;return new Tu(this._elements,null,this._parent,this._document,void 0,void 0,n)}select(e){const n=typeof e=="string"?this._parent.querySelectorAll(e)[0]||null:e;return new Tu([n],null,n,this._document)}append(e){const n=typeof e=="function"?e:()=>this.createElement(e),r=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const a=this._data[i],[o,s]=Array.isArray(a)?a:[a,null],l=n(o,i);l.__data__=o,s!==null&&(l.__fromElements__=s),this._parent.appendChild(l),r.push(l)}return new Tu(r,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const a=this._elements[i],o=a.__data__,s=n(o,i);a.appendChild(s),r.push(s)}return new Tu(r,null,r[0],this._document)}}maybeAppend(e,n,r){const i=this._elements[0],a=i.getElementById(e);if(a)return new Tu([a],null,this._parent,this._document);const o=typeof n=="string"?this.createElement(n):n();return o.id=e,r&&(o.className=r),i.appendChild(o),new Tu([o],null,this._parent,this._document)}data(e,n=i=>i,r=()=>null){const i=[],a=[],o=new Set(this._elements),s=[],l=new Set,c=new Map(this._elements.map((d,p)=>[n(d.__data__,p),d])),u=new Map(this._facetElements.map((d,p)=>[n(d.__data__,p),d])),f=Go(this._elements,d=>r(d.__data__));for(let d=0;d<e.length;d++){const p=e[d],g=n(p,d),v=r(p,d);if(c.has(g)){const y=c.get(g);y.__data__=p,y.__facet__=!1,a.push(y),o.delete(y),c.delete(g)}else if(u.has(g)){const y=u.get(g);y.__data__=p,y.__facet__=!0,a.push(y),u.delete(g)}else if(f.has(g)){const y=f.get(g);s.push([p,y]);for(const _ of y)o.delete(_);f.delete(g)}else if(c.has(v)){const y=c.get(v);y.__toData__?y.__toData__.push(p):y.__toData__=[p],l.add(y),o.delete(y)}else i.push(p)}const h=[new Tu([],i,this._parent,this._document),new Tu(a,null,this._parent,this._document),new Tu(o,null,this._parent,this._document),new Tu([],s,this._parent,this._document),new Tu(l,null,this._parent,this._document)];return new Tu(this._elements,null,this._parent,this._document,h)}merge(e){const n=[...this._elements,...e._elements],r=[...this._transitions,...e._transitions];return new Tu(n,null,this._parent,this._document,void 0,r)}createElement(e){if(this._document)return this._document.createElement(e,{});const n=Tu.registry[e];return n?new n:zA(`Unknown node type: ${e}`)}join(e=o=>o,n=o=>o,r=o=>o.remove(),i=o=>o,a=o=>o.remove()){const o=e(this._enter),s=n(this._update),l=r(this._exit),c=i(this._merge),u=a(this._split);return s.merge(o).merge(l).merge(c).merge(u)}remove(){for(let e=0;e<this._elements.length;e++){const n=this._transitions[e];if(this._elements[e].__removed__=!0,n){const r=Array.isArray(n)?n:[n];Promise.all(r.map(i=>i.finished)).then(()=>{const i=this._elements[e];i.__removed__&&i.remove()})}else{const r=this._elements[e];r.__removed__&&r.remove()}}return new Tu([],null,this._parent,this._document,void 0,this._transitions)}each(e){for(let n=0;n<this._elements.length;n++){const r=this._elements[n],i=r.__data__;e(i,n,r)}return this}attr(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,a,o){n!==void 0&&(o[e]=r(i,a,o))})}style(e,n){const r=typeof n!="function"?()=>n:n;return this.each(function(i,a,o){n!==void 0&&(o.style[e]=r(i,a,o))})}transition(e){const n=typeof e!="function"?()=>e:e,{_transitions:r}=this;return this.each(function(i,a,o){r[a]=n(i,a,o)})}on(e,n){return this.each(function(r,i,a){a.addEventListener(e,n)}),this}call(e,...n){return e(this,...n),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}};CD.registry={g:Cy,rect:Wx,circle:yx,path:Kf,text:Jg,ellipse:qQ,image:ZQ,line:Rw,polygon:Mw,polyline:KQ,html:p4};function rI(t,e,n){return Math.max(e,Math.min(t,n))}function RD(t,e=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(e))}function jr(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function cZe(t,e){return e.forEach((n,r)=>r===0?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])),t.closePath(),t}function uZe(t,e,n){const{arrowSize:r}=n,i=typeof r=="string"?+parseFloat(r)/100*Xs(t,e):r,a=Math.PI/6,o=Math.atan2(e[1]-t[1],e[0]-t[0]),s=Math.PI/2-o-a,l=[e[0]-i*Math.sin(s),e[1]-i*Math.cos(s)],c=o-a,u=[e[0]-i*Math.cos(c),e[1]-i*Math.sin(c)];return[l,u]}function zR(t,e,n,r,i){const a=Vp(ul(r,e))+Math.PI,o=Vp(ul(r,n))+Math.PI;return t.arc(r[0],r[1],i,a,o,o-a<0),t}function D2e(t,e,n,r="y",i="between",a=!1){const o=(v,y)=>v==="y"||v===!0?y?180:90:y?90:0,s=r==="y"||r===!0?n:e,l=o(r,a),c=Gx(s),[u,f]=fy(c,v=>s[v]),h=new wy({domain:[u,f],range:[0,100]}),d=v=>Ln(s[v])&&!Number.isNaN(s[v])?h.map(s[v]):0,p={between:v=>`${t[v]} ${d(v)}%`,start:v=>v===0?`${t[v]} ${d(v)}%`:`${t[v-1]} ${d(v)}%, ${t[v]} ${d(v)}%`,end:v=>v===t.length-1?`${t[v]} ${d(v)}%`:`${t[v]} ${d(v)}%, ${t[v+1]} ${d(v)}%`},g=c.sort((v,y)=>d(v)-d(y)).map(p[i]||p.between).join(",");return`linear-gradient(${l}deg, ${g})`}function v4(t){const[e,n,r,i]=t;return[i,e,n,r]}function Vx(t,e,n){const[r,i,,a]=as(t)?v4(e):e,[o,s]=n,l=t.getCenter(),c=HA(ul(r,l)),u=HA(ul(i,l)),f=u===c&&o!==s?u+Math.PI*2:u,h=1e-4;return{startAngle:c+h,endAngle:(f-c>=0?f:Math.PI*2+f)-h,innerRadius:Xs(a,l),outerRadius:Xs(r,l)}}function tJ(t){const{colorAttribute:e,opacityAttribute:n=e}=t;return`${n}Opacity`}function B2e(t,e){if(!Mo(t))return"";const n=t.getCenter(),{transform:r}=e;return`translate(${n[0]}, ${n[1]}) ${r||""}`}function nJ(t){if(t.length===1)return t[0];const[[e,n,r=0],[i,a,o=0]]=t;return[(e+i)/2,(n+a)/2,(r+o)/2]}var ik=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function F2e(t,e,n,r,i={}){const{inset:a=0,radius:o=0,insetLeft:s=a,insetTop:l=a,insetRight:c=a,insetBottom:u=a,radiusBottomLeft:f=o,radiusBottomRight:h=o,radiusTopLeft:d=o,radiusTopRight:p=o,minWidth:g=-1/0,maxWidth:v=1/0,minHeight:y=-1/0}=i,_=ik(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!Mo(r)&&!DOe(r)){const C=!!as(r),[D,,L]=C?v4(e):e,[B,I]=D,[U,$]=ul(L,D),X=U>0?B:B+U,N=$>0?I:I+$,M=Math.abs(U),k=Math.abs($),z=X+s,j=N+l,V=M-(s+c),Q=k-(l+u),ee=C?rI(V,y,1/0):rI(V,g,v),re=C?rI(Q,g,v):rI(Q,y,1/0),ne=C?z:z-(ee-V)/2,le=C?j-(re-Q)/2:j-(re-Q);return ai(t.createElement("rect",{})).style("x",ne).style("y",le).style("width",ee).style("height",re).style("radius",[d,p,h,f]).call(jr,_).node()}const{y:E,y1:x}=n,T=r.getCenter(),S=Vx(r,e,[E,x]),w=OK().cornerRadius(o).padAngle(a*Math.PI/180);return ai(t.createElement("path",{})).style("d",w(S)).style("transform",`translate(${T[0]}, ${T[1]})`).style("radius",o).style("inset",a).call(jr,_).node()}const LP=(t,e)=>{const{colorAttribute:n,opacityAttribute:r="fill",first:i=!0,last:a=!0}=t,o=ik(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:s,document:l}=e;return(c,u,f)=>{const{color:h,radius:d=0}=f,p=ik(f,["color","radius"]),g=p.lineWidth||1,{stroke:v,radius:y=d,radiusTopLeft:_=y,radiusTopRight:E=y,radiusBottomRight:x=y,radiusBottomLeft:T=y,innerRadius:S=0,innerRadiusTopLeft:w=S,innerRadiusTopRight:C=S,innerRadiusBottomRight:D=S,innerRadiusBottomLeft:L=S,lineWidth:B=n==="stroke"||v?g:0,inset:I=0,insetLeft:U=I,insetRight:$=I,insetBottom:X=I,insetTop:N=I,minWidth:M,maxWidth:k,minHeight:z}=o,j=ik(o,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:V=h,opacity:Q}=u,ee=[i?_:w,i?E:C,a?x:D,a?T:L],re=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];as(s)&&re.push(re.shift());const ne=Object.assign(Object.assign({radius:y},Object.fromEntries(re.map((le,ue)=>[le,ee[ue]]))),{inset:I,insetLeft:U,insetRight:$,insetBottom:X,insetTop:N,minWidth:M,maxWidth:k,minHeight:z});return ai(F2e(l,c,u,s,ne)).call(jr,p).style("fill","transparent").style(n,V).style(tJ(t),Q).style("lineWidth",B).style("stroke",v===void 0?V:v).call(jr,j).node()}};LP.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Yx=(t,e)=>LP(Object.assign({colorAttribute:"fill"},t),e);Yx.props=Object.assign(Object.assign({},LP.props),{defaultMarker:"square"});const m4=(t,e)=>LP(Object.assign({colorAttribute:"stroke"},t),e);m4.props=Object.assign(Object.assign({},LP.props),{defaultMarker:"hollowSquare"});var Jae=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function fZe(t,e,n){const[r,i,a,o]=t;if(as(n)){const c=[e?e[0][0]:i[0],i[1]],u=[e?e[3][0]:a[0],a[1]];return[r,c,u,o]}const s=[i[0],e?e[0][1]:i[1]],l=[a[0],e?e[3][1]:a[1]];return[r,s,l,o]}const rJ=(t,e)=>{const{adjustPoints:n=fZe}=t,r=Jae(t,["adjustPoints"]),{coordinate:i,document:a}=e;return(o,s,l,c)=>{const{index:u}=s,{color:f}=l,h=Jae(l,["color"]),d=c[u+1],p=n(o,d,i),g=!!as(i),[v,y,_,E]=g?v4(p):p,{color:x=f,opacity:T}=s,S=xw().curve(RK)([v,y,_,E]);return ai(a.createElement("path",{})).call(jr,h).style("d",S).style("fill",x).style("fillOpacity",T).call(jr,r).node()}};rJ.props={defaultMarker:"square"};function hZe(t,e,n){const[r,i,a,o]=t;if(as(n)){const c=[e?e[0][0]:(i[0]+a[0])/2,i[1]],u=[e?e[3][0]:(i[0]+a[0])/2,a[1]];return[r,c,u,o]}const s=[i[0],e?e[0][1]:(i[1]+a[1])/2],l=[a[0],e?e[3][1]:(i[1]+a[1])/2];return[r,s,l,o]}const U2e=(t,e)=>rJ(Object.assign({adjustPoints:hZe},t),e);U2e.props={defaultMarker:"square"};function VA(t){const e=typeof t=="function"?t:t.render;return class extends d4{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){e(this)}}}var eoe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const dZe=VA(t=>{const{d1:e,d2:n,style1:r,style2:i}=t.attributes,a=t.ownerDocument;ai(t).maybeAppend("line",()=>a.createElement("path",{})).style("d",e).call(jr,r),ai(t).maybeAppend("line1",()=>a.createElement("path",{})).style("d",n).call(jr,i)});function pZe(t,e){const n=[],r=[];let i=!1,a=null;for(const o of t)!e(o[0])||!e(o[1])?i=!0:(n.push(o),i&&(i=!1,r.push([a,o])),a=o);return[n,r]}const Xp=(t,e)=>{const{curve:n,gradient:r=!1,gradientColor:i="between",defined:a=u=>!Number.isNaN(u)&&u!==void 0&&u!==null,connect:o=!1}=t,s=eoe(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:l,document:c}=e;return(u,f,h)=>{const{color:d,lineWidth:p}=h,g=eoe(h,["color","lineWidth"]),{color:v=d,size:y=p,seriesColor:_,seriesX:E,seriesY:x}=f,T=B2e(l,f),S=as(l),w=r&&_?D2e(_,E,x,r,i,S):v,C=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),w&&{stroke:w}),y&&{lineWidth:y}),T&&{transform:T}),s);let D;if(Mo(l)){const X=l.getCenter();D=N=>u9e().angle((M,k)=>HA(ul(N[k],X))).radius((M,k)=>Xs(N[k],X)).defined(([M,k])=>a(M)&&a(k)).curve(n)(N)}else D=xw().x(X=>X[0]).y(X=>X[1]).defined(([X,N])=>a(X)&&a(N)).curve(n);const[L,B]=pZe(u,a),I=Vn(C,"connect"),U=!!B.length;if(!U||o&&!Object.keys(I).length)return ai(c.createElement("path",{})).style("d",D(L)||[]).call(jr,C).node();if(U&&!o)return ai(c.createElement("path",{})).style("d",D(u)).call(jr,C).node();const $=X=>X.map(D).join(",");return ai(new dZe).style("style1",Object.assign(Object.assign({},C),I)).style("style2",C).style("d1",$(B)).style("d2",D(u)).node()}};Xp.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const j2e=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const i=Mo(n)?RK:CK;return Xp(Object.assign({curve:i},t),e)(...r)}};j2e.props=Object.assign(Object.assign({},Xp.props),{defaultMarker:"line"});var gZe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const z2e=(t,e)=>{const n=gZe(t,[]),{coordinate:r}=e;return(...i)=>{const a=Mo(r)?oTe:as(r)?sTe:lTe;return Xp(Object.assign({curve:a},n),e)(...i)}};z2e.props=Object.assign(Object.assign({},Xp.props),{defaultMarker:"smooth"});const $2e=(t,e)=>Xp(Object.assign({curve:cTe},t),e);$2e.props=Object.assign(Object.assign({},Xp.props),{defaultMarker:"hv"});const H2e=(t,e)=>Xp(Object.assign({curve:uTe},t),e);H2e.props=Object.assign(Object.assign({},Xp.props),{defaultMarker:"vh"});const G2e=(t,e)=>Xp(Object.assign({curve:fTe},t),e);G2e.props=Object.assign(Object.assign({},Xp.props),{defaultMarker:"hvh"});var vZe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function mZe(t,e,n,r,i){const a=ul(n,e),o=Vp(a),s=o+Math.PI/2,l=[r/2*Math.cos(s),r/2*Math.sin(s)],c=[i/2*Math.cos(s),i/2*Math.sin(s)],u=[i/2*Math.cos(o),i/2*Math.sin(o)],f=[r/2*Math.cos(o),r/2*Math.sin(o)],h=P3(e,l),d=P3(n,c),p=P3(d,u),g=P3(n,u),v=ul(g,c),y=ul(n,c),_=ul(e,l),E=ul(_,f),x=ul(e,f),T=ul(h,f);t.moveTo(...h),t.lineTo(...d),t.arcTo(...p,...g,i/2),t.arcTo(...v,...y,i/2),t.lineTo(..._),t.arcTo(...E,...x,r/2),t.arcTo(...T,...h,r/2),t.closePath()}const W2e=(t,e)=>{const{document:n}=e;return(r,i,a)=>{const{seriesSize:o,color:s}=i,{color:l}=a,c=vZe(a,["color"]),u=iv();for(let f=0;f<r.length-1;f++){const h=r[f],d=r[f+1],p=o[f],g=o[f+1];[...h,...d].every(Yo)&&mZe(u,h,d,p,g)}return ai(n.createElement("path",{})).call(jr,c).style("fill",s||l).style("d",u.toString()).call(jr,t).node()}};W2e.props=Object.assign(Object.assign({},Xp.props),{defaultMarker:"line"});var yZe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const iJ=(t,e,n)=>[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]];iJ.style=["fill"];const V2e=iJ.bind(void 0);V2e.style=["stroke","lineWidth"];const y4=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]];y4.style=["fill"];const Y2e=y4.bind(void 0);Y2e.style=["fill"];const X2e=y4.bind(void 0);X2e.style=["stroke","lineWidth"];const aJ=(t,e,n)=>{const r=n*.618;return[["M",t-r,e],["L",t,e-n],["L",t+r,e],["L",t,e+n],["Z"]]};aJ.style=["fill"];const q2e=aJ.bind(void 0);q2e.style=["stroke","lineWidth"];const oJ=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]};oJ.style=["fill"];const Z2e=oJ.bind(void 0);Z2e.style=["stroke","lineWidth"];const sJ=(t,e,n)=>{const r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]};sJ.style=["fill"];const K2e=sJ.bind(void 0);K2e.style=["stroke","lineWidth"];const lJ=(t,e,n)=>{const r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]};lJ.style=["fill"];const Q2e=lJ.bind(void 0);Q2e.style=["stroke","lineWidth"];const cJ=(t,e,n)=>{const r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]};cJ.style=["fill"];const J2e=cJ.bind(void 0);J2e.style=["stroke","lineWidth"];const eCe=(t,e,n)=>[["M",t,e+n],["L",t,e-n]];eCe.style=["stroke","lineWidth"];const tCe=(t,e,n)=>[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]];tCe.style=["stroke","lineWidth"];const nCe=(t,e,n)=>[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]];nCe.style=["stroke","lineWidth"];const rCe=(t,e,n)=>[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]];rCe.style=["stroke","lineWidth"];const iCe=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];iCe.style=["stroke","lineWidth"];const uJ=(t,e,n)=>[["M",t-n,e],["L",t+n,e]];uJ.style=["stroke","lineWidth"];const aCe=uJ.bind(void 0);aCe.style=["stroke","lineWidth"];const oCe=(t,e,n)=>[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]];oCe.style=["stroke","lineWidth"];const sCe=(t,e,n)=>[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]];sCe.style=["stroke","lineWidth"];const lCe=(t,e,n)=>[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]];lCe.style=["stroke","lineWidth"];const cCe=(t,e,n)=>[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]];cCe.style=["stroke","lineWidth"];const uCe=(t,e,n)=>[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]];uCe.style=["stroke","lineWidth"];const $R=new Map([["bowtie",cJ],["cross",tCe],["dash",aCe],["diamond",aJ],["dot",uJ],["hexagon",lJ],["hollowBowtie",J2e],["hollowDiamond",q2e],["hollowHexagon",Q2e],["hollowPoint",V2e],["hollowSquare",X2e],["hollowTriangle",Z2e],["hollowTriangleDown",K2e],["hv",sCe],["hvh",cCe],["hyphen",iCe],["line",eCe],["plus",rCe],["point",iJ],["rect",Y2e],["smooth",oCe],["square",y4],["tick",nCe],["triangleDown",sJ],["triangle",oJ],["vh",lCe],["vhv",uCe]]);function _Ze(t,e){var{d:n,fill:r,lineWidth:i,path:a,stroke:o,color:s}=e,l=yZe(e,["d","fill","lineWidth","path","stroke","color"]);const c=$R.get(t)||$R.get("point");return(...u)=>new Kf({style:Object.assign(Object.assign({},l),{d:c(...u),stroke:c.style.includes("stroke")?s||o:"",fill:c.style.includes("fill")?s||r:"",lineWidth:c.style.includes("lineWidth")?i||i||2:0})})}function bZe(t,e){$R.set(t,e)}function fJ(t){return t.replace(/-(\w)/g,function(e,n){return n.toUpperCase()})}function EZe(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}var xZe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function fCe(t,e,n,r){if(e.length===1)return;const{size:i}=n;if(t==="fixed")return i;if(t==="normal"||BOe(r)){const[[a,o],[s,l]]=e,c=Math.abs((s-a)/2),u=Math.abs((l-o)/2);return Math.max(0,(c+u)/2)}return i}const ba=(t,e)=>{const{colorAttribute:n,symbol:r,mode:i="auto"}=t,a=xZe(t,["colorAttribute","symbol","mode"]),o=$R.get(fJ(r))||$R.get("point"),{coordinate:s,document:l}=e;return(c,u,f)=>{const{lineWidth:h,color:d}=f,p=a.stroke?h||1:h,{color:g=d,transform:v,opacity:y}=u,[_,E]=nJ(c),T=fCe(i,c,u,s)||a.r||f.r;return ai(l.createElement("path",{})).call(jr,f).style("fill","transparent").style("d",o(_,E,T)).style("lineWidth",p).style("transform",v).style("transformOrigin",`${_-T} ${E-T}`).style("stroke",g).style(tJ(t),y).style(n,g).call(jr,a).node()}};ba.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const hJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),e);hJ.props=Object.assign({defaultMarker:"hollowBowtie"},ba.props);const dJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),e);dJ.props=Object.assign({defaultMarker:"hollowDiamond"},ba.props);const pJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),e);pJ.props=Object.assign({defaultMarker:"hollowHexagon"},ba.props);const gJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"point"},t),e);gJ.props=Object.assign({defaultMarker:"hollowPoint"},ba.props);const vJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"square"},t),e);vJ.props=Object.assign({defaultMarker:"hollowSquare"},ba.props);const mJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),e);mJ.props=Object.assign({defaultMarker:"hollowTriangle"},ba.props);const yJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),e);yJ.props=Object.assign({defaultMarker:"hollowTriangleDown"},ba.props);var SZe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const hCe=(t,e)=>{const{colorAttribute:n,mode:r="auto"}=t,i=SZe(t,["colorAttribute","mode"]),{coordinate:a,document:o}=e;return(s,l,c)=>{const{lineWidth:u,color:f}=c,h=i.stroke?u||1:u,{color:d=f,transform:p,opacity:g}=l,[v,y]=nJ(s),E=fCe(r,s,l,a)||i.r||c.r;return ai(o.createElement("circle",{})).call(jr,c).style("fill","transparent").style("cx",v).style("cy",y).style("r",E).style("lineWidth",h).style("transform",p).style("transformOrigin",`${v} ${y}`).style("stroke",d).style(tJ(t),g).style(n,d).call(jr,i).node()}},_4=(t,e)=>hCe(Object.assign({colorAttribute:"fill"},t),e);_4.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const _J=(t,e)=>hCe(Object.assign({colorAttribute:"stroke"},t),e);_J.props=Object.assign({defaultMarker:"hollowPoint"},_4.props);const bJ=(t,e)=>ba(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),e);bJ.props=Object.assign({defaultMarker:"bowtie"},ba.props);const EJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),e);EJ.props=Object.assign({defaultMarker:"cross"},ba.props);const xJ=(t,e)=>ba(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),e);xJ.props=Object.assign({defaultMarker:"diamond"},ba.props);const SJ=(t,e)=>ba(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),e);SJ.props=Object.assign({defaultMarker:"hexagon"},ba.props);const TJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),e);TJ.props=Object.assign({defaultMarker:"hyphen"},ba.props);const AJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"line"},t),e);AJ.props=Object.assign({defaultMarker:"line"},ba.props);const wJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),e);wJ.props=Object.assign({defaultMarker:"plus"},ba.props);const OJ=(t,e)=>ba(Object.assign({colorAttribute:"fill",symbol:"point"},t),e);OJ.props=Object.assign({defaultMarker:"point"},ba.props);const CJ=(t,e)=>ba(Object.assign({colorAttribute:"fill",symbol:"square"},t),e);CJ.props=Object.assign({defaultMarker:"square"},ba.props);const RJ=(t,e)=>ba(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),e);RJ.props=Object.assign({defaultMarker:"tick"},ba.props);const MJ=(t,e)=>ba(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),e);MJ.props=Object.assign({defaultMarker:"triangle"},ba.props);const PJ=(t,e)=>ba(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),e);PJ.props=Object.assign({defaultMarker:"triangleDown"},ba.props);var toe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const NJ=(t,e)=>{const{arrow:n=!0,arrowSize:r="40%"}=t,i=toe(t,["arrow","arrowSize"]),{document:a}=e;return(o,s,l)=>{const{defaultColor:c}=l,u=toe(l,["defaultColor"]),{color:f=c,transform:h}=s,[d,p]=o,g=iv();if(g.moveTo(...d),g.lineTo(...p),n){const[v,y]=uZe(d,p,{arrowSize:r});g.moveTo(...v),g.lineTo(...p),g.lineTo(...y)}return ai(a.createElement("path",{})).call(jr,u).style("d",g.toString()).style("stroke",f).style("transform",h).call(jr,i).node()}};NJ.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.3.2
 * @date 7/30/2025, 1:34:19 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var TZe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dCe={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(TZe,function(){function n(T,S,w,C,D){r(T,S,w||0,C||T.length-1,D||a)}function r(T,S,w,C,D){for(;C>w;){if(C-w>600){var L=C-w+1,B=S-w+1,I=Math.log(L),U=.5*Math.exp(2*I/3),$=.5*Math.sqrt(I*U*(L-U)/L)*(B-L/2<0?-1:1),X=Math.max(w,Math.floor(S-B*U/L+$)),N=Math.min(C,Math.floor(S+(L-B)*U/L+$));r(T,S,X,N,D)}var M=T[S],k=w,z=C;for(i(T,w,S),D(T[C],M)>0&&i(T,w,C);k<z;){for(i(T,k,z),k++,z--;D(T[k],M)<0;)k++;for(;D(T[z],M)>0;)z--}D(T[w],M)===0?i(T,w,z):(z++,i(T,z,C)),z<=S&&(w=z+1),S<=z&&(C=z-1)}}function i(T,S,w){var C=T[S];T[S]=T[w],T[w]=C}function a(T,S){return T<S?-1:T>S?1:0}var o=function(S){S===void 0&&(S=9),this._maxEntries=Math.max(4,S),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(S){var w=this.data,C=[];if(!_(S,w))return C;for(var D=this.toBBox,L=[];w;){for(var B=0;B<w.children.length;B++){var I=w.children[B],U=w.leaf?D(I):I;_(S,U)&&(w.leaf?C.push(I):y(S,U)?this._all(I,C):L.push(I))}w=L.pop()}return C},o.prototype.collides=function(S){var w=this.data;if(!_(S,w))return!1;for(var C=[];w;){for(var D=0;D<w.children.length;D++){var L=w.children[D],B=w.leaf?this.toBBox(L):L;if(_(S,B)){if(w.leaf||y(S,B))return!0;C.push(L)}}w=C.pop()}return!1},o.prototype.load=function(S){if(!(S&&S.length))return this;if(S.length<this._minEntries){for(var w=0;w<S.length;w++)this.insert(S[w]);return this}var C=this._build(S.slice(),0,S.length-1,0);if(!this.data.children.length)this.data=C;else if(this.data.height===C.height)this._splitRoot(this.data,C);else{if(this.data.height<C.height){var D=this.data;this.data=C,C=D}this._insert(C,this.data.height-C.height-1,!0)}return this},o.prototype.insert=function(S){return S&&this._insert(S,this.data.height-1),this},o.prototype.clear=function(){return this.data=E([]),this},o.prototype.remove=function(S,w){if(!S)return this;for(var C=this.data,D=this.toBBox(S),L=[],B=[],I,U,$;C||L.length;){if(C||(C=L.pop(),U=L[L.length-1],I=B.pop(),$=!0),C.leaf){var X=s(S,C.children,w);if(X!==-1)return C.children.splice(X,1),L.push(C),this._condense(L),this}!$&&!C.leaf&&y(C,D)?(L.push(C),B.push(I),I=0,U=C,C=C.children[0]):U?(I++,C=U.children[I],$=!1):C=null}return this},o.prototype.toBBox=function(S){return S},o.prototype.compareMinX=function(S,w){return S.minX-w.minX},o.prototype.compareMinY=function(S,w){return S.minY-w.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(S){return this.data=S,this},o.prototype._all=function(S,w){for(var C=[];S;)S.leaf?w.push.apply(w,S.children):C.push.apply(C,S.children),S=C.pop();return w},o.prototype._build=function(S,w,C,D){var L=C-w+1,B=this._maxEntries,I;if(L<=B)return I=E(S.slice(w,C+1)),l(I,this.toBBox),I;D||(D=Math.ceil(Math.log(L)/Math.log(B)),B=Math.ceil(L/Math.pow(B,D-1))),I=E([]),I.leaf=!1,I.height=D;var U=Math.ceil(L/B),$=U*Math.ceil(Math.sqrt(B));x(S,w,C,$,this.compareMinX);for(var X=w;X<=C;X+=$){var N=Math.min(X+$-1,C);x(S,X,N,U,this.compareMinY);for(var M=X;M<=N;M+=U){var k=Math.min(M+U-1,N);I.children.push(this._build(S,M,k,D-1))}}return l(I,this.toBBox),I},o.prototype._chooseSubtree=function(S,w,C,D){for(;D.push(w),!(w.leaf||D.length-1===C);){for(var L=1/0,B=1/0,I=void 0,U=0;U<w.children.length;U++){var $=w.children[U],X=d($),N=g(S,$)-X;N<B?(B=N,L=X<L?X:L,I=$):N===B&&X<L&&(L=X,I=$)}w=I||w.children[0]}return w},o.prototype._insert=function(S,w,C){var D=C?S:this.toBBox(S),L=[],B=this._chooseSubtree(D,this.data,w,L);for(B.children.push(S),u(B,D);w>=0&&L[w].children.length>this._maxEntries;)this._split(L,w),w--;this._adjustParentBBoxes(D,L,w)},o.prototype._split=function(S,w){var C=S[w],D=C.children.length,L=this._minEntries;this._chooseSplitAxis(C,L,D);var B=this._chooseSplitIndex(C,L,D),I=E(C.children.splice(B,C.children.length-B));I.height=C.height,I.leaf=C.leaf,l(C,this.toBBox),l(I,this.toBBox),w?S[w-1].children.push(I):this._splitRoot(C,I)},o.prototype._splitRoot=function(S,w){this.data=E([S,w]),this.data.height=S.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(S,w,C){for(var D,L=1/0,B=1/0,I=w;I<=C-w;I++){var U=c(S,0,I,this.toBBox),$=c(S,I,C,this.toBBox),X=v(U,$),N=d(U)+d($);X<L?(L=X,D=I,B=N<B?N:B):X===L&&N<B&&(B=N,D=I)}return D||C-w},o.prototype._chooseSplitAxis=function(S,w,C){var D=S.leaf?this.compareMinX:f,L=S.leaf?this.compareMinY:h,B=this._allDistMargin(S,w,C,D),I=this._allDistMargin(S,w,C,L);B<I&&S.children.sort(D)},o.prototype._allDistMargin=function(S,w,C,D){S.children.sort(D);for(var L=this.toBBox,B=c(S,0,w,L),I=c(S,C-w,C,L),U=p(B)+p(I),$=w;$<C-w;$++){var X=S.children[$];u(B,S.leaf?L(X):X),U+=p(B)}for(var N=C-w-1;N>=w;N--){var M=S.children[N];u(I,S.leaf?L(M):M),U+=p(I)}return U},o.prototype._adjustParentBBoxes=function(S,w,C){for(var D=C;D>=0;D--)u(w[D],S)},o.prototype._condense=function(S){for(var w=S.length-1,C=void 0;w>=0;w--)S[w].children.length===0?w>0?(C=S[w-1].children,C.splice(C.indexOf(S[w]),1)):this.clear():l(S[w],this.toBBox)};function s(T,S,w){if(!w)return S.indexOf(T);for(var C=0;C<S.length;C++)if(w(T,S[C]))return C;return-1}function l(T,S){c(T,0,T.children.length,S,T)}function c(T,S,w,C,D){D||(D=E(null)),D.minX=1/0,D.minY=1/0,D.maxX=-1/0,D.maxY=-1/0;for(var L=S;L<w;L++){var B=T.children[L];u(D,T.leaf?C(B):B)}return D}function u(T,S){return T.minX=Math.min(T.minX,S.minX),T.minY=Math.min(T.minY,S.minY),T.maxX=Math.max(T.maxX,S.maxX),T.maxY=Math.max(T.maxY,S.maxY),T}function f(T,S){return T.minX-S.minX}function h(T,S){return T.minY-S.minY}function d(T){return(T.maxX-T.minX)*(T.maxY-T.minY)}function p(T){return T.maxX-T.minX+(T.maxY-T.minY)}function g(T,S){return(Math.max(S.maxX,T.maxX)-Math.min(S.minX,T.minX))*(Math.max(S.maxY,T.maxY)-Math.min(S.minY,T.minY))}function v(T,S){var w=Math.max(T.minX,S.minX),C=Math.max(T.minY,S.minY),D=Math.min(T.maxX,S.maxX),L=Math.min(T.maxY,S.maxY);return Math.max(0,D-w)*Math.max(0,L-C)}function y(T,S){return T.minX<=S.minX&&T.minY<=S.minY&&S.maxX<=T.maxX&&S.maxY<=T.maxY}function _(T,S){return S.minX<=T.maxX&&S.minY<=T.maxY&&S.maxX>=T.minX&&S.maxY>=T.minY}function E(T){return{children:T,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(T,S,w,C,D){for(var L=[S,w];L.length;)if(w=L.pop(),S=L.pop(),!(w-S<=C)){var B=S+Math.ceil((w-S)/C/2)*C;n(T,B,S,w,D),L.push(S,B,B,w)}}return o})})(dCe);var AZe=dCe.exports,Yt=(function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t})({}),ak=(function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t})({}),ib=(function(){function t(){it(this,t),this.plugins=[]}return at(t,[{key:"addRenderingPlugin",value:function(n){this.plugins.push(n),this.context.renderingPlugins.push(n)}},{key:"removeAllRenderingPlugins",value:function(){var n=this;this.plugins.forEach(function(r){var i=n.context.renderingPlugins.indexOf(r);i>=0&&n.context.renderingPlugins.splice(i,1)})}}])})(),wZe=(function(){function t(e){it(this,t),this.clipSpaceNearZ=ak.NEGATIVE_ONE,this.plugins=[],this.config=ze({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},e)}return at(t,[{key:"registerPlugin",value:function(n){var r=this.plugins.findIndex(function(i){return i===n});r===-1&&this.plugins.push(n)}},{key:"unregisterPlugin",value:function(n){var r=this.plugins.findIndex(function(i){return i===n});r>-1&&this.plugins.splice(r,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(n){return this.plugins.find(function(r){return r.name===n})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(n){Object.assign(this.config,n)}}])})(),v7=cf,dT=dc,OZe=iwe,CZe=rwe,noe=Ay,m7=lD,cs=(function(){function t(){it(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return at(t,[{key:"update",value:function(n,r){dT(this.center,n),dT(this.halfExtents,r),m7(this.min,this.center,this.halfExtents),v7(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(n,r){v7(this.center,r,n),noe(this.center,this.center,.5),m7(this.halfExtents,r,n),noe(this.halfExtents,this.halfExtents,.5),dT(this.min,n),dT(this.max,r)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(n){if(!t.isEmpty(n)){if(t.isEmpty(this)){this.setMinMax(n.getMin(),n.getMax());return}var r=this.center,i=r[0],a=r[1],o=r[2],s=this.halfExtents,l=s[0],c=s[1],u=s[2],f=i-l,h=i+l,d=a-c,p=a+c,g=o-u,v=o+u,y=n.center,_=y[0],E=y[1],x=y[2],T=n.halfExtents,S=T[0],w=T[1],C=T[2],D=_-S,L=_+S,B=E-w,I=E+w,U=x-C,$=x+C;D<f&&(f=D),L>h&&(h=L),B<d&&(d=B),I>p&&(p=I),U<g&&(g=U),$>v&&(v=$),r[0]=(f+h)*.5,r[1]=(d+p)*.5,r[2]=(g+v)*.5,s[0]=(h-f)*.5,s[1]=(p-d)*.5,s[2]=(v-g)*.5,this.min[0]=f,this.min[1]=d,this.min[2]=g,this.max[0]=h,this.max[1]=p,this.max[2]=v}}},{key:"setFromTransformedAABB",value:function(n,r){var i=this.center,a=this.halfExtents,o=n.center,s=n.halfExtents,l=r[0],c=r[4],u=r[8],f=r[1],h=r[5],d=r[9],p=r[2],g=r[6],v=r[10],y=Math.abs(l),_=Math.abs(c),E=Math.abs(u),x=Math.abs(f),T=Math.abs(h),S=Math.abs(d),w=Math.abs(p),C=Math.abs(g),D=Math.abs(v);i[0]=r[12]+l*o[0]+c*o[1]+u*o[2],i[1]=r[13]+f*o[0]+h*o[1]+d*o[2],i[2]=r[14]+p*o[0]+g*o[1]+v*o[2],a[0]=y*s[0]+_*s[1]+E*s[2],a[1]=x*s[0]+T*s[1]+S*s[2],a[2]=w*s[0]+C*s[1]+D*s[2],m7(this.min,i,a),v7(this.max,i,a)}},{key:"intersects",value:function(n){var r=this.getMax(),i=this.getMin(),a=n.getMax(),o=n.getMin();return i[0]<=a[0]&&r[0]>=o[0]&&i[1]<=a[1]&&r[1]>=o[1]&&i[2]<=a[2]&&r[2]>=o[2]}},{key:"intersection",value:function(n){if(!this.intersects(n))return null;var r=new t,i=OZe([0,0,0],this.getMin(),n.getMin()),a=CZe([0,0,0],this.getMax(),n.getMax());return r.setMinMax(i,a),r}},{key:"getNegativeFarPoint",value:function(n){return n.pnVertexFlag===273?dT([0,0,0],this.min):n.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:n.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:n.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:n.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:n.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:n.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(n){return n.pnVertexFlag===273?dT([0,0,0],this.max):n.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:n.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:n.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:n.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:n.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:n.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(n){return!n||n.halfExtents[0]===0&&n.halfExtents[1]===0&&n.halfExtents[2]===0}}])})(),RZe=(function(){function t(e,n){it(this,t),this.distance=e||0,this.normal=n||yr(0,1,0),this.updatePNVertexFlag()}return at(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(n){return pc(n,this.normal)-this.distance}},{key:"normalize",value:function(){var n=1/EQ(this.normal);Ay(this.normal,this.normal,n),this.distance*=n}},{key:"intersectsLine",value:function(n,r,i){var a=this.distanceToPoint(n),o=this.distanceToPoint(r),s=a/(a-o),l=s>=0&&s<=1;return l&&i&&DA(i,n,r,s),l}}])})(),pT=(function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t})({}),MZe=(function(){function t(e){if(it(this,t),this.planes=[],e)this.planes=e;else for(var n=0;n<6;n++)this.planes.push(new RZe)}return at(t,[{key:"extractFromVPMatrix",value:function(n){var r=ir(n,16),i=r[0],a=r[1],o=r[2],s=r[3],l=r[4],c=r[5],u=r[6],f=r[7],h=r[8],d=r[9],p=r[10],g=r[11],v=r[12],y=r[13],_=r[14],E=r[15];Co(this.planes[0].normal,s-i,f-l,g-h),this.planes[0].distance=E-v,Co(this.planes[1].normal,s+i,f+l,g+h),this.planes[1].distance=E+v,Co(this.planes[2].normal,s+a,f+c,g+d),this.planes[2].distance=E+y,Co(this.planes[3].normal,s-a,f-c,g-d),this.planes[3].distance=E-y,Co(this.planes[4].normal,s-o,f-u,g-p),this.planes[4].distance=E-_,Co(this.planes[5].normal,s+o,f+u,g+p),this.planes[5].distance=E+_,this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})}}])})(),Cu=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;it(this,t),this.x=0,this.y=0,this.x=e,this.y=n}return at(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(n){this.x=n.x,this.y=n.y}}])})(),YA=(function(){function t(e,n,r,i){it(this,t),this.x=e,this.y=n,this.width=r,this.height=i,this.left=e,this.right=e+r,this.top=n,this.bottom=n+i}return at(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(n){return new t(n.x,n.y,n.width,n.height)}},{key:"applyTransform",value:function(n,r){var i=Om(n.x,n.y,0,1),a=Om(n.x+n.width,n.y,0,1),o=Om(n.x,n.y+n.height,0,1),s=Om(n.x+n.width,n.y+n.height,0,1),l=gc(),c=gc(),u=gc(),f=gc();fs(l,i,r),fs(c,a,r),fs(u,o,r),fs(f,s,r);var h=Math.min(l[0],c[0],u[0],f[0]),d=Math.min(l[1],c[1],u[1],f[1]),p=Math.max(l[0],c[0],u[0],f[0]),g=Math.max(l[1],c[1],u[1],f[1]);return t.fromRect({x:h,y:d,width:p-h,height:g-d})}}])})(),zo="Method not implemented.",gT="Use document.documentElement instead.",PZe="Cannot append a destroyed element.";function gA(t){return t===void 0?0:t>360||t<-360?t%360:t}var y7=Pr();function $f(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(t)&&t.length===3?r?Yc(t):dc(y7,t):Ln(t)?r?yr(t,e,n):Co(y7,t,e,n):r?yr(t[0],t[1]||e,t[2]||n):Co(y7,t[0],t[1]||e,t[2]||n)}var NZe=Math.PI/180;function $o(t){return t*NZe}var IZe=180/Math.PI;function Ph(t){return t*IZe}function LZe(t){return 360*t}var MD=Math.PI/2;function kZe(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n*n,s=r*r,l=i*i,c=a*a,u=o+s+l+c,f=n*a-r*i;return f>.499995*u?(t[0]=MD,t[1]=2*Math.atan2(r,n),t[2]=0):f<-.499995*u?(t[0]=-MD,t[1]=2*Math.atan2(r,n),t[2]=0):(t[0]=Math.asin(2*(n*i-a*r)),t[1]=Math.atan2(2*(n*a+r*i),1-2*(l+c)),t[2]=Math.atan2(2*(n*r+i*a),1-2*(s+l))),t}function DZe(t,e){var n,r,i=zm(Pr(),e),a=ir(i,3),o=a[0],s=a[1],l=a[2],c=Math.asin(-e[2]/o);return c<MD?c>-MD?(n=Math.atan2(e[6]/s,e[10]/l),r=Math.atan2(e[1]/o,e[0]/o)):(r=0,n=-Math.atan2(e[4]/s,e[5]/s)):(r=0,n=Math.atan2(e[4]/s,e[5]/s)),t[0]=n,t[1]=c,t[2]=r,t}function _7(t,e){return e.length===16?DZe(t,e):kZe(t,e)}function BZe(t,e,n,r,i){var a=Math.cos(t),o=Math.sin(t);return ZAe(r*a,i*o,0,-r*o,i*a,0,e,n,1)}function FZe(t,e,n,r,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,l=2*a,c=n-e,u=r-i,f=l/c,h=l/u,d=(n+e)/c,p=(r+i)/u,g,v,y=o-a,_=o*a;return s?(g=-o/y,v=-_/y):(g=-(o+a)/y,v=-2*_/y),t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=d,t[9]=p,t[10]=g,t[11]=-1,t[12]=0,t[13]=0,t[14]=v,t[15]=0,t}function roe(t){var e=t[0],n=t[1],r=t[3],i=t[4],a=Math.sqrt(e*e+n*n),o=Math.sqrt(r*r+i*i),s=e*i-n*r;if(s<0&&(e<i?a=-a:o=-o),a){var l=1/a;e*=l,n*=l}if(o){var c=1/o;r*=c,i*=c}var u=Math.atan2(n,e),f=Ph(u);return[t[6],t[7],a,o,f]}var im=Zr(),Mg=Zr(),i2=gc(),Ri=[Pr(),Pr(),Pr()],ioe=Pr();function UZe(t,e,n,r,i,a){if(!jZe(im,t)||(Ty(Mg,im),Mg[3]=0,Mg[7]=0,Mg[11]=0,Mg[15]=1,Math.abs(hQ(Mg))<1e-8))return!1;var o=im[3],s=im[7],l=im[11],c=im[12],u=im[13],f=im[14],h=im[15];if(o!==0||s!==0||l!==0){i2[0]=o,i2[1]=s,i2[2]=l,i2[3]=h;var d=qs(Mg,Mg);if(!d)return!1;fQ(Mg,Mg),fs(i,i2,Mg)}else i[0]=i[1]=i[2]=0,i[3]=1;if(e[0]=c,e[1]=u,e[2]=f,zZe(Ri,im),n[0]=Ou(Ri[0]),Ic(Ri[0],Ri[0]),r[0]=pc(Ri[0],Ri[1]),b7(Ri[1],Ri[1],Ri[0],1,-r[0]),n[1]=Ou(Ri[1]),Ic(Ri[1],Ri[1]),r[0]/=n[1],r[1]=pc(Ri[0],Ri[2]),b7(Ri[2],Ri[2],Ri[0],1,-r[1]),r[2]=pc(Ri[1],Ri[2]),b7(Ri[2],Ri[2],Ri[1],1,-r[2]),n[2]=Ou(Ri[2]),Ic(Ri[2],Ri[2]),r[1]/=n[2],r[2]/=n[2],uA(ioe,Ri[1],Ri[2]),pc(Ri[0],ioe)<0)for(var p=0;p<3;p++)n[p]*=-1,Ri[p][0]*=-1,Ri[p][1]*=-1,Ri[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+Ri[0][0]-Ri[1][1]-Ri[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-Ri[0][0]+Ri[1][1]-Ri[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-Ri[0][0]-Ri[1][1]+Ri[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+Ri[0][0]+Ri[1][1]+Ri[2][2],0)),Ri[2][1]>Ri[1][2]&&(a[0]=-a[0]),Ri[0][2]>Ri[2][0]&&(a[1]=-a[1]),Ri[1][0]>Ri[0][1]&&(a[2]=-a[2]),!0}function jZe(t,e){var n=e[15];if(n===0)return!1;for(var r=1/n,i=0;i<16;i++)t[i]=e[i]*r;return!0}function zZe(t,e){t[0][0]=e[0],t[0][1]=e[1],t[0][2]=e[2],t[1][0]=e[4],t[1][1]=e[5],t[1][2]=e[6],t[2][0]=e[8],t[2][1]=e[9],t[2][2]=e[10]}function b7(t,e,n,r,i){t[0]=e[0]*r+n[0]*i,t[1]=e[1]*r+n[1]*i,t[2]=e[2]*r+n[2]*i}var Uo=(function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t})({}),YY=(function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t})({}),_p=(function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t})({}),pCe={UPDATED:"updated"},aoe=2e-4,gCe=(function(){function t(){it(this,t),this.clipSpaceNearZ=ak.NEGATIVE_ONE,this.eventEmitter=new Cw,this.matrix=Zr(),this.right=yr(1,0,0),this.up=yr(0,1,0),this.forward=yr(0,0,1),this.position=yr(0,0,1),this.focalPoint=yr(0,0,0),this.distanceVector=yr(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Zr(),this.projectionMatrixInverse=Zr(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=Uo.EXPLORING,this.trackingMode=YY.DEFAULT,this.projectionMode=_p.PERSPECTIVE,this.frustum=new MZe,this.orthoMatrix=Zr()}return at(t,[{key:"isOrtho",value:function(){return this.projectionMode===_p.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(n){this.enableUpdate=n}},{key:"setType",value:function(n,r){return this.type=n,this.type===Uo.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===Uo.TRACKING&&r!==void 0&&this.setTrackingMode(r),this}},{key:"setProjectionMode",value:function(n){return this.projectionMode=n,this}},{key:"setTrackingMode",value:function(n){if(this.type!==Uo.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=n,this}},{key:"setWorldRotation",value:function(n){return this.rotateWorld=n,this._getAngles(),this}},{key:"getViewTransform",value:function(){return qs(Zr(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(n,r){var i=rf(Zr(),[n,r,0]);this.jitteredProjectionMatrix=qa(Zr(),i,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(n){return this.matrix=n,this._update(),this}},{key:"setProjectionMatrix",value:function(n){this.projectionMatrix=n}},{key:"setFov",value:function(n){return this.setPerspective(this.near,this.far,n,this.aspect),this}},{key:"setAspect",value:function(n){return this.setPerspective(this.near,this.far,this.fov,n),this}},{key:"setNear",value:function(n){return this.projectionMode===_p.PERSPECTIVE?this.setPerspective(n,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,n,this.far),this}},{key:"setFar",value:function(n){return this.projectionMode===_p.PERSPECTIVE?this.setPerspective(this.near,n,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,n),this}},{key:"setViewOffset",value:function(n,r,i,a,o,s){return this.aspect=n/r,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=r,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===_p.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===_p.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(n){return this.zoom=n,this.projectionMode===_p.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===_p.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(n,r){var i=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),a=i.x,o=i.y,s=this.roll;this.rotate(0,0,-s),this.setPosition(a,o),this.setFocalPoint(a,o),this.setZoom(n),this.rotate(0,0,s);var l=this.canvas.viewport2Canvas({x:r[0],y:r[1]}),c=l.x,u=l.y,f=yr(c-a,u-o,0),h=pc(f,this.right)/Ou(this.right),d=pc(f,this.up)/Ou(this.up),p=this.getPosition(),g=ir(p,2),v=g[0],y=g[1],_=this.getFocalPoint(),E=ir(_,2),x=E[0],T=E[1];return this.setPosition(v-h,y-d),this.setFocalPoint(x-h,T-d),this}},{key:"setPerspective",value:function(n,r,i,a){var o;this.projectionMode=_p.PERSPECTIVE,this.fov=i,this.near=n,this.far=r,this.aspect=a;var s=this.near*Math.tan($o(.5*this.fov))/this.zoom,l=2*s,c=this.aspect*l,u=-.5*c;if((o=this.view)!==null&&o!==void 0&&o.enabled){var f=this.view.fullWidth,h=this.view.fullHeight;u+=this.view.offsetX*c/f,s-=this.view.offsetY*l/h,c*=this.view.width/f,l*=this.view.height/h}return FZe(this.projectionMatrix,u,u+c,s-l,s,n,this.far,this.clipSpaceNearZ===ak.ZERO),qs(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(n,r,i,a,o,s){var l;this.projectionMode=_p.ORTHOGRAPHIC,this.rright=r,this.left=n,this.top=i,this.bottom=a,this.near=o,this.far=s;var c=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),f=(this.rright+this.left)/2,h=(this.top+this.bottom)/2,d=f-c,p=f+c,g=h+u,v=h-u;if((l=this.view)!==null&&l!==void 0&&l.enabled){var y=(this.rright-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;d+=y*this.view.offsetX,p=d+y*this.view.width,g-=_*this.view.offsetY,v=g-_*this.view.height}return this.clipSpaceNearZ===ak.NEGATIVE_ONE?mQ(this.projectionMatrix,d,p,g,v,o,s):yQ(this.projectionMatrix,d,p,g,v,o,s),qs(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],a=$f(n,r,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],a=yr(0,1,0);if(this.focalPoint=$f(n,r,i),this.trackingMode===YY.CINEMATIC){var o=MR(Pr(),this.focalPoint,this.position);n=o[0],r=o[1],i=o[2];var s=Ou(o),l=Ph(Math.asin(r/s)),c=90+Ph(Math.atan2(i,n)),u=Zr();Dy(u,u,$o(c)),Qm(u,u,$o(l)),a=ka(Pr(),[0,1,0],u)}return qs(this.matrix,_Q(Zr(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(n){if(this.distance===n||n<0)return this;this.distance=n,this.distance<aoe&&(this.distance=aoe),this.dollyingStep=this.distance/100;var r=Pr();n=this.distance;var i=this.forward,a=this.focalPoint;return r[0]=n*i[0]+a[0],r[1]=n*i[1]+a[1],r[2]=n*i[2]+a[2],this._setPosition(r),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(n){return this.maxDistance=n,this}},{key:"setMinDistance",value:function(n){return this.minDistance=n,this}},{key:"setAzimuth",value:function(n){return this.azimuth=gA(n),this.computeMatrix(),this._getAxes(),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getPosition():this.type===Uo.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(n){return this.elevation=gA(n),this.computeMatrix(),this._getAxes(),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getPosition():this.type===Uo.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(n){return this.roll=gA(n),this.computeMatrix(),this._getAxes(),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getPosition():this.type===Uo.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var n=Vf(wa(),[0,0,1],$o(this.roll));Pu(this.matrix);var r=Vf(wa(),[1,0,0],$o((this.rotateWorld&&this.type!==Uo.TRACKING||this.type===Uo.TRACKING?1:-1)*this.elevation)),i=Vf(wa(),[0,1,0],$o((this.rotateWorld&&this.type!==Uo.TRACKING||this.type===Uo.TRACKING?1:-1)*this.azimuth)),a=qf(wa(),i,r);a=qf(wa(),a,n);var o=TP(Zr(),a);this.type===Uo.ORBITING||this.type===Uo.EXPLORING?(Vs(this.matrix,this.matrix,this.focalPoint),qa(this.matrix,this.matrix,o),Vs(this.matrix,this.matrix,[0,0,this.distance])):this.type===Uo.TRACKING&&(Vs(this.matrix,this.matrix,this.position),qa(this.matrix,this.matrix,o))}},{key:"_setPosition",value:function(n,r,i){this.position=$f(n,r,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){dc(this.right,$f(fs(gc(),[1,0,0,0],this.matrix))),dc(this.up,$f(fs(gc(),[0,1,0,0],this.matrix))),dc(this.forward,$f(fs(gc(),[0,0,1,0],this.matrix))),Ic(this.right,this.right),Ic(this.up,this.up),Ic(this.forward,this.forward)}},{key:"_getAngles",value:function(){var n=this.distanceVector[0],r=this.distanceVector[1],i=this.distanceVector[2],a=Ou(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===Uo.TRACKING?(this.elevation=Ph(Math.asin(r/a)),this.azimuth=Ph(Math.atan2(-n,-i))):this.rotateWorld?(this.elevation=Ph(Math.asin(r/a)),this.azimuth=Ph(Math.atan2(-n,-i))):(this.elevation=-Ph(Math.asin(r/a)),this.azimuth=-Ph(Math.atan2(-n,-i)))}},{key:"_getPosition",value:function(){dc(this.position,$f(fs(gc(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){bQ(this.distanceVector,[0,0,-this.distance],qAe(Hx(),this.matrix)),cf(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=MR(Pr(),this.focalPoint,this.position),this.distance=Ou(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===_p.ORTHOGRAPHIC){var n=this.position,r=Vf(wa(),[0,0,1],-this.roll*Math.PI/180);dy(this.orthoMatrix,r,yr((this.rright-this.left)/2-n[0],(this.top-this.bottom)/2-n[1],0),yr(this.zoom,this.zoom,1),n)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var n=this.getViewTransform(),r=qa(Zr(),this.getPerspective(),n);this.getFrustum().extractFromVPMatrix(r),this.eventEmitter.emit(pCe.UPDATED)}}},{key:"rotate",value:function(n,r,i){throw new Error(zo)}},{key:"pan",value:function(n,r){throw new Error(zo)}},{key:"dolly",value:function(n){throw new Error(zo)}},{key:"createLandmark",value:function(n,r){throw new Error(zo)}},{key:"gotoLandmark",value:function(n,r){throw new Error(zo)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(zo)}}])})(),$Ze=(function(t){return t[t.Standard=0]="Standard",t})({}),PD=(function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t})({}),HZe=Pr(),a2=Zr(),GZe=wa();function ooe(t){if(t.localDirtyFlag){var e=t.localSkew[0]!==0||t.localSkew[1]!==0;if(e){dy(t.localTransform,t.localRotation,t.localPosition,yr(1,1,1),t.origin),(t.localSkew[0]!==0||t.localSkew[1]!==0)&&(Pu(a2),a2[4]=Math.tan(t.localSkew[0]),a2[1]=Math.tan(t.localSkew[1]),qa(t.localTransform,t.localTransform,a2));var n=dy(a2,YF(GZe,0,0,0,1),Co(HZe,1,1,1),t.localScale,t.origin);qa(t.localTransform,t.localTransform,n)}else{var r=t.localTransform,i=t.localPosition,a=t.localRotation,o=t.localScale,s=t.origin,l=i[0]!==0||i[1]!==0||i[2]!==0,c=a[3]!==1||a[0]!==0||a[1]!==0||a[2]!==0,u=o[0]!==1||o[1]!==1||o[2]!==1,f=s[0]!==0||s[1]!==0||s[2]!==0;!c&&!u&&!f?l?rf(r,i):Pu(r):dy(r,a,i,o,s)}t.localDirtyFlag=!1}}function WZe(t,e){t.dirtyFlag&&(e?qa(t.worldTransform,e.worldTransform,t.localTransform):Ty(t.worldTransform,t.localTransform),t.dirtyFlag=!1)}var vCe={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new YA(0,0,0,0)},tr=(function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t})({});function IJ(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function mCe(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function kP(){}var HR=.7,ND=1/HR,vA="\\s*([+-]?\\d+)\\s*",GR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Nm="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",VZe=/^#([0-9a-f]{3,8})$/,YZe=new RegExp(`^rgb\\(${vA},${vA},${vA}\\)$`),XZe=new RegExp(`^rgb\\(${Nm},${Nm},${Nm}\\)$`),qZe=new RegExp(`^rgba\\(${vA},${vA},${vA},${GR}\\)$`),ZZe=new RegExp(`^rgba\\(${Nm},${Nm},${Nm},${GR}\\)$`),KZe=new RegExp(`^hsl\\(${GR},${Nm},${Nm}\\)$`),QZe=new RegExp(`^hsla\\(${GR},${Nm},${Nm},${GR}\\)$`),soe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};IJ(kP,b4,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:loe,formatHex:loe,formatHex8:JZe,formatHsl:eKe,formatRgb:coe,toString:coe});function loe(){return this.rgb().formatHex()}function JZe(){return this.rgb().formatHex8()}function eKe(){return yCe(this).formatHsl()}function coe(){return this.rgb().formatRgb()}function b4(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=VZe.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?uoe(e):n===3?new Bh(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?iI(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?iI(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=YZe.exec(t))?new Bh(e[1],e[2],e[3],1):(e=XZe.exec(t))?new Bh(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=qZe.exec(t))?iI(e[1],e[2],e[3],e[4]):(e=ZZe.exec(t))?iI(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=KZe.exec(t))?doe(e[1],e[2]/100,e[3]/100,1):(e=QZe.exec(t))?doe(e[1],e[2]/100,e[3]/100,e[4]):soe.hasOwnProperty(t)?uoe(soe[t]):t==="transparent"?new Bh(NaN,NaN,NaN,0):null}function uoe(t){return new Bh(t>>16&255,t>>8&255,t&255,1)}function iI(t,e,n,r){return r<=0&&(t=e=n=NaN),new Bh(t,e,n,r)}function tKe(t){return t instanceof kP||(t=b4(t)),t?(t=t.rgb(),new Bh(t.r,t.g,t.b,t.opacity)):new Bh}function nKe(t,e,n,r){return arguments.length===1?tKe(t):new Bh(t,e,n,r??1)}function Bh(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}IJ(Bh,nKe,mCe(kP,{brighter(t){return t=t==null?ND:Math.pow(ND,t),new Bh(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?HR:Math.pow(HR,t),new Bh(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Bh(JE(this.r),JE(this.g),JE(this.b),ID(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:foe,formatHex:foe,formatHex8:rKe,formatRgb:hoe,toString:hoe}));function foe(){return`#${BE(this.r)}${BE(this.g)}${BE(this.b)}`}function rKe(){return`#${BE(this.r)}${BE(this.g)}${BE(this.b)}${BE((isNaN(this.opacity)?1:this.opacity)*255)}`}function hoe(){const t=ID(this.opacity);return`${t===1?"rgb(":"rgba("}${JE(this.r)}, ${JE(this.g)}, ${JE(this.b)}${t===1?")":`, ${t})`}`}function ID(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function JE(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function BE(t){return t=JE(t),(t<16?"0":"")+t.toString(16)}function doe(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new jg(t,e,n,r)}function yCe(t){if(t instanceof jg)return new jg(t.h,t.s,t.l,t.opacity);if(t instanceof kP||(t=b4(t)),!t)return new jg;if(t instanceof jg)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new jg(o,s,l,t.opacity)}function iKe(t,e,n,r){return arguments.length===1?yCe(t):new jg(t,e,n,r??1)}function jg(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}IJ(jg,iKe,mCe(kP,{brighter(t){return t=t==null?ND:Math.pow(ND,t),new jg(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?HR:Math.pow(HR,t),new jg(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Bh(E7(t>=240?t-240:t+120,i,r),E7(t,i,r),E7(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new jg(poe(this.h),aI(this.s),aI(this.l),ID(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ID(this.opacity);return`${t===1?"hsl(":"hsla("}${poe(this.h)}, ${aI(this.s)*100}%, ${aI(this.l)*100}%${t===1?")":`, ${t})`}`}}));function poe(t){return t=(t||0)%360,t<0?t+360:t}function aI(t){return Math.max(0,Math.min(1,t||0))}function E7(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function ql(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError("Expected a function");var n=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=e?e.apply(this,a):a[0],l=n.cache;if(l.has(s))return l.get(s);var c=t.apply(this,a);return n.cache=l.set(s,c)||l,c};return n.cache=new(ql.Cache||Map),ql.cacheList.push(n.cache),n}ql.Cache=Map;ql.cacheList=[];ql.clearCache=function(){ql.cacheList.forEach(function(t){return t.clear()})};var rr=(function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t})({}),Fg=(function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t})({}),aKe=(function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t})({}),oKe=(function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t})({}),sKe=[{name:"em",unit_type:rr.kEms},{name:"px",unit_type:rr.kPixels},{name:"deg",unit_type:rr.kDegrees},{name:"rad",unit_type:rr.kRadians},{name:"grad",unit_type:rr.kGradians},{name:"ms",unit_type:rr.kMilliseconds},{name:"s",unit_type:rr.kSeconds},{name:"rem",unit_type:rr.kRems},{name:"turn",unit_type:rr.kTurns}],XA=(function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t})({}),lKe=function(e){return sKe.find(function(n){return n.name===e}).unit_type},cKe=function(e){return e?e==="number"?rr.kNumber:e==="percent"||e==="%"?rr.kPercentage:lKe(e):rr.kUnknown},uKe=function(e){switch(e){case rr.kNumber:case rr.kInteger:return Fg.kUNumber;case rr.kPercentage:return Fg.kUPercent;case rr.kPixels:return Fg.kULength;case rr.kMilliseconds:case rr.kSeconds:return Fg.kUTime;case rr.kDegrees:case rr.kRadians:case rr.kGradians:case rr.kTurns:return Fg.kUAngle;default:return Fg.kUOther}},fKe=function(e){switch(e){case Fg.kUNumber:return rr.kNumber;case Fg.kULength:return rr.kPixels;case Fg.kUPercent:return rr.kPercentage;case Fg.kUTime:return rr.kSeconds;case Fg.kUAngle:return rr.kDegrees;default:return rr.kUnknown}},goe=function(e){var n=1;switch(e){case rr.kPixels:case rr.kDegrees:case rr.kSeconds:break;case rr.kMilliseconds:n=.001;break;case rr.kRadians:n=180/Math.PI;break;case rr.kGradians:n=.9;break;case rr.kTurns:n=360;break}return n},XY=function(e){switch(e){case rr.kNumber:case rr.kInteger:return"";case rr.kPercentage:return"%";case rr.kEms:return"em";case rr.kRems:return"rem";case rr.kPixels:return"px";case rr.kDegrees:return"deg";case rr.kRadians:return"rad";case rr.kGradians:return"grad";case rr.kMilliseconds:return"ms";case rr.kSeconds:return"s";case rr.kTurns:return"turn"}return""},E4=(function(){function t(){it(this,t)}return at(t,[{key:"toString",value:function(){return this.buildCSSText(aKe.kNo,oKe.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=XA.kUnitType&&this.getType()<=XA.kClampType}}],[{key:"isAngle",value:function(n){return n===rr.kDegrees||n===rr.kRadians||n===rr.kGradians||n===rr.kTurns}},{key:"isLength",value:function(n){return n>=rr.kEms&&n<rr.kDegrees}},{key:"isRelativeUnit",value:function(n){return n===rr.kPercentage||n===rr.kEms||n===rr.kRems}},{key:"isTime",value:function(n){return n===rr.kSeconds||n===rr.kMilliseconds}}])})(),hKe=(function(t){function e(n){var r;return it(this,e),r=Ar(this,e),r.colorSpace=n,r}return Sr(e,t),at(e,[{key:"getType",value:function(){return XA.kColorType}},{key:"to",value:function(r){return this}}])})(E4),b_=(function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t})({}),oI=(function(t){function e(n,r){var i;return it(this,e),i=Ar(this,e),i.type=n,i.value=r,i}return Sr(e,t),at(e,[{key:"clone",value:function(){return new e(this.type,this.value)}},{key:"buildCSSText",value:function(r,i,a){return a}},{key:"getType",value:function(){return XA.kColorType}}])})(E4),qp=(function(t){function e(n){var r;return it(this,e),r=Ar(this,e),r.value=n,r}return Sr(e,t),at(e,[{key:"clone",value:function(){return new e(this.value)}},{key:"getType",value:function(){return XA.kKeywordType}},{key:"buildCSSText",value:function(r,i,a){return a+this.value}}])})(E4),dKe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r="";return Number.isFinite(e)?r="NaN":e>0?r="infinity":r="-infinity",r+=n},qY=function(e){return fKe(uKe(e))},Vc=(function(t){function e(n){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rr.kNumber;it(this,e),r=Ar(this,e);var a;return typeof i=="string"?a=cKe(i):a=i,r.unit=a,r.value=n,r}return Sr(e,t),at(e,[{key:"clone",value:function(){return new e(this.value,this.unit)}},{key:"equals",value:function(r){var i=r;return this.value===i.value&&this.unit===i.unit}},{key:"getType",value:function(){return XA.kUnitType}},{key:"convertTo",value:function(r){if(this.unit===r)return new e(this.value,this.unit);var i=qY(this.unit);if(i!==qY(r)||i===rr.kUnknown)return null;var a=goe(this.unit)/goe(r);return new e(this.value*a,r)}},{key:"buildCSSText",value:function(r,i,a){var o;switch(this.unit){case rr.kUnknown:break;case rr.kInteger:o=Number(this.value).toFixed(0);break;case rr.kNumber:case rr.kPercentage:case rr.kEms:case rr.kRems:case rr.kPixels:case rr.kDegrees:case rr.kRadians:case rr.kGradians:case rr.kMilliseconds:case rr.kSeconds:case rr.kTurns:{var s=-999999,l=999999,c=this.value,u=XY(this.unit);if(c<s||c>l){var f=XY(this.unit);!Number.isFinite(c)||Number.isNaN(c)?o=dKe(c,f):o=c+(f||"")}else o="".concat(c).concat(u)}}return a+=o,a}}])})(E4),Ig=new Vc(0,"px");new Vc(1,"px");var _x=new Vc(0,"deg"),LJ=(function(t){function e(n,r,i){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return it(this,e),a=Ar(this,e,["rgb"]),a.r=n,a.g=r,a.b=i,a.alpha=o,a.isNone=s,a}return Sr(e,t),at(e,[{key:"clone",value:function(){return new e(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(r,i,a){return"".concat(a,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])})(hKe),voe=new qp("unset"),pKe=new qp("initial"),gKe=new qp("inherit"),x7={"":voe,unset:voe,initial:pKe,inherit:gKe},vKe=function(e){return x7[e]||(x7[e]=new qp(e)),x7[e]},_Ce=new LJ(0,0,0,0,!0),bCe=new LJ(0,0,0,0),mKe=ql(function(t,e,n,r){return new LJ(t,e,n,r)},function(t,e,n,r){return"rgba(".concat(t,",").concat(e,",").concat(n,",").concat(r,")")}),Bs=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rr.kNumber;return new Vc(e,n)};new Vc(50,"%");function yKe(t){var e=t.type,n=t.value;return e==="hex"?"#".concat(n):e==="literal"?n:e==="rgb"?"rgb(".concat(n.join(","),")"):"rgba(".concat(n.join(","),")")}var _Ke=(function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},e="";function n(M){throw new Error("".concat(e,": ").concat(M))}function r(){var M=i();return e.length>0&&n("Invalid input not EOF"),M}function i(){return E(a)}function a(){return o("linear-gradient",t.linearGradient,l)||o("repeating-linear-gradient",t.repeatingLinearGradient,l)||o("radial-gradient",t.radialGradient,f)||o("repeating-radial-gradient",t.repeatingRadialGradient,f)||o("conic-gradient",t.conicGradient,f)}function o(M,k,z){return s(k,function(j){var V=z();return V&&(X(t.comma)||n("Missing comma before color stops")),{type:M,orientation:V,colorStops:E(x)}})}function s(M,k){var z=X(M);if(z){X(t.startCall)||n("Missing (");var j=k(z);return X(t.endCall)||n("Missing )"),j}}function l(){return c()||u()}function c(){return $("directional",t.sideOrCorner,1)}function u(){return $("angular",t.angleValue,1)}function f(){var M,k=h(),z;return k&&(M=[],M.push(k),z=e,X(t.comma)&&(k=h(),k?M.push(k):e=z)),M}function h(){var M=d()||p();if(M)M.at=v();else{var k=g();if(k){M=k;var z=v();z&&(M.at=z)}else{var j=y();j&&(M={type:"default-radial",at:j})}}return M}function d(){var M=$("shape",/^(circle)/i,0);return M&&(M.style=U()||g()),M}function p(){var M=$("shape",/^(ellipse)/i,0);return M&&(M.style=B()||g()),M}function g(){return $("extent-keyword",t.extentKeywords,1)}function v(){if($("position",/^at/,0)){var M=y();return M||n("Missing positioning value"),M}}function y(){var M=_();if(M.x||M.y)return{type:"position",value:M}}function _(){return{x:B(),y:B()}}function E(M){var k=M(),z=[];if(k)for(z.push(k);X(t.comma);)k=M(),k?z.push(k):n("One extra comma");return z}function x(){var M=T();return M||n("Expected color definition"),M.length=B(),M}function T(){return w()||D()||C()||S()}function S(){return $("literal",t.literalColor,0)}function w(){return $("hex",t.hexColor,1)}function C(){return s(t.rgbColor,function(){return{type:"rgb",value:E(L)}})}function D(){return s(t.rgbaColor,function(){return{type:"rgba",value:E(L)}})}function L(){return X(t.number)[1]}function B(){return $("%",t.percentageValue,1)||I()||U()}function I(){return $("position-keyword",t.positionKeywords,1)}function U(){return $("px",t.pixelValue,1)||$("em",t.emValue,1)}function $(M,k,z){var j=X(k);if(j)return{type:M,value:j[z]}}function X(M){var k=/^[\n\r\t\s]+/.exec(e);k&&N(k[0].length);var z=M.exec(e);return z&&N(z[0].length),z}function N(M){e=e.substring(M)}return function(M){return e=M,r()}})();function bKe(t,e,n,r){var i=$o(r.value),a=0,o=0,s=a+e/2,l=o+n/2,c=Math.abs(e*Math.cos(i))+Math.abs(n*Math.sin(i)),u=t[0]+s-Math.cos(i)*c/2,f=t[1]+l-Math.sin(i)*c/2,h=t[0]+s+Math.cos(i)*c/2,d=t[1]+l+Math.sin(i)*c/2;return{x1:u,y1:f,x2:h,y2:d}}function EKe(t,e,n,r,i,a){var o=r.value,s=i.value;r.unit===rr.kPercentage&&(o=r.value/100*e),i.unit===rr.kPercentage&&(s=i.value/100*n);var l=Math.max(Rh([0,0],[o,s]),Rh([0,n],[o,s]),Rh([e,n],[o,s]),Rh([e,0],[o,s]));return a&&(a instanceof Vc?l=a.value:a instanceof qp&&(a.value==="closest-side"?l=Math.min(o,e-o,s,n-s):a.value==="farthest-side"?l=Math.max(o,e-o,s,n-s):a.value==="closest-corner"&&(l=Math.min(Rh([0,0],[o,s]),Rh([0,n],[o,s]),Rh([e,n],[o,s]),Rh([e,0],[o,s]))))),{x:o+t[0],y:s+t[1],r:l}}var xKe=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,SKe=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,TKe=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,ECe=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function AKe(t){var e,n=t.length;if(t[n-1].length=(e=t[n-1].length)!==null&&e!==void 0?e:{type:"%",value:"100"},n>1){var r;t[0].length=(r=t[0].length)!==null&&r!==void 0?r:{type:"%",value:"0"}}for(var i=0,a=Number(t[0].length.value),o=1;o<n;o++){var s,l=(s=t[o].length)===null||s===void 0?void 0:s.value;if(!Kn(l)&&!Kn(a)){for(var c=1;c<o-i;c++)t[i+c].length={type:"%",value:"".concat(a+(Number(l)-a)*c/(o-i))};i=o,a=Number(l)}}}var wKe={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},OKe=ql(function(t){var e;return t.type==="angular"?e=Number(t.value):e=wKe[t.value]||0,Bs(e,"deg")}),CKe=ql(function(t){var e=50,n=50,r="%",i="%";if(t?.type==="position"){var a=t.value,o=a.x,s=a.y;o?.type==="position-keyword"&&(o.value==="left"?e=0:o.value==="center"?e=50:o.value==="right"?e=100:o.value==="top"?n=0:o.value==="bottom"&&(n=100)),s?.type==="position-keyword"&&(s.value==="left"?e=0:s.value==="center"?n=50:s.value==="right"?e=100:s.value==="top"?n=0:s.value==="bottom"&&(n=100)),(o?.type==="px"||o?.type==="%"||o?.type==="em")&&(r=o?.type,e=Number(o.value)),(s?.type==="px"||s?.type==="%"||s?.type==="em")&&(i=s?.type,n=Number(s.value))}return{cx:Bs(e,r),cy:Bs(n,i)}}),RKe=ql(function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var e=_Ke(t);return e.map(function(s){var l=s.type,c=s.orientation,u=s.colorStops;AKe(u);var f=u.map(function(E){return{offset:Bs(Number(E.length.value),"%"),color:yKe(E)}});if(l==="linear-gradient")return new oI(b_.LinearGradient,{angle:c?OKe(c):_x,steps:f});if(l==="radial-gradient"&&(c||(c=[{type:"shape",value:"circle"}]),c[0].type==="shape"&&c[0].value==="circle")){var h=CKe(c[0].at),d=h.cx,p=h.cy,g;if(c[0].style){var v=c[0].style,y=v.type,_=v.value;y==="extent-keyword"?g=vKe(_):g=Bs(_,y)}return new oI(b_.RadialGradient,{cx:d,cy:p,size:g,steps:f})}})}var n=t[0];if(t[1]==="("||t[2]==="("){if(n==="l"){var r=xKe.exec(t);if(r){var i,a=((i=r[2].match(ECe))===null||i===void 0?void 0:i.map(function(s){return s.split(":")}))||[];return[new oI(b_.LinearGradient,{angle:Bs(parseFloat(r[1]),"deg"),steps:a.map(function(s){var l=ir(s,2),c=l[0],u=l[1];return{offset:Bs(Number(c)*100,"%"),color:u}})})]}}else if(n==="r"){var o=MKe(t);if(o)if($i(o))t=o;else return[new oI(b_.RadialGradient,o)]}else if(n==="p")return PKe(t)}});function MKe(t){var e=SKe.exec(t);if(e){var n,r=((n=e[4].match(ECe))===null||n===void 0?void 0:n.map(function(i){return i.split(":")}))||[];return{cx:Bs(50,"%"),cy:Bs(50,"%"),steps:r.map(function(i){var a=ir(i,2),o=a[0],s=a[1];return{offset:Bs(Number(o)*100,"%"),color:s}})}}return null}function PKe(t){var e=TKe.exec(t);if(e){var n=e[1],r=e[2];switch(n){case"a":n="repeat";break;case"x":n="repeat-x";break;case"y":n="repeat-y";break;case"n":n="no-repeat";break;default:n="no-repeat"}return{image:r,repetition:n}}return null}function bx(t){return t&&!!t.image}function LD(t){return t&&!Kn(t.r)&&!Kn(t.g)&&!Kn(t.b)}var mA=ql(function(t){if(bx(t))return ze({repetition:"repeat"},t);if(Kn(t)&&(t=""),t==="transparent")return bCe;if(t==="currentColor")t="black";else if(t==="none")return _Ce;var e=RKe(t);if(e)return e;var n=b4(t),r=[0,0,0,0];return n!==null&&(r[0]=n.r||0,r[1]=n.g||0,r[2]=n.b||0,r[3]=n.opacity),mKe.apply(void 0,r)});function NKe(t,e){if(!(!LD(t)||!LD(e)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(e.r),Number(e.g),Number(e.b),Number(e.alpha)],function(n){var r=n.slice();if(r[3])for(var i=0;i<3;i++)r[i]=Math.round(ga(r[i],0,255));return r[3]=ga(r[3],0,1),"rgba(".concat(r.join(","),")")}]}function DP(t,e){if(Kn(e))return Bs(0,"px");if(e="".concat(e).trim().toLowerCase(),isFinite(Number(e))){if("px".search(t)>=0)return Bs(Number(e),"px");if("deg".search(t)>=0)return Bs(Number(e),"deg")}var n=[];e=e.replace(t,function(i){return n.push(i),"U".concat(i)});var r="U(".concat(t.source,")");return n.map(function(i){return Bs(Number(e.replace(new RegExp("U".concat(i),"g"),"").replace(new RegExp(r,"g"),"*0")),i)})[0]}var xCe=function(e){return DP(new RegExp("px","g"),e)},IKe=ql(xCe),LKe=function(e){return DP(new RegExp("%","g"),e)};ql(LKe);var SCe=function(e){return Ln(e)||isFinite(Number(e))?Bs(Number(e)||0,"px"):DP(new RegExp("px|%|em|rem","g"),e)},ZY=ql(SCe),TCe=function(e){return DP(new RegExp("deg|rad|grad|turn","g"),e)},kKe=ql(TCe);function DKe(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a="",o=t.value||0,s=e.value||0,l=qY(t.unit),c=t.convertTo(l),u=e.convertTo(l);return c&&u?(o=c.value,s=u.value,a=XY(t.unit)):(Vc.isLength(t.unit)||Vc.isLength(e.unit))&&(o=_d(t,i,n),s=_d(e,i,n),a="px"),[o,s,function(f){return f+a}]}function Nh(t){var e=0;return t.unit===rr.kDegrees?e=t.value:t.unit===rr.kRadians?e=Ph(Number(t.value)):t.unit===rr.kTurns?e=LZe(Number(t.value)):t.value&&(e=t.value),e}function moe(t,e){var n;return Array.isArray(t)?n=t.map(function(r){return Number(r)}):$i(t)?n=t.split(" ").map(function(r){return Number(r)}):Ln(t)&&(n=[t]),e===2?n.length===1?[n[0],n[0]]:[n[0],n[1]]:e===4?n.length===1?[n[0],n[0],n[0],n[0]]:n.length===2?[n[0],n[1],n[0],n[1]]:n.length===3?[n[0],n[1],n[2],n[1]]:[n[0],n[1],n[2],n[3]]:e==="even"&&n.length%2===1?[].concat(Dr(n),Dr(n)):n}function _d(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.unit===rr.kPixels)return Number(t.value);if(t.unit===rr.kPercentage&&n){var i=n.nodeName===Yt.GROUP?n.getLocalBounds():n.getGeometryBounds();return(r?i.min[e]:0)+t.value/100*i.halfExtents[e]*2}return 0}var BKe=function(e){return DP(/deg|rad|grad|turn|px|%/g,e)},FKe=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function UKe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(t=t.toLowerCase().trim(),t==="none")return[];for(var e=/\s*([\w-]+)\(([^)]*)\)/g,n=[],r,i=0;r=e.exec(t);){if(r.index!==i)return[];if(i=r.index+r[0].length,FKe.indexOf(r[1])>-1&&n.push({name:r[1],params:r[2].split(" ").map(function(a){return BKe(a)||mA(a)})}),e.lastIndex===t.length)return n}return[]}function ACe(t){return t.toString()}var wCe=function(e){return typeof e=="number"?Bs(e):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(e)?Bs(Number(e)):Bs(0)},KY=ql(wCe);ql(function(t){return $i(t)?t.split(" ").map(KY):t.map(KY)});function kJ(t,e){return[t,e,ACe]}function DJ(t,e){return function(n,r){return[n,r,function(i){return ACe(ga(i,t,e))}]}}function OCe(t,e){if(t.length===e.length)return[t,e,function(n){return n}]}function QY(t){return t.parsedStyle.d.totalLength===0&&(t.parsedStyle.d.totalLength=vwe(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function jKe(t){return t.parsedStyle.points.totalLength===0&&(t.parsedStyle.points.totalLength=GOe(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function zKe(t){for(var e=0;e<t.length;e++){var n=t[e-1],r=t[e],i=r[0];if(i==="M"&&n){var a=n[0],o=[r[1],r[2]],s=void 0;a==="L"||a==="M"?s=[n[1],n[2]]:(a==="C"||a==="A"||a==="Q")&&(s=[n[n.length-2],n[n.length-1]]),s&&kD(o,s)&&(t.splice(e,1),e--)}}}function $Ke(t){for(var e=!1,n=t.length,r=0;r<n;r++){var i=t[r],a=i[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function HKe(t){for(var e=[],n=[],r=[],i=0;i<t.length;i++){var a=t[i],o=a[0];o==="M"?(r.length&&(n.push(r),r=[]),r.push([a[1],a[2]])):o==="Z"?r.length&&(e.push(r),r=[]):r.push([a[1],a[2]])}return r.length>0&&n.push(r),{polygons:e,polylines:n}}function kD(t,e){return t[0]===e[0]&&t[1]===e[1]}function GKe(t,e){for(var n=[],r=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,c=o.prePoint,u=void 0;switch(o.command){case"Q":u=WOe(c[0],c[1],l[1],l[2],l[3],l[4]);break;case"C":u=HOe(c[0],c[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;u=zOe(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:n.push(s[0]),r.push(s[1]);break}u&&(o.box=u,n.push(u.x,u.x+u.width),r.push(u.y,u.y+u.height))}n=n.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0}),r=r.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0});var h=kA(n),d=kA(r),p=LA(n),g=LA(r);if(i.length===0)return{x:h,y:d,width:p-h,height:g-d};for(var v=0;v<i.length;v++){var y=i[v],_=y.currentPoint,E=void 0;_[0]===h?(E=sI(y,e),h-=E.xExtra):_[0]===p&&(E=sI(y,e),p+=E.xExtra),_[1]===d?(E=sI(y,e),d-=E.yExtra):_[1]===g&&(E=sI(y,e),g+=E.yExtra)}return{x:h,y:d,width:p-h,height:g-d}}function sI(t,e){var n=t.prePoint,r=t.currentPoint,i=t.nextPoint,a=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),o=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||cA(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(l/2-c)*(e/2*(1/Math.sin(l/2)))-e/2||0,yExtra:Math.cos(u-l/2)*(e/2*(1/Math.sin(l/2)))-e/2||0};return f}function yoe(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}var _oe=function(e,n){var r=e.x*n.x+e.y*n.y,i=Math.sqrt((Math.pow(e.x,2)+Math.pow(e.y,2))*(Math.pow(n.x,2)+Math.pow(n.y,2))),a=e.x*n.y-e.y*n.x<0?-1:1,o=a*Math.acos(r/i);return o},boe=function(e,n,r,i,a,o,s,l){n=Math.abs(n),r=Math.abs(r),i=WF(i,360);var c=$o(i);if(e.x===s.x&&e.y===s.y)return{x:e.x,y:e.y,ellipticalArcAngle:0};if(n===0||r===0)return{x:0,y:0,ellipticalArcAngle:0};var u=(e.x-s.x)/2,f=(e.y-s.y)/2,h={x:Math.cos(c)*u+Math.sin(c)*f,y:-Math.sin(c)*u+Math.cos(c)*f},d=Math.pow(h.x,2)/Math.pow(n,2)+Math.pow(h.y,2)/Math.pow(r,2);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var p=Math.pow(n,2)*Math.pow(r,2)-Math.pow(n,2)*Math.pow(h.y,2)-Math.pow(r,2)*Math.pow(h.x,2),g=Math.pow(n,2)*Math.pow(h.y,2)+Math.pow(r,2)*Math.pow(h.x,2),v=p/g;v=v<0?0:v;var y=(a!==o?1:-1)*Math.sqrt(v),_={x:y*(n*h.y/r),y:y*(-(r*h.x)/n)},E={x:Math.cos(c)*_.x-Math.sin(c)*_.y+(e.x+s.x)/2,y:Math.sin(c)*_.x+Math.cos(c)*_.y+(e.y+s.y)/2},x={x:(h.x-_.x)/n,y:(h.y-_.y)/r},T=_oe({x:1,y:0},x),S={x:(-h.x-_.x)/n,y:(-h.y-_.y)/r},w=_oe(x,S);!o&&w>0?w-=2*Math.PI:o&&w<0&&(w+=2*Math.PI),w%=2*Math.PI;var C=T+w*l,D=n*Math.cos(C),L=r*Math.sin(C),B={x:Math.cos(c)*D-Math.sin(c)*L+E.x,y:Math.sin(c)*D+Math.cos(c)*L+E.y,ellipticalArcStartAngle:T,ellipticalArcEndAngle:T+w,ellipticalArcAngle:C,ellipticalArcCenter:E,resultantRx:n,resultantRy:r};return B};function WKe(t){for(var e=[],n=null,r=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];r=t[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=VKe(n,l);u.arcParams=f;break}if(c==="Z")n=i,r=t[a+1];else{var h=l.length;n=[l[h-2],l[h-1]]}r&&r[0]==="Z"&&(r=t[a],e[a]&&(e[a].prePoint=n)),u.currentPoint=n,e[a]&&kD(n,e[a].currentPoint)&&(e[a].prePoint=u.prePoint);var d=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=d;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]];else if(c==="Q"){var g=[l[1],l[2]];u.startTangent=[p[0]-g[0],p[1]-g[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]}else if(c==="T"){var v=e[s-1],y=yoe(v.currentPoint,p);v.command==="Q"?(u.command="Q",u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[n[0]-y[0],n[1]-y[1]]):(u.command="TL",u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]])}else if(c==="C"){var _=[l[1],l[2]],E=[l[3],l[4]];u.startTangent=[p[0]-_[0],p[1]-_[1]],u.endTangent=[n[0]-E[0],n[1]-E[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[_[0]-E[0],_[1]-E[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[E[0]-_[0],E[1]-_[1]])}else if(c==="S"){var x=e[s-1],T=yoe(x.currentPoint,p),S=[l[1],l[2]];x.command==="C"?(u.command="C",u.startTangent=[p[0]-T[0],p[1]-T[1]],u.endTangent=[n[0]-S[0],n[1]-S[1]]):(u.command="SQ",u.startTangent=[p[0]-S[0],p[1]-S[1]],u.endTangent=[n[0]-S[0],n[1]-S[1]])}else if(c==="A"){var w=Eoe(u,0),C=w.x,D=w.y,L=Eoe(u,1,!1),B=L.x,I=L.y;u.startTangent=[C,D],u.endTangent=[B,I]}e.push(u)}return e}function Eoe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=t.arcParams,i=r.rx,a=i===void 0?0:i,o=r.ry,s=o===void 0?0:o,l=r.xRotation,c=r.arcFlag,u=r.sweepFlag,f=boe({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e),h=boe({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},n?e+.005:e-.005),d=h.x-f.x,p=h.y-f.y,g=Math.sqrt(d*d+p*p);return{x:-d/g,y:-p/g}}function lI(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function JY(t,e){return lI(t)*lI(e)?(t[0]*e[0]+t[1]*e[1])/(lI(t)*lI(e)):1}function xoe(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(JY(t,e))}function VKe(t,e){var n=e[1],r=e[2],i=WF($o(e[3]),Math.PI*2),a=e[4],o=e[5],s=t[0],l=t[1],c=e[6],u=e[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,h=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,d=f*f/(n*n)+h*h/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var p=n*n*(h*h)+r*r*(f*f),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;a===o&&(g*=-1),isNaN(g)&&(g=0);var v=r?g*n*h/r:0,y=n?g*-r*f/n:0,_=(s+c)/2+Math.cos(i)*v-Math.sin(i)*y,E=(l+u)/2+Math.sin(i)*v+Math.cos(i)*y,x=[(f-v)/n,(h-y)/r],T=[(-1*f-v)/n,(-1*h-y)/r],S=xoe([1,0],x),w=xoe(x,T);return JY(x,T)<=-1&&(w=Math.PI),JY(x,T)>=1&&(w=0),o===0&&w>0&&(w-=2*Math.PI),o===1&&w<0&&(w+=2*Math.PI),{cx:_,cy:E,rx:kD(t,[c,u])?0:n,ry:kD(t,[c,u])?0:r,startAngle:S,endAngle:S+w,xRotation:i,arcFlag:a,sweepFlag:o}}var CCe=function(e){if(e===""||Array.isArray(e)&&e.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var n;try{n=FA(e)}catch{n=FA(""),console.error("[g]: Invalid SVG Path definition: ".concat(e))}zKe(n);var r=$Ke(n),i=HKe(n),a=i.polygons,o=i.polylines,s=WKe(n),l=GKe(s,0),c=l.x,u=l.y,f=l.width,h=l.height;return{absolutePath:n,hasArc:r,segments:s,polygons:a,polylines:o,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(f)?f:0,height:Number.isFinite(h)?h:0}}},YKe=ql(CCe);function RCe(t){return $i(t)?YKe(t):CCe(t)}function XKe(t,e,n){var r=t.curve,i=e.curve;(!r||r.length===0)&&(r=NR(t.absolutePath,!1),t.curve=r),(!i||i.length===0)&&(i=NR(e.absolutePath,!1),e.curve=i);var a=[r,i];r.length!==i.length&&(a=TQ(r,i));var o=hD(a[0])!==hD(a[1])?dwe(a[0]):hwe(a[0]);return[o,mwe(a[1],o),function(s){return s}]}function qKe(t,e){var n;return $i(t)?n=t.split(" ").map(function(r){var i=r.split(","),a=ir(i,2),o=a[0],s=a[1];return[Number(o),Number(s)]}):n=t,{points:n,totalLength:0,segments:[]}}function ZKe(t,e){return[t.points,e.points,function(n){return n}]}var al=null,yA=/\s*(\w+)\(([^)]*)\)/g;function _h(t){return function(e){var n=0;return t.map(function(r){return r===al?e[n++]:r})}}function dE(t){return t}var WR={matrix:["NNNNNN",[al,al,0,0,al,al,0,0,0,0,1,0,al,al,0,1],dE],matrix3d:["NNNNNNNNNNNNNNNN",dE],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",_h([al,al,new Vc(1)]),dE],scaleX:["N",_h([al,new Vc(1),new Vc(1)]),_h([al,new Vc(1)])],scaleY:["N",_h([new Vc(1),al,new Vc(1)]),_h([new Vc(1),al])],scaleZ:["N",_h([new Vc(1),new Vc(1),al])],scale3d:["NNN",dE],skew:["Aa",null,dE],skewX:["A",null,_h([al,_x])],skewY:["A",null,_h([_x,al])],translate:["Tt",_h([al,al,Ig]),dE],translateX:["T",_h([al,Ig,Ig]),_h([al,Ig])],translateY:["T",_h([Ig,al,Ig]),_h([Ig,al])],translateZ:["L",_h([Ig,Ig,al])],translate3d:["TTL",dE]};function MCe(t){for(var e=[],n=t.length,r=0;r<n;r++){var i=t[r],a=i[0],o=i.slice(1);a==="translate"||a==="skew"?o.length===1&&o.push(0):a==="scale"&&o.length===1&&o.push(o[0]);var s=WR[a];if(!s)return[];var l=o.map(function(c){return Bs(c)});e.push({t:a,d:l})}return e}function PCe(t){if(Array.isArray(t))return MCe(t);if(t=(t||"none").trim(),t==="none")return[];var e=[],n,r=0;for(yA.lastIndex=0;n=yA.exec(t);){if(n.index!==r)return[];r=n.index+n[0].length;var i=n[1],a=WR[i];if(!a)return[];var o=n[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],c=0;c<s.length;c++){var u=o[c],f=s[c],h=void 0;if(u?h={A:function(p){return p.trim()==="0"?_x:kKe(p)},N:KY,T:ZY,L:IKe}[f.toUpperCase()](u):h={a:_x,n:l[0],t:Ig}[f],h===void 0)return[];l.push(h)}if(e.push({t:i,d:l}),yA.lastIndex===t.length)return e}return[]}function KKe(t){if(Array.isArray(t))return MCe(t);if(t=(t||"none").trim(),t==="none")return[];var e=[],n,r=0;for(yA.lastIndex=0;n=yA.exec(t);){if(n.index!==r)return[];r=n.index+n[0].length;var i=n[1],a=WR[i];if(!a)return[];var o=n[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],c=0;c<s.length;c++){var u=o[c],f=s[c],h=void 0;if(u?h={A:function(p){return p.trim()==="0"?_x:TCe(p)},N:wCe,T:SCe,L:xCe}[f.toUpperCase()](u):h={a:_x,n:l[0],t:Ig}[f],h===void 0)return[];l.push(h)}if(e.push({t:i,d:l}),yA.lastIndex===t.length)return e}return[]}function QKe(t){var e,n,r,i;switch(t.t){case"rotateX":return i=$o(Nh(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=$o(Nh(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=$o(Nh(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":e=t.d[0].value,n=t.d[1].value,r=t.d[2].value,i=$o(Nh(t.d[3]));var a=e*e+n*n+r*r;if(a===0)e=1,n=0,r=0;else if(a!==1){var o=Math.sqrt(a);e/=o,n/=o,r/=o}var s=Math.sin(i/2),l=s*Math.cos(i/2),c=s*s;return[1-2*(n*n+r*r)*c,2*(e*n*c+r*l),2*(e*r*c-n*l),0,2*(e*n*c-r*l),1-2*(e*e+r*r)*c,2*(n*r*c+e*l),0,2*(e*r*c+n*l),2*(n*r*c-e*l),1-2*(e*e+n*n)*c,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=$o(Nh(t.d[0])),f=$o(Nh(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=$o(Nh(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=$o(Nh(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return e=_d(t.d[0],0,null)||0,n=_d(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1];case"translateX":return e=_d(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,0,0,1];case"translateY":return n=_d(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,n,0,1];case"translateZ":return r=_d(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,r,1];case"translate3d":return e=_d(t.d[0],0,null)||0,n=_d(t.d[1],0,null)||0,r=_d(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,e,n,r,1];case"perspective":var h=_d(t.d[0],0,null)||0,d=h?-1/h:0;return[1,0,0,0,0,1,0,0,0,0,1,d,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function JKe(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function eQe(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(QKe).reduce(JKe)}function Soe(t){var e=[0,0,0],n=[1,1,1],r=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return UZe(eQe(t),e,n,r,i,a),[[e,n,r,a,i]]}var tQe=(function(){function t(r,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=0;o<4;o++)for(var s=0;s<4;s++)for(var l=0;l<4;l++)a[o][s]+=i[o][l]*r[l][s];return a}function e(r){return r[0][2]===0&&r[0][3]===0&&r[1][2]===0&&r[1][3]===0&&r[2][0]===0&&r[2][1]===0&&r[2][2]===1&&r[2][3]===0&&r[3][2]===0&&r[3][3]===1}function n(r,i,a,o,s){for(var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)l[c][3]=s[c];for(var u=0;u<3;u++)for(var f=0;f<3;f++)l[3][u]+=r[f]*l[f][u];var h=o[0],d=o[1],p=o[2],g=o[3],v=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];v[0][0]=1-2*(d*d+p*p),v[0][1]=2*(h*d-p*g),v[0][2]=2*(h*p+d*g),v[1][0]=2*(h*d+p*g),v[1][1]=1-2*(h*h+p*p),v[1][2]=2*(d*p-h*g),v[2][0]=2*(h*p-d*g),v[2][1]=2*(d*p+h*g),v[2][2]=1-2*(h*h+d*d),l=t(l,v);var y=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(y[2][1]=a[2],l=t(l,y)),a[1]&&(y[2][1]=0,y[2][0]=a[0],l=t(l,y)),a[0]&&(y[2][0]=0,y[1][0]=a[0],l=t(l,y));for(var _=0;_<3;_++)for(var E=0;E<3;E++)l[_][E]*=i[_];return e(l)?[l[0][0],l[0][1],l[1][0],l[1][1],l[3][0],l[3][1]]:l[0].concat(l[1],l[2],l[3])}return n})();function nQe(t){return t.toFixed(6).replace(".000000","")}function S7(t,e){var n,r;return t.decompositionPair!==e&&(t.decompositionPair=e,n=Soe(t)),e.decompositionPair!==t&&(e.decompositionPair=t,r=Soe(e)),n[0]===null||r[0]===null?[[!1],[!0],function(i){return i?e[0].d:t[0].d}]:(n[0].push(0),r[0].push(1),[n,r,function(i){var a=iQe(n[0][3],r[0][3],i[5]),o=tQe(i[0],i[1],i[2],a,i[4]),s=o.map(nQe).join(",");return s}])}function rQe(t,e){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[r];return n}function iQe(t,e,n){var r=rQe(t,e);r=ga(r,-1,1);var i=[];if(r===1)i=t;else for(var a=Math.acos(r),o=Math.sin(n*a)*1/Math.sqrt(1-r*r),s=0;s<4;s++)i.push(t[s]*(Math.cos(n*a)-r*o)+e[s]*o);return i}function T7(t){return t.replace(/[XY]/,"")}function A7(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var aQe=function(e,n){return e==="perspective"&&n==="perspective"||(e==="matrix"||e==="matrix3d")&&(n==="matrix"||n==="matrix3d")};function oQe(t,e,n){var r=!1;if(!t.length||!e.length){t.length||(r=!0,t=e,e=[]);for(var i=function(){var B=t[a],I=B.t,U=B.d,$=I.substring(0,5)==="scale"?1:0;e.push({t:I,d:U.map(function(X){return typeof X=="number"?Bs($):Bs($,X.unit)})})},a=0;a<t.length;a++)i()}var o=[],s=[],l=[];if(t.length!==e.length){var c=S7(t,e);o=[c[0]],s=[c[1]],l=[["matrix",[c[2]]]]}else for(var u=0;u<t.length;u++){var f=t[u].t,h=e[u].t,d=t[u].d,p=e[u].d,g=WR[f],v=WR[h],y=void 0;if(aQe(f,h)){var _=S7([t[u]],[e[u]]);o.push(_[0]),s.push(_[1]),l.push(["matrix",[_[2]]]);continue}else if(f===h)y=f;else if(g[2]&&v[2]&&T7(f)===T7(h))y=T7(f),d=g[2](d),p=v[2](p);else if(g[1]&&v[1]&&A7(f)===A7(h))y=A7(f),d=g[1](d),p=v[1](p);else{var E=S7(t,e);o=[E[0]],s=[E[1]],l=[["matrix",[E[2]]]];break}for(var x=[],T=[],S=[],w=0;w<d.length;w++){var C=DKe(d[w],p[w],n,!1,w);x[w]=C[0],T[w]=C[1],S.push(C[2])}o.push(x),s.push(T),l.push([y,S])}if(r){var D=o;o=s,s=D}return[o,s,function(L){return L.map(function(B,I){var U=B.map(function($,X){return l[I][1][X]($)}).join(",");return l[I][0]==="matrix"&&U.split(",").length===16&&(l[I][0]="matrix3d"),l[I][0]==="matrix3d"&&U.split(",").length===6&&(l[I][0]="matrix"),"".concat(l[I][0],"(").concat(U,")")}).join(" ")}]}var sQe=ql(function(t){if($i(t)){if(t==="text-anchor")return[Bs(0,"px"),Bs(0,"px")];var e=t.split(" ");return e.length===1&&(e[0]==="top"||e[0]==="bottom"?(e[1]=e[0],e[0]="center"):e[1]="center"),e.length!==2?null:[ZY(Toe(e[0])),ZY(Toe(e[1]))]}return[Bs(t[0]||0,"px"),Bs(t[1]||0,"px")]});function Toe(t){return t==="center"?"50%":t==="left"||t==="top"?"0%":t==="right"||t==="bottom"?"100%":t}var BJ=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:tr.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:tr.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:tr.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:tr.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:tr.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:tr.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:tr.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:tr.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:tr.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:tr.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:tr.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:tr.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:tr.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:tr.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:tr.FILTER},{n:"clipPath",syntax:tr.DEFINED_PATH},{n:"textPath",syntax:tr.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:tr.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:tr.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:tr.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:tr.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:tr.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:tr.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:tr.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:tr.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:tr.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:tr.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:tr.COORDINATE},{n:"y1",int:!0,l:!0,syntax:tr.COORDINATE},{n:"z1",int:!0,l:!0,syntax:tr.COORDINATE},{n:"x2",int:!0,l:!0,syntax:tr.COORDINATE},{n:"y2",int:!0,l:!0,syntax:tr.COORDINATE},{n:"z2",int:!0,l:!0,syntax:tr.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:tr.PATH,p:50},{n:"points",int:!0,l:!0,syntax:tr.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:tr.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:tr.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:tr.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:tr.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:tr.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:tr.NUMBER,d:function(e){return e===Yt.PATH||e===Yt.POLYGON||e===Yt.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:tr.MARKER},{n:"markerEnd",syntax:tr.MARKER},{n:"markerMid",syntax:tr.MARKER},{n:"markerStartOffset",syntax:tr.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:tr.LENGTH,l:!0,int:!0,d:"0"}],lQe=new Set(BJ.filter(function(t){return!!t.l}).map(function(t){return t.n})),NCe={},cQe=(function(){function t(e){var n=this;it(this,t),this.runtime=e,BJ.forEach(function(r){n.registerMetadata(r)})}return at(t,[{key:"registerMetadata",value:function(n){[n.n].concat(Dr(n.a||[])).forEach(function(r){NCe[r]=n})}},{key:"getPropertySyntax",value:function(n){return this.runtime.CSSPropertySyntaxFactory[n]}},{key:"processProperties",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{forceUpdateGeometry:!1};Object.assign(n.attributes,r);var a=n.parsedStyle.clipPath,o=n.parsedStyle.offsetPath;uQe(n,r);var s=!!i.forceUpdateGeometry;if(!s){for(var l in r)if(lQe.has(l)){s=!0;break}}var c=ICe(n);c.has("fill")&&r.fill&&(n.parsedStyle.fill=mA(r.fill)),c.has("stroke")&&r.stroke&&(n.parsedStyle.stroke=mA(r.stroke)),c.has("shadowColor")&&r.shadowColor&&(n.parsedStyle.shadowColor=mA(r.shadowColor)),c.has("filter")&&r.filter&&(n.parsedStyle.filter=UKe(r.filter)),c.has("radius")&&!Kn(r.radius)&&(n.parsedStyle.radius=moe(r.radius,4)),c.has("lineDash")&&!Kn(r.lineDash)&&(n.parsedStyle.lineDash=moe(r.lineDash,"even")),c.has("points")&&r.points&&(n.parsedStyle.points=qKe(r.points)),c.has("d")&&r.d===""&&(n.parsedStyle.d=ze({},vCe)),c.has("d")&&r.d&&(n.parsedStyle.d=RCe(r.d)),c.has("textTransform")&&r.textTransform&&this.runtime.CSSPropertySyntaxFactory[tr.TEXT_TRANSFORM].calculator(null,null,{value:r.textTransform},n,null),c.has("clipPath")&&!mr(r.clipPath)&&this.runtime.CSSPropertySyntaxFactory[tr.DEFINED_PATH].calculator("clipPath",a,r.clipPath,n,this.runtime),c.has("offsetPath")&&r.offsetPath&&this.runtime.CSSPropertySyntaxFactory[tr.DEFINED_PATH].calculator("offsetPath",o,r.offsetPath,n,this.runtime),c.has("transform")&&r.transform&&(n.parsedStyle.transform=PCe(r.transform)),c.has("transformOrigin")&&r.transformOrigin&&(n.parsedStyle.transformOrigin=sQe(r.transformOrigin)),c.has("markerStart")&&r.markerStart&&(n.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[tr.MARKER].calculator(null,r.markerStart,r.markerStart,null,null)),c.has("markerEnd")&&r.markerEnd&&(n.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[tr.MARKER].calculator(null,r.markerEnd,r.markerEnd,null,null)),c.has("markerMid")&&r.markerMid&&(n.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[tr.MARKER].calculator("",r.markerMid,r.markerMid,null,null)),c.has("zIndex")&&!Kn(r.zIndex)&&this.runtime.CSSPropertySyntaxFactory[tr.Z_INDEX].postProcessor(n),c.has("offsetDistance")&&!Kn(r.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[tr.OFFSET_DISTANCE].postProcessor(n),c.has("transform")&&r.transform&&this.runtime.CSSPropertySyntaxFactory[tr.TRANSFORM].postProcessor(n),c.has("transformOrigin")&&r.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[tr.TRANSFORM_ORIGIN].postProcessor(n),s&&(n.geometry.dirty=!0,n.dirty(!0,!0),i.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(n))}},{key:"updateGeometry",value:function(n){var r=n.nodeName,i=this.runtime.geometryUpdaterFactory[r];if(i){var a=n.geometry;a.contentBounds||(a.contentBounds=new cs),a.renderBounds||(a.renderBounds=new cs);var o=n.parsedStyle,s=i.update(o,n),l=s.cx,c=l===void 0?0:l,u=s.cy,f=u===void 0?0:u,h=s.cz,d=h===void 0?0:h,p=s.hwidth,g=p===void 0?0:p,v=s.hheight,y=v===void 0?0:v,_=s.hdepth,E=_===void 0?0:_,x=[Math.abs(g),Math.abs(y),E],T=o.stroke,S=o.lineWidth,w=S===void 0?1:S,C=o.increasedLineWidthForHitTesting,D=C===void 0?0:C,L=o.shadowType,B=L===void 0?"outer":L,I=o.shadowColor,U=o.filter,$=U===void 0?[]:U,X=o.transformOrigin,N=[c,f,d];a.contentBounds.update(N,x);var M=r===Yt.POLYLINE||r===Yt.POLYGON||r===Yt.PATH?Math.SQRT2:.5,k=T&&!T.isNone;if(k){var z=((w||0)+(D||0))*M;x[0]+=z,x[1]+=z}if(a.renderBounds.update(N,x),I&&B&&B!=="inner"){var j=a.renderBounds,V=j.min,Q=j.max,ee=o.shadowBlur,re=o.shadowOffsetX,ne=o.shadowOffsetY,le=ee||0,ue=re||0,ve=ne||0,Se=V[0]-le+ue,Re=Q[0]+le+ue,Xe=V[1]-le+ve,Le=Q[1]+le+ve;V[0]=Math.min(V[0],Se),Q[0]=Math.max(Q[0],Re),V[1]=Math.min(V[1],Xe),Q[1]=Math.max(Q[1],Le),a.renderBounds.setMinMax(V,Q)}$.forEach(function(At){var zt=At.name,rn=At.params;if(zt==="blur"){var Wn=rn[0].value;a.renderBounds.update(a.renderBounds.center,cf(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[Wn,Wn,0]))}else if(zt==="drop-shadow"){var Sn=rn[0].value,In=rn[1].value,de=rn[2].value,sr=a.renderBounds,zr=sr.min,st=sr.max,Ft=zr[0]-de+Sn,An=st[0]+de+Sn,wn=zr[1]-de+In,$n=st[1]+de+In;zr[0]=Math.min(zr[0],Ft),st[0]=Math.max(st[0],An),zr[1]=Math.min(zr[1],wn),st[1]=Math.max(st[1],$n),a.renderBounds.setMinMax(zr,st)}}),n.geometry.dirty=!1;var Lt=g<0,xt=y<0,dt=(Lt?-1:1)*(X?_d(X[0],0,n,!0):0),Bt=(xt?-1:1)*(X?_d(X[1],1,n,!0):0);(dt||Bt)&&n.setOrigin(dt,Bt)}}},{key:"updateSizeAttenuation",value:function(n,r){n.style.isSizeAttenuation?(n.style.rawLineWidth||(n.style.rawLineWidth=n.style.lineWidth),n.style.lineWidth=(n.style.rawLineWidth||1)/r,n.nodeName===Yt.CIRCLE&&(n.style.rawR||(n.style.rawR=n.style.r),n.style.r=(n.style.rawR||1)/r)):(n.style.rawLineWidth&&(n.style.lineWidth=n.style.rawLineWidth,delete n.style.rawLineWidth),n.nodeName===Yt.CIRCLE&&n.style.rawR&&(n.style.r=n.style.rawR,delete n.style.rawR))}}])})();function uQe(t,e){var n=ICe(t);for(var r in e)n.has(r)&&(t.parsedStyle[r]=e[r])}function ICe(t){return t.constructor.PARSED_STYLE_LIST}var fQe=(function(){function t(){it(this,t),this.mixer=kJ}return at(t,[{key:"calculator",value:function(n,r,i,a){return Nh(i)}}])})(),hQe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a,o){return i instanceof qp&&(i=null),o.sceneGraphService.updateDisplayObjectDependency(n,r,i,a),n==="clipPath"&&a.forEach(function(s){s.childNodes.length===0&&o.sceneGraphService.dirtyToRoot(s)}),i}}])})(),dQe=(function(){function t(){it(this,t),this.parser=mA,this.mixer=NKe}return at(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof qp?i.value==="none"?_Ce:bCe:i}}])})(),pQe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i){return i instanceof qp?[]:i}}])})();function Aoe(t){var e=t.parsedStyle,n=e.fontSize;return Kn(n)?null:n}var eX=(function(){function t(){it(this,t),this.mixer=kJ}return at(t,[{key:"calculator",value:function(n,r,i,a,o){if(Ln(i))return i;if(Vc.isRelativeUnit(i.unit)){if(i.unit===rr.kPercentage)return 0;if(i.unit===rr.kEms){if(a.parentNode){var s=Aoe(a.parentNode);if(s)return s*=i.value,s}return 0}if(i.unit===rr.kRems){var l;if(a!=null&&(l=a.ownerDocument)!==null&&l!==void 0&&l.documentElement){var c=Aoe(a.ownerDocument.documentElement);if(c)return c*=i.value,c}return 0}}else return i.value}}])})(),gQe=(function(){function t(){it(this,t),this.mixer=OCe}return at(t,[{key:"calculator",value:function(n,r,i){return i.map(function(a){return a.value})}}])})(),vQe=(function(){function t(){it(this,t),this.mixer=OCe}return at(t,[{key:"calculator",value:function(n,r,i){return i.map(function(a){return a.value})}}])})(),mQe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a){var o;i instanceof qp&&(i=null);var s=(o=i)===null||o===void 0?void 0:o.cloneNode(!0);return s&&(s.style.isMarker=!0),s}}])})(),yQe=(function(){function t(){it(this,t),this.mixer=kJ}return at(t,[{key:"calculator",value:function(n,r,i){return i.value}}])})(),_Qe=(function(){function t(){it(this,t),this.mixer=DJ(0,1)}return at(t,[{key:"calculator",value:function(n,r,i){return i.value}},{key:"postProcessor",value:function(n){var r=n.parsedStyle,i=r.offsetPath,a=r.offsetDistance;if(i){var o=i.nodeName;if(o===Yt.LINE||o===Yt.PATH||o===Yt.POLYLINE){var s=i.getPoint(a);s&&n.setLocalPosition(s.x,s.y)}}}}])})(),bQe=(function(){function t(){it(this,t),this.mixer=DJ(0,1)}return at(t,[{key:"calculator",value:function(n,r,i){return i.value}}])})(),EQe=(function(){function t(){it(this,t),this.parser=RCe,this.mixer=XKe}return at(t,[{key:"calculator",value:function(n,r,i){return i instanceof qp&&i.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new YA(0,0,0,0)}:i}}])})(),xQe=at(function t(){it(this,t),this.mixer=ZKe}),SQe=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.mixer=DJ(0,1/0),n}return Sr(e,t),at(e)})(eX),TQe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof qp?i.value==="unset"?"":i.value:"".concat(i)}},{key:"postProcessor",value:function(n){n.nodeValue="".concat(n.parsedStyle.text)||""}}])})(),AQe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a){var o=a.getAttribute("text");if(o){var s=o;i.value==="capitalize"?s=o.charAt(0).toUpperCase()+o.slice(1):i.value==="lowercase"?s=o.toLowerCase():i.value==="uppercase"&&(s=o.toUpperCase()),a.parsedStyle.text=s}return i.value}}])})(),w7=new WeakMap;function wQe(t,e,n){if(t){var r=typeof t=="string"?document.getElementById(t):t;w7.has(r)&&w7.get(r).destroy(n),w7.set(r,e)}}var FJ=typeof window<"u"&&typeof window.document<"u";function OQe(t){return!!t.getAttribute}function CQe(t,e){for(var n=0,r=t.length;n<r;){var i=n+r>>>1;LCe(t[i],e)<0?n=i+1:r=i}return n}function LCe(t,e){var n=Number(t.parsedStyle.zIndex||0),r=Number(e.parsedStyle.zIndex||0);if(n===r){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(e)}}return n-r}function kCe(t){var e=t;do{var n,r=(n=e.parsedStyle)===null||n===void 0?void 0:n.clipPath;if(r)return e;e=e.parentElement}while(e!==null);return null}var woe="px";function RQe(t,e,n){FJ&&t.style&&(t.style.width=e+woe,t.style.height=n+woe)}function DCe(t,e){if(FJ)return document.defaultView.getComputedStyle(t,null).getPropertyValue(e)}function MQe(t){var e=DCe(t,"width");return e==="auto"?t.offsetWidth:parseFloat(e)}function PQe(t){var e=DCe(t,"height");return e==="auto"?t.offsetHeight:parseFloat(e)}var NQe=1,IQe={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},tX=typeof performance=="object"&&performance.now?performance:Date;function DD(t){return t.nodeName===Yt.FRAGMENT?!0:t.getRootNode().nodeName===Yt.FRAGMENT}function Xx(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!1,i=!1,a=!!e&&!e.isNone,o=!!n&&!n.isNone;return t==="visiblepainted"||t==="painted"||t==="auto"?(r=a,i=o):t==="visiblefill"||t==="fill"?r=!0:t==="visiblestroke"||t==="stroke"?i=!0:(t==="visible"||t==="all")&&(r=!0,i=!0),[r,i]}var LQe=1,kQe=function(){return LQe++},Im=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},DQe=Date.now(),BQe=function(){return Im.performance&&typeof Im.performance.now=="function"?Im.performance.now():Date.now()-DQe},sC={},Ooe=Date.now(),FQe=function(e){if(typeof e!="function")throw new TypeError("".concat(e," is not a function"));var n=Date.now(),r=n-Ooe,i=r>16?0:16-r,a=kQe();return sC[a]=e,Object.keys(sC).length>1||setTimeout(function(){Ooe=n;var o=sC;sC={},Object.keys(o).forEach(function(s){return o[s](BQe())})},i),a},UQe=function(e){delete sC[e]},jQe=["","webkit","moz","ms","o"],BCe=function(e){return typeof e!="string"?FQe:e===""?Im.requestAnimationFrame:Im["".concat(e,"RequestAnimationFrame")]},zQe=function(e){return typeof e!="string"?UQe:e===""?Im.cancelAnimationFrame:Im["".concat(e,"CancelAnimationFrame")]||Im["".concat(e,"CancelRequestAnimationFrame")]},$Qe=function(e,n){for(var r=0;e[r]!==void 0;){if(n(e[r]))return e[r];r+=1}},FCe=$Qe(jQe,function(t){return!!BCe(t)}),UJ=BCe(FCe),UCe=zQe(FCe);Im.requestAnimationFrame=UJ;Im.cancelAnimationFrame=UCe;var HQe=(function(){function t(){it(this,t),this.callbacks=[]}return at(t,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(n,r){this.callbacks.push(r)}},{key:"promise",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Promise.all(this.callbacks.map(function(a){return a.apply(void 0,r)}))}}])})(),GQe=(function(){function t(){it(this,t),this.callbacks=[]}return at(t,[{key:"tapPromise",value:function(n,r){this.callbacks.push(r)}},{key:"promise",value:(function(){var e=kt(Zs().mark(function r(){var i,a,o,s,l=arguments;return Zs().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.callbacks.length){c.next=6;break}return c.next=1,(i=this.callbacks)[0].apply(i,l);case 1:a=c.sent,o=0;case 2:if(!(o<this.callbacks.length-1)){c.next=5;break}return s=this.callbacks[o],c.next=3,s(a);case 3:a=c.sent;case 4:o++,c.next=2;break;case 5:return c.abrupt("return",a);case 6:return c.abrupt("return",null);case 7:case"end":return c.stop()}},r,this)}));function n(){return e.apply(this,arguments)}return n})()}])})(),Df=(function(){function t(){it(this,t),this.callbacks=[]}return at(t,[{key:"tap",value:function(n,r){this.callbacks.push(r)}},{key:"call",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(o){o.apply(void 0,a)})}}])})(),O7=(function(){function t(){it(this,t),this.callbacks=[]}return at(t,[{key:"tap",value:function(n,r){this.callbacks.push(r)}},{key:"call",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,o=this.callbacks[0].apply(void 0,a),s=0;s<this.callbacks.length-1;s++){var l=this.callbacks[s];o=l(o)}return o}return null}}])})(),WQe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],VQe=/([\"\'])[^\'\"]+\1/;function Coe(t){var e=t.fontSize,n=e===void 0?16:e,r=t.fontFamily,i=r===void 0?"sans-serif":r,a=t.fontStyle,o=a===void 0?"normal":a,s=t.fontVariant,l=s===void 0?"normal":s,c=t.fontWeight,u=c===void 0?"normal":c;return{fontSize:n,fontFamily:i,fontStyle:o,fontVariant:l,fontWeight:u}}var Roe=ql(function(e){for(var n=Coe(e),r=n.fontSize,i=n.fontFamily,a=n.fontStyle,o=n.fontVariant,s=n.fontWeight,l=Ln(r)&&"".concat(r,"px")||"16px",c=i.split(","),u=c.length-1;u>=0;u--){var f=c[u].trim();!VQe.test(f)&&WQe.indexOf(f)<0&&(f='"'.concat(f,'"')),c[u]=f}return"".concat(a," ").concat(o," ").concat(s," ").concat(l," ").concat(c.join(","))},function(t){var e=Coe(t),n=e.fontSize,r=e.fontFamily,i=e.fontStyle,a=e.fontVariant,o=e.fontWeight;return"".concat(i,"_").concat(a,"_").concat(o,"_").concat(n,"_").concat(r)}),YQe=1e-6,o2=function(e){return Math.max(e,YQe)};function C7(t,e,n){return Pu(t),t[4]=Math.tan(e),t[1]=Math.tan(n),t}var Wl=Zr(),XQe=Zr(),qQe={scale:function(e){Sd(Wl,[e[0].value,e[1].value,1].map(function(n){return o2(n)}))},scaleX:function(e){Sd(Wl,[e[0].value,1,1].map(function(n){return o2(n)}))},scaleY:function(e){Sd(Wl,[1,e[0].value,1].map(function(n){return o2(n)}))},scaleZ:function(e){Sd(Wl,[1,1,e[0].value].map(function(n){return o2(n)}))},scale3d:function(e){Sd(Wl,[e[0].value,e[1].value,e[2].value].map(function(n){return o2(n)}))},translate:function(e){rf(Wl,[e[0].value,e[1].value,0])},translateX:function(e){rf(Wl,[e[0].value,0,0])},translateY:function(e){rf(Wl,[0,e[0].value,0])},translateZ:function(e){rf(Wl,[0,0,e[0].value])},translate3d:function(e){rf(Wl,[e[0].value,e[1].value,e[2].value])},rotate:function(e){RR(Wl,$o(Nh(e[0])))},rotateX:function(e){pQ(Wl,$o(Nh(e[0])))},rotateY:function(e){gQ(Wl,$o(Nh(e[0])))},rotateZ:function(e){RR(Wl,$o(Nh(e[0])))},rotate3d:function(e){dQ(Wl,$o(Nh(e[3])),[e[0].value,e[1].value,e[2].value])},skew:function(e){C7(Wl,$o(e[0].value),$o(e[1].value))},skewX:function(e){C7(Wl,$o(e[0].value),0)},skewY:function(e){C7(Wl,0,$o(e[0].value))},matrix:function(e){CR(Wl,e[0].value,e[1].value,0,0,e[2].value,e[3].value,0,0,0,0,1,0,e[4].value,e[5].value,0,1)},matrix3d:function(e){CR.apply(twe,[Wl].concat(Dr(e.map(function(n){return n.value}))))}},ZQe=yr(1,1,1),KQe=Pr(),Moe={translate:function(e,n){Rn.sceneGraphService.setLocalScale(e,ZQe,!1),Rn.sceneGraphService.setLocalEulerAngles(e,KQe,void 0,void 0,!1),Rn.sceneGraphService.setLocalPosition(e,[n[0].value,n[1].value,0],!1),Rn.sceneGraphService.dirtyLocalTransform(e,e.transformable)}};function jCe(t,e){if(t.length){if(t.length===1&&Moe[t[0].t]){Moe[t[0].t](e,t[0].d);return}for(var n=Pu(XQe),r=0;r<t.length;r++){var i=t[r],a=i.t,o=i.d,s=qQe[a];s&&(s(o),VF(n,n,Wl))}e.setLocalTransform(n)}else e.resetLocalTransform();return e.getLocalTransform()}var QQe=(function(){function t(){it(this,t),this.parser=KKe,this.mixer=oQe}return at(t,[{key:"calculator",value:function(n,r,i,a){return i instanceof qp?[]:i}},{key:"postProcessor",value:function(n){jCe(n.parsedStyle.transform,n)}}])})(),JQe=(function(){function t(){it(this,t)}return at(t,[{key:"postProcessor",value:function(n){var r=n.parsedStyle.transformOrigin;r[0].unit===rr.kPixels&&r[1].unit===rr.kPixels?n.setOrigin(r[0].value,r[1].value):n.getGeometryBounds()}}])})(),eJe=(function(){function t(){it(this,t)}return at(t,[{key:"calculator",value:function(n,r,i,a){return i.value}},{key:"postProcessor",value:function(n){if(n.parentNode){var r=n.parentNode,i=r.renderable,a=r.sortable;i&&r.dirty(),a&&(a.dirty=!0,a.dirtyReason=PD.Z_INDEX_CHANGED)}}}])})(),tJe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){var i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.r,c=l===void 0?0:l;return{cx:a,cy:s,hwidth:c,hheight:c}}}])})(),nJe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){var i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.rx,c=l===void 0?0:l,u=n.ry,f=u===void 0?0:u;return{cx:a,cy:s,hwidth:c,hheight:f}}}])})(),rJe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n){var r=n.x1,i=n.y1,a=n.x2,o=n.y2,s=Math.min(r,a),l=Math.max(r,a),c=Math.min(i,o),u=Math.max(i,o),f=l-s,h=u-c,d=f/2,p=h/2;return{cx:s+d,cy:c+p,hwidth:d,hheight:p}}}])})(),iJe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n){var r=n.d,i=r.rect,a=i.x,o=i.y,s=i.width,l=i.height,c=s/2,u=l/2;return{cx:a+c,cy:o+u,hwidth:c,hheight:u}}}])})(),aJe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n){if(n.points&&Us(n.points.points)){var r=n.points.points,i=Math.min.apply(Math,Dr(r.map(function(h){return h[0]}))),a=Math.max.apply(Math,Dr(r.map(function(h){return h[0]}))),o=Math.min.apply(Math,Dr(r.map(function(h){return h[1]}))),s=Math.max.apply(Math,Dr(r.map(function(h){return h[1]}))),l=a-i,c=s-o,u=l/2,f=c/2;return{cx:i+u,cy:o+f,hwidth:u,hheight:f}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])})(),oJe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,l=n.src,c=n.width,u=c===void 0?0:c,f=n.height,h=f===void 0?0:f,d=u,p=h;return l&&!$i(l)&&(d||(d=l.width,n.width=d),p||(p=l.height,n.height=p)),{cx:a+d/2,cy:s+p/2,hwidth:d/2,hheight:p/2}}}])})(),sJe=(function(){function t(e){it(this,t),this.globalRuntime=e}return at(t,[{key:"isReadyToMeasure",value:function(n,r){var i=n.text;return i}},{key:"update",value:function(n,r){var i,a=n.text,o=n.textAlign,s=o===void 0?"start":o,l=n.lineWidth,c=l===void 0?1:l,u=n.textBaseline,f=u===void 0?"alphabetic":u,h=n.dx,d=h===void 0?0:h,p=n.dy,g=p===void 0?0:p,v=n.x,y=v===void 0?0:v,_=n.y,E=_===void 0?0:_;if(!this.isReadyToMeasure(n,r))return n.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var x=(r==null||(i=r.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getConfig())||{},T=x.offscreenCanvas,S=this.globalRuntime.textService.measureText(a,n,T);n.metrics=S;var w=S.width,C=S.height,D=w/2,L=C/2,B=y+D;s==="center"||s==="middle"?B+=c/2-D:(s==="right"||s==="end")&&(B+=c-D*2);var I=E-L;return f==="middle"?I+=L:f==="top"||f==="hanging"?I+=L*2:f==="alphabetic"||(f==="bottom"||f==="ideographic")&&(I+=0),d&&(B+=d),g&&(I+=g),{cx:B,cy:I,hwidth:D,hheight:L}}}])})(),lJe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){return{cx:0,cy:0,hwidth:0,hheight:0}}}])})(),cJe=(function(){function t(){it(this,t)}return at(t,[{key:"update",value:function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,l=n.width,c=l===void 0?0:l,u=n.height,f=u===void 0?0:u;return{cx:a+c/2,cy:s+f/2,hwidth:c/2,hheight:f/2}}}])})(),x4=(function(){function t(e){it(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Cu,this.page=new Cu,this.canvas=new Cu,this.viewport=new Cu,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}return at(t,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(zo)}}])})(),zCe=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.client=new Cu,n.movement=new Cu,n.offset=new Cu,n.global=new Cu,n.screen=new Cu,n}return Sr(e,t),at(e,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(r){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(r)}},{key:"initMouseEvent",value:function(){throw new Error(zo)}}])})(x4),BD=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.width=0,n.height=0,n.isPrimary=!1,n}return Sr(e,t),at(e,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])})(zCe),nX=(function(t){function e(){return it(this,e),Ar(this,e,arguments)}return Sr(e,t),at(e,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])})(zCe),rs=(function(t){function e(n,r){var i;return it(this,e),i=Ar(this,e,[null]),i.type=n,i.detail=r,Object.assign(i,r),i}return Sr(e,t),at(e)})(x4),$Ce=(function(){function t(){it(this,t),this.emitter=new Cw}return at(t,[{key:"on",value:function(n,r,i){return this.addEventListener(n,r,i),this}},{key:"addEventListener",value:function(n,r,i){var a=!1,o=!1;if(fx(i))a=i;else if(i){var s=i.capture;a=s===void 0?!1:s;var l=i.once;o=l===void 0?!1:l}a&&(n+="capture"),r=ur(r)?r:r.handleEvent;var c=ur(r)?void 0:r;return o?this.emitter.once(n,r,c):this.emitter.on(n,r,c),this}},{key:"off",value:function(n,r,i){return n?this.removeEventListener(n,r,i):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var n;(n=this.emitter)===null||n===void 0||n.removeAllListeners()}},{key:"removeEventListener",value:function(n,r,i){var a;if(!this.emitter)return this;var o=fx(i)?i:i?.capture;o&&(n+="capture"),r=ur(r)?r:(a=r)===null||a===void 0?void 0:a.handleEvent;var s=ur(r)?void 0:r;return this.emitter.off(n,r,s),this}},{key:"emit",value:function(n,r){this.dispatchEvent(new rs(n,r))}},{key:"dispatchEventToSelf",value:function(n){n.target||(n.target=this),n.currentTarget=this,this.emitter.emit(n.type,n)}},{key:"dispatchEvent",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(n),!0;var a;if(this.document)a=this;else if(this.defaultView)a=this.defaultView;else{var o;a=(o=this.ownerDocument)===null||o===void 0?void 0:o.defaultView}if(a){if(n.manager=a.getEventService(),!n.manager)return!1;n.defaultPrevented=!1,n.path?n.path.length=0:n.page=[],r||(n.target=this),n.manager.dispatchEvent(n,n.type,r)}else this.dispatchEventToSelf(n);return!n.defaultPrevented}}])})(),Ws=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.shadow=!1,n.ownerDocument=null,n.isConnected=!1,n.baseURI="",n.childNodes=[],n.nodeType=0,n.nodeName="",n.nodeValue=null,n.parentNode=null,n.destroyed=!1,n}return Sr(e,t),at(e,[{key:"textContent",get:function(){var r="";this.nodeName===Yt.TEXT&&(r+=this.style.text);var i=Td(this.childNodes),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.nodeName===Yt.TEXT?r+=o.nodeValue:r+=o.textContent}}catch(s){i.e(s)}finally{i.f()}return r},set:function(r){var i=this;this.childNodes.slice().forEach(function(a){i.removeChild(a)}),this.nodeName===Yt.TEXT&&(this.style.text="".concat(r))}},{key:"getRootNode",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(r):r.composed&&this.host?this.host.getRootNode(r):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(r){throw new Error(zo)}},{key:"lookupNamespaceURI",value:function(r){throw new Error(zo)}},{key:"lookupPrefix",value:function(r){throw new Error(zo)}},{key:"normalize",value:function(){throw new Error(zo)}},{key:"isEqualNode",value:function(r){return this===r}},{key:"isSameNode",value:function(r){return this.isEqualNode(r)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(r){if(r===this)return 0;for(var i=r,a=this,o=[i],s=[a];(l=i.parentNode)!==null&&l!==void 0?l:a.parentNode;){var l;i=i.parentNode?(o.push(i.parentNode),i.parentNode):i,a=a.parentNode?(s.push(a.parentNode),a.parentNode):a}if(i!==a)return e.DOCUMENT_POSITION_DISCONNECTED|e.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|e.DOCUMENT_POSITION_PRECEDING;var c=o.length>s.length?o:s,u=c===o?s:o;if(c[c.length-u.length]===u[0])return c===o?e.DOCUMENT_POSITION_CONTAINED_BY|e.DOCUMENT_POSITION_FOLLOWING:e.DOCUMENT_POSITION_CONTAINS|e.DOCUMENT_POSITION_PRECEDING;for(var f=c.length-u.length,h=u.length-1;h>=0;h--){var d=u[h],p=c[f+h];if(p!==d){var g=d.parentNode.childNodes;return g.indexOf(d)<g.indexOf(p)?u===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING:c===o?e.DOCUMENT_POSITION_PRECEDING:e.DOCUMENT_POSITION_FOLLOWING}}return e.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(r){return this.contains(r)}},{key:"contains",value:function(r){for(var i=r;i&&this!==i;)i=i.parentNode;return!!i}},{key:"getAncestor",value:function(r){for(var i=this;r>0&&i;)i=i.parentNode,r--;return i}},{key:"forEach",value:function(r){for(var i=[this];i.length>0;){var a=i.pop(),o=r(a);if(o===!1)break;for(var s=a.childNodes.length-1;s>=0;s--)i.push(a.childNodes[s])}}}],[{key:"isNode",value:function(r){return!!r.childNodes}}])})($Ce);Ws.DOCUMENT_POSITION_DISCONNECTED=1;Ws.DOCUMENT_POSITION_PRECEDING=2;Ws.DOCUMENT_POSITION_FOLLOWING=4;Ws.DOCUMENT_POSITION_CONTAINS=8;Ws.DOCUMENT_POSITION_CONTAINED_BY=16;Ws.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var uJe=2048,fJe=(function(){function t(e,n){var r=this;it(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Zr(),this.tmpVec3=Pr(),this.onPointerDown=function(i){var a=r.createPointerEvent(i);if(r.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")r.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;r.dispatchEvent(a,o?"rightdown":"mousedown")}var s=r.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=a.composedPath(),r.freeEvent(a)},this.onPointerUp=function(i){var a=tX.now(),o=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);if(r.dispatchEvent(o,"pointerup"),o.pointerType==="touch")r.dispatchEvent(o,"touchend");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;r.dispatchEvent(o,s?"rightup":"mouseup")}var l=r.trackingData(i.pointerId),c=r.findMountedTarget(l.pressTargetsByButton[i.button]),u=c;if(c&&!o.composedPath().includes(c)){for(var f=c;f&&!o.composedPath().includes(f);){if(o.currentTarget=f,r.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch")r.notifyTarget(o,"touchendoutside");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var h=o.button===2;r.notifyTarget(o,h?"rightupoutside":"mouseupoutside")}Ws.isNode(f)&&(f=f.parentNode)}delete l.pressTargetsByButton[i.button],u=f}if(u){var d,p=r.clonePointerEvent(o,"click");p.target=u,p.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:p.target,timeStamp:a});var g=r.context.renderingContext.root.ownerDocument.defaultView,v=l.clicksByButton[i.button];v.target===p.target&&a-v.timeStamp<g.getConfig().dblClickSpeed?++v.clickCount:v.clickCount=1,v.target=p.target,v.timeStamp=a,p.detail=v.clickCount,(d=o.detail)!==null&&d!==void 0&&d.preventClick||(!r.context.config.useNativeClickEvent&&(p.pointerType==="mouse"||p.pointerType==="touch")&&r.dispatchEvent(p,"click"),r.dispatchEvent(p,"pointertap")),r.freeEvent(p)}r.freeEvent(o)},this.onPointerMove=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0),o=a.pointerType==="mouse"||a.pointerType==="pen",s=r.trackingData(i.pointerId),l=r.findMountedTarget(s.overTargets);if(s.overTargets&&l!==a.target){var c=i.type==="mousemove"?"mouseout":"pointerout",u=r.createPointerEvent(i,c,l||void 0);if(r.dispatchEvent(u,"pointerout"),o&&r.dispatchEvent(u,"mouseout"),!a.composedPath().includes(l)){var f=r.createPointerEvent(i,"pointerleave",l||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!a.composedPath().includes(f.target);)f.currentTarget=f.target,r.notifyTarget(f),o&&r.notifyTarget(f,"mouseleave"),Ws.isNode(f.target)&&(f.target=f.target.parentNode);r.freeEvent(f)}r.freeEvent(u)}if(l!==a.target){var h=i.type==="mousemove"?"mouseover":"pointerover",d=r.clonePointerEvent(a,h);r.dispatchEvent(d,"pointerover"),o&&r.dispatchEvent(d,"mouseover");for(var p=l&&Ws.isNode(l)&&l.parentNode;p&&p!==(Ws.isNode(r.rootTarget)&&r.rootTarget.parentNode)&&p!==a.target;)p=p.parentNode;var g=!p||p===(Ws.isNode(r.rootTarget)&&r.rootTarget.parentNode);if(g){var v=r.clonePointerEvent(a,"pointerenter");for(v.eventPhase=v.AT_TARGET;v.target&&v.target!==l&&v.target!==(Ws.isNode(r.rootTarget)&&r.rootTarget.parentNode);)v.currentTarget=v.target,r.notifyTarget(v),o&&r.notifyTarget(v,"mouseenter"),Ws.isNode(v.target)&&(v.target=v.target.parentNode);r.freeEvent(v)}r.freeEvent(d)}r.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&r.dispatchEvent(a,"touchmove"),o&&(r.dispatchEvent(a,"mousemove"),r.cursor=r.getCursor(a.target)),s.overTargets=a.composedPath(),r.freeEvent(a)},this.onPointerOut=function(i){var a=r.trackingData(i.pointerId);if(a.overTargets){var o=i.pointerType==="mouse"||i.pointerType==="pen",s=r.findMountedTarget(a.overTargets),l=r.createPointerEvent(i,"pointerout",s||void 0);r.dispatchEvent(l),o&&r.dispatchEvent(l,"mouseout");var c=r.createPointerEvent(i,"pointerleave",s||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(Ws.isNode(r.rootTarget)&&r.rootTarget.parentNode);)c.currentTarget=c.target,r.notifyTarget(c),o&&r.notifyTarget(c,"mouseleave"),Ws.isNode(c.target)&&(c.target=c.target.parentNode);a.overTargets=null,r.freeEvent(l),r.freeEvent(c)}r.cursor=null},this.onPointerOver=function(i){var a=r.trackingData(i.pointerId),o=r.createPointerEvent(i),s=o.pointerType==="mouse"||o.pointerType==="pen";r.dispatchEvent(o,"pointerover"),s&&r.dispatchEvent(o,"mouseover"),o.pointerType==="mouse"&&(r.cursor=r.getCursor(o.target));var l=r.clonePointerEvent(o,"pointerenter");for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(Ws.isNode(r.rootTarget)&&r.rootTarget.parentNode);)l.currentTarget=l.target,r.notifyTarget(l),s&&r.notifyTarget(l,"mouseenter"),Ws.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=o.composedPath(),r.freeEvent(o),r.freeEvent(l)},this.onPointerUpOutside=function(i){var a=r.trackingData(i.pointerId),o=r.findMountedTarget(a.pressTargetsByButton[i.button]),s=r.createPointerEvent(i);if(o){for(var l=o;l;)s.currentTarget=l,r.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&r.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),Ws.isNode(l)&&(l=l.parentNode);delete a.pressTargetsByButton[i.button]}r.freeEvent(s)},this.onWheel=function(i){var a=r.createWheelEvent(i);r.dispatchEvent(a),r.freeEvent(a)},this.onClick=function(i){if(r.context.config.useNativeClickEvent){var a=r.createPointerEvent(i);r.dispatchEvent(a),r.freeEvent(a)}},this.onPointerCancel=function(i){var a=r.createPointerEvent(i,void 0,void 0,r.context.config.alwaysTriggerPointerEventOnCanvas?r.rootTarget:void 0);r.dispatchEvent(a),r.freeEvent(a)},this.globalRuntime=e,this.context=n}return at(t,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var n=this.context.contextService.getBoundingClientRect(),r=1,i=1,a=this.context.contextService.getDomElement();if(a&&n){var o=a.offsetWidth,s=a.offsetHeight;o&&s&&(r=n.width/o,i=n.height/s)}return{scaleX:r,scaleY:i,bbox:n}}},{key:"client2Viewport",value:function(n){var r=this.getScale(),i=r.scaleX,a=r.scaleY,o=r.bbox;return new Cu((n.x-(o?.left||0))/i,(n.y-(o?.top||0))/a)}},{key:"viewport2Client",value:function(n){var r=this.getScale(),i=r.scaleX,a=r.scaleY,o=r.bbox;return new Cu((n.x+(o?.left||0))*i,(n.y+(o?.top||0))*a)}},{key:"viewport2Canvas",value:function(n){var r=n.x,i=n.y,a=this.rootTarget.defaultView,o=a.getCamera(),s=this.context.config,l=s.width,c=s.height,u=o.getPerspectiveInverse(),f=o.getWorldTransform(),h=qa(this.tmpMatrix,f,u),d=Co(this.tmpVec3,r/l*2-1,(1-i/c)*2-1,0);return ka(d,d,h),new Cu(d[0],d[1])}},{key:"canvas2Viewport",value:function(n){var r=this.rootTarget.defaultView,i=r.getCamera(),a=i.getPerspective(),o=i.getViewTransform(),s=qa(this.tmpMatrix,a,o),l=Co(this.tmpVec3,n.x,n.y,0);ka(this.tmpVec3,this.tmpVec3,s);var c=this.context.config,u=c.width,f=c.height;return new Cu((l[0]+1)/2*u,(1-(l[1]+1)/2)*f)}},{key:"setPickHandler",value:function(n){this.pickHandler=n}},{key:"addEventMapping",value:function(n,r){this.mappingTable[n]||(this.mappingTable[n]=[]),this.mappingTable[n].push({fn:r,priority:0}),this.mappingTable[n].sort(function(i,a){return i.priority-a.priority})}},{key:"mapEvent",value:function(n){if(this.rootTarget){var r=this.mappingTable[n.type];if(r)for(var i=0,a=r.length;i<a;i++)r[i].fn(n);else console.warn("[EventService]: Event mapping not defined for ".concat(n.type))}}},{key:"dispatchEvent",value:function(n,r,i){if(!i)n.propagationStopped=!1,n.propagationImmediatelyStopped=!1,this.propagate(n,r);else{n.eventPhase=n.AT_TARGET;var a=this.rootTarget.defaultView||null;n.currentTarget=a,this.notifyListeners(n,r)}}},{key:"propagate",value:function(n,r){if(n.target){var i=n.composedPath();n.eventPhase=n.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(n.currentTarget=i[a],this.notifyTarget(n,r),n.propagationStopped||n.propagationImmediatelyStopped)return;if(n.eventPhase=n.AT_TARGET,n.currentTarget=n.target,this.notifyTarget(n,r),!(n.propagationStopped||n.propagationImmediatelyStopped)){var o=i.indexOf(n.currentTarget);n.eventPhase=n.BUBBLING_PHASE;for(var s=o+1;s<i.length;s++)if(n.currentTarget=i[s],this.notifyTarget(n,r),n.propagationStopped||n.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(n){var r=[n],i=this.rootTarget.defaultView||null;if(i&&i===n)return r.unshift(i.document),r;for(var a=0;a<uJe&&n!==this.rootTarget;a++)Ws.isNode(n)&&n.parentNode&&(r.push(n.parentNode),n=n.parentNode);return i&&r.push(i),r}},{key:"hitTest",value:function(n){var r=n.viewportX,i=n.viewportY,a=this.context.config,o=a.width,s=a.height,l=a.disableHitTesting;return r<0||i<0||r>o||i>s?null:!l&&this.pickHandler(n)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(n,r){var i,a=r?.target;if((i=a)!==null&&i!==void 0&&i.shadowRoot&&(a=r.composedPath()[0]),a){if(a===n)return!0;if(n&&n.contains)return n.contains(a)}return r!=null&&r.composedPath?r.composedPath().indexOf(n)>-1:!1}},{key:"getExistedHTML",value:function(n){if(n.nativeEvent.composedPath)for(var r=0,i=n.nativeEvent.composedPath();r<i.length;r++){var a=i[r],o=this.nativeHTMLMap.get(a);if(o)return o}return null}},{key:"pickTarget",value:function(n){return this.hitTest({clientX:n.clientX,clientY:n.clientY,viewportX:n.viewportX,viewportY:n.viewportY,x:n.canvasX,y:n.canvasY})}},{key:"createPointerEvent",value:function(n,r,i,a){var o=this.allocateEvent(BD);this.copyPointerData(n,o),this.copyMouseData(n,o),this.copyData(n,o),o.nativeEvent=n.nativeEvent,o.originalEvent=n;var s=this.getExistedHTML(o),l=this.context.contextService.getDomElement();return o.target=i??(s||this.isNativeEventFromCanvas(l,o.nativeEvent)&&this.pickTarget(o)||a),typeof r=="string"&&(o.type=r),o}},{key:"createWheelEvent",value:function(n){var r=this.allocateEvent(nX);this.copyWheelData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.nativeEvent=n.nativeEvent,r.originalEvent=n;var i=this.getExistedHTML(r),a=this.context.contextService.getDomElement();return r.target=i||this.isNativeEventFromCanvas(a,r.nativeEvent)&&this.pickTarget(r),r}},{key:"trackingData",value:function(n){return this.mappingState.trackingData[n]||(this.mappingState.trackingData[n]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[n]}},{key:"cloneWheelEvent",value:function(n){var r=this.allocateEvent(nX);return r.nativeEvent=n.nativeEvent,r.originalEvent=n.originalEvent,this.copyWheelData(n,r),this.copyMouseData(n,r),this.copyData(n,r),r.target=n.target,r.path=n.composedPath().slice(),r.type=n.type,r}},{key:"clonePointerEvent",value:function(n,r){var i=this.allocateEvent(BD);return i.nativeEvent=n.nativeEvent,i.originalEvent=n.originalEvent,this.copyPointerData(n,i),this.copyMouseData(n,i),this.copyData(n,i),i.target=n.target,i.path=n.composedPath().slice(),i.type=r??i.type,i}},{key:"copyPointerData",value:function(n,r){r.pointerId=n.pointerId,r.width=n.width,r.height=n.height,r.isPrimary=n.isPrimary,r.pointerType=n.pointerType,r.pressure=n.pressure,r.tangentialPressure=n.tangentialPressure,r.tiltX=n.tiltX,r.tiltY=n.tiltY,r.twist=n.twist}},{key:"copyMouseData",value:function(n,r){r.altKey=n.altKey,r.button=n.button,r.buttons=n.buttons,r.ctrlKey=n.ctrlKey,r.metaKey=n.metaKey,r.shiftKey=n.shiftKey,r.client.copyFrom(n.client),r.movement.copyFrom(n.movement),r.canvas.copyFrom(n.canvas),r.screen.copyFrom(n.screen),r.global.copyFrom(n.global),r.offset.copyFrom(n.offset)}},{key:"copyWheelData",value:function(n,r){r.deltaMode=n.deltaMode,r.deltaX=n.deltaX,r.deltaY=n.deltaY,r.deltaZ=n.deltaZ}},{key:"copyData",value:function(n,r){r.isTrusted=n.isTrusted,r.timeStamp=tX.now(),r.type=n.type,r.detail=n.detail,r.view=n.view,r.page.copyFrom(n.page),r.viewport.copyFrom(n.viewport)}},{key:"allocateEvent",value:function(n){this.eventPool.has(n)||this.eventPool.set(n,[]);var r=this.eventPool.get(n).pop()||new n(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=[],r.target=null,r}},{key:"freeEvent",value:function(n){if(n.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var r=n.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(n)}},{key:"notifyTarget",value:function(n,r){r=r??n.type;var i=n.eventPhase===n.CAPTURING_PHASE||n.eventPhase===n.AT_TARGET?"".concat(r,"capture"):r;this.notifyListeners(n,i),n.eventPhase===n.AT_TARGET&&this.notifyListeners(n,r)}},{key:"notifyListeners",value:function(n,r){var i=n.currentTarget.emitter,a=i._events[r];if(a)if("fn"in a)a.once&&i.removeListener(r,a.fn,void 0,!0),a.fn.call(n.currentTarget||a.context,n);else for(var o=0;o<a.length&&!n.propagationImmediatelyStopped;o++)a[o].once&&i.removeListener(r,a[o].fn,void 0,!0),a[o].fn.call(n.currentTarget||a[o].context,n)}},{key:"findMountedTarget",value:function(n){if(!n)return null;for(var r=n[n.length-1],i=n.length-2;i>=0;i--){var a=n[i];if(a===this.rootTarget||Ws.isNode(a)&&a.parentNode===r)r=n[i];else break}return r}},{key:"getCursor",value:function(n){for(var r=n;r;){var i=OQe(r)&&r.getAttribute("cursor");if(i)return i;r=Ws.isNode(r)&&r.parentNode}}}])})(),jJ=(function(){function t(){it(this,t)}return at(t,[{key:"getOrCreateCanvas",value:function(n,r){if(this.canvas)return this.canvas;if(n||Rn.offscreenCanvas)this.canvas=n||Rn.offscreenCanvas,this.context=this.canvas.getContext("2d",ze({willReadFrequently:!0},r));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",ze({willReadFrequently:!0},r)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",ze({willReadFrequently:!0},r))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(n,r){return this.context?this.context:(this.getOrCreateCanvas(n,r),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])})(),_A=(function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t})({}),hJe=(function(){function t(e,n){it(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new Df,initAsync:new HQe,dirtycheck:new O7,cull:new O7,beginFrame:new Df,beforeRender:new Df,render:new Df,afterRender:new Df,endFrame:new Df,destroy:new Df,pick:new GQe,pickSync:new O7,pointerDown:new Df,pointerUp:new Df,pointerMove:new Df,pointerOut:new Df,pointerOver:new Df,pointerWheel:new Df,pointerCancel:new Df,click:new Df},this.globalRuntime=e,this.context=n}return at(t,[{key:"init",value:function(n){var r=this,i=ze(ze({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(a){a.apply(i,r.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,n()):this.hooks.initAsync.promise().then(function(){r.inited=!0,n()}).catch(function(a){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var n=this.context.config.renderer,r=n.getConfig(),i=r.enableDirtyRectangleRendering;return!i||this.context.renderingContext.renderReasons.has(_A.CAMERA_CHANGED)}},{key:"render",value:function(n,r,i){var a=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var s=o.renderReasons.size===1&&o.renderReasons.has(_A.CAMERA_CHANGED),l=!n.disableRenderHooks||!s;l&&this.renderDisplayObject(o.root,n,o),this.hooks.beginFrame.call(r),l&&o.renderListCurrentFrame.forEach(function(c){a.hooks.beforeRender.call(c),a.hooks.render.call(c),a.hooks.afterRender.call(c)}),this.hooks.endFrame.call(r),o.renderListCurrentFrame=[],o.renderReasons.clear(),i()}}},{key:"renderDisplayObject",value:function(n,r,i){var a=this,o=r.renderer.getConfig(),s=o.enableDirtyCheck,l=o.enableCulling;function c(g){var v=g.renderable,y=g.sortable,_=s?v.dirty||i.dirtyRectangleRenderingDisabled?g:null:g,E=null;_&&(E=l?a.hooks.cull.call(_,a.context.camera):_,E&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(E))),g.dirty(!1),y.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,y.dirty&&(a.sort(g,y),y.dirty=!1,y.dirtyChildren=[],y.dirtyReason=void 0)}for(var u=[n];u.length>0;){var f,h=u.pop();c(h);for(var d=((f=h.sortable)===null||f===void 0||(f=f.sorted)===null||f===void 0?void 0:f.length)>0?h.sortable.sorted:h.childNodes,p=d.length-1;p>=0;p--)u.push(d[p])}}},{key:"sort",value:function(n,r){var i,a;(r==null||(i=r.sorted)===null||i===void 0?void 0:i.length)>0&&r.dirtyReason!==PD.Z_INDEX_CHANGED?r.dirtyChildren.forEach(function(o){var s=r.sorted.indexOf(o);s>-1&&r.sorted.splice(s,1);var l=n.childNodes.indexOf(o);if(l>-1)if(r.sorted.length===0)r.sorted.push(o);else{var c=CQe(r.sorted,o);r.sorted.splice(c,0,o)}}):r.sorted=n.childNodes.slice().sort(LCe),((a=r.sorted)===null||a===void 0?void 0:a.length)>0&&n.childNodes.filter(function(o){return o.parsedStyle.zIndex}).length===0&&(r.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(_A.DISPLAY_OBJECT_CHANGED)}}])})(),dJe=/\[\s*(.*)=(.*)\s*\]/,pJe=(function(){function t(){it(this,t)}return at(t,[{key:"selectOne",value:function(n,r){var i=this;if(n.startsWith("."))return r.find(function(l){return(l?.classList||[]).indexOf(i.getIdOrClassname(n))>-1});if(n.startsWith("#"))return r.find(function(l){return l.id===i.getIdOrClassname(n)});if(n.startsWith("[")){var a=this.getAttribute(n),o=a.name,s=a.value;return o?r.find(function(l){return r!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):null}return r.find(function(l){return r!==l&&l.nodeName===n})}},{key:"selectAll",value:function(n,r){var i=this;if(n.startsWith("."))return r.findAll(function(l){return r!==l&&(l?.classList||[]).indexOf(i.getIdOrClassname(n))>-1});if(n.startsWith("#"))return r.findAll(function(l){return r!==l&&l.id===i.getIdOrClassname(n)});if(n.startsWith("[")){var a=this.getAttribute(n),o=a.name,s=a.value;return o?r.findAll(function(l){return r!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):[]}return r.findAll(function(l){return r!==l&&l.nodeName===n})}},{key:"is",value:function(n,r){if(n.startsWith("."))return r.className===this.getIdOrClassname(n);if(n.startsWith("#"))return r.id===this.getIdOrClassname(n);if(n.startsWith("[")){var i=this.getAttribute(n),a=i.name,o=i.value;return a==="name"?r.name===o:this.attributeToString(r,a)===o}return r.nodeName===n}},{key:"getIdOrClassname",value:function(n){return n.substring(1)}},{key:"getAttribute",value:function(n){var r=n.match(dJe),i="",a="";return r&&r.length>2&&(i=r[1].replace(/"/g,""),a=r[2].replace(/"/g,"")),{name:i,value:a}}},{key:"attributeToString",value:function(n,r){if(!n.getAttribute)return"";var i=n.getAttribute(r);return Kn(i)?"":i.toString?i.toString():""}}])})(),ta=(function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t})({}),Gm=(function(t){function e(n,r,i,a,o,s,l,c){var u;return it(this,e),u=Ar(this,e,[null]),u.relatedNode=r,u.prevValue=i,u.newValue=a,u.attrName=o,u.attrChange=s,u.prevParsedValue=l,u.newParsedValue=c,u.type=n,u}return Sr(e,t),at(e)})(x4);Gm.ADDITION=2;Gm.MODIFICATION=1;Gm.REMOVAL=3;var gJe=new Gm(ta.REPARENT,null,"","","",0,"",""),vJe=Xc(),cI=Pr(),mJe=yr(1,1,1),yJe=Zr(),_Je=Xc(),pE=Pr(),bJe=Zr(),gE=wa(),EJe=Pr(),xJe=wa(),SJe=Pr(),s2=Pr(),vE=Pr(),uI=Zr(),Poe=wa(),Noe=wa(),fI=wa(),hI={affectChildren:!0},TJe=(function(){function t(e){it(this,t),this.pendingEvents=new Map,this.boundsChangedEvent=new rs(ta.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=e}return at(t,[{key:"matches",value:function(n,r){return this.runtime.sceneGraphSelector.is(n,r)}},{key:"querySelector",value:function(n,r){return this.runtime.sceneGraphSelector.selectOne(n,r)}},{key:"querySelectorAll",value:function(n,r){return this.runtime.sceneGraphSelector.selectAll(n,r)}},{key:"attach",value:function(n,r,i){var a,o=!1;n.parentNode&&(o=n.parentNode!==r,this.detach(n));var s=n.nodeName===Yt.FRAGMENT,l=DD(r);n.parentNode=r;var c=s?n.childNodes:[n];Ln(i)?c.forEach(function(g){r.childNodes.splice(i,0,g),g.parentNode=r}):c.forEach(function(g){r.childNodes.push(g),g.parentNode=r});var u=r,f=u.sortable;if((f!=null&&(a=f.sorted)!==null&&a!==void 0&&a.length||f.dirty||n.parsedStyle.zIndex)&&(f.dirtyChildren.indexOf(n)===-1&&f.dirtyChildren.push(n),f.dirty=!0,f.dirtyReason=PD.ADDED),!l){if(s)this.dirtifyFragment(n);else{var h=n.transformable;h&&this.dirtyWorldTransform(n,h)}if(o){var d,p=((d=r.ownerDocument)===null||d===void 0||(d=d.defaultView)===null||d===void 0||(d=d.getConfig())===null||d===void 0||(d=d.future)===null||d===void 0?void 0:d.experimentalCancelEventPropagation)===!0;n.dispatchEvent(gJe,p,p)}}}},{key:"detach",value:function(n){var r,i;if(n.parentNode){var a=n.transformable,o=n.parentNode,s=o.sortable;(s!=null&&(r=s.sorted)!==null&&r!==void 0&&r.length||(i=n.style)!==null&&i!==void 0&&i.zIndex)&&(s.dirtyChildren.indexOf(n)===-1&&s.dirtyChildren.push(n),s.dirty=!0,s.dirtyReason=PD.REMOVED);var l=n.parentNode.childNodes.indexOf(n);l>-1&&n.parentNode.childNodes.splice(l,1),a&&this.dirtyWorldTransform(n,a),n.parentNode=null}}},{key:"getLocalPosition",value:function(n){return n.transformable.localPosition}},{key:"getLocalRotation",value:function(n){return n.transformable.localRotation}},{key:"getLocalScale",value:function(n){return n.transformable.localScale}},{key:"getLocalSkew",value:function(n){return n.transformable.localSkew}},{key:"getLocalTransform",value:function(n){var r=n.transformable;return ooe(r),r.localTransform}},{key:"setLocalPosition",value:function(n,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=n.transformable;s2[0]=r[0],s2[1]=r[1],s2[2]=(i=r[2])!==null&&i!==void 0?i:0,!xm(o.localPosition,s2)&&(dc(o.localPosition,s2),a&&this.dirtyLocalTransform(n,o))}},{key:"translateLocal",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=yr(r,i,a));var o=n.transformable;xm(r,cI)||(awe(r,r,o.localRotation),cf(o.localPosition,o.localPosition,r),this.dirtyLocalTransform(n,o))}},{key:"setLocalRotation",value:function(n,r,i,a,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof r=="number"&&(r=YF(gE,r,i,a,o));var l=n.transformable;__(l.localRotation,r),s&&this.dirtyLocalTransform(n,l)}},{key:"rotateLocal",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=yr(r,i,a));var o=n.transformable;y_(Noe,r[0],r[1],r[2]),uD(o.localRotation,o.localRotation,Noe),this.dirtyLocalTransform(n,o)}},{key:"setLocalScale",value:function(n,r){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=n.transformable;Co(pE,r[0],r[1],(i=r[2])!==null&&i!==void 0?i:o.localScale[2]),!xm(pE,o.localScale)&&(dc(o.localScale,pE),a&&this.dirtyLocalTransform(n,o))}},{key:"scaleLocal",value:function(n,r){var i,a=n.transformable;nwe(a.localScale,a.localScale,Co(pE,r[0],r[1],(i=r[2])!==null&&i!==void 0?i:1)),this.dirtyLocalTransform(n,a)}},{key:"setLocalSkew",value:function(n,r,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof r=="number"&&(r=xQ(_Je,r,i));var o=n.transformable;BC(o.localSkew,r),a&&this.dirtyLocalTransform(n,o)}},{key:"setLocalEulerAngles",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof r=="number"&&(r=yr(r,i,a));var s=n.transformable;y_(s.localRotation,r[0],r[1],r[2]),o&&this.dirtyLocalTransform(n,s)}},{key:"setLocalTransform",value:function(n,r){var i=hx(EJe,r),a=dx(xJe,r),o=zm(SJe,r);this.setLocalScale(n,o,!1),this.setLocalPosition(n,i,!1),this.setLocalRotation(n,a,void 0,void 0,void 0,!1),this.dirtyLocalTransform(n,n.transformable)}},{key:"resetLocalTransform",value:function(n){this.setLocalScale(n,mJe,!1),this.setLocalPosition(n,cI,!1),this.setLocalEulerAngles(n,cI,void 0,void 0,!1),this.setLocalSkew(n,vJe,void 0,!1),this.dirtyLocalTransform(n,n.transformable)}},{key:"getPosition",value:function(n){var r=n.transformable;return hx(r.position,this.getWorldTransform(n,r))}},{key:"getRotation",value:function(n){var r=n.transformable;return dx(r.rotation,this.getWorldTransform(n,r))}},{key:"getScale",value:function(n){var r=n.transformable;return zm(r.scaling,this.getWorldTransform(n,r))}},{key:"getOrigin",value:function(n){return n.getGeometryBounds(),n.transformable.origin}},{key:"getWorldTransform",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.transformable;return!r.localDirtyFlag&&!r.dirtyFlag||(n.parentNode&&n.parentNode.transformable&&this.getWorldTransform(n.parentNode),this.internalUpdateTransform(n)),r.worldTransform}},{key:"setPosition",value:function(n,r){var i,a=n.transformable;if(vE[0]=r[0],vE[1]=r[1],vE[2]=(i=r[2])!==null&&i!==void 0?i:0,!xm(this.getPosition(n),vE)){if(dc(a.position,vE),n.parentNode===null||!n.parentNode.transformable)dc(a.localPosition,vE);else{var o=n.parentNode.transformable;Ty(uI,o.worldTransform),qs(uI,uI),ka(a.localPosition,vE,uI)}this.dirtyLocalTransform(n,a)}}},{key:"translate",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=Co(pE,r,i,a)),!xm(r,cI)&&(cf(pE,this.getPosition(n),r),this.setPosition(n,pE))}},{key:"setRotation",value:function(n,r,i,a,o){var s=n.transformable;if(typeof r=="number"&&(r=owe(r,i,a,o)),n.parentNode===null||!n.parentNode.transformable)this.setLocalRotation(n,r);else{var l=this.getRotation(n.parentNode);__(gE,l),fA(gE,gE),qf(s.localRotation,gE,r),BA(s.localRotation,s.localRotation),this.dirtyLocalTransform(n,s)}}},{key:"rotate",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=yr(r,i,a));var o=n.transformable;if(n.parentNode===null||!n.parentNode.transformable)this.rotateLocal(n,r);else{var s=gE;y_(s,r[0],r[1],r[2]);var l=this.getRotation(n),c=this.getRotation(n.parentNode);__(fI,c),fA(fI,fI),qf(s,fI,s),qf(o.localRotation,s,l),BA(o.localRotation,o.localRotation),this.dirtyLocalTransform(n,o)}}},{key:"setOrigin",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=[r,i,a]);var o=n.transformable;if(!(r[0]===o.origin[0]&&r[1]===o.origin[1]&&r[2]===o.origin[2])){var s=o.origin;s[0]=r[0],s[1]=r[1],s[2]=r[2]||0,this.dirtyLocalTransform(n,o)}}},{key:"setEulerAngles",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof r=="number"&&(r=yr(r,i,a));var o=n.transformable;if(n.parentNode===null||!n.parentNode.transformable)this.setLocalEulerAngles(n,r);else{y_(o.localRotation,r[0],r[1],r[2]);var s=this.getRotation(n.parentNode);__(Poe,fA(gE,s)),uD(o.localRotation,o.localRotation,Poe),this.dirtyLocalTransform(n,o)}}},{key:"getTransformedGeometryBounds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(n,r);if(!cs.isEmpty(a)){var o=i||new cs;return o.setFromTransformedAABB(a,this.getWorldTransform(n)),o}return null}},{key:"getGeometryBounds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=n,a=i.geometry;a.dirty&&Rn.styleValueRegistry.updateGeometry(n);var o=r?a.renderBounds:a.contentBounds||null;return o||new cs}},{key:"getBounds",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=n,o=a.renderable;if(!o.boundsDirty&&!i&&o.bounds)return o.bounds;if(!o.renderBoundsDirty&&i&&o.renderBounds)return o.renderBounds;var s=i?o.renderBounds:o.bounds,l=this.getTransformedGeometryBounds(n,i,s),c=n.childNodes;if(c.forEach(function(h){var d=r.getBounds(h,i);d&&(l?l.add(d):(l=s||new cs,l.update(d.center,d.halfExtents)))}),l||(l=new cs),i){var u=kCe(n);if(u){var f=u.parsedStyle.clipPath.getBounds(i);l?f&&(l=f.intersection(l)):l.update(f.center,f.halfExtents)}}return i?(o.renderBounds=l,o.renderBoundsDirty=!1):(o.bounds=l,o.boundsDirty=!1),l}},{key:"getLocalBounds",value:function(n){if(n.parentNode){var r=yJe;n.parentNode.transformable&&(r=qs(bJe,this.getWorldTransform(n.parentNode)));var i=this.getBounds(n);if(!cs.isEmpty(i)){var a=new cs;return a.setFromTransformedAABB(i,r),a}}return this.getBounds(n)}},{key:"getBoundingClientRect",value:function(n){var r,i,a=this.getGeometryBounds(n);cs.isEmpty(a)||(i=new cs,i.setFromTransformedAABB(a,this.getWorldTransform(n)));var o=(r=n.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0?void 0:r.getContextService().getBoundingClientRect();if(i){var s=i.getMin(),l=ir(s,2),c=l[0],u=l[1],f=i.getMax(),h=ir(f,2),d=h[0],p=h[1];return new YA(c+(o?.left||0),u+(o?.top||0),d-c,p-u)}return new YA(o?.left||0,o?.top||0,0,0)}},{key:"internalUpdateTransform",value:function(n){var r,i=(r=n.parentNode)===null||r===void 0?void 0:r.transformable;ooe(n.transformable),WZe(n.transformable,i)}},{key:"internalUpdateElement",value:function(n,r){var i,a,o,s,l=((i=n.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0,c=r[r.length-1],u=c?.transformDirty||((a=n.transformable)===null||a===void 0?void 0:a.localDirtyFlag);if(n.transformable){var f;(f=n.transformable).dirtyFlag||(f.dirtyFlag=u)}if(this.internalUpdateTransform(n),u){var h;(h=n.dirty)===null||h===void 0||h.call(n,!0,!0)}var d=((o=n.renderable)===null||o===void 0?void 0:o.boundsDirty)||((s=n.renderable)===null||s===void 0?void 0:s.renderBoundsDirty);if((u||d)&&c?.shapeUpdated===!1&&l)for(var p=r.length-1;p>=0;){var g,v,y=r[p];if(y.shapeUpdated)break;(g=(v=y.node).dirty)===null||g===void 0||g.call(v,!0,!0),y.shapeUpdated=!0,p-=1}return u}},{key:"syncHierarchy",value:function(n){for(var r,i,a=[n],o=n.parentNode?[{node:n.parentNode,transformDirty:((r=n.parentNode.transformable)===null||r===void 0?void 0:r.localDirtyFlag)||((i=n.parentNode.transformable)===null||i===void 0?void 0:i.dirtyFlag),shapeUpdated:!1}]:[];a.length>0;){for(var s=a.pop(),l=o[o.length-1];o.length>0&&s.parentNode!==l.node;)l=o.pop();var c=this.internalUpdateElement(s,o);if(s.childNodes.length>0){for(var u=s.childNodes.length-1;u>=0;u--)a.push(s.childNodes[u]);o.push({node:s,transformDirty:c,shapeUpdated:!1})}}}},{key:"dirtyLocalTransform",value:function(n,r){DD(n)||r.localDirtyFlag||(r.localDirtyFlag=!0,r.dirtyFlag||this.dirtyWorldTransform(n,r))}},{key:"dirtyWorldTransform",value:function(n,r){this.dirtifyWorldInternal(n,r),this.dirtyToRoot(n,!0)}},{key:"dirtifyWorldInternal",value:function(n,r){var i,a=this,o=((i=n.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0;r.dirtyFlag||(r.dirtyFlag=!0,n.dirty(!0,!0),o||n.childNodes.forEach(function(s){var l=s.transformable;a.dirtifyWorldInternal(s,l)}))}},{key:"dirtyToRoot",value:function(n){for(var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=n,o=((r=n.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0||(r=r.getConfig())===null||r===void 0||(r=r.future)===null||r===void 0?void 0:r.experimentalAttributeUpdateOptimization)===!0;a;){var s,l;if((s=(l=a).dirty)===null||s===void 0||s.call(l,!0,!0),o)break;a=a.parentNode}i&&n.forEach(function(c){var u;(u=c.dirty)===null||u===void 0||u.call(c,!0,!0)}),this.informDependentDisplayObjects(n),this.pendingEvents.set(n,i)}},{key:"dirtifyFragment",value:function(n){var r,i,a=n.transformable;a&&(a.dirtyFlag=!0,a.localDirtyFlag=!0),(r=(i=n).dirty)===null||r===void 0||r.call(i,!0,!0);for(var o=n.childNodes.length,s=0;s<o;s++)this.dirtifyFragment(n.childNodes[s]);n.nodeName===Yt.FRAGMENT&&this.pendingEvents.set(n,!1)}},{key:"triggerPendingEvents",value:function(){var n=this,r=new Set,i,a,o=function(l,c){if(!(!l.isConnected||r.has(l)||l.nodeName===Yt.FRAGMENT)){if(n.boundsChangedEvent.detail=c,n.boundsChangedEvent.target=l,l.isMutationObserved)l.dispatchEvent(n.boundsChangedEvent);else{if(i===void 0){var u;i=((u=l.ownerDocument.defaultView)===null||u===void 0||(u=u.getConfig())===null||u===void 0||(u=u.future)===null||u===void 0?void 0:u.experimentalCancelEventPropagation)===!0}l.ownerDocument.defaultView.dispatchEvent(n.boundsChangedEvent,!0,i)}r.add(l)}};this.pendingEvents.forEach(function(s,l){if(l.nodeName!==Yt.FRAGMENT){if(a===void 0){var c;a=((c=l.ownerDocument)===null||c===void 0||(c=c.defaultView)===null||c===void 0||(c=c.getConfig())===null||c===void 0||(c=c.future)===null||c===void 0?void 0:c.experimentalAttributeUpdateOptimization)===!0}hI.affectChildren=s,a?o(l,hI):s?l.forEach(function(u){o(u,hI)}):o(l,hI)}}),r.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"updateDisplayObjectDependency",value:function(n,r,i,a){if(r&&r!==i){var o=this.displayObjectDependencyMap.get(r);if(o&&o[n]){var s=o[n].indexOf(a);o[n].splice(s,1)}}if(i){var l=this.displayObjectDependencyMap.get(i);l||(this.displayObjectDependencyMap.set(i,{}),l=this.displayObjectDependencyMap.get(i)),l[n]||(l[n]=[]),l[n].push(a)}}},{key:"informDependentDisplayObjects",value:function(n){var r,i=this,a=this.displayObjectDependencyMap.get(n);if(a){var o=(r=n.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0||(r=r.getConfig())===null||r===void 0||(r=r.future)===null||r===void 0?void 0:r.experimentalCancelEventPropagation;Object.keys(a).forEach(function(s){a[s].forEach(function(l){i.dirtyToRoot(l,!0),l.dispatchEvent(new Gm(ta.ATTR_MODIFIED,l,i,i,s,Gm.MODIFICATION,i,i),o,o),l.isCustomElement&&l.isConnected&&l.attributeChangedCallback&&l.attributeChangedCallback(s,i,i)})})}}}])})(),Ioe=(function(){function t(e){if(it(this,t),e<=0)throw new Error("LRU capacity must be a positive number.");this.capacity=e,this.cache=new Map}return at(t,[{key:"get",value:function(n){if(this.cache.has(n)){var r=this.cache.get(n);return this.cache.delete(n),this.cache.set(n,r),r}}},{key:"put",value:function(n,r){if(this.cache.has(n)&&this.cache.delete(n),this.cache.set(n,r),this.cache.size>this.capacity){var i=this.cache.keys().next().value;this.cache.delete(i)}}},{key:"len",value:function(){return this.cache.size}},{key:"clear",value:function(){this.cache.clear()}}])})(),mE={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Loe=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,AJe=/[!%),.:;?\]}'""]/,wJe=/[$('"]/,OJe=/[!),.:;?\]}'""]/,CJe=/[([{'"]/,RJe=/[)\]'"?!:;,.]/,MJe=/[(['"...]/,PJe=/[!%),.:;?\]}'"]/,NJe=/[$([{'"#]/,IJe=new RegExp("".concat(AJe.source,"|").concat(OJe.source,"|").concat(RJe.source,"|").concat(PJe.source)),LJe=new RegExp("".concat(wJe.source,"|").concat(CJe.source,"|").concat(MJe.source,"|").concat(NJe.source)),kJe=(function(){function t(e){var n=this;it(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(r,i){return n.isBreakingSpace(i)?!1:!!(r&&(LJe.exec(i)||IJe.exec(r)))},this.trimByKinsokuShorui=function(r){var i=Dr(r),a=i[i.length-2];if(!a)return r;var o=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=o+i[i.length-1],i},this.runtime=e,this.charWidthCache=new Ioe(100)}return at(t,[{key:"measureFont",value:function(n,r){if(this.fontMetricsCache[n])return this.fontMetricsCache[n];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(r),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(r,{willReadFrequently:!0});o.font=n;var s=mE.MetricsString+mE.BaselineSymbol,l=Math.ceil(o.measureText(s).width),c=Math.ceil(o.measureText(mE.BaselineSymbol).width),u=mE.HeightMultiplier*c;c=c*mE.BaselineMultiplier|0,a.width=l,a.height=u,o.fillStyle="#f00",o.fillRect(0,0,l,u),o.font=n,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(s,0,c);var f=o.getImageData(0,0,l||1,u||1).data,h=f.length,d=l*4,p=0,g=0,v=!1;for(p=0;p<c;++p){for(var y=0;y<d;y+=4)if(f[g+y]!==255){v=!0;break}if(!v)g+=d;else break}for(i.ascent=c-p,g=h-d,v=!1,p=u;p>c;--p){for(var _=0;_<d;_+=4)if(f[g+_]!==255){v=!0;break}if(!v)g-=d;else break}return i.descent=p-c,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[n]=i,i}},{key:"measureText",value:function(n,r,i){var a=r.fontSize,o=a===void 0?16:a,s=r.wordWrap,l=s===void 0?!1:s,c=r.lineHeight,u=r.lineWidth,f=u===void 0?1:u,h=r.textBaseline,d=h===void 0?"alphabetic":h,p=r.textAlign,g=p===void 0?"start":p,v=r.letterSpacing,y=v===void 0?0:v,_=r.textPath;r.textPathSide,r.textPathStartOffset;var E=r.leading,x=E===void 0?0:E,T=Roe(r),S=this.measureFont(T,i);S.fontSize===0&&(S.fontSize=o,S.ascent=o);var w=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);w.font=T,r.isOverflowing=!1;var C=l?this.wordWrap(n,r,i):n,D=C.split(/(?:\r\n|\r|\n)/),L=new Array(D.length),B=0;if(_){_.getTotalLength();for(var I=0;I<D.length;I++)w.measureText(D[I]).width+(D[I].length-1)*y}else{for(var U=0;U<D.length;U++){var $=w.measureText(D[U]).width+(D[U].length-1)*y;L[U]=$,B=Math.max(B,$)}var X=B+f,N=c||S.fontSize+f,M=Math.max(N,S.fontSize+f)+(D.length-1)*(N+x);N+=x;var k=0;return d==="middle"?k=-M/2:d==="bottom"||d==="alphabetic"||d==="ideographic"?k=-M:(d==="top"||d==="hanging")&&(k=0),{font:T,width:X,height:M,lines:D,lineWidths:L,lineHeight:N,maxLineWidth:B,fontProperties:S,lineMetrics:L.map(function(z,j){var V=0;return g==="center"||g==="middle"?V-=z/2:(g==="right"||g==="end")&&(V-=z),new YA(V-f/2,k+j*N,z+f,N)})}}}},{key:"wordWrap",value:function(n,r,i){var a=this,o=Array.from(n);if(o.length===0)return"";var s=this,l=r.wordWrapWidth,c=l===void 0?0:l,u=r.letterSpacing,f=u===void 0?0:u,h=r.maxLines,d=h===void 0?1/0:h,p=r.textOverflow,g=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),v=c+f,y="";p==="ellipsis"?y="...":p&&p!=="clip"&&(y=p);var _=[""],E=0,x=0,T=-1,S=Roe(r),w=this.charWidthCache.get(S);w||(w=new Ioe(500),this.charWidthCache.put(S,w));var C=function(z){return a.getFromCache(z,f,w,g)},D=C(y);function L(k,z,j,V){for(;C(k)<V&&z<o.length-1&&!s.isNewline(o[z+1]);)z+=1,k+=o[z];for(;C(k)>V&&z>=j;)z-=1,k=k.slice(0,-1);return{lineTxt:k,txtLastCharIndex:z}}function B(k,z){if(!(D<=0||D>v)){if(!_[k]){_[k]=y;return}var j=L(_[k],z,T+1,v-D);_[k]=j.lineTxt+y}}for(var I=0;I<o.length;I++){var U=o[I],$=o[I-1],X=o[I+1],N=C(U);if(this.isNewline(U)){if(E+1>=d){I<o.length-1&&B(E,I-1),r.isOverflowing=!0;break}T=I-1,E+=1,x=0,_[E]="";continue}if(N>v){B(E,I-1),r.isOverflowing=!0;break}if(x>0&&x+N>v){var M=L(_[E],I-1,T+1,v);if(M.txtLastCharIndex!==I-1){if(_[E]=M.lineTxt,M.txtLastCharIndex===o.length-1)break;I=M.txtLastCharIndex+1,U=o[I],$=o[I-1],X=o[I+1],N=C(U)}if(E+1>=d){B(E,I-1),r.isOverflowing=!0;break}if(T=I-1,E+=1,x=0,_[E]="",this.isBreakingSpace(U))continue;this.canBreakInLastChar(U)||(_=this.trimToBreakable(_),x=this.sumTextWidthByCache(_[E]||"",C)),this.shouldBreakByKinsokuShorui(U,X)&&(_=this.trimByKinsokuShorui(_),x+=C($||""))}x+=N,_[E]+=U}return _.join(`
`)}},{key:"isBreakingSpace",value:function(n){return typeof n!="string"?!1:mE.BreakingSpaces.indexOf(n.charCodeAt(0))>=0}},{key:"isNewline",value:function(n){return typeof n!="string"?!1:mE.Newlines.indexOf(n.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(n){var r=Dr(n),i=r[r.length-2],a=this.findBreakableIndex(i);if(a===-1||!i)return r;var o=i.slice(a,a+1),s=this.isBreakingSpace(o),l=a+1,c=a+(s?0:1);return r[r.length-1]+=i.slice(l,i.length),r[r.length-2]=i.slice(0,c),r}},{key:"canBreakInLastChar",value:function(n){return!(n&&Loe.test(n))}},{key:"sumTextWidthByCache",value:function(n,r){return n.split("").reduce(function(i,a){return i+r(a)},0)}},{key:"findBreakableIndex",value:function(n){for(var r=n.length-1;r>=0;r--)if(!Loe.test(n[r]))return r;return-1}},{key:"getFromCache",value:function(n,r,i,a){var o=i.get(n);if(typeof o!="number"){var s=n.length*r,l=a.measureText(n);o=l.width+s,i.put(n,o)}return o}},{key:"clearCache",value:function(){this.fontMetricsCache={},this.charWidthCache.clear()}}])})(),Rn={},DJe=(function(t){var e=new oJe,n=new aJe;return t={},Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(t,Yt.FRAGMENT,null),Yt.CIRCLE,new tJe),Yt.ELLIPSE,new nJe),Yt.RECT,e),Yt.IMAGE,e),Yt.GROUP,new lJe),Yt.LINE,new rJe),Yt.TEXT,new sJe(Rn)),Yt.POLYLINE,n),Yt.POLYGON,n),Z(Z(Z(t,Yt.PATH,new iJe),Yt.HTML,new cJe),Yt.MESH,null)})(),BJe=(function(t){var e=new dQe,n=new eX;return t={},Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(t,tr.PERCENTAGE,null),tr.NUMBER,new yQe),tr.ANGLE,new fQe),tr.DEFINED_PATH,new hQe),tr.PAINT,e),tr.COLOR,e),tr.FILTER,new pQe),tr.LENGTH,n),tr.LENGTH_PERCENTAGE,n),tr.LENGTH_PERCENTAGE_12,new gQe),Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(t,tr.LENGTH_PERCENTAGE_14,new vQe),tr.COORDINATE,new eX),tr.OFFSET_DISTANCE,new _Qe),tr.OPACITY_VALUE,new bQe),tr.PATH,new EQe),tr.LIST_OF_POINTS,new xQe),tr.SHADOW_BLUR,new SQe),tr.TEXT,new TQe),tr.TEXT_TRANSFORM,new AQe),tr.TRANSFORM,new QQe),Z(Z(Z(t,tr.TRANSFORM_ORIGIN,new JQe),tr.Z_INDEX,new eJe),tr.MARKER,new mQe)})(),FJe=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};Rn.CameraContribution=gCe;Rn.AnimationTimeline=null;Rn.EasingFunction=null;Rn.offscreenCanvasCreator=new jJ;Rn.sceneGraphSelector=new pJe;Rn.sceneGraphService=new TJe(Rn);Rn.textService=new kJe(Rn);Rn.geometryUpdaterFactory=DJe;Rn.CSSPropertySyntaxFactory=BJe;Rn.styleValueRegistry=new cQe(Rn);Rn.layoutRegistry=null;Rn.globalThis=FJe();Rn.enableStyleSyntax=!0;Rn.enableSizeAttenuation=!1;var UJe=0,rX=new Gm(ta.INSERTED,null,"","","",0,"",""),iX=new Gm(ta.REMOVED,null,"","","",0,"",""),HCe=new rs(ta.DESTROY),jJe=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.entity=UJe++,n.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},n.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},n.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},n.cullable={strategy:$Ze.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},n.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},n.rBushNode={aabb:void 0},n.namespaceURI="g",n.scrollLeft=0,n.scrollTop=0,n.clientTop=0,n.clientLeft=0,n.style={},n.computedStyle={},n.parsedStyle={},n.attributes={},n}return Sr(e,t),at(e,[{key:"dirty",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.renderable.dirty=r,i&&(this.renderable.boundsDirty=r,this.renderable.renderBoundsDirty=r)}},{key:"className",get:function(){return this.getAttribute("class")||""},set:function(r){this.setAttribute("class",r)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(r){return r!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[r+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var r=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[r-1]||null}return null}},{key:"cloneNode",value:function(r){throw new Error(zo)}},{key:"appendChild",value:function(r,i){var a;if(r.destroyed)throw new Error(PZe);return Rn.sceneGraphService.attach(r,this,i),(a=this.ownerDocument)!==null&&a!==void 0&&a.defaultView&&(!DD(this)&&r.nodeName===Yt.FRAGMENT?this.ownerDocument.defaultView.mountFragment(r):this.ownerDocument.defaultView.mountChildren(r)),this.isMutationObserved&&(rX.relatedNode=this,r.dispatchEvent(rX)),r}},{key:"insertBefore",value:function(r,i){if(!i)this.appendChild(r);else{r.parentElement&&r.parentElement.removeChild(r);var a=this.childNodes.indexOf(i);a===-1?this.appendChild(r):this.appendChild(r,a)}return r}},{key:"replaceChild",value:function(r,i){var a=this.childNodes.indexOf(i);return this.removeChild(i),this.appendChild(r,a),i}},{key:"removeChild",value:function(r){var i,a,o=((i=this.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;return iX.relatedNode=this,r.dispatchEvent(iX,o,o),(a=r.ownerDocument)!==null&&a!==void 0&&a.defaultView&&r.ownerDocument.defaultView.unmountChildren(r),Rn.sceneGraphService.detach(r),r}},{key:"removeChildren",value:function(){for(var r=this.childNodes.length-1;r>=0;r--){var i=this.childNodes[r];this.removeChild(i)}}},{key:"destroyChildren",value:function(){for(var r=this.childNodes.length-1;r>=0;r--){var i=this.childNodes[r];i.childNodes.length>0&&i.destroyChildren(),i.destroy()}}},{key:"matches",value:function(r){return Rn.sceneGraphService.matches(r,this)}},{key:"getElementById",value:function(r){return Rn.sceneGraphService.querySelector("#".concat(r),this)}},{key:"getElementsByName",value:function(r){return Rn.sceneGraphService.querySelectorAll('[name="'.concat(r,'"]'),this)}},{key:"getElementsByClassName",value:function(r){return Rn.sceneGraphService.querySelectorAll(".".concat(r),this)}},{key:"getElementsByTagName",value:function(r){return Rn.sceneGraphService.querySelectorAll(r,this)}},{key:"querySelector",value:function(r){return Rn.sceneGraphService.querySelector(r,this)}},{key:"querySelectorAll",value:function(r){return Rn.sceneGraphService.querySelectorAll(r,this)}},{key:"closest",value:function(r){var i=this;do{if(Rn.sceneGraphService.matches(r,i))return i;i=i.parentElement}while(i!==null);return null}},{key:"find",value:function(r){var i=this,a=null;return this.forEach(function(o){return o!==i&&r(o)?(a=o,!1):!0}),a}},{key:"findAll",value:function(r){var i=this,a=[];return this.forEach(function(o){o!==i&&r(o)&&a.push(o)}),a}},{key:"after",value:function(){var r=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];o.forEach(function(l,c){var u;return(u=r.parentNode)===null||u===void 0?void 0:u.appendChild(l,i+c+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var r,i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],c=o.slice(1);this.parentNode.appendChild(l,i),(r=l).after.apply(r,Dr(c))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s){return r.appendChild(s)})}},{key:"prepend",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s,l){return r.appendChild(s,l)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){var r,i=((r=this.ownerDocument)===null||r===void 0||(r=r.defaultView)===null||r===void 0||(r=r.getConfig().future)===null||r===void 0?void 0:r.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(HCe,i,i),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return Rn.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return Rn.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return Rn.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return Rn.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return Rn.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(r){if(typeof r!="symbol"){var i=this.attributes[r];return i}}},{key:"hasAttribute",value:function(r){return this.getAttributeNames().includes(r)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(r){this.setAttribute(r,null),delete this.attributes[r]}},{key:"setAttribute",value:function(r,i,a,o){this.attributes[r]=i}},{key:"getAttributeNS",value:function(r,i){throw new Error(zo)}},{key:"getAttributeNode",value:function(r){throw new Error(zo)}},{key:"getAttributeNodeNS",value:function(r,i){throw new Error(zo)}},{key:"hasAttributeNS",value:function(r,i){throw new Error(zo)}},{key:"removeAttributeNS",value:function(r,i){throw new Error(zo)}},{key:"removeAttributeNode",value:function(r){throw new Error(zo)}},{key:"setAttributeNS",value:function(r,i,a){throw new Error(zo)}},{key:"setAttributeNode",value:function(r){throw new Error(zo)}},{key:"setAttributeNodeNS",value:function(r){throw new Error(zo)}},{key:"toggleAttribute",value:function(r,i){throw new Error(zo)}}])})(Ws);function Ya(t){return!!(t!=null&&t.nodeName)}var zJe=Rn.globalThis.Proxy?Rn.globalThis.Proxy:function(){},lm=new Gm(ta.ATTR_MODIFIED,null,null,null,null,Gm.MODIFICATION,null,null),l2=Pr(),$Je=wa(),bs=(function(t){function e(n){var r;return it(this,e),r=Ar(this,e),r.isCustomElement=!1,r.isMutationObserved=!1,r.activeAnimations=[],r.config=n,r.id=n.id||"",r.name=n.name||"",(n.className||n.class)&&(r.className=n.className||n.class),r.nodeName=n.type||Yt.GROUP,n.initialParsedStyle&&Object.assign(r.parsedStyle,n.initialParsedStyle),r.initAttributes(n.style),Rn.enableStyleSyntax&&(r.style=new zJe({setProperty:function(a,o){r.setAttribute(a,o)},getPropertyValue:function(a){return r.getAttribute(a)},removeProperty:function(a){r.removeAttribute(a)},item:function(){return""}},{get:function(a,o){return a[o]!==void 0?a[o]:r.getAttribute(o)},set:function(a,o,s){return r.setAttribute(o,s),!0}})),r}return Sr(e,t),at(e,[{key:"destroy",value:function(){_D(e,"destroy",this)([]),this.getAnimations().forEach(function(r){r.cancel()})}},{key:"cloneNode",value:function(r,i){var a=ze({},this.attributes);for(var o in a){var s=a[o];Ya(s)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(a[o]=s.cloneNode(r)),i&&(a[o]=i(o,s))}var l=new this.constructor(ze(ze({},this.config),{},{style:a}));return l.setLocalTransform(this.getLocalTransform()),r&&this.children.forEach(function(c){if(!c.style.isMarker){var u=c.cloneNode(r);l.appendChild(u)}}),l}},{key:"initAttributes",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={forceUpdateGeometry:!0};Rn.styleValueRegistry.processProperties(this,r,i),this.dirty()}},{key:"setAttribute",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;mr(i)||(a||i!==this.attributes[r])&&(this.internalSetAttribute(r,i,{memoize:o}),_D(e,"setAttribute",this)([r,i]))}},{key:"internalSetAttribute",value:function(r,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.attributes[r],s=this.parsedStyle[r];Rn.styleValueRegistry.processProperties(this,Z({},r,i),a),this.dirty();var l=this.parsedStyle[r];if(this.isConnected)if(lm.relatedNode=this,lm.prevValue=o,lm.newValue=i,lm.attrName=r,lm.prevParsedValue=s,lm.newParsedValue=l,this.isMutationObserved)this.dispatchEvent(lm);else{var c,u=((c=this.ownerDocument.defaultView.getConfig().future)===null||c===void 0?void 0:c.experimentalCancelEventPropagation)===!0;lm.target=this,this.ownerDocument.defaultView.dispatchEvent(lm,!0,u)}if(this.isCustomElement&&this.isConnected||!this.isCustomElement){var f,h;(f=(h=this).attributeChangedCallback)===null||f===void 0||f.call(h,r,o,i,s,l)}}},{key:"getBBox",value:function(){var r=this.getBounds(),i=r.getMin(),a=ir(i,2),o=a[0],s=a[1],l=r.getMax(),c=ir(l,2),u=c[0],f=c[1];return new YA(o,s,u-o,f-s)}},{key:"setOrigin",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Rn.sceneGraphService.setOrigin(this,$f(r,i,a,!1)),this}},{key:"getOrigin",value:function(){return Rn.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Rn.sceneGraphService.setPosition(this,$f(r,i,a,!1)),this}},{key:"setLocalPosition",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Rn.sceneGraphService.setLocalPosition(this,$f(r,i,a,!1)),this}},{key:"translate",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Rn.sceneGraphService.translate(this,$f(r,i,a,!1)),this}},{key:"translateLocal",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return Rn.sceneGraphService.translateLocal(this,$f(r,i,a,!1)),this}},{key:"getPosition",value:function(){return Rn.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return Rn.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(r,i,a){return this.scaleLocal(r,i,a)}},{key:"scaleLocal",value:function(r,i,a){return typeof r=="number"&&(i=i||r,a=a||r,r=$f(r,i,a,!1)),Rn.sceneGraphService.scaleLocal(this,r),this}},{key:"setLocalScale",value:function(r,i,a){return typeof r=="number"&&(i=i||r,a=a||r,r=$f(r,i,a,!1)),Rn.sceneGraphService.setLocalScale(this,r),this}},{key:"getLocalScale",value:function(){return Rn.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return Rn.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var r=_7(l2,Rn.sceneGraphService.getWorldTransform(this)),i=ir(r,3),a=i[2];return Ph(a)}},{key:"getLocalEulerAngles",value:function(){var r=_7(l2,Rn.sceneGraphService.getLocalRotation(this)),i=ir(r,3),a=i[2];return Ph(a)}},{key:"setEulerAngles",value:function(r){return Rn.sceneGraphService.setEulerAngles(this,0,0,r),this}},{key:"setLocalEulerAngles",value:function(r){return Rn.sceneGraphService.setLocalEulerAngles(this,0,0,r),this}},{key:"rotateLocal",value:function(r,i,a){return Kn(i)&&Kn(a)?Rn.sceneGraphService.rotateLocal(this,0,0,r):Rn.sceneGraphService.rotateLocal(this,r,i,a),this}},{key:"rotate",value:function(r,i,a){return Kn(i)&&Kn(a)?Rn.sceneGraphService.rotate(this,0,0,r):Rn.sceneGraphService.rotate(this,r,i,a),this}},{key:"setRotation",value:function(r,i,a,o){return Rn.sceneGraphService.setRotation(this,r,i,a,o),this}},{key:"setLocalRotation",value:function(r,i,a,o){return Rn.sceneGraphService.setLocalRotation(this,r,i,a,o),this}},{key:"setLocalSkew",value:function(r,i){return Rn.sceneGraphService.setLocalSkew(this,r,i),this}},{key:"getRotation",value:function(){return Rn.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return Rn.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return Rn.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return Rn.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return Rn.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(r){return Rn.sceneGraphService.setLocalTransform(this,r),this}},{key:"resetLocalTransform",value:function(){Rn.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(r,i){var a,o=(a=this.ownerDocument)===null||a===void 0?void 0:a.timeline;return o?o.play(this,r,i):null}},{key:"isVisible",value:function(){var r;return((r=this.parsedStyle)===null||r===void 0?void 0:r.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(r){this.style.pointerEvents=r?"auto":"none"}},{key:"isInteractive",value:function(){var r;return((r=this.parsedStyle)===null||r===void 0?void 0:r.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,Dr(this.parentNode.children.map(function(r){return Number(r.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,Dr(this.parentNode.children.map(function(r){return Number(r.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=a[0],l=a[1];return s?dl(s)?(Object.keys(s).forEach(function(c){r.setAttribute(c,s[c])}),this):a.length===2?(this.setAttribute(s,l),this):this.attributes[s]:this.attributes}},{key:"getMatrix",value:function(r){var i=r||this.getWorldTransform(),a=hx(l2,i),o=ir(a,2),s=o[0],l=o[1],c=zm(l2,i),u=ir(c,2),f=u[0],h=u[1],d=dx($Je,i),p=_7(l2,d),g=ir(p,3),v=g[0],y=g[2];return BZe(v||y,s,l,f,h)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(r){var i=roe(r),a=ir(i,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4];this.setEulerAngles(u).setPosition(o,s).setLocalScale(l,c)}},{key:"setLocalMatrix",value:function(r){var i=roe(r),a=ir(i,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4];this.setLocalEulerAngles(u).setLocalPosition(o,s).setLocalScale(l,c)}},{key:"show",value:function(){this.forEach(function(r){r.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(r){r.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(r){return this.children[r]||null}},{key:"add",value:function(r,i){return this.appendChild(r,i)}},{key:"set",value:function(r,i){this.config[r]=i}},{key:"get",value:function(r){return this.config[r]}},{key:"moveTo",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(r,i,a),this}},{key:"move",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(r,i,a),this}},{key:"setZIndex",value:function(r){return this.style.zIndex=r,this}}])})(jJe);bs.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var Wm=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:Yt.CIRCLE},n)])}return Sr(e,t),at(e)})(bs);Wm.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var HJe=["style"],zJ=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,HJe);return it(this,e),n=Ar(this,e,[ze({style:i},a)]),n.isCustomElement=!0,n}return Sr(e,t),at(e)})(bs);zJ.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var BP=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:Yt.ELLIPSE},n)])}return Sr(e,t),at(e)})(bs);BP.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var GJe=(function(t){function e(){return it(this,e),Ar(this,e,[{type:Yt.FRAGMENT}])}return Sr(e,t),at(e)})(bs);GJe.PARSED_STYLE_LIST=new Set(["class","className"]);var yc=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:Yt.GROUP},n)])}return Sr(e,t),at(e)})(bs);yc.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var WJe=["style"],qx=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,WJe);return it(this,e),n=Ar(this,e,[ze({type:Yt.HTML,style:i},a)]),n.cullable.enable=!1,n}return Sr(e,t),at(e,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var r=qs(Zr(),this.parentNode.getWorldTransform()),i=this.getBounds();if(!cs.isEmpty(i)){var a=new cs;return a.setFromTransformedAABB(i,r),a}}return this.getBounds()}}])})(bs);qx.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var FP=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:Yt.IMAGE},n)])}return Sr(e,t),at(e)})(bs);FP.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var VJe=["style"],Ex=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,VJe);it(this,e),n=Ar(this,e,[ze({type:Yt.LINE,style:ze({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a)]),n.markerStartAngle=0,n.markerEndAngle=0;var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd;return s&&Ya(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),l&&Ya(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Sr(e,t),at(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="x1"||r==="y1"||r==="x2"||r==="y2"||r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&Ya(o)&&(this.markerStartAngle=0,o.remove()),s&&Ya(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"&&(o&&Ya(o)&&(this.markerEndAngle=0,o.remove()),s&&Ya(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1)))}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=i.x1,u=i.x2,f=i.y1,h=i.y2,d=r?a:o;if(!(!d||!Ya(d))){var p=0,g,v,y,_,E,x;r?(y=c,_=f,g=u-c,v=h-f,E=s||0,x=this.markerStartAngle):(y=u,_=h,g=c-u,v=f-h,E=l||0,x=this.markerEndAngle),p=Math.atan2(v,g),d.setLocalEulerAngles(p*180/Math.PI+x),d.setLocalPosition(y+Math.cos(p)*E,_+Math.sin(p)*E)}}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle,o=a.x1,s=a.y1,l=a.x2,c=a.y2,u=c4(o,s,l,c,r),f=u.x,h=u.y,d=ka(Pr(),yr(f,h,0),i?this.getWorldTransform():this.getLocalTransform());return new Cu(d[0],d[1])}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(r/this.getTotalLength(),i)}},{key:"getTotalLength",value:function(){var r=this.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2;return l4(i,a,o,s)}}])})(bs);Ex.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var YJe=["style"],Ad=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,YJe);it(this,e),n=Ar(this,e,[ze({type:Yt.PATH,style:i,initialParsedStyle:{miterLimit:4,d:ze({},vCe)}},a)]),n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&Ya(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),c&&Ya(c)&&n.placeMarkerMid(c),l&&Ya(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Sr(e,t),at(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&Ya(o)&&(this.markerStartAngle=0,o.remove()),s&&Ya(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"?(o&&Ya(o)&&(this.markerEndAngle=0,o.remove()),s&&Ya(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):r==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=r?a:o;if(!(!c||!Ya(c))){var u=0,f,h,d,p,g,v;if(r){var y=this.getStartTangent(),_=ir(y,2),E=_[0],x=_[1];d=x[0],p=x[1],f=E[0]-x[0],h=E[1]-x[1],g=s||0,v=this.markerStartAngle}else{var T=this.getEndTangent(),S=ir(T,2),w=S[0],C=S[1];d=C[0],p=C[1],f=w[0]-C[0],h=w[1]-C[1],g=l||0,v=this.markerEndAngle}u=Math.atan2(h,f),c.setLocalEulerAngles(u*180/Math.PI+v),c.setLocalPosition(d+Math.cos(u)*g,p+Math.sin(u)*g)}}},{key:"placeMarkerMid",value:function(r){var i=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(u){u.remove()}),r&&Ya(r))for(var a=1;a<i.length-1;a++){var o=ir(i[a].currentPoint,2),s=o[0],l=o[1],c=a===1?r:r.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(s,l)}}},{key:"getTotalLength",value:function(){return QY(this)}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.d.absolutePath,o=ywe(a,r),s=o.x,l=o.y,c=ka(Pr(),yr(s,l,0),i?this.getWorldTransform():this.getLocalTransform());return new Cu(c[0],c[1])}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(r*QY(this),i)}},{key:"getStartTangent",value:function(){var r=this.parsedStyle.d.segments,i=[];if(r.length>1){var a=r[0].currentPoint,o=r[1].currentPoint,s=r[1].startTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i}},{key:"getEndTangent",value:function(){var r=this.parsedStyle.d.segments,i=r.length,a=[];if(i>1){var o=r[i-2].currentPoint,s=r[i-1].currentPoint,l=r[i-1].endTangent;a=[],l?(a.push([s[0]-l[0],s[1]-l[1]]),a.push([s[0],s[1]])):(a.push([o[0],o[1]]),a.push([s[0],s[1]]))}return a}}])})(bs);Ad.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var XJe=["style"],Zx=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.style,a=Ro(r,XJe);it(this,e),n=Ar(this,e,[ze({type:Yt.POLYGON,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a)]),n.markerStartAngle=0,n.markerEndAngle=0,n.markerMidList=[];var o=n.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&Ya(s)&&(n.markerStartAngle=s.getLocalEulerAngles(),n.appendChild(s)),c&&Ya(c)&&n.placeMarkerMid(c),l&&Ya(l)&&(n.markerEndAngle=l.getLocalEulerAngles(),n.appendChild(l)),n.transformMarker(!0),n.transformMarker(!1),n}return Sr(e,t),at(e,[{key:"attributeChangedCallback",value:function(r,i,a,o,s){r==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):r==="markerStartOffset"||r==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):r==="markerStart"?(o&&Ya(o)&&(this.markerStartAngle=0,o.remove()),s&&Ya(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):r==="markerEnd"?(o&&Ya(o)&&(this.markerEndAngle=0,o.remove()),s&&Ya(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):r==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(r){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=i.points,u=c||{},f=u.points,h=r?a:o;if(!(!h||!Ya(h)||!f)){var d=0,p,g,v,y,_,E;if(v=f[0][0],y=f[0][1],r)p=f[1][0]-f[0][0],g=f[1][1]-f[0][1],_=s||0,E=this.markerStartAngle;else{var x=f.length;this.parsedStyle.isClosed?(p=f[x-1][0]-f[0][0],g=f[x-1][1]-f[0][1]):(v=f[x-1][0],y=f[x-1][1],p=f[x-2][0]-f[x-1][0],g=f[x-2][1]-f[x-1][1]),_=l||0,E=this.markerEndAngle}d=Math.atan2(g,p),h.setLocalEulerAngles(d*180/Math.PI+E),h.setLocalPosition(v+Math.cos(d)*_,y+Math.sin(d)*_)}}},{key:"placeMarkerMid",value:function(r){var i=this.parsedStyle.points,a=i||{},o=a.points;if(this.markerMidList.forEach(function(f){f.remove()}),this.markerMidList=[],r&&Ya(r)&&o)for(var s=1;s<(this.parsedStyle.isClosed?o.length:o.length-1);s++){var l=o[s][0],c=o[s][1],u=s===1?r:r.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(l,c)}}}])})(bs);Zx.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var qJe=["style"],S4=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Ro(n,qJe);return it(this,e),Ar(this,e,[ze({type:Yt.POLYLINE,style:r,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i)])}return Sr(e,t),at(e,[{key:"getTotalLength",value:function(){return jKe(this)}},{key:"getPointAtLength",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(r/this.getTotalLength(),i)}},{key:"getPoint",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],s=0,l,c,u=this.getTotalLength();a.forEach(function(y,_){a[_+1]&&(l=[0,0],l[0]=s/u,c=l4(y[0],y[1],a[_+1][0],a[_+1][1]),s+=c,l[1]=s/u,o.push(l))}),this.parsedStyle.points.segments=o}var f=0,h=0;this.parsedStyle.points.segments.forEach(function(y,_){r>=y[0]&&r<=y[1]&&(f=(r-y[0])/(y[1]-y[0]),h=_)});var d=c4(a[h][0],a[h][1],a[h+1][0],a[h+1][1],f),p=d.x,g=d.y,v=ka(Pr(),yr(p,g,0),i?this.getWorldTransform():this.getLocalTransform());return new Cu(v[0],v[1])}},{key:"getStartTangent",value:function(){var r=this.parsedStyle.points.points,i=[];return i.push([r[1][0],r[1][1]]),i.push([r[0][0],r[0][1]]),i}},{key:"getEndTangent",value:function(){var r=this.parsedStyle.points.points,i=r.length-1,a=[];return a.push([r[i-1][0],r[i-1][1]]),a.push([r[i][0],r[i][1]]),a}}])})(Zx);S4.PARSED_STYLE_LIST=new Set([].concat(Dr(Zx.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Nu=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),Ar(this,e,[ze({type:Yt.RECT},n)])}return Sr(e,t),at(e)})(bs);Nu.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var ZJe=["style"],Kx=(function(t){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=n.style,i=Ro(n,ZJe);return it(this,e),Ar(this,e,[ze({type:Yt.TEXT,style:ze({fill:"black"},r)},i)])}return Sr(e,t),at(e,[{key:"getComputedTextLength",value:function(){var r;return this.getGeometryBounds(),((r=this.parsedStyle.metrics)===null||r===void 0?void 0:r.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var r;return this.getGeometryBounds(),((r=this.parsedStyle.metrics)===null||r===void 0?void 0:r.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])})(bs);Kx.PARSED_STYLE_LIST=new Set([].concat(Dr(bs.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var KJe=(function(){function t(){it(this,t),this.registry={},this.define(Yt.CIRCLE,Wm),this.define(Yt.ELLIPSE,BP),this.define(Yt.RECT,Nu),this.define(Yt.IMAGE,FP),this.define(Yt.LINE,Ex),this.define(Yt.GROUP,yc),this.define(Yt.PATH,Ad),this.define(Yt.POLYGON,Zx),this.define(Yt.POLYLINE,S4),this.define(Yt.TEXT,Kx),this.define(Yt.HTML,qx)}return at(t,[{key:"define",value:function(n,r){this.registry[n]=r}},{key:"get",value:function(n){return this.registry[n]}}])})(),GCe=(function(t){function e(){var n;it(this,e),n=Ar(this,e),n.defaultView=null,n.ownerDocument=null,n.nodeName="document";try{n.timeline=new Rn.AnimationTimeline(n)}catch{}var r={};return BJ.forEach(function(i){var a=i.n,o=i.inh,s=i.d;o&&s&&(r[a]=ur(s)?s(Yt.GROUP):s)}),n.documentElement=new yc({id:"g-root",style:r}),n.documentElement.ownerDocument=n,n.documentElement.parentNode=n,n.childNodes=[n.documentElement],n}return Sr(e,t),at(e,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(r,i){if(r==="svg")return this.documentElement;var a=this.defaultView.customElements.get(r);a||(console.warn("Unsupported tagName: ",r),a=r==="tspan"?Kx:yc);var o=new a(i);return o.ownerDocument=this,o}},{key:"createElementNS",value:function(r,i,a){return this.createElement(i,a)}},{key:"cloneNode",value:function(r){throw new Error(zo)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(r,i,a,o){var s=this.defaultView.context.rBushRoot,l=s.search({minX:r,minY:i,maxX:a,maxY:o}),c=[];return l.forEach(function(u){var f=u.displayObject,h=f.parsedStyle.pointerEvents,d=h===void 0?"auto":h,p=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(d);(!p||p&&f.isVisible())&&!f.isCulled()&&f.isInteractive()&&c.push(f)}),c.sort(function(u,f){return f.sortable.renderOrder-u.sortable.renderOrder}),c}},{key:"elementFromPointSync",value:function(r,i){var a=this.defaultView.canvas2Viewport({x:r,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),c=l.width,u=l.height;if(o<0||s<0||o>c||s>u)return null;var f=this.defaultView.viewport2Client({x:o,y:s}),h=f.x,d=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:r,y:i,viewportX:o,viewportY:s,clientX:h,clientY:d},picked:[]}),g=p.picked;return g&&g[0]||this.documentElement}},{key:"elementFromPoint",value:(function(){var n=kt(Zs().mark(function i(a,o){var s,l,c,u,f,h,d,p,g,v,y;return Zs().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,c=s.y,u=this.defaultView.getConfig(),f=u.width,h=u.height,!(l<0||c<0||l>f||c>h)){_.next=1;break}return _.abrupt("return",null);case 1:return d=this.defaultView.viewport2Client({x:l,y:c}),p=d.x,g=d.y,_.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:a,y:o,viewportX:l,viewportY:c,clientX:p,clientY:g},picked:[]});case 2:return v=_.sent,y=v.picked,_.abrupt("return",y&&y[0]||this.documentElement);case 3:case"end":return _.stop()}},i,this)}));function r(i,a){return n.apply(this,arguments)}return r})()},{key:"elementsFromPointSync",value:function(r,i){var a=this.defaultView.canvas2Viewport({x:r,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),c=l.width,u=l.height;if(o<0||s<0||o>c||s>u)return[];var f=this.defaultView.viewport2Client({x:o,y:s}),h=f.x,d=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:r,y:i,viewportX:o,viewportY:s,clientX:h,clientY:d},picked:[]}),g=p.picked;return g[g.length-1]!==this.documentElement&&g.push(this.documentElement),g}},{key:"elementsFromPoint",value:(function(){var n=kt(Zs().mark(function i(a,o){var s,l,c,u,f,h,d,p,g,v,y;return Zs().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,c=s.y,u=this.defaultView.getConfig(),f=u.width,h=u.height,!(l<0||c<0||l>f||c>h)){_.next=1;break}return _.abrupt("return",[]);case 1:return d=this.defaultView.viewport2Client({x:l,y:c}),p=d.x,g=d.y,_.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:a,y:o,viewportX:l,viewportY:c,clientX:p,clientY:g},picked:[]});case 2:return v=_.sent,y=v.picked,y[y.length-1]!==this.documentElement&&y.push(this.documentElement),_.abrupt("return",y);case 3:case"end":return _.stop()}},i,this)}));function r(i,a){return n.apply(this,arguments)}return r})()},{key:"appendChild",value:function(r,i){throw new Error(gT)}},{key:"insertBefore",value:function(r,i){throw new Error(gT)}},{key:"removeChild",value:function(r,i){throw new Error(gT)}},{key:"replaceChild",value:function(r,i,a){throw new Error(gT)}},{key:"append",value:function(){throw new Error(gT)}},{key:"prepend",value:function(){throw new Error(gT)}},{key:"getElementById",value:function(r){return this.documentElement.getElementById(r)}},{key:"getElementsByName",value:function(r){return this.documentElement.getElementsByName(r)}},{key:"getElementsByTagName",value:function(r){return this.documentElement.getElementsByTagName(r)}},{key:"getElementsByClassName",value:function(r){return this.documentElement.getElementsByClassName(r)}},{key:"querySelector",value:function(r){return this.documentElement.querySelector(r)}},{key:"querySelectorAll",value:function(r){return this.documentElement.querySelectorAll(r)}},{key:"find",value:function(r){return this.documentElement.find(r)}},{key:"findAll",value:function(r){return this.documentElement.findAll(r)}}])})(Ws),WCe=(function(){function t(e){it(this,t),this.strategies=e}return at(t,[{key:"apply",value:function(n){var r=n.config,i=n.camera,a=n.renderingService,o=n.renderingContext,s=this.strategies;a.hooks.cull.tap(t.tag,function(l){if(l){var c,u=l.cullable;if(s.length===0?u.visible=o.unculledEntities.indexOf(l.entity)>-1:u.visible=s.every(function(h){return h.isVisible(i,l)}),!l.isCulled()&&l.isVisible())return l;var f=((c=r.future)===null||c===void 0?void 0:c.experimentalCancelEventPropagation)===!0;return l.dispatchEvent(new rs(ta.CULLED),f,f),null}return l}),a.hooks.afterRender.tap(t.tag,function(l){l.cullable.visibilityPlaneMask=-1})}}])})();WCe.tag="Culling";var VCe=(function(){function t(){var e=this;it(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new BD(null),this.rootWheelEvent=new nX(null),this.onPointerMove=function(n){var r,i=(r=e.context.renderingContext.root)===null||r===void 0||(r=r.ownerDocument)===null||r===void 0?void 0:r.defaultView;if(!(i.supportsTouchEvents&&n.pointerType==="touch")){var a=e.normalizeToPointerEvent(n,i),o=Td(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,c=e.bootstrapEvent(e.rootPointerEvent,l,i,n);e.context.eventService.mapEvent(c)}}catch(u){o.e(u)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}},this.onClick=function(n){var r,i=(r=e.context.renderingContext.root)===null||r===void 0||(r=r.ownerDocument)===null||r===void 0?void 0:r.defaultView,a=e.normalizeToPointerEvent(n,i),o=Td(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,c=e.bootstrapEvent(e.rootPointerEvent,l,i,n);e.context.eventService.mapEvent(c)}}catch(u){o.e(u)}finally{o.f()}e.setCursor(e.context.eventService.cursor)}}return at(t,[{key:"apply",value:function(n){var r=this;this.context=n;var i=n.renderingService,a=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var s=r.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}),l=s.picked;return l[0]||null}),i.hooks.pointerWheel.tap(t.tag,function(o){var s=r.normalizeWheelEvent(o);r.context.eventService.mapEvent(s)}),i.hooks.pointerDown.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=r.normalizeToPointerEvent(o,a);if(r.autoPreventDefault&&s[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}var c=Td(s),u;try{for(c.s();!(u=c.n()).done;){var f=u.value,h=r.bootstrapEvent(r.rootPointerEvent,f,a,o);r.context.eventService.mapEvent(h)}}catch(d){c.e(d)}finally{c.f()}r.setCursor(r.context.eventService.cursor)}}),i.hooks.pointerUp.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=r.context.contextService.getDomElement(),l=r.context.eventService.isNativeEventFromCanvas(s,o),c=l?"":"outside",u=r.normalizeToPointerEvent(o,a),f=Td(u),h;try{for(f.s();!(h=f.n()).done;){var d=h.value,p=r.bootstrapEvent(r.rootPointerEvent,d,a,o);p.type+=c,r.context.eventService.mapEvent(p)}}catch(g){f.e(g)}finally{f.f()}r.setCursor(r.context.eventService.cursor)}}),i.hooks.pointerMove.tap(t.tag,this.onPointerMove),i.hooks.pointerOver.tap(t.tag,this.onPointerMove),i.hooks.pointerOut.tap(t.tag,this.onPointerMove),i.hooks.click.tap(t.tag,this.onClick),i.hooks.pointerCancel.tap(t.tag,function(o){var s=r.normalizeToPointerEvent(o,a),l=Td(s),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,f=r.bootstrapEvent(r.rootPointerEvent,u,a,o);r.context.eventService.mapEvent(f)}}catch(h){l.e(h)}finally{l.f()}r.setCursor(r.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(n,r,i,a){n.view=i,n.originalEvent=null,n.nativeEvent=a,n.pointerId=r.pointerId,n.width=r.width,n.height=r.height,n.isPrimary=r.isPrimary,n.pointerType=r.pointerType,n.pressure=r.pressure,n.tangentialPressure=r.tangentialPressure,n.tiltX=r.tiltX,n.tiltY=r.tiltY,n.twist=r.twist,this.transferMouseData(n,r);var o=this.context.eventService.client2Viewport({x:r.clientX,y:r.clientY}),s=o.x,l=o.y;n.viewport.x=s,n.viewport.y=l;var c=this.context.eventService.viewport2Canvas(n.viewport),u=c.x,f=c.y;return n.canvas.x=u,n.canvas.y=f,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.isTrusted=a.isTrusted,n.type==="pointerleave"&&(n.type="pointerout"),n.type.startsWith("mouse")&&(n.type=n.type.replace("mouse","pointer")),n.type.startsWith("touch")&&(n.type=IQe[n.type]||n.type),n}},{key:"normalizeWheelEvent",value:function(n){var r=this.rootWheelEvent;this.transferMouseData(r,n),r.deltaMode=n.deltaMode,r.deltaX=n.deltaX,r.deltaY=n.deltaY,r.deltaZ=n.deltaZ;var i=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),a=i.x,o=i.y;r.viewport.x=a,r.viewport.y=o;var s=this.context.eventService.viewport2Canvas(r.viewport),l=s.x,c=s.y;return r.canvas.x=l,r.canvas.y=c,r.global.copyFrom(r.canvas),r.offset.copyFrom(r.canvas),r.nativeEvent=n,r.type=n.type,r}},{key:"transferMouseData",value:function(n,r){n.isTrusted=r.isTrusted,n.srcElement=r.srcElement,n.timeStamp=tX.now(),n.type=r.type,n.altKey=r.altKey,n.metaKey=r.metaKey,n.shiftKey=r.shiftKey,n.ctrlKey=r.ctrlKey,n.button=r.button,n.buttons=r.buttons,n.client.x=r.clientX,n.client.y=r.clientY,n.movement.x=r.movementX,n.movement.y=r.movementY,n.page.x=r.pageX,n.page.y=r.pageY,n.screen.x=r.screenX,n.screen.y=r.screenY,n.relatedTarget=null}},{key:"setCursor",value:function(n){this.context.contextService.applyCursorStyle(n||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(n,r){var i=[];if(r.isTouchEvent(n))for(var a=0;a<n.changedTouches.length;a++){var o=n.changedTouches[a];mr(o.button)&&(o.button=0),mr(o.buttons)&&(o.buttons=1),mr(o.isPrimary)&&(o.isPrimary=n.touches.length===1&&n.type==="touchstart"),mr(o.width)&&(o.width=o.radiusX||1),mr(o.height)&&(o.height=o.radiusY||1),mr(o.tiltX)&&(o.tiltX=0),mr(o.tiltY)&&(o.tiltY=0),mr(o.pointerType)&&(o.pointerType="touch"),mr(o.pointerId)&&(o.pointerId=o.identifier||0),mr(o.pressure)&&(o.pressure=o.force||.5),mr(o.twist)&&(o.twist=0),mr(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=n.type,i.push(o)}else if(r.isMouseEvent(n)){var s=n;mr(s.isPrimary)&&(s.isPrimary=!0),mr(s.width)&&(s.width=1),mr(s.height)&&(s.height=1),mr(s.tiltX)&&(s.tiltX=0),mr(s.tiltY)&&(s.tiltY=0),mr(s.pointerType)&&(s.pointerType="mouse"),mr(s.pointerId)&&(s.pointerId=NQe),mr(s.pressure)&&(s.pressure=.5),mr(s.twist)&&(s.twist=0),mr(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,i.push(s)}else i.push(n);return i}}])})();VCe.tag="Event";var QJe=[Yt.CIRCLE,Yt.ELLIPSE,Yt.IMAGE,Yt.RECT,Yt.LINE,Yt.POLYLINE,Yt.POLYGON,Yt.TEXT,Yt.PATH,Yt.HTML],JJe=(function(){function t(){it(this,t)}return at(t,[{key:"isVisible",value:function(n,r){var i,a=r.cullable;if(!a.enable)return!0;var o=r.getRenderBounds();if(cs.isEmpty(o))return!1;var s=n.getFrustum(),l=(i=r.parentNode)===null||i===void 0||(i=i.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(r,o,l||pT.INDETERMINATE,s.planes),a.visible=a.visibilityPlaneMask!==pT.OUTSIDE,a.visible}},{key:"computeVisibilityWithPlaneMask",value:function(n,r,i,a){if(i===pT.OUTSIDE||i===pT.INSIDE)return i;for(var o=pT.INSIDE,s=QJe.indexOf(n.nodeName)>-1,l=0,c=a.length;l<c;++l){var u=1<<l;if((i&u)!==0&&!(s&&(l===4||l===5))){var f=a[l],h=f.normal,d=f.distance;if(pc(h,r.getPositiveFarPoint(a[l]))+d<0)return pT.OUTSIDE;pc(h,r.getNegativeFarPoint(a[l]))+d<0&&(o|=u)}}return o}}])})(),YCe=(function(){function t(){it(this,t),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return at(t,[{key:"apply",value:function(n){var r=this,i,a,o=n.config,s=n.renderingService,l=n.renderingContext,c=n.rBushRoot,u=l.root.ownerDocument.defaultView;this.rBush=c;var f=function(_){s.dirtify()},h=function(_){r.syncTasks.set(_.target,_.detail.affectChildren),s.dirtify()},d=function(_){var E=_.target;Rn.enableSizeAttenuation&&Rn.styleValueRegistry.updateSizeAttenuation(E,u.getCamera().getZoom())},p=function(_){var E=_.target,x=E.rBushNode;x!=null&&x.aabb&&r.rBush.remove(x.aabb),r.syncTasks.delete(E),Rn.sceneGraphService.dirtyToRoot(E),s.dirtify()};s.hooks.init.tap(t.tag,function(){u.addEventListener(ta.MOUNTED,d),u.addEventListener(ta.UNMOUNTED,p),u.addEventListener(ta.ATTR_MODIFIED,f),u.addEventListener(ta.BOUNDS_CHANGED,h)}),s.hooks.destroy.tap(t.tag,function(){u.removeEventListener(ta.MOUNTED,d),u.removeEventListener(ta.UNMOUNTED,p),u.removeEventListener(ta.ATTR_MODIFIED,f),u.removeEventListener(ta.BOUNDS_CHANGED,h),r.syncTasks.clear()});var g=(i=Rn.globalThis.requestIdleCallback)!==null&&i!==void 0?i:UJ.bind(Rn.globalThis),v=((a=o.future)===null||a===void 0?void 0:a.experimentalRICSyncRTree)===!0;s.hooks.endFrame.tap(t.tag,function(){r.isFirstTimeRendering?(r.isFirstTimeRendering=!1,r.syncing=!0,g(function(){r.syncRTree(!0),r.isFirstTimeRenderingFinished=!0})):v&&Rn.globalThis.requestIdleCallback&&Rn.globalThis.cancelIdleCallback?(Rn.globalThis.cancelIdleCallback(r.ricSyncRTreeId),r.ricSyncRTreeId=Rn.globalThis.requestIdleCallback(function(){return r.syncRTree()})):r.syncRTree()})}},{key:"syncNode",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(n.isConnected){var i=n.rBushNode;i.aabb&&this.rBush.remove(i.aabb);var a=n.getRenderBounds();if(a){var o=n.renderable;r&&(o.dirtyRenderBounds||(o.dirtyRenderBounds=new cs),o.dirtyRenderBounds.update(a.center,a.halfExtents));var s=a.getMin(),l=ir(s,2),c=l[0],u=l[1],f=a.getMax(),h=ir(f,2),d=h[0],p=h[1];i.aabb||(i.aabb={}),i.aabb.displayObject=n,i.aabb.minX=c,i.aabb.minY=u,i.aabb.maxX=d,i.aabb.maxY=p}if(i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY))return i.aabb}}},{key:"syncRTree",value:function(){var n=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!r&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var i=[],a=new Set,o=function(l){if(!a.has(l)&&l.renderable){var c=n.syncNode(l,r);c&&(i.push(c),a.add(l))}};this.syncTasks.forEach(function(s,l){s&&l.forEach(o);for(var c=l;c;)o(c),c=c.parentElement}),this.rBush.load(i),i.length=0,this.syncing=!1}}}])})();YCe.tag="Prepare";var Ed=(function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t})({}),koe=500,eet=.1,tet=1e3,dI=new rs(ta.MOUNTED),pI=new rs(ta.UNMOUNTED),R7=new rs(Ed.BEFORE_RENDER),Doe=new rs(Ed.RERENDER),M7=new rs(Ed.AFTER_RENDER),aX=(function(t){function e(n){var r;it(this,e),r=Ar(this,e),r.Element=bs,r.inited=!1,r.context={};var i=n.container,a=n.canvas,o=n.renderer,s=n.width,l=n.height,c=n.background,u=n.cursor,f=n.supportsMutipleCanvasesInOneContainer,h=n.cleanUpOnDestroy,d=h===void 0?!0:h,p=n.offscreenCanvas,g=n.devicePixelRatio,v=n.requestAnimationFrame,y=n.cancelAnimationFrame,_=n.createImage,E=n.supportsTouchEvents,x=n.supportsPointerEvents,T=n.isTouchEvent,S=n.isMouseEvent,w=n.dblClickSpeed,C=s,D=l,L=g||FJ&&window.devicePixelRatio||1;return L=L>=1?Math.ceil(L):1,a&&(C=s||MQe(a)||a.width/L,D=l||PQe(a)||a.height/L),r.customElements=new KJe,r.devicePixelRatio=L,r.requestAnimationFrame=v??UJ.bind(Rn.globalThis),r.cancelAnimationFrame=y??UCe.bind(Rn.globalThis),r.createImage=_??function(){return new window.Image},r.supportsTouchEvents=E??"ontouchstart"in Rn.globalThis,r.supportsPointerEvents=x??!!Rn.globalThis.PointerEvent,r.isTouchEvent=T??function(B){return r.supportsTouchEvents&&B instanceof Rn.globalThis.TouchEvent},r.isMouseEvent=S??function(B){return!Rn.globalThis.MouseEvent||B instanceof Rn.globalThis.MouseEvent&&(!r.supportsPointerEvents||!(B instanceof Rn.globalThis.PointerEvent))},p&&(Rn.offscreenCanvas=p),r.document=new GCe,r.document.defaultView=r,f||wQe(i,r,d),r.initRenderingContext(ze(ze({},n),{},{width:C,height:D,background:c??"transparent",cursor:u??"default",cleanUpOnDestroy:d,devicePixelRatio:L,requestAnimationFrame:r.requestAnimationFrame,cancelAnimationFrame:r.cancelAnimationFrame,createImage:r.createImage,supportsTouchEvents:r.supportsTouchEvents,supportsPointerEvents:r.supportsPointerEvents,isTouchEvent:r.isTouchEvent,isMouseEvent:r.isMouseEvent,dblClickSpeed:w??200})),r.initDefaultCamera(C,D,o.clipSpaceNearZ),r.initRenderer(o,!0),r}return Sr(e,t),at(e,[{key:"initRenderingContext",value:function(r){this.context.config=r,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(r,i,a){var o=this,s=new Rn.CameraContribution;s.clipSpaceNearZ=a,s.setType(Uo.EXPLORING,YY.DEFAULT).setPosition(r/2,i/2,koe).setFocalPoint(r/2,i/2,0).setOrthographic(r/-2,r/2,i/2,i/-2,eet,tet),s.canvas=this,s.eventEmitter.on(pCe.UPDATED,function(){o.context.renderingContext.renderReasons.add(_A.CAMERA_CHANGED),Rn.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=s}},{key:"updateSizeAttenuation",value:function(){var r=this.getCamera().getZoom();this.document.documentElement.forEach(function(i){Rn.styleValueRegistry.updateSizeAttenuation(i,r)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var r=this;return this.readyPromise||(this.readyPromise=new Promise(function(i){r.resolveReadyPromise=function(){i(r)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1?arguments[1]:void 0;ql.clearCache();var o=((r=this.getConfig().future)===null||r===void 0?void 0:r.experimentalCancelEventPropagation)===!0;a||this.dispatchEvent(new rs(Ed.BEFORE_DESTROY),o,o),this.frameId&&this.cancelAnimationFrame(this.frameId);var s=this.getRoot();i&&(this.unmountChildren(s),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),a||this.dispatchEvent(new rs(Ed.AFTER_DESTROY),o,o);var l=function(u){u.currentTarget=null,u.manager=null,u.target=null,u.relatedNode=null};l(dI),l(pI),l(R7),l(Doe),l(M7),l(lm),l(rX),l(iX),l(HCe),Rn.textService.clearCache()}},{key:"changeSize",value:function(r,i){this.resize(r,i)}},{key:"resize",value:function(r,i){var a,o=this.context.config;o.width=r,o.height=i,this.getContextService().resize(r,i);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(r/2,i/2,koe).setFocalPoint(r/2,i/2,0),l===_p.ORTHOGRAPHIC?s.setOrthographic(r/-2,r/2,i/2,i/-2,s.getNear(),s.getFar()):s.setAspect(r/i);var c=((a=o.future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;this.dispatchEvent(new rs(Ed.RESIZE,{width:r,height:i}),c,c)}},{key:"appendChild",value:function(r,i){return this.document.documentElement.appendChild(r,i)}},{key:"insertBefore",value:function(r,i){return this.document.documentElement.insertBefore(r,i)}},{key:"removeChild",value:function(r){return this.document.documentElement.removeChild(r)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(r){var i,a=this;r&&(R7.detail=r,M7.detail=r);var o=((i=this.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;this.dispatchEvent(R7,o,o);var s=this.getRenderingService();s.render(this.getConfig(),r,function(){a.dispatchEvent(Doe,o,o)}),this.dispatchEvent(M7,o,o)}},{key:"run",value:function(){var r=this,i=function(o,s){r.render(s),r.frameId=r.requestAnimationFrame(i)};i()}},{key:"initRenderer",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!r)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new AZe,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new VCe,new YCe,new WCe([new JJe])),this.loadRendererContainerModule(r),this.context.contextService=new this.context.ContextService(ze(ze({},Rn),this.context)),this.context.renderingService=new hJe(Rn,this.context),this.context.eventService=new fJe(Rn,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(r,a,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(r,a)}).catch(function(o){console.error(o)})}},{key:"initRenderingService",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){var s;i.inited=!0;var l=((s=i.getConfig().future)===null||s===void 0?void 0:s.experimentalCancelEventPropagation)===!0;a?o?i.requestAnimationFrame(function(){i.dispatchEvent(new rs(Ed.READY),l,l)}):i.dispatchEvent(new rs(Ed.READY),l,l):i.dispatchEvent(new rs(Ed.RENDERER_CHANGED),l,l),i.readyPromise&&i.resolveReadyPromise(),a||i.getRoot().forEach(function(c){var u,f;(u=(f=c).dirty)===null||u===void 0||u.call(f,!0,!0)}),i.mountChildren(i.getRoot()),r.getConfig().enableAutoRendering&&i.run()})}},{key:"loadRendererContainerModule",value:function(r){var i=this,a=r.getPlugins();a.forEach(function(o){o.context=i.context,o.init(Rn)})}},{key:"setRenderer",value:function(r){var i=this.getConfig();if(i.renderer!==r){var a=i.renderer;i.renderer=r,this.destroy(!1,!0),Dr(a?.getPlugins()||[]).reverse().forEach(function(o){o.destroy(Rn)}),this.initRenderer(r)}}},{key:"setCursor",value:function(r){var i=this.getConfig();i.cursor=r,this.getContextService().applyCursorStyle(r)}},{key:"unmountChildren",value:function(r){var i=this;if(r.childNodes.forEach(function(s){i.unmountChildren(s)}),this.inited){if(r.isMutationObserved)r.dispatchEvent(pI);else{var a,o=((a=this.getConfig().future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;pI.target=r,this.dispatchEvent(pI,!0,o)}r!==this.document.documentElement&&(r.ownerDocument=null),r.isConnected=!1}r.isCustomElement&&r.disconnectedCallback&&r.disconnectedCallback()}},{key:"mountChildren",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DD(r);if(this.inited){if(!r.isConnected&&(r.ownerDocument=this.document,r.isConnected=!0,!a))if(r.isMutationObserved)r.dispatchEvent(dI);else{var o,s=((o=this.getConfig().future)===null||o===void 0?void 0:o.experimentalCancelEventPropagation)===!0;dI.target=r,this.dispatchEvent(dI,!0,s)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",r.nodeName);r.childNodes.forEach(function(l){i.mountChildren(l,a)}),r.isCustomElement&&r.connectedCallback&&r.connectedCallback()}},{key:"mountFragment",value:function(r){this.mountChildren(r,!1)}},{key:"client2Viewport",value:function(r){return this.getEventService().client2Viewport(r)}},{key:"viewport2Client",value:function(r){return this.getEventService().viewport2Client(r)}},{key:"viewport2Canvas",value:function(r){return this.getEventService().viewport2Canvas(r)}},{key:"canvas2Viewport",value:function(r){return this.getEventService().canvas2Viewport(r)}},{key:"getPointByClient",value:function(r,i){return this.client2Viewport({x:r,y:i})}},{key:"getClientByPoint",value:function(r,i){return this.viewport2Client({x:r,y:i})}}])})($Ce);/*!
 * @antv/g-camera-api
 * @description A simple implementation of Camera API.
 * @version 2.0.41
 * @date 7/30/2025, 1:34:37 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var net=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.landmarks=[],n}return Sr(e,t),at(e,[{key:"rotate",value:function(r,i,a){if(this.relElevation=gA(i),this.relAzimuth=gA(r),this.relRoll=gA(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===Uo.EXPLORING){var o=Vf(wa(),[1,0,0],$o((this.rotateWorld?1:-1)*this.relElevation)),s=Vf(wa(),[0,1,0],$o((this.rotateWorld?1:-1)*this.relAzimuth)),l=Vf(wa(),[0,0,1],$o(this.relRoll)),c=qf(wa(),s,o);c=qf(wa(),c,l);var u=TP(Zr(),c);Vs(this.matrix,this.matrix,[0,0,-this.distance]),qa(this.matrix,this.matrix,u),Vs(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getPosition():this.type===Uo.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(r,i){var a=$f(r,i,0),o=Yc(this.position);return cf(o,o,Ay(Pr(),this.right,a[0])),cf(o,o,Ay(Pr(),this.up,a[1])),this._setPosition(o),this.triggerUpdate(),this}},{key:"dolly",value:function(r){var i=this.forward,a=Yc(this.position),o=r*this.dollyingStep,s=this.distance+r*this.dollyingStep;return o=Math.max(Math.min(s,this.maxDistance),this.minDistance)-this.distance,a[0]+=o*i[0],a[1]+=o*i[1],a[2]+=o*i[2],this._setPosition(a),this.type===Uo.ORBITING||this.type===Uo.EXPLORING?this._getDistance():this.type===Uo.TRACKING&&cf(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(r){var i,a,o,s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.position,u=c===void 0?this.position:c,f=l.focalPoint,h=f===void 0?this.focalPoint:f,d=l.roll,p=l.zoom,g=new Rn.CameraContribution;g.setType(this.type,void 0),g.setPosition(u[0],(i=u[1])!==null&&i!==void 0?i:this.position[1],(a=u[2])!==null&&a!==void 0?a:this.position[2]),g.setFocalPoint(h[0],(o=h[1])!==null&&o!==void 0?o:this.focalPoint[1],(s=h[2])!==null&&s!==void 0?s:this.focalPoint[2]),g.setRoll(d??this.roll),g.setZoom(p??this.zoom);var v={name:r,matrix:SP(g.getWorldTransform()),right:Yc(g.right),up:Yc(g.up),forward:Yc(g.forward),position:Yc(g.getPosition()),focalPoint:Yc(g.getFocalPoint()),distanceVector:Yc(g.getDistanceVector()),distance:g.getDistance(),dollyingStep:g.getDollyingStep(),azimuth:g.getAzimuth(),elevation:g.getElevation(),roll:g.getRoll(),relAzimuth:g.relAzimuth,relElevation:g.relElevation,relRoll:g.relRoll,zoom:g.getZoom()};return this.landmarks.push(v),v}},{key:"gotoLandmark",value:function(r){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=$i(r)?this.landmarks.find(function(B){return B.name===r}):r;if(o){var s=Ln(a)?{duration:a}:a,l=s.easing,c=l===void 0?"linear":l,u=s.duration,f=u===void 0?100:u,h=s.easingFunction,d=h===void 0?void 0:h,p=s.onfinish,g=p===void 0?void 0:p,v=s.onframe,y=v===void 0?void 0:v,_=.01;this.cancelLandmarkAnimation();var E=o.position,x=o.focalPoint,T=o.zoom,S=o.roll,w=d||Rn.EasingFunction(c),C,D=function(){i.setFocalPoint(x),i.setPosition(E),i.setRoll(S),i.setZoom(T),i.computeMatrix(),i.triggerUpdate(),g?.()};if(f===0)return D();var L=function(I){C===void 0&&(C=I);var U=I-C;if(U>=f){D();return}var $=w(U/f),X=Pr(),N=Pr(),M=1,k=0;DA(X,i.focalPoint,x,$),DA(N,i.position,E,$),k=i.roll*(1-$)+S*$,M=i.zoom*(1-$)+T*$,i.setFocalPoint(X),i.setPosition(N),i.setRoll(k),i.setZoom(M);var z=cD(X,x)+cD(N,E);if(z<=_&&T===void 0&&S===void 0)return D();i.computeMatrix(),i.triggerUpdate(),U<f&&(y?.($),i.landmarkAnimationID=i.canvas.requestAnimationFrame(L))};this.canvas.requestAnimationFrame(L)}}}])})(gCe);Rn.CameraContribution=net;/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.28
 * @date 7/30/2025, 1:36:24 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var P7=(function(t){function e(n,r,i,a){var o;return it(this,e),o=Ar(this,e,[n]),o.currentTime=i,o.timelineTime=a,o.target=r,o.type="finish",o.bubbles=!1,o.currentTarget=r,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=i,o.timelineTime=a,o}return Sr(e,t),at(e)})(x4),ret=0,iet=(function(){function t(e,n){var r;it(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=e,e.animation=this,this.timeline=n,this.id="".concat(ret++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((r=this.effect)===null||r===void 0?void 0:r.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return at(t,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(r,i){n.resolveReadyPromise=function(){r(n)},n.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var n=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(r,i){n.resolveFinishedPromise=function(){r(n)},n.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(n){if(n=Number(n),!isNaN(n)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var r;this._startTime=Number((r=this.timeline)===null||r===void 0?void 0:r.currentTime)-n/this.playbackRate}this.currentTimePending=!1,this._currentTime!==n&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(n,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(n){if(n!==null){if(this.updatePromises(),n=Number(n),isNaN(n)||this._paused||this._idle)return;this._startTime=n,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(n){if(n!==this._playbackRate){this.updatePromises();var r=this.currentTime;this._playbackRate=n,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),r!==null&&(this.currentTime=r),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var n;if((n=this.effect.target)!==null&&n!==void 0&&n.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var r=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==r&&(i==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):r==="pending"?this.resolveReadyPromise():i==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&i!==r&&(i==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):i==="finished"?this.resolveFinishedPromise():r==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var n=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var r=new P7(null,this,this.currentTime,null);setTimeout(function(){n.oncancel(r)})}}},{key:"reverse",value:function(){this.updatePromises();var n=this.currentTime;this.playbackRate*=-1,this.play(),n!==null&&(this.currentTime=n),this.updatePromises()}},{key:"updatePlaybackRate",value:function(n){this.playbackRate=n}},{key:"targetAnimations",value:function(){var n,r=(n=this.effect)===null||n===void 0?void 0:n.target;return r.getAnimations()}},{key:"markTarget",value:function(){var n=this.targetAnimations();n.indexOf(this)===-1&&n.push(this)}},{key:"unmarkTarget",value:function(){var n=this.targetAnimations(),r=n.indexOf(this);r!==-1&&n.splice(r,1)}},{key:"tick",value:function(n,r){!this._idle&&!this._paused&&(this._startTime===null?r&&(this.startTime=n-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((n-this._startTime)*this.playbackRate)),r&&(this.currentTimePending=!1,this.fireEvents(n))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(zo)}},{key:"addEventListener",value:function(n,r,i){throw new Error(zo)}},{key:"removeEventListener",value:function(n,r,i){throw new Error(zo)}},{key:"dispatchEvent",value:function(n){throw new Error(zo)}},{key:"commitStyles",value:function(){throw new Error(zo)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(-1))}else{var r;this._inEffect=!!((r=this.effect)!==null&&r!==void 0&&r.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(n,r){n!==this._currentTime&&(this._currentTime=n,this._isFinished&&!r&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(n){var r=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new P7(null,this,this.currentTime,n);setTimeout(function(){r.onfinish&&r.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new P7(null,this,this.currentTime,n);this.onframe(a)}this._finishedFlag=!1}}}])})(),aet=4,oet=.001,set=1e-7,cet=10,lC=11,gI=1/(lC-1),uet=typeof Float32Array=="function",XCe=function(e,n){return 1-3*n+3*e},qCe=function(e,n){return 3*n-6*e},ZCe=function(e){return 3*e},FD=function(e,n,r){return((XCe(n,r)*e+qCe(n,r))*e+ZCe(n))*e},KCe=function(e,n,r){return 3*XCe(n,r)*e*e+2*qCe(n,r)*e+ZCe(n)},fet=function(e,n,r,i,a){var o,s,l=0;do s=n+(r-n)/2,o=FD(s,i,a)-e,o>0?r=s:n=s;while(Math.abs(o)>set&&++l<cet);return s},het=function(e,n,r,i){for(var a=0;a<aet;++a){var o=KCe(n,r,i);if(o===0)return n;var s=FD(n,r,i)-e;n-=s/o}return n},$J=function(e,n,r,i){if(!(e>=0&&e<=1&&r>=0&&r<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&r===i)return function(l){return l};for(var a=uet?new Float32Array(lC):new Array(lC),o=0;o<lC;++o)a[o]=FD(o*gI,e,r);var s=function(c){for(var u=0,f=1,h=lC-1;f!==h&&a[f]<=c;++f)u+=gI;--f;var d=(c-a[f])/(a[f+1]-a[f]),p=u+d*gI,g=KCe(p,e,r);return g>=oet?het(c,p,e,r):g===0?p:fet(c,u,u+gI,e,r)};return function(l){return l===0||l===1?l:FD(s(l),n,i)}},det=function(e){return e=e.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())}),e.charAt(0)==="-"?e.substring(1):e},vI=function(e){return Math.pow(e,2)},mI=function(e){return Math.pow(e,3)},yI=function(e){return Math.pow(e,4)},_I=function(e){return Math.pow(e,5)},bI=function(e){return Math.pow(e,6)},EI=function(e){return 1-Math.cos(e*Math.PI/2)},xI=function(e){return 1-Math.sqrt(1-e*e)},SI=function(e){return e*e*(3*e-2)},TI=function(e){for(var n,r=4;e<((n=Math.pow(2,--r))-1)/11;);return 1/Math.pow(4,3-r)-7.5625*Math.pow((n*3-2)/22-e,2)},AI=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=ir(n,2),i=r[0],a=i===void 0?1:i,o=r[1],s=o===void 0?.5:o,l=ga(Number(a),1,10),c=ga(Number(s),.1,2);return e===0||e===1?e:-l*Math.pow(2,10*(e-1))*Math.sin((e-1-c/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/c)},c2=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=ir(n,4),a=i[0],o=a===void 0?1:a,s=i[1],l=s===void 0?100:s,c=i[2],u=c===void 0?10:c,f=i[3],h=f===void 0?0:f;o=ga(o,.1,1e3),l=ga(l,.1,1e3),u=ga(u,.1,1e3),h=ga(h,.1,1e3);var d=Math.sqrt(l/o),p=u/(2*Math.sqrt(l*o)),g=p<1?d*Math.sqrt(1-p*p):0,v=1,y=p<1?(p*d+-h)/g:-h+d,_=r?r*e/1e3:e;return p<1?_=Math.exp(-_*p*d)*(v*Math.cos(g*_)+y*Math.sin(g*_)):_=(v+y*_)*Math.exp(-_*d),e===0||e===1?e:1-_},N7=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=n,i=ir(r,2),a=i[0],o=a===void 0?10:a,s=i[1],l=s==="start"?Math.ceil:Math.floor;return l(ga(e,0,1)*o)/o},Boe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=ir(n,4),i=r[0],a=r[1],o=r[2],s=r[3];return $J(i,a,o,s)(e)},wI=$J(.42,0,1,1),pp=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-e(1-n,r,i)}},gp=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return n<.5?e(n*2,r,i)/2:1-e(n*-2+2,r,i)/2}},vp=function(e){return function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return n<.5?(1-e(1-n*2,r,i))/2:(e(n*2-1,r,i)+1)/2}},Foe={steps:N7,"step-start":function(e){return N7(e,[1,"start"])},"step-end":function(e){return N7(e,[1,"end"])},linear:function(e){return e},"cubic-bezier":Boe,ease:function(e){return Boe(e,[.25,.1,.25,1])},in:wI,out:pp(wI),"in-out":gp(wI),"out-in":vp(wI),"in-quad":vI,"out-quad":pp(vI),"in-out-quad":gp(vI),"out-in-quad":vp(vI),"in-cubic":mI,"out-cubic":pp(mI),"in-out-cubic":gp(mI),"out-in-cubic":vp(mI),"in-quart":yI,"out-quart":pp(yI),"in-out-quart":gp(yI),"out-in-quart":vp(yI),"in-quint":_I,"out-quint":pp(_I),"in-out-quint":gp(_I),"out-in-quint":vp(_I),"in-expo":bI,"out-expo":pp(bI),"in-out-expo":gp(bI),"out-in-expo":vp(bI),"in-sine":EI,"out-sine":pp(EI),"in-out-sine":gp(EI),"out-in-sine":vp(EI),"in-circ":xI,"out-circ":pp(xI),"in-out-circ":gp(xI),"out-in-circ":vp(xI),"in-back":SI,"out-back":pp(SI),"in-out-back":gp(SI),"out-in-back":vp(SI),"in-bounce":TI,"out-bounce":pp(TI),"in-out-bounce":gp(TI),"out-in-bounce":vp(TI),"in-elastic":AI,"out-elastic":pp(AI),"in-out-elastic":gp(AI),"out-in-elastic":vp(AI),spring:c2,"spring-in":c2,"spring-out":pp(c2),"spring-in-out":gp(c2),"spring-out-in":vp(c2)},pet=function(e){return det(e).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},get=function(e){return Foe[pet(e)]||Foe.linear},vet=function(e){return e},met=1,yet=.5,Uoe=0;function joe(t,e){return function(n){if(n>=1)return 1;var r=1/t;return n+=e*r,n-n%r}}var OI="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",_et=new RegExp("cubic-bezier\\(".concat(OI,",").concat(OI,",").concat(OI,",").concat(OI,"\\)")),bet=/steps\(\s*(\d+)\s*\)/,Eet=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function HJ(t){var e=_et.exec(t);if(e)return $J.apply(void 0,Dr(e.slice(1).map(Number)));var n=bet.exec(t);if(n)return joe(Number(n[1]),Uoe);var r=Eet.exec(t);return r?joe(Number(r[1]),{start:met,middle:yet,end:Uoe}[r[2]]):get(t)}function xet(t){return Math.abs(Tet(t)/(t.playbackRate||1))}function Tet(t){var e;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((e=t.iterations)!==null&&e!==void 0?e:1)}var QCe=0,GJ=1,T4=2,JCe=3;function Aet(t,e,n){if(e===null)return QCe;var r=n.endTime;return e<Math.min(n.delay,r)?GJ:e>=Math.min(n.delay+t+n.endDelay,r)?T4:JCe}function wet(t,e,n,r,i){switch(r){case GJ:return e==="backwards"||e==="both"?0:null;case JCe:return n-i;case T4:return e==="forwards"||e==="both"?t:null;case QCe:return null}}function Oet(t,e,n,r,i){var a=i;return t===0?e!==GJ&&(a+=n):a+=r/t,a}function Cet(t,e,n,r,i,a){var o=t===1/0?e%1:t%1;return o===0&&n===T4&&r!==0&&(i!==0||a===0)&&(o=1),o}function Ret(t,e,n,r){return t===T4&&e===1/0?1/0:n===1?Math.floor(r)-1:Math.floor(r)}function Met(t,e,n){var r=t;if(t!=="normal"&&t!=="reverse"){var i=e;t==="alternate-reverse"&&(i+=1),r="normal",i!==1/0&&i%2!==0&&(r="reverse")}return r==="normal"?n:1-n}function Pet(t,e,n){var r=Aet(t,e,n),i=wet(t,n.fill,e,r,n.delay);if(i===null)return null;var a=n.duration==="auto"?0:n.duration,o=Oet(a,r,n.iterations,i,n.iterationStart),s=Cet(o,n.iterationStart,r,n.iterations,i,a),l=Ret(r,n.iterations,s,o),c=Met(n.direction,l,s);return n.currentIteration=l,n.progress=c,n.easingFunction(c)}function Net(t,e,n){var r=Iet(t,e),i=Let(r,n);return function(a,o){if(o!==null)i.filter(function(l){return o>=l.applyFrom&&o<l.applyTo}).forEach(function(l){var c=o-l.startOffset,u=l.endOffset-l.startOffset,f=u===0?0:c/u;a.setAttribute(l.property,l.interpolation(f),!1,!1)});else for(var s in r)eRe(s)&&a.setAttribute(s,null)}}function eRe(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function Iet(t,e){for(var n={},r=0;r<t.length;r++)for(var i in t[r])if(eRe(i)){var a={offset:t[r].offset,computedOffset:t[r].computedOffset,easing:t[r].easing,easingFunction:HJ(t[r].easing)||e.easingFunction,value:t[r][i]};n[i]=n[i]||[],n[i].push(a)}return n}function Let(t,e){var n=[];for(var r in t)for(var i=t[r],a=0;a<i.length-1;a++){var o=a,s=a+1,l=i[o].computedOffset,c=i[s].computedOffset,u=l,f=c;a===0&&(u=-1/0,c===0&&(s=o)),a===i.length-2&&(f=1/0,l===1&&(o=s)),n.push({applyFrom:u,applyTo:f,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:r,interpolation:ket(r,i[o].value,i[s].value,e)})}return n.sort(function(h,d){return h.startOffset-d.startOffset}),n}var zoe=function(e,n,r){return function(i){var a=tRe(e,n,i);return Ln(a)?a:r(a)}};function ket(t,e,n,r){var i=NCe[t];if(i&&i.syntax&&i.int){var a=Rn.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(e,r):e,l=o?o(n,r):n,c=a.mixer(s,l,r);if(c){var u=zoe.apply(void 0,Dr(c));return function(f){return f===0?e:f===1?n:u(f)}}}}return zoe(!1,!0,function(f){return f?n:e})}function tRe(t,e,n){if(typeof t=="number"&&typeof e=="number")return t*(1-n)+e*n;if(typeof t=="boolean"&&typeof e=="boolean"||typeof t=="string"&&typeof e=="string")return n<.5?t:e;if(Array.isArray(t)&&Array.isArray(e)){for(var r=t.length,i=e.length,a=Math.max(r,i),o=[],s=0;s<a;s++)o.push(tRe(t[s<r?s:r-1],e[s<i?s:i-1],n));return o}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(e))}var Det=(function(){function t(){it(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=vet,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return at(t,[{key:"easing",get:function(){return this._easing},set:function(n){this.easingFunction=HJ(n),this._easing=n}}])})();function Bet(t){var e=[];for(var n in t)if(!(n in["easing","offset","composite"])){var r=t[n];Array.isArray(r)||(r=[r]);for(var i=r.length,a=0;a<i;a++){if(!e[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),e[a]=o}r[a]!==void 0&&r[a]!==null&&(e[a][n]=r[a])}}return e.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),e}function $oe(t,e){if(t===null)return[];Array.isArray(t)||(t=Bet(t));for(var n=t.map(function(l){var c={};e!=null&&e.composite&&(c.composite="auto");for(var u in l){var f=l[u];if(u==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");c.computedOffset=f}}else if(u==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));c[u]=f}return c.offset===void 0&&(c.offset=null),c.easing===void 0&&(c.easing=e?.easing||"linear"),c.composite===void 0&&(c.composite="auto"),c}),r=!0,i=-1/0,a=0;a<n.length;a++){var o=n[a].offset;if(Kn(o))r=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}n=n.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,c=n,u=c.length;if(n[u-1].computedOffset=Number((l=n[u-1].offset)!==null&&l!==void 0?l:1),u>1){var f;n[0].computedOffset=Number((f=n[0].offset)!==null&&f!==void 0?f:0)}for(var h=0,d=Number(n[0].computedOffset),p=1;p<u;p++){var g=n[p].computedOffset;if(!Kn(g)&&!Kn(d)){for(var v=1;v<p-h;v++)n[h+v].computedOffset=d+(Number(g)-d)*v/(p-h);h=p,d=Number(g)}}}return r||s(),n}var Fet="backwards|forwards|both|none".split("|"),Uet="reverse|alternate|alternate-reverse".split("|");function jet(t,e){var n=new Det;return typeof t=="number"&&!isNaN(t)?n.duration=t:t!==void 0&&Object.keys(t).forEach(function(r){if(t[r]!==void 0&&t[r]!==null&&t[r]!=="auto"){if((typeof n[r]=="number"||r==="duration")&&(typeof t[r]!="number"||isNaN(t[r]))||r==="fill"&&Fet.indexOf(t[r])===-1||r==="direction"&&Uet.indexOf(t[r])===-1)return;n[r]=t[r]}}),n}function zet(t,e){return t=$et(t??{duration:"auto"}),jet(t)}function $et(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var Het=(function(){function t(e,n,r){var i=this;it(this,t),this.composite="replace",this.iterationComposite="replace",this.target=e,this.timing=zet(r),this.timing.effect=this,this.timing.activeDuration=xet(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=$oe(n,this.timing),this.interpolations=Net(this.normalizedKeyframes,this.timing,this.target);var a=Rn.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(s,l){return l==="duration"?s.duration==="auto"?0:s.duration:l==="fill"?s.fill==="auto"?"none":s.fill:l==="localTime"?i.animation&&i.animation.currentTime||null:l==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:s.currentIteration||0:l==="progress"?!i.animation||i.animation.playState!=="running"?null:s.progress||0:s[l]},set:function(){return!0}}):this.timing}return at(t,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(n){return n===null?!1:(this.timeFraction=Pet(this.timing.activeDuration,n,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(n){this.normalizedKeyframes=$oe(n)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(n){var r=this;Object.keys(n||{}).forEach(function(i){r.timing[i]=n[i]})}}])})();function Hoe(t,e){return Number(t.id)-Number(e.id)}var Get=(function(){function t(e){var n=this;it(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(r){n.currentTime=r,n.discardAnimations(),n.animations.length===0?n.timelineTicking=!1:n.requestAnimationFrame(n.webAnimationsNextTick)},this.processRafCallbacks=function(r){var i=n.rafCallbacks;n.rafCallbacks=[],r<Number(n.currentTime)&&(r=Number(n.currentTime)),n.animations.sort(Hoe),n.animations=n.tick(r,!0,n.animations)[0],i.forEach(function(a){a[1](r)}),n.applyPendingEffects()},this.document=e}return at(t,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(n,r,i){var a=new Het(n,r,i),o=new iet(a,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o}},{key:"applyDirtiedAnimation",value:function(n){var r=this;if(!this.inTick){n.markTarget();var i=n.targetAnimations();i.sort(Hoe);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(o){var s=r.animations.indexOf(o);s!==-1&&r.animations.splice(s,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(n){n?.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(n){return n.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(n){return n.playState!=="finished"&&n.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(n){var r=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([r,n]),r}},{key:"requestAnimationFrame",value:function(n){var r=this;return this.rAF(function(i){r.updateAnimationsPromises(),n(i),r.updateAnimationsPromises()})}},{key:"tick",value:function(n,r,i){var a=this,o,s;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=n,this.ticking=!1;var l=[],c=[],u=[],f=[];return i.forEach(function(h){h.tick(n,r),h._inEffect?(c.push(h.effect),h.markTarget()):(l.push(h.effect),h.unmarkTarget()),h._needsTick&&(a.ticking=!0);var d=h._inEffect||h._needsTick;h._inTimeline=d,d?u.push(h):f.push(h)}),(o=this.pendingEffects).push.apply(o,l),(s=this.pendingEffects).push.apply(s,c),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[u,f]}}])})();Rn.EasingFunction=HJ;Rn.AnimationTimeline=Get;function nRe(t,e){e(t),t.children&&t.children.forEach(function(n){n&&nRe(n,e)})}function Pw(t){A4(t,!0)}function Bp(t){A4(t,!1)}function A4(t,e){var n=e?"visible":"hidden";nRe(t,function(r){r.attr("visibility",n)})}var Wet=(function(t){Cr(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=t.apply(this,_r([],Ae(n),!1))||this;return i.isMutationObserved=!0,i.addEventListener(ta.INSERTED,function(){Bp(i)}),i}return e})(yc);function rRe(t){var e=t.appendChild(new Wet({class:"offscreen"}));return Bp(e),e}function Vet(t){for(var e=t;e;){if(e.className==="offscreen")return!0;e=e.parent}return!1}var WJ=(function(t){Cr(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=yo(n,["style"]);return t.call(this,Ot({style:Ot({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},r)},i))||this}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=rRe(this)),this._offscreen},enumerable:!1,configurable:!0}),e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e})(Kx);function qA(t){return t*Math.PI/180}function iRe(t){return Number((t*180/Math.PI).toPrecision(5))}var Ho=(function(){function t(e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=0),r===void 0&&(r=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=e,this.y=n,this.width=r,this.height=i}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom},t})();function $h(t,e){return ur(t)?t.apply(void 0,_r([],Ae(e),!1)):t}var Zp=function(t,e){var n=function(i){return"".concat(e,"-").concat(i)},r=Object.fromEntries(Object.entries(t).map(function(i){var a=Ae(i,2),o=a[0],s=a[1],l=n(s);return[o,{name:l,class:".".concat(l),id:"#".concat(l),toString:function(){return l}}]}));return Object.assign(r,{prefix:n}),r},Yet=5,aRe=function(t,e,n,r){n===void 0&&(n=0),r===void 0&&(r=Yet),Object.entries(e).forEach(function(i){var a=Ae(i,2),o=a[0],s=a[1],l=t;Object.prototype.hasOwnProperty.call(e,o)&&(s?xy(s)?(xy(t[o])||(l[o]={}),n<r?aRe(t[o],s,n+1,r):l[o]=e[o]):Us(s)?(l[o]=[],l[o]=l[o].concat(s)):l[o]=s:l[o]=s)})},Il=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)aRe(t,e[r]);return t},Xet=function(t){return t!==void 0&&t!=null&&!Number.isNaN(t)},CI,oRe=mY(function(t,e){var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return CI||(CI=Rn.offscreenCanvasCreator.getOrCreateContext(void 0)),CI.font=[a,o,i,"".concat(n,"px"),r].join(" "),CI.measureText(t).width},function(t,e){return[t,Object.values(e||sRe(t)).join()].join("")},4096),sRe=function(t){var e=t.style.fontFamily||"sans-serif",n=t.style.fontWeight||"normal",r=t.style.fontStyle||"normal",i=t.style.fontVariant,a=t.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:e,fontWeight:n,fontStyle:r,fontVariant:i}};function lRe(t){return t.nodeName==="text"?t:t.nodeName==="g"&&t.children.length===1&&t.children[0].nodeName==="text"?t.children[0]:null}function cRe(t,e){var n=lRe(t);n&&n.attr(e)}function oX(t,e,n){n===void 0&&(n="..."),cRe(t,{wordWrap:!0,wordWrapWidth:e,maxLines:1,textOverflow:n})}function qet(t,e,n,r){n===void 0&&(n=2),r===void 0&&(r="top"),cRe(t,{wordWrap:!0,wordWrapWidth:e,maxLines:n,textBaseline:r})}function uRe(t){var e=t.canvas,n=t.touches,r=t.offsetX,i=t.offsetY;if(e){var a=e.x,o=e.y;return[a,o]}if(n){var s=n[0],l=s.clientX,c=s.clientY;return[l,c]}return r&&i?[r,i]:[0,0]}function Goe(t){var e=t.nativeEvent,n=t.touches,r=t.clientX,i=t.clientY;if(e)return[e.clientX,e.clientY];if(n){var a=n[0],o=a.clientX,s=a.clientY;return[o,s]}return typeof r=="number"&&typeof i=="number"?[r,i]:[0,0]}function Ry(t){return typeof t=="function"?t():$i(t)||Ln(t)?new WJ({style:{text:String(t)}}):t}function Zet(t,e){return typeof t=="function"?t():$i(t)||Ln(t)?new qx({style:Ot(Ot({pointerEvents:"auto"},e),{innerHTML:t})}):t}function Ket(t,e){return t.reduce(function(n,r){return(n[r[e]]=n[r[e]]||[]).push(r),n},{})}function Zf(t,e,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),t?n(e):(r&&i(e),null)}function Au(t,e,n,r,i){return r===void 0&&(r=!0),i===void 0&&(i=!1),r&&t===e||i&&t===n?!0:t>e&&t<n}var Qet=function(t,e){return function(n){return t*(1-n)+e*n}};function Jet(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0;return function(i){var a=new Array(r),o=new Array(n),s=0;for(s=0;s<r;++s)a[s]=VJ(t[s],e[s]);for(;s<n;++s)o[s]=e[s];for(s=0;s<r;++s)o[s]=a[s](i);return o}}function ett(t,e){t===void 0&&(t={}),e===void 0&&(e={});var n={},r={};return Object.entries(e).forEach(function(i){var a=Ae(i,2),o=a[0],s=a[1];o in t?n[o]=VJ(t[o],s):r[o]=s}),function(i){return Object.entries(n).forEach(function(a){var o=Ae(a,2),s=o[0],l=o[1];return r[s]=l(i)}),r}}function VJ(t,e){return typeof t=="number"&&typeof e=="number"?Qet(t,e):Array.isArray(t)&&Array.isArray(e)?Jet(t,e):typeof t=="object"&&typeof e=="object"?ett(t,e):(function(n){return t})}function ttt(t,e,n,r){if(!r)return t.attr("__keyframe_data__",n),null;var i=r.duration,a=i===void 0?0:i,o=VJ(e,n),s=Math.ceil(+a/16),l=new Array(s).fill(0).map(function(c,u,f){return{__keyframe_data__:o(u/(f.length-1))}});return t.animate(l,Ot({fill:"both"},r))}function Woe(t){for(var e=1/0,n=1/0,r=-1/0,i=-1/0,a=0;a<t.length;a++){var o=t[a],s=o.x,l=o.y,c=o.width,u=o.height,f=Ae([s+c,l+u],2),h=f[0],d=f[1];s<e&&(e=s),l<n&&(n=l),h>r&&(r=h),d>i&&(i=d)}return new Ho(e,n,r-e,i-n)}var ntt=function(t,e,n){var r=t.width,i=t.height,a=n.flexDirection,o=a===void 0?"row":a;n.flexWrap;var s=n.justifyContent,l=s===void 0?"flex-start":s;n.alignContent;var c=n.alignItems,u=c===void 0?"flex-start":c,f=o==="row",h=o==="row"||o==="column",d=f?h?[1,0]:[-1,0]:h?[0,1]:[0,-1],p=Ae([0,0],2),g=p[0],v=p[1],y=e.map(function(C){var D,L=C.width,B=C.height,I=Ae([g,v],2),U=I[0],$=I[1];return D=Ae([g+L*d[0],v+B*d[1]],2),g=D[0],v=D[1],new Ho(U,$,L,B)}),_=Woe(y),E={"flex-start":0,"flex-end":f?r-_.width:i-_.height,center:f?(r-_.width)/2:(i-_.height)/2},x=y.map(function(C){var D=C.x,L=C.y,B=Ho.fromRect(C);return B.x=f?D+E[l]:D,B.y=f?L:L+E[l],B});Woe(x);var T=function(C){var D=Ae(f?["height",i]:["width",r],2),L=D[0],B=D[1];switch(u){case"flex-start":return 0;case"flex-end":return B-C[L];case"center":return B/2-C[L]/2;default:return 0}},S=x.map(function(C){var D=C.x,L=C.y,B=Ho.fromRect(C);return B.x=f?D:D+T(B),B.y=f?L+T(B):L,B}),w=S.map(function(C){var D,L,B=Ho.fromRect(C);return B.x+=(D=t.x)!==null&&D!==void 0?D:0,B.y+=(L=t.y)!==null&&L!==void 0?L:0,B});return w},rtt=function(t,e,n){return[]};const itt=(function(t,e,n){if(e.length===0)return[];var r={flex:ntt,grid:rtt},i=n.display in r?r[n.display]:null;return i?.call(null,t,e,n)||[]});function ny(t,e){return[t[0]*e,t[1]*e]}function cC(t,e){return[t[0]+e[0],t[1]+e[1]]}function I7(t,e){return[t[0]-e[0],t[1]-e[1]]}function yE(t,e){return[Math.min(t[0],e[0]),Math.min(t[1],e[1])]}function _E(t,e){return[Math.max(t[0],e[0]),Math.max(t[1],e[1])]}function VR(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function fRe(t){if(t[0]===0&&t[1]===0)return[0,0];var e=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/e,t[1]/e]}function att(t,e){return e?[t[1],-t[0]]:[-t[1],t[0]]}function sX(t,e){return+t.toPrecision(e)}function lX(t,e){var n={},r=Array.isArray(e)?e:[e];for(var i in t)r.includes(i)||(n[i]=t[i]);return n}function ott(t,e,n,r){var i,a=[],o=!!r,s,l,c=[1/0,1/0],u=[-1/0,-1/0],f,h,d;if(o){i=Ae(r,2),c=i[0],u=i[1];for(var p=0,g=t.length;p<g;p+=1){var v=t[p];c=yE(c,v),u=_E(u,v)}}for(var p=0,y=t.length;p<y;p+=1){var v=t[p];if(p===0)d=v;else if(p===y-1)h=v,a.push(d),a.push(h);else{var _=[p?p-1:y-1,p-1][1];s=t[_],l=t[p+1];var E=[0,0];E=I7(l,s),E=ny(E,e);var x=VR(v,s),T=VR(v,l),S=x+T;S!==0&&(x/=S,T/=S);var w=ny(E,-x),C=ny(E,T);h=cC(v,w),f=cC(v,C),f=yE(f,_E(l,v)),f=_E(f,yE(l,v)),w=I7(f,v),w=ny(w,-x/T),h=cC(v,w),h=yE(h,_E(s,v)),h=_E(h,yE(s,v)),C=I7(v,h),C=ny(C,T/x),f=cC(v,C),o&&(h=_E(h,c),h=yE(h,u),f=_E(f,c),f=yE(f,u)),a.push(d),a.push(h),d=f}}return a}function stt(t,e,n){n===void 0&&(n=[[0,0],[1,1]]);for(var r=!1,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=ott(i,.4,r,n),l=i.length,c=[],u,f,h,a=0;a<l-1;a+=1)u=s[a*2],f=s[a*2+1],h=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],h[0],h[1]]);return c}var ltt=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function ctt(t){return ltt.includes(t)}function Voe(t){var e={};for(var n in t)ctt(n)&&(e[n]=t[n]);return e}function utt(t,e){if(t.length<=e)return t;for(var n=Math.floor(t.length/e),r=[],i=0;i<t.length;i+=n)r.push(t[i]);return r}function YJ(t,e,n){var r=t.getBBox(),i=r.width,a=r.height,o=e/Math.max(i,a);return t.style.transform="scale(".concat(o,")"),o}function ftt(t,e){var n=new Map;return t.forEach(function(r){var i=e(r);n.has(i)||n.set(i,[]),n.get(i).push(r)}),n}function htt(t){throw new Error(t)}var dtt=(function(){function t(i,a,o,s,l,c,u){i===void 0&&(i=null),a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=[null,null,null,null,null]),c===void 0&&(c=[]),u===void 0&&(u=[]),e.add(this),this._elements=Array.from(i),this._data=a,this._parent=o,this._document=s,this._enter=l[0],this._update=l[1],this._exit=l[2],this._merge=l[3],this._split=l[4],this._transitions=c,this._facetElements=u}t.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(a,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new n(this._elements,null,this._parent,this._document,void 0,void 0,a)},t.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new n([a],null,a,this._document)},t.prototype.append=function(i){var a=this,o=typeof i=="function"?i:function(){return a.createElement(i)},s=[];if(this._data!==null){for(var l=0;l<this._data.length;l++){var c=this._data[l],u=Ae(Array.isArray(c)?c:[c,null],2),f=u[0],h=u[1],d=o(f,l);d.__data__=f,h!==null&&(d.__fromElements__=h),this._parent.appendChild(d),s.push(d)}return new n(s,null,this._parent,this._document)}for(var l=0;l<this._elements.length;l++){var p=this._elements[l],f=p.__data__,d=o(f,l);p.appendChild(d),s.push(d)}return new n(s,null,s[0],this._document)},t.prototype.maybeAppend=function(i,a){var o=O8(this,e,"m",r).call(this,i[0]==="#"?i:"#".concat(i),a);return o.attr("id",i),o},t.prototype.maybeAppendByClassName=function(i,a){var o=i.toString(),s=O8(this,e,"m",r).call(this,o[0]==="."?o:".".concat(o),a);return s.attr("className",o),s},t.prototype.maybeAppendByName=function(i,a){var o=O8(this,e,"m",r).call(this,'[name="'.concat(i,'"]'),a);return o.attr("name",i),o},t.prototype.data=function(i,a,o){var s,l;a===void 0&&(a=function(L){return L}),o===void 0&&(o=function(){return null});for(var c=[],u=[],f=new Set(this._elements),h=[],d=new Set,p=new Map(this._elements.map(function(L,B){return[a(L.__data__,B),L]})),g=new Map(this._facetElements.map(function(L,B){return[a(L.__data__,B),L]})),v=ftt(this._elements,function(L){return o(L.__data__)}),y=0;y<i.length;y++){var _=i[y],E=a(_,y),x=o(_,y);if(p.has(E)){var T=p.get(E);T.__data__=_,T.__facet__=!1,u.push(T),f.delete(T),p.delete(E)}else if(g.has(E)){var T=g.get(E);T.__data__=_,T.__facet__=!0,u.push(T),g.delete(E)}else if(v.has(E)){var S=v.get(E);h.push([_,S]);try{for(var w=(s=void 0,$p(S)),C=w.next();!C.done;C=w.next()){var T=C.value;f.delete(T)}}catch(L){s={error:L}}finally{try{C&&!C.done&&(l=w.return)&&l.call(w)}finally{if(s)throw s.error}}v.delete(E)}else if(p.has(x)){var T=p.get(x);T.__toData__?T.__toData__.push(_):T.__toData__=[_],d.add(T),f.delete(T)}else c.push(_)}var D=[new n([],c,this._parent,this._document),new n(u,null,this._parent,this._document),new n(f,null,this._parent,this._document),new n([],h,this._parent,this._document),new n(d,null,this._parent,this._document)];return new n(this._elements,null,this._parent,this._document,D)},t.prototype.merge=function(i){var a=_r(_r([],Ae(this._elements),!1),Ae(i._elements),!1),o=_r(_r([],Ae(this._transitions),!1),Ae(i._transitions),!1);return new n(a,null,this._parent,this._document,void 0,o)},t.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=n.registry[i];return a?new a:htt("Unknown node type: ".concat(i))},t.prototype.join=function(i,a,o,s,l){i===void 0&&(i=function(p){return p}),a===void 0&&(a=function(p){return p}),o===void 0&&(o=function(p){return p.remove()}),s===void 0&&(s=function(p){return p}),l===void 0&&(l=function(p){return p.remove()});var c=i(this._enter),u=a(this._update),f=o(this._exit),h=s(this._merge),d=l(this._split);return u.merge(c).merge(f).merge(h).merge(d)},t.prototype.remove=function(){for(var i=function(s){var l=a._elements[s],c=a._transitions[s];c?c.then(function(){return l.remove()}):l.remove()},a=this,o=0;o<this._elements.length;o++)i(o);return new n([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var o=this._elements[a],s=o.__data__;i.call(o,s,a)}return this},t.prototype.attr=function(i,a){var o=typeof a!="function"?function(){return a}:a;return this.each(function(s,l){a!==void 0&&(this[i]=o.call(this,s,l))})},t.prototype.style=function(i,a,o){o===void 0&&(o=!0);var s=typeof a!="function"||!o?function(){return a}:a;return this.each(function(l,c){a!==void 0&&(this.style[i]=s.call(this,l,c))})},t.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(o,s){var l=this;Object.entries(i).forEach(function(c){var u=Ae(c,2),f=u[0],h=u[1],d=typeof h!="function"||!a?function(){return h}:h;h!==void 0&&l.attr(f,d.call(l,o,s))})})},t.prototype.update=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.transition=function(i){this._transitions;var a=new Array(this._elements.length);return this.each(function(o,s){a[s]=i.call(this,o,s)}),this._transitions=y9e(a),this},t.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},t.prototype.call=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return i.call.apply(i,_r([this._parent,this],Ae(a),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},t.prototype.parent=function(){return this._parent};var e,n,r;return n=t,e=new WeakSet,r=function(a,o){var s=this._elements[0],l=s.querySelector(a);if(l)return new n([l],null,this._parent,this._document);var c=typeof o=="string"?this.createElement(o):o();return s.appendChild(c),new n([c],null,this._parent,this._document)},t.registry={g:yc,rect:Nu,circle:Wm,path:Ad,text:WJ,ellipse:BP,image:FP,line:Ex,polygon:Zx,polyline:S4,html:qx},t})();function br(t){return new dtt([t],null,t,t.ownerDocument)}function ptt(t,e,n){return t.querySelector(e)?br(t).select(e):br(t).append(n)}function Nl(t){if(Ln(t))return[t,t,t,t];if(Us(t)){var e=t.length;if(e===1)return[t[0],t[0],t[0],t[0]];if(e===2)return[t[0],t[1],t[0],t[1]];if(e===3)return[t[0],t[1],t[2],t[1]];if(e===4)return t}return[0,0,0,0]}function Yoe(t){var e=t.getLocalBounds(),n=e.min,r=e.max,i=Ae([n,r],2),a=Ae(i[0],2),o=a[0],s=a[1],l=Ae(i[1],2),c=l[0],u=l[1];return{x:o,y:s,width:c-o,height:u-s,left:o,bottom:u,top:s,right:c}}function gtt(t,e){var n=Ae(t,2),r=n[0],i=n[1],a=Ae(e,2),o=a[0],s=a[1];return r!==o&&i===s}function vtt(t,e){var n,r,i=e.attributes;try{for(var a=$p(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=Ae(o.value,2),l=s[0],c=s[1];l!=="id"&&l!=="className"&&t.attr(l,c)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}function XJ(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function mtt(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function ytt(t,e){return"".concat(e).concat(XJ(t))}function Xoe(t,e,n){var r;n===void 0&&(n=!0);var i=e||((r=t.match(/^([a-z][a-z0-9]+)/))===null||r===void 0?void 0:r[0])||"",a=t.replace(new RegExp("^(".concat(i,")")),"");return n?mtt(a):a}function _tt(t,e){Object.entries(e).forEach(function(n){var r=Ae(n,2),i=r[0],a=r[1];_r([t],Ae(t.querySelectorAll(i)),!1).filter(function(o){return o.matches(i)}).forEach(function(o){if(o){var s=o;s.style.cssText+=Object.entries(a).reduce(function(l,c){return"".concat(l).concat(c.join(":"),";")},"")}})})}var RI=function(t,e){if(!t?.startsWith(e))return!1;var n=t[e.length];return n>="A"&&n<="Z"};function ii(t,e,n){n===void 0&&(n=!1);var r={};return Object.entries(t).forEach(function(i){var a=Ae(i,2),o=a[0],s=a[1];if(!(o==="className"||o==="class")){if(RI(o,"show")&&RI(Xoe(o,"show"),e)!==n)o===ytt(e,"show")?r[o]=s:r[o.replace(new RegExp(XJ(e)),"")]=s;else if(!RI(o,"show")&&RI(o,e)!==n){var l=Xoe(o,e);l==="filter"&&typeof s=="function"||(r[l]=s)}}}),r}function Sm(t,e){return Object.entries(t).reduce(function(n,r){var i=Ae(r,2),a=i[0],o=i[1];return a.startsWith("show")?n["show".concat(e).concat(a.slice(4))]=o:n["".concat(e).concat(XJ(a))]=o,n},{})}function My(t,e){e===void 0&&(e=["x","y","class","className"]);var n=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],r={},i={};return Object.entries(t).forEach(function(a){var o=Ae(a,2),s=o[0],l=o[1];e.includes(s)||(n.indexOf(s)!==-1?i[s]=l:r[s]=l)}),[r,i]}function xh(t,e){var n={YYYY:t.getFullYear(),MM:t.getMonth()+1,DD:t.getDate(),HH:t.getHours(),mm:t.getMinutes(),ss:t.getSeconds()},r=e;return Object.keys(n).forEach(function(i){var a=n[i];r=r.replace(i,i==="YYYY"?"".concat(a):"".concat(a).padStart(2,"0"))}),r}function btt(t,e,n){var r=t.getBBox(),i=r.width,a=r.height,o=Ae([e,n].map(function(c,u){var f;return c.includes("%")?parseFloat(((f=c.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||f===void 0?void 0:f[0])||"0")/100*(u===0?i:a):c}),2),s=o[0],l=o[1];return[s,l]}function hRe(t,e){if(e)try{var n=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,r=e.replace(n,function(i,a,o){return"translate(".concat(btt(t,a,o),")")});t.attr("transform",r)}catch{}}function Ett(t){var e;return((e=t[0])===null||e===void 0?void 0:e.map(function(n,r){return t.map(function(i){return i[r]})}))||[]}var qoe=function(t,e){if(e==null){t.innerHTML="";return}t.replaceChildren?Array.isArray(e)?t.replaceChildren.apply(t,_r([],Ae(e),!1)):t.replaceChildren(e):(t.innerHTML="",Array.isArray(e)?e.forEach(function(n){return t.appendChild(n)}):t.appendChild(e))};function w4(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(e){return e[0]}):t.length>2?[t[0]]:t.split("")}var xtt=function(t){var e=new DOMParser,n=e.parseFromString(t,"text/html"),r=n.body.firstElementChild;if(console.log(r?.getClientRects(),11),!r)return 0;var i=r.getAttribute("style")||"",a=Object.fromEntries(i.split(";").map(function(v){return v.trim()}).filter(function(v){return v.includes(":")}).map(function(v){var y=Ae(v.split(":").map(function(x){return x.trim()}),2),_=y[0],E=y[1];return[_.toLowerCase(),E]})),o=function(v){if(!v)return 0;var y=v.match(/([\d.]+)px/);return y?parseFloat(y[1]):0};if(a.height)return o(a.height);var s=o(a["font-size"])||16,l=a["line-height"],c;!l||l==="normal"?c=1.2*s:l.endsWith("px")?c=o(l):/^[\d.]+$/.test(l)?c=parseFloat(l)*s:c=s;var u=o(a["padding-top"]),f=o(a["padding-bottom"]);if(a.padding){var h=a.padding.split(/\s+/).map(o);h.length===1||h.length===2?(u=h[0],f=h[0]):(h.length===3||h.length===4)&&(u=h[0],f=h[2])}var d=o(a["border-top-width"]),p=o(a["border-bottom-width"]);if(a.border){var g=a.border.match(/([\d.]+)px/);g&&(d=parseFloat(g[1]),p=parseFloat(g[1]))}if(a["border-width"]){var h=a["border-width"].split(/\s+/).map(o);h.length===1||h.length===2?(d=h[0],p=h[0]):(h.length===3||h.length===4)&&(d=h[0],p=h[2])}return c+u+f+d+p};function Stt(){A4(this,this.attributes.visibility!=="hidden")}var Es=(function(t){Cr(e,t);function e(n,r){r===void 0&&(r={});var i=t.call(this,Il({},{style:r},n))||this;return i.initialized=!1,i._defaultOptions=r,i}return Object.defineProperty(e.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=rRe(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},e.prototype.disconnectedCallback=function(){var n;(n=this._offscreen)===null||n===void 0||n.destroy()},e.prototype.attributeChangedCallback=function(n){n==="visibility"&&Stt.call(this)},e.prototype.update=function(n,r){var i;return this.attr(Il({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.bindEvents=function(n,r){},e.prototype.getSubShapeStyle=function(n){n.x,n.y,n.transform,n.transformOrigin,n.class,n.className,n.zIndex;var r=yo(n,["x","y","transform","transformOrigin","class","className","zIndex"]);return r},e})(zJ),dRe=function(t,e,n){return[["M",t-n,e],["A",n,n,0,1,0,t+n,e],["A",n,n,0,1,0,t-n,e],["Z"]]},Ttt=dRe,Att=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},wtt=function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},Ott=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["Z"]]},Ctt=function(t,e,n){var r=n*Math.sin(.3333333333333333*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]},Rtt=function(t,e,n){var r=n/2*Math.sqrt(3);return[["M",t,e-n],["L",t+r,e-n/2],["L",t+r,e+n/2],["L",t,e+n],["L",t-r,e+n/2],["L",t-r,e-n/2],["Z"]]},Mtt=function(t,e,n){var r=n-1.5;return[["M",t-n,e-r],["L",t+n,e+r],["L",t+n,e-r],["L",t-n,e+r],["Z"]]},pRe=function(t,e,n){return[["M",t,e+n],["L",t,e-n]]},Ptt=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e+n],["M",t+n,e-n],["L",t-n,e+n]]},Ntt=function(t,e,n){return[["M",t-n/2,e-n],["L",t+n/2,e-n],["M",t,e-n],["L",t,e+n],["M",t-n/2,e+n],["L",t+n/2,e+n]]},Itt=function(t,e,n){return[["M",t-n,e],["L",t+n,e],["M",t,e-n],["L",t,e+n]]},Ltt=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},gRe=function(t,e,n){return[["M",t-n,e],["L",t+n,e]]},ktt=gRe,Dtt=function(t,e,n){return[["M",t-n,e],["A",n/2,n/2,0,1,1,t,e],["A",n/2,n/2,0,1,0,t+n,e]]},Btt=function(t,e,n){return[["M",t-n-1,e-2.5],["L",t,e-2.5],["L",t,e+2.5],["L",t+n+1,e+2.5]]},Ftt=function(t,e,n){return[["M",t-n-1,e+2.5],["L",t,e+2.5],["L",t,e-2.5],["L",t+n+1,e-2.5]]},Utt=function(t,e,n){return[["M",t-(n+1),e+2.5],["L",t-n/2,e+2.5],["L",t-n/2,e-2.5],["L",t+n/2,e-2.5],["L",t+n/2,e+2.5],["L",t+n+1,e+2.5]]};function jtt(t,e){return[["M",t-5,e+2.5],["L",t-5,e],["L",t,e],["L",t,e-3],["L",t,e+3],["L",t+6.5,e+3]]}var ztt=function(t,e,n){return[["M",t-n,e-n],["L",t+n,e],["L",t-n,e+n],["Z"]]},$tt=function(t,e,n){var r=n,i=n*.2,a=n*.7;return[["M",t-r,e],["A",r,r,0,1,0,t+r,e],["A",r,r,0,1,0,t-r,e],["Z"],["M",t-a,e],["L",t-i,e],["M",t+i,e],["L",t+a,e],["M",t,e-a],["L",t,e-i],["M",t,e+i],["L",t,e+a]]};function Htt(t){var e="default";if(dl(t)&&t instanceof Image)e="image";else if(ur(t))e="symbol";else if($i(t)){var n=new RegExp("data:(image|text)");t.match(n)?e="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?e="url":e="symbol"}return e}function Gtt(t){var e=Htt(t);return["base64","url","image"].includes(e)?"image":t&&e==="symbol"?"path":null}var ja=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o,l=this.getSubShapeStyle(n),c=l.symbol,u=l.size,f=u===void 0?16:u,h=yo(l,["symbol","size"]),d=Gtt(c);Zf(!!d,br(r),function(p){p.maybeAppendByClassName("marker",d).attr("className","marker ".concat(d,"-marker")).call(function(g){if(d==="image"){var v=f*2;g.styles({img:c,width:v,height:v,x:a-f,y:s-f})}else{var v=f/2,y=ur(c)?c:e.getSymbol(c);g.styles(Ot({d:y?.(a,s,v)},h))}})})},e.MARKER_SYMBOL_MAP=new Map,e.registerSymbol=function(n,r){e.MARKER_SYMBOL_MAP.set(n,r)},e.getSymbol=function(n){return e.MARKER_SYMBOL_MAP.get(n)},e.getSymbols=function(){return Array.from(e.MARKER_SYMBOL_MAP.keys())},e})(Es);ja.registerSymbol("cross",Ptt);ja.registerSymbol("hyphen",Ltt);ja.registerSymbol("line",pRe);ja.registerSymbol("plus",Itt);ja.registerSymbol("tick",Ntt);ja.registerSymbol("circle",dRe);ja.registerSymbol("point",Ttt);ja.registerSymbol("bowtie",Mtt);ja.registerSymbol("hexagon",Rtt);ja.registerSymbol("square",Att);ja.registerSymbol("diamond",wtt);ja.registerSymbol("triangle",Ott);ja.registerSymbol("triangle-down",Ctt);ja.registerSymbol("line",pRe);ja.registerSymbol("dot",gRe);ja.registerSymbol("dash",ktt);ja.registerSymbol("smooth",Dtt);ja.registerSymbol("hv",Btt);ja.registerSymbol("vh",Ftt);ja.registerSymbol("hvh",Utt);ja.registerSymbol("vhv",jtt);ja.registerSymbol("focus",$tt);function UD(t,...e){return e.reduce((n,r)=>i=>n(r(i)),t)}function cX(t,e){return e-t?n=>(n-t)/(e-t):n=>.5}function Wtt(t,e){const n=e<t?e:t,r=t>e?t:e;return i=>Math.min(Math.max(n,i),r)}function Vtt(t,e,n,r,i){let a=n,o=r||t.length;const s=(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>e?o=l:a=l+1}return a}const Zoe=Math.sqrt(50),Koe=Math.sqrt(10),Qoe=Math.sqrt(2);function ok(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/10**i;return i>=0?(a>=Zoe?10:a>=Koe?5:a>=Qoe?2:1)*10**i:-(10**-i)/(a>=Zoe?10:a>=Koe?5:a>=Qoe?2:1)}const Ytt=(t,e,n=5)=>{const r=[t,e];let i=0,a=r.length-1,o=r[i],s=r[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=ok(o,s,n),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=ok(o,s,n)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=ok(o,s,n)),l>0?(r[i]=Math.floor(o/l)*l,r[a]=Math.ceil(s/l)*l):l<0&&(r[i]=Math.ceil(o*l)/l,r[a]=Math.floor(s*l)/l),r};function Joe(t){return!mr(t)&&!WAe(t)&&!Number.isNaN(t)}function L7(t,e,n){let r=n;return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Xtt(t){const e=t[0]/360,n=t[1]/100,r=t[2]/100,i=t[3];if(n===0)return[r*255,r*255,r*255,i];const a=r<.5?r*(1+n):r+n-r*n,o=2*r-a,s=L7(o,a,e+1/3),l=L7(o,a,e),c=L7(o,a,e-1/3);return[s*255,l*255,c*255,i]}function ese(t){const e=Owe.get(t);if(!e)return null;const{model:n,value:r}=e;return n==="rgb"?r:n==="hsl"?Xtt(r):null}const jD=(t,e)=>n=>t*(1-n)+e*n,qtt=(t,e)=>{const n=ese(t),r=ese(e);return n===null||r===null?n?()=>t:()=>e:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=n[u],h=r[u];a[u]=f*(1-i)+h*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},Ztt=(t,e)=>typeof t=="number"&&typeof e=="number"?jD(t,e):typeof t=="string"&&typeof e=="string"?qtt(t,e):()=>t,Ktt=(t,e)=>{const n=jD(t,e);return r=>Math.round(n(r))};function tse({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Qtt({map:t,initKey:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Jtt({map:t,initKey:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function ent(t){return typeof t=="object"?t.valueOf():t}class nse extends Map{constructor(e){if(super(),this.map=new Map,this.initKey=ent,e!==null)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(tse({map:this.map,initKey:this.initKey},e))}has(e){return super.has(tse({map:this.map,initKey:this.initKey},e))}set(e,n){return super.set(Qtt({map:this.map,initKey:this.initKey},e),n)}delete(e){return super.delete(Jtt({map:this.map,initKey:this.initKey},e))}}let vRe=class{constructor(e){this.options=Nt({},this.getDefaultOptions()),this.update(e)}getOptions(){return this.options}update(e={}){this.options=Nt({},this.options,e),this.rescale(e)}rescale(e){}};const O4=Symbol("defaultUnknown");function rse(t,e,n){for(let r=0;r<e.length;r+=1)t.has(e[r])||t.set(n(e[r]),r)}function ise(t){const{value:e,from:n,to:r,mapper:i,notFoundReturn:a}=t;let o=i.get(e);if(o===void 0){if(a!==O4)return a;o=n.push(e)-1,i.set(e,o)}return r[o%r.length]}function ase(t){return t instanceof Date?e=>`${e}`:typeof t=="object"?e=>JSON.stringify(e):e=>e}let tnt=class mRe extends vRe{getDefaultOptions(){return{domain:[],range:[],unknown:O4}}constructor(e){super(e)}map(e){return this.domainIndexMap.size===0&&rse(this.domainIndexMap,this.getDomain(),this.domainKey),ise({value:this.domainKey(e),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(e){return this.rangeIndexMap.size===0&&rse(this.rangeIndexMap,this.getRange(),this.rangeKey),ise({value:this.rangeKey(e),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(e){const[n]=this.options.domain,[r]=this.options.range;if(this.domainKey=ase(n),this.rangeKey=ase(r),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!e||e.range)&&this.rangeIndexMap.clear(),(!e||e.domain||e.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new mRe(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:e,compare:n}=this.options;return this.sortedDomain=n?[...e].sort(n):e,this.sortedDomain}};function nnt(t){const e=Math.min(...t);return t.map(n=>n/e)}function rnt(t,e){const n=t.length,r=e-n;return r>0?[...t,...new Array(r).fill(1)]:r<0?t.slice(0,e):t}function int(t){return Math.round(t*1e12)/1e12}function ant(t){const{domain:e,range:n,paddingOuter:r,paddingInner:i,flex:a,round:o,align:s}=t,l=e.length,c=rnt(a,l),[u,f]=n,h=f-u,d=2/l*r+1-1/l*i,p=h/d,g=p*i/l,v=p-l*g,y=nnt(c),_=y.reduce((I,U)=>I+U),E=v/_,x=new nse(e.map((I,U)=>{const $=y[U]*E;return[I,o?Math.floor($):$]})),T=new nse(e.map((I,U)=>{const X=y[U]*E+g;return[I,o?Math.floor(X):X]})),S=Array.from(T.values()).reduce((I,U)=>I+U),C=(h-(S-S/l*i))*s,D=u+C;let L=o?Math.round(D):D;const B=new Array(l);for(let I=0;I<l;I+=1){B[I]=int(L);const U=e[I];L+=T.get(U)}return{valueBandWidth:x,valueStep:T,adjustedRange:B}}function ont(t){var e;const{domain:n}=t,r=n.length;if(r===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((e=t.flex)===null||e===void 0)&&e.length))return ant(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,h=a[0];const p=a[1]-h,g=o*2,v=r-s;u=p/Math.max(1,g+v),l&&(u=Math.floor(u)),h+=(p-u*(r-s))*c,f=u*(1-s),l&&(h=Math.round(h),f=Math.round(f));const y=new Array(r).fill(0).map((_,E)=>h+E*u);return{valueStep:u,valueBandWidth:f,adjustedRange:y}}let yRe=class _Re extends tnt{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:O4,flex:[]}}constructor(e){super(e)}clone(){return new _Re(this.options)}getStep(e){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:e===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(e)}getBandWidth(e){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:e===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(e)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:e,paddingInner:n}=this.options;return e>0?e:n}getPaddingOuter(){const{padding:e,paddingOuter:n}=this.options;return e>0?e:n}rescale(){super.rescale();const{align:e,domain:n,range:r,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=ont({align:e,range:r,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:n});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}};const snt=(t,e,n)=>{let r,i,a=t,o=e;if(a===o&&n>0)return[a];let s=ok(a,o,n);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(r=Math.ceil(o-a+1));for(let l=0;l<r;l+=1)i[l]=(a+l)/s}return i},lnt=(t,e,n)=>{const[r,i]=t,[a,o]=e;let s,l;return r<i?(s=cX(r,i),l=n(a,o)):(s=cX(i,r),l=n(o,a)),UD(l,s)},cnt=(t,e,n)=>{const r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=t[0]>t[r],s=o?[...t].reverse():t,l=o?[...e].reverse():e;for(let c=0;c<r;c+=1)i[c]=cX(s[c],s[c+1]),a[c]=n(l[c],l[c+1]);return c=>{const u=Vtt(t,c,1,r)-1,f=i[u],h=a[u];return UD(h,f)(c)}},ose=(t,e,n,r)=>(Math.min(t.length,e.length)>2?cnt:lnt)(t,e,r?Ktt:n);let unt=class extends vRe{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:jD,tickCount:5}}map(e){return Joe(e)?this.output(e):this.options.unknown}invert(e){return Joe(e)?this.input(e):this.options.unknown}nice(){if(!this.options.nice)return;const[e,n,r,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(e,n,r,...i)}getTicks(){const{tickMethod:e}=this.options,[n,r,i,...a]=this.getTickMethodOptions();return e(n,r,i,...a)}getTickMethodOptions(){const{domain:e,tickCount:n}=this.options,r=e[0],i=e[e.length-1];return[r,i,n]}chooseNice(){return Ytt}rescale(){this.nice();const[e,n]=this.chooseTransforms();this.composeOutput(e,this.chooseClamp(e)),this.composeInput(e,n,this.chooseClamp(n))}chooseClamp(e){const{clamp:n,range:r}=this.options,i=this.options.domain.map(e),a=Math.min(i.length,r.length);return n?Wtt(i[0],i[a-1]):jm}composeOutput(e,n){const{domain:r,range:i,round:a,interpolate:o}=this.options,s=ose(r.map(e),i,o,a);this.output=UD(s,n,e)}composeInput(e,n,r){const{domain:i,range:a}=this.options,o=ose(a,i.map(e),jD);this.input=UD(n,r,o)}},Jc=class bRe extends unt{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:Ztt,tickMethod:snt,tickCount:5}}chooseTransforms(){return[jm,jm]}clone(){return new bRe(this.options)}},fnt=class ERe extends yRe{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:O4,paddingInner:1,paddingOuter:0}}constructor(e){super(e)}getPaddingInner(){return 1}clone(){return new ERe(this.options)}update(e){super.update(e)}getPaddingOuter(){return this.options.padding}};var hnt=(function(t){Cr(e,t);function e(n){var r=this,i=n.style,a=yo(n,["style"]);return r=t.call(this,Nt({},{type:"column"},Ot({style:i},a)))||this,r.columnsGroup=new yc({name:"columns"}),r.appendChild(r.columnsGroup),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.columns,i=n.x,a=n.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),br(this.columnsGroup).selectAll(".column").data(r.flat()).join(function(o){return o.append("rect").attr("className","column").each(function(s){this.attr(s)})},function(o){return o.each(function(s){this.attr(s)})},function(o){return o.remove()})},e.prototype.update=function(n){this.attr(Il({},this.attributes,n)),this.render()},e.prototype.clear=function(){this.removeChildren()},e})(bs),dnt=(function(t){Cr(e,t);function e(n){var r=this,i=n.style,a=yo(n,["style"]);return r=t.call(this,Nt({},{type:"lines"},Ot({style:i},a)))||this,r.linesGroup=r.appendChild(new yc),r.areasGroup=r.appendChild(new yc),r.render(),r}return e.prototype.render=function(){var n=this.attributes,r=n.lines,i=n.areas,a=n.x,o=n.y;this.style.transform="translate(".concat(a,", ").concat(o,")"),r&&this.renderLines(r),i&&this.renderAreas(i)},e.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},e.prototype.update=function(n){this.attr(Il({},this.attributes,n)),this.render()},e.prototype.renderLines=function(n){br(this.linesGroup).selectAll(".line").data(n).join(function(r){return r.append("path").attr("className","line").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.attr(i)})},function(r){return r.remove()})},e.prototype.renderAreas=function(n){br(this.linesGroup).selectAll(".area").data(n).join(function(r){return r.append("path").attr("className","area").each(function(i){this.attr(i)})},function(r){return r.each(function(i){this.style(i)})},function(r){return r.remove()})},e})(bs);function pnt(t,e){var n,r=e.x,i=e.y,a=Ae(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(n=Ae([o,s],2),s=n[0],o=n[1]),t.map(function(l){var c=l.map(function(u,f){return[r.map(f),ga(i.map(u),s,o)]});return c})}function YR(t,e){e===void 0&&(e=!1);var n=e?t.length-1:0,r=t.map(function(i,a){return _r([a===n?"M":"L"],Ae(i),!1)});return e?r.reverse():r}function zD(t,e){if(e===void 0&&(e=!1),t.length<=2)return YR(t);for(var n=[],r=t.length,i=0;i<r;i+=1){var a=e?t[r-i-1]:t[i];Fs(a,n.slice(-2))||n.push.apply(n,_r([],Ae(a),!1))}var o=stt(n);return e?o.unshift(_r(["M"],Ae(t[r-1]),!1)):o.unshift(_r(["M"],Ae(t[0]),!1)),o}function qJ(t,e,n){var r=$_(t);return r.push(["L",e,n],["L",0,n],["Z"]),r}function gnt(t,e,n,r){return t.map(function(i){return qJ(e?zD(i):YR(i),n,r)})}function vnt(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=YR(a),s=void 0;if(i===0)s=qJ(o,e,n);else{var l=t[i-1],c=YR(l,!0);c[0][0]="L",s=_r(_r(_r([],Ae(o),!1),Ae(c),!1),[["Z"]],!1)}r.push(s)}return r}function mnt(t,e,n){for(var r=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=zD(a),s=void 0;if(i===0)s=qJ(o,e,n);else{var l=t[i-1],c=zD(l,!0),u=a[0];c[0][0]="L",s=_r(_r(_r([],Ae(o),!1),Ae(c),!1),[_r(["M"],Ae(u),!1),["Z"]],!1)}r.push(s)}return r}function sse(t){return t.length===0?[0,0]:[kA(T9e(t,function(e){return kA(e)||0})),LA(S9e(t,function(e){return LA(e)||0}))]}function lse(t){for(var e=$_(t),n=e[0].length,r=Ae([Array(n).fill(0),Array(n).fill(0)],2),i=r[0],a=r[1],o=0;o<e.length;o+=1)for(var s=e[o],l=0;l<n;l+=1)s[l]>=0?(s[l]+=i[l],i[l]=s[l]):(s[l]+=a[l],a[l]=s[l]);return e}var ynt=(function(t){Cr(e,t);function e(n){return t.call(this,n,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(e.prototype,"rawData",{get:function(){var n=this.attributes.data;if(!n||n?.length===0)return[[]];var r=$_(n);return Ln(r[0])?[r]:r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.attributes.isStack?lse(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseline",{get:function(){var n=this.scales.y,r=Ae(n.getOptions().domain||[0,0],2),i=r[0],a=r[1];return a<0?n.map(a):n.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"containerShape",{get:function(){var n=this.attributes,r=n.width,i=n.height;return{width:r,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"linesStyle",{get:function(){var n=this,r=this.attributes,i=r.type,a=r.isStack,o=r.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var s=ii(this.attributes,"area"),l=ii(this.attributes,"line"),c=this.containerShape.width,u=this.data;if(u[0].length===0)return{lines:[],areas:[]};var f=this.scales,h=f.x,d=f.y,p=pnt(u,{x:h,y:d}),g=[];if(s){var v=this.baseline;a?g=o?mnt(p,c,v):vnt(p,c,v):g=gnt(p,o,c,v)}return{lines:p.map(function(y,_){return Ot({stroke:n.getColor(_),d:o?zD(y):YR(y)},l)}),areas:g.map(function(y,_){return Ot({d:y,fill:n.getColor(_)},s)})}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnsStyle",{get:function(){var n=this,r=ii(this.attributes,"column"),i=this.attributes,a=i.isStack,o=i.type,s=i.scale;if(o!=="column")throw new Error("columnsStyle can only be used in column type");var l=this.containerShape.height,c=this.rawData;if(!c)return{columns:[]};a&&(c=lse(c));var u=this.createScales(c),f=u.x,h=u.y,d=Ae(sse(c),2),p=d[0],g=d[1],v=new Jc({domain:[0,g-(p>0?0:p)],range:[0,l*s]}),y=f.getBandWidth(),_=this.rawData;return{columns:c.map(function(E,x){return E.map(function(T,S){var w=y/c.length,C=function(){return{x:f.map(S)+w*x,y:T>=0?h.map(T):h.map(0),width:w,height:v.map(Math.abs(T))}},D=function(){return{x:f.map(S),y:h.map(T),width:y,height:v.map(_[x][S])}};return Ot(Ot({fill:n.getColor(x)},r),a?D():C())})})}},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){ptt(r,".container","rect").attr("className","container").node();var i=n.type,a=n.x,o=n.y,s="spark".concat(i),l=Ot({x:a,y:o},i==="line"?this.linesStyle:this.columnsStyle);br(r).selectAll(".spark").data([i]).join(function(c){return c.append(function(u){return u==="line"?new dnt({className:s,style:l}):new hnt({className:s,style:l})}).attr("className","spark ".concat(s))},function(c){return c.update(l)},function(c){return c.remove()})},e.prototype.getColor=function(n){var r=this.attributes.color;return Us(r)?r[n%r.length]:ur(r)?r.call(null,n):r},e.prototype.createScales=function(n){var r,i,a=this.attributes,o=a.type,s=a.scale,l=a.range,c=l===void 0?[]:l,u=a.spacing,f=this.containerShape,h=f.width,d=f.height,p=Ae(sse(n),2),g=p[0],v=p[1],y=new Jc({domain:[(r=c[0])!==null&&r!==void 0?r:g,(i=c[1])!==null&&i!==void 0?i:v],range:[d,d*(1-s)]});return o==="line"?{type:o,x:new Jc({domain:[0,n[0].length-1],range:[0,h]}),y}:{type:o,x:new yRe({domain:n[0].map(function(_,E){return E}),range:[0,h],paddingInner:u,paddingOuter:u/2,align:.5}),y}},e.tag="sparkline",e})(Es);function _nt(t){return typeof t=="boolean"?!1:"enter"in t&&"update"in t&&"exit"in t}function cse(t){if(!t)return{enter:!1,update:!1,exit:!1};var e=["enter","update","exit"],n=Object.fromEntries(Object.entries(t).filter(function(r){var i=Ae(r,1),a=i[0];return!e.includes(a)}));return Object.fromEntries(e.map(function(r){return _nt(t)?t[r]===!1?[r,!1]:[r,Ot(Ot({},t[r]),n)]:[r,n]}))}function Nw(t,e){t?t.finished.then(e):e()}function bnt(t,e){t.length===0?e():Promise.all(t.map(function(n){return n?.finished})).then(e)}function xRe(t,e){"update"in t?t.update(e):t.attr(e)}function SRe(t,e,n){if(e.length===0)return null;if(!n){var r=e.slice(-1)[0];return xRe(t,{style:r}),null}return t.animate(e,n)}function Ent(t,e){return!(t.nodeName!=="text"||e.nodeName!=="text"||t.attributes.text!==e.attributes.text)}function xnt(t,e,n,r){if(r===void 0&&(r="destroy"),Ent(t,e))return t.remove(),[null];var i=function(){r==="destroy"?t.destroy():r==="hide"&&Bp(t),e.isVisible()&&Pw(e)};if(!n)return i(),[null];var a=n.duration,o=a===void 0?0:a,s=n.delay,l=s===void 0?0:s,c=Math.ceil(+o/2),u=+o/4,f=Ae(t.getGeometryBounds().center,2),h=f[0],d=f[1],p=Ae(e.getGeometryBounds().center,2),g=p[0],v=p[1],y=Ae([(h+g)/2-h,(d+v)/2-d],2),_=y[0],E=y[1],x=t.style.opacity,T=x===void 0?1:x,S=e.style.opacity,w=S===void 0?1:S,C=t.style.transform||"",D=e.style.transform||"",L=t.animate([{opacity:T,transform:"translate(0, 0) ".concat(C)},{opacity:0,transform:"translate(".concat(_,", ").concat(E,") ").concat(C)}],Ot(Ot({fill:"both"},n),{duration:l+c+u})),B=e.animate([{opacity:0,transform:"translate(".concat(-_,", ").concat(-E,") ").concat(D),offset:.01},{opacity:w,transform:"translate(0, 0) ".concat(D)}],Ot(Ot({fill:"both"},n),{duration:c+u,delay:l+c-u}));return Nw(B,i),[L,B]}function qg(t,e,n){var r={},i={};return Object.entries(e).forEach(function(a){var o=Ae(a,2),s=o[0],l=o[1];if(!Kn(l)){var c=t.style[s]||t.parsedStyle[s]||0;c!==l&&(r[s]=c,i[s]=l)}}),n?SRe(t,[r,i],Ot({fill:"both"},n)):(xRe(t,i),null)}function C4(t,e){return t.style.opacity||(t.style.opacity=1),qg(t,{opacity:0},e)}var TRe={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},ARe={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},wRe={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},am=Zp({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),wp=Zp({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),Snt=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){var i=n.x,a=n.y,o=n.size,s=o===void 0?10:o,l=n.radius,c=l===void 0?s/4:l,u=n.orientation,f=n.classNamePrefix,h=yo(n,["x","y","size","radius","orientation","classNamePrefix"]),d=s,p=d*2.4,g=f?"".concat(wp.iconRect.name," ").concat(f,"handle-icon-rect"):wp.iconRect.name,v=function(S){return f?"".concat(wp.iconLine,"-").concat(S," ").concat(f,"handle-icon-line"):"".concat(wp.iconLine,"-").concat(S)},y=br(r).maybeAppendByClassName(wp.iconRect,"rect").attr("className",g).styles(Ot(Ot({},h),{width:d,height:p,radius:c,x:i-d/2,y:a-p/2,transformOrigin:"center"})),_=i+1/3*d-d/2,E=i+2/3*d-d/2,x=a+1/4*p-p/2,T=a+3/4*p-p/2;y.maybeAppendByClassName("".concat(wp.iconLine,"-1"),"line").attr("className",v(1)).styles(Ot({x1:_,x2:_,y1:x,y2:T},h)),y.maybeAppendByClassName("".concat(wp.iconLine,"-2"),"line").attr("className",v(2)).styles(Ot({x1:E,x2:E,y1:x,y2:T},h)),u==="vertical"&&(y.node().style.transform="rotate(90)")},e})(Es),ORe=(function(t){Cr(e,t);function e(n){return t.call(this,n,wRe)||this}return e.prototype.renderLabel=function(n){var r=this,i=this.attributes,a=i.x,o=i.y,s=i.showLabel,l=ii(this.attributes,"label"),c=l.x,u=c===void 0?0:c,f=l.y,h=f===void 0?0:f,d=l.transform,p=l.transformOrigin,g=yo(l,["x","y","transform","transformOrigin"]),v=Ae(My(g,[]),2),y=v[0],_=v[1],E=br(n).maybeAppendByClassName(wp.labelGroup,"g").styles(_),x=Ot(Ot({},ARe),y),T=x.text,S=yo(x,["text"]);Zf(!!s,E,function(w){r.label=w.maybeAppendByClassName(wp.label,"text").styles(Ot(Ot({},S),{x:a+u,y:o+h,transform:d,transformOrigin:p,text:"".concat(T)})),r.label.on("mousedown",function(C){C.stopPropagation()}),r.label.on("touchstart",function(C){C.stopPropagation()})})},e.prototype.renderIcon=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.orientation,s=r.type,l=r.classNamePrefix,c=Ot(Ot({x:i,y:a,orientation:o,classNamePrefix:l},TRe),ii(this.attributes,"icon")),u=this.attributes.iconShape,f=u===void 0?function(){return new Snt({style:c})}:u,h=br(n).maybeAppendByClassName(wp.iconGroup,"g");h.selectAll(wp.icon.class).data([f]).join(function(d){return d.append(typeof f=="string"?f:function(){return f(s)}).attr("className",wp.icon.name)},function(d){return d.update(c)},function(d){return d.remove()})},e.prototype.render=function(n,r){this.renderIcon(r),this.renderLabel(r)},e})(Es),ZJ=(function(t){Cr(e,t);function e(n){var r=t.call(this,n,Ot(Ot(Ot({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},Sm(wRe,"handle")),Sm(TRe,"handleIcon")),Sm(ARe,"handleLabel")))||this;return r.range=[0,1],r.onDragStart=function(i){return function(a){a.stopPropagation(),r.target=i,r.prevPos=r.getOrientVal(Goe(a));var o=r.availableSpace,s=o.x,l=o.y,c=r.getBBox(),u=c.x,f=c.y;r.selectionStartPos=r.getRatio(r.prevPos-r.getOrientVal([s,l])-r.getOrientVal([+u,+f])),r.selectionWidth=0,document.addEventListener("pointermove",r.onDragging),document.addEventListener("pointerup",r.onDragEnd)}},r.onDragging=function(i){var a=r.attributes,o=a.slidable,s=a.brushable,l=a.type;i.stopPropagation();var c=r.getOrientVal(Goe(i)),u=c-r.prevPos;if(u){var f=r.getRatio(u);switch(r.target){case"start":o&&r.setValuesOffset(f);break;case"end":o&&r.setValuesOffset(0,f);break;case"selection":o&&r.setValuesOffset(f,f);break;case"track":if(!s)return;r.selectionWidth+=f,l==="range"?r.innerSetValues([r.selectionStartPos,r.selectionStartPos+r.selectionWidth].sort(),!0):r.innerSetValues([0,r.selectionStartPos+r.selectionWidth],!0);break}r.prevPos=c}},r.onDragEnd=function(){document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointermove",r.onDragging),document.removeEventListener("pointerup",r.onDragEnd),r.target="",r.updateHandlesPosition(!1)},r.onValueChange=function(i){var a=r.attributes,o=a.onChange,s=a.type,l=s==="range"?i:i[1],c=s==="range"?r.getValues():r.getValues()[1],u=new rs("valuechange",{detail:{oldValue:l,value:c}});r.dispatchEvent(u),o?.(c)},r.selectionStartPos=0,r.selectionWidth=0,r.prevPos=0,r.target="",r}return Object.defineProperty(e.prototype,"values",{get:function(){return this.attributes.values},set:function(n){this.attributes.values=this.clampValues(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sparklineStyle",{get:function(){var n=this.attributes.orientation;if(n!=="horizontal")return null;var r=ii(this.attributes,"sparkline");return Ot(Ot({zIndex:0},this.availableSpace),r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){var n=this.attributes,r=n.trackLength,i=n.trackSize,a=Ae(this.getOrientVal([[r,i],[i,r]]),2),o=a[0],s=a[1];return{width:o,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes;n.x,n.y;var r=n.padding,i=Ae(Nl(r),4),a=i[0],o=i[1],s=i[2],l=i[3],c=this.shape,u=c.width,f=c.height;return{x:l,y:a,width:u-(l+o),height:f-(a+s)}},enumerable:!1,configurable:!0}),e.prototype.getValues=function(){return this.values},e.prototype.setValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1),this.attributes.values=n;var i=r===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},e.prototype.updateSelectionArea=function(n){var r=this.calcSelectionArea();this.foregroundGroup.selectAll(am.selection.class).each(function(i,a){qg(this,r[a],n)})},e.prototype.updateHandlesPosition=function(n){this.attributes.showHandle&&(this.startHandle&&qg(this.startHandle,this.getHandleStyle("start"),n),this.endHandle&&qg(this.endHandle,this.getHandleStyle("end"),n))},e.prototype.innerSetValues=function(n,r){n===void 0&&(n=[0,0]),r===void 0&&(r=!1);var i=this.values,a=this.clampValues(n);this.attributes.values=a,this.setValues(a),r&&this.onValueChange(i)},e.prototype.renderTrack=function(n){var r=this.attributes,i=r.x,a=r.y,o=ii(this.attributes,"track");this.trackShape=br(n).maybeAppendByClassName(am.track,"rect").styles(Ot(Ot({x:i,y:a},this.shape),o))},e.prototype.renderBrushArea=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.brushable;this.brushArea=br(n).maybeAppendByClassName(am.brushArea,"rect").styles(Ot({x:i,y:a,fill:"transparent",cursor:o?"crosshair":"default"},this.shape))},e.prototype.renderSparkline=function(n){var r=this,i=this.attributes,a=i.x,o=i.y,s=i.orientation,l=br(n).maybeAppendByClassName(am.sparklineGroup,"g");Zf(s==="horizontal",l,function(c){var u=Ot(Ot({},r.sparklineStyle),{x:a,y:o});c.maybeAppendByClassName(am.sparkline,function(){return new ynt({style:u})}).update(u)})},e.prototype.renderHandles=function(){var n=this,r,i=this.attributes,a=i.showHandle,o=i.type,s=o==="range"?["start","end"]:["end"],l=a?s:[],c=this;(r=this.foregroundGroup)===null||r===void 0||r.selectAll(am.handle.class).data(l.map(function(u){return{type:u}}),function(u){return u.type}).join(function(u){return u.append(function(f){var h=f.type;return new ORe({style:n.getHandleStyle(h)})}).each(function(f){var h=f.type;this.attr("class","".concat(am.handle.name," ").concat(h,"-handle"));var d="".concat(h,"Handle");c[d]=this,this.addEventListener("pointerdown",c.onDragStart(h))})},function(u){return u.each(function(f){var h=f.type;this.update(c.getHandleStyle(h))})},function(u){return u.each(function(f){var h=f.type,d="".concat(h,"Handle");c[d]=void 0}).remove()})},e.prototype.renderSelection=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.type,s=r.selectionType;this.foregroundGroup=br(n).maybeAppendByClassName(am.foreground,"g");var l=ii(this.attributes,"selection"),c=function(f){return f.style("visibility",function(h){return h.show?"visible":"hidden"}).style("cursor",function(h){return s==="select"?"grab":s==="invert"?"crosshair":"default"}).styles(Ot(Ot({},l),{transform:"translate(".concat(i,", ").concat(a,")")}))},u=this;this.foregroundGroup.selectAll(am.selection.class).data(o==="value"?[]:this.calcSelectionArea().map(function(f,h){return{style:Ot({},f),index:h,show:s==="select"?h===1:h!==1}}),function(f){return f.index}).join(function(f){return f.append("rect").attr("className",am.selection.name).call(c).each(function(h,d){var p=this;d===1?(u.selectionShape=br(this),this.on("pointerdown",function(g){p.attr("cursor","grabbing"),u.onDragStart("selection")(g)}),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){p.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){p.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){p.attr("cursor","pointer")})):this.on("pointerdown",u.onDragStart("track"))})},function(f){return f.call(c)},function(f){return f.remove()}),this.updateSelectionArea(!1),this.renderHandles()},e.prototype.render=function(n,r){this.renderTrack(r),this.renderSparkline(r),this.renderBrushArea(r),this.renderSelection(r)},e.prototype.clampValues=function(n,r){var i;r===void 0&&(r=4);var a=Ae(this.range,2),o=a[0],s=a[1],l=Ae(this.getValues().map(function(v){return sX(v,r)}),2),c=l[0],u=l[1],f=Array.isArray(n)?n:[c,n??u],h=Ae((f||[c,u]).map(function(v){return sX(v,r)}),2),d=h[0],p=h[1];if(this.attributes.type==="value")return[0,ga(p,o,s)];d>p&&(i=Ae([p,d],2),d=i[0],p=i[1]);var g=p-d;return g>s-o?[o,s]:d<o?c===o&&u===p?[o,p]:[o,g+o]:p>s?u===s&&c===d?[d,s]:[s-g,s]:[d,p]},e.prototype.calcSelectionArea=function(n){var r=Ae(this.clampValues(n),2),i=r[0],a=r[1],o=this.availableSpace,s=o.x,l=o.y,c=o.width,u=o.height;return this.getOrientVal([[{y:l,height:u,x:s,width:i*c},{y:l,height:u,x:i*c+s,width:(a-i)*c},{y:l,height:u,x:a*c,width:(1-a)*c}],[{x:s,width:c,y:l,height:i*u},{x:s,width:c,y:i*u+l,height:(a-i)*u},{x:s,width:c,y:a*u,height:(1-a)*u}]])},e.prototype.calcHandlePosition=function(n){var r=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,o=i.y,s=i.width,l=i.height,c=Ae(this.clampValues(),2),u=c[0],f=c[1],h=n==="start"?-r:r,d=(n==="start"?u:f)*this.getOrientVal([s,l])+h;return{x:a+this.getOrientVal([d,s/2]),y:o+this.getOrientVal([l/2,d])}},e.prototype.inferTextStyle=function(n){var r=this.attributes.orientation;return r==="horizontal"?{}:n==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:n==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},e.prototype.calcHandleText=function(n){var r,i=this.attributes,a=i.type,o=i.orientation,s=i.formatter,l=i.autoFitLabel,c=ii(this.attributes,"handle"),u=ii(c,"label"),f=c.spacing,h=this.getHandleSize(),d=this.clampValues(),p=n==="start"?d[0]:d[1],g=s(p),v=new WJ({style:Ot(Ot(Ot({},u),this.inferTextStyle(n)),{text:g})}),y=v.getBBox(),_=y.width,E=y.height;if(v.destroy(),!l){if(a==="value")return{text:g,x:0,y:-E-f};var x=f+h+(o==="horizontal"?_/2:0);return r={text:g},r[o==="horizontal"?"x":"y"]=n==="start"?-x:x,r}var T=0,S=0,w=this.availableSpace,C=w.width,D=w.height,L=this.calcSelectionArea()[1],B=L.x,I=L.y,U=L.width,$=L.height,X=f+h;if(o==="horizontal"){var N=X+_/2;if(n==="start"){var M=B-X-_;T=M>0?-N:N}else{var k=C-B-U-X>_;T=k?N:-N}}else{var z=X,j=E+X;n==="start"?S=I-h>E?-j:z:S=D-(I+$)-h>E?j:-z}return{x:T,y:S,text:g}},e.prototype.getHandleLabelStyle=function(n){var r=ii(this.attributes,"handleLabel");return Ot(Ot(Ot({},r),this.calcHandleText(n)),this.inferTextStyle(n))},e.prototype.getHandleIconStyle=function(){var n=this.attributes.handleIconShape,r=ii(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return Ot({cursor:i,shape:n,size:a},r)},e.prototype.getHandleStyle=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.showLabel,s=r.showLabelOnInteraction,l=r.orientation,c=this.calcHandlePosition(n),u=c.x,f=c.y,h=this.calcHandleText(n),d=o;return!o&&s&&(this.target?d=!0:d=!1),Ot(Ot(Ot({},Sm(this.getHandleIconStyle(),"icon")),Sm(Ot(Ot({},this.getHandleLabelStyle(n)),h),"label")),{transform:"translate(".concat(u+i,", ").concat(f+a,")"),orientation:l,showLabel:d,type:n,zIndex:3})},e.prototype.getHandleSize=function(){var n=this.attributes,r=n.handleIconSize,i=n.width,a=n.height;return r||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},e.prototype.getOrientVal=function(n){var r=Ae(n,2),i=r[0],a=r[1],o=this.attributes.orientation;return o==="horizontal"?i:a},e.prototype.setValuesOffset=function(n,r){r===void 0&&(r=0);var i=this.attributes.type,a=Ae(this.getValues(),2),o=a[0],s=a[1],l=i==="range"?n:0,c=[o+l,s+r].sort();this.innerSetValues(c,!0)},e.prototype.getRatio=function(n){var r=this.availableSpace,i=r.width,a=r.height;return n/this.getOrientVal([i,a])},e.prototype.dispatchCustomEvent=function(n,r,i){var a=this;n.on(r,function(o){o.stopPropagation(),a.dispatchEvent(new rs(i,{detail:o}))})},e.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var n=this.brushArea;this.dispatchCustomEvent(n,"click","trackClick"),this.dispatchCustomEvent(n,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(n,"pointerleave","trackMouseleave"),n.on("pointerdown",this.onDragStart("track"))},e.prototype.onScroll=function(n){var r=this.attributes.scrollable;if(r){var i=n.deltaX,a=n.deltaY,o=a||i,s=this.getRatio(o);this.setValuesOffset(s,s)}},e.tag="slider",e})(Es),Tnt=(function(t){Cr(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return r.range=[0,1],r.onValueChange=function(i){var a=r.attributes.value;if(i!==a){var o={detail:{oldValue:i,value:a}};r.dispatchEvent(new rs("scroll",o)),r.dispatchEvent(new rs("valuechange",o))}},r.onTrackClick=function(i){var a=r.attributes.slidable;if(a){var o=Ae(r.getLocalPosition(),2),s=o[0],l=o[1],c=Ae(r.padding,4),u=c[0],f=c[3],h=r.getOrientVal([s+f,l+u]),d=r.getOrientVal(uRe(i)),p=(d-h)/r.trackLength;r.setValue(p,!0)}},r.onThumbMouseenter=function(i){r.dispatchEvent(new rs("thumbMouseenter",{detail:i.detail}))},r.onTrackMouseenter=function(i){r.dispatchEvent(new rs("trackMouseenter",{detail:i.detail}))},r.onThumbMouseleave=function(i){r.dispatchEvent(new rs("thumbMouseleave",{detail:i.detail}))},r.onTrackMouseleave=function(i){r.dispatchEvent(new rs("trackMouseleave",{detail:i.detail}))},r}return Object.defineProperty(e.prototype,"padding",{get:function(){var n=this.attributes.padding;return Nl(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var n=this.attributes.value,r=Ae(this.range,2),i=r[0],a=r[1];return ga(n,i,a)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackLength",{get:function(){var n=this.attributes,r=n.viewportLength,i=n.trackLength,a=i===void 0?r:i;return a},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes.trackSize,r=this.trackLength,i=Ae(this.padding,4),a=i[0],o=i[1],s=i[2],l=i[3],c=Ae(this.getOrientVal([[r,n],[n,r]]),2),u=c[0],f=c[1];return{x:l,y:a,width:+u-(l+o),height:+f-(a+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.trackSize;return r?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"thumbRadius",{get:function(){var n=this.attributes,r=n.isRound,i=n.thumbRadius;if(!r)return 0;var a=this.availableSpace,o=a.width,s=a.height;return i||this.getOrientVal([s,o])/2},enumerable:!1,configurable:!0}),e.prototype.getValues=function(n){n===void 0&&(n=this.value);var r=this.attributes,i=r.viewportLength,a=r.contentLength,o=i/a,s=Ae(this.range,2),l=s[0],c=s[1],u=n*(c-l-o);return[u,u+o]},e.prototype.getValue=function(){return this.value},e.prototype.renderSlider=function(n){var r=this.attributes,i=r.x,a=r.y,o=r.orientation,s=r.trackSize,l=r.padding,c=r.slidable,u=ii(this.attributes,"track"),f=ii(this.attributes,"thumb"),h=Ot(Ot({x:i,y:a,brushable:!1,orientation:o,padding:l,selectionRadius:this.thumbRadius,showHandle:!1,slidable:c,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},Sm(u,"track")),Sm(f,"selection"));this.slider=br(n).maybeAppendByClassName("scrollbar",function(){return new ZJ({style:h})}).update(h).node()},e.prototype.render=function(n,r){this.renderSlider(r)},e.prototype.setValue=function(n,r){r===void 0&&(r=!1);var i=this.attributes.value,a=Ae(this.range,2),o=a[0],s=a[1];this.slider.setValues(this.getValues(ga(n,o,s)),r),this.onValueChange(i)},e.prototype.bindEvents=function(){var n=this;this.slider.addEventListener("trackClick",function(r){r.stopPropagation(),n.onTrackClick(r.detail)}),this.onHover()},e.prototype.getOrientVal=function(n){var r=this.attributes.orientation;return r==="horizontal"?n[0]:n[1]},e.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},e.tag="scrollbar",e})(Es),vo={gridGroup:"grid-group",mainGroup:"main-group",lineGroup:"line-group",tickGroup:"tick-group",labelGroup:"label-group",titleGroup:"title-group",grid:"grid",line:"line",lineFirst:"line-first",lineSecond:"line-second",tick:"tick",tickItem:"tick-item",label:"label",labelItem:"label-item",title:"title"},KJ={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new Ad({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};Nt({},KJ,{style:{type:"arc"}});Nt({},KJ,{style:{}});var Mi=Zp({mainGroup:vo.mainGroup,gridGroup:vo.gridGroup,grid:vo.grid,lineGroup:vo.lineGroup,line:vo.line,tickGroup:vo.tickGroup,tick:vo.tick,tickItem:vo.tickItem,labelGroup:vo.labelGroup,label:vo.label,labelItem:vo.labelItem,titleGroup:vo.titleGroup,title:vo.title,lineFirst:vo.lineFirst,lineSecond:vo.lineSecond},"axis"),ZA=Zp({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function CRe(t){return t.reduce(function(e,n,r){return e.push(_r([r===0?"M":"L"],Ae(n),!1)),e},[])}function Ant(t,e,n){var r=e.connect,i=r===void 0?"line":r,a=e.center;if(i==="line")return CRe(t);if(!a)return[];var o=VR(t[0],a),s=n?0:1;return t.reduce(function(l,c,u){return u===0?l.push(_r(["M"],Ae(c),!1)):l.push(_r(["A",o,o,0,0,s],Ae(c),!1)),l},[])}function uX(t,e,n){return e.type==="surround"?Ant(t,e,n):CRe(t)}function wnt(t,e,n){var r=n.type,i=n.connect,a=n.center,o=n.closed,s=o?[["Z"]]:[],l=Ae([uX(t,n),uX(e.slice().reverse(),n,!0)],2),c=l[0],u=l[1],f=Ae([t[0],e.slice(-1)[0]],2),h=f[0],d=f[1],p=function(_,E){return[c,_,u,E,s].flat()};if(i==="line"||r==="surround")return p([_r(["L"],Ae(d),!1)],[_r(["L"],Ae(h),!1)]);if(!a)throw new Error("Arc grid need to specified center");var g=Ae([VR(d,a),VR(h,a)],2),v=g[0],y=g[1];return p([_r(["A",v,v,0,0,1],Ae(d),!1),_r(["L"],Ae(d),!1)],[_r(["A",y,y,0,0,0],Ae(h),!1),_r(["L"],Ae(h),!1)])}function Ont(t,e,n,r){var i=n.animate,a=n.isBillboard,o=e.map(function(s,l){return{id:s.id||"grid-line-".concat(l),d:uX(s.points,n)}});return t.selectAll(ZA.line.class).data(o,function(s){return s.id}).join(function(s){return s.append("path").each(function(l,c){var u=$h(Voe(Ot({d:l.d},r)),[l,c,o]);this.attr(Ot({class:ZA.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},u))})},function(s){return s.transition(function(l,c){var u=$h(Voe(Ot({d:l.d},r)),[l,c,o]);return qg(this,u,i.update)})},function(s){return s.transition(function(){var l=this,c=C4(this,i.exit);return Nw(c,function(){return l.remove()}),c})}).transitions()}function Cnt(t,e,n){var r=n.animate,i=n.connect,a=n.areaFill;if(e.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(p){return o[p%o.length]},l=[],c=0;c<e.length-1;c++){var u=Ae([e[c].points,e[c+1].points],2),f=u[0],h=u[1],d=wnt(f,h,n);l.push({d,fill:s(c)})}return t.selectAll(ZA.region.class).data(l,function(p,g){return g}).join(function(p){return p.append("path").each(function(g,v){var y=$h(g,[g,v,l]);this.attr(y)}).attr("className",ZA.region.name)},function(p){return p.transition(function(g,v){var y=$h(g,[g,v,l]);return qg(this,y,r.update)})},function(p){return p.transition(function(){var g=this,v=C4(this,r.exit);return Nw(v,function(){return g.remove()}),v})}).transitions()}function Rnt(t){var e=t.data,n=e===void 0?[]:e,r=t.closed;return r?n.map(function(i){var a=i.points,o=Ae(a,1),s=o[0];return Ot(Ot({},i),{points:_r(_r([],Ae(a),!1),[s],!1)})}):n}var Mnt=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.render=function(n,r){n.type,n.center,n.areaFill,n.closed;var i=yo(n,["type","center","areaFill","closed"]),a=Rnt(n),o=br(r).maybeAppendByClassName(ZA.lineGroup,"g"),s=br(r).maybeAppendByClassName(ZA.regionGroup,"g"),l=Ont(o,a,n,i),c=Cnt(s,a,n);return _r(_r([],Ae(l),!1),Ae(c),!1)},e})(Es);function RRe(t,e){return Object.fromEntries(Object.entries(t).map(function(n){var r=Ae(n,2),i=r[0],a=r[1];return[i,$h(a,e)]}))}function QJ(t,e){return e&&ur(e)?t.filter(e):t}function MRe(t,e){var n=e.startAngle,r=e.endAngle;return(r-n)*t+n}function R4(t,e){if(e.type==="linear"){var n=Ae(e.startPos,2),r=n[0],i=n[1],a=Ae(e.endPos,2),o=a[0],s=a[1],l=Ae([o-r,s-i],2),c=l[0],u=l[1];return fRe([c,u])}var f=qA(MRe(t,e));return[-Math.sin(f),Math.cos(f)]}function JJ(t,e,n){var r=R4(t,n);return att(r,e!=="positive")}function Iw(t,e){return JJ(t,e.labelDirection,e)}function sk(t,e,n){return n?"".concat(t," ").concat(n,"axis-").concat(e):t}function Rd(t,e,n,r){return r&&t.attr("className",sk(e.name,n,r)),t}function Pnt(t,e){var n=Ae(e.startPos,2),r=n[0],i=n[1],a=Ae(e.endPos,2),o=a[0],s=a[1],l=Ae([o-r,s-i],2),c=l[0],u=l[1];return[r+c*t,i+u*t]}function Nnt(t,e){var n=e.radius,r=Ae(e.center,2),i=r[0],a=r[1],o=qA(MRe(t,e));return[i+n*Math.cos(o),a+n*Math.sin(o)]}function M4(t,e){return e.type==="linear"?Pnt(t,e):Nnt(t,e)}function eee(t){return R4(0,t)[1]===0}function PRe(t){return R4(0,t)[0]===0}function NRe(t,e){return e-t===360}function use(t,e,n,r,i){var a=e-t,o=Ae([i,i],2),s=o[0],l=o[1],c=Ae([qA(t),qA(e)],2),u=c[0],f=c[1],h=function(D){return[n+i*Math.cos(D),r+i*Math.sin(D)]},d=Ae(h(u),2),p=d[0],g=d[1],v=Ae(h(f),2),y=v[0],_=v[1];if(NRe(t,e)){var E=(f+u)/2,x=Ae(h(E),2),T=x[0],S=x[1];return[["M",p,g],["A",s,l,0,1,0,T,S],["A",s,l,0,1,0,y,_]]}var w=a>180?1:0,C=t>e?0:1;return"M".concat(p,",").concat(g,",A").concat(s,",").concat(l,",0,").concat(w,",").concat(C,",").concat(y,",").concat(_)}function Int(t){var e=t.attributes,n=e.startAngle,r=e.endAngle,i=e.center,a=e.radius;return _r(_r([n,r],Ae(i),!1),[a],!1)}function Lnt(t,e,n,r){var i=e.startAngle,a=e.endAngle,o=e.center,s=e.radius,l=e.classNamePrefix;return t.selectAll(Mi.line.class).data([{d:use.apply(void 0,_r(_r([i,a],Ae(o),!1),[s],!1))}],function(c,u){return u}).join(function(c){var u=c.append("path").attr("className",Mi.line.name).styles(e).styles({d:function(f){return f.d}});return Rd(u,Mi.line,vo.line,l),u},function(c){return c.transition(function(){var u=this,f=ttt(this,Int(this),_r(_r([i,a],Ae(o),!1),[s],!1),r.update);if(f){var h=function(){var d=Wr(u.attributes,"__keyframe_data__");u.style.d=use.apply(void 0,_r([],Ae(d),!1))};f.onframe=h,f.onfinish=h}return f}).styles(e)},function(c){return c.remove()}).styles(n).transitions()}function knt(t,e){e.truncRange,e.truncShape,e.lineExtension}function Dnt(t,e,n){n===void 0&&(n=[0,0]);var r=Ae([t,e,n],3),i=Ae(r[0],2),a=i[0],o=i[1],s=Ae(r[1],2),l=s[0],c=s[1],u=Ae(r[2],2),f=u[0],h=u[1],d=Ae([l-a,c-o],2),p=d[0],g=d[1],v=Math.sqrt(Math.pow(p,2)+Math.pow(g,2)),y=Ae([-f/v,h/v],2),_=y[0],E=y[1];return[_*p,_*g,E*p,E*g]}function fse(t){var e=Ae(t,2),n=Ae(e[0],2),r=n[0],i=n[1],a=Ae(e[1],2),o=a[0],s=a[1];return{x1:r,y1:i,x2:o,y2:s}}function Bnt(t,e,n,r){var i=e.showTrunc,a=e.startPos,o=e.endPos,s=e.truncRange,l=e.lineExtension,c=e.classNamePrefix,u=Ae([a,o],2),f=Ae(u[0],2),h=f[0],d=f[1],p=Ae(u[1],2),g=p[0],v=p[1],y=Ae(l?Dnt(a,o,l):new Array(4).fill(0),4),_=y[0],E=y[1],x=y[2],T=y[3],S=function(z){return t.selectAll(Mi.line.class).data(z,function(j,V){return V}).join(function(j){var V=j.append("line").styles(n).transition(function(Q){return qg(this,fse(Q.line),!1)});return V.attr("className",function(Q){if(!c)return"".concat(Mi.line.name," ").concat(Q.className);var ee=sk(Mi.line.name,vo.line,c);if(Q.className===Mi.lineFirst.name){var re=sk(Mi.lineFirst.name,vo.lineFirst,c);return"".concat(ee," ").concat(re)}if(Q.className===Mi.lineSecond.name){var re=sk(Mi.lineSecond.name,vo.lineSecond,c);return"".concat(ee," ").concat(re)}return ee}),V},function(j){return j.styles(n).transition(function(V){var Q=V.line;return qg(this,fse(Q),r.update)})},function(j){return j.remove()}).transitions()};if(!i||!s)return S([{line:[[h+_,d+E],[g+x,v+T]],className:Mi.line.name}]);var w=Ae(s,2),C=w[0],D=w[1],L=g-h,B=v-d,I=Ae([h+L*C,d+B*C],2),U=I[0],$=I[1],X=Ae([h+L*D,d+B*D],2),N=X[0],M=X[1],k=S([{line:[[h+_,d+E],[U,$]],className:Mi.lineFirst.name},{line:[[N,M],[g+x,v+T]],className:Mi.lineSecond.name}]);return knt(t,e),k}function Fnt(t,e,n,r){var i=n.showArrow,a=n.showTrunc,o=n.lineArrow,s=n.lineArrowOffset,l=n.lineArrowSize,c;if(e==="arc"?c=t.select(Mi.line.class):a?c=t.select(Mi.lineSecond.class):c=t.select(Mi.line.class),!i||!o||n.type==="arc"&&NRe(n.startAngle,n.endAngle)){var u=c.node();u&&(u.style.markerEnd=void 0);return}var f=Ry(o);f.attr(r),YJ(f,l),c.style("markerEnd",f).style("markerEndOffset",-s)}function Unt(t,e,n){var r=e.type,i,a=ii(e,"line");return r==="linear"?i=Bnt(t,e,lX(a,"arrow"),n):i=Lnt(t,e,lX(a,"arrow"),n),Fnt(t,r,e,a),i}function jnt(t,e){return JJ(t,e.gridDirection,e)}function IRe(t){var e=t.type,n=t.gridCenter;return e==="linear"?n:n||t.center}function znt(t,e){var n=e.gridLength;return t.map(function(r,i){var a=r.value,o=Ae(M4(a,e),2),s=o[0],l=o[1],c=Ae(ny(jnt(a,e),n),2),u=c[0],f=c[1];return{id:i,points:[[s,l],[s+u,l+f]]}})}function $nt(t,e){var n=e.gridControlAngles,r=IRe(e);if(!r)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!n||n.length===0)throw new Error("Invalid gridControlAngles");var i=Ae(r,2),a=i[0],o=i[1];return t.map(function(s,l){var c=s.value,u=Ae(M4(c,e),2),f=u[0],h=u[1],d=Ae([f-a,h-o],2),p=d[0],g=d[1],v=[];return n.forEach(function(y){var _=qA(y),E=Ae([Math.cos(_),Math.sin(_)],2),x=E[0],T=E[1],S=p*x-g*T+a,w=p*T+g*x+o;v.push([S,w])}),{points:v,id:l}})}function Hnt(t,e,n,r){var i=n.classNamePrefix,a=ii(n,"grid"),o=a.type,s=a.areaFill,l=IRe(n),c=QJ(e,n.gridFilter),u=o==="segment"?znt(c,n):$nt(c,n),f=Ot(Ot({},a),{center:l,areaFill:ur(s)?c.map(function(h,d){return $h(s,[h,d,c])}):s,animate:r,data:u});return t.selectAll(Mi.grid.class).data([1]).join(function(h){var d=h.append(function(){return new Mnt({style:f})}).attr("className",Mi.grid.name);return Rd(d,Mi.grid,vo.grid,i),d},function(h){return h.transition(function(){return this.update(f)})},function(h){return h.remove()}).transitions()}var fX=(function(){function t(e,n,r,i){this.set(e,n,r,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(e,n,r){var i=this,a=i.x1,o=i.y1,s=i.x2,l=i.y2,c=Math.cos(e),u=Math.sin(e),f=n-n*c+r*u,h=r-n*u-r*c,d=[[c*a-u*l+f,u*a+c*l+h],[c*s-u*l+f,u*s+c*l+h],[c*a-u*o+f,u*a+c*o+h],[c*s-u*o+f,u*s+c*o+h]];return d},t.prototype.set=function(e,n,r,i){return r<e?(this.x2=e,this.x1=r):(this.x1=e,this.x2=r),i<n?(this.y2=n,this.y1=i):(this.y1=n,this.y2=i),this},t.prototype.defined=function(e){return this[e]!==Number.MAX_VALUE&&this[e]!==-Number.MAX_VALUE},t})();function hX(t,e){var n=t.getEulerAngles()||0;t.setEulerAngles(0);var r=t.getBounds(),i=Ae(r.min,2),a=i[0],o=i[1],s=Ae(r.max,2),l=s[0],c=s[1],u=t.getBBox(),f=u.width,h=u.height,d=h,p=0,g=0,v=a,y=o,_=lRe(t);if(_){d-=1.5;var E=_.style.textAlign,x=_.style.textBaseline;E==="center"?v=(a+l)/2:(E==="right"||E==="end")&&(v=l),x==="middle"?y=(o+c)/2:x==="bottom"&&(y=c)}var T=Ae(Nl(e),4),S=T[0],w=S===void 0?0:S,C=T[1],D=C===void 0?0:C,L=T[2],B=L===void 0?w:L,I=T[3],U=I===void 0?D:I,$=new fX((p+=a)-U,(g+=o)-w,p+f+D,g+d+B);return t.setEulerAngles(n),$.rotatedPoints(qA(n),v,y)}function uC(t,e){return e[0]<=Math.max(t[0][0],t[1][0])&&e[0]<=Math.min(t[0][0],t[1][0])&&e[1]<=Math.max(t[0][1],t[1][1])&&e[1]<=Math.min(t[0][1],t[1][1])}function fC(t,e,n){var r=(e[1]-t[1])*(n[0]-e[0])-(e[0]-t[0])*(n[1]-e[1]);return r===0?0:r<0?2:1}function Gnt(t,e){var n=fC(t[0],t[1],e[0]),r=fC(t[0],t[1],e[1]),i=fC(e[0],e[1],t[0]),a=fC(e[0],e[1],t[1]);return!!(n!==r&&i!==a||n===0&&uC(t,e[0])||r===0&&uC(t,e[1])||i===0&&uC(e,t[0])||a===0&&uC(e,t[1]))}function Wnt(t,e){var n=t.length;if(n<3)return!1;var r=[e,[9999,e[1]]],i=0,a=0;do{var o=[t[a],t[(a+1)%n]];if(Gnt(o,r)){if(fC(o[0],e,o[1])===0)return uC(o,e);i++}a=(a+1)%n}while(a!==0);return!!(i&1)}function Vnt(t,e){return e.every(function(n){return Wnt(t,n)})}function Ynt(t,e,n){var r=t.x1,i=t.x2,a=t.y1,o=t.y2,s=[[r,a],[i,a],[i,o],[r,o]],l=hX(e,n);return Vnt(s,l)}function Xnt(t,e){var n=Ae(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=Ae(e,4),l=s[0],c=s[1],u=s[2],f=s[3],h=a-r,d=o-i,p=u-l,g=f-c,v=h*g-p*d;if(v===0)return!1;var y=v>0,_=r-l,E=i-c,x=h*E-d*_;if(x<0===y)return!1;var T=p*E-g*_;return!(T<0===y||x>v===y||T>v===y)}function qnt(t,e){var n=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return n.some(function(r){return Xnt(e,r)})}function Znt(t,e,n){var r,i,a=hX(t,n).flat(1),o=hX(e,n).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var l=$p(s),c=l.next();!c.done;c=l.next()){var u=c.value;if(qnt(o,u))return!0}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return!1}function Knt(t,e){var n=t.type,r=t.labelDirection,i=t.crossSize;if(!i)return!1;if(n==="arc"){var a=t.center,o=t.radius,s=Ae(a,2),l=s[0],c=s[1],u=r==="negative"?0:i,f=-o-u,h=o+u,d=Ae(Nl(e),4),p=d[0],g=d[1],v=d[2],y=d[3];return new fX(l+f-y,c+f-p,l+h+g,c+h+v)}var _=Ae(t.startPos,2),E=_[0],x=_[1],T=Ae(t.endPos,2),S=T[0],w=T[1],C=Ae(PRe(t)?[-e,0,e,0]:[0,e,0,-e],4),D=C[0],L=C[1],B=C[2],I=C[3],U=Iw(0,t),$=ny(U,i),X=new fX(E,x,S,w);return X.x1+=I,X.y1+=D,X.x2+=L+$[0],X.y2+=B+$[1],X}function P4(t,e,n){var r,i,a=e.crossPadding,o=new Set,s=null,l=Knt(e,a),c=function(p){return l?Ynt(l,p):!0},u=function(p,g){return!p||!p.firstChild?!0:!Znt(p.firstChild,g.firstChild,Nl(n))};try{for(var f=$p(t),h=f.next();!h.done;h=f.next()){var d=h.value;c(d)?!s||u(s,d)?s=d:(o.add(s),o.add(d)):o.add(d)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return Array.from(o)}function k7(t,e){return e===void 0&&(e={}),Kn(t)?0:typeof t=="number"?t:Math.floor(oRe(t,e))}function Qnt(t,e,n,r){if(!(t.length<=0)){var i=e.suffix,a=i===void 0?"...":i,o=e.minLength,s=e.maxLength,l=s===void 0?1/0:s,c=e.step,u=c===void 0?" ":c,f=e.margin,h=f===void 0?[0,0,0,0]:f,d=sRe(r.getTextShape(t[0])),p=k7(u,d),g=o?k7(o,d):p,v=k7(l,d);(Kn(v)||v===1/0)&&(v=Math.max.apply(null,t.map(function(S){return S.getBBox().width})));var y=t.slice(),_=Ae(h,4);_[0],_[1],_[2],_[3];for(var E=function(S){if(y.forEach(function(w){r.ellipsis(r.getTextShape(w),S,a)}),y=P4(t,n,h),y.length<1)return{value:void 0}},x=v;x>g+p;x-=p){var T=E(x);if(typeof T=="object")return T.value}}}var Jnt={parity:function(t,e){var n=e.seq,r=n===void 0?2:n;return t.filter(function(i,a){return a%r?(Bp(i),!1):!0})}},ert=function(t){return t.filter(Xet)};function trt(t,e,n,r){var i=t.length,a=e.keepHeader,o=e.keepTail;if(!(i<=1||i===2&&a&&o)){var s=Jnt.parity,l=function(E){return E.forEach(r.show),E},c=2,u=t.slice(),f=t.slice(),h=Math.min.apply(Math,_r([1],Ae(t.map(function(E){return E.getBBox().width})),!1));if(n.type==="linear"&&(eee(n)||PRe(n))){var d=Yoe(t[0]).left,p=Yoe(t[i-1]).right,g=Math.abs(p-d)||1;c=Math.max(Math.floor(i*h/g),c)}var v,y;for(a&&(v=u.splice(0,1)[0]),o&&(y=u.splice(-1,1)[0],u.reverse()),l(u);c<t.length&&P4(ert(y?_r(_r([y],Ae(f),!1),[v],!1):_r([v],Ae(f),!1)),n,e?.margin).length;){if(y&&!v&&c%2===0){var _=u.splice(0,1);_.forEach(r.hide)}else if(y&&v){var _=u.splice(0,1);_.forEach(r.hide)}f=s(l(u),{seq:c}),c++}}}function nrt(t,e,n,r){var i,a,o=e.optionalAngles,s=o===void 0?[0,45,90]:o,l=e.margin,c=e.recoverWhenFailed,u=c===void 0?!0:c,f=t.map(function(y){return y.getLocalEulerAngles()}),h=function(){return P4(t,n,l).length<1},d=function(y){return t.forEach(function(_,E){var x=Array.isArray(y)?y[E]:y;r.rotate(_,+x)})};try{for(var p=$p(s),g=p.next();!g.done;g=p.next()){var v=g.value;if(d(v),h())return}}catch(y){i={error:y}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u&&d(f)}function rrt(t){var e=t.type,n=t.labelDirection;return e==="linear"&&eee(t)?n==="negative"?"bottom":"top":"middle"}function irt(t,e,n,r,i){var a,o=e.maxLines,s=o===void 0?3:o,l=e.recoverWhenFailed,c=l===void 0?!0:l,u=e.margin,f=u===void 0?[0,0,0,0]:u,h=$h((a=e.wordWrapWidth)!==null&&a!==void 0?a:50,[i]),d=t.map(function(E){return E.attr("maxLines")||1}),p=Math.min.apply(Math,_r([],Ae(d),!1)),g=function(){return P4(t,n,f).length<1},v=rrt(n),y=function(E){return t.forEach(function(x,T){var S=Array.isArray(E)?E[T]:E;r.wrap(x,h,S,v)})};if(!(p>s)){if(n.type==="linear"&&eee(n)){if(y(s),g())return}else for(var _=p;_<=s;_++)if(y(_),g())return;c&&y(d)}}var art=new Map([["hide",trt],["rotate",nrt],["ellipsis",Qnt],["wrap",irt]]);function ort(t,e,n){return e.labelOverlap.length<1?!1:n==="hide"?!Vet(t[0]):n==="rotate"?!t.some(function(r){var i;return!!(!((i=r.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):n==="ellipsis"||n==="wrap"?t.filter(function(r){return r.querySelector("text")}).length>=1:!0}function srt(t,e,n,r){var i=e.labelOverlap,a=i===void 0?[]:i;a.length&&a.forEach(function(o){var s=o.type,l=art.get(s);ort(t,e,s)&&l?.(t,o,e,r,n)})}function lrt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(r){return r==="positive"?-1:1};return t.reduce(function(r,i){return r*n(i)},1)}function hse(t){for(var e=t;e<0;)e+=360;return Math.round(e%360)}function dX(t,e){var n=Ae(t,2),r=n[0],i=n[1],a=Ae(e,2),o=a[0],s=a[1],l=Ae([r*o+i*s,r*s-i*o],2),c=l[0],u=l[1];return Math.atan2(u,c)}function crt(t){var e=(t+360)%180;return Au(e,-90,90)||(e+=180),e}function urt(t,e,n){var r,i=n.labelAlign,a=(r=e.style.transform)===null||r===void 0?void 0:r.includes("rotate");if(a)return e.getLocalEulerAngles();var o=0,s=Iw(t.value,n),l=R4(t.value,n);return i==="horizontal"?0:(i==="perpendicular"?o=dX([1,0],s):o=dX([l[0]<0?-1:1,0],l),crt(iRe(o)))}function LRe(t,e,n){var r=n.type,i=n.labelAlign,a=Iw(t,n),o=hse(e),s=hse(iRe(dX([1,0],a))),l="center",c="middle";return r==="linear"?[90,270].includes(s)&&o===0?(l="center",c=a[1]===1?"top":"bottom"):!(s%180)&&[90,270].includes(o)?l="center":s===0?(Au(o,0,90,!1,!0)||Au(o,0,90)||Au(o,270,360))&&(l="start"):s===90?Au(o,0,90,!1,!0)?l="start":(Au(o,90,180)||Au(o,270,360))&&(l="end"):s===270?Au(o,0,90,!1,!0)?l="end":(Au(o,90,180)||Au(o,270,360))&&(l="start"):s===180&&(o===90?l="start":(Au(o,0,90)||Au(o,270,360))&&(l="end")):i==="parallel"?Au(s,0,180,!0)?c="top":c="bottom":i==="horizontal"?Au(s,90,270,!1)?l="end":(Au(s,270,360,!1)||Au(s,0,90))&&(l="start"):i==="perpendicular"&&(Au(s,90,270)?l="end":l="start"),{textAlign:l,textBaseline:c}}function frt(t,e,n){e.setLocalEulerAngles(t);var r=e.__data__.value,i=LRe(r,t,n),a=e.querySelector(Mi.labelItem.class);a&&kRe(a,i)}function dse(t,e,n){var r=n.showTick,i=n.tickLength,a=n.tickDirection,o=n.labelDirection,s=n.labelSpacing,l=e.indexOf(t),c=$h(s,[t,l,e]),u=Ae([Iw(t.value,n),lrt(o,a)],2),f=u[0],h=u[1],d=h===1?$h(r?i:0,[t,l,e]):0,p=Ae(cC(ny(f,c+d),M4(t.value,n)),2),g=p[0],v=p[1];return{x:g,y:v}}function hrt(t,e,n,r){var i=r.labelFormatter,a=ur(i)?function(){return Ry($h(i,[t,e,n,Iw(t.value,r)]))}:function(){return Ry(t.label||"")};return a}function drt(t,e,n,r){var i=r.labelRender,a=(Wr(r,"endPos.0",400)-Wr(r,"startPos.0",0))/n.length,o=ur(i)?$h(i,[t,e,n,Iw(t.value,r)]):t.label||"",s=xtt(o)||30;return function(){return Zet(o,{width:a,height:s})}}var prt={html:["fill"],text:[]};function kRe(t,e){["text","html"].includes(t.nodeName)&&t.attr(lX(e,prt[t.nodeName]))}function grt(t,e){srt(this.node().childNodes,t,e,{hide:Bp,show:Pw,rotate:function(n,r){frt(+r,n,t)},ellipsis:function(n,r,i){n&&oX(n,r||1/0,i)},wrap:function(n,r,i){n&&qet(n,r,i)},getTextShape:function(n){return n.querySelector(Mi.labelItem.class)}})}function pse(t,e,n,r,i){var a=n.indexOf(e),o=i.labelRender,s=i.classNamePrefix,l=br(t).append(o?drt(e,a,n,i):hrt(e,a,n,i)).attr("className",Mi.labelItem.name).node();Rd(br(l),Mi.labelItem,vo.labelItem,s);var c=Ae(My(RRe(r,[e,a,n])),2),u=c[0],f=c[1],h=f.transform,d=yo(f,["transform"]);hRe(l,h);var p=urt(e,l,i);if(l.getLocalEulerAngles()||l.setLocalEulerAngles(p),kRe(l,Ot(Ot({},LRe(e.value,p,i)),u)),l.nodeName==="html"){var g=l.getBBox(),v=l.style.x||0;l.attr("x",v-g.width/2)}return t.attr(d),l}function vrt(t,e,n,r,i){var a=n.classNamePrefix,o=QJ(e,n.labelFilter),s=ii(n,"label"),l,c=t.selectAll(Mi.label.class).data(o,function(u,f){return f}).join(function(u){var f=u.append("g").attr("className",Mi.label.name).transition(function(h){pse(this,h,e,s,n);var d=dse(h,e,n),p=d.x,g=d.y;return this.style.transform="translate(".concat(p,", ").concat(g,")"),null});return Rd(f,Mi.label,vo.label,a),f},function(u){return u.transition(function(f){var h=this.querySelector(Mi.labelItem.class),d=pse(this,f,e,s,n),p=xnt(h,d,r.update),g=dse(f,e,n),v=g.x,y=g.y,_=qg(this,{transform:"translate(".concat(v,", ").concat(y,")")},r.update);return _r(_r([],Ae(p),!1),[_],!1)})},function(u){return l=u,u.transition(function(){var f=this,h=C4(this.childNodes[0],r.exit);return Nw(h,function(){return br(f).remove()}),h}),l}).transitions();return bnt(c,function(){grt.call(t,n,i)}),c}function DRe(t,e){return JJ(t,e.tickDirection,e)}function mrt(t,e){var n=Ae(t,2),r=n[0],i=n[1];return[[0,0],[r*e,i*e]]}function yrt(t,e,n,r,i){var a=i.tickLength,o=Ae(mrt(r,$h(a,[t,e,n])),2),s=Ae(o[0],2),l=s[0],c=s[1],u=Ae(o[1],2),f=u[0],h=u[1];return{x1:l,x2:f,y1:c,y2:h}}function _rt(t,e,n,r,i){var a=i.tickFormatter,o=i.classNamePrefix,s=DRe(e.value,i),l="line";ur(a)&&(l=function(){return $h(a,[e,n,r,s])});var c=t.append(l).attr("className",Mi.tickItem.name);return Rd(c,Mi.tickItem,vo.tickItem,o),c}function brt(t,e,n,r,i,a,o){var s=DRe(t.value,a),l=yrt(t,e,n,s,a),c=l.x1,u=l.x2,f=l.y1,h=l.y2,d=Ae(My(RRe(o,[t,e,n,s])),2),p=d[0],g=d[1];r.node().nodeName==="line"&&r.styles(Ot({x1:c,x2:u,y1:f,y2:h},p)),i.attr(g),r.styles(p)}function gse(t,e,n,r,i,a){var o=_rt(br(this),t,e,n,r);brt(t,e,n,o,this,r,i);var s=Ae(M4(t.value,r),2),l=s[0],c=s[1];return qg(this,{transform:"translate(".concat(l,", ").concat(c,")")},a)}function Ert(t,e,n,r){var i=n.classNamePrefix,a=QJ(e,n.tickFilter),o=ii(n,"tick");return t.selectAll(Mi.tick.class).data(a,function(s){return s.id||s.label}).join(function(s){var l=s.append("g").attr("className",Mi.tick.name).transition(function(c,u){return gse.call(this,c,u,a,n,o,!1)});return Rd(l,Mi.tick,vo.tick,i),l},function(s){return s.transition(function(l,c){return this.removeChildren(),gse.call(this,l,c,a,n,o,r.update)})},function(s){return s.transition(function(){var l=this,c=C4(this.childNodes[0],r.exit);return Nw(c,function(){return l.remove()}),c})}).transitions()}function xrt(t,e,n){var r=n.titlePosition,i=r===void 0?"lb":r,a=n.titleSpacing,o=w4(i),s=t.node().getLocalBounds(),l=Ae(s.min,2),c=l[0],u=l[1],f=Ae(s.halfExtents,2),h=f[0],d=f[1],p=Ae(e.node().getLocalBounds().halfExtents,2),g=p[0],v=p[1],y=Ae([c+h,u+d],2),_=y[0],E=y[1],x=Ae(Nl(a),4),T=x[0],S=x[1],w=x[2],C=x[3];if(["start","end"].includes(i)&&n.type==="linear"){var D=n.startPos,L=n.endPos,B=Ae(i==="start"?[D,L]:[L,D],2),I=B[0],U=B[1],$=fRe([-U[0]+I[0],-U[1]+I[1]]),X=Ae(ny($,T),2),N=X[0],M=X[1];return{x:I[0]+N,y:I[1]+M}}return o.includes("t")&&(E-=d+v+T),o.includes("r")&&(_+=h+g+S),o.includes("l")&&(_-=h+g+C),o.includes("b")&&(E+=d+v+w),{x:_,y:E}}function Srt(t,e,n){var r=t.getGeometryBounds().halfExtents,i=r[1]*2;if(e==="vertical"){if(n==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(n==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function vse(t,e,n,r,i){var a=ii(r,"title"),o=Ae(My(a),2),s=o[0],l=o[1],c=l.transform,u=l.transformOrigin,f=yo(l,["transform","transformOrigin"]);e.styles(f);var h=c||Srt(t.node(),s.direction,s.position);t.styles(Ot(Ot({},s),{transformOrigin:u})),hRe(t.node(),h);var d=xrt(br(n._offscreen||n.querySelector(Mi.mainGroup.class)),e,r),p=d.x,g=d.y,v=qg(e.node(),{transform:"translate(".concat(p,", ").concat(g,")")},i);return v}function Trt(t,e,n,r){var i=n.titleText,a=n.classNamePrefix;return t.selectAll(Mi.title.class).data([{title:i}].filter(function(o){return!!o.title}),function(o,s){return o.title}).join(function(o){var s=o.append(function(){return Ry(i)}).attr("className",Mi.title.name).transition(function(){return vse(br(this),t,e,n,r.enter)});return Rd(s,Mi.title,vo.title,a),s},function(o){return o.transition(function(){return vse(br(this),t,e,n,r.update)})},function(o){return o.remove()}).transitions()}function mse(t,e,n,r){var i=t.showLine,a=t.showTick,o=t.showLabel,s=t.classNamePrefix,l=e.maybeAppendByClassName(Mi.lineGroup,"g");Rd(l,Mi.lineGroup,vo.lineGroup,s);var c=Zf(i,l,function(p){return Unt(p,t,r)})||[],u=e.maybeAppendByClassName(Mi.tickGroup,"g");Rd(u,Mi.tickGroup,vo.tickGroup,s);var f=Zf(a,u,function(p){return Ert(p,n,t,r)})||[],h=e.maybeAppendByClassName(Mi.labelGroup,"g");Rd(h,Mi.labelGroup,vo.labelGroup,s);var d=Zf(o,h,function(p){return vrt(p,n,t,r,e.node())})||[];return _r(_r(_r([],Ae(c),!1),Ae(f),!1),Ae(d),!1).filter(function(p){return!!p})}var N4=(function(t){Cr(e,t);function e(n){return t.call(this,n,KJ)||this}return e.prototype.render=function(n,r,i){var a=this,o=n.titleText,s=n.data,l=n.animate,c=n.showTitle,u=n.showGrid,f=n.dataThreshold,h=n.truncRange,d=n.classNamePrefix,p=r.className||"axis";d?r.attr("className","".concat(p," ").concat(d,"axis")):r.className||r.attr("className","axis");var g=utt(s,f).filter(function(w){var C=w.value;return!(h&&C>h[0]&&C<h[1])}),v=cse(i===void 0?l:i),y=br(r).maybeAppendByClassName(Mi.gridGroup,"g");Rd(y,Mi.gridGroup,vo.gridGroup,d);var _=Zf(u,y,function(w){return Hnt(w,g,n,v)})||[],E=br(r).maybeAppendByClassName(Mi.mainGroup,"g");Rd(E,Mi.mainGroup,vo.mainGroup,d),o&&(!this.initialized&&v.enter||this.initialized&&v.update)&&mse(n,br(this.offscreenGroup),g,cse(!1));var x=mse(n,br(E.node()),g,v),T=br(r).maybeAppendByClassName(Mi.titleGroup,"g");Rd(T,Mi.titleGroup,vo.titleGroup,d);var S=Zf(c,T,function(w){return Trt(w,a,n,v)})||[];return _r(_r(_r([],Ae(_),!1),Ae(x),!1),Ae(S),!1).flat().filter(function(w){return!!w})},e})(Es);function fl(t,e,n){return n?"".concat(t," ").concat(n,"legend-").concat(e):t}function Art(t,e,n){var r=Math.round((t-n)/e);return n+r*e}function wrt(t,e,n){var r=1.4,i=r*n;return[["M",t-n,e-i],["L",t+n,e-i],["L",t+n,e+i],["L",t-n,e+i],["Z"]]}var BRe=1.4,FRe=.4;function Ort(t,e,n){var r=n,i=r*BRe,a=r/2,o=r/6,s=t+i*FRe;return[["M",t,e],["L",s,e+a],["L",t+i,e+a],["L",t+i,e-a],["L",s,e-a],["Z"],["M",s,e+o],["L",t+i-2,e+o],["M",s,e-o],["L",t+i-2,e-o]]}function Crt(t,e,n){var r=n,i=r*BRe,a=r/2,o=r/6,s=e+i*FRe;return[["M",t,e],["L",t-a,s],["L",t-a,e+i],["L",t+a,e+i],["L",t+a,s],["Z"],["M",t-o,s],["L",t-o,e+i-2],["M",t+o,s],["L",t+o,e+i-2]]}ja.registerSymbol("hiddenHandle",wrt);ja.registerSymbol("verticalHandle",Ort);ja.registerSymbol("horizontalHandle",Crt);function Rrt(t,e,n,r){var i,a=Ae(t,2),o=a[0],s=a[1],l=Ae(e,2),c=l[0],u=l[1],f=Ae(n,2),h=f[0],d=f[1],p=Ae([c,u],2),g=p[0],v=p[1],y=v-g;return g>v&&(i=Ae([v,g],2),g=i[0],v=i[1]),y>s-o?[o,s]:g<o?h===o&&d===v?[o,v]:[o,y+o]:v>s?d===s&&h===g?[g,s]:[s-y,s]:[g,v]}function Cm(t,e,n){return t===void 0&&(t="horizontal"),t==="horizontal"?e:n}var hl={title:"title",item:"item",marker:"marker",label:"label",value:"value",focusIcon:"focus-icon",background:"background",ribbon:"ribbon",track:"track",selection:"selection",handle:"handle",handleMarker:"handle-marker",handleLabel:"handle-label",indicator:"indicator",prevBtn:"prev-btn",nextBtn:"next-btn",pageInfo:"page-info"},bE=Zp({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),URe={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},Mrt=(function(t){Cr(e,t);function e(n){return t.call(this,n,URe)||this}return e.prototype.render=function(n,r){var i=br(r).maybeAppendByClassName(bE.markerGroup,"g");this.renderMarker(i);var a=br(r).maybeAppendByClassName(bE.labelGroup,"g");this.renderLabel(a)},e.prototype.renderMarker=function(n){var r=this,i=this.attributes,a=i.orientation,o=i.classNamePrefix,s=i.markerSymbol,l=s===void 0?Cm(a,"horizontalHandle","verticalHandle"):s;Zf(!!l,n,function(c){var u=ii(r.attributes,"marker"),f=Ot({symbol:l},u),h=fl(bE.marker.name,hl.handleMarker,o);if(r.marker=c.maybeAppendByClassName(bE.marker,function(){return new ja({style:f,className:h})}).update(f),o){var d=r.marker.node().querySelector(".marker");if(d){var p=d.getAttribute("class")||"",g=p.split(" ")[0],v=fl(g,hl.handleMarker,o);d.setAttribute("class",v)}}})},e.prototype.renderLabel=function(n){var r=this,i=this.attributes,a=i.showLabel,o=i.orientation,s=i.spacing,l=s===void 0?0:s,c=i.formatter,u=i.classNamePrefix;Zf(a,n,function(f){var h,d=ii(r.attributes,"label"),p=d.text,g=yo(d,["text"]),v=((h=f.select(bE.marker.class))===null||h===void 0?void 0:h.node().getBBox())||{},y=v.width,_=y===void 0?0:y,E=v.height,x=E===void 0?0:E,T=Ae(Cm(o,[0,x+l,"center","top"],[_+l,0,"start","middle"]),4),S=T[0],w=T[1],C=T[2],D=T[3],L=fl(bE.label.name,hl.handleLabel,u);f.maybeAppendByClassName(bE.label,"text").attr("className",L).styles(Ot(Ot({},g),{x:S,y:w,text:c(p).toString(),textAlign:C,textBaseline:D}))})},e})(Es),jRe={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},Prt=Il({},jRe,{}),Nrt=Il({},jRe,Sm(URe,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),Irt=.01,Yl=Zp({title:"title",html:"html",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),D7=Zp({text:"text"},"title");function Lrt(t,e){var n=t.attributes,r=n.position,i=n.spacing,a=n.inset,o=n.text,s=t.getBBox(),l=e.getBBox(),c=w4(r),u=Ae(Nl(o?i:0),4),f=u[0],h=u[1],d=u[2],p=u[3],g=Ae(Nl(a),4),v=g[0],y=g[1],_=g[2],E=g[3],x=Ae([p+h,f+d],2),T=x[0],S=x[1],w=Ae([E+y,v+_],2),C=w[0],D=w[1];if(c[0]==="l")return new Ho(s.x,s.y,l.width+s.width+T+C,Math.max(l.height+D,s.height));if(c[0]==="t")return new Ho(s.x,s.y,Math.max(l.width+C,s.width),l.height+s.height+S+D);var L=Ae([e.attributes.width||l.width,e.attributes.height||l.height],2),B=L[0],I=L[1];return new Ho(l.x,l.y,B+s.width+T+C,I+s.height+S+D)}function krt(t,e){var n=Object.entries(e).reduce(function(r,i){var a=Ae(i,2),o=a[0],s=a[1],l=t.node().attr(o);return l||(r[o]=s),r},{});t.styles(n)}function Drt(t){var e,n,r,i,a=t,o=a.width,s=a.height,l=a.position,c=Ae([+o/2,+s/2],2),u=c[0],f=c[1],h=Ae([+u,+f,"center","middle"],4),d=h[0],p=h[1],g=h[2],v=h[3],y=w4(l);return y.includes("l")&&(e=Ae([0,"start"],2),d=e[0],g=e[1]),y.includes("r")&&(n=Ae([+o,"end"],2),d=n[0],g=n[1]),y.includes("t")&&(r=Ae([0,"top"],2),p=r[0],v=r[1]),y.includes("b")&&(i=Ae([+s,"bottom"],2),p=i[0],v=i[1]),{x:d,y:p,textAlign:g,textBaseline:v}}var zRe=(function(t){Cr(e,t);function e(n){return t.call(this,n,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return e.prototype.getAvailableSpace=function(){var n=this,r=this.attributes,i=r.width,a=r.height,o=r.position,s=r.spacing,l=r.inset,c=n.querySelector(D7.text.class);if(!c)return new Ho(0,0,+i,+a);var u=c.getBBox(),f=u.width,h=u.height,d=Ae(Nl(s),4),p=d[0],g=d[1],v=d[2],y=d[3],_=Ae([0,0,+i,+a],4),E=_[0],x=_[1],T=_[2],S=_[3],w=w4(o);if(w.includes("i"))return new Ho(E,x,T,S);w.forEach(function(N,M){var k,z,j,V;N==="t"&&(k=Ae(M===0?[h+v,+a-h-v]:[0,+a],2),x=k[0],S=k[1]),N==="r"&&(z=Ae([+i-f-y],1),T=z[0]),N==="b"&&(j=Ae([+a-h-p],1),S=j[0]),N==="l"&&(V=Ae(M===0?[f+g,+i-f-g]:[0,+i],2),E=V[0],T=V[1])});var C=Ae(Nl(l),4),D=C[0],L=C[1],B=C[2],I=C[3],U=Ae([I+L,D+B],2),$=U[0],X=U[1];return new Ho(E+I,x+D,T-$,S-X)},e.prototype.getBBox=function(){return this.title?this.title.getBBox():new Ho(0,0,0,0)},e.prototype.render=function(n,r){var i=this;n.width,n.height,n.position,n.spacing;var a=n.classNamePrefix,o=yo(n,["width","height","position","spacing","classNamePrefix"]),s=Ae(My(o),1),l=s[0],c=Drt(n),u=c.x,f=c.y,h=c.textAlign,d=c.textBaseline;Zf(!!o.text,br(r),function(p){var g=fl(D7.text.name,hl.title,a);i.title=p.maybeAppendByClassName(D7.text,"text").attr("className",g).styles(l).call(krt,{x:u,y:f,textAlign:h,textBaseline:d}).node()})},e})(Es),Bf=Zp({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),Brt=(function(t){Cr(e,t);function e(n){var r=t.call(this,n,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:ztt(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return r.playState="idle",r.contentGroup=r.appendChild(new yc({class:Bf.contentGroup.name})),r.playWindow=r.contentGroup.appendChild(new yc({class:Bf.playWindow.name})),r.innerCurrPage=r.defaultPage,r}return Object.defineProperty(e.prototype,"defaultPage",{get:function(){var n=this.attributes.defaultPage;return ga(n,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageShape",{get:function(){var n=this.pageViews,r=Ae(Ett(n.map(function(f){var h=f.getBBox(),d=h.width,p=h.height;return[d,p]})).map(function(f){return Math.max.apply(Math,_r([],Ae(f),!1))}),2),i=r[0],a=r[1],o=this.attributes,s=o.pageWidth,l=s===void 0?i:s,c=o.pageHeight,u=c===void 0?a:c;return{pageWidth:l,pageHeight:u}},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(e.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=t.prototype.getBBox.call(this),r=n.x,i=n.y,a=this.controllerShape,o=this.pageShape,s=o.pageWidth,l=o.pageHeight;return new Ho(r,i,s+a.width,l)},e.prototype.goTo=function(n){var r=this,i=this.attributes.animate,a=this,o=a.currPage,s=a.playState,l=a.playWindow,c=a.pageViews;if(s!=="idle"||n<0||c.length<=0||n>=c.length)return null;c[o].setLocalPosition(0,0),this.prepareFollowingPage(n);var u=Ae(this.getFollowingPageDiff(n),2),f=u[0],h=u[1];this.playState="running";var d=SRe(l,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-f,", ").concat(-h,")")}],i);return Nw(d,function(){r.innerCurrPage=n,r.playState="idle",r.setVisiblePages([n]),r.updatePageInfo()}),d},e.prototype.prev=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i<=0)return null;var a=n?(i-1+r)%r:ga(i-1,0,r);return this.goTo(a)},e.prototype.next=function(){var n=this.attributes.loop,r=this.pageViews.length,i=this.currPage;if(!n&&i>=r-1)return null;var a=n?(i+1)%r:ga(i+1,0,r);return this.goTo(a)},e.prototype.renderClipPath=function(n){var r=this.pageShape,i=r.pageWidth,a=r.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=n.maybeAppendByClassName(Bf.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},e.prototype.setVisiblePages=function(n){this.playWindow.children.forEach(function(r,i){n.includes(i)?Pw(r):Bp(r)})},e.prototype.adjustControllerLayout=function(){var n=this,r=n.prevBtnGroup,i=n.nextBtnGroup,a=n.pageInfoGroup,o=this.attributes,s=o.orientation,l=o.controllerPadding,c=a.getBBox(),u=c.width;c.height;var f=Ae(s==="horizontal"?[-180,0]:[-90,90],2),h=f[0],d=f[1];r.setLocalEulerAngles(h),i.setLocalEulerAngles(d);var p=r.getBBox(),g=p.width,v=p.height,y=i.getBBox(),_=y.width,E=y.height,x=Math.max(g,u,_),T=s==="horizontal"?{offset:[[0,0],[g/2+l,0],[g+u+l*2,0]],textAlign:"start"}:{offset:[[x/2,-v-l],[x/2,0],[x/2,E+l]],textAlign:"center"},S=Ae(T.offset,3),w=Ae(S[0],2),C=w[0],D=w[1],L=Ae(S[1],2),B=L[0],I=L[1],U=Ae(S[2],2),$=U[0],X=U[1],N=T.textAlign,M=a.querySelector("text");M&&(M.style.textAlign=N),r.setLocalPosition(C,D),a.setLocalPosition(B,I),i.setLocalPosition($,X)},e.prototype.updatePageInfo=function(){var n,r=this,i=r.currPage,a=r.pageViews,o=r.attributes.formatter;a.length<2||((n=this.pageInfoGroup.querySelector(Bf.pageInfo.class))===null||n===void 0||n.attr("text",o(i+1,a.length)),this.adjustControllerLayout())},e.prototype.getFollowingPageDiff=function(n){var r=this.currPage;if(r===n)return[0,0];var i=this.attributes.orientation,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=n<r?-1:1;return i==="horizontal"?[l*o,0]:[0,l*s]},e.prototype.prepareFollowingPage=function(n){var r=this,i=r.currPage,a=r.pageViews;if(this.setVisiblePages([n,i]),n!==i){var o=Ae(this.getFollowingPageDiff(n),2),s=o[0],l=o[1];a[n].setLocalPosition(s,l)}},e.prototype.renderController=function(n){var r=this,i=this.attributes,a=i.controllerSpacing,o=i.classNamePrefix,s=o===void 0?"":o,l=this.pageShape,c=l.pageWidth,u=l.pageHeight,f=this.pageViews.length>=2,h=n.maybeAppendByClassName(Bf.controller,"g");if(A4(h.node(),f),!!f){var d=ii(this.attributes,"button"),p=ii(this.attributes,"pageNum"),g=Ae(My(d),2),v=g[0],y=g[1],_=v.size,E=yo(v,["size"]),x=!h.select(Bf.prevBtnGroup.class).node(),T=h.maybeAppendByClassName(Bf.prevBtnGroup,"g").styles(y);this.prevBtnGroup=T.node();var S=T.maybeAppendByClassName(Bf.prevBtn,"path");if(s){var w=fl(Bf.prevBtn.name,hl.prevBtn,s);S.node().setAttribute("class",w)}var C=h.maybeAppendByClassName(Bf.nextBtnGroup,"g").styles(y);this.nextBtnGroup=C.node();var D=C.maybeAppendByClassName(Bf.nextBtn,"path");if(s){var L=fl(Bf.nextBtn.name,hl.nextBtn,s);D.node().setAttribute("class",L)}[S,D].forEach(function($){$.styles(Ot(Ot({},E),{transformOrigin:"center"})),YJ($.node(),_)});var B=h.maybeAppendByClassName(Bf.pageInfoGroup,"g");this.pageInfoGroup=B.node();var I=B.maybeAppendByClassName(Bf.pageInfo,"text");if(I.styles(p),s){var U=fl(Bf.pageInfo.name,hl.pageInfo,s);I.node().setAttribute("class",U)}this.updatePageInfo(),h.node().setLocalPosition(c+a,u/2),x&&(this.prevBtnGroup.addEventListener("click",function(){r.prev()}),this.nextBtnGroup.addEventListener("click",function(){r.next()}))}},e.prototype.render=function(n,r){var i=n.x,a=i===void 0?0:i,o=n.y,s=o===void 0?0:o;this.attr("transform","translate(".concat(a,", ").concat(s,")"));var l=br(r);this.renderClipPath(l),this.renderController(l),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},e.prototype.bindEvents=function(){var n=this,r=Aw(function(){return n.render(n.attributes,n)},50);this.playWindow.addEventListener(ta.INSERTED,r),this.playWindow.addEventListener(ta.REMOVED,r)},e})(Es),sa,Frt="component-poptip",Qi={CONTAINER:"component-poptip",ARROW:"component-poptip-arrow",TEXT:"component-poptip-text"},yse=(sa={},sa[".".concat(Qi.CONTAINER)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},sa[".".concat(Qi.TEXT)]={"text-align":"center"},sa[".".concat(Qi.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, -100%)"},sa[".".concat(Qi.CONTAINER,"[data-position='left']")]={transform:"translate(-100%, -50%)"},sa[".".concat(Qi.CONTAINER,"[data-position='right']")]={transform:"translate(0, -50%)"},sa[".".concat(Qi.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},sa[".".concat(Qi.CONTAINER,"[data-position='top-left']")]={transform:"translate(0,-100%)"},sa[".".concat(Qi.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},sa[".".concat(Qi.CONTAINER,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},sa[".".concat(Qi.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},sa[".".concat(Qi.CONTAINER,"[data-position='right-top']")]={transform:"translate(0, 0)"},sa[".".concat(Qi.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},sa[".".concat(Qi.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},sa[".".concat(Qi.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},sa[".".concat(Qi.ARROW)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},sa[".".concat(Qi.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},sa["[data-position='top'] .".concat(Qi.ARROW)]={bottom:"-2px"},sa[".".concat(Qi.CONTAINER,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},sa["[data-position='left'] .".concat(Qi.ARROW)]={right:"-2px"},sa[".".concat(Qi.CONTAINER,"[data-position='right']")]={transform:"translate(5px, -50%)"},sa["[data-position='right'] .".concat(Qi.ARROW)]={left:"-2px"},sa[".".concat(Qi.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},sa["[data-position='bottom'] .".concat(Qi.ARROW)]={top:"-2px"},sa[".".concat(Qi.CONTAINER,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},sa["[data-position='top-left'] .".concat(Qi.ARROW)]={left:"10px",bottom:"-2px"},sa[".".concat(Qi.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},sa["[data-position='top-right'] .".concat(Qi.ARROW)]={right:"10px",bottom:"-2px"},sa[".".concat(Qi.CONTAINER,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},sa["[data-position='left-top'] .".concat(Qi.ARROW)]={right:"-2px",top:"8px"},sa[".".concat(Qi.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},sa["[data-position='left-bottom'] .".concat(Qi.ARROW)]={right:"-2px",bottom:"8px"},sa[".".concat(Qi.CONTAINER,"[data-position='right-top']")]={transform:"translate(5px, 0)"},sa["[data-position='right-top'] .".concat(Qi.ARROW)]={left:"-2px",top:"8px"},sa[".".concat(Qi.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},sa["[data-position='right-bottom'] .".concat(Qi.ARROW)]={left:"-2px",bottom:"8px"},sa[".".concat(Qi.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},sa["[data-position='bottom-left'] .".concat(Qi.ARROW)]={top:"-2px",left:"8px"},sa[".".concat(Qi.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},sa["[data-position='bottom-right'] .".concat(Qi.ARROW)]={top:"-2px",right:"8px"},sa),Urt=void 0;function jrt(t,e,n,r,i,a){if(i===void 0&&(i=!1),a===void 0&&(a=!1),a)return[t,e];var o=n.getBoundingClientRect(),s=o.x,l=o.y,c=o.width,u=o.height;switch(r){case"top":return i?[s+c/2,l]:[t,l];case"left":return i?[s,l+u/2]:[s,e];case"bottom":return i?[s+c/2,l+u]:[t,l+u];case"right":return i?[s+c,l+u/2]:[s+c,e];case"top-right":case"right-top":return[s+c,l];case"left-bottom":case"bottom-left":return[s,l+u];case"right-bottom":case"bottom-right":return[s+c,l+u];case"top-left":case"left-top":default:return[s,l]}}var zrt=function(t){var e;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e||(e=t.apply(Urt,n)),e}};function $rt(t){var e=t&&document.getElementById(t);return e||(e=document.createElement("div"),e.setAttribute("id",t),document.body.appendChild(e)),e}function Hrt(t){var e=zrt($rt)(t);return e}var Grt=(function(t){Cr(e,t);function e(n){var r=t.call(this,Nt({style:{id:Frt}},e.defaultOptions,n))||this;return r.visibility="visible",r.map=new Map,r.domStyles="",r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(e.prototype,"visible",{get:function(){return this.visibility==="visible"},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){this.visibility=this.style.visibility,this.updatePoptipElement()},e.prototype.update=function(n){this.attr(Nt({},this.style,n)),this.render(this.attributes,this)},e.prototype.bind=function(n,r){var i=this;if(n){var a=this.style.text,o=function(l){var c=n,u=i.style,f=a;if(r){var h=typeof r=="function"?r.call(null,l):r,d=h.html,p=h.target,g=yo(h,["html","target"]);u=VAe({},i.style,g),(p||p===!1)&&(c=p),typeof d=="string"&&(f=d)}var v=u.position,y=u.arrowPointAtCenter,_=u.follow,E=u.offset;if(c){var x=l,T=x.clientX,S=x.clientY,w=Ae(jrt(T,S,c,v,y,_),2),C=w[0],D=w[1];i.showTip(C,D,{text:f,position:v,offset:E})}else i.hideTip()},s=function(){i.hideTip()};n.addEventListener("mousemove",o),n.addEventListener("mouseleave",s),this.map.set(n,[o,s])}},e.prototype.unbind=function(n){if(this.map.has(n)){var r=Ae(this.map.get(n)||[],2),i=r[0],a=r[1];i&&n.removeEventListener("mousemove",i),a&&n.removeEventListener("mouseleave",a),this.map.delete(n)}},e.prototype.clear=function(){this.container.innerHTML=""},e.prototype.destroy=function(){var n=this,r;_r([],Ae(this.map.keys()),!1).forEach(function(i){return n.unbind(i)}),(r=this.container)===null||r===void 0||r.remove(),t.prototype.destroy.call(this)},e.prototype.showTip=function(n,r,i){var a=Wr(i,"text");if(!(a&&typeof a!="string")&&(this.applyStyles(),n&&r&&i)){var o=i.offset,s=i.position;if(s&&this.container.setAttribute("data-position",s),this.setOffsetPosition(n,r,o),typeof a=="string"){var l=this.container.querySelector(".".concat(Qi.TEXT));l&&(l.innerHTML=a)}this.visibility="visible",this.container.style.visibility="visible"}},e.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},e.prototype.getContainer=function(){return this.container},e.prototype.getClassName=function(){var n=this.style.containerClassName;return"".concat(Qi.CONTAINER).concat(n?" ".concat(n):"")},e.prototype.initShape=function(){var n=this,r=this.style.id;this.container=Hrt(r),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",function(){return n.showTip()}),this.container.addEventListener("mouseleave",function(){return n.hideTip()})},e.prototype.updatePoptipElement=function(){var n=this.container;this.clear();var r=this.style,i=r.id,a=r.template,o=r.text;this.container.setAttribute("id",i),this.container.className=this.getClassName();var s='<span class="'.concat(Qi.ARROW,'"></span>');n.innerHTML=s,$i(a)?n.innerHTML+=a:a&&P9e(a)&&n.appendChild(a),o&&(n.getElementsByClassName(Qi.TEXT)[0].textContent=o),this.applyStyles(),this.container.style.visibility=this.visibility},e.prototype.applyStyles=function(){var n=Il({},yse,this.style.domStyles),r=Object.entries(n).reduce(function(a,o){var s=Ae(o,2),l=s[0],c=s[1],u=Object.entries(c).reduce(function(f,h){var d=Ae(h,2),p=d[0],g=d[1];return"".concat(f).concat(p,": ").concat(g,";")},"");return"".concat(a).concat(l,"{").concat(u,"}")},"");if(this.domStyles!==r){this.domStyles=r;var i=this.container.querySelector("style");i&&this.container.removeChild(i),i=document.createElement("style"),i.innerHTML=r,this.container.appendChild(i)}},e.prototype.setOffsetPosition=function(n,r,i){i===void 0&&(i=this.style.offset);var a=Ae(i,2),o=a[0],s=o===void 0?0:o,l=a[1],c=l===void 0?0:l;this.container.style.left="".concat(n+s,"px"),this.container.style.top="".concat(r+c,"px")},e.tag="poptip",e.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:yse,template:'<div class="'.concat(Qi.TEXT,'"></div>')}},e})(Es),oc=Zp({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",focusGroup:"focus-group",focus:"focus",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),Wrt={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}};function Vrt(t){var e=t.querySelector(oc.marker.class);return e?e.style:{}}var Yrt=(function(t){Cr(e,t);function e(n,r){var i=t.call(this,n,{span:[1,1],marker:function(){return new Wm({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this;return i.keyFields={},i.keyFields=r||{},i}return Object.defineProperty(e.prototype,"showValue",{get:function(){var n=this.attributes.valueText;return n?typeof n=="string"||typeof n=="number"?n!=="":typeof n=="function"?!0:n.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actualSpace",{get:function(){var n=this.labelGroup,r=this.valueGroup,i=this.attributes,a=i.markerSize,o=i.focus,s=i.focusMarkerSize,l=n.node().getBBox(),c=l.width,u=l.height,f=r.node().getBBox(),h=f.width,d=f.height,p=o?s??12:0;return{markerWidth:a,labelWidth:c,valueWidth:h,focusWidth:p,height:Math.max(a,u,d)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"span",{get:function(){var n=this.attributes.span;if(!n)return[1,1];var r=Ae(Nl(n),2),i=r[0],a=r[1],o=this.showValue?a:0,s=i+o;return[i/s,o/s]},enumerable:!1,configurable:!0}),e.prototype.setAttribute=function(n,r){t.prototype.setAttribute.call(this,n,r)},Object.defineProperty(e.prototype,"shape",{get:function(){var n,r=this.attributes,i=r.markerSize,a=r.width,o=this.actualSpace,s=o.markerWidth,l=o.focusWidth,c=o.height,u=this.actualSpace,f=u.labelWidth,h=u.valueWidth,d=Ae(this.spacing,3),p=d[0],g=d[1],v=d[2];if(a){var y=a-i-p-g-l-v,_=Ae(this.span,2),E=_[0],x=_[1];n=Ae([E*y,x*y],2),f=n[0],h=n[1]}var T=s+f+h+p+g+l+v;return{width:T,height:c,markerWidth:s,labelWidth:f,valueWidth:h,focusWidth:l}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spacing",{get:function(){var n=this.attributes,r=n.spacing,i=n.focus;if(!r)return[0,0,0];var a=Ae(Nl(r),3),o=a[0],s=a[1],l=a[2];return[o,this.showValue?s:0,i?l:0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){var n=this.shape,r=n.markerWidth,i=n.labelWidth,a=n.valueWidth,o=n.focusWidth,s=n.width,l=n.height,c=Ae(this.spacing,3),u=c[0],f=c[1],h=c[2];return{height:l,width:s,markerWidth:r,labelWidth:i,valueWidth:a,focusWidth:o,position:[r/2,r+u,r+i+u+f,r+i+a+u+f+h+o/2]}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleSize",{get:function(){var n=Vrt(this.markerGroup.node()),r=this.attributes,i=r.markerSize,a=r.markerStrokeWidth,o=a===void 0?n.strokeWidth:a,s=r.markerLineWidth,l=s===void 0?n.lineWidth:s,c=r.markerStroke,u=c===void 0?n.stroke:c,f=+(o||l||(u?1:0))*Math.sqrt(2),h=this.markerGroup.node().getBBox(),d=h.width,p=h.height;return(1-f/Math.max(d,p))*i},enumerable:!1,configurable:!0}),e.prototype.renderMarker=function(n){var r=this,i=this.attributes,a=i.marker,o=i.classNamePrefix,s=ii(this.attributes,"marker");this.markerGroup=n.maybeAppendByClassName(oc.markerGroup,"g").style("zIndex",0),Zf(!!a,this.markerGroup,function(){var l,c=r.markerGroup.node(),u=(l=c.childNodes)===null||l===void 0?void 0:l[0],f=fl(oc.marker.name,hl.marker,o),h=typeof a=="string"?new ja({style:{symbol:a},className:f}):a();if(u)if(h.nodeName===u.nodeName)u instanceof ja?u.update(Ot(Ot({},s),{symbol:a})):(vtt(u,h),br(u).styles(s));else{if(u.remove(),!(h instanceof ja)){var p=fl(oc.marker.name,hl.marker,o);h.className=p}br(h).styles(s),c.appendChild(h)}else{if(!(h instanceof ja)){var d=fl(oc.marker.name,hl.marker,o);h.className=d,br(h).styles(s)}c.appendChild(h)}r.markerGroup.node().scale(1/r.markerGroup.node().getScale()[0]);var g=YJ(r.markerGroup.node(),r.scaleSize);r.markerGroup.node().style._transform="scale(".concat(g,")")})},e.prototype.renderLabel=function(n){var r=ii(this.attributes,"label"),i=r.text,a=yo(r,["text"]),o=this.attributes.classNamePrefix;this.labelGroup=n.maybeAppendByClassName(oc.labelGroup,"g").style("zIndex",0);var s=fl(oc.label.name,hl.label,o),l=this.labelGroup.maybeAppendByClassName(oc.label,function(){return Ry(i)});l.node().setAttribute("class",s),l.styles(a)},e.prototype.renderValue=function(n){var r=this,i=ii(this.attributes,"value"),a=i.text,o=yo(i,["text"]),s=this.attributes.classNamePrefix;this.valueGroup=n.maybeAppendByClassName(oc.valueGroup,"g").style("zIndex",0),Zf(this.showValue,this.valueGroup,function(){var l=fl(oc.value.name,hl.value,s),c=r.valueGroup.maybeAppendByClassName(oc.value,function(){return Ry(a)});c.node().setAttribute("class",l),c.styles(o)})},e.prototype.createPoptip=function(){var n=this.attributes.poptip,r=n||{};r.render;var i=yo(r,["render"]),a=new Grt({style:Il(Wrt,i)});return this.poptipGroup=a,a},e.prototype.bindPoptip=function(n){var r=this,i=this.attributes.poptip;if(i){var a=this.poptipGroup||this.createPoptip();a.bind(n,function(){var o=r.attributes,s=o.labelText,l=o.valueText,c=o.markerFill,u=typeof s=="string"?s:s?.attr("text"),f=typeof l=="string"?l:l?.attr("text");if(typeof i.render=="function")return{html:i.render(Ot(Ot({},r.keyFields),{label:u,value:f,color:c}))};var h="";return(typeof u=="string"||typeof u=="number")&&(h+='<div class="component-poptip-label">'.concat(u,"</div>")),(typeof f=="string"||typeof f=="number")&&(h+='<div class="component-poptip-value">'.concat(f,"</div>")),{html:h}})}},e.prototype.renderFocus=function(n){var r=this,i=this.attributes,a=i.focus,o=i.focusMarkerSize,s=i.classNamePrefix,l={x:0,y:0,size:o,opacity:.6,symbol:"focus",stroke:"#aaaaaa",lineWidth:1};mr(a)||(this.focusGroup=n.maybeAppendByClassName(oc.focusGroup,"g").style("zIndex",0),Zf(a,this.focusGroup,function(){var c=fl(oc.focus.name,hl.focusIcon,s),u=new ja({style:Ot(Ot({},l),{symbol:"focus"}),className:c}),f=new Wm({style:{r:l.size/2,fill:"transparent"}}),h=r.focusGroup.node();h.appendChild(f),h.appendChild(u),u.update({opacity:0}),n.node().addEventListener("pointerenter",function(){u.update({opacity:1})}),n.node().addEventListener("pointerleave",function(){u.update({opacity:0})})}))},e.prototype.renderPoptip=function(n){var r=this,i=this.attributes.poptip;if(i){var a=n.maybeAppendByClassName(oc.value,"g").node(),o=n.maybeAppendByClassName(oc.label,"g").node();[a,o].forEach(function(s){s&&r.bindPoptip(s)})}},e.prototype.renderBackground=function(n){var r=this.shape,i=r.width,a=r.height,o=ii(this.attributes,"background");this.background=n.maybeAppendByClassName(oc.backgroundGroup,"g").style("zIndex",-1);var s=this.background.maybeAppendByClassName(oc.background,"rect");s.styles(Ot({width:i,height:a},o));var l=this.attributes.classNamePrefix,c=l===void 0?"":l;if(c){var u=fl(oc.background.name,hl.background,c);s.node().setAttribute("class",u)}},e.prototype.adjustLayout=function(){var n=this.layout,r=n.labelWidth,i=n.valueWidth,a=n.height,o=Ae(n.position,4),s=o[0],l=o[1],c=o[2],u=o[3],f=a/2;this.markerGroup.styles({transform:"translate(".concat(s,", ").concat(f,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(l,", ").concat(f,")")}),this.focusGroup&&this.focusGroup.styles({transform:"translate(".concat(u,", ").concat(f,")")}),oX(this.labelGroup.select(oc.label.class).node(),Math.ceil(r)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(c,", ").concat(f,")")}),oX(this.valueGroup.select(oc.value.class).node(),Math.ceil(i)))},e.prototype.render=function(n,r){var i=br(r),a=n.x,o=a===void 0?0:a,s=n.y,l=s===void 0?0:s;i.styles({transform:"translate(".concat(o,", ").concat(l,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.renderPoptip(i),this.renderFocus(i),this.adjustLayout()},e})(Es),EE=Zp({page:"item-page",navigator:"navigator",item:"item"},"items"),_se=function(t,e,n){return n===void 0&&(n=!0),t?e(t):n},Xrt=(function(t){Cr(e,t);function e(n){var r=t.call(this,n,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:G8,mouseenter:G8,mouseleave:G8})||this;return r.navigatorShape=[0,0],r}return Object.defineProperty(e.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){var n=this.attributes,r=n.gridRow,i=n.gridCol,a=n.data;if(!r&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return r&&i?[r,i]:r?[r,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderData",{get:function(){var n=this.attributes,r=n.data,i=n.layout,a=n.poptip,o=n.focus,s=n.focusMarkerSize,l=n.classNamePrefix,c=ii(this.attributes,"item"),u=r.map(function(f,h){var d=f.id,p=d===void 0?h:d,g=f.label,v=f.value;return{id:"".concat(p),index:h,style:Ot({layout:i,labelText:g,valueText:v,poptip:a,focus:o,focusMarkerSize:s,classNamePrefix:l},Object.fromEntries(Object.entries(c).map(function(y){var _=Ae(y,2),E=_[0],x=_[1];return[E,$h(x,[f,h,r])]})))}});return u},enumerable:!1,configurable:!0}),e.prototype.getGridLayout=function(){var n=this,r=this.attributes,i=r.orientation,a=r.width,o=r.rowPadding,s=r.colPadding,l=Ae(this.navigatorShape,1),c=l[0],u=Ae(this.grid,2),f=u[0],h=u[1],d=h*f,p=0;return this.pageViews.children.map(function(g,v){var y,_,E=Math.floor(v/d),x=v%d,T=n.ifHorizontal(h,f),S=[Math.floor(x/T),x%T];i==="vertical"&&S.reverse();var w=Ae(S,2),C=w[0],D=w[1],L=(a-c-(h-1)*s)/h,B=g.getBBox().height,I=Ae([0,0],2),U=I[0],$=I[1];return i==="horizontal"?(y=Ae([p,C*(B+o)],2),U=y[0],$=y[1],p=D===h-1?0:p+L+s):(_=Ae([D*(L+s),p],2),U=_[0],$=_[1],p=C===f-1?0:p+B+o),{page:E,index:v,row:C,col:D,pageIndex:x,width:L,height:B,x:U,y:$}})},e.prototype.getFlexLayout=function(){var n=this.attributes,r=n.width,i=n.height,a=n.rowPadding,o=n.colPadding,s=Ae(this.navigatorShape,1),l=s[0],c=Ae(this.grid,2),u=c[0],f=c[1],h=Ae([r-l,i],2),d=h[0],p=h[1],g=Ae([0,0,0,0,0,0,0,0],8),v=g[0],y=g[1],_=g[2],E=g[3],x=g[4],T=g[5],S=g[6],w=g[7];return this.pageViews.children.map(function(C,D){var L,B,I,U,$=C.getBBox(),X=$.width,N=$.height,M=S===0?0:o,k=S+M+X;if(k<=d&&_se(x,function(j){return j<f}))return L=Ae([S+M,w,k],3),v=L[0],y=L[1],S=L[2],{width:X,height:N,x:v,y,page:_,index:D,pageIndex:E++,row:T,col:x++};B=Ae([T+1,0,0,w+N+a],4),T=B[0],x=B[1],S=B[2],w=B[3];var z=w+N;return z<=p&&_se(T,function(j){return j<u})?(I=Ae([S,w,X],3),v=I[0],y=I[1],S=I[2],{width:X,height:N,x:v,y,page:_,index:D,pageIndex:E++,row:T,col:x++}):(U=Ae([0,0,X,0,_+1,0,0,0],8),v=U[0],y=U[1],S=U[2],w=U[3],_=U[4],E=U[5],T=U[6],x=U[7],{width:X,height:N,x:v,y,page:_,index:D,pageIndex:E++,row:T,col:x++})})},Object.defineProperty(e.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var n=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,r=n.call(this);return r.slice(-1)[0].page>0?(this.navigatorShape=[55,0],n.call(this)):r},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){var i=this.attributes.orientation;return Cm(i,n,r)},e.prototype.flattenPage=function(n){n.querySelectorAll(EE.item.class).forEach(function(r){n.appendChild(r)}),n.querySelectorAll(EE.page.class).forEach(function(r){var i=n.removeChild(r);i.destroy()})},e.prototype.renderItems=function(n){var r=this.attributes,i=r.click,a=r.mouseenter,o=r.mouseleave,s=r.classNamePrefix;this.flattenPage(n);var l=this.dispatchCustomEvent.bind(this),c=fl(EE.item.name,hl.item,s);br(n).selectAll(EE.item.class).data(this.renderData,function(u){return u.id}).join(function(u){return u.append(function(f){var h=f.style,d=yo(f,["style"]);return new Yrt({style:h},d)}).attr("className",c).on("click",function(){i?.(this),l("itemClick",{item:this})}).on("pointerenter",function(){a?.(this),l("itemMouseenter",{item:this})}).on("pointerleave",function(){o?.(this),l("itemMouseleave",{item:this})})},function(u){return u.each(function(f){var h=f.style;this.update(h)})},function(u){return u.remove()})},e.prototype.relayoutNavigator=function(){var n,r=this.attributes,i=r.layout,a=r.width,o=((n=this.pageViews.children[0])===null||n===void 0?void 0:n.getBBox().height)||0,s=Ae(this.navigatorShape,2),l=s[0],c=s[1];this.navigator.update(i==="grid"?{pageWidth:a-l,pageHeight:o-c}:{})},e.prototype.adjustLayout=function(){var n=this,r=Object.entries(Ket(this.itemsLayout,"page")).map(function(a){var o=Ae(a,2),s=o[0],l=o[1];return{page:s,layouts:l}}),i=_r([],Ae(this.navigator.getContainer().children),!1);r.forEach(function(a){var o=a.layouts,s=n.pageViews.appendChild(new yc({className:EE.page.name}));o.forEach(function(l){var c=l.x,u=l.y,f=l.index,h=l.width,d=l.height,p=i[f];s.appendChild(p),H_(p,"__layout__",l),p.update({x:c,y:u,width:h,height:d})})}),this.relayoutNavigator()},e.prototype.renderNavigator=function(n){var r=this.attributes,i=r.orientation,a=r.classNamePrefix,o=ii(this.attributes,"nav"),s=Il({orientation:i,classNamePrefix:a},o),l=this;return n.selectAll(EE.navigator.class).data(["nav"]).join(function(c){return c.append(function(){return new Brt({style:s})}).attr("className",EE.navigator.name).each(function(){l.navigator=this})},function(c){return c.each(function(){this.update(s)})},function(c){return c.remove()}),this.navigator},e.prototype.getBBox=function(){return this.navigator.getBBox()},e.prototype.render=function(n,r){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(br(r));this.renderItems(a.getContainer()),this.adjustLayout()}},e.prototype.dispatchCustomEvent=function(n,r){var i=new rs(n,{detail:r});this.dispatchEvent(i)},e})(Es),qrt=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.update=function(n){this.attr(n)},e})(qx),pX=(function(t){Cr(e,t);function e(n){return t.call(this,n,Prt)||this}return e.prototype.renderTitle=function(n,r,i){var a=this.attributes,o=a.showTitle,s=a.titleText,l=a.classNamePrefix,c=ii(this.attributes,"title"),u=Ae(My(c),2),f=u[0],h=u[1];this.titleGroup=n.maybeAppendByClassName(Yl.titleGroup,"g").styles(h);var d=Ot(Ot({width:r,height:i},f),{text:o?s:"",classNamePrefix:l});this.title=this.titleGroup.maybeAppendByClassName(Yl.title,function(){return new zRe({style:d})}).update(d)},e.prototype.renderCustom=function(n){var r=this.attributes.data,i={innerHTML:this.attributes.render(r),pointerEvents:"auto"};n.maybeAppendByClassName(Yl.html,function(){return new qrt({className:Yl.html.name,style:i})}).update(i)},e.prototype.renderItems=function(n,r){var i=r.x,a=r.y,o=r.width,s=r.height,l=ii(this.attributes,"title",!0),c=Ae(My(l),2),u=c[0],f=c[1],h=Ot(Ot({},u),{width:o,height:s,x:0,y:0});this.itemsGroup=n.maybeAppendByClassName(Yl.itemsGroup,"g").styles(Ot(Ot({},f),{transform:"translate(".concat(i,", ").concat(a,")")}));var d=this;this.itemsGroup.selectAll(Yl.items.class).data(["items"]).join(function(p){return p.append(function(){return new Xrt({style:h})}).attr("className",Yl.items.name).each(function(){d.items=br(this)})},function(p){return p.update(h)},function(p){return p.remove()})},e.prototype.adjustLayout=function(){var n=this.attributes.showTitle;if(n){var r=this.title.node().getAvailableSpace(),i=r.x,a=r.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(a,")")}},Object.defineProperty(e.prototype,"availableSpace",{get:function(){var n=this.attributes,r=n.showTitle,i=n.width,a=n.height;return r?this.title.node().getAvailableSpace():new Ho(0,0,i,a)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n,r,i=(n=this.title)===null||n===void 0?void 0:n.node(),a=(r=this.items)===null||r===void 0?void 0:r.node();return!i||!a?t.prototype.getBBox.call(this):Lrt(i,a)},e.prototype.render=function(n,r){var i=this.attributes,a=i.width,o=i.height,s=i.x,l=s===void 0?0:s,c=i.y,u=c===void 0?0:c,f=i.classNamePrefix,h=i.render,d=br(r),p=r.className||"legend-category";f?r.attr("className","".concat(p," ").concat(f,"legend")):r.className||r.attr("className","legend-category"),r.style.transform="translate(".concat(l,", ").concat(u,")"),h?this.renderCustom(d):(this.renderTitle(d,a,o),this.renderItems(d,this.availableSpace),this.adjustLayout())},e})(Es),Zrt={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},B7=Zp({background:"background",labelGroup:"label-group",label:"label"},"indicator"),$Re=(function(t){Cr(e,t);function e(n){var r=t.call(this,n,Zrt)||this;return r.point=[0,0],r.group=r.appendChild(new yc({})),r.isMutationObserved=!0,r}return e.prototype.renderBackground=function(){if(this.label){var n=this.attributes,r=n.position,i=n.padding,a=Ae(Nl(i),4),o=a[0],s=a[1],l=a[2],c=a[3],u=this.label.node().getLocalBounds(),f=u.min,h=u.max,d=new Ho(f[0]-c,f[1]-o,h[0]+s-f[0]+c,h[1]+l-f[1]+o),p=this.getPath(r,d),g=ii(this.attributes,"background");this.background=br(this.group).maybeAppendByClassName(B7.background,"path").styles(Ot(Ot({},g),{d:p})),this.group.appendChild(this.label.node())}},e.prototype.renderLabel=function(){var n=this.attributes,r=n.formatter,i=n.labelText,a=ii(this.attributes,"label"),o=Ae(My(a),2),s=o[0],l=o[1];s.text;var c=yo(s,["text"]);if(this.label=br(this.group).maybeAppendByClassName(B7.labelGroup,"g").styles(l),!!i){var u=this.label.maybeAppendByClassName(B7.label,function(){return Ry(r(i))}).style("text",r(i).toString());u.selectAll("text").styles(c)}},e.prototype.adjustLayout=function(){var n=Ae(this.point,2),r=n[0],i=n[1],a=this.attributes,o=a.x,s=a.y;this.group.attr("transform","translate(".concat(o-r,", ").concat(s-i,")"))},e.prototype.getPath=function(n,r){var i=this.attributes.radius,a=r.x,o=r.y,s=r.width,l=r.height,c=[["M",a+i,o],["L",a+s-i,o],["A",i,i,0,0,1,a+s,o+i],["L",a+s,o+l-i],["A",i,i,0,0,1,a+s-i,o+l],["L",a+i,o+l],["A",i,i,0,0,1,a,o+l-i],["L",a,o+i],["A",i,i,0,0,1,a+i,o],["Z"]],u={top:4,right:6,bottom:0,left:2},f=u[n],h=this.createCorner([c[f].slice(-2),c[f+1].slice(-2)]);return c.splice.apply(c,_r([f+1,1],Ae(h),!1)),c[0][0]="M",c},e.prototype.createCorner=function(n,r){r===void 0&&(r=10);var i=.8,a=gtt.apply(void 0,_r([],Ae(n),!1)),o=Ae(n,2),s=Ae(o[0],2),l=s[0],c=s[1],u=Ae(o[1],2),f=u[0],h=u[1],d=Ae(a?[f-l,[l,f]]:[h-c,[c,h]],2),p=d[0],g=Ae(d[1],2),v=g[0],y=g[1],_=p/2,E=p/Math.abs(p),x=r*E,T=x/2,S=x*Math.sqrt(3)/2*i,w=Ae([v,v+_-T,v+_,v+_+T,y],5),C=w[0],D=w[1],L=w[2],B=w[3],I=w[4];return a?(this.point=[L,c-S],[["L",C,c],["L",D,c],["L",L,c-S],["L",B,c],["L",I,c]]):(this.point=[l+S,L],[["L",l,C],["L",l,D],["L",l+S,L],["L",l,B],["L",l,I]])},e.prototype.applyVisibility=function(){var n=this.attributes.visibility;n==="hidden"?Bp(this):Pw(this)},e.prototype.bindEvents=function(){this.label.on(ta.BOUNDS_CHANGED,this.renderBackground)},e.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},e})(Es);function Krt(t,e){for(var n=1;n<t.length;n+=1){var r=t[n-1],i=t[n];if(e>=r&&e<=i)return[r,i]}return[e,e]}function Qrt(t,e,n){var r=Array.from(e),i=t.length;return new Array(i).fill(0).reduce(function(a,o,s){var l=r[s%r.length];return a+=" ".concat(t[s],":").concat(l).concat(s<i-1?" ".concat(t[s+1],":").concat(l):"")},"l(".concat(n==="horizontal"?"0":"270",")"))}function bse(t,e){var n=Ae(Krt(t,e),2),r=n[0],i=n[1];return{tick:e>(r+i)/2?i:r,range:[r,i]}}var ex=Zp({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function HRe(t){var e=t.orientation,n=t.size,r=t.length;return Cm(e,[r,n],[n,r])}function GRe(t){var e=t.type,n=Ae(HRe(t),2),r=n[0],i=n[1];return e==="size"?[["M",0,i],["L",0+r,0],["L",0+r,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+r,0],["L",0+r,i],["Z"]]}function Jrt(t){return GRe(t)}function eit(t){var e=t.orientation,n=t.color,r=t.block,i=t.partition,a;if(ur(n)){var o=20;a=new Array(o).fill(0).map(function(c,u,f){return n(u/(f.length-1))})}else a=n;var s=a.length,l=a.map(function(c){return mA(c).toString()});return s?s===1?l[0]:r?Qrt(i,l,e):l.reduce(function(c,u,f){return c+=" ".concat(f/(s-1),":").concat(u)},"l(".concat(Cm(e,"0","270"),")")):""}function tit(t){var e=t.orientation,n=t.range;if(!n)return[];var r=Ae(HRe(t),2),i=r[0],a=r[1],o=Ae(n,2),s=o[0],l=o[1],c=Cm(e,s*i,0),u=Cm(e,0,s*a),f=Cm(e,l*i,i),h=Cm(e,a,l*a);return[["M",c,u],["L",c,h],["L",f,h],["L",f,u],["Z"]]}function nit(t,e){var n=ii(e,"track"),r=e.classNamePrefix,i=fl(ex.track.name,hl.track,r);t.maybeAppendByClassName(ex.track,"path").attr("className",i).styles(Ot({d:GRe(e)},n))}function rit(t,e){var n=ii(e,"selection"),r=eit(e),i=e.classNamePrefix,a=fl(ex.selection.name,hl.selection,i),o=t.maybeAppendByClassName(ex.selection,"path").attr("className",a).styles(Ot({d:Jrt(e),fill:r},n)),s=o.maybeAppendByClassName(ex.clipPath,"path").styles({d:tit(e)}).node();o.style("clipPath",s)}var iit=(function(t){Cr(e,t);function e(n){return t.call(this,n,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return e.prototype.render=function(n,r){var i=br(r).maybeAppendByClassName(ex.trackGroup,"g");nit(i,n);var a=br(r).maybeAppendByClassName(ex.selectionGroup,"g");rit(a,n)},e})(Es);function ait(t){return{min:Math.min.apply(Math,_r([],Ae(t.map(function(e){return e.value})),!1)),max:Math.max.apply(Math,_r([],Ae(t.map(function(e){return e.value})),!1))}}var oit=(function(t){Cr(e,t);function e(n){var r=t.call(this,n,Nrt)||this;return r.eventToOffsetScale=new Jc({}),r.innerRibbonScale=new Jc({}),r.cacheLabelBBox=null,r.cacheHandleBBox=null,r.onHovering=function(i){var a=r.attributes,o=a.data,s=a.block;i.stopPropagation();var l=r.getValueByCanvasPoint(i);if(s){var c=bse(o.map(function(h){var d=h.value;return d}),l).range,u=r.getRealSelection(c);r.showIndicator((c[0]+c[1])/2,"".concat(u[0],"-").concat(u[1])),r.dispatchIndicated(l,c)}else{var f=r.getTickValue(l);r.showIndicator(f,"".concat(r.getRealValue(f))),r.dispatchIndicated(f)}},r.onDragStart=function(i){return function(a){a.stopPropagation(),r.attributes.slidable&&(r.target=i,r.prevValue=r.getTickValue(r.getValueByCanvasPoint(a)),document.addEventListener("mousemove",r.onDragging),document.addEventListener("touchmove",r.onDragging),document.addEventListener("mouseleave",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("mouseup",r.onDragEnd),document.addEventListener("touchend",r.onDragEnd))}},r.onDragging=function(i){var a=r.target;r.updateMouse();var o=Ae(r.selection,2),s=o[0],l=o[1],c=r.getTickValue(r.getValueByCanvasPoint(i)),u=c-r.prevValue;a==="start"?s!==c&&r.updateSelection(c,l):a==="end"?l!==c&&r.updateSelection(s,c):a==="ribbon"&&u!==0&&(r.prevValue=c,r.updateSelection(u,u,!0))},r.onDragEnd=function(){r.style.cursor="pointer",document.removeEventListener("mousemove",r.onDragging),document.removeEventListener("touchmove",r.onDragging),document.removeEventListener("mouseup",r.onDragEnd),document.removeEventListener("touchend",r.onDragEnd)},r}return Object.defineProperty(e.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.width,i=n.height;return new Ho(0,0,r,i)},e.prototype.render=function(n,r){var i=this,a=n.classNamePrefix,o=r.className||"legend-continuous";a?r.attr("className","".concat(o," ").concat(a,"legend")):r.className||r.attr("className","legend-continuous");var s=n.showLabel;this.renderTitle(br(r));var l=this.availableSpace,c=l.x,u=l.y,f=br(r).maybeAppendByClassName(Yl.contentGroup,"g").styles({transform:"translate(".concat(c,", ").concat(u,")")}),h=f.maybeAppendByClassName(Yl.labelGroup,"g").styles({zIndex:1});Zf(!!s,h,function(p){i.renderLabel(p)});var d=f.maybeAppendByClassName(Yl.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=f.maybeAppendByClassName(Yl.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(d),this.renderIndicator(f),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(e.prototype,"range",{get:function(){var n=this.attributes,r=n.data,i=n.domain;return i?{min:i[0],max:i[1]}:ait(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonScale",{get:function(){var n=this.range,r=n.min,i=n.max;return this.innerRibbonScale.update({domain:[r,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonRange",{get:function(){var n=Ae(this.selection,2),r=n[0],i=n[1],a=this.ribbonScale;return[a.map(r),a.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var n=this.range,r=n.min,i=n.max,a=this.attributes.defaultValue,o=a===void 0?[r,i]:a,s=Ae(o,2),l=s[0],c=s[1];return[l,c]},enumerable:!1,configurable:!0}),e.prototype.ifHorizontal=function(n,r){return Cm(this.attributes.orientation,typeof n=="function"?n():n,typeof r=="function"?r():r)},e.prototype.renderTitle=function(n){var r=this.attributes,i=r.showTitle,a=r.titleText,o=r.width,s=r.height,l=r.classNamePrefix,c=ii(this.attributes,"title"),u=Ot(Ot({},c),{width:o,height:s,text:a,classNamePrefix:l}),f=this;n.selectAll(Yl.title.class).data(i?[a]:[]).join(function(h){return h.append(function(){return new zRe({style:u})}).attr("className",Yl.title.name).each(function(){f.title=this})},function(h){return h.update(u)},function(h){return h.each(function(){f.title=void 0}).remove()})},Object.defineProperty(e.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var n=this.attributes,r=n.width,i=n.height;return new Ho(0,0,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelFixedSpacing",{get:function(){var n=this.attributes.showTick;return n?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelPosition",{get:function(){var n=this.attributes,r=n.orientation,i=n.labelDirection,a={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return a[r][i]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelBBox",{get:function(){var n,r=this.attributes.showLabel;if(!r)return new Ho(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((n=this.label.querySelector(Mi.labelGroup.class))===null||n===void 0?void 0:n.children.slice(-1)[0]).getBBox(),a=i.width,o=i.height;return this.cacheLabelBBox=new Ho(0,0,a,o),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelShape",{get:function(){var n=this.attributes,r=n.showLabel,i=n.labelSpacing,a=i===void 0?0:i;if(!r)return{width:0,height:0,size:0,length:0};var o=this.labelBBox,s=o.width,l=o.height,c=this.ifHorizontal(l,s)+a+this.labelFixedSpacing,u=this.ifHorizontal(s,l);return{width:s,height:l,size:c,length:u}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonBBox",{get:function(){var n=this.attributes,r=n.showHandle,i=n.ribbonSize,a=this.availableSpace,o=a.width,s=a.height,l=this.labelShape,c=l.size,u=l.length,f=Ae(this.ifHorizontal([s,o],[o,s]),2),h=f[0],d=f[1],p=r?this.handleShape:{size:0,length:0},g=p.size,v=p.length,y=this.handleOffsetRatio,_=0,E=this.labelPosition;i?_=i:["bottom","right"].includes(E)?_=Math.min(h-c,(h-g)/y):h*(1-y)>g?_=Math.max(h-c,0):_=Math.max((h-c-g)/y,0);var x=Math.max(v,u),T=d-x,S=Ae(this.ifHorizontal([T,_],[_,T]),2),w=S[0],C=S[1],D=["top","left"].includes(E)?c:0,L=Ae(this.ifHorizontal([x/2,D],[D,x/2]),2),B=L[0],I=L[1];return new Ho(B,I,w,C)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ribbonShape",{get:function(){var n=this.ribbonBBox,r=n.width,i=n.height;return this.ifHorizontal({size:i,length:r},{size:r,length:i})},enumerable:!1,configurable:!0}),e.prototype.renderRibbon=function(n){var r=this.attributes,i=r.data,a=r.type,o=r.orientation,s=r.color,l=r.block,c=r.classNamePrefix,u=ii(this.attributes,"ribbon"),f=this.range,h=f.min,d=f.max,p=this.ribbonBBox,g=p.x,v=p.y,y=this.ribbonShape,_=y.length,E=y.size,x=Il({transform:"translate(".concat(g,", ").concat(v,")"),length:_,size:E,type:a,orientation:o,color:s,block:l,partition:i.map(function(S){return(S.value-h)/(d-h)}),range:this.ribbonRange,classNamePrefix:c},u),T=fl(Yl.ribbon.name,hl.ribbon,c);this.ribbon=n.maybeAppendByClassName(Yl.ribbon,function(){return new iit({style:x,className:T})}).update(x)},e.prototype.getHandleClassName=function(n){return"".concat(Yl.prefix("".concat(n,"-handle")))},e.prototype.renderHandles=function(){var n=this.attributes,r=n.showHandle,i=n.orientation,a=n.classNamePrefix,o=ii(this.attributes,"handle"),s=Ae(this.selection,2),l=s[0],c=s[1],u=Ot(Ot({},o),{orientation:i,classNamePrefix:a}),f=o.shape,h=f===void 0?"slider":f,d=h==="basic"?Mrt:ORe,p=this,g=fl(Yl.handle.name,hl.handle,a);this.handlesGroup.selectAll(Yl.handle.class).data(r?[{value:l,type:"start"},{value:c,type:"end"}]:[],function(v){return v.type}).join(function(v){return v.append(function(){return new d({style:u,className:g})}).attr("className",function(y){var _=y.type;return"".concat(g," ").concat(p.getHandleClassName(_))}).each(function(y){var _=y.type,E=y.value;this.update({labelText:E});var x="".concat(_,"Handle");p[x]=this,this.addEventListener("pointerdown",p.onDragStart(_))})},function(v){return v.update(u).each(function(y){var _=y.value;this.update({labelText:_})})},function(v){return v.each(function(y){var _=y.type,E="".concat(_,"Handle");p[E]=void 0}).remove()})},e.prototype.adjustHandles=function(){var n=Ae(this.selection,2),r=n[0],i=n[1];this.setHandlePosition("start",r),this.setHandlePosition("end",i);var a=this.attributes,o=a.classNamePrefix,s=a.showHandle,l=ii(this.attributes,"handle").shape,c=l===void 0?"slider":l;s&&c==="slider"&&o&&(this.startHandle&&this.updateSliderHandleClassNames(this.startHandle,o),this.endHandle&&this.updateSliderHandleClassNames(this.endHandle,o))},e.prototype.updateSliderHandleClassNames=function(n,r){var i=n.container||n,a=i.querySelector(".handle-icon-rect");if(a){var o=fl("handle-icon-rect",hl.handleMarker,r);a.setAttribute("class",o);var s=a.querySelectorAll("line");s.forEach(function(u){var f=u.getAttribute("class")||"",h=f.split(" ")[0],d=fl(h,hl.handleMarker,r);u.setAttribute("class",d)})}var l=i.querySelector(".handle-label");if(l){var c=fl("handle-label",hl.handleLabel,r);l.setAttribute("class",c)}},Object.defineProperty(e.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new Ho(0,0,0,0);var n=this.startHandle.getBBox(),r=n.width,i=n.height,a=this.endHandle.getBBox(),o=a.width,s=a.height,l=Ae([Math.max(r,o),Math.max(i,s)],2),c=l[0],u=l[1];return this.cacheHandleBBox=new Ho(0,0,c,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"handleShape",{get:function(){var n=this.handleBBox,r=n.width,i=n.height,a=Ae(this.ifHorizontal([i,r],[r,i]),2),o=a[0],s=a[1];return{width:r,height:i,size:o,length:s}},enumerable:!1,configurable:!0}),e.prototype.setHandlePosition=function(n,r){var i=this.attributes.handleFormatter,a=this.ribbonBBox,o=a.x,s=a.y,l=this.ribbonShape.size,c=this.getOffset(r),u=Ae(this.ifHorizontal([o+c,s+l*this.handleOffsetRatio],[o+l*this.handleOffsetRatio,s+c]),2),f=u[0],h=u[1],d=this.handlesGroup.select(".".concat(this.getHandleClassName(n))).node();d?.update({transform:"translate(".concat(f,", ").concat(h,")"),formatter:i})},e.prototype.renderIndicator=function(n){var r=this.attributes.classNamePrefix,i=ii(this.attributes,"indicator"),a=fl(Yl.indicator.name,hl.indicator,r);this.indicator=n.maybeAppendByClassName(Yl.indicator,function(){return new $Re({style:i,className:a})}).update(i)},Object.defineProperty(e.prototype,"labelData",{get:function(){var n=this,r=this.attributes.data;return r.reduce(function(i,a,o,s){var l,c,u=(l=a?.id)!==null&&l!==void 0?l:o.toString();if(i.push(Ot(Ot({},a),{id:u,index:o,type:"value",label:(c=a?.label)!==null&&c!==void 0?c:a.value.toString(),value:n.ribbonScale.map(a.value)})),o<s.length-1){var f=s[o+1],h=Ae([a.value,f.value],2),d=h[0],p=h[1],g=(d+p)/2;i.push(Ot(Ot({},a),{id:u,index:o,type:"range",range:[d,p],label:[d,p].join("~"),value:n.ribbonScale.map(g)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"labelStyle",{get:function(){var n=Ae(["center","middle"],2),r=n[0],i=n[1],a=this.labelPosition;return a==="top"?i="bottom":a==="bottom"?i="top":a==="left"?r="end":a==="right"&&(r="start"),{labelTextAlign:r,labelTextBaseline:i}},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(n){var r=this.attributes,i=r.showTick,a=i===void 0?!1:i,o=r.labelFilter,s=r.labelFormatter,l=ii(this.attributes,"tick"),c=ii(this.attributes,"label"),u=c.align,f=Il(Ot({showLine:!1,showGrid:!1,showTick:a,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),Sm(l,"tick"),Sm(c,"label"),{data:this.labelData}),h={tickFilter:function(p,g,v){return p?.type!=="value"?!1:o?o(p,p.index,v.filter(function(y){return y.type!=="value"})):!0},labelFilter:function(p,g,v){return p?.type!==u?!1:o?o(p,p.index,v.filter(function(y){return y.type===u})):!0},labelFormatter:s},d=Ot(Ot(Ot({},f),h),{labelOverlap:[{type:"hide"}]});this.label=n.maybeAppendByClassName(Yl.label,function(){return new N4({style:d})}).node(),this.label.update(d,!1)},Object.defineProperty(e.prototype,"labelAxisStyle",{get:function(){var n=this.attributes,r=n.showTick,i=n.labelDirection,a=n.labelSpacing,o=n.tickLength,s=this.ribbonShape.size,l=this.labelPosition,c=this.labelFixedSpacing,u=Ae([0,0,0],3),f=u[0],h=u[1],d=u[2],p=o??s;return r?(d=p,h=c,i==="positive"?l==="right"?(f=p,d=p):l==="bottom"&&(f=d):i==="negative"&&(l==="top"||l==="left")&&(f=s)):i==="positive"?l==="right"?h=p:l==="bottom"&&(f=s+c,h=a):i==="negative"&&(l==="left"||l==="top")&&(h=a),{offset:f,spacing:h,tickLength:d}},enumerable:!1,configurable:!0}),e.prototype.adjustLabel=function(){var n=this.attributes.showLabel;if(n){var r=this.ribbonBBox,i=r.x,a=r.y,o=r.width,s=r.height,l=this.labelAxisStyle,c=l.offset,u=l.spacing,f=l.tickLength,h=Ae(this.ifHorizontal([[i,a+c],[i+o,a+c]],[[i+c,a+s],[i+c,a]]),2),d=h[0],p=h[1];this.label.update({startPos:d,endPos:p,tickLength:f,labelSpacing:u},!1)}},e.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},e.prototype.showIndicator=function(n,r){r===void 0&&(r="".concat(n));var i=this.attributes.showIndicator;if(!i||typeof n!="number"){this.hideIndicator();return}var a=this.range,o=a.min,s=a.max,l=this.ribbonBBox,c=l.x,u=l.y,f=ga(n,o,s),h=this.getOffset(f),d=this.ifHorizontal([h+c,u],[c,h+u]);this.indicator.update({x:d[0],y:d[1],position:this.ifHorizontal("top","left"),labelText:r}),Pw(this.indicator.node())},e.prototype.hideIndicator=function(){Bp(this.indicator.node())},e.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},e.prototype.setSelection=function(n,r){this.updateSelection(n,r)},e.prototype.updateSelection=function(n,r,i){var a;i===void 0&&(i=!1);var o=Ae(this.selection,2),s=o[0],l=o[1],c=Ae([n,r],2),u=c[0],f=c[1];i&&(u+=s,f+=l);var h=this.range,d=h.min,p=h.max;a=Ae(Rrt([d,p],[u,f],this.selection),2),u=a[0],f=a[1],this.update({defaultValue:[u,f]}),this.dispatchSelection()},Object.defineProperty(e.prototype,"step",{get:function(){var n=this.attributes.step,r=n===void 0?1:n,i=this.range,a=i.min,o=i.max;return mr(r)?sX((o-a)*Irt,0):r},enumerable:!1,configurable:!0}),e.prototype.getTickValue=function(n){var r=this.attributes,i=r.data,a=r.block,o=this.range.min;return a?bse(i.map(function(s){var l=s.value;return l}),n).tick:Art(n,this.step,o)},e.prototype.getValueByCanvasPoint=function(n){var r=this.range,i=r.min,a=r.max,o=Ae(this.ribbon.node().getPosition(),2),s=o[0],l=o[1],c=this.ifHorizontal(s,l),u=this.ifHorizontal.apply(this,_r([],Ae(uRe(n)),!1)),f=u-c,h=ga(this.getOffset(f,!0),i,a);return h},e.prototype.getOffset=function(n,r){r===void 0&&(r=!1);var i=this.range,a=i.min,o=i.max,s=this.ribbonShape.length,l=this.eventToOffsetScale;return l.update({domain:[a,o],range:[0,s]}),r?l.invert(n):l.map(n)},e.prototype.getRealSelection=function(n){var r=this.range.max,i=Ae(n,2),a=i[0],o=i[1];return this.ifHorizontal([a,o],[r-o,r-a])},e.prototype.getRealValue=function(n){var r=this.range.max;return this.ifHorizontal(n,r-n)},e.prototype.dispatchSelection=function(){var n=this.getRealSelection(this.selection),r=new rs("valuechange",{detail:{value:n}});this.dispatchEvent(r)},e.prototype.dispatchIndicated=function(n,r){var i=this,a=this.range.max,o=this.ifHorizontal(function(){return{value:n,range:r}},function(){return{value:a-n,range:r?i.getRealSelection(r):void 0}}),s=new rs("indicate",{detail:o});this.dispatchEvent(s)},e})(Es);function gX(t){return t===void 0&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var Ese={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function sit(t){var e;t===void 0&&(t="");var n=gX(t);return e={},e[".".concat(n.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},e[".".concat(n.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},e[".".concat(n.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},e[".".concat(n.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},e[".".concat(n.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},e[".".concat(n.NAME)]={display:"flex","align-items":"center","max-width":"216px"},e[".".concat(n.NAME_LABEL)]=Ot({flex:1},Ese),e[".".concat(n.VALUE)]=Ot({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},Ese),e[".".concat(n.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e[".".concat(n.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},e}var WRe=(function(t){Cr(e,t);function e(n){var r=this,i,a,o=(a=(i=n.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,s=gX(o);return r=t.call(this,n,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(s.NAME,`">
          <span class="`).concat(s.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(s.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(s.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:sit(o)})||this,r.timestamp=-1,r.prevCustomContentKey=r.attributes.contentKey,r.initShape(),r.render(r.attributes,r),r}return Object.defineProperty(e.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),e.prototype.getContainer=function(){return this.element},Object.defineProperty(e.prototype,"elementSize",{get:function(){var n=this.element.offsetWidth,r=this.element.offsetHeight;return{width:n,height:r}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"HTMLTooltipItemsElements",{get:function(){var n=this.attributes,r=n.data,i=n.template;return r.map(function(a,o){var s=a.name,l=s===void 0?"":s,c=a.color,u=c===void 0?"black":c,f=a.index,h=yo(a,["name","color","index"]),d=Ot({name:l,color:u,index:f??o},h);return SY(A9e(i.item,d))})},enumerable:!1,configurable:!0}),e.prototype.render=function(n,r){this.renderHTMLTooltipElement(),this.updatePosition()},e.prototype.destroy=function(){var n;(n=this.element)===null||n===void 0||n.remove(),t.prototype.destroy.call(this)},e.prototype.show=function(n,r){var i=this;if(n!==void 0&&r!==void 0){var a=this.element.style.visibility==="hidden",o=function(){i.attributes.x=n??i.attributes.x,i.attributes.y=r??i.attributes.y,i.updatePosition()};a?this.closeTransition(o):o()}this.element.style.visibility="visible"},e.prototype.hide=function(n,r){n===void 0&&(n=0),r===void 0&&(r=0);var i=this.attributes.enterable;i&&this.isCursorEntered(n,r)||(this.element.style.visibility="hidden")},e.prototype.initShape=function(){var n=this.attributes.template;this.element=SY(n.container),this.id&&this.element.setAttribute("id",this.id)},e.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var n=this.attributes.content;n&&(typeof n=="string"?this.element.innerHTML=n:qoe(this.element,n))}},e.prototype.renderHTMLTooltipElement=function(){var n,r,i=this.attributes,a=i.template,o=i.title,s=i.enterable,l=i.style,c=i.content,u=gX(a.prefixCls),f=this.element;if(this.element.style.pointerEvents=s?"auto":"none",c)this.renderCustomContent();else{o?(f.innerHTML=a.title,f.getElementsByClassName(u.TITLE)[0].innerHTML=o):(r=(n=f.getElementsByClassName(u.TITLE))===null||n===void 0?void 0:n[0])===null||r===void 0||r.remove();var h=this.HTMLTooltipItemsElements,d=document.createElement("ul");d.className=u.LIST,qoe(d,h);var p=this.element.querySelector(".".concat(u.LIST));p?p.replaceWith(d):f.appendChild(d)}_tt(f,l)},e.prototype.getRelativeOffsetFromCursor=function(n){var r=this.attributes,i=r.position,a=r.offset,o=n||i,s=o.split("-"),l={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},c=this.elementSize,u=c.width,f=c.height,h=[-u/2,-f/2];return s.forEach(function(d){var p=Ae(h,2),g=p[0],v=p[1],y=Ae(l[d],2),_=y[0],E=y[1];h=[g+(u/2+a[0])*_,v+(f/2+a[1])*E]}),h},e.prototype.setOffsetPosition=function(n){var r=Ae(n,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=s===void 0?0:s,c=o.y,u=c===void 0?0:c,f=o.container,h=f.x,d=f.y;this.element.style.left="".concat(+l+h+i,"px"),this.element.style.top="".concat(+u+d+a,"px")},e.prototype.updatePosition=function(){var n=this.attributes.showDelay,r=n===void 0?60:n,i=Date.now();this.timestamp>0&&i-this.timestamp<r||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},e.prototype.autoPosition=function(n){var r=Ae(n,2),i=r[0],a=r[1],o=this.attributes,s=o.x,l=o.y,c=o.bounding,u=o.position;if(!c)return[i,a];var f=this.element,h=f.offsetWidth,d=f.offsetHeight,p=Ae([+s+i,+l+a],2),g=p[0],v=p[1],y={left:"right",right:"left",top:"bottom",bottom:"top"},_=c.x,E=c.y,x=c.width,T=c.height,S={left:g<_,right:g+h>_+x,top:v<E,bottom:v+d>E+T},w=[];u.split("-").forEach(function(D){S[D]?w.push(y[D]):w.push(D)});var C=w.join("-");return this.getRelativeOffsetFromCursor(C)},e.prototype.isCursorEntered=function(n,r){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,o=i.y,s=i.width,l=i.height;return new Ho(a,o,s,l).isPointIn(n,r)}return!1},e.prototype.closeTransition=function(n){var r=this,i=this.element.style.transition;this.element.style.transition="none",n(),setTimeout(function(){r.element.style.transition=i},10)},e.tag="tooltip",e})(Es),lit=(function(t){Cr(e,t);function e(n){var r=t.call(this,n)||this;r.layoutEvents=[ta.BOUNDS_CHANGED,ta.INSERTED,ta.REMOVED],r.$margin=Nl(0),r.$padding=Nl(0);var i=n.style||{},a=i.margin,o=a===void 0?0:a,s=i.padding,l=s===void 0?0:s;return r.margin=o,r.padding=l,r.isMutationObserved=!0,r.bindEvents(),r}return Object.defineProperty(e.prototype,"margin",{get:function(){return this.$margin},set:function(n){this.$margin=Nl(n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this.$padding},set:function(n){this.$padding=Nl(n)},enumerable:!1,configurable:!0}),e.prototype.getBBox=function(){var n=this.attributes,r=n.x,i=r===void 0?0:r,a=n.y,o=a===void 0?0:a,s=n.width,l=n.height,c=Ae(this.$margin,4),u=c[0],f=c[1],h=c[2],d=c[3];return new Ho(i-d,o-u,s+d+f,l+u+h)},e.prototype.appendChild=function(n,r){return n.isMutationObserved=!0,t.prototype.appendChild.call(this,n,r),n},e.prototype.getAvailableSpace=function(){var n=this.attributes,r=n.width,i=n.height,a=Ae(this.$padding,4),o=a[0],s=a[1],l=a[2],c=a[3],u=Ae(this.$margin,4),f=u[0],h=u[3];return new Ho(c+h,o+f,r-c-s,i-o-l)},e.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(o){return!o.isConnected}))try{var n=this.attributes,r=n.x,i=n.y;this.style.transform="translate(".concat(r,", ").concat(i,")");var a=itt(this.getAvailableSpace(),this.children.map(function(o){return o.getBBox()}),this.attributes);this.children.forEach(function(o,s){var l=a[s],c=l.x,u=l.y;o.style.transform="translate(".concat(c,", ").concat(u,")")})}catch{}},e.prototype.bindEvents=function(){var n=this;this.layoutEvents.forEach(function(r){n.addEventListener(r,function(i){i.target&&(i.target.isMutationObserved=!0,n.layout())})})},e.prototype.attributeChangedCallback=function(n,r,i){n==="margin"?this.margin=i:n==="padding"&&(this.padding=i),this.layout()},e})(yc),cit=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},e.defaultOptions,n))||this;return r.hoverColor="#f5f5f5",r.selectedColor="#e6f7ff",r.background=r.appendChild(new Nu({})),r.label=r.background.appendChild(new yc({})),r}return Object.defineProperty(e.prototype,"padding",{get:function(){return Nl(this.style.padding)},enumerable:!1,configurable:!0}),e.prototype.renderLabel=function(){var n=this.style,r=n.label,i=n.value,a=ii(this.attributes,"label");br(this.label).maybeAppend(".label",function(){return Ry(r)}).attr("className","label").styles(a),this.label.attr("__data__",i)},e.prototype.renderBackground=function(){var n=this.label.getBBox(),r=Ae(this.padding,4),i=r[0],a=r[1],o=r[2],s=r[3],l=n.width,c=n.height,u=l+s+a,f=c+i+o,h=ii(this.attributes,"background"),d=this.style,p=d.width,g=p===void 0?0:p,v=d.height,y=v===void 0?0:v,_=d.selected;this.background.attr(Ot(Ot({},h),{width:Math.max(u,g),height:Math.max(f,y),fill:_?this.selectedColor:"#fff"})),this.label.attr({transform:"translate(".concat(s,", ").concat((f-c)/2,")")})},e.prototype.render=function(){this.renderLabel(),this.renderBackground()},e.prototype.bindEvents=function(){var n=this;this.addEventListener("pointerenter",function(){n.style.selected||n.background.attr("fill",n.hoverColor)}),this.addEventListener("pointerleave",function(){n.style.selected||n.background.attr("fill",n.style.backgroundFill)});var r=this;this.addEventListener("click",function(){var i=n.style,a=i.label,o=i.value,s=i.onClick;s?.(o,{label:a,value:o},r)})},e.defaultOptions={style:{value:"",label:"",cursor:"pointer"}},e})(Es),uit=(function(t){Cr(e,t);function e(n){var r,i,a=t.call(this,Il({},e.defaultOptions,n))||this;a.currentValue=(r=e.defaultOptions.style)===null||r===void 0?void 0:r.defaultValue,a.isPointerInSelect=!1,a.select=a.appendChild(new Nu({className:"select",style:{cursor:"pointer",width:0,height:0}})),a.dropdown=a.appendChild(new Nu({className:"dropdown"}));var o=a.style.defaultValue;return o&&(!((i=a.style.options)===null||i===void 0)&&i.some(function(s){return s.value===o}))&&(a.currentValue=o),a}return e.prototype.setValue=function(n){this.currentValue=n,this.render()},e.prototype.getValue=function(){return this.currentValue},Object.defineProperty(e.prototype,"dropdownPadding",{get:function(){return Nl(this.style.dropdownPadding)},enumerable:!1,configurable:!0}),e.prototype.renderSelect=function(){var n=this,r,i=this.style,a=i.x,o=i.y,s=i.width,l=i.height,c=i.bordered,u=i.showDropdownIcon,f=ii(this.attributes,"select"),h=ii(this.attributes,"placeholder");this.select.attr(Ot(Ot({x:a,y:o,width:s,height:l},f),{fill:"#fff",strokeWidth:c?1:0}));var d=this.dropdownPadding,p=10;u&&br(this.select).maybeAppend(".dropdown-icon","path").style("d","M-5,-3.5 L0,3.5 L5,-3.5").style("transform","translate(".concat(a+s-p-d[1]-d[3],", ").concat(o+l/2,")")).style("lineWidth",1).style("stroke",this.select.style.stroke);var g=(r=this.style.options)===null||r===void 0?void 0:r.find(function(E){return E.value===n.currentValue}),v=Ot({x:a+d[3]},h);br(this.select).selectAll(".placeholder").data(g?[]:[1]).join(function(E){return E.append("text").attr("className","placeholder").styles(v).style("y",function(){var x=this.getBBox();return o+(l-x.height)/2})},function(E){return E.styles(v)},function(E){return E.remove()});var y=ii(this.attributes,"optionLabel"),_=Ot({x:a+d[3]},y);br(this.select).selectAll(".value").data(g?[g]:[]).join(function(E){return E.append(function(x){return Ry(x.label)}).attr("className","value").styles(_).style("y",function(){var x=this.getBBox();return o+(l-x.height)/2})},function(E){return E.styles(_)},function(E){return E.remove()})},e.prototype.renderDropdown=function(){var n=this,r,i,a=this.style,o=a.x,s=a.y,l=a.width,c=a.height,u=a.options,f=a.onSelect,h=a.open,d=ii(this.attributes,"dropdown"),p=ii(this.attributes,"option"),g=this.dropdownPadding;br(this.dropdown).maybeAppend(".dropdown-container","g").attr("className","dropdown-container").selectAll(".dropdown-item").data(u,function(_){return _.value}).join(function(_){return _.append(function(E){return new cit({className:"dropdown-item",style:Ot(Ot(Ot({},E),p),{width:l-g[1]-g[3],selected:E.value===n.currentValue,onClick:function(x,T,S){n.setValue(x),f?.(x,T,S),n.dispatchEvent(new rs("change",{detail:{value:x,option:T,item:S}})),Bp(n.dropdown)}})})}).each(function(E,x){var T,S=(T=this.parentNode)===null||T===void 0?void 0:T.children,w=S.reduce(function(C,D,L){return L<x&&(C+=D.getBBox().height),C},0);this.attr("transform","translate(".concat(g[3],", ").concat(g[0]+w,")"))})},function(_){return _.update(function(E){return{selected:E.value===n.currentValue}})},function(_){return _.remove()});var v=(i=(r=this.dropdown.getElementsByClassName("dropdown-container"))===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.getBBox(),y=d.spacing;this.dropdown.attr(Ot({transform:"translate(".concat(o,", ").concat(s+c+y,")"),width:v.width+g[1]+g[3],height:v.height+g[0]+g[2]},d)),!h&&Bp(this.dropdown)},e.prototype.render=function(){this.renderSelect(),this.renderDropdown()},e.prototype.bindEvents=function(){var n=this;this.addEventListener("click",function(r){r.stopPropagation()}),this.select.addEventListener("click",function(){n.dropdown.style.visibility==="visible"?Bp(n.dropdown):Pw(n.dropdown)}),this.addEventListener("pointerenter",function(){n.isPointerInSelect=!0}),this.addEventListener("pointerleave",function(){n.isPointerInSelect=!1}),document?.addEventListener("click",function(){n.isPointerInSelect||Bp(n.dropdown)})},e.defaultOptions={style:{x:0,y:0,width:140,height:32,options:[],bordered:!0,defaultValue:"",selectRadius:8,selectStroke:"#d9d9d9",showDropdownIcon:!0,placeholderText:"",placeholderFontSize:12,placeholderTextBaseline:"top",placeholderFill:"#c2c2c2",dropdownFill:"#fff",dropdownStroke:"#d9d9d9",dropdownRadius:8,dropdownShadowBlur:4,dropdownShadowColor:"rgba(0, 0, 0, 0.08)",dropdownPadding:8,dropdownSpacing:10,optionPadding:[8,12],optionFontSize:12,optionTextBaseline:"top",optionBackgroundFill:"#fff",optionBackgroundRadius:4,optionLabelFontSize:12,optionLabelTextBaseline:"top"}},e})(Es),ov=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},{style:{backgroundOpacity:e.backgroundOpacities.default}},e.defaultOptions,n))||this;return r.showBackground=!0,r.background=r.appendChild(new Nu({})),r.icon=r.appendChild(new yc({})),r}return Object.defineProperty(e.prototype,"label",{get:function(){return"BaseIcon"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineWidth",{get:function(){return Math.log10(this.attributes.size)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return Nl(this.attributes.size/5)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iconSize",{get:function(){var n=this.attributes.size,r=Ae(this.padding,4),i=r[0],a=r[1],o=r[2],s=r[3];return Math.max(n-Math.max(s+a,i+o),this.lineWidth*2+1)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var n=this.attributes,r=n.x,i=n.y,a=n.size,o=a/2,s=ii(this.attributes,"background");this.background.attr(Ot({x:r-o,y:i-o,width:a,height:a},s))},e.prototype.showIndicator=function(){if(this.label){var n=this.attributes.size,r=this.background.getBBox(),i=r.x,a=r.y;this.indicator.update({x:i+n/2,y:a-5,labelText:this.label,visibility:"visible"})}},e.prototype.hideIndicator=function(){this.indicator.update({visibility:"hidden"})},e.prototype.connectedCallback=function(){var n;t.prototype.connectedCallback.call(this);var r=this.attributes.size,i=this.background.getBBox(),a=i.x,o=i.y,s=(n=this.ownerDocument)===null||n===void 0?void 0:n.defaultView;s&&(this.indicator=s.appendChild(new $Re({style:{x:a+r/2,y:o-r/2,visibility:"hidden",position:"top",radius:3,zIndex:100}})))},e.prototype.disconnectedCallback=function(){this.indicator.destroy()},e.prototype.render=function(){this.renderIcon(),this.showBackground&&this.renderBackground()},e.prototype.bindEvents=function(){var n=this,r=this.attributes.onClick;if(this.addEventListener("click",function(){r?.(n)}),this.showBackground){var i=function(){return n.background.attr({opacity:e.backgroundOpacities.default})},a=function(){return n.background.attr({opacity:e.backgroundOpacities.hover})},o=function(){return n.background.attr({opacity:e.backgroundOpacities.active})};this.addEventListener("pointerenter",function(){a(),n.showIndicator()}),this.addEventListener("pointerleave",function(){i(),n.hideIndicator()}),this.addEventListener("pointerdown",function(){o()}),this.addEventListener("pointerup",function(){i()})}},e.tag="IconBase",e.defaultOptions={style:{x:0,y:0,size:10,color:"#565758",backgroundRadius:4,backgroundFill:"#e2e2e2"}},e.backgroundOpacities={default:0,hover:.8,active:1},e})(Es),XR=function(t,e){return e===void 0&&(e="#565758"),new Ad({style:{fill:e,d:"M ".concat(t,",").concat(t," L -").concat(t,",0 L ").concat(t,",-").concat(t," Z"),transformOrigin:"center"}})},fit=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.arcPath=function(n,r,i){var a=Ae([i,i],2),o=a[0],s=a[1],l=function(g){return[n+i*Math.cos(g),r+i*Math.sin(g)]},c=Ae(l(-5/4*Math.PI),2),u=c[0],f=c[1],h=Ae(l(1/4*Math.PI),2),d=h[0],p=h[1];return"M".concat(u,",").concat(f,",A").concat(o,",").concat(s,",0,1,1,").concat(d,",").concat(p)},Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=this.lineWidth,l=s+.5;br(this.icon).maybeAppend(".reset","path").styles({stroke:a,lineWidth:s,d:this.arcPath(r,i,o/2-s),markerStart:XR(l,a)})},e})(ov),hit=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=o/2,l=o/2/Math.pow(3,.5),c=[[r,i],[r,i-l],[r-s,i],[r,i+l],[r,i],[r+s,i-l],[r+s,i+l],[r,i]];br(this.icon).maybeAppend(".backward","polygon").styles({points:c,fill:a})},e})(ov),dit=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=o/2,l=o/2/Math.pow(3,.5),c=[[r,i],[r,i-l],[r+s,i],[r,i+l],[r,i],[r-s,i-l],[r-s,i+l],[r,i]];br(this.icon).maybeAppend(".forward","polygon").styles({points:c,fill:a})},e})(ov),pit=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=o/3*Math.pow(3,.5)*.8,l=[[r+s,i],[r-s/2,i-o/2*.8],[r-s/2,i+o/2*.8],[r+s,i]];br(this.icon).maybeAppend(".play","polygon").styles({points:l,fill:a})},e})(ov),git=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this.iconSize,s=o/3,l=[[r-s,i-o/2],[r-s,i+o/2],[r-s/2,i+o/2],[r-s/2,i-o/2],[r-s,i-o/2],[r+s/2,i-o/2],[r+s/2,i+o/2],[r+s,i+o/2],[r+s,i-o/2]];br(this.icon).maybeAppend(".pause","polygon").styles({points:l,fill:a})},e})(ov),vit=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this,s=o.iconSize,l=o.lineWidth,c=l;br(this.icon).maybeAppend(".left-line","line").styles({x1:r-s/2,y1:i-s/2,x2:r-s/2,y2:i+s/2,stroke:a,lineWidth:l}),br(this.icon).maybeAppend(".right-line","line").styles({x1:r+s/2,y1:i-s/2,x2:r+s/2,y2:i+s/2,stroke:a,lineWidth:l}),br(this.icon).maybeAppend(".left-arrow","line").styles({x1:r,y1:i,x2:r-s/2+c*2,y2:i,stroke:a,lineWidth:l,markerEnd:XR(l*2,a)}),br(this.icon).maybeAppend(".right-arrow","line").styles({x1:r,y1:i,x2:r+s/2-c*2,y2:i,stroke:a,lineWidth:l,markerEnd:XR(l*2,a)})},e})(ov),mit=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this,s=o.iconSize,l=o.lineWidth;br(this.icon).maybeAppend(".line","line").styles({x1:r,y1:i-s/2,x2:r,y2:i+s/2,stroke:a,lineWidth:l});var c=l;br(this.icon).maybeAppend(".left-arrow","line").styles({x1:r-s/2-c*2,y1:i,x2:r-c*2,y2:i,stroke:a,lineWidth:l,markerEnd:XR(l*2,a)}),br(this.icon).maybeAppend(".right-arrow","line").styles({x1:r+s/2+c*2,y1:i,x2:r+c*2,y2:i,stroke:a,lineWidth:l,markerEnd:XR(l*2,a)})},e})(ov),VRe=function(t){return[[-t/2,-t/2],[-t/2,t/2],[t/2,t/2]]},yit=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this,s=o.iconSize,l=o.lineWidth,c=l,u=(s-c*2-l)/4,f=(s-c*2-l)/2,h=Ae([r-s/2+c,i+s/2-c*2],2),d=h[0],p=h[1];br(this.icon).maybeAppend(".coordinate","polyline").styles({points:VRe(s).map(function(g){var v=Ae(g,2),y=v[0],_=v[1];return[y+r,_+i]}),stroke:a,lineWidth:l}),br(this.icon).maybeAppend(".line","polyline").styles({points:[[d,p],[d+u,p-f],[d+u*2,p],[d+u*4,p-f*2]],stroke:a,lineWidth:l})},e})(ov),_it=(function(t){Cr(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return Object.defineProperty(e.prototype,"label",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return[1,4,2,4,3]},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.data,r=this.attributes,i=r.x,a=r.y,o=r.color,s=this,l=s.iconSize,c=s.lineWidth,u=c,f=(l-u)/n.length,h=(l-u*2)/4,d=Ae([i-l/2+u*2,a+l/2-u],2),p=d[0],g=d[1];br(this.icon).maybeAppend(".coordinate","polyline").styles({points:VRe(l).map(function(v){var y=Ae(v,2),_=y[0],E=y[1];return[_+i,E+a]}),stroke:o,lineWidth:c}),br(this.icon).maybeAppend(".bars","g").selectAll(".column").data(this.data.map(function(v,y){return{value:v,index:y}})).join(function(v){return v.append("line").attr("className","column").style("x1",function(y){var _=y.index;return p+f*_}).style("y1",g).style("x2",function(y){var _=y.index;return p+f*_}).style("y2",function(y){var _=y.value;return g-h*_}).styles({y1:g,stroke:o,lineWidth:c})})},e})(ov),bit=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},{style:{color:"#d8d9d9"}},n))||this;return r.showBackground=!1,r}return e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.color,o=this,s=o.iconSize,l=o.lineWidth;br(this.icon).maybeAppend(".split","line").styles({x1:r,y1:i-s/2,x2:r,y2:i+s/2,stroke:a,lineWidth:l})},e})(ov),vX=(function(t){Cr(e,t);function e(){var n=t.apply(this,_r([],Ae(arguments),!1))||this;return n.showBackground=!1,n}return Object.defineProperty(e.prototype,"padding",{get:function(){return Nl(0)},enumerable:!1,configurable:!0}),e.prototype.renderIcon=function(){var n=this.iconSize,r=this.attributes,i=r.x,a=r.y,o=r.speed,s=o===void 0?1:o,l=ww(this.attributes,["x","y","transform","transformOrigin","width","height","size","color","speed"]),c=ga(n,20,1/0),u=20,f=Ot(Ot({},l),{x:i-c/2,y:a-u/2,width:c,height:u,defaultValue:s,bordered:!1,showDropdownIcon:!1,selectRadius:2,dropdownPadding:this.padding,dropdownRadius:2,dropdownSpacing:n/5,placeholderFontSize:n/2,optionPadding:0,optionLabelFontSize:n/2,optionBackgroundRadius:1,options:[{label:"1x",value:1},{label:"1.5x",value:1.5},{label:"2x",value:2}]});br(this.icon).maybeAppend(".speed",function(){return new uit({style:f})}).attr("className","speed").each(function(){this.update(f)})},e.tag="SpeedSelect",e})(ov),tee=(function(t){Cr(e,t);function e(n){var r=t.call(this,n)||this;return r.icon=r.appendChild(new yc({})),r.currentType=r.attributes.type,r}return e.prototype.getType=function(){return this.currentType},e.prototype.render=function(){var n=this,r=this.attributes;r.onChange;var i=yo(r,["onChange"]);br(this.icon).selectAll(".icon").data([this.currentType]).join(function(a){return a.append(function(o){var s,l=(s=n.toggles.find(function(c){var u=Ae(c,1),f=u[0];return f===o}))===null||s===void 0?void 0:s[1];if(!l)throw new Error("Invalid type: ".concat(o));return new l({})}).attr("className","icon").styles(i,!1).update({})},function(a){return a.styles({restStyles:i}).update({})},function(a){return a.remove()})},e.prototype.bindEvents=function(){var n=this,r=this.attributes.onChange;this.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation();var a=(n.toggles.findIndex(function(s){var l=Ae(s,1),c=l[0];return c===n.currentType})+1)%n.toggles.length,o=n.toggles[a][0];r?.(n.currentType),n.currentType=o,n.render()})},e.tag="ToggleIcon",e})(Es),mX=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},{style:{type:"play"}},n))||this;return r.toggles=[["play",pit],["pause",git]],r}return e})(tee),yX=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},{style:{type:"range"}},n))||this;return r.toggles=[["range",vit],["value",mit]],r}return e})(tee),_X=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},{style:{type:"column"}},n))||this;return r.toggles=[["line",yit],["column",_it]],r}return e})(tee),Eit={reset:fit,speed:vX,backward:hit,playPause:mX,forward:dit,selectionType:yX,chartType:_X,split:bit},xit=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},e.defaultOptions,n))||this;return r.background=r.appendChild(new Nu({})),r.functions=r.appendChild(new yc({})),r}return Object.defineProperty(e.prototype,"padding",{get:function(){return Nl(this.attributes.padding)},enumerable:!1,configurable:!0}),e.prototype.renderBackground=function(){var n=this.style,r=n.x,i=n.y,a=n.width,o=n.height,s=ii(this.attributes,"background");this.background.attr(Ot({x:r,y:i,width:a,height:o},s))},e.prototype.renderFunctions=function(){var n=this,r,i=this.attributes,a=i.functions,o=i.iconSize,s=i.iconSpacing,l=i.x,c=i.y,u=i.width,f=i.height,h=i.align,d=Ae(this.padding,4),p=d[1],g=d[3],v=a.reduce(function(E,x){return E.length&&x.length?E.concat.apply(E,_r(["split"],Ae(x),!1)):E.concat.apply(E,_r([],Ae(x),!1))},[]),y=v.length*(o+s)-s,_={left:g+o/2,center:(u-y)/2+o/2,right:u-y-g-p+o/2}[h]||0;(r=this.speedSelect)===null||r===void 0||r.destroy(),this.functions.removeChildren(),v.forEach(function(E,x){var T,S=Eit[E],w={x:l+x*(o+s)+_,y:c+f/2,size:o};if(S===vX?(w.speed=n.attributes.speed,w.onSelect=function(D){return n.handleFunctionChange(E,{value:D})}):[mX,yX,_X].includes(S)?(w.onChange=function(D){return n.handleFunctionChange(E,{value:D})},S===mX&&(w.type=n.attributes.state==="play"?"pause":"play"),S===yX&&(w.type=n.attributes.selectionType==="range"?"value":"range"),S===_X&&(w.type=n.attributes.chartType==="line"?"column":"line")):w.onClick=function(){return n.handleFunctionChange(E,{value:E})},S===vX){var C=(T=n.ownerDocument)===null||T===void 0?void 0:T.defaultView;C&&(n.speedSelect=new S({style:Ot(Ot({},w),{zIndex:100})}),C.appendChild(n.speedSelect))}else n.functions.appendChild(new S({style:w}))})},e.prototype.disconnectedCallback=function(){var n;t.prototype.disconnectedCallback.call(this),(n=this.speedSelect)===null||n===void 0||n.destroy()},e.prototype.render=function(){this.renderBackground(),this.renderFunctions()},e.prototype.handleFunctionChange=function(n,r){var i=this.attributes.onChange;i?.(n,r)},e.defaultOptions={style:{x:0,y:0,width:300,height:40,padding:0,align:"center",iconSize:25,iconSpacing:0,speed:1,state:"pause",chartType:"line",selectionType:"range",backgroundFill:"#fbfdff",backgroundStroke:"#ebedf0",functions:[["reset","speed"],["backward","playPause","forward"],["selectionType","chartType"]]}},e})(Es),Sit=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},e.defaultOptions,n))||this;return r.bindEvents(),r}return e.prototype.bindEvents=function(){var n=this;this.addEventListener("mouseenter",function(){n.attr("lineWidth",Math.ceil(+(n.style.r||0)/2))}),this.addEventListener("mouseleave",function(){n.attr("lineWidth",0)})},e.defaultOptions={style:{r:5,fill:"#3f7cf7",lineWidth:0,stroke:"#3f7cf7",strokeOpacity:.5,cursor:"pointer"}},e})(Wm),Tit=(function(t){Cr(e,t);function e(n){return t.call(this,Il({},e.defaultOptions,n))||this}return e.prototype.renderBackground=function(){var n=this.attributes,r=n.x,i=n.y,a=n.width,o=n.height,s=ii(this.attributes,"background");br(this).maybeAppend("background","rect").attr("className","background").styles(Ot({x:r-a/2,y:i-o/2,width:a,height:o},s))},e.prototype.renderIcon=function(){var n=this.attributes,r=n.x,i=n.y,a=n.iconSize,o=ii(this.attributes,"icon"),s=1,l=a/2;br(this).maybeAppend("icon-left-line","line").attr("className","icon-left-line").styles(Ot({x1:r-s,y1:i-l,x2:r-s,y2:i+l},o)),br(this).maybeAppend("icon-right-line","line").attr("className","icon-right-line").styles(Ot({x1:r+s,y1:i-l,x2:r+s,y2:i+l},o))},e.prototype.renderBorder=function(){var n=this.attributes,r=n.x,i=n.y,a=n.width,o=n.height,s=n.type,l=ii(this.attributes,"border"),c=s==="start"?+a/2:-a/2;br(this).maybeAppend("border","line").attr("className","border").styles(Ot({x1:c+r,y1:i-o/2,x2:c+r,y2:i+o/2},l))},e.prototype.render=function(){this.renderBackground(),this.renderIcon(),this.renderBorder()},e.defaultOptions={style:{x:0,y:0,width:10,height:50,iconSize:10,type:"start",backgroundFill:"#fff",backgroundFillOpacity:.5,iconStroke:"#9a9a9a",iconLineWidth:1,borderStroke:"#e8e8e8",borderLineWidth:1}},e})(Es);function Ait(t,e){return typeof t=="number"?YRe(t):wit(t,e)}function wit(t,e){var n=new Date(t);switch(e){case"half-hour":case"hour":case"four-hour":return[0,6,12,18].includes(n.getHours())&&n.getMinutes()===0?xh(n,`HH:mm
YYYY-MM-DD`):xh(n,"HH:mm");case"half-day":return n.getHours()<12?`AM
`.concat(xh(n,"YYYY-MM-DD")):"PM";case"day":return[1,10,20].includes(n.getDate())?xh(n,`DD
YYYY-MM`):xh(n,"DD");case"week":return n.getDate()<=7?xh(n,`DD
YYYY-MM`):xh(n,"DD");case"month":return[0,6].includes(n.getMonth())?xh(n,`MM
YYYY`):xh(n,"MM");case"season":return[0].includes(n.getMonth())?xh(n,`MM
YYYY`):xh(n,"MM");case"year":return xh(n,"YYYY");default:return xh(n,"YYYY-MM-DD HH:mm")}}function YRe(t){var e=String(Math.floor(t/3600)).padStart(2,"0"),n=String(Math.floor(t%3600/60)).padStart(2,"0"),r=String(Math.floor(t%60)).padStart(2,"0");return t<3600?"".concat(n,":").concat(r):"".concat(e,":").concat(n,":").concat(r)}var Oit=(function(t){Cr(e,t);function e(n){var r=t.call(this,Il({},e.defaultOptions,n))||this;r.axis=r.appendChild(new N4({style:{type:"linear",startPos:[0,0],endPos:[0,0],data:[],showArrow:!1,animate:!1}})),r.timeline=r.appendChild(new ZJ({style:{onChange:function(f){r.handleSliderChange(f)}}})),r.controller=r.appendChild(new xit({})),r.states={},r.handleSliderChange=function(f){var h=(function(){var d=r.states.values;return Array.isArray(d)?_r([],Ae(d),!1):d})();r.setBySliderValues(f),r.dispatchOnChange(h)};var i=r.attributes,a=i.selectionType,o=i.chartType,s=i.speed,l=i.state,c=i.playMode,u=i.values;return r.states={chartType:o,playMode:c,selectionType:a,speed:s,state:l},r.setByTimebarValues(u),r}return Object.defineProperty(e.prototype,"data",{get:function(){var n=this.attributes.data,r=function(i,a){return i.time<a.time?-1:i.time>a.time?1:0};return n.sort(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"space",{get:function(){var n=this.attributes,r=n.x,i=n.y,a=n.width,o=n.height,s=n.type,l=n.controllerHeight,c=ga(+o-l,0,+o),u=new Ho(r,i+ +o-l,+a,l),f,h=0;s==="chart"?(h=35,f=new Ho(r,i+c-h,+a,h)):f=new Ho;var d=s==="time"?10:c,p=new Ho(r,i+(s==="time"?c:c-d),+a,d-h);return{axisBBox:f,controllerBBox:u,timelineBBox:p}},enumerable:!1,configurable:!0}),e.prototype.setBySliderValues=function(n){var r,i,a=this.data,o=Ae(Array.isArray(n)?n:[0,n],2),s=o[0],l=o[1],c=a.length,u=a[Math.floor(s*c)],f=a[Math.ceil(l*c)-(Array.isArray(n)?0:1)];this.states.values=[(r=u?.time)!==null&&r!==void 0?r:a[0].time,(i=f?.time)!==null&&i!==void 0?i:1/0]},e.prototype.setByTimebarValues=function(n){var r,i,a,o=this.data,s=Ae(Array.isArray(n)?n:[void 0,n],2),l=s[0],c=s[1],u=o.find(function(h){var d=h.time;return d===l}),f=o.find(function(h){var d=h.time;return d===c});this.states.values=[(r=u?.time)!==null&&r!==void 0?r:(i=o[0])===null||i===void 0?void 0:i.time,(a=f?.time)!==null&&a!==void 0?a:1/0]},e.prototype.setByIndex=function(n){var r,i,a,o,s=this.data,l=Ae(n,2),c=l[0],u=l[1];this.states.values=[(i=(r=s[c])===null||r===void 0?void 0:r.time)!==null&&i!==void 0?i:s[0].time,(o=(a=this.data[u])===null||a===void 0?void 0:a.time)!==null&&o!==void 0?o:1/0]},Object.defineProperty(e.prototype,"sliderValues",{get:function(){var n=this.states,r=n.values,i=n.selectionType,a=Ae(Array.isArray(r)?r:[void 0,r],2),o=a[0],s=a[1],l=this.data,c=l.length,u=i==="value",f=function(){var d=l.findIndex(function(p){var g=p.time;return g===o});return u?0:d>-1?d/c:0},h=function(){if(s===1/0)return 1;var d=l.findIndex(function(p){var g=p.time;return g===s});return d>-1?d/c:u?.5:1};return[f(),h()]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var n=this.states,r=n.values,i=n.selectionType,a=Ae(Array.isArray(r)?r:[this.data[0].time,r],2),o=a[0],s=a[1];return i==="value"?s:[o,s]},enumerable:!1,configurable:!0}),e.prototype.getDatumByRatio=function(n){var r=this.data,i=r.length,a=Math.floor(n*(i-1));return r[a]},Object.defineProperty(e.prototype,"chartHandleIconShape",{get:function(){var n=this.states.selectionType,r=this.space.timelineBBox.height;return n==="range"?function(i){return new Tit({style:{type:i,height:r,iconSize:r/6}})}:function(){return new Ex({style:{x1:0,y1:-r/2,x2:0,y2:r/2,lineWidth:2,stroke:"#c8c8c8"}})}},enumerable:!1,configurable:!0}),e.prototype.getChartStyle=function(n){var r=this,i=n.x,a=n.y,o=n.width,s=n.height,l=this.states,c=l.selectionType,u=l.chartType,f=this.data,h=this.attributes,d=h.type,p=h.labelFormatter,g=ii(this.attributes,"chart");g.type;var v=yo(g,["type"]),y=c==="range";if(d==="time")return Ot({handleIconShape:function(){return new Sit({})},selectionFill:"#2e7ff8",selectionFillOpacity:1,showLabelOnInteraction:!0,handleLabelDy:y?-15:0,autoFitLabel:y,handleSpacing:y?-15:0,trackFill:"#edeeef",trackLength:o,trackOpacity:.5,trackRadius:s/2,trackSize:s/2,type:c,values:this.sliderValues,formatter:function(x){if(p)return p(x);var T=r.getDatumByRatio(x).time;return typeof T=="number"?YRe(T):xh(T,"YYYY-MM-DD HH:mm:ss")},transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},v);var _=c==="range"?5:0,E=f.map(function(x){var T=x.value;return T});return Ot({handleIconOffset:_,handleIconShape:this.chartHandleIconShape,selectionFill:"#fff",selectionFillOpacity:.5,selectionType:"invert",sparklineSpacing:.1,sparklineColumnLineWidth:0,sparklineColor:"#d4e5fd",sparklineAreaOpacity:1,sparklineAreaLineWidth:0,sparklineData:E,sparklineType:u,sparklineScale:.8,trackLength:o,trackSize:s,type:c,values:this.sliderValues,transform:"translate(".concat(i,", ").concat(a,")"),zIndex:1},v)},e.prototype.renderChart=function(n){n===void 0&&(n=this.space.timelineBBox),this.timeline.update(this.getChartStyle(n))},e.prototype.updateSelection=function(){this.timeline.setValues(this.sliderValues,!0),this.handleSliderChange(this.sliderValues)},e.prototype.getAxisStyle=function(n){var r=this.data,i=this.attributes,a=i.interval,o=i.labelFormatter,s=ii(this.attributes,"axis"),l=n.x,c=n.y,u=n.width,f=_r(_r([],Ae(r),!1),[{time:0}],!1).map(function(d,p,g){var v=d.time;return{label:"".concat(v),value:p/(g.length-1),time:v}}),h=Ot({startPos:[l,c],endPos:[l+u,c],data:f,labelFilter:function(d,p){return p<f.length-1},labelFormatter:function(d){var p=d.time;return o?o(p):Ait(p,a)}},s);return h},e.prototype.renderAxis=function(n){n===void 0&&(n=this.space.axisBBox);var r=this.attributes.type;r==="chart"&&this.axis.update(this.getAxisStyle(n))},e.prototype.renderController=function(n){n===void 0&&(n=this.space.controllerBBox);var r=this.attributes.type,i=this.states,a=i.state,o=i.speed,s=i.selectionType,l=i.chartType,c=ii(this.attributes,"controller"),u=this,f=Ot(Ot(Ot({},n),{iconSize:20,speed:o,state:a,selectionType:s,chartType:l,onChange:function(h,d){var p=d.value;switch(h){case"reset":u.internalReset();break;case"speed":u.handleSpeedChange(p);break;case"backward":u.internalBackward();break;case"playPause":p==="play"?u.internalPlay():u.internalPause();break;case"forward":u.internalForward();break;case"selectionType":u.handleSelectionTypeChange(p);break;case"chartType":u.handleChartTypeChange(p);break}}}),c);r==="time"&&(f.functions=[["reset","speed"],["backward","playPause","forward"],["selectionType"]]),this.controller.update(f)},e.prototype.dispatchOnChange=function(n){var r=this.data,i=this.attributes.onChange,a=this.states,o=a.values,s=a.selectionType,l=Ae(o,2),c=l[0],u=l[1],f=u===1/0?r.at(-1).time:u,h=s==="range"?[c,f]:f,d=function(p,g){return Array.isArray(p)?Array.isArray(g)?p[0]===g[0]&&(p[1]===g[1]||p[1]===1/0||g[1]===1/0):!1:Array.isArray(g)?!1:p===g};(!n||!d(n,h))&&i?.(s==="range"?[c,f]:f)},e.prototype.internalReset=function(n){var r,i,a=this.states.selectionType;this.internalPause(),this.setBySliderValues(a==="range"?[0,1]:[0,0]),this.renderController(),this.updateSelection(),n||((i=(r=this.attributes)===null||r===void 0?void 0:r.onReset)===null||i===void 0||i.call(r),this.dispatchOnChange())},e.prototype.reset=function(){this.internalReset()},e.prototype.moveSelection=function(n,r){var i=this.data,a=i.length,o=this.states,s=o.values,l=o.selectionType,c=o.playMode,u=Ae(s,2),f=u[0],h=u[1],d=i.findIndex(function(E){var x=E.time;return x===f}),p=i.findIndex(function(E){var x=E.time;return x===h});p===-1&&(p=a);var g=n==="backward"?-1:1,v;l==="range"?c==="acc"?(v=[d,p+g],g===-1&&d===p&&(v=[d,a])):v=[d+g,p+g]:v=[d,p+g];var y=function(E){var x=Ae(E.sort(function(C,D){return C-D}),2),T=x[0],S=x[1],w=function(C){return ga(C,0,a)};return S>a?l==="value"?[0,0]:c==="acc"?[w(T),w(T)]:[0,w(S-T)]:T<0?c==="acc"?[0,w(S)]:[w(T+a-S),a]:[w(T),w(S)]},_=y(v);return this.setByIndex(_),this.updateSelection(),_},e.prototype.internalBackward=function(n){var r,i,a=this.moveSelection("backward",n);return n||((i=(r=this.attributes)===null||r===void 0?void 0:r.onBackward)===null||i===void 0||i.call(r),this.dispatchOnChange()),a},e.prototype.backward=function(){this.internalBackward()},e.prototype.internalPlay=function(n){var r=this,i,a,o=this.data,s=this.attributes.loop,l=this.states.speed,c=l===void 0?1:l;this.playInterval=window.setInterval(function(){var u=r.internalForward();u[1]===o.length&&!s&&(r.internalPause(),r.renderController())},1e3/c),this.states.state="play",!n&&((a=(i=this.attributes)===null||i===void 0?void 0:i.onPlay)===null||a===void 0||a.call(i))},e.prototype.play=function(){this.internalPlay()},e.prototype.internalPause=function(n){var r,i;clearInterval(this.playInterval),this.states.state="pause",!n&&((i=(r=this.attributes)===null||r===void 0?void 0:r.onPause)===null||i===void 0||i.call(r))},e.prototype.pause=function(){this.internalPause()},e.prototype.internalForward=function(n){var r,i,a=this.moveSelection("forward",n);return n||((i=(r=this.attributes)===null||r===void 0?void 0:r.onForward)===null||i===void 0||i.call(r),this.dispatchOnChange()),a},e.prototype.forward=function(){this.internalForward()},e.prototype.handleSpeedChange=function(n){var r,i;this.states.speed=n;var a=this.states.state;a==="play"&&(this.internalPause(!0),this.internalPlay(!0)),(i=(r=this.attributes)===null||r===void 0?void 0:r.onSpeedChange)===null||i===void 0||i.call(r,n)},e.prototype.handleSelectionTypeChange=function(n){var r,i;this.states.selectionType=n,this.renderChart(),(i=(r=this.attributes)===null||r===void 0?void 0:r.onSelectionTypeChange)===null||i===void 0||i.call(r,n)},e.prototype.handleChartTypeChange=function(n){var r,i;this.states.chartType=n,this.renderChart(),(i=(r=this.attributes)===null||r===void 0?void 0:r.onChartTypeChange)===null||i===void 0||i.call(r,n)},e.prototype.render=function(){var n=this.space,r=n.axisBBox,i=n.controllerBBox,a=n.timelineBBox;this.renderController(i),this.renderAxis(r),this.renderChart(a),this.states.state==="play"&&this.internalPlay()},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.internalPause(!0)},e.defaultOptions={style:{x:0,y:0,axisLabelFill:"#6e6e6e",axisLabelTextAlign:"left",axisLabelTextBaseline:"top",axisLabelTransform:"translate(5, -12)",axisLineLineWidth:1,axisLineStroke:"#cacdd1",axisTickLength:15,axisTickLineWidth:1,axisTickStroke:"#cacdd1",chartShowLabel:!1,chartType:"line",controllerAlign:"center",controllerHeight:40,data:[],interval:"day",loop:!1,playMode:"acc",selectionType:"range",type:"time"}},e})(Es),F7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Cit(t){const{min:[e,n],max:[r,i]}=t.getLocalBounds();let a=0,o=0;return e>0&&(a=e),r<0&&(a=r),n>0&&(o=n),i<0&&(o=i),[a,o]}function Rit(t,e=[]){const[n=0,r=0,i=n,a=r]=e,o=t.parentNode,s=o.getEulerAngles();o.setEulerAngles(0);const{min:l,halfExtents:c}=t.getLocalBounds(),[u,f]=l,[h,d]=c;return o.setEulerAngles(s),{x:u-a,y:f-n,width:h*2+a+r,height:d*2+n+i}}function Mit(t,e,n,r,i=!0,a=!0){const o=f=>xw()(f);if(!e[0]&&!e[1])return o([Cit(t),e]);if(!n.length)return o([[0,0],e]);const[s,l]=n,c=[...l],u=[...s];if(l[0]!==s[0]){const f=i?-4:4;c[1]=l[1],a&&!i&&(c[0]=Math.max(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!a&&!i&&(c[0]=Math.max(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!a&&i&&(c[0]=Math.min(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f))),a&&i&&(c[0]=Math.min(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f)))}return o([l,c,u,s,e])}const XRe=VA(t=>{const e=t.attributes,{className:n,class:r,transform:i,rotate:a,labelTransform:o,labelTransformOrigin:s,x:l,y:c,x0:u=l,y0:f=c,text:h,background:d,connector:p,startMarker:g,endMarker:v,coordCenter:y,innerHTML:_}=e,E=F7(e,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform=`translate(${l}, ${c})`,[l,c,u,f].some(k=>!Ln(k))){t.children.forEach(k=>k.remove());return}const x=Vn(E,"background"),{padding:T}=x,S=F7(x,["padding"]),w=Vn(E,"connector"),{points:C=[]}=w,D=F7(w,["points"]);let L;_?L=ai(t).maybeAppend("html","html",n).style("zIndex",0).style("innerHTML",_).call(jr,Object.assign({transform:o,transformOrigin:s},E)).node():L=ai(t).maybeAppend("text","text").style("zIndex",0).style("text",h).call(jr,Object.assign({textBaseline:"middle",transform:o,transformOrigin:s},E)).node();const B=ai(t).maybeAppend("background","rect").style("zIndex",-1).call(jr,Rit(L,T)).call(jr,d?S:{}).node(),I=+u<y[0],U=+f<y[1],$=[+u-+l,+f-+c],X=Mit(B,$,C,y,I,U),N=g&&new ja({id:"startMarker",style:Object.assign({x:0,y:0},Vn(E,"startMarker"))}),M=v&&new ja({id:"endMarker",style:Object.assign({x:0,y:0},Vn(E,"endMarker"))});ai(t).maybeAppend("connector","path").style("zIndex",0).style("d",X).style("markerStart",N).style("markerEnd",M).call(jr,p?D:{})}),qRe=(t,e)=>{const{coordinate:n}=e;return(r,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l},[[h,d]]=r;return ai(new XRe).style("x",h).style("y",d).call(jr,a).style("transform",`${u}rotate(${+c})`).style("coordCenter",n.getCenter()).call(jr,f).call(jr,t).node()}};qRe.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var bX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Pit(t){const e=t/Math.sqrt(2),n=t*Math.sqrt(2),[r,i]=[-e,e-n],[a,o]=[0,0],[s,l]=[e,e-n];return[["M",r,i],["A",t,t,0,1,1,s,l],["L",a,o],["Z"]]}function Nit(t){const{min:e,max:n}=t.getLocalBounds();return[(e[0]+n[0])*.5,(e[1]+n[1])*.5]}const Iit=VA(t=>{const e=t.attributes,{class:n,x:r,y:i,transform:a}=e,o=bX(e,["class","x","y","transform"]),s=Vn(o,"marker"),{size:l=24}=s,c=()=>Pit(l/2),u=ai(t).maybeAppend("marker",()=>new ja({})).call(d=>d.node().update(Object.assign({symbol:c},s))).node(),[f,h]=Nit(u);ai(t).maybeAppend("text","text").style("x",f).style("y",h).call(jr,o)}),ZRe=(t,e)=>{const n=bX(t,[]);return(r,i,a)=>{const{color:o}=a,s=bX(a,["color"]),{color:l=o,text:c=""}=i,u={text:String(c),stroke:l,fill:l},[[f,h]]=r;return ai(new Iit).call(jr,s).style("transform",`translate(${f},${h})`).call(jr,u).call(jr,n).node()}};ZRe.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const KRe=(t,e)=>{const{coordinate:n}=e;return(r,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l,textAlign:"center",textBaseline:"middle"},[[h,d]]=r;return ai(new Jg).style("x",h).style("y",d).call(jr,a).style("transformOrigin","center center").style("transform",`${u}rotate(${c}deg)`).style("coordCenter",n.getCenter()).call(jr,f).call(jr,t).node()}};KRe.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Lit=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function kit(t,e){const n=[],r=[],i=[];let a=!1,o=null;const s=t.length/2;for(let l=0;l<s;l++){const c=t[l],u=t[l+s];if([...c,...u].some(f=>!e(f)))a=!0;else{if(n.push(c),r.push(u),a&&o){a=!1;const[f,h]=o;i.push([f,c,h,u])}o=[c,u]}}return[n.concat(r),i]}const xse=VA(t=>{const{areaPath:e,connectPath:n,areaStyle:r,connectStyle:i}=t.attributes,a=t.ownerDocument;ai(t).maybeAppend("connect-path",()=>a.createElement("path",{})).style("d",n).call(jr,i),ai(t).maybeAppend("area-path",()=>a.createElement("path",{})).style("d",e).call(jr,r)}),sv=(t,e)=>{const{curve:n,gradient:r=!1,defined:i=c=>!Number.isNaN(c)&&c!==void 0&&c!==null,connect:a=!1}=t,o=Lit(t,["curve","gradient","defined","connect"]),{coordinate:s,document:l}=e;return(c,u,f)=>{const{color:h}=f,{color:d=h,seriesColor:p,seriesX:g,seriesY:v}=u,y=as(s),_=B2e(s,u),E=r&&p?D2e(p,g,v,r,void 0,y):d,x=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:E,fill:E}),_&&{transform:_}),o),[T,S]=kit(c,i),w=Vn(x,"connect"),C=!!S.length,D=L=>ai(l.createElement("path",{})).style("d",L||"").call(jr,x).node();if(Mo(s)){const L=B=>{const I=s.getCenter(),U=B.slice(0,B.length/2),$=B.slice(B.length/2);return f9e().angle((X,N)=>HA(ul(U[N],I))).outerRadius((X,N)=>Xs(U[N],I)).innerRadius((X,N)=>Xs($[N],I)).defined((X,N)=>[...U[N],...$[N]].every(i)).curve(n)($)};return!C||a&&!Object.keys(w).length?D(L(T)):C&&!a?D(L(c)):ai(new xse).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},w),o)).style("areaPath",L(c)).style("connectPath",S.map(L).join("")).node()}else{const L=B=>{const I=B.slice(0,B.length/2),U=B.slice(B.length/2);return y?QV().y(($,X)=>I[X][1]).x1(($,X)=>I[X][0]).x0(($,X)=>U[X][0]).defined(($,X)=>[...I[X],...U[X]].every(i)).curve(n)(I):QV().x(($,X)=>I[X][0]).y1(($,X)=>I[X][1]).y0(($,X)=>U[X][1]).defined(($,X)=>[...I[X],...U[X]].every(i)).curve(n)(I)};return!C||a&&!Object.keys(w).length?D(L(T)):C&&!a?D(L(c)):ai(new xse).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},w),o)).style("areaPath",L(c)).style("connectPath",S.map(L).join("")).node()}}};sv.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const QRe=(t,e)=>{const{coordinate:n}=e;return(...r)=>{const i=Mo(n)?RK:CK;return sv(Object.assign({curve:i},t),e)(...r)}};QRe.props=Object.assign(Object.assign({},sv.props),{defaultMarker:"square"});var Dit=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const JRe=(t,e)=>{const n=Dit(t,[]),{coordinate:r}=e;return(...i)=>{const a=Mo(r)?oTe:as(r)?sTe:lTe;return sv(Object.assign({curve:a},n),e)(...i)}};JRe.props=Object.assign(Object.assign({},sv.props),{defaultMarker:"smooth"});const eMe=(t,e)=>(...n)=>sv(Object.assign({curve:fTe},t),e)(...n);eMe.props=Object.assign(Object.assign({},sv.props),{defaultMarker:"hvh"});const tMe=(t,e)=>(...n)=>sv(Object.assign({curve:uTe},t),e)(...n);tMe.props=Object.assign(Object.assign({},sv.props),{defaultMarker:"vh"});const nMe=(t,e)=>(...n)=>sv(Object.assign({curve:cTe},t),e)(...n);nMe.props=Object.assign(Object.assign({},sv.props),{defaultMarker:"hv"});const rMe=(t,e)=>{const{arrow:n=!1}=t;return(...r)=>NJ(Object.assign(Object.assign({},t),{arrow:n}),e)(...r)};rMe.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Sse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const iMe=(t,e)=>{const n=Sse(t,[]),{document:r}=e;return(i,a,o)=>{const{color:s}=o,l=Sse(o,["color"]),{color:c=s,transform:u}=a,[f,h]=i,d=iv();return d.moveTo(f[0],f[1]),d.bezierCurveTo(f[0]/2+h[0]/2,f[1],f[0]/2+h[0]/2,h[1],h[0],h[1]),ai(r.createElement("path",{})).call(jr,l).style("d",d.toString()).style("stroke",c).style("transform",u).call(jr,n).node()}};iMe.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Tse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Bit(t,e,n,r){const i=iv();if(Mo(n)){const a=n.getCenter(),o=Xs(t,a),l=(Xs(e,a)-o)*r+o;return i.moveTo(t[0],t[1]),zR(i,t,e,a,l),i.lineTo(e[0],e[1]),i}return as(n)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,t[1]),i.lineTo(t[0]+(e[0]-t[0])*r,e[1]),i.lineTo(e[0],e[1]),i):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],t[1]+(e[1]-t[1])*r),i.lineTo(e[0],e[1]),i)}const aMe=(t,e)=>{const{cornerRatio:n=1/3}=t,r=Tse(t,["cornerRatio"]),{coordinate:i,document:a}=e;return(o,s,l)=>{const{defaultColor:c}=l,u=Tse(l,["defaultColor"]),{color:f=c,transform:h}=s,[d,p]=o,g=Bit(d,p,i,n);return ai(a.createElement("path",{})).call(jr,u).style("d",g.toString()).style("stroke",f).style("transform",h).call(jr,r).node()}};aMe.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Ase=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const oMe=(t,e)=>{const n=Ase(t,[]),{coordinate:r,document:i}=e;return(a,o,s)=>{const{color:l}=s,c=Ase(s,["color"]),{color:u=l,transform:f}=o,[h,d]=a,p=iv();if(p.moveTo(h[0],h[1]),Mo(r)){const g=r.getCenter();p.quadraticCurveTo(g[0],g[1],d[0],d[1])}else{const g=POe(h,d),v=Xs(h,d)/2;zR(p,h,d,g,v)}return ai(i.createElement("path",{})).call(jr,c).style("d",p.toString()).style("stroke",u).style("transform",f).call(jr,n).node()}};oMe.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function sMe(t={}){const{shapes:e}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:e},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function hf(t={}){return[...sMe(t),{name:"title",scale:"identity"}]}function By(){return[{type:JF,channel:"color"},{type:e4,channel:["x","y"]}]}function Lw(){return[{type:JF,channel:"x"},{type:e4,channel:["y"]}]}function Fit(){return[{type:JF,channel:"color"},{type:e4,channel:["position"]}]}function kw(t={}){return sMe(t)}function vl(){return[{type:iOe}]}function Ll(){return[]}function U7(t,e){return t.getBandWidth(t.invert(e))}function ab(t,e,n={}){const{x:r,y:i,series:a}=e,{x:o,y:s,series:l}=t,{style:{bandOffset:c=l?0:.5,bandOffsetX:u=c,bandOffsetY:f=c}={}}=n,h=!!o?.getBandWidth,d=!!s?.getBandWidth,p=!!l?.getBandWidth;return!h&&!d?g=>g:(g,v)=>{const y=h?U7(o,r[v]):0,_=d?U7(s,i[v]):0,x=p&&a?(U7(l,a[v])/2+ +a[v])*y:0,[T,S]=g;return[T+u*y+x,S+f*_]}}function $D(t){return parseFloat(t)/100}function nee(t,e,n,r){const{x:i,y:a}=n,{innerWidth:o,innerHeight:s}=r.getOptions(),l=Array.from(t,c=>{const u=i[c],f=a[c],h=typeof u=="string"?$D(u)*o:+u,d=typeof f=="string"?$D(f)*s:+f;return[[h,d]]});return[t,l]}function Lm(t){return typeof t=="function"?t:e=>e[t]}function j7(t,e){return Array.from(t,Lm(e))}function Uit(t){return Array.isArray(t)?{links:t}:t&&typeof t=="object"?{links:t.links||[],nodes:t.nodes}:{links:[]}}function ree(t,e){const n=Uit(t),{source:r=f=>f.source,target:i=f=>f.target,value:a=f=>f.value}=e,{links:o,nodes:s}=n;if(!o.length)return{links:[],nodes:s||[]};const l=j7(o,r),c=j7(o,i),u=j7(o,a);return{links:o.map((f,h)=>({target:c[h],source:l[h],value:u[h]})),nodes:s||Array.from(new Set([...l,...c]),f=>({key:f}))}}var jit=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const lMe=(t,e)=>{const{coordinate:n,document:r}=e;return(i,a,o)=>{const{color:s}=o,l=jit(o,["color"]),{color:c=s,src:u="",size:f=32,transform:h=""}=a;let{width:d=f,height:p=f}=t;const[[g,v]]=i,[y,_]=n.getSize();d=typeof d=="string"?$D(d)*y:d,p=typeof p=="string"?$D(p)*_:p;const E=g-Number(d)/2,x=v-Number(p)/2;return ai(r.createElement("image",{})).call(jr,l).style("x",E).style("y",x).style("src",u).style("stroke",c).style("transform",h).call(jr,t).style("width",d).style("height",p).node()}};lMe.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var zit=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function $it(t,e){const n=iv();if(Mo(e)){const r=e.getCenter(),i=[...t,t[0]],a=i.map(o=>Xs(o,r));return i.forEach((o,s)=>{if(s===0){n.moveTo(o[0],o[1]);return}const l=a[s],c=t[s-1],u=a[s-1];u!==void 0&&Math.abs(l-u)<1e-10?zR(n,c,o,r,l):n.lineTo(o[0],o[1])}),n.closePath(),n}return cZe(n,t)}const cMe=(t,e)=>{const{coordinate:n,document:r}=e;return(i,a,o)=>{const{color:s}=o,l=zit(o,["color"]),{color:c=s,transform:u}=a,f=$it(i,n);return ai(r.createElement("path",{})).call(jr,l).style("d",f.toString()).style("stroke",c).style("fill",c).style("transform",u).call(jr,t).node()}};cMe.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var wse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Hit(t,e){const[n,r,i,a]=t,o=iv();if(Mo(e)){const s=e.getCenter(),l=Xs(s,n);return o.moveTo(n[0],n[1]),o.quadraticCurveTo(s[0],s[1],i[0],i[1]),zR(o,i,a,s,l),o.quadraticCurveTo(s[0],s[1],r[0],r[1]),zR(o,r,n,s,l),o.closePath(),o}return o.moveTo(n[0],n[1]),o.bezierCurveTo(n[0]/2+i[0]/2,n[1],n[0]/2+i[0]/2,i[1],i[0],i[1]),o.lineTo(a[0],a[1]),o.bezierCurveTo(a[0]/2+r[0]/2,a[1],a[0]/2+r[0]/2,r[1],r[0],r[1]),o.lineTo(n[0],n[1]),o.closePath(),o}const uMe=(t,e)=>{const n=wse(t,[]),{coordinate:r,document:i}=e;return(a,o,s)=>{const{color:l}=s,c=wse(s,["color"]),{color:u=l,transform:f}=o,h=Hit(a,r);return ai(i.createElement("path",{})).call(jr,c).style("d",h.toString()).style("fill",u||l).style("stroke",u||l).style("transform",f).call(jr,n).node()}};uMe.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Git=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Wit(t,e){const n=iv();if(!Mo(e))n.moveTo(...t[0]),n.lineTo(...t[1]),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.lineTo(...t[5]),n.lineTo(...t[6]),n.lineTo(...t[7]),n.closePath(),n.moveTo(...t[8]),n.lineTo(...t[9]),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.lineTo(...t[13]);else{const r=e.getCenter(),[i,a]=r,o=Vp(ul(t[0],r)),s=Vp(ul(t[1],r)),l=Xs(r,t[2]),c=Xs(r,t[3]),u=Xs(r,t[8]),f=Xs(r,t[10]),h=Xs(r,t[11]);n.moveTo(...t[0]),n.arc(i,a,l,o,s),n.arc(i,a,l,s,o,!0),n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(...t[4]),n.arc(i,a,c,o,s),n.lineTo(...t[6]),n.arc(i,a,f,s,o,!0),n.closePath(),n.moveTo(...t[8]),n.arc(i,a,u,o,s),n.arc(i,a,u,s,o,!0),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(...t[12]),n.arc(i,a,h,o,s),n.arc(i,a,h,s,o,!0)}return n}const fMe=(t,e)=>{const{coordinate:n,document:r}=e;return(i,a,o)=>{const{color:s,transform:l}=a,{color:c,fill:u=c,stroke:f=c}=o,h=Git(o,["color","fill","stroke"]),d=Wit(i,n);return ai(r.createElement("path",{})).call(jr,h).style("d",d.toString()).style("stroke",f).style("fill",s||u).style("transform",l).call(jr,t).node()}};fMe.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Vit=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Yit(t,e,n=4){const r=iv();if(!Mo(e))return r.moveTo(...t[2]),r.lineTo(...t[3]),r.lineTo(t[3][0]-n,t[3][1]),r.lineTo(t[10][0]-n,t[10][1]),r.lineTo(t[10][0]+n,t[10][1]),r.lineTo(t[3][0]+n,t[3][1]),r.lineTo(...t[3]),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]),r.moveTo(t[3][0]+n/2,t[8][1]),r.arc(t[3][0],t[8][1],n/2,0,Math.PI*2),r.closePath(),r;const i=e.getCenter(),[a,o]=i,s=Xs(i,t[3]),l=Xs(i,t[8]),c=Xs(i,t[10]),u=Vp(ul(t[2],i)),f=Math.asin(n/l),h=u-f,d=u+f;r.moveTo(...t[2]),r.lineTo(...t[3]),r.moveTo(Math.cos(h)*s+a,Math.sin(h)*s+o),r.arc(a,o,s,h,d),r.lineTo(Math.cos(d)*c+a,Math.sin(d)*c+o),r.arc(a,o,c,d,h,!0),r.lineTo(Math.cos(h)*s+a,Math.sin(h)*s+o),r.closePath(),r.moveTo(...t[10]),r.lineTo(...t[11]);const p=(h+d)/2;return r.moveTo(Math.cos(p)*(l+n/2)+a,Math.sin(p)*(l+n/2)+o),r.arc(Math.cos(p)*l+a,Math.sin(p)*l+o,n/2,p,Math.PI*2+p),r.closePath(),r}const hMe=(t,e)=>{const{coordinate:n,document:r}=e;return(i,a,o)=>{const{color:s,transform:l}=a,c=4,{color:u,fill:f=u,stroke:h=u}=o,d=Vit(o,["color","fill","stroke"]),p=Yit(i,n,c);return ai(r.createElement("path",{})).call(jr,d).style("d",p.toString()).style("stroke",h).style("fill",s||f).style("transform",l).call(jr,t).node()}};hMe.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Ose=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Xit(t,e,n){return t.createElement("path",{style:Object.assign({d:`M ${e},${e} L -${e},0 L ${e},-${e} L 0,0 Z`,transformOrigin:"center"},n)})}function qit(t,e){if(!Mo(e))return xw().x(r=>r[0]).y(r=>r[1])(t);const n=e.getCenter();return OK()({startAngle:0,endAngle:Math.PI*2,outerRadius:Xs(t[0],n),innerRadius:Xs(t[1],n)})}function Zit(t,e){if(!Mo(t))return e;const[n,r]=t.getCenter();return`translate(${n}, ${r}) ${e||""}`}const iee=(t,e)=>{const{arrow:n,arrowSize:r=4}=t,i=Ose(t,["arrow","arrowSize"]),{coordinate:a,document:o}=e;return(s,l,c)=>{const{color:u,lineWidth:f}=c,h=Ose(c,["color","lineWidth"]),{color:d=u,size:p=f}=l,g=n?Xit(o,r,Object.assign({fill:i.stroke||d,stroke:i.stroke||d},Vn(i,"arrow"))):null,v=qit(s,a),y=Zit(a,l.transform);return ai(o.createElement("path",{})).call(jr,h).style("d",v).style("stroke",d).style("lineWidth",p).style("transform",y).style("markerEnd",g).call(jr,i).node()}};iee.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Cse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Kit(t,e,n){return[["M",t,e],["L",t+2*n,e-n],["L",t+2*n,e+n],["Z"]]}function Qit(t){return xw().x(e=>e[0]).y(e=>e[1])(t)}function Jit(t,e,n,r,i,a,o=0){const[[s,l],[c,u]]=e;if(as(t)){const v=s+n,y=c+r,_=v+o,E=l+i,x=u+a;return[[v,E],[_,E],[_,x],[y,x]]}const f=l-n,h=u-r,d=f-o,p=s-i,g=c-a;return[[p,f],[p,d],[g,d],[g,h]]}const dMe=(t,e)=>{const{offsetX:n=0,sourceOffsetX:r=n,targetOffsetX:i=n,offsetY:a=0,sourceOffsetY:o=a,targetOffsetY:s=a,connectLength1:l,endMarker:c=!0}=t,u=Cse(t,["offsetX","sourceOffsetX","targetOffsetX","offsetY","sourceOffsetY","targetOffsetY","connectLength1","endMarker"]),{coordinate:f}=e;return(h,d,p)=>{const{color:g,connectLength1:v}=p,y=Cse(p,["color","connectLength1"]),{color:_,transform:E}=d,x=Jit(f,h,o,s,r,i,l??v),T=Vn(Object.assign(Object.assign({},u),p),"endMarker");return ai(new Kf).call(jr,y).style("d",Qit(x)).style("stroke",_||g).style("transform",E).style("markerEnd",c?new ja({className:"marker",style:Object.assign(Object.assign({},T),{symbol:Kit})}):null).call(jr,u).node()}};dMe.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function eat(t,e,n,r){const i=e.length/2,a=e.slice(0,i),o=e.slice(i);let s=Sw(a,(d,p)=>Math.abs(d[1]-o[p][1]));s=Math.max(Math.min(s,i-2),1);const l=d=>[a[d][0],(a[d][1]+o[d][1])/2],c=l(s),u=l(s-1),f=l(s+1),h=Vp(ul(f,u))/Math.PI*180;return{x:c[0],y:c[1],transform:`rotate(${h})`,textAlign:"center",textBaseline:"middle"}}function pMe(t,e,n,r){const{bounds:i}=n,[[a,o],[s,l]]=i,c=s-a,u=l-o,f=h=>{const{x:d,y:p}=h,g=tae(n.x,c),v=tae(n.y,u);return Object.assign(Object.assign({},h),{x:(g||d)+a,y:(v||p)+o})};return f(t==="left"?{x:0,y:u/2,textAlign:"start",textBaseline:"middle"}:t==="right"?{x:c,y:u/2,textAlign:"end",textBaseline:"middle"}:t==="top"?{x:c/2,y:0,textAlign:"center",textBaseline:"top"}:t==="bottom"?{x:c/2,y:u,textAlign:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:t==="top-right"?{x:c,y:0,textAlign:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:u,textAlign:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:c,y:u,textAlign:"end",textBaseline:"bottom"}:{x:c/2,y:u/2,textAlign:"center",textBaseline:"middle"})}function gMe(t,e,n,r){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s}=n,l=r.getCenter(),c=Vx(r,e,[i,a]),{innerRadius:u,outerRadius:f,startAngle:h,endAngle:d}=c,p=t==="inside"?(h+d)/2:d,g=aee(p,o,s),v=(()=>{const[y,_]=e,E=u+(f-u)*.5,[x,T]=t==="inside"?qR(l,p,E):POe(y,_);return{x,y:T}})();return Object.assign(Object.assign({},v),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:g})}function qR(t,e,n){return[t[0]+Math.sin(e)*n,t[1]-Math.cos(e)*n]}function aee(t,e,n){if(!e)return 0;const r=n?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+r}function tat(t,e,n,r){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s,radius:l=.5,offset:c=0}=n,u=Vx(r,e,[i,a]),{startAngle:f,endAngle:h}=u,d=r.getCenter(),p=(f+h)/2,v={textAlign:"center",textBaseline:"middle",rotate:aee(p,o,s)},{innerRadius:y,outerRadius:_}=u,x=y+(_-y)*l+c,[T,S]=qR(d,p,x);return Object.assign({x:T,y:S},v)}function Rse(t){return t===void 0?null:t}function vMe(t,e,n,r){const{bounds:i}=n,[a]=i;return{x:Rse(a[0]),y:Rse(a[1])}}function z0(t,e,n,r){const{bounds:i}=n;return i.length===1?vMe(t,e,n):(a4(r)?gMe:Ow(r)?tat:pMe)(t,e,n,r)}function nat(t,e,n,r,i){const[a,o]=qR(t,e,n),[s,l]=qR(t,e,r),c=Math.sin(e)>0?1:-1;return[[a,o],[s,l],[s+c*i,l]]}function mMe(t,e,n){const r=Vx(n,t,[e.y,e.y1]),{innerRadius:i,outerRadius:a}=r;return i+(a-i)}function yMe(t,e,n){const r=Vx(n,t,[e.y,e.y1]),{startAngle:i,endAngle:a}=r;return(i+a)/2}function oee(t,e,n,r){const{autoRotate:i,rotateToAlignArc:a,offset:o=0,connector:s=!0,connectorLength:l=o,connectorLength2:c=0,connectorDistance:u=0}=n,f=r.getCenter(),h=yMe(e,n,r),d=Math.sin(h)>0?1:-1,p=aee(h,i,a),g={textAlign:d>0||a4(r)?"start":"end",textBaseline:"middle",rotate:p},v=mMe(e,n,r),y=v+(s?l:o),[[_,E],[x,T],[S,w]]=nat(f,h,v,y,s?c:0),C=s?+u*d:0,D=S+C,L=w,B={connector:s,connectorPoints:[[x-D,T-L],[S-D,w-L]]};return Object.assign(Object.assign({x0:_,y0:E,x:S+C,y:w},g),B)}function rat(t,e,n,r){const{bounds:i}=n;return i.length===1?vMe(t,e,n):(a4(r)?gMe:Ow(r)?oee:pMe)(t,e,n,r)}function Mse(t,e={}){const{labelHeight:n=14,height:r}=e,i=Xg(t,c=>c.y),a=i.length,o=new Array(a);for(let c=0;c<a;c++){const u=i[c],{y:f}=u;o[c]={y:f,y1:f+n,labels:[f]}}let s=!0;for(;s;){s=!1;for(let c=o.length-1;c>0;c--){const u=o[c],f=o[c-1];if(f.y1>u.y){s=!0,f.labels.push(...u.labels),o.splice(c,1),f.y1+=u.y1-u.y;const h=f.y1-f.y;f.y1=Math.max(Math.min(f.y1,r),h),f.y=f.y1-h}}}let l=0;for(const c of o){const{y:u,labels:f}=c;let h=u-n;for(const d of f){const p=i[l++],v=h+n-d;p.connectorPoints[0][1]-=v,p.y=h+n,h+=n}}}function Pse(t,e){const n=Xg(t,s=>s.y),{height:r,labelHeight:i=14}=e,a=Math.ceil(r/i);if(n.length<=a)return Mse(n,e);const o=[];for(let s=0;s<n.length;s++)s<n.length-a?(n[s].opacity=0,n[s].connector=!1):o.push(n[s]);Mse(o,e)}var iat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const MI=new WeakMap;function aat(t,e,n){const{connectorLength:r,connectorLength2:i,connectorDistance:a}=e,o=iat(oee("outside",t,e,n),[]),s=n.getCenter(),l=mMe(t,e,n),c=yMe(t,e,n),u=l+r+i,f=Math.sin(c)>0?1:-1,h=s[0]+(u+ +a)*f,{x:d}=o,p=h-d;return o.x+=p,o.connectorPoints[0][0]-=p,o}function oat(t,e,n,r,i,a){if(!Ow(r))return{};if(MI.has(e))return MI.get(e);const o=a.map(h=>aat(h,n,r)),{width:s,height:l}=r.getOptions(),c=o.filter(h=>h.x<s/2),u=o.filter(h=>h.x>=s/2),f=Object.assign(Object.assign({},i),{height:l});return Pse(c,f),Pse(u,f),o.forEach((h,d)=>MI.set(a[d],h)),MI.get(e)}var sat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function lat(t,e,n,r){if(!Ow(r))return{};const{connectorLength:i,connectorLength2:a,connectorDistance:o}=n,s=sat(oee("outside",e,n,r),[]),{x0:l,y0:c}=s,u=r.getCenter(),h=dWe(r)+i,d=HA([l-u[0],c-u[1]]),p=Math.sin(d)>0?1:-1,[g,v]=qR(u,d,h);return s.x=g+(a+o)*p,s.y=v,s}const cat=Object.freeze(Object.defineProperty({__proto__:null,area:eat,bottom:z0,bottomLeft:z0,bottomRight:z0,inside:z0,left:z0,outside:rat,right:z0,spider:oat,surround:lat,top:z0,topLeft:z0,topRight:z0},Symbol.toStringTag,{value:"Module"}));var Nse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function uat(t,e){return t!==void 0?t:Ow(e)?"inside":as(e)?"right":"top"}function fat(t,e,n,r,i,a){const{position:o}=e,{render:s}=i,l=uat(o,n),u=r[s?"htmlLabel":l==="inside"?"innerLabel":"label"],f=Object.assign({},u,e),h=cat[fJ(l)];if(!h)throw new Error(`Unknown position: ${l}`);return Object.assign(Object.assign({},u),h(l,t,f,n,i,a))}const _Me=(t,e)=>{const{coordinate:n,theme:r}=e,{render:i}=t;return(a,o,s,l)=>{const{text:c,x:u,y:f,transform:h="",transformOrigin:d,className:p=""}=o,g=Nse(o,["text","x","y","transform","transformOrigin","className"]),v=fat(a,o,n,r,t,l),{rotate:y=0,transform:_=""}=v,E=Nse(v,["rotate","transform"]);return ai(new XRe).call(jr,E).style("text",`${c}`).style("className",`${p} g2-label`).style("innerHTML",i?i(c,o.datum,o.index):void 0).style("labelTransform",`${_} rotate(${+y}) ${h}`.trim()).style("labelTransformOrigin",d).style("coordCenter",n.getCenter()).call(jr,g).node()}};_Me.props={defaultMarker:"point"};var Ise=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const see=(t,e)=>{const{arrow:n,colorAttribute:r}=t,i=Ise(t,["arrow","colorAttribute"]),{coordinate:a,document:o}=e;return(s,l,c)=>{const{color:u,stroke:f}=c,h=Ise(c,["color","stroke"]),{d,color:p=u}=l,[g,v]=a.getSize();return ai(o.createElement("path",{})).call(jr,h).style("d",typeof d=="function"?d({width:g,height:v}):d).style(r,p).call(jr,i).node()}};see.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const bMe=(t,e)=>see(Object.assign({colorAttribute:"fill"},t),e);bMe.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const EMe=(t,e)=>see(Object.assign({fill:"none",colorAttribute:"stroke"},t),e);EMe.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var hat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const xMe=(t,e)=>{const{document:n}=e;return(r,i,a)=>{const{transform:o}=i,{color:s}=a,l=hat(a,["color"]),{color:c=s}=i,[u,...f]=r,h=iv();return h.moveTo(...u),f.forEach(([d,p])=>{h.lineTo(d,p)}),h.closePath(),ai(n.createElement("path",{})).call(jr,l).style("d",h.toString()).style("stroke",c||s).style("fill",c||s).style("fillOpacity",.4).style("transform",o).call(jr,t).node()}};xMe.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function SMe(t){var e,n,r,i=t||1;function a(s,l){++e>i&&(r=n,o(1),++e),n[s]=l}function o(s){e=0,n=Object.create(null),s||(r=Object.create(null))}return o(),{clear:o,has:function(s){return n[s]!==void 0||r[s]!==void 0},get:function(s){var l=n[s];if(l!==void 0)return l;if((l=r[s])!==void 0)return a(s,l),l},set:function(s,l){n[s]!==void 0?n[s]=l:a(s,l)}}}SMe(3);function TMe(t,e=(...r)=>`${r[0]}`,n=16){const r=SMe(n);return(...i)=>{const a=e(...i);let o=r.get(a);return r.has(a)?r.get(a):(o=t(...i),r.set(a,o),o)}}function dat(t){return typeof t=="string"?t.split(" ").map(e=>{const[n,r]=e.split(":");return[+n,r]}):t}function HD(t,e,n){const r=t?t():document.createElement("canvas");return r.width=e,r.height=n,r}const pat=TMe((t,e,n)=>{const r=HD(n,t*2,t*2),i=r.getContext("2d"),a=t,o=t;if(e===1)i.beginPath(),i.arc(a,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const s=i.createRadialGradient(a,o,t*e,a,o,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*t,2*t)}return r},t=>`${t}`);function gat(t,e){const r=HD(e,256,1).getContext("2d"),i=r.createLinearGradient(0,0,256,1);return dat(t).forEach(([a,o])=>{i.addColorStop(a,o)}),r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function vat(t,e,n,r,i,a){const{blur:o}=i;let s=r.length;for(;s--;){const{x:l,y:c,value:u,radius:f}=r[s],h=Math.min(u,n),d=l-f,p=c-f,g=pat(f,1-o,a),v=(h-e)/(n-e);t.globalAlpha=Math.max(v,.001),t.drawImage(g,d,p)}return t}function mat(t,e,n,r,i){const{minOpacity:a,opacity:o,maxOpacity:s,useGradientOpacity:l}=i,c=0,u=0,f=e,h=n,d=t.getImageData(c,u,f,h),p=d.data,g=p.length;for(let v=3;v<g;v+=4){const y=p[v],_=y*4;if(!_)continue;const E=o||Math.max(0,Math.min(s,Math.max(a,y)));p[v-3]=r[_],p[v-2]=r[_+1],p[v-1]=r[_+2],p[v]=l?r[_+3]:E}return d}function yat(t,e,n,r,i,a,o){const s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},a);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;const c=HD(o,t,e).getContext("2d"),u=gat(s.gradient,o);c.clearRect(0,0,t,e),vat(c,n,r,i,s,o);const f=mat(c,t,e,u,s),d=HD(o,t,e).getContext("2d");return d.putImageData(f,0,0),d}var _at=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function bat(t,e){return Object.keys(t).reduce((n,r)=>{const i=t[r];return e(i,r)||(n[r]=i),n},{})}const AMe=(t,e)=>{const{gradient:n,opacity:r,maxOpacity:i,minOpacity:a,blur:o,useGradientOpacity:s}=t,l=_at(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:c,createCanvas:u,document:f}=e;return(h,d,p)=>{const{transform:g}=d,[v,y]=c.getSize(),_=h.map(w=>({x:w[0],y:w[1],value:w[2],radius:w[3]})),E=Nd(h,w=>w[2]),x=_o(h,w=>w[2]),S=v&&y?yat(v,y,E,x,_,bat({gradient:n,opacity:r,minOpacity:a,maxOpacity:i,blur:o,useGradientOpacity:s},w=>w===void 0),u):{canvas:null};return ai(f.createElement("image",{})).call(jr,p).style("x",0).style("y",0).style("width",v).style("height",y).style("src",S.canvas.toDataURL()).style("transform",g).call(jr,l).node()}};AMe.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Eat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const wMe=(t,e)=>{const{render:n}=t,r=Eat(t,["render"]);return i=>{const[[a,o]]=i;return n(Object.assign(Object.assign({},r),{x:a,y:o}),e)}};wMe.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Lse=5e3;function kse(t,e,n){return t+(e-t)*n}function xat(t,e,n,r){return e===0?[[t+1/2*n/Math.PI/2,r/2],[t+1/2*n/Math.PI,r],[t+n/4,r]]:e===1?[[t+1/2*n/Math.PI/2*(Math.PI-2),r],[t+1/2*n/Math.PI/2*(Math.PI-1),r/2],[t+n/4,0]]:e===2?[[t+1/2*n/Math.PI/2,-r/2],[t+1/2*n/Math.PI,-r],[t+n/4,-r]]:[[t+1/2*n/Math.PI/2*(Math.PI-2),-r],[t+1/2*n/Math.PI/2*(Math.PI-1),-r/2],[t+n/4,0]]}function Sat(t,e,n,r,i,a,o){const s=Math.ceil(2*t/n*4)*4,l=[];let c=r;for(;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*n;const u=a-t+c-t*2;l.push(["M",u,e]);let f=0;for(let h=0;h<s;++h){const d=h%4,p=xat(h*n/4,d,n,i);l.push(["C",p[0][0]+u,-p[0][1]+e,p[1][0]+u,-p[1][1]+e,p[2][0]+u,-p[2][1]+e]),h===s-1&&(f=p[2][0])}return l.push(["L",f+u,o+t]),l.push(["L",u,o+t]),l.push(["Z"]),l}function Tat(t,e,n,r,i,a,o,s,l,c,u){const{fill:f,fillOpacity:h,opacity:d}=i;for(let p=0;p<r;p++){const g=r<=1?1:p/(r-1),v=Sat(s,o+s*n,l,0,s/40,t,e),y=u.createElement("path",{style:{d:v,fill:f,opacity:kse(.2,.9,g)*Number(d||h)}});a.appendChild(y);try{const _=[{transform:"translate(0, 0)"},{transform:`translate(${l*2}, 0)`}];y.animate(_,{duration:kse(.5*Lse,Lse,g)*2,iterations:1/0})}catch{console.warn("off-screen group animate error!")}}}function Aat(t,e,n){return`
      M ${t} ${e-n} 
      a ${n} ${n} 0 1 0 0 ${n*2}
      a ${n} ${n} 0 1 0 0 ${-n*2}
      Z
    `}function wat(t,e,n){const i=n*.618;return`
      M ${t-i} ${e-n}
      L ${t+i} ${e-n}
      L ${t+i} ${e+n}
      L ${t-i} ${e+n}
      Z
    `}function Oat(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e}
      L ${t} ${e+n}
      L ${t-n} ${e}
      Z
    `}function Cat(t,e,n){return`
      M ${t} ${e-n}
      L ${t+n} ${e+n}
      L ${t-n} ${e+n}
      Z
    `}function Rat(t,e,n){const r=n*4/3,i=Math.max(r,n*2),a=r/2,o=t,s=a+e-i/2,l=Math.asin(a/((i-a)*.85)),c=Math.sin(l)*a,u=Math.cos(l)*a,f=o-u,h=s+c,d=t,p=s+a/Math.sin(l);return`
      M ${f} ${h}
      A ${a} ${a} 0 1 1 ${f+u*2} ${h}
      Q ${d} ${p} ${t} ${e+i/2}
      Q ${d} ${p} ${f} ${h}
      Z 
    `}const Dse={pin:Rat,rect:wat,circle:Aat,diamond:Oat,triangle:Cat};var Bse=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Mat=(t="circle")=>Dse[t]||Dse.circle,OMe=(t,e)=>{if(!e)return;const{coordinate:n}=e,{liquidOptions:r,styleOptions:i}=t,{liquidShape:a,percent:o}=r,{background:s,outline:l={},wave:c={}}=i,u=Bse(i,["background","outline","wave"]),{border:f=2,distance:h=0}=l,d=Bse(l,["border","distance"]),{length:p=192,count:g=3}=c;return(v,y,_)=>{const{document:E}=e.canvas,{color:x,fillOpacity:T}=_,S=Object.assign(Object.assign({fill:x},_),u),w=E.createElement("g",{}),[C,D]=n.getCenter(),L=n.getSize(),B=Math.min(...L)/2,I=ur(a)?a:Mat(a),U=I(C,D,B,...L),$=I(C,D,B+f/2,...L);if(Object.keys(s).length){const M=E.createElement("path",{style:Object.assign({d:U,fill:"#fff"},s)});w.appendChild(M)}if(o>0){const M=E.createElement("path",{style:{d:$}});w.appendChild(M),w.style.clipPath=M,Tat(C,D,1-o,g,S,w,M.getBBox().y,B*2,p,!0,E)}const X=E.createElement("path",{style:{d:U,fill:"transparent",lineWidth:f+2*h,stroke:"#fff"}}),N=E.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:U,stroke:x,strokeOpacity:T,lineWidth:f},S),d),{fill:"transparent"})});return w.appendChild(X),w.appendChild(N),w}};OMe.props={};const Fse=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))/2,Pat=(t,e,n)=>{const r=Math.atan2(t[1]-n[1],t[0]-n[0]);let a=Math.atan2(e[1]-n[1],e[0]-n[0])-r;return a<0&&(a+=Math.PI*2),a},Nat=(t,e)=>{if(!e)return;const{coordinate:n}=e;if(!n?.getCenter)return;const r=n.getCenter();return(i,a,o)=>{const{document:s}=e.canvas,{color:l,index:c}=a,u=s.createElement("g",{}),f=Fse(i[0],i[1]),h=Fse(i[0],r)*2,d=Pat(i[3],i[0],r)>Math.PI,p=s.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",f,f,0,1,0,...i[1]],["A",h+f*2,h+f*2,0,d?1:0,0,...i[2]],["A",f,f,0,1,c===0?0:1,...i[3]],["A",h,h,0,d?1:0,1,...i[0]],["Z"]]},o),ww(t,["shape","last","first"])),{fill:l||o.color})});return u.appendChild(p),u}},Use="main-layer",EX="label-layer",pm="element",GD="view",W_="plot",jse="component",xX="label",zse="area",z7="axis-breaks",CMe="axis-breaks-group";var PI=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},Iat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Lat=.03,kat={fill:"#fff",stroke:"#aaa",lineDash:"4 3",lineWidth:.5,fillOpacity:1,strokeOpacity:1},xE=0,Dat=(t,e,n,r,i,a)=>{const o=[],s=[],l=r-1;for(let c=1;c<l;c++){const u=c/l*e,f=t+(c%2===0?n:-n);o.push(`${u},${f}`),s.push(`${u},${i?f-a:f+a}`)}return o.push(`${e},${t}`),s.push(`${e+a},${t}`),[o,s]},RMe=(t,e)=>{const{context:n,selection:r,view:i}=e,a=r.select(`.${W_}`).node(),{document:o}=n.canvas,{scale:s}=i,l=new Map,c=(f,h,d)=>PI(void 0,void 0,void 0,function*(){const{update:p,setState:g}=n.externals;g("options",v=>{const{marks:y}=v;if(!y||!y.length)return v;const _=y.map(E=>{const x=Wr(E,"scale.y.breaks",[]),T=x.filter(S=>S.start!==h&&S.end!==d&&!S.collapsed);return x.forEach(S=>{S.start===h&&S.end===d&&(S.collapsed=!0)}),console.log("breaks group:",x,T),Nt({},E,{scale:{y:{breaks:T}}})});return l.set(f,{start:h,end:d}),Object.assign(Object.assign({},v),{marks:_})}),yield p()}),u=()=>PI(void 0,void 0,void 0,function*(){if(!l.size)return;const{update:f,setState:h}=n.externals;h("options",d=>{const{marks:p}=d,g=p.map(v=>{const y=Wr(v,"scale.y.breaks",[]);return H_(v,"scale.y.breaks",y.map(_=>Object.assign(Object.assign({},_),{collapsed:!1}))),v});return l.clear(),Object.assign(Object.assign({},d),{marks:g})}),yield f()});return f=>{const{key:h,start:d,end:p,gap:g=Lat,vertices:v=50,lineWidth:y=.5,verticeOffset:_=3}=f,E=Iat(f,["key","start","end","gap","vertices","lineWidth","verticeOffset"]),x=o.createElement("g",{id:`break-group-${h}`,className:CMe}),T=Wr(s,"x.sortedDomain",[]),S=s.y.getOptions(),{range:w,domain:C}=S,D=C.indexOf(d),L=C.indexOf(p),{width:B,height:I}=a.getBBox();if(D===-1||L===-1||!T.length)return x;const U=w[0]>w[1],$=w[D]*I,X=w[L]*I;let N="",M="";for(const[z,{y:j,isLower:V}]of[{y:X,isLower:!1},{y:$,isLower:!0}].entries()){const Q=U?y:-y,[ee,re]=Dat(j,B-xE,_,v,V,Q);z===0?(N=`M ${xE},${j} L ${ee.join(" L ")} `,M=`M ${xE-y},${j+Q} L ${re.join(" L ")} `):(N+=`L ${B-xE},${j} L ${[...ee].reverse().join(" L ")} L ${xE},${j} Z`,M+=`L ${B-xE+y+2},${j-Q} L ${[...re].reverse().join(" L ")} L ${xE-y},${j-Q} Z`)}const k=Object.assign(Object.assign({},kat),E);try{const z=new Kf({style:Object.assign(Object.assign({},k),{d:N})}),j=new Kf({style:Object.assign(Object.assign({},k),{d:M,lineWidth:0,cursor:"pointer"})});j.addEventListener("click",V=>PI(void 0,void 0,void 0,function*(){V.stopPropagation(),V.detail===2&&(yield c(h,d,p))})),x.appendChild(z),x.appendChild(j),a.addEventListener("click",V=>PI(void 0,void 0,void 0,function*(){V.detail===2&&(yield u())})),a.appendChild(x)}catch(z){console.error("Failed to create break path:",z)}return x}};RMe.props={};function $se(t,e){return t.getBandWidth(t.invert(e))}const Hse={rect:Yx,hollow:m4,funnel:rJ,pyramid:U2e},MMe=()=>(t,e,n,r)=>{const{x:i,y1:a,series:o,size:s}=n;let{y:l}=n;l=l.map(g=>g!==void 0?g:1);const c=e.x,u=e.series,[f]=r.getSize(),h=s?s.map(g=>+g/f):null,d=s?(g,v,y)=>{const _=g+v/2,E=h[y];return[_-E/2,_+E/2]}:(g,v,y)=>[g,g+v],p=Array.from(t,g=>{const v=$se(c,i[g]),y=u?$se(u,o?.[g]):1,_=v*y,E=(+o?.[g]||0)*v,x=+i[g]+E,[T,S]=d(x,_,g),w=+l[g],C=+a[g];return[[T,w],[S,w],[S,C],[T,C]].map(U=>r.map(U))});return[t,p]};MMe.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:Hse,channels:[...hf({shapes:Object.keys(Hse)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...vl(),{type:wP},{type:nb}],postInference:[...Ll(),...Lw()],interaction:{shareTooltip:!0}};const Gse={rect:Yx,hollow:m4},PMe=()=>(t,e,n,r)=>{const{x:i,x1:a,y:o,y1:s}=n,l=Array.from(t,c=>{const u=[+i[c],+o[c]],f=[+a[c],+o[c]],h=[+a[c],+s[c]],d=[+i[c],+s[c]];return[u,f,h,d].map(p=>r.map(p))});return[t,l]};PMe.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:Gse,channels:[...hf({shapes:Object.keys(Gse)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vl(),{type:wP}],postInference:[...Ll(),...Lw()],interaction:{shareTooltip:!0}};const Wse={line:j2e,smooth:z2e,hv:$2e,vh:H2e,hvh:G2e,trail:W2e},Bat=(t,e,n,r)=>{var i,a;const{series:o,x:s,y:l}=n,{x:c,y:u}=e;if(s===void 0||l===void 0)throw new Error("Missing encode for x or y channel.");const f=o?Array.from(Go(t,v=>o[v]).values()):[t],h=f.map(v=>v[0]).filter(v=>v!==void 0),d=(((i=c?.getBandWidth)===null||i===void 0?void 0:i.call(c))||0)/2,p=(((a=u?.getBandWidth)===null||a===void 0?void 0:a.call(u))||0)/2,g=Array.from(f,v=>v.map(y=>r.map([+s[y]+d,+l[y]+p])));return[h,g,f]},Fat=(t,e,n,r)=>{const i=Object.entries(n).filter(([o])=>o.startsWith("position")).map(([,o])=>o);if(i.length===0)throw new Error("Missing encode for position channel.");Mo(r)&&i.push(i[0]);const a=Array.from(t,o=>{const s=i.map(u=>+u[o]),l=r.map(s),c=[];for(let u=0;u<l.length;u+=2)c.push([l[u],l[u+1]]);return c});return[t,a]},NMe=()=>(t,e,n,r)=>(o4(r)?Fat:Bat)(t,e,n,r);NMe.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Wse,channels:[...hf({shapes:Object.keys(Wse)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...vl(),{type:hOe},{type:kQ}],postInference:[...Ll(),...Lw(),...Fit()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const Vse={hollow:gJ,hollowDiamond:dJ,hollowHexagon:pJ,hollowSquare:vJ,hollowTriangleDown:yJ,hollowTriangle:mJ,hollowBowtie:hJ,hollowCircle:_J,point:OJ,plus:wJ,diamond:xJ,square:CJ,triangle:MJ,hexagon:SJ,cross:EJ,bowtie:bJ,hyphen:TJ,line:AJ,tick:RJ,triangleDown:PJ,circle:_4},IMe=t=>(e,n,r,i)=>{const{x:a,y:o,x1:s,y1:l,size:c,dx:u,dy:f}=r,[h,d]=i.getSize(),p=ab(n,r,t),g=y=>{const _=+(u?.[y]||0),E=+(f?.[y]||0),x=s?(+a[y]+ +s[y])/2:+a[y],T=l?(+o[y]+ +l[y])/2:+o[y],S=x+_,w=T+E;return[S,w]},v=c?Array.from(e,y=>{const[_,E]=g(y),x=+c[y],T=x/h,S=x/d,w=[_-T,E-S],C=[_+T,E+S];return[i.map(p(w,y)),i.map(p(C,y))]}):Array.from(e,y=>[i.map(p(g(y),y))]);return[e,v]};IMe.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:Vse,channels:[...hf({shapes:Object.keys(Vse)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...vl(),{type:nb},{type:MP}],postInference:[...Ll(),{type:LQ},...By()]};const Yse={text:qRe,badge:ZRe,tag:KRe},LMe=t=>{const{cartesian:e=!1}=t;return e?nee:((n,r,i,a)=>{const{x:o,y:s}=i,l=ab(r,i,t),c=Array.from(n,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[n,c]})};LMe.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:Yse,channels:[...hf({shapes:Object.keys(Yse)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...vl(),{type:n4},{type:t4}],postInference:[...Ll(),...By()]};const Xse={cell:Yx,hollow:m4},kMe=()=>(t,e,n,r)=>{const{x:i,y:a}=n,o=e.x,s=e.y,l=Array.from(t,c=>{const u=o.getBandWidth(o.invert(+i[c])),f=s.getBandWidth(s.invert(+a[c])),h=+i[c],d=+a[c],p=[h,d],g=[h+u,d],v=[h+u,d+f],y=[h,d+f];return[p,g,v,y].map(_=>r.map(_))});return[t,l]};kMe.props={defaultShape:"cell",defaultLabelShape:"label",shape:Xse,composite:!1,channels:[...hf({shapes:Object.keys(Xse)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...vl(),{type:nb},{type:MP},{type:DQ}],postInference:[...Ll(),...By()]};const qse={area:QRe,smooth:JRe,hvh:eMe,vh:tMe,hv:nMe},DMe=()=>(t,e,n,r)=>{var i,a;const{x:o,y:s,y1:l,series:c}=n,{x:u,y:f}=e,h=c?Array.from(Go(t,y=>c[y]).values()):[t],d=h.map(y=>y[0]).filter(y=>y!==void 0),p=(((i=u?.getBandWidth)===null||i===void 0?void 0:i.call(u))||0)/2,g=(((a=f?.getBandWidth)===null||a===void 0?void 0:a.call(f))||0)/2,v=Array.from(h,y=>{const _=y.length,E=new Array(_*2);for(let x=0;x<y.length;x++){const T=y[x];E[x]=r.map([+o[T]+p,+s[T]+g]),E[_+x]=r.map([+o[T]+p,+l[T]+g])}return E});return[d,v,h]};DMe.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:qse,channels:[...hf({shapes:Object.keys(qse)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...vl(),{type:kQ},{type:wP},{type:DQ}],postInference:[...Ll(),...Lw()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const Zse={link:rMe,arc:oMe,smooth:iMe,vhv:aMe},lee=t=>(e,n,r,i)=>{const{x:a,y:o,x1:s=a,y1:l=o}=r,c=ab(n,r,t),u=e.map(f=>[i.map(c([+a[f],+o[f]],f)),i.map(c([+s[f],+l[f]],f))]);return[e,u]};lee.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:Zse,channels:[...hf({shapes:Object.keys(Zse)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vl(),{type:sOe},{type:lOe}],postInference:[...Ll(),...By()]};const Kse={image:lMe},BMe=t=>{const{cartesian:e}=t;return e?nee:(n,r,i,a)=>{const{x:o,y:s}=i,l=ab(r,i,t),c=Array.from(n,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[n,c]}};BMe.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:Kse,channels:[...hf({shapes:Object.keys(Kse)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...vl(),{type:n4},{type:t4}],postInference:[...Ll(),...By()]};const Qse={polygon:cMe,ribbon:uMe},FMe=()=>(t,e,n,r)=>{const i=Object.entries(n).filter(([s])=>s.startsWith("x")).map(([,s])=>s),a=Object.entries(n).filter(([s])=>s.startsWith("y")).map(([,s])=>s),o=t.map(s=>{const l=[];for(let c=0;c<i.length;c++){const u=i[c][s];if(u===void 0)break;const f=a[c][s];l.push(r.map([+u,+f]))}return l});return[t,o]};FMe.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:Qse,channels:[...hf({shapes:Object.keys(Qse)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vl()],postInference:[...Ll(),...By()]};const Jse={box:fMe,violin:hMe},UMe=()=>(t,e,n,r)=>{const{x:i,y:a,y1:o,y2:s,y3:l,y4:c,series:u}=n,f=e.x,h=e.series,d=Array.from(t,p=>{const g=f.getBandWidth(f.invert(+i[p])),v=h?h.getBandWidth(h.invert(+u?.[p])):1,y=g*v,_=(+u?.[p]||0)*g,E=+i[p]+_+y/2,[x,T,S,w,C]=[+a[p],+o[p],+s[p],+l[p],+c[p]];return[[E-y/2,C],[E+y/2,C],[E,C],[E,w],[E-y/2,w],[E+y/2,w],[E+y/2,T],[E-y/2,T],[E-y/2,S],[E+y/2,S],[E,T],[E,x],[E-y/2,x],[E+y/2,x]].map(L=>r.map(L))});return[t,d]};UMe.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:Jse,channels:[...hf({shapes:Object.keys(Jse)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...vl(),{type:nb}],postInference:[...Ll(),...Lw()],interaction:{shareTooltip:!0}};const ele={vector:NJ},jMe=()=>(t,e,n,r)=>{const{x:i,y:a,size:o,rotate:s}=n,[l,c]=r.getSize(),u=t.map(f=>{const h=+s[f]/180*Math.PI,d=+o[f],p=d/l,g=d/c,v=p*Math.cos(h),y=-g*Math.sin(h);return[r.map([+i[f]-v/2,+a[f]-y/2]),r.map([+i[f]+v/2,+a[f]+y/2])]});return[t,u]};jMe.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:ele,channels:[...hf({shapes:Object.keys(ele)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...vl()],postInference:[...Ll(),...By()]};const tle={line:iee},zMe=t=>(e,n,r,i)=>{const{y:a}=r,o=ab(n,r,Nt({style:{bandOffset:0}},t)),s=Array.from(e,l=>{const c=[0,a[l]],u=[1,a[l]];return[c,u].map(f=>i.map(o(f,l)))});return[e,s]};zMe.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:tle,channels:[...kw({shapes:Object.keys(tle)}),{name:"y",required:!0}],preInference:[...vl(),{type:aOe}],postInference:[...Ll()]};const nle={line:iee},$Me=t=>(e,n,r,i)=>{const{x:a}=r,o=ab(n,r,Nt({style:{bandOffset:0}},t)),s=Array.from(e,l=>{const c=[a[l],1],u=[a[l],0];return[c,u].map(f=>i.map(o(f,l)))});return[e,s]};$Me.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:nle,channels:[...kw({shapes:Object.keys(nle)}),{name:"x",required:!0}],preInference:[...vl(),{type:oOe}],postInference:[...Ll()]};const rle={connector:dMe},HMe=(...t)=>lee(...t);HMe.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:rle,channels:[...kw({shapes:Object.keys(rle)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vl()],postInference:[...Ll()]};function ile(t,e,n,r){if(e)return()=>[0,1];const{[t]:i,[`${t}1`]:a}=n;return o=>{var s;const l=((s=r.getBandWidth)===null||s===void 0?void 0:s.call(r,r.invert(+a[o])))||0;return[i[o],a[o]+l]}}function cee(t={}){const{extendX:e=!1,extendY:n=!1}=t;return(r,i,a,o)=>{const s=ile("x",e,a,i.x),l=ile("y",n,a,i.y),c=Array.from(r,u=>{const[f,h]=s(u),[d,p]=l(u);return[[f,d],[h,d],[h,p],[f,p]].map(E=>o.map(E))});return[r,c]}}const ale={range:Yx},GMe=()=>cee();GMe.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:ale,channels:[...kw({shapes:Object.keys(ale)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vl()],postInference:[...Ll()]};const ole={range:Yx},WMe=()=>cee({extendY:!0});WMe.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:ole,channels:[...kw({shapes:Object.keys(ole)}),{name:"x",required:!0}],preInference:[...vl(),{type:cOe}],postInference:[...Ll()]};const sle={range:Yx},VMe=()=>cee({extendX:!0});VMe.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:sle,channels:[...kw({shapes:Object.keys(sle)}),{name:"y",required:!0}],preInference:[...vl(),{type:uOe}],postInference:[...Ll()]};function Uat(t){return t.target.depth}function jat(t){return t.depth}function zat(t,e){return e-1-t.height}function WD(t,e){return t.sourceLinks.length?t.depth:e-1}function $at(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Nd(t.sourceLinks,Uat)-1:0}function NI(t){return function(){return t}}function lle(t,e){return VD(t.source,e.source)||t.index-e.index}function cle(t,e){return VD(t.target,e.target)||t.index-e.index}function VD(t,e){return t.y0-e.y0}function $7(t){return t.value}function Hat(t){return t.index}function Gat(t){return t.nodes}function Wat(t){return t.links}function ule(t,e){const n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function fle({nodes:t}){for(const e of t){let n=e.y0,r=n;for(const i of e.sourceLinks)i.y0=n+i.width/2,n+=i.width;for(const i of e.targetLinks)i.y1=r+i.width/2,r+=i.width}}function Vat(){let t=0,e=0,n=1,r=1,i=24,a=8,o,s=Hat,l=WD,c,u,f,h=Gat,d=Wat,p=6;function g(N){const M={nodes:h(N),links:d(N)};return v(M),y(M),_(M),E(M),S(M),fle(M),M}g.update=function(N){return fle(N),N},g.nodeId=function(N){return arguments.length?(s=typeof N=="function"?N:NI(N),g):s},g.nodeAlign=function(N){return arguments.length?(l=typeof N=="function"?N:NI(N),g):l},g.nodeDepth=function(N){return arguments.length?(c=N,g):c},g.nodeSort=function(N){return arguments.length?(u=N,g):u},g.nodeWidth=function(N){return arguments.length?(i=+N,g):i},g.nodePadding=function(N){return arguments.length?(a=o=+N,g):a},g.nodes=function(N){return arguments.length?(h=typeof N=="function"?N:NI(N),g):h},g.links=function(N){return arguments.length?(d=typeof N=="function"?N:NI(N),g):d},g.linkSort=function(N){return arguments.length?(f=N,g):f},g.size=function(N){return arguments.length?(t=e=0,n=+N[0],r=+N[1],g):[n-t,r-e]},g.extent=function(N){return arguments.length?(t=+N[0][0],n=+N[1][0],e=+N[0][1],r=+N[1][1],g):[[t,e],[n,r]]},g.iterations=function(N){return arguments.length?(p=+N,g):p};function v({nodes:N,links:M}){N.forEach((z,j)=>{z.index=j,z.sourceLinks=[],z.targetLinks=[]});const k=new Map(N.map(z=>[s(z),z]));if(M.forEach((z,j)=>{z.index=j;let{source:V,target:Q}=z;typeof V!="object"&&(V=z.source=ule(k,V)),typeof Q!="object"&&(Q=z.target=ule(k,Q)),V.sourceLinks.push(z),Q.targetLinks.push(z)}),f!=null)for(const{sourceLinks:z,targetLinks:j}of N)z.sort(f),j.sort(f)}function y({nodes:N}){for(const M of N)M.value=M.fixedValue===void 0?Math.max(jp(M.sourceLinks,$7),jp(M.targetLinks,$7)):M.fixedValue}function _({nodes:N}){const M=N.length;let k=new Set(N),z=new Set,j=0;for(;k.size;){if(k.forEach(V=>{V.depth=j;for(const{target:Q}of V.sourceLinks)z.add(Q)}),++j>M)throw new Error("circular link");k=z,z=new Set}if(c){const V=Math.max(_o(N,ee=>ee.depth)+1,0);let Q;for(let ee=0;ee<N.length;ee++)Q=N[ee],Q.depth=c.call(null,Q,V)}}function E({nodes:N}){const M=N.length;let k=new Set(N),z=new Set,j=0;for(;k.size;){if(k.forEach(V=>{V.height=j;for(const{source:Q}of V.targetLinks)z.add(Q)}),++j>M)throw new Error("circular link");k=z,z=new Set}}function x({nodes:N}){const M=Math.max(_o(N,j=>j.depth)+1,0),k=(n-t-i)/(M-1),z=new Array(M).fill(0).map(()=>[]);for(const j of N){const V=Math.max(0,Math.min(M-1,Math.floor(l.call(null,j,M))));j.layer=V,j.x0=t+V*k,j.x1=j.x0+i,z[V]?z[V].push(j):z[V]=[j]}if(u)for(const j of z)j.sort(u);return z}function T(N){const M=Nd(N,k=>(r-e-(k.length-1)*o)/jp(k,$7));for(const k of N){let z=e;for(const j of k){j.y0=z,j.y1=z+j.value*M,z=j.y1+o;for(const V of j.sourceLinks)V.width=V.value*M}z=(r-z+o)/(k.length+1);for(let j=0;j<k.length;++j){const V=k[j];V.y0+=z*(j+1),V.y1+=z*(j+1)}U(k)}}function S(N){const M=x(N);o=Math.min(a,(r-e)/(_o(M,k=>k.length)-1)),T(M);for(let k=0;k<p;++k){const z=Math.pow(.99,k),j=Math.max(1-z,(k+1)/p);C(M,z,j),w(M,z,j)}}function w(N,M,k){for(let z=1,j=N.length;z<j;++z){const V=N[z];for(const Q of V){let ee=0,re=0;for(const{source:le,value:ue}of Q.targetLinks){const ve=ue*(Q.layer-le.layer);ee+=$(le,Q)*ve,re+=ve}if(!(re>0))continue;const ne=(ee/re-Q.y0)*M;Q.y0+=ne,Q.y1+=ne,I(Q)}u===void 0&&V.sort(VD),V.length&&D(V,k)}}function C(N,M,k){for(let z=N.length,j=z-2;j>=0;--j){const V=N[j];for(const Q of V){let ee=0,re=0;for(const{target:le,value:ue}of Q.sourceLinks){const ve=ue*(le.layer-Q.layer);ee+=X(Q,le)*ve,re+=ve}if(!(re>0))continue;const ne=(ee/re-Q.y0)*M;Q.y0+=ne,Q.y1+=ne,I(Q)}u===void 0&&V.sort(VD),V.length&&D(V,k)}}function D(N,M){const k=N.length>>1,z=N[k];B(N,z.y0-o,k-1,M),L(N,z.y1+o,k+1,M),B(N,r,N.length-1,M),L(N,e,0,M)}function L(N,M,k,z){for(;k<N.length;++k){const j=N[k],V=(M-j.y0)*z;V>1e-6&&(j.y0+=V,j.y1+=V),M=j.y1+o}}function B(N,M,k,z){for(;k>=0;--k){const j=N[k],V=(j.y1-M)*z;V>1e-6&&(j.y0-=V,j.y1-=V),M=j.y0-o}}function I({sourceLinks:N,targetLinks:M}){if(f===void 0){for(const{source:{sourceLinks:k}}of M)k.sort(cle);for(const{target:{targetLinks:k}}of N)k.sort(lle)}}function U(N){if(f===void 0)for(const{sourceLinks:M,targetLinks:k}of N)M.sort(cle),k.sort(lle)}function $(N,M){let k=N.y0-(N.sourceLinks.length-1)*o/2;for(const{target:z,width:j}of N.sourceLinks){if(z===M)break;k+=j+o}for(const{source:z,width:j}of M.targetLinks){if(z===N)break;k-=j}return k}function X(N,M){let k=M.y0-(M.targetLinks.length-1)*o/2;for(const{source:z,width:j}of M.targetLinks){if(z===N)break;k+=j+o}for(const{target:z,width:j}of N.sourceLinks){if(z===M)break;k-=j}return k}return g}const Yat={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},Xat={left:jat,right:zat,center:$at,justify:WD};function qat(t){const e=typeof t;return e==="string"?Xat[t]||WD:e==="function"?t:WD}const YMe=t=>e=>{const{nodeId:n,nodeSort:r,nodeAlign:i,nodeWidth:a,nodePadding:o,nodeDepth:s,nodes:l,links:c,linkSort:u,iterations:f}=Object.assign({},Yat,t),h=Vat().nodeSort(r).linkSort(u).links(c).nodes(l).nodeWidth(a).nodePadding(o).nodeDepth(s).nodeAlign(qat(i)).iterations(f).extent([[0,0],[1,1]]);typeof n=="function"&&h.nodeId(n);const d=h(e),{nodes:p,links:g}=d,v=p.map(_=>{const{x0:E,x1:x,y0:T,y1:S}=_;return Object.assign(Object.assign({},_),{x:[E,x,x,E],y:[T,T,S,S]})}),y=g.map(_=>{const{source:E,target:x}=_,T=E.x1,S=x.x0,w=_.width/2;return Object.assign(Object.assign({},_),{x:[T,T,S,S],y:[_.y0+w,_.y0-w,_.y1+w,_.y1-w]})});return{nodes:v,links:y}};YMe.props={};function Vm(t,e,n={},r=!1){if(Oy(t)||Array.isArray(t)&&r)return t;const i=Vn(t,e);return Nt(n,i)}function YD(t,e={}){return Oy(t)||Array.isArray(t)||!XMe(t)?t:Nt(e,t)}function XMe(t){if(Object.keys(t).length===0)return!0;const{title:e,items:n}=t;return e!==void 0||n!==void 0}function Ym(t,e){return typeof t=="object"?Vn(t,e):t}var Zat=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Kat={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},hle={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},dle={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},Qat={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},qMe=t=>{const{data:e,encode:n={},scale:r,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={},interaction:u,state:f={},viewStyle:h={}}=t,{links:d,nodes:p}=ree(e,n);if(!d||d.length===0)return[Nt({},hle,{data:[],encode:{},scale:r,style:Vn(i,"node"),viewStyle:h,labels:[],tooltip:!1,animate:!1,axis:!1,interaction:u,state:{}}),Nt({},dle,{data:[],encode:{},labels:[],style:Vn(i,"link"),tooltip:!1,animate:!1,interaction:u,state:{}})];const g=Vn(n,"node"),v=Vn(n,"link"),{key:y=$=>$.key,color:_=y}=g,{links:E,nodes:x}=YMe(Object.assign(Object.assign(Object.assign({},Kat),{nodeId:Lm(y)}),a))({links:d,nodes:p}),T=Vn(i,"label"),{text:S=y,spacing:w=5}=T,C=Zat(T,["text","spacing"]),D=Lm(y),L=Vm(c,"node",{title:D,items:[{field:"value"}]},!0),B=Vm(c,"link",{title:"",items:[$=>({name:"source",value:D($.source)}),$=>({name:"target",value:D($.target)})]}),[I,U]=Object.entries(f).reduce(($,[X,N])=>{const M=nk(N,"node","link"),k=Vn(N,"node");$[0][X]=Object.assign(Object.assign({},M),k);const z=Vn(N,"link");return $[1][X]=Object.assign(Object.assign({},M),z),$},[{},{}]);return[Nt({},hle,{data:x,encode:Object.assign(Object.assign({},g),{color:_}),scale:r,style:Vn(i,"node"),viewStyle:h,labels:[Object.assign(Object.assign(Object.assign({},Qat),{text:S,dx:$=>$.x[0]<.5?w:-w}),C),...o],tooltip:L,animate:Ym(l,"node"),axis:!1,interaction:u,state:I}),Nt({},dle,{data:E,encode:v,labels:s,style:Object.assign({fill:v.color?void 0:"#aaa",lineWidth:0},Vn(i,"link")),tooltip:B,animate:Ym(l,"link"),interaction:u,state:U})]};qMe.props={};function Jat(t,e){return e.value-t.value}function eot(t,e){return e.frequency-t.frequency}function tot(t,e){return`${t.id}`.localeCompare(`${e.id}`)}function not(t,e){return`${t.name}`.localeCompare(`${e.name}`)}const rot=Object.freeze(Object.defineProperty({__proto__:null,frequency:eot,id:tot,name:not,weight:Jat},Symbol.toStringTag,{value:"Module"})),iot={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function aot(t){const{y:e,thickness:n,weight:r,marginRatio:i,id:a,source:o,target:s,sourceWeight:l,targetWeight:c,sortBy:u}=Object.assign(Object.assign({},iot),t);function f(v){const y=v.nodes.map(E=>Object.assign({},E)),_=v.edges.map(E=>Object.assign({},E));return h(y,_),d(y),p(y,_),g(y,_),{nodes:y,edges:_}}function h(v,y){y.forEach(x=>{x.source=o(x),x.target=s(x),x.sourceWeight=l(x),x.targetWeight=c(x)});const _=Go(y,x=>x.source),E=Go(y,x=>x.target);return v.forEach(x=>{x.id=a(x);const T=_.has(x.id)?_.get(x.id):[],S=E.has(x.id)?E.get(x.id):[];x.frequency=T.length+S.length,x.value=jp(T,w=>w.sourceWeight)+jp(S,w=>w.targetWeight)}),{nodes:v,edges:y}}function d(v,y){const _=typeof u=="function"?u:rot[u];_&&v.sort(_)}function p(v,y){const _=v.length;if(!_)throw zA("Invalid nodes: it's empty!");if(!r){const T=1/_;return v.forEach((S,w)=>{S.x=(w+.5)*T,S.y=e}),{nodes:v,edges:y}}const E=i/(2*_),x=v.reduce((T,S)=>T+=S.value,0);return v.reduce((T,S)=>{S.weight=S.value/x,S.width=S.weight*(1-i),S.height=n;const w=E+T,C=w+S.width,D=e-n/2,L=D+n;return S.x=[w,C,C,w],S.y=[D,D,L,L],T+S.width+2*E},0),{nodes:v,edges:y}}function g(v,y){const _=new Map(v.map(T=>[T.id,T]));if(!r)return y.forEach(T=>{const S=o(T),w=s(T),C=_.get(S),D=_.get(w);C&&D&&(T.x=[C.x,D.x],T.y=[C.y,D.y])}),{nodes:v,edges:y};y.forEach(T=>{T.x=[0,0,0,0],T.y=[e,e,e,e]});const E=Go(y,T=>T.source),x=Go(y,T=>T.target);v.forEach(T=>{const{edges:S,width:w,x:C,y:D,value:L,id:B}=T,I=E.get(B)||[],U=x.get(B)||[];let $=0;I.map(X=>{const N=X.sourceWeight/L*w;X.x[0]=C[0]+$,X.x[1]=C[0]+$+N,$+=N}),U.forEach(X=>{const N=X.targetWeight/L*w;X.x[3]=C[0]+$,X.x[2]=C[0]+$+N,$+=N})})}return f}const uee=t=>e=>aot(t)(e);uee.props={};var ple=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const H7={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},oot={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},sot={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},lot={position:"outside",fontSize:10},ZMe=(t,e)=>{const{data:n,encode:r={},scale:i,style:a={},layout:o={},nodeLabels:s=[],linkLabels:l=[],animate:c={},tooltip:u={}}=t,{nodes:f,links:h}=ree(n,r),d=Vn(r,"node"),p=Vn(r,"link"),{key:g=X=>X.key,color:v=g}=d,{linkEncodeColor:y=X=>X.source}=p,{nodeWidthRatio:_=H7.thickness,nodePaddingRatio:E=H7.marginRatio}=o,x=ple(o,["nodeWidthRatio","nodePaddingRatio"]),{nodes:T,edges:S}=uee(Object.assign(Object.assign(Object.assign(Object.assign({},H7),{id:Lm(g),thickness:_,marginRatio:E}),x),{weight:!0}))({nodes:f,edges:h}),w=Vn(a,"label"),{text:C=g}=w,D=ple(w,["text"]),L=Vm(u,"node",{title:"",items:[X=>({name:X.key,value:X.value})]},!0),B=Vm(u,"link",{title:"",items:[X=>({name:`${X.source} -> ${X.target}`,value:X.value})]}),{height:I,width:U}=e,$=Math.min(I,U);return[Nt({},sot,{data:S,encode:Object.assign(Object.assign({},p),{color:y}),labels:l,style:Object.assign({fill:y?void 0:"#aaa"},Vn(a,"link")),tooltip:B,animate:Ym(c,"link")}),Nt({},oot,{data:T,encode:Object.assign(Object.assign({},d),{color:v}),scale:i,style:Vn(a,"node"),coordinate:{type:"polar",outerRadius:($-20)/$,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},lot),{text:C}),D),...s],tooltip:L,animate:Ym(c,"node"),axis:!1})]};ZMe.props={};const gle={path:bMe,hollow:EMe},KMe=t=>(e,n,r,i)=>[e,e.map(()=>[[0,0]])];KMe.props={defaultShape:"path",defaultLabelShape:"label",shape:gle,composite:!1,channels:[...hf({shapes:Object.keys(gle)}),{name:"d",scale:"identity"}],preInference:[...vl()],postInference:[...Ll()]};function cot(t,e){return Array.isArray(t)?typeof e=="function"?pY().path(e)(t):pY()(t):LF(t)}function QMe(t,e=[t.data.name]){t.id=t.id||t.data.name,t.path=e,t.children&&t.children.forEach(n=>{n.id=`${t.id}/${n.data.name}`,n.path=[...e,n.data.name],QMe(n,n.path)})}function JMe(t){const e=Wr(t,["data","name"]);e.replaceAll&&(t.path=e.replaceAll(".","/").split("/")),t.children&&t.children.forEach(n=>{JMe(n)})}function uot(t,e){const n={treemapBinary:fze,treemapDice:IF,treemapSlice:AK,treemapSliceDice:hze,treemapSquarify:m7e,treemapResquarify:dze},r=t==="treemapSquarify"?n[t].ratio(e):n[t];if(!r)throw new TypeError("Invalid tile method!");return r}function ePe(t,e,n){const{value:r}=n,i=uot(e.tile,e.ratio),a=cot(t,e.path);Us(t)?JMe(a):QMe(a),r?a.sum(l=>e.ignoreParentValue&&l.children?0:Lm(r)(l)).sort(e.sort):a.count(),v7e().tile(i).size(e.size).round(e.round).paddingInner(e.paddingInner).paddingOuter(e.paddingOuter).paddingTop(e.paddingTop).paddingRight(e.paddingRight).paddingBottom(e.paddingBottom).paddingLeft(e.paddingLeft)(a);const o=a.descendants().map(l=>Object.assign(l,{id:l.id.replace(/^\//,""),x:[l.x0,l.x1],y:[l.y0,l.y1]}));return[o.filter(typeof e.layer=="function"?e.layer:l=>l.height===e.layer),o]}var fot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const hot=(t,e)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,e],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(n,r)=>r.value-n.value,layer:0}),dot=(t,e)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:n=>n.path[1]},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,e],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),pot={fontSize:10,text:t=>bd(t.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0,isTreemapLabel:!0},got={title:t=>{var e,n;return(n=(e=t.path)===null||e===void 0?void 0:e.join)===null||n===void 0?void 0:n.call(e,".")},items:[{field:"value"}]},vot={title:t=>bd(t.path),items:[{field:"value"}]},tPe=(t,e)=>{const{width:n,height:r,options:i}=e,{data:a,encode:o={},scale:s,style:l={},layout:c={},labels:u=[],tooltip:f={}}=t,h=fot(t,["data","encode","scale","style","layout","labels","tooltip"]),d=Wr(i,["interaction","treemapDrillDown"])||Wr(i,["marks",0,"interaction","treemapDrillDown"]),p=Nt({},hot(n,r),c,{layer:d?_=>_.depth===1:c.layer}),[g,v]=ePe(a,p,o),y=Vn(l,"label");return Nt({},dot(n,r),Object.assign(Object.assign({data:g,scale:s,style:l,labels:[Object.assign(Object.assign(Object.assign({},pot),y),d&&{cursor:"pointer"}),...u]},h),{encode:o,tooltip:YD(f,got),axis:!1}),d?{interaction:Object.assign(Object.assign({},h.interaction),{treemapDrillDown:d?Object.assign(Object.assign({},d),{originData:v,layout:p}):void 0}),encode:Object.assign({color:_=>bd(_.path)},o),tooltip:YD(f,vot)}:{})};tPe.props={};var mot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const yot=(t,e)=>({size:[t,e],padding:0,sort:(n,r)=>r.value-n.value}),_ot=(t,e,n)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,e]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:n.color?void 0:r=>r.height===0?"#ddd":"#fff",stroke:n.color?void 0:r=>r.height===0?"":"#000"}}),bot={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},Eot={title:t=>t.data.name,items:[{field:"value"}]},xot=(t,e,n)=>{const{value:r}=n,i=Us(t)?pY().path(e.path)(t):LF(t);return r?i.sum(a=>Lm(r)(a)).sort(e.sort):i.count(),Jje().size(e.size).padding(e.padding)(i),i.descendants()},nPe=(t,e)=>{const{width:n,height:r}=e,{data:i,encode:a={},scale:o={},style:s={},layout:l={},labels:c=[],tooltip:u={}}=t,f=mot(t,["data","encode","scale","style","layout","labels","tooltip"]),h=_ot(n,r,a),d=xot(i,Nt({},yot(n,r),l),Nt({},h.encode,a)),p=Vn(s,"label");return Nt({},h,Object.assign(Object.assign({data:d,encode:a,scale:o,style:s,labels:[Object.assign(Object.assign({},bot),p),...c]},f),{tooltip:YD(u,Eot),axis:!1}))};nPe.props={};var vle=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Sot(t,e){return Nd(t,n=>e[n])}function Tot(t,e){return _o(t,n=>e[n])}function rPe(t,e){const n=fee(t,e)*2.5-hee(t,e)*1.5;return Nd(t,r=>e[r]>=n?e[r]:NaN)}function fee(t,e){return BF(t,.25,n=>e[n])}function Aot(t,e){return BF(t,.5,n=>e[n])}function hee(t,e){return BF(t,.75,n=>e[n])}function iPe(t,e){const n=hee(t,e)*2.5-fee(t,e)*1.5;return _o(t,r=>e[r]<=n?e[r]:NaN)}function wot(){return(t,e)=>{const{encode:n}=e,{y:r,x:i}=n,{value:a}=r,{value:o}=i;return[Array.from(Go(t,c=>o[+c]).values()).flatMap(c=>{const u=rPe(c,a),f=iPe(c,a);return c.filter(h=>a[h]<u||a[h]>f)}),e]}}const aPe=t=>{const{data:e,encode:n,style:r={},tooltip:i={},transform:a,animate:o}=t,s=vle(t,["data","encode","style","tooltip","transform","animate"]),{point:l=!0}=r,c=vle(r,["point"]),{y:u}=n,f={y:u,y1:u,y2:u,y3:u,y4:u},h={y1:fee,y2:Aot,y3:hee},d=Vm(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),p=Vm(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:Sot},h),{y4:Tot})],encode:Object.assign(Object.assign({},n),f),style:c,tooltip:d},s);const g=Vn(c,"box"),v=Vn(c,"point");return[Object.assign({type:"box",data:e,transform:[Object.assign(Object.assign({type:"groupX",y:rPe},h),{y4:iPe})],encode:Object.assign(Object.assign({},n),f),style:g,tooltip:d,animate:Ym(o,"box")},s),{type:"point",data:e,transform:[{type:wot}],encode:n,style:Object.assign({},v),tooltip:p,animate:Ym(o,"point")}]};aPe.props={};const Oot={shape:wMe},oPe=t=>{const{cartesian:e}=t;return e?nee:(n,r,i,a)=>{const{x:o,y:s}=i,l=ab(r,i,t),c=Array.from(n,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[n,c]}};oPe.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:Oot,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...vl(),{type:n4},{type:t4},{type:fOe}]};var Cot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Rot={joint:!0},Mot={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},Pot={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},Not={text:""};function Iot(t,e,n){const{nodes:r,links:i}=t,{joint:a,nodeStrength:o,linkStrength:s}=e,{nodeKey:l=p=>p.id,linkKey:c=p=>p.id}=n,u=OTe(),f=wTe(i).id(Lm(c));typeof o=="function"&&u.strength(o),typeof s=="function"&&f.strength(s);const h=UK(r).force("link",f).force("charge",u);a?h.force("center",STe()):h.force("x",jK()).force("y",zK()),h.stop();const d=Math.ceil(Math.log(h.alphaMin())/Math.log(1-h.alphaDecay()));for(let p=0;p<d;p++)h.tick();return{nodesData:r,linksData:i}}const sPe=t=>{const{data:e,encode:n={},scale:r,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,{nodeKey:u=S=>S.id,linkKey:f=S=>S.id}=n,h=Cot(n,["nodeKey","linkKey"]),d=Object.assign({nodeKey:u,linkKey:f},h),p=Vn(d,"node"),g=Vn(d,"link"),{links:v,nodes:y}=ree(e,d),{nodesData:_,linksData:E}=Iot({links:v,nodes:y},Nt({},Rot,a),d),x=Vm(c,"link",{items:[S=>({name:"source",value:Lm(f)(S.source)}),S=>({name:"target",value:Lm(f)(S.target)})]}),T=Vm(c,"node",{items:[S=>({name:"key",value:Lm(u)(S)})]},!0);return[Nt({},Mot,{data:E,encode:g,labels:s,style:Vn(i,"link"),tooltip:x,animate:Ym(l,"link")}),Nt({},Pot,{data:_,encode:Object.assign({},p),scale:r,style:Vn(i,"node"),tooltip:T,labels:[Object.assign(Object.assign({},Not),Vn(i,"label")),...o],animate:Ym(l,"link")})]};sPe.props={};const lPe=t=>e=>n=>{const{field:r="value",nodeSize:i,separation:a,sortBy:o,as:s=["x","y"]}=e,[l,c]=s,u=LF(n,p=>p.children).sum(p=>p[r]).sort(o),f=t();f.size([1,1]),i&&f.nodeSize(i),a&&f.separation(a),f(u);const h=[];u.each(p=>{p[l]=p.x,p[c]=p.y,p.name=p.data.name,h.push(p)});const d=u.links();return d.forEach(p=>{p[l]=[p.source[l],p.target[l]],p[c]=[p.source[c],p.target[c]]}),{nodes:h,edges:d}},cPe=t=>lPe(zje)(t);cPe.props={};const uPe=t=>lPe(uze)(t);uPe.props={};const Lot={sortBy:(t,e)=>e.value-t.value},kot={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},Dot={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},Bot={text:"",fontSize:10},fPe=t=>{const{data:e,encode:n={},scale:r={},style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,u=n?.value,{nodes:f,edges:h}=uPe(Object.assign(Object.assign(Object.assign({},Lot),a),{field:u}))(e),d=Vm(c,"node",{title:"name",items:["value"]},!0),p=Vm(c,"link",{title:"",items:[g=>({name:"source",value:g.source.name}),g=>({name:"target",value:g.target.name})]});return[Nt({},Dot,{data:h,encode:Vn(n,"link"),scale:Vn(r,"link"),labels:s,style:Object.assign({stroke:"#999"},Vn(i,"link")),tooltip:p,animate:Ym(l,"link")}),Nt({},kot,{data:f,scale:Vn(r,"node"),encode:Vn(n,"node"),labels:[Object.assign(Object.assign({},Bot),Vn(i,"label")),...o],style:Object.assign({},Vn(i,"node")),tooltip:d,animate:Ym(l,"node")})]};fPe.props={};var Fot=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},Uot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function jot(t,e){const{text:n="text",value:r="value"}=e;return t.map(i=>Object.assign(Object.assign({},i),{text:i[n],value:i[r]}))}const zot=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:t=>t.fontFamily},tooltip:{items:[t=>({name:t.text,value:t.value})]}}),dee=(t,e)=>Fot(void 0,void 0,void 0,function*(){const{width:n,height:r}=e,{data:i,encode:a={},scale:o,style:s={},layout:l={}}=t,c=Uot(t,["data","encode","scale","style","layout"]),u=jot(i,a);return Nt({},zot(),Object.assign(Object.assign({data:{value:u,transform:[Object.assign({type:"wordCloud",size:[n,r]},l)]},encode:a,scale:o,style:s},c),{axis:!1}))});dee.props={};var jC=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const $ot=(t,e)=>{const{shape:n,radius:r}=t,i=jC(t,["shape","radius"]),a=Vn(i,"pointer"),o=Vn(i,"pin"),{shape:s}=a,l=jC(a,["shape"]),{shape:c}=o,u=jC(o,["shape"]),{coordinate:f,theme:h}=e;return(d,p)=>{const g=d.map($=>f.invert($)),[v,y,_]=pWe(f,"polar"),E=f.clone(),{color:x}=p,T=aQ({startAngle:v,endAngle:y,innerRadius:_,outerRadius:r});T.push(["cartesian"]),E.update({transformations:T});const S=g.map($=>E.map($)),[w,C]=nJ(S),[D,L]=f.getCenter(),B=Object.assign(Object.assign({x1:w,y1:C,x2:D,y2:L,stroke:x},l),i),I=Object.assign(Object.assign({cx:D,cy:L,stroke:x},u),i),U=ai(new Cy);return Oy(s)||(typeof s=="function"?U.append(()=>s(S,p,E,h)):U.append("line").call(jr,B).node()),Oy(c)||(typeof c=="function"?U.append(()=>c(S,p,E,h)):U.append("circle").call(jr,I).node()),U.node()}},mle={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},Hot={style:{shape:$ot,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},Got={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function Wot(t){if(Ln(t)){const e=Math.max(0,Math.min(t,1));return{percent:e,target:e,total:1}}return t}function Vot(t,e){const{name:n="score",target:r,total:i,percent:a,thresholds:o=[]}=Wot(t),s=a||r,l=a?1:i,c=Object.assign({y:{domain:[0,l]}},e);return o.length?{targetData:[{x:n,y:s,color:"target"}],totalData:o.map((u,f)=>({x:n,y:f>=1?u-o[f-1]:u,color:f})),target:s,total:l,scale:c}:{targetData:[{x:n,y:s,color:"target"}],totalData:[{x:n,y:s,color:"target"},{x:n,y:l-s,color:"total"}],target:s,total:l,scale:c}}function Yot(t,{target:e,total:n}){const{content:r}=t;return r?r(e,n):e.toString()}const hPe=t=>{const{data:e={},scale:n={},style:r={},animate:i={},transform:a=[]}=t,o=jC(t,["data","scale","style","animate","transform"]),{targetData:s,totalData:l,target:c,total:u,scale:f}=Vot(e,n),h=Vn(r,"text"),{tooltip:d}=h,p=jC(h,["tooltip"]),g=_Ge(r,["pointer","pin"]),v=Vn(r,"arc"),y=v.shape;return[Nt({},mle,Object.assign({type:"interval",transform:[{type:"stackY"}],data:l,scale:f,style:y==="round"?Object.assign(Object.assign({},v),{shape:Nat}):v,animate:typeof i=="object"?Vn(i,"arc"):i},o)),Nt({},mle,Hot,Object.assign({type:"point",data:s,scale:f,style:g,animate:typeof i=="object"?Vn(i,"indicator"):i},o)),Nt({},Got,{style:Object.assign({text:Yot(p,{target:c,total:u})},p),tooltip:d,animate:typeof i=="object"?Vn(i,"text"):i})]};hPe.props={};const yle={density:xMe},dPe=()=>(t,e,n,r)=>{const{x:i,series:a}=n,o=Object.entries(n).filter(([f])=>f.startsWith("y")).map(([,f])=>f),s=Object.entries(n).filter(([f])=>f.startsWith("size")).map(([,f])=>f);if(i===void 0||o===void 0||s===void 0)throw new Error("Missing encode for x or y or size channel.");const l=e.x,c=e.series,u=Array.from(t,f=>{const h=l.getBandWidth(l.invert(+i[f])),d=c?c.getBandWidth(c.invert(+a?.[f])):1,p=h*d,g=(+a?.[f]||0)*h,v=+i[f]+g+p/2;return[...o.map((_,E)=>[v+ +s[E][f]/t.length,+o[E][f]]),...o.map((_,E)=>[v-+s[E][f]/t.length,+o[E][f]]).reverse()].map(_=>r.map(_))});return[t,u]};dPe.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:yle,channels:[...hf({shapes:Object.keys(yle)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...vl(),{type:wP},{type:nb}],postInference:[...Ll(),...Lw()],interaction:{shareTooltip:!0}};const _le={heatmap:AMe},pPe=t=>(e,n,r,i)=>{const{x:a,y:o,size:s,color:l}=r,c=Array.from(e,u=>{const f=s?+s[u]:40;return[...i.map([+a[u],+o[u]]),l[u],f]});return[[0],[c]]};pPe.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:_le,channels:[...hf({shapes:Object.keys(_le)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...vl(),{type:nb},{type:MP}],postInference:[...Ll(),...By()]};var Xot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const qot={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:OMe},animate:{enter:{type:"fadeIn"}}},Zot={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},gPe=t=>{const{data:e={},style:n={},animate:r}=t,i=Xot(t,["data","style","animate"]),a=Math.max(0,Ln(e)?e:e?.percent),o=[{percent:a,type:"liquid"}],s=Object.assign(Object.assign({},Vn(n,"text")),Vn(n,"content")),l=Vn(n,"outline"),c=Vn(n,"wave"),u=Vn(n,"background");return[Nt({},qot,Object.assign({type:"interval",data:o,style:{liquidOptions:{percent:a,liquidShape:n?.shape},styleOptions:Object.assign(Object.assign({},n),{outline:l,wave:c,background:u})},animate:r},i)),Nt({},Zot,{style:Object.assign({text:`${RD(a*100)} %`},s),animate:r})]};gPe.props={};const ble={hollow:gJ,hollowDiamond:dJ,hollowHexagon:pJ,hollowSquare:vJ,hollowTriangleDown:yJ,hollowTriangle:mJ,hollowBowtie:hJ,hollowCircle:_J,point:OJ,plus:wJ,diamond:xJ,square:CJ,triangle:MJ,hexagon:SJ,cross:EJ,bowtie:bJ,hyphen:TJ,line:AJ,tick:RJ,triangleDown:PJ,circle:_4},Kot=4,Qot=200,vPe=t=>(e,n,r,i)=>{const{x:a,y:o,size:s}=r;if(!a.length||!o.length)return[e,o.map(()=>[[]])];const[l,c]=i.getSize(),u=ab(n,r,t),f=Array.from(e,g=>{const v=+a[g]*l,y=+o[g]*c,_=+s[g]||Kot;return{i:g,x:v,y,r:_}}),h=UK(f).stop().force("collide",ATe().radius(g=>g.r+1).strength(1));h.force("x",jK(g=>g.x).strength(.5)),h.force("y",zK(g=>g.y).strength(5));for(let g=0;g<Qot;g++)h.tick();h.stop();const d=g=>{const v=f.find(y=>y.i===g);return[v.x/l,v.y/c]},p=s?Array.from(e,g=>{const[v,y]=d(g),_=+s[g],E=_/l,x=_/c,T=[v-E,y-x],S=[v+E,y+x];return[i.map(u(T,g)),i.map(u(S,g))]}):Array.from(e,g=>[i.map(u(d(g),g))]);return[e,p]};vPe.props={defaultShape:"point",defaultLabelShape:"label",composite:!1,shape:ble,channels:[...hf({shapes:Object.keys(ble)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"}],preInference:[...vl(),{type:nb},{type:MP}],postInference:[...Ll(),{type:LQ},...By()]};var Jot=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function est(t,e={}){const{valueField:n="value",sort:r,fillParent:i=!0,nameField:a="name"}=e;if(!t||t.length===0)return[];const o=(c,u=null,f=0)=>{const h={data:c,depth:f,parent:u,children:[],x0:0,x1:0,value:c[n]||0};return c.children&&c.children.length>0&&(h.children=c.children.map(d=>o(d,h,f+1))),h},s=[];let l=0;return t.forEach(c=>{const u=o(c),f=(p,g=0,v=!1,y=0)=>{if(v||p.depth===0)p.x0=v?g:0,p.x1=p.x0+p.value;else if(p.x0=g,i&&y>0){const T=p.parent?p.parent.children.reduce((C,D)=>C+D.value,0):p.value,S=p.parent?p.parent.children.length:1,w=T>0?p.value/T:1/S;p.x1=g+y*w}else p.x1=g+p.value;let _=p.x0;const E=p.x1-p.x0,x=r?[...p.children].sort((T,S)=>r(T.data,S.data)):p.children;if(i&&x.length>0){const T=p.children.reduce((S,w)=>S+w.value,0);x.forEach(S=>{f(S,_,!1,E);const w=T>0?S.value/T:1/x.length;_+=E*w})}else x.forEach(T=>{f(T,_,!1,0),_+=T.x1-T.x0})};f(u,l,!0),l+=u.value;const h=p=>{var g,v,y;const _=T=>{var S;return(S=T[a])!==null&&S!==void 0?S:T.name},E=[_(p.data)];let x=p;for(;x.parent;)E.unshift(_(x.parent.data)),x=x.parent;return Object.assign(Object.assign({},Wp(p.data,[n])),{[mPe]:E,[gee]:(y=(v=(g=x.parent)===null||g===void 0?void 0:g.data)===null||v===void 0?void 0:v[a])!==null&&y!==void 0?y:p.data[a],name:p.data[a],depth:p.depth,value:p.value,x:[p.x0,p.x1],y:[p.depth,p.depth+1],[XD]:p.children.length})},d=p=>{s.push(h(p)),p.children.forEach(d)};d(u)}),s}const bA="partition",pee="markType",mPe="path",gee="ancestor-node",XD="childNodeCount";function tst(t){const{data:e,encode:n,fillParent:r,sort:i}=t,{color:a,value:o,name:s}=n;return est(e,{valueField:o,fillParent:r,nameField:s,sort:i}).map(c=>{const u=Object.assign({},c);return a&&a!==gee&&(u[a]=c[a]),u})}const Ele={id:bA,encode:{x:"x",y:"y",key:mPe,color:gee,value:"value",name:"name"},labels:[{style:{pointerEvents:"none"},text:"value",position:"inside",transform:[{type:"overflowHide"}]}],axis:{x:{title:"Time/Order",label:!0},y:!1},style:{[pee]:bA,[XD]:"childNodeCount"},state:{active:{zIndex:2},inactive:{zIndex:1}},legend:!1,coordinate:{type:"cartesian",grid:!1},interaction:{drillDown:!0}},yPe=t=>{const{encode:e,data:n=[],layout:r={}}=t,i=Jot(t,["encode","data","layout"]),{fillParent:a=!0,sort:o}=r,s=Object.assign(Object.assign({},Ele.encode),e),{value:l}=s,c=tst({encode:s,data:n,fillParent:a,sort:o});return[Nt({},Ele,Object.assign({type:"rect",data:c,encode:s,tooltip:{title:"path",items:[u=>({name:l,value:u[l]})]},interaction:{elementHighlight:!0}},i))]};yPe.props={};const _Pe=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];_Pe.props={};const bPe=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];bPe.props={};const EPe=t=>new BR(t);EPe.props={};const xPe=t=>new wy(t);xPe.props={};const SPe=t=>new Cwe(t);SPe.props={};const TPe=t=>new Nwe(t);TPe.props={};const APe=t=>new HHe(t);APe.props={};const wPe=t=>new lGe(t);wPe.props={};const OPe=t=>new qHe(t);OPe.props={};const CPe=t=>new Dwe(t);CPe.props={};const RPe=t=>new ZF(t);RPe.props={};const MPe=t=>new Hwe(t);MPe.props={};const PPe=t=>new zwe(t);PPe.props={};const NPe=t=>new YHe(t);NPe.props={};const IPe=t=>new RY(t);IPe.props={};const LPe=t=>new RQ(t);LPe.props={};const Fy="g2-";function FE(t){return`.${Fy}${t}`}const nst=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]],rst=["lineX","lineY","rangeX","rangeY","range","connector"];function vee({colorDefault:t,colorBlack:e,colorWhite:n,colorStroke:r,colorBackground:i,padding1:a,padding2:o,padding3:s,alpha90:l,alpha65:c,alpha45:u,alpha25:f,alpha10:h,category10:d,category20:p,sizeDefault:g=1,padding:v="auto",margin:y=16}){return{padding:v,margin:y,size:g,color:t,category10:d,category20:p,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:e,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:r,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:r,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:r,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:r,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:r,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:r,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:r,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:e,gridStrokeOpacity:h,labelAlign:"horizontal",labelFill:e,labelOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:a,line:!1,lineLineWidth:.5,lineStroke:e,lineStrokeOpacity:u,tickLength:4,tickLineWidth:1,tickStroke:e,tickOpacity:u,titleFill:e,titleOpacity:l,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:e,itemLabelFillOpacity:l,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,focusMarkerSize:12,itemSpacing:[a,a,a/2],itemValueFill:e,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:e,navButtonFillOpacity:.65,navPageNumFill:e,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:e,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:e,tickStrokeOpacity:.25,rowPadding:a,colPadding:o,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:e,handleLabelFillOpacity:u,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:e,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:e,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:e,labelFillOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:l,tickStroke:e,tickStrokeOpacity:u},label:{fill:e,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:e,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:n,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:e,fontWeight:"normal"},slider:{trackSize:16,trackFill:r,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:e,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:e,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:e,titleFillOpacity:l,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:e,subtitleFillOpacity:c,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{[FE("tooltip")]:{"font-family":"sans-serif"}}}}}const ist={colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},ast=vee(ist),mee=t=>Nt({},ast,t);mee.props={};const kPe=t=>Nt({},mee(),{category10:"category10",category20:"category20"},t);kPe.props={};const ost={colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25},sst=vee(ost),DPe=t=>Nt({},sst,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{[FE("tooltip")]:{background:"#1f1f1f",opacity:.95},[FE("tooltip-title")]:{color:"#A6A6A6"},[FE("tooltip-list-item-name-label")]:{color:"#A6A6A6"},[FE("tooltip-list-item-value")]:{color:"#A6A6A6"}}}},t),BPe=t=>Object.assign({},DPe(),{category10:"category10",category20:"category20"},t);BPe.props={};const lst={colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},cst=vee(lst),FPe=t=>Nt({},cst,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(e,n)=>n!==0},axisRight:{gridFilter:(e,n)=>n!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);FPe.props={};var ust=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function fst(t){return class extends d4{constructor(e){super(e),this.descriptor=t}connectedCallback(){var e,n;(n=(e=this.descriptor).render)===null||n===void 0||n.call(e,this.attributes,this)}update(e={}){var n,r;this.attr(Nt({},this.attributes,e)),(r=(n=this.descriptor).render)===null||r===void 0||r.call(n,this.attributes,this)}}}function xle(t,e,n){return t.querySelector(e)?ai(t).select(e):ai(t).append(n)}function I4(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function UPe(t,e){const n={flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:r,justifyContent:i,alignItems:a}=n;const o={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return t in o&&([r,i,a]=o[t]),Object.assign({display:"flex",flexDirection:r,justifyContent:i,alignItems:a},e)}class jPe extends lit{get child(){var e;return(e=this.children)===null||e===void 0?void 0:e[0]}update(e){var n;this.attr(e);const{subOptions:r}=e;(n=this.child)===null||n===void 0||n.update(r)}}class hst extends jPe{update(e){var n;const{subOptions:r}=e;this.attr(e),(n=this.child)===null||n===void 0||n.update(r)}}function km(t,e){var n;return(n=t.filter(r=>r.getOptions().name===e))===null||n===void 0?void 0:n[0]}function dst(t){return t==="horizontal"||t===0}function pst(t){return t==="vertical"||t===-Math.PI/2}function zPe(t,e,n){const{bbox:r}=t,{position:i="top",size:a,length:o}=e,s=["top","bottom","center"].includes(i),[l,c]=s?[r.height,r.width]:[r.width,r.height],{defaultSize:u,defaultLength:f}=n.props,h=a||u||l,d=o||f||c,p=s?"horizontal":"vertical",[g,v]=s?[d,h]:[h,d];return{orientation:p,width:g,height:v,size:h,length:d}}function gst(t){return t.find(e=>e.getOptions().domain.length>0).getOptions().domain}function L4(t){const e=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:n}=t,r=ust(t,["style"]),i={};return Object.entries(r).forEach(([a,o])=>{e.includes(a)?i[`show${Gp(a)}`]=o:i[a]=o}),Object.assign(Object.assign({},i),n)}var $Pe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function HPe(t,e){const{eulerAngles:n,origin:r}=e;r&&t.setOrigin(r),n&&t.rotate(n[0],n[1],n[2])}function GPe(t){const{innerWidth:e,innerHeight:n,depth:r}=t.getOptions();return[e,n,r]}function vst(t,e){const{width:n,height:r}=e.getOptions();return i=>{if(!BOe(e))return i;const a=t==="bottom"?[i,1]:[0,i],o=e.map(a);if(t==="bottom"){const s=o[0];return new wy({domain:[0,n],range:[0,1]}).map(s)}else if(t==="left"){const s=o[1];return new wy({domain:[0,r],range:[0,1]}).map(s)}return i}}function mst(t,e,n){if(t.getTicks)return t.getTicks();if(!n)return e;const[r,i]=fy(e,o=>+o),{tickCount:a}=t.getOptions();return n(r,i,a)}function yst(t,e){if(Mo(e))return d=>d;const n=e.getOptions(),{innerWidth:r,innerHeight:i,insetTop:a,insetBottom:o,insetLeft:s,insetRight:l}=n,[c,u,f]=t==="left"||t==="right"?[a,o,i]:[s,l,r],h=new wy({domain:[0,1],range:[c/f,1-u/f]});return d=>h.map(d)}function WPe(t,e,n,r,i,a,o,s){var l;(n!==void 0||a!==void 0)&&t.update(Object.assign(Object.assign({},n&&{tickCount:n}),a&&{tickMethod:a}));const c=mst(t,e,a),u=i?c.filter(i):c,f=y=>y instanceof Date?String(y):typeof y=="object"&&y?y:String(y),h=r||((l=t.getFormatter)===null||l===void 0?void 0:l.call(t))||f,d=yst(o,s),p=vst(o,s),g=y=>["top","bottom","center","outer"].includes(y),v=y=>["left","right"].includes(y);return Mo(s)||as(s)?u.map((y,_,E)=>{var x,T;const S=((x=t.getBandWidth)===null||x===void 0?void 0:x.call(t,y))/2||0,w=d(t.map(y)+S);return{value:a4(s)&&o==="center"||as(s)&&((T=t.getTicks)===null||T===void 0?void 0:T.call(t))&&g(o)||as(s)&&v(o)?1-w:w,label:f(h(RD(y),_,E)),id:String(_)}}):u.map((y,_,E)=>{var x;const T=((x=t.getBandWidth)===null||x===void 0?void 0:x.call(t,y))/2||0,S=p(d(t.map(y)+T));return{value:v(o)?1-S:S,label:f(h(RD(y),_,E)),id:String(_)}})}function _st(t,e,n="xy"){const[r,i,a]=GPe(e);return n==="xy"?t.includes("bottom")||t.includes("top")?i:r:n==="xz"?t.includes("bottom")||t.includes("top")?a:r:t.includes("bottom")||t.includes("top")?i:a}function bst(t=[],e){if(t.length>0)return t;const{labelAutoRotate:n,labelAutoHide:r,labelAutoEllipsis:i,labelAutoWrap:a}=e,o=[],s=(l,c)=>{c&&o.push(Object.assign(Object.assign({},l),c))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},n),s({type:"ellipsis",minLength:20},i),s({type:"hide"},r),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},a),o}function Est(t,e,n,r,i){const{x:a,y:o,width:s,height:l}=e,c=[a+s/2,o+l/2],u=Math.min(s,l)/2,[f,h]=jQ(i),[d,p]=GPe(i),g=Math.min(d,p)/2,v={center:c,radius:u,startAngle:f,endAngle:h,gridLength:(r-n)*g};if(t==="inner"){const{insetLeft:y,insetTop:_}=i.getOptions();return Object.assign(Object.assign({},v),{center:[c[0]-y,c[1]-_],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},v),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function xst(t,e,n){return hWe(e)||o4(e)?!1:t===void 0?!!n.getTicks:t}function Sst(t){const{depth:e}=t.getOptions();return e?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function Tst(t,e,n,r,i){const{x:a,y:o,width:s,height:l}=n;if(t==="bottom")return{startPos:[a,o],endPos:[a+s,o]};if(t==="left")return{startPos:[a+s,o+l],endPos:[a+s,o]};if(t==="right")return{startPos:[a,o+l],endPos:[a,o]};if(t==="top")return{startPos:[a,o+l],endPos:[a+s,o+l]};if(t==="center"){if(e==="vertical")return{startPos:[a,o],endPos:[a,o+l]};if(e==="horizontal")return{startPos:[a,o],endPos:[a+s,o]};if(typeof e=="number"){const[c,u]=r.getCenter(),[f,h]=s4(r),[d,p]=jQ(r),g=Math.min(s,l)/2,{insetLeft:v,insetTop:y}=r.getOptions(),_=f*g,E=h*g,[x,T]=[c+a-v,u+o-y],[S,w]=[Math.cos(e),Math.sin(e)],C=[x+E*S,T+E*w],D=[x+_*S,T+_*w],L=()=>{const{domain:I}=i.getOptions();return I.length},B=Mo(r)&&i?L():3;return{startPos:C,endPos:D,gridClosed:Math.abs(p-d-360)<1e-6,gridCenter:[x,T],gridControlAngles:new Array(B).fill(0).map((I,U,$)=>(p-d)/B*U)}}}return{}}const Ast=t=>{const{order:e,size:n,position:r,orientation:i,labelFormatter:a,tickFilter:o,tickCount:s,tickMethod:l,tickLength:c,important:u={},style:f={},indexBBox:h,title:d,grid:p=!1}=t,g=$Pe(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","tickLength","important","style","indexBBox","title","grid"]);return({scales:[v],value:y,coordinate:_,theme:E})=>{const{bbox:x}=y,{domain:T}=v.getOptions(),S=WPe(v,T,s,a,o,l,r,_),w=h?S.map(($,X)=>{const N=h.get(X);return!N||N[0]!==$.label?$:Object.assign(Object.assign({},$),{bbox:N[1]})}):S,[C,D]=s4(_),L=Est(r,x,C,D,_),{axis:B,axisArc:I={}}=E,U=L4(Nt({},B,I,L,Object.assign(Object.assign(Object.assign({type:"arc",data:w,titleText:I4(d),grid:p,classNamePrefix:Fy},c!==void 0?{tickLength:c}:null),g),u)));return new N4({style:ww(U,["transform"])})}};function wst(t,e,n,r,i,a){const o=n.axis,s=["top","right","bottom","left"].includes(i)?n[`axis${IQ(i)}`]:n.axisLinear,l=t.getOptions().name,c=n[`axis${Gp(l)}`]||{};return Object.assign({},o,s,c)}function Ost(t,e,n,r,i,a){const o=wst(t,e,n,r,i);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},o),{labelDirection:r==="right"?"negative":"positive"}),r==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:r==="right"?"negative":"positive",labelSpacing:r==="center"?0:4,titleSpacing:pst(a)?10:0,tick:r==="center"?!1:void 0}):o}const Cst=t=>{const{direction:e="left",important:n={},labelFormatter:r,order:i,orientation:a,actualPosition:o,position:s,size:l,style:c={},title:u,tickCount:f,tickFilter:h,tickMethod:d,tickLength:p,transform:g,indexBBox:v}=t,y=$Pe(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","tickLength","transform","indexBBox"]);return({scales:_,value:E,coordinate:x,theme:T})=>{const{bbox:S}=E,[w]=_,{domain:C,xScale:D}=w.getOptions(),L=Ost(w,x,T,e,s,a),B=Object.assign(Object.assign(Object.assign({},L),c),y),I=_st(o||s,x,t.plane),U=Tst(s,a,S,x,D),$=Sst(x),X=WPe(w,C,f,r,h,d,s,x),N=v?X.map((z,j)=>{const V=v.get(j);return!V||V[0]!==z.label?z:Object.assign(Object.assign({},z),{bbox:V[1]})}):X,M=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},B),{type:"linear",data:N,crossSize:l,titleText:I4(u),labelOverlap:bst(g,B),grid:xst(B.grid,x,w),gridLength:I,line:!0,indexBBox:v,classNamePrefix:Fy}),p!==void 0?{tickLength:p}:null),B.line?null:{lineOpacity:0}),U),$),n);return M.labelOverlap.find(z=>z.type==="hide")&&(M.crossSize=!1),new N4({className:"axis",style:L4(M)})}},VPe=t=>e=>{const{labelFormatter:n,labelFilter:r=()=>!0}=e;return i=>{var a;const{scales:[o]}=i,s=((a=o.getTicks)===null||a===void 0?void 0:a.call(o))||o.getOptions().domain,l=typeof n=="string"?$x(n):n,c=(f,h,d)=>r(s[h],h,s),u=Object.assign(Object.assign({},e),{labelFormatter:l,labelFilter:c,scale:o});return t(u)(i)}},ob=VPe(Cst),YPe=VPe(Ast);ob.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};YPe.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const XPe=t=>(...e)=>{const n=ob(Object.assign({},{crossPadding:50},t))(...e);return HPe(n,t),n};XPe.props=Object.assign(Object.assign({},ob.props),{defaultPosition:"bottom"});const qPe=t=>(...e)=>{const n=ob(Object.assign({},{crossPadding:10},t))(...e);return HPe(n,t),n};qPe.props=Object.assign(Object.assign({},ob.props),{defaultPosition:"left"});var Rst=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Mst(t){const e=t%(Math.PI*2);return e===Math.PI/2?{titleTransform:"translate(0, 50%)"}:e>-Math.PI/2&&e<Math.PI/2?{titleTransform:"translate(50%, 0)"}:e>Math.PI/2&&e<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function Pst(t,e,n,r){const{radar:i}=t,[a]=r,o=a.getOptions().name,[s,l]=jQ(n),{axisRadar:c={}}=e;return Object.assign(Object.assign({},c),{grid:o==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((u,f)=>(l-s)/i.count*f)})}const ZPe=t=>{const{important:e={}}=t,n=Rst(t,["important"]);return r=>{const{theme:i,coordinate:a,scales:o}=r;return ob(Object.assign(Object.assign(Object.assign({},n),Mst(t.orientation)),{important:Object.assign(Object.assign({},Pst(t,i,a,o)),e)}))(r)}};ZPe.props=Object.assign(Object.assign({},ob.props),{defaultPosition:"center"});/*!
 * @antv/g-plugin-canvas-path-generator
 * @description A G plugin of path generator with Canvas2D API
 * @version 2.1.22
 * @date 7/30/2025, 1:35:25 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function Nst(t,e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.r;t.arc(r,a,o,0,Math.PI*2,!1)}function Ist(t,e){var n=e.cx,r=n===void 0?0:n,i=e.cy,a=i===void 0?0:i,o=e.rx,s=e.ry;if(t.ellipse)t.ellipse(r,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,c=o>s?1:o/s,u=o>s?s/o:1;t.save(),t.scale(c,u),t.arc(r,a,l,0,Math.PI*2)}}function Lst(t,e){var n=e.x1,r=e.y1,i=e.x2,a=e.y2,o=e.markerStart,s=e.markerEnd,l=e.markerStartOffset,c=e.markerEndOffset,u=0,f=0,h=0,d=0,p=0,g,v;o&&Ya(o)&&l&&(g=i-n,v=a-r,p=Math.atan2(v,g),u=Math.cos(p)*(l||0),f=Math.sin(p)*(l||0)),s&&Ya(s)&&c&&(g=n-i,v=r-a,p=Math.atan2(v,g),h=Math.cos(p)*(c||0),d=Math.sin(p)*(c||0)),t.moveTo(n+u,r+f),t.lineTo(i+h,a+d)}function kst(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=e.d,s=o.absolutePath,l=o.segments,c=0,u=0,f=0,h=0,d=0,p,g;if(n&&Ya(n)&&i){var v=n.parentNode.getStartTangent(),y=ir(v,2),_=y[0],E=y[1];p=_[0]-E[0],g=_[1]-E[1],d=Math.atan2(g,p),c=Math.cos(d)*(i||0),u=Math.sin(d)*(i||0)}if(r&&Ya(r)&&a){var x=r.parentNode.getEndTangent(),T=ir(x,2),S=T[0],w=T[1];p=S[0]-w[0],g=S[1]-w[1],d=Math.atan2(g,p),f=Math.cos(d)*(a||0),h=Math.sin(d)*(a||0)}for(var C=0;C<s.length;C++){var D=s[C],L=D[0],B=s[C+1],I=C===0&&(c!==0||u!==0),U=(C===s.length-1||B&&(B[0]==="M"||B[0]==="Z"))&&f!==0&&h!==0,$=I?[c,u]:[0,0],X=ir($,2),N=X[0],M=X[1],k=U?[f,h]:[0,0],z=ir(k,2),j=z[0],V=z[1];switch(L){case"M":t.moveTo(D[1]+N,D[2]+M);break;case"L":t.lineTo(D[1]+j,D[2]+V);break;case"Q":t.quadraticCurveTo(D[1],D[2],D[3]+j,D[4]+V);break;case"C":t.bezierCurveTo(D[1],D[2],D[3],D[4],D[5]+j,D[6]+V);break;case"A":{var Q=l[C].arcParams,ee=Q.cx,re=Q.cy,ne=Q.rx,le=Q.ry,ue=Q.startAngle,ve=Q.endAngle,Se=Q.xRotation,Re=Q.sweepFlag;if(t.ellipse)t.ellipse(ee,re,ne,le,Se,ue,ve,!!(1-Re));else{var Xe=ne>le?ne:le,Le=ne>le?1:ne/le,Lt=ne>le?le/ne:1;t.translate(ee,re),t.rotate(Se),t.scale(Le,Lt),t.arc(0,0,Xe,ue,ve,!!(1-Re)),t.scale(1/Le,1/Lt),t.rotate(-Se),t.translate(-ee,-re)}U&&t.lineTo(D[6]+f,D[7]+h);break}case"Z":t.closePath();break}}}function Dst(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=e.points.points,s=o.length,l=o[0][0],c=o[0][1],u=o[s-1][0],f=o[s-1][1],h=0,d=0,p=0,g=0,v=0,y,_;n&&Ya(n)&&i&&(y=o[1][0]-o[0][0],_=o[1][1]-o[0][1],v=Math.atan2(_,y),h=Math.cos(v)*(i||0),d=Math.sin(v)*(i||0)),r&&Ya(r)&&a&&(y=o[s-1][0]-o[0][0],_=o[s-1][1]-o[0][1],v=Math.atan2(_,y),p=Math.cos(v)*(a||0),g=Math.sin(v)*(a||0)),t.moveTo(l+(h||p),c+(d||g));for(var E=1;E<s-1;E++){var x=o[E];t.lineTo(x[0],x[1])}t.lineTo(u,f)}function Bst(t,e){var n=e.markerStart,r=e.markerEnd,i=e.markerStartOffset,a=e.markerEndOffset,o=e.points.points,s=o.length,l=o[0][0],c=o[0][1],u=o[s-1][0],f=o[s-1][1],h=0,d=0,p=0,g=0,v=0,y,_;n&&Ya(n)&&i&&(y=o[1][0]-o[0][0],_=o[1][1]-o[0][1],v=Math.atan2(_,y),h=Math.cos(v)*(i||0),d=Math.sin(v)*(i||0)),r&&Ya(r)&&a&&(y=o[s-2][0]-o[s-1][0],_=o[s-2][1]-o[s-1][1],v=Math.atan2(_,y),p=Math.cos(v)*(a||0),g=Math.sin(v)*(a||0)),t.moveTo(l+h,c+d);for(var E=1;E<s-1;E++){var x=o[E];t.lineTo(x[0],x[1])}t.lineTo(u+p,f+g)}function Fst(t,e){var n=e.x,r=n===void 0?0:n,i=e.y,a=i===void 0?0:i,o=e.radius,s=e.width,l=e.height,c=s,u=l,f=o&&o.some(function(T){return T!==0});if(!f)t.rect(r,a,c,u);else{var h=s>0?1:-1,d=l>0?1:-1,p=h+d===0,g=o.map(function(T){return ga(T,0,Math.min(Math.abs(c)/2,Math.abs(u)/2))}),v=ir(g,4),y=v[0],_=v[1],E=v[2],x=v[3];t.moveTo(h*y+r,a),t.lineTo(c-h*_+r,a),_!==0&&t.arc(c-h*_+r,d*_+a,_,-d*Math.PI/2,h>0?0:Math.PI,p),t.lineTo(c+r,u-d*E+a),E!==0&&t.arc(c-h*E+r,u-d*E+a,E,h>0?0:Math.PI,d>0?Math.PI/2:1.5*Math.PI,p),t.lineTo(h*x+r,u+a),x!==0&&t.arc(h*x+r,u-d*x+a,x,d>0?Math.PI/2:-Math.PI/2,h>0?Math.PI:0,p),t.lineTo(r,d*y+a),y!==0&&t.arc(h*y+r,d*y+a,y,h>0?Math.PI:0,d>0?Math.PI*1.5:Math.PI/2,p)}}var Ust=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.name="canvas-path-generator",n}return Sr(e,t),at(e,[{key:"init",value:function(){var r,i=(r={},Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(r,Yt.CIRCLE,Nst),Yt.ELLIPSE,Ist),Yt.RECT,Fst),Yt.LINE,Lst),Yt.POLYLINE,Bst),Yt.POLYGON,Dst),Yt.PATH,kst),Yt.TEXT,void 0),Yt.GROUP,void 0),Yt.IMAGE,void 0),Z(Z(Z(r,Yt.HTML,void 0),Yt.MESH,void 0),Yt.FRAGMENT,void 0));this.context.pathGeneratorFactory=i}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])})(ib);/*!
 * @antv/g-plugin-canvas-picker
 * @description A G plugin for picking in canvas
 * @version 2.1.27
 * @date 7/30/2025, 1:37:32 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var jst=Pr(),zst=Pr(),$st=Pr(),Hst=Zr(),KPe=(function(){function t(){var e=this;it(this,t),this.isHit=function(n,r,i,a){var o=e.context.pointInPathPickerFactory[n.nodeName];if(o){var s=qs(Hst,i),l=ka(zst,Co($st,r[0],r[1],0),s);if(o(n,new Cu(l[0],l[1]),a,e.isPointInPath,e.context,e.runtime))return!0}return!1},this.isPointInPath=function(n,r){var i=e.runtime.offscreenCanvasCreator.getOrCreateContext(e.context.config.offscreenCanvas),a=e.context.pathGeneratorFactory[n.nodeName];return a&&(i.beginPath(),a(i,n.parsedStyle),i.closePath()),i.isPointInPath(r.x,r.y)}}return at(t,[{key:"apply",value:function(n,r){var i,a=this,o=n.renderingService,s=n.renderingContext;this.context=n,this.runtime=r;var l=(i=s.root)===null||i===void 0?void 0:i.ownerDocument;o.hooks.pick.tapPromise(t.tag,(function(){var c=kt(Zs().mark(function u(f){return Zs().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",a.pick(l,f));case 1:case"end":return h.stop()}},u)}));return function(u){return c.apply(this,arguments)}})()),o.hooks.pickSync.tap(t.tag,function(c){return a.pick(l,c)})}},{key:"pick",value:function(n,r){var i=r.topmost,a=r.position,o=a.x,s=a.y,l=Co(jst,o,s,0),c=n.elementsFromBBox(l[0],l[1],l[0],l[1]),u=[],f=Td(c),h;try{for(f.s();!(h=f.n()).done;){var d=h.value,p=d.getWorldTransform(),g=this.isHit(d,l,p,!1);if(g){var v=kCe(d);if(v){var y=v.parsedStyle.clipPath,_=this.isHit(y,l,y.getWorldTransform(),!0);if(_){if(i)return r.picked=[d],r;u.push(d)}}else{if(i)return r.picked=[d],r;u.push(d)}}}}catch(E){f.e(E)}finally{f.f()}return r.picked=u,r}}])})();KPe.tag="CanvasPicker";function Gst(t,e,n){var r=t.parsedStyle,i=r.cx,a=i===void 0?0:i,o=r.cy,s=o===void 0?0:o,l=r.r,c=r.fill,u=r.stroke,f=r.lineWidth,h=f===void 0?1:f,d=r.increasedLineWidthForHitTesting,p=d===void 0?0:d,g=r.pointerEvents,v=g===void 0?"auto":g,y=(h+p)/2,_=py(a,s,e.x,e.y),E=Xx(v,c,u),x=ir(E,2),T=x[0],S=x[1];return T&&S||n?_<=l+y:T?_<=l:S?_>=l-y&&_<=l+y:!1}function II(t,e,n,r){return t/(n*n)+e/(r*r)}function Wst(t,e,n){var r=t.parsedStyle,i=r.cx,a=i===void 0?0:i,o=r.cy,s=o===void 0?0:o,l=r.rx,c=r.ry,u=r.fill,f=r.stroke,h=r.lineWidth,d=h===void 0?1:h,p=r.increasedLineWidthForHitTesting,g=p===void 0?0:p,v=r.pointerEvents,y=v===void 0?"auto":v,_=e.x,E=e.y,x=Xx(y,u,f),T=ir(x,2),S=T[0],w=T[1],C=(d+g)/2,D=(_-a)*(_-a),L=(E-s)*(E-s);return S&&w||n?II(D,L,l+C,c+C)<=1:S?II(D,L,l,c)<=1:w?II(D,L,l-C,c-C)>=1&&II(D,L,l+C,c+C)<=1:!1}function UE(t,e,n,r,i,a){return i>=t&&i<=t+n&&a>=e&&a<=e+r}function Vst(t,e,n,r,i,a,o){var s=i/2;return UE(t-s,e-s,n,i,a,o)||UE(t+n-s,e-s,i,r,a,o)||UE(t+s,e+r-s,n,i,a,o)||UE(t-s,e+s,i,r,a,o)}function LI(t,e,n,r,i,a,o,s){var l=(Math.atan2(s-e,o-t)+Math.PI*2)%(Math.PI*2),c={x:t+n*Math.cos(l),y:e+n*Math.sin(l)};return py(c.x,c.y,o,s)<=a/2}function E_(t,e,n,r,i,a,o){var s=Math.min(t,n),l=Math.max(t,n),c=Math.min(e,r),u=Math.max(e,r),f=i/2;return a>=s-f&&a<=l+f&&o>=c-f&&o<=u+f?RWe(t,e,n,r,a,o)<=i/2:!1}function QPe(t,e,n,r,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],l=t[o][1],c=t[o+1][0],u=t[o+1][1];if(E_(s,l,c,u,e,n,r))return!0}if(i){var f=t[0],h=t[a-1];if(E_(f[0],f[1],h[0],h[1],e,n,r))return!0}return!1}var Yst=1e-6;function G7(t){return Math.abs(t)<Yst?0:t<0?-1:1}function Xst(t,e,n){return(n[0]-t[0])*(e[1]-t[1])===(e[0]-t[0])*(n[1]-t[1])&&Math.min(t[0],e[0])<=n[0]&&n[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=n[1]&&n[1]<=Math.max(t[1],e[1])}function JPe(t,e,n){var r=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(Xst(o,s,[e,n]))return!0;G7(o[1]-n)>0!=G7(s[1]-n)>0&&G7(e-(n-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Sle(t,e,n){for(var r=!1,i=0;i<t.length;i++){var a=t[i];if(r=JPe(a,e,n),r)break}return r}function qst(t,e,n){var r=t.parsedStyle,i=r.x1,a=r.y1,o=r.x2,s=r.y2,l=r.lineWidth,c=l===void 0?1:l,u=r.increasedLineWidthForHitTesting,f=u===void 0?0:u,h=r.pointerEvents,d=h===void 0?"auto":h,p=r.fill,g=r.stroke,v=Xx(d,p,g),y=ir(v,2),_=y[1];return!_&&!n||!c?!1:E_(i,a,o,s,c+f,e.x,e.y)}function Zst(t,e,n,r,i){for(var a=!1,o=e/2,s=0;s<t.length;s++){var l=t[s],c=l.currentPoint,u=l.params,f=l.prePoint,h=l.box;if(!(h&&!UE(h.x-o,h.y-o,h.width+e,h.height+e,n,r)))switch(l.command){case"L":case"Z":if(a=E_(f[0],f[1],c[0],c[1],e,n,r),a)return!0;break;case"Q":var d=IWe(f[0],f[1],u[1],u[2],u[3],u[4],n,r);if(a=d<=e/2,a)return!0;break;case"C":var p=lae(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i);if(a=p<=e/2,a)return!0;break;case"A":l.cubicParams||(l.cubicParams=SQ(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0));for(var g=l.cubicParams,v=f,y=0;y<g.length;y+=6){var _=lae(v[0],v[1],g[y],g[y+1],g[y+2],g[y+3],g[y+4],g[y+5],n,r,i);if(v=[g[y+4],g[y+5]],a=_<=e/2,a)return!0}break}}return a}function Kst(t,e,n,r,i,a){var o=t.parsedStyle,s=o.lineWidth,l=s===void 0?1:s,c=o.increasedLineWidthForHitTesting,u=c===void 0?0:c,f=o.stroke,h=o.fill,d=o.d,p=o.pointerEvents,g=p===void 0?"auto":p,v=d.segments,y=d.hasArc,_=d.polylines,E=d.polygons,x=Xx(g,E?.length&&h,f),T=ir(x,2),S=T[0],w=T[1],C=QY(t),D=!1;return S||n?(y?D=r(t,e):D=Sle(E,e.x,e.y)||Sle(_,e.x,e.y),D):((w||n)&&(D=Zst(v,l+u,e.x,e.y,C)),D)}function Qst(t,e,n){var r=t.parsedStyle,i=r.stroke,a=r.fill,o=r.lineWidth,s=o===void 0?1:o,l=r.increasedLineWidthForHitTesting,c=l===void 0?0:l,u=r.points,f=r.pointerEvents,h=f===void 0?"auto":f,d=Xx(h,a,i),p=ir(d,2),g=p[0],v=p[1],y=!1;return(v||n)&&(y=QPe(u.points,s+c,e.x,e.y,!0)),!y&&(g||n)&&(y=JPe(u.points,e.x,e.y)),y}function Jst(t,e,n){var r=t.parsedStyle,i=r.lineWidth,a=i===void 0?1:i,o=r.increasedLineWidthForHitTesting,s=o===void 0?0:o,l=r.points,c=r.pointerEvents,u=c===void 0?"auto":c,f=r.fill,h=r.stroke,d=Xx(u,f,h),p=ir(d,2),g=p[1];return!g&&!n||!a?!1:QPe(l.points,a+s,e.x,e.y,!1)}function elt(t,e,n,r,i){var a=t.parsedStyle,o=a.radius,s=a.fill,l=a.stroke,c=a.lineWidth,u=c===void 0?1:c,f=a.increasedLineWidthForHitTesting,h=f===void 0?0:f,d=a.x,p=d===void 0?0:d,g=a.y,v=g===void 0?0:g,y=a.width,_=a.height,E=a.pointerEvents,x=E===void 0?"auto":E,T=Xx(x,s,l),S=ir(T,2),w=S[0],C=S[1],D=o&&o.some(function(U){return U!==0}),L=u+h;if(D){var I=!1;return(C||n)&&(I=tlt(p,v,y,_,o.map(function(U){return ga(U,0,Math.min(Math.abs(y)/2,Math.abs(_)/2))}),L,e.x,e.y)),!I&&(w||n)&&(I=r(t,e)),I}else{var B=L/2;if(w&&C||n)return UE(p-B,v-B,y+B,_+B,e.x,e.y);if(w)return UE(p,v,y,_,e.x,e.y);if(C)return Vst(p,v,y,_,L,e.x,e.y)}return!1}function tlt(t,e,n,r,i,a,o,s){var l=ir(i,4),c=l[0],u=l[1],f=l[2],h=l[3];return E_(t+c,e,t+n-u,e,a,o,s)||E_(t+n,e+u,t+n,e+r-f,a,o,s)||E_(t+n-f,e+r,t+h,e+r,a,o,s)||E_(t,e+r-h,t,e+c,a,o,s)||LI(t+n-u,e+u,u,1.5*Math.PI,2*Math.PI,a,o,s)||LI(t+n-f,e+r-f,f,0,.5*Math.PI,a,o,s)||LI(t+h,e+r-h,h,.5*Math.PI,Math.PI,a,o,s)||LI(t+c,e+c,c,Math.PI,1.5*Math.PI,a,o,s)}function nlt(t,e,n,r,i,a){var o=t.parsedStyle,s=o.pointerEvents,l=s===void 0?"auto":s,c=o.x,u=c===void 0?0:c,f=o.y,h=f===void 0?0:f,d=o.width,p=o.height;if(l==="non-transparent-pixel"){var g=i.config.offscreenCanvas,v=a.offscreenCanvasCreator.getOrCreateCanvas(g),y=a.offscreenCanvasCreator.getOrCreateContext(g,{willReadFrequently:!0});v.width=d,v.height=p,i.defaultStyleRendererFactory[Yt.IMAGE].render(y,ze(ze({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0);var _=y.getImageData(e.x-u,e.y-h,1,1).data;return _.every(function(E){return E!==0})}return!0}function rlt(t,e,n,r){var i=t.getGeometryBounds();return e.x>=i.min[0]&&e.y>=i.min[1]&&e.x<=i.max[0]&&e.y<=i.max[1]}var ilt=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.name="canvas-picker",n}return Sr(e,t),at(e,[{key:"init",value:function(){var r,i=(r={},Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(r,Yt.CIRCLE,Gst),Yt.ELLIPSE,Wst),Yt.RECT,elt),Yt.LINE,qst),Yt.POLYLINE,Jst),Yt.POLYGON,Qst),Yt.PATH,Kst),Yt.TEXT,rlt),Yt.GROUP,null),Yt.IMAGE,nlt),Z(Z(r,Yt.HTML,null),Yt.MESH,null));this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new KPe)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])})(ib);function om(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var alt=0;function olt(t){return"__private_"+alt+++"_"+t}/*!
 * @antv/g-plugin-image-loader
 * @description A G plugin for loading image
 * @version 2.1.26
 * @date 7/30/2025, 1:35:52 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var slt=(function(){function t(){it(this,t),this.cacheStore=new Map}return at(t,[{key:"onRefAdded",value:function(n){}},{key:"has",value:function(n){return this.cacheStore.has(n)}},{key:"put",value:function(n,r,i){return this.cacheStore.has(n)?!1:(this.cacheStore.set(n,{value:r,counter:new Set([i.entity])}),this.onRefAdded(i),!0)}},{key:"get",value:function(n,r){var i=this.cacheStore.get(n);return i?(i.counter.has(r.entity)||(i.counter.add(r.entity),this.onRefAdded(r)),i.value):null}},{key:"update",value:function(n,r,i){var a=this.cacheStore.get(n);return a?(a.value=ze(ze({},a.value),r),a.counter.has(i.entity)||(a.counter.add(i.entity),this.onRefAdded(i)),!0):!1}},{key:"release",value:function(n,r){var i=this.cacheStore.get(n);return i?(i.counter.delete(r.entity),i.counter.size<=0&&this.cacheStore.delete(n),!0):!1}},{key:"releaseRef",value:function(n){var r=this;Array.from(this.cacheStore.keys()).forEach(function(i){r.release(i,n)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])})(),W7=[],V7=[],SX=(function(){function t(){it(this,t)}return at(t,null,[{key:"stop",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;t.rafId&&(n.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;W7.length<=0&&V7.length<=0||(V7.forEach(function(r){return r()}),V7=W7.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=n.requestAnimationFrame(function(){t.executeTask(n)}))}},{key:"sliceImage",value:function(n,r,i,a){for(var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t.api,l=n.naturalWidth||n.width,c=n.naturalHeight||n.height,u=r-o,f=i-o,h=Math.ceil(l/u),d=Math.ceil(c/f),p={tileSize:[r,i],gridSize:[d,h],tiles:Array(d).fill(null).map(function(){return Array(h).fill(null)})},g=function(_){for(var E=function(S){W7.push(function(){var w=S*u,C=_*f,D=[Math.min(r,l-w),Math.min(i,c-C)],L=D[0],B=D[1],I=s.createCanvas();I.width=r,I.height=i;var U=I.getContext("2d");U.drawImage(n,w,C,L,B,0,0,L,B),p.tiles[_][S]={x:w,y:C,tileX:S,tileY:_,data:I},a()})},x=0;x<h;x++)E(x)},v=0;v<d;v++)g(v);return t.stop(),t.executeTask(),p}}])})();SX.TASK_NUM_PER_FRAME=10;var gd=new slt;gd.onRefAdded=function(e){var n=this;e.addEventListener(ta.DESTROY,function(){n.releaseRef(e)},{once:!0})};var yee=(function(){function t(e,n){it(this,t),this.gradientCache={},this.patternCache={},this.context=e,this.runtime=n}return at(t,[{key:"getImageSync",value:function(n,r,i){var a=$i(n)?n:n.src;if(gd.has(a)){var o=gd.get(a,r);if(o.img.complete)return i?.(o),o}return this.getOrCreateImage(n,r).then(function(s){i?.(s)}).catch(function(s){console.error(s)}),null}},{key:"getOrCreateImage",value:function(n,r){var i=this,a=$i(n)?n:n.src;if(!$i(n)&&!gd.has(a)){var o={img:n,size:[n.naturalWidth||n.width,n.naturalHeight||n.height],tileSize:kI(n)};gd.put(a,o,r)}if(gd.has(a)){var s=gd.get(a,r);return s.img.complete?Promise.resolve(s):new Promise(function(l,c){s.img.addEventListener("load",function(){s.size=[s.img.naturalWidth||s.img.width,s.img.naturalHeight||s.img.height],s.tileSize=kI(s.img),l(s)}),s.img.addEventListener("error",function(u){c(u)})})}return new Promise(function(l,c){var u=i.context.config.createImage();if(u){var f={img:u,size:[0,0],tileSize:kI(u)};gd.put(a,f,r),u.onload=function(){f.size=[u.naturalWidth||u.width,u.naturalHeight||u.height],f.tileSize=kI(f.img),l(f)},u.onerror=function(h){c(h)},u.crossOrigin="Anonymous",u.src=a}})}},{key:"createDownSampledImage",value:(function(){var e=kt(Zs().mark(function r(i,a){var o,s,l,c,u,f,h,d,p,g,v,y,_,E;return Zs().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=1,this.getOrCreateImage(i,a);case 1:if(o=x.sent,!(typeof o.downSamplingRate<"u")){x.next=2;break}return x.abrupt("return",o);case 2:if(s=this.context.config.enableLargeImageOptimization,l=typeof s=="boolean"?{}:s,c=l.maxDownSampledImageSize,u=c===void 0?2048:c,f=l.downSamplingRateThreshold,h=f===void 0?.5:f,d=this.runtime.globalThis.createImageBitmap,p=ir(o.size,2),g=p[0],v=p[1],y=o.img,_=Math.min((u+u)/(g+v),Math.max(.01,Math.min(h,.5))),E=ze(ze({},o),{},{downSamplingRate:_}),gd.update(o.img.src,E,a),!d){x.next=7;break}return x.prev=3,x.next=4,d(o.img,{resizeWidth:g*_,resizeHeight:v*_});case 4:y=x.sent,x.next=6;break;case 5:x.prev=5,x.catch(3),_=1;case 6:x.next=8;break;case 7:_=1;case 8:return E=ze(ze({},this.getImageSync(i,a)),{},{downSampled:y,downSamplingRate:_}),gd.update(o.img.src,E,a),x.abrupt("return",E);case 9:case"end":return x.stop()}},r,this,[[3,5]])}));function n(r,i){return e.apply(this,arguments)}return n})()},{key:"createImageTiles",value:(function(){var e=kt(Zs().mark(function r(i,a,o,s){var l,c,u,f,h;return Zs().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=1,this.getOrCreateImage(i,s);case 1:return l=d.sent,c=s.ownerDocument.defaultView,u=c.requestAnimationFrame,f=c.cancelAnimationFrame,SX.api={requestAnimationFrame:u,cancelAnimationFrame:f,createCanvas:function(){return jJ.createCanvas()}},h=ze(ze({},l),SX.sliceImage(l.img,l.tileSize[0],l.tileSize[0],o)),gd.update(l.img.src,h,s),d.abrupt("return",h);case 2:case"end":return d.stop()}},r,this)}));function n(r,i,a,o){return e.apply(this,arguments)}return n})()},{key:"releaseImage",value:function(n,r){gd.release($i(n)?n:n.src,r)}},{key:"releaseImageRef",value:function(n){gd.releaseRef(n)}},{key:"getOrCreatePatternSync",value:function(n,r,i,a,o,s,l){var c=this.generatePatternKey(r);if(c&&this.patternCache[c])return this.patternCache[c];var u=r.image,f=r.repetition,h=r.transform,d,p=!1;if($i(u)){var g=this.getImageSync(u,n,l);d=g?.img}else a?(d=a,p=!0):d=u;var v=d&&i.createPattern(d,f);if(v){var y;h?y=jCe(PCe(h),new bs({})):y=Pu(Zr()),p&&Hf(y,y,[1/o,1/o,1]),v.setTransform({a:y[0],b:y[1],c:y[4],d:y[5],e:y[12]+s[0],f:y[13]+s[1]})}return c&&v&&(this.patternCache[c]=v),v}},{key:"getOrCreateGradient",value:function(n,r){var i=this.generateGradientKey(n),a=n.type,o=n.steps,s=n.min,l=n.width,c=n.height,u=n.angle,f=n.cx,h=n.cy,d=n.size;if(this.gradientCache[i])return this.gradientCache[i];var p=null;if(a===b_.LinearGradient){var g=bKe(s,l,c,u),v=g.x1,y=g.y1,_=g.x2,E=g.y2;p=r.createLinearGradient(v,y,_,E)}else if(a===b_.RadialGradient){var x=EKe(s,l,c,f,h,d),T=x.x,S=x.y,w=x.r;p=r.createRadialGradient(T,S,0,T,S,w)}return p&&(o.forEach(function(C){var D=C.offset,L=C.color;if(D.unit===rr.kPercentage){var B;(B=p)===null||B===void 0||B.addColorStop(D.value/100,L.toString())}}),this.gradientCache[i]=p),this.gradientCache[i]}},{key:"generateGradientKey",value:function(n){var r=n.type,i=n.min,a=n.width,o=n.height,s=n.steps,l=n.angle,c=n.cx,u=n.cy,f=n.size;return"gradient-".concat(r,"-").concat(l?.toString()||0,"-").concat(c?.toString()||0,"-").concat(u?.toString()||0,"-").concat(f?.toString()||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(o,"-").concat(s.map(function(h){var d=h.offset,p=h.color;return"".concat(d).concat(p)}).join("-"))}},{key:"generatePatternKey",value:function(n){var r=n.image,i=n.repetition;if($i(r))return"pattern-".concat(r,"-").concat(i);if(r.nodeName==="rect")return"pattern-".concat(r.entity,"-").concat(i)}}])})();yee.isSupportTile=!!jJ.createCanvas();function kI(t){if(!t.complete)return[0,0];var e=t.naturalWidth||t.width,n=t.naturalHeight||t.height,r=256;return[256,512].forEach(function(i){var a=Math.ceil(n/i),o=Math.ceil(e/i);a*o<1e3&&(r=i)}),[r,r]}var eNe=(function(){function t(){it(this,t)}return at(t,[{key:"apply",value:function(n){var r=n.renderingService,i=n.renderingContext,a=n.imagePool,o=i.root.ownerDocument.defaultView,s=function(f,h,d){var p=f.parsedStyle,g=p.width,v=p.height;g&&!v?f.setAttribute("height",d/h*g):!g&&v&&f.setAttribute("width",h/d*v)},l=function(f){var h=f.target,d=h.nodeName,p=h.attributes;if(d===Yt.IMAGE){var g=p.src,v=p.keepAspectRatio;a.getImageSync(g,h,function(y){var _=y.img,E=_.width,x=_.height;v&&s(h,E,x),h.renderable.dirty=!0,r.dirtify()})}},c=function(f){var h=f.target,d=f.attrName,p=f.prevValue,g=f.newValue;h.nodeName!==Yt.IMAGE||d!=="src"||(p!==g&&a.releaseImage(p,h),$i(g)&&a.getOrCreateImage(g,h).then(function(v){var y=v.img,_=y.width,E=y.height;h.attributes.keepAspectRatio&&s(h,_,E),h.renderable.dirty=!0,r.dirtify()}).catch(function(){}))};r.hooks.init.tap(t.tag,function(){o.addEventListener(ta.MOUNTED,l),o.addEventListener(ta.ATTR_MODIFIED,c)}),r.hooks.destroy.tap(t.tag,function(){o.removeEventListener(ta.MOUNTED,l),o.removeEventListener(ta.ATTR_MODIFIED,c)})}}])})();eNe.tag="LoadImage";var llt=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.name="image-loader",n}return Sr(e,t),at(e,[{key:"init",value:function(r){this.context.imagePool=new yee(this.context,r),this.addRenderingPlugin(new eNe)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])})(ib);/*!
 * @antv/g-plugin-canvas-renderer
 * @description A G plugin of renderer implementation with Canvas2D API
 * @version 2.3.3
 * @date 7/30/2025, 1:36:40 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Hl=olt("renderState"),tNe=(function(){function t(e){it(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,Hl,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Zr(),this.dprMatrix=Zr(),this.tmpMat4=Zr(),this.vec3a=Pr(),this.vec3b=Pr(),this.vec3c=Pr(),this.vec3d=Pr(),this.canvasRendererPluginOptions=e}return at(t,[{key:"apply",value:function(n,r){var i=this;this.context=n;var a=this.context,o=a.config,s=a.camera,l=a.renderingService,c=a.renderingContext,u=a.rBushRoot,f=a.pathGeneratorFactory,h=o.renderer.getConfig().enableRenderingOptimization;o.renderer.getConfig().enableDirtyCheck=!1,o.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=u,this.pathGeneratorFactory=f;var d=n.contextService,p=c.root.ownerDocument.defaultView,g=function(x){var T=x.target,S=T.rBushNode;S!=null&&S.aabb&&i.removedRBushNodeAABBs.push(S.aabb)},v=function(x){var T=x.target,S=T.rBushNode;S.aabb&&i.removedRBushNodeAABBs.push(S.aabb)};l.hooks.init.tap(t.tag,function(){p.addEventListener(ta.UNMOUNTED,g),p.addEventListener(ta.CULLED,v);var E=d.getDPR(),x=o.width,T=o.height,S=d.getContext();i.clearRect(S,0,0,x*E,T*E,o.background)}),l.hooks.destroy.tap(t.tag,function(){p.removeEventListener(ta.UNMOUNTED,g),p.removeEventListener(ta.CULLED,v),i.renderQueue=[],i.removedRBushNodeAABBs=[],om(i,Hl)[Hl]={restoreStack:[],prevObject:null,currentContext:null}});var y=function(){var x,T=d.getContext(),S=d.getDPR(),w=o.width,C=o.height,D=i.canvasRendererPluginOptions,L=D.dirtyObjectNumThreshold,B=D.dirtyObjectRatioThreshold,I=l.getStats(),U=I.total,$=I.rendered,X=$/U;i.clearFullScreen=i.clearFullScreenLastFrame||!((x=p.context.renderingPlugins[1])!==null&&x!==void 0&&x.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||$>L&&X>B,T&&(typeof T.resetTransform=="function"?T.resetTransform():T.setTransform(1,0,0,1,0,0),i.clearFullScreen&&i.clearRect(T,0,0,w*S,C*S,o.background))},_=function(x,T){for(var S=[x];S.length>0;){var w,C=S.pop();C.isVisible()&&!C.isCulled()&&(h?i.renderDisplayObjectOptimized(C,T,i.context,om(i,Hl)[Hl],r):i.renderDisplayObject(C,T,i.context,om(i,Hl)[Hl],r));for(var D=((w=C.sortable)===null||w===void 0||(w=w.sorted)===null||w===void 0?void 0:w.length)>0?C.sortable.sorted:C.childNodes,L=D.length-1;L>=0;L--)S.push(D[L])}};l.hooks.endFrame.tap(t.tag,function(){if(y(),c.root.childNodes.length===0){i.clearFullScreenLastFrame=!0;return}h=o.renderer.getConfig().enableRenderingOptimization,om(i,Hl)[Hl]={restoreStack:[],prevObject:null,currentContext:om(i,Hl)[Hl].currentContext},om(i,Hl)[Hl].currentContext.clear(),i.clearFullScreenLastFrame=!1;var E=d.getContext(),x=d.getDPR();if(Sd(i.dprMatrix,[x,x,1]),qa(i.vpMatrix,i.dprMatrix,s.getOrthoMatrix()),i.clearFullScreen)h?(E.save(),_(c.root,E),E.restore()):_(c.root,E),i.removedRBushNodeAABBs=[];else{var T=i.safeMergeAABB.apply(i,[i.mergeDirtyAABBs(i.renderQueue)].concat(Dr(i.removedRBushNodeAABBs.map(function(le){var ue=le.minX,ve=le.minY,Se=le.maxX,Re=le.maxY,Xe=new cs;return Xe.setMinMax([ue,ve,0],[Se,Re,0]),Xe}))));if(i.removedRBushNodeAABBs=[],cs.isEmpty(T)){i.renderQueue=[];return}var S=i.convertAABB2Rect(T),w=S.x,C=S.y,D=S.width,L=S.height,B=ka(i.vec3a,[w,C,0],i.vpMatrix),I=ka(i.vec3b,[w+D,C,0],i.vpMatrix),U=ka(i.vec3c,[w,C+L,0],i.vpMatrix),$=ka(i.vec3d,[w+D,C+L,0],i.vpMatrix),X=Math.min(B[0],I[0],$[0],U[0]),N=Math.min(B[1],I[1],$[1],U[1]),M=Math.max(B[0],I[0],$[0],U[0]),k=Math.max(B[1],I[1],$[1],U[1]),z=Math.floor(X),j=Math.floor(N),V=Math.ceil(M-X),Q=Math.ceil(k-N);E.save(),i.clearRect(E,z,j,V,Q,o.background),E.beginPath(),E.rect(z,j,V,Q),E.clip(),E.setTransform(i.vpMatrix[0],i.vpMatrix[1],i.vpMatrix[4],i.vpMatrix[5],i.vpMatrix[12],i.vpMatrix[13]);var ee=o.renderer.getConfig(),re=ee.enableDirtyRectangleRenderingDebug;re&&p.dispatchEvent(new rs(Ed.DIRTY_RECTANGLE,{dirtyRect:{x:z,y:j,width:V,height:Q}}));var ne=i.searchDirtyObjects(T);ne.sort(function(le,ue){return le.sortable.renderOrder-ue.sortable.renderOrder}).forEach(function(le){le&&le.isVisible()&&!le.isCulled()&&i.renderDisplayObject(le,E,i.context,om(i,Hl)[Hl],r)}),E.restore(),i.renderQueue.forEach(function(le){i.saveDirtyAABB(le)}),i.renderQueue=[]}om(i,Hl)[Hl].restoreStack.forEach(function(){E.restore()}),om(i,Hl)[Hl].restoreStack=[]}),l.hooks.render.tap(t.tag,function(E){i.clearFullScreen||i.renderQueue.push(E)})}},{key:"clearRect",value:function(n,r,i,a,o,s){n.clearRect(r,i,a,o),s&&(n.fillStyle=s,n.fillRect(r,i,a,o))}},{key:"renderDisplayObjectOptimized",value:function(n,r,i,a,o){var s=n.nodeName,l=!1,c=!1,u=this.context.styleRendererFactory[s],f=this.pathGeneratorFactory[s],h=n.parsedStyle.clipPath;if(h){l=!a.prevObject||!yY(h.getWorldTransform(),a.prevObject.getWorldTransform()),l&&(this.applyWorldTransform(r,h),a.prevObject=null);var d=this.pathGeneratorFactory[h.nodeName];d&&(r.save(),c=!0,r.beginPath(),d(r,h.parsedStyle),r.closePath(),r.clip())}if(u){l=!a.prevObject||!yY(n.getWorldTransform(),a.prevObject.getWorldTransform()),l&&this.applyWorldTransform(r,n);var p=!a.prevObject;if(!p){var g=a.prevObject.nodeName;s===Yt.TEXT?p=g!==Yt.TEXT:s===Yt.IMAGE?p=g!==Yt.IMAGE:p=g===Yt.TEXT||g===Yt.IMAGE}u.applyStyleToContext(r,n,p,a),a.prevObject=n}f&&(r.beginPath(),f(r,n.parsedStyle),s!==Yt.LINE&&s!==Yt.PATH&&s!==Yt.POLYLINE&&r.closePath()),u&&u.drawToContext(r,n,om(this,Hl)[Hl],this,o),c&&r.restore(),n.dirty(!1)}},{key:"renderDisplayObject",value:function(n,r,i,a,o){var s=n.nodeName,l=a.restoreStack[a.restoreStack.length-1];l&&!(n.compareDocumentPosition(l)&Ws.DOCUMENT_POSITION_CONTAINS)&&(r.restore(),a.restoreStack.pop());var c=this.context.styleRendererFactory[s],u=this.pathGeneratorFactory[s],f=n.parsedStyle.clipPath;if(f){this.applyWorldTransform(r,f);var h=this.pathGeneratorFactory[f.nodeName];h&&(r.save(),a.restoreStack.push(n),r.beginPath(),h(r,f.parsedStyle),r.closePath(),r.clip())}c&&(this.applyWorldTransform(r,n),r.save(),this.applyAttributesToContext(r,n)),u&&(r.beginPath(),u(r,n.parsedStyle),s!==Yt.LINE&&s!==Yt.PATH&&s!==Yt.POLYLINE&&r.closePath()),c&&(c.render(r,n.parsedStyle,n,i,this,o),r.restore()),n.dirty(!1)}},{key:"applyAttributesToContext",value:function(n,r){var i=r.parsedStyle,a=i.stroke,o=i.fill,s=i.opacity,l=i.lineDash,c=i.lineDashOffset;l&&n.setLineDash(l),Kn(c)||(n.lineDashOffset=c),Kn(s)||(n.globalAlpha*=s),!Kn(a)&&!Array.isArray(a)&&!a.isNone&&(n.strokeStyle=r.attributes.stroke),!Kn(o)&&!Array.isArray(o)&&!o.isNone&&(n.fillStyle=r.attributes.fill)}},{key:"convertAABB2Rect",value:function(n){var r=n.getMin(),i=n.getMax(),a=Math.floor(r[0]),o=Math.floor(r[1]),s=Math.ceil(i[0]),l=Math.ceil(i[1]),c=s-a,u=l-o;return{x:a,y:o,width:c,height:u}}},{key:"mergeDirtyAABBs",value:function(n){var r=new cs;return n.forEach(function(i){var a=i.getRenderBounds();r.add(a);var o=i.renderable.dirtyRenderBounds;o&&r.add(o)}),r}},{key:"searchDirtyObjects",value:function(n){var r=n.getMin(),i=ir(r,2),a=i[0],o=i[1],s=n.getMax(),l=ir(s,2),c=l[0],u=l[1],f=this.rBush.search({minX:a,minY:o,maxX:c,maxY:u});return f.map(function(h){var d=h.displayObject;return d})}},{key:"saveDirtyAABB",value:function(n){var r=n.renderable;r.dirtyRenderBounds||(r.dirtyRenderBounds=new cs);var i=n.getRenderBounds();i&&r.dirtyRenderBounds.update(i.center,i.halfExtents)}},{key:"applyWorldTransform",value:function(n,r,i){i?(Ty(this.tmpMat4,r.getLocalTransform()),qa(this.tmpMat4,i,this.tmpMat4),qa(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Ty(this.tmpMat4,r.getWorldTransform()),qa(this.tmpMat4,this.vpMatrix,this.tmpMat4)),n.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var n=new cs,r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.forEach(function(o){n.add(o)}),n}}])})();tNe.tag="CanvasRenderer";function qD(t,e,n,r,i,a,o){var s,l;if(t.image.nodeName==="rect"){var c=t.image.parsedStyle,u=c.width,f=c.height;l=r.contextService.getDPR();var h=r.config.offscreenCanvas;s=a.offscreenCanvasCreator.getOrCreateCanvas(h),s.width=u*l,s.height=f*l;var d=a.offscreenCanvasCreator.getOrCreateContext(h),p={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach(function(v){i.renderDisplayObject(v,d,r,p,a)}),p.restoreStack.forEach(function(){d.restore()})}var g=o.getOrCreatePatternSync(e,t,n,s,l,e.getGeometryBounds().min,function(){e.dirty(),r.renderingService.dirtify()});return g}function ZD(t,e,n,r){var i;if(t.type===b_.LinearGradient||t.type===b_.RadialGradient){var a=e.getGeometryBounds(),o=a&&a.halfExtents[0]*2||1,s=a&&a.halfExtents[1]*2||1,l=a&&a.min||[0,0];i=r.getOrCreateGradient(ze(ze({type:t.type},t.value),{},{min:l,width:o,height:s}),n)}return i}var DI=["shadowBlur","shadowOffsetX","shadowOffsetY"],Tle=["lineCap","lineJoin","miterLimit"],sc={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},Ale={};function rl(t,e,n,r){var i=r.has(e)?r.get(e):sc[e];return i!==n&&(e==="lineDash"?t.setLineDash(n):t[e]=n,r.set(e,n)),i}var clt=(function(){function t(e){it(this,t),this.imagePool=e}return at(t,[{key:"applyAttributesToContext",value:function(n,r){}},{key:"render",value:function(n,r,i,a,o,s){}},{key:"applyCommonStyleToContext",value:function(n,r,i,a){var o=i?Ale:a.prevObject.parsedStyle,s=r.parsedStyle;(i||s.opacity!==o.opacity)&&rl(n,"globalAlpha",Kn(s.opacity)?sc.globalAlpha:s.opacity,a.currentContext),(i||s.blend!==o.blend)&&rl(n,"globalCompositeOperation",Kn(s.blend)?sc.globalCompositeOperation:s.blend,a.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(n,r,i,a){var o=i?Ale:a.prevObject.parsedStyle,s=r.parsedStyle,l=s.lineWidth,c=l===void 0?sc.lineWidth:l,u=s.fill&&!s.fill.isNone,f=s.stroke&&!s.stroke.isNone&&c>0;if(f){if(i||r.attributes.stroke!==a.prevObject.attributes.stroke){var h=!Kn(s.stroke)&&!Array.isArray(s.stroke)&&!s.stroke.isNone?r.attributes.stroke:sc.strokeStyle;rl(n,"strokeStyle",h,a.currentContext)}(i||s.lineWidth!==o.lineWidth)&&rl(n,"lineWidth",Kn(s.lineWidth)?sc.lineWidth:s.lineWidth,a.currentContext),(i||s.lineDash!==o.lineDash)&&rl(n,"lineDash",s.lineDash||sc.lineDash,a.currentContext),(i||s.lineDashOffset!==o.lineDashOffset)&&rl(n,"lineDashOffset",Kn(s.lineDashOffset)?sc.lineDashOffset:s.lineDashOffset,a.currentContext);for(var d=0;d<Tle.length;d++){var p=Tle[d];(i||s[p]!==o[p])&&rl(n,p,Kn(s[p])?sc[p]:s[p],a.currentContext)}}if(u&&(i||r.attributes.fill!==a.prevObject.attributes.fill)){var g=!Kn(s.fill)&&!Array.isArray(s.fill)&&!s.fill.isNone?r.attributes.fill:sc.fillStyle;rl(n,"fillStyle",g,a.currentContext)}}},{key:"applyStyleToContext",value:function(n,r,i,a){var o=r.nodeName;this.applyCommonStyleToContext(n,r,i,a),o===Yt.IMAGE||this.applyStrokeFillStyleToContext(n,r,i,a)}},{key:"applyShadowAndFilterStyleToContext",value:function(n,r,i,a){var o=r.parsedStyle;if(i){rl(n,"shadowColor",o.shadowColor.toString(),a.currentContext);for(var s=0;s<DI.length;s++){var l=DI[s];rl(n,l,o[l]||sc[l],a.currentContext)}}o.filter&&o.filter.length&&rl(n,"filter",r.attributes.filter,a.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(n,r,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(r){rl(n,"shadowColor",sc.shadowColor,a.currentContext);for(var s=0;s<DI.length;s++){var l=DI[s];rl(n,l,sc[l],a.currentContext)}}if(i)if(r&&o){var c=n.filter;!Kn(c)&&c.indexOf("drop-shadow")>-1&&rl(n,"filter",c.replace(/drop-shadow\([^)]*\)/,"").trim()||sc.filter,a.currentContext)}else rl(n,"filter",sc.filter,a.currentContext)}},{key:"fillToContext",value:function(n,r,i,a,o){var s=this,l=r.parsedStyle,c=l.fill,u=l.fillRule,f=null;if(Array.isArray(c)&&c.length>0)c.forEach(function(d){var p=rl(n,"fillStyle",ZD(d,r,n,s.imagePool),i.currentContext);f=f??p,u?n.fill(u):n.fill()});else{if(bx(c)){var h=qD(c,r,n,r.ownerDocument.defaultView.context,a,o,this.imagePool);h&&(n.fillStyle=h,f=!0)}u?n.fill(u):n.fill()}f!==null&&rl(n,"fillStyle",f,i.currentContext)}},{key:"strokeToContext",value:function(n,r,i,a,o){var s=this,l=r.parsedStyle.stroke,c=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(h){var d=rl(n,"strokeStyle",ZD(h,r,n,s.imagePool),i.currentContext);c=c??d,n.stroke()});else{if(bx(l)){var u=qD(l,r,n,r.ownerDocument.defaultView.context,a,o,this.imagePool);if(u){var f=rl(n,"strokeStyle",u,i.currentContext);c=c??f}}n.stroke()}c!==null&&rl(n,"strokeStyle",c,i.currentContext)}},{key:"drawToContext",value:function(n,r,i,a,o){var s,l=r.nodeName,c=r.parsedStyle,u=c.opacity,f=u===void 0?sc.globalAlpha:u,h=c.fillOpacity,d=h===void 0?sc.fillOpacity:h,p=c.strokeOpacity,g=p===void 0?sc.strokeOpacity:p,v=c.lineWidth,y=v===void 0?sc.lineWidth:v,_=c.fill&&!c.fill.isNone,E=c.stroke&&!c.stroke.isNone&&y>0;if(!(!_&&!E)){var x=!Kn(c.shadowColor)&&c.shadowBlur>0,T=c.shadowType==="inner",S=((s=c.fill)===null||s===void 0?void 0:s.alpha)===0,w=!!(c.filter&&c.filter.length),C=x&&E&&(l===Yt.PATH||l===Yt.LINE||l===Yt.POLYLINE||S||T),D=null;if(_){C||this.applyShadowAndFilterStyleToContext(n,r,x,i);var L=f*d;D=rl(n,"globalAlpha",L,i.currentContext),this.fillToContext(n,r,i,a,o),C||this.clearShadowAndFilterStyleForContext(n,x,w,i)}if(E){var B=!1,I=f*g,U=rl(n,"globalAlpha",I,i.currentContext);if(D=_?D:U,C&&(this.applyShadowAndFilterStyleToContext(n,r,x,i),B=!0,T)){var $=n.globalCompositeOperation;n.globalCompositeOperation="source-atop",this.strokeToContext(n,r,i,a,o),n.globalCompositeOperation=$,this.clearShadowAndFilterStyleForContext(n,x,w,i,!0)}this.strokeToContext(n,r,i,a,o),B&&this.clearShadowAndFilterStyleForContext(n,x,w,i)}D!==null&&rl(n,"globalAlpha",D,i.currentContext)}}}])})(),_ee=(function(t){function e(){return it(this,e),Ar(this,e,arguments)}return Sr(e,t),at(e,[{key:"render",value:function(r,i,a,o,s,l){var c=i.fill,u=i.fillRule,f=i.opacity,h=f===void 0?1:f,d=i.fillOpacity,p=d===void 0?1:d,g=i.stroke,v=i.strokeOpacity,y=v===void 0?1:v,_=i.lineWidth,E=_===void 0?1:_,x=i.lineCap,T=i.lineJoin,S=i.shadowType,w=i.shadowColor,C=i.shadowBlur,D=i.filter,L=i.miterLimit,B=c&&!c.isNone,I=g&&!g.isNone&&E>0,U=c?.alpha===0,$=!!(D&&D.length),X=!Kn(w)&&C>0,N=a.nodeName,M=S==="inner",k=I&&X&&(N===Yt.PATH||N===Yt.LINE||N===Yt.POLYLINE||U||M);B&&(r.globalAlpha=h*p,k||KD(a,r,X),nNe(r,a,c,u,o,s,l,this.imagePool),k||this.clearShadowAndFilter(r,$,X)),I&&(r.globalAlpha=h*y,r.lineWidth=E,Kn(L)||(r.miterLimit=L),Kn(x)||(r.lineCap=x),Kn(T)||(r.lineJoin=T),k&&(M&&(r.globalCompositeOperation="source-atop"),KD(a,r,!0),M&&(TX(r,a,g,o,s,l,this.imagePool),r.globalCompositeOperation=sc.globalCompositeOperation,this.clearShadowAndFilter(r,$,!0))),TX(r,a,g,o,s,l,this.imagePool))}},{key:"clearShadowAndFilter",value:function(r,i,a){if(a&&(r.shadowColor="transparent",r.shadowBlur=0),i){var o=r.filter;!Kn(o)&&o.indexOf("drop-shadow")>-1&&(r.filter=o.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])})(clt);function KD(t,e,n){var r=t.parsedStyle,i=r.filter,a=r.shadowColor,o=r.shadowBlur,s=r.shadowOffsetX,l=r.shadowOffsetY;i&&i.length&&(e.filter=t.style.filter),n&&(e.shadowColor=a.toString(),e.shadowBlur=o||0,e.shadowOffsetX=s||0,e.shadowOffsetY=l||0)}function nNe(t,e,n,r,i,a,o,s){var l=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(n)?n.forEach(function(c){t.fillStyle=ZD(c,e,t,s),l||(r?t.fill(r):t.fill())}):(bx(n)&&(t.fillStyle=qD(n,e,t,i,a,o,s)),l||(r?t.fill(r):t.fill()))}function TX(t,e,n,r,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(n)?n.forEach(function(l){t.strokeStyle=ZD(l,e,t,o),s||t.stroke()}):(bx(n)&&(t.strokeStyle=qD(n,e,t,r,i,a,o)),s||t.stroke())}function ult(t,e){var n=ir(t,4),r=n[0],i=n[1],a=n[2],o=n[3],s=ir(e,4),l=s[0],c=s[1],u=s[2],f=s[3],h=Math.max(r,l),d=Math.max(i,c),p=Math.min(r+a,l+u),g=Math.min(i+o,c+f);return p<=h||g<=d?null:[h,d,p-h,g-d]}function flt(t,e){var n=ka(Pr(),[t[0],t[1],0],e),r=ka(Pr(),[t[0]+t[2],t[1],0],e),i=ka(Pr(),[t[0],t[1]+t[3],0],e),a=ka(Pr(),[t[0]+t[2],t[1]+t[3],0],e);return[Math.min(n[0],r[0],i[0],a[0]),Math.min(n[1],r[1],i[1],a[1]),Math.max(n[0],r[0],i[0],a[0])-Math.min(n[0],r[0],i[0],a[0]),Math.max(n[1],r[1],i[1],a[1])-Math.min(n[1],r[1],i[1],a[1])]}var hlt=(function(t){function e(){return it(this,e),Ar(this,e,arguments)}return Sr(e,t),at(e,[{key:"renderDownSampled",value:function(r,i,a,o){var s=o.src,l=o.imageCache;if(!l.downSampled){this.imagePool.createDownSampledImage(s,a).then(function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(c){console.error(c)});return}r.drawImage(l.downSampled,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}},{key:"renderTile",value:function(r,i,a,o){var s=o.src,l=o.imageCache,c=o.imageRect,u=o.drawRect,f=l.size,h=r.getTransform(),d=h.a,p=h.b,g=h.c,v=h.d,y=h.e,_=h.f;if(r.resetTransform(),!(l!=null&&l.gridSize)){this.imagePool.createImageTiles(s,[],function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirtify())},a).catch(function(X){console.error(X)});return}for(var E=[f[0]/c[2],f[1]/c[3]],x=[l.tileSize[0]/E[0],l.tileSize[1]/E[1]],T=[Math.floor((u[0]-c[0])/x[0]),Math.ceil((u[0]+u[2]-c[0])/x[0])],S=T[0],w=T[1],C=[Math.floor((u[1]-c[1])/x[1]),Math.ceil((u[1]+u[3]-c[1])/x[1])],D=C[0],L=C[1],B=D;B<=L;B++)for(var I=S;I<=w;I++){var U=l.tiles[B][I];if(U){var $=[Math.floor(c[0]+U.tileX*x[0]),Math.floor(c[1]+U.tileY*x[1]),Math.ceil(x[0]),Math.ceil(x[1])];r.drawImage(U.data,$[0],$[1],$[2],$[3])}}r.setTransform(d,p,g,v,y,_)}},{key:"render",value:function(r,i,a){var o=i.x,s=o===void 0?0:o,l=i.y,c=l===void 0?0:l,u=i.width,f=i.height,h=i.src,d=i.shadowColor,p=i.shadowBlur,g=this.imagePool.getImageSync(h,a),v=g?.img,y=u,_=f;if(v){y||(y=v.width),_||(_=v.height);var E=!Kn(d)&&p>0;KD(a,r,E);try{var x=a.ownerDocument.defaultView.getContextService().getDomElement(),T=x.width,S=x.height,w=r.getTransform(),C=w.a,D=w.b,L=w.c,B=w.d,I=w.e,U=w.f,$=uQ(C,L,0,0,D,B,0,0,0,0,1,0,I,U,0,1),X=flt([s,c,y,_],$),N=ult([0,0,T,S],X);if(!N)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){e.renderFull(r,i,a,{image:v,drawRect:[s,c,y,_]});return}var M=X[2]/g.size[0];if(M<(g.downSamplingRate||.5)){this.renderDownSampled(r,i,a,{src:h,imageCache:g,drawRect:[s,c,y,_]});return}if(!yee.isSupportTile){e.renderFull(r,i,a,{image:v,drawRect:[s,c,y,_]});return}this.renderTile(r,i,a,{src:h,imageCache:g,imageRect:X,drawRect:N})}catch{}}}},{key:"drawToContext",value:function(r,i,a,o,s){this.render(r,i.parsedStyle,i)}}],[{key:"renderFull",value:function(r,i,a,o){r.drawImage(o.image,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}}])})(_ee),dlt=(function(t){function e(){return it(this,e),Ar(this,e,arguments)}return Sr(e,t),at(e,[{key:"render",value:function(r,i,a,o,s,l){a.getBounds();var c=i.lineWidth,u=c===void 0?1:c,f=i.textAlign,h=f===void 0?"start":f,d=i.textBaseline,p=d===void 0?"alphabetic":d,g=i.lineJoin,v=g===void 0?"miter":g,y=i.miterLimit,_=y===void 0?10:y,E=i.letterSpacing,x=E===void 0?0:E,T=i.stroke,S=i.fill,w=i.fillRule,C=i.fillOpacity,D=C===void 0?1:C,L=i.strokeOpacity,B=L===void 0?1:L,I=i.opacity,U=I===void 0?1:I,$=i.metrics,X=i.x,N=X===void 0?0:X,M=i.y,k=M===void 0?0:M,z=i.dx,j=i.dy,V=i.shadowColor,Q=i.shadowBlur,ee=$.font,re=$.lines,ne=$.height,le=$.lineHeight,ue=$.lineMetrics;r.font=ee,r.lineWidth=u,r.textAlign=h==="middle"?"center":h;var ve=p;ve==="alphabetic"&&(ve="bottom"),r.lineJoin=v,Kn(_)||(r.miterLimit=_);var Se=k;p==="middle"?Se+=-ne/2-le/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?Se+=-ne:(p==="top"||p==="hanging")&&(Se+=-le);var Re=N+(z||0);Se+=j||0,re.length===1&&(ve==="bottom"?(ve="middle",Se-=.5*ne):ve==="top"&&(ve="middle",Se+=.5*ne)),r.textBaseline=ve;var Xe=!Kn(V)&&Q>0;KD(a,r,Xe);for(var Le=0;Le<re.length;Le++){var Lt=u/2+Re;Se+=le,!Kn(T)&&!T.isNone&&u&&this.drawLetterSpacing(r,a,re[Le],ue[Le],h,Lt,Se,x,S,w,D,T,B,U,!0,o,s,l),Kn(S)||this.drawLetterSpacing(r,a,re[Le],ue[Le],h,Lt,Se,x,S,w,D,T,B,U,!1,o,s,l)}}},{key:"drawLetterSpacing",value:function(r,i,a,o,s,l,c,u,f,h,d,p,g,v,y,_,E,x){if(u===0){y?this.strokeText(r,i,a,l,c,p,g,_,E,x):this.fillText(r,i,a,l,c,f,h,d,v,_,E,x);return}var T=r.textAlign;r.textAlign="left";var S=l;s==="center"||s==="middle"?S=l-o.width/2:(s==="right"||s==="end")&&(S=l-o.width);for(var w=Array.from(a),C=r.measureText(a).width,D=0,L=0;L<w.length;++L){var B=w[L];y?this.strokeText(r,i,B,S,c,p,g,_,E,x):this.fillText(r,i,B,S,c,f,h,d,v,_,E,x),D=r.measureText(a.substring(L+1)).width,S+=C-D+u,C=D}r.textAlign=T}},{key:"fillText",value:function(r,i,a,o,s,l,c,u,f,h,d,p){nNe(r,i,l,c,h,d,p,this.imagePool,!0);var g,v=!Kn(u)&&u!==1;v&&(g=r.globalAlpha,r.globalAlpha=u*f),r.fillText(a,o,s),v&&(r.globalAlpha=g)}},{key:"strokeText",value:function(r,i,a,o,s,l,c,u,f,h){TX(r,i,l,u,f,h,this.imagePool,!0);var d,p=!Kn(c)&&c!==1;p&&(d=r.globalAlpha,r.globalAlpha=c),r.strokeText(a,o,s),p&&(r.globalAlpha=d)}},{key:"drawToContext",value:function(r,i,a,o,s){this.render(r,i.parsedStyle,i,i.ownerDocument.defaultView.context,o,s)}}])})(_ee),plt=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),n=Ar(this,e),n.name="canvas-renderer",n.options=r,n}return Sr(e,t),at(e,[{key:"init",value:function(){var r,i=ze({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),a=this.context.imagePool,o=new _ee(a),s=(r={},Z(Z(Z(Z(Z(Z(Z(Z(Z(Z(r,Yt.CIRCLE,o),Yt.ELLIPSE,o),Yt.RECT,o),Yt.IMAGE,new hlt(a)),Yt.TEXT,new dlt(a)),Yt.LINE,o),Yt.POLYLINE,o),Yt.POLYGON,o),Yt.PATH,o),Yt.GROUP,void 0),Z(Z(Z(r,Yt.HTML,void 0),Yt.MESH,void 0),Yt.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=s,this.context.styleRendererFactory=s,this.addRenderingPlugin(new tNe(i))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])})(ib);/*!
 * @antv/g-plugin-dom-interaction
 * @description A G plugin
 * @version 2.1.27
 * @date 7/30/2025, 1:35:38 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var rNe=(function(){function t(){it(this,t)}return at(t,[{key:"apply",value:function(n,r){var i=this,a=n.renderingService,o=n.renderingContext,s=n.config;this.context=n;var l=o.root.ownerDocument.defaultView,c=function(C){a.hooks.pointerMove.call(C)},u=function(C){a.hooks.pointerUp.call(C)},f=function(C){a.hooks.pointerDown.call(C)},h=function(C){a.hooks.pointerOver.call(C)},d=function(C){a.hooks.pointerOut.call(C)},p=function(C){a.hooks.pointerCancel.call(C)},g=function(C){a.hooks.pointerWheel.call(C)},v=function(C){a.hooks.click.call(C)},y=function(C){r.globalThis.document.addEventListener("pointermove",c,!0),C.addEventListener("pointerdown",f,!0),C.addEventListener("pointerleave",d,!0),C.addEventListener("pointerover",h,!0),r.globalThis.addEventListener("pointerup",u,!0),r.globalThis.addEventListener("pointercancel",p,!0)},_=function(C){C.addEventListener("touchstart",f,!0),C.addEventListener("touchend",u,!0),C.addEventListener("touchmove",c,!0),C.addEventListener("touchcancel",p,!0)},E=function(C){r.globalThis.document.addEventListener("mousemove",c,!0),C.addEventListener("mousedown",f,!0),C.addEventListener("mouseout",d,!0),C.addEventListener("mouseover",h,!0),r.globalThis.addEventListener("mouseup",u,!0)},x=function(C){r.globalThis.document.removeEventListener("pointermove",c,!0),C.removeEventListener("pointerdown",f,!0),C.removeEventListener("pointerleave",d,!0),C.removeEventListener("pointerover",h,!0),r.globalThis.removeEventListener("pointerup",u,!0),r.globalThis.removeEventListener("pointercancel",p,!0)},T=function(C){C.removeEventListener("touchstart",f,!0),C.removeEventListener("touchend",u,!0),C.removeEventListener("touchmove",c,!0),C.removeEventListener("touchcancel",p,!0)},S=function(C){r.globalThis.document.removeEventListener("mousemove",c,!0),C.removeEventListener("mousedown",f,!0),C.removeEventListener("mouseout",d,!0),C.removeEventListener("mouseover",h,!0),r.globalThis.removeEventListener("mouseup",u,!0)};a.hooks.init.tap(t.tag,function(){var w=i.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(w.style.msContentZooming="none",w.style.msTouchAction="none"):l.supportsPointerEvents&&(w.style.touchAction="none"),l.supportsPointerEvents?y(w):E(w),l.supportsTouchEvents&&_(w),s.useNativeClickEvent&&w.addEventListener("click",v,!0),w.addEventListener("wheel",g,{passive:!0,capture:!0})}),a.hooks.destroy.tap(t.tag,function(){var w=i.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(w.style.msContentZooming="",w.style.msTouchAction=""):l.supportsPointerEvents&&(w.style.touchAction=""),l.supportsPointerEvents?x(w):S(w),l.supportsTouchEvents&&T(w),s.useNativeClickEvent&&w.removeEventListener("click",v,!0),w.removeEventListener("wheel",g,!0)})}}])})();rNe.tag="DOMInteraction";var glt=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.name="dom-interaction",n}return Sr(e,t),at(e,[{key:"init",value:function(){this.addRenderingPlugin(new rNe)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])})(ib);/*!
 * @antv/g-plugin-html-renderer
 * @description A G plugin for rendering HTML
 * @version 2.1.27
 * @date 7/30/2025, 1:35:48 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var vlt="g-canvas-camera",iNe=(function(){function t(){it(this,t),this.displayObjectHTMLElementMap=new WeakMap}return at(t,[{key:"joinTransformMatrix",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([n[0],n[1],n[4],n[5],n[12]+r[0],n[13]+r[1]].join(","),")")}},{key:"apply",value:function(n,r){var i=this,a=n.camera,o=n.renderingContext,s=n.renderingService;this.context=n;var l=o.root.ownerDocument.defaultView,c=l.context.eventService.nativeHTMLMap,u=function(y,_){_.style.transform=i.joinTransformMatrix(y.getWorldTransform(),y.getOrigin())},f=function(y){var _=y.target;if(_.nodeName===Yt.HTML){i.$camera||(i.$camera=i.createCamera(a));var E=i.getOrCreateEl(_);i.$camera.appendChild(E),Object.keys(_.attributes).forEach(function(x){i.updateAttribute(x,_)}),u(_,E),c.set(E,_)}},h=function(y){var _=y.target;if(_.nodeName===Yt.HTML&&i.$camera){var E=i.getOrCreateEl(_);E&&(E.remove(),c.delete(E))}},d=function(y){var _=y.target;if(_.nodeName===Yt.HTML){var E=y.attrName;i.updateAttribute(E,_)}},p=function(y){var _=y.target,E=_.nodeName===Yt.FRAGMENT?_.childNodes:[_];E.forEach(function(x){if(x.nodeName===Yt.HTML){var T=i.getOrCreateEl(x);u(x,T)}})},g=function(){if(i.$camera){var y=i.context.config,_=y.width,E=y.height;i.$camera.parentElement.style.width="".concat(_||0,"px"),i.$camera.parentElement.style.height="".concat(E||0,"px")}};s.hooks.init.tap(t.tag,function(){l.addEventListener(Ed.RESIZE,g),l.addEventListener(ta.MOUNTED,f),l.addEventListener(ta.UNMOUNTED,h),l.addEventListener(ta.ATTR_MODIFIED,d),l.addEventListener(ta.BOUNDS_CHANGED,p)}),s.hooks.endFrame.tap(t.tag,function(){i.$camera&&o.renderReasons.has(_A.CAMERA_CHANGED)&&(i.$camera.style.transform=i.joinTransformMatrix(a.getOrthoMatrix()))}),s.hooks.destroy.tap(t.tag,function(){i.$camera&&i.$camera.remove(),l.removeEventListener(Ed.RESIZE,g),l.removeEventListener(ta.MOUNTED,f),l.removeEventListener(ta.UNMOUNTED,h),l.removeEventListener(ta.ATTR_MODIFIED,d),l.removeEventListener(ta.BOUNDS_CHANGED,p)})}},{key:"createCamera",value:function(n){var r=this.context.config,i=r.document,a=r.width,o=r.height,s=this.context.contextService.getDomElement(),l=s.parentNode;if(l){var c=vlt,u=l.querySelector("#".concat(c));if(!u){var f=(i||document).createElement("div");f.style.overflow="hidden",f.style.pointerEvents="none",f.style.position="absolute",f.style.left="0px",f.style.top="0px",f.style.width="".concat(a||0,"px"),f.style.height="".concat(o||0,"px");var h=(i||document).createElement("div");u=h,h.id=c,h.style.position="absolute",h.style.left="".concat(s.offsetLeft||0,"px"),h.style.top="".concat(s.offsetTop||0,"px"),h.style.transformOrigin="left top",h.style.transform=this.joinTransformMatrix(n.getOrthoMatrix()),h.style.pointerEvents="none",h.style.width="100%",h.style.height="100%",f.appendChild(h),l.appendChild(f)}return u}return null}},{key:"getOrCreateEl",value:function(n){var r=this.context.config.document,i=this.displayObjectHTMLElementMap.get(n);return i||(i=(r||document).createElement("div"),n.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(n,i),n.id&&(i.id=n.id),n.name&&i.setAttribute("name",n.name),n.className&&(i.className=n.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(n.getWorldTransform(),n.getOrigin())),i}},{key:"updateAttribute",value:function(n,r){var i=this.getOrCreateEl(r);switch(n){case"innerHTML":var a=r.parsedStyle.innerHTML;$i(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(r.parsedStyle.x,"px");break;case"y":i.style.top="".concat(r.parsedStyle.y,"px");break;case"transformOrigin":var o=r.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(o[0].buildCSSText(null,null,"")," ").concat(o[1].buildCSSText(null,null,""));break;case"width":var s=r.parsedStyle.width;i.style.width=Ln(s)?"".concat(s,"px"):s.toString();break;case"height":var l=r.parsedStyle.height;i.style.height=Ln(l)?"".concat(l,"px"):l.toString();break;case"zIndex":var c=r.parsedStyle.zIndex;i.style["z-index"]="".concat(c);break;case"visibility":var u=r.parsedStyle.visibility;i.style.visibility=u;break;case"pointerEvents":var f=r.parsedStyle.pointerEvents,h=f===void 0?"auto":f;i.style.pointerEvents=h;break;case"opacity":var d=r.parsedStyle.opacity;i.style.opacity="".concat(d);break;case"fill":var p=r.parsedStyle.fill,g="";LD(p)?p.isNone?g="transparent":g=r.getAttribute("fill"):Array.isArray(p)?g=r.getAttribute("fill"):bx(p),i.style.background=g;break;case"stroke":var v=r.parsedStyle.stroke,y="";LD(v)?v.isNone?y="transparent":y=r.getAttribute("stroke"):Array.isArray(v)?y=r.getAttribute("stroke"):bx(v),i.style["border-color"]=y,i.style["border-style"]="solid";break;case"lineWidth":var _=r.parsedStyle.lineWidth;i.style["border-width"]="".concat(_||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var E=r.style.filter;i.style.filter=E;break;default:!Kn(r.style[n])&&r.style[n]!==""&&(i.style[n]=r.style[n])}}}])})();iNe.tag="HTMLRendering";var mlt=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.name="html-renderer",n}return Sr(e,t),at(e,[{key:"init",value:function(){this.addRenderingPlugin(new iNe)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])})(ib);/*!
 * @antv/g-canvas
 * @description A renderer implemented by Canvas 2D API
 * @version 2.0.48
 * @date 7/30/2025, 1:38:18 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var ylt=(function(){function t(e){it(this,t),this.renderingContext=e.renderingContext,this.canvasConfig=e.config}return at(t,[{key:"init",value:function(){var n=this.canvasConfig,r=n.container,i=n.canvas;if(i)this.$canvas=i,r&&i.parentElement!==r&&r.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(r&&(this.$container=$i(r)?document.getElementById(r):r,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(n,r){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*n,this.$canvas.height=this.dpr*r,RQe(this.$canvas,n,r)),this.renderingContext.renderReasons.add(_A.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(n){this.$container&&this.$container.style&&(this.$container.style.cursor=n)}},{key:"toDataURL",value:(function(){var e=kt(Zs().mark(function r(){var i,a,o,s=arguments;return Zs().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=s.length>0&&s[0]!==void 0?s[0]:{},a=i.type,o=i.encoderOptions,l.abrupt("return",this.context.canvas.toDataURL(a,o));case 1:case"end":return l.stop()}},r,this)}));function n(){return e.apply(this,arguments)}return n})()}])})(),_lt=(function(t){function e(){var n;it(this,e);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return n=Ar(this,e,[].concat(i)),n.name="canvas-context-register",n}return Sr(e,t),at(e,[{key:"init",value:function(){this.context.ContextService=ylt}},{key:"destroy",value:function(){delete this.context.ContextService}}])})(ib),xx=(function(t){function e(n){var r;return it(this,e),r=Ar(this,e,[n]),r.registerPlugin(new _lt),r.registerPlugin(new llt),r.registerPlugin(new Ust),r.registerPlugin(new plt),r.registerPlugin(new glt),r.registerPlugin(new ilt),r.registerPlugin(new mlt),r}return Sr(e,t),at(e)})(wZe);/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.0.38
 * @date 7/30/2025, 1:35:41 PM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var aNe=(function(){function t(e){it(this,t),this.dragndropPluginOptions=e}return at(t,[{key:"apply",value:function(n){var r=this,i=n.renderingService,a=n.renderingContext,o=a.root.ownerDocument,s=o.defaultView,l=function(u){var f=u.target,h=f===o,d=h&&r.dragndropPluginOptions.isDocumentDraggable?o:f.closest&&f.closest("[draggable=true]");if(d){var p=!1,g=u.timeStamp,v=[u.clientX,u.clientY],y=null,_=[u.clientX,u.clientY],E=(function(){var T=kt(Zs().mark(function S(w){var C,D,L,B,I,U;return Zs().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(p){$.next=2;break}if(C=w.timeStamp-g,D=Rh([w.clientX,w.clientY],v),!(C<=r.dragndropPluginOptions.dragstartTimeThreshold||D<=r.dragndropPluginOptions.dragstartDistanceThreshold)){$.next=1;break}return $.abrupt("return");case 1:w.type="dragstart",d.dispatchEvent(w),p=!0;case 2:if(w.type="drag",w.dx=w.clientX-_[0],w.dy=w.clientY-_[1],d.dispatchEvent(w),_=[w.clientX,w.clientY],h){$.next=4;break}return L=r.dragndropPluginOptions.overlap==="pointer"?[w.canvasX,w.canvasY]:f.getBounds().center,$.next=3,o.elementsFromPoint(L[0],L[1]);case 3:B=$.sent,I=B[B.indexOf(f)+1],U=I?.closest("[droppable=true]")||(r.dragndropPluginOptions.isDocumentDroppable?o:null),y!==U&&(y&&(w.type="dragleave",w.target=y,y.dispatchEvent(w)),U&&(w.type="dragenter",w.target=U,U.dispatchEvent(w)),y=U,y&&(w.type="dragover",w.target=y,y.dispatchEvent(w)));case 4:case"end":return $.stop()}},S)}));return function(w){return T.apply(this,arguments)}})();s.addEventListener("pointermove",E);var x=function(S){if(p){S.detail={preventClick:!0};var w=S.clone();y&&(w.type="drop",w.target=y,y.dispatchEvent(w)),w.type="dragend",d.dispatchEvent(w),p=!1}s.removeEventListener("pointermove",E)};f.addEventListener("pointerup",x,{once:!0}),f.addEventListener("pointerupoutside",x,{once:!0})}};i.hooks.init.tap(t.tag,function(){s.addEventListener("pointerdown",l)}),i.hooks.destroy.tap(t.tag,function(){s.removeEventListener("pointerdown",l)})}}])})();aNe.tag="Dragndrop";var bee=(function(t){function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return it(this,e),n=Ar(this,e),n.name="dragndrop",n.options=r,n}return Sr(e,t),at(e,[{key:"init",value:function(){this.addRenderingPlugin(new aNe(ze({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(r){Object.assign(this.plugins[0].dragndropPluginOptions,r)}}])})(ib),blt="*",Jm=(function(){function t(){this._events={}}return t.prototype.on=function(e,n,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:n,once:!!r}),this},t.prototype.once=function(e,n){return this.on(e,n,!0)},t.prototype.emit=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=this._events[e]||[],o=this._events[blt]||[],s=function(l){for(var c=l.length,u=0;u<c;u++)if(l[u]){var f=l[u],h=f.callback,d=f.once;d&&(l.splice(u,1),l.length===0&&delete n._events[e],c--,u--),h.apply(n,r)}};s(a),s(o)},t.prototype.off=function(e,n){if(!e)this._events={};else if(!n)delete this._events[e];else{for(var r=this._events[e]||[],i=r.length,a=0;a<i;a++)r[a].callback===n&&(r.splice(a,1),i--,a--);r.length===0&&delete this._events[e]}return this},t.prototype.getEvents=function(){return this._events},t})();const ao={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"},Elt={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};class cc extends Error{constructor(e,n,r){super(e),this.position=n,this.token=r,this.name="ExpressionError"}}var Yi;(function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.NULL=3]="NULL",t[t.IDENTIFIER=4]="IDENTIFIER",t[t.OPERATOR=5]="OPERATOR",t[t.FUNCTION=6]="FUNCTION",t[t.DOT=7]="DOT",t[t.BRACKET_LEFT=8]="BRACKET_LEFT",t[t.BRACKET_RIGHT=9]="BRACKET_RIGHT",t[t.PAREN_LEFT=10]="PAREN_LEFT",t[t.PAREN_RIGHT=11]="PAREN_RIGHT",t[t.COMMA=12]="COMMA",t[t.QUESTION=13]="QUESTION",t[t.COLON=14]="COLON",t[t.DOLLAR=15]="DOLLAR"})(Yi||(Yi={}));const xlt=new Set([32,9,10,13]),Slt=new Set([43,45,42,47,37,33,38,124,61,60,62]),Tlt=new Map([["true",Yi.BOOLEAN],["false",Yi.BOOLEAN],["null",Yi.NULL]]),Y7=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),Alt=new Map([[46,Yi.DOT],[91,Yi.BRACKET_LEFT],[93,Yi.BRACKET_RIGHT],[40,Yi.PAREN_LEFT],[41,Yi.PAREN_RIGHT],[44,Yi.COMMA],[63,Yi.QUESTION],[58,Yi.COLON],[36,Yi.DOLLAR]]),oNe=new Map;for(const[t,e]of Alt.entries())oNe.set(t,{type:e,value:String.fromCharCode(t)});function hC(t){return t>=48&&t<=57}function AX(t){return t>=97&&t<=122||t>=65&&t<=90||t===95}function wle(t){return AX(t)||hC(t)}function wlt(t){return Slt.has(t)}var sl;(function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"})(sl||(sl={}));const Olt=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),Clt={type:sl.Literal,value:null},Rlt={type:sl.Literal,value:!0},Mlt={type:sl.Literal,value:!1},Plt=t=>{let e=0;const n=t.length,r=()=>e>=n?null:t[e],i=()=>t[e++],a=f=>{const h=r();return h!==null&&h.type===f},o=f=>f.type===Yi.OPERATOR?Olt.get(f.value)||-1:f.type===Yi.DOT||f.type===Yi.BRACKET_LEFT?9:f.type===Yi.QUESTION?1:-1,s=f=>{let h,d;if(i().type===Yi.DOT){if(!a(Yi.IDENTIFIER)){const g=r();throw new cc("Expected property name",e,g?g.value:"<end of input>")}const p=i();h={type:sl.Identifier,name:p.value},d=!1}else{if(h=c(0),!a(Yi.BRACKET_RIGHT)){const p=r();throw new cc("Expected closing bracket",e,p?p.value:"<end of input>")}i(),d=!0}return{type:sl.MemberExpression,object:f,property:h,computed:d}},l=()=>{const f=r();if(!f)throw new cc("Unexpected end of input",e,"<end of input>");if(f.type===Yi.OPERATOR&&(f.value==="!"||f.value==="-")){i();const h=l();return{type:sl.UnaryExpression,operator:f.value,argument:h,prefix:!0}}switch(f.type){case Yi.NUMBER:return i(),{type:sl.Literal,value:Number(f.value)};case Yi.STRING:return i(),{type:sl.Literal,value:f.value};case Yi.BOOLEAN:return i(),f.value==="true"?Rlt:Mlt;case Yi.NULL:return i(),Clt;case Yi.IDENTIFIER:return i(),{type:sl.Identifier,name:f.value};case Yi.FUNCTION:return(()=>{const h=i(),d=[];if(!a(Yi.PAREN_LEFT)){const p=r();throw new cc("Expected opening parenthesis after function name",e,p?p.value:"<end of input>")}for(i();;){if(a(Yi.PAREN_RIGHT)){i();break}if(!r()){const g=r();throw new cc("Expected closing parenthesis",e,g?g.value:"<end of input>")}if(d.length>0){if(!a(Yi.COMMA)){const g=r();throw new cc("Expected comma between function arguments",e,g?g.value:"<end of input>")}i()}const p=c(0);d.push(p)}return{type:sl.CallExpression,callee:{type:sl.Identifier,name:h.value},arguments:d}})();case Yi.PAREN_LEFT:{i();const h=c(0);if(!a(Yi.PAREN_RIGHT)){const d=r();throw new cc("Expected closing parenthesis",e,d?d.value:"<end of input>")}return i(),h}default:throw new cc(`Unexpected token: ${f.type}`,e,f.value)}},c=(f=0)=>{let h=l();for(;e<n;){const d=t[e],p=o(d);if(p<=f)break;if(d.type!==Yi.QUESTION)if(d.type!==Yi.OPERATOR){if(d.type!==Yi.DOT&&d.type!==Yi.BRACKET_LEFT)break;h=s(h)}else{i();const g=c(p);h={type:sl.BinaryExpression,operator:d.value,left:h,right:g}}else{i();const g=c(0);if(!a(Yi.COLON)){const y=r();throw new cc("Expected : in conditional expression",e,y?y.value:"<end of input>")}i();const v=c(0);h={type:sl.ConditionalExpression,test:h,consequent:g,alternate:v}}}return h},u=c();return{type:sl.Program,body:u}},Nlt=(t,e,n)=>{let r=e;n&&(r={...e,context:{...e.context,...n}});const i=a=>{switch(a.type){case sl.Literal:return(o=>o.value)(a);case sl.Identifier:return(o=>{if(!(o.name in r.context))throw new cc(`Undefined variable: ${o.name}`);return r.context[o.name]})(a);case sl.MemberExpression:return(o=>{const s=i(o.object);if(s==null)throw new cc("Cannot access property of null or undefined");return s[o.computed?i(o.property):o.property.name]})(a);case sl.CallExpression:return(o=>{const s=r.functions[o.callee.name];if(!s)throw new cc(`Undefined function: ${o.callee.name}`);return s(...o.arguments.map((l=>i(l))))})(a);case sl.BinaryExpression:return(o=>{if(o.operator==="&&"){const c=i(o.left);return c&&i(o.right)}if(o.operator==="||")return i(o.left)||i(o.right);const s=i(o.left),l=i(o.right);switch(o.operator){case"+":return s+l;case"-":return s-l;case"*":return s*l;case"/":return s/l;case"%":return s%l;case"===":return s===l;case"!==":return s!==l;case">":return s>l;case">=":return s>=l;case"<":return s<l;case"<=":return s<=l;default:throw new cc(`Unknown operator: ${o.operator}`)}})(a);case sl.UnaryExpression:return(o=>{const s=i(o.argument);if(o.prefix)switch(o.operator){case"!":return!s;case"-":if(typeof s!="number")throw new cc(`Cannot apply unary - to non-number: ${s}`);return-s;default:throw new cc(`Unknown operator: ${o.operator}`)}throw new cc(`Postfix operators are not supported: ${o.operator}`)})(a);case sl.ConditionalExpression:return(o=>{const s=i(o.test);return i(s?o.consequent:o.alternate)})(a);default:throw new cc(`Evaluation error: Unsupported node type: ${a.type}`)}};return i(t.body)};function Ilt(t){const e=(i=>{const a=i,o=a.length,s=new Array(Math.ceil(o/3));let l=0,c=0;function u(v){const y=c+1;c++;let _="",E=!1;for(;c<o;){const x=a.charCodeAt(c);if(x===v)return E||(_=a.substring(y,c)),c++,{type:Yi.STRING,value:_};x===92?(E||(_=a.substring(y,c),E=!0),c++,_+=a[c]):E&&(_+=a[c]),c++}throw new cc(`Unterminated string starting with ${String.fromCharCode(v)}`,c,a.substring(Math.max(0,c-10),c))}function f(){const v=c;for(a.charCodeAt(c)===45&&c++;c<o&&hC(a.charCodeAt(c));)c++;if(c<o&&a.charCodeAt(c)===46)for(c++;c<o&&hC(a.charCodeAt(c));)c++;const y=a.slice(v,c);return{type:Yi.NUMBER,value:y}}function h(){c++;const v=c;if(c<o&&AX(a.charCodeAt(c)))for(c++;c<o&&wle(a.charCodeAt(c));)c++;const y=a.slice(v,c);return{type:Yi.FUNCTION,value:y}}function d(){const v=c++;for(;c<o&&wle(a.charCodeAt(c));)c++;const y=a.slice(v,c),_=Tlt.get(y);return _?{type:_,value:y}:{type:Yi.IDENTIFIER,value:y}}function p(){if(c+2<o){const y=a.substring(c,c+3);if(Y7.has(y))return c+=3,{type:Yi.OPERATOR,value:y}}if(c+1<o){const y=a.substring(c,c+2);if(Y7.has(y))return c+=2,{type:Yi.OPERATOR,value:y}}const v=a[c];if(Y7.has(v))return c++,{type:Yi.OPERATOR,value:v};throw new cc(`Unknown operator at position ${c}: ${a.substring(c,c+1)}`,c,a.substring(Math.max(0,c-10),c))}for(;c<o;){const v=a.charCodeAt(c);if(g=v,xlt.has(g)){c++;continue}const y=oNe.get(v);if(y)s[l++]=y,c++;else if(v!==34&&v!==39)if(hC(v)||v===45&&c+1<o&&hC(a.charCodeAt(c+1)))s[l++]=f();else if(v!==64)if(AX(v))s[l++]=d();else{if(!wlt(v))throw new cc(`Unexpected character: ${a[c]}`,c,a.substring(Math.max(0,c-10),c));s[l++]=p()}else s[l++]=h();else s[l++]=u(v)}var g;return l===s.length?s:s.slice(0,l)})(t),n=Plt(e),r=((i={},a={})=>({context:i,functions:a}))({},Elt);return(i={})=>Nlt(n,r,i)}const Llt=["style","encode","labels","children"],klt=TMe(t=>{const e=Ilt(t);return(...n)=>{const r=Array.from({length:n.length},(a,o)=>String.fromCharCode(97+o)),i=Object.fromEntries(n.map((a,o)=>[r[o],a]));return e(Object.assign(Object.assign({},i),{global:Object.assign({},i)}))}},t=>t,128);function lk(t,e=!0){if(Array.isArray(t))return t.map((n,r)=>lk(t[r],e));if(typeof t=="object"&&t)return B9e(t,(n,r)=>e&&Llt.includes(r)?lk(n,r==="children"):e?n:lk(n,!1));if(typeof t=="string"){const n=t.trim();if(n.startsWith("{")&&n.endsWith("}"))return klt(n.slice(1,-1))}return t}var Ole=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},Dlt={}.toString,Dw=function(t,e){return Dlt.call(t)==="[object "+e+"]"};const V0=(function(t){return Dw(t,"Function")}),ry=(function(t){return Array.isArray?Array.isArray(t):Dw(t,"Array")}),dC=(function(t){var e=typeof t;return t!==null&&e==="object"||e==="function"});function sNe(t,e){if(t){var n;if(ry(t))for(var r=0,i=t.length;r<i&&(n=e(t[r],r),n!==!1);r++);else if(dC(t)){for(var a in t)if(t.hasOwnProperty(a)&&(n=e(t[a],a),n===!1))break}}}var wX=function(t){return typeof t=="object"&&t!==null},ZR=function(t){if(!wX(t)||!Dw(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},Blt=function(t,e,n){if(!ry(t)&&!ZR(t))return t;var r=n;return sNe(t,function(i,a){r=e(r,i,a)}),r};const dm=(function(t){return Dw(t,"String")});var Flt=function(t){return Dw(t,"Number")},Ult=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return sNe(t,function(n,r){V0(t)&&r==="prototype"||e.push(n)}),e},jlt=function(t){return Dw(t,"Boolean")},G1=function(t){return t===void 0};const zlt=(function(t,e){if(!V0(t))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var a=e?e.apply(this,r):r[0],o=n.cache;if(o.has(a))return o.get(a);var s=t.apply(this,r);return o.set(a,s),s};return n.cache=new Map,n});var $lt=5;function lNe(t,e,n,r){n=n||0,r=r||$lt;for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];a!==null&&ZR(a)?(ZR(t[i])||(t[i]={}),n<r?lNe(t[i],a,n+1,r):t[i]=e[i]):ry(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var cNe=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r+=1)lNe(t,e[r]);return t},K0=function(t,e){if(t===e)return!0;if(!t||!e||dm(t)||dm(e))return!1;if(Ole(t)||Ole(e)){if(t.length!==e.length)return!1;for(var n=!0,r=0;r<t.length&&(n=K0(t[r],e[r]),!!n);r++);return n}if(wX(t)||wX(e)){var i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(var n=!0,r=0;r<i.length&&(n=K0(t[i[r]],e[i[r]]),!!n);r++);return n}return!1};const Hlt=(function(t,e){return Blt(t,function(n,r,i){return e.includes(i)||(n[i]=r),n},{})});var BI={};const Glt=(function(t){return t=t||"g",BI[t]?BI[t]+=1:BI[t]=1,t+BI[t]}),Eee=(function(t){return t});var FI;zlt(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,i=e.fontWeight,a=e.fontStyle,o=e.fontVariant;return FI||(FI=document.createElement("canvas").getContext("2d")),FI.font=[a,o,i,n+"px",r].join(" "),FI.measureText(dm(t)?t:"").width},function(t,e){return e===void 0&&(e={}),b7e([t],Ult(e)).join("")});function uNe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t?e.reduce(function(r,i){return function(a){return i(r(a))}},t):Eee}function fNe(t){return t instanceof Float32Array||t instanceof Array}var hNe=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},dNe=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};function Wlt(t){return function(e){for(var n=[],r=0;r<e.length-1;r+=2){var i=[e[r],e[r+1]],a=t(i);n.push.apply(n,dNe([],hNe(a),!1))}return n}}function Vlt(t){return function(e){for(var n=[],r=0;r<e.length-1;r+=3){var i=[e[r],e[r+1],e[r+2]],a=t(i);n.push.apply(n,dNe([],hNe(a),!1))}return n}}function pNe(t,e,n){for(;t<e;)t+=Math.PI*2;for(;t>n;)t-=Math.PI*2;return t}var Ylt=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Xlt=function(t,e,n,r,i){var a=Ylt(t,2),o=a[0],s=a[1],l=Hx();return V9e(l,[o,s])},Cle=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},qlt=function(t,e,n,r,i){var a=new Jc({range:[e,e+r]}),o=new Jc({range:[n,n+i]});return{transform:function(s){var l=Cle(s,2),c=l[0],u=l[1];return[a.map(c),o.map(u)]},untransform:function(s){var l=Cle(s,2),c=l[0],u=l[1];return[a.invert(c),o.invert(u)]}}},Zlt=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Klt=function(t,e,n,r,i){var a=Zlt(t,1),o=a[0];return o(e,n,r,i)},Qlt=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Jlt=function(t,e,n,r,i){var a=Qlt(t,1),o=a[0];return o},X7=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},ect=function(t,e,n,r,i){var a=X7(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=new Jc({range:[l,c]}),f=new Jc({range:[o,s]}),h=i/r,d=h>1?1:h,p=h>1?1/h:1;return{transform:function(g){var v=X7(g,2),y=v[0],_=v[1],E=f.map(y),x=u.map(_),T=x*Math.cos(E)*d,S=x*Math.sin(E)*p,w=T*.5+.5,C=S*.5+.5;return[w,C]},untransform:function(g){var v=X7(g,2),y=v[0],_=v[1],E=(y-.5)*2/d,x=(_-.5)*2/p,T=Math.sqrt(Math.pow(E,2)+Math.pow(x,2)),S=Math.atan2(x,E),w=pNe(S,o,s),C=f.invert(w),D=u.invert(T);return[C,D]}}},Rle=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},tct=function(t,e,n,r,i){return{transform:function(a){var o=Rle(a,2),s=o[0],l=o[1];return[l,s]},untransform:function(a){var o=Rle(a,2),s=o[0],l=o[1];return[l,s]}}},nct=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},k4=function(t,e,n,r,i){var a=nct(t,2),o=a[0],s=a[1],l=Hx();return X9e(l,[o,s])},xee=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},See=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},rct=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return k4.apply(void 0,See([[-1,-1]],xee(e),!1))},ict=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return k4.apply(void 0,See([[-1,1]],xee(e),!1))},act=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return k4.apply(void 0,See([[1,-1]],xee(e),!1))},oct=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},sct=function(t,e,n,r,i){var a=oct(t,1),o=a[0],s=Hx();return Y9e(s,o)},q7=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},lct=function(t,e,n,r,i){var a=q7(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=(s-0)/(2*Math.PI)+1,f=(c-l)/u,h=f/(Math.PI*2),d=new Jc({range:[l,l+f*.99]}),p=new Jc({range:[o,s]}),g=i/r,v=g>1?1:g,y=g>1?1/g:1;return{transform:function(_){var E=q7(_,2),x=E[0],T=E[1],S=p.map(x),w=d.map(T),C=Math.cos(S)*(h*S+w)*v,D=Math.sin(S)*(h*S+w)*y,L=C*.5+.5,B=D*.5+.5;return[L,B]},untransform:function(_){var E=q7(_,2),x=E[0],T=E[1],S=(x-.5)*2/v,w=(T-.5)*2/y,C=Math.sqrt(Math.pow(S,2)+Math.pow(w,2)),D=Math.atan2(w,S)+Math.floor(C/f)*Math.PI*2,L=pNe(D,o,s),B=C-h*L,I=p.invert(L),U=d.invert(B);return[I,U]}}},cct=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},uct=function(t,e,n,r,i){var a=cct(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=new Jc({range:[l,c]});return{transform:function(f){for(var h=[],d=f.length,p=new fnt({domain:new Array(d).fill(0).map(function(E,x){return x}),range:[o,s]}),g=0;g<d;g++){var v=f[g],y=p.map(g),_=u.map(v);h.push(y,_)}return h},untransform:function(f){for(var h=[],d=0;d<f.length;d+=2){var p=f[d+1];h.push(u.invert(p))}return h}}},EA=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function gNe(t){return 1/Math.tan(t)}var fct=function(t,e,n,r,i){var a=EA(t,1),o=a[0],s=gNe(o);return{transform:function(l){var c=EA(l,2),u=c[0],f=c[1],h=u+f*s;return[h,f]},untransform:function(l){var c=EA(l,2),u=c[0],f=c[1],h=u-f*s;return[h,f]}}},hct=function(t,e,n,r,i){var a=EA(t,1),o=a[0],s=gNe(o);return{transform:function(l){var c=EA(l,2),u=c[0],f=c[1],h=f+u*s;return[u,h]},untransform:function(l){var c=EA(l,2),u=c[0],f=c[1],h=f-u*s;return[u,h]}}},zp=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function KR(t,e,n,r,i){var a=t<e,o=(a?e-r:i-e)||i-r,s=a?-1:1;return s*o*(n+1)/(n+o/((t-e)*s))+e}function QR(t,e,n,r,i){var a=t<e,o=(a?e-r:i-e)||i-r,s=a?-1:1;return o/(o*(n+1)/(t-e)-n*s)+e}function QD(t,e,n){if(!n)return t;var r=new Jc({range:[0,1],domain:[0,e]});return r.map(t)}var dct=function(t,e,n,r,i){var a=zp(t,3),o=a[0],s=a[1],l=a[2],c=l===void 0?!1:l,u=QD(o,r,c);return{transform:function(f){var h=zp(f,2),d=h[0],p=h[1],g=KR(d,u,s,0,1);return[g,p]},untransform:function(f){var h=zp(f,2),d=h[0],p=h[1],g=QR(d,u,s,0,1);return[g,p]}}},pct=function(t,e,n,r,i){var a=zp(t,3),o=a[0],s=a[1],l=a[2],c=l===void 0?!1:l,u=QD(o,i,c);return{transform:function(f){var h=zp(f,2),d=h[0],p=h[1],g=KR(p,u,s,0,1);return[d,g]},untransform:function(f){var h=zp(f,2),d=h[0],p=h[1],g=QR(p,u,s,0,1);return[d,g]}}},gct=function(t,e,n,r,i){var a=zp(t,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],f=u===void 0?!1:u,h=QD(o,r,f),d=QD(s,i,f);return{transform:function(p){var g=zp(p,2),v=g[0],y=g[1],_=KR(v,h,l,0,1),E=KR(y,d,c,0,1);return[_,E]},untransform:function(p){var g=zp(p,2),v=g[0],y=g[1],_=QR(v,h,l,0,1),E=QR(y,d,c,0,1);return[_,E]}}},vct=function(t,e,n,r,i){var a=zp(t,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],f=u===void 0?!1:u,h=new Jc({range:[0,r]}),d=new Jc({range:[0,i]}),p=f?o:h.map(o),g=f?s:d.map(s);return{transform:function(v){var y=zp(v,2),_=y[0],E=y[1],x=h.map(_)-p,T=d.map(E)-g,S=Math.sqrt(x*x+T*T);if(S>l)return[_,E];var w=KR(S,0,c,0,l),C=Math.atan2(T,x),D=p+w*Math.cos(C),L=g+w*Math.sin(C);return[h.invert(D),d.invert(L)]},untransform:function(v){var y=zp(v,2),_=y[0],E=y[1],x=h.map(_)-p,T=d.map(E)-g,S=Math.sqrt(x*x+T*T);if(S>l)return[_,E];var w=QR(S,0,c,0,l),C=Math.atan2(T,x),D=p+w*Math.cos(C),L=g+w*Math.sin(C);return[h.invert(D),d.invert(L)]}}},Mle=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},mct=function(t,e,n,r,i,a,o){var s=new Jc({range:[e,e+i]}),l=new Jc({range:[n,n+a]}),c=new Jc({range:[r,r+o]});return{transform:function(u){var f=Mle(u,3),h=f[0],d=f[1],p=f[2];return[s.map(h),l.map(d),c.map(p)]},untransform:function(u){var f=Mle(u,3),h=f[0],d=f[1],p=f[2];return[s.invert(h),l.invert(d),c.invert(p)]}}},yct=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},_ct=function(t,e,n,r,i,a,o){var s=yct(t,3),l=s[0],c=s[1],u=s[2];return rf(Zr(),[l,c,u])},Ple=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},bct=function(t,e,n,r,i,a,o){return{transform:function(s){var l=Ple(s,3),c=l[0],u=l[1],f=l[2];return[u,c,f]},untransform:function(s){var l=Ple(s,3),c=l[0],u=l[1],f=l[2];return[u,c,f]}}},Ect=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},xct=function(t,e,n,r,i,a,o){var s=Ect(t,3),l=s[0],c=s[1],u=s[2];return Sd(Zr(),[l,c,u])},vT=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},mT=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Sct=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tct=(function(){function t(e){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:qlt,translate:Xlt,custom:Klt,matrix:Jlt,polar:ect,transpose:tct,scale:k4,"shear.x":fct,"shear.y":hct,reflect:rct,"reflect.x":ict,"reflect.y":act,rotate:sct,helix:lct,parallel:uct,fisheye:gct,"fisheye.x":dct,"fisheye.y":pct,"fisheye.circular":vct},this.update(e)}return t.prototype.update=function(e){this.options=cNe({},this.options,e),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var e=this.options,n=e.width,r=e.height;return[n,r]},t.prototype.getCenter=function(){var e=this.options,n=e.x,r=e.y,i=e.width,a=e.height;return[(n*2+i)/2,(r*2+a)/2]},t.prototype.transform=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.options.transformations;return this.update({transformations:mT(mT([],vT(r),!1),[mT([],vT(e),!1)],!1)}),this},t.prototype.map=function(e){return this.output(e)},t.prototype.invert=function(e){return this.input(e)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(e){var n,r;e===void 0&&(e=!1);var i=e?mT([],vT(this.options.transformations),!1).reverse():this.options.transformations,a=e?function(w){return w.untransform}:function(w){return w.transform},o=[],s=[],l=function(w,C){return C===void 0&&(C=!0),s.push(C?Wlt(w):w)};try{for(var c=Sct(i),u=c.next();!u.done;u=c.next()){var f=vT(u.value),h=f[0],d=f.slice(1),p=this.transformers[h];if(p){var g=this.options,v=g.x,y=g.y,_=g.width,E=g.height,x=p(mT([],vT(d),!1),v,y,_,E);if(fNe(x))o.push(x);else{if(o.length){var T=this.createMatrixTransform(o,e);l(T),o.splice(0,o.length)}var S=a(x)||Eee;l(S,h!=="parallel")}}}}catch(w){n={error:w}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(o.length){var S=this.createMatrixTransform(o,e);l(S)}return uNe.apply(void 0,mT([],vT(s),!1))},t.prototype.createMatrixTransform=function(e,n){var r=Hx();return n&&e.reverse(),e.forEach(function(i){return q9e(r,r,i)}),n&&G9e(r,H9e(r)),function(i){var a=[i[0],i[1],1];return bQ(a,a,r),[a[0],a[1]]}},t})(),yT=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},_T=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Act=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},wct=(function(){function t(e){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:mct,translate3D:_ct,scale3D:xct,transpose3D:bct},this.update(e)}return t.prototype.update=function(e){this.options=cNe({},this.options,e),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var e=this.options,n=e.width,r=e.height,i=e.depth;return[n,r,i]},t.prototype.getCenter=function(){var e=this.options,n=e.x,r=e.y,i=e.z,a=e.width,o=e.height,s=e.depth;return[(n*2+a)/2,(r*2+o)/2,(i*2+s)/2]},t.prototype.transform=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this.options.transformations;return this.update({transformations:_T(_T([],yT(r),!1),[_T([],yT(e),!1)],!1)}),this},t.prototype.map=function(e){return this.output(e)},t.prototype.invert=function(e){return this.input(e)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(e){var n,r;e===void 0&&(e=!1);var i=e?_T([],yT(this.options.transformations),!1).reverse():this.options.transformations,a=e?function(D){return D.untransform}:function(D){return D.transform},o=[],s=[],l=function(D,L){return L===void 0&&(L=!0),s.push(L?Vlt(D):D)};try{for(var c=Act(i),u=c.next();!u.done;u=c.next()){var f=yT(u.value),h=f[0],d=f.slice(1),p=this.transformers[h];if(p){var g=this.options,v=g.x,y=g.y,_=g.z,E=g.width,x=g.height,T=g.depth,S=p(_T([],yT(d),!1),v,y,_,E,x,T);if(fNe(S))o.push(S);else{if(o.length){var w=this.createMatrixTransform(o,e);l(w),o.splice(0,o.length)}var C=a(S)||Eee;l(C,!0)}}}}catch(D){n={error:D}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(o.length){var C=this.createMatrixTransform(o,e);l(C)}return uNe.apply(void 0,_T([],yT(s),!1))},t.prototype.createMatrixTransform=function(e,n){var r=Zr();return n&&e.reverse(),e.forEach(function(i){return VF(r,r,i)}),n&&qs(r,SP(r)),function(i){var a=[i[0],i[1],i[2],1];return fs(a,a,r),[a[0],a[1],a[2]]}},t})(),Oct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function UP(t){return(e,...n)=>Nt({},t(e,...n),e)}function Qx(t){return(e,...n)=>Nt({},e,t(e,...n))}function Cct(t){return t instanceof Date?!1:typeof t=="object"}function D4(t,e){if(!t)return e;if(Array.isArray(t))return t;if(Cct(t)){const{value:n=e}=t,r=Oct(t,["value"]);return Object.assign(Object.assign({},r),{value:n})}return t}var Rct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const vNe=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{x:n=0,y:r=0,width:i,height:a,data:o}=t;return e.map(s=>{var{data:l,x:c,y:u,width:f,height:h}=s,d=Rct(s,["data","x","y","width","height"]);return Object.assign(Object.assign({},d),{data:D4(l,o),x:c??n,y:u??r,width:f??i,height:h??a})})};vNe.props={};var Mct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const mNe=()=>t=>{const{children:e}=t;if(!Array.isArray(e))return[];const{direction:n="row",ratio:r=e.map(()=>1),padding:i=0,data:a}=t,[o,s,l,c]=n==="col"?["y","height","width","x"]:["x","width","height","y"],u=r.reduce((g,v)=>g+v),f=t[s]-i*(e.length-1),h=r.map(g=>f*(g/u)),d=[];let p=t[o]||0;for(let g=0;g<h.length;g+=1){const v=e[g],{data:y}=v,_=Mct(v,["data"]),E=D4(y,a);d.push(Object.assign({[o]:p,[s]:h[g],[c]:t[c]||0,[l]:t[l],data:E},_)),p+=h[g]+i}return d};mNe.props={};var Z7=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const yNe=()=>t=>{const{children:e}=t,n=Z7(t,["children"]);if(!Array.isArray(e))return[];const{data:r,scale:i={},axis:a={},legend:o={},encode:s={},transform:l=[],slider:c={}}=n,u=Z7(n,["data","scale","axis","legend","encode","transform","slider"]),f=e.map(h=>{var{data:d,scale:p={},axis:g={},legend:v={},encode:y={},transform:_=[],slider:E={}}=h,x=Z7(h,["data","scale","axis","legend","encode","transform","slider"]);return Object.assign({data:D4(d,r),scale:Nt({},i,p),encode:Nt({},s,y),transform:[...l,..._],axis:g&&a?Nt({},a,g):!1,legend:v&&o?Nt({},o,v):!1,slider:Nt({},c,E)},x)});return[Object.assign(Object.assign({},u),{marks:f,type:"standardView",slider:c})]};yNe.props={};var Pct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const _Ne=({static:t=!1}={})=>e=>{const{width:n,height:r,depth:i,paddingLeft:a,paddingRight:o,paddingTop:s,paddingBottom:l,padding:c,inset:u,insetLeft:f,insetTop:h,insetRight:d,insetBottom:p,margin:g,marginLeft:v,marginBottom:y,marginTop:_,marginRight:E,data:x,coordinate:T,theme:S,component:w,interaction:C,x:D,y:L,z:B,key:I,frame:U,labelTransform:$,parentKey:X,clip:N,viewStyle:M,title:k}=e,z=Pct(e,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:D,y:L,z:B,key:I,width:n,height:r,depth:i,padding:c,paddingLeft:a,paddingRight:o,paddingTop:s,inset:u,insetLeft:f,insetTop:h,insetRight:d,insetBottom:p,paddingBottom:l,theme:S,coordinate:T,component:w,interaction:C,frame:U,labelTransform:$,margin:g,marginLeft:v,marginBottom:y,marginTop:_,marginRight:E,parentKey:X,clip:N,style:M},!t&&{title:k}),{marks:[Object.assign(Object.assign(Object.assign({},z),{key:`${I}-0`,data:x}),t&&{title:k})]})]};_Ne.props={};class jP{constructor(e){this.$value=e}static of(e){return new jP(e)}call(e,...n){return this.$value=e(this.$value,...n),this}value(){return this.$value}}var Nct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Ict=UP(t=>{const{encode:e,data:n,scale:r,shareSize:i=!1}=t,{x:a,y:o}=e,s=(l,c)=>{var u;if(l===void 0||!i)return{};const f=Go(n,p=>p[l]),h=((u=r?.[c])===null||u===void 0?void 0:u.domain)||Array.from(f.keys()),d=h.map(p=>f.has(p)?f.get(p).length:1);return{domain:h,flex:d}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"top"}},a===void 0&&{paddingInner:0}),s(a,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:o===void 0?null:{position:"right"}},o===void 0&&{paddingInner:0}),s(o,"y"))}}}),Tee=Qx(t=>{const{data:e,scale:n,legend:r}=t,i=[t];let a,o,s;for(;i.length;){const h=i.shift(),{children:d,encode:p={},scale:g={},legend:v={}}=h,{color:y}=p,{color:_}=g,{color:E}=v;y!==void 0&&(a=y),_!==void 0&&(o=_),E!==void 0&&(s=E),Array.isArray(d)&&i.push(...d)}const l=()=>{var h;const d=(h=n?.color)===null||h===void 0?void 0:h.domain;if(d!==void 0)return[d];if(a===void 0)return[void 0];const p=typeof a=="function"?a:v=>v[a],g=e.map(p);return g.some(v=>typeof v=="number")?[fy(g)]:[Array.from(new Set(g)),"ordinal"]},c=typeof a=="string"?a:"",[u,f]=l();return Object.assign({encode:{color:{type:"column",value:u??[]}},scale:{color:Nt({},o,{domain:u,type:f})}},r===void 0&&{legend:{color:Nt({title:c},s)}})}),Aee=UP(()=>({animate:{enterType:"fadeIn"}})),wee=Qx(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),Oee=Qx(()=>({type:"cell"})),bNe=Qx(t=>{const{data:e}=t;return{data:{type:"inline",value:e,transform:[{type:"custom",callback:()=>{const{data:r,encode:i}=t,{x:a,y:o}=i,s=a?Array.from(new Set(r.map(u=>u[a]))):[],l=o?Array.from(new Set(r.map(u=>u[o]))):[];return(()=>{if(s.length&&l.length){const u=[];for(const f of s)for(const h of l)u.push({[a]:f,[o]:h});return u}if(s.length)return s.map(u=>({[a]:u}));if(l.length)return l.map(u=>({[o]:u}))})()}}]}}}),ENe=Qx((t,e=Lct,n=kct,r=Dct,i={})=>{const{data:a,encode:o,children:s,scale:l,x:c=0,y:u=0,shareData:f=!1,key:h}=t,{value:d}=a,{x:p,y:g}=o,{color:v}=l,{domain:y}=v;return{children:(E,x,T)=>{const{x:S,y:w}=x,{paddingLeft:C,paddingTop:D,marginLeft:L,marginTop:B}=T,{domain:I}=S.getOptions(),{domain:U}=w.getOptions(),$=Gx(E),X=E.map(e),N=E.map(({x:Q,y:ee})=>[S.invert(Q),w.invert(ee)]),k=N.map(([Q,ee])=>re=>{const{[p]:ne,[g]:le}=re;return(p!==void 0?ne===Q:!0)&&(g!==void 0?le===ee:!0)}).map(Q=>d.filter(Q)),z=f?_o(k,Q=>Q.length):void 0,j=N.map(([Q,ee])=>({columnField:p,columnIndex:I.indexOf(Q),columnValue:Q,columnValuesLength:I.length,rowField:g,rowIndex:U.indexOf(ee),rowValue:ee,rowValuesLength:U.length})),V=j.map(Q=>Array.isArray(s)?s:[s(Q)].flat(1));return $.flatMap(Q=>{const[ee,re,ne,le]=X[Q],ue=j[Q],ve=k[Q];return V[Q].map(Re=>{var Xe,Le,{scale:Lt,key:xt,facet:dt=!0,axis:Bt={},legend:At={}}=Re,zt=Nct(Re,["scale","key","facet","axis","legend"]);const rn=((Xe=Lt?.y)===null||Xe===void 0?void 0:Xe.guide)||Bt.y,Wn=((Le=Lt?.x)===null||Le===void 0?void 0:Le.guide)||Bt.x,Sn={x:{tickCount:p?5:void 0},y:{tickCount:g?5:void 0}},In=dt?ve:ve.length===0?[]:d,de={color:{domain:y}},sr={x:Nle(Wn,n)(ue,In),y:Nle(rn,r)(ue,In)};return Object.assign(Object.assign({key:`${xt}-${Q}`,data:In,margin:0,x:ee+C+c+L,y:re+D+u+B,parentKey:h,width:ne,height:le,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!In.length,dataDomain:z,scale:Nt(Sn,Lt,de),axis:Nt({},Bt,sr),legend:!1},zt),i)})})}}});function Lct(t){const{points:e}=t;return FQ(e)}function B4(t,e){return e.length?Nt({title:!1,tick:null,label:null},t):Nt({title:!1,tick:null,label:null,grid:null},t)}function kct(t){return(e,n)=>{const{rowIndex:r,rowValuesLength:i,columnIndex:a,columnValuesLength:o}=e;if(r!==i-1)return B4(t,n);const s=a!==o-1?!1:void 0,l=n.length?void 0:null;return Nt({title:s,grid:l},t)}}function Dct(t){return(e,n)=>{const{rowIndex:r,columnIndex:i}=e;if(i!==0)return B4(t,n);const a=r!==0?!1:void 0,o=n.length?void 0:null;return Nt({title:a,grid:o},t)}}function Nle(t,e){return typeof t=="function"?t:t===null||t===!1?()=>null:e(t)}const xNe=()=>t=>[jP.of(t).call(Oee).call(Tee).call(Aee).call(Ict).call(wee).call(bNe).call(ENe).value()];xNe.props={};var OX=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Bct=UP(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Fct=Qx(t=>{const{data:e,children:n,x:r=0,y:i=0,key:a}=t;return{children:(s,l,c)=>{const{x:u,y:f}=l,{paddingLeft:h,paddingTop:d,marginLeft:p,marginTop:g}=c,{domain:v}=u.getOptions(),{domain:y}=f.getOptions(),_=Gx(s),E=s.map(({points:w})=>FQ(w)),x=s.map(({x:w,y:C})=>[u.invert(w),f.invert(C)]),T=x.map(([w,C])=>({columnField:w,columnIndex:v.indexOf(w),columnValue:w,columnValuesLength:v.length,rowField:C,rowIndex:y.indexOf(C),rowValue:C,rowValuesLength:y.length})),S=T.map(w=>Array.isArray(n)?n:[n(w)].flat(1));return _.flatMap(w=>{const[C,D,L,B]=E[w],[I,U]=x[w],$=T[w];return S[w].map(N=>{var M,k;const{scale:z,key:j,encode:V,axis:Q,interaction:ee}=N,re=OX(N,["scale","key","encode","axis","interaction"]),ne=(M=z?.y)===null||M===void 0?void 0:M.guide,le=(k=z?.x)===null||k===void 0?void 0:k.guide,ue={x:{facet:!1},y:{facet:!1}},ve={x:jct(le)($,e),y:zct(ne)($,e)},Se={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:e,parentKey:a,key:`${j}-${w}`,x:C+h+r+p,y:D+d+i+g,width:L,height:B,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:Nt(ue,z),axis:Nt(Se,Q,ve),legend:!1,encode:Nt({},V,{x:I,y:U}),interaction:Nt({},ee,{legendFilter:!1})},re)})})}}}),Uct=Qx(t=>{const{encode:e}=t,n=OX(t,["encode"]),{position:r=[],x:i=r,y:a=[...r].reverse()}=e,o=OX(e,["position","x","y"]),s=[];for(const l of[i].flat(1))for(const c of[a].flat(1))s.push({$x:l,$y:c});return Object.assign(Object.assign({},n),{data:s,encode:Object.assign(Object.assign({},o),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[a].flat(1).length===1&&{y:{paddingInner:0}})})});function jct(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{rowIndex:r,rowValuesLength:i}=e;if(r!==i-1)return B4(t,n)}}function zct(t){return typeof t=="function"?t:t===null?()=>null:(e,n)=>{const{columnIndex:r}=e;if(r!==0)return B4(t,n)}}const $ct=()=>t=>[jP.of(t).call(Oee).call(Tee).call(Fct).call(Uct).call(Aee).call(wee).call(Bct).value()];var Hct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Gct=UP(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),Wct=UP(t=>({coordinate:{type:"polar"}})),Vct=t=>{const{encode:e}=t,n=Hct(t,["encode"]),{position:r}=e;return Object.assign(Object.assign({},n),{encode:{x:r}})};function Ile(t){return e=>null}function Yct(t){const{points:e}=t,[n,r,i,a]=e,o=Xs(n,a),s=ul(n,a),l=ul(r,i),c=MOe(s,l),u=1/Math.sin(c/2),f=o/(1+u),h=f*Math.sqrt(2),[d,p]=i,v=HA(s)+c/2,y=f*u,_=d+y*Math.sin(v),E=p-y*Math.cos(v);return[_-h/2,E-h/2,h,h]}const Xct=()=>t=>[jP.of(t).call(Oee).call(Vct).call(Tee).call(Wct).call(bNe).call(ENe,Yct,Ile,Ile,{frame:!1}).call(Aee).call(wee).call(Gct).value()];function qct(t,e,n){const i=n,a=[0,i],o=[-i+1,1];if(t==="normal")return a;if(t==="reverse")return o;if(t==="alternate")return e%2===0?a:o;if(t==="reverse-alternate")return e%2===0?o:a}function Zct(t,e,n){const r=[t];for(;r.length;){const i=r.pop();i.animate=Nt({enter:{duration:e},update:{duration:e,easing:n,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:e}},i.animate||{});const{children:a}=i;Array.isArray(a)&&r.push(...a)}return t}const SNe=()=>t=>{const{children:e=[],duration:n=1e3,iterationCount:r=1,direction:i="normal",easing:a="ease-in-out-sine"}=t,o=e.length;if(!Array.isArray(e)||o===0)return[];const{key:s}=e[0],l=e.map(c=>Object.assign(Object.assign({},c),{key:s})).map(c=>Zct(c,n,a));return function*(){let c=0,u;for(;r==="infinite"||c<r;){const[f,h]=qct(i,c,o);for(let d=f;d<h;d+=1){const p=Math.abs(d);u!==p&&(yield l[p]),u=p}c++}}};SNe.props={};var Kct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const TNe=()=>t=>{const{type:e,data:n,scale:r,encode:i,style:a,animate:o,key:s,state:l,tooltip:c}=t,u=Kct(t,["type","data","scale","encode","style","animate","key","state","tooltip"]);return[Object.assign(Object.assign({type:"geoView"},u),{children:[{type:"geoPath",key:`${s}-0`,data:{value:n},scale:r,encode:i,style:a,animate:o,state:l,tooltip:c}]})]};TNe.props={};const Qct=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:qTe,geoAlbersUsa:_je,geoAzimuthalEqualArea:bje,geoAzimuthalEqualAreaRaw:qK,geoAzimuthalEquidistant:Eje,geoAzimuthalEquidistantRaw:ZK,geoConicConformal:Sje,geoConicConformalRaw:QTe,geoConicEqualArea:oD,geoConicEqualAreaRaw:XTe,geoConicEquidistant:Aje,geoConicEquidistantRaw:JTe,geoEqualEarth:Oje,geoEqualEarthRaw:KK,geoEquirectangular:Tje,geoEquirectangularRaw:wR,geoGnomonic:Cje,geoGnomonicRaw:QK,geoIdentity:Rje,geoMercator:xje,geoMercatorRaw:EP,geoNaturalEarth1:Mje,geoNaturalEarth1Raw:JK,geoOrthographic:Pje,geoOrthographicRaw:eQ,geoProjection:Km,geoProjectionMutator:YK,geoStereographic:Nje,geoStereographicRaw:tQ,geoTransverseMercator:Ije,geoTransverseMercatorRaw:nQ},Symbol.toStringTag,{value:"Module"}));var Jct=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function eut(t){if(typeof t=="function")return t;const e=`geo${Gp(t)}`,n=Qct[e];if(!n)throw new Error(`Unknown coordinate: ${t}`);return n}function tut(t){return{type:"FeatureCollection",features:t.flatMap(e=>nut(e).features)}}function nut(t){const e={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const n=e[t.type];if(!n)return null;if(n==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(n==="feature")return{type:"FeatureCollection",features:[t]};if(n==="featureCollection")return t}function rut(t,e){var n;for(const[r,i]of Object.entries(e))(n=t[r])===null||n===void 0||n.call(t,i)}function iut(t,e,n,r){const i=()=>{const s=e.filter(ANe);return s.find(c=>c.sphere)?{type:"Sphere"}:tut(s.filter(c=>!c.sphere).flatMap(c=>c.data.value))},{outline:a=i()}=r,{size:o="fitExtent"}=r;if(o==="fitExtent")return aut(t,a,n);if(o==="fitWidth")return out(t,a,n)}function aut(t,e,n){const{x:r,y:i,width:a,height:o}=n;t.fitExtent([[r,i],[a,o]],e)}function out(t,e,n){const{width:r,height:i}=n,[[a,o],[s,l]]=YTe(t.fitWidth(r,e)).bounds(e),c=Math.ceil(l-o),u=Math.min(Math.ceil(s-a),c),f=t.scale()*(u-1)/u,[h,d]=t.translate(),p=d+(i-c)/2;t.scale(f).translate([h,p]).precision(.2)}function sut(t){const{data:e}=t;if(Array.isArray(e))return Object.assign(Object.assign({},t),{data:{value:e}});const{type:n}=e;return n==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[JUe()]}}):n==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function ANe(t){return t.type==="geoPath"}const wNe=()=>t=>{const{children:e,coordinate:n={}}=t;if(!Array.isArray(e))return[];const{type:r="equalEarth"}=n,i=Jct(n,["type"]),a=eut(r),o=e.map(f=>Object.assign(Object.assign({},f),{data:D4(f.data,t.data)})).map(sut);let s;function l(){return[["custom",(f,h,d,p)=>{const g=a();iut(g,o,{x:f,y:h,width:d,height:p},i),rut(g,i),s=YTe(g);const y=new wy({domain:[f,f+d]}),_=new wy({domain:[h,h+p]}),E=T=>{const S=g(T);if(!S)return[null,null];const[w,C]=S;return[y.map(w),_.map(C)]},x=T=>{if(!T)return null;const[S,w]=T,C=[y.invert(S),_.invert(w)];return g.invert(C)};return{transform:T=>E(T),untransform:T=>x(T)}}]]}function c(f){const{style:h,tooltip:d={}}=f;return Object.assign(Object.assign({},f),{type:"path",tooltip:YD(d,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},h),{d:p=>s(p)||[]})})}const u=f=>ANe(f)?c(f):f;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:l},children:o.flatMap(u)})]};wNe.props={};function lut(t){return $P(t,e=>e.className==="component")}function cut(t){return $P(t,e=>e.className==="element")}function uut(t){return $P(t,e=>e.className==="label")}function Hc(t,e,n,r=i=>!0){return i=>{if(!r(i))return;n.emit(`plot:${t}`,i);const{target:a}=i;if(!a)return;const{className:o}=a;if(o==="plot")return;const s=cut(a),l=lut(a),c=uut(a),u=s||l||c;if(!u)return;const{className:f,markType:h}=u,d=Object.assign(Object.assign({},i),{nativeEvent:!0});f==="element"?(d.data={data:PQ(u,e)},n.emit(`element:${t}`,d),n.emit(`${h}:${t}`,d)):f==="label"?(d.data={data:u.attributes.datum},n.emit(`label:${t}`,d),o.split(/\s+/).filter(Boolean).forEach(g=>{n.emit(`${g}:${t}`,d)})):(n.emit(`component:${t}`,d),o.split(/\s+/).filter(Boolean).forEach(g=>{n.emit(`${g}:${t}`,d)}))}}function ONe(){return(t,e,n)=>{const{container:r,view:i}=t,a=Hc(ao.CLICK,i,n,w=>w.detail===1),o=Hc(ao.DBLCLICK,i,n,w=>w.detail===2),s=Hc(ao.POINTER_TAP,i,n),l=Hc(ao.POINTER_DOWN,i,n),c=Hc(ao.POINTER_UP,i,n),u=Hc(ao.POINTER_OVER,i,n),f=Hc(ao.POINTER_OUT,i,n),h=Hc(ao.POINTER_MOVE,i,n),d=Hc(ao.POINTER_ENTER,i,n),p=Hc(ao.POINTER_LEAVE,i,n),g=Hc(ao.POINTER_UPOUTSIDE,i,n),v=Hc(ao.DRAG_START,i,n),y=Hc(ao.DRAG,i,n),_=Hc(ao.DRAG_END,i,n),E=Hc(ao.DRAG_ENTER,i,n),x=Hc(ao.DRAG_LEAVE,i,n),T=Hc(ao.DRAG_OVER,i,n),S=Hc(ao.DROP,i,n);return r.addEventListener("click",a),r.addEventListener("click",o),r.addEventListener("pointertap",s),r.addEventListener("pointerdown",l),r.addEventListener("pointerup",c),r.addEventListener("pointerover",u),r.addEventListener("pointerout",f),r.addEventListener("pointermove",h),r.addEventListener("pointerenter",d),r.addEventListener("pointerleave",p),r.addEventListener("pointerupoutside",g),r.addEventListener("dragstart",v),r.addEventListener("drag",y),r.addEventListener("dragend",_),r.addEventListener("dragenter",E),r.addEventListener("dragleave",x),r.addEventListener("dragover",T),r.addEventListener("drop",S),()=>{r.removeEventListener("click",a),r.removeEventListener("click",o),r.removeEventListener("pointertap",s),r.removeEventListener("pointerdown",l),r.removeEventListener("pointerup",c),r.removeEventListener("pointerover",u),r.removeEventListener("pointerout",f),r.removeEventListener("pointermove",h),r.removeEventListener("pointerenter",d),r.removeEventListener("pointerleave",p),r.removeEventListener("pointerupoutside",g),r.removeEventListener("dragstart",v),r.removeEventListener("drag",y),r.removeEventListener("dragend",_),r.removeEventListener("dragenter",E),r.removeEventListener("dragleave",x),r.removeEventListener("dragover",T),r.removeEventListener("drop",S)}}}ONe.props={reapplyWhenUpdate:!0};function fut(){return{"component.axisRadar":ZPe,"component.axisLinear":ob,"component.axisArc":YPe,"component.legendContinuousBlock":h3e,"component.legendContinuousBlockSize":d3e,"component.legendContinuousSize":Uee,"interaction.event":ONe,"composition.mark":_Ne,"composition.view":yNe,"shape.label.label":_Me,"shape.break":RMe}}var hut=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function hs(t,e){const n=Object.assign(Object.assign({},fut()),e),r=a=>{if(typeof a!="string")return a;const o=`${t}.${a}`;return n[o]||zA(`Unknown Component: ${o}`)};return[(a,o)=>{const{type:s}=a,l=hut(a,["type"]);s||zA("Plot type is required!");const c=r(s);return c?.(l,o)},r]}function CNe(t){const{canvas:e,group:n}=t;return e?.document||n?.ownerDocument||zA("Cannot find library document")}var Lle=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function dut(t,e,n){const[r]=hs("coordinate",n),{innerHeight:i,innerWidth:a,insetLeft:o,insetTop:s,insetRight:l,insetBottom:c}=t,{coordinates:u=[]}=e,f=yut(u),h=f[0].type==="cartesian3D",d=Object.assign(Object.assign({},t),{x:o,y:s,width:a-o-l,height:i-c-s,transformations:f.flatMap(r)});return h?new wct(d):new Tct(d)}function RNe(t,e){const{coordinate:n={},coordinates:r}=t,i=Lle(t,["coordinate","coordinates"]);if(r)return t;const{type:a,transform:o=[]}=n,s=Lle(n,["type","transform"]);if(!a)return Object.assign(Object.assign({},i),{coordinates:o});const[,l]=hs("coordinate",e),{transform:c=!1}=l(a).props||{};if(c)throw new Error(`Unknown coordinate: ${a}.`);return Object.assign(Object.assign({},i),{coordinates:[Object.assign({type:a},s),...o]})}function ev(t,e){return t.filter(n=>n.type===e)}function jE(t){return ev(t,"polar").length>0}function put(t){return ev(t,"helix").length>0}function xA(t){return ev(t,"transpose").length%2===1}function gut(t){return ev(t,"parallel").length>0}function MNe(t){return ev(t,"theta").length>0}function vut(t){return ev(t,"reflect").length>0}function zC(t){return ev(t,"radial").length>0}function PNe(t){return ev(t,"radar").length>0}function mut(t){return ev(t,"reflectY").length>0}function yut(t){return t.find(e=>e.type==="cartesian"||e.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}const CX=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:Wze,interpolateBrBG:Tze,interpolateBuGn:Ize,interpolateBuPu:Lze,interpolateCividis:Kze,interpolateCool:e9e,interpolateCubehelixDefault:Qze,interpolateGnBu:kze,interpolateGreens:Vze,interpolateGreys:Yze,interpolateInferno:l9e,interpolateMagma:s9e,interpolateOrRd:Dze,interpolateOranges:Zze,interpolatePRGn:Aze,interpolatePiYG:wze,interpolatePlasma:c9e,interpolatePuBu:Fze,interpolatePuBuGn:Bze,interpolatePuOr:Oze,interpolatePuRd:Uze,interpolatePurples:Xze,interpolateRainbow:t9e,interpolateRdBu:Cze,interpolateRdGy:Rze,interpolateRdPu:jze,interpolateRdYlBu:Mze,interpolateRdYlGn:Pze,interpolateReds:qze,interpolateSinebow:i9e,interpolateSpectral:Nze,interpolateTurbo:a9e,interpolateViridis:o9e,interpolateWarm:Jze,interpolateYlGn:$ze,interpolateYlGnBu:zze,interpolateYlOrBr:Hze,interpolateYlOrRd:Gze,schemeAccent:gze,schemeBlues:SAe,schemeBrBG:nAe,schemeBuGn:fAe,schemeBuPu:hAe,schemeCategory10:pze,schemeDark2:vze,schemeGnBu:dAe,schemeGreens:TAe,schemeGreys:AAe,schemeObservable10:mze,schemeOrRd:pAe,schemeOranges:CAe,schemePRGn:rAe,schemePaired:yze,schemePastel1:_ze,schemePastel2:bze,schemePiYG:iAe,schemePuBu:vAe,schemePuBuGn:gAe,schemePuOr:aAe,schemePuRd:mAe,schemePurples:wAe,schemeRdBu:oAe,schemeRdGy:sAe,schemeRdPu:yAe,schemeRdYlBu:lAe,schemeRdYlGn:cAe,schemeReds:OAe,schemeSet1:Eze,schemeSet2:xze,schemeSet3:Sze,schemeSpectral:uAe,schemeTableau10:R7e,schemeYlGn:bAe,schemeYlGnBu:_Ae,schemeYlOrBr:EAe,schemeYlOrRd:xAe},Symbol.toStringTag,{value:"Module"}));function _ut(t,e,n,r,i,a){const{guide:o={}}=n,s=Rut(t,e,n);if(typeof s!="string")return n;const l=Mut(s,t,e,n),c=wut(s,l,n);return Object.assign(Object.assign(Object.assign({},n),Nut(s,t,e,n,r)),{domain:c,range:Put(s,t,e,n,c,i,a),expectedDomain:l,guide:o,name:t,type:s})}function but(t,e){const n={};for(const r of t){const{values:i,name:a}=r,o=e[a];for(const s of i){const{name:l,value:c}=s;n[l]=c.map(u=>o.map(u))}}return n}function Eut(t,e){const n=Array.from(t.values()).flatMap(i=>i.channels);NK(n,i=>i.map(a=>e.get(a.scale.uid)),i=>i.name).filter(([,i])=>i.some(a=>typeof a.getOptions().groupTransform=="function")&&i.every(a=>a.getTicks)).map(i=>i[1]).forEach(i=>{const a=i.map(o=>o.getOptions().groupTransform)[0];a(i)})}function xut(t,e){var n;const{components:r=[]}=e,i=["scale","encode","axis","legend","data","transform"],a=Array.from(new Set(t.flatMap(s=>s.channels.map(l=>l.scale)))),o=new Map(a.map(s=>[s.name,s]));for(const s of r){const l=Aut(s);for(const c of l){const u=o.get(c),f=((n=s.scale)===null||n===void 0?void 0:n[c])||{},{independent:h=!1}=f;if(u&&!h){const{guide:d}=u,p=typeof d=="boolean"?{}:d;u.guide=Nt({},p,s),Object.assign(u,f)}else{const d=Object.assign(Object.assign({},f),{expectedDomain:f.domain,name:c,guide:ww(s,i)});a.push(d)}}}return a}function Sut(t){if(!t||!Array.isArray(t))return[gx,gx];let e,n;return[a=>{var o;e=a.map.bind(a),n=(o=a.invert)===null||o===void 0?void 0:o.bind(a);const s=t.filter(([h])=>typeof h=="function"),l=t.filter(([h])=>typeof h!="function"),c=new Map(l);if(a.map=h=>{for(const[d,p]of s)if(d(h))return p;return c.has(h)?c.get(h):e(h)},!n)return a;const u=new Map(l.map(([h,d])=>[d,h])),f=new Map(s.map(([h,d])=>[d,h]));return a.invert=h=>f.has(h)?h:u.has(h)?u.get(h):n(h),a},a=>(e!==null&&(a.map=e),n!==null&&(a.invert=n),a)]}function kle(t,e){const n=Object.keys(t);for(const r of Object.values(e)){const{name:i}=r.getOptions();if(!(i in t))t[i]=r;else{const a=n.filter(l=>l.startsWith(i)).map(l=>+(l.replace(i,"")||0)),o=_o(a)+1,s=`${i}${o}`;t[s]=r,r.getOptions().key=s}}return t}function Dle(t,e){const[n]=hs("scale",e),{relations:r}=t,[i]=Sut(r),a=n(t);return i(a)}function Tut(t){const e=t.flatMap(n=>Array.from(n.values())).flatMap(n=>n.channels.map(r=>r.scale));Ble(e,"x"),Ble(e,"y")}function Aut(t){const{channels:e=[],type:n,scale:r={}}=t,i=["shape","color","opacity","size"];return e.length!==0?e:n==="axisX"?["x"]:n==="axisY"?["y"]:n==="legends"?Object.keys(r).filter(a=>i.includes(a)):[]}function Ble(t,e){const n=t.filter(({name:a,facet:o=!0})=>o&&a===e),r=n.flatMap(a=>a.domain),i=n.every(NNe)?fy(r):n.every(INe)?Array.from(new Set(r)):null;if(i!==null)for(const a of n)a.domain=i}function wut(t,e,n){const{ratio:r}=n;return r==null?e:NNe({type:t})?Out(e,r,t):INe({type:t})?Cut(e,r):e}function Out(t,e,n){const r=t.map(Number),i=new wy({domain:r,range:[r[0],r[0]+(r[r.length-1]-r[0])*e]});return n==="time"?t.map(a=>new Date(i.map(a))):t.map(a=>i.map(a))}function Cut(t,e){const n=Math.round(t.length*e);return t.slice(0,n)}function NNe(t){const{type:e}=t;return typeof e!="string"?!1:["linear","log","pow","time"].includes(e)}function INe(t){const{type:e}=t;return typeof e!="string"?!1:["band","point","ordinal"].includes(e)}function Rut(t,e,n){const{type:r,domain:i,range:a,quantitative:o,ordinal:s}=n;return r!==void 0?r:Gut(e)?"identity":typeof a=="string"?"linear":(i||a||[]).length>2?K7(t,s):i!==void 0?zle([i])?K7(t,s):$le(e)?"time":Ule(t,a,o):zle(e)?K7(t,s):$le(e)?"time":Ule(t,a,o)}function Mut(t,e,n,r){const{domain:i}=r;if(i!==void 0)return i;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return jle(Uut(n,r),r);case"band":case"ordinal":case"point":return jut(n);case"quantile":return zut(n);case"sequential":return jle($ut(n),r);default:return[]}}function Put(t,e,n,r,i,a,o){const{range:s}=r;if(typeof s=="string")return Iut(s);if(s!==void 0)return s;const{rangeMin:l,rangeMax:c}=r;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const u=Fle(n,r,i,a,o),[f,h]=Hut(e,u);return[l??f,c??h]}case"band":case"point":return[l??(e==="size"?5:0),c??(e==="size"?10:1)];case"ordinal":return Fle(n,r,i,a,o);case"sequential":return;case"constant":return[n[0][0]];default:return[]}}function Nut(t,e,n,r,i){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return Dut(i,r);case"band":case"point":return But(t,e,i,r);case"sequential":return kut(r);default:return r}}function Fle(t,e,n,r,i){const[a]=hs("palette",i),{category10:o,category20:s}=r,l=EGe(n).length<=o.length?o:s,{palette:c=l,offset:u}=e;if(Array.isArray(c))return c;try{return a({type:c})}catch{const h=Lut(c,n,u);if(h)return h;throw new Error(`Unknown Component: ${c} `)}}function Iut(t){return t.split("-")}function Lut(t,e,n=r=>r){if(!t)return null;const r=Gp(t),i=CX[`scheme${r}`],a=CX[`interpolate${r}`];if(!i&&!a)return null;if(i){if(!i.some(Array.isArray))return i;const o=i[e.length];if(o)return o}return e.map((o,s)=>a(n(s/e.length)))}function kut(t){const{palette:e="ylGnBu",offset:n}=t,r=Gp(e),i=CX[`interpolate${r}`];if(!i)throw new Error(`Unknown palette: ${r}`);return{interpolator:n?a=>i(n(a)):i}}function Dut(t,e){const{interpolate:n=OP,nice:r=!1,tickCount:i=5}=e;return Object.assign(Object.assign({},e),{interpolate:n,nice:r,tickCount:i})}function But(t,e,n,r){if(r.padding!==void 0||r.paddingInner!==void 0||r.paddingOuter!==void 0)return Object.assign(Object.assign({},r),{unknown:NaN});const i=Fut(t,e,n),{paddingInner:a=i,paddingOuter:o=i}=r;return Object.assign(Object.assign({},r),{paddingInner:a,paddingOuter:o,padding:i,unknown:NaN})}function Fut(t,e,n){return e==="enterDelay"||e==="enterDuration"||e==="size"?0:t==="band"?MNe(n)?0:.1:t==="point"?.5:0}function K7(t,e){return e||(Wut(t)?"point":"ordinal")}function Ule(t,e,n){return n||(t!=="color"||e?"linear":"sequential")}function jle(t,e){if(t.length===0)return t;const{domainMin:n,domainMax:r}=e,[i,a]=t;return[n??i,r??a]}function Uut(t,e){const{zero:n=!1}=e;let r=1/0,i=-1/0;for(const a of t)for(const o of a)Yo(o)&&(r=Math.min(r,+o),i=Math.max(i,+o));return r===1/0?[]:n?[Math.min(0,r),i]:[r,i]}function jut(t){return Array.from(new Set(t.flat()))}function zut(t){return t.flat().sort()}function $ut(t){let e=1/0,n=-1/0;for(const r of t)for(const i of r)Yo(i)&&(e=Math.min(e,+i),n=Math.max(n,+i));return e===1/0?[]:[e<0?-n:e,n]}function Hut(t,e){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[bGe(e),Kwe(e)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function zle(t){return Cee(t,e=>{const n=typeof e;return n==="string"||n==="boolean"})}function $le(t){return Cee(t,e=>e instanceof Date)}function Gut(t){return Cee(t,$A)}function Cee(t,e){for(const n of t)if(n.some(e))return!0;return!1}function Wut(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function Vut(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function Yut(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:e,domain:n,range:r,interpolator:i}=t,a=n&&n.length>0,o=r&&r.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(e)&&a&&o||["sequential"].includes(e)&&a&&(o||i)||["constant","identity"].includes(e)&&o)}const Xut={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},qut={threshold:"threshold",quantize:"quantize",quantile:"quantile"},Zut={ordinal:"ordinal",band:"band",point:"point"},Kut={constant:"constant"};var sb=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Qut(t,e,n){const{coordinates:r=[],title:i}=e,[,a]=hs("component",n),o=t.filter(({guide:u})=>u!==null),s=[],l=lft(e,t,n);if(s.push(...l),i){const{props:u}=a("title"),{defaultPosition:f,defaultOrientation:h,defaultOrder:d,defaultSize:p,defaultCrossPadding:g}=u,v=typeof i=="string"?{title:i}:i;s.push(Object.assign({type:"title",position:f,orientation:h,order:d,crossPadding:g[0],defaultSize:p},v))}return rft(o,r).forEach(([u,f])=>{const{props:h}=a(u),{defaultPosition:d,defaultPlane:p="xy",defaultOrientation:g,defaultSize:v,defaultOrder:y,defaultLength:_,defaultPadding:E=[0,0],defaultCrossPadding:x=[0,0]}=h,T=Nt({},...f),{guide:S,field:w}=T,C=Array.isArray(S)?S:[S];for(const D of C){const[L,B]=oft(u,d,g,D,f,o,r);if(!L&&!B)continue;const I=L==="left"||L==="right",U=I?E[1]:E[0],$=I?x[1]:x[0],{size:X,order:N=y,length:M=_,padding:k=U,crossPadding:z=$}=D;s.push(Object.assign(Object.assign({title:w},D),{defaultSize:v,length:M,position:L,plane:p,orientation:B,padding:k,order:N,crossPadding:z,size:X,type:u,scales:f}))}}),s}function Hle(t,e,n,r,i){const[a]=hs("component",r),{scaleInstances:o,scale:s,bbox:l}=t,c=sb(t,["scaleInstances","scale","bbox"]),u={bbox:l,library:r};return a(c)({coordinate:e,library:r,markState:i,scales:o,theme:n,value:u,scale:s})}function Jut(t){return t.map(e=>{const n=Nt(e,e.style);return delete n.style,n})}function LNe(t,e){const n=["left","right","bottom","top"];return MK(t,({type:a,position:o,group:s})=>n.includes(o)?s===void 0?a.startsWith("legend")?`legend-${o}`:Symbol("independent"):s==="independent"?Symbol("independent"):s:Symbol("independent")).flatMap(([,a])=>{if(a.length===1)return a[0];if(e!==void 0){const u=a.filter(g=>g.length!==void 0).map(g=>g.length),f=jp(u);if(f>e)return a.forEach(g=>g.group=Symbol("independent")),a;const h=e-f,d=a.length-u.length,p=h/d;a.forEach(g=>{g.length===void 0&&(g.length=p)})}const o=_o(a,u=>u.size),s=_o(a,u=>u.order),l=_o(a,u=>u.crossPadding),c=a[0].position;return{type:"group",size:o,order:s,position:c,children:a,crossPadding:l}})}function eft(t,e){const n=["shape","size","color","opacity"],r=(h,d)=>h==="constant"&&d==="size",i=t.filter(({type:h,name:d})=>typeof h=="string"&&n.includes(d)&&!r(h,d)),a=i.filter(({type:h})=>h==="constant"),o=i.filter(({type:h})=>h!=="constant"),l=MK(o,h=>h.field?h.field:Symbol("independent")).map(([h,d])=>[h,[...d,...a]]).filter(([,h])=>h.some(d=>d.type!=="constant")),c=new Map(l);if(c.size===0)return[];const u=h=>h.sort(([d],[p])=>d.localeCompare(p));return Array.from(c).map(([,h])=>{const p=xGe(h).sort((g,v)=>v.length-g.length).map(g=>({combination:g,option:g.map(v=>[v.name,tft(v)])}));for(const{option:g,combination:v}of p)if(!g.every(y=>y[1]==="constant")&&g.every(y=>y[1]==="discrete"||y[1]==="constant"))return["legendCategory",v];for(const[g,v]of nst)for(const{option:y,combination:_}of p)if(v.some(E=>Fs(u(E),u(y))))return[g,_];return null}).filter(Yo)}function tft(t){const{type:e}=t;return typeof e!="string"?null:e in Xut?"continuous":e in Zut?"discrete":e in qut?"distribution":e in Kut?"constant":null}function nft(t,e){return t.map(n=>{const{name:r}=n;if(put(e)||MNe(e)||xA(e)&&(jE(e)||zC(e)))return null;if(r.startsWith("x"))return jE(e)?["axisArc",[n]]:zC(e)?["axisLinear",[n]]:[xA(e)?"axisY":"axisX",[n]];if(r.startsWith("y"))return jE(e)?["axisLinear",[n]]:zC(e)?["axisArc",[n]]:[xA(e)?"axisX":"axisY",[n]];if(r.startsWith("z"))return["axisZ",[n]];if(r.startsWith("position")){if(PNe(e))return["axisRadar",[n]];if(!jE(e))return["axisY",[n]]}return null}).filter(Yo)}function rft(t,e){const n=t.filter(r=>Yut(r));return[...eft(n),...nft(n,e)]}function RX(t){const e=ev(t,"polar");if(e.length){const r=e[e.length-1],{startAngle:i,endAngle:a}=NAe(r);return[i,a]}const n=ev(t,"radial");if(n.length){const r=n[n.length-1],{startAngle:i,endAngle:a}=kAe(r);return[i,a]}return[-Math.PI/2,Math.PI/2*3]}function ift(t){const e=/position(\d*)/g.exec(t);return e?+e[1]:null}function aft(t,e,n,r,i){const{name:a}=n[0];if(t==="axisRadar"){const o=r.filter(h=>h.name.startsWith("position")),s=ift(a);if(s===null)return[null,null];const[l,c]=RX(i),u=PNe(i)?o.length:o.length-1;return["center",(c-l)/u*s+l]}if(t==="axisY"&&gut(i))return xA(i)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[o]=RX(i);return["center",o]}return t==="axisArc"?e[0]==="inner"?["inner",null]:["outer",null]:jE(i)?["center",null]:zC(i)?["center",null]:t==="axisX"&&vut(i)||t==="axisX"&&mut(i)?["top",null]:e}function oft(t,e,n,r,i,a,o){const[s]=RX(o),l=[r.position||e,s??n];return typeof t=="string"&&t.startsWith("axis")?aft(t,l,i,a,o):typeof t=="string"&&t.startsWith("legend")&&jE(o)&&r.position==="center"?["center","vertical"]:l}function sft(t,e,n=[]){return t==="x"?xA(n)?`${e}Y`:`${e}X`:t==="y"?xA(n)?`${e}X`:`${e}Y`:null}function lft(t,e,n){const[,r]=hs("component",n),{coordinates:i}=t;function a(o,s,l,c){const u=sft(s,o,i);if(!c||!u)return;const{props:f}=r(u),{defaultPosition:h,defaultSize:d,defaultOrder:p,defaultCrossPadding:[g]}=f;return Object.assign(Object.assign({position:h,defaultSize:d,order:p,type:u,crossPadding:g},c),{scales:[l]})}return e.filter(o=>o.slider||o.scrollbar).flatMap(o=>{const{slider:s,scrollbar:l,name:c}=o;return[a("slider",c,o,s),a("scrollbar",c,o,l)]}).filter(o=>!!o)}function kNe(t,e,n,r,i,a){const{type:o}=t;if(!["left","right","bottom","top"].includes(r)||typeof o!="string")return;const l=o;return(l.startsWith("axis")?dft:l.startsWith("group")?cft:l.startsWith("legendContinuous")?pft:l==="legendCategory"?gft:l.startsWith("slider")?hft:l==="title"?fft:l.startsWith("scrollbar")?uft:()=>{})(t,e,n,r,i,a)}function cft(t,e,n,r,i,a){const{children:o}=t,s=_o(o,c=>c.crossPadding);o.forEach(c=>c.crossPadding=s),o.forEach(c=>kNe(c,e,n,r,i,a));const l=_o(o,c=>c.size);t.size=l,o.forEach(c=>c.size=l)}function uft(t,e,n,r,i,a){const{trackSize:o=6}=Nt({},i.scrollbar,t);t.size=o}function fft(t,e,n,r,i,a){const o=Nt({},i.title,t),{title:s,subtitle:l,spacing:c=0}=o,u=sb(o,["title","subtitle","spacing"]);if(s){const f=Vn(u,"title"),h=JD(s,f);t.size=h.height}if(l){const f=Vn(u,"subtitle"),h=JD(l,f);t.size+=c+h.height}}function hft(t,e,n,r,i,a){const o=()=>{const{slider:u}=i;return Nt({},u,t)},{trackSize:s,handleIconSize:l}=o(),c=Math.max(s,l*2.4);t.size=c}function dft(t,e,n,r,i,a){var o,s;t.transform=t.transform||[{type:"hide"}];const l=r==="left"||r==="right",c=DNe(t,r,i),{tickLength:u=0,labelSpacing:f=0,titleSpacing:h=0,labelAutoRotate:d}=c,p=sb(c,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),g=F4(t,a),v=U4(p,g);let y=u;if(typeof t.tickLength=="function"){const T=(((o=g.getTicks)===null||o===void 0?void 0:o.call(g))||g.getOptions().domain).map((S,w,C)=>t.tickLength(S,w,C));y=Math.max(...T,0)}const _=y+f;if(v&&v.length){const x=_o(v,S=>S.width),T=_o(v,S=>S.height);if(l)t.size=x+_;else{const{tickFilter:S,labelTransform:w}=t;yft(g,v,e,n,S)&&!w&&d!==!1&&d!==null?(t.labelTransform="rotate(90)",t.size=x+_):(t.labelTransform=(s=t.labelTransform)!==null&&s!==void 0?s:"rotate(0)",t.size=T+_)}}else t.size=y;const E=j4(p);E&&(l?t.size+=h+E.width:t.size+=h+E.height)}function pft(t,e,n,r,i,a){const s=(()=>{const{legendContinuous:x}=i;return Nt({},x,t)})(),{labelSpacing:l=0,titleSpacing:c=0}=s,u=sb(s,["labelSpacing","titleSpacing"]),f=r==="left"||r==="right",h=Vn(u,"ribbon"),{size:d}=h,p=Vn(u,"handleIcon"),{size:g}=p,v=Math.max(d,g*2.4);t.size=v;const y=F4(t,a),_=U4(u,y);if(_){const x=f?"width":"height",T=_o(_,S=>S[x]);t.size+=T+l}const E=j4(u);E&&(f?t.size=Math.max(t.size,E.width):t.size+=c+E.height)}function gft(t,e,n,r,i,a){const s=(()=>{const{legendCategory:N}=i,{title:M}=t,[k,z]=Array.isArray(M)?[M,void 0]:[void 0,M];return Nt({title:k},N,Object.assign(Object.assign({},t),{title:z}))})(),{focus:l,itemSpacing:c,focusMarkerSize:u,itemMarkerSize:f,titleSpacing:h,rowPadding:d,colPadding:p,maxCols:g=1/0,maxRows:v=1/0}=s,y=sb(s,["focus","itemSpacing","focusMarkerSize","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:_,length:E}=t,x=N=>Math.min(N,v),T=N=>Math.min(N,g),S=r==="left"||r==="right",w=E===void 0?e+(S?0:n[0]+n[1]):E,C=j4(y),D=F4(t,a),L=U4(y,D,"itemLabel"),B=Math.max(L[0].height,f)+d,I=(N,M=0)=>f+N+c[0]+M+(l?u+c[2]:0);S?(()=>{let N=-1/0,M=0,k=1,z=0,j=-1/0,V=-1/0;const Q=C?C.height:0,ee=w-Q;for(const{width:re}of L){const ne=I(re,p);N=Math.max(N,ne),M+B>ee?(k++,j=Math.max(j,z),V=Math.max(V,M),z=1,M=B):(M+=B,z++)}k<=1&&(j=z,V=M),t.size=N*T(k),t.length=V+Q,Nt(t,{cols:T(k),gridRow:j})})():typeof _=="number"?(()=>{const N=Math.ceil(L.length/_),M=_o(L,k=>I(k.width))*_;t.size=B*x(N)-d,t.length=Math.min(M,w)})():(()=>{let N=1,M=0,k=-1/0;for(const{width:z}of L){const j=I(z,p);M+j>w?(k=Math.max(k,M),M=j,N++):M+=j}N===1&&(k=M),t.size=B*x(N)-d,t.length=k})(),C&&(S?t.size=Math.max(t.size,C.width):t.size+=h+C.height)}function F4(t,e){const[n]=hs("scale",e),{scales:r,tickCount:i,tickMethod:a}=t,o=r.find(s=>s.type!=="constant"&&s.type!=="identity");return i!==void 0&&(o.tickCount=i),a!==void 0&&(o.tickMethod=a),n(o)}function U4(t,e,n="label"){const{labelFormatter:r,tickFilter:i,label:a=!0}=t,o=sb(t,["labelFormatter","tickFilter","label"]);if(!a)return null;const s=vft(e,r,i),l=Vn(o,n),c=s.map((h,d)=>Object.fromEntries(Object.entries(l).map(([p,g])=>[p,typeof g=="function"?g(h,d):g]))),u=s.map((h,d)=>{const p=c[d];return JD(h,p)});if(!c.some(h=>h.transform)){const h=s.map((d,p)=>p);t.indexBBox=new Map(h.map(d=>[d,[s[d],u[d]]]))}return u}function j4(t){const e=c=>c===!1||c===null,{title:n}=t,r=sb(t,["title"]);if(e(n)||n===void 0)return null;const i=Vn(r,"title"),{direction:a,transform:o}=i,s=Array.isArray(n)?n.join(","):n;return typeof s!="string"?null:JD(s,Object.assign(Object.assign({},i),{transform:o||(a==="vertical"?"rotate(-90)":"")}))}function DNe(t,e,n){const{title:r}=t,[i,a]=Array.isArray(r)?[r,void 0]:[void 0,r],{axis:o,[`axis${IQ(e)}`]:s}=n;return Nt({title:i},o,s,Object.assign(Object.assign({},t),{title:a}))}function BNe(t,e){const n=t.getTicks?t.getTicks():t.getOptions().domain;return e?n.filter(e):n}function vft(t,e,n){const i=BNe(t,n).map(o=>typeof o=="number"?RD(o):o),a=e?typeof e=="string"?$x(e):e:t.getFormatter?t.getFormatter():o=>`${o}`;return i.map(a)}function mft(t,e){return t.getBandWidth?t.getBandWidth(e)/2:0}function yft(t,e,n,r,i){if(jp(e,d=>d.width)>n)return!0;const o=t.clone();o.update({range:[0,n]});const s=BNe(t,i),l=s.map(d=>o.map(d)+mft(o,d)),c=s.map((d,p)=>p),u=-r[0],f=n+r[1],h=(d,p)=>{const{width:g}=p;return[d-g/2,d+g/2]};for(let d=0;d<c.length;d++){const p=l[d],[g,v]=h(p,e[d]);if(g<u||v>f)return!0;const y=l[d+1];if(y){const[_]=h(y,e[d+1]);if(v>_)return!0}}return!1}function JD(t,e){const n=_ft(t),{filter:r}=e,i=sb(e,["filter"]);return n.attr(Object.assign(Object.assign({},i),{visibility:"none"})),n.getBBox()}function _ft(t){return t instanceof Qs?t:new Jg({style:{text:`${t}`}})}const Gle=16;function bft(t){const e=t.find(({type:i})=>i==="axisX"),n=t.find(({type:i})=>i==="axisY"),r=t.find(({type:i})=>i==="axisZ");e&&n&&r&&(e.plane="xy",n.plane="xy",r.plane="yz",r.origin=[e.bbox.x,e.bbox.y,0],r.eulerAngles=[0,-90,0],r.bbox.x=e.bbox.x,r.bbox.y=e.bbox.y,t.push(Object.assign(Object.assign({},e),{plane:"xz",showLabel:!1,showTitle:!1,origin:[e.bbox.x,e.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},n),{plane:"yz",showLabel:!1,showTitle:!1,origin:[n.bbox.x+n.bbox.width,n.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},r),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function Eft(t,e,n,r){var i,a,o,s;const{width:l,height:c,depth:u,x:f=0,y:h=0,z:d=0,inset:p=(i=n.inset)!==null&&i!==void 0?i:0,insetLeft:g=p,insetTop:v=p,insetBottom:y=p,insetRight:_=p,margin:E=(a=n.margin)!==null&&a!==void 0?a:0,marginLeft:x=E,marginBottom:T=E,marginTop:S=E,marginRight:w=E,padding:C=n.padding,paddingBottom:D=C,paddingLeft:L=C,paddingRight:B=C,paddingTop:I=C}=Sft(t,e,n,r),U=x===Gle&&L==="auto",$=w===Gle&&B==="auto",X=Wr(e,"coordinates",[]).some(zt=>zt.type==="transpose"),N=t.find(({type:zt})=>zt==="axisX"),{size:M,labelTransform:k}=N||{},z=1/4,j=(zt,rn,Wn,Sn,In)=>{const{marks:de}=e;if(de.length===0)return[Sn,In];if(zt-Sn-In-zt*z>0)return[Sn,In];const st=zt*(1-z);return[rn==="auto"?st*Sn/(Sn+In):Sn,Wn==="auto"?st*In/(Sn+In):In]},V=zt=>zt==="auto"?20:zt??20,Q=V(I),ee=V(D),re=Wle(t,c-Q-ee,[Q+S,ee+T],["left","right"],e,n,r),{paddingLeft:ne,paddingRight:le}=re,ue=l-x-w;let[ve,Se]=j(ue,L,B,ne,le),Re=ue-ve-Se;const Xe=Wle(t,Re,[ve+x,Se+w],["bottom","top"],e,n,r),{paddingTop:Le,paddingBottom:Lt}=Xe,xt=c-T-S,[dt,Bt]=j(xt,D,I,Lt,Le),At=xt-dt-Bt;if(M&&!X&&!k){const{fontSize:zt=12,fontFamily:rn="sans-serif",scales:Wn=[]}=N,Sn=(s=(o=Wn?.[0])===null||o===void 0?void 0:o.domain)!==null&&s!==void 0?s:[];if(!Sn.length)return;const In=(de,sr,zr,st)=>{const Ft=oRe(sr,{fontSize:zt,fontFamily:rn}),An=Ft/2-zr-st;An>0&&(Re-=An,de==="left"?ve+=Ft/2-zr:Se+=Ft/2-zr)};U&&In("left",b9e(Sn),x,ve),$&&In("right",bd(Sn),w,Se)}return{width:l,height:c,depth:u,insetLeft:g,insetTop:v,insetBottom:y,insetRight:_,innerWidth:Re,innerHeight:At,paddingLeft:ve,paddingRight:Se,paddingTop:Bt,paddingBottom:dt,marginLeft:x,marginBottom:T,marginTop:S,marginRight:w,x:f,y:h,z:d}}function xft(t){const{height:e,width:n,padding:r=0,paddingLeft:i=r,paddingRight:a=r,paddingTop:o=r,paddingBottom:s=r,margin:l=16,marginLeft:c=l,marginRight:u=l,marginTop:f=l,marginBottom:h=l,inset:d=0,insetLeft:p=d,insetRight:g=d,insetTop:v=d,insetBottom:y=d}=t,_=T=>T==="auto"?20:T,E=n-_(i)-_(a)-c-u-p-g,x=e-_(o)-_(s)-f-h-v-y;return{width:E,height:x}}function Sft(t,e,n,r){const{coordinates:i}=e;if(!jE(i)&&!zC(i))return e;const a=t.filter(y=>typeof y.type=="string"&&y.type.startsWith("axis"));if(a.length===0)return e;const o=a.map(y=>{const _=y.type==="axisArc"?"arc":"linear";return DNe(y,_,n)}),s=_o(o,y=>{var _;return(_=y.labelSpacing)!==null&&_!==void 0?_:0}),l=a.flatMap((y,_)=>{const E=o[_],x=F4(y,r);return U4(E,x)}).filter(Yo),c=_o(l,y=>y.height)+s,u=a.flatMap((y,_)=>{const E=o[_];return j4(E)}).filter(y=>y!==null),f=u.length===0?0:_o(u,y=>y.height),{inset:h=c,insetLeft:d=h,insetBottom:p=h,insetTop:g=h+f,insetRight:v=h}=e;return Object.assign(Object.assign({},e),{insetLeft:d,insetBottom:p,insetTop:g,insetRight:v})}function Wle(t,e,n,r,i,a,o){const s=Go(t,p=>p.position),{padding:l=a.padding,paddingLeft:c=l,paddingRight:u=l,paddingBottom:f=l,paddingTop:h=l}=i,d={paddingBottom:f,paddingLeft:c,paddingTop:h,paddingRight:u};for(const p of r){const g=`padding${IQ(fJ(p))}`,v=s.get(p)||[],y=d[g],_=D=>{D.size===void 0&&(D.size=D.defaultSize)},E=D=>{D.type==="group"?(D.children.forEach(_),D.size=_o(D.children,L=>L.size)):D.size=D.defaultSize},x=D=>{D.size||(y!=="auto"?E(D):(kNe(D,e,n,p,a,o),_(D)))},T=D=>{D.type.startsWith("axis")&&D.labelAutoHide===void 0&&(D.labelAutoHide=!0)},S=p==="bottom"||p==="top",w=Nd(v,D=>D.order),C=v.filter(D=>D.type.startsWith("axis")&&D.order==w);if(C.length&&(C[0].crossPadding=0),typeof y=="number")v.forEach(_),v.forEach(T);else if(v.length===0)d[g]=0;else{const D=S?e+n[0]+n[1]:e,L=LNe(v,D);L.forEach(x);const B=L.reduce((I,{size:U,crossPadding:$=12})=>I+U+$,0);d[g]=B}}return d}function Tft(t,e,n){const r=Go(t,S=>`${S.plane||"xy"}-${S.position}`),{paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:h,innerWidth:d,insetBottom:p,insetLeft:g,insetRight:v,insetTop:y,height:_,width:E,depth:x}=n,T={xy:Q7({width:E,height:_,paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:h,innerWidth:d,insetBottom:p,insetLeft:g,insetRight:v,insetTop:y}),yz:Q7({width:x,height:_,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:x,innerHeight:_,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:Q7({width:E,height:x,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:E,innerHeight:x,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[S,w]of r.entries()){const[C,D]=S.split("-"),L=T[C][D],[B,I]=Qwe(w,U=>typeof U.type!="string"?!1:!!(D==="center"||U.type.startsWith("axis")&&["inner","outer"].includes(D)));B.length&&Aft(B,e,L,D),I.length&&Lft(w,e,L)}}function Q7({width:t,height:e,paddingLeft:n,paddingRight:r,paddingTop:i,paddingBottom:a,marginLeft:o,marginTop:s,marginBottom:l,marginRight:c,innerHeight:u,innerWidth:f,insetBottom:h,insetLeft:d,insetRight:p,insetTop:g}){const v=n+o,y=i+s,_=r+c,E=a+l,x=t-o-c,T=[v+d,y+g,f-d-p,u-g-h,"center",null,null];return{top:[v,0,f,y,"vertical",!0,Rc,o,x],right:[t-_,y,_,u,"horizontal",!1,Rc],bottom:[v,e-E,f,E,"vertical",!1,Rc,o,x],left:[0,y,v,u,"horizontal",!0,Rc],"top-left":[v,0,f,y,"vertical",!0,Rc],"top-right":[v,0,f,y,"vertical",!0,Rc],"bottom-left":[v,e-E,f,E,"vertical",!1,Rc],"bottom-right":[v,e-E,f,E,"vertical",!1,Rc],center:T,inner:T,outer:T}}function Aft(t,e,n,r){const[i,a]=Qwe(t,o=>!!(typeof o.type=="string"&&o.type.startsWith("axis")));wft(i,e,n,r),kft(a,e,n)}function wft(t,e,n,r){r==="center"?fWe(e)?Ift(t,e,n):Mo(e)?Rft(t,e,n):o4(e)&&Mft(t,e,n,t[0].orientation):r==="inner"?Oft(t,e,n):r==="outer"&&Cft(t,e,n)}function Oft(t,e,n){const[r,i,,a]=n,[o,s]=e.getCenter(),[l]=s4(e),c=a/2,u=l*c,f=o-u,h=s-u;for(let d=0;d<t.length;d++){const p=t[d];p.bbox={x:r+f,y:i+h,width:u*2,height:u*2}}}function Cft(t,e,n){const[r,i,a,o]=n;for(const s of t)s.bbox={x:r,y:i,width:a,height:o}}function Rft(t,e,n){const[r,i,a,o]=n;for(const s of t)s.bbox={x:r,y:i,width:a,height:o}}function Mft(t,e,n,r){r==="horizontal"?Nft(t,e,n):r==="vertical"&&Pft(t,e,n)}function Pft(t,e,n){const[r,i,,a]=n,o=new Array(t.length).fill(0),l=e.map(o).filter((c,u)=>u%2===0).map(c=>c+r);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],h=l[c+1]-f;u.bbox={x:f,y:i,width:h,height:a}}}function Nft(t,e,n){const[r,i,a]=n,o=new Array(t.length).fill(0),l=e.map(o).filter((c,u)=>u%2===1).map(c=>c+i);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],h=l[c+1]-f;u.bbox={x:r,y:f,width:a,height:h}}}function Ift(t,e,n,r){const[i,a,o,s]=n;for(const l of t)l.bbox={x:i,y:a,width:o,height:s},l.radar={index:t.indexOf(l),count:t.length}}function Lft(t,e,n){const[r,i,a,o,s,l,c,u,f]=n,[h,d,p,g,v,y,_,E]=s==="vertical"?["y",i,"x",r,"height",o,"width",a]:["x",r,"y",i,"width",a,"height",o];t.sort((D,L)=>c?.(D.order,L.order));const x=D=>D==="title"||D==="group"||D.startsWith("legend"),T=(D,L,B)=>B===void 0?L:x(D)?B:L,S=(D,L,B)=>B===void 0?L:x(D)?B:L,w=l?d+y:d;for(let D=0,L=w;D<t.length;D++){const B=t[D],{crossPadding:I=0,type:U}=B,{size:$}=B;B.bbox={[h]:l?L-$-I:L+I,[p]:S(U,g,u),[v]:$,[_]:T(U,E,f)},L+=($+I)*(l?-1:1)}const C=t.filter(D=>D.type==="group");for(const D of C){const{bbox:L,children:B}=D,I=L[_],U=I/B.length,$=B.reduce((z,j)=>{var V;const Q=(V=j.layout)===null||V===void 0?void 0:V.justifyContent;return Q||z},"flex-start"),X=B.map((z,j)=>{const{length:V=U,padding:Q=0}=z;return V+(j===B.length-1?0:Q)}),N=jp(X),M=I-N,k=$==="flex-start"?0:$==="center"?M/2:M;for(let z=0,j=L[p]+k;z<B.length;z++){const V=B[z],{padding:Q=0}=V,ee=z===B.length-1?0:Q;V.bbox={[v]:L[v],[h]:L[h],[p]:j,[_]:X[z]-ee},Nt(V,{layout:{justifyContent:$}}),j+=X[z]}}}function kft(t,e,n){if(t.length===0)return;const[r,i,a,o]=n,[s]=s4(e),l=o/2*s/Math.sqrt(2),c=r+a/2,u=i+o/2;for(let f=0;f<t.length;f++){const h=t[f];h.bbox={x:c-l,y:u-l,width:l*2,height:l*2}}}var Dft=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},KA=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Ree=Symbol("CALLBACK_ITEM");function Bft(t,e,n){const{encode:r={},scale:i={},transform:a=[]}=e,o=KA(e,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},o),{encode:r,scale:i,transform:a})]}function FNe(t,e,n){return Dft(this,void 0,void 0,function*(){const{library:r}=n,{data:i}=e,[a]=hs("data",r),o=Kft(i),{transform:s=[]}=o,u=[KA(o,["transform"]),...s].map(d=>a(d,n)),f=yield vGe(u)(i),h=i&&!Array.isArray(i)&&!Array.isArray(f)?{value:f}:f;return[Array.isArray(f)?Gx(f):[],Object.assign(Object.assign({},e),{data:h})]})}function Fft(t,e,n){const{encode:r}=e;if(!r)return[t,e];const i={};for(const[a,o]of Object.entries(r))if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=`${a}${s===0?"":s}`;i[l]=o[s]}else i[a]=o;return[t,Object.assign(Object.assign({},e),{encode:i})]}function Uft(t,e,n){const{encode:r,data:i}=e;if(!r)return[t,e];const a=$m(r,o=>Xft(o)?o:{type:qft(i,o),value:o});return[t,Object.assign(Object.assign({},e),{encode:a})]}function jft(t,e,n){const{encode:r}=e;if(!r)return[t,e];const i=$m(r,(a,o)=>{const{type:s}=a;return s!=="constant"||Vut(o)?a:Object.assign(Object.assign({},a),{constant:!0})});return[t,Object.assign(Object.assign({},e),{encode:i})]}function zft(t,e,n){const{encode:r,data:i}=e;if(!r)return[t,e];const{library:a}=n,o=eht(a),s=$m(r,l=>o(i,l));return[t,Object.assign(Object.assign({},e),{encode:s})]}function $ft(t,e,n){const{tooltip:r={}}=e;return Oy(r)?[t,e]:Array.isArray(r)?[t,Object.assign(Object.assign({},e),{tooltip:{items:r}})]:$A(r)&&XMe(r)?[t,Object.assign(Object.assign({},e),{tooltip:r})]:[t,Object.assign(Object.assign({},e),{tooltip:{items:[r]}})]}function Hft(t,e,n){const{data:r,encode:i,tooltip:a={}}=e;if(Oy(a))return[t,e];const o=f=>{if(!f)return f;if(typeof f=="string")return t.map(h=>({name:f,value:r[h][f]}));if($A(f)){const{field:h,channel:d,color:p,name:g=h,valueFormatter:v=S=>S}=f,y=typeof v=="string"?$x(v):v,_=d&&i[d],E=_&&i[d].field,x=g||E||d,T=[];for(const S of t){const w=h?r[S][h]:_?i[d].value[S]:null;T[S]={name:x,color:p,value:y(w)}}return T}if(typeof f=="function"){const h=[];for(const d of t){const p=f(r[d],d,r,i);$A(p)?h[d]=Object.assign(Object.assign({},p),{[Ree]:!0}):h[d]={value:p}}return h}return f},{title:s,items:l=[]}=a,c=KA(a,["title","items"]),u=Object.assign({title:o(s),items:Array.isArray(l)?l.map(o):[]},c);return[t,Object.assign(Object.assign({},e),{tooltip:u})]}function Gft(t,e,n){const{encode:r}=e,i=KA(e,["encode"]);if(!r)return[t,e];const a=Object.entries(r),o=a.filter(([,l])=>{const{value:c}=l;return Array.isArray(c[0])}).flatMap(([l,c])=>{const u=[[l,new Array(t.length).fill(void 0)]],{value:f}=c,h=KA(c,["value"]);for(let d=0;d<f.length;d++){const p=f[d];if(Array.isArray(p))for(let g=0;g<p.length;g++){const v=u[g]||[`${l}${g}`,new Array(t).fill(void 0)];v[1][d]=p[g],u[g]=v}}return u.map(([d,p])=>[d,Object.assign({type:"column",value:p},h)])}),s=Object.fromEntries([...a,...o]);return[t,Object.assign(Object.assign({},i),{encode:s})]}function Wft(t,e,n){const{axis:r={},legend:i={},slider:a={},scrollbar:o={}}=e,s=(c,u)=>{if(typeof c=="boolean")return c?{}:null;const f=c[u];return f===void 0||f?f:null},l=typeof r=="object"?Array.from(new Set(["x","y","z",...Object.keys(r)])):["x","y","z"];return Nt(e,{scale:Object.assign(Object.assign({},Object.fromEntries(l.map(c=>{const u=s(o,c);return[c,Object.assign({guide:s(r,c),slider:s(a,c),scrollbar:u},u&&{ratio:u.ratio===void 0?.5:u.ratio})]}))),{color:{guide:s(i,"color")},size:{guide:s(i,"size")},shape:{guide:s(i,"shape")},opacity:{guide:s(i,"opacity")}})}),[t,e]}function Vft(t,e,n){const{animate:r}=e;return r||r===void 0?[t,e]:(Nt(e,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,e])}function Yft(t,e,n){var r,i;return Nt(e,{scale:{series:Object.assign({key:`DEFAULT_${e.type}_SERIES_KEY`},(i=(r=e?.scale)===null||r===void 0?void 0:r.series)!==null&&i!==void 0?i:{})}}),[t,e]}function Xft(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:e}=t;return Yo(e)}function qft(t,e){return typeof e=="function"?"transform":typeof e=="string"&&Zft(t,e)?"field":"constant"}function Zft(t,e){return Array.isArray(t)?t.some(n=>n[e]!==void 0):!1}function Kft(t){if(Ln(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:e="inline"}=t,n=KA(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}var UNe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},Qft=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Jft(t,e,n){return UNe(this,void 0,void 0,function*(){const[r,i]=yield tht(t,e,n),{encode:a,scale:o,data:s,tooltip:l,key:c}=i;if(Array.isArray(s)===!1)return null;const{channels:u}=e,f=NK(Object.entries(a).filter(([,d])=>Yo(d)),d=>d.map(([p,g])=>Object.assign({name:p},g)),([d])=>{var p;const g=(p=/([^\d]+)\d*$/.exec(d))===null||p===void 0?void 0:p[1],v=u.find(y=>y.name===g);return v?.independent?d:g}),h=u.filter(d=>{const{name:p,required:g}=d;if(f.find(([v])=>v===p))return!0;if(g)throw new Error(`Missing encoding for channel: ${p}.`);return!1}).flatMap(d=>{const{name:p,scale:g,scaleKey:v,range:y,quantitative:_,ordinal:E}=d;return f.filter(([T])=>T.startsWith(p)).map(([T,S],w)=>{const C=S.some(M=>M.visual),D=S.some(M=>M.constant),L=o[T]||{},{independent:B=!1,key:I=v||T,type:U=D?"constant":C?"identity":g}=L,$=Qft(L,["independent","key","type"]),X=U==="constant",N=X?void 0:y;return{name:T,values:S,scaleKey:B||X?Symbol("independent"):I,scale:Object.assign(Object.assign({type:U,markKey:c,range:N},$),{quantitative:_,ordinal:E})}})});return[i,Object.assign(Object.assign({},e),{index:r,channels:h,tooltip:l})]})}function eht(t){const[e]=hs("encode",t);return(n,r)=>r===void 0||n===void 0?null:Object.assign(Object.assign({},r),{type:"column",value:e(r)(n),field:nht(r)})}function tht(t,e,n){return UNe(this,void 0,void 0,function*(){const{library:r}=n,[i]=hs("transform",r),{preInference:a=[],postInference:o=[]}=e,{transform:s=[]}=t,l=[Bft,FNe,Fft,Uft,jft,zft,Gft,Vft,Wft,$ft,Yft,...a.map(i),...s.map(i),...o.map(i),Hft];let c=[],u=t;for(const f of l)[c,u]=yield f(c,u,n);return[c,u]})}function nht(t){const{type:e,value:n}=t;return e==="field"&&typeof n=="string"?n:null}var gy=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},V_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Mee(t,e,n){return gy(this,void 0,void 0,function*(){var r;const{library:i}=n,[a]=hs("composition",i),[o]=hs("interaction",i),s=new Set(Object.keys(i).map(U=>{var $;return($=/mark\.(.*)/.exec(U))===null||$===void 0?void 0:$[1]}).filter(Yo)),l=new Set(Object.keys(i).map(U=>{var $;return($=/component\.(.*)/.exec(U))===null||$===void 0?void 0:$[1]}).filter(Yo)),c=U=>{const{type:$}=U;if(typeof $=="function"){const{props:X={}}=$,{composite:N=!0}=X;if(N)return"mark"}return typeof $!="string"?$:s.has($)||l.has($)?"mark":$},u=U=>c(U)==="mark",f=U=>c(U)==="standardView",h=U=>{const{type:$}=U;return typeof $!="string"?!1:!!l.has($)},d=U=>{if(f(U))return[U];const $=c(U);return a({type:$,static:h(U)})(U)},p=[],g=new Map,v=new Map,y=[t],_=[];for(;y.length;){const U=y.shift();if(f(U)){const $=v.get(U),[X,N]=$?$Ne($,U,i):yield jNe(U,n);g.set(X,U),p.push(X);const M=N.flatMap(d).map(k=>RNe(k,i));if(y.push(...M),M.every(f)){const k=yield Promise.all(M.map(z=>zNe(z,n)));Tut(k);for(let z=0;z<M.length;z++){const j=M[z],V=k[z];v.set(j,V)}}}else{const $=u(U)?U:yield VNe(U,n),X=d($);Array.isArray(X)?y.push(...X):typeof X=="function"&&_.push(X())}}n.emitter.emit(ao.BEFORE_PAINT);const E=new Map,x=new Map,T=[];e.selectAll(Fp(GD)).data(p,U=>U.key).join(U=>U.append("g").attr("className",GD).attr("id",$=>$.key).call(Vle).each(function($,X,N){PX($,ai(N),T,n),E.set($,N)}),U=>U.call(Vle).each(function($,X,N){PX($,ai(N),T,n),x.set($,N)}),U=>U.each(function($,X,N){const M=N.nameInteraction.values();for(const k of M)k.destroy()}).remove());const S=(U,$,X)=>Array.from(U.entries()).map(([N,M])=>{const k=X||new Map,z=(ee,re=ne=>ne)=>k.set(ee,re),j=g.get(N),V=iht(ai(M),j,n),Q={view:N,container:M,options:j,setState:z,update:(ee,re)=>gy(this,void 0,void 0,function*(){const le=NQ(Array.from(k.values()))(j);return yield V(le,ee,()=>{Us(re)&&$(U,re,k)})})};return n.externals.update=Q.update,n.externals.setState=z,Q}),w=(U=x,$,X)=>{var N;const M=S(U,w,X);for(const k of M){const{options:z,container:j}=k,V=j.nameInteraction;let Q=eB(z);$&&(Q=Q.filter(ee=>$.includes(ee[0])));for(const ee of Q){const[re,ne]=ee,le=V.get(re);if(le&&((N=le.destroy)===null||N===void 0||N.call(le)),ne){const ve=MX(k.view,re,ne,o)(k,M,n.emitter);V.set(re,{destroy:ve})}}}},C=S(E,w);for(const U of C){const{options:$}=U,X=new Map;U.container.nameInteraction=X;for(const N of eB($)){const[M,k]=N;if(k){const j=MX(U.view,M,k,o)(U,C,n.emitter);X.set(M,{destroy:j})}}}w();const{width:D,height:L}=t,B=[];for(const U of _){const $=new Promise(X=>gy(this,void 0,void 0,function*(){for(const N of U){const M=Object.assign({width:D,height:L},N);yield Mee(M,e,n)}X()}));B.push($)}n.views=p,(r=n.animations)===null||r===void 0||r.forEach(U=>U?.cancel()),n.animations=T,n.emitter.emit(ao.AFTER_PAINT);const I=T.filter(Yo).map(bht).map(U=>U.finished);return Promise.all([...I,...B])})}function Vle(t){t.style("transform",e=>`translate(${e.layout.x}, ${e.layout.y})`)}function rht(t){const[,e]=hs("interaction",t);return n=>{const[r,i]=n;try{return[r,e(r)]}catch{return[r,i.type]}}}function iht(t,e,n){const{library:r}=n,i=rht(r),a=l=>l[1]&&l[1].props&&l[1].props.reapplyWhenUpdate,s=eB(e).map(i).filter(a).map(l=>l[0]);return(l,c,u)=>gy(this,void 0,void 0,function*(){const f=[],[h,d]=yield jNe(l,n);PX(h,t,f,n);for(const p of s.filter(g=>g!==c))aht(p,t,l,h,n);for(const p of d)Mee(p,t,n);return u(),{options:l,view:h}})}function aht(t,e,n,r,i){var a;const{library:o}=i,[s]=hs("interaction",o),c=e.node().nameInteraction,u=eB(n).find(([g])=>g===t),f=c.get(t);if(!f||((a=f.destroy)===null||a===void 0||a.call(f),!u[1]))return;const h=MX(r,t,u[1],s),d={options:n,view:r,container:e.node(),update:g=>Promise.resolve(g)},p=h(d,[],i.emitter);c.set(t,{destroy:p})}function jNe(t,e){return gy(this,void 0,void 0,function*(){const{library:n}=e,r=yield sht(t,e),i=oht(r);t.interaction=i.interaction,t.coordinate=i.coordinate,t.marks=[...i.marks,...i.components];const a=RNe(i,n),o=yield zNe(a,e);return $Ne(o,a,n)})}function oht(t){const{coordinate:e={},interaction:n={},style:r={},marks:i}=t,a=V_(t,["coordinate","interaction","style","marks"]),o=i.map(h=>h.coordinate||{}),s=i.map(h=>h.interaction||{}),l=i.map(h=>h.viewStyle||{}),c=[...o,e].reduceRight((h,d)=>Nt(h,d),{}),u=[n,...s].reduce((h,d)=>Nt(h,d),{}),f=[...l,r].reduce((h,d)=>Nt(h,d),{});return Object.assign(Object.assign({},a),{marks:i,coordinate:c,interaction:u,style:f})}function sht(t,e){return gy(this,void 0,void 0,function*(){const{library:n}=e,[r,i]=hs("mark",n),a=new Set(Object.keys(n).map(d=>{var p;return(p=/component\.(.*)/.exec(d))===null||p===void 0?void 0:p[1]}).filter(Yo)),{marks:o}=t,s=[],l=[],c=[...o],{width:u,height:f}=xft(t),h={options:t,width:u,height:f};for(;c.length;){const[d]=c.splice(0,1),p=yield VNe(d,e),{type:g=zA("G2Mark type is required."),key:v}=p;if(a.has(g))l.push(p);else{const{props:y={}}=i(g),{composite:_=!0}=y;if(!_)s.push(p);else{const{data:E}=p,x=Object.assign(Object.assign({},p),{data:E&&(Array.isArray(E)?E:E.value)}),T=yield r(x,h),S=Array.isArray(T)?T:[T];c.unshift(...S.map((w,C)=>Object.assign(Object.assign({},w),{key:`${v}-${C}`})))}}}return Object.assign(Object.assign({},t),{marks:s,components:l})})}function zNe(t,e){return gy(this,void 0,void 0,function*(){const{library:n}=e,[r]=hs("theme",n),[,i]=hs("mark",n),{theme:a,marks:o,coordinates:s=[]}=t,l=r(WNe(a)),c=new Map;for(const f of o){const{type:h}=f,{props:d={}}=i(h),p=yield Jft(f,d,e);if(p){const[g,v]=p;c.set(g,v)}}const u=Go(Array.from(c.values()).flatMap(f=>f.channels),({scaleKey:f})=>f);for(const f of u.values()){const h=f.reduce((x,{scale:T})=>Nt(x,T),{}),{scaleKey:d}=f[0],{values:p}=f[0],g=Array.from(new Set(p.map(x=>x.field).filter(Yo))),v=Nt({guide:{title:g.length===0?void 0:g},field:g[0]},h),{name:y}=f[0],_=f.flatMap(({values:x})=>x.map(T=>T.value)),E=Object.assign(Object.assign({},_ut(y,_,v,s,l,n)),{uid:Symbol("scale"),key:d});f.forEach(x=>x.scale=E)}return c})}function MX(t,e,n,r){const i=t.theme,a=typeof e=="string"?i[e]||{}:{};return r(Nt(a,Object.assign({type:e},n)))}function $Ne(t,e,n){var r;const[i]=hs("mark",n),[a]=hs("theme",n),[o]=hs("labelTransform",n),{key:s,frame:l=!1,theme:c,clip:u,style:f={},labelTransform:h=[]}=e,d=a(WNe(c)),p=Array.from(t.values()),g=xut(p,e),v=Jut(Qut(Sht(Array.from(g),p,t),e,n)),y=Eft(v,e,d,n),_=dut(y,e,n),E=l?Nt({mainLineWidth:1,mainStroke:"#000"},f):f;Tft(LNe(v),_,y),bft(v);const x=new Map(Array.from(t.values()).flatMap(D=>{const{channels:L}=D;return L.map(({scale:B})=>[B.uid,Dle(B,n)])}));Eut(t,x);const T={};for(const D of v){const{scales:L=[]}=D,B=[];for(const I of L){const{name:U,uid:$}=I,X=(r=x.get($))!==null&&r!==void 0?r:Dle(I,n);B.push(X),U==="y"&&X.update(Object.assign(Object.assign({},X.getOptions()),{xScale:T.x})),kle(T,{[U]:X})}D.scaleInstances=B}const S=[],w=new Map;for(const[D,L]of t.entries()){const{children:B,dataDomain:I,modifier:U,key:$,data:X}=D;w.set($,X);const{index:N,channels:M,tooltip:k}=L,z=Object.fromEntries(M.map(({name:Le,scale:Lt})=>[Le,Lt])),j=$m(z,({uid:Le})=>x.get(Le));kle(T,j);const V=but(M,j),Q=i(D),[ee,re,ne]=fht(Q(N,j,V,_)),le=I||ee.length,ue=U?U(re,le,y):[],ve=Le=>{var Lt,xt;return(xt=(Lt=k.title)===null||Lt===void 0?void 0:Lt[Le])===null||xt===void 0?void 0:xt.value},Se=Le=>k.items.map(Lt=>Lt[Le]),Re=ee.map((Le,Lt)=>{const xt=Object.assign({points:re[Lt],transform:ue[Lt],index:Le,markKey:$,viewKey:s,data:X[Le]},k&&{title:ve(Le),items:Se(Le)});for(const[dt,Bt]of Object.entries(V))xt[dt]=Bt[Le],ne&&(xt[`series${Gp(dt)}`]=ne[Lt].map(At=>Bt[At]));return ne&&(xt.seriesIndex=ne[Lt]),ne&&k&&(xt.seriesItems=ne[Lt].map(dt=>Se(dt)),xt.seriesTitle=ne[Lt].map(dt=>ve(dt))),xt});L.data=Re,L.index=ee;const Xe=B?.(Re,j,y);S.push(...Xe||[])}return[{layout:y,theme:d,coordinate:_,markState:t,key:s,clip:u,scale:T,style:E,components:v,data:w,options:e,labelTransform:NQ(h.map(o))},S]}function PX(t,e,n,r){return gy(this,void 0,void 0,function*(){const{library:i}=r,{components:a,theme:o,layout:s,markState:l,coordinate:c,key:u,style:f,clip:h,scale:d}=t,{x:p,y:g,width:v,height:y}=s,_=V_(s,["x","y","width","height"]),E=["view","plot","main","content"],x=E.map((k,z)=>z),T=["a","margin","padding","inset"],S=E.map(k=>qwe(Object.assign({},o.view,f),k)),w=T.map(k=>Vn(_,k)),C=k=>k.style("x",z=>U[z].x).style("y",z=>U[z].y).style("width",z=>U[z].width).style("height",z=>U[z].height).each(function(z,j,V){Tht(ai(V),S[z])});let D=0,L=0,B=v,I=y;const U=x.map(k=>{const z=w[k],{left:j=0,top:V=0,bottom:Q=0,right:ee=0}=z;return D+=j,L+=V,B-=j+ee,I-=V+Q,{x:D,y:L,width:B,height:I}});e.selectAll(Fp(zse)).data(x.filter(k=>Yo(S[k])),k=>E[k]).join(k=>k.append("rect").attr("className",zse).style("zIndex",-2).call(C),k=>k.call(C),k=>k.remove());const $=ght(l),X=$?{duration:$[1]}:!1;for(const[,k]of MK(a,z=>`${z.type}-${z.position}`))k.forEach((z,j)=>z.index=j);const N=e.selectAll(Fp(jse)).data(a,k=>`${k.type}-${k.position}-${k.index}`).join(k=>k.append("g").style("zIndex",({zIndex:z})=>z||-1).attr("className",jse).append(z=>Hle(Nt({animate:X,scale:d},z),c,o,i,l)),k=>k.transition(function(z,j,V){const{preserve:Q=!1}=z;if(Q)return;const ee=Hle(Nt({animate:X,scale:d},z),c,o,i,l),{attributes:re}=ee,[ne]=V.childNodes;return ne.update(re,!1)})).transitions();n.push(...N.flat().filter(Yo));const M=e.selectAll(Fp(W_)).data([s],()=>u).join(k=>k.append("rect").style("zIndex",0).style("fill","transparent").attr("className",W_).call(Yle).call(Xle,Array.from(l.keys())).call(qle,h),k=>k.call(Xle,Array.from(l.keys())).call(Yle).call(qle,h)).transitions();n.push(...M.flat());for(const[k,z]of l.entries()){const{data:j}=z,{key:V,class:Q,type:ee}=k,re=e.select(`#${V}`),ne=yht(k,z,t,r),le=_ht(k,z,t,i),ue=Eht(k,z,t,i),ve=xht(k,z,t,i),Se=vht(e,re,Q,"element"),Re=re.selectAll(Fp(pm)).selectFacetAll(Se).data(j,Xe=>Xe.key,Xe=>Xe.groupKey).join(Xe=>Xe.append(ne).attr("className",pm).attr("markType",ee).transition(function(Le,Lt,xt){return le(Le,[xt])}),Xe=>Xe.call(Le=>{const Lt=Le.parent(),xt=mGe(dt=>{const[Bt,At]=dt.getBounds().min;return[Bt,At]});Le.transition(function(dt,Bt,At){mht(At,Lt,xt);const zt=ne(dt,Bt),rn=ue(dt,[At],[zt]);return rn?.length||(At.nodeName===zt.nodeName&&zt.nodeName!=="g"?QF(At,zt):(At.parentNode.replaceChild(zt,At),zt.className=pm,zt.markType=ee,zt.__data__=At.__data__)),rn}).each(function(dt,Bt,At){At.__removed__&&(At.__removed__=!1)}).attr("markType",ee).attr("className",pm)}),Xe=>Xe.each(function(Le,Lt,xt){xt.__removed__=!0}).transition(function(Le,Lt,xt){return ve(Le,[xt])}).remove(),Xe=>Xe.append(ne).attr("className",pm).attr("markType",ee).transition(function(Le,Lt,xt){const{__fromElements__:dt}=xt,Bt=ue(Le,dt,[xt]);return new CD(dt,null,xt.parentNode).transition(Bt).remove(),Bt}),Xe=>Xe.transition(function(Le,Lt,xt){const Bt=new CD([],xt.__toData__,xt.parentNode).append(ne).attr("className",pm).attr("markType",ee).nodes();return ue(Le,[xt],Bt)}).remove()).transitions();n.push(...Re.flat())}lht(t,e,n,i,r),uht(t,e,i,r)})}function lht(t,e,n,r,i){const[a]=hs("labelTransform",r),{markState:o,labelTransform:s}=t,l=e.select(Fp(EX)).node(),c=new Map,u=new Map,f=Array.from(o.entries()).flatMap(([y,_])=>{const{labels:E=[],key:x}=y,T=pht(y,_,t,r,i),S=e.select(`#${x}`).selectAll(Fp(pm)).nodes().filter(w=>{var C;return w.__removed__?!1:!(((C=w.style)===null||C===void 0?void 0:C.visibility)==="hidden"||w.children&&w.children.some(L=>{var B;return((B=L.style)===null||B===void 0?void 0:B.visibility)==="hidden"}))});return E.flatMap((w,C)=>{const{transform:D=[]}=w,L=V_(w,["transform"]);return S.flatMap(B=>{const I=cht(L,C,B);return I.forEach(U=>{c.set(U,$=>T(Object.assign(Object.assign({},$),{element:B}))),u.set(U,w)}),I})})}),h=ai(l).selectAll(Fp(xX)).data(f,y=>y.key).join(y=>y.append(_=>c.get(_)(_)).attr("className",xX),y=>y.each(function(_,E,x){const S=c.get(_)(_);QF(x,S)}),y=>y.remove()).nodes(),d=Go(h,y=>u.get(y.__data__)),{coordinate:p,layout:g}=t,v={canvas:i.canvas,coordinate:p,layout:g};for(const[y,_]of d){const{transform:E=[]}=y;NQ(E.map(a))(_,v)}s&&s(h,v)}function cht(t,e,n){const{seriesIndex:r,seriesKey:i,points:a,key:o,index:s}=n.__data__,l=dht(n);if(!r)return[Object.assign(Object.assign({},t),{key:`${o}-${e}`,bounds:l,index:s,points:a,dependentElement:n})];const c=hht(t),u=r.map((f,h)=>Object.assign(Object.assign({},t),{key:`${i[h]}-${e}`,bounds:[a[h]],index:f,points:a,dependentElement:n}));return c?c(u):u}function uht(t,e,n,r){const i=t.scale,a=Wr(i,"y.options.breaks",[]),{document:o}=r.canvas;if([z7,CMe].forEach(u=>{o.getElementsByClassName(u).forEach(f=>{f.remove()})}),!a.length)return;const s=e.select(Fp(W_)).node(),[l]=hs("shape",n),c=new Map;a.forEach((u,f)=>{c.set(u,l({type:"break"},{view:t,selection:e,context:r}))}),ai(s).selectAll(Fp(z7)).data(a,u=>u.key).join(u=>u.append((f,h)=>c.get(f)(f,h)).attr("className",z7),u=>u.each(function(f,h,d){const g=c.get(f)(f,h);QF(d,g)}),u=>u.remove()).nodes()}function fht([t,e,n]){if(n)return[t,e,n];const r=[],i=[];for(let a=0;a<t.length;a++){const o=t[a],s=e[a];s.every(([l,c])=>Yo(l)&&Yo(c))&&(r.push(o),i.push(s))}return[r,i]}function hht(t){const{selector:e}=t;if(!e)return null;if(typeof e=="function")return e;if(e==="first")return n=>[n[0]];if(e==="last")return n=>[n[n.length-1]];throw new Error(`Unknown selector: ${e}`)}function dht(t){const e=t.cloneNode(!0),n=t.getAnimations();e.style.visibility="hidden",n.forEach(o=>{const s=o.effect.getKeyframes();e.attr(s[s.length-1])}),t.parentNode.appendChild(e);const r=e.getLocalBounds();e.destroy();const{min:i,max:a}=r;return[i,a]}function pht(t,e,n,r,i){const[a]=hs("shape",r),{data:o,encode:s}=t,{data:l,defaultLabelShape:c}=e,u=l.map(g=>g.points),f=$m(s,g=>g.value),{theme:h,coordinate:d}=n,p=Object.assign(Object.assign({},i),{document:CNe(i),theme:h,coordinate:d});return g=>{const{index:v,points:y}=g,_=o[v],{formatter:E=z=>`${z}`,transform:x,style:T,render:S,selector:w,element:C}=g,D=V_(g,["formatter","transform","style","render","selector","element"]),L=$m(Object.assign(Object.assign({},D),T),z=>HNe(z,_,v,o,{channel:f,element:C})),{shape:B=c,text:I}=L,U=V_(L,["shape","text"]),$=typeof E=="string"?$x(E):E,X=Object.assign(Object.assign({},U),{text:$(I,_,v,o),datum:_}),N=Object.assign({type:`label.${B}`,render:S},U),M=a(N,p),k=GNe(h,"label",B,"label");return M(y,X,k,u)}}function HNe(t,e,n,r,i){return typeof t=="function"?t(e,n,r,i):typeof t!="string"?t:$A(e)&&e[t]!==void 0?e[t]:t}function ght(t){let e=-1/0,n=1/0;for(const[r,i]of t){const{animate:a={}}=r,{data:o}=i,{enter:s={},update:l={},exit:c={}}=a,{type:u,duration:f=300,delay:h=0}=l,{type:d,duration:p=300,delay:g=0}=s,{type:v,duration:y=300,delay:_=0}=c;for(const E of o){const{updateType:x=u,updateDuration:T=f,updateDelay:S=h,enterType:w=d,enterDuration:C=p,enterDelay:D=g,exitDuration:L=y,exitDelay:B=_,exitType:I=v}=E;(x===void 0||x)&&(e=Math.max(e,T+S),n=Math.min(n,S)),(I===void 0||I)&&(e=Math.max(e,L+B),n=Math.min(n,B)),(w===void 0||w)&&(e=Math.max(e,C+D),n=Math.min(n,D))}}return e===-1/0?null:[n,e-n]}function vht(t,e,n,r){const i=t.node().parentElement;return!i||typeof i.findAll!="function"?[]:i.findAll(a=>a.style.facet!==void 0&&a.style.facet===n&&a!==e.node()).flatMap(a=>a.getElementsByClassName(r))}function mht(t,e,n){if(!t.__facet__)return;const r=t.parentNode.parentNode,i=e.parentNode,[a,o]=n(r),[s,l]=n(i),c=`translate(${a-s}, ${o-l})`;yGe(t,c),e.append(t)}function yht(t,e,n,r){const{library:i}=r,[a]=hs("shape",i),{data:o,encode:s}=t,{defaultShape:l,data:c,shape:u}=e,f=$m(s,_=>_.value),h=c.map(_=>_.points),{theme:d,coordinate:p}=n,{type:g,style:v={}}=t,y=Object.assign(Object.assign({},r),{document:CNe(r),coordinate:p,theme:d});return _=>{const{shape:E=l}=v,{shape:x=E,points:T,seriesIndex:S,index:w}=_,C=V_(_,["shape","points","seriesIndex","index"]),D=Object.assign(Object.assign({},C),{index:w}),L=S?S.map(X=>o[X]):o[w],B=S||w,I=$m(v,X=>HNe(X,L,B,o,{channel:f})),U=u[x]?u[x](I,y):a(Object.assign(Object.assign({},I),{type:YNe(t,x)}),y),$=GNe(d,g,x,l);return U(T,D,$,h)}}function GNe(t,e,n,r){if(typeof e!="string")return;const{color:i}=t,a=t[e]||{},o=a[n]||a[r];return Object.assign({color:i},o)}function Pee(t,e,n,r,i){var a,o;const[,s]=hs("shape",i),[l]=hs("animation",i),{defaultShape:c,shape:u}=n,{theme:f,coordinate:h}=r,p=`default${Gp(t)}Animation`,{[p]:g}=((a=u[c])===null||a===void 0?void 0:a.props)||s(YNe(e,c)).props,{[t]:v={}}=f,y=((o=e.animate)===null||o===void 0?void 0:o[t])||{},_={coordinate:h};return(E,x,T)=>{const{[`${t}Type`]:S,[`${t}Delay`]:w,[`${t}Duration`]:C,[`${t}Easing`]:D}=E,L=Object.assign({type:S||g},y);if(!L.type)return null;const U=l(L,_)(x,T,Nt(v,{delay:w,duration:C,easing:D}));let $=[];return Array.isArray(U)?$=U:$=[U],$.filter(Boolean)}}function _ht(t,e,n,r){return Pee("enter",t,e,n,r)}function bht(t){return t.finished.then(()=>{t.cancel()}),t}function Eht(t,e,n,r){return Pee("update",t,e,n,r)}function xht(t,e,n,r){return Pee("exit",t,e,n,r)}function WNe(t={}){if(typeof t=="string")return{type:t};const{type:e="light"}=t,n=V_(t,["type"]);return Object.assign(Object.assign({},n),{type:e})}function eB(t){const e={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:n={}}=t;return Object.entries(Nt(e,n)).reverse()}function VNe(t,e){return gy(this,void 0,void 0,function*(){const{data:n}=t,r=V_(t,["data"]);if(n==null)return t;const[,{data:i}]=yield FNe([],{data:n},e);return Object.assign({data:i},r)})}function Yle(t){t.style("transform",e=>`translate(${e.paddingLeft+e.marginLeft}, ${e.paddingTop+e.marginTop})`).style("width",e=>e.innerWidth).style("height",e=>e.innerHeight)}function YNe(t,e){const{type:n}=t;return typeof e=="string"?`${n}.${e}`:e}function Xle(t,e){const n=a=>a.class!==void 0?`${a.class}`:"";t.nodes().length===0||(t.selectAll(Fp(Use)).data(e,a=>a.key).join(a=>a.append("g").attr("className",Use).attr("id",o=>o.key).style("facet",n).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.style("facet",n).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.remove()),t.select(Fp(EX)).node())||t.append("g").attr("className",EX).style("zIndex",0)}function Fp(...t){return t.map(e=>`.${e}`).join("")}function qle(t,e){t.node()&&t.style("clipPath",n=>{if(!e)return null;const{paddingTop:r,paddingLeft:i,marginLeft:a,marginTop:o,innerWidth:s,innerHeight:l}=n;return new Wx({style:{x:i+a,y:r+o,width:s,height:l}})})}function Sht(t,e,n){var r;for(const[c]of n.entries())if(c.type==="cell")return t.filter(u=>u.name!=="shape");if(e.length!==1||t.some(c=>c.name==="shape"))return t;const{defaultShape:i}=e[0];if(!["point","line","rect","hollow"].includes(i))return t;const o={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},l={field:((r=t.find(c=>c.name==="color"))===null||r===void 0?void 0:r.field)||null,name:"shape",type:"constant",domain:[],range:[o[i]]};return[...t,l]}function Tht(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}function Aht(...t){return e=>t.reduce((n,r)=>r(n),e)}function wht(t){const{style:e,scale:n,type:r}=t,i={},a=Wr(e,"columnWidthRatio");return a&&r==="interval"&&(i.x=Object.assign(Object.assign({},n?.x),{padding:1-a})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},n),i)})}const Oht=t=>{if(!t||typeof t!="string")return t;const e=t.endsWith("%")?parseFloat(t.slice(0,-1))/100:parseFloat(t);if(isNaN(e)||e<0||e>1)throw new Error(`Invalid gap value: ${t}. It should be between 0 and 1.`);return e};function Cht(t){const{axis:e}=t,n=Wr(e,"y.breaks");return n&&H_(t,"scale.y.breaks",n.map(r=>Object.assign(Object.assign({key:`break-${r.start}-${r.end}`},r),{gap:Oht(r.gap)}))),t}function XNe(t){const e=Rht(t);return e.children&&Array.isArray(e.children)&&(e.children=e.children.map(n=>XNe(n))),e}function Rht(t){return Aht(wht,Cht)(t)}function Mht(t){const e=Nt({},t),n=new Map([[e,null]]),r=new Map([[null,-1]]),i=[e];for(;i.length;){const a=i.shift();if(a.key===void 0){const s=n.get(a),l=r.get(a),c=s===null?"0":`${s.key}-${l}`;a.key=c}const{children:o=[]}=a;if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=Nt({},o[s]);o[s]=l,n.set(l,a),r.set(l,s),i.push(l)}}return e}function Pht(t,e){const n=new xx;return n.registerPlugin(new bee),new O2e({width:t,height:e,container:document.createElement("div"),renderer:n})}function Nht(t,e={},n=()=>{},r=i=>{throw i}){const i=lk(t),{width:a=640,height:o=480,depth:s=0}=i,l=XNe(i),c=Mht(l),{canvas:u=Pht(a,o),emitter:f=new Jm,library:h}=e;e.canvas=u,e.emitter=f,e.externals={};const{width:d,height:p}=u.getConfig();(d!==a||p!==o)&&u.resize(a,o),f.emit(ao.BEFORE_RENDER);const g=ai(u.document.documentElement);return u.ready.then(()=>Mee(Object.assign(Object.assign({},c),{width:a,height:o,depth:s}),g,e)).then(()=>{if(s){const[v,y]=u.document.documentElement.getPosition();u.document.documentElement.setPosition(v,y,-s/2)}u.requestAnimationFrame(()=>{u.requestAnimationFrame(()=>{f.emit(ao.AFTER_RENDER),n?.()})})}).catch(v=>{r?.(v)}),Lht(u.getConfig().container)}function Zle(t,e={},n=!1,r=!0){const{canvas:i,emitter:a}=e;i&&(Iht(i),n?i.destroy():i.destroyChildren()),r&&a.off()}function Iht(t){const e=t.getRoot().querySelectorAll(`.${GD}`);e?.forEach(n=>{const{nameInteraction:r=new Map}=n;r?.size>0&&Array.from(r?.values()).forEach(i=>{i?.destroy()})})}function Lht(t){return typeof t=="string"?document.getElementById(t):t}function kht(t,e,n){return Math.min(n,Math.max(e,t))}function vy(t){return!!t.getBandWidth}function QA(t,e,n){if(!vy(t))return t.invert(e);const{adjustedRange:r}=t;if(r.includes(e))return t.invert(e);const{domain:i}=t.getOptions(),a=n?-1:0,o=t.getStep(),s=n?r:r.map(u=>u+o),l=A7e(s,e),c=kht(l+a,0,i.length-1);return i[c]}function x_(t,e,n){if(!e)return t.getOptions().domain;if(!vy(t)){const l=Xg(e);if(!n)return l;const[c]=l,{range:u}=t.getOptions(),[f,h]=u,d=f>h?-1:1,p=t.invert(t.map(c)+d*n);return[c,p]}const{domain:r}=t.getOptions(),i=e[0],a=r.indexOf(i);if(n){const l=a+Math.round(r.length*n);return r.slice(a,l)}const o=e[e.length-1],s=r.indexOf(o);return r.slice(a,s+1)}function ck(t,e,n,r,i,a){const{x:o,y:s}=i,l=(d,p)=>{const[g,v]=a.invert(d);return[QA(o,g,p),QA(s,v,p)]},c=l([t,e],!0),u=l([n,r],!1),f=x_(o,[c[0],u[0]]),h=x_(s,[c[1],u[1]]);return[f,h]}function Kle(t,e){const[n,r]=t,i=a=>a.getStep?a.getStep():0;return[e.map(n),e.map(r)+i(e)]}const Qle=(t,e)=>{var n,r;const[i,a]=t,o=((r=(n=e.getOptions)===null||n===void 0?void 0:n.call(e))===null||r===void 0?void 0:r.domain)||[],s=o.indexOf(i),l=o.indexOf(a);if(s===-1||l===-1)return[e.map(i),e.map(a)];const c=o.length;return c<=1?[0,1]:[s/(c-1),l/(c-1)]};function Dht(t,e,n){const{x:r,y:i}=e,[a,o]=t,s=Kle(a,r),l=Kle(o,i),c=[s[0],l[0]],u=[s[1],l[1]],[f,h]=n.map(c),[d,p]=n.map(u);return[f,h,d,p]}function JR(t,e){if(e(t))return!0;if(t.tagName==="g"){const{childNodes:n=[]}=t;for(const r of n)if(JR(r,e))return!0}return!1}const Bht={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function Fht(t,e){let n;return JR(t,r=>{var i;return r.tagName!=="g"&&((i=r.style)===null||i===void 0?void 0:i[e])!==void 0?(n=r.style[e],!0):!1}),n??Bht[e]}function Nee(t,e,n,r){t.style[e]=n,t.children.forEach(i=>Nee(i,e,n))}function Iee(t){Nee(t,"visibility","hidden")}function z4(t){Nee(t,"visibility","visible")}var $C=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Py(t){return ai(t).selectAll(`.${pm}`).nodes().filter(e=>!e.__removed__)}function qNe(t,e){return NX(t,e).flatMap(({container:n})=>Py(n))}function NX(t,e){return e.filter(n=>n!==t&&n.options.parentKey===t.options.key)}function Kp(t){return ai(t).select(`.${W_}`).node()}function eM(t){if(t.tagName==="g")return t.getRenderBounds();const e=t.getGeometryBounds(),n=new tf;return n.setFromTransformedAABB(e,t.getWorldTransform()),n}function Sx(t,e){const{offsetX:n,offsetY:r}=e,i=eM(t),{min:[a,o],max:[s,l]}=i,c=n<a||n>s,u=r<o||r>l;return c||u?null:[n-a,r-o]}function J7(t,e){const{offsetX:n,offsetY:r}=e,[i,a,o,s]=Uht(t);return[Math.min(o,Math.max(i,n))-i,Math.min(s,Math.max(a,r))-a]}function Uht(t){const e=t.getRenderBounds(),{min:[n,r],max:[i,a]}=e;return[n,r,i,a]}function ZNe(t){return e=>e.__data__.color}function zP(t){return e=>e.__data__.x}function Y_(t){const e=Array.isArray(t)?t:[t],n=new Map(e.flatMap(r=>Array.from(r.markState.keys()).map(a=>[tB(r.key,a.key),a.data])));return r=>{const{index:i,markKey:a,viewKey:o}=r.__data__;return n.get(tB(o,a))[i]}}const Jle={selected:3,unselected:3,active:2,inactive:2,default:1},jht={selection:["selected","unselected"],highlight:["active","inactive"]},KNe=(t,e,n)=>{JR(t,r=>{"setAttribute"in r&&typeof r.setAttribute=="function"&&r.setAttribute(e,n)})};function Lee(t,e){return e.forEach(n=>{const r=n.__interactionStyle__;r?n.__interactionStyle__=Object.assign(Object.assign({},r),t):n.__interactionStyle__=t}),(n=(i,a)=>i,r=KNe)=>D_(void 0,n,r)}function D_(t,e=(r,i)=>r,n=KNe){const r="__states__",i="__ordinal__",a=d=>Jle[d]||Jle.default,o=d=>{var p;return(p=Object.entries(jht).find(([g,v])=>v.includes(d)))===null||p===void 0?void 0:p[0]},s=d=>{var p;const{[r]:g=[],[i]:v={}}=d,y=[...g].sort((x,T)=>a(T)-a(x)),_=new Map;for(const x of y){const T=((p=t??d.__interactionStyle__)===null||p===void 0?void 0:p[x])||{};for(const[S,w]of Object.entries(T))_.has(S)||_.set(S,w)}const E=Object.assign({},v);for(const[x,T]of _.entries())E[x]=T;if(Object.keys(E).length!==0){for(const[x,T]of Object.entries(E)){const S=Fht(d,x),w=e(T,d);n(d,x,w),x in v||(v[x]=S)}d[i]=v}},l=d=>{d[r]||(d[r]=[])};return{setState:(d,...p)=>{l(d),d[r]=[...p],s(d)},updateState:(d,...p)=>{l(d);const g=d[r],v=new Set(p.map(_=>o(_)).filter(_=>_!==void 0)),y=g.filter(_=>!v.has(o(_)));d[r]=[...y,...p],s(d)},removeState:(d,...p)=>{l(d);for(const g of p){const v=d[r].indexOf(g);v!==-1&&d[r].splice(v,1)}s(d)},hasState:(d,p)=>(l(d),d[r].indexOf(p)!==-1)}}function zht(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function tB(t,e){return`${t},${e}`}function Tx(t,e){const r=(Array.isArray(t)?t:[t]).flatMap(a=>a.marks.map(o=>[tB(a.key,o.key),o.state])),i={};for(const a of e){const[o,s]=Array.isArray(a)?a:[a,{}];i[o]=r.reduce((l,c)=>{const[u,f={}]=c,h=zht(f[o])?s:f[o];for(const[d,p]of Object.entries(h)){const g=l[d],v=(y,_,E,x)=>{const T=tB(x.__data__.viewKey,x.__data__.markKey);return u!==T?g?.(y,_,E,x):typeof p!="function"?p:p(y,_,E,x)};l[d]=v}return l},{})}return i}function Bw(t,e){const n=new Map(t.map((i,a)=>[i,a])),r=e?t.map(e):t;return(i,a)=>{if(typeof i!="function")return i;const o=n.get(a),s=e?e(a):a;return i(s,o,r,a)}}function QNe(t){var{link:e=!1,valueof:n=(u,f)=>u,coordinate:r}=t,i=$C(t,["link","valueof","coordinate"]);const a="element-link";if(!e)return[()=>{},()=>{}];const o=u=>u.__data__.points,s=(u,f)=>{const[,h,d]=u,[p,,,g]=f;return[h,p,g,d]};return[u=>{var f;if(u.length<=1)return;const h=Xg(u,(d,p)=>{const{x:g}=d.__data__,{x:v}=p.__data__;return g-v});for(let d=1;d<h.length;d++){const p=iv(),g=h[d-1],v=h[d],[y,_,E,x]=s(o(g),o(v));p.moveTo(...y),p.lineTo(..._),p.lineTo(...E),p.lineTo(...x),p.closePath();const T=$m(i,D=>n(D,g)),{fill:S=g.getAttribute("fill")}=T,w=$C(T,["fill"]),C=new Kf({className:a,style:Object.assign({d:p.toString(),fill:S,zIndex:-2},w)});(f=g.link)===null||f===void 0||f.remove(),g.parentNode.appendChild(C),g.link=C}},u=>{var f;(f=u.link)===null||f===void 0||f.remove(),u.link=null}]}function JNe(t,e,n){const r=i=>{const{transform:a}=t.style;return a?`${a} ${i}`:i};if(Mo(n)){const{points:i}=t.__data__,[a,o]=as(n)?v4(i):i,s=n.getCenter(),l=ul(a,s),c=ul(o,s),u=Vp(l),f=MOe(l,c),h=u+f/2,d=e*Math.cos(h),p=e*Math.sin(h);return r(`translate(${d}, ${p})`)}return as(n)?r(`translate(${e}, 0)`):r(`translate(0, ${-e})`)}function e3e(t){var{document:e,background:n,scale:r,coordinate:i,valueof:a}=t,o=$C(t,["document","background","scale","coordinate","valueof"]);const s="element-background";if(!n)return[()=>{},()=>{}];const l=(y,_,E)=>{const x=y.invert(_),T=_+y.getBandWidth(x)/2,S=y.getStep(x)/2,w=S*E;return[T-S+w,T+S-w]},c=(y,_)=>{const{x:E}=r;if(!vy(E))return[0,1];const{__data__:x}=y,{x:T}=x,[S,w]=l(E,T,_);return[S,w]},u=(y,_)=>{const{y:E}=r;if(!vy(E))return[0,1];const{__data__:x}=y,{y:T}=x,[S,w]=l(E,T,_);return[S,w]},f=(y,_)=>{const{padding:E}=_,[x,T]=c(y,E),[S,w]=u(y,E),C=[[x,S],[T,S],[T,w],[x,w]].map(I=>i.map(I)),{__data__:D}=y,{y:L,y1:B}=D;return F2e(e,C,{y:L,y1:B},i,_)},h=(y,_)=>{const{transform:E="scale(1.2, 1.2)",transformOrigin:x="center center",stroke:T=""}=_,S=$C(_,["transform","transformOrigin","stroke"]),w=Object.assign({transform:E,transformOrigin:x,stroke:T},S),C=y.cloneNode(!0);for(const[D,L]of Object.entries(w))C.style[D]=L;return C},d=()=>{const{x:y,y:_}=r;return[y,_].some(vy)};return[y=>{y.background&&y.background.remove();const _=$m(o,I=>a(I,y)),{fill:E="#CCD6EC",fillOpacity:x=.3,zIndex:T=-2,padding:S=.001,lineWidth:w=0}=_,C=$C(_,["fill","fillOpacity","zIndex","padding","lineWidth"]),D=Object.assign(Object.assign({},C),{fill:E,fillOpacity:x,zIndex:T,padding:S,lineWidth:w}),B=(d()?f:h)(y,D);B.className=s,y.parentNode.parentNode.appendChild(B),y.background=B},y=>{var _;(_=y.background)===null||_===void 0||_.remove(),y.background=null},y=>y.className===s]}function o_(t,e){const r=t.getRootNode().defaultView.getContextService().getDomElement();r?.style&&(t.cursor=r.style.cursor,r.style.cursor=e)}function $ht(t){o_(t,t.cursor)}function $4(t,e,n){return t.find(r=>Object.entries(e).every(([i,a])=>n(r)[i]===a))}function nB(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function u2(t,e=!1){const n=sQ(t,r=>!!r).map((r,i)=>[i===0?"M":"L",...r]);return e&&n.push(["Z"]),n}function t3e(t){return t.querySelectorAll(".element")}function Hht(t,e,n=0){const r=[["M",...e[1]]],i=nB(t,e[1]),a=nB(t,e[0]);return i===0?r.push(["L",...e[3]],["A",a,a,0,n,1,...e[0]],["Z"]):r.push(["A",i,i,0,n,0,...e[2]],["L",...e[3]],["A",a,a,0,n,1,...e[0]],["Z"]),r}function $P(t,e){if(e(t))return t;let n=t.parent;for(;n&&!e(n);)n=n.parent;return n}const kee=["interval","point","density"];function n3e({elementsof:t,root:e,coordinate:n,scale:r,validFindByXMarks:i=kee}){var a,o;let s=t(e);const l=u=>i.includes(u.markType);if(s.find(l)){s=s.filter(l);const u=r.x,f=r.series,h=(o=(a=u?.getBandWidth)===null||a===void 0?void 0:a.call(u))!==null&&o!==void 0?o:0,d=f?p=>{var g,v;const y=Math.round(1/((g=f.valueBandWidth)!==null&&g!==void 0?g:1));return p.__data__.x+((v=p.__data__.series)!==null&&v!==void 0?v:0)*h+h/(y*2)}:p=>p.__data__.x+h/2;return s.sort((p,g)=>d(p)-d(g)),p=>{const g=Sx(e,p);if(!g)return;const[v]=n.invert(g),y=qE(d).center,_=y(s,v);return s[_]}}return u=>{const{target:f}=u;return $P(f,h=>h.classList?h.classList.includes("element"):!1)}}function Ght(t){const a=.01/Math.max(t,1e-4);return Math.max(.1,Math.min(100,a))}function r3e(t){return t===!1||t===null||t===void 0}function Wht(t){var e,n;const r=[],i=[],a=[],o=t.markState;if(o){for(const[s,l]of o.entries())if(l?.channels){const c={};for(const h of l.channels)if(h?.name==="x"&&((e=h.values)===null||e===void 0?void 0:e.length)>0){let d=[];for(const p of h.values)p?.value&&(d=d.concat(p.value),r.push(p.value));c.x=d}else if(h&&(h.name==="y"||h.name.startsWith("y"))&&((n=h.values)===null||n===void 0?void 0:n.length)>0){const d=h.name,p=[];for(const g of h.values)if(g?.value){const v=g.value;p.push(v),(d==="y"||d==="y1")&&(Array.isArray(v)?i.push(v.flat()):i.push([v]))}c[d]=p}const u=c.x||[],f=c.y||[];u.length>0&&f.length>0&&a.push({markKey:s.key||`mark_${a.length}`,channelData:c})}}return{xChannelValues:r.flat(),yChannelValues:i.flat(),markDataPairs:a}}function ece(t,e){const n=new Set;for(const r of e){const{scale:i}=r,a=i?.[t];if(!a)continue;if(a.independent)return!0;const o=a.key||"default";if(n.add(o),n.size>1)return!0}return!1}function Vht(t,e,n,r,i){var a,o,s,l;const c={x:e.x||n.getOptions().domain||[],y:e.y||r.getOptions().domain||[]},u=i||i3e(t),{hasIndependentX:f,hasIndependentY:h}=u;if(f||h){let d=1,p=1;for(const[g,v]of t.markState.entries())if(v?.channels){if(f){const y=v.channels.find(_=>_.name==="x");if(!((o=(a=g?.scale)===null||a===void 0?void 0:a.x)===null||o===void 0)&&o.independent){const _=`x${d}`;c[_]=y.scale.domain,d++}}if(h){const y=v.channels.find(_=>_.name==="y");if(!((l=(s=g?.scale)===null||s===void 0?void 0:s.y)===null||l===void 0)&&l.independent){const _=`y${p}`;c[_]=y.scale.domain,p++}}}}return c}function i3e(t){var e,n,r,i,a,o,s,l;const c=Array.from(t.markState.keys()),u=ece("x",c),f=ece("y",c),h=[],d=[],p=[],g=[],v=new Map,y=new Map,_=new Map,E=new Map;let x=1,T=1;for(const[S]of t.markState.entries()){const w=S.key,C=((n=(e=S?.scale)===null||e===void 0?void 0:e.x)===null||n===void 0?void 0:n.key)||"x";if(!!(!((i=(r=S?.scale)===null||r===void 0?void 0:r.x)===null||i===void 0)&&i.independent)||u&&C!=="x"){d.push(w),_.has(C)||_.set(C,x++);const I=_.get(C);v.set(w,`x${I}`)}else h.push(w),v.set(w,"x");const L=((o=(a=S?.scale)===null||a===void 0?void 0:a.y)===null||o===void 0?void 0:o.key)||"y";if(!!(!((l=(s=S?.scale)===null||s===void 0?void 0:s.y)===null||l===void 0)&&l.independent)||f&&L!=="y"){g.push(w),E.has(L)||E.set(L,T++);const I=E.get(L);y.set(w,`y${I}`)}else p.push(w),y.set(w,"y")}return{hasIndependentX:u,hasIndependentY:f,marksWithSharedX:h,marksWithIndependentX:d,marksWithSharedY:p,marksWithIndependentY:g,markToXScaleMap:v,markToYScaleMap:y}}var Tm=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const a3e="legend-category",Dee="legend-html-category",Yht="legend-continuous",Xht="items-item",qht="legend-category-item-marker",Zht="legend-category-item-label",Kht="legend-category-item-focus-group";function o3e(t){return t.getElementsByClassName(qht)[0]}function s3e(t){return t.getElementsByClassName(Zht)[0]}function tce(t){return t.getElementsByClassName(Kht)[0]}function l3e(t){return t.getElementsByClassName(Xht)}function Bee(t){return t.getElementsByClassName(a3e)}function Qht(t){return t.getElementsByClassName(Dee)}function c3e(t){return t.getElementsByClassName(Yht)}function Jht(t,e){[...Bee(t),...c3e(t)].forEach(r=>{e(r,i=>i)})}function IX(t){let e=t.parentNode;for(;e&&!e.__data__;)e=e.parentNode;return e.__data__}function edt(t,e,n){var r;const i=Object.keys(t).find(a=>{if(a.startsWith(n)){const o=t[a].getOptions();return o.name===n&&o.markKey===e}});return(r=t[i])!==null&&r!==void 0?r:t[n]}function tdt(t,{legends:e,marker:n,label:r,datum:i,filter:a,defaultSelect:o,emitter:s,channel:l,state:c={}}){const u=new Map,f=new Map,h=new Map,d=new Map,{unselected:p={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=c,g={unselected:Vn(p,"marker")},v={unselected:Vn(p,"label")},{setState:y,removeState:_}=D_(g,void 0),{setState:E,removeState:x}=D_(v,void 0),T=Array.from(e(t));let S=T.map(i);const w=()=>{for(const B of T){const I=i(B),U=n(B),$=r(B);S.includes(I)?(_(U,"unselected"),x($,"unselected")):(y(U,"unselected"),E($,"unselected"))}};for(const B of T){const I=()=>{o_(t,"pointer")},U=()=>{$ht(t)},$=N=>Tm(this,void 0,void 0,function*(){const M=i(B),k=S.indexOf(M);k===-1?S.push(M):S.splice(k,1),yield a(S),w();const{nativeEvent:z=!0}=N;z&&(S.length===T.length?s.emit("legend:reset",{nativeEvent:z}):s.emit("legend:filter",Object.assign(Object.assign({},N),{nativeEvent:z,data:{channel:l,values:S}})))});B.addEventListener("click",$),B.addEventListener("pointerenter",I),B.addEventListener("pointerout",U),u.set(B,$),f.set(B,I),h.set(B,U);const X=tce(B);if(X){const N=M=>Tm(this,void 0,void 0,function*(){M.stopPropagation();const k=i(B),z=S.indexOf(k),{nativeEvent:j=!0}=M;if(z!==-1&&S.length===1){if(!j)return;S=T.map(i),yield a(S),w(),s.emit("legend:reset",{nativeEvent:j})}else{if(S=[k],yield a(S),w(),!j)return;s.emit("legend:focus",Object.assign(Object.assign({},M),{nativeEvent:j,data:{channel:l,value:k}}))}});X.addEventListener("click",N),d.set(B,N)}}const C=B=>Tm(this,void 0,void 0,function*(){const{nativeEvent:I}=B;if(I)return;const{data:U}=B,{channel:$,value:X}=U;$===l&&(S=[X],yield a(S),w())}),D=B=>Tm(this,void 0,void 0,function*(){const{nativeEvent:I}=B;if(I)return;const{data:U}=B,{channel:$,values:X}=U;$===l&&(S=X,yield a(S),w())}),L=B=>Tm(this,void 0,void 0,function*(){const{nativeEvent:I}=B;I||(S=T.map(i),yield a(S),w())});return s.on("legend:filter",D),s.on("legend:focus",C),s.on("legend:reset",L),o&&s.emit("legend:filter",{data:{channel:l,values:o}}),()=>{for(const B of T){B.removeEventListener("click",u.get(B)),B.removeEventListener("pointerenter",f.get(B)),B.removeEventListener("pointerout",h.get(B));const I=tce(B);I&&I.removeEventListener("click",d.get(B))}s.off("legend:focus",C),s.off("legend:filter",D),s.off("legend:reset",L)}}function ndt(t,{domain:e,filter:n,defaultSelect:r,emitter:i,channel:a}){const o=new Map,s=new Map,l=new Map;let c=[...e];const u=()=>{var v;const y=(v=t.ownerDocument)===null||v===void 0?void 0:v.defaultView;return y&&y.getContextService().getDomElement().parentElement||document.body},f=()=>{const y=u().querySelector(".legend-html"),_=E=>Tm(this,void 0,void 0,function*(){let x=E.target;for(;x&&!x.hasAttribute("legend-value")&&(x=x.parentElement,x!==y););if(!x||!x.hasAttribute("legend-value"))return;E.preventDefault(),E.stopPropagation();const T=x.getAttribute("legend-value");if(!T)return;const S=c.indexOf(T);S===-1?c.push(T):c.splice(S,1),yield n(c),h(),c.length===e.length?i.emit("legend:reset",{nativeEvent:!0}):i.emit("legend:filter",{nativeEvent:!0,data:{channel:a,values:c}})});y.addEventListener("click",_),o.set(y,_)},h=()=>{u().querySelectorAll("[legend-value]").forEach(_=>{const E=_.getAttribute("legend-value");if(!E||!e.includes(E))return;const x=c.includes(E),T=_;x?(T.style.opacity="1",T.classList.remove("legend-item-inactive")):(T.style.opacity="0.4",T.classList.add("legend-item-inactive"))})};f();const d=v=>Tm(this,void 0,void 0,function*(){const{nativeEvent:y}=v;if(y)return;const{data:_}=v,{channel:E,value:x}=_;E===a&&(c=[x],yield n(c),h())}),p=v=>Tm(this,void 0,void 0,function*(){const{nativeEvent:y}=v;if(y)return;const{data:_}=v,{channel:E,values:x}=_;E===a&&(c=x,yield n(c),h())}),g=v=>Tm(this,void 0,void 0,function*(){const{nativeEvent:y}=v;y||(c=[...e],yield n(c),h())});return i.on("legend:filter",p),i.on("legend:focus",d),i.on("legend:reset",g),r&&i.emit("legend:filter",{data:{channel:a,values:r}}),()=>{u().querySelectorAll("[legend-value]").forEach(_=>{const E=_.getAttribute("legend-value");if(!E||!e.includes(E))return;const x=o.get(_),T=s.get(_),S=l.get(_);x&&_.removeEventListener("click",x),T&&_.removeEventListener("pointerenter",T),S&&_.removeEventListener("pointerout",S)}),o.clear(),s.clear(),l.clear(),i.off("legend:filter",p),i.off("legend:focus",d),i.off("legend:reset",g)}}function rdt(t,{legend:e,filter:n,emitter:r,channel:i}){const{attributes:a}=e,o=s=>{const{value:l}=s.detail,c=l.map(u=>{var f,h;const d=(f=a.data)===null||f===void 0?void 0:f.find(p=>p.value===u);return d&&(h=d.domainValue)!==null&&h!==void 0?h:u});n(c),r.emit({nativeEvent:!0,data:{channel:i,values:c}})};return e.addEventListener("valuechange",o),()=>{e.removeEventListener("valuechange",o)}}function u3e(t,e){return Tm(this,arguments,void 0,function*(n,{legend:r,channel:i,value:a,ordinal:o,channels:s,allChannels:l,facet:c=!1}){const{view:u,update:f,setState:h}=n;h(r,d=>{var p,g;const{marks:v}=d,y=(g=(p=r.attributes)===null||p===void 0?void 0:p.scales)===null||g===void 0?void 0:g.find(E=>E.name===i),_=v.map(E=>{var x,T;if(((x=E.scale[i].key)!==null&&x!==void 0?x:i)!==((T=y?.key)!==null&&T!==void 0?T:y?.name)||E.type==="legends"||rst.includes(E.type))return E;const{transform:S=[],data:w=[]}=E,C=S.findIndex(({type:B})=>B.startsWith("group")||B.startsWith("bin")),D=[...S];w.length&&D.splice(C+1,0,{type:"filter",[i]:{value:a,ordinal:o}});const L=Object.fromEntries(s.map(B=>{const I=edt(u.scale,d.key,B);return[B,{domain:I.getOptions().domain}]}));return Nt({},E,Object.assign(Object.assign({transform:D,scale:L},!o&&{animate:!1}),{legend:c?!1:Object.fromEntries(l.map(B=>[B,{preserve:!0}]))}))});return Object.assign(Object.assign({},d),{marks:_})}),yield f()})}function idt(t,e){for(const n of t)u3e(n,Object.assign(Object.assign({},e),{facet:!0}))}function adt(){return(t,e,n)=>{const{container:r}=t,i=e.filter(f=>f!==t),a=i.length>0,o=f=>IX(f).scales.map(h=>h.name),s=[...Bee(r),...Qht(r),...c3e(r)],l=s.flatMap(o),c=a?Sy(idt,50,{trailing:!0}):Sy(u3e,50,{trailing:!0}),u=s.map(f=>{const{name:h,domain:d}=IX(f).scales[0],p=o(f),g={legend:f,channel:h,channels:p,allChannels:l};return f.className===a3e?tdt(f,{legends:l3e,marker:o3e,label:s3e,datum:v=>{const{__data__:y}=v,{index:_}=y;return d[_]},filter:v=>{const y=Object.assign(Object.assign({},g),{value:v,ordinal:!0});c(a?i:t,y)},state:f.attributes.state,defaultSelect:f.attributes.defaultSelect,channel:h,emitter:n}):f.className===Dee?ndt(r,{domain:d,filter:v=>{const y=Object.assign(Object.assign({},g),{value:v,ordinal:!0});c(a?i:t,y)},defaultSelect:f.attributes.defaultSelect,channel:h,emitter:n}):rdt(r,{legend:f,filter:v=>{const y=Object.assign(Object.assign({},g),{value:v,ordinal:!1});c(a?i:t,y)},emitter:n,channel:h})});return()=>{u.forEach(f=>f())}}}var odt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function f3e(t,e){const n=km(t,"shape"),r=km(t,"color"),i=n?n.clone():null,a=[];for(const[s,l]of e){const c=s.type,f=(r?.getOptions().domain.length>0?r?.getOptions().domain:l.data).map((h,d)=>{var p;return i?i.map(h||"point"):((p=s?.style)===null||p===void 0?void 0:p.shape)||l.defaultShape||"point"});typeof c=="string"&&a.push([c,f])}if(a.length===0)return["point",["point"]];if(a.length===1||!n)return a[0];const{range:o}=n.getOptions();return a.map(([s,l])=>{let c=0;for(let u=0;u<a.length;u++){const f=o[u%o.length];l[u]===f&&c++}return[c/l.length,[s,l]]}).sort((s,l)=>l[0]-s[0])[0][1]}function sdt(t,e){const{scales:n,library:r,markState:i}=e,[a,o]=f3e(n,i),{itemMarker:s,itemMarkerSize:l}=t,c=(h,d)=>{var p,g,v;const y=((v=(g=(p=r[`mark.${a}`])===null||p===void 0?void 0:p.props)===null||g===void 0?void 0:g.shape[h])===null||v===void 0?void 0:v.props.defaultMarker)||bd(h.split(".")),_=typeof l=="function"?l(d):l;return()=>_Ze(y,{color:d.color})(0,0,_)},u=h=>`${o[h]}`;return km(n,"shape")&&!s?(h,d)=>c(u(d),h):typeof s=="function"?(h,d)=>{const p=s(h.id,d);return typeof p=="string"?c(p,h):p}:(h,d)=>c(s||u(d),h)}function ldt(t){const e=km(t,"opacity");if(e){const{range:n}=e.getOptions();return(r,i)=>n[i]}}function cdt(t,e){const n=km(t,"size");return n instanceof Nwe?n.map(NaN)*2:e}function udt(t,e){const{scales:n,markState:r}=e,[i,a]=f3e(n,r),{itemMarker:o,itemMarkerLineWidth:s}=t;if(s!==void 0)return s;const l=["line","hyphen","dash","smooth","hv","hvh","vh","vhv"];if(typeof o=="string"&&l.includes(o))return 4;if(typeof o=="function")return(f,h)=>{const d=o(f.id,h);if(typeof d=="string"&&l.includes(d))return 4};if((Array.isArray(a)?a:[a]).some(f=>l.includes(f)))return 4}function fdt(t,e){const{labelFormatter:n=h=>`${h}`}=t,{scales:r,theme:i}=e,a=i.legendCategory.itemMarkerSize,o=cdt(r,a),s={itemMarker:sdt(Object.assign(Object.assign({},t),{itemMarkerSize:o}),e),itemMarkerSize:o,itemMarkerOpacity:ldt(r),itemMarkerLineWidth:udt(t,e)},l=typeof n=="string"?$x(n):n,c=km(r,"color"),u=gst(r),f=c?h=>c.map(h):()=>e.theme.color;return Object.assign(Object.assign({},s),{data:u.map(h=>({id:h,label:l(h),color:f(h)}))})}function hdt(t,e,n){const{position:r}=e;if(r==="center"){const{bbox:o}=t,{width:s,height:l}=o;return{width:s,height:l}}const{width:i,height:a}=zPe(t,e,n);return{width:i,height:a}}function ddt(t){return Object.assign(Object.assign({},t),{data:t?.data.filter(e=>e.id!=="")||[]})}const Fee=t=>{const{labelFormatter:e,layout:n,order:r,orientation:i,position:a,size:o,title:s,cols:l,itemMarker:c,render:u}=t,f=odt(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker","render"]),{gridRow:h}=f;return d=>{const{value:p,theme:g}=d,{bbox:v}=p,{width:y,height:_}=hdt(p,t,Fee),E=UPe(a,n),x=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(a)?"vertical":"horizontal",width:y,height:_,layout:l!==void 0?"grid":"flex"},l!==void 0&&{gridCol:l}),h!==void 0&&{gridRow:h}),{titleText:I4(s)}),fdt(t,d)),{legendCategory:T={}}=g,S=L4(Object.assign({},T,ddt(x),f,{classNamePrefix:Fy}));if(u)return new pX({className:Dee,style:Object.assign(Object.assign({},S),{x:v.x,y:v.y,render:u})});const w=new hst({style:Object.assign(Object.assign({x:v.x,y:v.y,width:v.width,height:v.height},E),{subOptions:S})});return w.appendChild(new pX({className:"legend-category",style:S})),w}};Fee.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var pdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function gdt(t,e,n){return t.size=e,dst(n)?t.height=e:t.width=e,t}function vdt(t,e,n){const{size:r}=e,i=zPe(t,e,n);return gdt(i,r,i.orientation)}function mdt(t){return e=>({value:e/t,label:String(e),domainValue:e})}function ydt(t,e,n,r,i){const a=e.thresholds,o=mdt(r);return Object.assign(Object.assign({},t),{color:i,data:[n,...a,r].map(o)})}function _dt(t,e,n){const i=[-1/0,...e.thresholds,1/0].map((a,o)=>({value:o,domainValue:a,label:a}));return Object.assign(Object.assign({},t),{data:i,color:n,labelFilter:(a,o)=>o>0&&o<i.length-1})}function LX(t){const{domain:e}=t.getOptions(),[n,r]=[e[0],Kwe(e)];return[n,r]}function bdt(t,e){const n=t.getOptions(),r=t.clone();return r.update(Object.assign(Object.assign({},n),{range:[QE(e).toString()]})),r}function Edt(t,e,n,r,i,a){const{length:o}=t,s=n||r,l=i.color?a.legendContinuous.ribbonFill||"black":a.color,c=e||bdt(s,l),[u,f]=LX(c),[h,d]=LX([e,n,r].filter(p=>p!==void 0).find(p=>!(p instanceof RQ)));return Object.assign(Object.assign({},t),{domain:[h,d],data:c.getTicks().map(p=>({value:p})),color:new Array(Math.floor(o)).fill(0).map((p,g)=>{const v=(f-u)/(o-1)*g+u,y=c.map(v)||l,_=r?r.map(v):1;return y.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(E,x,T,S)=>`rgba(${x}, ${T}, ${S}, ${_})`)})})}function xdt(t,e,n,r,i,a){const o=km(t,"color"),s=vdt(n,r,i);if(o instanceof ZF){const{range:u}=o.getOptions(),[f,h]=LX(o);return o instanceof zwe||o instanceof Hwe?ydt(s,o,f,h,u):_dt(s,o,u)}const l=km(t,"size"),c=km(t,"opacity");return Edt(s,o,l,c,e,a)}const lb=t=>{const{labelFormatter:e,layout:n,order:r,orientation:i,position:a,size:o,title:s,style:l,crossPadding:c,padding:u}=t,f=pdt(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:h,value:d,theme:p,scale:g})=>{const{bbox:v}=d,{x:y,y:_,width:E,height:x}=v,T=UPe(a,n),{legendContinuous:S={}}=p,w=L4(Object.assign({},S,Object.assign(Object.assign(Object.assign({titleText:I4(s),labelAlign:"value",labelFormatter:typeof e=="string"?D=>$x(e)(D.label):e},xdt(h,g,d,t,lb,p)),l),{classNamePrefix:Fy}),f)),C=new jPe({style:Object.assign(Object.assign({x:y,y:_,width:E,height:x},T),{subOptions:w})});return C.appendChild(new oit({className:"legend-continuous",style:w})),C}};lb.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const h3e=t=>(...e)=>lb(Object.assign({},{block:!0},t))(...e);h3e.props=Object.assign(Object.assign({},lb.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const Uee=t=>e=>{const{scales:n}=e,r=km(n,"size");return lb(Object.assign({},{type:"size",data:r.getTicks().map((i,a)=>({value:i,label:String(i)}))},t))(e)};Uee.props=Object.assign(Object.assign({},lb.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const d3e=t=>Uee(Object.assign({},{block:!0},t));d3e.props=Object.assign(Object.assign({},lb.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var Sdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function nce(t,e,n,r){switch(r){case"center":return{x:t+n/2,y:e,textAlign:"middle"};case"right":return{x:t+n,y:e,textAlign:"right"};default:return{x:t,y:e,textAlign:"left"}}}const Tdt=fst({render(t,e){const{width:n,title:r,subtitle:i,spacing:a=2,align:o="left",x:s,y:l}=t,c=Sdt(t,["width","title","subtitle","spacing","align","x","y"]);e.style.transform=`translate(${s}, ${l})`;const u=Vn(c,"title"),f=Vn(c,"subtitle"),d=xle(e,".title","text").attr("className","title").call(jr,Object.assign(Object.assign(Object.assign({},nce(0,0,n,o)),{fontSize:14,textBaseline:"top",text:r}),u)).node().getLocalBounds();xle(e,".sub-title","text").attr("className","sub-title").call(p=>{if(!i)return p.node().remove();p.node().attr(Object.assign(Object.assign(Object.assign({},nce(0,d.max[1]+a,n,o)),{fontSize:12,textBaseline:"top",text:i}),f))})}}),p3e=t=>({value:e,theme:n})=>{const{x:r,y:i,width:a,height:o}=e.bbox;return new Tdt({style:Nt({},n.title,Object.assign({x:r,y:i,width:a,height:o},t))})};p3e.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};var Adt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function wdt(t,e,n){const{x:r,y:i,width:a,height:o}=t;if(e==="left")return[r+a-n,i];if(e==="right")return[r,i];if(e==="bottom")return[r,i];if(e==="top")return[r,i+o-n]}const HP=t=>{const{orientation:e,labelFormatter:n,size:r,style:i={},position:a}=t,o=Adt(t,["orientation","labelFormatter","size","style","position"]);return s=>{var l;const{scales:[c],value:u,theme:f,coordinate:h}=s,{bbox:d}=u,{width:p,height:g}=d,{slider:v={}}=f,y=((l=c.getFormatter)===null||l===void 0?void 0:l.call(c))||(C=>C+""),_=typeof n=="string"?$x(n):n,E=e==="horizontal",x=as(h)&&E,{trackSize:T=v.trackSize}=i,[S,w]=wdt(d,a,T);return new ZJ({className:"slider",style:Object.assign({},v,Object.assign(Object.assign({x:S,y:w,trackLength:E?p:g,orientation:e,formatter:C=>{const D=_||y,L=x?1-C:C,B=QA(c,L,!0);return D(B)},sparklineData:Cdt(t,s)},i),o))})}};function Odt(t,e){const[n]=Array.from(t.entries()).filter(([i])=>i.type==="line"||i.type==="area"||i.type==="interval").filter(([i])=>i.slider).map(([i])=>{const{encode:a,slider:o}=i;if(o?.x){const s=l=>{const c=a[l];return[l,c?c.value:void 0]};return Object.fromEntries(e.map(s))}});if(!n?.series)return n?.y;const r=n.series.reduce((i,a,o)=>(i[a]=i[a]||[],i[a].push(n.y[o]),i),{});return Object.values(r)}function Cdt(t,e){const{markState:n}=e;return Us(t.sparklineData)?t.sparklineData:Odt(n,["y","series"])}HP.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const g3e=t=>HP(Object.assign(Object.assign({},t),{orientation:"horizontal"}));g3e.props=Object.assign(Object.assign({},HP.props),{defaultPosition:"bottom"});const v3e=t=>HP(Object.assign(Object.assign({},t),{orientation:"vertical"}));v3e.props=Object.assign(Object.assign({},HP.props),{defaultPosition:"left"});var Rdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const GP=t=>{const{orientation:e,labelFormatter:n,style:r}=t,i=Rdt(t,["orientation","labelFormatter","style"]);return({scales:[a],value:o,theme:s})=>{const{bbox:l}=o,{x:c,y:u,width:f,height:h}=l,{scrollbar:d={}}=s,{ratio:p,range:g}=a.getOptions(),v=e==="horizontal"?f:h,y=v/p,[_,E]=g,x=E>_?0:1;return new Tnt({className:`${Fy}scrollbar`,style:Object.assign({},d,Object.assign(Object.assign(Object.assign(Object.assign({},r),{x:c,y:u,trackLength:v,value:x}),i),{orientation:e,contentLength:y,viewportLength:v}))})}};GP.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const m3e=t=>GP(Object.assign(Object.assign({},t),{orientation:"horizontal"}));m3e.props=Object.assign(Object.assign({},GP.props),{defaultPosition:"bottom"});const y3e=t=>GP(Object.assign(Object.assign({},t),{orientation:"vertical"}));y3e.props=Object.assign(Object.assign({},GP.props),{defaultPosition:"left"});const _3e=t=>()=>new Cy;_3e.props={};const jee=(t,e)=>{const{coordinate:r}=e;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[h,d]=as(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.01},{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:h,fillOpacity:c,strokeOpacity:u,opacity:f}];return s.animate(p,Object.assign(Object.assign({},o),t))}},Mdt=(t,e)=>{const{coordinate:r}=e;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[h,d]=as(r)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:h},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},b3e=(t,e)=>{const{coordinate:r}=e;return S2e.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:Jn.NUMBER}),(i,a,o)=>{const[s]=i,l=u=>{const{__data__:f,style:h}=u,{fillOpacity:d=1,strokeOpacity:p=1,opacity:g=1}=h,{points:v,y,y1:_}=f,E=Vx(r,v,[y,_]),{innerRadius:x,outerRadius:T}=E,S=[{scaleInYRadius:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:x+1e-4,fillOpacity:d,strokeOpacity:p,opacity:g,offset:.01},{scaleInYRadius:T,fillOpacity:d,strokeOpacity:p,opacity:g}];return u.animate(S,Object.assign(Object.assign({},o),t))},c=u=>{const{style:f}=u,{transform:h="",fillOpacity:d=1,strokeOpacity:p=1,opacity:g=1}=f,[v,y]=as(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],_=[{transform:`${h} ${y}`.trimStart(),transformOrigin:v,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${h} ${y}`.trimStart(),transformOrigin:v,fillOpacity:d,strokeOpacity:p,opacity:g,offset:.01},{transform:`${h} scale(1, 1)`.trimStart(),transformOrigin:v,fillOpacity:d,strokeOpacity:p,opacity:g}];return u.animate(_,Object.assign(Object.assign({},o),t))};return Mo(r)?l(s):c(s)}},Pdt=(t,e)=>{const{coordinate:r}=e;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[h,d]=as(r)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:h},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${d}`.trimStart(),transformOrigin:h,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},E3e=t=>(e,n,r)=>{const[i]=e,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:a,strokeOpacity:o,opacity:s}];return i.animate(l,Object.assign(Object.assign({},r),t))};E3e.props={};const x3e=t=>(e,n,r)=>{const[i]=e,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:a,strokeOpacity:o,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(l,Object.assign(Object.assign({},r),t))};x3e.props={};const Ndt={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},Idt={[nr.CIRCLE]:["cx","cy","r"],[nr.ELLIPSE]:["cx","cy","rx","ry"],[nr.RECT]:["x","y","width","height"],[nr.IMAGE]:["x","y","width","height"],[nr.LINE]:["x1","y1","x2","y2"],[nr.POLYLINE]:["points"],[nr.POLYGON]:["points"]};function JA(t,e,n=!1){const r={};for(const i of e){const a=t.style[i];a?r[i]=a:n&&(r[i]=Ndt[i])}return r}const tM=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function kX(t){const{min:e,max:n}=t.getLocalBounds(),[r,i]=e,[a,o]=n,s=o-i,l=a-r;return[r,i,l,s]}function Ldt(t){const[e,n,r,i]=t;return`
    M ${e} ${n}
    L ${e+r} ${n}
    L ${e+r} ${n+i}
    L ${e} ${n+i}
    Z
  `}function kdt(t,e){const[n,r,i,a]=kX(t),o=a/i,s=Math.ceil(Math.sqrt(e/o)),l=Math.ceil(e/s),c=[],u=a/l;let f=0,h=e;for(;h>0;){const d=Math.min(h,s),p=i/d;for(let g=0;g<d;g++){const v=n+g*p,y=r+f*u;c.push(Ldt([v,y,p,u]))}h-=d,f+=1}return c}function Ddt(t="pack"){return typeof t=="function"?t:kdt}function Bdt(t,e,n){let{transform:r}=t.style;const{transform:i}=e.style;S3e(e,t);let a=tM;if(t.nodeName===nr.GROUP){const[l,c,u,f]=kX(t),[h,d,p,g]=kX(e),v=l-h,y=c-d,_=u/p,E=f/g;r=`translate(${v}, ${y}) scale(${_}, ${E})`}else a=a.concat(Idt[t.nodeName]||[]);const o=[Object.assign({transform:r??"none"},JA(t,a,!0)),Object.assign({transform:i??"none"},JA(e,a,!0))];return e.animate(o,n)}function S3e(t,e){t.__data__=e.__data__,t.className=e.className,t.markType=e.markType,e.parentNode.replaceChild(t,e)}function Fdt(t,e){const{nodeName:n}=t;if(n==="path")return t;const r=new Kf({style:Object.assign(Object.assign({},JA(t,tM)),{d:e})});return S3e(r,t),r}function rce(t,e){const n=t.indexOf(e),r=t.lastIndexOf(e);return n===r}function Udt(t){return!rce(t,"m")||!rce(t,"M")}function ice(t){const e=lYe(t);if(e&&!Udt(e))return e}function ace(t){const{nodeName:e}=t;if(e==="path"){const n=Wr(t,"attributes");return n.markerEnd||n.markerStart}return!1}function zee(t,e,n,r){const{nodeName:i}=e,{nodeName:a}=n,o=ice(e),s=ice(n),{opacity:l=1,strokeOpacity:c=1,fillOpacity:u=1}=e.style,{opacity:f=1,strokeOpacity:h=1,fillOpacity:d=1}=n.style,p=i===a&&i!=="path",g=o===void 0||s===void 0,v=ace(e)||ace(n);if(p||g||v)return Bdt(e,n,r);const y=Fdt(t,o),_=Object.assign(Object.assign({},JA(e,tM)),{opacity:l,strokeOpacity:c,fillOpacity:u}),E=Object.assign(Object.assign({},JA(n,tM)),{opacity:f,strokeOpacity:h,fillOpacity:d}),x=[_,E];if(o!==s){x[0].d=o,x[1].d=s;const T=y.animate(x,r);return T.onfinish=()=>{QF(y,n),y.style.d=s,y.style.transform="none"},y.style.transform="none",T}return Fs(_,E)?null:y.animate(x,r)}function jdt(t,e,n,r){t.style.visibility="hidden";const i=r(t,e.length);return e.map((a,o)=>{const s=new Kf({style:Object.assign({d:i[o]},JA(t,tM))});return zee(a,s,a,n)})}function zdt(t,e,n,r){const i=r(e,t.length),{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=e.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:a,strokeOpacity:o,opacity:s}],c=e.animate(l,n);return[...t.map((f,h)=>{const d=new Kf({style:{d:i[h],fill:e.style.fill}});return zee(f,f,d,n)}),c]}const T3e=t=>(e,n,r)=>{const i=Ddt(t.split),a=Object.assign(Object.assign({},r),t),{length:o}=e,{length:s}=n;if(o===1&&s===1||o>1&&s>1){const[l]=e,[c]=n;return zee(l,l,c,a)}if(o===1&&s>1){const[l]=e;return jdt(l,n,a,i)}if(o>1&&s===1){const[l]=n;return zdt(e,l,a,i)}return null};T3e.props={};const A3e=(t,e)=>{S2e.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:Jn.NUMBER});const{coordinate:r}=e;return(i,a,o)=>{const[s]=i;if(!Mo(r))return jee(t,e)(i,a,o);const{__data__:l,style:c}=s,{radius:u=0,inset:f=0,fillOpacity:h=1,strokeOpacity:d=1,opacity:p=1}=c,{points:g,y:v,y1:y}=l,_=OK().cornerRadius(u).padAngle(f*Math.PI/180),E=Vx(r,g,[v,y]),{startAngle:x,endAngle:T}=E,S=[{waveInArcAngle:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:x+1e-4,fillOpacity:h,strokeOpacity:d,opacity:p,offset:.01},{waveInArcAngle:T,fillOpacity:h,strokeOpacity:d,opacity:p}],w=s.animate(S,Object.assign(Object.assign({},o),t));return w.onframe=function(){s.style.d=_(Object.assign(Object.assign({},E),{endAngle:Number(s.style.waveInArcAngle)}))},w.onfinish=function(){s.style.d=_(Object.assign(Object.assign({},E),{endAngle:T}))},w}};A3e.props={};const $dt=t=>(n,r,i)=>{const[a]=n,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=a.style,u="center center",f=[{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.01},{transform:`${o} scale(1)`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c}];return a.animate(f,Object.assign(Object.assign({},i),t))},Hdt=t=>(n,r,i)=>{const[a]=n,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=a.style,u="center center",f=[{transform:`${o} scale(1)`.trimStart(),transformOrigin:u},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.99},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(f,Object.assign(Object.assign({},i),t))},w3e=t=>(e,n,r)=>{var i,a;const[o]=e,s=((a=(i=o).getTotalLength)===null||a===void 0?void 0:a.call(i))||0,l=[{lineDash:[0,s]},{lineDash:[s,0]}];return o.animate(l,Object.assign(Object.assign({},r),t))};w3e.props={};const O3e=(t,e)=>(n,r,i)=>{const[a]=n,{min:[o,s],halfExtents:l}=a.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new Kf({style:{d:`M${o},${s}L${o+c},${s}L${o+c},${s+u}L${o},${s+u}Z`}});return a.appendChild(f),a.style.clipPath=f,jee(t,e)([f],r,i)};O3e.props={};const C3e=(t,e)=>(n,r,i)=>{const[a]=n,{min:[o,s],halfExtents:l}=a.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new Kf({style:{d:`M${o},${s}L${o+c},${s}L${o+c},${s+u}L${o},${s+u}Z`}});return a.appendChild(f),a.style.clipPath=f,b3e(t,e)([f],r,i)};C3e.props={};var Gdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Wdt(t,{elements:e,datum:n,groupKey:r=p=>p,regionGroupKey:i=p=>p,link:a=!1,background:o=!1,delay:s=60,scale:l,coordinate:c,emitter:u,state:f={},region:h=!1,regionEleFilter:d=p=>kee.includes(p.markType)}){var p,g;const v=(p=e(t))!==null&&p!==void 0?p:[],y=h?v.filter(d):v,_=new Set(y),E=h?i:r,x=Go(y,E),T=n3e({elementsof:e,root:t,coordinate:c,scale:l}),S=Bw(y,n),[w,C]=QNe(Object.assign({elements:y,valueof:S,link:a,coordinate:c},Vn(f.active,"link"))),[D,L,B]=e3e(Object.assign({document:t.ownerDocument,scale:l,coordinate:c,background:o,valueof:S},Vn(f.active,"background"))),I=Nt(f,{active:Object.assign({},((g=f.active)===null||g===void 0?void 0:g.offset)&&{transform:(...ne)=>{const le=f.active.offset(...ne),[,ue]=ne;return JNe(y[ue],le,c)}})}),U=Lee(I,y),{updateState:$,removeState:X,hasState:N}=U(S);let M;const k=ne=>{const{nativeEvent:le=!0}=ne;let ue=ne.target;if(h&&(ue=T(ne)),!_.has(ue))return;M&&clearTimeout(M);const ve=E(ue),Se=x.get(ve),Re=new Set(Se);for(const Xe of y)Re.has(Xe)?N(Xe,"active")||$(Xe,"active"):($(Xe,"inactive"),C(Xe)),Xe!==ue&&L(Xe);D(ue),w(Se),le&&u.emit("element:highlight",{nativeEvent:le,data:{data:n(ue),group:Se.map(n)}})},z=()=>{M&&clearTimeout(M),M=setTimeout(()=>{j(),M=null},s)},j=(ne=!0)=>{for(const le of y)X(le,"active","inactive"),L(le),C(le);ne&&u.emit("element:unhighlight",{nativeEvent:ne})},V=ne=>{let le=ne.target;if(h&&(le=T(ne)),!le){s>0?z():j();return}o&&!B(le)||!o&&!_.has(le)||(s>0?z():j())},Q=()=>{j()};t.addEventListener("pointerover",k),t.addEventListener("pointermove",k),t.addEventListener("pointerout",V),t.addEventListener("pointerleave",Q);const ee=ne=>{const{nativeEvent:le}=ne;le||j(!1)},re=ne=>{const{nativeEvent:le}=ne;if(le)return;const{data:ue}=ne.data,ve=$4(y,ue,n);ve&&k({target:ve,nativeEvent:!1})};return u.on("element:highlight",re),u.on("element:unhighlight",ee),()=>{t.removeEventListener("pointerover",k),t.removeEventListener("pointermove",k),t.removeEventListener("pointerout",V),t.removeEventListener("pointerleave",Q),u.off("element:highlight",re),u.off("element:unhighlight",ee);for(const ne of y)L(ne),C(ne)}}function H4(t){var{delay:e,createGroup:n,createRegionGroup:r,background:i=!1,link:a=!1}=t,o=Gdt(t,["delay","createGroup","createRegionGroup","background","link"]);return(s,l,c)=>{const{container:u,view:f,options:h}=s,{scale:d,coordinate:p}=f,g=Kp(u);return Wdt(g,Object.assign({elements:Py,datum:Y_(f),groupKey:n?n(f):void 0,regionGroupKey:r?r(f):zP(),coordinate:p,scale:d,state:Tx(h,[["active",i?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:i,link:a,delay:e,emitter:c},o))}}H4.props={reapplyWhenUpdate:!0};function R3e(t){return H4(Object.assign(Object.assign({},t),{createGroup:zP}))}R3e.props={reapplyWhenUpdate:!0};function M3e(t){return H4(Object.assign(Object.assign({},t),{createGroup:ZNe}))}M3e.props={reapplyWhenUpdate:!0};var Vdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Ydt(t,{elements:e,datum:n,groupKey:r=g=>g,scaleFactor:i=1.04,scaleOrigin:a="center center",shadow:o=!0,shadowColor:s="rgba(0, 0, 0, 0.4)",shadowBlur:l=10,shadowOffsetX:c=0,shadowOffsetY:u=2,zIndex:f=10,delay:h=60,emitter:d,state:p={}}){const g=()=>{var z;return(z=e(t))!==null&&z!==void 0?z:[]},v=g(),y=Bw(v,n),_=Nt(p,{active:{}}),E=Lee(_,v),{updateState:x,removeState:T,hasState:S}=E(y),w=new Map,C=new Set;let D;const L=z=>{if(C.has(z))return;const j=z.style.transform||"",V=z.style.transformOrigin||"";w.set(z,{transform:j,transformOrigin:V,zIndex:z.style.zIndex||0,shadowColor:z.style.shadowColor||"",shadowBlur:z.style.shadowBlur||0,shadowOffsetX:z.style.shadowOffsetX||0,shadowOffsetY:z.style.shadowOffsetY||0});const Q=j&&j!=="none"?j:"",ee=`scale(${i})`;let re;Q&&!Q.includes("scale")?re=`${Q} ${ee}`.trimStart():Q&&Q.includes("scale")?re=Q.replace(/scale\([^)]+\)/g,ee).trimStart():re=ee,z.style.transformOrigin=a,z.style.transform=re,z.style.zIndex=f,o&&(z.style.shadowColor=s,z.style.shadowBlur=l,z.style.shadowOffsetX=c,z.style.shadowOffsetY=u),C.add(z)},B=z=>{const j=w.get(z);j&&(z.style.transform=j.transform,z.style.transformOrigin=j.transformOrigin,z.style.zIndex=j.zIndex,z.style.shadowColor=j.shadowColor,z.style.shadowBlur=j.shadowBlur,z.style.shadowOffsetX=j.shadowOffsetX,z.style.shadowOffsetY=j.shadowOffsetY,C.delete(z),w.delete(z))},I=z=>{const{nativeEvent:j=!0}=z,V=z.target,Q=g();if(!new Set(Q).has(V))return;D&&clearTimeout(D);const re=Go(Q,r),ne=r(V),le=re.get(ne);if(!le)return;const ue=new Set(le);for(const ve of Q)ue.has(ve)||(T(ve,"active"),B(ve));for(const ve of le)S(ve,"active")||x(ve,"active"),L(ve);j&&d.emit("element:hoverscale",{nativeEvent:j,data:{data:n(V),group:le.map(n)}})},U=()=>{D&&clearTimeout(D),D=setTimeout(()=>{$(),D=null},h)},$=(z=!0)=>{const j=g();for(const V of j)T(V,"active"),B(V);C.clear(),z&&d.emit("element:unhoverscale",{nativeEvent:z})},X=z=>{h>0?U():$()},N=()=>{$()};t.addEventListener("pointerover",I),t.addEventListener("pointermove",I),t.addEventListener("pointerout",X),t.addEventListener("pointerleave",N);const M=z=>{const{nativeEvent:j}=z;j||$(!1)},k=z=>{const{nativeEvent:j}=z;if(j)return;const{data:V}=z.data,Q=g(),ee=$4(Q,V,n);ee&&I({target:ee,nativeEvent:!1})};return d.on("element:hoverscale",k),d.on("element:unhoverscale",M),()=>{t.removeEventListener("pointerover",I),t.removeEventListener("pointermove",I),t.removeEventListener("pointerout",X),t.removeEventListener("pointerleave",N),d.off("element:hoverscale",k),d.off("element:unhoverscale",M);const z=g();for(const j of z)B(j);w.clear(),C.clear()}}function P3e(t){var{delay:e,createGroup:n,scale:r,scaleOrigin:i,shadow:a,shadowColor:o,shadowBlur:s,shadowOffsetX:l,shadowOffsetY:c,zIndex:u}=t,f=Vdt(t,["delay","createGroup","scale","scaleOrigin","shadow","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","zIndex"]);return(h,d,p)=>{const{container:g,view:v,options:y}=h,_=Kp(g),E=Y_(v);return Ydt(_,Object.assign({elements:Py,datum:E,groupKey:n?x=>n(v)(E(x)):void 0,state:Tx(y,["active"]),scaleFactor:r,scaleOrigin:i,shadow:a,shadowColor:o,shadowBlur:s,shadowOffsetX:l,shadowOffsetY:c,zIndex:u,delay:e,emitter:p},f))}}P3e.props={reapplyWhenUpdate:!0};var Xdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function qdt(t,{elements:e,datum:n,groupKey:r=g=>g,regionGroupKey:i=g=>g,link:a=!1,single:o=!1,multipleSelectHotkey:s,coordinate:l,background:c=!1,scale:u,emitter:f,state:h={},region:d=!1,regionEleFilter:p=g=>kee.includes(g.markType)}){var g;const v=e(t),y=new Set(v),_=n3e({elementsof:e,root:t,coordinate:l,scale:u}),E=Go(v,r),x=Go(v,i),T=Bw(v,n),[S,w]=QNe(Object.assign({link:a,elements:v,valueof:T,coordinate:l},Vn(h.selected,"link"))),[C,D]=e3e(Object.assign({document:t.ownerDocument,background:c,coordinate:l,scale:u,valueof:T},Vn(h.selected,"background"))),L=Nt(h,{selected:Object.assign({},((g=h.selected)===null||g===void 0?void 0:g.offset)&&{transform:(...ve)=>{const Se=h.selected.offset(...ve),[,Re]=ve;return JNe(v[Re],Se,l)}})}),B=Lee(L,v),{updateState:I,removeState:U,hasState:$}=B(T);let X=!o,N=null;const M=(ve=!0)=>{for(const Se of v)U(Se,"selected","unselected"),w(Se),D(Se);ve&&f.emit("element:unselect",{nativeEvent:!0})},k=({event:ve,element:Se,nativeEvent:Re=!0,filter:Xe=xt=>!0,groupBy:Le=r,groupMap:Lt=E})=>{const xt=v.filter(Xe);if($(Se,"selected"))M();else{const dt=Le(Se),Bt=Lt.get(dt),At=new Set(Bt);for(const zt of xt)At.has(zt)?I(zt,"selected"):(I(zt,"unselected"),w(zt)),zt!==Se&&D(zt);if(S(Bt),C(Se),!Re)return;f.emit("element:select",Object.assign(Object.assign({},ve),{nativeEvent:Re,data:{data:[n(Se),...Bt.map(n)]}}))}},z=({event:ve,element:Se,nativeEvent:Re=!0,filter:Xe=xt=>!0,groupBy:Le=r,groupMap:Lt=E})=>{const xt=Le(Se),dt=Lt.get(xt),Bt=new Set(dt),At=v.filter(Xe);if($(Se,"selected")){if(!v.some(rn=>!Bt.has(rn)&&$(rn,"selected")))return M();for(const rn of dt)I(rn,"unselected"),w(rn),D(rn)}else{const zt=dt.some(rn=>$(rn,"selected"));for(const rn of At)Bt.has(rn)?I(rn,"selected"):$(rn,"selected")||I(rn,"unselected");!zt&&a&&S(dt),C(Se)}Re&&f.emit("element:select",Object.assign(Object.assign({},ve),{nativeEvent:Re,data:{data:v.filter(zt=>$(zt,"selected")).map(n)}}))},j=ve=>{if(y.has(ve))return!0;for(const Se of y)if(JR(Se,Xe=>Xe===ve))return!0;return!1},V=ve=>{if(y.has(ve))return ve;for(const Se of y){let Re=null;if(JR(Se,Xe=>{Xe===ve&&(Re=Se)}),Re)return Re}return ve},Q=ve=>{const{target:Se,nativeEvent:Re=!0}=ve,Xe=X?z:k;let Le=Se;const Lt=j(Se);return!d||Lt?Lt?Xe({event:ve,element:V(Le),nativeEvent:Re,groupBy:r}):M():(Le=_(ve),y.has(Le)?Xe({event:ve,element:Le,nativeEvent:Re,filter:p,groupBy:i,groupMap:x}):M())},ee=Array.isArray(s)?s:[s],re=ve=>{ee.includes(ve.code)&&!N&&(N=ve.code,X=!0)},ne=ve=>{ve.code===N&&(N=null,X=!1)};t.addEventListener("click",Q),s&&(X=!1,document.addEventListener("keydown",re),document.addEventListener("keyup",ne));const le=ve=>{const{nativeEvent:Se,data:Re}=ve;if(Se)return;const Xe=X?Re.data:Re.data.slice(0,1);for(const Le of Xe){const Lt=$4(v,Le,n);Q({target:Lt,nativeEvent:!1})}},ue=()=>{M(!1)};return f.on("element:select",le),f.on("element:unselect",ue),()=>{for(const ve of v)w(ve);t.removeEventListener("click",Q),s&&(document.removeEventListener("keydown",re),document.removeEventListener("keyup",ne)),f.off("element:select",le),f.off("element:unselect",ue)}}function G4(t){var{createGroup:e,createRegionGroup:n,background:r=!1,link:i=!1}=t,a=Xdt(t,["createGroup","createRegionGroup","background","link"]);return(o,s,l)=>{const{container:c,view:u,options:f}=o,{coordinate:h,scale:d}=u,p=Kp(c);return qdt(p,Object.assign({elements:Py,datum:Y_(u),groupKey:e?e(u):void 0,regionGroupKey:n?n(u):zP(),coordinate:h,scale:d,state:Tx(f,[["selected",r?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:r,link:i,emitter:l},a))}}G4.props={reapplyWhenUpdate:!0};function N3e(t){return G4(Object.assign(Object.assign({},t),{createGroup:zP}))}N3e.props={reapplyWhenUpdate:!0};function I3e(t){return G4(Object.assign(Object.assign({},t),{createGroup:ZNe}))}I3e.props={reapplyWhenUpdate:!0};var Zdt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},Kdt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Qdt(t){const{transform:e=[]}=t,n=e.find(i=>i.type==="normalizeY");if(n)return n;const r={type:"normalizeY"};return e.push(r),t.transform=e,r}function Jdt(t,e,n){const[r]=Array.from(t.entries()).filter(([i])=>i.type===e).map(([i])=>{const{encode:a}=i,o=s=>{const l=a[s];return[s,l?l.value:void 0]};return Object.fromEntries(n.map(o))});return r}function L3e(t){var{wait:e=20,leading:n,trailing:r=!1,labelFormatter:i=o=>`${o}`}=t,a=Kdt(t,["wait","leading","trailing","labelFormatter"]);return o=>{const{view:s,container:l,update:c,setState:u}=o,{markState:f,scale:h,coordinate:d}=s,p=Jdt(f,"line",["x","y","series"]);if(!p)return;const{y:g,x:v,series:y=[]}=p,_=g.map((M,k)=>k),E=Xg(_.map(M=>v[M])),x=Kp(l),T=l.getElementsByClassName(pm),S=l.getElementsByClassName(xX),C=Go(S,M=>M.__data__.key.split("-")[0]),D=new Rw({style:Object.assign({x1:0,y1:0,x2:0,y2:x.getAttribute("height"),stroke:"black",lineWidth:1},Vn(a,"rule"))}),L=new Jg({style:Object.assign({x:0,y:x.getAttribute("height"),text:"",fontSize:10},Vn(a,"label"))});D.append(L),x.appendChild(D);const B=(M,k,z)=>{const[j]=M.invert(z),V=k.invert(j);return E[w7e(E,V)]},I=(M,k)=>{D.setAttribute("x1",M[0]),D.setAttribute("x2",M[0]),L.setAttribute("text",i(k))};let U;const $=M=>Zdt(this,void 0,void 0,function*(){const{x:k}=h,z=B(d,k,M);I(M,z),u("chartIndex",V=>{const Q=Nt({},V),ee=Q.marks.find(ve=>ve.type==="line"),ne=_o(PK(_,ve=>_o(ve,Se=>+g[Se])/Nd(ve,Se=>+g[Se]),ve=>y[ve]).values()),le=[1/ne,ne];Nt(ee,{scale:{y:{domain:le}}});const ue=Qdt(ee);ue.groupBy="color",ue.basis=(ve,Se)=>{const Re=ve[qE(Xe=>v[+Xe]).center(ve,z)];return Se[Re]};for(const ve of Q.marks)ve.animate=!1;return Q}),U=(yield c("chartIndex")).view}),X=M=>{const{scale:k,coordinate:z}=U,{x:j,y:V}=k,Q=B(z,j,M);I(M,Q);for(const ee of T){const{seriesIndex:re,key:ne}=ee.__data__,le=re[qE(Lt=>v[+Lt]).center(re,Q)],ue=[0,V.map(1)],ve=[0,V.map(g[le]/g[re[0]])],[,Se]=z.map(ue),[,Re]=z.map(ve),Xe=Se-Re;ee.setAttribute("transform",`translate(0, ${Xe})`);const Le=C.get(ne)||[];for(const Lt of Le)Lt.setAttribute("dy",Xe)}},N=Sy(M=>{const k=Sx(x,M);k&&X(k)},e,{leading:n,trailing:r});return $([0,0]),x.addEventListener("pointerenter",N),x.addEventListener("pointermove",N),x.addEventListener("pointerleave",N),()=>{D.remove(),x.removeEventListener("pointerenter",N),x.removeEventListener("pointermove",N),x.removeEventListener("pointerleave",N)}}}L3e.props={reapplyWhenUpdate:!0};function ept(t){const{coordinate:e={}}=t,{transform:n=[]}=e,r=n.find(a=>a.type==="fisheye");if(r)return r;const i={type:"fisheye"};return n.push(i),e.transform=n,t.coordinate=e,i}function tpt({wait:t=30,leading:e,trailing:n=!1}){return r=>{const{options:i,update:a,setState:o,container:s}=r,l=Kp(s),c=Sy(u=>{const f=Sx(l,u);if(!f){o("fisheye"),a();return}o("fisheye",h=>{const d=Nt({},h,{interaction:{tooltip:{preserve:!0}}});for(const y of d.marks)y.animate=!1;const[p,g]=f,v=ept(d);return v.focusX=p,v.focusY=g,v.visual=!0,d}),a()},t,{leading:e,trailing:n});return l.addEventListener("pointerenter",c),l.addEventListener("pointermove",c),l.addEventListener("pointerleave",c),()=>{l.removeEventListener("pointerenter",c),l.removeEventListener("pointermove",c),l.removeEventListener("pointerleave",c)}}}var X_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const cy="tooltipLocked";function rB(t,e){var n;if(e)return typeof e=="string"?document.querySelector(e):e;const r=(n=t.ownerDocument)===null||n===void 0?void 0:n.defaultView;return r?r.getContextService().getDomElement().parentElement:void 0}function npt(t){const e=t.getRenderBounds(),{min:[n,r],max:[i,a]}=e;return{x:n,y:r,width:i-n,height:a-r}}function rpt(t,e){const n=t.getBoundingClientRect(),r=e.getBoundingClientRect();return{x:n.x-r.x,y:n.y-r.y}}function ipt(t,e,n,r,i,a,o,s={},l=[10,10]){const c={[FE("tooltip")]:{},[FE("tooltip-title")]:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},u=new WRe({className:"tooltip",style:{x:e,y:n,container:o,data:[],bounding:a,position:r,enterable:i,title:"",offset:l,template:{prefixCls:Fy},style:Nt(c,s)}});return t.appendChild(u.HTMLTooltipElement),u}function k3e({root:t,data:e,x:n,y:r,render:i,event:a,single:o,position:s="right-bottom",enterable:l=!1,css:c,mount:u,bounding:f,offset:h}){const d=rB(t,u),p=rB(t),g=o?p:t,v=f||npt(t),y=rpt(p,d),{tooltipElement:_=ipt(d,n,r,s,l,v,y,c,h)}=g,{items:E,title:x=""}=e;_.update(Object.assign({x:n,y:r,data:E.map(T=>Object.assign(Object.assign({},T),{value:!T.value&&T.value!==0?"":T.value})),title:x,position:s,enterable:l,container:y},i!==void 0&&{content:i(a,{items:E,title:x})})),g.tooltipElement=_}function d_({root:t,single:e,emitter:n,nativeEvent:r=!0,event:i=null}){r&&n.emit("tooltip:hide",{nativeEvent:r});const a=rB(t),o=e?a:t,{tooltipElement:s}=o;s&&s.hide(i?.clientX,i?.clientY),B3e(t),F3e(t),U3e(t)}function DX({root:t,single:e}){const n=rB(t),r=e?n:t;if(!r)return;const{tooltipElement:i}=r;i&&(i.destroy(),r.tooltipElement=void 0),B3e(t),F3e(t),U3e(t)}function $ee(t){const{value:e}=t;return Object.assign(Object.assign({},t),{value:e===void 0?"undefined":e})}function apt(t){var e,n,r,i,a,o,s;const{__data__:l}=t,{title:c,items:u=[]}=l;if(u.some(S=>Ree in S)){const S=u.filter(Yo).map(w=>{var{color:C=Hee(t)}=w,D=X_(w,["color"]);return Object.assign(Object.assign({},D),{color:C})}).map($ee);return Object.assign(Object.assign({},c&&{title:c}),{items:S})}const h=(n=(e=l?.normalized)===null||e===void 0?void 0:e.x)!==null&&n!==void 0?n:0,d=(r=t.parentNode)===null||r===void 0?void 0:r.__data__,p=(i=d?.encode)!==null&&i!==void 0?i:{},{x:g={},y:v={},color:y={}}=p,{value:_=[]}=g,{value:E=[]}=v,{value:x=[]}=y,T=Math.min(Math.round(_.length*h),_.length-1);return{title:`${_[T]}, ${E[T]}`,items:[{name:(a=y.field)!==null&&a!==void 0?a:"value",value:x[T],color:((o=t.style)===null||o===void 0?void 0:o.fill)||((s=t.getAttribute)===null||s===void 0?void 0:s.call(t,"color"))||"#000"}]}}function opt(t){const{__data__:e}=t;if(KF(t))return apt(t);const{title:n,items:r=[]}=e,i=r.filter(Yo).map(a=>{var{color:o=Hee(t)}=a,s=X_(a,["color"]);return Object.assign(Object.assign({},s),{color:o})}).map($ee);return Object.assign(Object.assign({},n&&{title:n}),{items:i})}function Hee(t){const e=t.getAttribute("fill"),n=t.getAttribute("stroke"),{__data__:r}=t,{color:i=e&&e!=="transparent"?e:n}=r;return i}function oce(t,e=n=>n){const n=new Map(t.map(r=>[e(r),r]));return Array.from(n.values())}function D3e(t,e,n,r=t.map(a=>a.__data__),i={}){const a=l=>l instanceof Date?+l:l,o=oce(r.map(l=>l.title),a).filter(Yo),s=r.flatMap((l,c)=>{const u=l.element||t[c],{items:f=[],title:h}=l,d=f.filter(Yo),p=n!==void 0?n:f.length<=1;return d.map(g=>{var{color:v=Hee(u)||i.color,name:y}=g,_=X_(g,["color","name"]);const E=gGe(e,l),x=p&&!(Ree in _)?E||y:y||E;return Object.assign(Object.assign({},_),{color:v,name:x||h})})}).map($ee);return Object.assign(Object.assign({},o.length>0&&{title:o.join(",")}),{items:oce(s,l=>`(${a(l.name)}, ${a(l.value)}, ${a(l.color)})`)})}function spt(t,e,n,r){var{plotWidth:i,plotHeight:a,mainWidth:o,mainHeight:s,startX:l,startY:c,transposed:u,polar:f,insetLeft:h,insetTop:d}=r,p=X_(r,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const g=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},p),v=(S,w,C)=>{const D=new yx({style:Object.assign({cx:S,cy:w,r:C},g)});return t.appendChild(D),D},y=(S,w,C,D)=>{const L=new Rw({style:Object.assign({x1:S,x2:w,y1:C,y2:D},g)});return t.appendChild(L),L},E=((S,w)=>{if(w.length===1)return w[0];const C=w.map(L=>Xs(L,S)),D=yP(C,L=>L);return w[D]})(n,e),x=()=>u?[l+E[0],l+E[0],c,c+a]:[l,l+i,E[1]+c,E[1]+c],T=()=>{const S=l+h+o/2,w=c+d+s/2,C=Xs([S,w],E);return[S,w,C]};if(f){const[S,w,C]=T(),D=t.ruleX||v(S,w,C);D.style.cx=S,D.style.cy=w,D.style.r=C,t.ruleX=D}else{const[S,w,C,D]=x(),L=t.ruleX||y(S,w,C,D);L.style.x1=S,L.style.x2=w,L.style.y1=C,L.style.y2=D,t.ruleX=L}}function lpt(t,e,n){var{plotWidth:r,plotHeight:i,mainWidth:a,mainHeight:o,startX:s,startY:l,transposed:c,polar:u,insetLeft:f,insetTop:h}=n,d=X_(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const p=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},d),g=e.map(D=>D[1]),v=e.map(D=>D[0]),y=ER(g),_=ER(v),E=()=>{if(u){const D=Math.min(a,o)/2,L=s+f+a/2,B=l+h+o/2,I=Vp(ul([_,y],[L,B])),U=L+D*Math.cos(I),$=B+D*Math.sin(I);return[L,U,B,$]}return c?[s,s+r,y+l,y+l]:[_+s,_+s,l,l+i]},[x,T,S,w]=E(),C=()=>{const D=new Rw({style:Object.assign({x1:x,x2:T,y1:S,y2:w},p)});return t.appendChild(D),D};if(v.length>0){const D=t.ruleY||C();D.style.x1=x,D.style.x2=T,D.style.y1=S,D.style.y2=w,t.ruleY=D}}function B3e(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function F3e(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function cpt(t,{data:e,style:n,theme:r}){t.markers&&t.markers.forEach(o=>o.remove());const{type:i=""}=n,a=e.filter(o=>{const[{x:s,y:l}]=o;return Yo(s)&&Yo(l)}).map(o=>{const[{color:s,element:l},c]=o,u=s||l.style.fill||l.style.stroke||r.color,f=i==="hollow"?"transparent":u,h=i==="hollow"?u:"#fff";return new yx({className:`${Fy}tooltip-marker`,style:Object.assign({cx:c[0],cy:c[1],fill:f,r:4,stroke:h,lineWidth:2,pointerEvents:"none"},n)})});for(const o of a)t.appendChild(o);t.markers=a}function U3e(t){t.markers&&(t.markers.forEach(e=>e.remove()),t.markers=[])}function sce(t,e){return Array.from(t.values()).some(n=>{var r;return(r=n.interaction)===null||r===void 0?void 0:r[e]})}function cm(t,e){return t===void 0?e:t}function j3e(t){const{title:e,items:n}=t;return n.length===0&&e===void 0}function upt(t){return Array.from(t.values()).some(e=>{var n;return((n=e.interaction)===null||n===void 0?void 0:n.seriesTooltip)&&e.tooltip})}function fpt(t,e){const{innerWidth:n,innerHeight:r,marginLeft:i,paddingLeft:a,insetLeft:o,marginTop:s,paddingTop:l,insetTop:c}=t.getOptions();return{x:(e.x-i-a-o)/n,y:(e.y-s-l-c)/r}}function hpt(t){const{x:e}=t;if(!e||!e.valueBandWidth)return!0;const{valueBandWidth:n}=e;return Ln(n)?!0:new Set(n.values()).size===1}function dpt(t,e){const{adjustedRange:n,valueBandWidth:r,valueStep:i}=t,a=Array.from(r.values()),o=Array.from(i.values()),l=n.map((c,u)=>{const f=(o[u]-a[u])/2;return[c-f,c+a[u]+f]}).findIndex(([c,u])=>c<=e&&e<=u);return l!==-1?l:e>.5?n.length-1:0}function z3e({root:t,event:e,elements:n=[],coordinate:r,scale:i,shared:a}){var o,s;const l=y=>y.markType==="interval",c=n.every(l)&&!Mo(r),u=i.x,f=hpt(i),h=i.series,d=(s=(o=u?.getBandWidth)===null||o===void 0?void 0:o.call(u))!==null&&s!==void 0?s:0,p=h&&h.valueBandWidth?y=>{const _=Math.round(1/h.valueBandWidth);return y.__data__.x+y.__data__.series*d+d/(_*2)}:y=>y.__data__.x+d/2;c&&n.sort((y,_)=>p(y)-p(_));const g=y=>{const{target:_=bd(n)}=y;return $P(_,E=>E.classList?(KF(E)&&H_(E,"__data__.normalized",fpt(r,{x:y.offsetX,y:y.offsetY})),E.classList.includes("element")):!1)};return(c?y=>{const _=Sx(t,y);if(!_)return;const[E]=r.invert(_),x=qE(p).center,T=f?x(n,E):dpt(u,E),S=n[T];if(!a){const w=n.find(C=>C!==S&&p(C)===p(S));if(w)return g(y)||w}return S}:g)(e)}function $3e({root:t,event:e,elements:n,coordinate:r,scale:i,startX:a,startY:o}){const s=as(r),l=[],c=[];for(const M of n){const{__data__:k}=M,{seriesX:z,title:j,items:V}=k;z?l.push(M):(j||V)&&c.push(M)}const u=M=>M.markType==="interval",f=c.length&&c.every(u)&&!Mo(r),h=M=>M.__data__.x,p=!!i.x.getBandWidth&&c.length>0;l.sort((M,k)=>{const z=s?0:1,j=V=>V.getBounds().min[z];return s?j(k)-j(M):j(M)-j(k)});const g=M=>{const k=s?1:0,{min:z,max:j}=M.getLocalBounds();return Xg([z[k],j[k]])};f?n.sort((M,k)=>h(M)-h(k)):c.sort((M,k)=>{const[z,j]=g(M),[V,Q]=g(k),ee=(z+j)/2,re=(V+Q)/2;return s?re-ee:ee-re});const v=new Map(l.map(M=>{const{__data__:k}=M,{seriesX:z}=k,j=z.map((Q,ee)=>ee),V=Xg(j,Q=>z[+Q]);return[M,[V,z]]})),{x:y}=i,_=y?.getBandWidth?y.getBandWidth()/2:0,E=M=>{const[k]=r.invert(M);return k-_},x=(M,k,z,j)=>{const{_x:V}=M,Q=V!==void 0?y.map(V):E(k),ee=j.filter(Yo),[re,ne]=Xg([ee[0],ee[ee.length-1]]),le=re===ne;if(!p&&(Q<re||Q>ne)&&!le)return null;const ue=qE(Se=>j[+Se]).center,ve=ue(z,Q);return z[ve]},T=f?(M,k)=>{const z=qE(h).center,j=z(k,E(M)),V=k[j];return Go(k,h).get(h(V))}:(M,k)=>{const j=M[s?1:0],V=k.filter(re=>{const[ne,le]=g(re);return j>=ne&&j<=le});if(!p||V.length>0)return V;const Q=qE(re=>{const[ne,le]=g(re);return(ne+le)/2}).center,ee=Q(k,j);return[k[ee]].filter(Yo)},S=(M,k)=>{const{__data__:z}=M;return Object.fromEntries(Object.entries(z).filter(([j])=>j.startsWith("series")&&j!=="series").map(([j,V])=>{const Q=V[k];return[cQ(j.replace("series","")),Q]}))},w=Sx(t,e);if(!w)return;const C=[w[0]-a,w[1]-o];if(!C)return;const D=T(C,c),L=[],B=[];for(const M of l){const[k,z]=v.get(M),j=x(e,C,k,z);if(j!==null){L.push(M);const V=S(M,j),{x:Q,y:ee}=V,re=r.map([(Q||0)+_,ee||0]);B.push([Object.assign(Object.assign({},V),{element:M}),re])}}const I=Array.from(new Set(B.map(M=>M[0].x))),U=I[yP(I,M=>Math.abs(M-E(C)))],$=B.filter(M=>M[0].x===U),X=[...$.map(M=>M[0]),...D.map(M=>M.__data__)];return{selectedElements:[...L,...D],selectedData:X,filteredSeriesData:$,abstractX:E}}function lce(t,e){var{elements:n,sort:r,filter:i,scale:a,coordinate:o,crosshairs:s,crosshairsX:l,crosshairsY:c,render:u,groupName:f,emitter:h,wait:d=50,leading:p=!0,trailing:g=!1,startX:v=0,startY:y=0,body:_=!0,single:E=!0,position:x,enterable:T,mount:S,bounding:w,theme:C,offset:D,disableNative:L=!1,marker:B=!0,preserve:I=!1,style:U={},css:$={},clickLock:X=!1,disableAutoHide:N=!1}=e,M=X_(e,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css","clickLock","disableAutoHide"]);const k=n(t),z=Nt(U,M),j=Mo(o),V=as(o),{innerWidth:Q,innerHeight:ee,width:re,height:ne,insetLeft:le,insetTop:ue}=o.getOptions(),ve=Sy(rn=>{var Wn;if(X&&t.getAttribute(cy))return;const Sn=Sx(t,rn);if(!Sn)return;const In=eM(t),de=In.min[0],sr=In.min[1],{selectedElements:zr,selectedData:st,filteredSeriesData:Ft,abstractX:An}=$3e({root:t,event:rn,elements:k,coordinate:o,scale:a,startX:v,startY:y}),wn=D3e(zr,a,f,st,C);if(r&&wn.items.sort((Tr,Rr)=>r(Tr)-r(Rr)),i&&(wn.items=wn.items.filter(i)),zr.length===0||j3e(wn)){Se(rn);return}if(_&&k3e({root:t,data:wn,x:Sn[0]+de,y:Sn[1]+sr,render:u,event:rn,single:E,position:x,enterable:T,mount:S,bounding:w,css:$,offset:D}),s||l||c){const Tr=Vn(z,"crosshairs"),Rr=Object.assign(Object.assign({},Tr),Vn(z,"crosshairsX")),ei=Object.assign(Object.assign({},Tr),Vn(z,"crosshairsY")),va=Ft.map(pi=>pi[1]);l&&spt(t,va,Sn,Object.assign(Object.assign({},Rr),{plotWidth:Q,plotHeight:ee,mainWidth:re,mainHeight:ne,insetLeft:le,insetTop:ue,startX:v,startY:y,transposed:V,polar:j})),c&&lpt(t,va,Object.assign(Object.assign({},ei),{plotWidth:Q,plotHeight:ee,mainWidth:re,mainHeight:ne,insetLeft:le,insetTop:ue,startX:v,startY:y,transposed:V,polar:j}))}if(B){const Tr=Vn(z,"marker");cpt(t,{data:Ft,style:Tr,theme:C})}const $n=(Wn=Ft[0])===null||Wn===void 0?void 0:Wn[0].x,Vr=$n??An(focus);h.emit("tooltip:show",Object.assign(Object.assign({},rn),{nativeEvent:!0,data:Object.assign(Object.assign({},wn),{data:{x:QA(a.x,Vr,!0)}})}))},d,{leading:p,trailing:g}),Se=rn=>{X&&t.getAttribute(cy)||N||d_({root:t,single:E,emitter:h,event:rn})},Re=()=>{DX({root:t,single:E})},Xe=rn=>{var Wn,{nativeEvent:Sn,data:In,offsetX:de,offsetY:sr}=rn,zr=X_(rn,["nativeEvent","data","offsetX","offsetY"]);if(Sn)return;const st=(Wn=In?.data)===null||Wn===void 0?void 0:Wn.x,An=a.x.map(st),[wn,$n]=o.map([An,.5]),Vr=eM(t),Tr=Vr.min[0],Rr=Vr.min[1];ve(Object.assign(Object.assign({},zr),{offsetX:de!==void 0?de:Tr+wn,offsetY:sr!==void 0?sr:Rr+$n,_x:st}))},Le=()=>{d_({root:t,single:E,emitter:h,nativeEvent:!1})},Lt=()=>{zt(),Re()},xt=rn=>{Sx(t,rn)||Se(rn)},dt=()=>{At()},Bt=rn=>{X&&t.setAttribute(cy,!t.getAttribute(cy)),ve(rn)},At=()=>{L||(t.addEventListener("pointerdown",Bt),t.addEventListener("pointerenter",ve),t.addEventListener("pointermove",ve),t.addEventListener("pointerleave",xt),t.addEventListener("pointerup",Se))},zt=()=>{L||(t.removeEventListener("pointerdown",Bt),t.removeEventListener("pointerenter",ve),t.removeEventListener("pointermove",ve),t.removeEventListener("pointerleave",xt),t.removeEventListener("pointerup",Se))};return At(),h.on("tooltip:show",Xe),h.on("tooltip:hide",Le),h.on("tooltip:disable",Lt),h.on("tooltip:enable",dt),()=>{zt(),h.off("tooltip:show",Xe),h.off("tooltip:hide",Le),h.off("tooltip:disable",Lt),h.off("tooltip:enable",dt),I?d_({root:t,single:E,emitter:h,nativeEvent:!1}):Re()}}function ppt(t,{elements:e,coordinate:n,scale:r,render:i,groupName:a,sort:o,filter:s,emitter:l,wait:c=50,leading:u=!0,trailing:f=!1,groupKey:h=U=>U,single:d=!0,position:p,enterable:g,datum:v,view:y,mount:_,bounding:E,theme:x,offset:T,shared:S=!1,body:w=!0,disableNative:C=!1,preserve:D=!1,css:L={},clickLock:B=!1,disableAutoHide:I=!1}){const U=e(t),$=Go(U,h),X=Sy(re=>{if(B&&t.getAttribute(cy))return;const ne=z3e({root:t,event:re,elements:U,coordinate:n,scale:r,shared:S});if(!ne){I||d_({root:t,single:d,emitter:l,event:re});return}const le=h(ne),ue=$.get(le);if(!ue)return;const ve=ue.length===1&&!S?opt(ue[0]):D3e(ue,r,a,void 0,x);if(o&&ve.items.sort((Xe,Le)=>o(Xe)-o(Le)),s&&(ve.items=ve.items.filter(s)),j3e(ve)){I||d_({root:t,single:d,emitter:l,event:re});return}const{offsetX:Se,offsetY:Re}=re;w&&k3e({root:t,data:ve,x:Se,y:Re,render:i,event:re,single:d,position:p,enterable:g,mount:_,bounding:E,css:L,offset:T}),l.emit("tooltip:show",Object.assign(Object.assign({},re),{nativeEvent:!0,data:Object.assign(Object.assign({},ve),{data:PQ(ne,y)})}))},c,{leading:u,trailing:f}),N=re=>{I||d_({root:t,single:d,emitter:l,event:re})},M=re=>{B&&t.setAttribute(cy,!t.getAttribute(cy)),X(re)},k=()=>{C||(t.addEventListener("pointerdown",M),t.addEventListener("pointermove",X),t.addEventListener("pointerleave",N),t.addEventListener("pointerup",N))},z=()=>{C||(t.removeEventListener("pointerdown",M),t.removeEventListener("pointermove",X),t.removeEventListener("pointerleave",N),t.removeEventListener("pointerup",N))},j=({nativeEvent:re,offsetX:ne,offsetY:le,data:ue})=>{if(re)return;const{data:ve}=ue,Se=$4(U,ve,v);if(!Se)return;const Re=Se.getBBox(),{x:Xe,y:Le,width:Lt,height:xt}=Re,dt=t.getBBox();X({target:Se,offsetX:ne!==void 0?ne+dt.x:Xe+Lt/2,offsetY:le!==void 0?le+dt.y:Le+xt/2})},V=({nativeEvent:re}={})=>{re||d_({root:t,single:d,emitter:l,nativeEvent:!1})},Q=()=>{z(),DX({root:t,single:d})},ee=()=>{k()};return l.on("tooltip:show",j),l.on("tooltip:hide",V),l.on("tooltip:enable",ee),l.on("tooltip:disable",Q),k(),()=>{z(),l.off("tooltip:show",j),l.off("tooltip:hide",V),l.off("tooltip:enable",ee),l.off("tooltip:disable",Q),D?d_({root:t,single:d,emitter:l,nativeEvent:!1}):DX({root:t,single:d})}}function H3e(t){const{shared:e,crosshairs:n,crosshairsX:r,crosshairsY:i,series:a,name:o,item:s=()=>({}),facet:l=!1}=t,c=X_(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(u,f,h)=>{const{container:d,view:p}=u,{scale:g,markState:v,coordinate:y,theme:_}=p,E=sce(v,"seriesTooltip"),x=sce(v,"crosshairs"),T=Kp(d),S=cm(a,E),w=cm(n,x);if(c.clickLock&&!l&&T.setAttribute(cy,!1),S&&upt(v)&&!l)return lce(T,Object.assign(Object.assign({},c),{theme:_,elements:Py,scale:g,coordinate:y,crosshairs:w,crosshairsX:cm(cm(r,n),!1),crosshairsY:cm(i,w),item:s,emitter:h}));if(S&&l){const C=f.filter(X=>X!==u&&X.options.parentKey===u.options.key),D=qNe(u,f),L=C[0].view.scale,B=T.getBounds(),I=B.min[0],U=B.min[1];Object.assign(L,{facet:!0});const $=T.parentNode.parentNode;return c.clickLock&&$.setAttribute(cy,!1),lce($,Object.assign(Object.assign({},c),{theme:_,elements:()=>D,scale:L,coordinate:y,crosshairs:cm(n,x),crosshairsX:cm(cm(r,n),!1),crosshairsY:cm(i,w),item:s,startX:I,startY:U,emitter:h}))}return ppt(T,Object.assign(Object.assign({},c),{datum:Y_(p),elements:Py,scale:g,coordinate:y,groupKey:e?zP():void 0,item:s,emitter:h,view:p,theme:_,shared:e}))}}H3e.props={reapplyWhenUpdate:!0};function gpt(){return(t,e,n)=>{const{container:r,view:i,options:a}=t,o=Bee(r),s=Py(r),l=d=>IX(d).scales[0].name,c=d=>{const{scale:{[d]:p}}=i;return p},u=Tx(a,["active","inactive"]),f=Bw(s,Y_(i)),h=[];for(const d of o){const p=j=>{const{data:V}=d.attributes,{__data__:Q}=j,{index:ee}=Q;return V[ee].label},g=l(d),v=l3e(d),y=c(g),_=Go(s,j=>y.invert(j.__data__[g])),{state:E={}}=d.attributes,{inactive:x={}}=E,{setState:T,removeState:S}=D_(u,f),w={inactive:Vn(x,"marker")},C={inactive:Vn(x,"label")},{setState:D,removeState:L}=D_(w),{setState:B,removeState:I}=D_(C),U=j=>{for(const V of v){const Q=o3e(V),ee=s3e(V);V===j||j===null?(L(Q,"inactive"),I(ee,"inactive")):(D(Q,"inactive"),B(ee,"inactive"))}},$=(j,V)=>{const Q=p(V),ee=new Set(_.get(Q));for(const ne of s)ee.has(ne)?T(ne,"active"):T(ne,"inactive");U(V);const{nativeEvent:re=!0}=j;re&&n.emit("legend:highlight",Object.assign(Object.assign({},j),{nativeEvent:re,data:{channel:g,value:Q}}))},X=new Map;for(const j of v){const V=Q=>{$(Q,j)};j.addEventListener("pointerover",V),X.set(j,V)}const N=j=>{for(const Q of s)S(Q,"inactive","active");U(null);const{nativeEvent:V=!0}=j;V&&n.emit("legend:unhighlight",{nativeEvent:V})},M=j=>{const{nativeEvent:V,data:Q}=j;if(V)return;const{channel:ee,value:re}=Q;if(ee!==g)return;const ne=v.find(le=>p(le)===re);ne&&$({nativeEvent:!1},ne)},k=j=>{const{nativeEvent:V}=j;V||N({nativeEvent:!1})};d.addEventListener("pointerleave",N),n.on("legend:highlight",M),n.on("legend:unhighlight",k);const z=()=>{d.removeEventListener(N),n.off("legend:highlight",M),n.off("legend:unhighlight",k);for(const[j,V]of X)j.removeEventListener(V)};h.push(z)}return()=>h.forEach(d=>d())}}var Tp=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function vpt(t,e){const[n,r,i,a]=t,[o,s,l,c]=e;return!(o>i||l<n||s>a||c<r)}function mpt(t,e,n,r,i){const[a,o,s,l]=i;return[Math.max(a,Math.min(t,n)),Math.max(o,Math.min(e,r)),Math.min(s,Math.max(t,n)),Math.min(l,Math.max(e,r))]}function ypt(t){const{width:e,height:n}=t.getBBox();return[0,0,e,n]}function $0(t,e){for(const[n,r]of Object.entries(e))t.style(n,r)}const cce=VA(t=>{const e=t.attributes,{x:n,y:r,width:i,height:a,class:o,renders:s={},handleSize:l=10,document:c}=e,u=Tp(e,["x","y","width","height","class","renders","handleSize","document"]);if(!c||i===void 0||a===void 0||n===void 0||r===void 0)return;const f=l/2,h=(re,ne,le)=>{re.handle||(re.handle=le.createElement("rect"),re.append(re.handle));const{handle:ue}=re;return ue.attr(ne),ue},d=Vn(nk(u,"handleNW","handleNE"),"handleN"),{render:p=h}=d,g=Tp(d,["render"]),v=Vn(u,"handleE"),{render:y=h}=v,_=Tp(v,["render"]),E=Vn(nk(u,"handleSE","handleSW"),"handleS"),{render:x=h}=E,T=Tp(E,["render"]),S=Vn(u,"handleW"),{render:w=h}=S,C=Tp(S,["render"]),D=Vn(u,"handleNW"),{render:L=h}=D,B=Tp(D,["render"]),I=Vn(u,"handleNE"),{render:U=h}=I,$=Tp(I,["render"]),X=Vn(u,"handleSE"),{render:N=h}=X,M=Tp(X,["render"]),k=Vn(u,"handleSW"),{render:z=h}=k,j=Tp(k,["render"]),V=(re,ne)=>{const{id:le}=re,ue=ne(re,re.attributes,c);ue.id=le,ue.style.draggable=!0},Q=re=>()=>{const ne=VA(le=>V(le,re));return new ne({})},ee=ai(t).attr("className",o).style("transform",`translate(${n}, ${r})`).style("draggable",!0);ee.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call($0,Object.assign(Object.assign({width:i,height:a},nk(u,"handle")),{transform:void 0})),ee.maybeAppend("handle-n",Q(p)).style("x",f).style("y",-f).style("width",i-l).style("height",l).style("fill","transparent").call($0,g),ee.maybeAppend("handle-e",Q(y)).style("x",i-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call($0,_),ee.maybeAppend("handle-s",Q(x)).style("x",f).style("y",a-f).style("width",i-l).style("height",l).style("fill","transparent").call($0,T),ee.maybeAppend("handle-w",Q(w)).style("x",-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call($0,C),ee.maybeAppend("handle-nw",Q(L)).style("x",-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call($0,B),ee.maybeAppend("handle-ne",Q(U)).style("x",i-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call($0,$),ee.maybeAppend("handle-se",Q(N)).style("x",i-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call($0,M),ee.maybeAppend("handle-sw",Q(z)).style("x",-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call($0,j)});function Gee(t,e){var{brushed:n=()=>{},brushended:r=()=>{},brushcreated:i=()=>{},brushstarted:a=()=>{},brushupdated:o=()=>{},extent:s=ypt(t),brushRegion:l=(ue,ve,Se,Re,Xe)=>[ue,ve,Se,Re],reverse:c=!1,fill:u="#777",fillOpacity:f="0.3",stroke:h="#fff",selectedHandles:d=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=e,p=Tp(e,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let g=null,v=null,y=null,_=null,E=null,x=!1;const[T,S,w,C]=s;o_(t,"crosshair"),t.style.draggable=!0;const D=(ue,ve,Se)=>{if(a(Se),_&&_.remove(),E&&E.remove(),g=[ue,ve],c)return L();B()},L=()=>{E=new Kf({style:Object.assign(Object.assign({},p),{fill:u,fillOpacity:f,stroke:h,pointerEvents:"none"})}),_=new cce({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(E),t.appendChild(_)},B=()=>{_=new cce({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},p),{fill:u,fillOpacity:f,stroke:h,draggable:!0}),className:"mask"}),t.appendChild(_)},I=(ue=!0)=>{_&&_.remove(),E&&E.remove(),g=null,v=null,y=null,x=!1,_=null,E=null,r(ue)},U=(ue,ve,Se=!0)=>{const[Re,Xe,Le,Lt]=mpt(ue[0],ue[1],ve[0],ve[1],s),[xt,dt,Bt,At]=l(Re,Xe,Le,Lt,s);return c?X(xt,dt,Bt,At):$(xt,dt,Bt,At),n(xt,dt,Bt,At,Se),[xt,dt,Bt,At]},$=(ue,ve,Se,Re)=>{_.style.x=ue,_.style.y=ve,_.style.width=Se-ue,_.style.height=Re-ve},X=(ue,ve,Se,Re)=>{E.style.d=`
      M${T},${S}L${w},${S}L${w},${C}L${T},${C}Z
      M${ue},${ve}L${ue},${Re}L${Se},${Re}L${Se},${ve}Z
    `,_.style.x=ue,_.style.y=ve,_.style.width=Se-ue,_.style.height=Re-ve},N=ue=>{const ve=(dt,Bt,At,zt,rn)=>dt+Bt<zt?zt-Bt:dt+At>rn?rn-At:dt,Se=ue[0]-y[0],Re=ue[1]-y[1],Xe=ve(Se,g[0],v[0],T,w),Le=ve(Re,g[1],v[1],S,C),Lt=[g[0]+Xe,g[1]+Le],xt=[v[0]+Xe,v[1]+Le];U(Lt,xt)},M={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},k=ue=>j(ue)||z(ue),z=ue=>{const{id:ve}=ue;return d.indexOf(ve)===-1?!1:new Set(Object.keys(M)).has(ve)},j=ue=>ue===_.getElementById("selection"),V=ue=>{const{target:ve}=ue,[Se,Re]=J7(t,ue);if(!_||!k(ve)){D(Se,Re,ue),x=!0;return}k(ve)&&(y=[Se,Re])},Q=ue=>{const{target:ve}=ue,Se=J7(t,ue);if(!g)return;if(!y)return U(g,Se);if(j(ve))return N(Se);const[Re,Xe]=[Se[0]-y[0],Se[1]-y[1]],{id:Le}=ve;if(M[Le]){const[Lt,xt,dt,Bt]=M[Le].vector;return U([g[0]+Re*Lt,g[1]+Xe*xt],[v[0]+Re*dt,v[1]+Xe*Bt])}},ee=ue=>{if(y){y=null;const{x:Le,y:Lt,width:xt,height:dt}=_.style;g=[Le,Lt],v=[Le+xt,Lt+dt],o(Le,Lt,Le+xt,Lt+dt,ue);return}v=J7(t,ue);const[ve,Se,Re,Xe]=U(g,v);x=!1,i(ve,Se,Re,Xe,ue)},re=ue=>{const{target:ve}=ue;_&&!k(ve)&&I()},ne=ue=>{const{target:ve}=ue;!_||!k(ve)||x?o_(t,"crosshair"):j(ve)?o_(t,"move"):z(ve)&&o_(t,M[ve.id].cursor)},le=()=>{o_(t,"default")};return t.addEventListener("dragstart",V),t.addEventListener("drag",Q),t.addEventListener("dragend",ee),t.addEventListener("click",re),t.addEventListener("pointermove",ne),t.addEventListener("pointerleave",le),{mask:_,move(ue,ve,Se,Re,Xe=!0){_||D(ue,ve,{}),g=[ue,ve],v=[Se,Re],U([ue,ve],[Se,Re],Xe)},remove(ue=!0){_&&I(ue)},destroy(){_&&I(!1),o_(t,"default"),t.removeEventListener("dragstart",V),t.removeEventListener("drag",Q),t.removeEventListener("dragend",ee),t.removeEventListener("click",re),t.removeEventListener("pointermove",ne),t.removeEventListener("pointerleave",le)}}}function Wee(t,e,n){return e.filter(r=>{if(r===t)return!1;const{interaction:i={}}=r.options;return Object.values(i).find(a=>a.brushKey===n)})}function _pt(t,e,n){return Wee(t,e,n).map(r=>Kp(r.container))}function bpt(t,e,n){return Wee(t,e,n).map(r=>r.options)}function uce(t,e){var{elements:n,selectedHandles:r,siblings:i=Q=>[],datum:a,brushRegion:o,extent:s,reverse:l,scale:c,coordinate:u,series:f=!1,key:h=Q=>Q,bboxOf:d=Q=>{const{x:ee,y:re,width:ne,height:le}=Q.style;return{x:ee,y:re,width:ne,height:le}},state:p={},emitter:g}=e,v=Tp(e,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const y=n(t),_=i(t),E=_.flatMap(n),x=Bw(y,a),T=Vn(v,"mask"),{setState:S,removeState:w}=D_(p,x),C=new Map,{width:D,height:L,x:B=0,y:I=0}=d(t),U=s||[0,0,D,L],$=()=>{for(const Q of[...y,...E])w(Q,"active","inactive")},X=(Q,ee,re,ne)=>{var le;for(const ve of _)(le=ve.brush)===null||le===void 0||le.remove();const ue=new Set;for(const ve of y){const{min:Se,max:Re}=ve.getLocalBounds(),[Xe,Le]=Se,[Lt,xt]=Re;vpt([Xe,Le,Lt,xt],[Q,ee,re,ne])?(S(ve,"active"),ue.add(h(ve))):S(ve,"inactive")}for(const ve of E)ue.has(h(ve))?S(ve,"active"):S(ve,"inactive")},N=()=>{for(const Q of y)w(Q,"inactive");for(const Q of C.values())Q.remove();C.clear()},M=(Q,ee,re,ne)=>{const le=ve=>{const Se=ve.cloneNode();return Se.__data__=ve.__data__,ve.parentNode.appendChild(Se),C.set(ve,Se),Se},ue=new Wx({style:{x:Q+B,y:ee+I,width:re-Q,height:ne-ee}});t.appendChild(ue);for(const ve of y){const Se=C.get(ve)||le(ve);Se.style.clipPath=ue,S(ve,"inactive"),S(Se,"active")}},k=Gee(t,Object.assign(Object.assign({},T),{extent:U,brushRegion:o,reverse:l,selectedHandles:r,brushended:Q=>{const ee=f?N:$;Q&&g.emit("brush:remove",{nativeEvent:!0}),ee()},brushed:(Q,ee,re,ne,le)=>{const ue=ck(Q,ee,re,ne,c,u);le&&g.emit("brush:highlight",{nativeEvent:!0,data:{selection:ue}}),(f?M:X)(Q,ee,re,ne)},brushcreated:(Q,ee,re,ne,le)=>{const ue=ck(Q,ee,re,ne,c,u);g.emit("brush:end",Object.assign(Object.assign({},le),{nativeEvent:!0,data:{selection:ue}}))},brushupdated:(Q,ee,re,ne,le)=>{const ue=ck(Q,ee,re,ne,c,u);g.emit("brush:end",Object.assign(Object.assign({},le),{nativeEvent:!0,data:{selection:ue}}))},brushstarted:Q=>{g.emit("brush:start",Q)}})),z=({nativeEvent:Q,data:ee})=>{if(Q)return;const{selection:re}=ee,[ne,le,ue,ve]=Dht(re,c,u);k.move(ne,le,ue,ve,!1)};g.on("brush:highlight",z);const j=({nativeEvent:Q}={})=>{Q||k.remove(!1)};g.on("brush:remove",j);const V=k.destroy.bind(k);return k.destroy=()=>{g.off("brush:highlight",z),g.off("brush:remove",j),V()},k}function W4(t){var{facet:e,brushKey:n}=t,r=Tp(t,["facet","brushKey"]);return(i,a,o)=>{const{container:s,view:l,options:c}=i,u=Kp(s),f={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},h=["active",["inactive",{opacity:.5}]],{scale:d,coordinate:p}=l;if(e){const v=u.getBounds(),y=v.min[0],_=v.min[1],E=v.max[0],x=v.max[1];return uce(u.parentNode.parentNode,Object.assign(Object.assign({elements:()=>qNe(i,a),datum:Y_(NX(i,a).map(T=>T.view)),brushRegion:(T,S,w,C)=>[T,S,w,C],extent:[y,_,E,x],state:Tx(NX(i,a).map(T=>T.options),h),emitter:o,scale:d,coordinate:p,selectedHandles:void 0},f),r))}const g=uce(u,Object.assign(Object.assign({elements:Py,key:v=>v.__data__.key,siblings:()=>_pt(i,a,n),datum:Y_([l,...Wee(i,a,n).map(v=>v.view)]),brushRegion:(v,y,_,E)=>[v,y,_,E],extent:void 0,state:Tx([c,...bpt(i,a,n)],h),emitter:o,scale:d,coordinate:p,selectedHandles:void 0},f),r));return u.brush=g,()=>g.destroy()}}W4.props={reapplyWhenUpdate:!0};function Vee(t,e,n,r,i){const[,a,,o]=i;return[t,a,n,o]}function Ept(t){return W4(Object.assign(Object.assign({},t),{brushRegion:Vee,selectedHandles:["handle-e","handle-w"]}))}function Yee(t,e,n,r,i){const[a,,o]=i;return[a,e,o,r]}function xpt(t){return W4(Object.assign(Object.assign({},t),{brushRegion:Yee,selectedHandles:["handle-n","handle-s"]}))}var Xee=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Spt="axis",Tpt="axis-line",Apt="axis-main-group",G3e="axis-hot-area";function wpt(t){return t.getElementsByClassName(Spt)}function W3e(t){return t.getElementsByClassName(Tpt)[0]}function Opt(t){return t.getElementsByClassName(Apt)[0]}function V3e(t){return Opt(t).getLocalBounds()}function Cpt(t,e){var{cross:n,offsetX:r,offsetY:i}=e,a=Xee(e,["cross","offsetX","offsetY"]);const o=V3e(t),s=W3e(t),[l]=s.getLocalBounds().min,[c,u]=o.min,[f,h]=o.max,d=(f-c)*2;return{brushRegion:Yee,hotZone:new Wx({className:G3e,style:Object.assign({width:n?d/2:d,transform:`translate(${(n?c:l-d/2).toFixed(2)}, ${u})`,height:h-u},a)}),extent:n?(p,g,v,y)=>[-1/0,g,1/0,y]:(p,g,v,y)=>[Math.floor(c-r),g,Math.ceil(f-r),y]}}function Rpt(t,e){var{offsetY:n,offsetX:r,cross:i=!1}=e,a=Xee(e,["offsetY","offsetX","cross"]);const o=V3e(t),s=W3e(t),[,l]=s.getLocalBounds().min,[c,u]=o.min,[f,h]=o.max,d=h-u;return{brushRegion:Vee,hotZone:new Wx({className:G3e,style:Object.assign({width:f-c,height:i?d:d*2,transform:`translate(${c}, ${i?u:l-d})`},a)}),extent:i?(p,g,v,y)=>[p,-1/0,v,1/0]:(p,g,v,y)=>[p,Math.floor(u-n),v,Math.ceil(h-n)]}}function Mpt(t,e){var{axes:n,elements:r,points:i,horizontal:a,datum:o,offsetY:s,offsetX:l,reverse:c=!1,state:u={},emitter:f,coordinate:h}=e,d=Xee(e,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const p=r(t),g=n(t),v=Bw(p,o),{setState:y,removeState:_}=D_(u,v),E=new Map,x=Vn(d,"mask"),T=z=>Array.from(E.values()).every(([j,V,Q,ee])=>z.some(([re,ne])=>re>=j&&re<=Q&&ne>=V&&ne<=ee)),S=g.map(z=>z.attributes.scale),w=z=>z.length>2?[z[0],z[z.length-1]]:z,C=new Map,D=()=>{C.clear();for(let z=0;z<g.length;z++){const j=S[z],{domain:V}=j.getOptions();C.set(z,w(V))}};D();const L=(z,j)=>{const V=[];for(const ee of p){const re=i(ee);T(re)?(y(ee,"active"),V.push(ee)):y(ee,"inactive")}if(C.set(z,I(V,z)),!j)return;const Q=()=>{if(!U)return Array.from(C.values());const ee=[];for(const[re,ne]of C){const le=S[re],{name:ue}=le.getOptions();ue==="x"?ee[0]=ne:ee[1]=ne}return ee};f.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:Q()}})},B=z=>{for(const j of p)_(j,"active","inactive");D(),z&&f.emit("brushAxis:remove",{nativeEvent:!0})},I=(z,j)=>{const V=S[j],{name:Q}=V.getOptions(),ee=z.map(re=>{const ne=re.__data__;return V.invert(ne[Q])});return w(x_(V,ee))},U=g.some(a)&&g.some(z=>!a(z)),$=[];for(let z=0;z<g.length;z++){const j=g[z],V=a(j)?Rpt:Cpt,{hotZone:Q,brushRegion:ee,extent:re}=V(j,{offsetY:s,offsetX:l,cross:U,zIndex:999,fill:"transparent"});j.parentNode.appendChild(Q);const ne=Gee(Q,Object.assign(Object.assign({},x),{reverse:c,brushRegion:ee,brushended(le){E.delete(j),Array.from(E.entries()).length===0?B(le):L(z,le)},brushed(le,ue,ve,Se,Re){E.set(j,re(le,ue,ve,Se)),L(z,Re)}}));$.push(ne)}const X=(z={})=>{const{nativeEvent:j}=z;j||$.forEach(V=>V.remove(!1))},N=(z,j,V)=>{const[Q,ee]=z,re=ue=>ue.getStep?ue.getStep():0,ne=M(Q,j,V),le=M(ee,j,V)+re(j);return a(V)?[ne,-1/0,le,1/0]:[-1/0,ne,1/0,le]},M=(z,j,V)=>{const{height:Q,width:ee}=h.getOptions(),re=j.clone();return a(V)?re.update({range:[0,ee]}):re.update({range:[Q,0]}),re.map(z)},k=z=>{const{nativeEvent:j}=z;if(j)return;const{selection:V}=z.data;for(let Q=0;Q<$.length;Q++){const ee=V[Q],re=$[Q],ne=g[Q];if(ee){const le=S[Q];re.move(...N(ee,le,ne),!1)}else re.remove(!1)}};return f.on("brushAxis:remove",X),f.on("brushAxis:highlight",k),()=>{$.forEach(z=>z.destroy()),f.off("brushAxis:remove",X),f.off("brushAxis:highlight",k)}}function Ppt(t){return(e,n,r)=>{const{container:i,view:a,options:o}=e,s=Kp(i),{x:l,y:c}=s.getBBox(),{coordinate:u}=a;return Mpt(i,Object.assign({elements:Py,axes:wpt,offsetY:c,offsetX:l,points:f=>f.__data__.points,horizontal:f=>{const{startPos:[h,d],endPos:[p,g]}=f.attributes;return h!==p&&d===g},datum:Y_(a),state:Tx(o,["active",["inactive",{opacity:.5}]]),coordinate:u,emitter:r},t))}}var Npt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},Y3e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Ipt(t=300){let e=null;return n=>{const{timeStamp:r}=n;return e!==null&&r-e<t?(e=r,!0):(e=r,!1)}}function Lpt(t,e){var{filter:n,reset:r,brushRegion:i,extent:a,reverse:o,emitter:s,scale:l,coordinate:c,selection:u,series:f=!1}=e,h=Y3e(e,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const d=Vn(h,"mask"),{width:p,height:g}=t.getBBox(),v=a||[0,0,p,g],y=Ipt(),_=Gee(t,Object.assign(Object.assign({},d),{extent:v,brushRegion:i,reverse:o,brushcreated:E}));t.addEventListener("click",x);function E(S,w,C,D,L){S===C&&w===D||(L.nativeEvent=!0,n(u(S,w,C,D),L),_.remove())}function x(S){y(S)&&(S.nativeEvent=!0,r(S))}const T=({nativeEvent:S,data:w})=>{if(S)return;const{selection:C}=w;n(C,{nativeEvent:!1})};return s.on("brush:filter",T),()=>{_.destroy(),s.off("brush:filter",T),t.removeEventListener("click",x)}}function qee(t){var{hideX:e=!0,hideY:n=!0}=t,r=Y3e(t,["hideX","hideY"]);return(i,a,o)=>{const{container:s,view:l,options:c,update:u,setState:f}=i,h=Kp(s),d={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let p=!1,g=!1,v=l;const{scale:y,coordinate:_}=l;return Lpt(h,Object.assign(Object.assign({brushRegion:(E,x,T,S)=>[E,x,T,S],selection:(E,x,T,S)=>{const{scale:w,coordinate:C}=v;return ck(E,x,T,S,w,C)},filter:(E,x)=>Npt(this,void 0,void 0,function*(){if(g)return;g=!0;const[T,S]=E;f("brushFilter",C=>{const{marks:D}=C,L=D.map(B=>Nt({axis:Object.assign(Object.assign({},e&&{x:{transform:[{type:"hide"}]}}),n&&{y:{transform:[{type:"hide"}]}})},B,{scale:{x:{domain:T,nice:!1},y:{domain:S,nice:!1}}}));return Object.assign(Object.assign({},c),{marks:L,clip:!0})}),o.emit("brush:filter",Object.assign(Object.assign({},x),{data:{selection:[T,S]}})),v=(yield u()).view,g=!1,p=!0}),reset:E=>{if(g||!p)return;const{scale:x}=l,{x:T,y:S}=x,w=T.getOptions().domain,C=S.getOptions().domain;o.emit("brush:filter",Object.assign(Object.assign({},E),{data:{selection:[w,C]}})),p=!1,v=l,f("brushFilter"),u()},extent:void 0,emitter:o,scale:y,coordinate:_},d),r))}}function kpt(t){return qee(Object.assign(Object.assign({hideX:!0},t),{brushRegion:Vee}))}function Dpt(t){return qee(Object.assign(Object.assign({hideY:!0},t),{brushRegion:Yee}))}function X3e(t,e,n){const r=t?n:e,i=t?e:n,a=vy(r),o=vy(i),s=i.getOptions().domain,l=!o&&s&&s.length>=2&&s[0]===0;return{currentScale:r,targetScale:i,isSourceDiscrete:a,isTargetDiscrete:o,shouldPreserveZeroBaseline:l}}function Bpt(t,e,n,r,i){const a=t?r:n,o=d=>{const p={};return Object.keys(i).forEach(g=>{(g===d||g.match(new RegExp(`^${d}\\d+$`)))&&(p[g]=i[g])}),p},s=o(t?"x":"y"),l=Object.keys(s),c=l.map(d=>e[d]),u=vy(a),f=c.map(d=>vy(d)),h=c.map((d,p)=>{const g=d.getOptions().domain;return!f[p]&&g&&g.length>=2&&g[0]===0});return{currentScale:a,targetScales:c,isSourceDiscrete:u,isTargetDiscrete:f,shouldPreserveZeroBaseline:h,targetScaleKeys:l}}function Fpt(t){return Array.from(new Set(t)).sort((n,r)=>n-r)}function Upt({isTargetDiscrete:t,filteredValues:e,shouldPreserveZeroBaseline:n}){if(t)return Fpt(e);{const r=Math.min(...e),i=Math.max(...e);return n?[0,i]:[r,i]}}function f2(t){return t instanceof Date?t.getTime():typeof t=="string"?parseFloat(t):Number(t)}function Zee(t,e,n,r,i,a="filter",o=!1){if(r3e(a))return[];const s=o?"y":"x",l=o?"x":"y",c=[];for(const u of t){const{channelData:f}=u,h=f[s]||[],d=f[l]||[],p=Array.isArray(h[0])?h[0]:h,g=Array.isArray(d[0]);if(p.length===0)continue;const v=p.length;for(let y=0;y<v;y++){const _=p[y];let E=!1;if(n)E=e.includes(_);else if(e.length>=2){const x=f2(_),T=f2(e[0]),S=f2(e[e.length-1]);!isNaN(x)&&!isNaN(T)&&!isNaN(S)&&(E=x>=T&&x<=S)}if(a==="filter"&&E){if(g){const x=d.length;for(let T=0;T<x;T++){const S=d[T];if(Array.isArray(S)&&y<S.length){const w=S[y],C=f2(w);isNaN(C)||c.push(C)}}}else if(y<d.length){const x=d[y],T=f2(x);isNaN(T)||c.push(T)}}}}return c.length>0?Upt({isTargetDiscrete:r,filteredValues:c,shouldPreserveZeroBaseline:i}):[]}function jpt({markDataPairs:t,domain:e,scaleInfo:n,adaptiveMode:r,shouldFilterXAxis:i=!1}){const{isSourceDiscrete:a,isTargetDiscrete:o,shouldPreserveZeroBaseline:s}=n;return Zee(t,e,a,o,s,r,i)}function zpt({markDataPairs:t,domain:e,scaleInfo:n,markToScaleMap:r,adaptiveMode:i,shouldFilterXAxis:a=!1}){const o=new Map,{isSourceDiscrete:s,isTargetDiscrete:l,shouldPreserveZeroBaseline:c,targetScaleKeys:u}=n;return t.forEach(f=>{const h=r.get(f.markKey);if(!h)return;const d=u.indexOf(h);if(d===-1)return;const p=l[d],g=c[d],v=Zee([f],e,s,p,g,i,a);o.set(h,v)}),o}function $pt(t,e,n,r,i,a,o=!1,s){const l=new Map;if(t.length===0||e.length===0)return l;const{isSourceDiscrete:c,isTargetDiscrete:u,shouldPreserveZeroBaseline:f}=n,h=s?t.filter(p=>s.get(p.markKey)===i):t.filter(p=>p.markKey===r);if(h.length===0)return l;const d=Zee(h,e,c,u,f,a,o);return l.set(i,d),l}function q3e(t,e,n,r){r&&e instanceof Map?e.forEach((i,a)=>{i&&Array.isArray(i)&&i.length>0&&(t[a]=i)}):!r&&Array.isArray(e)&&e.length>0&&(t[n?"x":"y"]=e)}var Hpt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const Z3e="slider";function K3e(t){var e,n,r,i;if(!t?.markState)return 0;let a=0;for(const[o,s]of t.markState.entries()){if(o.type!=="point"||!s?.channels)continue;const l=(e=s.channels)===null||e===void 0?void 0:e.find(c=>c.name==="size");if(l){if(((r=(n=l.scale)===null||n===void 0?void 0:n.range)===null||r===void 0?void 0:r.length)>0){const c=Math.max(...l.scale.range.filter(u=>typeof u=="number"));a=Math.max(a,c);continue}if(((i=l.values)===null||i===void 0?void 0:i.length)>0){const c=l.values.filter(u=>u.value!==void 0).flatMap(u=>Array.isArray(u.value)?u.value:[u.value]).filter(u=>typeof u=="number"&&!isNaN(u));c.length>0&&(a=Math.max(a,...c))}}}return a}function fce(t,e,n,r,i,a,o){if(o){const s=a?r:i.x,l=a?i.y:r;t.emit(e,Object.assign(Object.assign({},n),{nativeEvent:o,data:{selection:[iB(s),iB(l)]}}))}}function hce(t,e,n,r){const{domain0:i,filteredDomain:a,channel0:o,channel1:s,prefix:l,hasState:c,isMultiAxis:u,markToScaleMap:f,enableAdaptiveFiltering:h}=r;u&&a instanceof Map?t(e,d=>Object.assign({},Wpt(d,n,{[o]:{domain:i,nice:!1}},l,c,o,s,f||new Map,a))):t(e,d=>Object.assign({},Gpt(d,n,Object.assign({[o]:{domain:i,nice:!1}},h&&Array.isArray(a)?{[s]:{domain:a,nice:!0}}:{}),l,c,o,s)))}function Gpt(t,e,n,r,i=!1,a="x",o="y"){const{marks:s}=t,l=K3e(e),c=s.map(u=>{var f,h;return Nt({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},u,{scale:n,[r]:Object.assign(Object.assign({},((f=u[r])===null||f===void 0?void 0:f[a])&&{[a]:Object.assign({preserve:!0},i&&{ratio:null})}),((h=u[r])===null||h===void 0?void 0:h[o])&&{[o]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:c,insetLeft:l,insetRight:l,insetTop:l,insetBottom:l,clip:!0,animate:!1})}function Wpt(t,e,n,r,i=!1,a="x",o="y",s=new Map,l=new Map){const{marks:c}=t,u=K3e(e),f=c.map(h=>{var d,p;const g=typeof h?.key=="string"?h.key:String(h?.key||""),v=s.get(g),y=l.get(v),_=y&&{y:Object.assign({domain:y,nice:!0},v!=="y"?{independent:!0}:void 0)};return Nt({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},h,{scale:Object.assign(Object.assign({},n),_),[r]:Object.assign(Object.assign({},((d=h[r])===null||d===void 0?void 0:d[a])&&{[a]:Object.assign({preserve:!0},i&&{ratio:null})}),((p=h[r])===null||p===void 0?void 0:p[o])&&{[o]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:f,insetLeft:u,insetRight:u,insetTop:u,insetBottom:u,clip:!0,animate:!1})}function Vpt(t,e,n){const[r,i]=t,a=n?l=>1-l:l=>l,o=QA(e,a(r),!0),s=QA(e,a(i),!1);return x_(e,[o,s])}function iB(t){return[t[0],t[t.length-1]]}function Q3e({initDomain:t={},className:e=Z3e,prefix:n="slider",setValue:r=(u,f)=>u.setValues(f),hasState:i=!1,wait:a=50,leading:o=!0,trailing:s=!1,adaptiveMode:l="filter",getInitValues:c=u=>{var f;const h=(f=u?.attributes)===null||f===void 0?void 0:f.values;if(h[0]!==0||h[1]!==1)return h}}){return(u,f,h)=>{const{container:d,view:p,update:g,setState:v}=u,y=d.getElementsByClassName(e);if(!y.length)return()=>{};const{scale:_,coordinate:E}=p,{x,y:T}=_,S=as(E),w=M=>{const k=M==="vertical"?"y":"x",z=M==="vertical"?"x":"y";return S?[z,k]:[k,z]},C=new Map,D=new Set,L=i3e(p),B=Vht(p,t,x,T,L),I=Array.from(y),U=M=>I.some(k=>{const{orientation:z}=k.attributes,[j]=w(z);return j===M}),$=U("x")&&!U("y"),X=U("y")&&!U("x"),N=!r3e(l)&&($||X);for(const M of y){const{orientation:k}=M.attributes,[z,j]=w(k),V=`${n}${Gp(z)}:filter`,Q=z==="x",{ratio:ee}=x.getOptions(),{ratio:re}=T.getOptions(),ne=Xe=>{if(Xe.data){const{selection:Bt}=Xe.data,[At=iB(B.x),zt=iB(B.y)]=Bt;return Q?[x_(x,At,ee),x_(T,zt,re)]:[x_(T,zt,re),x_(x,At,ee)]}const{value:Le}=Xe.detail,Lt=_[z],xt=Vpt(Le,Lt,S&&k==="horizontal"),dt=B[j];return[xt,dt]};let le=!1;const ve=Zpt({getFiltering:()=>le,setFiltering:Xe=>{le=Xe},domainsOf:ne,view:p,independentScaleInfo:L,enableAdaptiveFiltering:N,hasOnlyXSlider:$,hasOnlyYSlider:X,adaptiveMode:l,scaleX:x,scaleY:T,scale:_,channelDomain:B,channel0:z,channel1:j,isX:Q,emitter:h,eventName:V,setState:v,slider:M,prefix:n,hasState:i,update:g,wait:a,leading:o,trailing:s}),Se=Xe=>{const{nativeEvent:Le}=Xe;if(Le)return;const{data:Lt}=Xe,{selection:xt}=Lt,[dt,Bt]=xt;M.dispatchEvent(new Kc("valuechange",{data:Lt,nativeEvent:!1}));const At=Q?Qle(dt,x):Qle(Bt,T);r(M,At)};h.on(V,Se),M.addEventListener("valuechange",ve),C.set(M,ve),D.add([V,Se]);const Re=c(M);Re&&M.dispatchEvent(new Kc("valuechange",{detail:{value:Re},nativeEvent:!1,initValue:!0}))}return()=>{for(const[M,k]of C)M.removeEventListener("valuechange",k);for(const[M,k]of D)h.off(M,k)}}}function Ypt({view:t,domain0:e,shouldFilterXAxis:n,enableAdaptiveFiltering:r,markDataPairs:i,adaptiveMode:a,scaleX:o,scaleY:s,scale:l,channelDomain:c,independentScaleInfo:u,channel0:f}){const h=new Map,d=new Map;if(!r||i.length===0||!e?.length)return{filteredDomain:h,markToScaleMap:d};const p=Wr(t,"options.slider");if(Object.keys(p).length>0&&Object.prototype.hasOwnProperty.call(p,f)){const v=Bpt(n,l,o,s,c);(n?u.markToXScaleMap:u.markToYScaleMap).forEach((E,x)=>{d.set(x,E)});const _=zpt({markDataPairs:i,domain:e,scaleInfo:v,markToScaleMap:d,adaptiveMode:a,shouldFilterXAxis:n});return q3e(c,_,n,!0),{filteredDomain:_,markToScaleMap:d}}else{const v=Xpt(t,f);if(v){const y=X3e(n,o,s),_=n?u.markToXScaleMap:u.markToYScaleMap,E=_.get(v)||"";if(E)return d.set(v,E),{filteredDomain:$pt(i,e,y,v,E,a,n,_),markToScaleMap:d}}}return{filteredDomain:h,markToScaleMap:d}}function Xpt(t,e){for(const[n]of t.markState.entries()){const r=Wr(n,"slider");if(Object.keys(r||{}).length>0&&Object.prototype.hasOwnProperty.call(r,e))return String(n.key||"")}return null}function qpt({domain0:t,domain1:e,shouldFilterXAxis:n,enableAdaptiveFiltering:r,markDataPairs:i,adaptiveMode:a,scaleX:o,scaleY:s,channelDomain:l,hasOnlyXSlider:c,hasOnlyYSlider:u,isX:f}){let h=e;if(r&&i.length>0&&(c&&f||u&&!f)&&t?.length>0){const d=X3e(n,o,s);h=jpt({markDataPairs:i,domain:t,scaleInfo:d,adaptiveMode:a,shouldFilterXAxis:n}),q3e(l,h,n,!1)}return h}function Zpt({getFiltering:t,setFiltering:e,domainsOf:n,view:r,independentScaleInfo:i,enableAdaptiveFiltering:a,hasOnlyXSlider:o,hasOnlyYSlider:s,adaptiveMode:l,scaleX:c,scaleY:u,scale:f,channelDomain:h,channel0:d,channel1:p,isX:g,emitter:v,eventName:y,setState:_,slider:E,prefix:x,hasState:T,update:S,wait:w,leading:C,trailing:D}){return Sy(L=>Hpt(this,void 0,void 0,function*(){const{initValue:B=!1}=L;if(t()&&!B)return;e(!0);const{nativeEvent:I=!0}=L,{markDataPairs:U}=Wht(r);if(i[`hasIndependent${p.toUpperCase()}`]){const[X]=n(L),N=s&&!g,{filteredDomain:M,markToScaleMap:k}=Ypt({view:r,domain0:X,shouldFilterXAxis:N,enableAdaptiveFiltering:a&&(o&&g||s&&!g),markDataPairs:U,adaptiveMode:l,scaleX:c,scaleY:u,scale:f,channelDomain:h,independentScaleInfo:i,channel0:d});h[d]=X,fce(v,y,L,X,h,g,I),hce(_,E,r,{domain0:X,filteredDomain:M,channel0:d,channel1:p,prefix:x,hasState:T,isMultiAxis:!0,markToScaleMap:k,enableAdaptiveFiltering:a})}else{const[X,N]=n(L),k=qpt({domain0:X,domain1:N,shouldFilterXAxis:s&&!g,enableAdaptiveFiltering:a,markDataPairs:U,adaptiveMode:l,scaleX:c,scaleY:u,channelDomain:h,hasOnlyXSlider:o,hasOnlyYSlider:s,isX:g});h[d]=X,fce(v,y,L,X,h,g,I),hce(_,E,r,{domain0:X,filteredDomain:k,channel0:d,channel1:p,prefix:x,hasState:T,isMultiAxis:!1,markToScaleMap:void 0,enableAdaptiveFiltering:a})}yield S(),e(!1)}),w,{leading:C,trailing:D})}function Kpt(t){var e;try{const n=(e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView;if(!n||typeof n.getContextService!="function")return null;const r=n.getContextService().getDomElement();return r instanceof HTMLElement?r:null}catch{return null}}function J3e({className:t=Z3e,setValue:e=(o,s)=>o.setValues(s),minRange:n=.01,wheelSensitivity:r=.05,x:i=!0,y:a=!0}={}){return o=>{const{container:s,view:l}=o,{coordinate:c}=l,u=as(c),f=Kpt(s),h=Math.max(1e-6,Math.min(1,n)),d=s.getElementsByClassName(t);if(!d.length)return()=>{};const p=(_,E)=>_===!0?!0:_===!1?!1:_==="shift"?E.shiftKey&&!E.ctrlKey&&!E.altKey:_==="ctrl"?E.ctrlKey&&!E.shiftKey&&!E.altKey:_==="alt"?E.altKey&&!E.shiftKey&&!E.ctrlKey:!1,g=(_,E)=>{e(_,E),_.dispatchEvent(new Kc("valuechange",{detail:{value:E},nativeEvent:!0}))},v=(_,E,x,T,S)=>{const C=(_-E)/x,D=Math.max(0,Math.min(1,C));return Math.max(T,Math.min(S,D))},y=_=>{if(!f)return;const E=_.target;if(!f.contains(E))return;const x=f.getBoundingClientRect(),T=_.clientX-x.left,S=_.clientY-x.top,w=[];for(const C of d){const{values:D,orientation:L}=C.attributes;if(!D)continue;const B=L==="horizontal";p((u?B?"y":"x":B?"x":"y")==="x"?i:a,_)&&w.push(C)}if(w.length!==0){_.preventDefault(),_.stopPropagation();for(const C of w){const{values:D,orientation:L,x:B,y:I,trackLength:U}=C.attributes,[$,X]=D,N=X-$,k=L==="horizontal"?v(T,B,U,$,X):v(S,I,U,$,X),z=r*Ght(N),V=1+_.deltaY*z,Q=Math.max(h,Math.min(1,N*V)),ee=(k-$)/N,re=(X-k)/N;let ne=k-Q*ee,le=k+Q*re;ne<0?(ne=0,le=Math.min(1,Q)):le>1&&(le=1,ne=Math.max(0,1-Q)),g(C,[ne,le])}}};return f&&f.addEventListener("wheel",y,{passive:!1,capture:!0}),()=>{f&&f.removeEventListener("wheel",y,{capture:!0})}}}J3e.props={reapplyWhenUpdate:!0};const dce=`${Fy}scrollbar`;function Qpt(t={}){return(e,n,r)=>{const{view:i,container:a}=e;if(!a.getElementsByClassName(dce).length)return()=>{};const{scale:s}=i,{x:l,y:c}=s,u={x:[...l.getOptions().domain],y:[...c.getOptions().domain]};return l.update({domain:l.getOptions().expectedDomain}),c.update({domain:c.getOptions().expectedDomain}),Q3e(Object.assign({initDomain:u,className:dce,prefix:"scrollbar",hasState:!0,setValue:(h,d)=>h.setValue(d[0]),getInitValues:h=>{const d=h.slider.attributes.values;if(d[0]!==0||d[1]!==1)return d}},t))(e,n,r)}}var Jpt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function egt(t,e,n){return`<${t} style="${Object.entries(n).map(([r,i])=>`${EZe(r)}:${i}`).join(";")}">${e}</${t}>`}const tgt={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function pce(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function eIe(t){var{offsetX:e=8,offsetY:n=8}=t,r=Jpt(t,["offsetX","offsetY"]);return i=>{const{container:a}=i,[o,s]=a.getBounds().min,l=Vn(r,"tip"),c=new Set,u=h=>{const{target:d}=h;if(!pce(d)){h.stopPropagation();return}const{offsetX:p,offsetY:g}=h,v=p+e-o,y=g+n-s;if(d.tip){d.tip.style.x=v,d.tip.style.y=y;return}const{text:_}=d.style,E=new p4({className:"poptip",style:{innerHTML:egt("div",_,Object.assign(Object.assign({},tgt),l)),x:v,y}});a.appendChild(E),d.tip=E,c.add(E)},f=h=>{const{target:d}=h;if(!pce(d)){h.stopPropagation();return}d.tip&&(d.tip.remove(),d.tip=null,c.delete(d.tip))};return a.addEventListener("pointerover",u),a.addEventListener("pointerout",f),()=>{a.removeEventListener("pointerover",u),a.removeEventListener("pointerout",f),c.forEach(h=>h.remove())}}}eIe.props={reapplyWhenUpdate:!0};var ngt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},rgt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function igt(t){return ai(t).select(`.${W_}`).node()}const agt={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function ogt(t={}){const{originData:e=[],layout:n}=t,r=rgt(t,["originData","layout"]),i=Nt({},agt,r),a=Vn(i,"breadCrumb"),o=Vn(i,"active");return s=>{const{update:l,setState:c,container:u,options:f}=s,h=igt(u),d=f.marks[0],{state:p}=d,g=new Cy;h.appendChild(g);const v=(S,w)=>ngt(this,void 0,void 0,function*(){if(g.removeChildren(),w){let C="",D=a.y,L=0;const B=[],I=h.getBBox().width,U=S.map(($,X)=>{C=`${C}${$}/`,B.push($);const N=new Jg({name:C.replace(/\/$/,""),style:Object.assign(Object.assign({text:$,x:L,path:[...B],depth:X},a),{y:D})});g.appendChild(N),L+=N.getBBox().width;const M=new Jg({style:Object.assign(Object.assign({x:L,text:" / "},a),{y:D})});return g.appendChild(M),L+=M.getBBox().width,L>I&&(D=g.getBBox().height+a.y,L=0,N.attr({x:L,y:D}),L+=N.getBBox().width,M.attr({x:L,y:D}),L+=M.getBBox().width),X===OR(S)-1&&M.remove(),N});U.forEach(($,X)=>{if(X===OR(U)-1)return;const N=Object.assign({},$.attributes);$.attr("cursor","pointer"),$.addEventListener("mouseenter",()=>{$.attr(o)}),$.addEventListener("mouseleave",()=>{$.attr(N)}),$.addEventListener("click",()=>{v(Wr($,["style","path"]),Wr($,["style","depth"]))})})}Jht(u,c),c("treemapDrillDown",C=>{const{marks:D}=C,L=S.join("/"),B=D.map(I=>{if(I.type!=="rect")return I;let U=e;if(w){const X=e.filter(j=>{const V=Wr(j,["id"]);return V&&(V.match(`${L}/`)||L.match(V))}).map(j=>({value:j.height===0?Wr(j,["value"]):void 0,name:Wr(j,["id"])})),{paddingLeft:N,paddingBottom:M,paddingRight:k}=n,z=Object.assign(Object.assign({},n),{paddingTop:(n.paddingTop||g.getBBox().height+10)/(w+1),paddingLeft:N/(w+1),paddingBottom:M/(w+1),paddingRight:k/(w+1),path:j=>j.name,layer:j=>j.depth===w+1});U=ePe(X,z,{value:"value"})[0]}else U=e.filter(X=>X.depth===1);const $=[];return U.forEach(({path:X})=>{$.push(bd(X))}),Nt({},I,{data:U,scale:{color:{domain:$}}})});return Object.assign(Object.assign({},C),{marks:B})}),yield l(void 0,["legendFilter"])}),y=S=>S.attributes.key.split("-")[0],_=S=>Wr(S,["__data__","key"]),E=S=>{const w=S.target,{markType:C,nodeName:D,attributes:L}=w||{};if(C!=="rect"&&D!==nr.TEXT)return;const B=D===nr.TEXT&&Wr(L,"isTreemapLabel")===!0?y(w):_(w),I=IA(e,U=>U.id===B);Wr(I,"height")&&v(Wr(I,"path"),Wr(I,"depth"))};h.addEventListener("click",E);const x=HF(Object.assign(Object.assign({},p.active),p.inactive)),T=()=>{t3e(h).forEach(w=>{const C=Wr(w,["style","cursor"]),D=IA(e,L=>L.id===Wr(w,["__data__","key"]));if(C!=="pointer"&&D?.height){w.style.cursor="pointer";const L=Wp(w.attributes,x);w.addEventListener("mouseenter",()=>{w.attr(p.active)}),w.addEventListener("mouseleave",()=>{w.attr(Nt(L,p.inactive))})}})};return T(),h.addEventListener("mousemove",T),()=>{g.remove(),h.removeEventListener("click",E),h.removeEventListener("mousemove",T)}}}var sgt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const lgt=t=>t.querySelectorAll(".element").filter(e=>(e.style||{})[pee]===bA);function cgt(t){return ai(t).select(`.${W_}`).node()}const ugt={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.6)",fontSize:11},y:4,active:{fill:"rgba(0, 0, 0, 0.4)"}};function fgt(t={}){const{breadCrumb:e={}}=t,n=Nt({},ugt,e);return r=>{const{update:i,setState:a,container:o,view:s,options:l}=r,c=o.ownerDocument,u=cgt(o),f=l.marks.find(({id:_})=>_===bA);if(!f)return;const{state:h}=f,d=c.createElement("g");d.style.transform=`translate(${n.x||0}px, ${n.y||0}px)`,d.setAttribute("x","drilldown-breadcrumb"),u.appendChild(d);const p=_=>sgt(this,void 0,void 0,function*(){if(d.removeChildren(),_&&_.length>0){const E=c.createElement("text",{style:Object.assign({text:n.rootText},n.style)});d.appendChild(E);let x="";const T=_;let S=n.style.y,w=E.getBBox().width;const C=u.getBBox().width,D=T.map((B,I)=>{const U=c.createElement("text",{style:Object.assign(Object.assign({x:w,text:" / "},n.style),{y:S})});d.appendChild(U),w+=U.getBBox().width,x=`${x}${B} / `;const $=c.createElement("text",{name:x.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:B,x:w},n.style),{y:S})});return d.appendChild($),w+=$.getBBox().width,w>C&&(S=d.getBBox().height,w=0,U.attr({x:w,y:S}),w+=U.getBBox().width,$.attr({x:w,y:S}),w+=$.getBBox().width),$});[E,...D].forEach((B,I)=>{if(I===D.length)return;const U=Object.assign({},B.attributes);B.attr("cursor","pointer"),B.addEventListener("mouseenter",()=>{B.attr(n.active)}),B.addEventListener("mouseleave",()=>{B.attr(U)}),B.addEventListener("click",()=>{p(_.slice(0,I))})})}a("drillDown",E=>{const{marks:x}=E,T=x.map(S=>{if(S.id!==bA&&S.type!=="rect")return S;const{data:w}=S,C=w.filter(D=>{var L;const B=(L=D.path)!==null&&L!==void 0?L:[];if(_.length===0)return!0;if(!Array.isArray(B)||B.length<_.length)return!1;for(let I=0;I<_.length;I++)if(B[I]!==_[I])return!1;return!0});return Nt({},S,{data:C})});return Object.assign(Object.assign({},E),{marks:T})}),yield i()}),g=_=>{var E,x;const T=_.target,S=T.markType,w=T.style||{},C=w[pee],D=w[XD],L=T.__data__;if(S!=="rect"||C!==bA||!D)return;const B=(x=(E=L?.data)===null||E===void 0?void 0:E.path)!==null&&x!==void 0?x:[];p(B)};u.addEventListener("click",g);const v=HF(Object.assign(Object.assign({},h.active),h.inactive)),y=()=>{lgt(u).forEach(E=>{const x=Wr(E,["style",XD]);if(Wr(E,["style","cursor"])!=="pointer"&&x){E.style.cursor="pointer";const S=Wp(E.attributes,v);E.addEventListener("mouseenter",()=>{E.attr(h.active)}),E.addEventListener("mouseleave",()=>{E.attr(Nt(S,h.inactive))})}})};return u.addEventListener("mousemove",y),()=>{d.remove(),u.removeEventListener("click",g),u.removeEventListener("mousemove",y)}}}var eU=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},hgt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const dgt={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},tU="movePoint",gce=t=>{const e=t.target,{markType:n}=e;n==="line"&&(e.attr("_lineWidth",e.attr("lineWidth")||1),e.attr("lineWidth",e.attr("_lineWidth")+3)),n==="interval"&&(e.attr("_opacity",e.attr("opacity")||1),e.attr("opacity",.7*e.attr("_opacity")))},vce=t=>{const e=t.target,{markType:n}=e;n==="line"&&e.attr("lineWidth",e.attr("_lineWidth")),n==="interval"&&e.attr("opacity",e.attr("_opacity"))},pgt=(t,e,n)=>e.map(r=>["x","color"].reduce((a,o)=>{const s=n[o];return s&&r[s]!==t[s]?!1:a},!0)?Object.assign(Object.assign({},r),t):r),ggt=t=>{const e=Wr(t,["__data__","y"]),r=Wr(t,["__data__","y1"])-e,{__data__:{data:i,encode:a,transform:o},childNodes:s}=t.parentNode,l=IA(o,({type:f})=>f==="normalizeY"),c=Wr(a,["y","field"]),u=i[s.indexOf(t)][c];return(f,h=!1)=>l||h?f/(1-f)/(r/(1-r))*u:f},vgt=(t,e)=>{const n=Wr(t,["__data__","seriesItems",e,"0","value"]),r=Wr(t,["__data__","seriesIndex",e]),{__data__:{data:i,encode:a,transform:o}}=t.parentNode,s=IA(o,({type:u})=>u==="normalizeY"),l=Wr(a,["y","field"]),c=i[r][l];return u=>s?n===1?u:u/(1-u)/(n/(1-n))*c:u},mce=(t,e,n)=>{t.forEach((r,i)=>{r.attr("stroke",e[1]===i?n.activeStroke:n.stroke)})},yce=(t,e,n,r)=>{const i=new Kf({style:n}),a=new Jg({style:r});return e.appendChild(a),t.appendChild(i),[i,a]},_ce=(t,e)=>{if(!Wr(t,["options","range","indexOf"]))return;const r=t.options.range.indexOf(e);return t.sortedDomain[r]},nU=(t,e,n)=>{const r=nB(t,e),a=nB(t,n)/r,o=t[0]+(e[0]-t[0])*a,s=t[1]+(e[1]-t[1])*a;return[o,s]};function mgt(t={}){const{selection:e=[],precision:n=2}=t,r=hgt(t,["selection","precision"]),i=Object.assign(Object.assign({},dgt),r||{}),a=Vn(i,"path"),o=Vn(i,"label"),s=Vn(i,"point");return(l,c,u)=>{const{update:f,setState:h,container:d,view:p,options:{marks:g,coordinate:v}}=l,y=Kp(d);let _=t3e(y),E,x=e;const{transform:T=[],type:S}=v,w=!!IA(T,({type:k})=>k==="transpose"),C=S==="polar",D=S==="theta",L=!!IA(_,({markType:k})=>k==="area");L&&(_=_.filter(({markType:k})=>k==="area"));const B=new Cy({style:{zIndex:2}});y.appendChild(B);const I=()=>{u.emit("element-point:select",{nativeEvent:!0,data:{selection:x}})},U=(k,z)=>{u.emit("element-point:moved",{nativeEvent:!0,data:{changeData:k,data:z}})},$=k=>{const z=k.target;x=[z.parentNode.childNodes.indexOf(z)],I(),N(z)},X=k=>{const{data:{selection:z},nativeEvent:j}=k;if(j)return;x=z;const V=Wr(_,[x?.[0]]);V&&N(V)},N=k=>{const{attributes:z,markType:j,__data__:V}=k,{stroke:Q}=z,{points:ee,seriesTitle:re,color:ne,title:le,seriesX:ue,y1:ve}=V;if(w&&j!=="interval")return;const{scale:Se,coordinate:Re}=E?.view||p,{color:Xe,y:Le,x:Lt}=Se,xt=Re.getCenter();B.removeChildren();let dt;const Bt=(At,zt,rn,Wn)=>eU(this,void 0,void 0,function*(){return h("elementPointMove",Sn=>{var In;const de=(((In=E?.options)===null||In===void 0?void 0:In.marks)||g).map(sr=>{if(!Wn.includes(sr.type))return sr;const{data:zr,encode:st}=sr,An=Object.keys(st).reduce(($n,Vr)=>{const Tr=st[Vr];return Vr==="x"&&($n[Tr]=At),Vr==="y"&&($n[Tr]=zt),Vr==="color"&&($n[Tr]=rn),$n},{}),wn=pgt(An,zr,st);return U(An,wn),Nt({},sr,{data:wn,animate:!1})});return Object.assign(Object.assign({},Sn),{marks:de})}),yield f("elementPointMove")});if(["line","area"].includes(j))ee.forEach((At,zt)=>{const rn=Lt.invert(ue[zt]);if(!rn)return;const Wn=new yx({name:tU,style:Object.assign({cx:At[0],cy:At[1],fill:Q},s)}),Sn=vgt(k,zt);Wn.addEventListener("mousedown",In=>{const de=Re.output([ue[zt],0]),sr=re?.length;d.attr("cursor","move"),x[1]!==zt&&(x[1]=zt,I()),mce(B.childNodes,x,s);const[zr,st]=yce(B,Wn,a,o),Ft=wn=>{const $n=At[1]+wn.clientY-dt[1];if(L)if(C){const Vr=At[0]+wn.clientX-dt[0],[Tr,Rr]=nU(xt,de,[Vr,$n]),[,ei]=Re.output([1,Le.output(0)]),[,va]=Re.invert([Tr,ei-(ee[zt+sr][1]-Rr)]),pi=(zt+1)%sr,qo=(zt-1+sr)%sr,ft=u2([ee[qo],[Tr,Rr],re[pi]&&ee[pi]]);st.attr("text",Sn(Le.invert(va)).toFixed(n)),zr.attr("d",ft),Wn.attr("cx",Tr),Wn.attr("cy",Rr)}else{const[,Vr]=Re.output([1,Le.output(0)]),[,Tr]=Re.invert([At[0],Vr-(ee[zt+sr][1]-$n)]),Rr=u2([ee[zt-1],[At[0],$n],re[zt+1]&&ee[zt+1]]);st.attr("text",Sn(Le.invert(Tr)).toFixed(n)),zr.attr("d",Rr),Wn.attr("cy",$n)}else{const[,Vr]=Re.invert([At[0],$n]),Tr=u2([ee[zt-1],[At[0],$n],ee[zt+1]]);st.attr("text",Le.invert(Vr).toFixed(n)),zr.attr("d",Tr),Wn.attr("cy",$n)}};dt=[In.clientX,In.clientY],window.addEventListener("mousemove",Ft);const An=()=>eU(this,void 0,void 0,function*(){if(d.attr("cursor","default"),window.removeEventListener("mousemove",Ft),d.removeEventListener("mouseup",An),mr(st.attr("text")))return;const wn=Number(st.attr("text")),$n=_ce(Xe,ne);E=yield Bt(rn,wn,$n,["line","area"]),st.remove(),zr.remove(),N(k)});d.addEventListener("mouseup",An)}),B.appendChild(Wn)}),mce(B.childNodes,x,s);else if(j==="interval"){let At=[(ee[0][0]+ee[1][0])/2,ee[0][1]];w?At=[ee[0][0],(ee[0][1]+ee[1][1])/2]:D&&(At=ee[0]);const zt=ggt(k),rn=new yx({name:tU,style:Object.assign(Object.assign({cx:At[0],cy:At[1],fill:Q},s),{stroke:s.activeStroke})});rn.addEventListener("mousedown",Wn=>{d.attr("cursor","move");const Sn=_ce(Xe,ne),[In,de]=yce(B,rn,a,o),sr=st=>{if(w){const Ft=At[0]+st.clientX-dt[0],[An]=Re.output([Le.output(0),Le.output(0)]),[,wn]=Re.invert([An+(Ft-ee[2][0]),At[1]]),$n=u2([[Ft,ee[0][1]],[Ft,ee[1][1]],ee[2],ee[3]],!0);de.attr("text",zt(Le.invert(wn)).toFixed(n)),In.attr("d",$n),rn.attr("cx",Ft)}else if(D){const Ft=At[1]+st.clientY-dt[1],An=At[0]+st.clientX-dt[0],[wn,$n]=nU(xt,[An,Ft],At),[Vr,Tr]=nU(xt,[An,Ft],ee[1]),Rr=Re.invert([wn,$n])[1],ei=ve-Rr;if(ei<0)return;const va=Hht(xt,[[wn,$n],[Vr,Tr],ee[2],ee[3]],ei>.5?1:0);de.attr("text",zt(ei,!0).toFixed(n)),In.attr("d",va),rn.attr("cx",wn),rn.attr("cy",$n)}else{const Ft=At[1]+st.clientY-dt[1],[,An]=Re.output([1,Le.output(0)]),[,wn]=Re.invert([At[0],An-(ee[2][1]-Ft)]),$n=u2([[ee[0][0],Ft],[ee[1][0],Ft],ee[2],ee[3]],!0);de.attr("text",zt(Le.invert(wn)).toFixed(n)),In.attr("d",$n),rn.attr("cy",Ft)}};dt=[Wn.clientX,Wn.clientY],window.addEventListener("mousemove",sr);const zr=()=>eU(this,void 0,void 0,function*(){if(d.attr("cursor","default"),d.removeEventListener("mouseup",zr),window.removeEventListener("mousemove",sr),mr(de.attr("text")))return;const st=Number(de.attr("text"));E=yield Bt(le,st,Sn,[j]),de.remove(),In.remove(),N(k)});d.addEventListener("mouseup",zr)}),B.appendChild(rn)}};_.forEach((k,z)=>{x[0]===z&&N(k),k.addEventListener("click",$),k.addEventListener("mouseenter",gce),k.addEventListener("mouseleave",vce)});const M=k=>{const z=k?.target;(!z||z.name!==tU&&!_.includes(z))&&(x=[],I(),B.removeChildren())};return u.on("element-point:select",X),u.on("element-point:unselect",M),d.addEventListener("mousedown",M),()=>{B.remove(),u.off("element-point:select",X),u.off("element-point:unselect",M),d.removeEventListener("mousedown",M),_.forEach(k=>{k.removeEventListener("click",$),k.removeEventListener("mouseenter",gce),k.removeEventListener("mouseleave",vce)})}}}var ygt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const tIe=t=>{const{value:e,format:n=e.split(".").pop(),delimiter:r=",",autoType:i=!0}=t;return()=>ygt(void 0,void 0,void 0,function*(){const a=yield fetch(e);if(n==="csv"){const o=yield a.text();return hUe(r).parse(o,i?dUe:gx)}if(n==="json")return yield a.json();throw new Error(`Unknown format: ${n}.`)})};tIe.props={};function _gt(t){return!t||Object.keys(t).length===0}const nIe=t=>{const{fields:e,key:n="key",value:r="value"}=t;return i=>_gt(e)?i:i.flatMap(a=>e.map(o=>Object.assign(Object.assign({},a),{[n]:o,[r]:a[o]})))};nIe.props={};function bgt(t){return t!=null&&!Number.isNaN(t)}const rIe=t=>{const{callback:e=bgt}=t;return n=>n.filter(e)};rIe.props={};const iIe=t=>{const{callback:e}=t;return n=>Array.isArray(n)?[...n].sort(e):n};iIe.props={};function Egt(t,e=[]){return e.reduce((n,r)=>(r in t&&(n[r]=t[r]),n),{})}const aIe=t=>{const{fields:e}=t;return n=>n.map(r=>Egt(r,e))};aIe.props={};function xgt(t){return Object.keys(t).length===0}const oIe=t=>e=>{if(!t||xgt(t))return e;const n=r=>Object.entries(r).reduce((i,[a,o])=>(i[t[a]||a]=o,i),{});return e.map(n)};oIe.props={};function Sgt(t,e){return t.map(n=>{if(Array.isArray(n)){const[r,i=e]=n;return[r,i]}return[n,e]})}const sIe=t=>{const{fields:e=[]}=t,n=Sgt(e,!0);return r=>{const i=(a,o)=>n.reduce((s,[l,c=!0])=>s!==0?s:c?a[l]<o[l]?-1:+(a[l]!==o[l]):a[l]>o[l]?-1:+(a[l]!==o[l]),0);return[...r].sort(i)}};sIe.props={};const lIe=t=>{const{value:e}=t;return()=>e};lIe.props={};const cIe=t=>{const{callback:e=gx}=t;return n=>e(n)};cIe.props={};const uIe=t=>{const{callback:e=gx}=t;return n=>Array.isArray(n)?n.map(e):n};uIe.props={};var Tgt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};function Agt(t,e){return{set(n,r,i){if(e[n]===void 0)return this;const a=r?r.call(null,e[n]):e[n];return i?i.call(null,a):typeof t[n]=="function"?t[n](a):t[n]=a,this},setAsync(n,r,i){return Tgt(this,void 0,void 0,function*(){if(e[n]===void 0)return this;const a=r?yield r.call(null,e[n]):e[n];return i?i.call(null,a):typeof t[n]=="function"?t[n](a):t[n]=a,this})}}}const rU=Math.PI/180,pC=64,uk=2048;function wgt(t){return t.text}function Ogt(){return"serif"}function bce(){return"normal"}function Cgt(t){return t.value}function Rgt(){return~~(Math.random()*2)*90}function Mgt(){return 1}function Pgt(){}function Ngt(t,e,n,r){if(e.sprite)return;const i=t.context,a=t.ratio;i.clearRect(0,0,(pC<<5)/a,uk/a);let o=0,s=0,l=0;const c=n.length;for(--r;++r<c;){e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font;let h=i.measureText(e.text+"m").width*a,d=e.size<<1;if(e.rotate){const p=Math.sin(e.rotate*rU),g=Math.cos(e.rotate*rU),v=h*g,y=h*p,_=d*g,E=d*p;h=Math.max(Math.abs(v+E),Math.abs(v-E))+31>>5<<5,d=~~Math.max(Math.abs(y+_),Math.abs(y-_))}else h=h+31>>5<<5;if(d>l&&(l=d),o+h>=pC<<5&&(o=0,s+=l,l=0),s+d>=uk)break;i.translate((o+(h>>1))/a,(s+(d>>1))/a),e.rotate&&i.rotate(e.rotate*rU),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=h,e.height=d,e.xoff=o,e.yoff=s,e.x1=h>>1,e.y1=d>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,o+=h}const u=i.getImageData(0,0,(pC<<5)/a,uk/a).data,f=[];for(;--r>=0;){if(e=n[r],!e.hasText)continue;const h=e.width,d=h>>5;let p=e.y1-e.y0;for(let y=0;y<p*d;y++)f[y]=0;if(o=e.xoff,o==null)return;s=e.yoff;let g=0,v=-1;for(let y=0;y<p;y++){for(let _=0;_<h;_++){const E=d*y+(_>>5),x=u[(s+y)*(pC<<5)+(o+_)<<2]?1<<31-_%32:0;f[E]|=x,g|=x}g?v=y:(e.y0++,p--,y--,s++)}e.y1=e.y0+v,e.sprite=f.slice(0,(e.y1-e.y0)*d)}}function Igt(t,e,n){n>>=5;const r=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,l=t.y1-t.y0;let c=(t.y+t.y0)*n+(a>>5),u;for(let f=0;f<l;f++){u=0;for(let h=0;h<=i;h++)if((u<<s|(h<i?(u=r[f*i+h])>>>o:0))&e[c+h])return!0;c+=n}return!1}function Lgt(t,e){const n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function kgt(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function fIe(t){const e=t[0]/t[1];return function(n){return[e*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Dgt(t){const n=4*t[0]/t[1];let r=0,i=0;return function(a){const o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:r+=n;break;case 1:i+=4;break;case 2:r-=n;break;default:i-=4;break}return[r,i]}}function Ece(t){const e=[];let n=-1;for(;++n<t;)e[n]=0;return e}function Bgt(){return document.createElement("canvas")}function H0(t){return typeof t=="function"?t:function(){return t}}const Fgt={archimedean:fIe,rectangular:Dgt};function Ugt(){let t=[256,256],e=wgt,n=Ogt,r=Cgt,i=bce,a=Rgt,o=Mgt,s=fIe,l=Math.random,c=Pgt,u=[],f=null,h=1/0,d=Bgt;const p=bce,g={};g.start=function(){const[_,E]=t,x=v(d()),T=g.board?g.board:Ece((t[0]>>5)*t[1]),S=u.length,w=[],C=u.map(function(I,U,$){return I.text=e.call(this,I,U,$),I.font=n.call(this,I,U,$),I.style=p.call(this,I,U,$),I.weight=i.call(this,I,U,$),I.rotate=a.call(this,I,U,$),I.size=~~r.call(this,I,U,$),I.padding=o.call(this,I,U,$),I}).sort(function(I,U){return U.size-I.size});let D=-1,L=g.board?[{x:0,y:0},{x:_,y:E}]:void 0;f&&clearInterval(f),f=setInterval(B,0),B();function B(){const I=Date.now();for(;Date.now()-I<h&&++D<S;){const U=C[D];U.x=_*(l()+.5)>>1,U.y=E*(l()+.5)>>1,Ngt(x,U,C,D),U.hasText&&y(T,U,L)&&(c.call(null,"word",{cloud:g,word:U}),w.push(U),L?g.hasImage||Lgt(L,U):L=[{x:U.x+U.x0,y:U.y+U.y0},{x:U.x+U.x1,y:U.y+U.y1}],U.x-=t[0]>>1,U.y-=t[1]>>1)}g._tags=w,g._bounds=L,D>=S&&(g.stop(),c.call(null,"end",{cloud:g,words:w,bounds:L}))}return g},g.stop=function(){return f&&(clearInterval(f),f=null),g};function v(_){_.width=_.height=1;const E=Math.sqrt(_.getContext("2d").getImageData(0,0,1,1).data.length>>2);_.width=(pC<<5)/E,_.height=uk/E;const x=_.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",x.textBaseline="middle",{context:x,ratio:E}}function y(_,E,x){const T=E.x,S=E.y,w=Math.sqrt(t[0]*t[0]+t[1]*t[1]),C=s(t),D=l()<.5?1:-1;let L,B=-D,I,U;for(;(L=C(B+=D))&&(I=~~L[0],U=~~L[1],!(Math.min(Math.abs(I),Math.abs(U))>=w));)if(E.x=T+I,E.y=S+U,!(E.x+E.x0<0||E.y+E.y0<0||E.x+E.x1>t[0]||E.y+E.y1>t[1])&&(!x||!Igt(E,_,t[0]))&&(!x||kgt(E,x))){const $=E.sprite,X=E.width>>5,N=t[0]>>5,M=E.x-(X<<4),k=M&127,z=32-k,j=E.y1-E.y0;let V,Q=(E.y+E.y0)*N+(M>>5);for(let ee=0;ee<j;ee++){V=0;for(let re=0;re<=X;re++)_[Q+re]|=V<<z|(re<X?(V=$[ee*X+re])>>>k:0);Q+=N}return delete E.sprite,!0}return!1}return g.createMask=_=>{const E=document.createElement("canvas"),[x,T]=t;if(!x||!T)return;const S=x>>5,w=Ece((x>>5)*T);E.width=x,E.height=T;const C=E.getContext("2d");C.drawImage(_,0,0,_.width,_.height,0,0,x,T);const D=C.getImageData(0,0,x,T).data;for(let L=0;L<T;L++)for(let B=0;B<x;B++){const I=S*L+(B>>5),U=L*x+B<<2,X=D[U]>=250&&D[U+1]>=250&&D[U+2]>=250?1<<31-B%32:0;w[I]|=X}g.board=w,g.hasImage=!0},g.timeInterval=function(_){h=_??1/0},g.words=function(_){u=_},g.size=function(_=[]){t=[+_[0],+_[1]]},g.text=function(_){e=H0(_)},g.font=function(_){n=H0(_)},g.fontWeight=function(_){i=H0(_)},g.rotate=function(_){a=H0(_)},g.canvas=function(_){d=H0(_)},g.spiral=function(_){s=Fgt[_]||_},g.fontSize=function(_){r=H0(_)},g.padding=function(_){o=H0(_)},g.random=function(_){l=H0(_)},g.on=function(_){c=H0(_)},g}var jgt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},zgt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const $gt={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function Hgt(t){return new Promise((e,n)=>{if(t instanceof HTMLImageElement){e(t);return}if(typeof t=="string"){const r=new Image;r.crossOrigin="anonymous",r.src=t,r.onload=()=>e(r),r.onerror=()=>{console.error(`'image ${t} load failed !!!'`),n()};return}n()})}function Ggt(t,e){if(typeof t=="function")return t;if(Array.isArray(t)){const[n,r]=t;if(!e)return()=>(r+n)/2;const[i,a]=e;return a===i?()=>(r+n)/2:({value:o})=>(r-n)/(a-i)*(o-i)+n}return()=>t}const hIe=(t,e)=>n=>jgt(void 0,void 0,void 0,function*(){const r=Object.assign({},$gt,t,{canvas:e.createCanvas}),i=Ugt();yield Agt(i,r).set("fontSize",_=>{const E=n.map(x=>x.value);return Ggt(_,[Nd(E),_o(E)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",Hgt,i.createMask),i.words([...n]);const a=i.start(),[o,s]=r.size,l=[{x:0,y:0},{x:o,y:s}],{_bounds:c=l,_tags:u,hasImage:f}=a,h=u.map(_=>{var{x:E,y:x,font:T}=_,S=zgt(_,["x","y","font"]);return Object.assign(Object.assign({},S),{x:E+o/2,y:x+s/2,fontFamily:T})}),[{x:d,y:p},{x:g,y:v}]=c,y={text:"",value:0,opacity:0,fontSize:0};return h.push(Object.assign(Object.assign({},y),{x:f?0:d,y:f?0:p}),Object.assign(Object.assign({},y),{x:f?o:g,y:f?s:v})),h});hIe.props={};function xce(t){return typeof t=="string"?e=>e[t]:t}const dIe=t=>{const{join:e,on:n,select:r=[],as:i=r,unknown:a=NaN}=t,[o,s]=n,l=xce(s),c=xce(o),u=PK(e,([f])=>f,f=>l(f));return f=>f.map(h=>{const d=u.get(c(h));return Object.assign(Object.assign({},h),r.reduce((p,g,v)=>(p[i[v]]=d?d[g]:a,p),{}))})};dIe.props={};const pIe=t=>{const{start:e,end:n}=t;return r=>r.slice(e,n)};pIe.props={};var iU={exports:{}},aU={exports:{}},Sce;function Wgt(){return Sce||(Sce=1,(function(t){var e=t.exports;t.exports.isNumber=function(n){return typeof n=="number"},t.exports.findMin=function(n){if(n.length===0)return 1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.min(r,n[i]);return r},t.exports.findMax=function(n){if(n.length===0)return-1/0;for(var r=n[0],i=1;i<n.length;i++)r=Math.max(r,n[i]);return r},t.exports.findMinMulti=function(n){for(var r=e.findMin(n[0]),i=1;i<n.length;i++)r=Math.min(r,e.findMin(n[i]));return r},t.exports.findMaxMulti=function(n){for(var r=e.findMax(n[0]),i=1;i<n.length;i++)r=Math.max(r,e.findMax(n[i]));return r},t.exports.inside=function(n,r,i){return n<=i&&i<=r}})(aU)),aU.exports}var Tce;function Vgt(){return Tce||(Tce=1,(function(t){var e=50,n=2,r=Math.log(2),i=t.exports,a=Wgt();function o(l){return 1-Math.abs(l)}t.exports.getUnifiedMinMax=function(l,c){return i.getUnifiedMinMaxMulti([l],c)},t.exports.getUnifiedMinMaxMulti=function(l,c){c=c||{};var u=!1,f=!1,h=a.isNumber(c.width)?c.width:n,d=a.isNumber(c.size)?c.size:e,p=a.isNumber(c.min)?c.min:(u=!0,a.findMinMulti(l)),g=a.isNumber(c.max)?c.max:(f=!0,a.findMaxMulti(l)),v=g-p,y=v/(d-1);return u&&(p=p-2*h*y),f&&(g=g+2*h*y),{min:p,max:g}},t.exports.create=function(l,c){if(c=c||{},!l||l.length===0)return[];var u=a.isNumber(c.size)?c.size:e,f=a.isNumber(c.width)?c.width:n,h=i.getUnifiedMinMax(l,{size:u,width:f,min:c.min,max:c.max}),d=h.min,p=h.max,g=p-d,v=g/(u-1);if(g===0)return[{x:d,y:1}];for(var y=[],_=0;_<u;_++)y.push({x:d+_*v,y:0});var E=function(B){return Math.floor((B-d)/v)},x=s(o,f),T=x[f],S=x[f-1]-x[f-2],w=0;l.forEach(function(B){var I=E(B);if(!(I+f<0||I-f>=y.length)){var U=Math.max(I-f,0),$=I,X=Math.min(I+f,y.length-1),N=U-(I-f),M=I+f-X,k=x[-f-1+N]||0,z=x[-f-1+M]||0,j=T/(T-k-z);N>0&&(w+=j*(N-1)*S);var V=Math.max(0,I-f+1);a.inside(0,y.length-1,V)&&(y[V].y+=j*1*S),a.inside(0,y.length-1,$+1)&&(y[$+1].y-=j*2*S),a.inside(0,y.length-1,X+1)&&(y[X+1].y+=j*1*S)}});var C=w,D=0,L=0;return y.forEach(function(B){D+=B.y,C+=D,B.y=C,L+=C}),L>0&&y.forEach(function(B){B.y/=L}),y};function s(l,c){for(var u={},f=0,h=-c;h<=c;h++)f+=l(h/c),u[h]=f;return u}t.exports.getExpectedValueFromPdf=function(l){if(!(!l||l.length===0)){var c=0;return l.forEach(function(u){c+=u.x*u.y}),c}},t.exports.getXWithLeftTailArea=function(l,c){if(!(!l||l.length===0)){for(var u=0,f=0,h=0;h<l.length&&(f=h,u+=l[h].y,!(u>=c));h++);return l[f].x}},t.exports.getPerplexity=function(l){if(!(!l||l.length===0)){var c=0;return l.forEach(function(u){var f=Math.log(u.y);isFinite(f)&&(c+=u.y*f)}),c=-c/r,Math.pow(2,c)}}})(iU)),iU.exports}var Ygt=Vgt();const Xgt=Ni(Ygt),gIe=t=>{const{field:e,groupBy:n,as:r=["y","size"],min:i,max:a,size:o=10,width:s}=t,[l,c]=r;return u=>Array.from(Go(u,h=>n.map(d=>h[d]).join("-")).values()).map(h=>{const d=Xgt.create(h.map(v=>v[e]),{min:i,max:a,size:o,width:s}),p=d.map(v=>v.x),g=d.map(v=>v.y);return Object.assign(Object.assign({},h[0]),{[l]:p,[c]:g})})};gIe.props={};function qgt(t,e,n,r){r=r||{};const i=r.maxIterations||100,a=r.tolerance||1e-10,o=t(e),s=t(n);let l=n-e;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return e;if(s===0)return n;for(let c=0;c<i;++c){l/=2;const u=e+l,f=t(u);if(f*o>=0&&(e=u),Math.abs(l)<a||f===0)return u}return e+l}function BX(t){const e=new Array(t);for(let n=0;n<t;++n)e[n]=0;return e}function Ace(t,e){return BX(t).map(()=>BX(e))}function SA(t,e){let n=0;for(let r=0;r<t.length;++r)n+=t[r]*e[r];return n}function FX(t){return Math.sqrt(SA(t,t))}function UX(t,e,n){for(let r=0;r<e.length;++r)t[r]=e[r]*n}function iy(t,e,n,r,i){for(let a=0;a<t.length;++a)t[a]=e*n[a]+r*i[a]}function Zgt(t,e,n){n=n||{};const r=n.maxIterations||e.length*200,i=n.nonZeroDelta||1.05,a=n.zeroDelta||.001,o=n.minErrorDelta||1e-6,s=n.minErrorDelta||1e-5,l=n.rho!==void 0?n.rho:1,c=n.chi!==void 0?n.chi:2,u=n.psi!==void 0?n.psi:-.5,f=n.sigma!==void 0?n.sigma:.5;let h;const d=e.length,p=new Array(d+1);p[0]=e,p[0].fx=t(e),p[0].id=0;for(let T=0;T<d;++T){const S=e.slice();S[T]=S[T]?S[T]*i:a,p[T+1]=S,p[T+1].fx=t(S),p[T+1].id=T+1}function g(T){for(let S=0;S<T.length;S++)p[d][S]=T[S];p[d].fx=T.fx}const v=(T,S)=>T.fx-S.fx,y=e.slice(),_=e.slice(),E=e.slice(),x=e.slice();for(let T=0;T<r;++T){if(p.sort(v),n.history){const w=p.map(C=>{const D=C.slice();return D.fx=C.fx,D.id=C.id,D});w.sort((C,D)=>C.id-D.id),n.history.push({x:p[0].slice(),fx:p[0].fx,simplex:w})}h=0;for(let w=0;w<d;++w)h=Math.max(h,Math.abs(p[0][w]-p[1][w]));if(Math.abs(p[0].fx-p[d].fx)<o&&h<s)break;for(let w=0;w<d;++w){y[w]=0;for(let C=0;C<d;++C)y[w]+=p[C][w];y[w]/=d}const S=p[d];if(iy(_,1+l,y,-l,S),_.fx=t(_),_.fx<p[0].fx)iy(x,1+c,y,-c,S),x.fx=t(x),x.fx<_.fx?g(x):g(_);else if(_.fx>=p[d-1].fx){let w=!1;if(_.fx>S.fx?(iy(E,1+u,y,-u,S),E.fx=t(E),E.fx<S.fx?g(E):w=!0):(iy(E,1-u*l,y,u*l,S),E.fx=t(E),E.fx<_.fx?g(E):w=!0),w){if(f>=1)break;for(let C=1;C<p.length;++C)iy(p[C],1-f,p[0],f,p[C]),p[C].fx=t(p[C])}}else g(_)}return p.sort(v),{fx:p[0].fx,x:p[0]}}function Kgt(t,e,n,r,i,a,o){const s=n.fx,l=SA(n.fxprime,e);let c=s,u=s,f=l,h=0;i=i||1,a=a||1e-6,o=o||.1;function d(p,g,v){for(let y=0;y<16;++y)if(i=(p+g)/2,iy(r.x,1,n.x,i,e),c=r.fx=t(r.x,r.fxprime),f=SA(r.fxprime,e),c>s+a*i*l||c>=v)g=i;else{if(Math.abs(f)<=-o*l)return i;f*(g-p)>=0&&(g=p),p=i,v=c}return 0}for(let p=0;p<10;++p){if(iy(r.x,1,n.x,i,e),c=r.fx=t(r.x,r.fxprime),f=SA(r.fxprime,e),c>s+a*i*l||p&&c>=u)return d(h,i,u);if(Math.abs(f)<=-o*l)return i;if(f>=0)return d(i,h,c);u=c,h=i,i*=2}return i}function Qgt(t,e,n){let r={x:e.slice(),fx:0,fxprime:e.slice()},i={x:e.slice(),fx:0,fxprime:e.slice()};const a=e.slice();let o,s=1;n=n||{};const l=n.maxIterations||e.length*20;r.fx=t(r.x,r.fxprime);const c=r.fxprime.slice();UX(c,r.fxprime,-1);for(let u=0;u<l;++u){if(s=Kgt(t,c,r,i,s),n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:s}),!s)UX(c,r.fxprime,-1);else{iy(a,1,i.fxprime,-1,r.fxprime);const f=SA(r.fxprime,r.fxprime),h=Math.max(0,SA(a,i.fxprime)/f);iy(c,h,c,-1,i.fxprime),o=r,r=i,i=o}if(FX(r.fxprime)<=1e-5)break}return n.history&&n.history.push({x:r.x.slice(),fx:r.fx,fxprime:r.fxprime.slice(),alpha:s}),r}const vIe=1e-10;function mIe(t,e){const n=evt(t),r=n.filter(function(l){return Jgt(l,t)});let i=0,a=0,o;const s=[];if(r.length>1){const l=tvt(r);for(o=0;o<r.length;++o){const u=r[o];u.angle=Math.atan2(u.x-l.x,u.y-l.y)}r.sort(function(u,f){return f.angle-u.angle});let c=r[r.length-1];for(o=0;o<r.length;++o){const u=r[o];a+=(c.x+u.x)*(u.y-c.y);const f={x:(u.x+c.x)/2,y:(u.y+c.y)/2};let h=null;for(let d=0;d<u.parentIndex.length;++d)if(c.parentIndex.indexOf(u.parentIndex[d])>-1){const p=t[u.parentIndex[d]],g=Math.atan2(u.x-p.x,u.y-p.y),v=Math.atan2(c.x-p.x,c.y-p.y);let y=v-g;y<0&&(y+=2*Math.PI);const _=v-y/2;let E=nM(f,{x:p.x+p.radius*Math.sin(_),y:p.y+p.radius*Math.cos(_)});E>p.radius*2&&(E=p.radius*2),(h===null||h.width>E)&&(h={circle:p,width:E,p1:u,p2:c})}h!==null&&(s.push(h),i+=jX(h.circle.radius,h.width),c=u)}}else{let l=t[0];for(o=1;o<t.length;++o)t[o].radius<l.radius&&(l=t[o]);let c=!1;for(o=0;o<t.length;++o)if(nM(t[o],l)>Math.abs(l.radius-t[o].radius)){c=!0;break}c?i=a=0:(i=l.radius*l.radius*Math.PI,s.push({circle:l,p1:{x:l.x,y:l.y+l.radius},p2:{x:l.x-vIe,y:l.y+l.radius},width:l.radius*2}))}return a/=2,e&&(e.area=i+a,e.arcArea=i,e.polygonArea=a,e.arcs=s,e.innerPoints=r,e.intersectionPoints=n),i+a}function Jgt(t,e){for(let n=0;n<e.length;++n)if(nM(t,e[n])>e[n].radius+vIe)return!1;return!0}function evt(t){const e=[];for(let n=0;n<t.length;++n)for(let r=n+1;r<t.length;++r){const i=_Ie(t[n],t[r]);for(let a=0;a<i.length;++a){const o=i[a];o.parentIndex=[n,r],e.push(o)}}return e}function jX(t,e){return t*t*Math.acos(1-e/t)-(t-e)*Math.sqrt(e*(2*t-e))}function nM(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function yIe(t,e,n){if(n>=t+e)return 0;if(n<=Math.abs(t-e))return Math.PI*Math.min(t,e)*Math.min(t,e);const r=t-(n*n-e*e+t*t)/(2*n),i=e-(n*n-t*t+e*e)/(2*n);return jX(t,r)+jX(e,i)}function _Ie(t,e){const n=nM(t,e),r=t.radius,i=e.radius;if(n>=r+i||n<=Math.abs(r-i))return[];const a=(r*r-i*i+n*n)/(2*n),o=Math.sqrt(r*r-a*a),s=t.x+a*(e.x-t.x)/n,l=t.y+a*(e.y-t.y)/n,c=-(e.y-t.y)*(o/n),u=-(e.x-t.x)*(o/n);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function tvt(t){const e={x:0,y:0};for(let n=0;n<t.length;++n)e.x+=t[n].x,e.y+=t[n].y;return e.x/=t.length,e.y/=t.length,e}function nvt(t,e){e=e||{},e.maxIterations=e.maxIterations||500;const n=e.initialLayout||ovt,r=e.lossFunction||Kee;t=rvt(t);const i=n(t,e),a=[],o=[];let s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));const c=Zgt(function(u){const f={};for(let h=0;h<o.length;++h){const d=o[h];f[d]={x:u[2*h],y:u[2*h+1],radius:i[d].radius}}return r(f,t)},a,e).x;for(let u=0;u<o.length;++u)s=o[u],i[s].x=c[2*u],i[s].y=c[2*u+1];return i}const bIe=1e-10;function zX(t,e,n){return Math.min(t,e)*Math.min(t,e)*Math.PI<=n+bIe?Math.abs(t-e):qgt(function(r){return yIe(t,e,r)-n},0,t+e)}function rvt(t){t=t.slice();const e=[],n={};let r,i,a,o;for(r=0;r<t.length;++r){const s=t[r];s.sets.length==1?e.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],n[[a,o]]=!0,n[[o,a]]=!0)}for(e.sort((s,l)=>s>l?1:-1),r=0;r<e.length;++r)for(a=e[r],i=r+1;i<e.length;++i)o=e[i],[a,o]in n||t.push({sets:[a,o],size:0});return t}function ivt(t,e,n){const r=Ace(e.length,e.length),i=Ace(e.length,e.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){const o=n[a.sets[0]],s=n[a.sets[1]],l=Math.sqrt(e[o].size/Math.PI),c=Math.sqrt(e[s].size/Math.PI),u=zX(l,c,a.size);r[o][s]=r[s][o]=u;let f=0;a.size+1e-10>=Math.min(e[o].size,e[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:r,constraints:i}}function avt(t,e,n,r){let i=0,a;for(a=0;a<e.length;++a)e[a]=0;for(a=0;a<n.length;++a){const o=t[2*a],s=t[2*a+1];for(let l=a+1;l<n.length;++l){const c=t[2*l],u=t[2*l+1],f=n[a][l],h=r[a][l],d=(c-o)*(c-o)+(u-s)*(u-s),p=Math.sqrt(d),g=d-f*f;h>0&&p<=f||h<0&&p>=f||(i+=2*g*g,e[2*a]+=4*g*(o-c),e[2*a+1]+=4*g*(s-u),e[2*l]+=4*g*(c-o),e[2*l+1]+=4*g*(u-s))}}return i}function ovt(t,e){let n=lvt(t,e);const r=e.lossFunction||Kee;if(t.length>=8){const i=svt(t,e),a=r(i,t),o=r(n,t);a+1e-8<o&&(n=i)}return n}function svt(t,e){e=e||{};const n=e.restarts||10,r=[],i={};let a;for(a=0;a<t.length;++a){const g=t[a];g.sets.length==1&&(i[g.sets[0]]=r.length,r.push(g))}const o=ivt(t,r,i);let s=o.distances;const l=o.constraints,c=FX(s.map(FX))/s.length;s=s.map(function(g){return g.map(function(v){return v/c})});const u=function(g,v){return avt(g,v,s,l)};let f,h;for(a=0;a<n;++a){const g=BX(s.length*2).map(Math.random);h=Qgt(u,g,e),(!f||h.fx<f.fx)&&(f=h)}const d=f.x,p={};for(a=0;a<r.length;++a){const g=r[a];p[g.sets[0]]={x:d[2*a]*c,y:d[2*a+1]*c,radius:Math.sqrt(g.size/Math.PI)}}if(e.history)for(a=0;a<e.history.length;++a)UX(e.history[a].x,c);return p}function lvt(t,e){const n=e&&e.lossFunction?e.lossFunction:Kee,r={},i={};let a;for(let f=0;f<t.length;++f){const h=t[f];h.sets.length==1&&(a=h.sets[0],r[a]={x:1e10,y:1e10,rowid:Object.keys(r).length,size:h.size,radius:Math.sqrt(h.size/Math.PI)},i[a]=[])}t=t.filter(function(f){return f.sets.length==2});for(let f=0;f<t.length;++f){const h=t[f];let d=h.hasOwnProperty("weight")?h.weight:1;const p=h.sets[0],g=h.sets[1];h.size+bIe>=Math.min(r[p].size,r[g].size)&&(d=0),i[p].push({set:g,size:h.size,weight:d}),i[g].push({set:p,size:h.size,weight:d})}const o=[];for(a in i)if(i.hasOwnProperty(a)){let f=0;for(let h=0;h<i[a].length;++h)f+=i[a][h].size*i[a][h].weight;o.push({set:a,size:f})}function s(f,h){return h.size-f.size}o.sort(s);const l={};function c(f){return f.set in l}function u(f,h){r[h].x=f.x,r[h].y=f.y,l[h]=!0}u({x:0,y:0},o[0].set);for(let f=1;f<o.length;++f){const h=o[f].set,d=i[h].filter(c);if(a=r[h],d.sort(s),d.length===0)throw"ERROR: missing pairwise overlap information";const p=[];for(let y=0;y<d.length;++y){const _=r[d[y].set],E=zX(a.radius,_.radius,d[y].size);p.push({x:_.x+E,y:_.y}),p.push({x:_.x-E,y:_.y}),p.push({y:_.y+E,x:_.x}),p.push({y:_.y-E,x:_.x});for(let x=y+1;x<d.length;++x){const T=r[d[x].set],S=zX(a.radius,T.radius,d[x].size),w=_Ie({x:_.x,y:_.y,radius:E},{x:T.x,y:T.y,radius:S});for(let C=0;C<w.length;++C)p.push(w[C])}}let g=1e50,v=p[0];for(let y=0;y<p.length;++y){r[h].x=p[y].x,r[h].y=p[y].y;const _=n(r,t);_<g&&(g=_,v=p[y])}u(v,h)}return r}function Kee(t,e){let n=0;function r(i){return i.map(function(a){return t[a]})}for(let i=0;i<e.length;++i){const a=e[i];let o;if(a.sets.length==1)continue;if(a.sets.length==2){const l=t[a.sets[0]],c=t[a.sets[1]];o=yIe(l.radius,c.radius,nM(l,c))}else o=mIe(r(a.sets));const s=a.hasOwnProperty("weight")?a.weight:1;n+=s*(o-a.size)*(o-a.size)}return n}function cvt(t){const e=function(n){const r=Math.max.apply(null,t.map(function(a){return a[n]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[n]-a.radius}));return{max:r,min:i}};return{xRange:e("x"),yRange:e("y")}}function uvt(t,e,n,r){const i=[],a=[];for(const g in t)t.hasOwnProperty(g)&&(a.push(g),i.push(t[g]));e-=2*r,n-=2*r;const o=cvt(i),s=o.xRange,l=o.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),t;const c=e/(s.max-s.min),u=n/(l.max-l.min),f=Math.min(u,c),h=(e-(s.max-s.min)*f)/2,d=(n-(l.max-l.min)*f)/2,p={};for(let g=0;g<i.length;++g){const v=i[g];p[a[g]]={radius:f*v.radius,x:r+h+(v.x-s.min)*f,y:r+d+(v.y-l.min)*f}}return p}function fvt(t,e,n){const r=[],i=t-n,a=e;return r.push("M",i,a),r.push("A",n,n,0,1,0,i+2*n,a),r.push("A",n,n,0,1,0,i,a),r.join(" ")}function hvt(t){const e={};mIe(t,e);const n=e.arcs;if(n.length===0)return"M 0 0";if(n.length==1){const r=n[0].circle;return fvt(r.x,r.y,r.radius)}else{const r=[`
M`,n[0].p2.x,n[0].p2.y];for(let i=0;i<n.length;++i){const a=n[i],o=a.circle.radius,s=a.width>o;r.push(`
A`,o,o,0,s?1:0,1,a.p1.x,a.p1.y)}return r.join(" ")}}const EIe=t=>{const{sets:e="sets",size:n="size",as:r=["key","path"],padding:i=0}=t,[a,o]=r;return s=>{const l=s.map(f=>Object.assign(Object.assign({},f),{sets:f[e],size:f[n],[a]:f.sets.join("&")}));l.sort((f,h)=>f.sets.length-h.sets.length);const c=nvt(l);let u;return l.map(f=>{const h=f[e],d=({width:p,height:g})=>{u=u||uvt(c,p,g,i);const v=h.map(_=>u[_]);let y=hvt(v);return/[zZ]$/.test(y)||(y+=" Z"),y};return Object.assign(Object.assign({},f),{[o]:d})})}};EIe.props={};const xIe=()=>t=>(console.log("G2 data section:",t),t);xIe.props={};function dvt(t,e){if(e<0||e>1)throw new Error("alpha must be between 0 and 1.");if(t.length===0)return[];let n=t[0];const r=[];for(const i of t){if(i==null){r.push(i),console.warn("EMAThe value is null or undefined",t);continue}n==null&&(n=i);const a=n*e+(1-e)*i;r.push(a),n=a}return r}const SIe=t=>{const{field:e="y",alpha:n=.6,as:r=e}=t;return i=>{const a=i.map(s=>s[e]),o=dvt(a,n);return i.map((s,l)=>Object.assign(Object.assign({},s),{[r]:o[l]}))}};SIe.props={};const TIe=.01;function rM(t){const{min:e,max:n}=t;return[[e[0],e[1]],[n[0],n[1]]]}function wce(t,e,n=TIe){const[r,i]=t,[a,o]=e;return r>=a[0]-n&&r<=o[0]+n&&i>=a[1]-n&&i<=o[1]+n}function AIe(t,e,n=TIe){const[r,i]=t;return!(wce(r,e,n)&&wce(i,e,n))}function pvt(t,e){const[n,r]=t,[i,a]=e;return n[0]<a[0]&&r[0]>i[0]&&n[1]<a[1]&&r[1]>i[1]}const gvt=t=>{const{priority:e}=t;return n=>{const r=[];return e&&n.sort(e),n.forEach(i=>{z4(i);const a=i.getLocalBounds();r.some(s=>pvt(rM(a),rM(s.getLocalBounds())))?Iee(i):r.push(i)}),n}};function vvt([t,e],[n,r]){return r>t&&e>n}function UI(){const t=new Map;return[r=>t.get(r),(r,i)=>t.set(r,i)]}function mvt(t){const e=t.cloneNode(!0),n=e.getElementById("connector");n&&e.removeChild(n);const{min:r,max:i}=e.getRenderBounds();return e.destroy(),{min:r,max:i}}const yvt=t=>{const{maxIterations:e=10,maxError:n=.1,padding:r=1}=t;return i=>{const a=i.length;if(a<=1)return i;const[o,s]=UI(),[l,c]=UI(),[u,f]=UI(),[h,d]=UI();for(const p of i){const{min:g,max:v}=mvt(p),[y,_]=g,[E,x]=v;s(p,_),c(p,_),f(p,x-_),d(p,[y,E])}for(let p=0;p<e;p++){i.sort((v,y)=>Rc(l(v),l(y)));let g=0;for(let v=0;v<a-1;v++){const y=i[v];let _=v+1,E;for(;(E=i[_])&&!vvt(h(y),h(E));)_+=1;if(E){const x=l(y),T=u(y),S=l(E),w=S-(x+T);if(w<r){const C=(r-w)/2;g=Math.max(g,C),c(y,x-C),c(E,S+C)}}}if(g<n)break}for(const p of i)p.style.y+=l(p)-o(p);return i}};function wIe(t){return typeof t=="object"?t:QE(t)}function oU(t){let e=t/255;return e=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4),e}function Oce(t,e,n){return .2126*oU(t)+.7152*oU(e)+.0722*oU(n)}function OIe(t,e){if(!t||!e||t===e)return 1;const{r:n,g:r,b:i}=t,{r:a,g:o,b:s}=e,l=Oce(n,r,i),c=Oce(a,o,s);return(Math.max(l,c)+.05)/(Math.min(l,c)+.05)}function CIe(t,e){const n=Sw(e,r=>OIe(t,wIe(r)));return e[n]}const _vt=t=>{const{threshold:e=4.5,palette:n=["#000","#fff"]}=t;return r=>(r.forEach(i=>{const a=i.attr("dependentElement").parsedStyle.fill,o=i.parsedStyle.fill;OIe(o,a)<e&&i.attr("fill",CIe(a,n))}),r)},bvt=()=>t=>(t.forEach(e=>{z4(e);const n=e.attr("bounds"),r=e.getLocalBounds();AIe(rM(r),n)&&Iee(e)}),t),Evt=(t,e)=>{const[[n,r],[i,a]]=e,[[o,s],[l,c]]=t;let u=0,f=0;return o<n?u=n-o:l>i&&(u=i-l),s<r?f=r-s:c>a&&(f=a-c),[u,f]},xvt=(t,e)=>!t||!t.min||!t.max?!e||!e.min||!e.max?{min:[0,0],max:[0,0]}:e:!e||!e.min||!e.max?t:{min:[Math.min(t.min[0],e.min[0]),Math.min(t.min[1],e.min[1])],max:[Math.max(t.max[0],e.max[0]),Math.max(t.max[1],e.max[1])]},Svt=(t={})=>(e,{canvas:n,layout:r})=>{const{bounds:i="view",offsetX:a=0,offsetY:o=0}=t,l=(()=>{if(i==="main"){const{x:c=0,y:u=0,width:f=0,height:h=0,marginLeft:d=0,marginRight:p=0,marginTop:g=0,marginBottom:v=0,paddingLeft:y=0,paddingRight:_=0,paddingTop:E=0,paddingBottom:x=0}=r;return[[c+d+y+a,u+g+E+o],[c+f-p-_-a,u+h-v-x-o]]}else{const{x:c=0,y:u=0,width:f=0,height:h=0}=r;return[[c+a,u+o],[c+f-a,u+h-o]]}})();return e.forEach(c=>{z4(c);const{max:u,min:f}=xvt(c.getRenderBounds(),c.getBounds());if(!u||!f||u[0]===0&&u[1]===0&&f[0]===0&&f[1]===0)return;const[h,d]=u,[p,g]=f,v=Evt([[p,g],[h,d]],l);c.style.connector&&c.style.connectorPoints&&(c.style.connectorPoints[0][0]-=v[0],c.style.connectorPoints[0][1]-=v[1]),c.style.x+=v[0],c.style.y+=v[1]}),e};function Cce(t){var e;const n=t.getAnimations();if(!n||n.length===0)return eM(t);const r=t.cloneNode(!0);r.style.visibility="hidden",n.forEach(a=>{const o=a.effect.getKeyframes();o&&o.length>0&&r.attr(o[o.length-1])}),(e=t.parentNode)===null||e===void 0||e.appendChild(r);const i=eM(r);return r.destroy(),i}const Tvt=t=>{const{palette:e=["#000","#fff"],threshold:n=2}=t;return r=>(r.forEach(i=>{var a,o;const s=i.attr("dependentElement"),l=(o=(a=i.attributes.fill)!==null&&a!==void 0?a:i.parsedStyle.fill)!==null&&o!==void 0?o:"#fff",c=rM(Cce(i)),u=rM(Cce(s));if(AIe(c,u,n)){const f=CIe(wIe(l),e);i.attr("stroke",f)}else i.removeAttribute("stroke")}),r)};function Avt(){return{"data.fetch":tIe,"data.inline":lIe,"data.sortBy":sIe,"data.sort":iIe,"data.filter":rIe,"data.pick":aIe,"data.rename":oIe,"data.fold":nIe,"data.slice":pIe,"data.custom":cIe,"data.map":uIe,"data.join":dIe,"data.kde":gIe,"data.log":xIe,"data.wordCloud":hIe,"data.ema":SIe,"transform.stackY":rOe,"transform.binX":IOe,"transform.bin":UQ,"transform.dodgeX":dOe,"transform.jitter":vOe,"transform.jitterX":mOe,"transform.jitterY":yOe,"transform.symmetryY":_Oe,"transform.diffY":bOe,"transform.stackEnter":pOe,"transform.normalizeY":gOe,"transform.select":r4,"transform.selectX":EOe,"transform.selectY":xOe,"transform.groupX":SOe,"transform.groupY":TOe,"transform.groupColor":AOe,"transform.group":PP,"transform.sortX":wOe,"transform.sortY":COe,"transform.sortColor":OOe,"transform.flexX":ROe,"transform.pack":NOe,"transform.sample":LOe,"transform.filter":kOe,"coordinate.cartesian":PAe,"coordinate.polar":xP,"coordinate.transpose":iQ,"coordinate.theta":LAe,"coordinate.parallel":oQ,"coordinate.fisheye":DAe,"coordinate.radial":aQ,"coordinate.radar":BAe,"coordinate.helix":IAe,"encode.constant":FAe,"encode.field":jAe,"encode.transform":UAe,"encode.column":zAe,"mark.interval":MMe,"mark.rect":PMe,"mark.line":NMe,"mark.point":IMe,"mark.text":LMe,"mark.cell":kMe,"mark.area":DMe,"mark.link":lee,"mark.image":BMe,"mark.polygon":FMe,"mark.box":UMe,"mark.vector":jMe,"mark.lineX":$Me,"mark.lineY":zMe,"mark.connector":HMe,"mark.range":GMe,"mark.rangeX":WMe,"mark.rangeY":VMe,"mark.path":KMe,"mark.shape":oPe,"mark.density":dPe,"mark.heatmap":pPe,"mark.wordCloud":dee,"mark.beeswarm":vPe,"palette.category10":_Pe,"palette.category20":bPe,"scale.linear":xPe,"scale.ordinal":SPe,"scale.band":EPe,"scale.identity":TPe,"scale.point":APe,"scale.time":wPe,"scale.log":OPe,"scale.pow":CPe,"scale.sqrt":NPe,"scale.threshold":RPe,"scale.quantile":MPe,"scale.quantize":PPe,"scale.sequential":IPe,"scale.constant":LPe,"theme.classic":kPe,"theme.classicDark":BPe,"theme.academy":FPe,"theme.light":mee,"theme.dark":DPe,"component.axisX":XPe,"component.axisY":qPe,"component.legendCategory":Fee,"component.legendContinuous":lb,"component.legends":_3e,"component.title":p3e,"component.sliderX":g3e,"component.sliderY":v3e,"component.scrollbarX":m3e,"component.scrollbarY":y3e,"animation.scaleInX":jee,"animation.scaleOutX":Mdt,"animation.scaleInY":b3e,"animation.scaleOutY":Pdt,"animation.waveIn":A3e,"animation.fadeIn":E3e,"animation.fadeOut":x3e,"animation.zoomIn":$dt,"animation.zoomOut":Hdt,"animation.pathIn":w3e,"animation.morphing":T3e,"animation.growInX":O3e,"animation.growInY":C3e,"interaction.elementHighlight":H4,"interaction.elementHighlightByX":R3e,"interaction.elementHighlightByColor":M3e,"interaction.elementHoverScale":P3e,"interaction.elementSelect":G4,"interaction.elementSelectByX":N3e,"interaction.elementSelectByColor":I3e,"interaction.fisheye":tpt,"interaction.chartIndex":L3e,"interaction.tooltip":H3e,"interaction.legendFilter":adt,"interaction.legendHighlight":gpt,"interaction.brushHighlight":W4,"interaction.brushXHighlight":Ept,"interaction.brushYHighlight":xpt,"interaction.brushAxisHighlight":Ppt,"interaction.brushFilter":qee,"interaction.brushXFilter":kpt,"interaction.brushYFilter":Dpt,"interaction.sliderFilter":Q3e,"interaction.sliderWheel":J3e,"interaction.scrollbarFilter":Qpt,"interaction.poptip":eIe,"interaction.treemapDrillDown":ogt,"interaction.drillDown":fgt,"interaction.elementPointMove":mgt,"composition.spaceLayer":vNe,"composition.spaceFlex":mNe,"composition.facetRect":xNe,"composition.repeatMatrix":$ct,"composition.facetCircle":Xct,"composition.timingKeyframe":SNe,"labelTransform.overlapHide":gvt,"labelTransform.overlapDodgeY":yvt,"labelTransform.overflowHide":bvt,"labelTransform.contrastReverse":_vt,"labelTransform.overflowStroke":Tvt,"labelTransform.exceedAdjust":Svt}}function wvt(){return{"composition.geoView":wNe,"composition.geoPath":TNe}}function Ovt(){return{"data.arc":uee,"data.cluster":cPe,"mark.forceGraph":sPe,"mark.tree":fPe,"mark.pack":nPe,"mark.sankey":qMe,"mark.chord":ZMe,"mark.treemap":tPe,"mark.partition":yPe}}function Cvt(){return{"data.venn":EIe,"mark.boxplot":aPe,"mark.gauge":hPe,"mark.wordCloud":dee,"mark.liquid":gPe}}function RIe(){return Object.assign(Object.assign(Object.assign(Object.assign({},wvt()),Ovt()),Cvt()),Avt())}function MIe(t,e){class n extends t{constructor(i){super(Object.assign(Object.assign({},i),{lib:e}))}}return n}const PIe={};function NIe(t,e){t.startsWith("symbol.")?bZe(t.split(".").pop(),e):Object.assign(PIe,{[t]:e})}const bT=t=>t?parseInt(t):0;function Rvt(t){const e=getComputedStyle(t),n=t.clientWidth||bT(e.width),r=t.clientHeight||bT(e.height),i=bT(e.paddingLeft)+bT(e.paddingRight),a=bT(e.paddingTop)+bT(e.paddingBottom);return{width:n-i,height:r-a}}function sU(t,e){const n=[t];for(;n.length;){const r=n.shift();e&&e(r);const i=r.children||[];for(const a of i)n.push(a)}}let Qee=class{constructor(e={},n){this.parentNode=null,this.children=[],this.index=0,this.type=n,this.value=e}map(e=n=>n){const n=e(this.value);return this.value=n,this}attr(e,n){return arguments.length===1?this.value[e]:this.map(r=>(r[e]=n,r))}append(e){const n=new e({});return n.children=[],this.push(n),n}push(e){return e.parentNode=this,e.index=this.children.length,this.children.push(e),this}remove(){const e=this.parentNode;if(e){const{children:n}=e,r=n.findIndex(i=>i===this);n.splice(r,1)}return this}getNodeByKey(e){let n=null;return sU(this,i=>{e===i.attr("key")&&(n=i)}),n}getNodesByType(e){const n=[];return sU(this,i=>{e===i.type&&n.push(i)}),n}getNodeByType(e){let n=null;return sU(this,r=>{n||e===r.type&&(n=r)}),n}call(e,...n){return e(this.map(),...n),this}getRoot(){let e=this;for(;e&&e.parentNode;)e=e.parentNode;return e}};var IIe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const $X=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],LIe="__remove__",kIe="__callback__",Rce=1,Mce=1;function Mvt(t){if(t===void 0){const e=document.createElement("div");return e[LIe]=!0,e}return typeof t=="string"?document.getElementById(t):t}function Pvt(t){const e=t.parentNode;e&&e.removeChild(t)}function Nvt(t){if(t.type!==null)return t;const e=t.children[t.children.length-1];for(const n of $X)e.attr(n,t.attr(n));return e}function Pce(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function lU(t,e){const{width:n,height:r,autoFit:i,depth:a=0}=t;let o=640,s=480;if(i){const{width:l,height:c}=Rvt(e);o=l||o,s=c||s}return o=n||o,s=r||s,{width:Math.max(Ln(o)?o:Rce,Rce),height:Math.max(Ln(s)?s:Mce,Mce),depth:a}}function Ivt(t){const e=Nvt(t),n=[e],r=new Map;for(r.set(e,Pce(e));n.length;){const i=n.pop(),a=r.get(i),{children:o=[]}=i;for(const s of o)if(s.type===kIe)a.children=s.value;else{const l=Pce(s),{children:c=[]}=a;c.push(l),n.push(s),r.set(s,l),a.children=c}}return r.get(e)}function Lvt(t,e){return typeof t=="function"?!0:new Set(Object.keys(e)).has(t)}function kvt(t,e){return typeof t!="function"&&new Set(Object.keys(e)).has(t)}function Dvt(t,e,n,r,i){const{type:a}=t,{type:o=n||a}=e;if(kvt(o,i)){for(const s of $X)t.attr(s)!==void 0&&e[s]===void 0&&(e[s]=t.attr(s));return e}if(Lvt(o,r)){const s={type:"view"},l=Object.assign({},e);for(const c of $X)l[c]!==void 0&&(s[c]=l[c],delete l[c]);return Object.assign(Object.assign({},s),{children:[l]})}return e}function Bvt(t,e,n){if(typeof t=="function")return e.mark;const i=Object.assign(Object.assign({},e),n)[t];if(!i)throw new Error(`Unknown mark: ${t}.`);return i}function Fvt(t,e,n){if(typeof t=="function"){const l=new Qee;return l.value=t,l.type=kIe,l}const{type:r,children:i}=t,a=IIe(t,["type","children"]),o=Bvt(r,e,n),s=new o;return s.value=a,s.type=r,s}function Uvt(t,e){const{type:n,children:r}=e,i=IIe(e,["type","children"]);t.type===n||n===void 0?Zwe(t.value,i):typeof n=="string"&&(t.type=n,t.value=i)}function jvt(t,e,n,r){if(!t)return;const i=[[t,e]];for(;i.length;){const[a,o]=i.shift(),s=Fvt(o,n,r);Array.isArray(a.children)&&a.push(s);const{children:l}=o;if(Array.isArray(l))for(const c of l)i.push([s,c]);else typeof l=="function"&&i.push([s,l])}}function zvt(t,e,n,r,i){const a=Dvt(t,e,n,r,i),o=[[null,t,a]];for(;o.length;){const[s,l,c]=o.shift();if(!l)jvt(s,c,r,i);else if(!c)l.remove();else{Uvt(l,c);const{children:u}=c,{children:f}=l;if(Array.isArray(u)&&Array.isArray(f)){const h=Math.max(u.length,f.length);for(let d=0;d<h;d++){const p=u[d],g=f[d];o.push([l,g,p])}}else typeof u=="function"&&o.push([l,null,u])}}}function $vt(){let t,e;return[new Promise((r,i)=>{e=r,t=i}),e,t]}function Hvt(t,e,{key:n=e}){t.prototype[e]=function(r){return arguments.length===0?this.attr(n):this.attr(n,r)}}function Gvt(t,e,{key:n=e}){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(n);if(Array.isArray(r))return this.attr(n,r);const i=[...this.attr(n)||[],r];return this.attr(n,i)}}function Wvt(t,e,{key:n=e}){t.prototype[e]=function(r,i){if(arguments.length===0)return this.attr(n);if(arguments.length===1&&typeof r!="string")return this.attr(n,r);const a=this.attr(n)||{};return a[r]=arguments.length===1?!0:i,this.attr(n,a)}}function Vvt(t,e,n){t.prototype[e]=function(r){if(arguments.length===0)return this.attr(e);if(Array.isArray(r))return this.attr(e,{items:r});if($A(r)&&(r.title!==void 0||r.items!==void 0))return this.attr(e,r);if(r===null||r===!1)return this.attr(e,r);const i=this.attr(e)||{},{items:a=[]}=i;return a.push(r),i.items=a,this.attr(e,i)}}function Yvt(t,e,{ctor:n}){t.prototype[e]=function(r){const i=this.append(n);return e==="mark"&&(i.type=r),i}}function Xvt(t,e,{ctor:n}){t.prototype[e]=function(){return this.type=null,this.append(n)}}function aB(t){return e=>{for(const[n,r]of Object.entries(t)){const{type:i}=r;i==="value"?Hvt(e,n,r):i==="array"?Gvt(e,n,r):i==="object"?Wvt(e,n,r):i==="node"?Yvt(e,n,r):i==="container"?Xvt(e,n,r):i==="mix"&&Vvt(e,n)}return e}}function Nce(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,{type:"node",ctor:n}]))}const DIe={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},qvt=Object.assign(Object.assign({},DIe),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),Zvt=Object.assign(Object.assign({},DIe),{labelTransform:{type:"array"}});var Kvt=function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};let oB=class extends Qee{changeData(e){var n;const r=this.getRoot();if(r)return this.attr("data",e),!((n=this.children)===null||n===void 0)&&n.length&&this.children.forEach(i=>{i.attr("data",e)}),r?.render()}getView(){const e=this.getRoot(),{views:n}=e.getContext();if(n?.length)return n.find(r=>r.key===this._key)}getScale(){var e;return(e=this.getView())===null||e===void 0?void 0:e.scale}getScaleByChannel(e){const n=this.getScale();if(n)return n[e]}getCoordinate(){var e;return(e=this.getView())===null||e===void 0?void 0:e.coordinate}getTheme(){var e;return(e=this.getView())===null||e===void 0?void 0:e.theme}getGroup(){const e=this._key;return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}show(){const e=this.getGroup();e&&!e.isVisible()&&z4(e)}hide(){const e=this.getGroup();e&&e.isVisible()&&Iee(e)}};oB=Kvt([aB(Zvt)],oB);var Qvt=function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};let HX=class extends Qee{changeData(e){const n=this.getRoot();if(n)return this.attr("data",e),n?.render()}getMark(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(!n)return;const{markState:r}=n,i=Array.from(r.keys()).find(a=>a.key===this.attr("key"));return r.get(i)}getScale(){var e;const n=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(n)return n?.scale}getScaleByChannel(e){var n,r;const i=(n=this.getRoot())===null||n===void 0?void 0:n.getView();if(i)return(r=i?.scale)===null||r===void 0?void 0:r[e]}getGroup(){const e=this.attr("key");return e?this.getRoot().getContext().canvas.getRoot().getElementById(e):void 0}};HX=Qvt([aB(qvt)],HX);var Jvt=function(t,e,n,r){var i=arguments.length,a=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},emt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const tmt="G2_CHART_KEY";class BIe extends oB{constructor(e){const{container:n,canvas:r,renderer:i,plugins:a,lib:o,createCanvas:s}=e,l=emt(e,["container","canvas","renderer","plugins","lib","createCanvas"]);super(l,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailingClear=null,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=Aw(()=>{this.forceFit()},300),this._renderer=i||new xx,this._plugins=a||[],this._container=Mvt(n),this._emitter=new Jm,this._context={library:Object.assign(Object.assign({},o),PIe),emitter:this._emitter,canvas:r,createCanvas:s},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;const e=new Promise((a,o)=>Nht(this._computedOptions(),this._context,this._createResolve(a),this._createReject(o))),[n,r,i]=$vt();return e.then(r).then(()=>{if(this._trailingClear){const a=this.options();this._trailingClear(),this._trailing&&this.options(a)}}).catch(i).then(()=>{this._trailingClear=null,this._renderTrailing()}),n}options(e){if(arguments.length===0)return Ivt(this);const{type:n}=e;return n&&(this._previousDefinedType=n),zvt(this,e,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(e,n,r){return this._emitter.on(e,n,r),this}once(e,n){return this._emitter.once(e,n),this}emit(e,...n){return this._emitter.emit(e,...n),this}off(e,n){return this._emitter.off(e,n),this}clear(e=!0){if(this._rendering){this._trailingClear=()=>{this.clear(e)},this._reset();return}const n=this.options();this.emit(ao.BEFORE_CLEAR),this._reset(),Zle(n,this._context,!1,e),this.emit(ao.AFTER_CLEAR)}destroy(){const e=this.options();this.emit(ao.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),Zle(e,this._context,!0),this._container[LIe]&&Pvt(this._container),this.emit(ao.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:e,height:n}=lU(this.options(),this._container);if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(ao.BEFORE_CHANGE_SIZE);const r=this.render();return r.then(()=>{this.emit(ao.AFTER_CHANGE_SIZE)}),r}changeSize(e,n){if(e===this._width&&n===this._height)return Promise.resolve(this);this.emit(ao.BEFORE_CHANGE_SIZE),this.attr("width",e),this.attr("height",n);const r=this.render();return r.then(()=>{this.emit(ao.AFTER_CHANGE_SIZE)}),r}getDataByXY(e,n={}){const{shared:r=!1,series:i,facet:a=!1,startX:o=0,startY:s=0}=n,{canvas:l,views:c}=this._context,{document:u}=l,{x:f,y:h}=e,{coordinate:d,scale:p,markState:g,data:v,key:y}=c[0],_=u.getElementsByClassName(pm),E=r?B=>B.__data__.x:B=>B,x=Go(_,E),T=u.getElementsByClassName(GD)[0],S=Kp(T),w=B=>Array.from(B.values()).some(I=>{var U,$;return((U=I.interaction)===null||U===void 0?void 0:U.seriesTooltip)||(($=I.channels)===null||$===void 0?void 0:$.some(X=>X.name==="series"&&X.values!==void 0))}),C=cm(i,w(g)),D=B=>Wr(B,"__data__.data",null),L=B=>B.map(D);try{if(C&&w(g)&&!a){const{selectedData:$}=$3e({root:S,event:{offsetX:f,offsetY:h},elements:_,coordinate:d,scale:p,startX:o,startY:s}),X=v.get(`${y}-0`);return $.map(({index:N})=>X[N])}const B=z3e({root:S,event:{offsetX:f,offsetY:h},elements:_,coordinate:d,scale:p,shared:r});if(KF(B))return PQ(B,v.get(y));const I=E(B),U=x.get(I);return U?L(U):[]}catch{const I=l.document.elementFromPointSync(f,h);return I?D(I):[]}}_create(){const{library:e}=this._context,n=a=>a.startsWith("mark.")||a==="component.axisX"||a==="component.axisY"||a==="component.legends",r=["mark.mark",...Object.keys(e).filter(n)];this._marks={};for(const a of r){const o=a.split(".").pop();class s extends HX{constructor(){super({},o)}}this._marks[o]=s,this[o]=function(l){const c=this.append(s);return o==="mark"&&(c.type=l),c}}const i=["composition.view",...Object.keys(e).filter(a=>a.startsWith("composition.")&&a!=="composition.mark")];this._compositions=Object.fromEntries(i.map(a=>{const o=a.split(".").pop();let s=class extends oB{constructor(){super({},o)}};return s=Jvt([aB(Nce(this._marks))],s),[o,s]}));for(const a of Object.values(this._compositions))aB(Nce(this._compositions))(a);for(const a of i){const o=a.split(".").pop();this[o]=function(){const s=this._compositions[o];return this.type=null,this.append(s)}}}_reset(){const e=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([n])=>n.startsWith("margin")||n.startsWith("padding")||n.startsWith("inset")||e.includes(n))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const e=this._trailingResolve.bind(this);this._trailingResolve=null,e(this)}).catch(e=>{const n=this._trailingReject.bind(this);this._trailingReject=null,n(e)}))}_createResolve(e){return()=>{this._rendering=!1,e(this)}}_createReject(e){return n=>{this._rendering=!1,e(n)}}_computedOptions(){const e=this.options(),{key:n=tmt}=e,{width:r,height:i,depth:a}=lU(e,this._container);return this._width=r,this._height=i,this._key=n,Object.assign(Object.assign({key:this._key},e),{width:r,height:i,depth:a})}_createCanvas(){var e,n;const{width:r,height:i}=lU(this.options(),this._container);this._plugins.push(new bee),this._plugins.forEach(o=>this._renderer.registerPlugin(o)),this._context.canvas=new O2e({container:this._container,width:r,height:i,renderer:this._renderer});const a=(n=(e=this._context.canvas)===null||e===void 0?void 0:e.getContextService())===null||n===void 0?void 0:n.getDomElement();a&&(a.style.display="block")}_addToTrailing(){var e;return(e=this._trailingResolve)===null||e===void 0||e.call(this,this),this._trailing=!0,new Promise((r,i)=>{this._trailingResolve=r,this._trailingReject=i})}_bindAutoFit(){const e=this.options(),{autoFit:n}=e;if(this._hasBindAutoFit){n||this._unbindAutoFit();return}n&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}const nmt=Object.assign({},RIe()),V4=MIe(BIe,nmt);var cU={exports:{}},Ki={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ice;function rmt(){if(Ice)return Ki;Ice=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),h=Symbol.iterator;function d(V){return V===null||typeof V!="object"?null:(V=h&&V[h]||V["@@iterator"],typeof V=="function"?V:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function y(V,Q,ee){this.props=V,this.context=Q,this.refs=v,this.updater=ee||p}y.prototype.isReactComponent={},y.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},y.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function _(){}_.prototype=y.prototype;function E(V,Q,ee){this.props=V,this.context=Q,this.refs=v,this.updater=ee||p}var x=E.prototype=new _;x.constructor=E,g(x,y.prototype),x.isPureReactComponent=!0;var T=Array.isArray;function S(){}var w={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function D(V,Q,ee){var re=ee.ref;return{$$typeof:t,type:V,key:Q,ref:re!==void 0?re:null,props:ee}}function L(V,Q){return D(V.type,Q,V.props)}function B(V){return typeof V=="object"&&V!==null&&V.$$typeof===t}function I(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(ee){return Q[ee]})}var U=/\/+/g;function $(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?I(""+V.key):Q.toString(36)}function X(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(S,S):(V.status="pending",V.then(function(Q){V.status==="pending"&&(V.status="fulfilled",V.value=Q)},function(Q){V.status==="pending"&&(V.status="rejected",V.reason=Q)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function N(V,Q,ee,re,ne){var le=typeof V;(le==="undefined"||le==="boolean")&&(V=null);var ue=!1;if(V===null)ue=!0;else switch(le){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(V.$$typeof){case t:case e:ue=!0;break;case u:return ue=V._init,N(ue(V._payload),Q,ee,re,ne)}}if(ue)return ne=ne(V),ue=re===""?"."+$(V,0):re,T(ne)?(ee="",ue!=null&&(ee=ue.replace(U,"$&/")+"/"),N(ne,Q,ee,"",function(Re){return Re})):ne!=null&&(B(ne)&&(ne=L(ne,ee+(ne.key==null||V&&V.key===ne.key?"":(""+ne.key).replace(U,"$&/")+"/")+ue)),Q.push(ne)),1;ue=0;var ve=re===""?".":re+":";if(T(V))for(var Se=0;Se<V.length;Se++)re=V[Se],le=ve+$(re,Se),ue+=N(re,Q,ee,le,ne);else if(Se=d(V),typeof Se=="function")for(V=Se.call(V),Se=0;!(re=V.next()).done;)re=re.value,le=ve+$(re,Se++),ue+=N(re,Q,ee,le,ne);else if(le==="object"){if(typeof V.then=="function")return N(X(V),Q,ee,re,ne);throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return ue}function M(V,Q,ee){if(V==null)return V;var re=[],ne=0;return N(V,re,"","",function(le){return Q.call(ee,le,ne++)}),re}function k(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(ee){(V._status===0||V._status===-1)&&(V._status=1,V._result=ee)},function(ee){(V._status===0||V._status===-1)&&(V._status=2,V._result=ee)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var z=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},j={map:M,forEach:function(V,Q,ee){M(V,function(){Q.apply(this,arguments)},ee)},count:function(V){var Q=0;return M(V,function(){Q++}),Q},toArray:function(V){return M(V,function(Q){return Q})||[]},only:function(V){if(!B(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Ki.Activity=f,Ki.Children=j,Ki.Component=y,Ki.Fragment=n,Ki.Profiler=i,Ki.PureComponent=E,Ki.StrictMode=r,Ki.Suspense=l,Ki.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Ki.__COMPILER_RUNTIME={__proto__:null,c:function(V){return w.H.useMemoCache(V)}},Ki.cache=function(V){return function(){return V.apply(null,arguments)}},Ki.cacheSignal=function(){return null},Ki.cloneElement=function(V,Q,ee){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var re=g({},V.props),ne=V.key;if(Q!=null)for(le in Q.key!==void 0&&(ne=""+Q.key),Q)!C.call(Q,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&Q.ref===void 0||(re[le]=Q[le]);var le=arguments.length-2;if(le===1)re.children=ee;else if(1<le){for(var ue=Array(le),ve=0;ve<le;ve++)ue[ve]=arguments[ve+2];re.children=ue}return D(V.type,ne,re)},Ki.createContext=function(V){return V={$$typeof:o,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:a,_context:V},V},Ki.createElement=function(V,Q,ee){var re,ne={},le=null;if(Q!=null)for(re in Q.key!==void 0&&(le=""+Q.key),Q)C.call(Q,re)&&re!=="key"&&re!=="__self"&&re!=="__source"&&(ne[re]=Q[re]);var ue=arguments.length-2;if(ue===1)ne.children=ee;else if(1<ue){for(var ve=Array(ue),Se=0;Se<ue;Se++)ve[Se]=arguments[Se+2];ne.children=ve}if(V&&V.defaultProps)for(re in ue=V.defaultProps,ue)ne[re]===void 0&&(ne[re]=ue[re]);return D(V,le,ne)},Ki.createRef=function(){return{current:null}},Ki.forwardRef=function(V){return{$$typeof:s,render:V}},Ki.isValidElement=B,Ki.lazy=function(V){return{$$typeof:u,_payload:{_status:-1,_result:V},_init:k}},Ki.memo=function(V,Q){return{$$typeof:c,type:V,compare:Q===void 0?null:Q}},Ki.startTransition=function(V){var Q=w.T,ee={};w.T=ee;try{var re=V(),ne=w.S;ne!==null&&ne(ee,re),typeof re=="object"&&re!==null&&typeof re.then=="function"&&re.then(S,z)}catch(le){z(le)}finally{Q!==null&&ee.types!==null&&(Q.types=ee.types),w.T=Q}},Ki.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Ki.use=function(V){return w.H.use(V)},Ki.useActionState=function(V,Q,ee){return w.H.useActionState(V,Q,ee)},Ki.useCallback=function(V,Q){return w.H.useCallback(V,Q)},Ki.useContext=function(V){return w.H.useContext(V)},Ki.useDebugValue=function(){},Ki.useDeferredValue=function(V,Q){return w.H.useDeferredValue(V,Q)},Ki.useEffect=function(V,Q){return w.H.useEffect(V,Q)},Ki.useEffectEvent=function(V){return w.H.useEffectEvent(V)},Ki.useId=function(){return w.H.useId()},Ki.useImperativeHandle=function(V,Q,ee){return w.H.useImperativeHandle(V,Q,ee)},Ki.useInsertionEffect=function(V,Q){return w.H.useInsertionEffect(V,Q)},Ki.useLayoutEffect=function(V,Q){return w.H.useLayoutEffect(V,Q)},Ki.useMemo=function(V,Q){return w.H.useMemo(V,Q)},Ki.useOptimistic=function(V,Q){return w.H.useOptimistic(V,Q)},Ki.useReducer=function(V,Q,ee){return w.H.useReducer(V,Q,ee)},Ki.useRef=function(V){return w.H.useRef(V)},Ki.useState=function(V){return w.H.useState(V)},Ki.useSyncExternalStore=function(V,Q,ee){return w.H.useSyncExternalStore(V,Q,ee)},Ki.useTransition=function(){return w.H.useTransition()},Ki.version="19.2.1",Ki}var Lce;function Jee(){return Lce||(Lce=1,cU.exports=rmt()),cU.exports}var jt=Jee();const et=Ni(jt);var imt=jt.version||"",ete,GX,amt,uU="__rc_react_root__";try{var omt=parseInt(imt.split(".")[0],10);if(omt>=18){var smt=require("react-dom/client");ete=smt.createRoot}else{var kce=require("react-dom");GX=kce.render,amt=kce.unmountComponentAtNode}}catch{}function lmt(t,e){e[uU]||(e[uU]=ete(e)),e[uU].render(t)}function cmt(t,e){if(GX)GX(t,e);else throw new Error("ReactDOM.render is not available in this React version")}function umt(t,e){ete?lmt(t,e):cmt(t,e)}var fk=new Map;typeof document<"u"&&fk.set("tooltip",document.createElement("div"));var fmt=function(t,e){e===void 0&&(e=!1);var n=null;if(e)n=fk.get("tooltip");else if(n=document.createElement("div"),t?.key){var r=fk.get(t.key);r?n=r:fk.set(t.key,n)}return umt(t,n),n},WX=function(){return WX=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},WX.apply(this,arguments)},hmt=function(t,e){if(e===void 0&&(e={}),typeof document>"u")return"loading";var n="";e&&Object.keys(e).forEach(function(o){n+="".concat(o,": ").concat(e[o],`;
`)});var r=t.attachShadow({mode:"open"}),i=document.createElement("div"),a=document.createElement("style");a.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
    `.concat(n,`
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `),i.classList.add("loading"),i.innerHTML="<div></div><div></div><div></div><div></div>",r.appendChild(a),r.appendChild(i)},dmt=function(t){var e=t.loadingTemplate,n=t.theme,r=n===void 0?"light":n,i=t.loading,a=et.useRef(null),o=typeof i=="object"?i:{},s=o.container,l=s===void 0?{}:s,c=o.icon,u=c===void 0?{}:c;et.useEffect(function(){!e&&a.current&&hmt(a.current,u)},[]);var f=function(){return e||et.createElement("div",{ref:a})};return et.createElement("div",{className:"charts-loading-container",style:WX({position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,background:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"},l)},f())},pmt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),gmt=(function(t){pmt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;return typeof i=="function"?i(r):i||et.createElement("h5",null," ",r.message)},n}return e.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},e.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):et.createElement(jt.Fragment,null,this.props.children)},e})(et.Component),gC={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var vmt=gC.exports,Dce;function mmt(){return Dce||(Dce=1,(function(t,e){(function(){var n,r="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",s="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",f=1,h=2,d=4,p=1,g=2,v=1,y=2,_=4,E=8,x=16,T=32,S=64,w=128,C=256,D=512,L=30,B="...",I=800,U=16,$=1,X=2,N=3,M=1/0,k=9007199254740991,z=17976931348623157e292,j=NaN,V=4294967295,Q=V-1,ee=V>>>1,re=[["ary",w],["bind",v],["bindKey",y],["curry",E],["curryRight",x],["flip",D],["partial",T],["partialRight",S],["rearg",C]],ne="[object Arguments]",le="[object Array]",ue="[object AsyncFunction]",ve="[object Boolean]",Se="[object Date]",Re="[object DOMException]",Xe="[object Error]",Le="[object Function]",Lt="[object GeneratorFunction]",xt="[object Map]",dt="[object Number]",Bt="[object Null]",At="[object Object]",zt="[object Promise]",rn="[object Proxy]",Wn="[object RegExp]",Sn="[object Set]",In="[object String]",de="[object Symbol]",sr="[object Undefined]",zr="[object WeakMap]",st="[object WeakSet]",Ft="[object ArrayBuffer]",An="[object DataView]",wn="[object Float32Array]",$n="[object Float64Array]",Vr="[object Int8Array]",Tr="[object Int16Array]",Rr="[object Int32Array]",ei="[object Uint8Array]",va="[object Uint8ClampedArray]",pi="[object Uint16Array]",qo="[object Uint32Array]",ft=/\b__p \+= '';/g,nn=/\b(__p \+=) '' \+/g,Yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Nr=/&(?:amp|lt|gt|quot|#39);/g,ce=/[&<>"']/g,H=RegExp(Nr.source),W=RegExp(ce.source),F=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,te=/<%=([\s\S]+?)%>/g,pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,me=/^\w*$/,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oe=/[\\^$.*+?()[\]{}|]/g,ct=RegExp(Oe.source),Ge=/^\s+/,$t=/\s/,kn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,_t=/\{\n\/\* \[wrapped with (.+)\] \*/,Jt=/,? & /,Xn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,$e=/[()=,{}\[\]\/\s]/,_n=/\\(\\)?/g,ar=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Hr=/\w*$/,ti=/^[-+]0x[0-9a-f]+$/i,ua=/^0b[01]+$/i,Mr=/^\[object .+?Constructor\]$/,Ir=/^0o[0-7]+$/i,ia=/^(?:0|[1-9]\d*)$/,nt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,tn=/($^)/,er=/['\n\r\u2028\u2029\\]/g,mn="\\ud800-\\udfff",Yr="\\u0300-\\u036f",Gi="\\ufe20-\\ufe2f",Fi="\\u20d0-\\u20ff",Ti=Yr+Gi+Fi,Oa="\\u2700-\\u27bf",ln="a-z\\xdf-\\xf6\\xf8-\\xff",Hn="\\xac\\xb1\\xd7\\xf7",si="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Wi="\\u2000-\\u206f",Lr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ii="A-Z\\xc0-\\xd6\\xd8-\\xde",Xi="\\ufe0e\\ufe0f",Ai=Hn+si+Wi+Lr,qi="[']",Zl="["+mn+"]",Du="["+Ai+"]",yl="["+Ti+"]",js="\\d+",Ud="["+Oa+"]",Po="["+ln+"]",ru="[^"+mn+Ai+js+Oa+ln+Ii+"]",Kl="\\ud83c[\\udffb-\\udfff]",Hh="(?:"+yl+"|"+Kl+")",iu="[^"+mn+"]",he="(?:\\ud83c[\\udde6-\\uddff]){2}",Te="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+Ii+"]",Et="\\u200d",On="(?:"+Po+"|"+ru+")",lr="(?:"+Fe+"|"+ru+")",gi="(?:"+qi+"(?:d|ll|m|re|s|t|ve))?",No="(?:"+qi+"(?:D|LL|M|RE|S|T|VE))?",cr=Hh+"?",hr="["+Xi+"]?",Xr="(?:"+Et+"(?:"+[iu,he,Te].join("|")+")"+hr+cr+")*",Pa="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_l="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bu=hr+cr+Xr,jd="(?:"+[Ud,he,Te].join("|")+")"+Bu,cS="(?:"+[iu+yl+"?",yl,he,Te,Zl].join("|")+")",_b=RegExp(qi,"g"),uS=RegExp(yl,"g"),au=RegExp(Kl+"(?="+Kl+")|"+cS+Bu,"g"),Gh=RegExp([Fe+"?"+Po+"+"+gi+"(?="+[Du,Fe,"$"].join("|")+")",lr+"+"+No+"(?="+[Du,Fe+On,"$"].join("|")+")",Fe+"?"+On+"+"+gi,Fe+"+"+No,_l,Pa,js,jd].join("|"),"g"),bb=RegExp("["+Et+mn+Ti+Xi+"]"),zd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,th=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Gy=-1,Za={};Za[wn]=Za[$n]=Za[Vr]=Za[Tr]=Za[Rr]=Za[ei]=Za[va]=Za[pi]=Za[qo]=!0,Za[ne]=Za[le]=Za[Ft]=Za[ve]=Za[An]=Za[Se]=Za[Xe]=Za[Le]=Za[xt]=Za[dt]=Za[At]=Za[Wn]=Za[Sn]=Za[In]=Za[zr]=!1;var lo={};lo[ne]=lo[le]=lo[Ft]=lo[An]=lo[ve]=lo[Se]=lo[wn]=lo[$n]=lo[Vr]=lo[Tr]=lo[Rr]=lo[xt]=lo[dt]=lo[At]=lo[Wn]=lo[Sn]=lo[In]=lo[de]=lo[ei]=lo[va]=lo[pi]=lo[qo]=!0,lo[Xe]=lo[Le]=lo[zr]=!1;var hv={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},dv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Wh={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kl={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$d=parseFloat,o0=parseInt,pv=typeof v_=="object"&&v_&&v_.Object===Object&&v_,lO=typeof self=="object"&&self&&self.Object===Object&&self,el=pv||lO||Function("return this")(),s0=e&&!e.nodeType&&e,gf=s0&&!0&&t&&!t.nodeType&&t,l0=gf&&gf.exports===s0,Wy=l0&&pv.process,Dl=(function(){try{var lt=gf&&gf.require&&gf.require("util").types;return lt||Wy&&Wy.binding&&Wy.binding("util")}catch{}})(),fS=Dl&&Dl.isArrayBuffer,hS=Dl&&Dl.isDate,Hd=Dl&&Dl.isMap,dS=Dl&&Dl.isRegExp,ng=Dl&&Dl.isSet,Eb=Dl&&Dl.isTypedArray;function bl(lt,en,Ut){switch(Ut.length){case 0:return lt.call(en);case 1:return lt.call(en,Ut[0]);case 2:return lt.call(en,Ut[0],Ut[1]);case 3:return lt.call(en,Ut[0],Ut[1],Ut[2])}return lt.apply(en,Ut)}function pS(lt,en,Ut,Er){for(var wi=-1,Zi=lt==null?0:lt.length;++wi<Zi;){var Qo=lt[wi];en(Er,Qo,Ut(Qo),lt)}return Er}function tl(lt,en){for(var Ut=-1,Er=lt==null?0:lt.length;++Ut<Er&&en(lt[Ut],Ut,lt)!==!1;);return lt}function xb(lt,en){for(var Ut=lt==null?0:lt.length;Ut--&&en(lt[Ut],Ut,lt)!==!1;);return lt}function gS(lt,en){for(var Ut=-1,Er=lt==null?0:lt.length;++Ut<Er;)if(!en(lt[Ut],Ut,lt))return!1;return!0}function Gd(lt,en){for(var Ut=-1,Er=lt==null?0:lt.length,wi=0,Zi=[];++Ut<Er;){var Qo=lt[Ut];en(Qo,Ut,lt)&&(Zi[wi++]=Qo)}return Zi}function Vy(lt,en){var Ut=lt==null?0:lt.length;return!!Ut&&Vd(lt,en,0)>-1}function gv(lt,en,Ut){for(var Er=-1,wi=lt==null?0:lt.length;++Er<wi;)if(Ut(en,lt[Er]))return!0;return!1}function Zo(lt,en){for(var Ut=-1,Er=lt==null?0:lt.length,wi=Array(Er);++Ut<Er;)wi[Ut]=en(lt[Ut],Ut,lt);return wi}function Wd(lt,en){for(var Ut=-1,Er=en.length,wi=lt.length;++Ut<Er;)lt[wi+Ut]=en[Ut];return lt}function Yy(lt,en,Ut,Er){var wi=-1,Zi=lt==null?0:lt.length;for(Er&&Zi&&(Ut=lt[++wi]);++wi<Zi;)Ut=en(Ut,lt[wi],wi,lt);return Ut}function Ko(lt,en,Ut,Er){var wi=lt==null?0:lt.length;for(Er&&wi&&(Ut=lt[--wi]);wi--;)Ut=en(Ut,lt[wi],wi,lt);return Ut}function Xy(lt,en){for(var Ut=-1,Er=lt==null?0:lt.length;++Ut<Er;)if(en(lt[Ut],Ut,lt))return!0;return!1}var cO=Yd("length");function Vh(lt){return lt.split("")}function vS(lt){return lt.match(Xn)||[]}function c0(lt,en,Ut){var Er;return Ut(lt,function(wi,Zi,Qo){if(en(wi,Zi,Qo))return Er=Zi,!1}),Er}function nh(lt,en,Ut,Er){for(var wi=lt.length,Zi=Ut+(Er?1:-1);Er?Zi--:++Zi<wi;)if(en(lt[Zi],Zi,lt))return Zi;return-1}function Vd(lt,en,Ut){return en===en?wb(lt,en,Ut):nh(lt,vv,Ut)}function qy(lt,en,Ut,Er){for(var wi=Ut-1,Zi=lt.length;++wi<Zi;)if(Er(lt[wi],en))return wi;return-1}function vv(lt){return lt!==lt}function rg(lt,en){var Ut=lt==null?0:lt.length;return Ut?Ky(lt,en)/Ut:j}function Yd(lt){return function(en){return en==null?n:en[lt]}}function u0(lt){return function(en){return lt==null?n:lt[en]}}function Zy(lt,en,Ut,Er,wi){return wi(lt,function(Zi,Qo,Ka){Ut=Er?(Er=!1,Zi):en(Ut,Zi,Qo,Ka)}),Ut}function mS(lt,en){var Ut=lt.length;for(lt.sort(en);Ut--;)lt[Ut]=lt[Ut].value;return lt}function Ky(lt,en){for(var Ut,Er=-1,wi=lt.length;++Er<wi;){var Zi=en(lt[Er]);Zi!==n&&(Ut=Ut===n?Zi:Ut+Zi)}return Ut}function Qy(lt,en){for(var Ut=-1,Er=Array(lt);++Ut<lt;)Er[Ut]=en(Ut);return Er}function yS(lt,en){return Zo(en,function(Ut){return[Ut,lt[Ut]]})}function Yh(lt){return lt&&lt.slice(0,yv(lt)+1).replace(Ge,"")}function Ql(lt){return function(en){return lt(en)}}function f0(lt,en){return Zo(en,function(Ut){return lt[Ut]})}function ig(lt,en){return lt.has(en)}function Xd(lt,en){for(var Ut=-1,Er=lt.length;++Ut<Er&&Vd(en,lt[Ut],0)>-1;);return Ut}function h0(lt,en){for(var Ut=lt.length;Ut--&&Vd(en,lt[Ut],0)>-1;);return Ut}function ag(lt,en){for(var Ut=lt.length,Er=0;Ut--;)lt[Ut]===en&&++Er;return Er}var og=u0(hv),Sb=u0(dv);function d0(lt){return"\\"+kl[lt]}function Tb(lt,en){return lt==null?n:lt[en]}function qd(lt){return bb.test(lt)}function Jy(lt){return zd.test(lt)}function e1(lt){for(var en,Ut=[];!(en=lt.next()).done;)Ut.push(en.value);return Ut}function p0(lt){var en=-1,Ut=Array(lt.size);return lt.forEach(function(Er,wi){Ut[++en]=[wi,Er]}),Ut}function t1(lt,en){return function(Ut){return lt(en(Ut))}}function rh(lt,en){for(var Ut=-1,Er=lt.length,wi=0,Zi=[];++Ut<Er;){var Qo=lt[Ut];(Qo===en||Qo===u)&&(lt[Ut]=u,Zi[wi++]=Ut)}return Zi}function Xh(lt){var en=-1,Ut=Array(lt.size);return lt.forEach(function(Er){Ut[++en]=Er}),Ut}function Ab(lt){var en=-1,Ut=Array(lt.size);return lt.forEach(function(Er){Ut[++en]=[Er,Er]}),Ut}function wb(lt,en,Ut){for(var Er=Ut-1,wi=lt.length;++Er<wi;)if(lt[Er]===en)return Er;return-1}function g0(lt,en,Ut){for(var Er=Ut+1;Er--;)if(lt[Er]===en)return Er;return Er}function mv(lt){return qd(lt)?_S(lt):cO(lt)}function os(lt){return qd(lt)?bS(lt):Vh(lt)}function yv(lt){for(var en=lt.length;en--&&$t.test(lt.charAt(en)););return en}var n1=u0(Wh);function _S(lt){for(var en=au.lastIndex=0;au.test(lt);)++en;return en}function bS(lt){return lt.match(au)||[]}function ES(lt){return lt.match(Gh)||[]}var v0=(function lt(en){en=en==null?el:_v.defaults(el.Object(),en,_v.pick(el,th));var Ut=en.Array,Er=en.Date,wi=en.Error,Zi=en.Function,Qo=en.Math,Ka=en.Object,r1=en.RegExp,sg=en.String,ou=en.TypeError,m0=Ut.prototype,xS=Zi.prototype,lg=Ka.prototype,cg=en["__core-js_shared__"],i1=xS.toString,Ca=lg.hasOwnProperty,su=0,qh=(function(){var O=/[^.]+$/.exec(cg&&cg.keys&&cg.keys.IE_PROTO||"");return O?"Symbol(src)_1."+O:""})(),Ec=lg.toString,y0=i1.call(Ka),lu=el._,ug=r1("^"+i1.call(Ca).replace(Oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fg=l0?en.Buffer:n,Fu=en.Symbol,hg=en.Uint8Array,Zh=fg?fg.allocUnsafe:n,co=t1(Ka.getPrototypeOf,Ka),a1=Ka.create,bv=lg.propertyIsEnumerable,xc=m0.splice,Ob=Fu?Fu.isConcatSpreadable:n,El=Fu?Fu.iterator:n,Kh=Fu?Fu.toStringTag:n,Uu=(function(){try{var O=cn(Ka,"defineProperty");return O({},"",{}),O}catch{}})(),SS=en.clearTimeout!==el.clearTimeout&&en.clearTimeout,o1=Er&&Er.now!==el.Date.now&&Er.now,Qh=en.setTimeout!==el.setTimeout&&en.setTimeout,dg=Qo.ceil,_0=Qo.floor,Ev=Ka.getOwnPropertySymbols,Cb=fg?fg.isBuffer:n,cu=en.isFinite,Jh=m0.join,xv=t1(Ka.keys,Ka),Qa=Qo.max,ss=Qo.min,uu=Er.now,fu=en.parseInt,ih=Qo.random,vf=m0.reverse,hu=cn(en,"DataView"),Dc=cn(en,"Map"),b0=cn(en,"Promise"),ed=cn(en,"Set"),Zd=cn(en,"WeakMap"),Jl=cn(Ka,"create"),xs=Zd&&new Zd,za={},Li=fa(hu),ah=fa(Dc),xl=fa(b0),Sv=fa(ed),td=fa(Zd),Tv=Fu?Fu.prototype:n,pg=Tv?Tv.valueOf:n,Kd=Tv?Tv.toString:n;function ye(O){if(Hs(O)&&!Bi(O)&&!(O instanceof Ui)){if(O instanceof Bc)return O;if(Ca.call(O,"__wrapped__"))return ws(O)}return new Bc(O)}var Qd=(function(){function O(){}return function(P){if(!vs(P))return{};if(a1)return a1(P);O.prototype=P;var q=new O;return O.prototype=n,q}})();function Jd(){}function Bc(O,P){this.__wrapped__=O,this.__actions__=[],this.__chain__=!!P,this.__index__=0,this.__values__=n}ye.templateSettings={escape:F,evaluate:Y,interpolate:te,variable:"",imports:{_:ye}},ye.prototype=Jd.prototype,ye.prototype.constructor=ye,Bc.prototype=Qd(Jd.prototype),Bc.prototype.constructor=Bc;function Ui(O){this.__wrapped__=O,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=V,this.__views__=[]}function nd(){var O=new Ui(this.__wrapped__);return O.__actions__=rc(this.__actions__),O.__dir__=this.__dir__,O.__filtered__=this.__filtered__,O.__iteratees__=rc(this.__iteratees__),O.__takeCount__=this.__takeCount__,O.__views__=rc(this.__views__),O}function ep(){if(this.__filtered__){var O=new Ui(this);O.__dir__=-1,O.__filtered__=!0}else O=this.clone(),O.__dir__*=-1;return O}function rd(){var O=this.__wrapped__.value(),P=this.__dir__,q=Bi(O),ie=P<0,fe=q?O.length:0,we=un(0,fe,this.__views__),He=we.start,tt=we.end,bt=tt-He,bn=ie?tt:He-1,xn=this.__iteratees__,Bn=xn.length,xr=0,Jr=ss(bt,this.__takeCount__);if(!q||!ie&&fe==bt&&Jr==bt)return P0(O,this.__actions__);var Ei=[];e:for(;bt--&&xr<Jr;){bn+=P;for(var ha=-1,xi=O[bn];++ha<Bn;){var Ra=xn[ha],Fa=Ra.iteratee,hd=Ra.type,If=Fa(xi);if(hd==X)xi=If;else if(!If){if(hd==$)continue e;break e}}Ei[xr++]=xi}return Ei}Ui.prototype=Qd(Jd.prototype),Ui.prototype.constructor=Ui;function oh(O){var P=-1,q=O==null?0:O.length;for(this.clear();++P<q;){var ie=O[P];this.set(ie[0],ie[1])}}function s1(){this.__data__=Jl?Jl(null):{},this.size=0}function Av(O){var P=this.has(O)&&delete this.__data__[O];return this.size-=P?1:0,P}function l1(O){var P=this.__data__;if(Jl){var q=P[O];return q===l?n:q}return Ca.call(P,O)?P[O]:n}function id(O){var P=this.__data__;return Jl?P[O]!==n:Ca.call(P,O)}function zs(O,P){var q=this.__data__;return this.size+=this.has(O)?0:1,q[O]=Jl&&P===n?l:P,this}oh.prototype.clear=s1,oh.prototype.delete=Av,oh.prototype.get=l1,oh.prototype.has=id,oh.prototype.set=zs;function ju(O){var P=-1,q=O==null?0:O.length;for(this.clear();++P<q;){var ie=O[P];this.set(ie[0],ie[1])}}function TS(){this.__data__=[],this.size=0}function uO(O){var P=this.__data__,q=Sc(P,O);if(q<0)return!1;var ie=P.length-1;return q==ie?P.pop():xc.call(P,q,1),--this.size,!0}function fO(O){var P=this.__data__,q=Sc(P,O);return q<0?n:P[q][1]}function hO(O){return Sc(this.__data__,O)>-1}function Ss(O,P){var q=this.__data__,ie=Sc(q,O);return ie<0?(++this.size,q.push([O,P])):q[ie][1]=P,this}ju.prototype.clear=TS,ju.prototype.delete=uO,ju.prototype.get=fO,ju.prototype.has=hO,ju.prototype.set=Ss;function mf(O){var P=-1,q=O==null?0:O.length;for(this.clear();++P<q;){var ie=O[P];this.set(ie[0],ie[1])}}function E0(){this.size=0,this.__data__={hash:new oh,map:new(Dc||ju),string:new oh}}function x0(O){var P=Pt(this,O).delete(O);return this.size-=P?1:0,P}function Rb(O){return Pt(this,O).get(O)}function wv(O){return Pt(this,O).has(O)}function yf(O,P){var q=Pt(this,O),ie=q.size;return q.set(O,P),this.size+=q.size==ie?0:1,this}mf.prototype.clear=E0,mf.prototype.delete=x0,mf.prototype.get=Rb,mf.prototype.has=wv,mf.prototype.set=yf;function gg(O){var P=-1,q=O==null?0:O.length;for(this.__data__=new mf;++P<q;)this.add(O[P])}function AS(O){return this.__data__.set(O,l),this}function wS(O){return this.__data__.has(O)}gg.prototype.add=gg.prototype.push=AS,gg.prototype.has=wS;function Fc(O){var P=this.__data__=new ju(O);this.size=P.size}function vg(){this.__data__=new ju,this.size=0}function c1(O){var P=this.__data__,q=P.delete(O);return this.size=P.size,q}function u1(O){return this.__data__.get(O)}function OS(O){return this.__data__.has(O)}function Ov(O,P){var q=this.__data__;if(q instanceof ju){var ie=q.__data__;if(!Dc||ie.length<i-1)return ie.push([O,P]),this.size=++q.size,this;q=this.__data__=new mf(ie)}return q.set(O,P),this.size=q.size,this}Fc.prototype.clear=vg,Fc.prototype.delete=c1,Fc.prototype.get=u1,Fc.prototype.has=OS,Fc.prototype.set=Ov;function f1(O,P){var q=Bi(O),ie=!q&&F0(O),fe=!q&&!ie&&qv(O),we=!q&&!ie&&!fe&&Zv(O),He=q||ie||fe||we,tt=He?Qy(O.length,sg):[],bt=tt.length;for(var bn in O)(P||Ca.call(O,bn))&&!(He&&(bn=="length"||fe&&(bn=="offset"||bn=="parent")||we&&(bn=="buffer"||bn=="byteLength"||bn=="byteOffset")||sn(bn,bt)))&&tt.push(bn);return tt}function S0(O){var P=O.length;return P?O[Nv(0,P-1)]:n}function tp(O,P){return ko(rc(O),du(P,0,O.length))}function CS(O){return ko(rc(O))}function mg(O,P,q){(q!==n&&!Mf(O[P],q)||q===n&&!(P in O))&&Uc(O,P,q)}function _f(O,P,q){var ie=O[P];(!(Ca.call(O,P)&&Mf(ie,q))||q===n&&!(P in O))&&Uc(O,P,q)}function Sc(O,P){for(var q=O.length;q--;)if(Mf(O[q][0],P))return q;return-1}function yg(O,P,q,ie){return xf(O,function(fe,we,He){P(ie,fe,q(fe),He)}),ie}function Mb(O,P){return O&&_u(P,ac(P),O)}function bf(O,P){return O&&_u(P,Xu(P),O)}function Uc(O,P,q){P=="__proto__"&&Uu?Uu(O,P,{configurable:!0,enumerable:!0,value:q,writable:!0}):O[P]=q}function Ef(O,P){for(var q=-1,ie=P.length,fe=Ut(ie),we=O==null;++q<ie;)fe[q]=we?n:Kv(O,P[q]);return fe}function du(O,P,q){return O===O&&(q!==n&&(O=O<=q?O:q),P!==n&&(O=O>=P?O:P)),O}function ec(O,P,q,ie,fe,we){var He,tt=P&f,bt=P&h,bn=P&d;if(q&&(He=fe?q(O,ie,fe,we):q(O)),He!==n)return He;if(!vs(O))return O;var xn=Bi(O);if(xn){if(He=wt(O),!tt)return rc(O,He)}else{var Bn=pn(O),xr=Bn==Le||Bn==Lt;if(qv(O))return v1(O,tt);if(Bn==At||Bn==ne||xr&&!fe){if(He=bt||xr?{}:gn(O),!tt)return bt?jb(O,bf(He,O)):IS(O,Mb(He,O))}else{if(!lo[Bn])return fe?O:{};He=zn(O,Bn,tt)}}we||(we=new Fc);var Jr=we.get(O);if(Jr)return Jr;we.set(O,He),tE(O)?O.forEach(function(xi){He.add(ec(xi,P,q,xi,O,we))}):zN(O)&&O.forEach(function(xi,Ra){He.set(Ra,ec(xi,P,q,Ra,O,we))});var Ei=bn?bt?Ee:ae:bt?Xu:ac,ha=xn?n:Ei(O);return tl(ha||O,function(xi,Ra){ha&&(Ra=xi,xi=O[Ra]),_f(He,Ra,ec(xi,P,q,Ra,O,we))}),He}function Pb(O){var P=ac(O);return function(q){return ad(q,O,P)}}function ad(O,P,q){var ie=q.length;if(O==null)return!ie;for(O=Ka(O);ie--;){var fe=q[ie],we=P[fe],He=O[fe];if(He===n&&!(fe in O)||!we(He))return!1}return!0}function h1(O,P,q){if(typeof O!="function")throw new ou(o);return Lo(function(){O.apply(n,q)},P)}function jc(O,P,q,ie){var fe=-1,we=Vy,He=!0,tt=O.length,bt=[],bn=P.length;if(!tt)return bt;q&&(P=Zo(P,Ql(q))),ie?(we=gv,He=!1):P.length>=i&&(we=ig,He=!1,P=new gg(P));e:for(;++fe<tt;){var xn=O[fe],Bn=q==null?xn:q(xn);if(xn=ie||xn!==0?xn:0,He&&Bn===Bn){for(var xr=bn;xr--;)if(P[xr]===Bn)continue e;bt.push(xn)}else we(P,Bn,ie)||bt.push(xn)}return bt}var xf=b1(gu),T0=b1(w0,!0);function od(O,P){var q=!0;return xf(O,function(ie,fe,we){return q=!!P(ie,fe,we),q}),q}function pu(O,P,q){for(var ie=-1,fe=O.length;++ie<fe;){var we=O[ie],He=P(we);if(He!=null&&(tt===n?He===He&&!Yu(He):q(He,tt)))var tt=He,bt=we}return bt}function _g(O,P,q,ie){var fe=O.length;for(q=bi(q),q<0&&(q=-q>fe?0:fe+q),ie=ie===n||ie>fe?fe:bi(ie),ie<0&&(ie+=fe),ie=q>ie?0:FO(ie);q<ie;)O[q++]=P;return O}function A0(O,P){var q=[];return xf(O,function(ie,fe,we){P(ie,fe,we)&&q.push(ie)}),q}function $s(O,P,q,ie,fe){var we=-1,He=O.length;for(q||(q=Zn),fe||(fe=[]);++we<He;){var tt=O[we];P>0&&q(tt)?P>1?$s(tt,P-1,q,ie,fe):Wd(fe,tt):ie||(fe[fe.length]=tt)}return fe}var np=sp(),bg=sp(!0);function gu(O,P){return O&&np(O,P,ac)}function w0(O,P){return O&&bg(O,P,ac)}function sh(O,P){return Gd(P,function(q){return Pf(O[q])})}function zu(O,P){P=Ul(P,O);for(var q=0,ie=P.length;O!=null&&q<ie;)O=O[$a(P[q++])];return q&&q==ie?O:n}function O0(O,P,q){var ie=P(O);return Bi(O)?ie:Wd(ie,q(O))}function Sl(O){return O==null?O===n?sr:Bt:Kh&&Kh in Ka(O)?Pn(O):Qr(O)}function Eg(O,P){return O>P}function zc(O,P){return O!=null&&Ca.call(O,P)}function vu(O,P){return O!=null&&P in Ka(O)}function lh(O,P,q){return O>=ss(P,q)&&O<Qa(P,q)}function Cv(O,P,q){for(var ie=q?gv:Vy,fe=O[0].length,we=O.length,He=we,tt=Ut(we),bt=1/0,bn=[];He--;){var xn=O[He];He&&P&&(xn=Zo(xn,Ql(P))),bt=ss(xn.length,bt),tt[He]=!q&&(P||fe>=120&&xn.length>=120)?new gg(He&&xn):n}xn=O[0];var Bn=-1,xr=tt[0];e:for(;++Bn<fe&&bn.length<bt;){var Jr=xn[Bn],Ei=P?P(Jr):Jr;if(Jr=q||Jr!==0?Jr:0,!(xr?ig(xr,Ei):ie(bn,Ei,q))){for(He=we;--He;){var ha=tt[He];if(!(ha?ig(ha,Ei):ie(O[He],Ei,q)))continue e}xr&&xr.push(Ei),bn.push(Jr)}}return bn}function Nb(O,P,q,ie){return gu(O,function(fe,we,He){P(ie,q(fe),we,He)}),ie}function $c(O,P,q){P=Ul(P,O),O=zi(O,P);var ie=O==null?O:O[$a(ht(P))];return ie==null?n:bl(ie,O,q)}function tc(O){return Hs(O)&&Sl(O)==ne}function Io(O){return Hs(O)&&Sl(O)==Ft}function C0(O){return Hs(O)&&Sl(O)==Se}function nc(O,P,q,ie,fe){return O===P?!0:O==null||P==null||!Hs(O)&&!Hs(P)?O!==O&&P!==P:ci(O,P,q,ie,nc,fe)}function ci(O,P,q,ie,fe,we){var He=Bi(O),tt=Bi(P),bt=He?le:pn(O),bn=tt?le:pn(P);bt=bt==ne?At:bt,bn=bn==ne?At:bn;var xn=bt==At,Bn=bn==At,xr=bt==bn;if(xr&&qv(O)){if(!qv(P))return!1;He=!0,xn=!1}if(xr&&!xn)return we||(we=new Fc),He||Zv(O)?I0(O,P,q,ie,fe,we):BS(O,P,bt,q,ie,fe,we);if(!(q&p)){var Jr=xn&&Ca.call(O,"__wrapped__"),Ei=Bn&&Ca.call(P,"__wrapped__");if(Jr||Ei){var ha=Jr?O.value():O,xi=Ei?P.value():P;return we||(we=new Fc),fe(ha,xi,q,ie,we)}}return xr?(we||(we=new Fc),O1(O,P,q,ie,fe,we)):!1}function Na(O){return Hs(O)&&pn(O)==xt}function no(O,P,q,ie){var fe=q.length,we=fe,He=!ie;if(O==null)return!we;for(O=Ka(O);fe--;){var tt=q[fe];if(He&&tt[2]?tt[1]!==O[tt[0]]:!(tt[0]in O))return!1}for(;++fe<we;){tt=q[fe];var bt=tt[0],bn=O[bt],xn=tt[1];if(He&&tt[2]){if(bn===n&&!(bt in O))return!1}else{var Bn=new Fc;if(ie)var xr=ie(bn,xn,bt,O,P,Bn);if(!(xr===n?nc(xn,bn,p|g,ie,Bn):xr))return!1}}return!0}function sd(O){if(!vs(O)||Kr(O))return!1;var P=Pf(O)?ug:Mr;return P.test(fa(O))}function ch(O){return Hs(O)&&Sl(O)==Wn}function mu(O){return Hs(O)&&pn(O)==Sn}function uh(O){return Hs(O)&&YS(O.length)&&!!Za[Sl(O)]}function $u(O){return typeof O=="function"?O:O==null?xu:typeof O=="object"?Bi(O)?rp(O[0],O[1]):Mv(O):_e(O)}function Sf(O){if(!fn(O))return xv(O);var P=[];for(var q in Ka(O))Ca.call(O,q)&&q!="constructor"&&P.push(q);return P}function d1(O){if(!vs(O))return ni(O);var P=fn(O),q=[];for(var ie in O)ie=="constructor"&&(P||!Ca.call(O,ie))||q.push(ie);return q}function ro(O,P){return O<P}function Rv(O,P){var q=-1,ie=Vu(O)?Ut(O.length):[];return xf(O,function(fe,we,He){ie[++q]=P(fe,we,He)}),ie}function Mv(O){var P=dn(O);return P.length==1&&P[0][2]?qr(P[0][0],P[0][1]):function(q){return q===O||no(q,O,P)}}function rp(O,P){return Vt(O)&&Ht(P)?qr($a(O),P):function(q){var ie=Kv(q,O);return ie===n&&ie===P?jO(q,O):nc(P,ie,p|g)}}function fh(O,P,q,ie,fe){O!==P&&np(P,function(we,He){if(fe||(fe=new Fc),vs(we))dO(O,P,He,q,fh,ie,fe);else{var tt=ie?ie(yi(O,He),we,He+"",O,P,fe):n;tt===n&&(tt=we),mg(O,He,tt)}},Xu)}function dO(O,P,q,ie,fe,we,He){var tt=yi(O,q),bt=yi(P,q),bn=He.get(bt);if(bn){mg(O,q,bn);return}var xn=we?we(tt,bt,q+"",O,P,He):n,Bn=xn===n;if(Bn){var xr=Bi(bt),Jr=!xr&&qv(bt),Ei=!xr&&!Jr&&Zv(bt);xn=bt,xr||Jr||Ei?Bi(tt)?xn=tt:nl(tt)?xn=rc(tt):Jr?(Bn=!1,xn=v1(bt,!0)):Ei?(Bn=!1,xn=Fb(bt,!0)):xn=[]:Jb(bt)||F0(bt)?(xn=tt,F0(tt)?xn=XS(tt):(!vs(tt)||Pf(tt))&&(xn=gn(bt))):Bn=!1}Bn&&(He.set(bt,xn),fe(xn,bt,ie,we,He),He.delete(bt)),mg(O,q,xn)}function p1(O,P){var q=O.length;if(q)return P+=P<0?q:0,sn(P,q)?O[P]:n}function R0(O,P,q){P.length?P=Zo(P,function(we){return Bi(we)?function(He){return zu(He,we.length===1?we[0]:we)}:we}):P=[xu];var ie=-1;P=Zo(P,Ql(Qe()));var fe=Rv(O,function(we,He,tt){var bt=Zo(P,function(bn){return bn(we)});return{criteria:bt,index:++ie,value:we}});return mS(fe,function(we,He){return NS(we,He,q)})}function g1(O,P){return Bl(O,P,function(q,ie){return jO(O,ie)})}function Bl(O,P,q){for(var ie=-1,fe=P.length,we={};++ie<fe;){var He=P[ie],tt=zu(O,He);q(tt,He)&&Iv(we,Ul(He,O),tt)}return we}function Ts(O){return function(P){return zu(P,O)}}function Tf(O,P,q,ie){var fe=ie?qy:Vd,we=-1,He=P.length,tt=O;for(O===P&&(P=rc(P)),q&&(tt=Zo(O,Ql(q)));++we<He;)for(var bt=0,bn=P[we],xn=q?q(bn):bn;(bt=fe(tt,xn,bt,ie))>-1;)tt!==O&&xc.call(tt,bt,1),xc.call(O,bt,1);return O}function Pv(O,P){for(var q=O?P.length:0,ie=q-1;q--;){var fe=P[q];if(q==ie||fe!==we){var we=fe;sn(fe)?xc.call(O,fe,1):ip(O,fe)}}return O}function Nv(O,P){return O+_0(ih()*(P-O+1))}function Ib(O,P,q,ie){for(var fe=-1,we=Qa(dg((P-O)/(q||1)),0),He=Ut(we);we--;)He[ie?we:++fe]=O,O+=q;return He}function Hu(O,P){var q="";if(!O||P<1||P>k)return q;do P%2&&(q+=O),P=_0(P/2),P&&(O+=O);while(P);return q}function ji(O,P){return Ba(ui(O,P,xu),O+"")}function Lb(O){return S0(j1(O))}function kb(O,P){var q=j1(O);return ko(q,du(P,0,q.length))}function Iv(O,P,q,ie){if(!vs(O))return O;P=Ul(P,O);for(var fe=-1,we=P.length,He=we-1,tt=O;tt!=null&&++fe<we;){var bt=$a(P[fe]),bn=q;if(bt==="__proto__"||bt==="constructor"||bt==="prototype")return O;if(fe!=He){var xn=tt[bt];bn=ie?ie(xn,bt,tt):n,bn===n&&(bn=vs(xn)?xn:sn(P[fe+1])?[]:{})}_f(tt,bt,bn),tt=tt[bt]}return O}var Db=xs?function(O,P){return xs.set(O,P),O}:xu,RS=Uu?function(O,P){return Uu(O,"toString",{configurable:!0,enumerable:!1,value:$1(P),writable:!0})}:xu;function MS(O){return ko(j1(O))}function yu(O,P,q){var ie=-1,fe=O.length;P<0&&(P=-P>fe?0:fe+P),q=q>fe?fe:q,q<0&&(q+=fe),fe=P>q?0:q-P>>>0,P>>>=0;for(var we=Ut(fe);++ie<fe;)we[ie]=O[ie+P];return we}function PS(O,P){var q;return xf(O,function(ie,fe,we){return q=P(ie,fe,we),!q}),!!q}function Lv(O,P,q){var ie=0,fe=O==null?ie:O.length;if(typeof P=="number"&&P===P&&fe<=ee){for(;ie<fe;){var we=ie+fe>>>1,He=O[we];He!==null&&!Yu(He)&&(q?He<=P:He<P)?ie=we+1:fe=we}return fe}return kv(O,P,xu,q)}function kv(O,P,q,ie){var fe=0,we=O==null?0:O.length;if(we===0)return 0;P=q(P);for(var He=P!==P,tt=P===null,bt=Yu(P),bn=P===n;fe<we;){var xn=_0((fe+we)/2),Bn=q(O[xn]),xr=Bn!==n,Jr=Bn===null,Ei=Bn===Bn,ha=Yu(Bn);if(He)var xi=ie||Ei;else bn?xi=Ei&&(ie||xr):tt?xi=Ei&&xr&&(ie||!Jr):bt?xi=Ei&&xr&&!Jr&&(ie||!ha):Jr||ha?xi=!1:xi=ie?Bn<=P:Bn<P;xi?fe=xn+1:we=xn}return ss(we,Q)}function M0(O,P){for(var q=-1,ie=O.length,fe=0,we=[];++q<ie;){var He=O[q],tt=P?P(He):He;if(!q||!Mf(tt,bt)){var bt=tt;we[fe++]=He===0?0:He}}return we}function Dv(O){return typeof O=="number"?O:Yu(O)?j:+O}function Fl(O){if(typeof O=="string")return O;if(Bi(O))return Zo(O,Fl)+"";if(Yu(O))return Kd?Kd.call(O):"";var P=O+"";return P=="0"&&1/O==-M?"-0":P}function Af(O,P,q){var ie=-1,fe=Vy,we=O.length,He=!0,tt=[],bt=tt;if(q)He=!1,fe=gv;else if(we>=i){var bn=P?null:DS(O);if(bn)return Xh(bn);He=!1,fe=ig,bt=new gg}else bt=P?[]:tt;e:for(;++ie<we;){var xn=O[ie],Bn=P?P(xn):xn;if(xn=q||xn!==0?xn:0,He&&Bn===Bn){for(var xr=bt.length;xr--;)if(bt[xr]===Bn)continue e;P&&bt.push(Bn),tt.push(xn)}else fe(bt,Bn,q)||(bt!==tt&&bt.push(Bn),tt.push(xn))}return tt}function ip(O,P){return P=Ul(P,O),O=zi(O,P),O==null||delete O[$a(ht(P))]}function Bv(O,P,q,ie){return Iv(O,P,q(zu(O,P)),ie)}function ap(O,P,q,ie){for(var fe=O.length,we=ie?fe:-1;(ie?we--:++we<fe)&&P(O[we],we,O););return q?yu(O,ie?0:we,ie?we+1:fe):yu(O,ie?we+1:0,ie?fe:we)}function P0(O,P){var q=O;return q instanceof Ui&&(q=q.value()),Yy(P,function(ie,fe){return fe.func.apply(fe.thisArg,Wd([ie],fe.args))},q)}function xg(O,P,q){var ie=O.length;if(ie<2)return ie?Af(O[0]):[];for(var fe=-1,we=Ut(ie);++fe<ie;)for(var He=O[fe],tt=-1;++tt<ie;)tt!=fe&&(we[fe]=jc(we[fe]||He,O[tt],P,q));return Af($s(we,1),P,q)}function Fv(O,P,q){for(var ie=-1,fe=O.length,we=P.length,He={};++ie<fe;){var tt=ie<we?P[ie]:n;q(He,O[ie],tt)}return He}function Uv(O){return nl(O)?O:[]}function op(O){return typeof O=="function"?O:xu}function Ul(O,P){return Bi(O)?O:Vt(O,P)?[O]:As(io(O))}var jv=ji;function Tc(O,P,q){var ie=O.length;return q=q===n?ie:q,!P&&q>=ie?O:yu(O,P,q)}var ld=SS||function(O){return el.clearTimeout(O)};function v1(O,P){if(P)return O.slice();var q=O.length,ie=Zh?Zh(q):new O.constructor(q);return O.copy(ie),ie}function cd(O){var P=new O.constructor(O.byteLength);return new hg(P).set(new hg(O)),P}function Sg(O,P){var q=P?cd(O.buffer):O.buffer;return new O.constructor(q,O.byteOffset,O.byteLength)}function Bb(O){var P=new O.constructor(O.source,Hr.exec(O));return P.lastIndex=O.lastIndex,P}function m1(O){return pg?Ka(pg.call(O)):{}}function Fb(O,P){var q=P?cd(O.buffer):O.buffer;return new O.constructor(q,O.byteOffset,O.length)}function Ub(O,P){if(O!==P){var q=O!==n,ie=O===null,fe=O===O,we=Yu(O),He=P!==n,tt=P===null,bt=P===P,bn=Yu(P);if(!tt&&!bn&&!we&&O>P||we&&He&&bt&&!tt&&!bn||ie&&He&&bt||!q&&bt||!fe)return 1;if(!ie&&!we&&!bn&&O<P||bn&&q&&fe&&!ie&&!we||tt&&q&&fe||!He&&fe||!bt)return-1}return 0}function NS(O,P,q){for(var ie=-1,fe=O.criteria,we=P.criteria,He=fe.length,tt=q.length;++ie<He;){var bt=Ub(fe[ie],we[ie]);if(bt){if(ie>=tt)return bt;var bn=q[ie];return bt*(bn=="desc"?-1:1)}}return O.index-P.index}function wf(O,P,q,ie){for(var fe=-1,we=O.length,He=q.length,tt=-1,bt=P.length,bn=Qa(we-He,0),xn=Ut(bt+bn),Bn=!ie;++tt<bt;)xn[tt]=P[tt];for(;++fe<He;)(Bn||fe<we)&&(xn[q[fe]]=O[fe]);for(;bn--;)xn[tt++]=O[fe++];return xn}function y1(O,P,q,ie){for(var fe=-1,we=O.length,He=-1,tt=q.length,bt=-1,bn=P.length,xn=Qa(we-tt,0),Bn=Ut(xn+bn),xr=!ie;++fe<xn;)Bn[fe]=O[fe];for(var Jr=fe;++bt<bn;)Bn[Jr+bt]=P[bt];for(;++He<tt;)(xr||fe<we)&&(Bn[Jr+q[He]]=O[fe++]);return Bn}function rc(O,P){var q=-1,ie=O.length;for(P||(P=Ut(ie));++q<ie;)P[q]=O[q];return P}function _u(O,P,q,ie){var fe=!q;q||(q={});for(var we=-1,He=P.length;++we<He;){var tt=P[we],bt=ie?ie(q[tt],O[tt],tt,q,O):n;bt===n&&(bt=O[tt]),fe?Uc(q,tt,bt):_f(q,tt,bt)}return q}function IS(O,P){return _u(O,yn(O),P)}function jb(O,P){return _u(O,En(O),P)}function _1(O,P){return function(q,ie){var fe=Bi(q)?pS:yg,we=P?P():{};return fe(q,O,Qe(ie,2),we)}}function jl(O){return ji(function(P,q){var ie=-1,fe=q.length,we=fe>1?q[fe-1]:n,He=fe>2?q[2]:n;for(we=O.length>3&&typeof we=="function"?(fe--,we):n,He&&Mn(q[0],q[1],He)&&(we=fe<3?n:we,fe=1),P=Ka(P);++ie<fe;){var tt=q[ie];tt&&O(P,tt,ie,we)}return P})}function b1(O,P){return function(q,ie){if(q==null)return q;if(!Vu(q))return O(q,ie);for(var fe=q.length,we=P?fe:-1,He=Ka(q);(P?we--:++we<fe)&&ie(He[we],we,He)!==!1;);return q}}function sp(O){return function(P,q,ie){for(var fe=-1,we=Ka(P),He=ie(P),tt=He.length;tt--;){var bt=He[O?tt:++fe];if(q(we[bt],bt,we)===!1)break}return P}}function hh(O,P,q){var ie=P&v,fe=lp(O);function we(){var He=this&&this!==el&&this instanceof we?fe:O;return He.apply(ie?q:this,arguments)}return we}function E1(O){return function(P){P=io(P);var q=qd(P)?os(P):n,ie=q?q[0]:P.charAt(0),fe=q?Tc(q,1).join(""):P.slice(1);return ie[O]()+fe}}function ud(O){return function(P){return Yy(p3(z1(P).replace(_b,"")),O,"")}}function lp(O){return function(){var P=arguments;switch(P.length){case 0:return new O;case 1:return new O(P[0]);case 2:return new O(P[0],P[1]);case 3:return new O(P[0],P[1],P[2]);case 4:return new O(P[0],P[1],P[2],P[3]);case 5:return new O(P[0],P[1],P[2],P[3],P[4]);case 6:return new O(P[0],P[1],P[2],P[3],P[4],P[5]);case 7:return new O(P[0],P[1],P[2],P[3],P[4],P[5],P[6])}var q=Qd(O.prototype),ie=O.apply(q,P);return vs(ie)?ie:q}}function LS(O,P,q){var ie=lp(O);function fe(){for(var we=arguments.length,He=Ut(we),tt=we,bt=Ct(fe);tt--;)He[tt]=arguments[tt];var bn=we<3&&He[0]!==bt&&He[we-1]!==bt?[]:rh(He,bt);if(we-=bn.length,we<q)return T1(O,P,uo,fe.placeholder,n,He,bn,n,n,q-we);var xn=this&&this!==el&&this instanceof fe?ie:O;return bl(xn,this,He)}return fe}function Ac(O){return function(P,q,ie){var fe=Ka(P);if(!Vu(P)){var we=Qe(q,3);P=ac(P),q=function(tt){return we(fe[tt],tt,fe)}}var He=O(P,q,ie);return He>-1?fe[we?P[He]:He]:n}}function bu(O){return dh(function(P){var q=P.length,ie=q,fe=Bc.prototype.thru;for(O&&P.reverse();ie--;){var we=P[ie];if(typeof we!="function")throw new ou(o);if(fe&&!He&&ut(we)=="wrapper")var He=new Bc([],!0)}for(ie=He?ie:q;++ie<q;){we=P[ie];var tt=ut(we),bt=tt=="wrapper"?De(we):n;bt&&vr(bt[0])&&bt[1]==(w|E|T|C)&&!bt[4].length&&bt[9]==1?He=He[ut(bt[0])].apply(He,bt[3]):He=we.length==1&&vr(we)?He[tt]():He.thru(we)}return function(){var bn=arguments,xn=bn[0];if(He&&bn.length==1&&Bi(xn))return He.plant(xn).value();for(var Bn=0,xr=q?P[Bn].apply(this,bn):xn;++Bn<q;)xr=P[Bn].call(this,xr);return xr}})}function uo(O,P,q,ie,fe,we,He,tt,bt,bn){var xn=P&w,Bn=P&v,xr=P&y,Jr=P&(E|x),Ei=P&D,ha=xr?n:lp(O);function xi(){for(var Ra=arguments.length,Fa=Ut(Ra),hd=Ra;hd--;)Fa[hd]=arguments[hd];if(Jr)var If=Ct(xi),dd=ag(Fa,If);if(ie&&(Fa=wf(Fa,ie,fe,Jr)),we&&(Fa=y1(Fa,we,He,Jr)),Ra-=dd,Jr&&Ra<bn){var $l=rh(Fa,If);return T1(O,P,uo,xi.placeholder,q,Fa,$l,tt,bt,bn-Ra)}var Cg=Bn?q:this,j0=xr?Cg[O]:O;return Ra=Fa.length,tt?Fa=xo(Fa,tt):Ei&&Ra>1&&Fa.reverse(),xn&&bt<Ra&&(Fa.length=bt),this&&this!==el&&this instanceof xi&&(j0=ha||lp(j0)),j0.apply(Cg,Fa)}return xi}function Tl(O,P){return function(q,ie){return Nb(q,O,P(ie),{})}}function zv(O,P){return function(q,ie){var fe;if(q===n&&ie===n)return P;if(q!==n&&(fe=q),ie!==n){if(fe===n)return ie;typeof q=="string"||typeof ie=="string"?(q=Fl(q),ie=Fl(ie)):(q=Dv(q),ie=Dv(ie)),fe=O(q,ie)}return fe}}function x1(O){return dh(function(P){return P=Zo(P,Ql(Qe())),ji(function(q){var ie=this;return O(P,function(fe){return bl(fe,ie,q)})})})}function cp(O,P){P=P===n?" ":Fl(P);var q=P.length;if(q<2)return q?Hu(P,O):P;var ie=Hu(P,dg(O/mv(P)));return qd(P)?Tc(os(ie),0,O).join(""):ie.slice(0,O)}function kS(O,P,q,ie){var fe=P&v,we=lp(O);function He(){for(var tt=-1,bt=arguments.length,bn=-1,xn=ie.length,Bn=Ut(xn+bt),xr=this&&this!==el&&this instanceof He?we:O;++bn<xn;)Bn[bn]=ie[bn];for(;bt--;)Bn[bn++]=arguments[++tt];return bl(xr,fe?q:this,Bn)}return He}function S1(O){return function(P,q,ie){return ie&&typeof ie!="number"&&Mn(P,q,ie)&&(q=ie=n),P=wg(P),q===n?(q=P,P=0):q=wg(q),ie=ie===n?P<q?1:-1:wg(ie),Ib(P,q,ie,O)}}function $v(O){return function(P,q){return typeof P=="string"&&typeof q=="string"||(P=Nf(P),q=Nf(q)),O(P,q)}}function T1(O,P,q,ie,fe,we,He,tt,bt,bn){var xn=P&E,Bn=xn?He:n,xr=xn?n:He,Jr=xn?we:n,Ei=xn?n:we;P|=xn?T:S,P&=~(xn?S:T),P&_||(P&=-4);var ha=[O,P,fe,Jr,Bn,Ei,xr,tt,bt,bn],xi=q.apply(n,ha);return vr(O)&&Oi(xi,ha),xi.placeholder=ie,fo(xi,O,P)}function N0(O){var P=Qo[O];return function(q,ie){if(q=Nf(q),ie=ie==null?0:ss(bi(ie),292),ie&&cu(q)){var fe=(io(q)+"e").split("e"),we=P(fe[0]+"e"+(+fe[1]+ie));return fe=(io(we)+"e").split("e"),+(fe[0]+"e"+(+fe[1]-ie))}return P(q)}}var DS=ed&&1/Xh(new ed([,-0]))[1]==M?function(O){return new ed(O)}:A;function zb(O){return function(P){var q=pn(P);return q==xt?p0(P):q==Sn?Ab(P):yS(P,O(P))}}function wc(O,P,q,ie,fe,we,He,tt){var bt=P&y;if(!bt&&typeof O!="function")throw new ou(o);var bn=ie?ie.length:0;if(bn||(P&=-97,ie=fe=n),He=He===n?He:Qa(bi(He),0),tt=tt===n?tt:bi(tt),bn-=fe?fe.length:0,P&S){var xn=ie,Bn=fe;ie=fe=n}var xr=bt?n:De(O),Jr=[O,P,q,ie,fe,xn,Bn,we,He,tt];if(xr&&pr(Jr,xr),O=Jr[0],P=Jr[1],q=Jr[2],ie=Jr[3],fe=Jr[4],tt=Jr[9]=Jr[9]===n?bt?0:O.length:Qa(Jr[9]-bn,0),!tt&&P&(E|x)&&(P&=-25),!P||P==v)var Ei=hh(O,P,q);else P==E||P==x?Ei=LS(O,P,tt):(P==T||P==(v|T))&&!fe.length?Ei=kS(O,P,q,ie):Ei=uo.apply(n,Jr);var ha=xr?Db:Oi;return fo(ha(Ei,Jr),O,P)}function A1(O,P,q,ie){return O===n||Mf(O,lg[q])&&!Ca.call(ie,q)?P:O}function w1(O,P,q,ie,fe,we){return vs(O)&&vs(P)&&(we.set(P,O),fh(O,P,n,w1,we),we.delete(P)),O}function $b(O){return Jb(O)?n:O}function I0(O,P,q,ie,fe,we){var He=q&p,tt=O.length,bt=P.length;if(tt!=bt&&!(He&&bt>tt))return!1;var bn=we.get(O),xn=we.get(P);if(bn&&xn)return bn==P&&xn==O;var Bn=-1,xr=!0,Jr=q&g?new gg:n;for(we.set(O,P),we.set(P,O);++Bn<tt;){var Ei=O[Bn],ha=P[Bn];if(ie)var xi=He?ie(ha,Ei,Bn,P,O,we):ie(Ei,ha,Bn,O,P,we);if(xi!==n){if(xi)continue;xr=!1;break}if(Jr){if(!Xy(P,function(Ra,Fa){if(!ig(Jr,Fa)&&(Ei===Ra||fe(Ei,Ra,q,ie,we)))return Jr.push(Fa)})){xr=!1;break}}else if(!(Ei===ha||fe(Ei,ha,q,ie,we))){xr=!1;break}}return we.delete(O),we.delete(P),xr}function BS(O,P,q,ie,fe,we,He){switch(q){case An:if(O.byteLength!=P.byteLength||O.byteOffset!=P.byteOffset)return!1;O=O.buffer,P=P.buffer;case Ft:return!(O.byteLength!=P.byteLength||!we(new hg(O),new hg(P)));case ve:case Se:case dt:return Mf(+O,+P);case Xe:return O.name==P.name&&O.message==P.message;case Wn:case In:return O==P+"";case xt:var tt=p0;case Sn:var bt=ie&p;if(tt||(tt=Xh),O.size!=P.size&&!bt)return!1;var bn=He.get(O);if(bn)return bn==P;ie|=g,He.set(O,P);var xn=I0(tt(O),tt(P),ie,fe,we,He);return He.delete(O),xn;case de:if(pg)return pg.call(O)==pg.call(P)}return!1}function O1(O,P,q,ie,fe,we){var He=q&p,tt=ae(O),bt=tt.length,bn=ae(P),xn=bn.length;if(bt!=xn&&!He)return!1;for(var Bn=bt;Bn--;){var xr=tt[Bn];if(!(He?xr in P:Ca.call(P,xr)))return!1}var Jr=we.get(O),Ei=we.get(P);if(Jr&&Ei)return Jr==P&&Ei==O;var ha=!0;we.set(O,P),we.set(P,O);for(var xi=He;++Bn<bt;){xr=tt[Bn];var Ra=O[xr],Fa=P[xr];if(ie)var hd=He?ie(Fa,Ra,xr,P,O,we):ie(Ra,Fa,xr,O,P,we);if(!(hd===n?Ra===Fa||fe(Ra,Fa,q,ie,we):hd)){ha=!1;break}xi||(xi=xr=="constructor")}if(ha&&!xi){var If=O.constructor,dd=P.constructor;If!=dd&&"constructor"in O&&"constructor"in P&&!(typeof If=="function"&&If instanceof If&&typeof dd=="function"&&dd instanceof dd)&&(ha=!1)}return we.delete(O),we.delete(P),ha}function dh(O){return Ba(ui(O,n,be),O+"")}function ae(O){return O0(O,ac,yn)}function Ee(O){return O0(O,Xu,En)}var De=xs?function(O){return xs.get(O)}:A;function ut(O){for(var P=O.name+"",q=za[P],ie=Ca.call(za,P)?q.length:0;ie--;){var fe=q[ie],we=fe.func;if(we==null||we==O)return fe.name}return P}function Ct(O){var P=Ca.call(ye,"placeholder")?ye:O;return P.placeholder}function Qe(){var O=ye.iteratee||sE;return O=O===sE?$u:O,arguments.length?O(arguments[0],arguments[1]):O}function Pt(O,P){var q=O.__data__;return Dn(P)?q[typeof P=="string"?"string":"hash"]:q.map}function dn(O){for(var P=ac(O),q=P.length;q--;){var ie=P[q],fe=O[ie];P[q]=[ie,fe,Ht(fe)]}return P}function cn(O,P){var q=Tb(O,P);return sd(q)?q:n}function Pn(O){var P=Ca.call(O,Kh),q=O[Kh];try{O[Kh]=n;var ie=!0}catch{}var fe=Ec.call(O);return ie&&(P?O[Kh]=q:delete O[Kh]),fe}var yn=Ev?function(O){return O==null?[]:(O=Ka(O),Gd(Ev(O),function(P){return bv.call(O,P)}))}:vn,En=Ev?function(O){for(var P=[];O;)Wd(P,yn(O)),O=co(O);return P}:vn,pn=Sl;(hu&&pn(new hu(new ArrayBuffer(1)))!=An||Dc&&pn(new Dc)!=xt||b0&&pn(b0.resolve())!=zt||ed&&pn(new ed)!=Sn||Zd&&pn(new Zd)!=zr)&&(pn=function(O){var P=Sl(O),q=P==At?O.constructor:n,ie=q?fa(q):"";if(ie)switch(ie){case Li:return An;case ah:return xt;case xl:return zt;case Sv:return Sn;case td:return zr}return P});function un(O,P,q){for(var ie=-1,fe=q.length;++ie<fe;){var we=q[ie],He=we.size;switch(we.type){case"drop":O+=He;break;case"dropRight":P-=He;break;case"take":P=ss(P,O+He);break;case"takeRight":O=Qa(O,P-He);break}}return{start:O,end:P}}function Tn(O){var P=O.match(_t);return P?P[1].split(Jt):[]}function ot(O,P,q){P=Ul(P,O);for(var ie=-1,fe=P.length,we=!1;++ie<fe;){var He=$a(P[ie]);if(!(we=O!=null&&q(O,He)))break;O=O[He]}return we||++ie!=fe?we:(fe=O==null?0:O.length,!!fe&&YS(fe)&&sn(He,fe)&&(Bi(O)||F0(O)))}function wt(O){var P=O.length,q=new O.constructor(P);return P&&typeof O[0]=="string"&&Ca.call(O,"index")&&(q.index=O.index,q.input=O.input),q}function gn(O){return typeof O.constructor=="function"&&!fn(O)?Qd(co(O)):{}}function zn(O,P,q){var ie=O.constructor;switch(P){case Ft:return cd(O);case ve:case Se:return new ie(+O);case An:return Sg(O,q);case wn:case $n:case Vr:case Tr:case Rr:case ei:case va:case pi:case qo:return Fb(O,q);case xt:return new ie;case dt:case In:return new ie(O);case Wn:return Bb(O);case Sn:return new ie;case de:return m1(O)}}function Xt(O,P){var q=P.length;if(!q)return O;var ie=q-1;return P[ie]=(q>1?"& ":"")+P[ie],P=P.join(q>2?", ":" "),O.replace(kn,`{
/* [wrapped with `+P+`] */
`)}function Zn(O){return Bi(O)||F0(O)||!!(Ob&&O&&O[Ob])}function sn(O,P){var q=typeof O;return P=P??k,!!P&&(q=="number"||q!="symbol"&&ia.test(O))&&O>-1&&O%1==0&&O<P}function Mn(O,P,q){if(!vs(q))return!1;var ie=typeof P;return(ie=="number"?Vu(q)&&sn(P,q.length):ie=="string"&&P in q)?Mf(q[P],O):!1}function Vt(O,P){if(Bi(O))return!1;var q=typeof O;return q=="number"||q=="symbol"||q=="boolean"||O==null||Yu(O)?!0:me.test(O)||!pe.test(O)||P!=null&&O in Ka(P)}function Dn(O){var P=typeof O;return P=="string"||P=="number"||P=="symbol"||P=="boolean"?O!=="__proto__":O===null}function vr(O){var P=ut(O),q=ye[P];if(typeof q!="function"||!(P in Ui.prototype))return!1;if(O===q)return!0;var ie=De(q);return!!ie&&O===ie[0]}function Kr(O){return!!qh&&qh in O}var Un=cg?Pf:It;function fn(O){var P=O&&O.constructor,q=typeof P=="function"&&P.prototype||lg;return O===q}function Ht(O){return O===O&&!vs(O)}function qr(O,P){return function(q){return q==null?!1:q[O]===P&&(P!==n||O in Ka(q))}}function ki(O){var P=qb(O,function(ie){return q.size===c&&q.clear(),ie}),q=P.cache;return P}function pr(O,P){var q=O[1],ie=P[1],fe=q|ie,we=fe<(v|y|w),He=ie==w&&q==E||ie==w&&q==C&&O[7].length<=P[8]||ie==(w|C)&&P[7].length<=P[8]&&q==E;if(!(we||He))return O;ie&v&&(O[2]=P[2],fe|=q&v?0:_);var tt=P[3];if(tt){var bt=O[3];O[3]=bt?wf(bt,tt,P[4]):tt,O[4]=bt?rh(O[3],u):P[4]}return tt=P[5],tt&&(bt=O[5],O[5]=bt?y1(bt,tt,P[6]):tt,O[6]=bt?rh(O[5],u):P[6]),tt=P[7],tt&&(O[7]=tt),ie&w&&(O[8]=O[8]==null?P[8]:ss(O[8],P[8])),O[9]==null&&(O[9]=P[9]),O[0]=P[0],O[1]=fe,O}function ni(O){var P=[];if(O!=null)for(var q in Ka(O))P.push(q);return P}function Qr(O){return Ec.call(O)}function ui(O,P,q){return P=Qa(P===n?O.length-1:P,0),function(){for(var ie=arguments,fe=-1,we=Qa(ie.length-P,0),He=Ut(we);++fe<we;)He[fe]=ie[P+fe];fe=-1;for(var tt=Ut(P+1);++fe<P;)tt[fe]=ie[fe];return tt[P]=q(He),bl(O,this,tt)}}function zi(O,P){return P.length<2?O:zu(O,yu(P,0,-1))}function xo(O,P){for(var q=O.length,ie=ss(P.length,q),fe=rc(O);ie--;){var we=P[ie];O[ie]=sn(we,q)?fe[we]:n}return O}function yi(O,P){if(!(P==="constructor"&&typeof O[P]=="function")&&P!="__proto__")return O[P]}var Oi=Ja(Db),Lo=Qh||function(O,P){return el.setTimeout(O,P)},Ba=Ja(RS);function fo(O,P,q){var ie=P+"";return Ba(O,Xt(ie,li(Tn(ie),q)))}function Ja(O){var P=0,q=0;return function(){var ie=uu(),fe=U-(ie-q);if(q=ie,fe>0){if(++P>=I)return arguments[0]}else P=0;return O.apply(n,arguments)}}function ko(O,P){var q=-1,ie=O.length,fe=ie-1;for(P=P===n?ie:P;++q<P;){var we=Nv(q,fe),He=O[we];O[we]=O[q],O[q]=He}return O.length=P,O}var As=ki(function(O){var P=[];return O.charCodeAt(0)===46&&P.push(""),O.replace(Ce,function(q,ie,fe,we){P.push(fe?we.replace(_n,"$1"):ie||q)}),P});function $a(O){if(typeof O=="string"||Yu(O))return O;var P=O+"";return P=="0"&&1/O==-M?"-0":P}function fa(O){if(O!=null){try{return i1.call(O)}catch{}try{return O+""}catch{}}return""}function li(O,P){return tl(re,function(q){var ie="_."+q[0];P&q[1]&&!Vy(O,ie)&&O.push(ie)}),O.sort()}function ws(O){if(O instanceof Ui)return O.clone();var P=new Bc(O.__wrapped__,O.__chain__);return P.__actions__=rc(O.__actions__),P.__index__=O.__index__,P.__values__=O.__values__,P}function oa(O,P,q){(q?Mn(O,P,q):P===n)?P=1:P=Qa(bi(P),0);var ie=O==null?0:O.length;if(!ie||P<1)return[];for(var fe=0,we=0,He=Ut(dg(ie/P));fe<ie;)He[we++]=yu(O,fe,fe+=P);return He}function kr(O){for(var P=-1,q=O==null?0:O.length,ie=0,fe=[];++P<q;){var we=O[P];we&&(fe[ie++]=we)}return fe}function vi(){var O=arguments.length;if(!O)return[];for(var P=Ut(O-1),q=arguments[0],ie=O;ie--;)P[ie-1]=arguments[ie];return Wd(Bi(q)?rc(q):[q],$s(P,1))}var Di=ji(function(O,P){return nl(O)?jc(O,$s(P,1,nl,!0)):[]}),Jo=ji(function(O,P){var q=ht(P);return nl(q)&&(q=n),nl(O)?jc(O,$s(P,1,nl,!0),Qe(q,2)):[]}),Al=ji(function(O,P){var q=ht(P);return nl(q)&&(q=n),nl(O)?jc(O,$s(P,1,nl,!0),n,q):[]});function Me(O,P,q){var ie=O==null?0:O.length;return ie?(P=q||P===n?1:bi(P),yu(O,P<0?0:P,ie)):[]}function St(O,P,q){var ie=O==null?0:O.length;return ie?(P=q||P===n?1:bi(P),P=ie-P,yu(O,0,P<0?0:P)):[]}function vt(O,P){return O&&O.length?ap(O,Qe(P,3),!0,!0):[]}function Nn(O,P){return O&&O.length?ap(O,Qe(P,3),!0):[]}function _i(O,P,q,ie){var fe=O==null?0:O.length;return fe?(q&&typeof q!="number"&&Mn(O,P,q)&&(q=0,ie=fe),_g(O,P,q,ie)):[]}function Ia(O,P,q){var ie=O==null?0:O.length;if(!ie)return-1;var fe=q==null?0:bi(q);return fe<0&&(fe=Qa(ie+fe,0)),nh(O,Qe(P,3),fe)}function ge(O,P,q){var ie=O==null?0:O.length;if(!ie)return-1;var fe=ie-1;return q!==n&&(fe=bi(q),fe=q<0?Qa(ie+fe,0):ss(fe,ie-1)),nh(O,Qe(P,3),fe,!0)}function be(O){var P=O==null?0:O.length;return P?$s(O,1):[]}function Ie(O){var P=O==null?0:O.length;return P?$s(O,M):[]}function gt(O,P){var q=O==null?0:O.length;return q?(P=P===n?1:bi(P),$s(O,P)):[]}function yt(O){for(var P=-1,q=O==null?0:O.length,ie={};++P<q;){var fe=O[P];ie[fe[0]]=fe[1]}return ie}function je(O){return O&&O.length?O[0]:n}function qe(O,P,q){var ie=O==null?0:O.length;if(!ie)return-1;var fe=q==null?0:bi(q);return fe<0&&(fe=Qa(ie+fe,0)),Vd(O,P,fe)}function Ke(O){var P=O==null?0:O.length;return P?yu(O,0,-1):[]}var Ne=ji(function(O){var P=Zo(O,Uv);return P.length&&P[0]===O[0]?Cv(P):[]}),Ue=ji(function(O){var P=ht(O),q=Zo(O,Uv);return P===ht(q)?P=n:q.pop(),q.length&&q[0]===O[0]?Cv(q,Qe(P,2)):[]}),xe=ji(function(O){var P=ht(O),q=Zo(O,Uv);return P=typeof P=="function"?P:n,P&&q.pop(),q.length&&q[0]===O[0]?Cv(q,n,P):[]});function Ye(O,P){return O==null?"":Jh.call(O,P)}function ht(O){var P=O==null?0:O.length;return P?O[P-1]:n}function Dt(O,P,q){var ie=O==null?0:O.length;if(!ie)return-1;var fe=ie;return q!==n&&(fe=bi(q),fe=fe<0?Qa(ie+fe,0):ss(fe,ie-1)),P===P?g0(O,P,fe):nh(O,vv,fe,!0)}function Kt(O,P){return O&&O.length?p1(O,bi(P)):n}var Wt=ji(on);function on(O,P){return O&&O.length&&P&&P.length?Tf(O,P):O}function gr(O,P,q){return O&&O.length&&P&&P.length?Tf(O,P,Qe(q,2)):O}function oi(O,P,q){return O&&O.length&&P&&P.length?Tf(O,P,n,q):O}var qn=dh(function(O,P){var q=O==null?0:O.length,ie=Ef(O,P);return Pv(O,Zo(P,function(fe){return sn(fe,q)?+fe:fe}).sort(Ub)),ie});function Br(O,P){var q=[];if(!(O&&O.length))return q;var ie=-1,fe=[],we=O.length;for(P=Qe(P,3);++ie<we;){var He=O[ie];P(He,ie,O)&&(q.push(He),fe.push(ie))}return Pv(O,fe),q}function $r(O){return O==null?O:vf.call(O)}function Vi(O,P,q){var ie=O==null?0:O.length;return ie?(q&&typeof q!="number"&&Mn(O,P,q)?(P=0,q=ie):(P=P==null?0:bi(P),q=q===n?ie:bi(q)),yu(O,P,q)):[]}function So(O,P){return Lv(O,P)}function ic(O,P,q){return kv(O,P,Qe(q,2))}function C1(O,P){var q=O==null?0:O.length;if(q){var ie=Lv(O,P);if(ie<q&&Mf(O[ie],P))return ie}return-1}function Eu(O,P){return Lv(O,P,!0)}function Hv(O,P,q){return kv(O,P,Qe(q,2),!0)}function ph(O,P){var q=O==null?0:O.length;if(q){var ie=Lv(O,P,!0)-1;if(Mf(O[ie],P))return ie}return-1}function L0(O){return O&&O.length?M0(O):[]}function EN(O,P){return O&&O.length?M0(O,Qe(P,2)):[]}function Z5(O){var P=O==null?0:O.length;return P?yu(O,1,P):[]}function K5(O,P,q){return O&&O.length?(P=q||P===n?1:bi(P),yu(O,0,P<0?0:P)):[]}function eo(O,P,q){var ie=O==null?0:O.length;return ie?(P=q||P===n?1:bi(P),P=ie-P,yu(O,P<0?0:P,ie)):[]}function Do(O,P){return O&&O.length?ap(O,Qe(P,3),!1,!0):[]}function ma(O,P){return O&&O.length?ap(O,Qe(P,3)):[]}var Ea=ji(function(O){return Af($s(O,1,nl,!0))}),ho=ji(function(O){var P=ht(O);return nl(P)&&(P=n),Af($s(O,1,nl,!0),Qe(P,2))}),Of=ji(function(O){var P=ht(O);return P=typeof P=="function"?P:n,Af($s(O,1,nl,!0),n,P)});function Gv(O){return O&&O.length?Af(O):[]}function R1(O,P){return O&&O.length?Af(O,Qe(P,2)):[]}function pO(O,P){return P=typeof P=="function"?P:n,O&&O.length?Af(O,n,P):[]}function fd(O){if(!(O&&O.length))return[];var P=0;return O=Gd(O,function(q){if(nl(q))return P=Qa(q.length,P),!0}),Qy(P,function(q){return Zo(O,Yd(q))})}function Os(O,P){if(!(O&&O.length))return[];var q=fd(O);return P==null?q:Zo(q,function(ie){return bl(P,n,ie)})}var Wv=ji(function(O,P){return nl(O)?jc(O,P):[]}),k0=ji(function(O){return xg(Gd(O,nl))}),gO=ji(function(O){var P=ht(O);return nl(P)&&(P=n),xg(Gd(O,nl),Qe(P,2))}),Cf=ji(function(O){var P=ht(O);return P=typeof P=="function"?P:n,xg(Gd(O,nl),n,P)}),M1=ji(fd);function Hb(O,P){return Fv(O||[],P||[],_f)}function Gu(O,P){return Fv(O||[],P||[],Iv)}var vO=ji(function(O){var P=O.length,q=P>1?O[P-1]:n;return q=typeof q=="function"?(O.pop(),q):n,Os(O,q)});function Gb(O){var P=ye(O);return P.__chain__=!0,P}function xN(O,P){return P(O),O}function D0(O,P){return P(O)}var FS=dh(function(O){var P=O.length,q=P?O[0]:0,ie=this.__wrapped__,fe=function(we){return Ef(we,O)};return P>1||this.__actions__.length||!(ie instanceof Ui)||!sn(q)?this.thru(fe):(ie=ie.slice(q,+q+(P?1:0)),ie.__actions__.push({func:D0,args:[fe],thisArg:n}),new Bc(ie,this.__chain__).thru(function(we){return P&&!we.length&&we.push(n),we}))});function Vv(){return Gb(this)}function zl(){return new Bc(this.value(),this.__chain__)}function Yv(){this.__values__===n&&(this.__values__=VN(this.value()));var O=this.__index__>=this.__values__.length,P=O?n:this.__values__[this.__index__++];return{done:O,value:P}}function P1(){return this}function Tg(O){for(var P,q=this;q instanceof Jd;){var ie=ws(q);ie.__index__=0,ie.__values__=n,P?fe.__wrapped__=ie:P=ie;var fe=ie;q=q.__wrapped__}return fe.__wrapped__=O,P}function mO(){var O=this.__wrapped__;if(O instanceof Ui){var P=O;return this.__actions__.length&&(P=new Ui(this)),P=P.reverse(),P.__actions__.push({func:D0,args:[$r],thisArg:n}),new Bc(P,this.__chain__)}return this.thru($r)}function yO(){return P0(this.__wrapped__,this.__actions__)}var SN=_1(function(O,P,q){Ca.call(O,q)?++O[q]:Uc(O,q,1)});function Wb(O,P,q){var ie=Bi(O)?gS:od;return q&&Mn(O,P,q)&&(P=n),ie(O,Qe(P,3))}function _O(O,P){var q=Bi(O)?Gd:A0;return q(O,Qe(P,3))}var Rf=Ac(Ia),TN=Ac(ge);function Wu(O,P){return $s(Vb(O,P),1)}function AN(O,P){return $s(Vb(O,P),M)}function wN(O,P,q){return q=q===n?1:bi(q),$s(Vb(O,P),q)}function ON(O,P){var q=Bi(O)?tl:xf;return q(O,Qe(P,3))}function Ag(O,P){var q=Bi(O)?xb:T0;return q(O,Qe(P,3))}var US=_1(function(O,P,q){Ca.call(O,q)?O[q].push(P):Uc(O,q,[P])});function bO(O,P,q,ie){O=Vu(O)?O:j1(O),q=q&&!ie?bi(q):0;var fe=O.length;return q<0&&(q=Qa(fe+q,0)),nE(O)?q<=fe&&O.indexOf(P,q)>-1:!!fe&&Vd(O,P,q)>-1}var N1=ji(function(O,P,q){var ie=-1,fe=typeof P=="function",we=Vu(O)?Ut(O.length):[];return xf(O,function(He){we[++ie]=fe?bl(P,He,q):$c(He,P,q)}),we}),CN=_1(function(O,P,q){Uc(O,q,P)});function Vb(O,P){var q=Bi(O)?Zo:Rv;return q(O,Qe(P,3))}function RN(O,P,q,ie){return O==null?[]:(Bi(P)||(P=P==null?[]:[P]),q=ie?n:q,Bi(q)||(q=q==null?[]:[q]),R0(O,P,q))}var MN=_1(function(O,P,q){O[q?0:1].push(P)},function(){return[[],[]]});function jS(O,P,q){var ie=Bi(O)?Yy:Zy,fe=arguments.length<3;return ie(O,Qe(P,4),q,fe,xf)}function EO(O,P,q){var ie=Bi(O)?Ko:Zy,fe=arguments.length<3;return ie(O,Qe(P,4),q,fe,T0)}function Q5(O,P){var q=Bi(O)?Gd:A0;return q(O,HS(Qe(P,3)))}function J5(O){var P=Bi(O)?S0:Lb;return P(O)}function e8(O,P,q){(q?Mn(O,P,q):P===n)?P=1:P=bi(P);var ie=Bi(O)?tp:kb;return ie(O,P)}function PN(O){var P=Bi(O)?CS:MS;return P(O)}function NN(O){if(O==null)return 0;if(Vu(O))return nE(O)?mv(O):O.length;var P=pn(O);return P==xt||P==Sn?O.size:Sf(O).length}function I1(O,P,q){var ie=Bi(O)?Xy:PS;return q&&Mn(O,P,q)&&(P=n),ie(O,Qe(P,3))}var zS=ji(function(O,P){if(O==null)return[];var q=P.length;return q>1&&Mn(O,P[0],P[1])?P=[]:q>2&&Mn(P[0],P[1],P[2])&&(P=[P[0]]),R0(O,$s(P,1),[])}),Yb=o1||function(){return el.Date.now()};function IN(O,P){if(typeof P!="function")throw new ou(o);return O=bi(O),function(){if(--O<1)return P.apply(this,arguments)}}function xO(O,P,q){return P=q?n:P,P=O&&P==null?O.length:P,wc(O,w,n,n,n,n,P)}function SO(O,P){var q;if(typeof P!="function")throw new ou(o);return O=bi(O),function(){return--O>0&&(q=P.apply(this,arguments)),O<=1&&(P=n),q}}var $S=ji(function(O,P,q){var ie=v;if(q.length){var fe=rh(q,Ct($S));ie|=T}return wc(O,ie,P,q,fe)}),TO=ji(function(O,P,q){var ie=v|y;if(q.length){var fe=rh(q,Ct(TO));ie|=T}return wc(P,ie,O,q,fe)});function Xb(O,P,q){P=q?n:P;var ie=wc(O,E,n,n,n,n,n,P);return ie.placeholder=Xb.placeholder,ie}function AO(O,P,q){P=q?n:P;var ie=wc(O,x,n,n,n,n,n,P);return ie.placeholder=AO.placeholder,ie}function wO(O,P,q){var ie,fe,we,He,tt,bt,bn=0,xn=!1,Bn=!1,xr=!0;if(typeof O!="function")throw new ou(o);P=Nf(P)||0,vs(q)&&(xn=!!q.leading,Bn="maxWait"in q,we=Bn?Qa(Nf(q.maxWait)||0,P):we,xr="trailing"in q?!!q.trailing:xr);function Jr($l){var Cg=ie,j0=fe;return ie=fe=n,bn=$l,He=O.apply(j0,Cg),He}function Ei($l){return bn=$l,tt=Lo(Ra,P),xn?Jr($l):He}function ha($l){var Cg=$l-bt,j0=$l-bn,Fre=P-Cg;return Bn?ss(Fre,we-j0):Fre}function xi($l){var Cg=$l-bt,j0=$l-bn;return bt===n||Cg>=P||Cg<0||Bn&&j0>=we}function Ra(){var $l=Yb();if(xi($l))return Fa($l);tt=Lo(Ra,ha($l))}function Fa($l){return tt=n,xr&&ie?Jr($l):(ie=fe=n,He)}function hd(){tt!==n&&ld(tt),bn=0,ie=bt=fe=tt=n}function If(){return tt===n?He:Fa(Yb())}function dd(){var $l=Yb(),Cg=xi($l);if(ie=arguments,fe=this,bt=$l,Cg){if(tt===n)return Ei(bt);if(Bn)return ld(tt),tt=Lo(Ra,P),Jr(bt)}return tt===n&&(tt=Lo(Ra,P)),He}return dd.cancel=hd,dd.flush=If,dd}var po=ji(function(O,P){return h1(O,1,P)}),OO=ji(function(O,P,q){return h1(O,Nf(P)||0,q)});function t8(O){return wc(O,D)}function qb(O,P){if(typeof O!="function"||P!=null&&typeof P!="function")throw new ou(o);var q=function(){var ie=arguments,fe=P?P.apply(this,ie):ie[0],we=q.cache;if(we.has(fe))return we.get(fe);var He=O.apply(this,ie);return q.cache=we.set(fe,He)||we,He};return q.cache=new(qb.Cache||mf),q}qb.Cache=mf;function HS(O){if(typeof O!="function")throw new ou(o);return function(){var P=arguments;switch(P.length){case 0:return!O.call(this);case 1:return!O.call(this,P[0]);case 2:return!O.call(this,P[0],P[1]);case 3:return!O.call(this,P[0],P[1],P[2])}return!O.apply(this,P)}}function n8(O){return SO(2,O)}var r8=jv(function(O,P){P=P.length==1&&Bi(P[0])?Zo(P[0],Ql(Qe())):Zo($s(P,1),Ql(Qe()));var q=P.length;return ji(function(ie){for(var fe=-1,we=ss(ie.length,q);++fe<we;)ie[fe]=P[fe].call(this,ie[fe]);return bl(O,this,ie)})}),L1=ji(function(O,P){var q=rh(P,Ct(L1));return wc(O,T,n,P,q)}),B0=ji(function(O,P){var q=rh(P,Ct(B0));return wc(O,S,n,P,q)}),CO=dh(function(O,P){return wc(O,C,n,n,n,P)});function GS(O,P){if(typeof O!="function")throw new ou(o);return P=P===n?P:bi(P),ji(O,P)}function RO(O,P){if(typeof O!="function")throw new ou(o);return P=P==null?0:Qa(bi(P),0),ji(function(q){var ie=q[P],fe=Tc(q,0,P);return ie&&Wd(fe,ie),bl(O,this,fe)})}function Xv(O,P,q){var ie=!0,fe=!0;if(typeof O!="function")throw new ou(o);return vs(q)&&(ie="leading"in q?!!q.leading:ie,fe="trailing"in q?!!q.trailing:fe),wO(O,P,{leading:ie,maxWait:P,trailing:fe})}function up(O){return xO(O,1)}function Zb(O,P){return L1(op(P),O)}function i8(){if(!arguments.length)return[];var O=arguments[0];return Bi(O)?O:[O]}function LN(O){return ec(O,d)}function kN(O,P){return P=typeof P=="function"?P:n,ec(O,d,P)}function DN(O){return ec(O,f|d)}function BN(O,P){return P=typeof P=="function"?P:n,ec(O,f|d,P)}function a8(O,P){return P==null||ad(O,P,ac(P))}function Mf(O,P){return O===P||O!==O&&P!==P}var FN=$v(Eg),UN=$v(function(O,P){return O>=P}),F0=tc((function(){return arguments})())?tc:function(O){return Hs(O)&&Ca.call(O,"callee")&&!bv.call(O,"callee")},Bi=Ut.isArray,MO=fS?Ql(fS):Io;function Vu(O){return O!=null&&YS(O.length)&&!Pf(O)}function nl(O){return Hs(O)&&Vu(O)}function Kb(O){return O===!0||O===!1||Hs(O)&&Sl(O)==ve}var qv=Cb||It,jN=hS?Ql(hS):C0;function ya(O){return Hs(O)&&O.nodeType===1&&!Jb(O)}function PO(O){if(O==null)return!0;if(Vu(O)&&(Bi(O)||typeof O=="string"||typeof O.splice=="function"||qv(O)||Zv(O)||F0(O)))return!O.length;var P=pn(O);if(P==xt||P==Sn)return!O.size;if(fn(O))return!Sf(O).length;for(var q in O)if(Ca.call(O,q))return!1;return!0}function WS(O,P){return nc(O,P)}function NO(O,P,q){q=typeof q=="function"?q:n;var ie=q?q(O,P):n;return ie===n?nc(O,P,n,q):!!ie}function VS(O){if(!Hs(O))return!1;var P=Sl(O);return P==Xe||P==Re||typeof O.message=="string"&&typeof O.name=="string"&&!Jb(O)}function IO(O){return typeof O=="number"&&cu(O)}function Pf(O){if(!vs(O))return!1;var P=Sl(O);return P==Le||P==Lt||P==ue||P==rn}function Qb(O){return typeof O=="number"&&O==bi(O)}function YS(O){return typeof O=="number"&&O>-1&&O%1==0&&O<=k}function vs(O){var P=typeof O;return O!=null&&(P=="object"||P=="function")}function Hs(O){return O!=null&&typeof O=="object"}var zN=Hd?Ql(Hd):Na;function $N(O,P){return O===P||no(O,P,dn(P))}function HN(O,P,q){return q=typeof q=="function"?q:n,no(O,P,dn(P),q)}function To(O){return kO(O)&&O!=+O}function LO(O){if(Un(O))throw new wi(a);return sd(O)}function Oc(O){return O===null}function o8(O){return O==null}function kO(O){return typeof O=="number"||Hs(O)&&Sl(O)==dt}function Jb(O){if(!Hs(O)||Sl(O)!=At)return!1;var P=co(O);if(P===null)return!0;var q=Ca.call(P,"constructor")&&P.constructor;return typeof q=="function"&&q instanceof q&&i1.call(q)==y0}var eE=dS?Ql(dS):ch;function DO(O){return Qb(O)&&O>=-k&&O<=k}var tE=ng?Ql(ng):mu;function nE(O){return typeof O=="string"||!Bi(O)&&Hs(O)&&Sl(O)==In}function Yu(O){return typeof O=="symbol"||Hs(O)&&Sl(O)==de}var Zv=Eb?Ql(Eb):uh;function BO(O){return O===n}function s8(O){return Hs(O)&&pn(O)==zr}function GN(O){return Hs(O)&&Sl(O)==st}var l8=$v(ro),WN=$v(function(O,P){return O<=P});function VN(O){if(!O)return[];if(Vu(O))return nE(O)?os(O):rc(O);if(El&&O[El])return e1(O[El]());var P=pn(O),q=P==xt?p0:P==Sn?Xh:j1;return q(O)}function wg(O){if(!O)return O===0?O:0;if(O=Nf(O),O===M||O===-M){var P=O<0?-1:1;return P*z}return O===O?O:0}function bi(O){var P=wg(O),q=P%1;return P===P?q?P-q:P:0}function FO(O){return O?du(bi(O),0,V):0}function Nf(O){if(typeof O=="number")return O;if(Yu(O))return j;if(vs(O)){var P=typeof O.valueOf=="function"?O.valueOf():O;O=vs(P)?P+"":P}if(typeof O!="string")return O===0?O:+O;O=Yh(O);var q=ua.test(O);return q||Ir.test(O)?o0(O.slice(2),q?2:8):ti.test(O)?j:+O}function XS(O){return _u(O,Xu(O))}function c8(O){return O?du(bi(O),-k,k):O===0?O:0}function io(O){return O==null?"":Fl(O)}var YN=jl(function(O,P){if(fn(P)||Vu(P)){_u(P,ac(P),O);return}for(var q in P)Ca.call(P,q)&&_f(O,q,P[q])}),qS=jl(function(O,P){_u(P,Xu(P),O)}),k1=jl(function(O,P,q,ie){_u(P,Xu(P),O,ie)}),u8=jl(function(O,P,q,ie){_u(P,ac(P),O,ie)}),gh=dh(Ef);function UO(O,P){var q=Qd(O);return P==null?q:Mb(q,P)}var XN=ji(function(O,P){O=Ka(O);var q=-1,ie=P.length,fe=ie>2?P[2]:n;for(fe&&Mn(P[0],P[1],fe)&&(ie=1);++q<ie;)for(var we=P[q],He=Xu(we),tt=-1,bt=He.length;++tt<bt;){var bn=He[tt],xn=O[bn];(xn===n||Mf(xn,lg[bn])&&!Ca.call(O,bn))&&(O[bn]=we[bn])}return O}),qN=ji(function(O){return O.push(n,w1),bl(B1,n,O)});function ZN(O,P){return c0(O,Qe(P,3),gu)}function rE(O,P){return c0(O,Qe(P,3),w0)}function vh(O,P){return O==null?O:np(O,Qe(P,3),Xu)}function KN(O,P){return O==null?O:bg(O,Qe(P,3),Xu)}function ZS(O,P){return O&&gu(O,Qe(P,3))}function Og(O,P){return O&&w0(O,Qe(P,3))}function f8(O){return O==null?[]:sh(O,ac(O))}function h8(O){return O==null?[]:sh(O,Xu(O))}function Kv(O,P,q){var ie=O==null?n:zu(O,P);return ie===n?q:ie}function QN(O,P){return O!=null&&ot(O,P,zc)}function jO(O,P){return O!=null&&ot(O,P,vu)}var d8=Tl(function(O,P,q){P!=null&&typeof P.toString!="function"&&(P=Ec.call(P)),O[P]=q},$1(xu)),p8=Tl(function(O,P,q){P!=null&&typeof P.toString!="function"&&(P=Ec.call(P)),Ca.call(O,P)?O[P].push(q):O[P]=[q]},Qe),g8=ji($c);function ac(O){return Vu(O)?f1(O):Sf(O)}function Xu(O){return Vu(O)?f1(O,!0):d1(O)}function v8(O,P){var q={};return P=Qe(P,3),gu(O,function(ie,fe,we){Uc(q,P(ie,fe,we),ie)}),q}function JN(O,P){var q={};return P=Qe(P,3),gu(O,function(ie,fe,we){Uc(q,fe,P(ie,fe,we))}),q}var D1=jl(function(O,P,q){fh(O,P,q)}),B1=jl(function(O,P,q,ie){fh(O,P,q,ie)}),e3=dh(function(O,P){var q={};if(O==null)return q;var ie=!1;P=Zo(P,function(we){return we=Ul(we,O),ie||(ie=we.length>1),we}),_u(O,Ee(O),q),ie&&(q=ec(q,f|h|d,$b));for(var fe=P.length;fe--;)ip(q,P[fe]);return q});function m8(O,P){return U1(O,HS(Qe(P)))}var F1=dh(function(O,P){return O==null?{}:g1(O,P)});function U1(O,P){if(O==null)return{};var q=Zo(Ee(O),function(ie){return[ie]});return P=Qe(P),Bl(O,q,function(ie,fe){return P(ie,fe[0])})}function t3(O,P,q){P=Ul(P,O);var ie=-1,fe=P.length;for(fe||(fe=1,O=n);++ie<fe;){var we=O==null?n:O[$a(P[ie])];we===n&&(ie=fe,we=q),O=Pf(we)?we.call(O):we}return O}function KS(O,P,q){return O==null?O:Iv(O,P,q)}function zO(O,P,q,ie){return ie=typeof ie=="function"?ie:n,O==null?O:Iv(O,P,q,ie)}var QS=zb(ac),iE=zb(Xu);function n3(O,P,q){var ie=Bi(O),fe=ie||qv(O)||Zv(O);if(P=Qe(P,4),q==null){var we=O&&O.constructor;fe?q=ie?new we:[]:vs(O)?q=Pf(we)?Qd(co(O)):{}:q={}}return(fe?tl:gu)(O,function(He,tt,bt){return P(q,He,tt,bt)}),q}function r3(O,P){return O==null?!0:ip(O,P)}function y8(O,P,q){return O==null?O:Bv(O,P,op(q))}function i3(O,P,q,ie){return ie=typeof ie=="function"?ie:n,O==null?O:Bv(O,P,op(q),ie)}function j1(O){return O==null?[]:f0(O,ac(O))}function $O(O){return O==null?[]:f0(O,Xu(O))}function _8(O,P,q){return q===n&&(q=P,P=n),q!==n&&(q=Nf(q),q=q===q?q:0),P!==n&&(P=Nf(P),P=P===P?P:0),du(Nf(O),P,q)}function JS(O,P,q){return P=wg(P),q===n?(q=P,P=0):q=wg(q),O=Nf(O),lh(O,P,q)}function eT(O,P,q){if(q&&typeof q!="boolean"&&Mn(O,P,q)&&(P=q=n),q===n&&(typeof P=="boolean"?(q=P,P=n):typeof O=="boolean"&&(q=O,O=n)),O===n&&P===n?(O=0,P=1):(O=wg(O),P===n?(P=O,O=0):P=wg(P)),O>P){var ie=O;O=P,P=ie}if(q||O%1||P%1){var fe=ih();return ss(O+fe*(P-O+$d("1e-"+((fe+"").length-1))),P)}return Nv(O,P)}var tT=ud(function(O,P,q){return P=P.toLowerCase(),O+(q?a3(P):P)});function a3(O){return U0(io(O).toLowerCase())}function z1(O){return O=io(O),O&&O.replace(nt,og).replace(uS,"")}function b8(O,P,q){O=io(O),P=Fl(P);var ie=O.length;q=q===n?ie:du(bi(q),0,ie);var fe=q;return q-=P.length,q>=0&&O.slice(q,fe)==P}function o3(O){return O=io(O),O&&W.test(O)?O.replace(ce,Sb):O}function s3(O){return O=io(O),O&&ct.test(O)?O.replace(Oe,"\\$&"):O}var l3=ud(function(O,P,q){return O+(q?"-":"")+P.toLowerCase()}),c3=ud(function(O,P,q){return O+(q?" ":"")+P.toLowerCase()}),HO=E1("toLowerCase");function u3(O,P,q){O=io(O),P=bi(P);var ie=P?mv(O):0;if(!P||ie>=P)return O;var fe=(P-ie)/2;return cp(_0(fe),q)+O+cp(dg(fe),q)}function f3(O,P,q){O=io(O),P=bi(P);var ie=P?mv(O):0;return P&&ie<P?O+cp(P-ie,q):O}function nT(O,P,q){O=io(O),P=bi(P);var ie=P?mv(O):0;return P&&ie<P?cp(P-ie,q)+O:O}function E8(O,P,q){return q||P==null?P=0:P&&(P=+P),fu(io(O).replace(Ge,""),P||0)}function x8(O,P,q){return(q?Mn(O,P,q):P===n)?P=1:P=bi(P),Hu(io(O),P)}function GO(){var O=arguments,P=io(O[0]);return O.length<3?P:P.replace(O[1],O[2])}var WO=ud(function(O,P,q){return O+(q?"_":"")+P.toLowerCase()});function rT(O,P,q){return q&&typeof q!="number"&&Mn(O,P,q)&&(P=q=n),q=q===n?V:q>>>0,q?(O=io(O),O&&(typeof P=="string"||P!=null&&!eE(P))&&(P=Fl(P),!P&&qd(O))?Tc(os(O),0,q):O.split(P,q)):[]}var VO=ud(function(O,P,q){return O+(q?" ":"")+U0(P)});function h3(O,P,q){return O=io(O),q=q==null?0:du(bi(q),0,O.length),P=Fl(P),O.slice(q,q+P.length)==P}function YO(O,P,q){var ie=ye.templateSettings;q&&Mn(O,P,q)&&(P=n),O=io(O),P=k1({},P,ie,A1);var fe=k1({},P.imports,ie.imports,A1),we=ac(fe),He=f0(fe,we),tt,bt,bn=0,xn=P.interpolate||tn,Bn="__p += '",xr=r1((P.escape||tn).source+"|"+xn.source+"|"+(xn===te?ar:tn).source+"|"+(P.evaluate||tn).source+"|$","g"),Jr="//# sourceURL="+(Ca.call(P,"sourceURL")?(P.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Gy+"]")+`
`;O.replace(xr,function(xi,Ra,Fa,hd,If,dd){return Fa||(Fa=hd),Bn+=O.slice(bn,dd).replace(er,d0),Ra&&(tt=!0,Bn+=`' +
__e(`+Ra+`) +
'`),If&&(bt=!0,Bn+=`';
`+If+`;
__p += '`),Fa&&(Bn+=`' +
((__t = (`+Fa+`)) == null ? '' : __t) +
'`),bn=dd+xi.length,xi}),Bn+=`';
`;var Ei=Ca.call(P,"variable")&&P.variable;if(!Ei)Bn=`with (obj) {
`+Bn+`
}
`;else if($e.test(Ei))throw new wi(s);Bn=(bt?Bn.replace(ft,""):Bn).replace(nn,"$1").replace(Yn,"$1;"),Bn="function("+(Ei||"obj")+`) {
`+(Ei?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(tt?", __e = _.escape":"")+(bt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Bn+`return __p
}`;var ha=XO(function(){return Zi(we,Jr+"return "+Bn).apply(n,He)});if(ha.source=Bn,VS(ha))throw ha;return ha}function Qv(O){return io(O).toLowerCase()}function Jv(O){return io(O).toUpperCase()}function em(O,P,q){if(O=io(O),O&&(q||P===n))return Yh(O);if(!O||!(P=Fl(P)))return O;var ie=os(O),fe=os(P),we=Xd(ie,fe),He=h0(ie,fe)+1;return Tc(ie,we,He).join("")}function aE(O,P,q){if(O=io(O),O&&(q||P===n))return O.slice(0,yv(O)+1);if(!O||!(P=Fl(P)))return O;var ie=os(O),fe=h0(ie,os(P))+1;return Tc(ie,0,fe).join("")}function oE(O,P,q){if(O=io(O),O&&(q||P===n))return O.replace(Ge,"");if(!O||!(P=Fl(P)))return O;var ie=os(O),fe=Xd(ie,os(P));return Tc(ie,fe).join("")}function tm(O,P){var q=L,ie=B;if(vs(P)){var fe="separator"in P?P.separator:fe;q="length"in P?bi(P.length):q,ie="omission"in P?Fl(P.omission):ie}O=io(O);var we=O.length;if(qd(O)){var He=os(O);we=He.length}if(q>=we)return O;var tt=q-mv(ie);if(tt<1)return ie;var bt=He?Tc(He,0,tt).join(""):O.slice(0,tt);if(fe===n)return bt+ie;if(He&&(tt+=bt.length-tt),eE(fe)){if(O.slice(tt).search(fe)){var bn,xn=bt;for(fe.global||(fe=r1(fe.source,io(Hr.exec(fe))+"g")),fe.lastIndex=0;bn=fe.exec(xn);)var Bn=bn.index;bt=bt.slice(0,Bn===n?tt:Bn)}}else if(O.indexOf(Fl(fe),tt)!=tt){var xr=bt.lastIndexOf(fe);xr>-1&&(bt=bt.slice(0,xr))}return bt+ie}function S8(O){return O=io(O),O&&H.test(O)?O.replace(Nr,n1):O}var d3=ud(function(O,P,q){return O+(q?" ":"")+P.toUpperCase()}),U0=E1("toUpperCase");function p3(O,P,q){return O=io(O),P=q?n:P,P===n?Jy(O)?ES(O):vS(O):O.match(P)||[]}var XO=ji(function(O,P){try{return bl(O,n,P)}catch(q){return VS(q)?q:new wi(q)}}),iT=dh(function(O,P){return tl(P,function(q){q=$a(q),Uc(O,q,$S(O[q],O))}),O});function g3(O){var P=O==null?0:O.length,q=Qe();return O=P?Zo(O,function(ie){if(typeof ie[1]!="function")throw new ou(o);return[q(ie[0]),ie[1]]}):[],ji(function(ie){for(var fe=-1;++fe<P;){var we=O[fe];if(bl(we[0],this,ie))return bl(we[1],this,ie)}})}function T8(O){return Pb(ec(O,f))}function $1(O){return function(){return O}}function aT(O,P){return O==null||O!==O?P:O}var v3=bu(),H1=bu(!0);function xu(O){return O}function sE(O){return $u(typeof O=="function"?O:ec(O,f))}function oT(O){return Mv(ec(O,f))}function m3(O,P){return rp(O,ec(P,f))}var A8=ji(function(O,P){return function(q){return $c(q,O,P)}}),sT=ji(function(O,P){return function(q){return $c(O,q,P)}});function m(O,P,q){var ie=ac(P),fe=sh(P,ie);q==null&&!(vs(P)&&(fe.length||!ie.length))&&(q=P,P=O,O=this,fe=sh(P,ac(P)));var we=!(vs(q)&&"chain"in q)||!!q.chain,He=Pf(O);return tl(fe,function(tt){var bt=P[tt];O[tt]=bt,He&&(O.prototype[tt]=function(){var bn=this.__chain__;if(we||bn){var xn=O(this.__wrapped__),Bn=xn.__actions__=rc(this.__actions__);return Bn.push({func:bt,args:arguments,thisArg:O}),xn.__chain__=bn,xn}return bt.apply(O,Wd([this.value()],arguments))})}),O}function b(){return el._===this&&(el._=lu),this}function A(){}function R(O){return O=bi(O),ji(function(P){return p1(P,O)})}var G=x1(Zo),K=x1(gS),oe=x1(Xy);function _e(O){return Vt(O)?Yd($a(O)):Ts(O)}function Ze(O){return function(P){return O==null?n:zu(O,P)}}var Mt=S1(),an=S1(!0);function vn(){return[]}function It(){return!1}function Gt(){return{}}function Fr(){return""}function hi(){return!0}function Ao(O,P){if(O=bi(O),O<1||O>k)return[];var q=V,ie=ss(O,V);P=Qe(P),O-=V;for(var fe=Qy(ie,P);++q<O;)P(q);return fe}function mt(O){return Bi(O)?Zo(O,$a):Yu(O)?[O]:rc(As(io(O)))}function rt(O){var P=++su;return io(O)+P}var Rt=zv(function(O,P){return O+P},0),hn=N0("ceil"),ri=zv(function(O,P){return O/P},1),Ha=N0("floor");function Gr(O){return O&&O.length?pu(O,xu,Eg):n}function na(O,P){return O&&O.length?pu(O,Qe(P,2),Eg):n}function xa(O){return rg(O,xu)}function Ga(O,P){return rg(O,Qe(P,2))}function nm(O){return O&&O.length?pu(O,xu,ro):n}function w8(O,P){return O&&O.length?pu(O,Qe(P,2),ro):n}var X8e=zv(function(O,P){return O*P},1),q8e=N0("round"),Z8e=zv(function(O,P){return O-P},0);function K8e(O){return O&&O.length?Ky(O,xu):0}function Q8e(O,P){return O&&O.length?Ky(O,Qe(P,2)):0}return ye.after=IN,ye.ary=xO,ye.assign=YN,ye.assignIn=qS,ye.assignInWith=k1,ye.assignWith=u8,ye.at=gh,ye.before=SO,ye.bind=$S,ye.bindAll=iT,ye.bindKey=TO,ye.castArray=i8,ye.chain=Gb,ye.chunk=oa,ye.compact=kr,ye.concat=vi,ye.cond=g3,ye.conforms=T8,ye.constant=$1,ye.countBy=SN,ye.create=UO,ye.curry=Xb,ye.curryRight=AO,ye.debounce=wO,ye.defaults=XN,ye.defaultsDeep=qN,ye.defer=po,ye.delay=OO,ye.difference=Di,ye.differenceBy=Jo,ye.differenceWith=Al,ye.drop=Me,ye.dropRight=St,ye.dropRightWhile=vt,ye.dropWhile=Nn,ye.fill=_i,ye.filter=_O,ye.flatMap=Wu,ye.flatMapDeep=AN,ye.flatMapDepth=wN,ye.flatten=be,ye.flattenDeep=Ie,ye.flattenDepth=gt,ye.flip=t8,ye.flow=v3,ye.flowRight=H1,ye.fromPairs=yt,ye.functions=f8,ye.functionsIn=h8,ye.groupBy=US,ye.initial=Ke,ye.intersection=Ne,ye.intersectionBy=Ue,ye.intersectionWith=xe,ye.invert=d8,ye.invertBy=p8,ye.invokeMap=N1,ye.iteratee=sE,ye.keyBy=CN,ye.keys=ac,ye.keysIn=Xu,ye.map=Vb,ye.mapKeys=v8,ye.mapValues=JN,ye.matches=oT,ye.matchesProperty=m3,ye.memoize=qb,ye.merge=D1,ye.mergeWith=B1,ye.method=A8,ye.methodOf=sT,ye.mixin=m,ye.negate=HS,ye.nthArg=R,ye.omit=e3,ye.omitBy=m8,ye.once=n8,ye.orderBy=RN,ye.over=G,ye.overArgs=r8,ye.overEvery=K,ye.overSome=oe,ye.partial=L1,ye.partialRight=B0,ye.partition=MN,ye.pick=F1,ye.pickBy=U1,ye.property=_e,ye.propertyOf=Ze,ye.pull=Wt,ye.pullAll=on,ye.pullAllBy=gr,ye.pullAllWith=oi,ye.pullAt=qn,ye.range=Mt,ye.rangeRight=an,ye.rearg=CO,ye.reject=Q5,ye.remove=Br,ye.rest=GS,ye.reverse=$r,ye.sampleSize=e8,ye.set=KS,ye.setWith=zO,ye.shuffle=PN,ye.slice=Vi,ye.sortBy=zS,ye.sortedUniq=L0,ye.sortedUniqBy=EN,ye.split=rT,ye.spread=RO,ye.tail=Z5,ye.take=K5,ye.takeRight=eo,ye.takeRightWhile=Do,ye.takeWhile=ma,ye.tap=xN,ye.throttle=Xv,ye.thru=D0,ye.toArray=VN,ye.toPairs=QS,ye.toPairsIn=iE,ye.toPath=mt,ye.toPlainObject=XS,ye.transform=n3,ye.unary=up,ye.union=Ea,ye.unionBy=ho,ye.unionWith=Of,ye.uniq=Gv,ye.uniqBy=R1,ye.uniqWith=pO,ye.unset=r3,ye.unzip=fd,ye.unzipWith=Os,ye.update=y8,ye.updateWith=i3,ye.values=j1,ye.valuesIn=$O,ye.without=Wv,ye.words=p3,ye.wrap=Zb,ye.xor=k0,ye.xorBy=gO,ye.xorWith=Cf,ye.zip=M1,ye.zipObject=Hb,ye.zipObjectDeep=Gu,ye.zipWith=vO,ye.entries=QS,ye.entriesIn=iE,ye.extend=qS,ye.extendWith=k1,m(ye,ye),ye.add=Rt,ye.attempt=XO,ye.camelCase=tT,ye.capitalize=a3,ye.ceil=hn,ye.clamp=_8,ye.clone=LN,ye.cloneDeep=DN,ye.cloneDeepWith=BN,ye.cloneWith=kN,ye.conformsTo=a8,ye.deburr=z1,ye.defaultTo=aT,ye.divide=ri,ye.endsWith=b8,ye.eq=Mf,ye.escape=o3,ye.escapeRegExp=s3,ye.every=Wb,ye.find=Rf,ye.findIndex=Ia,ye.findKey=ZN,ye.findLast=TN,ye.findLastIndex=ge,ye.findLastKey=rE,ye.floor=Ha,ye.forEach=ON,ye.forEachRight=Ag,ye.forIn=vh,ye.forInRight=KN,ye.forOwn=ZS,ye.forOwnRight=Og,ye.get=Kv,ye.gt=FN,ye.gte=UN,ye.has=QN,ye.hasIn=jO,ye.head=je,ye.identity=xu,ye.includes=bO,ye.indexOf=qe,ye.inRange=JS,ye.invoke=g8,ye.isArguments=F0,ye.isArray=Bi,ye.isArrayBuffer=MO,ye.isArrayLike=Vu,ye.isArrayLikeObject=nl,ye.isBoolean=Kb,ye.isBuffer=qv,ye.isDate=jN,ye.isElement=ya,ye.isEmpty=PO,ye.isEqual=WS,ye.isEqualWith=NO,ye.isError=VS,ye.isFinite=IO,ye.isFunction=Pf,ye.isInteger=Qb,ye.isLength=YS,ye.isMap=zN,ye.isMatch=$N,ye.isMatchWith=HN,ye.isNaN=To,ye.isNative=LO,ye.isNil=o8,ye.isNull=Oc,ye.isNumber=kO,ye.isObject=vs,ye.isObjectLike=Hs,ye.isPlainObject=Jb,ye.isRegExp=eE,ye.isSafeInteger=DO,ye.isSet=tE,ye.isString=nE,ye.isSymbol=Yu,ye.isTypedArray=Zv,ye.isUndefined=BO,ye.isWeakMap=s8,ye.isWeakSet=GN,ye.join=Ye,ye.kebabCase=l3,ye.last=ht,ye.lastIndexOf=Dt,ye.lowerCase=c3,ye.lowerFirst=HO,ye.lt=l8,ye.lte=WN,ye.max=Gr,ye.maxBy=na,ye.mean=xa,ye.meanBy=Ga,ye.min=nm,ye.minBy=w8,ye.stubArray=vn,ye.stubFalse=It,ye.stubObject=Gt,ye.stubString=Fr,ye.stubTrue=hi,ye.multiply=X8e,ye.nth=Kt,ye.noConflict=b,ye.noop=A,ye.now=Yb,ye.pad=u3,ye.padEnd=f3,ye.padStart=nT,ye.parseInt=E8,ye.random=eT,ye.reduce=jS,ye.reduceRight=EO,ye.repeat=x8,ye.replace=GO,ye.result=t3,ye.round=q8e,ye.runInContext=lt,ye.sample=J5,ye.size=NN,ye.snakeCase=WO,ye.some=I1,ye.sortedIndex=So,ye.sortedIndexBy=ic,ye.sortedIndexOf=C1,ye.sortedLastIndex=Eu,ye.sortedLastIndexBy=Hv,ye.sortedLastIndexOf=ph,ye.startCase=VO,ye.startsWith=h3,ye.subtract=Z8e,ye.sum=K8e,ye.sumBy=Q8e,ye.template=YO,ye.times=Ao,ye.toFinite=wg,ye.toInteger=bi,ye.toLength=FO,ye.toLower=Qv,ye.toNumber=Nf,ye.toSafeInteger=c8,ye.toString=io,ye.toUpper=Jv,ye.trim=em,ye.trimEnd=aE,ye.trimStart=oE,ye.truncate=tm,ye.unescape=S8,ye.uniqueId=rt,ye.upperCase=d3,ye.upperFirst=U0,ye.each=ON,ye.eachRight=Ag,ye.first=je,m(ye,(function(){var O={};return gu(ye,function(P,q){Ca.call(ye.prototype,q)||(O[q]=P)}),O})(),{chain:!1}),ye.VERSION=r,tl(["bind","bindKey","curry","curryRight","partial","partialRight"],function(O){ye[O].placeholder=ye}),tl(["drop","take"],function(O,P){Ui.prototype[O]=function(q){q=q===n?1:Qa(bi(q),0);var ie=this.__filtered__&&!P?new Ui(this):this.clone();return ie.__filtered__?ie.__takeCount__=ss(q,ie.__takeCount__):ie.__views__.push({size:ss(q,V),type:O+(ie.__dir__<0?"Right":"")}),ie},Ui.prototype[O+"Right"]=function(q){return this.reverse()[O](q).reverse()}}),tl(["filter","map","takeWhile"],function(O,P){var q=P+1,ie=q==$||q==N;Ui.prototype[O]=function(fe){var we=this.clone();return we.__iteratees__.push({iteratee:Qe(fe,3),type:q}),we.__filtered__=we.__filtered__||ie,we}}),tl(["head","last"],function(O,P){var q="take"+(P?"Right":"");Ui.prototype[O]=function(){return this[q](1).value()[0]}}),tl(["initial","tail"],function(O,P){var q="drop"+(P?"":"Right");Ui.prototype[O]=function(){return this.__filtered__?new Ui(this):this[q](1)}}),Ui.prototype.compact=function(){return this.filter(xu)},Ui.prototype.find=function(O){return this.filter(O).head()},Ui.prototype.findLast=function(O){return this.reverse().find(O)},Ui.prototype.invokeMap=ji(function(O,P){return typeof O=="function"?new Ui(this):this.map(function(q){return $c(q,O,P)})}),Ui.prototype.reject=function(O){return this.filter(HS(Qe(O)))},Ui.prototype.slice=function(O,P){O=bi(O);var q=this;return q.__filtered__&&(O>0||P<0)?new Ui(q):(O<0?q=q.takeRight(-O):O&&(q=q.drop(O)),P!==n&&(P=bi(P),q=P<0?q.dropRight(-P):q.take(P-O)),q)},Ui.prototype.takeRightWhile=function(O){return this.reverse().takeWhile(O).reverse()},Ui.prototype.toArray=function(){return this.take(V)},gu(Ui.prototype,function(O,P){var q=/^(?:filter|find|map|reject)|While$/.test(P),ie=/^(?:head|last)$/.test(P),fe=ye[ie?"take"+(P=="last"?"Right":""):P],we=ie||/^find/.test(P);fe&&(ye.prototype[P]=function(){var He=this.__wrapped__,tt=ie?[1]:arguments,bt=He instanceof Ui,bn=tt[0],xn=bt||Bi(He),Bn=function(Ra){var Fa=fe.apply(ye,Wd([Ra],tt));return ie&&xr?Fa[0]:Fa};xn&&q&&typeof bn=="function"&&bn.length!=1&&(bt=xn=!1);var xr=this.__chain__,Jr=!!this.__actions__.length,Ei=we&&!xr,ha=bt&&!Jr;if(!we&&xn){He=ha?He:new Ui(this);var xi=O.apply(He,tt);return xi.__actions__.push({func:D0,args:[Bn],thisArg:n}),new Bc(xi,xr)}return Ei&&ha?O.apply(this,tt):(xi=this.thru(Bn),Ei?ie?xi.value()[0]:xi.value():xi)})}),tl(["pop","push","shift","sort","splice","unshift"],function(O){var P=m0[O],q=/^(?:push|sort|unshift)$/.test(O)?"tap":"thru",ie=/^(?:pop|shift)$/.test(O);ye.prototype[O]=function(){var fe=arguments;if(ie&&!this.__chain__){var we=this.value();return P.apply(Bi(we)?we:[],fe)}return this[q](function(He){return P.apply(Bi(He)?He:[],fe)})}}),gu(Ui.prototype,function(O,P){var q=ye[P];if(q){var ie=q.name+"";Ca.call(za,ie)||(za[ie]=[]),za[ie].push({name:P,func:q})}}),za[uo(n,y).name]=[{name:"wrapper",func:n}],Ui.prototype.clone=nd,Ui.prototype.reverse=ep,Ui.prototype.value=rd,ye.prototype.at=FS,ye.prototype.chain=Vv,ye.prototype.commit=zl,ye.prototype.next=Yv,ye.prototype.plant=Tg,ye.prototype.reverse=mO,ye.prototype.toJSON=ye.prototype.valueOf=ye.prototype.value=yO,ye.prototype.first=ye.prototype.head,El&&(ye.prototype[El]=P1),ye}),_v=v0();gf?((gf.exports=_v)._=_v,s0._=_v):el._=_v}).call(vmt)})(gC,gC.exports)),gC.exports}var Ve=mmt(),fU,ymt=function(){return fU||(fU=document.createElement("canvas").getContext("2d")),fU},_mt=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};Ve.memoize(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,i=r===void 0?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant,l=ymt();return l.font=[o,a,s,"".concat(n,"px"),i].join(" "),l.measureText(Ve.isString(t)?t:"")},function(t,e){return e===void 0&&(e={}),_mt([t],Ve.values(e),!0).join("")});var bmt=function(t){var e=[/\breact\b/i,/\.jsx/,/children:\s*\[/,/\*#__PURE__\*/],n=/(\w+)?\.createElement\(\s*(['"`])([^'"`]+)\2/g,r=new Set(["g","circle","ellipse","image","rect","line","polyline","polygon","text","path","html","mesh"]);if(e.some(function(a){return a.test(t)}))return!0;var i=t.match(n);return i?i.some(function(a){var o=a.match(/\.createElement\(\s*(['"`])([^'"`]+)\1/);return o&&!r.has(o[2].toLowerCase())}):!1},VX=function(){return VX=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},VX.apply(this,arguments)};function Emt(t,e){var n=jt.useRef(null),r=jt.useRef(null),i=jt.useRef(null),a=e.onReady,o=e.onEvent,s=function(u,f){var h;u===void 0&&(u="image/png");var d=(h=i.current)===null||h===void 0?void 0:h.getElementsByTagName("canvas")[0];return d?.toDataURL(u,f)},l=function(u,f,h){u===void 0&&(u="download"),f===void 0&&(f="image/png");var d=u;u.indexOf(".")===-1&&(d="".concat(u,".").concat(f.split("/")[1]));var p=s(f,h),g=document.createElement("a");return g.href=p,g.download=d,document.body.appendChild(g),g.click(),document.body.removeChild(g),g=null,d},c=function(u,f){f===void 0&&(f=!1);var h=Object.keys(u),d=f;h.forEach(function(p){var g=u[p];p==="tooltip"&&(d=!0),Ve.isFunction(g)&&bmt("".concat(g))?u[p]=function(){for(var v=[],y=0;y<arguments.length;y++)v[y]=arguments[y];return fmt(g.apply(void 0,v),d)}:Ve.isArray(g)?g.forEach(function(v){c(v,d)}):Ve.isObject(g)?c(g,d):d=f})};return jt.useEffect(function(){n.current&&!Ve.isEqual(r.current,e)&&(r.current=Ve.cloneDeep(e),c(e),n.current.update(e),n.current.render())},[e]),jt.useEffect(function(){if(!i.current)return function(){return null};r.current||(r.current=Ve.cloneDeep(e)),c(e);var u=new t(i.current,VX({},e));u.toDataURL=s,u.downloadImage=l,u.render(),n.current=u,a&&a(u);var f=function(h){o&&o(u,h)};return u.on("*",f),function(){n.current&&(n.current.destroy(),n.current.off("*",f),n.current=void 0)}},[]),{chart:n,container:i}}const xmt={field:"value",size:[1,1],round:!1,padding:0,sort:(t,e)=>e.value-t.value,as:["x","y"],ignoreParentValue:!0},Smt="nodeIndex",iM="childNodeCount",Tmt="nodeAncestor",hU="Invalid field: it must be a string!";function Amt(t,e){const{field:n,fields:r}=t;if($i(n))return n;if(Us(n))return console.warn(hU),n[0];if(console.warn(`${hU} will try to get fields instead.`),$i(r))return r;if(Us(r)&&r.length)return r[0];throw new TypeError(hU)}function wmt(t){const e=[];if(t&&t.each){let n,r;t.each(i=>{var a,o;i.parent!==n?(n=i.parent,r=0):r+=1;const s=sQ((((a=i.ancestors)===null||a===void 0?void 0:a.call(i))||[]).map(l=>e.find(c=>c.name===l.name)||l),({depth:l})=>l>0&&l<i.depth);i[Tmt]=s,i[iM]=((o=i.children)===null||o===void 0?void 0:o.length)||0,i[Smt]=r,e.push(i)})}else t&&t.eachNode&&t.eachNode(n=>{e.push(n)});return e}function Omt(t,e){e=VAe({},xmt,e);const n=e.as;if(!Us(n)||n.length!==2)throw new TypeError('Invalid as: it must be an array with 2 strings (e.g. [ "x", "y" ])!');let r;try{r=Amt(e)}catch(l){console.warn(l)}const a=(l=>eze().size(e.size).round(e.round).padding(e.padding)(LF(l).sum(c=>OR(c.children)?e.ignoreParentValue?0:c[r]-HAe(c.children,(u,f)=>u+f[r],0):c[r]).sort(e.sort)))(t),o=n[0],s=n[1];return a.each(l=>{var c,u;l[o]=[l.x0,l.x1,l.x1,l.x0],l[s]=[l.y1,l.y1,l.y0,l.y0],l.name=l.name||((c=l.data)===null||c===void 0?void 0:c.name)||((u=l.data)===null||u===void 0?void 0:u.label),l.data.name=l.name,["x0","x1","y0","y1"].forEach(f=>{n.indexOf(f)===-1&&delete l[f]})}),wmt(a)}var Cmt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const TA="sunburst",tte="markType",FIe="path",sB="ancestor-node";function Rmt(t){const{data:e,encode:n}=t,{color:r,value:i}=n,o=Omt(e,{field:i,type:"hierarchy.partition",as:["x","y"]}),s=[];return o.forEach(l=>{var c,u,f,h;if(l.depth===0)return null;let d=l.data.name;const p=[d];let g=Object.assign({},l);for(;g.depth>1;)d=`${(c=g.parent.data)===null||c===void 0?void 0:c.name} / ${d}`,p.unshift((u=g.parent.data)===null||u===void 0?void 0:u.name),g=g.parent;const v=Object.assign(Object.assign(Object.assign({},Wp(l.data,[i])),{[FIe]:d,[sB]:g.data.name}),l);r&&r!==sB&&(v[r]=l.data[r]||((h=(f=l.parent)===null||f===void 0?void 0:f.data)===null||h===void 0?void 0:h[r])),s.push(v)}),s.map(l=>{const c=l.x.slice(0,2),u=[l.y[2],l.y[0]];return c[0]===c[1]&&(u[0]=u[1]=(l.y[2]+l.y[0])/2),Object.assign(Object.assign({},l),{x:c,y:u,fillOpacity:Math.pow(.85,l.depth)})})}const Bce={id:TA,encode:{x:"x",y:"y",key:FIe,color:sB,value:"value"},axis:{x:!1,y:!1},style:{[tte]:TA,stroke:"#fff",lineWidth:.5,fillOpacity:"fillOpacity",[iM]:iM,depth:"depth"},state:{active:{zIndex:2,stroke:"#000"},inactive:{zIndex:1,stroke:"#fff"}},legend:!1,interaction:{drillDown:!0},coordinate:{type:"polar",innerRadius:.2}},UIe=t=>{const{encode:e,data:n=[]}=t,r=Cmt(t,["encode","data"]),i=Object.assign(Object.assign({},r.coordinate),{innerRadius:Math.max(Wr(r,["coordinate","innerRadius"],.2),1e-5)}),a=Object.assign(Object.assign({},Bce.encode),e),{value:o}=a,s=Rmt({encode:a,data:n});return[Nt({},Bce,Object.assign(Object.assign({type:"rect",data:s,encode:a,tooltip:{title:"path",items:[l=>({name:o,value:l[o]})]}},r),{coordinate:i}))]};UIe.props={};var Mmt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const Pmt=t=>t.querySelectorAll(".element").filter(e=>Wr(e,["style",tte])===TA);function Nmt(t){return ai(t).select(`.${W_}`).node()}const Imt={rootText:"root",style:{fill:"rgba(0, 0, 0, 0.85)",fontSize:12,y:1},active:{fill:"rgba(0, 0, 0, 0.5)"}};function Lmt(t={}){const{breadCrumb:e={},isFixedColor:n=!1}=t,r=Nt({},Imt,e);return i=>{const{update:a,setState:o,container:s,view:l,options:c}=i,u=s.ownerDocument,f=Nmt(s),h=c.marks.find(({id:E})=>E===TA),{state:d}=h,p=u.createElement("g");f.appendChild(p);const g=(E,x)=>Mmt(this,void 0,void 0,function*(){if(p.removeChildren(),E){const T=u.createElement("text",{style:Object.assign({x:0,text:r.rootText,depth:0},r.style)});p.appendChild(T);let S="";const w=E?.split(" / ");let C=r.style.y,D=p.getBBox().width;const L=f.getBBox().width,B=w.map((I,U)=>{const $=u.createElement("text",{style:Object.assign(Object.assign({x:D,text:" / "},r.style),{y:C})});p.appendChild($),D+=$.getBBox().width,S=`${S}${I} / `;const X=u.createElement("text",{name:S.replace(/\s\/\s$/,""),style:Object.assign(Object.assign({text:I,x:D,depth:U+1},r.style),{y:C})});return p.appendChild(X),D+=X.getBBox().width,D>L&&(C=p.getBBox().height,D=0,$.attr({x:D,y:C}),D+=$.getBBox().width,X.attr({x:D,y:C}),D+=X.getBBox().width),X});[T,...B].forEach((I,U)=>{if(U===B.length)return;const $=Object.assign({},I.attributes);I.attr("cursor","pointer"),I.addEventListener("mouseenter",()=>{I.attr(r.active)}),I.addEventListener("mouseleave",()=>{I.attr($)}),I.addEventListener("click",()=>{g(I.name,Wr(I,["style","depth"]))})})}o("drillDown",T=>{const{marks:S}=T,w=S.map(C=>{if(C.id!==TA&&C.type!=="rect")return C;const{data:D}=C,L=Object.fromEntries(["color"].map(I=>[I,{domain:l.scale[I].getOptions().domain}])),B=D.filter(I=>{const U=I.path;return n||(I[sB]=U.split(" / ")[x]),E?new RegExp(`^${E}.+`).test(U):!0});return Nt({},C,n?{data:B,scale:L}:{data:B})});return Object.assign(Object.assign({},T),{marks:w})}),yield a()}),v=E=>{const x=E.target;if(Wr(x,["style",tte])!==TA||Wr(x,["markType"])!=="rect"||!Wr(x,["style",iM]))return;const T=Wr(x,["__data__","key"]),S=Wr(x,["style","depth"]);x.style.cursor="pointer",g(T,S)};f.addEventListener("click",v);const y=HF(Object.assign(Object.assign({},d.active),d.inactive)),_=()=>{Pmt(f).forEach(x=>{const T=Wr(x,["style",iM]);if(Wr(x,["style","cursor"])!=="pointer"&&T){x.style.cursor="pointer";const w=Wp(x.attributes,y);x.addEventListener("mouseenter",()=>{x.attr(d.active)}),x.addEventListener("mouseleave",()=>{x.attr(Nt(w,d.inactive))})}})};return f.addEventListener("mousemove",_),()=>{p.remove(),f.removeEventListener("click",v),f.removeEventListener("mousemove",_)}}}function kmt(){return{"interaction.drillDown":Lmt,"mark.sunburst":UIe}}var lB=function(){return lB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},lB.apply(this,arguments)},Dmt=MIe(BIe,lB(lB({},RIe()),kmt())),HC=function(){return HC=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},HC.apply(this,arguments)},bo=function(t){var e=Fmt(t),n=e.children,r=n===void 0?[]:n,i=Ve.omit(e,[].concat(jIe,uB.map(function(c){return c.key}))),a=function(c){var u;return(u=Hmt.find(function(f){return f.key===c}))===null||u===void 0?void 0:u.callback},o=function(c,u,f){var h=a(u);h?h(c,u,f):c[u]=S_({},c[u],f)},s=function(c){Object.keys(c).forEach(function(u){if(c[u]){var f=uB.find(function(_){return _.key===u});if(f){var h=f.type,d=f.extendedProperties,p=f.defaultShapeConfig,g=p===void 0?{}:p;if(h){var v=c[u].tooltip;r.push(l(S_({},Ve.pick(c,d),g,{type:h},c[u],{tooltip:v||!1})))}else if(Ve.isArray(c[u])){var y=c[u].some(function(_){return _.type==="text"});c[u].forEach(function(_){r.push(l(HC(HC(HC({},y?{data:[]}:{}),{tooltip:!1}),_)))})}}}})},l=function(c){return s(c),Object.keys(YX).forEach(function(u){var f=YX[u];if(!Ve.isUndefined(c[u]))if(Ve.isObject(f)){var h=f.value,d=f.target,p=h(c[u]);o(c,d,p)}else Ve.set(c,f,c[u])}),c};return r.forEach(function(c){var u=S_({},i,c);l(S_(c,u))}),s(e),Bmt(e),t},Fce=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Bmt=function(t){var e=t.children,n=e===void 0?[]:e,r=Object.keys(YX).concat(uB.map(function(i){return i.key}));return r.forEach(function(i){delete t[i]}),n.forEach(function(i){Object.keys(i).forEach(function(a){r.includes(a)&&delete i[a]})}),Object.keys(t).forEach(function(i){Fce(Fce([],jIe,!0),XX.map(function(a){return a.key}),!0).includes(i)||delete t[i]}),t},Fmt=function(t){var e=t.options,n=e.children,r=n===void 0?[]:n;return r.forEach(function(i){Object.keys(i).forEach(function(a){Ve.isArray(i[a])&&a!=="data"&&(i[a]=i[a].filter(function(o){return!o[hk]}))})}),e},Uce=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},Umt=function(t,e){if(Ve.isArray(e))return e},S_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Ve.mergeWith.apply(void 0,Uce(Uce([],t,!1),[Umt],!1))};function cB(t){switch(typeof t){case"function":return t;case"string":return function(e){return Ve.get(e,[t])};default:return function(){return t}}}var Y4=function(t){var e=t.options,n=e.data;return Ve.get(n,"value")||Ve.get(n,"type")!=="fetch"&&Ve.isPlainObject(n)&&Ve.set(e,"data.value",n),t},AA=function(){return AA=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},AA.apply(this,arguments)},jmt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},zmt=["renderer","plugins"],jIe=["width","height","autoFit","theme","inset","insetLeft","insetRight","insetTop","insetBottom","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","depth","title","clip","children","type","data","direction","plugins"],hk="__transform__",$mt="__skipDelCustomKeys__",W1=function(t,e){return Ve.isBoolean(e)?{type:t,available:e}:AA({type:t},e)},YX={xField:"encode.x",yField:"encode.y",colorField:"encode.color",angleField:"encode.y",keyField:"encode.key",y1Field:"encode.y1",sizeField:"encode.size",setsField:"encode.sets",shapeField:"encode.shape",seriesField:"encode.series",positionField:"encode.position",textField:"encode.text",valueField:"encode.value",binField:"encode.x",srcField:"encode.src",linkColorField:"encode.linkColor",fontSizeField:"encode.fontSize",coordinateType:"coordinate.type",radius:"coordinate.outerRadius",innerRadius:"coordinate.innerRadius",startAngle:"coordinate.startAngle",endAngle:"coordinate.endAngle",focusX:"coordinate.focusX",focusY:"coordinate.focusY",distortionX:"coordinate.distortionX",distortionY:"coordinate.distortionY",visual:"coordinate.visual",stack:{target:"transform",value:function(t){return W1("stackY",t)}},normalize:{target:"transform",value:function(t){return W1("normalizeY",t)}},percent:{target:"transform",value:function(t){return W1("normalizeY",t)}},group:{target:"transform",value:function(t){return W1("dodgeX",t)}},sort:{target:"transform",value:function(t){return W1("sortX",t)}},symmetry:{target:"transform",value:function(t){return W1("symmetryY",t)}},diff:{target:"transform",value:function(t){return W1("diffY",t)}},meta:{target:"scale",value:function(t){return t}},label:{target:"labels",value:function(t){return t}},shape:"style.shape",connectNulls:{target:"style",value:function(t){return Ve.isBoolean(t)?{connect:t}:t}},transpose:{target:"transpose",value:function(t){return W1("transpose",t)}}},dU=["xField","yField","seriesField","colorField","shapeField","keyField","positionField","meta","tooltip","animate","stack","normalize","percent","group","sort","symmetry","diff"],uB=[{key:"annotations",extendedProperties:[]},{key:"line",type:"line",extendedProperties:dU},{key:"connector",type:"connector",extendedProperties:[]},{key:"point",type:"point",extendedProperties:dU,defaultShapeConfig:{shapeField:"circle"}},{key:"area",type:"area",extendedProperties:dU}],Hmt=[{key:"transform",callback:function(t,e,n){var r;t[e]=t[e]||[];var i=n.available,a=i===void 0?!0:i,o=jmt(n,["available"]);if(a)t[e].push(AA((r={},r[hk]=!0,r),o));else{var s=t[e].indexOf(function(l){return l.type===n.type});s!==-1&&t[e].splice(s,1)}}},{key:"labels",callback:function(t,e,n){var r;if(!n||Ve.isArray(n)){t[e]=n||[];return}n.text||(n.text=t.yField),t[e]=t[e]||[],t[e].push(AA((r={},r[hk]=!0,r),n))}},{key:"transpose",callback:function(t,e,n){var r;n.available?t.coordinate={transform:[AA((r={},r[hk]=!0,r),n)]}:t.coordinate={}}}],XX=[{key:"conversionTag",shape:"ConversionTag"},{key:"axisText",shape:"BidirectionalBarAxisText"}],Gmt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),fB=function(){return fB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},fB.apply(this,arguments)},Wmt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},zIe=(function(t){Gmt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Wmt(n,["style"]);return t.call(this,fB({style:fB({text:"",fontSize:12,textBaseline:"middle",textAlign:"center",fill:"#000",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1},r)},i))||this}return e})(Jg),Vmt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hB=function(){return hB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},hB.apply(this,arguments)},Ymt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},Xmt=(function(t){Vmt(e,t);function e(n){n===void 0&&(n={});var r=n.style,i=Ymt(n,["style"]);return t.call(this,hB({style:hB({fill:"#eee"},r)},i))||this}return e})(Mw),qmt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),$Ie=(function(t){qmt(e,t);function e(n,r,i){var a=t.call(this,{style:S_(i,r)})||this;return a.chart=n,a}return e.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this)},e.prototype.disconnectedCallback=function(){},e.prototype.attributeChangedCallback=function(n){},e.prototype.update=function(n,r){var i;return this.attr(S_({},this.attributes,n||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,r)},e.prototype.clear=function(){this.removeChildren()},e.prototype.getElementsLayout=function(){var n=this.chart.getContext().canvas,r=n.document.getElementsByClassName("element"),i=[];return r.forEach(function(a){var o=a.getBBox(),s=o.x,l=o.y,c=o.width,u=o.height,f=a.__data__;i.push({bbox:o,x:s,y:l,width:c,height:u,key:f.key,data:f})}),i},e.prototype.bindEvents=function(n,r){},e})(d4),Zmt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),dB=function(){return dB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},dB.apply(this,arguments)},Kmt=(function(t){Zmt(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.getConversionTagLayout=function(){var n=this.direction==="vertical",r=Array.from(this.getElementsLayout()).sort(function(T,S){return n?T.y-S.y:T.x-S.x}),i=r[0],a=i.x,o=i.y,s=i.height,l=i.width,c=i.data,u=["items",0,"value"],f=Ve.get(c,u),h=n?r[1].y-o-s:r[1].x-a-l,d=[],p=this.attributes,g=p.size,v=g===void 0?40:g,y=p.arrowSize,_=y===void 0?20:y,E=p.spacing,x=E===void 0?4:E;return r.forEach(function(T,S){if(S>0){var w=T.x,C=T.y,D=T.height,L=T.width,B=T.data,I=T.key,U=Ve.get(B,u),$=v/2;if(n){var X=w+L/2,N=C;d.push({points:[[X+$,N-h+x],[X+$,N-_-x],[X,N-x],[X-$,N-_-x],[X-$,N-h+x]],center:[X,N-h/2],width:h,value:[f,U],key:I})}else{var X=w,N=C+D/2;d.push({points:[[w-h+x,N-$],[w-_-x,N-$],[X-x,N],[w-_-x,N+$],[w-h+x,N+$]],center:[X-h/2,N],width:h,value:[f,U],key:I})}f=U}}),d},e.prototype.render=function(){this.setDirection(),this.drawConversionTag()},e.prototype.setDirection=function(){var n=this.chart.getCoordinate(),r=Ve.get(n,"options.transformations"),i="horizontal";r.forEach(function(a){a.includes("transpose")&&(i="vertical")}),this.direction=i},e.prototype.drawConversionTag=function(){var n=this,r=this.getConversionTagLayout(),i=this.attributes,a=i.style,o=i.text,s=o.style,l=o.formatter;r.forEach(function(c){var u=c.points,f=c.center,h=c.value,d=c.key,p=h[0],g=h[1],v=f[0],y=f[1],_=new Xmt({style:dB({points:u,fill:"#eee"},a),id:"polygon-".concat(d)}),E=new zIe({style:dB({x:v,y,text:Ve.isFunction(l)?l(p,g):(g/p*100).toFixed(2)+"%"},s),id:"text-".concat(d)});n.appendChild(_),n.appendChild(E)})},e.prototype.update=function(){this.clear(),this.drawConversionTag()},e.prototype.destroy=function(){this.clear()},e.tag="ConversionTag",e})($Ie),qX=32,jce=16,zce=48,Qmt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),GC=function(){return GC=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},GC.apply(this,arguments)},Jmt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},e0t=(function(t){Qmt(e,t);function e(n,r){return t.call(this,n,r,{type:e.tag})||this}return e.prototype.render=function(){this.drawText()},e.prototype.getBidirectionalBarAxisTextLayout=function(){var n=this.attributes.layout,r=n==="vertical",i=this.getElementsLayout(),a=r?Ve.uniqBy(i,"x"):Ve.uniqBy(i,"y"),o=["title"],s=[],l=this.chart.getContext().views,c=Ve.get(l,[0,"layout"]),u=c.width,f=c.height;return a.forEach(function(h){var d=h.x,p=h.y,g=h.height,v=h.width,y=h.data,_=h.key,E=Ve.get(y,o);r?s.push({x:d+v/2,y:f,text:E,key:_}):s.push({x:u,y:p+g/2,text:E,key:_})}),Ve.uniqBy(s,"text").length!==s.length&&(s=Object.values(Ve.groupBy(s,"text")).map(function(h){var d,p=h.reduce(function(g,v){return g+(r?v.x:v.y)},0);return GC(GC({},h[0]),(d={},d[r?"x":"y"]=p/h.length,d))})),s},e.prototype.transformLabelStyle=function(n){var r={},i=/^label[A-Z]/;return Object.keys(n).forEach(function(a){i.test(a)&&(r[a.replace("label","").replace(/^[A-Z]/,function(o){return o.toLowerCase()})]=n[a])}),r},e.prototype.drawText=function(){var n=this,r=this.getBidirectionalBarAxisTextLayout(),i=this.attributes,a=i.layout,o=i.labelFormatter,s=Jmt(i,["layout","labelFormatter"]);r.forEach(function(l){var c=l.x,u=l.y,f=l.text,h=l.key,d=new zIe({style:GC({x:c,y:u,text:Ve.isFunction(o)?o(f):f,wordWrap:!0,wordWrapWidth:a==="horizontal"?qX*2:120,maxLines:2,textOverflow:"ellipsis"},n.transformLabelStyle(s)),id:"text-".concat(h)});n.appendChild(d)})},e.prototype.destroy=function(){this.clear()},e.prototype.update=function(){this.destroy(),this.drawText()},e.tag="BidirectionalBarAxisText",e})($Ie),t0t={ConversionTag:Kmt,BidirectionalBarAxisText:e0t},n0t=(function(){function t(e,n){this.container=new Map,this.chart=e,this.config=n,this.init()}return t.prototype.init=function(){var e=this;XX.forEach(function(n){var r,i=n.key,a=n.shape,o=e.config[i];if(o){var s=new t0t[a](e.chart,o),l=e.chart.getContext().canvas;l.appendChild(s),e.container.set(i,s)}else(r=e.container.get(i))===null||r===void 0||r.clear()})},t.prototype.update=function(){var e=this;this.container.size&&XX.forEach(function(n){var r=n.key,i=e.container.get(r);i?.update()})},t.prototype.destroy=function(){this.container.forEach(function(e){e.destroy()}),this.container.clear()},t})(),r0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),qT=function(){return qT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qT.apply(this,arguments)},$ce="data-chart-source-type",to=(function(t){r0t(e,t);function e(n,r){var i=t.call(this)||this;return i.eventListeners=[],i.bindedEvents=!1,i.container=typeof n=="string"?document.getElementById(n):n,i.options=i.mergeOption(r),i.createG2(),i.bindEvents(),i}return e.prototype.getChartOptions=function(){return qT(qT({},Ve.pick(this.options,zmt)),{container:this.container})},e.prototype.getSpecOptions=function(){return this.type==="base"||this[$mt]?qT(qT({},this.options),this.getChartOptions()):this.options},e.prototype.createG2=function(){if(!this.container)throw Error("The container is not initialized!");this.chart=new Dmt(this.getChartOptions()),this.container.setAttribute($ce,"Ant Design Charts")},e.prototype.bindEvents=function(){var n=this;if(this.chart){var r=function(i){i?.type&&n.emit(i.type,i)};this.chart.on("*",r),this.eventListeners.push(function(){var i;(i=n.chart)===null||i===void 0||i.off("*",r)})}},e.prototype.getBaseOptions=function(){return{type:"view",autoFit:!0}},e.prototype.getDefaultOptions=function(){},e.prototype.render=function(){var n=this;this.type!=="base"&&this.execAdaptor(),this.chart.options(this.getSpecOptions()),this.chart.render().then(function(){n.annotation?n.annotation.update():n.annotation=new n0t(n.chart,n.options),n.bindSizeSensor()})},e.prototype.update=function(n){this.options=this.mergeOption(n)},e.prototype.mergeOption=function(n){return S_({},this.getBaseOptions(),this.getDefaultOptions(),n)},e.prototype.changeData=function(n){this.chart.changeData(n)},e.prototype.changeSize=function(n,r){this.chart.changeSize(n,r)},e.prototype.destroy=function(){this.eventListeners.forEach(function(n){return n()}),this.eventListeners=[],this.annotation&&typeof this.annotation.destroy=="function"&&this.annotation.destroy(),this.annotation=null,this.chart.destroy(),this.off(),this.bindedEvents=!1,this.container.removeAttribute($ce)},e.prototype.execAdaptor=function(){var n=this.getSchemaAdaptor();n({chart:this.chart,options:this.options})},e.prototype.triggerResize=function(){this.chart.forceFit()},e.prototype.bindSizeSensor=function(){var n=this;if(!this.bindedEvents){var r=this.options.autoFit,i=r===void 0?!0:r;if(i){var a=function(){n.annotation&&n.annotation.update()};this.chart.on(ao.AFTER_CHANGE_SIZE,a),this.eventListeners.push(function(){var o;(o=n.chart)===null||o===void 0||o.off(ao.AFTER_CHANGE_SIZE,a)}),this.bindedEvents=!0}}},e})(Jm),i0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),a0t=(function(t){i0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="base",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return function(n){return n}},e})(to),ZX=function(){return ZX=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ZX.apply(this,arguments)};function o0t(t){var e=t.options,n=e.stack,r=e.tooltip,i=e.xField;if(!n)return t;var a=uB.map(function(s){return s.type}).filter(function(s){return!!s}),o=!1;return a.forEach(function(s){e[s]&&(o=!0,Ve.set(e,[s,"stack"],ZX({y1:"y"},typeof n=="object"?n:{})))}),o&&!Ve.isBoolean(r)&&!r&&Ve.set(e,"tooltip",{title:i,items:[{channel:"y"}]}),t}function ml(t){return Ve.flow(o0t)(t)}function s0t(t){var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}],t}function l0t(t){s0t(t);var e=t.options.layout,n=e===void 0?"horizontal":e;return t.options.children.forEach(function(r){var i;!((i=r?.coordinate)===null||i===void 0)&&i.transform&&(r.coordinate.transform=n!=="horizontal"?void 0:[{type:"transpose"}])}),t}function c0t(t){return Ve.flow(ml,bo)(t)}var u0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),f0t=(function(t){u0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="area",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"area"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return c0t},e})(to),ZT=function(){return ZT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ZT.apply(this,arguments)};function HIe(t){var e=function(n){var r=n.options;Ve.get(r,"children.length")>1&&Ve.set(r,"children",[{type:"interval"}]);var i=r.scale,a=r.markBackground,o=r.data,s=r.children,l=r.yField,c=Ve.get(i,"y.domain",[]);if(a&&c.length&&Ve.isArray(o)){var u="domainMax",f=o.map(function(h){var d;return ZT(ZT({originData:ZT({},h)},Ve.omit(h,l)),(d={},d[u]=c[c.length-1],d))});s.unshift(ZT({type:"interval",data:f,yField:u,tooltip:!1,style:{fill:"#eee"},label:!1},a))}return n};return Ve.flow(e,ml,bo)(t)}var h0t=function(){var t=function(e,n){return function(r){var i=e.fill,a=i===void 0?"#2888FF":i,o=e.stroke,s=e.fillOpacity,l=s===void 0?1:s,c=e.strokeOpacity,u=c===void 0?.2:c,f=e.pitch,h=f===void 0?8:f,d=r[0],p=r[1],g=r[2],v=r[3],y=(p[1]-d[1])/2,_=n.document,E=_.createElement("g",{}),x=_.createElement("polygon",{style:{points:[d,[d[0]-h,d[1]+y],[g[0]-h,d[1]+y],v],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u,inset:30}}),T=_.createElement("polygon",{style:{points:[[d[0]-h,d[1]+y],p,g,[g[0]-h,d[1]+y]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u}}),S=_.createElement("polygon",{style:{points:[d,[d[0]-h,d[1]+y],p,[d[0]+h,d[1]+y]],fill:a,fillOpacity:l-.2}});return E.appendChild(x),E.appendChild(T),E.appendChild(S),E}};NIe("shape.interval.bar25D",t)},d0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();h0t();var p0t=(function(t){d0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Bar",n}return e.getDefaultOptions=function(){return{type:"view",coordinate:{transform:[{type:"transpose"}]},children:[{type:"interval"}],scale:{y:{nice:!0}},axis:{y:{title:!1},x:{title:!1}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return HIe},e})(to),g0t=function(){var t=function(e,n){return function(r){var i=e.fill,a=i===void 0?"#2888FF":i,o=e.stroke,s=e.fillOpacity,l=s===void 0?1:s,c=e.strokeOpacity,u=c===void 0?.2:c,f=e.pitch,h=f===void 0?8:f,d=r[1][0]-r[0][0],p=d/2+r[0][0],g=n.document,v=g.createElement("g",{}),y=g.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[p,r[1][1]+h],[p,r[3][1]+h],[r[3][0],r[3][1]]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u,inset:30}}),_=g.createElement("polygon",{style:{points:[[p,r[1][1]+h],[r[1][0],r[1][1]],[r[2][0],r[2][1]],[p,r[2][1]+h]],fill:a,fillOpacity:l,stroke:o,strokeOpacity:u}}),E=g.createElement("polygon",{style:{points:[[r[0][0],r[0][1]],[p,r[1][1]-h],[r[1][0],r[1][1]],[p,r[1][1]+h]],fill:a,fillOpacity:l-.2}});return v.appendChild(_),v.appendChild(y),v.appendChild(E),v}};NIe("shape.interval.column25D",t)},v0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})();g0t();var m0t=(function(t){v0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0},elementHighlight:{background:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return HIe},e})(to);function y0t(t){var e=function(r){var i=r.options,a=i.children,o=a===void 0?[]:a,s=i.legend;return s&&o.forEach(function(l){if(!Ve.get(l,"colorField")){var c=Ve.get(l,"yField");Ve.set(l,"colorField",function(){return c})}}),r},n=function(r){var i=r.options,a=i.annotations,o=a===void 0?[]:a,s=i.children,l=s===void 0?[]:s,c=i.scale,u=!1;return Ve.get(c,"y.key")||l.forEach(function(f,h){if(!Ve.get(f,"scale.y.key")){var d="child".concat(h,"Scale");Ve.set(f,"scale.y.key",d);var p=f.annotations,g=p===void 0?[]:p;g.length>0&&(Ve.set(f,"scale.y.independent",!1),g.forEach(function(v){Ve.set(v,"scale.y.key",d)})),!u&&o.length>0&&Ve.get(f,"scale.y.independent")===void 0&&(u=!0,Ve.set(f,"scale.y.independent",!1),o.forEach(function(v){Ve.set(v,"scale.y.key",d)}))}}),r};return Ve.flow(e,n,ml,bo)(t)}var _0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Hce=(function(t){_0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="DualAxes",n}return e.getDefaultOptions=function(){return{type:"view",axis:{y:{title:!1,tick:!1},x:{title:!1}},scale:{y:{independent:!0,nice:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return y0t},e})(to);function b0t(t){var e=function(a){var o=a.options,s=o.xField,l=o.colorField;return l||Ve.set(o,"colorField",s),a},n=function(a){var o=a.options,s=o.compareField,l=o.transform,c=o.isTransposed,u=c===void 0?!0:c,f=o.coordinate;return l||(s?Ve.set(o,"transform",[]):Ve.set(o,"transform",[{type:"symmetryY"}])),!f&&u&&Ve.set(o,"coordinate",{transform:[{type:"transpose"}]}),a},r=function(a){var o=a.options,s=o.compareField,l=o.seriesField,c=o.data,u=o.children,f=o.yField,h=o.isTransposed,d=h===void 0?!0:h;if(s||l){var p=Object.values(Ve.groupBy(c,function(g){return g[s||l]}));u[0].data=p[0],u.push({type:"interval",data:p[1],yField:function(g){return-g[f]}}),delete o.compareField,delete o.data}return l&&(Ve.set(o,"type","spaceFlex"),Ve.set(o,"ratio",[1,1]),Ve.set(o,"direction",d?"row":"col"),delete o.seriesField),a},i=function(a){var o=a.options,s=o.tooltip,l=o.xField,c=o.yField;return s||Ve.set(o,"tooltip",{title:!1,items:[function(u){return{name:u[l],value:u[c]}}]}),a};return Ve.flow(e,n,r,i,ml,bo)(t)}var E0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),x0t=(function(t){E0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="column",n}return e.getDefaultOptions=function(){return{type:"view",scale:{x:{padding:0}},animate:{enter:{type:"fadeIn"}},axis:!1,shapeField:"funnel",label:{position:"inside",transform:[{type:"contrastReverse"}]},children:[{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return b0t},e})(to);function S0t(t){return Ve.flow(ml,bo)(t)}var T0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),A0t=(function(t){T0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="line",n}return e.getDefaultOptions=function(){return{type:"view",scale:{y:{nice:!0}},interaction:{tooltip:{shared:!0}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"line"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return S0t},e})(to),xp=function(){return xp=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},xp.apply(this,arguments)};function w0t(t){var e=function(n){var r=n.options,i=r.angleField,a=r.data,o=r.label,s=r.tooltip,l=r.colorField,c=cB(l);if(Ve.isArray(a)&&a.length>0){var u=a.reduce(function(d,p){return d+p[i]},0);if(u===0){var f=a.map(function(d){var p;return xp(xp({},d),(p={},p[i]=1,p))});if(Ve.set(r,"data",f),o){var h=l===Ve.get(o,"text");Ve.set(r,"label",xp(xp({},o),h?{}:{formatter:function(){return 0}}))}s!==!1&&(Ve.isFunction(s)?Ve.set(r,"tooltip",function(d,p,g){var v;return s(xp(xp({},d),(v={},v[i]=0,v)),p,g.map(function(y){var _;return xp(xp({},y),(_={},_[i]=0,_))}))}):Ve.set(r,"tooltip",xp(xp({},s),{items:[function(d,p,g){return{name:c(d,p,g),value:0}}]})))}}return n};return Ve.flow(e,bo)(t)}var O0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),C0t=(function(t){O0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="pie",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"theta"},transform:[{type:"stackY",reverse:!0}],animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return w0t},e})(to);function R0t(t){return Ve.flow(ml,bo)(t)}var M0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),P0t=(function(t){M0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="scatter",n}return e.getDefaultOptions=function(){return{axis:{y:{title:!1},x:{title:!1}},legend:{size:!1},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return R0t},e})(to);function N0t(t){var e=function(n){return Ve.set(n,"options.coordinate",{type:Ve.get(n,"options.coordinateType","polar")}),n};return Ve.flow(e,bo)(t)}var I0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),L0t=(function(t){I0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radar",n}return e.getDefaultOptions=function(){return{axis:{x:{grid:!0,line:!0},y:{zIndex:1,title:!1,line:!0,nice:!0}},meta:{x:{padding:.5,align:0}},interaction:{tooltip:{style:{crosshairsLineDash:[4,4]}}},children:[{type:"line"}],coordinateType:"polar"}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return N0t},e})(to);function k0t(t){var e=function(n){var r=n.options,i=r.yField,a=r.children,o=r.style,s=o===void 0?{}:o,l=r.lineStyle,c=l===void 0?{}:l,u=i[0],f=i[1],h=i[2],d=i[3];return Ve.set(a,[0,"yField"],[h,d]),Ve.set(a,[0,"style"],c),Ve.set(a,[1,"yField"],[u,f]),Ve.set(a,[1,"style"],s),delete r.yField,delete r.lineStyle,delete r.style,n};return Ve.flow(e,bo)(t)}var D0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),B0t=["#26a69a","#999999","#ef5350"],F0t=(function(t){D0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="stock",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{domain:[-1,0,1],range:B0t},y:{nice:!0}},children:[{type:"link"},{type:"interval"}],axis:{x:{title:!1,grid:!1},y:{title:!1,grid:!0,gridLineDash:null}},animate:{enter:{type:"scaleInY"}},interaction:{tooltip:{shared:!0,marker:!1,groupName:!1,crosshairs:!0}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return k0t},e})(to);function U0t(t){return Ve.flow(ml,bo)(t)}var j0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),z0t=(function(t){j0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyLine",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"line",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return U0t},e})(to);function $0t(t){return Ve.flow(ml,bo)(t)}var H0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),G0t=(function(t){H0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyArea",n}return e.getDefaultOptions=function(){return{type:"view",animate:{enter:{type:"growInX",duration:500}},children:[{type:"area",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return $0t},e})(to);function W0t(t){return Ve.flow(ml,bo)(t)}var V0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Y0t=(function(t){V0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyColumn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval",axis:!1}],padding:0,margin:0,tooltip:!1}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return W0t},e})(to),KX=function(){return KX=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},KX.apply(this,arguments)};function X0t(t){var e=function(n){var r=n.options,i=r.percent,a=r.color,o=a===void 0?[]:a;if(!i)return n;var s={scale:{color:{range:o.length?o:[]}},data:[1,i]};return Object.assign(r,KX({},s)),n};return Ve.flow(e,ml,bo)(t)}var q0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Z0t=(function(t){q0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyProgress",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,tooltip:!1,children:[{interaction:{tooltip:!1},coordinate:{transform:[{type:"transpose"}]},type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return X0t},e})(to),QX=function(){return QX=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},QX.apply(this,arguments)};function K0t(t){var e=function(r){var i=r.options,a=i.radius,o=a===void 0?.8:a;return Ve.set(r,"options.coordinate.innerRadius",o),r},n=function(r){var i=r.options,a=i.percent,o=i.color,s=o===void 0?[]:o;if(!a)return r;var l={scale:{color:{range:s.length?s:[]}},data:[1,a]};return Object.assign(i,QX({},l)),r};return Ve.flow(e,n,ml,bo)(t)}var Q0t=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),J0t=(function(t){Q0t(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="TinyRing",n}return e.getDefaultOptions=function(){return{type:"view",data:[],margin:0,padding:0,coordinate:{type:"theta"},animate:{enter:{type:"waveIn"}},interaction:{tooltip:!1},tooltip:!1,children:[{type:"interval",axis:!1,legend:!1,encode:{y:function(n){return n},color:function(n,r){return r}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return K0t},e})(to);function eyt(t){return Ve.flow(bo)(t)}var tyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),nyt=(function(t){tyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="rose",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"polar"},animate:{enter:{type:"waveIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return eyt},e})(to),pU="__start__",V1="__end__",JX="__waterfall_value__",pB=function(){return pB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},pB.apply(this,arguments)},ryt=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};function iyt(t){var e=function(i){var a=i.options,o=a.data,s=o===void 0?[]:o,l=a.yField;return s.length&&(s.reduce(function(c,u,f){var h,d=cB(l),p=d(u,f,s);if(f===0||u.isTotal)u[pU]=0,u[V1]=p,u[JX]=p;else{var g=(h=c[V1])!==null&&h!==void 0?h:d(c,f,s);u[pU]=g,u[V1]=g+p,u[JX]=c[V1]}return u},[]),Object.assign(a,{yField:[pU,V1]})),i},n=function(i){var a=i.options,o=a.data,s=o===void 0?[]:o,l=a.xField,c=a.children,u=a.linkStyle,f=ryt([],s,!0);return f.reduce(function(h,d,p){return p>0&&(d.x1=h[l],d.x2=d[l],d.y1=h[V1]),d},[]),f.shift(),c.push({type:"link",xField:["x1","x2"],yField:"y1",zIndex:-1,data:f,style:pB({stroke:"#697474"},u),label:!1,tooltip:!1}),i},r=function(i){var a=i.options,o=a.data,s=o===void 0?[]:o,l=a.connector;return l&&Ve.set(a,"connector",pB({xField:l.reverse?["x2","x1"]:["x1","x2"],yField:l.reverse?["y2","y1"]:["y1","y2"],data:[{x1:s[0].x,y1:s[0][V1],x2:s[s.length-1].x,y2:s[s.length-1][V1]}]},Ve.isObject(l)?l:{})),i};return Ve.flow(e,n,ml,r,bo)(t)}var ayt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),oyt=(function(t){ayt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="waterfall",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{field:JX,valueFormatter:"~s",name:"value"},axis:{y:{title:null,labelFormatter:"~s"},x:{title:null}},children:[{type:"interval",interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return iyt},e})(to);function syt(t){var e=function(n){var r=n.options,i=r.data,a=r.binNumber,o=r.binWidth,s=r.children,l=r.channel,c=l===void 0?"count":l,u=Ve.get(s,"[0].transform[0]",{});return Ve.isNumber(o)?(Ve.assign(u,{thresholds:Ve.ceil(Ve.divide(i.length,o)),y:c}),n):(Ve.isNumber(a)&&Ve.assign(u,{thresholds:a,y:c}),n)};return Ve.flow(e,ml,bo)(t)}var lyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),cyt=(function(t){lyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Histogram",n}return e.getDefaultOptions=function(){return{type:"view",autoFit:!0,axis:{y:{title:!1},x:{title:!1}},children:[{type:"rect",transform:[{type:"binX",y:"count"}],interaction:{elementHighlight:{background:!0}}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return syt},e})(to);function uyt(t){var e=function(r){var i=r.options,a=i.tooltip,o=a===void 0?{}:a,s=i.colorField,l=i.sizeField;return o&&!o.field&&(o.field=s||l),r},n=function(r){var i=r.options,a=i.mark,o=i.children;return a&&(o[0].type=a),r};return Ve.flow(e,n,ml,bo)(t)}var fyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),hyt=(function(t){fyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="heatmap",n}return e.getDefaultOptions=function(){return{type:"view",legend:null,tooltip:{valueFormatter:"~s"},axis:{y:{title:null,grid:!0},x:{title:null,grid:!0}},children:[{type:"point"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return uyt},e})(to);function dyt(t){var e=function(n){var r=n.options.boxType,i=r===void 0?"box":r;return n.options.children[0].type=i,n};return Ve.flow(e,ml,bo)(t)}var pyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),gyt=(function(t){pyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="box",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"box"}],axis:{y:{title:!1},x:{title:!1}},tooltip:{items:[{name:"min",channel:"y"},{name:"q1",channel:"y1"},{name:"q2",channel:"y2"},{name:"q3",channel:"y3"},{name:"max",channel:"y4"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return dyt},e})(to),vyt=function(t){var e=t.options,n=e.data,r=[{type:"custom",callback:function(a){return{links:a}}}];if(Ve.isArray(n))n.length>0?Ve.set(e,"data",{value:n,transform:r}):delete e.children;else if(Ve.get(n,"type")==="fetch"&&Ve.get(n,"value")){var i=Ve.get(n,"transform");Ve.isArray(i)||Ve.set(n,"transform",r)}return t};function myt(t){return Ve.flow(Y4,vyt,ml,bo)(t)}var yyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),_yt=(function(t){yyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="sankey",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sankey"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return myt},e})(to),zE=function(){return zE=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},zE.apply(this,arguments)},dk=["#f0efff","#5B8FF9","#3D76DD"];function gU(t,e,n,r){r===void 0&&(r=!0);var i=0,a=!1,o=Ve.map(t,function(s){var l,c,u=Ve.get(s,[e]);if(Ve.isNil(u))return[];if(Ve.isString(u)){var f=Number(u);return isNaN(f)?[]:(l={},l[n]=s[n],l[e]=f,l)}return Ve.isArray(u)?(a=!0,i=Math.max(i,u.length),Ve.map(r?u.sort(function(h,d){return d-h}):u,function(h,d){var p;return p={},p[n]=s[n],p[e]=h,p.index=d,p})):(i=Math.max(1,i),c={},c[n]=s[n],c[e]=u,c)}).flat();return a?[o.map(function(s){return zE({index:0},s)}),i]:[o,i]}function vU(t,e){return new Array(t).fill("").map(function(n,r){return Ve.isArray(e)?e[r%e.length]:e})}function byt(t){var e=function(i){var a=i.options,o=a.color,s=a.rangeField,l=s===void 0?"ranges":s,c=a.measureField,u=c===void 0?"measures":c,f=a.targetField,h=f===void 0?"targets":f,d=a.xField,p=d===void 0?"title":d,g=a.mapField,v=a.data,y=gU(v,l,p),_=y[0],E=y[1],x=gU(v,u,p,!1),T=x[0],S=x[1],w=gU(v,h,p,!1),C=w[0],D=w[1],L=Ve.get(o,[l],dk[0]),B=Ve.get(o,[u],dk[1]),I=Ve.get(o,[h],dk[2]),U=[vU(E,L),vU(S,B),vU(D,I)].flat();return a.children=Ve.map(a.children,function($,X){var N=[_,T,C][X],M=[l,u,h][X];return zE(zE({},$),{data:N,encode:zE(zE({},$.encode||{}),{x:p,y:M,color:function(k){var z=k.index,j=Ve.isNumber(z)?"".concat(M,"_").concat(z):M;return g?Ve.get(g,[M,z],j):j}})})}),Ve.set(a,"scale.color.range",U),a.legend.color.itemMarker=function($){return g&&Ve.includes(g?.[h],$)||$?.replace(/\_\d$/,"")===h?"line":"square"},i},n=function(i){var a=i.options.transpose,o=a===void 0?!0:a;return o||Ve.set(i,"options.children[2].shapeField","hyphen"),i},r=function(i){var a=i.options,o=a.range,s=o===void 0?{}:o,l=a.measure,c=l===void 0?{}:l,u=a.target,f=u===void 0?{}:u,h=a.children;return a.children=[s,c,f].map(function(d,p){return S_(h[p],d)}),i};return Ve.flow(e,n,r,l0t,bo)(t)}var Eyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),xyt=(function(t){Eyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="bullet",n}return e.getDefaultOptions=function(){return{type:"view",scale:{color:{range:dk}},legend:{color:{itemMarker:function(n){return n==="targets"?"line":"square"}}},axis:{y:{title:!1},x:{title:!1}},children:[{type:"interval",style:{maxWidth:30,zIndex:-2},axis:{y:{grid:!0,gridLineWidth:2}}},{type:"interval",style:{maxWidth:20,zIndex:-1},transform:[{type:"stackY"}]},{type:"point",encode:{size:8,shape:"line"}}],interaction:{tooltip:{shared:!0}},coordinate:{transform:[{type:"transpose"}]}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return byt},e})(to);function Syt(t){var e=function(n){var r=n.options.data;return n.options.data={value:r},n};return Ve.flow(e,ml,bo)(t)}var Tyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Ayt=(function(t){Tyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Gauge",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"gauge"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Syt},e})(to);function wyt(t){var e=function(n){var r=n.options.percent;return Ve.isNumber(r)&&(Ve.set(n,"options.data",r),delete n.options.percent),n};return Ve.flow(e,ml,bo)(t)}var Oyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Cyt=(function(t){Oyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Liquid",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"liquid"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return wyt},e})(to);function Ryt(t){return Ve.flow(ml,bo)(t)}var Myt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Pyt=(function(t){Myt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="WordCloud",n}return e.getDefaultOptions=function(){return{type:"view",legend:!1,children:[{type:"wordCloud"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Ryt},e})(to);function Nyt(t){return Ve.flow(Y4,ml,bo)(t)}var Iyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Lyt=(function(t){Iyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="treemap",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"treemap"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Nyt},e})(to),s_=function(){return s_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},s_.apply(this,arguments)},kyt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Dyt(t){var e=function(i){var a=i.options,o=a.startAngle,s=a.maxAngle,l=a.coordinate,c=Ve.isNumber(o)?o/(2*Math.PI)*360:-90,u=Ve.isNumber(s)?(Number(s)+c)/180*Math.PI:Math.PI;return Ve.set(i,["options","coordinate"],s_(s_({},l),{endAngle:u,startAngle:o??-Math.PI/2})),i},n=function(i){var a=i.options,o=a.tooltip,s=a.xField,l=a.yField,c=cB(s),u=cB(l);return o||Ve.set(a,"tooltip",{title:!1,items:[function(f,h,d){return{name:c(f,h,d),value:u(f,h,d)}}]}),i},r=function(i){var a=i.options,o=a.markBackground,s=a.children,l=a.scale,c=a.coordinate,u=a.xField,f=Ve.get(l,"y.domain",[]);if(o){var h=o.style,d=kyt(o,["style"]);s.unshift(s_({type:"interval",xField:u,yField:f[f.length-1],style:s_({fillOpacity:.4,fill:"#e0e4ee"},h),coordinate:s_(s_({},c),{startAngle:-Math.PI/2,endAngle:1.5*Math.PI}),animate:!1},d))}return i};return Ve.flow(e,n,r,ml,bo)(t)}var Byt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Fyt=(function(t){Byt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="radial",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"interval"}],coordinate:{type:"radial",innerRadius:.1,outerRadius:1,endAngle:Math.PI},animate:{enter:{type:"waveIn",duration:800}},axis:{y:{nice:!0,labelAutoHide:!0,labelAutoRotate:!1},x:{title:!1,nice:!0,labelAutoRotate:!1,labelAutoHide:{type:"equidistance",cfg:{minGap:6}}}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Dyt},e})(to);function Uyt(t){return Ve.flow(Y4,bo)(t)}var jyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),zyt=(function(t){jyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="CirclePacking",n}return e.getDefaultOptions=function(){return{legend:!1,type:"view",children:[{type:"pack",encode:{color:"depth"}}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Uyt},e})(to),gB=function(){return gB=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},gB.apply(this,arguments)};function mU(t,e){return t||e}function $yt(t){var e=function(n){var r=n.options,i=r.xField,a=r.yField,o=r.colorField,s=r.seriesField,l=r.children,c=l?.map(function(u){return gB(gB({},u),{xField:i,yField:a,seriesField:mU(s,o),colorField:mU(o,s),data:u.type==="density"?{transform:[{type:"kde",field:a,groupBy:[i,mU(s,o)]}]}:u.data})}).filter(function(u){return r.box||u.type==="density"});return Ve.set(r,"children",c),delete r.box,n};return Ve.flow(e,ml,bo)(t)}var Hyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Gyt=(function(t){Hyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="violin",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"density",sizeField:"size",tooltip:!1},{type:"boxplot",shapeField:"violin",style:{opacity:.5,point:!1}}],animate:{enter:{type:"fadeIn"}}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return $yt},e})(to),WC=function(){return WC=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},WC.apply(this,arguments)},Wyt=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))};function Vyt(t){var e=function(a){var o=a.options,s=o.yField,l=o.children;return l.forEach(function(c,u){Ve.set(c,"yField",s[u])}),a},n=function(a){var o=a.options,s=o.yField,l=o.children,c=o.data;if(Ve.isPlainObject(c))return a;var u=Ve.isArray(Ve.get(c,[0]))?c:[c,c];return l.forEach(function(f,h){Ve.set(f,"data",Wyt([],u[h].map(function(d){return WC({groupKey:s[h]},d)}),!0))}),a},r=function(a){var o=a.options,s=o.yField,l=s[0],c=s[1],u=o.tooltip;return u||Ve.set(o,"tooltip",{items:[{field:l,value:l},{field:c,value:c}]}),a},i=function(a){var o=a.options,s=o.children,l=o.layout,c=o.coordinate.transform,u=o.paddingBottom,f=u===void 0?zce:u,h=o.paddingLeft,d=h===void 0?zce:h,p=o.axis;Ve.set(o,"axisText",WC(WC({},p?.x||{}),{layout:l}));var g=s[0],v=s[1];if(l==="vertical")Ve.set(o,"direction","col"),Ve.set(o,"paddingLeft",d),Ve.set(o,"coordinate.transform",c.filter(function(T){return T.type!=="transpose"})),Ve.set(g,"paddingBottom",jce),Ve.set(v,"paddingTop",jce),Ve.set(v,"axis.x.position","top"),Ve.set(v,"scale.y.range",[0,1]);else{Ve.set(o,"paddingBottom",f),Ve.set(g,"scale.y.range",[0,1]);var y=g.paddingRight,_=y===void 0?qX:y,E=v.paddingLeft,x=E===void 0?qX:E;Ve.set(g,"paddingRight",_),Ve.set(g,"axis.x.position","right"),Ve.set(v,"paddingLeft",x)}return a};return Ve.flow(e,n,r,i,ml,bo)(t)}var Yyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Xyt=(function(t){Yyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="BidirectionalBar",n}return e.getDefaultOptions=function(){return{type:"spaceFlex",coordinate:{transform:[{type:"transpose"}]},scale:{y:{nice:!0}},direction:"row",layout:"horizontal",legend:!1,axis:{y:{title:!1},x:{title:!1,label:!1}},children:[{type:"interval"},{type:"interval"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Vyt},e})(to),T_;(function(t){t.color="key",t.d="path"})(T_||(T_={}));function qyt(t){var e=function(n){var r=n.options,i=r.data,a=r.setsField,o=r.sizeField;return Ve.isArray(i)&&(Ve.set(r,"data",{type:"inline",value:i,transform:[{type:"venn",sets:a,size:o,as:[T_.color,T_.d]}]}),Ve.set(r,"colorField",T_.color),Ve.set(r,["children","0","encode","d"],T_.d)),n};return Ve.flow(e,bo)(t)}var Zyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),Kyt=(function(t){Zyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="venn",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"path"}],legend:{color:{itemMarker:"circle"}},encode:{color:T_.color,d:T_.d}}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return qyt},e})(to);function Qyt(t){return Ve.flow(Y4,bo)(t)}var Jyt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),e1t=(function(t){Jyt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type="Sunburst",n}return e.getDefaultOptions=function(){return{type:"view",children:[{type:"sunburst"}]}},e.prototype.getDefaultOptions=function(){return e.getDefaultOptions()},e.prototype.getSchemaAdaptor=function(){return Qyt},e})(to),t1t={Base:a0t,Line:A0t,Column:m0t,Pie:C0t,Area:f0t,Bar:p0t,DualAxes:Hce,Funnel:x0t,Scatter:P0t,Radar:L0t,Rose:nyt,Stock:F0t,TinyLine:z0t,TinyArea:G0t,TinyColumn:Y0t,TinyProgress:Z0t,TinyRing:J0t,Waterfall:oyt,Histogram:cyt,Heatmap:hyt,Box:gyt,Sankey:_yt,Bullet:xyt,Gauge:Ayt,Liquid:Cyt,WordCloud:Pyt,Treemap:Lyt,RadialBar:Fyt,CirclePacking:zyt,Violin:Gyt,BidirectionalBar:Xyt,Venn:Kyt,Mix:Hce,Sunburst:e1t},VC=function(){return VC=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},VC.apply(this,arguments)},Gce=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},n1t=jt.forwardRef(function(t,e){var n=t.chartType,r=n===void 0?"Base":n,i=Gce(t,["chartType"]),a=i.containerStyle,o=a===void 0?{height:"inherit",flex:1}:a,s=i.containerAttributes,l=s===void 0?{}:s,c=i.className,u=i.loading,f=i.loadingTemplate,h=i.errorTemplate,d=i.onReady,p=Gce(i,["containerStyle","containerAttributes","className","loading","loadingTemplate","errorTemplate","onReady"]),g=Emt(t1t[r],VC(VC({},p),{onReady:function(y){e&&(typeof e=="function"?e(y):e.current=y),d?.(y)}})),v=g.container;return et.createElement(gmt,{errorTemplate:h},u&&et.createElement(dmt,{loadingTemplate:f,theme:i.theme,loading:u}),et.createElement("div",VC({className:c,style:o,ref:v},l)))}),r1t=jt.createContext({});function i1t(){return jt.useContext(r1t)}var eq=function(){return eq=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},eq.apply(this,arguments)};function a1t(t){var e=t.yField,n=t.data,r=Ve.isArray(n)&&n.length>0&&Ve.isString(e)&&!Ve.get(t,"scale.y.domainMax"),i=Object.isFrozen(t)?eq({},t):t;return r&&n.reduce(function(a,o){return a+o[e]},0)===0?Ve.set(i,"scale.y.domainMax",1):r&&n.reduce(function(a,o){return a+o[e]},0)!==0&&Ve.set(i,"scale.y.domainMax",void 0),i}var YC=function(){return YC=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},YC.apply(this,arguments)};function Ld(t){return t.charAt(0).toLowerCase()+t.slice(1),jt.forwardRef(function(e,n){var r,i,a=i1t(),o=jt.useMemo(function(){return t.charAt(0).toLowerCase()+t.slice(1)},[t]),s=Ve.flow([a1t])(e),l=YC(YC({},(r=a?.common)!==null&&r!==void 0?r:{}),(i=a?.[o])!==null&&i!==void 0?i:{});return et.createElement(n1t,YC({},l,s,{chartType:t,ref:n}))})}var o1t=Ld("Area"),s1t=Ld("Bar"),l1t=Ld("Column"),c1t=Ld("DualAxes"),u1t=Ld("Line"),f1t=Ld("Pie"),h1t=Ld("Scatter"),d1t=Ld("Histogram"),p1t=Ld("Box"),g1t=Ld("Liquid"),v1t=Ld("WordCloud"),m1t=Ld("Treemap"),y1t=Ld("Venn"),GIe=2,_1t=function(){return et.createElement("svg",{width:"8px",height:"9px",style:{transform:"rotate(180deg)",marginRight:GIe},viewBox:"0 0 8 9",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},et.createElement("g",{transform:"translate(-2.000000, -2.000000)"},et.createElement("polygon",{fill:"currentColor",points:"6 11 9.5 2 2.5 2"})))},b1t=function(){return et.createElement("svg",{width:"8px",height:"9px",viewBox:"0 0 8 9",style:{marginRight:GIe},version:"1.1",xmlns:"http://www.w3.org/2000/svg"},et.createElement("g",{transform:"translate(-2.000000, -2.000000)"},et.createElement("polygon",{fill:"currentColor",points:"6 11 9.5 2 2.5 2"})))},wl={fontSizeBase:14,chart:{proportionShadowColor:"#CDDDFD",proportionFillColor:"#3471F9",lineStrokeColor:"#5B8FF9"},light:{primaryColor:"#1677FF",default88Color:"rgba(0, 0, 0, 0.88)",default65Color:"rgba(0, 0, 0, 0.65)",posColor:"#FA541C",negColor:"#13A8A8",conclusionColor:"#1F0352"}};function Wce(t,e){var n;return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t==null||(n=t.currentStyle)===null||n===void 0?void 0:n[e]}function Vce(t){return t?.endsWith("px")}function Yce(t){var e=t.replace(/px$/,""),n=Number(e);if(!Number.isNaN(n))return n}function E1t(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:wl.fontSizeBase,n="font-size",r=Wce(t,n);if(r&&Vce(r)){var i=Yce(r);if(i)return i}var a=Wce(window.document.body,n);if(a&&Vce(a)){var o=Yce(a);if(o)return o}return e}var x1t=["children"];function tq(){return tq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tq.apply(this,arguments)}function S1t(t,e){if(t==null)return{};var n=T1t(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function T1t(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function A1t(t,e){return R1t(t)||C1t(t,e)||O1t(t,e)||w1t()}function w1t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O1t(t,e){if(t){if(typeof t=="string")return Xce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xce(t,e)}}function Xce(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function C1t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function R1t(t){if(Array.isArray(t))return t}var WIe=function(){var e=jt.useRef(null),n=jt.useState(wl.fontSizeBase),r=A1t(n,2),i=r[0],a=r[1];jt.useLayoutEffect(function(){e.current&&a(E1t(e.current,wl.fontSizeBase))},[]);var o=function(l){var c=l.children,u=S1t(l,x1t);return et.createElement("svg",tq({style:{margin:"0px 4px",transform:"translate(0px, 0.125em)"},ref:e},u),c)};return[o,i]};function qce(t,e){return I1t(t)||N1t(t,e)||P1t(t,e)||M1t()}function M1t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P1t(t,e){if(t){if(typeof t=="string")return Zce(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zce(t,e)}}function Zce(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N1t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function I1t(t){if(Array.isArray(t))return t}var Kce=function(e,n){return function(r){var i=qce(e,2),a=i[0],o=i[1],s=qce(n,2),l=s[0],c=s[1];return l===c?(o-a)/2:r/(c-l)*(o-a)}};function aM(t){"@babel/helpers - typeof";return aM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},aM(t)}function nq(t,e){return D1t(t)||k1t(t,e)||VIe(t,e)||L1t()}function L1t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k1t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function D1t(t){if(Array.isArray(t))return t}function yU(t){return U1t(t)||F1t(t)||VIe(t)||B1t()}function B1t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function VIe(t,e){if(t){if(typeof t=="string")return rq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rq(t,e)}}function F1t(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function U1t(t){if(Array.isArray(t))return rq(t)}function rq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j1t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function z1t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YIe(r.key),r)}}function $1t(t,e,n){return e&&z1t(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function SE(t,e,n){return e=YIe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YIe(t){var e=H1t(t,"string");return aM(e)=="symbol"?e:String(e)}function H1t(t,e){if(aM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(aM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qce=2,Jce=(function(){function t(e,n){j1t(this,t),SE(this,"data",[]),SE(this,"size",wl.fontSizeBase),SE(this,"height",this.size),SE(this,"width",this.getWidth()),SE(this,"xScale",void 0),SE(this,"yScale",void 0),SE(this,"points",[]),this.size=e,n&&(this.data=n,this.compute())}return $1t(t,[{key:"getWidth",value:function(){var n;return Math.max(this.size*2,((n=this.data)===null||n===void 0?void 0:n.length)*2)}},{key:"compute",value:function(){var n,r=this;if(this.data){this.height=this.size,this.width=this.getWidth(),this.xScale=Kce([0,this.width],[0,((n=this.data)===null||n===void 0?void 0:n.length)-1]);var i=[Math.min.apply(Math,yU(this.data)),Math.max.apply(Math,yU(this.data))],a=i[0],o=i[1];this.yScale=Kce([Qce,this.height-Qce],[a,o]),this.points=this.data.map(function(s,l){return[r.xScale(l),r.height-r.yScale(s)]})}}},{key:"getLinePath",value:function(){var n;if(!((n=this.data)!==null&&n!==void 0&&n.length)||!this.xScale||!this.yScale)return null;var r=this.points.reduce(function(i,a,o){var s=nq(a,2),l=s[0],c=s[1];return o===0?"M".concat(l," ").concat(c):"".concat(i," L ").concat(l," ").concat(c)},"");return r}},{key:"getPolygonPath",value:function(){var n;if(!((n=this.data)!==null&&n!==void 0&&n.length)||!this.xScale||!this.yScale)return null;var r=yU(this.points),i=this.points[this.points.length-1];r.push([i[0],this.height]),r.push([0,this.height]);var a=this.points[0];r.push(a);var o=r.reduce(function(s,l){var c=nq(l,2),u=c[0],f=c[1];return"".concat(s," ").concat(u,",").concat(f)},"");return o}},{key:"getContainer",value:function(){return[this.width,this.height]}}]),t})(),G1t=function(e,n){var r=jt.useState(new Jce(e,n)),i=nq(r,2),a=i[0],o=i[1];return jt.useEffect(function(){o(new Jce(e,n))},[e,n]),{width:a.getContainer()[0],height:a.getContainer()[1],linePath:a.getLinePath(),polygonPath:a.getPolygonPath()}};function W1t(t,e){return q1t(t)||X1t(t,e)||Y1t(t,e)||V1t()}function V1t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y1t(t,e){if(t){if(typeof t=="string")return eue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eue(t,e)}}function eue(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function X1t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function q1t(t){if(Array.isArray(t))return t}var tue="wsc-line-fill";function Z1t(t){if(Ve.isArray(t))return t;if(Ve.isString(t))try{var e=JSON.parse(t);if(Ve.isArray(e))return e}catch(n){console.warn(n,"".concat(t," is not a valid json string"))}}var K1t=function(e){var n=e.origin,r=WIe(),i=W1t(r,2),a=i[0],o=i[1],s=jt.useMemo(function(){return Z1t(n)},[n]),l=G1t(o,s),c=l.width,u=l.height,f=l.linePath,h=l.polygonPath;return Ve.size(s)>0&&et.createElement(a,{width:c,height:u},et.createElement("defs",null,et.createElement("linearGradient",{x1:"50%",y1:"0%",x2:"50%",y2:"122.389541%",id:tue},et.createElement("stop",{stopColor:wl.chart.lineStrokeColor,offset:"0%"}),et.createElement("stop",{stopColor:"#FFFFFF",stopOpacity:"0",offset:"100%"}))),f&&et.createElement("path",{d:f,stroke:wl.chart.lineStrokeColor,fill:"transparent"}),h&&et.createElement("polygon",{points:h,fill:"url(#".concat(tue,")")}))};function Q1t(t){return typeof t!="number"?0:t>1?1:t<0?0:t}function J1t(t,e){var n=t/2,r=t/2,i=t/2,a=Q1t(e)*2*Math.PI,o=n+i*Math.sin(a),s=r-i*Math.cos(a),l=`
    M`.concat(n," ",0,`
    A `).concat(n," ").concat(r," 0 ").concat(a>Math.PI?1:0," 1 ").concat(o," ").concat(s,`
    L `).concat(n," ").concat(r,` Z
  `);return l}function e_t(t,e){return i_t(t)||r_t(t,e)||n_t(t,e)||t_t()}function t_t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n_t(t,e){if(t){if(typeof t=="string")return nue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nue(t,e)}}function nue(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r_t(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function i_t(t){if(Array.isArray(t))return t}function a_t(t,e){var n,r=Ve.toNumber(e);if(!Ve.isNaN(r))n=r;else{var i,a,o;if(Ve.isString(t)?o=t:Array.isArray(t)&&Ve.isString(t[0])&&(o=t[0]),(i=o)!==null&&i!==void 0&&(a=i.endsWith)!==null&&a!==void 0&&a.call(i,"%")){var s,l=(s=o)===null||s===void 0?void 0:s.replace(/%$/,""),c=Ve.toNumber(l);Ve.isNaN(c)||(n=c/100)}}return n}var o_t=function(e){var n=e.origin,r=e.children,i=jt.useMemo(function(){return a_t(r,n)},[r,n]),a=WIe(),o=e_t(a,2),s=o[0],l=o[1],c=l/2;return i&&et.createElement(s,{width:l,height:l},et.createElement("circle",{cx:c,cy:c,r:c,fill:wl.chart.proportionShadowColor}),i>=1?et.createElement("circle",{cx:c,cy:c,r:c,fill:wl.chart.proportionFillColor}):et.createElement("path",{d:J1t(l,i),fill:wl.chart.proportionFillColor}))},_U;function oM(t){"@babel/helpers - typeof";return oM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oM(t)}function Ff(t,e,n){return e=s_t(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s_t(t){var e=l_t(t,"string");return oM(e)=="symbol"?e:String(e)}function l_t(t,e){if(oM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(oM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var c_t="__statics",u_t=(_U={},Ff(Ff(Ff(Ff(Ff(Ff(Ff(Ff(Ff(Ff(_U,c_t,{"icon:arrow-up":_1t,"icon:arrow-down":b1t,"mini-chart:proportion":o_t,"mini-chart:line":K1t}),"metric_name",{color:wl.light.default88Color,fontWeight:500}),"metric_value",{color:wl.light.primaryColor}),"other_metric_value",{color:wl.light.default65Color}),"delta_value",{color:wl.light.default65Color}),"ratio_value",{color:wl.light.default65Color}),"delta_value_pos",{color:wl.light.posColor,prefix:"+"}),"delta_value_neg",{color:wl.light.negColor,prefix:"-"}),"ratio_value_pos",{color:wl.light.posColor,prefix:"icon:arrow-up"}),"ratio_value_neg",{color:wl.light.negColor,prefix:"icon:arrow-down"}),Ff(Ff(Ff(Ff(Ff(_U,"contribute_ratio",{color:wl.light.conclusionColor}),"trend_desc",{color:wl.light.conclusionColor,suffix:"mini-chart:line"}),"dim_value",{color:wl.light.default88Color}),"time_desc",{color:wl.light.default88Color}),"proportion",{suffix:"mini-chart:proportion"})),bU={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var rue;function f_t(){return rue||(rue=1,(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var a="",o=0;o<arguments.length;o++){var s=arguments[o];s&&(a=i(a,r(s)))}return a}function r(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return n.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var s in a)e.call(a,s)&&a[s]&&(o=i(o,s));return o}function i(a,o){return o?a?a+" "+o:a+o:a}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(bU)),bU.exports}var h_t=f_t();const XIe=Ni(h_t);var iq={},d_t=function(e){};function p_t(t,e){}function g_t(t,e){}function v_t(){iq={}}function qIe(t,e,n){!e&&!iq[n]&&(t(!1,n),iq[n]=!0)}function X4(t,e){qIe(p_t,t,e)}function m_t(t,e){qIe(g_t,t,e)}X4.preMessage=d_t;X4.resetWarned=v_t;X4.noteOnce=m_t;var EU={exports:{}},Zu={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iue;function y_t(){if(iue)return Zu;iue=1;var t=Jee();function e(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)c+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(l,c,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:f==null?null:""+f,children:l,containerInfo:c,implementation:u}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,c){if(l==="font")return"";if(typeof c=="string")return c==="use-credentials"?c:""}return Zu.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Zu.createPortal=function(l,c){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)throw Error(e(299));return a(l,c,null,u)},Zu.flushSync=function(l){var c=o.T,u=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=c,r.p=u,r.d.f()}},Zu.preconnect=function(l,c){typeof l=="string"&&(c?(c=c.crossOrigin,c=typeof c=="string"?c==="use-credentials"?c:"":void 0):c=null,r.d.C(l,c))},Zu.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Zu.preinit=function(l,c){if(typeof l=="string"&&c&&typeof c.as=="string"){var u=c.as,f=s(u,c.crossOrigin),h=typeof c.integrity=="string"?c.integrity:void 0,d=typeof c.fetchPriority=="string"?c.fetchPriority:void 0;u==="style"?r.d.S(l,typeof c.precedence=="string"?c.precedence:void 0,{crossOrigin:f,integrity:h,fetchPriority:d}):u==="script"&&r.d.X(l,{crossOrigin:f,integrity:h,fetchPriority:d,nonce:typeof c.nonce=="string"?c.nonce:void 0})}},Zu.preinitModule=function(l,c){if(typeof l=="string")if(typeof c=="object"&&c!==null){if(c.as==null||c.as==="script"){var u=s(c.as,c.crossOrigin);r.d.M(l,{crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0})}}else c==null&&r.d.M(l)},Zu.preload=function(l,c){if(typeof l=="string"&&typeof c=="object"&&c!==null&&typeof c.as=="string"){var u=c.as,f=s(u,c.crossOrigin);r.d.L(l,u,{crossOrigin:f,integrity:typeof c.integrity=="string"?c.integrity:void 0,nonce:typeof c.nonce=="string"?c.nonce:void 0,type:typeof c.type=="string"?c.type:void 0,fetchPriority:typeof c.fetchPriority=="string"?c.fetchPriority:void 0,referrerPolicy:typeof c.referrerPolicy=="string"?c.referrerPolicy:void 0,imageSrcSet:typeof c.imageSrcSet=="string"?c.imageSrcSet:void 0,imageSizes:typeof c.imageSizes=="string"?c.imageSizes:void 0,media:typeof c.media=="string"?c.media:void 0})}},Zu.preloadModule=function(l,c){if(typeof l=="string")if(c){var u=s(c.as,c.crossOrigin);r.d.m(l,{as:typeof c.as=="string"&&c.as!=="script"?c.as:void 0,crossOrigin:u,integrity:typeof c.integrity=="string"?c.integrity:void 0})}else r.d.m(l)},Zu.requestFormReset=function(l){r.d.r(l)},Zu.unstable_batchedUpdates=function(l,c){return l(c)},Zu.useFormState=function(l,c,u){return o.H.useFormState(l,c,u)},Zu.useFormStatus=function(){return o.H.useHostTransitionStatus()},Zu.version="19.2.1",Zu}var aue;function ZIe(){if(aue)return EU.exports;aue=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),EU.exports=y_t(),EU.exports}var KIe=ZIe();const __t=Ni(KIe),QIe=gTe({__proto__:null,default:__t},[KIe]);function b_t(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function E_t(t,e){if(!t)return!1;if(t.contains)return t.contains(e);for(var n=e;n;){if(n===t)return!0;n=n.parentNode}return!1}var oue="data-rc-order",sue="data-rc-priority",x_t="rc-util-key",aq=new Map;function JIe(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.mark;return e?e.startsWith("data-")?e:"data-".concat(e):x_t}function nte(t){if(t.attachTo)return t.attachTo;var e=document.querySelector("head");return e||document.body}function S_t(t){return t==="queue"?"prependQueue":t?"prepend":"append"}function rte(t){return Array.from((aq.get(t)||t).children).filter(function(e){return e.tagName==="STYLE"})}function eLe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!b_t())return null;var n=e.csp,r=e.prepend,i=e.priority,a=i===void 0?0:i,o=S_t(r),s=o==="prependQueue",l=document.createElement("style");l.setAttribute(oue,o),s&&a&&l.setAttribute(sue,"".concat(a)),n!=null&&n.nonce&&(l.nonce=n?.nonce),l.innerHTML=t;var c=nte(e),u=c.firstChild;if(r){if(s){var f=(e.styles||rte(c)).filter(function(h){if(!["prepend","prependQueue"].includes(h.getAttribute(oue)))return!1;var d=Number(h.getAttribute(sue)||0);return a>=d});if(f.length)return c.insertBefore(l,f[f.length-1].nextSibling),l}c.insertBefore(l,u)}else c.appendChild(l);return l}function T_t(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=nte(e);return(e.styles||rte(n)).find(function(r){return r.getAttribute(JIe(e))===t})}function A_t(t,e){var n=aq.get(t);if(!n||!E_t(document,n)){var r=eLe("",e),i=r.parentNode;aq.set(t,i),t.removeChild(r)}}function w_t(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=nte(n),i=rte(r),a=ze(ze({},n),{},{styles:i});A_t(r,a);var o=T_t(e,a);if(o){var s,l;if((s=a.csp)!==null&&s!==void 0&&s.nonce&&o.nonce!==((l=a.csp)===null||l===void 0?void 0:l.nonce)){var c;o.nonce=(c=a.csp)===null||c===void 0?void 0:c.nonce}return o.innerHTML!==t&&(o.innerHTML=t),o}var u=eLe(t,a);return u.setAttribute(JIe(a),e),u}var tLe=jt.createContext({});const Gc=Math.round;function xU(t,e){const n=t.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],r=n.map(i=>parseFloat(i));for(let i=0;i<3;i+=1)r[i]=e(r[i]||0,n[i]||"",i);return n[3]?r[3]=n[3].includes("%")?r[3]/100:r[3]:r[3]=1,r}const lue=(t,e,n)=>n===0?t:t/100;function h2(t,e){const n=e||255;return t>n?n:t<0?0:t}class KT{constructor(e){Z(this,"isValid",!0),Z(this,"r",0),Z(this,"g",0),Z(this,"b",0),Z(this,"a",1),Z(this,"_h",void 0),Z(this,"_s",void 0),Z(this,"_l",void 0),Z(this,"_v",void 0),Z(this,"_max",void 0),Z(this,"_min",void 0),Z(this,"_brightness",void 0);function n(r){return r[0]in e&&r[1]in e&&r[2]in e}if(e)if(typeof e=="string"){let i=function(a){return r.startsWith(a)};const r=e.trim();/^#?[A-F\d]{3,8}$/i.test(r)?this.fromHexString(r):i("rgb")?this.fromRgbString(r):i("hsl")?this.fromHslString(r):(i("hsv")||i("hsb"))&&this.fromHsvString(r)}else if(e instanceof KT)this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a,this._h=e._h,this._s=e._s,this._l=e._l,this._v=e._v;else if(n("rgb"))this.r=h2(e.r),this.g=h2(e.g),this.b=h2(e.b),this.a=typeof e.a=="number"?h2(e.a,1):1;else if(n("hsl"))this.fromHsl(e);else if(n("hsv"))this.fromHsv(e);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(e))}setR(e){return this._sc("r",e)}setG(e){return this._sc("g",e)}setB(e){return this._sc("b",e)}setA(e){return this._sc("a",e,1)}setHue(e){const n=this.toHsv();return n.h=e,this._c(n)}getLuminance(){function e(a){const o=a/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)}const n=e(this.r),r=e(this.g),i=e(this.b);return .2126*n+.7152*r+.0722*i}getHue(){if(typeof this._h>"u"){const e=this.getMax()-this.getMin();e===0?this._h=0:this._h=Gc(60*(this.r===this.getMax()?(this.g-this.b)/e+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/e+2:(this.r-this.g)/e+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const e=this.getMax()-this.getMin();e===0?this._s=0:this._s=e/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()-e/100;return i<0&&(i=0),this._c({h:n,s:r,l:i,a:this.a})}lighten(e=10){const n=this.getHue(),r=this.getSaturation();let i=this.getLightness()+e/100;return i>1&&(i=1),this._c({h:n,s:r,l:i,a:this.a})}mix(e,n=50){const r=this._c(e),i=n/100,a=s=>(r[s]-this[s])*i+this[s],o={r:Gc(a("r")),g:Gc(a("g")),b:Gc(a("b")),a:Gc(a("a")*100)/100};return this._c(o)}tint(e=10){return this.mix({r:255,g:255,b:255,a:1},e)}shade(e=10){return this.mix({r:0,g:0,b:0,a:1},e)}onBackground(e){const n=this._c(e),r=this.a+n.a*(1-this.a),i=a=>Gc((this[a]*this.a+n[a]*n.a*(1-this.a))/r);return this._c({r:i("r"),g:i("g"),b:i("b"),a:r})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}clone(){return this._c(this)}toHexString(){let e="#";const n=(this.r||0).toString(16);e+=n.length===2?n:"0"+n;const r=(this.g||0).toString(16);e+=r.length===2?r:"0"+r;const i=(this.b||0).toString(16);if(e+=i.length===2?i:"0"+i,typeof this.a=="number"&&this.a>=0&&this.a<1){const a=Gc(this.a*255).toString(16);e+=a.length===2?a:"0"+a}return e}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const e=this.getHue(),n=Gc(this.getSaturation()*100),r=Gc(this.getLightness()*100);return this.a!==1?`hsla(${e},${n}%,${r}%,${this.a})`:`hsl(${e},${n}%,${r}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(e,n,r){const i=this.clone();return i[e]=h2(n,r),i}_c(e){return new this.constructor(e)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(e){const n=e.replace("#","");function r(i,a){return parseInt(n[i]+n[a||i],16)}n.length<6?(this.r=r(0),this.g=r(1),this.b=r(2),this.a=n[3]?r(3)/255:1):(this.r=r(0,1),this.g=r(2,3),this.b=r(4,5),this.a=n[6]?r(6,7)/255:1)}fromHsl({h:e,s:n,l:r,a:i}){if(this._h=e%360,this._s=n,this._l=r,this.a=typeof i=="number"?i:1,n<=0){const h=Gc(r*255);this.r=h,this.g=h,this.b=h}let a=0,o=0,s=0;const l=e/60,c=(1-Math.abs(2*r-1))*n,u=c*(1-Math.abs(l%2-1));l>=0&&l<1?(a=c,o=u):l>=1&&l<2?(a=u,o=c):l>=2&&l<3?(o=c,s=u):l>=3&&l<4?(o=u,s=c):l>=4&&l<5?(a=u,s=c):l>=5&&l<6&&(a=c,s=u);const f=r-c/2;this.r=Gc((a+f)*255),this.g=Gc((o+f)*255),this.b=Gc((s+f)*255)}fromHsv({h:e,s:n,v:r,a:i}){this._h=e%360,this._s=n,this._v=r,this.a=typeof i=="number"?i:1;const a=Gc(r*255);if(this.r=a,this.g=a,this.b=a,n<=0)return;const o=e/60,s=Math.floor(o),l=o-s,c=Gc(r*(1-n)*255),u=Gc(r*(1-n*l)*255),f=Gc(r*(1-n*(1-l))*255);switch(s){case 0:this.g=f,this.b=c;break;case 1:this.r=u,this.b=c;break;case 2:this.r=c,this.b=f;break;case 3:this.r=c,this.g=u;break;case 4:this.r=f,this.g=c;break;case 5:default:this.g=c,this.b=u;break}}fromHsvString(e){const n=xU(e,lue);this.fromHsv({h:n[0],s:n[1],v:n[2],a:n[3]})}fromHslString(e){const n=xU(e,lue);this.fromHsl({h:n[0],s:n[1],l:n[2],a:n[3]})}fromRgbString(e){const n=xU(e,(r,i)=>i.includes("%")?Gc(r/100*255):r);this.r=n[0],this.g=n[1],this.b=n[2],this.a=n[3]}}var jI=2,cue=.16,O_t=.05,C_t=.05,R_t=.15,nLe=5,rLe=4,M_t=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function uue(t,e,n){var r;return Math.round(t.h)>=60&&Math.round(t.h)<=240?r=n?Math.round(t.h)-jI*e:Math.round(t.h)+jI*e:r=n?Math.round(t.h)+jI*e:Math.round(t.h)-jI*e,r<0?r+=360:r>=360&&(r-=360),r}function fue(t,e,n){if(t.h===0&&t.s===0)return t.s;var r;return n?r=t.s-cue*e:e===rLe?r=t.s+cue:r=t.s+O_t*e,r>1&&(r=1),n&&e===nLe&&r>.1&&(r=.1),r<.06&&(r=.06),Math.round(r*100)/100}function hue(t,e,n){var r;return n?r=t.v+C_t*e:r=t.v-R_t*e,r=Math.max(0,Math.min(1,r)),Math.round(r*100)/100}function P_t(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=new KT(t),i=r.toHsv(),a=nLe;a>0;a-=1){var o=new KT({h:uue(i,a,!0),s:fue(i,a,!0),v:hue(i,a,!0)});n.push(o)}n.push(r);for(var s=1;s<=rLe;s+=1){var l=new KT({h:uue(i,s),s:fue(i,s),v:hue(i,s)});n.push(l)}return e.theme==="dark"?M_t.map(function(c){var u=c.index,f=c.amount;return new KT(e.backgroundColor||"#141414").mix(n[u],f).toHexString()}):n.map(function(c){return c.toHexString()})}var oq=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];oq.primary=oq[5];function iLe(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}function N_t(t){return iLe(t)instanceof ShadowRoot}function I_t(t){return N_t(t)?iLe(t):null}function L_t(t){return t.replace(/-(.)/g,function(e,n){return n.toUpperCase()})}function k_t(t,e){X4(t,"[@ant-design/icons] ".concat(e))}function due(t){return Zk(t)==="object"&&typeof t.name=="string"&&typeof t.theme=="string"&&(Zk(t.icon)==="object"||typeof t.icon=="function")}function pue(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(t).reduce(function(e,n){var r=t[n];switch(n){case"class":e.className=r,delete e.class;break;default:delete e[n],e[L_t(n)]=r}return e},{})}function sq(t,e,n){return n?et.createElement(t.tag,ze(ze({key:e},pue(t.attrs)),n),(t.children||[]).map(function(r,i){return sq(r,"".concat(e,"-").concat(t.tag,"-").concat(i))})):et.createElement(t.tag,ze({key:e},pue(t.attrs)),(t.children||[]).map(function(r,i){return sq(r,"".concat(e,"-").concat(t.tag,"-").concat(i))}))}function aLe(t){return P_t(t)[0]}function oLe(t){return t?Array.isArray(t)?t:[t]:[]}var D_t=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,B_t=function(e){var n=jt.useContext(tLe),r=n.csp,i=n.prefixCls,a=n.layer,o=D_t;i&&(o=o.replace(/anticon/g,i)),a&&(o="@layer ".concat(a,` {
`).concat(o,`
}`)),jt.useEffect(function(){var s=e.current,l=I_t(s);w_t(o,"@ant-design-icons",{prepend:!a,csp:r,attachTo:l})},[])},F_t=["icon","className","onClick","style","primaryColor","secondaryColor"],XC={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function U_t(t){var e=t.primaryColor,n=t.secondaryColor;XC.primaryColor=e,XC.secondaryColor=n||aLe(e),XC.calculated=!!n}function j_t(){return ze({},XC)}var Fw=function(e){var n=e.icon,r=e.className,i=e.onClick,a=e.style,o=e.primaryColor,s=e.secondaryColor,l=Ro(e,F_t),c=jt.useRef(),u=XC;if(o&&(u={primaryColor:o,secondaryColor:s||aLe(o)}),B_t(c),k_t(due(n),"icon should be icon definiton, but got ".concat(n)),!due(n))return null;var f=n;return f&&typeof f.icon=="function"&&(f=ze(ze({},f),{},{icon:f.icon(u.primaryColor,u.secondaryColor)})),sq(f.icon,"svg-".concat(f.name),ze(ze({className:r,onClick:i,style:a,"data-icon":f.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l),{},{ref:c}))};Fw.displayName="IconReact";Fw.getTwoToneColors=j_t;Fw.setTwoToneColors=U_t;function sLe(t){var e=oLe(t),n=ir(e,2),r=n[0],i=n[1];return Fw.setTwoToneColors({primaryColor:r,secondaryColor:i})}function z_t(){var t=Fw.getTwoToneColors();return t.calculated?[t.primaryColor,t.secondaryColor]:t.primaryColor}var $_t=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];sLe(oq.primary);var q4=jt.forwardRef(function(t,e){var n=t.className,r=t.icon,i=t.spin,a=t.rotate,o=t.tabIndex,s=t.onClick,l=t.twoToneColor,c=Ro(t,$_t),u=jt.useContext(tLe),f=u.prefixCls,h=f===void 0?"anticon":f,d=u.rootClassName,p=XIe(d,h,Z(Z({},"".concat(h,"-").concat(r.name),!!r.name),"".concat(h,"-spin"),!!i||r.name==="loading"),n),g=o;g===void 0&&s&&(g=-1);var v=a?{msTransform:"rotate(".concat(a,"deg)"),transform:"rotate(".concat(a,"deg)")}:void 0,y=oLe(l),_=ir(y,2),E=_[0],x=_[1];return jt.createElement("span",wK({role:"img","aria-label":r.name},c,{ref:e,tabIndex:g,onClick:s,className:p}),jt.createElement(Fw,{icon:r,primaryColor:E,secondaryColor:x,style:v}))});q4.displayName="AntdIcon";q4.getTwoToneColor=z_t;q4.setTwoToneColor=sLe;var H_t=function(e,n){return jt.createElement(q4,wK({},e,{ref:n,icon:U7e}))},G_t=jt.forwardRef(H_t),of=function(){return of=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},of.apply(this,arguments)};function sM(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}var Rs="-ms-",qC="-moz-",wo="-webkit-",lLe="comm",Z4="rule",ite="decl",W_t="@import",cLe="@keyframes",V_t="@layer",uLe=Math.abs,ate=String.fromCharCode,lq=Object.assign;function Y_t(t,e){return Zc(t,0)^45?(((e<<2^Zc(t,0))<<2^Zc(t,1))<<2^Zc(t,2))<<2^Zc(t,3):0}function fLe(t){return t.trim()}function Y0(t,e){return(t=e.exec(t))?t[0]:t}function da(t,e,n){return t.replace(e,n)}function pk(t,e,n){return t.indexOf(e,n)}function Zc(t,e){return t.charCodeAt(e)|0}function ew(t,e,n){return t.slice(e,n)}function gm(t){return t.length}function hLe(t){return t.length}function vC(t,e){return e.push(t),t}function X_t(t,e){return t.map(e).join("")}function gue(t,e){return t.filter(function(n){return!Y0(n,e)})}var K4=1,tw=1,dLe=0,Yp=0,uc=0,Uw="";function Q4(t,e,n,r,i,a,o,s){return{value:t,root:e,parent:n,type:r,props:i,children:a,line:K4,column:tw,length:o,return:"",siblings:s}}function t_(t,e){return lq(Q4("",null,null,"",null,null,0,t.siblings),t,{length:-t.length},e)}function ET(t){for(;t.root;)t=t_(t.root,{children:[t]});vC(t,t.siblings)}function q_t(){return uc}function Z_t(){return uc=Yp>0?Zc(Uw,--Yp):0,tw--,uc===10&&(tw=1,K4--),uc}function Zg(){return uc=Yp<dLe?Zc(Uw,Yp++):0,tw++,uc===10&&(tw=1,K4++),uc}function tx(){return Zc(Uw,Yp)}function gk(){return Yp}function J4(t,e){return ew(Uw,t,e)}function cq(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function K_t(t){return K4=tw=1,dLe=gm(Uw=t),Yp=0,[]}function Q_t(t){return Uw="",t}function SU(t){return fLe(J4(Yp-1,uq(t===91?t+2:t===40?t+1:t)))}function J_t(t){for(;(uc=tx())&&uc<33;)Zg();return cq(t)>2||cq(uc)>3?"":" "}function ebt(t,e){for(;--e&&Zg()&&!(uc<48||uc>102||uc>57&&uc<65||uc>70&&uc<97););return J4(t,gk()+(e<6&&tx()==32&&Zg()==32))}function uq(t){for(;Zg();)switch(uc){case t:return Yp;case 34:case 39:t!==34&&t!==39&&uq(uc);break;case 40:t===41&&uq(t);break;case 92:Zg();break}return Yp}function tbt(t,e){for(;Zg()&&t+uc!==57;)if(t+uc===84&&tx()===47)break;return"/*"+J4(e,Yp-1)+"*"+ate(t===47?t:Zg())}function nbt(t){for(;!cq(tx());)Zg();return J4(t,Yp)}function rbt(t){return Q_t(vk("",null,null,null,[""],t=K_t(t),0,[0],t))}function vk(t,e,n,r,i,a,o,s,l){for(var c=0,u=0,f=o,h=0,d=0,p=0,g=1,v=1,y=1,_=0,E="",x=i,T=a,S=r,w=E;v;)switch(p=_,_=Zg()){case 40:if(p!=108&&Zc(w,f-1)==58){pk(w+=da(SU(_),"&","&\f"),"&\f",uLe(c?s[c-1]:0))!=-1&&(y=-1);break}case 34:case 39:case 91:w+=SU(_);break;case 9:case 10:case 13:case 32:w+=J_t(p);break;case 92:w+=ebt(gk()-1,7);continue;case 47:switch(tx()){case 42:case 47:vC(ibt(tbt(Zg(),gk()),e,n,l),l);break;default:w+="/"}break;case 123*g:s[c++]=gm(w)*y;case 125*g:case 59:case 0:switch(_){case 0:case 125:v=0;case 59+u:y==-1&&(w=da(w,/\f/g,"")),d>0&&gm(w)-f&&vC(d>32?mue(w+";",r,n,f-1,l):mue(da(w," ","")+";",r,n,f-2,l),l);break;case 59:w+=";";default:if(vC(S=vue(w,e,n,c,u,i,s,E,x=[],T=[],f,a),a),_===123)if(u===0)vk(w,e,S,S,x,a,f,s,T);else switch(h===99&&Zc(w,3)===110?100:h){case 100:case 108:case 109:case 115:vk(t,S,S,r&&vC(vue(t,S,S,0,0,i,s,E,i,x=[],f,T),T),i,T,f,s,r?x:T);break;default:vk(w,S,S,S,[""],T,0,s,T)}}c=u=d=0,g=y=1,E=w="",f=o;break;case 58:f=1+gm(w),d=p;default:if(g<1){if(_==123)--g;else if(_==125&&g++==0&&Z_t()==125)continue}switch(w+=ate(_),_*g){case 38:y=u>0?1:(w+="\f",-1);break;case 44:s[c++]=(gm(w)-1)*y,y=1;break;case 64:tx()===45&&(w+=SU(Zg())),h=tx(),u=f=gm(E=w+=nbt(gk())),_++;break;case 45:p===45&&gm(w)==2&&(g=0)}}return a}function vue(t,e,n,r,i,a,o,s,l,c,u,f){for(var h=i-1,d=i===0?a:[""],p=hLe(d),g=0,v=0,y=0;g<r;++g)for(var _=0,E=ew(t,h+1,h=uLe(v=o[g])),x=t;_<p;++_)(x=fLe(v>0?d[_]+" "+E:da(E,/&\f/g,d[_])))&&(l[y++]=x);return Q4(t,e,n,i===0?Z4:s,l,c,u,f)}function ibt(t,e,n,r){return Q4(t,e,n,lLe,ate(q_t()),ew(t,2,-2),0,r)}function mue(t,e,n,r,i){return Q4(t,e,n,ite,ew(t,0,r),ew(t,r+1,-1),r,i)}function pLe(t,e,n){switch(Y_t(t,e)){case 5103:return wo+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wo+t+t;case 4789:return qC+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return wo+t+qC+t+Rs+t+t;case 5936:switch(Zc(t,e+11)){case 114:return wo+t+Rs+da(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return wo+t+Rs+da(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return wo+t+Rs+da(t,/[svh]\w+-[tblr]{2}/,"lr")+t}case 6828:case 4268:case 2903:return wo+t+Rs+t+t;case 6165:return wo+t+Rs+"flex-"+t+t;case 5187:return wo+t+da(t,/(\w+).+(:[^]+)/,wo+"box-$1$2"+Rs+"flex-$1$2")+t;case 5443:return wo+t+Rs+"flex-item-"+da(t,/flex-|-self/g,"")+(Y0(t,/flex-|baseline/)?"":Rs+"grid-row-"+da(t,/flex-|-self/g,""))+t;case 4675:return wo+t+Rs+"flex-line-pack"+da(t,/align-content|flex-|-self/g,"")+t;case 5548:return wo+t+Rs+da(t,"shrink","negative")+t;case 5292:return wo+t+Rs+da(t,"basis","preferred-size")+t;case 6060:return wo+"box-"+da(t,"-grow","")+wo+t+Rs+da(t,"grow","positive")+t;case 4554:return wo+da(t,/([^-])(transform)/g,"$1"+wo+"$2")+t;case 6187:return da(da(da(t,/(zoom-|grab)/,wo+"$1"),/(image-set)/,wo+"$1"),t,"")+t;case 5495:case 3959:return da(t,/(image-set\([^]*)/,wo+"$1$`$1");case 4968:return da(da(t,/(.+:)(flex-)?(.*)/,wo+"box-pack:$3"+Rs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wo+t+t;case 4200:if(!Y0(t,/flex-|baseline/))return Rs+"grid-column-align"+ew(t,e)+t;break;case 2592:case 3360:return Rs+da(t,"template-","")+t;case 4384:case 3616:return n&&n.some(function(r,i){return e=i,Y0(r.props,/grid-\w+-end/)})?~pk(t+(n=n[e].value),"span",0)?t:Rs+da(t,"-start","")+t+Rs+"grid-row-span:"+(~pk(n,"span",0)?Y0(n,/\d+/):+Y0(n,/\d+/)-+Y0(t,/\d+/))+";":Rs+da(t,"-start","")+t;case 4896:case 4128:return n&&n.some(function(r){return Y0(r.props,/grid-\w+-start/)})?t:Rs+da(da(t,"-end","-span"),"span ","")+t;case 4095:case 3583:case 4068:case 2532:return da(t,/(.+)-inline(.+)/,wo+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(gm(t)-1-e>6)switch(Zc(t,e+1)){case 109:if(Zc(t,e+4)!==45)break;case 102:return da(t,/(.+:)(.+)-([^]+)/,"$1"+wo+"$2-$3$1"+qC+(Zc(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~pk(t,"stretch",0)?pLe(da(t,"stretch","fill-available"),e,n)+t:t}break;case 5152:case 5920:return da(t,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,i,a,o,s,l,c){return Rs+i+":"+a+c+(o?Rs+i+"-span:"+(s?l:+l-+a)+c:"")+t});case 4949:if(Zc(t,e+6)===121)return da(t,":",":"+wo)+t;break;case 6444:switch(Zc(t,Zc(t,14)===45?18:11)){case 120:return da(t,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+wo+(Zc(t,14)===45?"inline-":"")+"box$3$1"+wo+"$2$3$1"+Rs+"$2box$3")+t;case 100:return da(t,":",":"+Rs)+t}break;case 5719:case 2647:case 2135:case 3927:case 2391:return da(t,"scroll-","scroll-snap-")+t}return t}function vB(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function abt(t,e,n,r){switch(t.type){case V_t:if(t.children.length)break;case W_t:case ite:return t.return=t.return||t.value;case lLe:return"";case cLe:return t.return=t.value+"{"+vB(t.children,r)+"}";case Z4:if(!gm(t.value=t.props.join(",")))return""}return gm(n=vB(t.children,r))?t.return=t.value+"{"+n+"}":""}function obt(t){var e=hLe(t);return function(n,r,i,a){for(var o="",s=0;s<e;s++)o+=t[s](n,r,i,a)||"";return o}}function sbt(t){return function(e){e.root||(e=e.return)&&t(e)}}function lbt(t,e,n,r){if(t.length>-1&&!t.return)switch(t.type){case ite:t.return=pLe(t.value,t.length,n);return;case cLe:return vB([t_(t,{value:da(t.value,"@","@"+wo)})],r);case Z4:if(t.length)return X_t(n=t.props,function(i){switch(Y0(i,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ET(t_(t,{props:[da(i,/:(read-\w+)/,":"+qC+"$1")]})),ET(t_(t,{props:[i]})),lq(t,{props:gue(n,r)});break;case"::placeholder":ET(t_(t,{props:[da(i,/:(plac\w+)/,":"+wo+"input-$1")]})),ET(t_(t,{props:[da(i,/:(plac\w+)/,":"+qC+"$1")]})),ET(t_(t,{props:[da(i,/:(plac\w+)/,Rs+"input-$1")]})),ET(t_(t,{props:[i]})),lq(t,{props:gue(n,r)});break}return""})}}var vd={},nw=typeof process<"u"&&vd!==void 0&&(vd.REACT_APP_SC_ATTR||vd.SC_ATTR)||"data-styled",gLe="active",vLe="data-styled-version",e6="6.1.19",ote=`/*!sc*/
`,mB=typeof window<"u"&&typeof document<"u",cbt=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&vd!==void 0&&vd.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&vd.REACT_APP_SC_DISABLE_SPEEDY!==""?vd.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&vd.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&vd!==void 0&&vd.SC_DISABLE_SPEEDY!==void 0&&vd.SC_DISABLE_SPEEDY!==""&&vd.SC_DISABLE_SPEEDY!=="false"&&vd.SC_DISABLE_SPEEDY),ubt={},t6=Object.freeze([]),rw=Object.freeze({});function mLe(t,e,n){return n===void 0&&(n=rw),t.theme!==n.theme&&t.theme||e||n.theme}var yLe=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),fbt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,hbt=/(^-|-$)/g;function yue(t){return t.replace(fbt,"-").replace(hbt,"")}var dbt=/(a)(d)/gi,zI=52,_ue=function(t){return String.fromCharCode(t+(t>25?39:97))};function fq(t){var e,n="";for(e=Math.abs(t);e>zI;e=e/zI|0)n=_ue(e%zI)+n;return(_ue(e%zI)+n).replace(dbt,"$1-$2")}var TU,_Le=5381,QT=function(t,e){for(var n=e.length;n;)t=33*t^e.charCodeAt(--n);return t},bLe=function(t){return QT(_Le,t)};function ELe(t){return fq(bLe(t)>>>0)}function pbt(t){return t.displayName||t.name||"Component"}function AU(t){return typeof t=="string"&&!0}var xLe=typeof Symbol=="function"&&Symbol.for,SLe=xLe?Symbol.for("react.memo"):60115,gbt=xLe?Symbol.for("react.forward_ref"):60112,vbt={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},mbt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},TLe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ybt=((TU={})[gbt]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},TU[SLe]=TLe,TU);function bue(t){return("type"in(e=t)&&e.type.$$typeof)===SLe?TLe:"$$typeof"in t?ybt[t.$$typeof]:vbt;var e}var _bt=Object.defineProperty,bbt=Object.getOwnPropertyNames,Eue=Object.getOwnPropertySymbols,Ebt=Object.getOwnPropertyDescriptor,xbt=Object.getPrototypeOf,xue=Object.prototype;function ALe(t,e,n){if(typeof e!="string"){if(xue){var r=xbt(e);r&&r!==xue&&ALe(t,r,n)}var i=bbt(e);Eue&&(i=i.concat(Eue(e)));for(var a=bue(t),o=bue(e),s=0;s<i.length;++s){var l=i[s];if(!(l in mbt||n&&n[l]||o&&l in o||a&&l in a)){var c=Ebt(e,l);try{_bt(t,l,c)}catch{}}}}return t}function iw(t){return typeof t=="function"}function ste(t){return typeof t=="object"&&"styledComponentId"in t}function $E(t,e){return t&&e?"".concat(t," ").concat(e):t||e||""}function hq(t,e){if(t.length===0)return"";for(var n=t[0],r=1;r<t.length;r++)n+=t[r];return n}function lM(t){return t!==null&&typeof t=="object"&&t.constructor.name===Object.name&&!("props"in t&&t.$$typeof)}function dq(t,e,n){if(n===void 0&&(n=!1),!n&&!lM(t)&&!Array.isArray(t))return e;if(Array.isArray(e))for(var r=0;r<e.length;r++)t[r]=dq(t[r],e[r]);else if(lM(e))for(var r in e)t[r]=dq(t[r],e[r]);return t}function lte(t,e){Object.defineProperty(t,"toString",{value:e})}function WP(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(t," for more information.").concat(e.length>0?" Args: ".concat(e.join(", ")):""))}var Sbt=(function(){function t(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return t.prototype.indexOfGroup=function(e){for(var n=0,r=0;r<e;r++)n+=this.groupSizes[r];return n},t.prototype.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var r=this.groupSizes,i=r.length,a=i;e>=a;)if((a<<=1)<0)throw WP(16,"".concat(e));this.groupSizes=new Uint32Array(a),this.groupSizes.set(r),this.length=a;for(var o=i;o<a;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),l=(o=0,n.length);o<l;o++)this.tag.insertRule(s,n[o])&&(this.groupSizes[e]++,s++)},t.prototype.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],r=this.indexOfGroup(e),i=r+n;this.groupSizes[e]=0;for(var a=r;a<i;a++)this.tag.deleteRule(r)}},t.prototype.getGroup=function(e){var n="";if(e>=this.length||this.groupSizes[e]===0)return n;for(var r=this.groupSizes[e],i=this.indexOfGroup(e),a=i+r,o=i;o<a;o++)n+="".concat(this.tag.getRule(o)).concat(ote);return n},t})(),mk=new Map,yB=new Map,yk=1,$I=function(t){if(mk.has(t))return mk.get(t);for(;yB.has(yk);)yk++;var e=yk++;return mk.set(t,e),yB.set(e,t),e},Tbt=function(t,e){yk=e+1,mk.set(t,e),yB.set(e,t)},Abt="style[".concat(nw,"][").concat(vLe,'="').concat(e6,'"]'),wbt=new RegExp("^".concat(nw,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Obt=function(t,e,n){for(var r,i=n.split(","),a=0,o=i.length;a<o;a++)(r=i[a])&&t.registerName(e,r)},Cbt=function(t,e){for(var n,r=((n=e.textContent)!==null&&n!==void 0?n:"").split(ote),i=[],a=0,o=r.length;a<o;a++){var s=r[a].trim();if(s){var l=s.match(wbt);if(l){var c=0|parseInt(l[1],10),u=l[2];c!==0&&(Tbt(u,c),Obt(t,u,l[3]),t.getTag().insertRules(c,i)),i.length=0}else i.push(s)}}},Sue=function(t){for(var e=document.querySelectorAll(Abt),n=0,r=e.length;n<r;n++){var i=e[n];i&&i.getAttribute(nw)!==gLe&&(Cbt(t,i),i.parentNode&&i.parentNode.removeChild(i))}};function Rbt(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var wLe=function(t){var e=document.head,n=t||e,r=document.createElement("style"),i=(function(s){var l=Array.from(s.querySelectorAll("style[".concat(nw,"]")));return l[l.length-1]})(n),a=i!==void 0?i.nextSibling:null;r.setAttribute(nw,gLe),r.setAttribute(vLe,e6);var o=Rbt();return o&&r.setAttribute("nonce",o),n.insertBefore(r,a),r},Mbt=(function(){function t(e){this.element=wLe(e),this.element.appendChild(document.createTextNode("")),this.sheet=(function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,i=0,a=r.length;i<a;i++){var o=r[i];if(o.ownerNode===n)return o}throw WP(17)})(this.element),this.length=0}return t.prototype.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch{return!1}},t.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},t.prototype.getRule=function(e){var n=this.sheet.cssRules[e];return n&&n.cssText?n.cssText:""},t})(),Pbt=(function(){function t(e){this.element=wLe(e),this.nodes=this.element.childNodes,this.length=0}return t.prototype.insertRule=function(e,n){if(e<=this.length&&e>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},t.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},t.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},t})(),Nbt=(function(){function t(e){this.rules=[],this.length=0}return t.prototype.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},t.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},t.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},t})(),Tue=mB,Ibt={isServer:!mB,useCSSOMInjection:!cbt},_B=(function(){function t(e,n,r){e===void 0&&(e=rw),n===void 0&&(n={});var i=this;this.options=of(of({},Ibt),e),this.gs=n,this.names=new Map(r),this.server=!!e.isServer,!this.server&&mB&&Tue&&(Tue=!1,Sue(this)),lte(this,function(){return(function(a){for(var o=a.getTag(),s=o.length,l="",c=function(f){var h=(function(y){return yB.get(y)})(f);if(h===void 0)return"continue";var d=a.names.get(h),p=o.getGroup(f);if(d===void 0||!d.size||p.length===0)return"continue";var g="".concat(nw,".g").concat(f,'[id="').concat(h,'"]'),v="";d!==void 0&&d.forEach(function(y){y.length>0&&(v+="".concat(y,","))}),l+="".concat(p).concat(g,'{content:"').concat(v,'"}').concat(ote)},u=0;u<s;u++)c(u);return l})(i)})}return t.registerId=function(e){return $I(e)},t.prototype.rehydrate=function(){!this.server&&mB&&Sue(this)},t.prototype.reconstructWithOptions=function(e,n){return n===void 0&&(n=!0),new t(of(of({},this.options),e),this.gs,n&&this.names||void 0)},t.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},t.prototype.getTag=function(){return this.tag||(this.tag=(e=(function(n){var r=n.useCSSOMInjection,i=n.target;return n.isServer?new Nbt(i):r?new Mbt(i):new Pbt(i)})(this.options),new Sbt(e)));var e},t.prototype.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},t.prototype.registerName=function(e,n){if($I(e),this.names.has(e))this.names.get(e).add(n);else{var r=new Set;r.add(n),this.names.set(e,r)}},t.prototype.insertRules=function(e,n,r){this.registerName(e,n),this.getTag().insertRules($I(e),r)},t.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},t.prototype.clearRules=function(e){this.getTag().clearGroup($I(e)),this.clearNames(e)},t.prototype.clearTag=function(){this.tag=void 0},t})(),Lbt=/&/g,kbt=/^\s*\/\/.*$/gm;function OLe(t,e){return t.map(function(n){return n.type==="rule"&&(n.value="".concat(e," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(e," ")),n.props=n.props.map(function(r){return"".concat(e," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=OLe(n.children,e)),n})}function Dbt(t){var e,n,r,i=rw,a=i.options,o=a===void 0?rw:a,s=i.plugins,l=s===void 0?t6:s,c=function(h,d,p){return p.startsWith(n)&&p.endsWith(n)&&p.replaceAll(n,"").length>0?".".concat(e):h},u=l.slice();u.push(function(h){h.type===Z4&&h.value.includes("&")&&(h.props[0]=h.props[0].replace(Lbt,n).replace(r,c))}),o.prefix&&u.push(lbt),u.push(abt);var f=function(h,d,p,g){d===void 0&&(d=""),p===void 0&&(p=""),g===void 0&&(g="&"),e=g,n=d,r=new RegExp("\\".concat(n,"\\b"),"g");var v=h.replace(kbt,""),y=rbt(p||d?"".concat(p," ").concat(d," { ").concat(v," }"):v);o.namespace&&(y=OLe(y,o.namespace));var _=[];return vB(y,obt(u.concat(sbt(function(E){return _.push(E)})))),_};return f.hash=l.length?l.reduce(function(h,d){return d.name||WP(15),QT(h,d.name)},_Le).toString():"",f}var Bbt=new _B,pq=Dbt(),CLe=et.createContext({shouldForwardProp:void 0,styleSheet:Bbt,stylis:pq});CLe.Consumer;et.createContext(void 0);function gq(){return jt.useContext(CLe)}var Fbt=(function(){function t(e,n){var r=this;this.inject=function(i,a){a===void 0&&(a=pq);var o=r.name+a.hash;i.hasNameForId(r.id,o)||i.insertRules(r.id,o,a(r.rules,o,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=n,lte(this,function(){throw WP(12,String(r.name))})}return t.prototype.getName=function(e){return e===void 0&&(e=pq),this.name+e.hash},t})(),Ubt=function(t){return t>="A"&&t<="Z"};function Aue(t){for(var e="",n=0;n<t.length;n++){var r=t[n];if(n===1&&r==="-"&&t[0]==="-")return t;Ubt(r)?e+="-"+r.toLowerCase():e+=r}return e.startsWith("ms-")?"-"+e:e}var RLe=function(t){return t==null||t===!1||t===""},MLe=function(t){var e,n,r=[];for(var i in t){var a=t[i];t.hasOwnProperty(i)&&!RLe(a)&&(Array.isArray(a)&&a.isCss||iw(a)?r.push("".concat(Aue(i),":"),a,";"):lM(a)?r.push.apply(r,sM(sM(["".concat(i," {")],MLe(a),!1),["}"],!1)):r.push("".concat(Aue(i),": ").concat((e=i,(n=a)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||e in _7e||e.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function B_(t,e,n,r){if(RLe(t))return[];if(ste(t))return[".".concat(t.styledComponentId)];if(iw(t)){if(!iw(a=t)||a.prototype&&a.prototype.isReactComponent||!e)return[t];var i=t(e);return B_(i,e,n,r)}var a;return t instanceof Fbt?n?(t.inject(n,r),[t.getName(r)]):[t]:lM(t)?MLe(t):Array.isArray(t)?Array.prototype.concat.apply(t6,t.map(function(o){return B_(o,e,n,r)})):[t.toString()]}function PLe(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(iw(n)&&!ste(n))return!1}return!0}var jbt=bLe(e6),zbt=(function(){function t(e,n,r){this.rules=e,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&PLe(e),this.componentId=n,this.baseHash=QT(jbt,n),this.baseStyle=r,_B.registerId(n)}return t.prototype.generateAndInjectStyles=function(e,n,r){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))i=$E(i,this.staticRulesId);else{var a=hq(B_(this.rules,e,n,r)),o=fq(QT(this.baseHash,a)>>>0);if(!n.hasNameForId(this.componentId,o)){var s=r(a,".".concat(o),void 0,this.componentId);n.insertRules(this.componentId,o,s)}i=$E(i,o),this.staticRulesId=o}else{for(var l=QT(this.baseHash,r.hash),c="",u=0;u<this.rules.length;u++){var f=this.rules[u];if(typeof f=="string")c+=f;else if(f){var h=hq(B_(f,e,n,r));l=QT(l,h+u),c+=h}}if(c){var d=fq(l>>>0);n.hasNameForId(this.componentId,d)||n.insertRules(this.componentId,d,r(c,".".concat(d),void 0,this.componentId)),i=$E(i,d)}}return i},t})(),cte=et.createContext(void 0);cte.Consumer;var wU={};function $bt(t,e,n){var r=ste(t),i=t,a=!AU(t),o=e.attrs,s=o===void 0?t6:o,l=e.componentId,c=l===void 0?(function(x,T){var S=typeof x!="string"?"sc":yue(x);wU[S]=(wU[S]||0)+1;var w="".concat(S,"-").concat(ELe(e6+S+wU[S]));return T?"".concat(T,"-").concat(w):w})(e.displayName,e.parentComponentId):l,u=e.displayName,f=u===void 0?(function(x){return AU(x)?"styled.".concat(x):"Styled(".concat(pbt(x),")")})(t):u,h=e.displayName&&e.componentId?"".concat(yue(e.displayName),"-").concat(e.componentId):e.componentId||c,d=r&&i.attrs?i.attrs.concat(s).filter(Boolean):s,p=e.shouldForwardProp;if(r&&i.shouldForwardProp){var g=i.shouldForwardProp;if(e.shouldForwardProp){var v=e.shouldForwardProp;p=function(x,T){return g(x,T)&&v(x,T)}}else p=g}var y=new zbt(n,h,r?i.componentStyle:void 0);function _(x,T){return(function(S,w,C){var D=S.attrs,L=S.componentStyle,B=S.defaultProps,I=S.foldedComponentIds,U=S.styledComponentId,$=S.target,X=et.useContext(cte),N=gq(),M=S.shouldForwardProp||N.shouldForwardProp,k=mLe(w,X,B)||rw,z=(function(ne,le,ue){for(var ve,Se=of(of({},le),{className:void 0,theme:ue}),Re=0;Re<ne.length;Re+=1){var Xe=iw(ve=ne[Re])?ve(Se):ve;for(var Le in Xe)Se[Le]=Le==="className"?$E(Se[Le],Xe[Le]):Le==="style"?of(of({},Se[Le]),Xe[Le]):Xe[Le]}return le.className&&(Se.className=$E(Se.className,le.className)),Se})(D,w,k),j=z.as||$,V={};for(var Q in z)z[Q]===void 0||Q[0]==="$"||Q==="as"||Q==="theme"&&z.theme===k||(Q==="forwardedAs"?V.as=z.forwardedAs:M&&!M(Q,j)||(V[Q]=z[Q]));var ee=(function(ne,le){var ue=gq(),ve=ne.generateAndInjectStyles(le,ue.styleSheet,ue.stylis);return ve})(L,z),re=$E(I,U);return ee&&(re+=" "+ee),z.className&&(re+=" "+z.className),V[AU(j)&&!yLe.has(j)?"class":"className"]=re,C&&(V.ref=C),jt.createElement(j,V)})(E,x,T)}_.displayName=f;var E=et.forwardRef(_);return E.attrs=d,E.componentStyle=y,E.displayName=f,E.shouldForwardProp=p,E.foldedComponentIds=r?$E(i.foldedComponentIds,i.styledComponentId):"",E.styledComponentId=h,E.target=r?i.target:t,Object.defineProperty(E,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(x){this._foldedDefaultProps=r?(function(T){for(var S=[],w=1;w<arguments.length;w++)S[w-1]=arguments[w];for(var C=0,D=S;C<D.length;C++)dq(T,D[C],!0);return T})({},i.defaultProps,x):x}}),lte(E,function(){return".".concat(E.styledComponentId)}),a&&ALe(E,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),E}function wue(t,e){for(var n=[t[0]],r=0,i=e.length;r<i;r+=1)n.push(e[r],t[r+1]);return n}var Oue=function(t){return Object.assign(t,{isCss:!0})};function A_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(iw(t)||lM(t))return Oue(B_(wue(t6,sM([t],e,!0))));var r=t;return e.length===0&&r.length===1&&typeof r[0]=="string"?B_(r):Oue(B_(wue(r,e)))}function vq(t,e,n){if(n===void 0&&(n=rw),!e)throw WP(1,e);var r=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return t(e,n,A_.apply(void 0,sM([i],a,!1)))};return r.attrs=function(i){return vq(t,e,of(of({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},r.withConfig=function(i){return vq(t,e,of(of({},n),i))},r}var NLe=function(t){return vq($bt,t)},_c=NLe;yLe.forEach(function(t){_c[t]=NLe(t)});var Hbt=(function(){function t(e,n){this.rules=e,this.componentId=n,this.isStatic=PLe(e),_B.registerId(this.componentId+1)}return t.prototype.createStyles=function(e,n,r,i){var a=i(hq(B_(this.rules,n,r,i)),""),o=this.componentId+e;r.insertRules(o,o,a)},t.prototype.removeStyles=function(e,n){n.clearRules(this.componentId+e)},t.prototype.renderStyles=function(e,n,r,i){e>2&&_B.registerId(this.componentId+e),this.removeStyles(e,r),this.createStyles(e,n,r,i)},t})();function Gbt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=A_.apply(void 0,sM([t],e,!1)),i="sc-global-".concat(ELe(JSON.stringify(r))),a=new Hbt(r,i),o=function(l){var c=gq(),u=et.useContext(cte),f=et.useRef(c.styleSheet.allocateGSInstance(i)).current;return c.styleSheet.server&&s(f,l,c.styleSheet,u,c.stylis),et.useLayoutEffect(function(){if(!c.styleSheet.server)return s(f,l,c.styleSheet,u,c.stylis),function(){return a.removeStyles(f,c.styleSheet)}},[f,l,c.styleSheet,u,c.stylis]),null};function s(l,c,u,f,h){if(a.isStatic)a.renderStyles(l,ubt,u,h);else{var d=of(of({},c),{theme:mLe(c,f,o.defaultProps)});a.renderStyles(l,d,u,h)}}return et.memo(o)}var Wbt={map:{style:"light"},components:{VisText:u_t}};function cM(t){"@babel/helpers - typeof";return cM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cM(t)}function Cue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Vbt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cue(Object(n),!0).forEach(function(r){Ybt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ybt(t,e,n){return e=Xbt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xbt(t){var e=qbt(t,"string");return cM(e)=="symbol"?e:String(e)}function qbt(t,e){if(cM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Zbt(t,e,n){return["plugins","behaviors","transforms"].includes(t)?function(r){return e(r)}:function(r){var i=e.call(this,r);return Ve.isPlainObject(i)?VP(n,i):i}}function VP(){if(arguments.length===0)return{};for(var t=Vbt({},arguments.length<=0?void 0:arguments[0]),e=1;e<arguments.length;e++){var n=e<0||arguments.length<=e?void 0:arguments[e];for(var r in n)if(n.hasOwnProperty(r)){var i=n[r],a=t[r];["component","data"].includes(r)?t[r]=i:typeof i=="function"?t[r]=Zbt(r,i,a):Ve.isPlainObject(i)&&Ve.isPlainObject(a)?t[r]=VP(a,i):t[r]=i}}return t}function uM(t){"@babel/helpers - typeof";return uM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uM(t)}function Kbt(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Qbt(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Qbt(t,e){if(t){if(typeof t=="string")return Rue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rue(t,e)}}function Rue(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Mue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ILe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mue(Object(n),!0).forEach(function(r){Jbt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Jbt(t,e,n){return e=eEt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eEt(t){var e=tEt(t,"string");return uM(e)=="symbol"?e:String(e)}function tEt(t,e){if(uM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var nEt=new Map([["x","xField"],["y","yField"],["series","seriesField"],["size","sizeField"],["color","colorField"],["shape","shapeField"],["y","angleField"]]);function rEt(t){var e=t.encode;if(!e)return t;var n=ILe({},t),r=Kbt(e),i;try{for(r.s();!(i=r.n()).done;){var a=i.value,o=nEt.get(a);o&&(n[o]=e[a])}}catch(s){r.e(s)}finally{r.f()}return n}function iEt(t){var e=t.axisXTitle,n=t.axisYTitle,r=ILe({axis:{}},t);return e&&(Ve.get(r,"axis.x")?r.axis.x.title=e:r.axis.x={title:e}),n&&(Ve.get(r,"axis.y")?r.axis.y.title=n:r.axis.y={title:n}),r}function aEt(t){var e=rEt(t),n=iEt(e);return n}function oEt(t,e){return t.reduce(function(n,r){var i=e(r);return n[i]||(n[i]=[]),n[i].push(r),n},{})}var sEt=et.createContext(Wbt),lEt=["style"];function fM(t){"@babel/helpers - typeof";return fM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fM(t)}function cEt(t,e){if(t==null)return{};var n=uEt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function uEt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Pue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Rm(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pue(Object(n),!0).forEach(function(r){fEt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fEt(t,e,n){return e=hEt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hEt(t){var e=dEt(t,"string");return fM(e)=="symbol"?e:String(e)}function dEt(t,e){if(fM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function n6(){var t=et.useContext(sEt);return t}function ute(t){var e=n6(),n=e.components,r=n===void 0?{}:n,i=r?.[t];return i}function pEt(t){var e=ute(t),n=n6(),r=n.plot,i=Rm(Rm({},r),e);return i}function kd(t,e,n){var r=pEt(t),i=Rm(Rm({},r),n),a=aEt(i),o=typeof e=="function"?e(a):e;a.style;var s=cEt(a,lEt),l=Rm(Rm({},o),s);return l}function gEt(t){var e=ute(t),n=n6(),r=n.map,i={mapType:r?.style,token:r?.token},a=Rm(Rm({},i),e);return a}function LLe(t,e){var n=gEt(t),r=Rm(Rm({},n),e);return r}function vEt(t){var e=n6(),n=e.graph,r=n===void 0?{}:n,i=ute(t);return VP(r,i||{})}function jw(t,e,n){var r=vEt(t);return VP(e,r,n)}var mEt=["#1783FF","#F08F56","#D580FF","#00C9C9","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"],yEt=["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],_Et={type:"light",view:{viewFill:"#FFF",plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},interval:{rect:{fillOpacity:.8}},line:{line:{lineWidth:2}},area:{area:{fillOpacity:.6}},point:{point:{lineWidth:1}}},bEt={type:"dark",view:{viewFill:"#000",plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},interval:{rect:{fillOpacity:.8}},line:{line:{lineWidth:2}},area:{area:{fillOpacity:.6}},point:{point:{lineWidth:1}}},EEt={type:"academy",view:{viewFill:"#FFF",plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},interval:{rect:{fillOpacity:.8}},line:{line:{lineWidth:2}},area:{area:{fillOpacity:.6}},point:{point:{lineWidth:1}}},Iu={default:_Et,academy:EEt,dark:bEt},fte={default:{type:"assign-color-by-branch",colors:mEt},academy:{type:"assign-color-by-branch",colors:yEt}};function hM(t){"@babel/helpers - typeof";return hM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hM(t)}function Nue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ZC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nue(Object(n),!0).forEach(function(r){xEt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xEt(t,e,n){return e=SEt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function SEt(t){var e=TEt(t,"string");return hM(e)=="symbol"?e:String(e)}function TEt(t,e){if(hM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AEt=function(e){return"linear-gradient(-90deg, white 0%, ".concat(e," 100%)")},wEt="#3A95FF",OEt=function(e){var n=e.data,r=e.xField,i=r===void 0?"time":r,a=e.yField,o=a===void 0?"value":a,s=e.style,l=s===void 0?{}:s,c=l.backgroundColor,u=l.palette,f=l.lineWidth,h=f===void 0?2:f,d=Ve.get(n,"[0].group")!==void 0,p=Ve.get(e,"axis.y.title"),g=AEt(u?.[0]||wEt),v=d?{opacity:.6}:{opacity:.6,fill:g},y={color:void 0},_={},E=!!(u!=null&&u[0]);return E&&(y={color:{range:u}}),d?_={x:i,y:o,color:"group"}:_={x:i,y:o,color:function(){return"all"}},ZC({xField:i,yField:o,style:v,colorField:d?"group":void 0,stack:d,encode:_,legend:d?{}:!1,tooltip:function(T){var S=p||T[i];return{name:S,value:T[o]}},scale:ZC({y:{nice:!0}},y),line:ZC({encode:_,style:{lineWidth:h,strokeOpacity:.6}},y)},c?{viewStyle:{viewFill:c}}:{viewStyle:void 0})},CEt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("Area",OEt,ZC(ZC({},e),{},{theme:r}));return et.createElement(o1t,i)};function dM(t){"@babel/helpers - typeof";return dM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dM(t)}function Iue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function NE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Iue(Object(n),!0).forEach(function(r){REt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function REt(t,e,n){return e=MEt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MEt(t){var e=PEt(t,"string");return dM(e)=="symbol"?e:String(e)}function PEt(t,e){if(dM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(dM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NEt=function(e){var n=e.data,r=e.xField,i=r===void 0?"category":r,a=e.yField,o=a===void 0?"value":a,s=e.style,l=s===void 0?{}:s,c=e.theme,u=c===void 0?{}:c,f=l.backgroundColor,h=l.palette,d=Ve.get(n,"[0].group")!==void 0,p=Ve.get(e,"axis.y.title"),g=!!(h!=null&&h[0]),v={color:void 0},y={radiusTopLeft:4,radiusTopRight:4};return u?.type==="academy"&&(y={radiusTopLeft:0,radiusTopRight:0}),g&&(v={color:{range:h}}),NE(NE({xField:i,yField:o,colorField:d?"group":i,tooltip:function(E){var x=p||E[i];return{name:x,value:E[o]}},style:NE(NE({},y),{},{columnWidthRatio:.8}),scale:NE({y:{nice:!0}},v)},f?{viewStyle:{viewFill:f}}:{viewStyle:void 0}),{},{legend:d?{}:!1})},IEt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=e.data,a=e.group,o=a===void 0?!1:a,s=e.stack,l=s===void 0?!1:s,c=Ve.get(i,"[0].group")!==void 0,u=kd("Bar",NEt,NE(NE({},e),{},{theme:r,group:c&&o,stack:c&&l}));return et.createElement(s1t,u)};function pM(t){"@babel/helpers - typeof";return pM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pM(t)}function Lue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Lue(Object(n),!0).forEach(function(r){LEt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function LEt(t,e,n){return e=kEt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kEt(t){var e=DEt(t,"string");return pM(e)=="symbol"?e:String(e)}function DEt(t,e){if(pM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(pM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var BEt=function(e){var n,r=e.data,i=e.style,a=i===void 0?{}:i,o=e.axisYTitle,s=e.axisXTitle,l=e.xField,c=l===void 0?"category":l,u=e.yField,f=u===void 0?"value":u,h=a.backgroundColor,d=a.palette,p=((n=(r||[])[0])===null||n===void 0?void 0:n.group)!==void 0,g={color:void 0},v=!!(d!=null&&d[0]),y=p?"group":"category",_=p?"group":"category";return v&&(g={color:{range:d}}),bB({data:r,boxType:"boxplot",xField:c,yField:f,colorField:y,seriesField:_,axis:{y:{title:o||!1},x:{title:s||!1}},scale:bB({x:{paddingInner:.6,paddingOuter:.3},series:{paddingInner:.3,paddingOuter:.1},y:{nice:!0}},g),style:{stroke:"black"}},h?{viewStyle:{viewFill:h}}:{})},FEt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("Boxplot",BEt,bB(bB({},e),{},{theme:r}));return et.createElement(p1t,i)};function gM(t){"@babel/helpers - typeof";return gM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gM(t)}function kue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function IE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kue(Object(n),!0).forEach(function(r){UEt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UEt(t,e,n){return e=jEt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jEt(t){var e=zEt(t,"string");return gM(e)=="symbol"?e:String(e)}function zEt(t,e){if(gM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(gM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $Et=function(e){var n=e.data,r=e.xField,i=r===void 0?"category":r,a=e.yField,o=a===void 0?"value":a,s=e.style,l=s===void 0?{}:s,c=e.theme,u=c===void 0?{}:c,f=l.backgroundColor,h=l.palette,d=Ve.get(n,"[0].group")!==void 0,p=!!(h!=null&&h[0]),g=Ve.get(e,"axis.y.title"),v={color:void 0},y={radiusTopLeft:4,radiusTopRight:4};return u?.type==="academy"&&(y={radiusTopLeft:0,radiusTopRight:0}),p&&(v={color:{range:h}}),IE(IE({xField:i,yField:o,colorField:d?"group":i,tooltip:function(E){var x=g||E[i];return{name:x,value:E[o]}},style:IE(IE({},y),{},{columnWidthRatio:.8}),scale:IE({y:{nice:!0}},v)},f?{viewStyle:{viewFill:f}}:{viewStyle:void 0}),{},{legend:d?{}:!1,group:d})},HEt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=e.data,a=e.group,o=a===void 0?!1:a,s=e.stack,l=s===void 0?!1:s,c=Ve.get(i,"[0].group")!==void 0,u=kd("Column",$Et,IE(IE({},e),{},{theme:r,group:c&&o,stack:c&&l}));return et.createElement(l1t,u)};function vM(t){"@babel/helpers - typeof";return vM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vM(t)}var GEt=["type","axisYTitle"];function Due(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Due(Object(n),!0).forEach(function(r){WEt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Due(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WEt(t,e,n){return e=VEt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function VEt(t){var e=YEt(t,"string");return vM(e)=="symbol"?e:String(e)}function YEt(t,e){if(vM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XEt(t,e){if(t==null)return{};var n=qEt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qEt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ZEt(t,e){var n=t.sort(function(a,o){var s=["column","line"];return s.indexOf(a.type)-s.indexOf(o.type)}).map(function(a,o){var s=a.type,l=a.axisYTitle,c=XEt(a,GEt),u=l||"value_".concat(o+1),f=xT(xT({},c),{},{yField:u,axis:{y:{title:l}},data:void 0});return s===Bo.Column?xT(xT({},f),{},{type:"interval"}):s===Bo.Line?xT(xT({},f),{},{type:s,shapeField:"smooth",axis:{y:{position:"right",title:l}},style:{lineWidth:2}}):f}),r=e.map(function(a,o){var s={category:a};return t.forEach(function(l,c){var u=l.axisYTitle||"value_".concat(c+1);s[u]=l.data[o]}),s}),i=t.map(function(a){return a.type===Bo.Line?"smooth":"rect"});return{children:n,data:r,legendTypeList:i}}var KEt=["categories","series","theme"];function mM(t){"@babel/helpers - typeof";return mM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mM(t)}function QEt(t,e){if(t==null)return{};var n=JEt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function JEt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Bue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bue(Object(n),!0).forEach(function(r){ext(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ext(t,e,n){return e=txt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function txt(t){var e=nxt(t,"string");return mM(e)=="symbol"?e:String(e)}function nxt(t,e){if(mM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(mM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var rxt=function(e){var n=e.xField,r=n===void 0?"category":n,i=e.axisXTitle,a=e.legendTypeList,o=e.style,s=o===void 0?{}:o,l=s.palette,c=s.backgroundColor,u=!!(l!=null&&l[0]),f={color:void 0};return u&&(f={color:{range:l}}),KC({xField:r,axis:{x:{title:i}},legend:{color:{itemMarker:function(d,p){return a?.[p]}}},scale:KC({},f)},c?{viewStyle:{viewFill:c}}:{viewStyle:void 0})},ixt=function(e){var n=e.categories,r=e.series,i=e.theme,a=i===void 0?"default":i,o=QEt(e,KEt),s=Iu[a],l=jt.useMemo(function(){return ZEt(r,n)},[e]),c=kd("DualAxes",rxt,KC(KC(KC({},o),l),{},{theme:s}));return et.createElement(c1t,c)};function yM(t){"@babel/helpers - typeof";return yM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yM(t)}function Fue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fue(Object(n),!0).forEach(function(r){axt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function axt(t,e,n){return e=oxt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oxt(t){var e=sxt(t,"string");return yM(e)=="symbol"?e:String(e)}function sxt(t,e){if(yM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lxt=function(e){var n=e.data,r=e.title,i=e.theme,a=i===void 0?"default":i,o=e.style,s=o===void 0?{}:o,l=s.backgroundColor,c=s.palette,u=c===void 0?[]:c,f=function(d,p){return"".concat((p/d*100).toFixed(2)," %")};return{type:"view",data:n,theme:Iu[a],title:r,padding:40,insetRight:28,children:[Uue({type:"interval",data:n,encode:{x:"category",y:"value",color:"category",shape:"funnel"},transform:[{type:"symmetryY"}],scale:Uue({x:{padding:0}},u!=null&&u[0]?{color:{range:u}}:{}),coordinate:{transform:[{type:"transpose"}]},legend:{color:{position:"top",layout:{justifyContent:"center"}}},labels:[{text:function(d){return"".concat(d.category,`
`).concat(d.value)},position:"inside",transform:[{type:"contrastReverse"}]},{text:function(d,p){return p!==0?"":""},style:{"font-size":"1px",color:"#666","letter-spacing":"0px"},position:"top-right",fill:"#666",dx:35,dy:-8},{text:function(d,p){return p!==0?"":""},position:"top-right",textAlign:"left",textBaseline:"middle",fill:"#666",dx:40},{text:function(d,p,g){return p!==0?f(g[p-1].value,g[p].value):""},position:"top-right",textAlign:"left",textBaseline:"middle",dx:80}]},l?{viewStyle:{viewFill:l}}:{}),{type:"connector",data:[{startX:n[0].category,startY:n[n.length-1].category,endX:0,endY:(n[0].value-n[n.length-1].value)/2}],encode:{x:"startX",x1:"startY",y:"endX",y1:"endY"},style:{stroke:"#666",markerEnd:!1,connectLength1:-12,offset2:-20,connectorStroke:"#0649f2",lineDash:[12,2]},labels:[{text:"",position:"left",textAlign:"start",textBaseline:"middle",fill:"#666",dx:10},{text:f(n[0].value,n[n.length-1].value),position:"left",textAlign:"start",dx:50,fill:"#000"}]}],axis:!1,animate:!1}},cxt=function(e){var n=jt.useRef(null),r=jt.useRef(null);return jt.useEffect(function(){if(n.current){var i=new V4({container:n.current,autoFit:!0,padding:"auto"}),a=lxt(e);return i.options(a),i.render(),r.current=i,function(){i.destroy(),r.current=null}}},[e]),et.createElement("div",{ref:n})};function _M(t){"@babel/helpers - typeof";return _M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_M(t)}function jue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jue(Object(n),!0).forEach(function(r){uxt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uxt(t,e,n){return e=fxt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fxt(t){var e=hxt(t,"string");return _M(e)=="symbol"?e:String(e)}function hxt(t,e){if(_M(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(_M(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var dxt=function(e){var n=e.binField,r=n===void 0?function(f){return f}:n,i=e.binNumber,a=e.style,o=a===void 0?{}:a,s=o.backgroundColor,l=o.palette,c=!!(l!=null&&l[0]),u={color:void 0};return c&&(u={color:{range:l}}),EB({binField:r,binNumber:i,style:{inset:.5,minHeight:1,columnWidthRatio:1},legend:!1,encode:{x:function(h){return h},y:"count",color:function(){return"all"}},scale:EB({y:{nice:!0}},u)},s?{viewStyle:{viewFill:s}}:{viewStyle:void 0})},pxt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("Histogram",dxt,EB(EB({},e),{},{theme:r}));return et.createElement(d1t,i)};function bM(t){"@babel/helpers - typeof";return bM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bM(t)}function zue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zue(Object(n),!0).forEach(function(r){gxt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gxt(t,e,n){return e=vxt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vxt(t){var e=mxt(t,"string");return bM(e)=="symbol"?e:String(e)}function mxt(t,e){if(bM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(bM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yxt=function(e){var n=e.data,r=e.xField,i=r===void 0?"time":r,a=e.yField,o=a===void 0?"value":a,s=e.style,l=s===void 0?{}:s,c=l.palette,u=l.lineWidth,f=l.backgroundColor,h=Ve.get(n,"[0].group")!==void 0,d=Ve.get(e,"axis.y.title"),p=!!(c!=null&&c[0]),g={},v={color:void 0};return h?g={x:i,y:o,color:"group"}:g={x:i,y:o,color:function(){return"all"}},p&&(v={color:{range:c}}),xB({xField:i,yField:o,colorField:h?"group":void 0,encode:g,legend:h?{}:!1,tooltip:function(_){var E=d||_[i];return{name:E,value:_[o]}},scale:xB({y:{nice:!0}},v),style:{lineWidth:u||2}},f?{viewStyle:{viewFill:f}}:{viewStyle:void 0})},_xt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("Line",yxt,xB(xB({},e),{},{theme:r}));return et.createElement(u1t,i)};function EM(t){"@babel/helpers - typeof";return EM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EM(t)}function bxt(t,e){return Txt(t)||Sxt(t,e)||xxt(t,e)||Ext()}function Ext(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xxt(t,e){if(t){if(typeof t=="string")return $ue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $ue(t,e)}}function $ue(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Sxt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Txt(t){if(Array.isArray(t))return t}function Hue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hue(Object(n),!0).forEach(function(r){Axt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Axt(t,e,n){return e=wxt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function wxt(t){var e=Oxt(t,"string");return EM(e)=="symbol"?e:String(e)}function Oxt(t,e){if(EM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(EM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Cxt=function(e){var n=e.percent,r=e.shape,i=r===void 0?"circle":r,a=e.style,o=a===void 0?{}:a,s=e.width,l=s===void 0?600:s,c=e.height,u=c===void 0?400:c,f=o.backgroundColor,h=o.palette,d=Math.min(l,u)/10,p=Math.min(Math.max(d,24),64),g=!!(h!=null&&h[0]),v={fill:void 0,outlineStroke:void 0};return g&&(v={fill:h[0],outlineStroke:h[0]}),QC(QC({percent:n,style:QC({shape:i,contentFontSize:p,contentFill:"#000",contentStroke:"#fff",contentLineWidth:2,outlineBorder:4,outlineDistance:4,waveLength:128},v)},f?{viewStyle:{viewFill:f}}:{}),{},{interaction:{tooltip:!1},animate:!1})},Rxt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=jt.useRef(null),a=jt.useState({width:0,height:0}),o=bxt(a,2),s=o[0],l=o[1],c=kd("Liquid",Cxt,QC(QC({},e),{},{theme:r,width:s.width,height:s.height}));return jt.useEffect(function(){if(i.current){var u=i.current,f=u.offsetWidth,h=u.offsetHeight;l({width:f,height:h})}},[]),et.createElement("div",{ref:i,style:{width:"100%",height:"100%"}},et.createElement(g1t,c))};function xM(t){"@babel/helpers - typeof";return xM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xM(t)}function Gue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function SB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gue(Object(n),!0).forEach(function(r){Mxt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Mxt(t,e,n){return e=Pxt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pxt(t){var e=Nxt(t,"string");return xM(e)=="symbol"?e:String(e)}function Nxt(t,e){if(xM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(xM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ixt=function(e){var n=e.data,r=n===void 0?[]:n,i=e.angleField,a=i===void 0?"value":i,o=e.colorField,s=o===void 0?"category":o,l=e.style,c=l===void 0?{}:l,u=Ve.sumBy(r,a),f=c.backgroundColor,h=c.palette,d=!!(h!=null&&h[0]),p={color:void 0};return d&&(p={color:{range:h}}),SB({angleField:a,colorField:s,tooltip:function(v){return{name:v[s],value:v[a]}},label:{position:"outside",transform:[{type:"overlapHide"}],text:function(v){return"".concat(v[s],": ").concat(Ve.round(v[a]/u*100,1),"%")}},legend:{color:{title:!1,position:"top"}},interaction:{elementSelect:{single:!0}},scale:SB({},p)},f?{viewStyle:{viewFill:f}}:{viewStyle:void 0})},Lxt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("Pie",Ixt,SB(SB({},e),{},{theme:r,innerRadius:Math.max(0,Math.min(1,e.innerRadius||0))}));return et.createElement(f1t,i)};function SM(t){"@babel/helpers - typeof";return SM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},SM(t)}function Wue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JT(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wue(Object(n),!0).forEach(function(r){kxt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function kxt(t,e,n){return e=Dxt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dxt(t){var e=Bxt(t,"string");return SM(e)=="symbol"?e:String(e)}function Bxt(t,e){if(SM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(SM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Fxt(t,e){return $xt(t)||zxt(t,e)||jxt(t,e)||Uxt()}function Uxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jxt(t,e){if(t){if(typeof t=="string")return Vue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vue(t,e)}}function Vue(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zxt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function $xt(t){if(Array.isArray(t))return t}function Hxt(t){if(!t||t.length===0)return[];var e=oEt(t,function(n){return n.group||""});return Object.entries(e).map(function(n){var r=Fxt(n,2),i=r[0],a=r[1],o=(a||[]).reduce(function(s,l){var c=l.name,u=l.value;return s[c]=u,s},{});return JT(JT({},o),{},{group:i})})}var Gxt=function(e){var n=e.data,r=e.title,i=e.theme,a=i===void 0?"default":i,o=e.style,s=o===void 0?{}:o,l=s.backgroundColor,c=s.palette,u=c===void 0?[]:c,f=s.lineWidth,h=f===void 0?2:f,d=Hxt(n),p=Object.keys(d[0]||{}).filter(function(g){return g!=="group"});return JT(JT({title:r,autoFit:!0,theme:Iu[a],inset:18,type:"line",data:d,coordinate:{type:"radar"},encode:{position:p,color:"group"},style:{lineWidth:h,lineCap:"round",lineJoin:"round"}},l?{viewStyle:{viewFill:l}}:{}),{},{legend:{color:d.length>1?{itemMarker:"point"}:!1},scale:JT(JT({},Object.fromEntries(Array.from({length:p.length},function(g,v){return["position".concat(v===0?"":v),{domainMin:0,nice:!0}]}))),u!=null&&u[0]?{color:{range:u}}:{}),axis:Object.fromEntries(Array.from({length:p.length},function(g,v){return["position".concat(v===0?"":v),{zIndex:1,titleFontSize:10,titleSpacing:8,label:!0,labelFill:a==="dark"?"#fff":"#000",labelOpacity:.45,labelFontSize:10,line:!0,lineFill:"#000",lineStrokeOpacity:.25,tickFilter:function(_,E){return!(v!==0&&E===0)},tickCount:4,gridStrokeOpacity:.45,gridStroke:a==="dark"?"#fff":"#000",gridLineWidth:1,gridLineDash:[4,4]}]})),interaction:{tooltip:{series:!1}}})},Wxt=function(e){var n=jt.useRef(null),r=jt.useRef(null);return jt.useEffect(function(){if(n.current){var i=new V4({container:n.current,autoFit:!0,padding:"auto"}),a=Gxt(e);return i.options(a),i.render(),r.current=i,function(){i.destroy(),r.current=null}}},[e]),et.createElement("div",{ref:n})};function TM(t){"@babel/helpers - typeof";return TM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},TM(t)}function Yue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Xue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yue(Object(n),!0).forEach(function(r){Vxt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vxt(t,e,n){return e=Yxt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yxt(t){var e=Xxt(t,"string");return TM(e)=="symbol"?e:String(e)}function Xxt(t,e){if(TM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(TM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qxt=function(e){var n=e.title,r=e.data,i=e.theme,a=i===void 0?"default":i,o=e.nodeAlign,s=o===void 0?"center":o,l=e.style,c=l===void 0?{}:l,u=c.backgroundColor,f=c.palette,h=!!(f!=null&&f[0]),d={};return h&&(d={color:{range:f}}),Xue({title:n,type:"sankey",theme:Iu[a],layout:{nodeAlign:s,nodePadding:.01},data:{type:"inline",value:r,transform:[{type:"custom",callback:function(g){return{links:g}}}]},scale:Xue({},d),style:{labelSpacing:2,nodeLineWidth:1,linkFillOpacity:.3}},u?{viewStyle:{viewFill:u}}:{})},Zxt=function(e){var n=jt.useRef(null),r=jt.useRef(null);return jt.useEffect(function(){if(n.current){var i=new V4({container:n.current,autoFit:!0,padding:"auto"}),a=qxt(e);return i.options(a),i.render(),r.current=i,function(){i.destroy(),r.current=null}}},[e]),et.createElement("div",{ref:n})};function AM(t){"@babel/helpers - typeof";return AM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AM(t)}function que(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function TB(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?que(Object(n),!0).forEach(function(r){Kxt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):que(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kxt(t,e,n){return e=Qxt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qxt(t){var e=Jxt(t,"string");return AM(e)=="symbol"?e:String(e)}function Jxt(t,e){if(AM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(AM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eSt=function(e){var n,r=e.data,i=e.xField,a=i===void 0?"x":i,o=e.yField,s=o===void 0?"y":o,l=e.style,c=l===void 0?{}:l,u=c.backgroundColor,f=c.palette,h=Ve.get(e,"axis.x.title"),d=Ve.get(e,"axis.y.title"),p=((n=(r||[])[0])===null||n===void 0?void 0:n.group)!==void 0,g=!!(f!=null&&f[0]),v={color:void 0},y={};return g&&(v={color:{range:f}}),p?y={x:a,y:s,color:"group"}:y={x:a,y:s,color:function(){return"all"}},TB({data:r,xField:a,yField:s,tooltip:{title:function(E){return E!=null&&E.group?E.group:!1},items:[{channel:"x",name:h||"x"},{channel:"y",name:d||"y"}]},legend:p?{}:!1,encode:y,scale:TB({y:{nice:!0}},v),style:{lineWidth:1}},u?{viewStyle:{viewFill:u}}:{viewStyle:void 0})},tSt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("Scatter",eSt,TB(TB({},e),{},{theme:r}));return et.createElement(h1t,i)},nSt=["data"];function wM(t){"@babel/helpers - typeof";return wM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wM(t)}function mq(){return mq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mq.apply(this,arguments)}function rSt(t,e){if(t==null)return{};var n=iSt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function iSt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Zue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zue(Object(n),!0).forEach(function(r){aSt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function aSt(t,e,n){return e=oSt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oSt(t){var e=sSt(t,"string");return wM(e)=="symbol"?e:String(e)}function sSt(t,e){if(wM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(wM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var lSt=function(e){var n=e.valueField,r=n===void 0?"value":n,i=e.style,a=i===void 0?{}:i,o=a.backgroundColor,s=a.palette,l=!!(s!=null&&s[0]),c={color:void 0};return l&&(c={color:{range:s}}),JC(JC({legend:!1,layout:{tile:"treemapBinary",paddingInner:3},valueField:r,tooltip:{items:[function(u){var f;return{name:(f=u.data)===null||f===void 0?void 0:f.name,value:u[r]}}]},style:{fillOpacity:.8,labelFontSize:12}},o?{viewStyle:{viewFill:o}}:{viewStyle:void 0}),{},{scale:JC({},c)})},cSt=function(e){return{name:"root",children:e}},uSt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("Treemap",lSt,JC(JC({},e),{},{theme:r})),a=i.data,o=rSt(i,nSt),s=jt.useMemo(function(){return cSt(a)},[a]);return console.log("treemap config:",i,e),et.createElement(m1t,mq({},o,{data:s}))};function OM(t){"@babel/helpers - typeof";return OM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},OM(t)}function Kue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kue(Object(n),!0).forEach(function(r){fSt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fSt(t,e,n){return e=hSt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hSt(t){var e=dSt(t,"string");return OM(e)=="symbol"?e:String(e)}function dSt(t,e){if(OM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(OM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var pSt=function(e){var n=e.data,r=e.style,i=r===void 0?{}:r,a=i.backgroundColor,o=i.palette,s={color:void 0},l=!!(o!=null&&o[0]);return l&&(s={color:{range:o}}),eR(eR({data:n,sizeField:"value"},a?{viewStyle:{viewFill:a}}:{}),{},{labels:[{position:"inside",text:function(u){return u.label||""},transform:[{type:"contrastReverse"}],fill:"#000",fillOpacity:.85,fontSize:10}],scale:eR({},s),tooltip:{title:!1,items:[function(c){return{name:c.key,value:c.size}}]},legend:!1})},gSt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("Venn",pSt,eR(eR({},e),{},{theme:r}));return et.createElement(y1t,i)};function CM(t){"@babel/helpers - typeof";return CM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},CM(t)}function Que(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Que(Object(n),!0).forEach(function(r){vSt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Que(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vSt(t,e,n){return e=mSt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mSt(t){var e=ySt(t,"string");return CM(e)=="symbol"?e:String(e)}function ySt(t,e){if(CM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(CM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var _St=function(e){var n,r=e.data,i=e.title,a=e.axisYTitle,o=e.axisXTitle,s=e.theme,l=s===void 0?"default":s,c=e.style,u=c===void 0?{}:c,f=u.backgroundColor,h=u.palette,d=((n=(r||[])[0])===null||n===void 0?void 0:n.group)!==void 0,p={},g=[];return d?(p={x:"category",y:"y",color:"group",series:"group",size:"size"},g=[Pg({type:"density",data:{transform:[{type:"kde",field:"value",groupBy:["category","group"]}]},encode:p,scale:Pg({y:{nice:!0}},h!=null&&h[0]?{color:{range:h}}:{})},f?{viewStyle:{viewFill:f}}:{}),Pg(Pg({type:"boxplot",encode:{x:"category",y:"value",series:"group",color:"group",shape:"violin"},style:{opacity:.5,strokeOpacity:.5,point:!1}},f?{viewStyle:{viewFill:f}}:{}),{},{scale:Pg({y:{nice:!0}},h!=null&&h[0]?{color:{range:h}}:{})})]):(p={x:"category",y:"y",color:"category",size:"size"},g=[Pg(Pg({type:"density",data:{transform:[{type:"kde",field:"value",groupBy:["category"],size:20}]},encode:p,scale:{y:{nice:!0}}},f?{viewStyle:{viewFill:f}}:{}),{},{tooltip:!1}),Pg(Pg({type:"boxplot",encode:{x:"category",y:"value",color:"category",shape:"violin"},style:{opacity:.5,strokeOpacity:.5,point:!1}},f?{viewStyle:{viewFill:f}}:{}),{},{scale:Pg({y:{nice:!0}},h!=null&&h[0]?{color:{range:h}}:{})})]),Pg({type:"view",theme:Iu[l],title:i,autoFit:!0,data:r,axis:{y:{title:a||!1},x:{title:o||!1}},children:g,scale:{y:{nice:!0}}},f?{viewStyle:{viewFill:f}}:{})},bSt=function(e){var n=jt.useRef(null),r=jt.useRef(null);return jt.useEffect(function(){if(n.current){var i=new V4({container:n.current,autoFit:!0,padding:"auto"}),a=_St(e);return i.options(a),i.render(),r.current=i,function(){i.destroy(),r.current=null}}},[e]),et.createElement("div",{ref:n})};function RM(t){"@babel/helpers - typeof";return RM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},RM(t)}function Jue(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jue(Object(n),!0).forEach(function(r){ESt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jue(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ESt(t,e,n){return e=xSt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xSt(t){var e=SSt(t,"string");return RM(e)=="symbol"?e:String(e)}function SSt(t,e){if(RM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(RM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var TSt=function(e){var n=e.data,r=e.style,i=r===void 0?{}:r,a=i.backgroundColor,o=i.palette,s=!!(o!=null&&o[0]),l={color:void 0};return s&&(l={color:{range:o}}),tR(tR({data:n,layout:{fontSize:[20,100]},colorField:"text",legend:!1,tooltip:!1,encode:{text:"text",color:"text",value:"value"}},a?{viewStyle:{viewFill:a}}:{viewStyle:void 0}),{},{scale:tR({},l)})},ASt=function(e){var n,r=Iu[(n=e.theme)!==null&&n!==void 0?n:"default"],i=kd("WordCloud",TSt,tR(tR({},e),{},{theme:r}));return et.createElement(v1t,i)};const wSt={duration:500},OSt={duration:1e3,easing:"cubic-bezier(0.250, 0.460, 0.450, 0.940)",iterations:1,fill:"both"};var Ps;(function(t){t.NodeAdded="NodeAdded",t.NodeUpdated="NodeUpdated",t.NodeRemoved="NodeRemoved",t.EdgeAdded="EdgeAdded",t.EdgeUpdated="EdgeUpdated",t.EdgeRemoved="EdgeRemoved",t.ComboAdded="ComboAdded",t.ComboUpdated="ComboUpdated",t.ComboRemoved="ComboRemoved"})(Ps||(Ps={}));var wh;(function(t){t.DRAW="draw",t.COLLAPSE="collapse",t.EXPAND="expand",t.TRANSFORM="transform"})(wh||(wh={}));var Ny;(function(t){t.CLICK="canvas:click",t.DBLCLICK="canvas:dblclick",t.POINTER_OVER="canvas:pointerover",t.POINTER_LEAVE="canvas:pointerleave",t.POINTER_ENTER="canvas:pointerenter",t.POINTER_MOVE="canvas:pointermove",t.POINTER_OUT="canvas:pointerout",t.POINTER_DOWN="canvas:pointerdown",t.POINTER_UP="canvas:pointerup",t.CONTEXT_MENU="canvas:contextmenu",t.DRAG_START="canvas:dragstart",t.DRAG="canvas:drag",t.DRAG_END="canvas:dragend",t.DRAG_ENTER="canvas:dragenter",t.DRAG_OVER="canvas:dragover",t.DRAG_LEAVE="canvas:dragleave",t.DROP="canvas:drop",t.WHEEL="canvas:wheel"})(Ny||(Ny={}));var HE;(function(t){t.CLICK="combo:click",t.DBLCLICK="combo:dblclick",t.POINTER_OVER="combo:pointerover",t.POINTER_LEAVE="combo:pointerleave",t.POINTER_ENTER="combo:pointerenter",t.POINTER_MOVE="combo:pointermove",t.POINTER_OUT="combo:pointerout",t.POINTER_DOWN="combo:pointerdown",t.POINTER_UP="combo:pointerup",t.CONTEXT_MENU="combo:contextmenu",t.DRAG_START="combo:dragstart",t.DRAG="combo:drag",t.DRAG_END="combo:dragend",t.DRAG_ENTER="combo:dragenter",t.DRAG_OVER="combo:dragover",t.DRAG_LEAVE="combo:dragleave",t.DROP="combo:drop"})(HE||(HE={}));var Zt;(function(t){t.CLICK="click",t.DBLCLICK="dblclick",t.POINTER_OVER="pointerover",t.POINTER_LEAVE="pointerleave",t.POINTER_ENTER="pointerenter",t.POINTER_MOVE="pointermove",t.POINTER_OUT="pointerout",t.POINTER_DOWN="pointerdown",t.POINTER_UP="pointerup",t.CONTEXT_MENU="contextmenu",t.DRAG_START="dragstart",t.DRAG="drag",t.DRAG_END="dragend",t.DRAG_ENTER="dragenter",t.DRAG_OVER="dragover",t.DRAG_LEAVE="dragleave",t.DROP="drop",t.KEY_DOWN="keydown",t.KEY_UP="keyup",t.WHEEL="wheel",t.PINCH="pinch"})(Zt||(Zt={}));var eA;(function(t){t.KEY_DOWN="keydown",t.KEY_UP="keyup"})(eA||(eA={}));var AB;(function(t){t.CLICK="edge:click",t.DBLCLICK="edge:dblclick",t.POINTER_OVER="edge:pointerover",t.POINTER_LEAVE="edge:pointerleave",t.POINTER_ENTER="edge:pointerenter",t.POINTER_MOVE="edge:pointermove",t.POINTER_OUT="edge:pointerout",t.POINTER_DOWN="edge:pointerdown",t.POINTER_UP="edge:pointerup",t.CONTEXT_MENU="edge:contextmenu",t.DRAG_ENTER="edge:dragenter",t.DRAG_OVER="edge:dragover",t.DRAG_LEAVE="edge:dragleave",t.DROP="edge:drop"})(AB||(AB={}));var jn;(function(t){t.BEFORE_CANVAS_INIT="beforecanvasinit",t.AFTER_CANVAS_INIT="aftercanvasinit",t.BEFORE_SIZE_CHANGE="beforesizechange",t.AFTER_SIZE_CHANGE="aftersizechange",t.BEFORE_ELEMENT_CREATE="beforeelementcreate",t.AFTER_ELEMENT_CREATE="afterelementcreate",t.BEFORE_ELEMENT_UPDATE="beforeelementupdate",t.AFTER_ELEMENT_UPDATE="afterelementupdate",t.BEFORE_ELEMENT_DESTROY="beforeelementdestroy",t.AFTER_ELEMENT_DESTROY="afterelementdestroy",t.BEFORE_ELEMENT_TRANSLATE="beforeelementtranslate",t.AFTER_ELEMENT_TRANSLATE="afterelementtranslate",t.BEFORE_DRAW="beforedraw",t.AFTER_DRAW="afterdraw",t.BEFORE_RENDER="beforerender",t.AFTER_RENDER="afterrender",t.BEFORE_ANIMATE="beforeanimate",t.AFTER_ANIMATE="afteranimate",t.BEFORE_LAYOUT="beforelayout",t.AFTER_LAYOUT="afterlayout",t.BEFORE_STAGE_LAYOUT="beforestagelayout",t.AFTER_STAGE_LAYOUT="afterstagelayout",t.BEFORE_TRANSFORM="beforetransform",t.AFTER_TRANSFORM="aftertransform",t.BATCH_START="batchstart",t.BATCH_END="batchend",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.BEFORE_RENDERER_CHANGE="beforerendererchange",t.AFTER_RENDERER_CHANGE="afterrendererchange"})(jn||(jn={}));var l_;(function(t){t.UNDO="undo",t.REDO="redo",t.CANCEL="cancel",t.ADD="add",t.CLEAR="clear",t.CHANGE="change"})(l_||(l_={}));var Cp;(function(t){t.CLICK="node:click",t.DBLCLICK="node:dblclick",t.POINTER_OVER="node:pointerover",t.POINTER_LEAVE="node:pointerleave",t.POINTER_ENTER="node:pointerenter",t.POINTER_MOVE="node:pointermove",t.POINTER_OUT="node:pointerout",t.POINTER_DOWN="node:pointerdown",t.POINTER_UP="node:pointerup",t.CONTEXT_MENU="node:contextmenu",t.DRAG_START="node:dragstart",t.DRAG="node:drag",t.DRAG_END="node:dragend",t.DRAG_ENTER="node:dragenter",t.DRAG_OVER="node:dragover",t.DRAG_LEAVE="node:dragleave",t.DROP="node:drop"})(Cp||(Cp={}));const es="combo",xd="tree";var MM;(function(t){t.NODE="node",t.EDGE="edge",t.COMBO="combo",t.THEME="theme",t.PALETTE="palette",t.LAYOUT="layout",t.BEHAVIOR="behavior",t.PLUGIN="plugin",t.ANIMATION="animation",t.TRANSFORM="transform",t.SHAPE="shape"})(MM||(MM={}));const yq={animation:{},behavior:{},combo:{},edge:{},layout:{},node:{},palette:{},theme:{},plugin:{},transform:{},shape:{}};function Iy(t,e){var n;const r=(n=yq[t])===null||n===void 0?void 0:n[e];if(r)return r}const CSt="5.0.50",RSt="G6";function uy(t){return`[${RSt} v${CSt}] ${t}`}const e0={mute:!1,debug:t=>{console.debug(uy(t))},info:t=>{console.info(uy(t))},warn:t=>{console.warn(uy(t))},error:t=>{console.error(uy(t))}};function kLe(t){const{theme:e}=t;if(!e)return{};const n=Iy(MM.THEME,e);return n||(e0.warn(`The theme of ${e} is not registered.`),{})}function hte(t,e){if(Array.isArray(t)&&t.length===0)return null;const n=Array.isArray(t)?t[0]:t,r=Array.isArray(t)?t.slice(1):e||[];return new Proxy(n,{get(i,a){return typeof i[a]=="function"&&!["onframe","onfinish"].includes(a)?(...o)=>{i[a](...o),r.forEach(s=>{var l;return(l=s[a])===null||l===void 0?void 0:l.call(s,...o)})}:a==="finished"?Promise.all([n.finished,...r.map(o=>o.finished)]):Reflect.get(i,a)},set(i,a,o){return["onframe","onfinish"].includes(a)||r.forEach(s=>{s[a]=o}),Reflect.set(i,a,o)}})}function _q(t){const e=t.reduce((r,i)=>(Object.entries(i).forEach(([a,o])=>{r[a]===void 0?r[a]=[o]:r[a].push(o)}),r),{});Object.entries(e).forEach(([r,i])=>{(i.length!==t.length||i.some(a=>Kn(a))||i.every(a=>!["sourceNode","targetNode","childrenNode"].includes(r)&&Fs(a,i[0])))&&delete e[r]});const n=Object.entries(e).reduce((r,[i,a])=>(a.forEach((o,s)=>{r[s]?r[s][i]=o:r[s]={[i]:o}}),r),[]);return t.length!==0&&n.length===0&&n.push({_:0},{_:0}),n}function PM(t){switch(t){case"opacity":return 1;case"x":case"y":case"z":case"zIndex":return 0;case"visibility":return"visible";case"collapsed":return!1;case"states":return[];default:return}}function DLe(t,e){const{animation:n}=t;if(n===!1||e===!1)return!1;const r=Object.assign({},wSt);return dl(n)&&Object.assign(r,n),dl(e)&&Object.assign(r,e),r}function MSt(t){if(typeof t=="string"){const e=Iy(MM.ANIMATION,t);return e||(e0.warn(`The animation of ${t} is not registered.`),[])}return t}function PSt(t,e,n,r){var i,a;const{animation:o}=t;if(o===!1||r===!1)return[];const s=(i=t?.[e])===null||i===void 0?void 0:i.animation;if(s===!1)return[];const l=s?.[n];if(l===!1)return[];const c=(a=kLe(t)[e])===null||a===void 0?void 0:a.animation,u=(h=[])=>MSt(h).map(d=>Object.assign(Object.assign(Object.assign(Object.assign({},OSt),dl(o)&&o),d),dl(r)&&r));if(l)return u(l);if(!c)return[];const f=c[n];return f===!1?[]:u(f)}function BLe(t,e,n,r=[]){if(!r&&t===0&&e===0&&n===0)return null;if(Array.isArray(r)){let a=-1;const o=[];for(let s=0;s<r.length;s++){const l=r[s];if(l[0]==="translate"){if(l[1]===t&&l[2]===e)return null;a=s,o.push(["translate",t,e])}else if(l[0]==="translate3d"){if(l[1]===t&&l[2]===e&&l[3]===n)return null;a=s,o.push(["translate3d",t,e,n??0])}else o.push(l)}return a===-1&&o.splice(0,0,Ln(n)?["translate3d",t,e,n??0]:["translate",t,e]),o.length===0?null:o}const i=r?r.replace(/translate(3d)?\([^)]*\)/g,""):"";return n===0?`translate(${t}, ${e})${i}`:`translate3d(${t}, ${e}, ${n})${i}`}var NSt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ISt=(t,e,n)=>{if(!n.length)return null;const[r,i]=e,a=c=>{var u;if(c){const f=t.getShape(c);if(!f)return null;const h=`get${Gp(c)}Style`,d=((u=t?.[h])===null||u===void 0?void 0:u.bind(t))||(v=>v),p=d?.(r)||{},g=d?.(i)||{};return{shape:f,fromStyle:p,toStyle:g}}else return{shape:t,fromStyle:r,toStyle:i}};let o;const s=n.map(c=>{var{fields:u,shape:f,states:h}=c,d=NSt(c,["fields","shape","states"]);const p=a(f);if(!p)return null;const{shape:g,fromStyle:v,toStyle:y}=p,_=[{},{}];if(u.forEach(x=>{var T,S;Object.assign(_[0],{[x]:(T=v[x])!==null&&T!==void 0?T:PM(x)}),Object.assign(_[1],{[x]:(S=y[x])!==null&&S!==void 0?S:PM(x)})}),_.some(x=>Object.keys(x).some(T=>["x","y","z"].includes(T)))){const{x=0,y:T=0,z:S,transform:w=""}=g.attributes||{};_.forEach(C=>{var D,L,B;C.transform=BLe((D=C.x)!==null&&D!==void 0?D:x,(L=C.y)!==null&&L!==void 0?L:T,(B=C.z)!==null&&B!==void 0?B:S,w)})}const E=g.animate(_q(_),d);return f===void 0&&(o=E),E}).filter(Boolean),l=o||s?.[0];return l?hte(l,s.filter(c=>c!==c)):null},LSt=[{fields:["opacity"]}],kSt=[{fields:["x","y"]}],FLe=[{fields:["x","y"]}],DSt=FLe,ULe=[{fields:["sourceNode","targetNode"]}],BSt=ULe,jLe=[{fields:["childrenNode","x","y"]}],FSt=jLe;function USt(t){return"source"in t&&"target"in t}function jSt(t){return t.length===2}function aw(t){return t instanceof Float32Array?!0:Array.isArray(t)&&(t.length===2||t.length===3)?t.every(e=>typeof e=="number"):!1}function Xm(t,e,n){return t>=e&&t<=n}function Qp(t=0){if(Array.isArray(t)){const[e=0,n=e,r=e,i=n]=t;return[e,n,r,i]}return[t,t,t,t]}function zSt(t=0){const e=Qp(t);return e[0]+e[2]}function t0(t){return t.max[0]-t.min[0]}function n0(t){return t.max[1]-t.min[1]}function cb(t){return[t0(t),n0(t)]}function w_(t,e){const n=aw(t)?dte(t):t.getShape("key").getBounds();return e?ub(n,e):n}function dte(t){const[e,n,r=0]=t,i=new cs;return i.setMinMax([e,n,r],[e,n,r]),i}function ub(t,e){const[n,r,i,a]=Qp(e),[o,s,l]=t.min,[c,u,f]=t.max,h=new cs;return h.setMinMax([o-a,s-n,l],[c+r,u+i,f]),h}function YP(t){if(t.length===0)return new cs;if(t.length===1)return t[0];const e=new cs;e.setMinMax(t[0].min,t[0].max);for(let n=1;n<t.length;n++){const r=t[n];e.setMinMax([Math.min(e.min[0],r.min[0]),Math.min(e.min[1],r.min[1]),Math.min(e.min[2],r.min[2])],[Math.max(e.max[0],r.max[0]),Math.max(e.max[1],r.max[1]),Math.max(e.max[2],r.max[2])])}return e}function $St(t,e){const[n,r]=t.min,[i,a]=t.max,[o,s]=e.min,[l,c]=e.max;return n>=o&&i<=l&&r>=s&&a<=c}function tv(t,e){return Xm(t[0],e.min[0],e.max[0])&&Xm(t[1],e.min[1],e.max[1])}function zLe(t,e,n=!1){const{min:[r,i],max:[a,o]}=e,s=(t[1]===i||t[1]===o)&&(n||Xm(t[0],r,a)),l=(t[0]===r||t[0]===a)&&(n||Xm(t[1],i,o));return s||l}function HSt(t,e){return!tv(t,e)}function wB(t,e){const{center:n}=e;return t[0]===n[0]&&t[1]===n[1]}function nR(t,e){const[n,r]=t,[i,a]=e.min,[o,s]=e.max,l=n-i,c=o-n,u=r-a,f=s-r,h=Math.min(l,c,u,f);return h===l?"left":h===c?"right":h===u?"top":h===f?"bottom":"left"}function nx(t,e){const n=$_(t);if(tv(t,e))switch(nR(t,e)){case"left":n[0]=e.min[0];break;case"right":n[0]=e.max[0];break;case"top":n[1]=e.min[1];break;case"bottom":n[1]=e.max[1];break}else{const[r,i]=t,[a,o]=e.min,[s,l]=e.max;n[0]=Xm(r,a,s)?r:r<a?a:s,n[1]=Xm(i,o,l)?i:i<o?o:l}return n}function GSt(t,e){const{center:n}=t,[r,i]=cb(t),a=e==="up"||e==="down"?n[0]:e==="right"?n[0]-r/6:n[0]+r/6,o=e==="left"||e==="right"?n[1]:e==="down"?n[1]-i/6:n[1]+i/6;return[a,o]}function WSt(t,e){let[n,r]=cb(t);return[n,r]=e==="up"||e==="down"?[n,r]:[r,n],(Math.pow(r,2)-Math.pow(Math.sqrt(Math.pow(n/2,2)+Math.pow(r,2))-n/2,2))/(2*r)}function VSt(t){const{min:[e,n],max:[r,i]}=t,a=[e,i],o=[r,i],s=[r,n],l=[e,n];return[[a,o],[o,s],[s,l],[l,a]]}var YSt=function(e,n){return e===n},efe=(function(){function t(e,n){n===void 0&&(n=null),this.value=e,this.next=n}return t.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},t})(),XSt=(function(){function t(e){e===void 0&&(e=YSt),this.head=null,this.tail=null,this.compare=e}return t.prototype.prepend=function(e){var n=new efe(e,this.head);return this.head=n,this.tail||(this.tail=n),this},t.prototype.append=function(e){var n=new efe(e);return this.head?(this.tail.next=n,this.tail=n,this):(this.head=n,this.tail=n,this)},t.prototype.delete=function(e){if(!this.head)return null;for(var n=null;this.head&&this.compare(this.head.value,e);)n=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(n=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),n},t.prototype.find=function(e){var n=e.value,r=n===void 0?void 0:n,i=e.callback,a=i===void 0?void 0:i;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},t.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var n=this.head;n.next;)n.next.next?n=n.next:n.next=null;return this.tail=n,e},t.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},t.prototype.fromArray=function(e){var n=this;return e.forEach(function(r){return n.append(r)}),this},t.prototype.toArray=function(){for(var e=[],n=this.head;n;)e.push(n),n=n.next;return e},t.prototype.reverse=function(){for(var e=this.head,n=null,r=null;e;)r=e.next,e.next=n,n=e,e=r;this.tail=this.head,this.head=n},t.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(n){return n.toString(e)}).toString()},t})(),qSt=function(e,n,r){n===void 0&&(n=[]);var i=n.filter(function(l){return l.source===e||l.target===e});if(r==="target"){var a=function(c){return c.source===e};return i.filter(a).map(function(l){return l.target})}if(r==="source"){var o=function(c){return c.target===e};return i.filter(o).map(function(l){return l.source})}var s=function(c){return c.source===e?c.target:c.source};return i.map(s)},ZSt=function(e,n){return n.filter(function(r){return r.source===e})},KSt=function(e,n){return n.filter(function(r){return r.source===e||r.target===e})},QSt=function(e){var n={},r=e.nodes,i=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return i.forEach(function(s){n[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){n[s.source].degree++,n[s.source].outDegree++,n[s.target].degree++,n[s.target].inDegree++}),n},JSt=function(e,n,r){for(var i=1/0,a,o=0;o<n.length;o++){var s=n[o].id;!r[s]&&e[s]<=i&&(i=e[s],a=n[o])}return a},eTt=function(e,n,r,i){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,l=s===void 0?[]:s,c={},u={},f={};o.forEach(function(_,E){var x=_.id;u[x]=1/0,x===n&&(u[x]=0)});for(var h=o.length,d=function(E){var x=JSt(u,o,c),T=x.id;if(c[T]=!0,u[T]===1/0)return"continue";var S=[];r?S=ZSt(T,l):S=KSt(T,l),S.forEach(function(w){var C=w.target,D=w.source,L=C===T?D:C,B=i&&w[i]?w[i]:1;u[L]>u[x.id]+B?(u[L]=u[x.id]+B,f[L]=[x.id]):u[L]===u[x.id]+B&&f[L].push(x.id)})},p=0;p<h;p++)d();f[n]=[n];var g={};for(var v in u)u[v]!==1/0&&$Le(n,v,f,g);var y={};for(var v in g)y[v]=g[v][0];return{length:u,path:y,allPath:g}};function $Le(t,e,n,r){if(t===e)return[t];if(r[e])return r[e];for(var i=[],a=0,o=n[e];a<o.length;a++){var s=o[a],l=$Le(t,s,n,r);if(!l)return;for(var c=0,u=l;c<u.length;c++){var f=u[c];ry(f)?i.push(_r(_r([],f,!0),[e],!1)):i.push([f,e])}}return r[e]=i,r[e]}var HLe=function(e,n,r,i,a){var o=eTt(e,n,i,a),s=o.length,l=o.path,c=o.allPath;return{length:s[r],path:l[r],allPath:c[r]}},tfe;(function(t){t.EuclideanDistance="euclideanDistance"})(tfe||(tfe={}));var tTt=function(e,n,r){typeof n!="number"&&(n=1e-6),typeof r!="number"&&(r=.85);for(var i=1,a=0,o=1e3,s=e.nodes,l=s===void 0?[]:s,c=e.edges,u=c===void 0?[]:c,f=l.length,h,d={},p={},g=0;g<f;++g){var v=l[g],y=v.id;d[y]=1/f,p[y]=1/f}for(var _=QSt(e);o>0&&i>n;){a=0;for(var g=0;g<f;++g){var v=l[g],y=v.id;if(h=0,_[v.id].inDegree===0)d[y]=0;else{for(var E=qSt(y,u,"source"),x=0;x<E.length;++x){var T=E[x],S=_[T].outDegree;S>0&&(h+=p[T]/S)}d[y]=r*h,a+=d[y]}}a=(1-a)/f,i=0;for(var g=0;g<f;++g){var v=l[g],y=v.id;h=d[y]+a,i+=Math.abs(h-p[y]),p[y]=h}o-=1}return p};(function(){function t(e){e===void 0&&(e=10),this.linkedList=new XSt,this.maxStep=e}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t})();function pt(t){if(t.id!==void 0)return t.id;if(t.source!==void 0&&t.target!==void 0)return`${t.source}-${t.target}`;throw new Error(uy("The datum does not have available id."))}function HI(t){return t.combo}function GLe(t,e){const n={nodes:(t.nodes||[]).map(pt),edges:(t.edges||[]).map(pt),combos:(t.combos||[]).map(pt)};return e?Object.values(n).flat():n}const WLe=(t,e,n)=>{var r;switch(n.type){case"degree":{const i=new Map;return(r=t.nodes)===null||r===void 0||r.forEach(a=>{const o=e(pt(a),n.direction).length;i.set(pt(a),o)}),i}case"betweenness":return nTt(t,n.directed,n.weightPropertyName);case"closeness":return rTt(t,n.directed,n.weightPropertyName);case"eigenvector":return aTt(t,n.directed);case"pagerank":return iTt(t,n.epsilon,n.linkProb);default:return VLe(t)}},VLe=t=>{var e;const n=new Map;return(e=t.nodes)===null||e===void 0||e.forEach(r=>{n.set(pt(r),0)}),n},nTt=(t,e,n)=>{const r=VLe(t),{nodes:i=[]}=t;return i.forEach(a=>{i.forEach(o=>{if(a!==o){const{allPath:s}=HLe(t,pt(a),pt(o),e,n),l=s.length;s.flat().forEach(c=>{c!==pt(a)&&c!==pt(o)&&r.set(c,r.get(c)+1/l)})}})}),r},rTt=(t,e,n)=>{const r=new Map,{nodes:i=[]}=t;return i.forEach(a=>{const o=i.reduce((s,l)=>{if(a!==l){const{length:c}=HLe(t,pt(a),pt(l),e,n);s+=c}return s},0);r.set(pt(a),1/o)}),r},iTt=(t,e,n)=>{var r;const i=new Map,a=tTt(t,e,n);return(r=t.nodes)===null||r===void 0||r.forEach(o=>{i.set(pt(o),a[pt(o)])}),i},aTt=(t,e)=>{const{nodes:n=[]}=t,r=oTt(t,e),i=sTt(r,n.length),a=new Map;return n.forEach((o,s)=>{a.set(pt(o),i[s])}),a},oTt=(t,e)=>{const{nodes:n=[],edges:r=[]}=t,i=Array(n.length).fill(null).map(()=>Array(n.length).fill(0));return r.forEach(({source:a,target:o})=>{const s=n.findIndex(c=>pt(c)===a),l=n.findIndex(c=>pt(c)===o);e?i[s][l]=1:(i[s][l]=1,i[l][s]=1)}),i},sTt=(t,e,n=100,r=1e-6)=>{let i=Array(e).fill(1),a=1/0;for(let o=0;o<n&&a>r;o++){const s=Array(e).fill(0);for(let c=0;c<e;c++)for(let u=0;u<e;u++)s[c]+=t[c][u]*i[u];const l=Math.sqrt(s.reduce((c,u)=>c+u*u,0));for(let c=0;c<e;c++)s[c]/=l;a=Math.sqrt(s.reduce((c,u,f)=>c+(u-i[f])*u,0)),i=s}return i};function F_(t,e,n,r=Fs){const i=new Map(t.map(h=>[n(h),h])),a=new Map(e.map(h=>[n(h),h])),o=new Set(i.keys()),s=new Set(a.keys()),l=[],c=[],u=[],f=[];return s.forEach(h=>{o.has(h)?r(i.get(h),a.get(h))?f.push(a.get(h)):c.push(a.get(h)):l.push(a.get(h))}),o.forEach(h=>{s.has(h)||u.push(i.get(h))}),{enter:l,exit:u,keep:f,update:c}}function Ax(t,e,n){const r=i=>{n&&!n(i)||(i.style.visibility=e)};t.forEach(i=>{r(i)})}function lTt(t,e,n){const r={},i=a=>(a in r||(r[a]=0),`${e}-${a}-${r[a]++}`);return n.map(a=>typeof a=="string"?{type:a,key:i(a)}:typeof a=="function"?a.call(t):a.key?a:Object.assign(Object.assign({},a),{key:i(a.type)}))}class pte{constructor(e){this.extensions=[],this.extensionMap={},this.context=e}setExtensions(e){const n=lTt(this.context.graph,this.category,e),{enter:r,update:i,exit:a,keep:o}=F_(this.extensions,n,s=>s.key);this.createExtensions(r),this.updateExtensions([...i,...o]),this.destroyExtensions(a),this.extensions=n}createExtension(e){const{category:n}=this,{key:r,type:i}=e,a=Iy(n,i);if(!a)return e0.warn(`The extension ${i} of ${n} is not registered.`);const o=new a(this.context,e);o.initialized=!0,this.extensionMap[r]=o}createExtensions(e){e.forEach(n=>this.createExtension(n))}updateExtension(e){const{key:n}=e,r=this.extensionMap[n];r&&r.update(e)}updateExtensions(e){e.forEach(n=>this.updateExtension(n))}destroyExtension(e){const n=this.extensionMap[e];n&&(n.initialized&&!n.destroyed&&n.destroy(),delete this.extensionMap[e])}destroyExtensions(e){e.forEach(({key:n})=>this.destroyExtension(n))}destroy(){this.destroyExtensions(this.extensions),this.context={},this.extensions=[],this.extensionMap={}}}class gte{constructor(e,n){this.events=[],this.initialized=!1,this.destroyed=!1,this.context=e,this.options=n}update(e){this.options=Object.assign(this.options,e)}destroy(){this.context={},this.options={},this.destroyed=!0}}class Dd extends gte{}class r6 extends Dd{constructor(e,n){super(e,Object.assign({},r6.defaultOptions,n)),this.isOverlapping=(r,i)=>i.some(a=>r.intersects(a)),this.occupiedBounds=[],this.detectLabelCollision=r=>{const i=this.context.viewport,a={show:[],hide:[]};return this.occupiedBounds=[],r.forEach(o=>{const s=o.getShape("label").getRenderBounds();i.isInViewport(s,!0)&&!this.isOverlapping(s,this.occupiedBounds)?(a.show.push(o),this.occupiedBounds.push(ub(s,this.options.padding))):a.hide.push(o)}),a},this.hideLabelIfExceedViewport=(r,i)=>{const{exit:a}=F_(r,i,o=>o.id);a?.forEach(this.hideLabel)},this.nodeCentralities=new Map,this.sortNodesByCentrality=(r,i)=>{const{model:a}=this.context,o=a.getData(),s=a.getRelatedEdgesData.bind(a);return r.map(c=>(this.nodeCentralities.has(c.id)||(this.nodeCentralities=WLe(o,s,i)),{node:c,centrality:this.nodeCentralities.get(c.id)})).sort((c,u)=>u.centrality-c.centrality).map(c=>c.node)},this.sortLabelElementsInView=r=>{const{sort:i,sortNode:a,sortCombo:o,sortEdge:s}=this.options,{model:l}=this.context;if(ur(i))return r.sort((g,v)=>i(l.getElementDataById(g.id),l.getElementDataById(v.id)));const{node:c=[],edge:u=[],combo:f=[]}=GF(r,g=>g.type),h=ur(o)?f.sort((g,v)=>o(...l.getComboData([g.id,v.id]))):f,d=ur(a)?c.sort((g,v)=>a(...l.getNodeData([g.id,v.id]))):this.sortNodesByCentrality(c,a),p=ur(s)?u.sort((g,v)=>s(...l.getEdgeData([g.id,v.id]))):u;return[...h,...d,...p]},this.labelElementsInView=[],this.isFirstRender=!0,this.onToggleVisibility=r=>{var i;if(((i=r.data)===null||i===void 0?void 0:i.stage)==="zIndex")return;if(!this.validate(r)){this.hiddenElements.size>0&&(this.hiddenElements.forEach(this.showLabel),this.hiddenElements.clear());return}const a=this.isFirstRender?this.getLabelElements():this.getLabelElementsInView();this.hideLabelIfExceedViewport(this.labelElementsInView,a),this.labelElementsInView=a;const o=this.sortLabelElementsInView(this.labelElementsInView),{show:s,hide:l}=this.detectLabelCollision(o);for(let c=s.length-1;c>=0;c--)this.showLabel(s[c]);l.forEach(this.hideLabel)},this.hiddenElements=new Map,this.hideLabel=r=>{const i=r.getShape("label");i&&Ax(i,"hidden"),this.hiddenElements.set(r.id,r)},this.showLabel=r=>{const i=r.getShape("label");i&&Ax(i,"visible"),r.toFront(),this.hiddenElements.delete(r.id)},this.onTransform=Sy(this.onToggleVisibility,this.options.throttle,{leading:!0}),this.enableToggle=!0,this.toggle=r=>{this.enableToggle&&this.onToggleVisibility(r)},this.onBeforeRender=()=>{this.enableToggle=!1},this.onAfterRender=r=>{this.onToggleVisibility(r),this.enableToggle=!0},this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents(),this.onToggleVisibility({})}getLabelElements(){const{elementMap:e}=this.context.element,n=[];for(const r in e){const i=e[r];i.isVisible()&&i.getShape("label")&&n.push(i)}return n}getLabelElementsInView(){const e=this.context.viewport;return this.getLabelElements().filter(n=>e.isInViewport(n.getShape("key").getRenderBounds()))}bindEvents(){const{graph:e}=this.context;e.on(jn.BEFORE_RENDER,this.onBeforeRender),e.on(jn.AFTER_RENDER,this.onAfterRender),e.on(jn.AFTER_DRAW,this.toggle),e.on(jn.AFTER_LAYOUT,this.toggle),e.on(jn.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(jn.BEFORE_RENDER,this.onBeforeRender),e.off(jn.AFTER_RENDER,this.onAfterRender),e.off(jn.AFTER_DRAW,this.toggle),e.off(jn.AFTER_LAYOUT,this.toggle),e.off(jn.AFTER_TRANSFORM,this.onTransform)}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}destroy(){this.unbindEvents(),super.destroy()}}r6.defaultOptions={enable:!0,throttle:100,padding:0,sortNode:{type:"degree"}};const nfe=[0,0,0];function Hi(t,e){return t.map((n,r)=>n+e[r])}function Wo(t,e){return t.map((n,r)=>n-e[r])}function zg(t,e){return typeof e=="number"?t.map(n=>n*e):t.map((n,r)=>n*e[r])}function nv(t,e){return typeof e=="number"?t.map(n=>n/e):t.map((n,r)=>n/e[r])}function cTt(t,e){return t.reduce((n,r,i)=>n+r*e[i],0)}function uTt(t,e){const n=NM(t),r=NM(e);return[n[1]*r[2]-n[2]*r[1],n[2]*r[0]-n[0]*r[2],n[0]*r[1]-n[1]*r[0]]}function O_(t,e){return t.map(n=>n*e)}function _s(t,e){return Math.sqrt(t.reduce((n,r,i)=>n+Math.pow(r-e[i]||0,2),0))}function OB(t,e){return t.reduce((n,r,i)=>n+Math.abs(r-e[i]),0)}function yy(t){const e=t.reduce((n,r)=>n+Math.pow(r,2),0);return t.map(n=>n/Math.sqrt(e))}function vte(t,e,n=!1){const r=t[0]*e[1]-t[1]*e[0];let i=Math.acos(zg(t,e).reduce((a,o)=>a+o,0)/(_s(t,nfe)*_s(e,nfe)));return n&&r<0&&(i=2*Math.PI-i),i}function i6(t,e=!0){return e?[-t[1],t[0]]:[t[1],-t[0]]}function OU(t,e){return t.map(n=>n%e)}function Ox(t){return[t[0],t[1]]}function NM(t){return jSt(t)?[t[0],t[1],0]:t}function YLe(t){const[e,n]=t;return!e&&!n?0:Math.atan2(n,e)}function XLe(t,e){const[n,r]=t;if(e%360===0)return[n,r];const i=e*Math.PI/180,a=Math.cos(i),o=Math.sin(i);return[n*a-r*o,n*o+r*a]}function qLe(t,e){const[n,r]=t,[i,a]=e,o=Wo(n,r),s=Wo(i,a);return uTt(o,s).every(l=>l===0)}function mte(t,e,n=!1){if(qLe(t,e))return;const[r,i]=t,[a,o]=e,s=((r[0]-a[0])*(a[1]-o[1])-(r[1]-a[1])*(a[0]-o[0]))/((r[0]-i[0])*(a[1]-o[1])-(r[1]-i[1])*(a[0]-o[0])),l=o[0]-a[0]?(r[0]-a[0]+s*(i[0]-r[0]))/(o[0]-a[0]):(r[1]-a[1]+s*(i[1]-r[1]))/(o[1]-a[1]);if(!(!n&&(!Xm(s,0,1)||!Xm(l,0,1))))return[r[0]+s*(i[0]-r[0]),r[1]+s*(i[1]-r[1])]}function ZLe(t){if(Array.isArray(t))return Xm(t[0],0,1)&&Xm(t[1],0,1)?t:[.5,.5];const e=t.split("-"),n=e.includes("left")?0:e.includes("right")?1:.5,r=e.includes("top")?0:e.includes("bottom")?1:.5;return[n,r]}function pl(t){const{x:e=0,y:n=0,z:r=0}=t.style||{};return[+e,+n,+r]}function fTt(t){const{x:e,y:n,z:r}=t.style||{};return e!==void 0||n!==void 0||r!==void 0}function hTt(t,e){const[n,r]=e,{min:i,max:a}=t;return[i[0]+n*(a[0]-i[0]),i[1]+r*(a[1]-i[1])]}function ay(t,e="center"){const n=ZLe(e);return hTt(t,n)}function Ru(t){var e;return[t.x,t.y,(e=t.z)!==null&&e!==void 0?e:0]}function $g(t){var e;return{x:t[0],y:t[1],z:(e=t[2])!==null&&e!==void 0?e:0}}function d2(t,e=0){return t.map(n=>parseFloat(n.toFixed(e)))}function U_(t,e,n,r=!1){if(Fs(t,e))return t;const i=r?Wo(t,e):Wo(e,t),a=yy(i),o=[a[0]*n,a[1]*n];return Hi(Ox(t),o)}function KLe(t,e){return t[1]===e[1]}function dTt(t,e){return t[0]===e[0]}function pTt(t,e){return KLe(t,e)||dTt(t,e)}function QLe(t,e,n){return qLe([t,e],[e,n])}function JLe(t,e){return[2*e[0]-t[0],2*e[1]-t[1]]}function eke(t,e,n,r=!0,i=!1){for(let a=0;a<n.length;a++){let o=n[a],s=n[(a+1)%n.length];r&&(o=Hi(e,o),s=Hi(e,s));const l=i?JLe(t,e):t,c=mte([e,l],[o,s]);if(c)return{point:c,line:[o,s]}}return{point:e,line:void 0}}function gTt(t,e,n,r){const i=t[0],a=t[1];let o=!1;n===void 0&&(n=0),r===void 0&&(r=e.length);const s=r-n;for(let l=0,c=s-1;l<s;c=l++){const u=e[l+n][0],f=e[l+n][1],h=e[c+n][0],d=e[c+n][1];f>a!=d>a&&i<(h-u)*(a-f)/(d-f)+u&&(o=!o)}return o}function vTt(t,e,n=!1){const r=ay(e,"center"),i=[ay(e,"left-top"),ay(e,"right-top"),ay(e,"right-bottom"),ay(e,"left-bottom")];return eke(t,r,i,!1,n).point}function a6(t,e,n=!1){const r=e.center,i=n?JLe(t,r):t,a=Wo(i,e.center),o=Math.atan2(a[1],a[0]);if(isNaN(o))return r;const s=t0(e)/2,l=n0(e)/2,c=r[0]+s*Math.cos(o),u=r[1]+l*Math.sin(o);return[c,u]}function mTt(t,e){let n=1/0,r=[t[0],e[0]];return t.forEach(i=>{e.forEach(a=>{const o=_s(i,a);o<n&&(n=o,r=[i,a])})}),r}function yTt(t,e){let n=1/0,r=[[0,0],[0,0]];return e.forEach(i=>{const a=_Tt(t,i);a<n&&(n=a,r=i)}),r}function _Tt(t,e){const n=tke(t,e);return _s(t,n)}function tke(t,e){const[n,r]=e[0],[i,a]=e[1],[o,s]=t,l=i-n,c=a-r;if(l===0&&c===0)return[n,r];let u=((o-n)*l+(s-r)*c)/(l*l+c*c);u>1?u=1:u<0&&(u=0);const f=n+u*l,h=r+u*c;return[f,h]}function bTt(t){const e=t.reduce((n,r)=>Hi(n,r),[0,0]);return nv(e,t.length)}function yte(t,e=!0){const n=bTt(t);return t.sort(([r,i],[a,o])=>{const s=Math.atan2(i-n[1],r-n[0]),l=Math.atan2(o-n[1],a-n[0]);return e?l-s:s-l})}function rfe(t,e){return[t,[t[0],e[1]],e,[e[0],t[1]]]}class Vl{constructor(e,n,r){if(this.phase=n,this.pointerByTouch=[],this.initialDistance=null,this.emitter=e,Vl.instance)return Vl.callbacks[this.phase].push(r),Vl.instance;this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.bindEvents(),Vl.instance=this,Vl.callbacks[this.phase].push(r)}bindEvents(){const{emitter:e}=this;e.on(Zt.POINTER_DOWN,this.onPointerDown),e.on(Zt.POINTER_MOVE,this.onPointerMove),e.on(Zt.POINTER_UP,this.onPointerUp)}updatePointerPosition(e,n,r){const i=this.pointerByTouch.findIndex(a=>a.pointerId===e);i>=0&&(this.pointerByTouch[i]={x:n,y:r,pointerId:e})}onPointerDown(e){const{x:n,y:r}=e.client||{};if(!(n===void 0||r===void 0)&&(this.pointerByTouch.push({x:n,y:r,pointerId:e.pointerId}),e.pointerType==="touch"&&this.pointerByTouch.length===2)){Vl.isPinching=!0;const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y;this.initialDistance=Math.sqrt(i*i+a*a),Vl.callbacks.pinchstart.forEach(o=>o(e,{scale:0}))}}onPointerMove(e){if(this.pointerByTouch.length!==2||this.initialDistance===null)return;const{x:n,y:r}=e.client||{};if(n===void 0||r===void 0)return;this.updatePointerPosition(e.pointerId,n,r);const i=this.pointerByTouch[0].x-this.pointerByTouch[1].x,a=this.pointerByTouch[0].y-this.pointerByTouch[1].y,s=Math.sqrt(i*i+a*a)/this.initialDistance;Vl.callbacks.pinchmove.forEach(l=>l(e,{scale:(s-1)*5}))}onPointerUp(e){var n;Vl.callbacks.pinchend.forEach(r=>r(e,{scale:0})),Vl.isPinching=!1,this.initialDistance=null,this.pointerByTouch=[],(n=Vl.instance)===null||n===void 0||n.tryDestroy()}destroy(){this.emitter.off(Zt.POINTER_DOWN,this.onPointerDown),this.emitter.off(Zt.POINTER_MOVE,this.onPointerMove),this.emitter.off(Zt.POINTER_UP,this.onPointerUp),Vl.instance=null}off(e,n){const r=Vl.callbacks[e].indexOf(n);r>-1&&Vl.callbacks[e].splice(r,1),this.tryDestroy()}tryDestroy(){Object.values(Vl.callbacks).every(e=>e.length===0)&&this.destroy()}}Vl.isPinching=!1;Vl.instance=null;Vl.callbacks={pinchstart:[],pinchmove:[],pinchend:[]};const ife=t=>t.map(e=>$i(e)?e.toLocaleLowerCase():e);class zw{constructor(e){this.map=new Map,this.boundHandlePinch=()=>{},this.recordKey=new Set,this.onKeyDown=n=>{n?.key&&(this.recordKey.add(n.key),this.trigger(n))},this.onKeyUp=n=>{n?.key&&this.recordKey.delete(n.key)},this.onWheel=n=>{this.triggerExtendKey(Zt.WHEEL,n)},this.onDrag=n=>{this.triggerExtendKey(Zt.DRAG,n)},this.handlePinch=(n,r)=>{this.triggerExtendKey(Zt.PINCH,Object.assign(Object.assign({},n),r))},this.onFocus=()=>{this.recordKey.clear()},this.emitter=e,this.bindEvents()}bind(e,n){e.length!==0&&(e.includes(Zt.PINCH)&&!this.pinchHandler&&(this.boundHandlePinch=this.handlePinch.bind(this),this.pinchHandler=new Vl(this.emitter,"pinchmove",this.boundHandlePinch)),this.map.set(e,n))}unbind(e,n){this.map.forEach((r,i)=>{Fs(i,e)&&(!n||n===r)&&this.map.delete(i)})}unbindAll(){this.map.clear()}match(e){const n=ife(Array.from(this.recordKey)).sort(),r=ife(e).sort();return Fs(n,r)}bindEvents(){var e;const{emitter:n}=this;n.on(Zt.KEY_DOWN,this.onKeyDown),n.on(Zt.KEY_UP,this.onKeyUp),n.on(Zt.WHEEL,this.onWheel),n.on(Zt.DRAG,this.onDrag),(e=globalThis.addEventListener)===null||e===void 0||e.call(globalThis,"focus",this.onFocus)}trigger(e){this.map.forEach((n,r)=>{this.match(r)&&n(e)})}triggerExtendKey(e,n){this.map.forEach((r,i)=>{i.includes(e)&&Fs(Array.from(this.recordKey),i.filter(a=>a!==e))&&r(n)})}destroy(){var e,n;this.unbindAll(),this.emitter.off(Zt.KEY_DOWN,this.onKeyDown),this.emitter.off(Zt.KEY_UP,this.onKeyUp),this.emitter.off(Zt.WHEEL,this.onWheel),this.emitter.off(Zt.DRAG,this.onDrag),(e=this.pinchHandler)===null||e===void 0||e.off("pinchmove",this.boundHandlePinch),(n=globalThis.removeEventListener)===null||n===void 0||n.call(globalThis,"blur",this.onFocus)}}class XP extends Dd{constructor(e,n){super(e,Nt({},XP.defaultOptions,n)),this.shortcut=new zw(e.graph),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.clearStates=this.clearStates.bind(this),this.bindEvents()}onPointerDown(e){if(!this.validate(e)||!this.isKeydown()||this.startPoint)return;const{canvas:n,graph:r}=this.context,i=Object.assign({},this.options.style);this.options.style.lineWidth&&(i.lineWidth=+this.options.style.lineWidth/r.getZoom()),this.rectShape=new Nu({id:"g6-brush-select",style:i}),n.appendChild(this.rectShape),this.startPoint=[e.canvas.x,e.canvas.y]}onPointerMove(e){var n;if(!this.startPoint)return;const{immediately:r,mode:i}=this.options;this.endPoint=CB(e,this.context.graph),(n=this.rectShape)===null||n===void 0||n.attr({x:Math.min(this.endPoint[0],this.startPoint[0]),y:Math.min(this.endPoint[1],this.startPoint[1]),width:Math.abs(this.endPoint[0]-this.startPoint[0]),height:Math.abs(this.endPoint[1]-this.startPoint[1])}),r&&i==="default"&&this.updateElementsStates(rfe(this.startPoint,this.endPoint))}onPointerUp(e){if(this.startPoint){if(!this.endPoint){this.clearBrush();return}this.endPoint=CB(e,this.context.graph),this.updateElementsStates(rfe(this.startPoint,this.endPoint)),this.clearBrush()}}clearStates(){this.endPoint||this.clearElementsStates()}clearElementsStates(){const{graph:e}=this.context,n=Object.values(e.getData()).reduce((r,i)=>Object.assign({},r,i.reduce((a,o)=>{var s;const l=(s=o.states||[])===null||s===void 0?void 0:s.filter(c=>c!==this.options.state);return a[pt(o)]=l,a},{})),{});e.setElementState(n,this.options.animation)}updateElementsStates(e){const{graph:n}=this.context,{enableElements:r,state:i,mode:a,onSelect:o}=this.options,s=this.selector(n,e,r);let l={};switch(a){case"union":s.forEach(c=>{l[c]=[...n.getElementState(c),i]});break;case"diff":s.forEach(c=>{const u=n.getElementState(c);l[c]=u.includes(i)?u.filter(f=>f!==i):[...u,i]});break;case"intersect":s.forEach(c=>{const u=n.getElementState(c);l[c]=u.includes(i)?[i]:[]});break;case"default":default:s.forEach(c=>{l[c]=[i]});break}ur(o)&&(l=o(l)),n.setElementState(l,this.options.animation)}selector(e,n,r){if(!r||r.length===0)return[];const i=[],a=e.getData();if(r.forEach(o=>{a[`${o}s`].forEach(s=>{const l=pt(s);e.getElementVisibility(l)!=="hidden"&&gTt(e.getElementPosition(l),n)&&i.push(l)})}),r.includes("edge")){const o=a.edges;o?.forEach(s=>{const{source:l,target:c}=s;i.includes(l)&&i.includes(c)&&i.push(pt(s))})}return i}clearBrush(){var e;(e=this.rectShape)===null||e===void 0||e.remove(),this.rectShape=void 0,this.startPoint=void 0,this.endPoint=void 0}isKeydown(){const{trigger:e}=this.options,n=Array.isArray(e)?e:[e];return this.shortcut.match(n.filter(r=>r!=="drag"))}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}bindEvents(){const{graph:e}=this.context;e.on(Zt.POINTER_DOWN,this.onPointerDown),e.on(Zt.POINTER_MOVE,this.onPointerMove),e.on(Zt.POINTER_UP,this.onPointerUp),e.on(Ny.CLICK,this.clearStates)}unbindEvents(){const{graph:e}=this.context;e.off(Zt.POINTER_DOWN,this.onPointerDown),e.off(Zt.POINTER_MOVE,this.onPointerMove),e.off(Zt.POINTER_UP,this.onPointerUp),e.off(Ny.CLICK,this.clearStates)}update(e){this.unbindEvents(),this.options=Nt(this.options,e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}XP.defaultOptions={animation:!1,enable:!0,enableElements:["node","combo","edge"],immediately:!1,mode:"default",state:"selected",trigger:["shift"],style:{width:0,height:0,lineWidth:1,fill:"#1677FF",stroke:"#1677FF",fillOpacity:.1,zIndex:2,pointerEvents:"none"}};const CB=(t,e)=>{if((t.targetType==="node"||t.targetType==="combo")&&!(t.nativeEvent.target instanceof HTMLCanvasElement)){const[n,r]=e.getCanvasByClient([t.client.x,t.client.y]);return[n,r]}return[t.canvas.x,t.canvas.y]},Ly=.8,Cx=["node","edge","combo"];function rx(t,e,n,r,i=0){r==="TB"&&e(t,i);const a=n(t);if(a)for(const o of a)rx(o,e,n,r,i+1);r==="BT"&&e(t,i)}function ETt(t,e,n){const r=[[t,0]];for(;r.length;){const[i,a]=r.shift();e(i,a);const o=n(i);if(o)for(const s of o)r.push([s,a+1])}}function nke(t,e,n,r,i="both"){if(e==="combo"||e==="node")return CU(t,n,r,i);const a=t.getEdgeData(n);if(!a)return[];const o=CU(t,a.source,r-1,i),s=CU(t,a.target,r-1,i);return Array.from(new Set([...o,...s,n]))}function CU(t,e,n,r="both"){const i=new Set,a=new Set,o=new Set;return ETt(e,(s,l)=>{l>n||(o.add(s),t.getRelatedEdgesData(s,r).forEach(c=>{const u=pt(c);!a.has(u)&&l<n&&(o.add(u),a.add(u))}))},s=>t.getRelatedEdgesData(s,r).map(l=>l.source===s?l.target:l.source).filter(l=>i.has(l)?!1:(i.add(l),!0))),Array.from(o)}function RU(t){return t.states||[]}var GI=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class o6 extends Dd{constructor(e,n){super(e,Object.assign({},o6.defaultOptions,n)),this.onClickSelect=r=>GI(this,void 0,void 0,function*(){var i,a;this.validate(r)&&(yield this.updateState(r),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,r))}),this.onClickCanvas=r=>GI(this,void 0,void 0,function*(){var i,a;this.validate(r)&&(yield this.clearState(),(a=(i=this.options).onClick)===null||a===void 0||a.call(i,r))}),this.shortcut=new zw(e.graph),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Cx.forEach(n=>{e.on(`${n}:${Zt.CLICK}`,this.onClickSelect)}),e.on(Ny.CLICK,this.onClickCanvas)}get isMultipleSelect(){const{multiple:e,trigger:n}=this.options;return e&&this.shortcut.match(n)}getNeighborIds(e){const{target:n,targetType:r}=e,{graph:i}=this.context,{degree:a}=this.options;return nke(i,r,n.id,typeof a=="function"?a(e):a).filter(o=>o!==n.id)}updateState(e){return GI(this,void 0,void 0,function*(){const{state:n,unselectedState:r,neighborState:i,animation:a}=this.options;if(!n&&!i&&!r)return;const{target:o}=e,{graph:s}=this.context,l=s.getElementData(o.id),c=RU(l).includes(n)?"unselect":"select",u={},f=this.isMultipleSelect,h=[o.id],d=this.getNeighborIds(e);if(f)if(Object.assign(u,this.getDataStates()),c==="select"){const p=(g,v)=>{g.forEach(y=>{const _=new Set(s.getElementState(y));_.add(v),_.delete(r),u[y]=Array.from(_)})};p(h,n),p(d,i),r&&Object.keys(u).forEach(g=>{const v=u[g];!v.includes(n)&&!v.includes(i)&&!v.includes(r)&&u[g].push(r)})}else{const p=u[o.id];u[o.id]=p.filter(g=>g!==n&&g!==i),p.includes(r)||u[o.id].push(r),d.forEach(g=>{u[g]=u[g].filter(v=>v!==i),u[g].includes(n)||u[g].push(r)})}else if(c==="select"){Object.assign(u,this.getClearStates(!!r));const p=(g,v)=>{g.forEach(y=>{u[y]||(u[y]=s.getElementState(y)),u[y].push(v)})};p(h,n),p(d,i),r&&Object.keys(u).forEach(g=>{!h.includes(g)&&!d.includes(g)&&u[g].push(r)})}else Object.assign(u,this.getClearStates());yield s.setElementState(u,a)})}getDataStates(){const{graph:e}=this.context,{nodes:n,edges:r,combos:i}=e.getData(),a={};return[...n,...r,...i].forEach(o=>{a[pt(o)]=RU(o)}),a}getClearStates(e=!1){const{graph:n}=this.context,{state:r,unselectedState:i,neighborState:a}=this.options,o=new Set([r,i,a]),{nodes:s,edges:l,combos:c}=n.getData(),u={};return[...s,...l,...c].forEach(f=>{const h=RU(f),d=h.filter(p=>!o.has(p));(e||d.length!==h.length)&&(u[pt(f)]=d)}),u}clearState(){return GI(this,void 0,void 0,function*(){const{graph:e}=this.context;yield e.setElementState(this.getClearStates(),this.options.animation)})}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}unbindEvents(){const{graph:e}=this.context;Cx.forEach(n=>{e.off(`${n}:${Zt.CLICK}`,this.onClickSelect)}),e.off(Ny.CLICK,this.onClickCanvas)}destroy(){this.unbindEvents(),super.destroy()}}o6.defaultOptions={animation:!0,enable:!0,multiple:!1,trigger:["shift"],state:"selected",neighborState:"selected",unselectedState:void 0,degree:0};function Lh(t){var e;return!!(!((e=t.style)===null||e===void 0)&&e.collapsed)}function RB(t,e){if(!t.startsWith(e))return!1;const n=t[e.length];return n>="A"&&n<="Z"}function xTt(t,e){return`${e}${Gp(t)}`}function STt(t,e,n=!0){if(!e||!RB(t,e))return t;const r=t.slice(e.length);return n?cQ(r):r}function Pl(t,e){const n=Object.entries(t).reduce((r,[i,a])=>(i==="className"||i==="class"||RB(i,e)&&Object.assign(r,{[STt(i,e)]:a}),r),{});if("opacity"in t){const r=xTt("opacity",e),i=t.opacity;if(r in t){const a=t[r];Object.assign(n,{opacity:i*a})}else Object.assign(n,{opacity:i})}return n}function bq(t,e){const n=e.length;return Object.keys(t).reduce((r,i)=>{if(i.startsWith(e)){const a=i.slice(n);r[a]=t[i]}return r},{})}function rke(t,e){const n=typeof e=="string"?[e]:e,r={};return Object.keys(t).forEach(i=>{n.find(a=>i.startsWith(a))||(r[i]=t[i])}),r}function Fh(t=0){if(typeof t=="number")return[t,t,t];const[e,n=e,r=e]=t;return[e,n,r]}var TTt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function afe(t,e){const{datum:n,graph:r}=e;return typeof t=="function"?t.call(r,n):Object.fromEntries(Object.entries(t).map(([i,a])=>typeof a=="function"?[i,a.call(r,n)]:[i,a]))}function eu(t,e){const n=t?.style||{},r=e?.style||{};for(const i in n)i in r||(r[i]=n[i]);return Object.assign({},t,e,{style:r})}function ATt(t){const{x:e,y:n,z:r,class:i,className:a,transform:o,transformOrigin:s,zIndex:l,visibility:c}=t;return TTt(t,["x","y","z","class","className","transform","transformOrigin","zIndex","visibility"])}function wTt(t,e){const n=Fh(t);let r={};return e.text&&!e.fontSize&&(r={fontSize:Math.min(...n)*.5}),e.src&&(!e.width||!e.height)&&(r={width:n[0]*.5,height:n[1]*.5}),r}function ofe(t){if(t)return typeof t=="string"||typeof t=="function"||Array.isArray(t)?{type:"group",field:e=>e.id,color:t,invert:!1}:t}function OTt(t,e){if(!e)return{};const{type:n,color:r,field:i,invert:a}=e,o=l=>{const c=typeof r=="string"?Iy("palette",r):r;if(typeof c=="function"){const u={};return l.forEach(([f,h])=>{u[f]=c(a?1-h:h)}),u}else if(Array.isArray(c)){const u=a?[...c].reverse():c,f={};return l.forEach(([h,d])=>{f[h]=u[d%c.length]}),f}return{}},s=(l,c)=>{var u;return typeof l=="string"?(u=c.data)===null||u===void 0?void 0:u[l]:l?.(c)};if(n==="group"){const l=GF(t,h=>{if(!i)return"default";const d=s(i,h);return d?String(d):"default"}),c=Object.keys(l),u=o(c.map((h,d)=>[h,d])),f={};return Object.entries(l).forEach(([h,d])=>{d.forEach(p=>{f[pt(p)]=u[h]})}),f}else if(n==="value"){const[l,c]=t.reduce(([f,h],d)=>{const p=s(i,d);if(typeof p!="number")throw new Error(uy(`Palette field ${i} is not a number`));return[Math.min(f,p),Math.max(h,p)]},[1/0,-1/0]),u=c-l;return o(t.map(f=>[f.id,(s(i,f)-l)/u]))}}function ike(t){const e=typeof t=="string"?Iy("palette",t):t;if(typeof e!="function")return e}function ake(t,e){let n=2*t;return typeof e=="string"?n=t*Number(e.replace("%",""))/100:typeof e=="number"&&(n=e),isNaN(n)&&(n=2*t),n}function oke(t,e,n=1,r=!1){const i=r?n:1,a=(t.max[0]-t.min[0])*i;return ake(a,e)}function CTt(t,e,n=1){const r=_s(t[0],t[1])*n;return ake(r,e)}class qP extends zJ{constructor(e){sfe(e.style),super(e),this.shapeMap={},this.animateMap={},this.render(this.attributes,this),this.setVisibility(),this.bindEvents()}get parsedAttributes(){return this.attributes}upsert(e,n,r,i,a){var o,s,l,c,u,f,h,d;const p=this.shapeMap[e];if(r===!1){p&&((o=a?.beforeDestroy)===null||o===void 0||o.call(a,p),i.removeChild(p),delete this.shapeMap[e],(s=a?.afterDestroy)===null||s===void 0||s.call(a,p));return}const g=typeof n=="string"?Iy(MM.SHAPE,n):n;if(!g)throw new Error(uy(`Shape ${n} not found`));if(!p||p.destroyed||!(p instanceof g)){p&&((l=a?.beforeDestroy)===null||l===void 0||l.call(a,p),p?.destroy(),(c=a?.afterDestroy)===null||c===void 0||c.call(a,p)),(u=a?.beforeCreate)===null||u===void 0||u.call(a);const v=new g({className:e,style:r});return i.appendChild(v),this.shapeMap[e]=v,(f=a?.afterCreate)===null||f===void 0||f.call(a,v),v}return(h=a?.beforeUpdate)===null||h===void 0||h.call(a,p),wq(p,r),(d=a?.afterUpdate)===null||d===void 0||d.call(a,p),p}update(e={}){const n=Object.assign({},this.attributes,e);sfe(n),LAt(this,n),this.render(n,this),this.setVisibility()}bindEvents(){}getGraphicStyle(e){return ATt(e)}get compositeShapes(){return[["badges","badge-"],["ports","port-"]]}animate(e,n){if(e.length===0)return null;const r=[];if(e[0].x!==void 0||e[0].y!==void 0||e[0].z!==void 0){const{x:a=0,y:o=0,z:s=0}=this.attributes;e.forEach(l=>{const{x:c=a,y:u=o,z:f=s}=l;Object.assign(l,{transform:f?[["translate3d",c,u,f]]:[["translate",c,u]]})})}const i=super.animate(e,n);if(i&&(MU(this,i),r.push(i)),Array.isArray(e)&&e.length>0){const a=["transform","transformOrigin","x","y","z","zIndex"];if(Object.keys(e[0]).some(o=>!a.includes(o))){Object.entries(this.shapeMap).forEach(([s,l])=>{const c=`get${Gp(s)}Style`,u=this[c];if(ur(u)){const f=e.map(d=>u.call(this,Object.assign(Object.assign({},this.attributes),d))),h=l.animate(_q(f),n);h&&(MU(l,h),r.push(h))}});const o=(s,l)=>{if(!Em(s)){const c=`get${Gp(l)}Style`,u=this[c];if(ur(u)){const f=e.map(h=>u.call(this,Object.assign(Object.assign({},this.attributes),h)));Object.entries(f[0]).map(([h])=>{const d=f.map(g=>g[h]),p=s[h];if(p){const g=p.animate(_q(d),n);g&&(MU(p,g),r.push(g))}})}}};this.compositeShapes.forEach(([s,l])=>{const c=bq(this.shapeMap,l);o(c,s)})}}return hte(r)}getShape(e){return this.shapeMap[e]}setVisibility(){const{visibility:e}=this.attributes;Ax(this,e)}destroy(){this.shapeMap={},this.animateMap={},super.destroy()}}function MU(t,e){e?.finished.then(()=>{const n=t.activeAnimations.findIndex(r=>r===e);n>-1&&t.activeAnimations.splice(n,1)})}function sfe(t){if(!t)return{};if("x"in t||"y"in t||"z"in t){const{x:e=0,y:n=0,z:r,transform:i}=t,a=BLe(e,n,r,i);a&&(t.transform=a)}return t}var RTt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class qm extends qP{constructor(e){super(eu({style:qm.defaultStyleProps},e))}isTextStyle(e){return RB(e,"label")}isBackgroundStyle(e){return RB(e,"background")}getTextStyle(e){const n=this.getGraphicStyle(e),{padding:r}=n,i=RTt(n,["padding"]);return rke(i,"background")}getBackgroundStyle(e){if(e.background===!1)return!1;const n=this.getGraphicStyle(e),{wordWrap:r,wordWrapWidth:i,padding:a}=n,o=Pl(n,"background"),{min:[s,l],center:[c,u],halfExtents:[f,h]}=this.shapeMap.text.getGeometryBounds(),[d,p,g,v]=Qp(a),y=f*2+v+p,{width:_,height:E}=o;_&&E?Object.assign(o,{x:c-Number(_)/2,y:u-Number(E)/2}):Object.assign(o,{x:s-v,y:l-d,width:r?Math.min(y,i+v+p):y,height:h*2+d+g});const{radius:x}=o;if(typeof x=="string"&&x.endsWith("%")){const T=Number(x.replace("%",""))/100;o.radius=Math.min(+o.width,+o.height)*T}return o}render(e=this.parsedAttributes,n=this){this.upsert("text",Kx,this.getTextStyle(e),n),this.upsert("background",Nu,this.getBackgroundStyle(e),n)}getGeometryBounds(){return(this.getShape("background")||this.getShape("text")).getGeometryBounds()}}qm.defaultStyleProps={padding:0,fontSize:12,fontFamily:"system-ui, sans-serif",wordWrap:!0,maxLines:1,wordWrapWidth:128,textOverflow:"...",textBaseline:"middle",backgroundOpacity:.75,backgroundZIndex:-1,backgroundLineWidth:0};class $w extends qP{constructor(e){super(eu({style:$w.defaultStyleProps},e))}getBadgeStyle(e){return this.getGraphicStyle(e)}render(e=this.parsedAttributes,n=this){this.upsert("label",qm,this.getBadgeStyle(e),n)}getGeometryBounds(){const e=this.getShape("label");return(e.getShape("background")||e.getShape("text")).getGeometryBounds()}}$w.defaultStyleProps={padding:[2,4,2,4],fontSize:10,wordWrap:!1,backgroundRadius:"50%",backgroundOpacity:1};function MTt(t,e=!0){const n=[];return t.forEach((r,i)=>{n.push([i===0?"M":"L",...r])}),e&&n.push(["Z"]),n}const lfe={M:["x","y"],m:["dx","dy"],H:["x"],h:["dx"],V:["y"],v:["dy"],L:["x","y"],l:["dx","dy"],Z:[],z:[],C:["x1","y1","x2","y2","x","y"],c:["dx1","dy1","dx2","dy2","dx","dy"],S:["x2","y2","x","y"],s:["dx2","dy2","dx","dy"],Q:["x1","y1","x","y"],q:["dx1","dy1","dx","dy"],T:["x","y"],t:["dx","dy"],A:["rx","ry","rotation","large-arc","sweep","x","y"],a:["rx","ry","rotation","large-arc","sweep","dx","dy"]};function PTt(t){const e=t.replace(/[\n\r]/g,"").replace(/-/g," -").replace(/(\d*\.)(\d+)(?=\.)/g,"$1$2 ").trim().split(/\s*,|\s+/),n=[];let r="",i={};for(;e.length>0;){let a=e.shift();a in lfe?r=a:e.unshift(a),i={type:r},lfe[r].forEach(l=>{a=e.shift(),i[l]=a}),r==="M"?r="L":r==="m"&&(r="l");const[o,...s]=Object.values(i);n.push([o,...s.map(Number)])}return n}function NTt(t){const e=[];return(typeof t=="string"?PTt(t):t).forEach(r=>{const i=r[0];if(i==="Z"){e.push(e[0]);return}if(i!=="A")for(let a=1;a<r.length;a=a+2)e.push([r[a],r[a+1],0]);else{const a=r.length;e.push([r[a-2],r[a-1],0])}}),e}const ske=t=>{if(t.length<2)return[["M",0,0],["L",0,0]];const e=t[0],n=t[1],r=t[t.length-1],i=t[t.length-2];t.unshift(i,r),t.push(e,n);const a=[["M",r[0],r[1]]];for(let o=1;o<t.length-2;o+=1){const[s,l]=t[o-1],[c,u]=t[o],[f,h]=t[o+1],[d,p]=o!==t.length-2?t[o+2]:[f,h],g=c+(f-s)/6,v=u+(h-l)/6,y=f-(d-c)/6,_=h-(p-u)/6;a.push(["C",g,v,y,_,f,h])}return a};function ITt(t,e,n,r,i,a,o){const[s,l]=ay(t,e),c={textAlign:e==="left"?"right":e==="right"?"left":"center",textBaseline:e==="top"?"bottom":e==="bottom"?"top":"middle",transform:[["translate",s+n,l+r]]};if(e==="center"||!i)return c;const u=NTt(a);if(!u||u.length<=3)return c;const f=u.map((p,g)=>{const v=p,y=u[(g+1)%u.length];return Fs(v,y)?null:[v,y]}).filter(Boolean),h=yTt([s,l],f),d=tke([s,l],h);if(d&&h&&(c.transform=[["translate",d[0]+n,d[1]+r]],o)){const p=Math.atan((h[0][1]-h[1][1])/(h[0][0]-h[1][0]));c.transform.push(["rotate",p/Math.PI*180]),c.textAlign="center",(e==="right"||e==="left")&&(p>0?c.textBaseline=e==="right"?"bottom":"top":c.textBaseline=e==="right"?"top":"bottom")}return c}var LTt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class ZP extends qP{constructor(e){super(eu({style:ZP.defaultStyleProps},e))}getLabelStyle(e){if(!e.label||!e.d||e.d.length===0)return!1;const n=Pl(this.getGraphicStyle(e),"label"),{maxWidth:r,offsetX:i,offsetY:a,autoRotate:o,placement:s,closeToPath:l}=n,c=LTt(n,["maxWidth","offsetX","offsetY","autoRotate","placement","closeToPath"]),u=this.shapeMap.key,f=u?.getRenderBounds();return Object.assign(ITt(f,s,i,a,l,e.d,o),{wordWrapWidth:oke(f,r)},c)}getKeyStyle(e){return this.getGraphicStyle(e)}render(e,n){this.upsert("key",Ad,this.getKeyStyle(e),n),this.upsert("label",qm,this.getLabelStyle(e),n)}}ZP.defaultStyleProps={label:!0,labelPlacement:"bottom",labelCloseToPath:!0,labelAutoRotate:!0,labelOffsetX:0,labelOffsetY:0};function kTt(t){const e=[],n=r=>{r?.children.length&&r.children.forEach(i=>{e.push(i),n(i)})};return n(t),e}function DTt(t){const e=[];let n=t.parentNode;for(;n;)e.push(n),n=n.parentNode;return e}let _te=class extends FP{constructor(e){super(e),this.onMounted=()=>{this.handleRadius()},this.onAttrModified=()=>{this.handleRadius()},jT=this,this.isMutationObserved=!0,this.addEventListener(ta.MOUNTED,this.onMounted),this.addEventListener(ta.ATTR_MODIFIED,this.onAttrModified)}handleRadius(){const{radius:e,clipPath:n,width:r=0,height:i=0}=this.attributes;if(e&&r&&i){const[a,o]=this.getBounds().min,s={x:a,y:o,radius:e,width:r,height:i};if(n)Object.assign(this.parsedStyle.clipPath.style,s);else{const l=new Nu({style:s});this.style.clipPath=l}}else n&&(this.style.clipPath=null)}};const Eq=new WeakMap;let jT=null;const bte=t=>{if(jT&&DTt(jT).includes(t)){const e=Eq.get(t);e?e.includes(jT)||e.push(jT):Eq.set(t,[jT])}},Ete=t=>{const e=Eq.get(t);e&&e.forEach(n=>n.handleRadius())};class lke extends qP{constructor(e){super(e)}isImage(){const{src:e}=this.attributes;return!!e}getIconStyle(e=this.attributes){const{width:n=0,height:r=0}=e,i=this.getGraphicStyle(e);return this.isImage()?Object.assign({x:-n/2,y:-r/2},i):Object.assign({textBaseline:"middle",textAlign:"center"},i)}render(e=this.attributes,n=this){this.upsert("icon",this.isImage()?_te:Kx,this.getIconStyle(e),n)}}class cke extends qP{get context(){return this.config.context}get parsedAttributes(){return this.attributes}onframe(){}animate(e,n){const r=super.animate(e,n);return r&&(r.onframe=()=>this.onframe(),r.finished.then(()=>this.onframe())),r}}var WI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class lv extends cke{constructor(e){super(eu({style:lv.defaultStyleProps},e)),this.type="node"}getSize(e=this.attributes){const{size:n}=e;return Fh(n)}getKeyStyle(e){const n=this.getGraphicStyle(e);return Object.assign(rke(n,["label","halo","icon","badge","port"]))}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const n=Pl(this.getGraphicStyle(e),"label"),{placement:r,maxWidth:i,offsetX:a,offsetY:o}=n,s=WI(n,["placement","maxWidth","offsetX","offsetY"]),l=this.getShape("key").getLocalBounds();return Object.assign(Efe(l,r,a,o),{wordWrapWidth:oke(l,i)},s)}getHaloStyle(e){if(e.halo===!1)return!1;const n=this.getKeyStyle(e),{fill:r}=n,i=WI(n,["fill"]),a=Pl(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign(Object.assign({},i),{stroke:r}),a)}getIconStyle(e){if(e.icon===!1||!e.iconText&&!e.iconSrc)return!1;const n=Pl(this.getGraphicStyle(e),"icon");return Object.assign(wTt(e.size,n),n)}getBadgesStyle(e){var n;const r=bq(this.shapeMap,"badge-"),i={};if(Object.keys(r).forEach(f=>{i[f]=!1}),e.badge===!1||!(!((n=e.badges)===null||n===void 0)&&n.length))return i;const{badges:a=[],badgePalette:o,opacity:s=1}=e,l=WI(e,["badges","badgePalette","opacity"]),c=ike(o),u=Pl(this.getGraphicStyle(l),"badge");return a.forEach((f,h)=>{i[h]=Object.assign(Object.assign({backgroundFill:c?c[h%c?.length]:void 0,opacity:s},u),this.getBadgeStyle(f))}),i}getBadgeStyle(e){const n=this.getShape("key"),{placement:r="top",offsetX:i,offsetY:a}=e,o=WI(e,["placement","offsetX","offsetY"]),s=Efe(n.getLocalBounds(),r,i,a,!0);return Object.assign(Object.assign({},s),o)}getPortsStyle(e){var n;const r=this.getPorts(),i={};if(Object.keys(r).forEach(s=>{i[s]=!1}),e.port===!1||!(!((n=e.ports)===null||n===void 0)&&n.length))return i;const a=Pl(this.getGraphicStyle(e),"port"),{ports:o=[]}=e;return o.forEach((s,l)=>{const c=s.key||l,u=Object.assign(Object.assign({},a),s);if(Ske(u))i[c]=!1;else{const[f,h]=this.getPortXY(e,s);i[c]=Object.assign({transform:[["translate",f,h]]},u)}}),i}getPortXY(e,n){const{placement:r="left"}=n,i=this.getShape("key");return Ate(BTt(this.context,i),r)}getPorts(){return bq(this.shapeMap,"port-")}getCenter(){return this.getShape("key").getBounds().center}getIntersectPoint(e,n=!1){const r=this.getShape("key").getBounds();return vTt(e,r,n)}drawHaloShape(e,n){const r=this.getHaloStyle(e),i=this.getShape("key");this.upsert("halo",i.constructor,r,n)}drawIconShape(e,n){const r=this.getIconStyle(e);this.upsert("icon",lke,r,n),bte(this)}drawBadgeShapes(e,n){const r=this.getBadgesStyle(e);Object.keys(r).forEach(i=>{const a=r[i];this.upsert(`badge-${i}`,$w,a,n)})}drawPortShapes(e,n){const r=this.getPortsStyle(e);Object.keys(r).forEach(i=>{const a=r[i],o=`port-${i}`;this.upsert(o,Wm,a,n)})}drawLabelShape(e,n){const r=this.getLabelStyle(e);this.upsert("label",qm,r,n)}_drawKeyShape(e,n){return this.drawKeyShape(e,n)}render(e=this.parsedAttributes,n=this){this._drawKeyShape(e,n),this.getShape("key")&&(this.drawHaloShape(e,n),this.drawIconShape(e,n),this.drawBadgeShapes(e,n),this.drawLabelShape(e,n),this.drawPortShapes(e,n))}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&Ete(this)}onframe(){this.drawBadgeShapes(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this)}}lv.defaultStyleProps={x:0,y:0,size:32,droppable:!0,draggable:!0,port:!0,ports:[],portZIndex:2,portLinkToCenter:!1,badge:!0,badges:[],badgeZIndex:3,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloStrokeOpacity:.25,haloPointerEvents:"none",haloZIndex:-1,icon:!0,iconZIndex:1,label:!0,labelIsBillboard:!0,labelMaxWidth:"200%",labelPlacement:"bottom",labelWordWrap:!1,labelZIndex:0};function BTt(t,e){if(!t)return e.getLocalBounds();const n=t.canvas.getLayer(),r=e.cloneNode();Ax(r,"hidden"),n.appendChild(r);const i=r.getLocalBounds();return r.destroy(),i}let KP=class uke extends lv{constructor(e){super(eu({style:uke.defaultStyleProps},e))}drawKeyShape(e,n){return this.upsert("key",Wm,this.getKeyStyle(e),n)}getKeyStyle(e){const n=super.getKeyStyle(e);return Object.assign(Object.assign({},n),{r:Math.min(...this.getSize(e))/2})}getIconStyle(e){const n=super.getIconStyle(e),{r}=this.getShape("key").attributes,i=r*2*Ly;return n?Object.assign({width:i,height:i},n):!1}getIntersectPoint(e,n=!1){const r=this.getShape("key").getBounds();return a6(e,r,n)}};KP.defaultStyleProps={size:32};class s6 extends lv{constructor(e){super(e)}get parsedAttributes(){return this.attributes}drawKeyShape(e,n){return this.upsert("key",Zx,this.getKeyStyle(e),n)}getKeyStyle(e){const n=super.getKeyStyle(e);return Object.assign(Object.assign({},n),{points:this.getPoints(e)})}getIntersectPoint(e,n=!1){var r,i;const{points:a}=this.getShape("key").attributes,o=[+(((r=this.attributes)===null||r===void 0?void 0:r.x)||0),+(((i=this.attributes)===null||i===void 0?void 0:i.y)||0)];return eke(e,o,a,!0,n).point}}class FTt extends s6{constructor(e){super(e)}getPoints(e){const[n,r]=this.getSize(e);return IAt(n,r)}}var UTt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class l6 extends KP{constructor(e){super(eu({style:l6.defaultStyleProps},e))}parseOuterR(){const{size:e}=this.parsedAttributes;return Math.min(...Fh(e))/2}parseInnerR(){const{innerR:e}=this.parsedAttributes;return $i(e)?parseInt(e)/100*this.parseOuterR():e}drawDonutShape(e,n){const{donuts:r}=e;if(!r?.length)return;const i=r.map(f=>Ln(f)?{value:f}:f),a=Pl(this.getGraphicStyle(e),"donut"),o=ike(e.donutPalette);if(!o)return;const s=i.reduce((f,h)=>{var d;return f+((d=h.value)!==null&&d!==void 0?d:0)},0),l=this.parseOuterR(),c=this.parseInnerR();let u=0;i.forEach((f,h)=>{const{value:d=0,color:p=o[h%o.length]}=f,g=UTt(f,["value","color"]),v=(s===0?1/i.length:d/s)*360;this.upsert(`round${h}`,Ad,Object.assign(Object.assign(Object.assign({},a),{d:$Tt(l,c,u,u+v),fill:p}),g),n),u+=v})}render(e,n=this){super.render(e,n),this.drawDonutShape(e,n)}}l6.defaultStyleProps={innerR:"50%",donuts:[],donutPalette:"tableau"};const VI=(t,e,n,r)=>[t+Math.sin(r)*n,e-Math.cos(r)*n],jTt=(t,e,n,r)=>r<=0||n<=r?[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"]]:[["M",t-n,e],["A",n,n,0,1,1,t+n,e],["A",n,n,0,1,1,t-n,e],["Z"],["M",t+r,e],["A",r,r,0,1,0,t-r,e],["A",r,r,0,1,0,t+r,e],["Z"]],zTt=(t,e,n,r,i,a)=>{const[o,s]=[i/360*2*Math.PI,a/360*2*Math.PI],l=[VI(t,e,r,o),VI(t,e,n,o),VI(t,e,n,s),VI(t,e,r,s)],c=s-o>Math.PI?1:0;return[["M",l[0][0],l[0][1]],["L",l[1][0],l[1][1]],["A",n,n,0,c,1,l[2][0],l[2][1]],["L",l[3][0],l[3][1]],["A",r,r,0,c,0,l[0][0],l[0][1]],["Z"]]},$Tt=(t=0,e=0,n,r)=>{const[i,a]=[0,0];return Math.abs(n-r)%360<1e-6?jTt(i,a,t,e):zTt(i,a,t,e,n,r)};class c6 extends lv{constructor(e){super(eu({style:c6.defaultStyleProps},e))}drawKeyShape(e,n){return this.upsert("key",BP,this.getKeyStyle(e),n)}getKeyStyle(e){const n=super.getKeyStyle(e),[r,i]=this.getSize(e);return Object.assign(Object.assign({},n),{rx:r/2,ry:i/2})}getIconStyle(e){const n=super.getIconStyle(e),{rx:r,ry:i}=this.getShape("key").attributes,a=Math.min(+r,+i)*2*Ly;return n?Object.assign({width:a,height:a},n):!1}getIntersectPoint(e,n=!1){const r=this.getShape("key").getBounds();return a6(e,r,n)}}c6.defaultStyleProps={size:[45,35]};class HTt extends s6{constructor(e){super(e)}getOuterR(e){return e.outerR||Math.min(...this.getSize(e))/2}getPoints(e){return kAt(this.getOuterR(e))}getIconStyle(e){const n=super.getIconStyle(e),r=this.getOuterR(e)*Ly;return n?Object.assign({width:r,height:r},n):!1}}var GTt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class QP extends lv{constructor(e){super(Object.assign(Object.assign({},e),{style:Object.assign({},QP.defaultStyleProps,e.style)})),this.rootPointerEvent=new BD(null),this.forwardEvents=n=>{const r=this.context.canvas,i=r.context.renderingContext.root.ownerDocument.defaultView;this.normalizeToPointerEvent(n,i).forEach(o=>{const s=this.bootstrapEvent(this.rootPointerEvent,o,i,n);H_(r.context.eventService,"mappingTable.pointerupoutside",[]),r.context.eventService.mapEvent(s)})}}get eventService(){return this.context.canvas.context.eventService}get events(){return[Zt.CLICK,Zt.POINTER_DOWN,Zt.POINTER_MOVE,Zt.POINTER_UP,Zt.POINTER_OVER,Zt.POINTER_LEAVE]}getDomElement(){return this.getShape("key").getDomElement()}render(e=this.parsedAttributes,n=this){this.drawKeyShape(e,n),this.drawPortShapes(e,n)}getKeyStyle(e){const n=Wp(e,["dx","dy","innerHTML","pointerEvents","cursor"]),{dx:r=0,dy:i=0}=n,a=GTt(n,["dx","dy"]),[o,s]=this.getSize(e);return Object.assign(Object.assign({x:r,y:i},a),{width:o,height:s})}drawKeyShape(e,n){const r=this.getKeyStyle(e),{x:i,y:a,width:o=0,height:s=0}=r,l=this.upsert("key-container",Nu,{x:i,y:a,width:o,height:s,opacity:0},n);return this.upsert("key",qx,r,l)}connectedCallback(){if(!(this.context.canvas.getRenderer("main")instanceof xx))return;const r=this.getDomElement();this.events.forEach(i=>{r.addEventListener(i,this.forwardEvents)})}attributeChangedCallback(e,n,r){e==="zIndex"&&n!==r&&(this.getDomElement().style.zIndex=r)}destroy(){const e=this.getDomElement();this.events.forEach(n=>{e.removeEventListener(n,this.forwardEvents)}),super.destroy()}normalizeToPointerEvent(e,n){const r=[];if(n.isTouchEvent(e))for(let i=0;i<e.changedTouches.length;i++){const a=e.changedTouches[i];mr(a.button)&&(a.button=0),mr(a.buttons)&&(a.buttons=1),mr(a.isPrimary)&&(a.isPrimary=e.touches.length===1&&e.type==="touchstart"),mr(a.width)&&(a.width=a.radiusX||1),mr(a.height)&&(a.height=a.radiusY||1),mr(a.tiltX)&&(a.tiltX=0),mr(a.tiltY)&&(a.tiltY=0),mr(a.pointerType)&&(a.pointerType="touch"),mr(a.pointerId)&&(a.pointerId=a.identifier||0),mr(a.pressure)&&(a.pressure=a.force||.5),mr(a.twist)&&(a.twist=0),mr(a.tangentialPressure)&&(a.tangentialPressure=0),a.isNormalized=!0,a.type=e.type,r.push(a)}else if(n.isMouseEvent(e)){const i=e;mr(i.isPrimary)&&(i.isPrimary=!0),mr(i.width)&&(i.width=1),mr(i.height)&&(i.height=1),mr(i.tiltX)&&(i.tiltX=0),mr(i.tiltY)&&(i.tiltY=0),mr(i.pointerType)&&(i.pointerType="mouse"),mr(i.pointerId)&&(i.pointerId=1),mr(i.pressure)&&(i.pressure=.5),mr(i.twist)&&(i.twist=0),mr(i.tangentialPressure)&&(i.tangentialPressure=0),i.isNormalized=!0,r.push(i)}else r.push(e);return r}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey,e.ctrlKey=n.ctrlKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.screen.x=n.screenX,e.screen.y=n.screenY,e.relatedTarget=null}bootstrapEvent(e,n,r,i){e.view=r,e.originalEvent=null,e.nativeEvent=i,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n);const{x:a,y:o}=this.getViewportXY(n);e.viewport.x=a,e.viewport.y=o;const[s,l]=this.context.canvas.getCanvasByViewport([a,o]);return e.canvas.x=s,e.canvas.y=l,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=i.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e}getViewportXY(e){let n,r;const{offsetX:i,offsetY:a,clientX:o,clientY:s}=e;if(!Kn(i)&&!Kn(a))n=i,r=a;else{const l=this.eventService.client2Viewport({x:o,y:s});n=l.x,r=l.y}return{x:n,y:r}}onframe(){super.onframe();const{opacity:e}=this.attributes;this.getDomElement().style.opacity=`${e}`}}QP.defaultStyleProps={size:[160,80],halo:!1,icon:!1,label:!1,pointerEvents:"auto"};var cfe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};let fke=class hke extends lv{constructor(e){super(eu({style:hke.defaultStyleProps},e))}getKeyStyle(e){const[n,r]=this.getSize(e),i=super.getKeyStyle(e),{fillOpacity:a,opacity:o=a}=i,s=cfe(i,["fillOpacity","opacity"]);return Object.assign(Object.assign({opacity:o},s),{width:n,height:r,x:-n/2,y:-r/2})}getBounds(){return this.getShape("key").getBounds()}getHaloStyle(e){if(e.halo===!1)return!1;const n=this.getShape("key").attributes,{fill:r,stroke:i}=n;cfe(n,["fill","stroke"]);const a=Pl(this.getGraphicStyle(e),"halo"),o=Number(a.lineWidth),[s,l]=Hi(this.getSize(e),[o,o]),{lineWidth:c}=a,u={fill:"transparent",lineWidth:c/2,width:s-c/2,height:l-c/2,x:-(s-c/2)/2,y:-(l-c/2)/2};return Object.assign(Object.assign({},a),u)}getIconStyle(e){const n=super.getIconStyle(e),[r,i]=this.getSize(e);return n?Object.assign({width:r*Ly,height:i*Ly},n):!1}drawKeyShape(e,n){const r=this.upsert("key",_te,this.getKeyStyle(e),n);return bte(this),r}drawHaloShape(e,n){this.upsert("halo",Nu,this.getHaloStyle(e),n)}update(e){super.update(e),e&&("x"in e||"y"in e||"z"in e)&&Ete(this)}};fke.defaultStyleProps={size:32};class WTt extends lv{constructor(e){super(e)}getKeyStyle(e){const[n,r]=this.getSize(e);return Object.assign(Object.assign({},super.getKeyStyle(e)),{width:n,height:r,x:-n/2,y:-r/2})}getIconStyle(e){const n=super.getIconStyle(e),{width:r,height:i}=this.getShape("key").attributes;return n?Object.assign({width:r*Ly,height:i*Ly},n):!1}drawKeyShape(e,n){return this.upsert("key",Nu,this.getKeyStyle(e),n)}}class VTt extends s6{constructor(e){super(e)}getInnerR(e){return e.innerR||this.getOuterR(e)*3/8}getOuterR(e){return Math.min(...this.getSize(e))/2}getPoints(e){return RAt(this.getOuterR(e),this.getInnerR(e))}getIconStyle(e){const n=super.getIconStyle(e),r=this.getInnerR(e)*2*Ly;return n?Object.assign({width:r,height:r},n):!1}getPortXY(e,n){const{placement:r="top"}=n,i=this.getShape("key").getLocalBounds(),a=MAt(this.getOuterR(e),this.getInnerR(e));return Ate(i,r,a,!1)}}class u6 extends s6{constructor(e){super(eu({style:u6.defaultStyleProps},e))}getPoints(e){const{direction:n}=e,[r,i]=this.getSize(e);return PAt(r,i,n)}getPortXY(e,n){const{direction:r}=e,{placement:i="top"}=n,a=this.getShape("key").getLocalBounds(),[o,s]=this.getSize(e),l=NAt(o,s,r);return Ate(a,i,l,!1)}getIconStyle(e){const{icon:n,iconText:r,iconSrc:i,direction:a}=e;if(n===!1||Em(r||i))return!1;const o=Pl(this.getGraphicStyle(e),"icon"),s=this.getShape("key").getLocalBounds(),[l,c]=GSt(s,a),u=WSt(s,a)*2*Ly;return Object.assign({x:l,y:c,width:u,height:u},o)}}u6.defaultStyleProps={size:40,direction:"up"};var ufe=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class Hw extends lv{constructor(e){super(eu({style:Hw.defaultStyleProps},e)),this.type="combo",this.updateComboPosition(this.parsedAttributes)}getKeySize(e){const{collapsed:n,childrenNode:r=[]}=e;return r.length===0?this.getEmptyKeySize(e):n?this.getCollapsedKeySize(e):this.getExpandedKeySize(e)}getEmptyKeySize(e){const{padding:n,collapsedSize:r}=e,[i,a,o,s]=Qp(n);return Hi(Fh(r),[s+a,i+o,0])}getCollapsedKeySize(e){return Fh(e.collapsedSize)}getExpandedKeySize(e){const n=this.getContentBBox(e);return[t0(n),n0(n),0]}getContentBBox(e){const{childrenNode:n=[],padding:r}=e,i=n.map(o=>this.context.element.getElement(o)).filter(Boolean);if(i.length===0){const o=new cs,{x:s=0,y:l=0,size:c}=e,[u,f]=Fh(c);return o.setMinMax([s-u/2,l-f/2,0],[s+u/2,l+f/2,0]),o}const a=YP(i.map(o=>o.getBounds()));return r?ub(a,r):a}drawCollapsedMarkerShape(e,n){const r=this.getCollapsedMarkerStyle(e);this.upsert("collapsed-marker",lke,r,n),bte(this)}getCollapsedMarkerStyle(e){if(!e.collapsed||!e.collapsedMarker)return!1;const n=Pl(this.getGraphicStyle(e),"collapsedMarker"),{type:r}=n,i=ufe(n,["type"]),a=this.getShape("key"),[o,s]=ay(a.getLocalBounds(),"center"),l=Object.assign(Object.assign({},i),{x:o,y:s});if(r){const c=this.getCollapsedMarkerText(r,e);Object.assign(l,{text:c})}return l}getCollapsedMarkerText(e,n){const{childrenData:r=[]}=n,{model:i}=this.context;return e==="descendant-count"?i.getDescendantsData(this.id).length.toString():e==="child-count"?r.length.toString():e==="node-count"?i.getDescendantsData(this.id).filter(a=>i.getElementType(pt(a))==="node").length.toString():ur(e)?e(r):""}getComboPosition(e){const{x:n=0,y:r=0,collapsed:i,childrenData:a=[]}=e;if(a.length===0)return[+n,+r,0];if(i){const{model:o}=this.context,s=o.getDescendantsData(this.id).filter(l=>!o.isCombo(pt(l)));if(s.length>0&&s.some(fTt)){const l=s.reduce((c,u)=>Hi(c,pl(u)),[0,0,0]);return nv(l,s.length)}return[+n,+r,0]}return this.getContentBBox(e).center}getComboStyle(e){const[n,r]=this.getComboPosition(e);return{x:n,y:r,transform:[["translate",n,r]]}}updateComboPosition(e){const n=this.getComboStyle(e);Object.assign(this.style,n);const{x:r,y:i}=n;this.context.model.syncNodeLikeDatum({id:this.id,style:{x:r,y:i}}),Ete(this)}render(e,n=this){super.render(e,n),this.drawCollapsedMarkerShape(e,n)}update(e={}){super.update(e),this.updateComboPosition(this.parsedAttributes)}onframe(){super.onframe(),this.attributes.collapsed||this.updateComboPosition(this.parsedAttributes),this.drawKeyShape(this.parsedAttributes,this)}animate(e,n){const r=super.animate(this.attributes.collapsed?e:e.map(i=>{var{x:a,y:o,z:s,transform:l}=i,c=ufe(i,["x","y","z","transform"]);return c}),n);return r&&new Proxy(r,{set:(i,a,o)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,o))})}}Hw.defaultStyleProps={childrenNode:[],droppable:!0,draggable:!0,collapsed:!1,collapsedSize:32,collapsedMarker:!0,collapsedMarkerZIndex:1,collapsedMarkerFontSize:12,collapsedMarkerTextAlign:"center",collapsedMarkerTextBaseline:"middle",collapsedMarkerType:"child-count"};class YTt extends Hw{constructor(e){super(e)}drawKeyShape(e,n){return this.upsert("key",Wm,this.getKeyStyle(e),n)}getKeyStyle(e){const{collapsed:n}=e,r=super.getKeyStyle(e),[i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},r),n&&Pl(r,"collapsed")),{r:i/2})}getCollapsedKeySize(e){const[n,r]=Fh(e.collapsedSize),i=Math.max(n,r)/2;return[i*2,i*2,0]}getExpandedKeySize(e){const n=this.getContentBBox(e),[r,i]=cb(n),a=Math.sqrt(Math.pow(r,2)+Math.pow(i,2))/2;return[a*2,a*2,0]}getIntersectPoint(e,n=!1){const r=this.getShape("key").getBounds();return a6(e,r,n)}}class XTt extends Hw{constructor(e){super(e)}drawKeyShape(e,n){return this.upsert("key",Nu,this.getKeyStyle(e),n)}getKeyStyle(e){const n=super.getKeyStyle(e),[r,i]=this.getKeySize(e);return Object.assign(Object.assign(Object.assign({},n),e.collapsed&&Pl(n,"collapsed")),{width:r,height:i,x:-r/2,y:-i/2})}}const qTt={padding:10};function ffe(t,e,n,r,i,a){const{padding:o}=Object.assign(qTt,a),s=w_(n,o),l=w_(r,o),c=[t,...i,e];let u=null;const f=[];for(let h=0,d=c.length;h<d-1;h++){const p=h+1,g=c[h],v=c[p],y=pTt(g,v);let _=null;if(h===0)if(p===d-1)if(s.intersects(l))_=PU(g,v,s,l);else if(!wB(g,s)&&!wB(v,l)){const E=nx(g,s),x=nx(v,l);_=dfe(E,x,Yf(E,x)),_.points.unshift(E),_.points.push(x)}else y||(_=KTt(g,v,s,l));else tv(v,s)?_=PU(g,v,s,w_(v,o),u):y||(_=_k(g,v,s));else p===d-1?tv(g,l)?_=PU(g,v,w_(g,o),l,u):y||(_=dke(g,v,l,u)):y||(_=dfe(g,v,u));_?(f.push(..._.points),u=_.direction):u=Yf(g,v),p<d-1&&f.push(v)}return f.map(Ox)}const ZTt={N:"S",S:"N",W:"E",E:"W"},hfe={N:-Math.PI/2,S:Math.PI/2,E:0,W:Math.PI};function Yf(t,e){const[n,r]=t,[i,a]=e;return n===i?r>a?"N":"S":r===a?n>i?"W":"E":null}function xq(t,e){return e==="N"||e==="S"?n0(t):t0(t)}function dfe(t,e,n){const r=[t[0],e[1]],i=[e[0],t[1]],a=Yf(t,r),o=Yf(t,i),s=n?ZTt[n]:null,l=a===n||a!==s&&o!==n?r:i;return{points:[l],direction:Yf(l,e)}}function _k(t,e,n){if(wB(t,n)){const r=IM(t,e,n);return{points:[r],direction:Yf(r,e)}}else{const r=nx(t,n),a=["left","right"].includes(nR(t,n))?[e[0],r[1]]:[r[0],e[1]];return{points:[a],direction:Yf(a,e)}}}function dke(t,e,n,r){const i=wB(e,n)?e:nx(e,n),a=[[i[0],t[1]],[t[0],i[1]]],o=a.filter(l=>HSt(l,n)&&!zLe(l,n,!0)),s=o.filter(l=>Yf(l,t)!==r);if(s.length>0){const l=s.find(c=>Yf(t,c)===r)||s[0];return{points:[l],direction:Yf(l,e)}}else{const l=g9e(a,o)[0],c=U_(e,l,xq(n,r)/2);return{points:[IM(c,t,n),c],direction:Yf(c,e)}}}function KTt(t,e,n,r){let i=_k(t,e,n);const a=NM(i.points[0]);if(tv(a,r)){i=_k(e,t,r);const o=NM(i.points[0]);if(tv(o,n)){const s=U_(t,a,xq(n,Yf(t,a))/2),l=U_(e,o,xq(r,Yf(e,o))/2),c=[(s[0]+l[0])/2,(s[1]+l[1])/2],u=_k(t,c,n),f=dke(c,e,r,u.direction);i.points=[u.points[0],f.points[0]],i.direction=f.direction}}return i}function PU(t,e,n,r,i){const o=YP([n,r]),s=_s(e,o.center)>_s(t,o.center),[l,c]=s?[e,t]:[t,e],u=n0(o)+t0(o);let f;if(i){const p=[l[0]+u*Math.cos(hfe[i]),l[1]+u*Math.sin(hfe[i])];f=U_(nx(p,o),p,.01)}else f=U_(nx(l,o),l,-.01);let h=IM(f,c,o),d=[d2(f,2),d2(h,2)];if(Fs(d2(f),d2(h))){const p=vte(Wo(f,l),[1,0,0])+Math.PI/2;h=[c[0]+u*Math.cos(p),c[1]+u*Math.sin(p),0],h=d2(U_(nx(h,o),c,-.01),2);const g=IM(f,h,o);d=[f,g,h]}return{points:s?d.reverse():d,direction:Yf(s?f:h,e)}}function IM(t,e,n){let r=[t[0],e[1]];return tv(r,n)&&(r=[e[0],t[1]]),r}function pke(t,e,n,r,i){let l=typeof e=="number"?e:.5;e==="start"&&(l=0),e==="end"&&(l=.99);const c=Ru(t.getPoint(l)),u=Ru(t.getPoint(l+.01));let f=e==="start"?"left":e==="end"?"right":"center";if(KLe(c,u)||!n){const[y,_]=pfe(t,l,r,i);return{transform:[["translate",y,_]],textAlign:f}}let h=Math.atan2(u[1]-c[1],u[0]-c[0]);u[0]<c[0]&&(f=f==="center"?f:f==="left"?"right":"left",r*=-1,h+=Math.PI);const[p,g]=pfe(t,l,r,i,h),v=[["translate",p,g],["rotate",h/Math.PI*180]];return{textAlign:f,transform:v}}function QTt(t,e,n,r,i){var a,o;const s=((a=t.badge)===null||a===void 0?void 0:a.getGeometryBounds().halfExtents[0])*2||0,l=((o=t.label)===null||o===void 0?void 0:o.getGeometryBounds().halfExtents[0])*2||0;return pke(t.key,n,!0,(l?(l/2+s/2)*(e==="suffix"?1:-1):0)+r,i)}function pfe(t,e,n,r,i){const[a,o]=Ru(t.getPoint(e));let s=n,l=r;return i&&(s=n*Math.cos(i)-r*Math.sin(i),l=n*Math.sin(i)+r*Math.cos(i)),[a+s,o+l]}function Sq(t,e,n,r){if(Fs(t,e))return t;const i=Wo(e,t),a=[t[0]+n*i[0],t[1]+n*i[1]],o=yy(i6(i,!1));return a[0]+=r*o[0],a[1]+=r*o[1],a}function JTt(t){return Ln(t)?[t,-t]:t}function eAt(t){return Ln(t)?[t,1-t]:t}function tAt(t,e,n){return[["M",t[0],t[1]],["Q",n[0],n[1],e[0],e[1]]]}function gke(t,e,n){return[["M",t[0],t[1]],["C",n[0][0],n[0][1],n[1][0],n[1][1],e[0],e[1]]]}function xte(t,e=0,n=!1){const r=t.length-1,i=t[0],a=t[r],o=t.slice(1,r),s=[["M",i[0],i[1]]];return o.forEach((l,c)=>{const u=o[c-1]||i,f=o[c+1]||a;if(!QLe(u,l,f)&&e){const[h,d]=nAt(u,l,f,e);s.push(["L",h[0],h[1]],["Q",l[0],l[1],d[0],d[1]],["L",d[0],d[1]])}else s.push(["L",l[0],l[1]])}),s.push(["L",a[0],a[1]]),n&&s.push(["Z"]),s}function nAt(t,e,n,r){const i=OB(t,e),a=OB(n,e),o=Math.min(r,Math.min(i,a)/2),s=[e[0]-o/i*(e[0]-t[0]),e[1]-o/i*(e[1]-t[1])],l=[e[0]-o/a*(e[0]-n[0]),e[1]-o/a*(e[1]-n[1])];return[s,l]}const rAt=t=>{const e=Math.PI/2,n=n0(t)/2,r=t0(t)/2,i=Math.atan2(n,r)/2,a=Math.atan2(r,n)/2;return{top:[-e-a,-e+a],"top-right":[-e+a,-i],"right-top":[-e+a,-i],right:[-i,i],"bottom-right":[i,e-a],"right-bottom":[i,e-a],bottom:[e-a,e+a],"bottom-left":[e+a,Math.PI-i],"left-bottom":[e+a,Math.PI-i],left:[Math.PI-i,Math.PI+i],"top-left":[Math.PI+i,-e-a],"left-top":[Math.PI+i,-e-a]}};function vke(t,e,n,r,i){const a=w_(t),o=t.getCenter();let s=r&&q_(r),l=i&&q_(i);if(!s||!l){const c=rAt(a),u=c[e][0],f=c[e][1],[h,d]=cb(a),p=Math.max(h,d),g=Hi(o,[p*Math.cos(u),p*Math.sin(u),0]),v=Hi(o,[p*Math.cos(f),p*Math.sin(f),0]);s=Aq(t,g),l=Aq(t,v),n||([s,l]=[l,s])}return[s,l]}function iAt(t,e,n,r,i,a){const o=t.getPorts()[i||a],s=t.getPorts()[a||i];let[l,c]=vke(t,e,n,o,s);const u=aAt(t,l,c,r);return o&&(l=LM(o,u[0])),s&&(c=LM(s,u.at(-1))),gke(l,c,u)}function aAt(t,e,n,r){const i=t.getCenter();if(Fs(e,n)){const a=Wo(e,i),o=[r*Math.sign(a[0])||r/2,r*Math.sign(a[1])||-r/2,0];return[Hi(e,o),Hi(n,zg(o,[1,-1,1]))]}return[U_(i,e,_s(i,e)+r),U_(i,n,_s(i,n)+r)]}function oAt(t,e,n,r,i,a,o){const s=wte(t),l=s[a||o],c=s[o||a];let[u,f]=vke(t,n,r,l,c);const h=sAt(t,u,f,i);return l&&(u=LM(l,h[0])),c&&(f=LM(c,h.at(-1))),xte([u,...h,f],e)}function sAt(t,e,n,r){const i=[],a=w_(t);if(Fs(e,n))switch(nR(e,a)){case"left":i.push([e[0]-r,e[1]]),i.push([e[0]-r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"right":i.push([e[0]+r,e[1]]),i.push([e[0]+r,e[1]+r]),i.push([e[0],e[1]+r]);break;case"top":i.push([e[0],e[1]-r]),i.push([e[0]+r,e[1]-r]),i.push([e[0]+r,e[1]]);break;case"bottom":i.push([e[0],e[1]+r]),i.push([e[0]+r,e[1]+r]),i.push([e[0]+r,e[1]]);break}else{const o=nR(e,a),s=nR(n,a);if(o===s){const l=o;let c,u;switch(l){case"left":c=Math.min(e[0],n[0])-r,i.push([c,e[1]]),i.push([c,n[1]]);break;case"right":c=Math.max(e[0],n[0])+r,i.push([c,e[1]]),i.push([c,n[1]]);break;case"top":u=Math.min(e[1],n[1])-r,i.push([e[0],u]),i.push([n[0],u]);break;case"bottom":u=Math.max(e[1],n[1])+r,i.push([e[0],u]),i.push([n[0],u]);break}}else{const l=(h,d)=>({left:[d[0]-r,d[1]],right:[d[0]+r,d[1]],top:[d[0],d[1]-r],bottom:[d[0],d[1]+r]})[h],c=l(o,e),u=l(s,n),f=IM(c,u,a);i.push(c,f,u)}}return i}function Tq(t,e){const n=new Set,r=new Set,i=new Set;return t.forEach(a=>{e(a).forEach(s=>{n.add(s),t.includes(s.source)&&t.includes(s.target)?r.add(s):i.add(s)})}),{edges:Array.from(n),internal:Array.from(r),external:Array.from(i)}}function gfe(t,e){const n=[];let r=t;for(;r;){n.push(r);const i=e(pt(r));if(i)r=i;else break}if(n.some(i=>{var a;return(a=i.style)===null||a===void 0?void 0:a.collapsed})){const i=n.reverse().findIndex(Lh);return n[i]||n.at(-1)}return t}function lAt(t,e){return e||(t<4?10:t===4?12:t*2.5)}const cAt=(t,e)=>{const n=Math.max(t,e)/2;return[["M",-t/2,0],["A",n,n,0,1,0,2*n-t/2,0],["A",n,n,0,1,0,-t/2,0],["Z"]]},mke=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",t/2,e/2],["Z"]],uAt=(t,e)=>[["M",-t/2,0],["L",0,-e/2],["L",t/2,0],["L",0,e/2],["Z"]],fAt=(t,e)=>[["M",-t/2,0],["L",t/2,-e/2],["L",4*t/5-t/2,0],["L",t/2,e/2],["Z"]],hAt=(t,e)=>[["M",-t/2,-e/2],["L",t/2,-e/2],["L",t/2,e/2],["L",-t/2,e/2],["Z"]],dAt=(t,e)=>{const n=t/2,r=t/7,i=t-r;return[["M",-n,0],["L",0,-e/2],["L",0,e/2],["Z"],["M",i-n,-e/2],["L",i+r-n,-e/2],["L",i+r-n,e/2],["L",i-n,e/2],["Z"]]},pAt=(t,e)=>[["M",t/2,-e/2],["L",-t/2,0],["L",t/2,0],["L",-t/2,0],["L",t/2,e/2]],gAt=Object.freeze(Object.defineProperty({__proto__:null,circle:cAt,diamond:uAt,rect:hAt,simple:pAt,triangle:mke,triangleRect:dAt,vee:fAt},Symbol.toStringTag,{value:"Module"}));var YI=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class fb extends cke{constructor(e){super(eu({style:fb.defaultStyleProps},e)),this.type="edge"}get sourceNode(){const{sourceNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}get targetNode(){const{targetNode:e}=this.parsedAttributes;return this.context.element.getElement(e)}getKeyStyle(e){const n=this.getGraphicStyle(e),{loop:r}=n,i=YI(n,["loop"]),{sourceNode:a,targetNode:o}=this,l={d:r&&AAt(a,o)?this.getLoopPath(e):this.getKeyPath(e)};return Ad.PARSED_STYLE_LIST.forEach(c=>{c in i&&(l[c]=i[c])}),l}getLoopPath(e){const{sourcePort:n,targetPort:r}=e,i=this.sourceNode,a=w_(i),o=Math.max(t0(a),n0(a)),{placement:s,clockwise:l,dist:c=o}=Pl(this.getGraphicStyle(e),"loop");return iAt(i,s,l,c,n,r)}getEndpoints(e,n=!0,r=[]){const{sourcePort:i,targetPort:a}=e,{sourceNode:o,targetNode:s}=this,[l,c]=OAt(o,s,i,a);if(!n){const d=l?q_(l):o.getCenter(),p=c?q_(c):s.getCenter();return[d,p]}const u=typeof r=="function"?r():r,f=bfe(l||o,u[0]||c||s),h=bfe(c||s,u[u.length-1]||l||o);return[f,h]}getHaloStyle(e){if(e.halo===!1)return!1;const n=this.getKeyStyle(e),r=Pl(this.getGraphicStyle(e),"halo");return Object.assign(Object.assign({},n),r)}getLabelStyle(e){if(e.label===!1||!e.labelText)return!1;const n=Pl(this.getGraphicStyle(e),"label"),{placement:r,offsetX:i,offsetY:a,autoRotate:o,maxWidth:s}=n,l=YI(n,["placement","offsetX","offsetY","autoRotate","maxWidth"]),c=pke(this.shapeMap.key,r,o,i,a),u=this.shapeMap.key.getLocalBounds(),f=CTt([u.min,u.max],s);return Object.assign({wordWrapWidth:f},c,l)}getBadgeStyle(e){if(e.badge===!1||!e.badgeText)return!1;const n=Pl(e,"badge"),{offsetX:r,offsetY:i,placement:a}=n,o=YI(n,["offsetX","offsetY","placement"]);return Object.assign(o,QTt(this.shapeMap,a,e.labelPlacement,r,i))}drawArrow(e,n){var r;const i=n==="start",o=e[n==="start"?"startArrow":"endArrow"],s=this.shapeMap.key;if(o){const l=this.getArrowStyle(e,i),[c,u,f]=i?["markerStart","markerStartOffset","startArrowOffset"]:["markerEnd","markerEndOffset","endArrowOffset"],h=s.parsedStyle[c];if(h)h.attr(l);else{const d=l.src?FP:Ad,p=new d({style:l});s.style[c]=p}s.style[u]=e[f]||l.width/2+ +l.lineWidth}else{const l=i?"markerStart":"markerEnd";(r=s.style[l])===null||r===void 0||r.destroy(),s.style[l]=null}}getArrowStyle(e,n){const r=this.getShape("key").attributes,i=n?"startArrow":"endArrow",a=Pl(this.getGraphicStyle(e),i),{size:o,type:s}=a,l=YI(a,["size","type"]),[c,u]=Fh(lAt(r.lineWidth,o)),h=(ur(s)?s:gAt[s]||mke)(c,u);return Object.assign(Wp(r,["stroke","strokeOpacity","fillOpacity"]),{width:c,height:u},Object.assign({},h&&{d:h,fill:s==="simple"?"":r.stroke}),l)}drawLabelShape(e,n){const r=this.getLabelStyle(e);this.upsert("label",qm,r,n)}drawHaloShape(e,n){const r=this.getHaloStyle(e);this.upsert("halo",Ad,r,n)}drawBadgeShape(e,n){const r=this.getBadgeStyle(e);this.upsert("badge",$w,r,n)}drawSourceArrow(e){this.drawArrow(e,"start")}drawTargetArrow(e){this.drawArrow(e,"end")}drawKeyShape(e,n){const r=this.getKeyStyle(e);return this.upsert("key",Ad,r,n)}render(e=this.parsedAttributes,n=this){this.drawKeyShape(e,n),this.getShape("key")&&(this.drawSourceArrow(e),this.drawTargetArrow(e),this.drawLabelShape(e,n),this.drawHaloShape(e,n),this.drawBadgeShape(e,n))}onframe(){this.drawKeyShape(this.parsedAttributes,this),this.drawSourceArrow(this.parsedAttributes),this.drawTargetArrow(this.parsedAttributes),this.drawHaloShape(this.parsedAttributes,this),this.drawLabelShape(this.parsedAttributes,this),this.drawBadgeShape(this.parsedAttributes,this)}animate(e,n){const r=super.animate(e,n);return r&&new Proxy(r,{set:(i,a,o)=>(a==="currentTime"&&Promise.resolve().then(()=>this.onframe()),Reflect.set(i,a,o))})}}fb.defaultStyleProps={badge:!0,badgeOffsetX:0,badgeOffsetY:0,badgePlacement:"suffix",isBillboard:!0,label:!0,labelAutoRotate:!0,labelIsBillboard:!0,labelMaxWidth:"80%",labelOffsetX:4,labelOffsetY:0,labelPlacement:"center",labelTextBaseline:"middle",labelWordWrap:!1,halo:!1,haloDroppable:!1,haloLineDash:0,haloLineWidth:12,haloPointerEvents:"none",haloStrokeOpacity:.25,haloZIndex:-1,loop:!0,startArrow:!1,startArrowLineDash:0,startArrowLineJoin:"round",startArrowLineWidth:1,startArrowTransformOrigin:"center",startArrowType:"vee",endArrow:!1,endArrowLineDash:0,endArrowLineJoin:"round",endArrowLineWidth:1,endArrowTransformOrigin:"center",endArrowType:"vee",loopPlacement:"top",loopClockwise:!0};class Jx extends fb{constructor(e){super(eu({style:Jx.defaultStyleProps},e))}getKeyPath(e){const[n,r]=this.getEndpoints(e),{controlPoints:i,curvePosition:a,curveOffset:o}=e,s=this.getControlPoints(n,r,eAt(a),JTt(o),i);return gke(n,r,s)}getControlPoints(e,n,r,i,a){return a?.length===2?a:[Sq(e,n,r[0],i[0]),Sq(e,n,r[1],i[1])]}}Jx.defaultStyleProps={curvePosition:.5,curveOffset:20};class f6 extends Jx{constructor(e){super(eu({style:f6.defaultStyleProps},e))}getControlPoints(e,n,r,i){const a=n[0]-e[0];return[[e[0]+a*r[0]+i[0],e[1]],[n[0]-a*r[1]+i[1],n[1]]]}}f6.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};class h6 extends Jx{constructor(e){super(eu({style:h6.defaultStyleProps},e))}get ref(){return this.context.model.getRootsData()[0]}getEndpoints(e){if(this.sourceNode.id===this.ref.id)return super.getEndpoints(e);const n=pl(this.ref),r=this.sourceNode.getIntersectPoint(n,!0),i=this.targetNode.getIntersectPoint(n);return[r,i]}toRadialCoordinate(e){const n=pl(this.ref),r=_s(e,n),i=YLe(Wo(e,n));return[r,i]}getControlPoints(e,n,r,i){const[a,o]=this.toRadialCoordinate(e),[s]=this.toRadialCoordinate(n),l=s-a;return[[e[0]+(l*r[0]+i[0])*Math.cos(o),e[1]+(l*r[0]+i[0])*Math.sin(o)],[n[0]-(l*r[1]-i[0])*Math.cos(o),n[1]-(l*r[1]-i[0])*Math.sin(o)]]}}h6.defaultStyleProps={curvePosition:.5,curveOffset:20};class d6 extends Jx{constructor(e){super(eu({style:d6.defaultStyleProps},e))}getControlPoints(e,n,r,i){const a=n[1]-e[1];return[[e[0],e[1]+a*r[0]+i[0]],[n[0],n[1]-a*r[1]+i[1]]]}}d6.defaultStyleProps={curvePosition:[.5,.5],curveOffset:[0,0]};let yke=class _ke extends fb{constructor(e){super(eu({style:_ke.defaultStyleProps},e))}getKeyPath(e){const[n,r]=this.getEndpoints(e);return[["M",n[0],n[1]],["L",r[0],r[1]]]}};yke.defaultStyleProps={};const vAt={enableObstacleAvoidance:!1,offset:10,maxAllowedDirectionChange:Math.PI/2,maximumLoops:3e3,gridSize:5,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{right:{stepX:1,stepY:0},left:{stepX:-1,stepY:0},bottom:{stepX:0,stepY:1},top:{stepX:0,stepY:-1}},penalties:{0:0,90:0},distFunc:OB},Q0=t=>`${Math.round(t[0])}|||${Math.round(t[1])}`;function GE(t,e){const n=r=>Math.round(r/e);return Ln(t)?n(t):t.map(n)}function mAt(t,e){const n=Math.abs(t-e);return n>Math.PI?2*Math.PI-n:n}function vfe(t,e){const n=e[0]-t[0],r=e[1]-t[1];return!n&&!r?0:Math.atan2(r,n)}function bke(t,e,n,r){const i=vfe(t,e),a=n[Q0(t)],s=vfe(a||r,t);return mAt(s,i)}const yAt=(t,e)=>{const{offset:n,gridSize:r}=e,i={};return t.forEach(a=>{if(!a||a.destroyed||!a.isVisible())return;const o=ub(a.getRenderBounds(),n);for(let s=GE(o.min[0],r);s<=GE(o.max[0],r);s+=1)for(let l=GE(o.min[1],r);l<=GE(o.max[1],r);l+=1)i[`${s}|||${l}`]=!0}),i};function mfe(t,e,n){return Math.min(...e.map(r=>n(t,r)))}function _At(t,e,n){let r=t[0],i=n(t[0],e);for(let a=0;a<t.length;a++){const o=t[a],s=n(o,e);s<i&&(r=o,i=s)}return r}const yfe=(t,e,n,r)=>{if(!e)return[t];const{directionMap:i,offset:a}=r,o=ub(e.getRenderBounds(),a),s=Object.keys(i).reduce((l,c)=>{if(n.includes(c)){const u=i[c],[f,h]=cb(o),d=[t[0]+u.stepX*f,t[1]+u.stepY*h],p=VSt(o);for(let g=0;g<p.length;g++){const v=mte([t,d],p[g]);v&&zLe(v,o)&&l.push(v)}}return l},[]);return tv(t,o)||s.push(t),s.map(l=>GE(l,r.gridSize))},bAt=(t,e,n,r,i,a,o)=>{const s=[];let l=[a[0]===r[0]?r[0]:t[0]*o,a[1]===r[1]?r[1]:t[1]*o];s.unshift(l);let c=t,u=e[Q0(c)];for(;u;){const d=u,p=c;bke(d,p,e,n)&&(l=[d[0]===p[0]?l[0]:d[0]*o,d[1]===p[1]?l[1]:d[1]*o],s.unshift(l)),u=e[Q0(d)],c=d}const f=i.map(d=>[d[0]*o,d[1]*o]),h=_At(f,l,OB);return s.unshift(h),s};function EAt(t,e,n,r){const i=Ox(t.getCenter()),a=Ox(e.getCenter()),o=Object.assign(vAt,r),{gridSize:s}=o,l=o.enableObstacleAvoidance?n:[t,e],c=yAt(l,o),u=GE(i,s),f=GE(a,s),h=yfe(i,t,o.startDirections,o),d=yfe(a,e,o.endDirections,o);h.forEach(C=>delete c[Q0(C)]),d.forEach(C=>delete c[Q0(C)]);const p={},g={},v={},y={},_={},E=new xAt;for(let C=0;C<h.length;C++){const D=h[C],L=Q0(D);p[L]=D,y[L]=0,_[L]=mfe(D,d,o.distFunc),E.add({id:L,value:_[L]})}const x=d.map(C=>Q0(C));let T=o.maximumLoops,S,w=1/0;for(const[C,D]of Object.entries(p))_[C]<=w&&(w=_[C],S=D);for(;Object.keys(p).length>0&&T>0;){const C=E.minId(!1);if(C)S=p[C];else break;const D=Q0(S);if(x.includes(D))return bAt(S,v,u,a,h,f,s);delete p[D],E.remove(D),g[D]=!0;for(const L of Object.values(o.directionMap)){const B=Hi(S,[L.stepX,L.stepY]),I=Q0(B);if(g[I])continue;const U=bke(S,B,v,u);if(U>o.maxAllowedDirectionChange||c[I])continue;p[I]||(p[I]=B);const $=o.penalties[U],X=o.distFunc(S,B)+(isNaN($)?s:$),N=y[D]+X,M=y[I];M&&N>=M||(v[I]=S,y[I]=N,_[I]=N+mfe(B,d,o.distFunc),E.add({id:I,value:_[I]}))}T-=1}return[]}class xAt{constructor(){this.arr=[],this.map={},this.arr=[],this.map={}}_innerAdd(e,n){let r=0,i=n-1;for(;i-r>1;){const a=Math.floor((r+i)/2);if(this.arr[a].value>e.value)i=a;else if(this.arr[a].value<e.value)r=a;else{this.arr.splice(a,0,e),this.map[e.id]=!0;return}}this.arr.splice(i,0,e),this.map[e.id]=!0}add(e){delete this.map[e.id];const n=this.arr.length;if(!n||this.arr[n-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,n)}remove(e){this.map[e]&&delete this.map[e]}_clearAndGetMinId(){let e;for(let n=this.arr.length-1;n>=0;n--)this.map[this.arr[n].id]?e=this.arr[n].id:this.arr.splice(n,1);return e}_findFirstId(){for(;this.arr.length;){const e=this.arr.shift();if(this.map[e.id])return e.id}}minId(e){return e?this._clearAndGetMinId():this._findFirstId()}}let Ste=class Eke extends fb{constructor(e){super(eu({style:Eke.defaultStyleProps},e))}getControlPoints(e){const{router:n}=e,{sourceNode:r,targetNode:i}=this,[a,o]=this.getEndpoints(e,!1);let s=[];if(!n)s=e.controlPoints;else if(n.type==="shortest-path"){const l=this.context.element.getNodes();s=EAt(r,i,l,n),s.length||(s=ffe(a,o,r,i,e.controlPoints,{padding:n.offset}))}else n.type==="orth"&&(s=ffe(a,o,r,i,e.controlPoints,n));return s}getPoints(e){const n=this.getControlPoints(e),[r,i]=this.getEndpoints(e,!0,n);return[r,...n,i]}getKeyPath(e){const n=this.getPoints(e);return xte(n,e.radius)}getLoopPath(e){const{sourcePort:n,targetPort:r,radius:i}=e,a=this.sourceNode,o=w_(a),s=Math.max(t0(o),n0(o))/4,{placement:l,clockwise:c,dist:u=s}=Pl(this.getGraphicStyle(e),"loop");return oAt(a,i,l,c,u,n,r)}};Ste.defaultStyleProps={radius:0,controlPoints:[],router:!1};class p6 extends fb{constructor(e){super(eu({style:p6.defaultStyleProps},e))}getKeyPath(e){const{curvePosition:n,curveOffset:r}=e,[i,a]=this.getEndpoints(e),o=e.controlPoint||Sq(i,a,n,r);return tAt(i,a,o)}}p6.defaultStyleProps={curvePosition:.5,curveOffset:30};var SAt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function JP(t){return t instanceof lv&&t.type==="node"}function xke(t){return t instanceof fb}function Tte(t){return t instanceof Hw}function TAt(t){return JP(t)||xke(t)||Tte(t)}function AAt(t,e){return!t||!e?!1:t===e}const wAt={top:[.5,0],right:[1,.5],bottom:[.5,1],left:[0,.5],"left-top":[0,0],"top-left":[0,0],"left-bottom":[0,1],"bottom-left":[0,1],"right-top":[1,0],"top-right":[1,0],"right-bottom":[1,1],"bottom-right":[1,1],default:[.5,.5]};function Ate(t,e,n=wAt,r=!0){const i=[.5,.5],a=$i(e)?Wr(n,e.toLocaleLowerCase(),i):e;if(!r&&$i(e))return a;const[o,s]=a||i;return[t.min[0]+t0(t)*o,t.min[1]+n0(t)*s]}function wte(t){if(!t)return{};const e=t.getPorts();return(t.attributes.ports||[]).forEach((r,i)=>{var a;const{key:o,placement:s}=r;Ske(r)&&(e[a=o||i]||(e[a]=ay(t.getShape("key").getBounds(),s)))}),e}function Ske(t){const{r:e}=t;return!e||Number(e)===0}function q_(t){return aw(t)?t:t.getPosition()}function OAt(t,e,n,r){const i=_fe(t,e,n,r),a=_fe(e,t,r,n);return[i,a]}function _fe(t,e,n,r){const i=wte(t);if(n)return i[n];const a=Object.values(i);if(a.length===0)return;const o=a.map(c=>q_(c)),s=CAt(e,r),[l]=mTt(o,s);return a.find(c=>q_(c)===l)}function CAt(t,e){const n=wte(t);if(e)return[q_(n[e])];const r=Object.values(n);return r.length>0?r.map(i=>q_(i)):[t.getCenter()]}function bfe(t,e){return Tte(t)||JP(t)?Aq(t,e):LM(t,e)}function LM(t,e){if(!t||!e)return[0,0,0];if(aw(t))return t;if(t.attributes.linkToCenter)return t.getPosition();const n=aw(e)?e:JP(e)?e.getCenter():e.getPosition();return a6(n,t.getBounds())}function Aq(t,e){if(!t||!e)return[0,0,0];const n=aw(e)?e:JP(e)?e.getCenter():e.getPosition();return t.getIntersectPoint(n)||t.getCenter()}function Efe(t,e="bottom",n=0,r=0,i=!1){const a=e.split("-"),[o,s]=ay(t,e),[l,c]=i?["bottom","top"]:["top","bottom"],u=a.includes("top")?c:a.includes("bottom")?l:"middle",f=a.includes("left")?"right":a.includes("right")?"left":"center";return{transform:[["translate",o+n,s+r]],textBaseline:u,textAlign:f}}function RAt(t,e){return[[0,-t],[e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)],[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[0,e],[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],[-e*Math.cos(Math.PI/10),e*Math.sin(Math.PI/10)],[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],[-e*Math.cos(3*Math.PI/10),-e*Math.sin(3*Math.PI/10)]]}function MAt(t,e){const n={};return n.top=[0,-t],n.left=[-t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n["left-bottom"]=[-t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.bottom=[0,e],n["right-bottom"]=[t*Math.cos(3*Math.PI/10),t*Math.sin(3*Math.PI/10)],n.right=n.default=[t*Math.cos(Math.PI/10),-t*Math.sin(Math.PI/10)],n}function PAt(t,e,n){const r=e/2,i=t/2,a={up:[[-i,r],[i,r],[0,-r]],left:[[-i,0],[i,r],[i,-r]],right:[[-i,r],[-i,-r],[i,0]],down:[[-i,-r],[i,-r],[0,r]]};return a[n]||a.up}function NAt(t,e,n){const r=e/2,i=t/2,a={};return n==="down"?(a.bottom=a.default=[0,r],a.right=[i,-r],a.left=[-i,-r]):n==="left"?(a.top=[i,-r],a.bottom=[i,r],a.left=a.default=[-i,0]):n==="right"?(a.top=[-i,-r],a.bottom=[-i,r],a.right=a.default=[i,0]):(a.left=[-i,r],a.top=a.default=[0,-r],a.right=[i,r]),a}function IAt(t,e){return[[0,-e/2],[t/2,0],[0,e/2],[-t/2,0]]}function Tke(t){return Wr(t,["style","visibility"])!=="hidden"}function LAt(t,e){const{zIndex:n,transform:r,transformOrigin:i,visibility:a,cursor:o,clipPath:s,component:l}=e,c=SAt(e,["zIndex","transform","transformOrigin","visibility","cursor","clipPath","component"]);Object.assign(t.attributes,c),r&&t.setAttribute("transform",r),Ln(n)&&t.setAttribute("zIndex",n),i&&t.setAttribute("transformOrigin",i),a&&t.setAttribute("visibility",a),o&&t.setAttribute("cursor",o),s&&t.setAttribute("clipPath",s),l&&t.setAttribute("component",l)}function wq(t,e){"update"in t?t.update(e):t.attr(e)}function kAt(t){return[[0,t],[t*Math.sqrt(3)/2,t/2],[t*Math.sqrt(3)/2,-t/2],[0,-t],[-t*Math.sqrt(3)/2,-t/2],[-t*Math.sqrt(3)/2,t/2]]}function DAt(t){H_(t,"__to_be_destroyed__",!0)}function eN(t){return Wr(t,"__to_be_destroyed__",!1)}var BAt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class g6 extends Dd{constructor(e,n){super(e,Object.assign({},g6.defaultOptions,n)),this.onCollapseExpand=r=>BAt(this,void 0,void 0,function*(){if(!this.validate(r))return;const{target:i}=r;if(!TAt(i))return;const a=i.id,{model:o,graph:s}=this.context,l=o.getElementDataById(a);if(!l)return!1;const{onCollapse:c,onExpand:u,animation:f,align:h}=this.options;Lh(l)?(yield s.expandElement(a,{animation:f,align:h}),u?.(a)):(yield s.collapseElement(a,{animation:f,align:h}),c?.(a))}),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;e.on(`node:${n}`,this.onCollapseExpand),e.on(`combo:${n}`,this.onCollapseExpand)}unbindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;e.off(`node:${n}`,this.onCollapseExpand),e.off(`combo:${n}`,this.onCollapseExpand)}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}destroy(){this.unbindEvents(),super.destroy()}}g6.defaultOptions={enable:!0,animation:!0,trigger:Zt.DBLCLICK,align:!0};var XI=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const FAt="g6-create-edge-assist-edge-id",qI="g6-create-edge-assist-node-id";class v6 extends Dd{constructor(e,n){super(e,Object.assign({},v6.defaultOptions,n)),this.drop=r=>XI(this,void 0,void 0,function*(){const{targetType:i}=r;["combo","node"].includes(i)&&this.source?yield this.handleCreateEdge(r):yield this.cancelEdge()}),this.handleCreateEdge=r=>XI(this,void 0,void 0,function*(){var i,a,o;if(!this.validate(r))return;const{graph:s,canvas:l,batch:c,element:u}=this.context,{style:f}=this.options;if(this.source){this.createEdge(r),yield this.cancelEdge();return}c.startBatch(),l.setCursor("crosshair"),this.source=this.getSelectedNodeIDs([r.target.id])[0];const h=s.getElementData(this.source);s.addNodeData([{id:qI,style:{visibility:"hidden",ports:[{key:"port-1",placement:[.5,.5]}],x:(i=h.style)===null||i===void 0?void 0:i.x,y:(a=h.style)===null||a===void 0?void 0:a.y}}]),s.addEdgeData([{id:FAt,source:this.source,target:qI,style:Object.assign({pointerEvents:"none"},f)}]),yield(o=u.draw({animation:!1}))===null||o===void 0?void 0:o.finished}),this.updateAssistEdge=r=>XI(this,void 0,void 0,function*(){var i;if(!this.source)return;const{model:a,element:o}=this.context;a.translateNodeTo(qI,[r.canvas.x,r.canvas.y]),yield(i=o.draw({animation:!1,silence:!0}))===null||i===void 0?void 0:i.finished}),this.createEdge=r=>{var i,a;const{graph:o}=this.context,{style:s,onFinish:l,onCreate:c}=this.options;if(((i=r.target)===null||i===void 0?void 0:i.id)===void 0||this.source===void 0)return;const f=(a=this.getSelectedNodeIDs([r.target.id]))===null||a===void 0?void 0:a[0],h=`${this.source}-${f}-${U9e()}`,d=c({id:h,source:this.source,target:f,style:s});d&&(o.addEdgeData([d]),l(d))},this.cancelEdge=()=>XI(this,void 0,void 0,function*(){var r;if(!this.source)return;const{graph:i,element:a,batch:o}=this.context;i.removeNodeData([qI]),this.source=void 0,yield(r=a.draw({animation:!1}))===null||r===void 0?void 0:r.finished,o.endBatch()}),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;this.unbindEvents(),n==="click"?(e.on(Cp.CLICK,this.handleCreateEdge),e.on(HE.CLICK,this.handleCreateEdge),e.on(Ny.CLICK,this.cancelEdge),e.on(AB.CLICK,this.cancelEdge)):(e.on(Cp.DRAG_START,this.handleCreateEdge),e.on(HE.DRAG_START,this.handleCreateEdge),e.on(Zt.POINTER_UP,this.drop)),e.on(Zt.POINTER_MOVE,this.updateAssistEdge)}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(n=>n.id).concat(e)))}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}unbindEvents(){const{graph:e}=this.context;e.off(Cp.CLICK,this.handleCreateEdge),e.off(HE.CLICK,this.handleCreateEdge),e.off(Ny.CLICK,this.cancelEdge),e.off(AB.CLICK,this.cancelEdge),e.off(Cp.DRAG_START,this.handleCreateEdge),e.off(HE.DRAG_START,this.handleCreateEdge),e.off(Zt.POINTER_UP,this.drop),e.off(Zt.POINTER_MOVE,this.updateAssistEdge)}destroy(){this.unbindEvents(),super.destroy()}}v6.defaultOptions={animation:!0,enable:!0,style:{},trigger:"drag",onCreate:t=>t,onFinish:()=>{}};var xfe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class m6 extends Dd{constructor(e,n){super(e,Object.assign({},m6.defaultOptions,n)),this.isDragging=!1,this.onDragStart=r=>{this.validate(r)&&(this.isDragging=!0,this.context.canvas.setCursor("grabbing"))},this.onDrag=r=>{var i,a,o,s;if(!this.isDragging||Vl.isPinching)return;const l=(a=(i=r.movement)===null||i===void 0?void 0:i.x)!==null&&a!==void 0?a:r.dx,c=(s=(o=r.movement)===null||o===void 0?void 0:o.y)!==null&&s!==void 0?s:r.dy;(l|c)!==0&&this.translate([l,c],!1)},this.onDragEnd=()=>{var r,i;this.isDragging=!1,this.context.canvas.setCursor(this.defaultCursor),(i=(r=this.options).onFinish)===null||i===void 0||i.call(r)},this.invokeOnFinish=Aw(()=>{var r,i;(i=(r=this.options).onFinish)===null||i===void 0||i.call(r)},300),this.shortcut=new zw(e.graph),this.bindEvents(),this.defaultCursor=this.context.canvas.getConfig().cursor||"default"}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(dl(e)){const{up:n=[],down:r=[],left:i=[],right:a=[]}=e;this.shortcut.bind(n,o=>this.onTranslate([0,1],o)),this.shortcut.bind(r,o=>this.onTranslate([0,-1],o)),this.shortcut.bind(i,o=>this.onTranslate([1,0],o)),this.shortcut.bind(a,o=>this.onTranslate([-1,0],o))}else{const{graph:n}=this.context;n.on(Zt.DRAG_START,this.onDragStart),n.on(Zt.DRAG,this.onDrag),n.on(Zt.DRAG_END,this.onDragEnd)}}onTranslate(e,n){return xfe(this,void 0,void 0,function*(){if(!this.validate(n))return;const{sensitivity:r}=this.options,i=r*-1;yield this.translate(zg(e,i),this.options.animation),this.invokeOnFinish()})}translate(e,n){return xfe(this,void 0,void 0,function*(){e=this.clampByDirection(e),e=this.clampByRange(e),e=this.clampByRotation(e),yield this.context.graph.translateBy(e,n)})}clampByRotation([e,n]){const r=this.context.graph.getRotation();return XLe([e,n],r)}clampByDirection([e,n]){const{direction:r}=this.options;return r==="x"?n=0:r==="y"&&(e=0),[e,n]}clampByRange([e,n]){const{viewport:r,canvas:i}=this.context,[a,o]=i.getSize(),[s,l,c,u]=Qp(this.options.range),f=[o*s,a*l,o*c,a*u],h=ub(dte(r.getCanvasCenter()),f),d=Wo(r.getViewportCenter(),[e,n,0]);if(!tv(d,h)){const{min:[p,g],max:[v,y]}=h;(d[0]<p&&e>0||d[0]>v&&e<0)&&(e=0),(d[1]<g&&n>0||d[1]>y&&n<0)&&(n=0)}return[e,n]}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return typeof n=="function"?n(e):!!n}unbindEvents(){this.shortcut.unbindAll();const{graph:e}=this.context;e.off(Zt.DRAG_START,this.onDragStart),e.off(Zt.DRAG,this.onDrag),e.off(Zt.DRAG_END,this.onDragEnd)}destroy(){this.shortcut.destroy(),this.unbindEvents(),this.context.canvas.setCursor(this.defaultCursor),super.destroy()}}m6.defaultOptions={enable:t=>"targetType"in t?t.targetType==="canvas":!0,sensitivity:10,direction:"both",range:1/0};var Sfe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class tN extends Dd{constructor(e,n){super(e,Object.assign({},tN.defaultOptions,n)),this.enable=!1,this.enableElements=["node","combo"],this.target=[],this.shadowOrigin=[0,0],this.hiddenEdges=[],this.isDragging=!1,this.onDrop=r=>Sfe(this,void 0,void 0,function*(){var i;if(this.options.dropEffect!=="link")return;const{model:a,element:o}=this.context,s=r.target.id;this.target.forEach(l=>{const c=a.getParentData(l,es);c&&pt(c)===s&&a.refreshComboData(s),a.setParent(l,s,es)}),yield(i=o?.draw({animation:!0}))===null||i===void 0?void 0:i.finished}),this.setCursor=r=>{if(this.isDragging)return;const{type:i}=r,{canvas:a}=this.context,{cursor:o}=this.options;i===Zt.POINTER_ENTER?a.setCursor(o?.grab||"grab"):a.setCursor(o?.default||"default")},this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragEnd=this.onDragEnd.bind(this),this.onDrop=this.onDrop.bind(this),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}bindEvents(){const{graph:e,canvas:n}=this.context,r=n.getLayer().getContextService().$canvas;r&&(r.addEventListener("blur",this.onDragEnd),r.addEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.on(`${i}:${Zt.DRAG_START}`,this.onDragStart),e.on(`${i}:${Zt.DRAG}`,this.onDrag),e.on(`${i}:${Zt.DRAG_END}`,this.onDragEnd),e.on(`${i}:${Zt.POINTER_ENTER}`,this.setCursor),e.on(`${i}:${Zt.POINTER_LEAVE}`,this.setCursor)}),["link"].includes(this.options.dropEffect)&&(e.on(HE.DROP,this.onDrop),e.on(Ny.DROP,this.onDrop))}getSelectedNodeIDs(e){return Array.from(new Set(this.context.graph.getElementDataByState("node",this.options.state).map(n=>n.id).concat(e)))}getDelta(e){const n=this.context.graph.getZoom();return nv([e.dx,e.dy],n)}onDragStart(e){var n;if(this.enable=this.validate(e),!this.enable)return;const{batch:r,canvas:i,graph:a}=this.context;i.setCursor(((n=this.options.cursor)===null||n===void 0?void 0:n.grabbing)||"grabbing"),this.isDragging=!0,r.startBatch();const o=e.target.id;a.getElementState(o).includes(this.options.state)?this.target=this.getSelectedNodeIDs([o]):this.target=[o],this.hideEdge(),this.context.graph.frontElement(this.target),this.options.shadow&&this.createShadow(this.target)}onDrag(e){if(!this.enable)return;const n=this.getDelta(e);this.options.shadow?this.moveShadow(n):this.moveElement(this.target,n)}onDragEnd(){var e,n,r;if(!this.enable)return;if(this.enable=!1,this.options.shadow){if(!this.shadow)return;this.shadow.style.visibility="hidden";const{x:o=0,y:s=0}=this.shadow.attributes,[l,c]=Wo([+o,+s],this.shadowOrigin);this.moveElement(this.target,[l,c])}this.showEdges(),(n=(e=this.options).onFinish)===null||n===void 0||n.call(e,this.target);const{batch:i,canvas:a}=this.context;i.endBatch(),a.setCursor(((r=this.options.cursor)===null||r===void 0?void 0:r.grab)||"grab"),this.isDragging=!1,this.target=[]}validate(e){if(this.destroyed||eN(e.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}clampByRotation([e,n]){const r=this.context.graph.getRotation();return XLe([e,n],r)}moveElement(e,n){return Sfe(this,void 0,void 0,function*(){const{graph:r,model:i}=this.context,{dropEffect:a}=this.options;a==="move"&&e.forEach(o=>i.refreshComboData(o)),r.translateElementBy(Object.fromEntries(e.map(o=>[o,this.clampByRotation(n)])),!1)})}moveShadow(e){if(!this.shadow)return;const{x:n=0,y:r=0}=this.shadow.attributes,[i,a]=e;this.shadow.attr({x:+n+i,y:+r+a})}createShadow(e){const n=Pl(this.options,"shadow"),r=YP(e.map(c=>this.context.element.getElement(c).getBounds())),[i,a]=r.min;this.shadowOrigin=[i,a];const[o,s]=cb(r),l={width:o,height:s,x:i,y:a};this.shadow?this.shadow.attr(Object.assign(Object.assign(Object.assign({},n),l),{visibility:"visible"})):(this.shadow=new Nu({style:Object.assign(Object.assign(Object.assign({$layer:"transient"},n),l),{pointerEvents:"none"})}),this.context.canvas.appendChild(this.shadow))}showEdges(){this.options.shadow||this.hiddenEdges.length===0||(this.context.graph.showElement(this.hiddenEdges),this.hiddenEdges=[])}hideEdge(){const{hideEdge:e,shadow:n}=this.options;if(e==="none"||n)return;const{graph:r}=this.context;e==="all"?this.hiddenEdges=r.getEdgeData().map(pt):this.hiddenEdges=Array.from(new Set(this.target.map(i=>r.getRelatedEdgesData(i,e).map(pt)).flat())),r.hideElement(this.hiddenEdges)}unbindEvents(){const{graph:e,canvas:n}=this.context,r=n.getLayer().getContextService().$canvas;r&&(r.removeEventListener("blur",this.onDragEnd),r.removeEventListener("contextmenu",this.onDragEnd)),this.enableElements.forEach(i=>{e.off(`${i}:${Zt.DRAG_START}`,this.onDragStart),e.off(`${i}:${Zt.DRAG}`,this.onDrag),e.off(`${i}:${Zt.DRAG_END}`,this.onDragEnd),e.off(`${i}:${Zt.POINTER_ENTER}`,this.setCursor),e.off(`${i}:${Zt.POINTER_LEAVE}`,this.setCursor)}),e.off(`combo:${Zt.DROP}`,this.onDrop),e.off(`canvas:${Zt.DROP}`,this.onDrop)}destroy(){var e;this.unbindEvents(),(e=this.shadow)===null||e===void 0||e.destroy(),super.destroy()}}tN.defaultOptions={animation:!0,enable:t=>["node","combo"].includes(t.targetType),dropEffect:"move",state:"selected",hideEdge:"none",shadow:!1,shadowZIndex:100,shadowFill:"#F3F9FF",shadowFillOpacity:.5,shadowStroke:"#1890FF",shadowStrokeOpacity:.9,shadowLineDash:[5,5],cursor:{default:"default",grab:"grab",grabbing:"grabbing"}};function Oq(t,e,n,r){for(;t.length;){const i=t.shift();if(n(i))return!0;e.add(i.id),r(i.id).forEach(o=>{e.has(o.id)||(e.add(o.id),t.push(o))})}return!1}function MB(t,e,n,r){if(n(t))return!0;e.add(t.id);for(const a of r(t.id))if(!e.has(a.id)&&MB(a,e,n,r))return!0;return!1}const Tfe=()=>!0;class UAt{graph;nodeFilter;edgeFilter;cacheEnabled;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;allNodesMap=new Map;allEdgesMap=new Map;constructor(e){this.graph=e.graph;const n=e.nodeFilter||Tfe,r=e.edgeFilter||Tfe;this.nodeFilter=n,this.edgeFilter=i=>{const{source:a,target:o}=this.graph.getEdgeDetail(i.id);return!n(a)||!n(o)?!1:r(i,a,o)},e.cache==="auto"?(this.cacheEnabled=!0,this.startAutoCache()):e.cache==="manual"?this.cacheEnabled=!0:this.cacheEnabled=!1}clearCache=()=>{this.inEdgesMap.clear(),this.outEdgesMap.clear(),this.bothEdgesMap.clear(),this.allNodesMap.clear(),this.allEdgesMap.clear()};refreshCache=()=>{this.clearCache(),this.updateCache(this.graph.getAllNodes().map(e=>e.id))};updateCache=e=>{const n=new Set;e.forEach(r=>{const i=this.bothEdgesMap.get(r);if(i&&i.forEach(a=>n.add(a.id)),!this.hasNode(r))this.inEdgesMap.delete(r),this.outEdgesMap.delete(r),this.bothEdgesMap.delete(r),this.allNodesMap.delete(r);else{const a=this.graph.getRelatedEdges(r,"in").filter(this.edgeFilter),o=this.graph.getRelatedEdges(r,"out").filter(this.edgeFilter),s=Array.from(new Set([...a,...o]));s.forEach(l=>n.add(l.id)),this.inEdgesMap.set(r,a),this.outEdgesMap.set(r,o),this.bothEdgesMap.set(r,s),this.allNodesMap.set(r,this.graph.getNode(r))}}),n.forEach(r=>{this.hasEdge(r)?this.allEdgesMap.set(r,this.graph.getEdge(r)):this.allEdgesMap.delete(r)})};startAutoCache(){this.refreshCache(),this.graph.on("changed",this.handleGraphChanged)}stopAutoCache(){this.graph.off("changed",this.handleGraphChanged)}handleGraphChanged=e=>{const n=new Set;e.changes.forEach(r=>{switch(r.type){case"NodeAdded":n.add(r.value.id);break;case"NodeDataUpdated":n.add(r.id);break;case"EdgeAdded":n.add(r.value.source),n.add(r.value.target);break;case"EdgeUpdated":(r.propertyName==="source"||r.propertyName==="target")&&(n.add(r.oldValue),n.add(r.newValue));break;case"EdgeDataUpdated":if(e.graph.hasEdge(r.id)){const i=e.graph.getEdge(r.id);n.add(i.source),n.add(i.target)}break;case"EdgeRemoved":n.add(r.value.source),n.add(r.value.target);break;case"NodeRemoved":n.add(r.value.id);break}}),this.updateCache(n)};checkNodeExistence(e){this.getNode(e)}hasNode(e){if(!this.graph.hasNode(e))return!1;const n=this.graph.getNode(e);return this.nodeFilter(n)}areNeighbors(e,n){return this.checkNodeExistence(e),this.getNeighbors(n).some(r=>r.id===e)}getNode(e){const n=this.graph.getNode(e);if(!this.nodeFilter(n))throw new Error("Node not found for id: "+e);return n}getRelatedEdges(e,n){return this.checkNodeExistence(e),this.cacheEnabled?n==="in"?this.inEdgesMap.get(e):n==="out"?this.outEdgesMap.get(e):this.bothEdgesMap.get(e):this.graph.getRelatedEdges(e,n).filter(this.edgeFilter)}getDegree(e,n){return this.getRelatedEdges(e,n).length}getSuccessors(e){const r=this.getRelatedEdges(e,"out").map(i=>this.getNode(i.target));return Array.from(new Set(r))}getPredecessors(e){const r=this.getRelatedEdges(e,"in").map(i=>this.getNode(i.source));return Array.from(new Set(r))}getNeighbors(e){const n=this.getPredecessors(e),r=this.getSuccessors(e);return Array.from(new Set([...n,...r]))}hasEdge(e){if(!this.graph.hasEdge(e))return!1;const n=this.graph.getEdge(e);return this.edgeFilter(n)}getEdge(e){const n=this.graph.getEdge(e);if(!this.edgeFilter(n))throw new Error("Edge not found for id: "+e);return n}getEdgeDetail(e){const n=this.getEdge(e);return{edge:n,source:this.getNode(n.source),target:this.getNode(n.target)}}hasTreeStructure(e){return this.graph.hasTreeStructure(e)}getRoots(e){return this.graph.getRoots(e).filter(this.nodeFilter)}getChildren(e,n){return this.checkNodeExistence(e),this.graph.getChildren(e,n).filter(this.nodeFilter)}getParent(e,n){this.checkNodeExistence(e);const r=this.graph.getParent(e,n);return!r||!this.nodeFilter(r)?null:r}getAllNodes(){return this.cacheEnabled?Array.from(this.allNodesMap.values()):this.graph.getAllNodes().filter(this.nodeFilter)}getAllEdges(){return this.cacheEnabled?Array.from(this.allEdgesMap.values()):this.graph.getAllEdges().filter(this.edgeFilter)}bfs(e,n,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];Oq([this.getNode(e)],new Set,n,i)}dfs(e,n,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];MB(this.getNode(e),new Set,n,i)}}let kc=class Ake extends Jm{nodeMap=new Map;edgeMap=new Map;inEdgesMap=new Map;outEdgesMap=new Map;bothEdgesMap=new Map;treeIndices=new Map;changes=[];batchCount=0;onChanged=()=>{};constructor(e){super(),e&&(e.nodes&&this.addNodes(e.nodes),e.edges&&this.addEdges(e.edges),e.tree&&this.addTree(e.tree),e.onChanged&&(this.onChanged=e.onChanged))}batch=e=>{this.batchCount+=1,e(),this.batchCount-=1,this.batchCount||this.commit()};commit(){const e=this.changes;this.changes=[];const n={graph:this,changes:e};this.emit("changed",n),this.onChanged(n)}reduceChanges(e){let n=[];return e.forEach(r=>{switch(r.type){case"NodeRemoved":{let i=!1;n=n.filter(a=>{if(a.type==="NodeAdded"){const o=a.value.id===r.value.id;return o&&(i=!0),!o}else{if(a.type==="NodeDataUpdated")return a.id!==r.value.id;if(a.type==="TreeStructureChanged")return a.nodeId!==r.value.id}return!0}),i||n.push(r);break}case"EdgeRemoved":{let i=!1;n=n.filter(a=>{if(a.type==="EdgeAdded"){const o=a.value.id===r.value.id;return o&&(i=!0),!o}else if(a.type==="EdgeDataUpdated"||a.type==="EdgeUpdated")return a.id!==r.value.id;return!0}),i||n.push(r);break}case"NodeDataUpdated":case"EdgeDataUpdated":case"EdgeUpdated":{const i=n.findIndex(o=>o.type===r.type&&o.id===r.id&&(r.propertyName===void 0||o.propertyName===r.propertyName)),a=n[i];a?r.propertyName!==void 0?a.newValue=r.newValue:(n.splice(i,1),n.push(r)):n.push(r);break}case"TreeStructureDetached":{n=n.filter(i=>i.type==="TreeStructureAttached"||i.type==="TreeStructureChanged"?i.treeKey!==r.treeKey:!0),n.push(r);break}case"TreeStructureChanged":{const i=n.find(a=>a.type==="TreeStructureChanged"&&a.treeKey===r.treeKey&&a.nodeId===r.nodeId);i?i.newParentId=r.newParentId:n.push(r);break}default:n.push(r);break}}),n}checkNodeExistence(e){this.getNode(e)}hasNode(e){return this.nodeMap.has(e)}areNeighbors(e,n){return this.getNeighbors(n).some(r=>r.id===e)}getNode(e){const n=this.nodeMap.get(e);if(!n)throw new Error("Node not found for id: "+e);return n}getRelatedEdges(e,n){if(this.checkNodeExistence(e),n==="in"){const r=this.inEdgesMap.get(e);return Array.from(r)}else if(n==="out"){const r=this.outEdgesMap.get(e);return Array.from(r)}else{const r=this.bothEdgesMap.get(e);return Array.from(r)}}getDegree(e,n){return this.getRelatedEdges(e,n).length}getSuccessors(e){const r=this.getRelatedEdges(e,"out").map(i=>this.getNode(i.target));return Array.from(new Set(r))}getPredecessors(e){const r=this.getRelatedEdges(e,"in").map(i=>this.getNode(i.source));return Array.from(new Set(r))}getNeighbors(e){const n=this.getPredecessors(e),r=this.getSuccessors(e);return Array.from(new Set([...n,...r]))}doAddNode(e){if(this.hasNode(e.id))throw new Error("Node already exists: "+e.id);this.nodeMap.set(e.id,e),this.inEdgesMap.set(e.id,new Set),this.outEdgesMap.set(e.id,new Set),this.bothEdgesMap.set(e.id,new Set),this.treeIndices.forEach(n=>{n.childrenMap.set(e.id,new Set)}),this.changes.push({type:"NodeAdded",value:e})}addNodes(e){this.batch(()=>{for(const n of e)this.doAddNode(n)})}addNode(e){this.addNodes([e])}doRemoveNode(e){const n=this.getNode(e);this.bothEdgesMap.get(e)?.forEach(i=>this.doRemoveEdge(i.id)),this.nodeMap.delete(e),this.treeIndices.forEach(i=>{i.childrenMap.get(e)?.forEach(o=>{i.parentMap.delete(o.id)});const a=i.parentMap.get(e);a&&i.childrenMap.get(a.id)?.delete(n),i.parentMap.delete(e),i.childrenMap.delete(e)}),this.bothEdgesMap.delete(e),this.inEdgesMap.delete(e),this.outEdgesMap.delete(e),this.changes.push({type:"NodeRemoved",value:n})}removeNodes(e){this.batch(()=>{e.forEach(n=>this.doRemoveNode(n))})}removeNode(e){this.removeNodes([e])}updateNodeDataProperty(e,n,r){const i=this.getNode(e);this.batch(()=>{const a=i.data[n],o=r;i.data[n]=o,this.changes.push({type:"NodeDataUpdated",id:e,propertyName:n,oldValue:a,newValue:o})})}mergeNodeData(e,n){this.batch(()=>{Object.entries(n).forEach(([r,i])=>{this.updateNodeDataProperty(e,r,i)})})}updateNodeData(...e){const n=e[0],r=this.getNode(n);if(typeof e[1]=="string"){this.updateNodeDataProperty(n,e[1],e[2]);return}let i;if(typeof e[1]=="function"){const a=e[1];i=a(r.data)}else typeof e[1]=="object"&&(i=e[1]);this.batch(()=>{const a=r.data,o=i;r.data=i,this.changes.push({type:"NodeDataUpdated",id:n,oldValue:a,newValue:o})})}checkEdgeExistence(e){if(!this.hasEdge(e))throw new Error("Edge not found for id: "+e)}hasEdge(e){return this.edgeMap.has(e)}getEdge(e){return this.checkEdgeExistence(e),this.edgeMap.get(e)}getEdgeDetail(e){const n=this.getEdge(e);return{edge:n,source:this.getNode(n.source),target:this.getNode(n.target)}}doAddEdge(e){if(this.hasEdge(e.id))throw new Error("Edge already exists: "+e.id);this.checkNodeExistence(e.source),this.checkNodeExistence(e.target),this.edgeMap.set(e.id,e);const n=this.inEdgesMap.get(e.target),r=this.outEdgesMap.get(e.source),i=this.bothEdgesMap.get(e.source),a=this.bothEdgesMap.get(e.target);n.add(e),r.add(e),i.add(e),a.add(e),this.changes.push({type:"EdgeAdded",value:e})}addEdges(e){this.batch(()=>{for(const n of e)this.doAddEdge(n)})}addEdge(e){this.addEdges([e])}doRemoveEdge(e){const n=this.getEdge(e),r=this.outEdgesMap.get(n.source),i=this.inEdgesMap.get(n.target),a=this.bothEdgesMap.get(n.source),o=this.bothEdgesMap.get(n.target);r.delete(n),i.delete(n),a.delete(n),o.delete(n),this.edgeMap.delete(e),this.changes.push({type:"EdgeRemoved",value:n})}removeEdges(e){this.batch(()=>{e.forEach(n=>this.doRemoveEdge(n))})}removeEdge(e){this.removeEdges([e])}updateEdgeSource(e,n){const r=this.getEdge(e);this.checkNodeExistence(n);const i=r.source,a=n;this.outEdgesMap.get(i).delete(r),this.bothEdgesMap.get(i).delete(r),this.outEdgesMap.get(a).add(r),this.bothEdgesMap.get(a).add(r),r.source=n,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:e,propertyName:"source",oldValue:i,newValue:a})})}updateEdgeTarget(e,n){const r=this.getEdge(e);this.checkNodeExistence(n);const i=r.target,a=n;this.inEdgesMap.get(i).delete(r),this.bothEdgesMap.get(i).delete(r),this.inEdgesMap.get(a).add(r),this.bothEdgesMap.get(a).add(r),r.target=n,this.batch(()=>{this.changes.push({type:"EdgeUpdated",id:e,propertyName:"target",oldValue:i,newValue:a})})}updateEdgeDataProperty(e,n,r){const i=this.getEdge(e);this.batch(()=>{const a=i.data[n],o=r;i.data[n]=o,this.changes.push({type:"EdgeDataUpdated",id:e,propertyName:n,oldValue:a,newValue:o})})}updateEdgeData(...e){const n=e[0],r=this.getEdge(n);if(typeof e[1]=="string"){this.updateEdgeDataProperty(n,e[1],e[2]);return}let i;if(typeof e[1]=="function"){const a=e[1];i=a(r.data)}else typeof e[1]=="object"&&(i=e[1]);this.batch(()=>{const a=r.data,o=i;r.data=i,this.changes.push({type:"EdgeDataUpdated",id:n,oldValue:a,newValue:o})})}mergeEdgeData(e,n){this.batch(()=>{Object.entries(n).forEach(([r,i])=>{this.updateEdgeDataProperty(e,r,i)})})}checkTreeExistence(e){if(!this.hasTreeStructure(e))throw new Error("Tree structure not found for treeKey: "+e)}hasTreeStructure(e){return this.treeIndices.has(e)}attachTreeStructure(e){this.treeIndices.has(e)||(this.treeIndices.set(e,{parentMap:new Map,childrenMap:new Map}),this.batch(()=>{this.changes.push({type:"TreeStructureAttached",treeKey:e})}))}detachTreeStructure(e){this.checkTreeExistence(e),this.treeIndices.delete(e),this.batch(()=>{this.changes.push({type:"TreeStructureDetached",treeKey:e})})}addTree(e,n){this.batch(()=>{this.attachTreeStructure(n);const r=[],i=Array.isArray(e)?e:[e];for(;i.length;){const a=i.shift();r.push(a),a.children&&i.push(...a.children)}this.addNodes(r),r.forEach(a=>{a.children?.forEach(o=>{this.setParent(o.id,a.id,n)})})})}getRoots(e){return this.checkTreeExistence(e),this.getAllNodes().filter(n=>!this.getParent(n.id,e))}getChildren(e,n){this.checkNodeExistence(e),this.checkTreeExistence(n);const i=this.treeIndices.get(n).childrenMap.get(e);return Array.from(i||[])}getParent(e,n){return this.checkNodeExistence(e),this.checkTreeExistence(n),this.treeIndices.get(n).parentMap.get(e)||null}getAncestors(e,n){const r=[];let i=this.getNode(e),a;for(;a=this.getParent(i.id,n);)r.push(a),i=a;return r}setParent(e,n,r){this.checkTreeExistence(r);const i=this.treeIndices.get(r);if(!i)return;const a=this.getNode(e),o=i.parentMap.get(e);if(o?.id===n)return;if(n==null){o&&i.childrenMap.get(o.id)?.delete(a),i.parentMap.delete(e);return}const s=this.getNode(n);i.parentMap.set(e,s),o&&i.childrenMap.get(o.id)?.delete(a);let l=i.childrenMap.get(s.id);l||(l=new Set,i.childrenMap.set(s.id,l)),l.add(a),this.batch(()=>{this.changes.push({type:"TreeStructureChanged",treeKey:r,nodeId:e,oldParentId:o?.id,newParentId:s.id})})}dfsTree(e,n,r){const i=a=>this.getChildren(a,r);return MB(this.getNode(e),new Set,n,i)}bfsTree(e,n,r){const i=a=>this.getChildren(a,r);return Oq([this.getNode(e)],new Set,n,i)}getAllNodes(){return Array.from(this.nodeMap.values())}getAllEdges(){return Array.from(this.edgeMap.values())}bfs(e,n,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];return Oq([this.getNode(e)],new Set,n,i)}dfs(e,n,r="out"){const i={in:this.getPredecessors.bind(this),out:this.getSuccessors.bind(this),both:this.getNeighbors.bind(this)}[r];return MB(this.getNode(e),new Set,n,i)}clone(){const e=this.getAllNodes().map(i=>({...i,data:{...i.data}})),n=this.getAllEdges().map(i=>({...i,data:{...i.data}})),r=new Ake({nodes:e,edges:n});return this.treeIndices.forEach(({parentMap:i,childrenMap:a},o)=>{const s=new Map;i.forEach((c,u)=>{s.set(u,r.getNode(c.id))});const l=new Map;a.forEach((c,u)=>{l.set(u,new Set(Array.from(c).map(f=>r.getNode(f.id))))}),r.treeIndices.set(o,{parentMap:s,childrenMap:l})}),r}toJSON(){return JSON.stringify({nodes:this.getAllNodes(),edges:this.getAllEdges()})}createView(e){return new UAt({graph:this,...e})}};class y6{constructor(e,n){this.context=e,this.options=n||{}}}var jAt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},zAt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function $At(t){const{type:e}=t;return["compact-box","mindmap","dendrogram","indented"].includes(e)}function HAt(t){return!Array.isArray(t)&&t?.preLayout}function bk(t){const{nodes:e,edges:n}=t,r={nodes:[],edges:[],combos:[]};return e.forEach(i=>{const a=i.data._isCombo?r.combos:r.nodes,{x:o,y:s,z:l=0}=i.data;a?.push({id:i.id,style:{x:o,y:s,z:l}})}),n.forEach(i=>{const{id:a,source:o,target:s,data:{points:l=[],controlPoints:c=l.slice(1,l.length-1)}}=i;r.edges.push({id:a,source:o,target:s,style:Object.assign({},c?.length?{controlPoints:c.map(Ru)}:{})})}),r}function GAt(t,e){class n extends y6{constructor(i,a){if(super(i,a),this.instance=new t({}),this.id=this.instance.id,"stop"in this.instance&&"tick"in this.instance){const o=this.instance;this.stop=o.stop.bind(o),this.tick=s=>{const l=o.tick(s);return bk(l)}}}execute(i,a){return jAt(this,void 0,void 0,function*(){return bk(yield this.instance.execute(this.graphData2LayoutModel(i),this.transformOptions(Nt({},this.options,a))))})}transformOptions(i){if(!("onTick"in i))return i;const a=i.onTick;return i.onTick=o=>a(bk(o)),i}graphData2LayoutModel(i){const{nodes:a=[],edges:o=[],combos:s=[]}=i,l=a.map(d=>{const p=pt(d),{data:g,style:v,combo:y}=d,_=zAt(d,["data","style","combo"]),E={id:p,data:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},g),{data:g}),y?{parentId:y}:{}),{style:v}),_)};return v?.x&&Object.assign(E.data,{x:v.x}),v?.y&&Object.assign(E.data,{y:v.y}),v?.z&&Object.assign(E.data,{z:v.z}),E}),c=new Map(l.map(d=>[d.id,d])),u=o.filter(d=>{const{source:p,target:g}=d;return c.has(p)&&c.has(g)}).map(d=>{const{source:p,target:g,data:v,style:y}=d;return{id:pt(d),source:p,target:g,data:Object.assign({},v),style:Object.assign({},y)}}),f=s.map(d=>({id:pt(d),data:Object.assign({_isCombo:!0},d.data),style:Object.assign({},d.style)})),h=new kc({nodes:[...l,...f],edges:u});return e.model.model.hasTreeStructure(es)&&(h.attachTreeStructure(es),l.forEach(d=>{const p=e.model.model.getParent(d.id,es);p&&h.hasNode(p.id)&&h.setParent(d.id,p.id,es)})),h}}return n}function NU(t,e,...n){if(e in t)return t[e](...n);if("instance"in t){const r=t.instance;if(e in r)return r[e](...n)}return null}function Afe(t,e){if(e in t)return t[e];if("instance"in t){const n=t.instance;if(e in n)return n[e]}return null}var WAt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class VAt extends tN{get forceLayoutInstance(){return this.context.layout.getLayoutInstance().find(e=>["d3-force","d3-force-3d"].includes(e?.id))}validate(e){return this.context.layout?this.forceLayoutInstance?super.validate(e):(e0.warn("DragElementForce only works with d3-force or d3-force-3d layout"),!1):!1}moveElement(e,n){return WAt(this,void 0,void 0,function*(){const r=this.forceLayoutInstance;this.context.graph.getNodeData(e).forEach((i,a)=>{const{x:o=0,y:s=0}=i.style||{};r&&NU(r,"setFixedPosition",e[a],[...Hi([+o,+s],this.clampByRotation(n))])})})}onDragStart(e){if(this.enable=this.validate(e),!this.enable)return;this.target=this.getSelectedNodeIDs([e.target.id]),this.hideEdge(),this.context.graph.frontElement(this.target);const n=this.forceLayoutInstance;n&&Afe(n,"simulation").alphaTarget(.3).restart(),this.context.graph.getNodeData(this.target).forEach(r=>{const{x:i=0,y:a=0}=r.style||{};n&&NU(n,"setFixedPosition",pt(r),[+i,+a])})}onDrag(e){if(!this.enable)return;const n=this.getDelta(e);this.moveElement(this.target,n)}onDragEnd(){const e=this.forceLayoutInstance;e&&Afe(e,"simulation").alphaTarget(0),!this.options.fixed&&this.context.graph.getNodeData(this.target).forEach(n=>{e&&NU(e,"setFixedPosition",pt(n),[null,null,null])})}}var wfe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class _6 extends Dd{constructor(e,n){super(e,Object.assign({},_6.defaultOptions,n)),this.isZoomEvent=r=>!!(r.data&&"scale"in r.data),this.relatedEdgeToUpdate=new Set,this.zoom=this.context.graph.getZoom(),this.fixElementSize=r=>wfe(this,void 0,void 0,function*(){if(!this.validate(r))return;const{graph:i}=this.context,{state:a,nodeFilter:o,edgeFilter:s,comboFilter:l}=this.options,c=(a?i.getElementDataByState("node",a):i.getNodeData()).filter(o),u=(a?i.getElementDataByState("edge",a):i.getEdgeData()).filter(s),f=(a?i.getElementDataByState("combo",a):i.getComboData()).filter(l),h=this.isZoomEvent(r)?this.zoom=Math.max(.01,Math.min(r.data.scale,10)):this.zoom,d=[...c,...f];d.length>0&&d.forEach(p=>this.fixNodeLike(p,h)),this.updateRelatedEdges(),u.length>0&&u.forEach(p=>this.fixEdge(p,h))}),this.cachedStyles=new Map,this.getOriginalFieldValue=(r,i,a)=>{var o;const s=this.cachedStyles.get(r)||[],l=((o=s.find(c=>c.shape===i))===null||o===void 0?void 0:o.style)||{};return a in l||(l[a]=i.attributes[a],this.cachedStyles.set(r,[...s.filter(c=>c.shape!==i),{shape:i,style:l}])),l[a]},this.scaleEntireElement=(r,i,a)=>{i.setLocalScale(1/a);const o=this.cachedStyles.get(r)||[];o.push({shape:i}),this.cachedStyles.set(r,o)},this.scaleSpecificShapes=(r,i,a)=>{const o=kTt(r);(Array.isArray(a)?a:[a]).forEach(l=>{const{shape:c,fields:u}=l,f=typeof c=="function"?c(o):r.getShape(c);if(f){if(!u){this.scaleEntireElement(r.id,f,i);return}u.forEach(h=>{const d=this.getOriginalFieldValue(r.id,f,h);Ln(d)&&(f.style[h]=d/i)})}})},this.skipIfExceedViewport=r=>{const{viewport:i}=this.context;return!i?.isInViewport(r.getRenderBounds(),!1,30)},this.fixNodeLike=(r,i)=>{const a=pt(r),{element:o,model:s}=this.context,l=o.getElement(a);if(!l||this.skipIfExceedViewport(l))return;s.getRelatedEdgesData(a).forEach(f=>this.relatedEdgeToUpdate.add(pt(f)));const u=this.options[l.type];if(!u){this.scaleEntireElement(a,l,i);return}this.scaleSpecificShapes(l,i,u)},this.fixEdge=(r,i)=>{const a=pt(r),o=this.context.element.getElement(a);if(!o||this.skipIfExceedViewport(o))return;const s=this.options.edge;if(!s){o.style.transformOrigin="center",this.scaleEntireElement(a,o,i);return}this.scaleSpecificShapes(o,i,s)},this.updateRelatedEdges=()=>{const{element:r}=this.context;this.relatedEdgeToUpdate.size>0&&this.relatedEdgeToUpdate.forEach(i=>{const a=r.getElement(i);a?.update({})}),this.relatedEdgeToUpdate.clear()},this.resetTransform=r=>wfe(this,void 0,void 0,function*(){var i;!((i=r.data)===null||i===void 0)&&i.firstRender||(this.options.reset?this.restoreCachedStyles():this.fixElementSize({data:{scale:this.zoom}}))}),this.bindEvents()}restoreCachedStyles(){if(this.cachedStyles.size>0){this.cachedStyles.forEach(i=>{i.forEach(({shape:a,style:o})=>{if(Em(o))a.setLocalScale(1);else{if(this.options.state)return;Object.entries(o).forEach(([s,l])=>a.style[s]=l)}})});const{graph:e,element:n}=this.context,r=Object.keys(Object.fromEntries(this.cachedStyles)).filter(i=>i&&e.getElementType(i)==="node");if(r.length>0){const i=new Set;r.forEach(a=>{e.getRelatedEdgesData(a).forEach(o=>i.add(pt(o)))}),i.forEach(a=>{const o=n?.getElement(a);o?.update({})})}}}bindEvents(){const{graph:e}=this.context;e.on(jn.AFTER_DRAW,this.resetTransform),e.on(jn.AFTER_TRANSFORM,this.fixElementSize)}unbindEvents(){const{graph:e}=this.context;e.off(jn.AFTER_DRAW,this.resetTransform),e.off(jn.AFTER_TRANSFORM,this.fixElementSize)}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}destroy(){this.unbindEvents(),super.destroy()}}_6.defaultOptions={enable:t=>t.data.scale<1,nodeFilter:()=>!0,edgeFilter:()=>!0,comboFilter:()=>!0,edge:[{shape:"key",fields:["lineWidth"]},{shape:"halo",fields:["lineWidth"]},{shape:"label"}],reset:!1};var YAt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class b6 extends Dd{constructor(e,n){super(e,Object.assign({},b6.defaultOptions,n)),this.focus=r=>YAt(this,void 0,void 0,function*(){if(!this.validate(r))return;const{graph:i}=this.context;yield i.focusElement(r.target.id,this.options.animation)}),this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Cx.forEach(n=>{e.on(`${n}:${Zt.CLICK}`,this.focus)})}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}unbindEvents(){const{graph:e}=this.context;Cx.forEach(n=>{e.off(`${n}:${Zt.CLICK}`,this.focus)})}destroy(){this.unbindEvents(),super.destroy()}}b6.defaultOptions={animation:{easing:"ease-in",duration:500},enable:!0};class Gw extends Dd{constructor(e,n){super(e,Object.assign({},Gw.defaultOptions,n)),this.isFrozen=!1,this.toggleFrozen=r=>{this.isFrozen=r.type==="dragstart"},this.hoverElement=r=>{if(!this.validate(r))return;const i=r.type===Zt.POINTER_ENTER;this.updateElementsState(r,i);const{onHover:a,onHoverEnd:o}=this.options;i?a?.(r):o?.(r)},this.updateElementsState=(r,i)=>{if(!this.options.state&&!this.options.inactiveState)return;const{graph:a}=this.context,{state:o,animation:s,inactiveState:l}=this.options,c=this.getActiveIds(r),u={};if(o&&Object.assign(u,this.getElementsState(c,o,i)),l){const f=GLe(a.getData(),!0).filter(h=>!c.includes(h));Object.assign(u,this.getElementsState(f,l,i))}a.setElementState(u,s)},this.getElementsState=(r,i,a)=>{const{graph:o}=this.context,s={};return r.forEach(l=>{const c=o.getElementState(l);a?s[l]=c.includes(i)?c:[...c,i]:s[l]=c.filter(u=>u!==i)}),s},this.bindEvents()}bindEvents(){const{graph:e}=this.context;this.unbindEvents(),Cx.forEach(r=>{e.on(`${r}:${Zt.POINTER_ENTER}`,this.hoverElement),e.on(`${r}:${Zt.POINTER_LEAVE}`,this.hoverElement)});const n=this.context.canvas.document;n.addEventListener(`${Zt.DRAG_START}`,this.toggleFrozen),n.addEventListener(`${Zt.DRAG_END}`,this.toggleFrozen)}getActiveIds(e){const{graph:n}=this.context,{degree:r,direction:i}=this.options,a=e.target.id;return r?nke(n,e.targetType,a,typeof r=="function"?r(e):r,i):[a]}validate(e){if(this.destroyed||this.isFrozen||eN(e.target)||this.context.graph.isCollapsingExpanding)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}unbindEvents(){const{graph:e}=this.context;Cx.forEach(r=>{e.off(`${r}:${Zt.POINTER_ENTER}`,this.hoverElement),e.off(`${r}:${Zt.POINTER_LEAVE}`,this.hoverElement)});const n=this.context.canvas.document;n.removeEventListener(`${Zt.DRAG_START}`,this.toggleFrozen),n.removeEventListener(`${Zt.DRAG_END}`,this.toggleFrozen)}destroy(){this.unbindEvents(),super.destroy()}}Gw.defaultOptions={animation:!1,enable:!0,degree:0,direction:"both",state:"active",inactiveState:void 0};class XAt extends XP{onPointerDown(e){if(!super.validate(e)||!super.isKeydown()||this.points)return;const{canvas:n,graph:r}=this.context;this.pathShape=new Ad({id:"g6-lasso-select",style:this.options.style}),n.appendChild(this.pathShape),this.points=[CB(e,r)]}onPointerMove(e){var n;if(!this.points)return;const{immediately:r,mode:i}=this.options;this.points.push(CB(e,this.context.graph)),(n=this.pathShape)===null||n===void 0||n.setAttribute("d",MTt(this.points)),r&&i==="default"&&this.points.length>2&&super.updateElementsStates(this.points)}onPointerUp(){if(this.points){if(this.points.length<2){this.clearLasso();return}super.updateElementsStates(this.points),this.clearLasso()}}clearLasso(){var e;(e=this.pathShape)===null||e===void 0||e.remove(),this.pathShape=void 0,this.points=void 0}}class E6 extends Dd{constructor(e,n){super(e,Object.assign({},E6.defaultOptions,n)),this.hiddenShapes=[],this.isVisible=!0,this.setElementsVisibility=(r,i,a)=>{r.filter(Boolean).forEach(o=>{i==="hidden"&&!o.isVisible()?this.hiddenShapes.push(o):i==="visible"&&this.hiddenShapes.includes(o)?this.hiddenShapes.splice(this.hiddenShapes.indexOf(o),1):Ax(o,i,a)})},this.filterShapes=(r,i)=>{if(ur(i))return o=>!i(r,o);const a=i?.[r];return o=>o.className?!a?.includes(o.className):!0},this.hideShapes=r=>{if(!this.validate(r)||!this.isVisible)return;const{element:i}=this.context,{shapes:a={}}=this.options;this.setElementsVisibility(i.getNodes(),"hidden",this.filterShapes("node",a)),this.setElementsVisibility(i.getEdges(),"hidden",this.filterShapes("edge",a)),this.setElementsVisibility(i.getCombos(),"hidden",this.filterShapes("combo",a)),this.isVisible=!1},this.showShapes=Aw(r=>{if(!this.validate(r)||this.isVisible)return;const{element:i}=this.context;this.setElementsVisibility(i.getNodes(),"visible"),this.setElementsVisibility(i.getEdges(),"visible"),this.setElementsVisibility(i.getCombos(),"visible"),this.isVisible=!0},this.options.debounce),this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(jn.BEFORE_TRANSFORM,this.hideShapes),e.on(jn.AFTER_TRANSFORM,this.showShapes)}unbindEvents(){const{graph:e}=this.context;e.off(jn.BEFORE_TRANSFORM,this.hideShapes),e.off(jn.AFTER_TRANSFORM,this.showShapes)}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}}E6.defaultOptions={enable:!0,debounce:200,shapes:t=>t==="node"};var Ofe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class x6 extends Dd{constructor(e,n){super(e,Object.assign({},x6.defaultOptions,n)),this.onWheel=r=>Ofe(this,void 0,void 0,function*(){this.options.preventDefault&&r.preventDefault();const i=r.deltaX,a=r.deltaY;yield this.scroll([-i,-a],r)}),this.shortcut=new zw(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){var e,n;const{trigger:r}=this.options;if(this.shortcut.unbindAll(),dl(r)){(e=this.graphDom)===null||e===void 0||e.removeEventListener(Zt.WHEEL,this.onWheel);const{up:i=[],down:a=[],left:o=[],right:s=[]}=r;this.shortcut.bind(i,l=>this.scroll([0,-10],l)),this.shortcut.bind(a,l=>this.scroll([0,10],l)),this.shortcut.bind(o,l=>this.scroll([-10,0],l)),this.shortcut.bind(s,l=>this.scroll([10,0],l))}else(n=this.graphDom)===null||n===void 0||n.addEventListener(Zt.WHEEL,this.onWheel,{passive:!1})}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}formatDisplacement(e){const{sensitivity:n}=this.options;return e=zg(e,n),e=this.clampByDirection(e),e=this.clampByRange(e),e}clampByDirection([e,n]){const{direction:r}=this.options;return r==="x"?n=0:r==="y"&&(e=0),[e,n]}clampByRange([e,n]){const{viewport:r,canvas:i}=this.context,[a,o]=i.getSize(),[s,l,c,u]=Qp(this.options.range),f=[o*s,a*l,o*c,a*u],h=ub(dte(r.getCanvasCenter()),f),d=Wo(r.getViewportCenter(),[e,n,0]);if(!tv(d,h)){const{min:[p,g],max:[v,y]}=h;(d[0]<p&&e>0||d[0]>v&&e<0)&&(e=0),(d[1]<g&&n>0||d[1]>y&&n<0)&&(n=0)}return[e,n]}scroll(e,n){return Ofe(this,void 0,void 0,function*(){if(!this.validate(n))return;const{onFinish:r}=this.options,i=this.context.graph,a=this.formatDisplacement(e);yield i.translateBy(a,!1),r?.()})}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}destroy(){var e;this.shortcut.destroy(),(e=this.graphDom)===null||e===void 0||e.removeEventListener(Zt.WHEEL,this.onWheel),super.destroy()}}x6.defaultOptions={enable:!0,sensitivity:1,preventDefault:!0,range:1/0};var Cfe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class S6 extends Dd{constructor(e,n){super(e,Object.assign({},S6.defaultOptions,n)),this.zoom=(r,i,a)=>Cfe(this,void 0,void 0,function*(){if(!this.validate(i))return;const{graph:o}=this.context;let s=this.options.origin;!s&&"viewport"in i&&(s=Ru(i.viewport));const{sensitivity:l,onFinish:c}=this.options,u=1+ga(r,-50,50)*l/100,f=o.getZoom();yield o.zoomTo(f*u,a,s),c?.()}),this.onReset=()=>Cfe(this,void 0,void 0,function*(){yield this.context.graph.zoomTo(1,this.options.animation)}),this.preventDefault=r=>{this.options.preventDefault&&r.preventDefault()},this.shortcut=new zw(e.graph),this.bindEvents()}update(e){super.update(e),this.bindEvents()}bindEvents(){const{trigger:e}=this.options;if(this.shortcut.unbindAll(),Array.isArray(e))if(e.includes(Zt.PINCH))this.shortcut.bind([Zt.PINCH],n=>{this.zoom(n.scale,n,!1)});else{const n=this.context.canvas.getContainer();n?.addEventListener(Zt.WHEEL,this.preventDefault),this.shortcut.bind([...e,Zt.WHEEL],r=>{const{deltaX:i,deltaY:a}=r;this.zoom(-(a??i),r,!1)})}if(typeof e=="object"){const{zoomIn:n=[],zoomOut:r=[],reset:i=[]}=e;this.shortcut.bind(n,a=>this.zoom(10,a,this.options.animation)),this.shortcut.bind(r,a=>this.zoom(-10,a,this.options.animation)),this.shortcut.bind(i,this.onReset)}}validate(e){if(this.destroyed)return!1;const{enable:n}=this.options;return ur(n)?n(e):!!n}destroy(){var e;this.shortcut.destroy(),(e=this.context.canvas.getContainer())===null||e===void 0||e.removeEventListener(Zt.WHEEL,this.preventDefault),super.destroy()}}S6.defaultOptions={animation:{duration:200},enable:!0,sensitivity:1,trigger:[],preventDefault:!0};var IU,Rfe;function hb(){if(Rfe)return IU;Rfe=1;function t(e,n,r,i){return i===void 0&&(i="height"),r==="center"?(e[i]+n[i])/2:e.height}return IU={assign:Object.assign,getHeight:t},IU}var LU,Mfe;function wke(){if(Mfe)return LU;Mfe=1;var t=hb(),e=18,n=e*2,r=e,i={getId:function(l){return l.id||l.name},getPreH:function(l){return l.preH||0},getPreV:function(l){return l.preV||0},getHGap:function(l){return l.hgap||r},getVGap:function(l){return l.vgap||r},getChildren:function(l){return l.children},getHeight:function(l){return l.height||n},getWidth:function(l){var c=l.label||" ";return l.width||c.split("").length*e}};function a(s,l){var c=this;if(c.vgap=c.hgap=0,s instanceof a)return s;c.data=s;var u=l.getHGap(s),f=l.getVGap(s);return c.preH=l.getPreH(s),c.preV=l.getPreV(s),c.width=l.getWidth(s),c.height=l.getHeight(s),c.width+=c.preH,c.height+=c.preV,c.id=l.getId(s),c.x=c.y=0,c.depth=0,c.children||(c.children=[]),c.addGap(u,f),c}t.assign(a.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(l,c){var u=this;u.hgap+=l,u.vgap+=c,u.width+=2*l,u.height+=2*c},eachNode:function(l){for(var c=this,u=[c],f;f=u.shift();)l(f),u=f.children.concat(u)},DFTraverse:function(l){this.eachNode(l)},BFTraverse:function(l){for(var c=this,u=[c],f;f=u.shift();)l(f),u=u.concat(f.children)},getBoundingBox:function(){var l={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(c){l.left=Math.min(l.left,c.x),l.top=Math.min(l.top,c.y),l.width=Math.max(l.width,c.x+c.width),l.height=Math.max(l.height,c.y+c.height)}),l},translate:function(l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.eachNode(function(u){u.x+=l,u.y+=c,u.x+=u.preH,u.y+=u.preV})},right2left:function(){var l=this,c=l.getBoundingBox();l.eachNode(function(u){u.x=u.x-(u.x-c.left)*2-u.width}),l.translate(c.width,0)},bottom2top:function(){var l=this,c=l.getBoundingBox();l.eachNode(function(u){u.y=u.y-(u.y-c.top)*2-u.height}),l.translate(0,c.height)}});function o(s,l,c){l===void 0&&(l={}),l=t.assign({},i,l);var u=new a(s,l),f=[u],h;if(!c&&!s.collapsed){for(;h=f.shift();)if(!h.data.collapsed){var d=l.getChildren(h.data),p=d?d.length:0;if(h.children=new Array(p),d&&p)for(var g=0;g<p;g++){var v=new a(d[g],l);h.children[g]=v,f.push(v),v.parent=h,v.depth=h.depth+1}}}return u}return LU=o,LU}var kU,Pfe;function T6(){if(Pfe)return kU;Pfe=1;var t=wke(),e=(function(){function n(i,a){a===void 0&&(a={});var o=this;o.options=a,o.rootNode=t(i,a)}var r=n.prototype;return r.execute=function(){throw new Error("please override this method")},n})();return kU=e,kU}var DU,Nfe;function qAt(){if(Nfe)return DU;Nfe=1;function t(o,s,l,c){c===void 0&&(c=[]);var u=this;u.w=o||0,u.h=s||0,u.y=l||0,u.x=0,u.c=c||[],u.cs=c.length,u.prelim=0,u.mod=0,u.shift=0,u.change=0,u.tl=null,u.tr=null,u.el=null,u.er=null,u.msel=0,u.mser=0}t.fromNode=function(o,s){if(!o)return null;var l=[];return o.children.forEach(function(c){l.push(t.fromNode(c,s))}),s?new t(o.height,o.width,o.x,l):new t(o.width,o.height,o.y,l)};function e(o,s,l){l?o.y+=s:o.x+=s,o.children.forEach(function(c){e(c,s,l)})}function n(o,s){var l=s?o.y:o.x;return o.children.forEach(function(c){l=Math.min(n(c,s),l)}),l}function r(o,s){var l=n(o,s);e(o,-l,s)}function i(o,s,l){l?s.y=o.x:s.x=o.x,o.c.forEach(function(c,u){i(c,s.children[u],l)})}function a(o,s,l){l===void 0&&(l=0),s?(o.x=l,l+=o.width):(o.y=l,l+=o.height),o.children.forEach(function(c){a(c,s,l)})}return DU=function(o,s){s===void 0&&(s={});var l=s.isHorizontal;function c(C){if(C.cs===0){u(C);return}c(C.c[0]);for(var D=S(g(C.c[0].el),0,null),L=1;L<C.cs;++L){c(C.c[L]);var B=g(C.c[L].er);f(C,L,D),D=S(B,L,D)}_(C),u(C)}function u(C){C.cs===0?(C.el=C,C.er=C,C.msel=C.mser=0):(C.el=C.c[0].el,C.msel=C.c[0].msel,C.er=C.c[C.cs-1].er,C.mser=C.c[C.cs-1].mser)}function f(C,D,L){for(var B=C.c[D-1],I=B.mod,U=C.c[D],$=U.mod;B!==null&&U!==null;){g(B)>L.low&&(L=L.nxt);var X=I+B.prelim+B.w-($+U.prelim);X>0&&($+=X,h(C,D,L.index,X));var N=g(B),M=g(U);N<=M&&(B=p(B),B!==null&&(I+=B.mod)),N>=M&&(U=d(U),U!==null&&($+=U.mod))}!B&&U?v(C,D,U,$):B&&!U&&y(C,D,B,I)}function h(C,D,L,B){C.c[D].mod+=B,C.c[D].msel+=B,C.c[D].mser+=B,x(C,D,L,B)}function d(C){return C.cs===0?C.tl:C.c[0]}function p(C){return C.cs===0?C.tr:C.c[C.cs-1]}function g(C){return C.y+C.h}function v(C,D,L,B){var I=C.c[0].el;I.tl=L;var U=B-L.mod-C.c[0].msel;I.mod+=U,I.prelim-=U,C.c[0].el=C.c[D].el,C.c[0].msel=C.c[D].msel}function y(C,D,L,B){var I=C.c[D].er;I.tr=L;var U=B-L.mod-C.c[D].mser;I.mod+=U,I.prelim-=U,C.c[D].er=C.c[D-1].er,C.c[D].mser=C.c[D-1].mser}function _(C){C.prelim=(C.c[0].prelim+C.c[0].mod+C.c[C.cs-1].mod+C.c[C.cs-1].prelim+C.c[C.cs-1].w)/2-C.w/2}function E(C,D){D+=C.mod,C.x=C.prelim+D,T(C);for(var L=0;L<C.cs;L++)E(C.c[L],D)}function x(C,D,L,B){if(L!==D-1){var I=D-L;C.c[L+1].shift+=B/I,C.c[D].shift-=B/I,C.c[D].change-=B-B/I}}function T(C){for(var D=0,L=0,B=0;B<C.cs;B++)D+=C.c[B].shift,L+=D+C.c[B].change,C.c[B].mod+=L}function S(C,D,L){for(;L!==null&&C>=L.low;)L=L.nxt;return{low:C,index:D,nxt:L}}a(o,l);var w=t.fromNode(o,l);return c(w),E(w,0),i(w,o,l),r(o,l),o},DU}var BU,Ife;function Oke(){if(Ife)return BU;Ife=1;var t=wke();return BU=function(e,n){for(var r=t(e.data,n,!0),i=t(e.data,n,!0),a=e.children.length,o=Math.round(a/2),s=n.getSide||function(f,h){return h<o?"right":"left"},l=0;l<a;l++){var c=e.children[l],u=s(c,l);u==="right"?i.children.push(c):r.children.push(c)}return r.eachNode(function(f){f.isRoot()||(f.side="left")}),i.eachNode(function(f){f.isRoot()||(f.side="right")}),{left:r,right:i}},BU}var FU,Lfe;function Ote(){if(Lfe)return FU;Lfe=1;var t=Oke(),e=["LR","RL","TB","BT","H","V"],n=["LR","RL","H"],r=function(s){return n.indexOf(s)>-1},i=e[0];FU=function(o,s,l){var c=s.direction||i;if(s.isHorizontal=r(c),e.indexOf(c)===-1)throw new TypeError("Invalid direction: "+c);if(c===e[0])l(o,s);else if(c===e[1])l(o,s),o.right2left();else if(c===e[2])l(o,s);else if(c===e[3])l(o,s),o.bottom2top();else if(c===e[4]||c===e[5]){var u=t(o,s),f=u.left,h=u.right;l(f,s),l(h,s),s.isHorizontal?f.right2left():f.bottom2top(),h.translate(f.x-h.x,f.y-h.y),o.x=f.x,o.y=h.y;var d=o.getBoundingBox();s.isHorizontal?d.top<0&&o.translate(0,-d.top):d.left<0&&o.translate(-d.left,0)}var p=s.fixedRoot;return p===void 0&&(p=!0),p&&o.translate(-(o.x+o.width/2+o.hgap),-(o.y+o.height/2+o.vgap)),a(o,s),o};function a(o,s){if(s.radial){var l=s.isHorizontal?["x","y"]:["y","x"],c=l[0],u=l[1],f={x:1/0,y:1/0},h={x:-1/0,y:-1/0},d=0;o.DFTraverse(function(v){d++;var y=v.x,_=v.y;f.x=Math.min(f.x,y),f.y=Math.min(f.y,_),h.x=Math.max(h.x,y),h.y=Math.max(h.y,_)});var p=h[u]-f[u];if(p===0)return;var g=Math.PI*2/d;o.DFTraverse(function(v){var y=(v[u]-f[u])/p*(Math.PI*2-g)+g,_=v[c]-o[c];v.x=Math.cos(y)*_,v.y=Math.sin(y)*_})}}return FU}var UU,kfe;function ZAt(){if(kfe)return UU;kfe=1;function t(c,u){c.prototype=Object.create(u.prototype),c.prototype.constructor=c,e(c,u)}function e(c,u){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},e(c,u)}var n=T6(),r=qAt(),i=Ote(),a=hb(),o=(function(c){function u(){return c.apply(this,arguments)||this}t(u,c);var f=u.prototype;return f.execute=function(){var d=this;return i(d.rootNode,d.options,r)},u})(n),s={};function l(c,u){return u=a.assign({},s,u),new o(c,u).execute()}return UU=l,UU}var jU,Dfe;function KAt(){if(Dfe)return jU;Dfe=1;var t=hb();function e(i,a){a===void 0&&(a=[]);var o=this;o.x=o.y=0,o.leftChild=o.rightChild=null,o.height=0,o.children=a}var n={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function r(i,a,o){o?(a.x=i.x,a.y=i.y):(a.x=i.y,a.y=i.x),i.children.forEach(function(s,l){r(s,a.children[l],o)})}return jU=function(i,a){a===void 0&&(a={}),a=t.assign({},n,a);var o=0;function s(h){if(!h)return null;h.width=0,h.depth&&h.depth>o&&(o=h.depth);var d=h.children,p=d.length,g=new e(h.height,[]);return d.forEach(function(v,y){var _=s(v);g.children.push(_),y===0&&(g.leftChild=_),y===p-1&&(g.rightChild=_)}),g.originNode=h,g.isLeaf=h.isLeaf(),g}function l(h){if(h.isLeaf||h.children.length===0)h.drawingDepth=o;else{var d=h.children.map(function(g){return l(g)}),p=Math.min.apply(null,d);h.drawingDepth=p-1}return h.drawingDepth}var c;function u(h){h.x=h.drawingDepth*a.rankSep,h.isLeaf?(h.y=0,c&&(h.y=c.y+c.height+a.nodeSep,h.originNode.parent!==c.originNode.parent&&(h.y+=a.subTreeSep)),c=h):(h.children.forEach(function(d){u(d)}),h.y=(h.leftChild.y+h.rightChild.y)/2)}var f=s(i);return l(f),u(f),r(f,i,a.isHorizontal),i},jU}var zU,Bfe;function QAt(){if(Bfe)return zU;Bfe=1;function t(c,u){c.prototype=Object.create(u.prototype),c.prototype.constructor=c,e(c,u)}function e(c,u){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},e(c,u)}var n=T6(),r=KAt(),i=Ote(),a=hb(),o=(function(c){function u(){return c.apply(this,arguments)||this}t(u,c);var f=u.prototype;return f.execute=function(){var d=this;return d.rootNode.width=0,i(d.rootNode,d.options,r)},u})(n),s={};function l(c,u){return u=a.assign({},s,u),new o(c,u).execute()}return zU=l,zU}var $U,Ffe;function JAt(){if(Ffe)return $U;Ffe=1;var t=hb();function e(n,r,i,a,o){var s=(typeof i=="function"?i(n):i)*n.depth;if(!a)try{if(n.id===n.parent.children[0].id){n.x+=s,n.y=r?r.y:0;return}}catch{}if(n.x+=s,r){if(n.y=r.y+t.getHeight(r,n,o),r.parent&&n.parent.id!==r.parent.id){var l=r.parent,c=l.y+t.getHeight(l,n,o);n.y=c>n.y?c:n.y}}else n.y=0}return $U=function(n,r,i,a){var o=null;n.eachNode(function(s){e(s,o,r,i,a),o=s})},$U}var HU,Ufe;function ewt(){if(Ufe)return HU;Ufe=1;function t(f,h){f.prototype=Object.create(h.prototype),f.prototype.constructor=f,e(f,h)}function e(f,h){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(d,p){return d.__proto__=p,d},e(f,h)}var n=T6(),r=JAt(),i=Oke(),a=hb(),o=["LR","RL","H"],s=o[0],l=(function(f){function h(){return f.apply(this,arguments)||this}t(h,f);var d=h.prototype;return d.execute=function(){var g=this,v=g.options,y=g.rootNode;v.isHorizontal=!0;var _=v.indent,E=_===void 0?20:_,x=v.dropCap,T=x===void 0?!0:x,S=v.direction,w=S===void 0?s:S,C=v.align;if(w&&o.indexOf(w)===-1)throw new TypeError("Invalid direction: "+w);if(w===o[0])r(y,E,T,C);else if(w===o[1])r(y,E,T,C),y.right2left();else if(w===o[2]){var D=i(y,v),L=D.left,B=D.right;r(L,E,T,C),L.right2left(),r(B,E,T,C);var I=L.getBoundingBox();B.translate(I.width,0),y.x=B.x-y.width/2}return y},h})(n),c={};function u(f,h){return h=a.assign({},c,h),new l(f,h).execute()}return HU=u,HU}var GU,jfe;function twt(){if(jfe)return GU;jfe=1;var t=hb();function e(i,a){var o=0;return i.children.length?i.children.forEach(function(s){o+=e(s,a)}):o=i.height,i._subTreeSep=a.getSubTreeSep(i.data),i.totalHeight=Math.max(i.height,o)+2*i._subTreeSep,i.totalHeight}function n(i){var a=i.children,o=a.length;if(o){a.forEach(function(h){n(h)});var s=a[0],l=a[o-1],c=l.y-s.y+l.height,u=0;if(a.forEach(function(h){u+=h.totalHeight}),c>i.height)i.y=s.y+c/2-i.height/2;else if(a.length!==1||i.height>u){var f=i.y+(i.height-c)/2-s.y;a.forEach(function(h){h.translate(0,f)})}else i.y=(s.y+s.height/2+l.y+l.height/2)/2-i.height/2}}var r={getSubTreeSep:function(){return 0}};return GU=function(i,a){a===void 0&&(a={}),a=t.assign({},r,a),i.parent={x:0,width:0,height:0,y:0},i.BFTraverse(function(o){o.x=o.parent.x+o.parent.width}),i.parent=null,e(i,a),i.startY=0,i.y=i.totalHeight/2-i.height/2,i.eachNode(function(o){var s=o.children,l=s.length;if(l){var c=s[0];if(c.startY=o.startY+o._subTreeSep,l===1)c.y=o.y+o.height/2-c.height/2;else{c.y=c.startY+c.totalHeight/2-c.height/2;for(var u=1;u<l;u++){var f=s[u];f.startY=s[u-1].startY+s[u-1].totalHeight,f.y=f.startY+f.totalHeight/2-f.height/2}}}}),n(i)},GU}var WU,zfe;function nwt(){if(zfe)return WU;zfe=1;function t(c,u){c.prototype=Object.create(u.prototype),c.prototype.constructor=c,e(c,u)}function e(c,u){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(f,h){return f.__proto__=h,f},e(c,u)}var n=T6(),r=twt(),i=Ote(),a=hb(),o=(function(c){function u(){return c.apply(this,arguments)||this}t(u,c);var f=u.prototype;return f.execute=function(){var d=this;return i(d.rootNode,d.options,r)},u})(n),s={};function l(c,u){return u=a.assign({},s,u),new o(c,u).execute()}return WU=l,WU}var VU,$fe;function rwt(){if($fe)return VU;$fe=1;var t={compactBox:ZAt(),dendrogram:QAt(),indented:ewt(),mindmap:nwt()};return VU=t,VU}var ZI=rwt();const iwt=(t,e)=>{if(t!=="next"&&t!=="prev")return e},Hfe=t=>{t.prev.next=t.next,t.next.prev=t.prev,delete t.next,delete t.prev};let awt=class{constructor(){const e={};e.prev=e,e.next=e.prev,this.shortcut=e}dequeue(){const e=this.shortcut,n=e.prev;if(n&&n!==e)return Hfe(n),n}enqueue(e){const n=this.shortcut;e.prev&&e.next&&Hfe(e),e.next=n.next,n.next.prev=e,n.next=e,e.prev=n}toString(){const e=[],n=this.shortcut;let r=n.prev;for(;r!==n;)e.push(JSON.stringify(r,iwt)),r=r?.prev;return`[${e.join(", ")}]`}};class owt extends awt{}const swt=()=>1,lwt=(t,e)=>{var n;if(t.getAllNodes().length<=1)return[];const r=uwt(t,e||swt);return(n=cwt(r.graph,r.buckets,r.zeroIdx).map(a=>t.getRelatedEdges(a.v,"out").filter(({target:o})=>o===a.w)))===null||n===void 0?void 0:n.flat()},cwt=(t,e,n)=>{let r=[];const i=e[e.length-1],a=e[0];let o;for(;t.getAllNodes().length;){for(;o=a.dequeue();)YU(t,e,n,o);for(;o=i.dequeue();)YU(t,e,n,o);if(t.getAllNodes().length){for(let s=e.length-2;s>0;--s)if(o=e[s].dequeue(),o){r=r.concat(YU(t,e,n,o,!0));break}}}return r},YU=(t,e,n,r,i)=>{var a,o;const s=[];return t.hasNode(r.v)&&((a=t.getRelatedEdges(r.v,"in"))===null||a===void 0||a.forEach(l=>{const c=l.data.weight,u=t.getNode(l.source);i&&s.push({v:l.source,w:l.target,in:0,out:0}),u.data.out===void 0&&(u.data.out=0),u.data.out-=c,Cq(e,n,Object.assign({v:u.id},u.data))}),(o=t.getRelatedEdges(r.v,"out"))===null||o===void 0||o.forEach(l=>{const c=l.data.weight,u=l.target,f=t.getNode(u);f.data.in===void 0&&(f.data.in=0),f.data.in-=c,Cq(e,n,Object.assign({v:f.id},f.data))}),t.removeNode(r.v)),i?s:void 0},uwt=(t,e)=>{const n=new kc;let r=0,i=0;t.getAllNodes().forEach(l=>{n.addNode({id:l.id,data:{v:l.id,in:0,out:0}})}),t.getAllEdges().forEach(l=>{const c=n.getRelatedEdges(l.source,"out").find(f=>f.target===l.target),u=e?.(l)||1;c?n.updateEdgeData(c?.id,Object.assign(Object.assign({},c.data),{weight:c.data.weight+u})):n.addEdge({id:l.id,source:l.source,target:l.target,data:{weight:u}}),i=Math.max(i,n.getNode(l.source).data.out+=u),r=Math.max(r,n.getNode(l.target).data.in+=u)});const a=[],o=i+r+3;for(let l=0;l<o;l++)a.push(new owt);const s=r+1;return n.getAllNodes().forEach(l=>{Cq(a,s,Object.assign({v:l.id},n.getNode(l.id).data))}),{buckets:a,zeroIdx:s,graph:n}},Cq=(t,e,n)=>{n.out?n.in?t[n.out-n.in+e].enqueue(n):t[t.length-1].enqueue(n):t[0].enqueue(n)},fwt=(t,e)=>{const r=lwt(t,(i=>a=>a.data.weight||1)());r?.forEach(i=>{const a=i.data;t.removeEdge(i.id),a.forwardName=i.data.name,a.reversed=!0,t.addEdge({id:i.id,source:i.target,target:i.source,data:Object.assign({},a)})})},hwt=t=>{t.getAllEdges().forEach(e=>{const n=e.data;if(n.reversed){t.removeEdge(e.id);const r=n.forwardName;delete n.reversed,delete n.forwardName,t.addEdge({id:e.id,source:e.target,target:e.source,data:Object.assign(Object.assign({},n),{forwardName:r})})}})},dwt=(t,e)=>Number(t)-Number(e),Ww=(t,e,n,r)=>{let i;do i=`${r}${Math.random()}`;while(t.hasNode(i));return n.dummy=e,t.addNode({id:i,data:n}),i},pwt=t=>{const e=new kc;return t.getAllNodes().forEach(n=>{e.addNode(Object.assign({},n))}),t.getAllEdges().forEach(n=>{const r=e.getRelatedEdges(n.source,"out").find(i=>i.target===n.target);r?e.updateEdgeData(r?.id,Object.assign(Object.assign({},r.data),{weight:r.data.weight+n.data.weight||0,minlen:Math.max(r.data.minlen,n.data.minlen||1)})):e.addEdge({id:n.id,source:n.source,target:n.target,data:{weight:n.data.weight||0,minlen:n.data.minlen||1}})}),e},Cke=t=>{const e=new kc;return t.getAllNodes().forEach(n=>{t.getChildren(n.id).length||e.addNode(Object.assign({},n))}),t.getAllEdges().forEach(n=>{e.addEdge(n)}),e},gwt=(t,e)=>t?.reduce((n,r,i)=>(n[r]=e[i],n),{}),Gfe=(t,e)=>{const n=Number(t.x),r=Number(t.y),i=Number(e.x)-n,a=Number(e.y)-r;let o=Number(t.width)/2,s=Number(t.height)/2;if(!i&&!a)return{x:0,y:0};let l,c;return Math.abs(a)*o>Math.abs(i)*s?(a<0&&(s=-s),l=s*i/a,c=s):(i<0&&(o=-o),l=o,c=o*a/i),{x:n+l,y:r+c}},kM=t=>{const e=[],n=Rke(t)+1;for(let r=0;r<n;r++)e.push([]);t.getAllNodes().forEach(r=>{const i=r.data.rank;i!==void 0&&e[i]&&e[i].push(r.id)});for(let r=0;r<n;r++)e[r]=e[r].sort((i,a)=>dwt(t.getNode(i).data.order,t.getNode(a).data.order));return e},vwt=t=>{const e=t.getAllNodes().filter(r=>r.data.rank!==void 0).map(r=>r.data.rank),n=Math.min(...e);t.getAllNodes().forEach(r=>{r.data.hasOwnProperty("rank")&&n!==1/0&&(r.data.rank-=n)})},mwt=(t,e=0)=>{const n=t.getAllNodes(),r=n.filter(s=>s.data.rank!==void 0).map(s=>s.data.rank),i=Math.min(...r),a=[];n.forEach(s=>{const l=(s.data.rank||0)-i;a[l]||(a[l]=[]),a[l].push(s.id)});let o=0;for(let s=0;s<a.length;s++){const l=a[s];l===void 0?s%e!==0&&(o-=1):o&&l?.forEach(c=>{const u=t.getNode(c);u&&(u.data.rank=u.data.rank||0,u.data.rank+=o)})}},Wfe=(t,e,n,r)=>{const i={width:0,height:0};return Ln(n)&&Ln(r)&&(i.rank=n,i.order=r),Ww(t,"border",i,e)},Rke=t=>{let e;return t.getAllNodes().forEach(n=>{const r=n.data.rank;r!==void 0&&(e===void 0||r>e)&&(e=r)}),e||(e=0),e},ywt=(t,e)=>{const n={lhs:[],rhs:[]};return t?.forEach(r=>{e(r)?n.lhs.push(r):n.rhs.push(r)}),n},Cte=(t,e)=>t.reduce((n,r)=>{const i=e(n),a=e(r);return i>a?r:n}),Mke=(t,e,n,r,i,a)=>{r.includes(e.id)||(r.push(e.id),n||a.push(e.id),i(e.id).forEach(o=>Mke(t,o,n,r,i,a)),n&&a.push(e.id))},Pke=(t,e,n,r)=>{const i=Array.isArray(e)?e:[e],a=l=>t.getNeighbors(l),o=[],s=[];return i.forEach(l=>{if(t.hasNode(l.id))Mke(t,l,n==="post",s,a,o);else throw new Error(`Graph does not have node: ${l}`)}),o},_wt=t=>{const e=n=>{const r=t.getChildren(n),i=t.getNode(n);if(r?.length&&r.forEach(a=>e(a.id)),i.data.hasOwnProperty("minRank")){i.data.borderLeft=[],i.data.borderRight=[];for(let a=i.data.minRank,o=i.data.maxRank+1;a<o;a+=1)Vfe(t,"borderLeft","_bl",n,i,a),Vfe(t,"borderRight","_br",n,i,a)}};t.getRoots().forEach(n=>e(n.id))},Vfe=(t,e,n,r,i,a)=>{const o={rank:a,borderType:e,width:0,height:0},s=i.data[e][a-1],l=Ww(t,"border",o,n);i.data[e][a]=l,t.setParent(l,r),s&&t.addEdge({id:`e${Math.random()}`,source:s,target:l,data:{weight:1}})},bwt=(t,e)=>{const n=e.toLowerCase();(n==="lr"||n==="rl")&&Nke(t)},Ewt=(t,e)=>{const n=e.toLowerCase();(n==="bt"||n==="rl")&&xwt(t),(n==="lr"||n==="rl")&&(Swt(t),Nke(t))},Nke=t=>{t.getAllNodes().forEach(e=>{Yfe(e)}),t.getAllEdges().forEach(e=>{Yfe(e)})},Yfe=t=>{const e=t.data.width;t.data.width=t.data.height,t.data.height=e},xwt=t=>{t.getAllNodes().forEach(e=>{XU(e.data)}),t.getAllEdges().forEach(e=>{var n;(n=e.data.points)===null||n===void 0||n.forEach(r=>XU(r)),e.data.hasOwnProperty("y")&&XU(e.data)})},XU=t=>{t?.y&&(t.y=-t.y)},Swt=t=>{t.getAllNodes().forEach(e=>{qU(e.data)}),t.getAllEdges().forEach(e=>{var n;(n=e.data.points)===null||n===void 0||n.forEach(r=>qU(r)),e.data.hasOwnProperty("x")&&qU(e.data)})},qU=t=>{const e=t.x;t.x=t.y,t.y=e},Twt=t=>{const e=Ww(t,"root",{},"_root"),n=Awt(t);let r=Math.max(...Object.values(n));Math.abs(r)===1/0&&(r=1);const i=r-1,a=2*i+1;t.getAllEdges().forEach(s=>{s.data.minlen*=a});const o=wwt(t)+1;return t.getRoots().forEach(s=>{Ike(t,e,a,o,i,n,s.id)}),{nestingRoot:e,nodeRankFactor:a}},Ike=(t,e,n,r,i,a,o)=>{const s=t.getChildren(o);if(!s?.length){o!==e&&t.addEdge({id:`e${Math.random()}`,source:e,target:o,data:{weight:0,minlen:n}});return}const l=Wfe(t,"_bt"),c=Wfe(t,"_bb"),u=t.getNode(o);t.setParent(l,o),u.data.borderTop=l,t.setParent(c,o),u.data.borderBottom=c,s?.forEach(f=>{Ike(t,e,n,r,i,a,f.id);const h=f.data.borderTop?f.data.borderTop:f.id,d=f.data.borderBottom?f.data.borderBottom:f.id,p=f.data.borderTop?r:2*r,g=h!==d?1:i-a[o]+1;t.addEdge({id:`e${Math.random()}`,source:l,target:h,data:{minlen:g,weight:p,nestingEdge:!0}}),t.addEdge({id:`e${Math.random()}`,source:d,target:c,data:{minlen:g,weight:p,nestingEdge:!0}})}),t.getParent(o)||t.addEdge({id:`e${Math.random()}`,source:e,target:l,data:{weight:0,minlen:i+a[o]}})},Awt=t=>{const e={},n=(r,i)=>{const a=t.getChildren(r);a?.forEach(o=>n(o.id,i+1)),e[r]=i};return t.getRoots().forEach(r=>n(r.id,1)),e},wwt=t=>{let e=0;return t.getAllEdges().forEach(n=>{e+=n.data.weight}),e},Owt=(t,e)=>{e&&t.removeNode(e),t.getAllEdges().forEach(n=>{n.data.nestingEdge&&t.removeEdge(n.id)})},Cwt="edge",Lke="edge-label",Rwt=(t,e)=>{t.getAllEdges().forEach(n=>Mwt(t,n,e))},Mwt=(t,e,n)=>{let r=e.source,i=t.getNode(r).data.rank;const a=e.target,o=t.getNode(a).data.rank,s=e.data.labelRank;if(o===i+1)return;t.removeEdge(e.id);let l,c,u;for(u=0,++i;i<o;++u,++i)e.data.points=[],c={originalEdge:e,width:0,height:0,rank:i},l=Ww(t,Cwt,c,"_d"),i===s&&(c.width=e.data.width,c.height=e.data.height,c.dummy=Lke,c.labelpos=e.data.labelpos),t.addEdge({id:`e${Math.random()}`,source:r,target:l,data:{weight:e.data.weight}}),u===0&&n.push(l),r=l;t.addEdge({id:`e${Math.random()}`,source:r,target:a,data:{weight:e.data.weight}})},Pwt=(t,e)=>{e.forEach(n=>{let r=t.getNode(n);const{data:i}=r,a=i.originalEdge;let o;a&&t.addEdge(a);let s=n;for(;r.data.dummy;)o=t.getSuccessors(s)[0],t.removeNode(s),a.data.points.push({x:r.data.x,y:r.data.y}),r.data.dummy===Lke&&(a.data.x=r.data.x,a.data.y=r.data.y,a.data.width=r.data.width,a.data.height=r.data.height),s=o.id,r=t.getNode(s)})},Nwt=(t,e,n)=>{const r={};let i;n?.forEach(a=>{let o=t.getParent(a),s,l;for(;o;){if(s=t.getParent(o.id),s?(l=r[s.id],r[s.id]=o.id):(l=i,i=o.id),l&&l!==o.id){e.hasNode(l)||e.addNode({id:l,data:{}}),e.hasNode(o.id)||e.addNode({id:o.id,data:{}}),e.hasEdge(`e${l}-${o.id}`)||e.addEdge({id:`e${l}-${o.id}`,source:l,target:o.id,data:{}});return}o=s}})},Iwt=(t,e,n)=>{const r=Lwt(t),i=new kc({tree:[{id:r,children:[],data:{}}]});return t.getAllNodes().forEach(a=>{const o=t.getParent(a.id);(a.data.rank===e||a.data.minRank<=e&&e<=a.data.maxRank)&&(i.hasNode(a.id)||i.addNode(Object.assign({},a)),o?.id&&!i.hasNode(o?.id)&&i.addNode(Object.assign({},o)),i.setParent(a.id,o?.id||r),t.getRelatedEdges(a.id,n).forEach(s=>{const l=s.source===a.id?s.target:s.source;i.hasNode(l)||i.addNode(Object.assign({},t.getNode(l)));const c=i.getRelatedEdges(l,"out").find(({target:f})=>f===a.id),u=c!==void 0?c.data.weight:0;c?i.updateEdgeData(c.id,Object.assign(Object.assign({},c.data),{weight:s.data.weight+u})):i.addEdge({id:s.id,source:l,target:a.id,data:{weight:s.data.weight+u}})}),a.data.hasOwnProperty("minRank")&&i.updateNodeData(a.id,Object.assign(Object.assign({},a.data),{borderLeft:a.data.borderLeft[e],borderRight:a.data.borderRight[e]})))}),i},Lwt=t=>{let e;for(;t.hasNode(e=`_root${Math.random()}`););return e},kwt=(t,e,n)=>{const r=gwt(n,n.map((u,f)=>f)),a=e.map(u=>{const f=t.getRelatedEdges(u,"out").map(h=>({pos:r[h.target]||0,weight:h.data.weight}));return f?.sort((h,d)=>h.pos-d.pos)}).flat().filter(u=>u!==void 0);let o=1;for(;o<n.length;)o<<=1;const s=2*o-1;o-=1;const l=Array(s).fill(0,0,s);let c=0;return a?.forEach(u=>{if(u){let f=u.pos+o;l[f]+=u.weight;let h=0;for(;f>0;)f%2&&(h+=l[f+1]),f=f-1>>1,l[f]+=u.weight;c+=u.weight*h}}),c},Xfe=(t,e)=>{let n=0;for(let r=1;r<e?.length;r+=1)n+=kwt(t,e[r-1],e[r]);return n},qfe=t=>{const e={},n=t.getAllNodes(),r=n.map(c=>{var u;return(u=c.data.rank)!==null&&u!==void 0?u:-1/0}),i=Math.max(...r),a=[];for(let c=0;c<i+1;c++)a.push([]);const o=n.sort((c,u)=>t.getNode(c.id).data.rank-t.getNode(u.id).data.rank),l=o.filter(c=>t.getNode(c.id).data.fixorder!==void 0).sort((c,u)=>t.getNode(c.id).data.fixorder-t.getNode(u.id).data.fixorder);return l?.forEach(c=>{isNaN(t.getNode(c.id).data.rank)||a[t.getNode(c.id).data.rank].push(c.id),e[c.id]=!0}),o?.forEach(c=>t.dfsTree(c.id,u=>{if(e.hasOwnProperty(u.id))return!0;e[u.id]=!0,isNaN(u.data.rank)||a[u.data.rank].push(u.id)})),a},Dwt=(t,e)=>e.map(n=>{const r=t.getRelatedEdges(n,"in");if(!r?.length)return{v:n};const i={sum:0,weight:0};return r?.forEach(a=>{const o=t.getNode(a.source);i.sum+=a.data.weight*o.data.order,i.weight+=a.data.weight}),{v:n,barycenter:i.sum/i.weight,weight:i.weight}}),Bwt=(t,e)=>{var n,r,i;const a={};t?.forEach((s,l)=>{a[s.v]={i:l,indegree:0,in:[],out:[],vs:[s.v]};const c=a[s.v];s.barycenter!==void 0&&(c.barycenter=s.barycenter,c.weight=s.weight)}),(n=e.getAllEdges())===null||n===void 0||n.forEach(s=>{const l=a[s.source],c=a[s.target];l!==void 0&&c!==void 0&&(c.indegree++,l.out.push(a[s.target]))});const o=(i=(r=Object.values(a)).filter)===null||i===void 0?void 0:i.call(r,s=>!s.indegree);return Fwt(o)},Fwt=t=>{var e,n;const r=[],i=l=>c=>{c.merged||(c.barycenter===void 0||l.barycenter===void 0||c.barycenter>=l.barycenter)&&Uwt(l,c)},a=l=>c=>{c.in.push(l),--c.indegree===0&&t.push(c)};for(;t?.length;){const l=t.pop();r.push(l),(e=l.in.reverse())===null||e===void 0||e.forEach(c=>i(l)(c)),(n=l.out)===null||n===void 0||n.forEach(c=>a(l)(c))}const o=r.filter(l=>!l.merged),s=["vs","i","barycenter","weight"];return o.map(l=>{const c={};return s?.forEach(u=>{l[u]!==void 0&&(c[u]=l[u])}),c})},Uwt=(t,e)=>{var n;let r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=(n=e.vs)===null||n===void 0?void 0:n.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0},jwt=(t,e,n,r)=>{const i=ywt(t,h=>{const d=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return r?!d&&h.hasOwnProperty("barycenter"):d||h.hasOwnProperty("barycenter")}),a=i.lhs,o=i.rhs.sort((h,d)=>-h.i- -d.i),s=[];let l=0,c=0,u=0;a?.sort(zwt(!!e,!!n)),u=Zfe(s,o,u),a?.forEach(h=>{var d;u+=(d=h.vs)===null||d===void 0?void 0:d.length,s.push(h.vs),l+=h.barycenter*h.weight,c+=h.weight,u=Zfe(s,o,u)});const f={vs:s.flat()};return c&&(f.barycenter=l/c,f.weight=c),f},Zfe=(t,e,n)=>{let r=n,i;for(;e.length&&(i=e[e.length-1]).i<=r;)e.pop(),t?.push(i.vs),r++;return r},zwt=(t,e)=>(n,r)=>{if(n.fixorder!==void 0&&r.fixorder!==void 0)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(e&&n.order!==void 0&&r.order!==void 0){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return t?r.i-n.i:n.i-r.i},kke=(t,e,n,r,i,a)=>{var o,s,l,c;let u=t.getChildren(e).map(_=>_.id);const f=t.getNode(e),h=f?f.data.borderLeft:void 0,d=f?f.data.borderRight:void 0,p={};h&&(u=u?.filter(_=>_!==h&&_!==d));const g=Dwt(t,u||[]);g?.forEach(_=>{var E;if(!((E=t.getChildren(_.v))===null||E===void 0)&&E.length){const x=kke(t,_.v,n,r,a);p[_.v]=x,x.hasOwnProperty("barycenter")&&Hwt(_,x)}});const v=Bwt(g,n);$wt(v,p),(o=v.filter(_=>_.vs.length>0))===null||o===void 0||o.forEach(_=>{const E=t.getNode(_.vs[0]);E&&(_.fixorder=E.data.fixorder,_.order=E.data.order)});const y=jwt(v,r,i,a);if(h&&(y.vs=[h,y.vs,d].flat(),!((s=t.getPredecessors(h))===null||s===void 0)&&s.length)){const _=t.getNode(((l=t.getPredecessors(h))===null||l===void 0?void 0:l[0].id)||""),E=t.getNode(((c=t.getPredecessors(d))===null||c===void 0?void 0:c[0].id)||"");y.hasOwnProperty("barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+_.data.order+E.data.order)/(y.weight+2),y.weight+=2}return y},$wt=(t,e)=>{t?.forEach(n=>{var r;const i=(r=n.vs)===null||r===void 0?void 0:r.map(a=>e[a]?e[a].vs:a);n.vs=i.flat()})},Hwt=(t,e)=>{t.barycenter!==void 0?(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight):(t.barycenter=e.barycenter,t.weight=e.weight)},Gwt=(t,e)=>{const n=Rke(t),r=[],i=[];for(let u=1;u<n+1;u++)r.push(u);for(let u=n-1;u>-1;u--)i.push(u);const a=Kfe(t,r,"in"),o=Kfe(t,i,"out");let s=qfe(t);ZU(t,s);let l=Number.POSITIVE_INFINITY,c;for(let u=0,f=0;f<4;++u,++f){Qfe(u%2?a:o,u%4>=2,!1,e),s=kM(t);const h=Xfe(t,s);h<l&&(f=0,c=$_(s),l=h)}s=qfe(t),ZU(t,s);for(let u=0,f=0;f<4;++u,++f){Qfe(u%2?a:o,u%4>=2,!0,e),s=kM(t);const h=Xfe(t,s);h<l&&(f=0,c=$_(s),l=h)}ZU(t,c)},Kfe=(t,e,n)=>e.map(r=>Iwt(t,r,n)),Qfe=(t,e,n,r)=>{const i=new kc;t?.forEach(a=>{var o;const s=a.getRoots()[0].id,l=kke(a,s,i,e,n,r);for(let c=0;c<((o=l.vs)===null||o===void 0?void 0:o.length);c++){const u=a.getNode(l.vs[c]);u&&(u.data.order=c)}Nwt(a,i,l.vs)})},ZU=(t,e)=>{e?.forEach(n=>{n?.forEach((r,i)=>{t.getNode(r).data.order=i})})},Wwt=(t,e)=>{const r=t.getAllNodes().filter(o=>{var s;return!(!((s=t.getChildren(o.id))===null||s===void 0)&&s.length)}).map(o=>o.data.rank),i=Math.max(...r),a=[];for(let o=0;o<i+1;o++)a[o]=[];e?.forEach(o=>{const s=t.getNode(o);!s||s.data.dummy||isNaN(s.data.rank)||(s.data.fixorder=a[s.data.rank].length,a[s.data.rank].push(o))})},Vwt=t=>{const e={};let n=0;const r=i=>{const a=n;t.getChildren(i).forEach(o=>r(o.id)),e[i]={low:a,lim:n++}};return t.getRoots().forEach(i=>r(i.id)),e},Ywt=(t,e,n,r)=>{var i,a;const o=[],s=[],l=Math.min(e[n].low,e[r].low),c=Math.max(e[n].lim,e[r].lim);let u,f;u=n;do u=(i=t.getParent(u))===null||i===void 0?void 0:i.id,o.push(u);while(u&&(e[u].low>l||c>e[u].lim));for(f=u,u=r;u&&u!==f;)s.push(u),u=(a=t.getParent(u))===null||a===void 0?void 0:a.id;return{lca:f,path:o.concat(s.reverse())}},Xwt=(t,e)=>{const n=Vwt(t);e.forEach(r=>{var i,a;let o=r,s=t.getNode(o);const l=s.data.originalEdge;if(!l)return;const c=Ywt(t,n,l.source,l.target),u=c.path,f=c.lca;let h=0,d=u[h],p=!0;for(;o!==l.target;){if(s=t.getNode(o),p){for(;d!==f&&((i=t.getNode(d))===null||i===void 0?void 0:i.data.maxRank)<s.data.rank;)h++,d=u[h];d===f&&(p=!1)}if(!p){for(;h<u.length-1&&((a=t.getNode(u[h+1]))===null||a===void 0?void 0:a.data.minRank)<=s.data.rank;)h++;d=u[h]}t.hasNode(d)&&t.setParent(o,d),o=t.getSuccessors(o)[0].id}})},qwt=(t,e)=>{const n={},r=(i,a)=>{let o=0,s=0;const l=i.length,c=a?.[a?.length-1];return a?.forEach((u,f)=>{var h;const d=Kwt(t,u),p=d?t.getNode(d.id).data.order:l;(d||u===c)&&((h=a.slice(s,f+1))===null||h===void 0||h.forEach(g=>{var v;(v=t.getPredecessors(g))===null||v===void 0||v.forEach(y=>{var _;const E=t.getNode(y.id),x=E.data.order;(x<o||p<x)&&!(E.data.dummy&&(!((_=t.getNode(g))===null||_===void 0)&&_.data.dummy))&&Dke(n,y.id,g)})}),s=f+1,o=p)}),a};return e?.length&&e.reduce(r),n},Zwt=(t,e)=>{const n={};function r(s,l,c,u,f){var h,d;let p;for(let g=l;g<c;g++)p=s[g],!((h=t.getNode(p))===null||h===void 0)&&h.data.dummy&&((d=t.getPredecessors(p))===null||d===void 0||d.forEach(v=>{const y=t.getNode(v.id);y.data.dummy&&(y.data.order<u||y.data.order>f)&&Dke(n,v.id,p)}))}function i(s){return JSON.stringify(s.slice(1))}function a(s,l){const c=i(s);l.get(c)||(r(...s),l.set(c,!0))}const o=(s,l)=>{let c=-1,u,f=0;const h=new Map;return l?.forEach((d,p)=>{var g;if(((g=t.getNode(d))===null||g===void 0?void 0:g.data.dummy)==="border"){const v=t.getPredecessors(d)||[];v.length&&(u=t.getNode(v[0].id).data.order,a([l,f,p,c,u],h),f=p,c=u)}a([l,f,l.length,u,s.length],h)}),l};return e?.length&&e.reduce(o),n},Kwt=(t,e)=>{var n,r;if(!((n=t.getNode(e))===null||n===void 0)&&n.data.dummy)return(r=t.getPredecessors(e))===null||r===void 0?void 0:r.find(i=>t.getNode(i.id).data.dummy)},Dke=(t,e,n)=>{let r=e,i=n;if(r>i){const o=r;r=i,i=o}let a=t[r];a||(t[r]=a={}),a[i]=!0},Qwt=(t,e,n)=>{let r=e,i=n;if(r>i){const a=e;r=i,i=a}return!!t[r]},Jwt=(t,e,n,r)=>{const i={},a={},o={};return e?.forEach(s=>{s?.forEach((l,c)=>{i[l]=l,a[l]=l,o[l]=c})}),e?.forEach(s=>{let l=-1;s?.forEach(c=>{let u=r(c).map(f=>f.id);if(u.length){u=u.sort((h,d)=>o[h]-o[d]);const f=(u.length-1)/2;for(let h=Math.floor(f),d=Math.ceil(f);h<=d;++h){const p=u[h];a[c]===c&&l<o[p]&&!Qwt(n,c,p)&&(a[p]=c,a[c]=i[c]=i[p],l=o[p])}}})}),{root:i,align:a}},eOt=(t,e,n,r,i,a,o)=>{var s;const l={},c=tOt(t,e,n,i,a,o),u=o?"borderLeft":"borderRight",f=(p,g)=>{let v=c.getAllNodes(),y=v.pop();const _={};for(;y;)_[y.id]?p(y.id):(_[y.id]=!0,v.push(y),v=v.concat(g(y.id))),y=v.pop()},h=p=>{l[p]=(c.getRelatedEdges(p,"in")||[]).reduce((g,v)=>Math.max(g,(l[v.source]||0)+v.data.weight),0)},d=p=>{const g=(c.getRelatedEdges(p,"out")||[]).reduce((y,_)=>Math.min(y,(l[_.target]||0)-_.data.weight),Number.POSITIVE_INFINITY),v=t.getNode(p);g!==Number.POSITIVE_INFINITY&&v.data.borderType!==u&&(l[p]=Math.max(l[p],g))};return f(h,c.getPredecessors.bind(c)),f(d,c.getSuccessors.bind(c)),(s=Object.values(r))===null||s===void 0||s.forEach(p=>{l[p]=l[n[p]]}),l},tOt=(t,e,n,r,i,a)=>{const o=new kc,s=aOt(r,i,a);return e?.forEach(l=>{let c;l?.forEach(u=>{const f=n[u];if(o.hasNode(f)||o.addNode({id:f,data:{}}),c){const h=n[c],d=o.getRelatedEdges(h,"out").find(p=>p.target===f);d?o.updateEdgeData(d.id,Object.assign(Object.assign({},d.data),{weight:Math.max(s(t,u,c),d.data.weight||0)})):o.addEdge({id:`e${Math.random()}`,source:h,target:f,data:{weight:Math.max(s(t,u,c),0)}})}c=u})}),o},nOt=(t,e)=>Cte(Object.values(e),n=>{var r;let i=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return(r=Object.keys(n))===null||r===void 0||r.forEach(o=>{const s=n[o],l=oOt(t,o)/2;i=Math.max(s+l,i),a=Math.min(s-l,a)}),i-a});function rOt(t,e){const n=Object.values(e),r=Math.min(...n),i=Math.max(...n);["u","d"].forEach(a=>{["l","r"].forEach(o=>{const s=a+o,l=t[s];let c;if(l===e)return;const u=Object.values(l);c=o==="l"?r-Math.min(...u):i-Math.max(...u),c&&(t[s]={},Object.keys(l).forEach(f=>{t[s][f]=l[f]+c}))})})}const iOt=(t,e)=>{const n={};return Object.keys(t.ul).forEach(r=>{if(e)n[r]=t[e.toLowerCase()][r];else{const i=Object.values(t).map(a=>a[r]);n[r]=(i[0]+i[1])/2}}),n},aOt=(t,e,n)=>(r,i,a)=>{const o=r.getNode(i),s=r.getNode(a);let l=0,c=0;if(l+=o.data.width/2,o.data.hasOwnProperty("labelpos"))switch((o.data.labelpos||"").toLowerCase()){case"l":c=-o.data.width/2;break;case"r":c=o.data.width/2;break}if(c&&(l+=n?c:-c),c=0,l+=(o.data.dummy?e:t)/2,l+=(s.data.dummy?e:t)/2,l+=s.data.width/2,s.data.labelpos)switch((s.data.labelpos||"").toLowerCase()){case"l":c=s.data.width/2;break;case"r":c=-s.data.width/2;break}return c&&(l+=n?c:-c),c=0,l},oOt=(t,e)=>t.getNode(e).data.width||0,sOt=(t,e)=>{const{ranksep:n=0}=e||{},r=kM(t);let i=0;r?.forEach(a=>{const o=a.map(l=>t.getNode(l).data.height),s=Math.max(...o,0);a?.forEach(l=>{t.getNode(l).data.y=i+s/2}),i+=s+n})},lOt=(t,e)=>{const{align:n,nodesep:r=0,edgesep:i=0}=e||{},a=kM(t),o=Object.assign(qwt(t,a),Zwt(t,a)),s={};let l=[];["u","d"].forEach(u=>{l=u==="u"?a:Object.values(a).reverse(),["l","r"].forEach(f=>{f==="r"&&(l=l.map(g=>Object.values(g).reverse()));const h=(u==="u"?t.getPredecessors:t.getSuccessors).bind(t),d=Jwt(t,l,o,h),p=eOt(t,l,d.root,d.align,r,i,f==="r");f==="r"&&Object.keys(p).forEach(g=>p[g]=-p[g]),s[u+f]=p})});const c=nOt(t,s);return c&&rOt(s,c),iOt(s,n)},cOt=(t,e)=>{var n;const r=Cke(t);sOt(r,e);const i=lOt(r,e);(n=Object.keys(i))===null||n===void 0||n.forEach(a=>{r.getNode(a).data.x=i[a]})},Bke=t=>{const e={},n=r=>{var i;const a=t.getNode(r);if(!a)return 0;if(e[r])return a.data.rank;e[r]=!0;let o;return(i=t.getRelatedEdges(r,"out"))===null||i===void 0||i.forEach(s=>{const l=n(s.target),c=s.data.minlen,u=l-c;u&&(o===void 0||u<o)&&(o=u)}),o||(o=0),a.data.rank=o,o};t.getAllNodes().filter(r=>t.getRelatedEdges(r.id,"in").length===0).forEach(r=>n(r.id))},uOt=t=>{const e={};let n;const r=o=>{var s;const l=t.getNode(o);if(!l)return 0;if(e[o])return l.data.rank;e[o]=!0;let c;return(s=t.getRelatedEdges(o,"out"))===null||s===void 0||s.forEach(u=>{const f=r(u.target),h=u.data.minlen,d=f-h;d&&(c===void 0||d<c)&&(c=d)}),c||(c=0),(n===void 0||c<n)&&(n=c),l.data.rank=c,c};t.getAllNodes().filter(o=>t.getRelatedEdges(o.id,"in").length===0).forEach(o=>{o&&r(o.id)}),n===void 0&&(n=0);const i={},a=(o,s)=>{var l;const c=t.getNode(o),u=isNaN(c.data.layer)?s:c.data.layer;(c.data.rank===void 0||c.data.rank<u)&&(c.data.rank=u),!i[o]&&(i[o]=!0,(l=t.getRelatedEdges(o,"out"))===null||l===void 0||l.forEach(f=>{a(f.target,u+f.data.minlen)}))};t.getAllNodes().forEach(o=>{const s=o.data;s&&(isNaN(s.layer)?s.rank-=n:a(o.id,s.layer))})},Z_=(t,e)=>t.getNode(e.target).data.rank-t.getNode(e.source).data.rank-e.data.minlen,fOt=t=>{const e=new kc({tree:[]}),n=t.getAllNodes()[0],r=t.getAllNodes().length;e.addNode(n);let i,a;for(;hOt(e,t)<r;)i=Fke(e,t),a=e.hasNode(i.source)?Z_(t,i):-Z_(t,i),Uke(e,t,a);return e},hOt=(t,e)=>{const n=r=>{e.getRelatedEdges(r,"both").forEach(i=>{const a=i.source,o=r===a?i.target:a;!t.hasNode(o)&&!Z_(e,i)&&(t.addNode({id:o,data:{}}),t.addEdge({id:i.id,source:r,target:o,data:{}}),n(o))})};return t.getAllNodes().forEach(r=>n(r.id)),t.getAllNodes().length},dOt=t=>{const e=new kc({tree:[]}),n=t.getAllNodes()[0],r=t.getAllNodes().length;e.addNode(n);let i,a;for(;pOt(e,t)<r;)i=Fke(e,t),a=e.hasNode(i.source)?Z_(t,i):-Z_(t,i),Uke(e,t,a);return e},pOt=(t,e)=>{const n=r=>{var i;(i=e.getRelatedEdges(r,"both"))===null||i===void 0||i.forEach(a=>{const o=a.source,s=r===o?a.target:o;!t.hasNode(s)&&(e.getNode(s).data.layer!==void 0||!Z_(e,a))&&(t.addNode({id:s,data:{}}),t.addEdge({id:a.id,source:r,target:s,data:{}}),n(s))})};return t.getAllNodes().forEach(r=>n(r.id)),t.getAllNodes().length},Fke=(t,e)=>Cte(e.getAllEdges(),n=>t.hasNode(n.source)!==t.hasNode(n.target)?Z_(e,n):1/0),Uke=(t,e,n)=>{t.getAllNodes().forEach(r=>{const i=e.getNode(r.id);i.data.rank||(i.data.rank=0),i.data.rank+=n})},gOt=t=>{const e=pwt(t);Bke(e);const n=fOt(e);zke(n),jke(n,e);let r,i;for(;r=yOt(n);)i=_Ot(n,e,r),bOt(n,e,r,i)},jke=(t,e)=>{let n=Pke(t,t.getAllNodes(),"post");n=n.slice(0,n?.length-1),n.forEach(r=>{vOt(t,e,r)})},vOt=(t,e,n)=>{const i=t.getNode(n).data.parent,a=t.getRelatedEdges(n,"both").find(o=>o.target===i||o.source===i);a.data.cutvalue=mOt(t,e,n)},mOt=(t,e,n)=>{const i=t.getNode(n).data.parent;let a=!0,o=e.getRelatedEdges(n,"out").find(l=>l.target===i),s=0;return o||(a=!1,o=e.getRelatedEdges(i,"out").find(l=>l.target===n)),s=o.data.weight,e.getRelatedEdges(n,"both").forEach(l=>{const c=l.source===n,u=c?l.target:l.source;if(u!==i){const f=c===a,h=l.data.weight;if(s+=f?h:-h,xOt(t,n,u)){const d=t.getRelatedEdges(n,"both").find(p=>p.source===u||p.target===u).data.cutvalue;s+=f?-d:d}}}),s},zke=(t,e=t.getAllNodes()[0].id)=>{$ke(t,{},1,e)},$ke=(t,e,n,r,i)=>{var a;const o=n;let s=n;const l=t.getNode(r);return e[r]=!0,(a=t.getNeighbors(r))===null||a===void 0||a.forEach(c=>{e[c.id]||(s=$ke(t,e,s,c.id,r))}),l.data.low=o,l.data.lim=s++,i?l.data.parent=i:delete l.data.parent,s},yOt=t=>t.getAllEdges().find(e=>e.data.cutvalue<0),_Ot=(t,e,n)=>{let r=n.source,i=n.target;e.getRelatedEdges(r,"out").find(u=>u.target===i)||(r=n.target,i=n.source);const a=t.getNode(r),o=t.getNode(i);let s=a,l=!1;a.data.lim>o.data.lim&&(s=o,l=!0);const c=e.getAllEdges().filter(u=>l===Jfe(t.getNode(u.source),s)&&l!==Jfe(t.getNode(u.target),s));return Cte(c,u=>Z_(e,u))},bOt=(t,e,n,r)=>{const i=t.getRelatedEdges(n.source,"both").find(a=>a.source===n.target||a.target===n.target);i&&t.removeEdge(i.id),t.addEdge({id:`e${Math.random()}`,source:r.source,target:r.target,data:{}}),zke(t),jke(t,e),EOt(t,e)},EOt=(t,e)=>{const n=t.getAllNodes().find(i=>!i.data.parent);let r=Pke(t,n,"pre");r=r.slice(1),r.forEach(i=>{const a=t.getNode(i).data.parent;let o=e.getRelatedEdges(i,"out").find(l=>l.target===a),s=!1;!o&&e.hasNode(a)&&(o=e.getRelatedEdges(a,"out").find(l=>l.target===i),s=!0),e.getNode(i).data.rank=(e.hasNode(a)&&e.getNode(a).data.rank||0)+(s?o?.data.minlen:-o?.data.minlen)})},xOt=(t,e,n)=>t.getRelatedEdges(e,"both").find(r=>r.source===n||r.target===n),Jfe=(t,e)=>e.data.low<=t.data.lim&&t.data.lim<=e.data.lim,SOt=(t,e)=>{switch(e){case"network-simplex":AOt(t);break;case"tight-tree":ehe(t);break;case"longest-path":TOt(t);break;default:ehe(t)}},TOt=Bke,ehe=t=>{uOt(t),dOt(t)},AOt=t=>{gOt(t)},wOt=(t,e)=>{const{edgeLabelSpace:n,keepNodeOrder:r,prevGraph:i,rankdir:a,ranksep:o}=e;!r&&i&&COt(t,i);const s=LOt(t);n&&(e.ranksep=kOt(s,{rankdir:a,ranksep:o}));let l;try{l=OOt(s,e)}catch(c){if(c.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,c);return}throw c}return ROt(t,s),l},OOt=(t,e)=>{const{ranker:n,rankdir:r="tb",nodeOrder:i,keepNodeOrder:a,align:o,nodesep:s=50,edgesep:l=20,ranksep:c=50}=e;GOt(t),fwt(t);const{nestingRoot:u,nodeRankFactor:f}=Twt(t);SOt(Cke(t),n),DOt(t),mwt(t,f),Owt(t,u),vwt(t),BOt(t),FOt(t);const h=[];Rwt(t,h),Xwt(t,h),_wt(t),a&&Wwt(t,i),Gwt(t,a),WOt(t),bwt(t,r),cOt(t,{align:o,nodesep:s,edgesep:l,ranksep:c}),VOt(t),HOt(t),Pwt(t,h),zOt(t),Ewt(t,r);const{width:d,height:p}=UOt(t);return jOt(t),$Ot(t),hwt(t),{width:d,height:p}},COt=(t,e)=>{t.getAllNodes().forEach(n=>{const r=t.getNode(n.id);if(e.hasNode(n.id)){const i=e.getNode(n.id);r.data.fixorder=i.data._order,delete i.data._order}else delete r.data.fixorder})},ROt=(t,e)=>{t.getAllNodes().forEach(n=>{var r;const i=t.getNode(n.id);if(i){const a=e.getNode(n.id);i.data.x=a.data.x,i.data.y=a.data.y,i.data._order=a.data.order,i.data._rank=a.data.rank,!((r=e.getChildren(n.id))===null||r===void 0)&&r.length&&(i.data.width=a.data.width,i.data.height=a.data.height)}}),t.getAllEdges().forEach(n=>{const r=t.getEdge(n.id),i=e.getEdge(n.id);r.data.points=i?i.data.points:[],i&&i.data.hasOwnProperty("x")&&(r.data.x=i.data.x,r.data.y=i.data.y)})},MOt=["width","height","layer","fixorder"],POt={width:0,height:0},NOt=["minlen","weight","width","height","labeloffset"],IOt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},KU=["labelpos"],LOt=t=>{const e=new kc({tree:[]});return t.getAllNodes().forEach(n=>{const r=nhe(t.getNode(n.id).data),i=Object.assign(Object.assign({},POt),r),a=the(i,MOt);e.hasNode(n.id)||e.addNode({id:n.id,data:Object.assign({},a)});const o=t.hasTreeStructure("combo")?t.getParent(n.id,"combo"):t.getParent(n.id);Kn(o)||(e.hasNode(o.id)||e.addNode(Object.assign({},o)),e.setParent(n.id,o.id))}),t.getAllEdges().forEach(n=>{const r=nhe(t.getEdge(n.id).data),i={};KU?.forEach(a=>{r[a]!==void 0&&(i[a]=r[a])}),e.addEdge({id:n.id,source:n.source,target:n.target,data:Object.assign({},IOt,the(r,NOt),i)})}),e},kOt=(t,e)=>{const{ranksep:n=0,rankdir:r}=e;return t.getAllNodes().forEach(i=>{isNaN(i.data.layer)||i.data.layer||(i.data.layer=0)}),t.getAllEdges().forEach(i=>{var a;i.data.minlen*=2,((a=i.data.labelpos)===null||a===void 0?void 0:a.toLowerCase())!=="c"&&(r==="TB"||r==="BT"?i.data.width+=i.data.labeloffset:i.data.height+=i.data.labeloffset)}),n/2},DOt=t=>{t.getAllEdges().forEach(e=>{if(e.data.width&&e.data.height){const n=t.getNode(e.source),r=t.getNode(e.target),i={e,rank:(r.data.rank-n.data.rank)/2+n.data.rank};Ww(t,"edge-proxy",i,"_ep")}})},BOt=t=>{let e=0;return t.getAllNodes().forEach(n=>{var r,i;n.data.borderTop&&(n.data.minRank=(r=t.getNode(n.data.borderTop))===null||r===void 0?void 0:r.data.rank,n.data.maxRank=(i=t.getNode(n.data.borderBottom))===null||i===void 0?void 0:i.data.rank,e=Math.max(e,n.data.maxRank||-1/0))}),e},FOt=t=>{t.getAllNodes().forEach(e=>{e.data.dummy==="edge-proxy"&&(t.getEdge(e.data.e.id).data.labelRank=e.data.rank,t.removeNode(e.id))})},UOt=(t,e)=>{let n,r=0,i,a=0;const{marginx:o=0,marginy:s=0}={},l=c=>{if(!c.data)return;const u=c.data.x,f=c.data.y,h=c.data.width,d=c.data.height;!isNaN(u)&&!isNaN(h)&&(n===void 0&&(n=u-h/2),n=Math.min(n,u-h/2),r=Math.max(r,u+h/2)),!isNaN(f)&&!isNaN(d)&&(i===void 0&&(i=f-d/2),i=Math.min(i,f-d/2),a=Math.max(a,f+d/2))};return t.getAllNodes().forEach(c=>{l(c)}),t.getAllEdges().forEach(c=>{c?.data.hasOwnProperty("x")&&l(c)}),n-=o,i-=s,t.getAllNodes().forEach(c=>{c.data.x-=n,c.data.y-=i}),t.getAllEdges().forEach(c=>{var u;(u=c.data.points)===null||u===void 0||u.forEach(f=>{f.x-=n,f.y-=i}),c.data.hasOwnProperty("x")&&(c.data.x-=n),c.data.hasOwnProperty("y")&&(c.data.y-=i)}),{width:r-n+o,height:a-i+s}},jOt=t=>{t.getAllEdges().forEach(e=>{const n=t.getNode(e.source),r=t.getNode(e.target);let i,a;e.data.points?(i=e.data.points[0],a=e.data.points[e.data.points.length-1]):(e.data.points=[],i={x:r.data.x,y:r.data.y},a={x:n.data.x,y:n.data.y}),e.data.points.unshift(Gfe(n.data,i)),e.data.points.push(Gfe(r.data,a))})},zOt=t=>{t.getAllEdges().forEach(e=>{if(e.data.hasOwnProperty("x"))switch((e.data.labelpos==="l"||e.data.labelpos==="r")&&(e.data.width-=e.data.labeloffset),e.data.labelpos){case"l":e.data.x-=e.data.width/2+e.data.labeloffset;break;case"r":e.data.x+=e.data.width/2+e.data.labeloffset;break}})},$Ot=t=>{t.getAllEdges().forEach(e=>{var n;e.data.reversed&&((n=e.data.points)===null||n===void 0||n.reverse())})},HOt=t=>{t.getAllNodes().forEach(e=>{var n,r,i;if(!((n=t.getChildren(e.id))===null||n===void 0)&&n.length){const a=t.getNode(e.id),o=t.getNode(a.data.borderTop),s=t.getNode(a.data.borderBottom),l=t.getNode(a.data.borderLeft[((r=a.data.borderLeft)===null||r===void 0?void 0:r.length)-1]),c=t.getNode(a.data.borderRight[((i=a.data.borderRight)===null||i===void 0?void 0:i.length)-1]);a.data.width=Math.abs(c?.data.x-l?.data.x)||10,a.data.height=Math.abs(s?.data.y-o?.data.y)||10,a.data.x=(l?.data.x||0)+a.data.width/2,a.data.y=(o?.data.y||0)+a.data.height/2}}),t.getAllNodes().forEach(e=>{e.data.dummy==="border"&&t.removeNode(e.id)})},GOt=t=>{t.getAllEdges().forEach(e=>{if(e.source===e.target){const n=t.getNode(e.source);n.data.selfEdges||(n.data.selfEdges=[]),n.data.selfEdges.push(e),t.removeEdge(e.id)}})},WOt=t=>{const e=kM(t);e?.forEach(n=>{let r=0;n?.forEach((i,a)=>{var o;const s=t.getNode(i);s.data.order=a+r,(o=s.data.selfEdges)===null||o===void 0||o.forEach(l=>{Ww(t,"selfedge",{width:l.data.width,height:l.data.height,rank:s.data.rank,order:a+ ++r,e:l},"_se")}),delete s.data.selfEdges})})},VOt=t=>{t.getAllNodes().forEach(e=>{const n=t.getNode(e.id);if(n.data.dummy==="selfedge"){const r=t.getNode(n.data.e.source),i=r.data.x+r.data.width/2,a=r.data.y,o=n.data.x-i,s=r.data.height/2;t.hasEdge(n.data.e.id)?t.updateEdgeData(n.data.e.id,n.data.e.data):t.addEdge({id:n.data.e.id,source:n.data.e.source,target:n.data.e.target,data:n.data.e.data}),t.removeNode(e.id),n.data.e.data.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{y:a,x:i+o},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],n.data.e.data.x=n.data.x,n.data.e.data.y=n.data.y}})},the=(t,e)=>{const n={};return e?.forEach(r=>{t[r]!==void 0&&(n[r]=+t[r])}),n},nhe=(t={})=>{const e={};return Object.keys(t).forEach(n=>{e[n.toLowerCase()]=t[n]}),e},oy=Array.isArray,Hke=t=>{const e=[],n=t.length;for(let r=0;r<n;r+=1){e[r]=[];for(let i=0;i<n;i+=1)r===i?e[r][i]=0:t[r][i]===0||!t[r][i]?e[r][i]=1/0:e[r][i]=t[r][i]}for(let r=0;r<n;r+=1)for(let i=0;i<n;i+=1)for(let a=0;a<n;a+=1)e[i][a]>e[i][r]+e[r][a]&&(e[i][a]=e[i][r]+e[r][a]);return e},Gke=(t,e)=>{const{nodes:n,edges:r}=t,i=[],a={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((o,s)=>{a[o.id]=s;const l=[];i.push(l)}),r?.forEach(o=>{const{source:s,target:l}=o,c=a[s],u=a[l];c===void 0||u===void 0||(i[c][u]=1,i[u][c]=1)}),i},YOt=(t,e)=>{const n=[];return t.forEach(r=>{const i=[];r.forEach(a=>{i.push(a*e)}),n.push(i)}),n},XOt=t=>{let e=1/0,n=1/0,r=-1/0,i=-1/0;return t.forEach(a=>{let o=a.data.size;oy(o)?o.length===1&&(o=[o[0],o[0]]):Ln(o)?o=[o,o]:(o===void 0||isNaN(o))&&(o=[30,30]);const s=[o[0]/2,o[1]/2],l=a.data.x-s[0],c=a.data.x+s[0],u=a.data.y-s[1],f=a.data.y+s[1];e>l&&(e=l),n>u&&(n=u),r<c&&(r=c),i<f&&(i=f)}),{minX:e,minY:n,maxX:r,maxY:i}},rhe=(t,e)=>Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)),Rq=(t,e,n,r="TB",i,a={})=>{if(!e?.length)return;const{stopBranchFn:o,stopAllFn:s}=a;for(let l=0;l<e.length;l++){const c=e[l];if(t.hasNode(c.id)&&!o?.(c)){if(s?.(c))return;r==="TB"&&n(c),Rq(t,t.getChildren(c.id,i),n,r,i,a),r!=="TB"&&n(c)}}},Mq=t=>{if(t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof Array){const e=[];return t.forEach(n=>{e.push(n)}),e.map(n=>Mq(n))}if(typeof t=="object"){const e={};return Object.keys(t).forEach(n=>{e[n]=Mq(t[n])}),e}return t},wd=(t,e)=>{const n=Mq(t);return n.data=n.data||{},e&&(Ln(n.data.x)||(n.data.x=Math.random()*e[0]),Ln(n.data.y)||(n.data.y=Math.random()*e[1])),n};function nN(t){if(!t)return[0,0,0];if(Ln(t))return[t,t,t];if(t.length===0)return[0,0,0];const[e,n=e,r=e]=t;return[e,n,r]}function ix(t,e){let n;return ur(e)?n=e:Ln(e)?n=()=>e:n=()=>t,n}function Rte(t,e,n=!0){return!e&&e!==0?r=>{const{size:i}=r.data||{};return i?Array.isArray(i)?n?Math.max(...i)||t:i:dl(i)&&i.width&&i.height?n?Math.max(i.width,i.height)||t:[i.width,i.height]:i:t}:ur(e)?e:Ln(e)?()=>e:Array.isArray(e)?()=>n?Math.max(...e)||t:e:dl(e)&&e.width&&e.height?()=>n?Math.max(e.width,e.height)||t:[e.width,e.height]:()=>t}const Mte=(t,e,n=10)=>{let r;const i=typeof e=="function"?e:()=>e||0;return t?Array.isArray(t)?r=o=>t:ur(t)?r=t:r=o=>t:r=o=>{var s,l,c;if(!((s=o.data)===null||s===void 0)&&s.bboxSize)return(l=o.data)===null||l===void 0?void 0:l.bboxSize;if(!((c=o.data)===null||c===void 0)&&c.size){const u=o.data.size;return Array.isArray(u)?u:dl(u)?[u.width,u.height]:u}return n},o=>{const s=r(o),l=i(o);return Math.max(...nN(s))+l}},qOt={rankdir:"TB",nodesep:50,ranksep:50,edgeLabelSpace:!0,ranker:"tight-tree",controlPoints:!1,radial:!1,focusNode:null};class ZOt{constructor(e={}){this.options=e,this.id="antv-dagre",this.options=Object.assign(Object.assign({},qOt),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,n)})}genericDagreLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{nodeSize:a,align:o,rankdir:s="TB",ranksep:l,nodesep:c,ranksepFunc:u,nodesepFunc:f,edgeLabelSpace:h,ranker:d,nodeOrder:p,begin:g,controlPoints:v,radial:y,sortByCombo:_,preset:E}=i,x=new kc({tree:[]}),T=ix(l||50,u),S=ix(c||50,f);let w=S,C=T;(s==="LR"||s==="RL")&&(w=T,C=S);const D=Rte(10,a,!1),L=n.getAllNodes(),B=n.getAllEdges();L.forEach(k=>{const z=nN(D(k)),j=C(k),V=w(k),Q=z[0]+2*V,ee=z[1]+2*j,re=k.data.layer;Ln(re)?x.addNode({id:k.id,data:{width:Q,height:ee,layer:re}}):x.addNode({id:k.id,data:{width:Q,height:ee}})}),_&&(x.attachTreeStructure("combo"),L.forEach(k=>{const{parentId:z}=k.data;z!==void 0&&x.hasNode(z)&&x.setParent(k.id,z,"combo")})),B.forEach(k=>{x.addEdge({id:k.id,source:k.source,target:k.target,data:{weight:k.data.weight||1}})});let I;E?.length&&(I=new kc({nodes:E})),wOt(x,{prevGraph:I,edgeLabelSpace:h,keepNodeOrder:!!p,nodeOrder:p||[],acyclicer:"greedy",ranker:d,rankdir:s,nodesep:c,align:o});const U=[0,0];if(g){let k=1/0,z=1/0;x.getAllNodes().forEach(j=>{k>j.data.x&&(k=j.data.x),z>j.data.y&&(z=j.data.y)}),x.getAllEdges().forEach(j=>{var V;(V=j.data.points)===null||V===void 0||V.forEach(Q=>{k>Q.x&&(k=Q.x),z>Q.y&&(z=Q.y)})}),U[0]=g[0]-k,U[1]=g[1]-z}const $=s==="LR"||s==="RL";if(!y){const k=new Set,j=s==="BT"||s==="RL"?(re,ne)=>ne-re:(re,ne)=>re-ne;x.getAllNodes().forEach(re=>{re.data.x=re.data.x+U[0],re.data.y=re.data.y+U[1],k.add($?re.data.x:re.data.y)});const V=Array.from(k).sort(j),Q=$?(re,ne)=>re.x!==ne.x:(re,ne)=>re.y!==ne.y,ee=$?(re,ne,le)=>{const ue=Math.max(ne.y,le.y),ve=Math.min(ne.y,le.y);return re.filter(Se=>Se.y<=ue&&Se.y>=ve)}:(re,ne,le)=>{const ue=Math.max(ne.x,le.x),ve=Math.min(ne.x,le.x);return re.filter(Se=>Se.x<=ue&&Se.x>=ve)};x.getAllEdges().forEach((re,ne)=>{var le;h&&v&&re.data.type!=="loop"&&(re.data.controlPoints=KOt((le=re.data.points)===null||le===void 0?void 0:le.map(({x:ue,y:ve})=>({x:ue+U[0],y:ve+U[1]})),x.getNode(re.source),x.getNode(re.target),V,$,Q,ee))})}let X=[];X=x.getAllNodes().map(k=>wd(k));const N=x.getAllEdges();return e&&(X.forEach(k=>{n.mergeNodeData(k.id,{x:k.data.x,y:k.data.y})}),N.forEach(k=>{n.mergeEdgeData(k.id,{controlPoints:k.data.controlPoints})})),{nodes:X,edges:N}})}}const KOt=(t,e,n,r,i,a,o)=>{let s=t?.slice(1,t.length-1)||[];if(e&&n){let{x:l,y:c}=e.data,{x:u,y:f}=n.data;if(i&&(l=e.data.y,c=e.data.x,u=n.data.y,f=n.data.x),f!==c&&l!==u){const h=r.indexOf(c),d=r[h+1];if(d){const v=s[0],y=i?{x:(c+d)/2,y:v?.y||u}:{x:v?.x||u,y:(c+d)/2};(!v||a(v,y))&&s.unshift(y)}const p=r.indexOf(f),g=Math.abs(p-h);if(g===1)s=o(s,e.data,n.data),s.length||s.push(i?{x:(c+f)/2,y:l}:{x:l,y:(c+f)/2});else if(g>1){const v=r[p-1];if(v){const y=s[s.length-1],_=i?{x:(f+v)/2,y:y?.y||u}:{x:y?.x||l,y:(f+v)/2};(!y||a(y,_))&&s.push(_)}}}}return s},eS=(t,e,n)=>{const r=t.getAllNodes(),i=t.getAllEdges();if(!r?.length)return{nodes:[],edges:i};if(r.length===1)return e&&t.mergeNodeData(r[0].id,{x:n[0],y:n[1]}),{nodes:[Object.assign(Object.assign({},r[0]),{data:Object.assign(Object.assign({},r[0].data),{x:n[0],y:n[1]})})],edges:i}},QOt={radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1};class JOt{constructor(e={}){this.options=e,this.id="circular",this.options=Object.assign(Object.assign({},QOt),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericCircularLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericCircularLayout(!0,e,n)})}genericCircularLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{width:a,height:o,center:s,divisions:l,startAngle:c=0,endAngle:u=2*Math.PI,angleRatio:f,ordering:h,clockwise:d,nodeSpacing:p,nodeSize:g}=i,v=n.getAllNodes(),y=n.getAllEdges(),[_,E,x]=t2t(a,o,s),T=v?.length;if(!T||T===1)return eS(n,e,x);const S=(u-c)/T;let{radius:w,startRadius:C,endRadius:D}=i;if(p){const $=ix(10,p),X=Rte(10,g);let N=-1/0;v.forEach(k=>{const z=X(k);N<z&&(N=z)});let M=0;v.forEach((k,z)=>{z===0?M+=N||10:M+=($(k)||0)+(N||10)}),w=M/(2*Math.PI)}else!w&&!C&&!D?w=Math.min(E,_)/2:!C&&D?C=D:C&&!D&&(D=C);const L=S*f;let B=[];h==="topology"?B=ihe(n,v):h==="topology-directed"?B=ihe(n,v,!0):h==="degree"?B=e2t(n,v):B=v.map($=>wd($));const I=Math.ceil(T/l);for(let $=0;$<T;++$){let X=w;!X&&C!==null&&D!==null&&(X=C+$*(D-C)/(T-1)),X||(X=10+$*100/(T-1));let N=c+$%I*L+2*Math.PI/l*Math.floor($/I);d||(N=u-$%I*L-2*Math.PI/l*Math.floor($/I)),B[$].data.x=x[0]+Math.cos(N)*X,B[$].data.y=x[1]+Math.sin(N)*X}return e&&B.forEach($=>{n.mergeNodeData($.id,{x:$.data.x,y:$.data.y})}),{nodes:B,edges:y}})}}const ihe=(t,e,n=!1)=>{const r=[wd(e[0])],i={},a=e.length;i[e[0].id]=!0;let o=0;return e.forEach((s,l)=>{if(l!==0)if((l===a-1||t.getDegree(s.id,"both")!==t.getDegree(e[l+1].id,"both")||t.areNeighbors(r[o].id,s.id))&&!i[s.id])r.push(wd(s)),i[s.id]=!0,o++;else{const c=n?t.getSuccessors(r[o].id):t.getNeighbors(r[o].id);let u=!1;for(let h=0;h<c.length;h++){const d=c[h];if(t.getDegree(d.id)===t.getDegree(s.id)&&!i[d.id]){r.push(wd(d)),i[d.id]=!0,u=!0;break}}let f=0;for(;!u&&(i[e[f].id]||(r.push(wd(e[f])),i[e[f].id]=!0,u=!0),f++,f!==a););}}),r};function e2t(t,e){const n=[];return e.forEach((r,i)=>{n.push(wd(r))}),n.sort((r,i)=>t.getDegree(r.id,"both")-t.getDegree(i.id,"both")),n}const t2t=(t,e,n)=>{let r=t,i=e,a=n;return!r&&typeof window<"u"&&(r=window.innerWidth),!i&&typeof window<"u"&&(i=window.innerHeight),a||(a=[r/2,i/2]),[r,i,a]},n2t={nodeSize:30,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"};class Pq{constructor(e={}){this.options=e,this.id="concentric",this.options=Object.assign(Object.assign({},n2t),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericConcentricLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericConcentricLayout(!0,e,n)})}genericConcentricLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a,width:o,height:s,sortBy:l,maxLevelDiff:c,sweep:u,clockwise:f,equidistant:h,preventOverlap:d,startAngle:p=3/2*Math.PI,nodeSize:g,nodeSpacing:v}=i,y=n.getAllNodes(),_=n.getAllEdges(),E=!o&&typeof window<"u"?window.innerWidth:o,x=!s&&typeof window<"u"?window.innerHeight:s,T=a||[E/2,x/2];if(!y?.length||y.length===1)return eS(n,e,T);const S=[];let w,C=0;oy(g)?w=Math.max(g[0],g[1]):ur(g)?(w=-1/0,y.forEach(k=>{const z=Math.max(...nN(g(k)));z>w&&(w=z)})):w=g,oy(v)?C=Math.max(v[0],v[1]):Ln(v)&&(C=v),y.forEach(k=>{const z=wd(k);S.push(z);let j=w;const{data:V}=z;oy(V.size)?j=Math.max(V.size[0],V.size[1]):Ln(V.size)?j=V.size:dl(V.size)&&(j=Math.max(V.size.width,V.size.height)),w=Math.max(w,j),ur(v)&&(C=Math.max(v(k),C))});const D={};S.forEach((k,z)=>{D[k.id]=z});let L=l;(!$i(L)||S[0].data[L]===void 0)&&(L="degree"),L==="degree"?S.sort((k,z)=>n.getDegree(z.id,"both")-n.getDegree(k.id,"both")):S.sort((k,z)=>z.data[L]-k.data[L]);const B=S[0],I=(c||(L==="degree"?n.getDegree(B.id,"both"):B.data[L]))/4,U=[{nodes:[]}];let $=U[0];S.forEach(k=>{if($.nodes.length>0){const z=Math.abs(L==="degree"?n.getDegree($.nodes[0].id,"both")-n.getDegree(k.id,"both"):$.nodes[0].data[L]-k.data[L]);I&&z>=I&&($={nodes:[]},U.push($))}$.nodes.push(k)});let X=w+C;if(!d){const k=U.length>0&&U[0].nodes.length>1,j=(Math.min(E,x)/2-X)/(U.length+(k?1:0));X=Math.min(X,j)}let N=0;if(U.forEach(k=>{const z=u===void 0?2*Math.PI-2*Math.PI/k.nodes.length:u;if(k.dTheta=z/Math.max(1,k.nodes.length-1),k.nodes.length>1&&d){const j=Math.cos(k.dTheta)-Math.cos(0),V=Math.sin(k.dTheta)-Math.sin(0),Q=Math.sqrt(X*X/(j*j+V*V));N=Math.max(Q,N)}k.r=N,N+=X}),h){let k=0,z=0;for(let j=0;j<U.length;j++){const Q=(U[j].r||0)-z;k=Math.max(k,Q)}z=0,U.forEach((j,V)=>{V===0&&(z=j.r||0),j.r=z,z+=k})}return U.forEach(k=>{const z=k.dTheta||0,j=k.r||0;k.nodes.forEach((V,Q)=>{const ee=p+(f?1:-1)*z*Q;V.data.x=T[0]+j*Math.cos(ee),V.data.y=T[1]+j*Math.sin(ee)})}),e&&S.forEach(k=>n.mergeNodeData(k.id,{x:k.data.x,y:k.data.y})),{nodes:S,edges:_}})}}function r2t(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),r=+this._z.call(null,t);return Wke(this.cover(e,n,r),e,n,r,t)}function Wke(t,e,n,r,i){if(isNaN(e)||isNaN(n)||isNaN(r))return t;var a,o=t._root,s={data:i},l=t._x0,c=t._y0,u=t._z0,f=t._x1,h=t._y1,d=t._z1,p,g,v,y,_,E,x,T,S,w,C;if(!o)return t._root=s,t;for(;o.length;)if((x=e>=(p=(l+f)/2))?l=p:f=p,(T=n>=(g=(c+h)/2))?c=g:h=g,(S=r>=(v=(u+d)/2))?u=v:d=v,a=o,!(o=o[w=S<<2|T<<1|x]))return a[w]=s,t;if(y=+t._x.call(null,o.data),_=+t._y.call(null,o.data),E=+t._z.call(null,o.data),e===y&&n===_&&r===E)return s.next=o,a?a[w]=s:t._root=s,t;do a=a?a[w]=new Array(8):t._root=new Array(8),(x=e>=(p=(l+f)/2))?l=p:f=p,(T=n>=(g=(c+h)/2))?c=g:h=g,(S=r>=(v=(u+d)/2))?u=v:d=v;while((w=S<<2|T<<1|x)===(C=(E>=v)<<2|(_>=g)<<1|y>=p));return a[C]=o,a[w]=s,t}function i2t(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),r=new Float64Array(e),i=new Float64Array(e);let a=1/0,o=1/0,s=1/0,l=-1/0,c=-1/0,u=-1/0;for(let f=0,h,d,p,g;f<e;++f)isNaN(d=+this._x.call(null,h=t[f]))||isNaN(p=+this._y.call(null,h))||isNaN(g=+this._z.call(null,h))||(n[f]=d,r[f]=p,i[f]=g,d<a&&(a=d),d>l&&(l=d),p<o&&(o=p),p>c&&(c=p),g<s&&(s=g),g>u&&(u=g));if(a>l||o>c||s>u)return this;this.cover(a,o,s).cover(l,c,u);for(let f=0;f<e;++f)Wke(this,n[f],r[f],i[f],t[f]);return this}function a2t(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,a=this._z0,o=this._x1,s=this._y1,l=this._z1;if(isNaN(r))o=(r=Math.floor(t))+1,s=(i=Math.floor(e))+1,l=(a=Math.floor(n))+1;else{for(var c=o-r||1,u=this._root,f,h;r>t||t>=o||i>e||e>=s||a>n||n>=l;)switch(h=(n<a)<<2|(e<i)<<1|t<r,f=new Array(8),f[h]=u,u=f,c*=2,h){case 0:o=r+c,s=i+c,l=a+c;break;case 1:r=o-c,s=i+c,l=a+c;break;case 2:o=r+c,i=s-c,l=a+c;break;case 3:r=o-c,i=s-c,l=a+c;break;case 4:o=r+c,s=i+c,a=l-c;break;case 5:r=o-c,s=i+c,a=l-c;break;case 6:o=r+c,i=s-c,a=l-c;break;case 7:r=o-c,i=s-c,a=l-c;break}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=l,this}function o2t(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function s2t(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function us(t,e,n,r,i,a,o){this.node=t,this.x0=e,this.y0=n,this.z0=r,this.x1=i,this.y1=a,this.z1=o}function l2t(t,e,n,r){var i,a=this._x0,o=this._y0,s=this._z0,l,c,u,f,h,d,p=this._x1,g=this._y1,v=this._z1,y=[],_=this._root,E,x;for(_&&y.push(new us(_,a,o,s,p,g,v)),r==null?r=1/0:(a=t-r,o=e-r,s=n-r,p=t+r,g=e+r,v=n+r,r*=r);E=y.pop();)if(!(!(_=E.node)||(l=E.x0)>p||(c=E.y0)>g||(u=E.z0)>v||(f=E.x1)<a||(h=E.y1)<o||(d=E.z1)<s))if(_.length){var T=(l+f)/2,S=(c+h)/2,w=(u+d)/2;y.push(new us(_[7],T,S,w,f,h,d),new us(_[6],l,S,w,T,h,d),new us(_[5],T,c,w,f,S,d),new us(_[4],l,c,w,T,S,d),new us(_[3],T,S,u,f,h,w),new us(_[2],l,S,u,T,h,w),new us(_[1],T,c,u,f,S,w),new us(_[0],l,c,u,T,S,w)),(x=(n>=w)<<2|(e>=S)<<1|t>=T)&&(E=y[y.length-1],y[y.length-1]=y[y.length-1-x],y[y.length-1-x]=E)}else{var C=t-+this._x.call(null,_.data),D=e-+this._y.call(null,_.data),L=n-+this._z.call(null,_.data),B=C*C+D*D+L*L;if(B<r){var I=Math.sqrt(r=B);a=t-I,o=e-I,s=n-I,p=t+I,g=e+I,v=n+I,i=_.data}}return i}const c2t=(t,e,n,r,i,a)=>Math.sqrt((t-r)**2+(e-i)**2+(n-a)**2);function u2t(t,e,n,r){const i=[],a=t-r,o=e-r,s=n-r,l=t+r,c=e+r,u=n+r;return this.visit((f,h,d,p,g,v,y)=>{if(!f.length)do{const _=f.data;c2t(t,e,n,this._x(_),this._y(_),this._z(_))<=r&&i.push(_)}while(f=f.next);return h>l||d>c||p>u||g<a||v<o||y<s}),i}function f2t(t){if(isNaN(h=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t))||isNaN(p=+this._z.call(null,t)))return this;var e,n=this._root,r,i,a,o=this._x0,s=this._y0,l=this._z0,c=this._x1,u=this._y1,f=this._z1,h,d,p,g,v,y,_,E,x,T,S;if(!n)return this;if(n.length)for(;;){if((_=h>=(g=(o+c)/2))?o=g:c=g,(E=d>=(v=(s+u)/2))?s=v:u=v,(x=p>=(y=(l+f)/2))?l=y:f=y,e=n,!(n=n[T=x<<2|E<<1|_]))return this;if(!n.length)break;(e[T+1&7]||e[T+2&7]||e[T+3&7]||e[T+4&7]||e[T+5&7]||e[T+6&7]||e[T+7&7])&&(r=e,S=T)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,i?(a?i.next=a:delete i.next,this):e?(a?e[T]=a:delete e[T],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[S]=n:this._root=n),this):(this._root=a,this)}function h2t(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function d2t(){return this._root}function p2t(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function g2t(t){var e=[],n,r=this._root,i,a,o,s,l,c,u;for(r&&e.push(new us(r,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!t(r=n.node,a=n.x0,o=n.y0,s=n.z0,l=n.x1,c=n.y1,u=n.z1)&&r.length){var f=(a+l)/2,h=(o+c)/2,d=(s+u)/2;(i=r[7])&&e.push(new us(i,f,h,d,l,c,u)),(i=r[6])&&e.push(new us(i,a,h,d,f,c,u)),(i=r[5])&&e.push(new us(i,f,o,d,l,h,u)),(i=r[4])&&e.push(new us(i,a,o,d,f,h,u)),(i=r[3])&&e.push(new us(i,f,h,s,l,c,d)),(i=r[2])&&e.push(new us(i,a,h,s,f,c,d)),(i=r[1])&&e.push(new us(i,f,o,s,l,h,d)),(i=r[0])&&e.push(new us(i,a,o,s,f,h,d))}return this}function v2t(t){var e=[],n=[],r;for(this._root&&e.push(new us(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=e.pop();){var i=r.node;if(i.length){var a,o=r.x0,s=r.y0,l=r.z0,c=r.x1,u=r.y1,f=r.z1,h=(o+c)/2,d=(s+u)/2,p=(l+f)/2;(a=i[0])&&e.push(new us(a,o,s,l,h,d,p)),(a=i[1])&&e.push(new us(a,h,s,l,c,d,p)),(a=i[2])&&e.push(new us(a,o,d,l,h,u,p)),(a=i[3])&&e.push(new us(a,h,d,l,c,u,p)),(a=i[4])&&e.push(new us(a,o,s,p,h,d,f)),(a=i[5])&&e.push(new us(a,h,s,p,c,d,f)),(a=i[6])&&e.push(new us(a,o,d,p,h,u,f)),(a=i[7])&&e.push(new us(a,h,d,p,c,u,f))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.z0,r.x1,r.y1,r.z1);return this}function m2t(t){return t[0]}function y2t(t){return arguments.length?(this._x=t,this):this._x}function _2t(t){return t[1]}function b2t(t){return arguments.length?(this._y=t,this):this._y}function E2t(t){return t[2]}function x2t(t){return arguments.length?(this._z=t,this):this._z}function Vke(t,e,n,r){var i=new Pte(e??m2t,n??_2t,r??E2t,NaN,NaN,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Pte(t,e,n,r,i,a,o,s,l){this._x=t,this._y=e,this._z=n,this._x0=r,this._y0=i,this._z0=a,this._x1=o,this._y1=s,this._z1=l,this._root=void 0}function ahe(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Lu=Vke.prototype=Pte.prototype;Lu.copy=function(){var t=new Pte(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=ahe(e),t;for(n=[{source:e,target:t._root=new Array(8)}];e=n.pop();)for(var i=0;i<8;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(8)}):e.target[i]=ahe(r));return t};Lu.add=r2t;Lu.addAll=i2t;Lu.cover=a2t;Lu.data=o2t;Lu.extent=s2t;Lu.find=l2t;Lu.findAllWithinRadius=u2t;Lu.remove=f2t;Lu.removeAll=h2t;Lu.root=d2t;Lu.size=p2t;Lu.visit=g2t;Lu.visitAfter=v2t;Lu.x=y2t;Lu.y=b2t;Lu.z=x2t;const S2t=.81,QU=.1;function T2t(t,e,n,r,i=2){const a=e/n,o=t.getAllNodes(),s=o.map((u,f)=>{const{nodeStrength:h,x:d,y:p,z:g,size:v}=u.data;return{x:d,y:p,z:g,size:v,index:f,id:u.id,vx:0,vy:0,vz:0,weight:a*h}}),l=(i===2?UF(s,u=>u.x,u=>u.y):Vke(s,u=>u.x,u=>u.y,u=>u.z)).visitAfter(A2t),c=new Map;return s.forEach(u=>{c.set(u.id,u),O2t(u,l,i)}),s.map((u,f)=>{const{id:h,data:d}=o[f],{mass:p=1}=d;r[h]={x:u.vx/p,y:u.vy/p,z:u.vz/p}}),r}function A2t(t){let e=0,n=0,r=0,i=0,a=0;const o=t.length;if(o){for(let s=0;s<o;s++){const l=t[s];l&&l.weight&&(e+=l.weight,n+=l.x*l.weight,r+=l.y*l.weight,i+=l.z*l.weight,a+=l.size*l.weight)}t.x=n/e,t.y=r/e,t.z=i/e,t.size=a/e,t.weight=e}else{const s=t;t.x=s.data.x,t.y=s.data.y,t.z=s.data.z,t.size=s.data.size,t.weight=s.data.weight}}const w2t=(t,e,n,r,i,a,o)=>{var s;if(((s=t.data)===null||s===void 0?void 0:s.id)===a.id)return;const l=[n,r,i][o-1],c=a.x-t.x||QU,u=a.y-t.y||QU,f=a.z-t.z||QU,h=[c,u,f],d=l-e;let p=0;for(let y=0;y<o;y++)p+=h[y]*h[y];const v=Math.sqrt(p)*p;if(d*d*S2t<p){const y=t.weight/v;return a.vx+=c*y,a.vy+=u*y,a.vz+=f*y,!0}if(t.length)return!1;if(t.data!==a){const y=t.data.weight/v;a.vx+=c*y,a.vy+=u*y,a.vz+=f*y}};function O2t(t,e,n){e.visit((r,i,a,o,s)=>w2t(r,i,a,o,s,t,n))}const C2t={dimensions:2,maxIteration:500,gravity:10,factor:1,edgeStrength:50,nodeStrength:1e3,coulombDisScale:.005,damping:.9,maxSpeed:200,minMovement:.4,interval:.02,linkDistance:200,clusterNodeStrength:20,preventOverlap:!0,distanceThresholdMode:"mean"};class Yke{constructor(e={}){this.options=e,this.id="force",this.timeInterval=0,this.judgingDistance=0,this.running=!1,this.options=Object.assign(Object.assign({},C2t),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericForceLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericForceLayout(!0,e,n)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let r=0;(this.judgingDistance>this.lastOptions.minMovement||r<1)&&r<e;r++)this.runOneStep(this.lastCalcGraph,this.lastGraph,r,this.lastVelMap,this.lastOptions),this.updatePosition(this.lastGraph,this.lastCalcGraph,this.lastVelMap,this.lastOptions);const n={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&n.nodes.forEach(r=>this.lastGraph.mergeNodeData(r.id,{x:r.data.x,y:r.data.y,z:this.options.dimensions===3?r.data.z:void 0})),n}genericForceLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),a=n.getAllNodes(),o=n.getAllEdges(),s=this.formatOptions(i,n),{dimensions:l,width:c,height:u,nodeSize:f,getMass:h,nodeStrength:d,edgeStrength:p,linkDistance:g}=s,v=a.map((C,D)=>Object.assign(Object.assign({},C),{data:Object.assign(Object.assign({},C.data),{x:Ln(C.data.x)?C.data.x:Math.random()*c,y:Ln(C.data.y)?C.data.y:Math.random()*u,z:Ln(C.data.z)?C.data.z:Math.random()*Math.sqrt(c*u),size:f(C)||30,mass:h(C),nodeStrength:d(C)})})),y=o.map(C=>Object.assign(Object.assign({},C),{data:Object.assign(Object.assign({},C.data),{edgeStrength:p(C),linkDistance:g(C,n.getNode(C.source),n.getNode(C.target))})}));if(!a?.length)return this.lastResult={nodes:[],edges:o},{nodes:[],edges:o};const _={};a.forEach((C,D)=>{_[C.id]={x:0,y:0,z:0}});const E=new kc({nodes:v,edges:y});this.formatCentripetal(s,E);const{maxIteration:x,minMovement:T,onTick:S}=s;if(this.lastLayoutNodes=v,this.lastLayoutEdges=y,this.lastAssign=e,this.lastGraph=n,this.lastCalcGraph=E,this.lastOptions=s,this.lastVelMap=_,typeof window>"u")return;let w=0;return new Promise(C=>{this.timeInterval=window.setInterval(()=>{(!a||!this.running)&&C({nodes:JU(n,v),edges:o}),this.runOneStep(E,n,w,_,s),this.updatePosition(n,E,_,s),e&&v.forEach(D=>n.mergeNodeData(D.id,{x:D.data.x,y:D.data.y,z:l===3?D.data.z:void 0})),S?.({nodes:JU(n,v),edges:o}),w++,(w>=x||this.judgingDistance<T)&&(window.clearInterval(this.timeInterval),C({nodes:JU(n,v),edges:o}))},0),this.running=!0})})}formatOptions(e,n){const r=Object.assign({},e),{width:i,height:a,getMass:o}=e;r.width=!i&&typeof window<"u"?window.innerWidth:i,r.height=!a&&typeof window<"u"?window.innerHeight:a,e.center||(r.center=[r.width/2,r.height/2]),o||(r.getMass=l=>{let c=1;Ln(l?.data.mass)&&(c=l?.data.mass);const u=n.getDegree(l.id,"both");return!u||u<5?c:u*5*c}),r.nodeSize=Mte(e.nodeSize,e.nodeSpacing);const s=e.linkDistance?ix(1,e.linkDistance):l=>1+r.nodeSize(n.getNode(l.source))+r.nodeSize(n.getNode(l.target));return r.linkDistance=s,r.nodeStrength=ix(1,e.nodeStrength),r.edgeStrength=ix(1,e.edgeStrength),r}formatCentripetal(e,n){const{dimensions:r,centripetalOptions:i,center:a,clusterNodeStrength:o,leafCluster:s,clustering:l,nodeClusterBy:c}=e,u=n.getAllNodes(),f=i||{leaf:2,single:2,others:1,center:y=>({x:a[0],y:a[1],z:r===3?a[2]:void 0})};typeof o!="function"&&(e.clusterNodeStrength=y=>o);let h,d;if(s&&c&&(h=ohe(n,c),d=Array.from(new Set(u?.map(y=>y.data[c])))||[],e.centripetalOptions=Object.assign(f,{single:100,leaf:y=>{const{siblingLeaves:_,sameTypeLeaves:E}=h[y.id]||{};return E?.length===_?.length||d?.length===1?1:e.clusterNodeStrength(y)},others:1,center:y=>{const _=n.getDegree(y.id,"both");if(!_)return{x:100,y:100,z:0};let E;if(_===1){const{sameTypeLeaves:x=[]}=h[y.id]||{};x.length===1?E=void 0:x.length>1&&(E=she(x))}else E=void 0;return{x:E?.x,y:E?.y,z:E?.z}}})),l&&c){h||(h=ohe(n,c)),d||(d=Array.from(new Set(u.map(_=>_.data[c])))),d=d.filter(_=>_!==void 0);const y={};d.forEach(_=>{const E=u.filter(x=>x.data[c]===_).map(x=>n.getNode(x.id));y[_]=she(E)}),e.centripetalOptions=Object.assign(f,{single:_=>e.clusterNodeStrength(_),leaf:_=>e.clusterNodeStrength(_),others:_=>e.clusterNodeStrength(_),center:_=>{const E=y[_.data[c]];return{x:E?.x,y:E?.y,z:E?.z}}})}const{leaf:p,single:g,others:v}=e.centripetalOptions||{};p&&typeof p!="function"&&(e.centripetalOptions.leaf=()=>p),g&&typeof g!="function"&&(e.centripetalOptions.single=()=>g),v&&typeof v!="function"&&(e.centripetalOptions.others=()=>v)}runOneStep(e,n,r,i,a){const o={},s=e.getAllNodes(),l=e.getAllEdges();if(!s?.length)return;const{monitor:c}=a;if(this.calRepulsive(e,o,a),l&&this.calAttractive(e,o,a),this.calGravity(e,n,o,a),this.updateVelocity(e,o,i,a),c){const u=this.calTotalEnergy(o,s);c({energy:u,nodes:n.getAllNodes(),edges:n.getAllEdges(),iterations:r})}}calTotalEnergy(e,n){if(!n?.length)return 0;let r=0;return n.forEach((i,a)=>{const o=e[i.id].x,s=e[i.id].y,l=this.options.dimensions===3?e[i.id].z:0,c=o*o+s*s+l*l,{mass:u=1}=i.data;r+=u*c*.5}),r}calRepulsive(e,n,r){const{dimensions:i,factor:a,coulombDisScale:o}=r;T2t(e,a,o*o,n,i)}calAttractive(e,n,r){const{dimensions:i,nodeSize:a}=r;e.getAllEdges().forEach((o,s)=>{const{source:l,target:c}=o,u=e.getNode(l),f=e.getNode(c);if(!u||!f)return;let h=f.data.x-u.data.x,d=f.data.y-u.data.y,p=i===3?f.data.z-u.data.z:0;!h&&!d&&(h=Math.random()*.01,d=Math.random()*.01,i===3&&!p&&(p=Math.random()*.01));const g=Math.sqrt(h*h+d*d+p*p);if(g<a(u)+a(f))return;const v=h/g,y=d/g,_=p/g,{linkDistance:E=200,edgeStrength:x=200}=o.data||{},S=(E-g)*x,w=u.data.mass||1,C=f.data.mass||1,D=1/w,L=1/C,B=v*S,I=y*S,U=_*S;n[l].x-=B*D,n[l].y-=I*D,n[l].z-=U*D,n[c].x+=B*L,n[c].y+=I*L,n[c].z+=U*L})}calGravity(e,n,r,i){const{getCenter:a}=i,o=e.getAllNodes(),s=n.getAllNodes(),l=n.getAllEdges(),{width:c,height:u,center:f,gravity:h,centripetalOptions:d}=i;o&&o.forEach(p=>{const{id:g,data:v}=p,{mass:y,x:_,y:E,z:x}=v,T=n.getNode(g);let S=0,w=0,C=0,D=h;const L=e.getDegree(g,"in"),B=e.getDegree(g,"out"),I=e.getDegree(g,"both"),U=a?.(T,I);if(U){const[$,X,N]=U;S=_-$,w=E-X,D=N}else S=_-f[0],w=E-f[1],C=x-f[2];if(D&&(r[g].x-=D*S/y,r[g].y-=D*w/y,r[g].z-=D*C/y),d){const{leaf:$,single:X,others:N,center:M}=d,{x:k,y:z,z:j,centerStrength:V}=M?.(T,s,l,c,u)||{x:0,y:0,z:0,centerStrength:0};if(!Ln(k)||!Ln(z))return;const Q=(_-k)/y,ee=(E-z)/y,re=(x-j)/y;if(V&&(r[g].x-=V*Q,r[g].y-=V*ee,r[g].z-=V*re),I===0){const le=X(T);if(!le)return;r[g].x-=le*Q,r[g].y-=le*ee,r[g].z-=le*re;return}if(L===0||B===0){const le=$(T,s,l);if(!le)return;r[g].x-=le*Q,r[g].y-=le*ee,r[g].z-=le*re;return}const ne=N(T);if(!ne)return;r[g].x-=ne*Q,r[g].y-=ne*ee,r[g].z-=ne*re}})}updateVelocity(e,n,r,i){const{damping:a,maxSpeed:o,interval:s,dimensions:l}=i,c=e.getAllNodes();c?.length&&c.forEach(u=>{const{id:f}=u;let h=(r[f].x+n[f].x*s)*a||.01,d=(r[f].y+n[f].y*s)*a||.01,p=l===3?(r[f].z+n[f].z*s)*a||.01:0;const g=Math.sqrt(h*h+d*d+p*p);if(g>o){const v=o/g;h=v*h,d=v*d,p=v*p}r[f]={x:h,y:d,z:p}})}updatePosition(e,n,r,i){const{distanceThresholdMode:a,interval:o,dimensions:s}=i,l=n.getAllNodes();if(!l?.length){this.judgingDistance=0;return}let c=0;a==="max"?this.judgingDistance=-1/0:a==="min"&&(this.judgingDistance=1/0),l.forEach(u=>{const{id:f}=u,h=e.getNode(f);if(Ln(h.data.fx)&&Ln(h.data.fy)){n.mergeNodeData(f,{x:h.data.fx,y:h.data.fy,z:s===3?h.data.fz:void 0});return}const d=r[f].x*o,p=r[f].y*o,g=s===3?r[f].z*o:0;n.mergeNodeData(f,{x:u.data.x+d,y:u.data.y+p,z:u.data.z+g});const v=Math.sqrt(d*d+p*p+g*g);switch(a){case"max":this.judgingDistance<v&&(this.judgingDistance=v);break;case"min":this.judgingDistance>v&&(this.judgingDistance=v);break;default:c=c+v;break}}),(!a||a==="mean")&&(this.judgingDistance=c/l.length)}}const ohe=(t,e)=>{const n=t.getAllNodes();if(!n?.length)return{};const r={};return n.forEach((i,a)=>{t.getDegree(i.id,"both")===1&&(r[i.id]=R2t(t,"leaf",i,e))}),r},R2t=(t,e,n,r)=>{const i=t.getDegree(n.id,"in"),a=t.getDegree(n.id,"out");let o=n,s=[];i===0?(o=t.getSuccessors(n.id)[0],s=t.getNeighbors(o.id)):a===0&&(o=t.getPredecessors(n.id)[0],s=t.getNeighbors(o.id)),s=s.filter(c=>t.getDegree(c.id,"in")===0||t.getDegree(c.id,"out")===0);const l=M2t(t,e,r,n,s);return{coreNode:o,siblingLeaves:s,sameTypeLeaves:l}},M2t=(t,e,n,r,i)=>{const a=r.data[n]||"";let o=i?.filter(s=>s.data[n]===a)||[];return o=o.filter(s=>t.getDegree(s.id,"in")===0||t.getDegree(s.id,"out")===0),o},she=t=>{const e={x:0,y:0};t.forEach(r=>{const{x:i,y:a}=r.data;e.x+=i||0,e.y+=a||0});const n=t.length||1;return{x:e.x/n,y:e.y/n}},JU=(t,e)=>e.map(n=>{const{id:r,data:i}=n,a=t.getNode(r);return Object.assign(Object.assign({},a),{data:Object.assign(Object.assign({},a.data),{x:i.x,y:i.y,z:i.z})})});var _a={};const P2t=Object.prototype.toString;function DM(t){const e=P2t.call(t);return e.endsWith("Array]")&&!e.includes("Big")}const N2t=Object.freeze(Object.defineProperty({__proto__:null,isAnyArray:DM},Symbol.toStringTag,{value:"Module"})),I2t=eTe(N2t);function L2t(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!DM(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,i=e.toIndex,a=i===void 0?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[r],s=r+1;s<a;s++)t[s]>o&&(o=t[s]);return o}function k2t(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!DM(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");var n=e.fromIndex,r=n===void 0?0:n,i=e.toIndex,a=i===void 0?t.length:i;if(r<0||r>=t.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(a<=r||a>t.length||!Number.isInteger(a))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var o=t[r],s=r+1;s<a;s++)t[s]<o&&(o=t[s]);return o}function D2t(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(DM(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var n;if(e.output!==void 0){if(!DM(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);var r=k2t(t),i=L2t(t);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var a=e.min,o=a===void 0?e.autoMinMax?r:0:a,s=e.max,l=s===void 0?e.autoMinMax?i:1:s;if(o>=l)throw new RangeError("min option must be smaller than max option");for(var c=(l-o)/(i-r),u=0;u<t.length;u++)n[u]=(t[u]-r)*c+o;return n}const B2t=Object.freeze(Object.defineProperty({__proto__:null,default:D2t},Symbol.toStringTag,{value:"Module"})),F2t=eTe(B2t);var lhe;function U2t(){if(lhe)return _a;lhe=1,Object.defineProperty(_a,"__esModule",{value:!0});var t=I2t,e=F2t;const n=" ".repeat(2),r=" ".repeat(4);function i(){return a(this)}function a(ce,H={}){const{maxRows:W=15,maxColumns:F=10,maxNumSize:Y=8,padMinus:te="auto"}=H;return`${ce.constructor.name} {
${n}[
${r}${o(ce,W,F,Y,te)}
${n}]
${n}rows: ${ce.rows}
${n}columns: ${ce.columns}
}`}function o(ce,H,W,F,Y){const{rows:te,columns:pe}=ce,me=Math.min(te,H),Ce=Math.min(pe,W),Oe=[];if(Y==="auto"){Y=!1;e:for(let ct=0;ct<me;ct++)for(let Ge=0;Ge<Ce;Ge++)if(ce.get(ct,Ge)<0){Y=!0;break e}}for(let ct=0;ct<me;ct++){let Ge=[];for(let $t=0;$t<Ce;$t++)Ge.push(s(ce.get(ct,$t),F,Y));Oe.push(`${Ge.join(" ")}`)}return Ce!==pe&&(Oe[Oe.length-1]+=` ... ${pe-W} more columns`),me!==te&&Oe.push(`... ${te-H} more rows`),Oe.join(`
${r}`)}function s(ce,H,W){return(ce>=0&&W?` ${l(ce,H-1)}`:l(ce,H)).padEnd(H)}function l(ce,H){let W=ce.toString();if(W.length<=H)return W;let F=ce.toFixed(H);if(F.length>H&&(F=ce.toFixed(Math.max(0,H-(F.length-H)))),F.length<=H&&!F.startsWith("0.000")&&!F.startsWith("-0.000"))return F;let Y=ce.toExponential(H);return Y.length>H&&(Y=ce.toExponential(Math.max(0,H-(Y.length-H)))),Y.slice(0)}function c(ce,H){ce.prototype.add=function(F){return typeof F=="number"?this.addS(F):this.addM(F)},ce.prototype.addS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)+F);return this},ce.prototype.addM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)+F.get(Y,te));return this},ce.add=function(F,Y){return new H(F).add(Y)},ce.prototype.sub=function(F){return typeof F=="number"?this.subS(F):this.subM(F)},ce.prototype.subS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)-F);return this},ce.prototype.subM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)-F.get(Y,te));return this},ce.sub=function(F,Y){return new H(F).sub(Y)},ce.prototype.subtract=ce.prototype.sub,ce.prototype.subtractS=ce.prototype.subS,ce.prototype.subtractM=ce.prototype.subM,ce.subtract=ce.sub,ce.prototype.mul=function(F){return typeof F=="number"?this.mulS(F):this.mulM(F)},ce.prototype.mulS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)*F);return this},ce.prototype.mulM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)*F.get(Y,te));return this},ce.mul=function(F,Y){return new H(F).mul(Y)},ce.prototype.multiply=ce.prototype.mul,ce.prototype.multiplyS=ce.prototype.mulS,ce.prototype.multiplyM=ce.prototype.mulM,ce.multiply=ce.mul,ce.prototype.div=function(F){return typeof F=="number"?this.divS(F):this.divM(F)},ce.prototype.divS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)/F);return this},ce.prototype.divM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)/F.get(Y,te));return this},ce.div=function(F,Y){return new H(F).div(Y)},ce.prototype.divide=ce.prototype.div,ce.prototype.divideS=ce.prototype.divS,ce.prototype.divideM=ce.prototype.divM,ce.divide=ce.div,ce.prototype.mod=function(F){return typeof F=="number"?this.modS(F):this.modM(F)},ce.prototype.modS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)%F);return this},ce.prototype.modM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)%F.get(Y,te));return this},ce.mod=function(F,Y){return new H(F).mod(Y)},ce.prototype.modulus=ce.prototype.mod,ce.prototype.modulusS=ce.prototype.modS,ce.prototype.modulusM=ce.prototype.modM,ce.modulus=ce.mod,ce.prototype.and=function(F){return typeof F=="number"?this.andS(F):this.andM(F)},ce.prototype.andS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)&F);return this},ce.prototype.andM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)&F.get(Y,te));return this},ce.and=function(F,Y){return new H(F).and(Y)},ce.prototype.or=function(F){return typeof F=="number"?this.orS(F):this.orM(F)},ce.prototype.orS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)|F);return this},ce.prototype.orM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)|F.get(Y,te));return this},ce.or=function(F,Y){return new H(F).or(Y)},ce.prototype.xor=function(F){return typeof F=="number"?this.xorS(F):this.xorM(F)},ce.prototype.xorS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)^F);return this},ce.prototype.xorM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)^F.get(Y,te));return this},ce.xor=function(F,Y){return new H(F).xor(Y)},ce.prototype.leftShift=function(F){return typeof F=="number"?this.leftShiftS(F):this.leftShiftM(F)},ce.prototype.leftShiftS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)<<F);return this},ce.prototype.leftShiftM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)<<F.get(Y,te));return this},ce.leftShift=function(F,Y){return new H(F).leftShift(Y)},ce.prototype.signPropagatingRightShift=function(F){return typeof F=="number"?this.signPropagatingRightShiftS(F):this.signPropagatingRightShiftM(F)},ce.prototype.signPropagatingRightShiftS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)>>F);return this},ce.prototype.signPropagatingRightShiftM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)>>F.get(Y,te));return this},ce.signPropagatingRightShift=function(F,Y){return new H(F).signPropagatingRightShift(Y)},ce.prototype.rightShift=function(F){return typeof F=="number"?this.rightShiftS(F):this.rightShiftM(F)},ce.prototype.rightShiftS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)>>>F);return this},ce.prototype.rightShiftM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)>>>F.get(Y,te));return this},ce.rightShift=function(F,Y){return new H(F).rightShift(Y)},ce.prototype.zeroFillRightShift=ce.prototype.rightShift,ce.prototype.zeroFillRightShiftS=ce.prototype.rightShiftS,ce.prototype.zeroFillRightShiftM=ce.prototype.rightShiftM,ce.zeroFillRightShift=ce.rightShift,ce.prototype.not=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,~this.get(F,Y));return this},ce.not=function(F){return new H(F).not()},ce.prototype.abs=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.abs(this.get(F,Y)));return this},ce.abs=function(F){return new H(F).abs()},ce.prototype.acos=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.acos(this.get(F,Y)));return this},ce.acos=function(F){return new H(F).acos()},ce.prototype.acosh=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.acosh(this.get(F,Y)));return this},ce.acosh=function(F){return new H(F).acosh()},ce.prototype.asin=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.asin(this.get(F,Y)));return this},ce.asin=function(F){return new H(F).asin()},ce.prototype.asinh=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.asinh(this.get(F,Y)));return this},ce.asinh=function(F){return new H(F).asinh()},ce.prototype.atan=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.atan(this.get(F,Y)));return this},ce.atan=function(F){return new H(F).atan()},ce.prototype.atanh=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.atanh(this.get(F,Y)));return this},ce.atanh=function(F){return new H(F).atanh()},ce.prototype.cbrt=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.cbrt(this.get(F,Y)));return this},ce.cbrt=function(F){return new H(F).cbrt()},ce.prototype.ceil=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.ceil(this.get(F,Y)));return this},ce.ceil=function(F){return new H(F).ceil()},ce.prototype.clz32=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.clz32(this.get(F,Y)));return this},ce.clz32=function(F){return new H(F).clz32()},ce.prototype.cos=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.cos(this.get(F,Y)));return this},ce.cos=function(F){return new H(F).cos()},ce.prototype.cosh=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.cosh(this.get(F,Y)));return this},ce.cosh=function(F){return new H(F).cosh()},ce.prototype.exp=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.exp(this.get(F,Y)));return this},ce.exp=function(F){return new H(F).exp()},ce.prototype.expm1=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.expm1(this.get(F,Y)));return this},ce.expm1=function(F){return new H(F).expm1()},ce.prototype.floor=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.floor(this.get(F,Y)));return this},ce.floor=function(F){return new H(F).floor()},ce.prototype.fround=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.fround(this.get(F,Y)));return this},ce.fround=function(F){return new H(F).fround()},ce.prototype.log=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.log(this.get(F,Y)));return this},ce.log=function(F){return new H(F).log()},ce.prototype.log1p=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.log1p(this.get(F,Y)));return this},ce.log1p=function(F){return new H(F).log1p()},ce.prototype.log10=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.log10(this.get(F,Y)));return this},ce.log10=function(F){return new H(F).log10()},ce.prototype.log2=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.log2(this.get(F,Y)));return this},ce.log2=function(F){return new H(F).log2()},ce.prototype.round=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.round(this.get(F,Y)));return this},ce.round=function(F){return new H(F).round()},ce.prototype.sign=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.sign(this.get(F,Y)));return this},ce.sign=function(F){return new H(F).sign()},ce.prototype.sin=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.sin(this.get(F,Y)));return this},ce.sin=function(F){return new H(F).sin()},ce.prototype.sinh=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.sinh(this.get(F,Y)));return this},ce.sinh=function(F){return new H(F).sinh()},ce.prototype.sqrt=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.sqrt(this.get(F,Y)));return this},ce.sqrt=function(F){return new H(F).sqrt()},ce.prototype.tan=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.tan(this.get(F,Y)));return this},ce.tan=function(F){return new H(F).tan()},ce.prototype.tanh=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.tanh(this.get(F,Y)));return this},ce.tanh=function(F){return new H(F).tanh()},ce.prototype.trunc=function(){for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.set(F,Y,Math.trunc(this.get(F,Y)));return this},ce.trunc=function(F){return new H(F).trunc()},ce.pow=function(F,Y){return new H(F).pow(Y)},ce.prototype.pow=function(F){return typeof F=="number"?this.powS(F):this.powM(F)},ce.prototype.powS=function(F){for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)**F);return this},ce.prototype.powM=function(F){if(F=H.checkMatrix(F),this.rows!==F.rows||this.columns!==F.columns)throw new RangeError("Matrices dimensions must be equal");for(let Y=0;Y<this.rows;Y++)for(let te=0;te<this.columns;te++)this.set(Y,te,this.get(Y,te)**F.get(Y,te));return this}}function u(ce,H,W){let F=W?ce.rows:ce.rows-1;if(H<0||H>F)throw new RangeError("Row index out of range")}function f(ce,H,W){let F=W?ce.columns:ce.columns-1;if(H<0||H>F)throw new RangeError("Column index out of range")}function h(ce,H){if(H.to1DArray&&(H=H.to1DArray()),H.length!==ce.columns)throw new RangeError("vector size must be the same as the number of columns");return H}function d(ce,H){if(H.to1DArray&&(H=H.to1DArray()),H.length!==ce.rows)throw new RangeError("vector size must be the same as the number of rows");return H}function p(ce,H){if(!t.isAnyArray(H))throw new TypeError("row indices must be an array");for(let W=0;W<H.length;W++)if(H[W]<0||H[W]>=ce.rows)throw new RangeError("row indices are out of range")}function g(ce,H){if(!t.isAnyArray(H))throw new TypeError("column indices must be an array");for(let W=0;W<H.length;W++)if(H[W]<0||H[W]>=ce.columns)throw new RangeError("column indices are out of range")}function v(ce,H,W,F,Y){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(_("startRow",H),_("endRow",W),_("startColumn",F),_("endColumn",Y),H>W||F>Y||H<0||H>=ce.rows||W<0||W>=ce.rows||F<0||F>=ce.columns||Y<0||Y>=ce.columns)throw new RangeError("Submatrix indices are out of range")}function y(ce,H=0){let W=[];for(let F=0;F<ce;F++)W.push(H);return W}function _(ce,H){if(typeof H!="number")throw new TypeError(`${ce} must be a number`)}function E(ce){if(ce.isEmpty())throw new Error("Empty matrix has no elements to index")}function x(ce){let H=y(ce.rows);for(let W=0;W<ce.rows;++W)for(let F=0;F<ce.columns;++F)H[W]+=ce.get(W,F);return H}function T(ce){let H=y(ce.columns);for(let W=0;W<ce.rows;++W)for(let F=0;F<ce.columns;++F)H[F]+=ce.get(W,F);return H}function S(ce){let H=0;for(let W=0;W<ce.rows;W++)for(let F=0;F<ce.columns;F++)H+=ce.get(W,F);return H}function w(ce){let H=y(ce.rows,1);for(let W=0;W<ce.rows;++W)for(let F=0;F<ce.columns;++F)H[W]*=ce.get(W,F);return H}function C(ce){let H=y(ce.columns,1);for(let W=0;W<ce.rows;++W)for(let F=0;F<ce.columns;++F)H[F]*=ce.get(W,F);return H}function D(ce){let H=1;for(let W=0;W<ce.rows;W++)for(let F=0;F<ce.columns;F++)H*=ce.get(W,F);return H}function L(ce,H,W){const F=ce.rows,Y=ce.columns,te=[];for(let pe=0;pe<F;pe++){let me=0,Ce=0,Oe=0;for(let ct=0;ct<Y;ct++)Oe=ce.get(pe,ct)-W[pe],me+=Oe,Ce+=Oe*Oe;H?te.push((Ce-me*me/Y)/(Y-1)):te.push((Ce-me*me/Y)/Y)}return te}function B(ce,H,W){const F=ce.rows,Y=ce.columns,te=[];for(let pe=0;pe<Y;pe++){let me=0,Ce=0,Oe=0;for(let ct=0;ct<F;ct++)Oe=ce.get(ct,pe)-W[pe],me+=Oe,Ce+=Oe*Oe;H?te.push((Ce-me*me/F)/(F-1)):te.push((Ce-me*me/F)/F)}return te}function I(ce,H,W){const F=ce.rows,Y=ce.columns,te=F*Y;let pe=0,me=0,Ce=0;for(let Oe=0;Oe<F;Oe++)for(let ct=0;ct<Y;ct++)Ce=ce.get(Oe,ct)-W,pe+=Ce,me+=Ce*Ce;return H?(me-pe*pe/te)/(te-1):(me-pe*pe/te)/te}function U(ce,H){for(let W=0;W<ce.rows;W++)for(let F=0;F<ce.columns;F++)ce.set(W,F,ce.get(W,F)-H[W])}function $(ce,H){for(let W=0;W<ce.rows;W++)for(let F=0;F<ce.columns;F++)ce.set(W,F,ce.get(W,F)-H[F])}function X(ce,H){for(let W=0;W<ce.rows;W++)for(let F=0;F<ce.columns;F++)ce.set(W,F,ce.get(W,F)-H)}function N(ce){const H=[];for(let W=0;W<ce.rows;W++){let F=0;for(let Y=0;Y<ce.columns;Y++)F+=ce.get(W,Y)**2/(ce.columns-1);H.push(Math.sqrt(F))}return H}function M(ce,H){for(let W=0;W<ce.rows;W++)for(let F=0;F<ce.columns;F++)ce.set(W,F,ce.get(W,F)/H[W])}function k(ce){const H=[];for(let W=0;W<ce.columns;W++){let F=0;for(let Y=0;Y<ce.rows;Y++)F+=ce.get(Y,W)**2/(ce.rows-1);H.push(Math.sqrt(F))}return H}function z(ce,H){for(let W=0;W<ce.rows;W++)for(let F=0;F<ce.columns;F++)ce.set(W,F,ce.get(W,F)/H[F])}function j(ce){const H=ce.size-1;let W=0;for(let F=0;F<ce.columns;F++)for(let Y=0;Y<ce.rows;Y++)W+=ce.get(Y,F)**2/H;return Math.sqrt(W)}function V(ce,H){for(let W=0;W<ce.rows;W++)for(let F=0;F<ce.columns;F++)ce.set(W,F,ce.get(W,F)/H)}class Q{static from1DArray(H,W,F){if(H*W!==F.length)throw new RangeError("data length does not match given dimensions");let te=new ne(H,W);for(let pe=0;pe<H;pe++)for(let me=0;me<W;me++)te.set(pe,me,F[pe*W+me]);return te}static rowVector(H){let W=new ne(1,H.length);for(let F=0;F<H.length;F++)W.set(0,F,H[F]);return W}static columnVector(H){let W=new ne(H.length,1);for(let F=0;F<H.length;F++)W.set(F,0,H[F]);return W}static zeros(H,W){return new ne(H,W)}static ones(H,W){return new ne(H,W).fill(1)}static rand(H,W,F={}){if(typeof F!="object")throw new TypeError("options must be an object");const{random:Y=Math.random}=F;let te=new ne(H,W);for(let pe=0;pe<H;pe++)for(let me=0;me<W;me++)te.set(pe,me,Y());return te}static randInt(H,W,F={}){if(typeof F!="object")throw new TypeError("options must be an object");const{min:Y=0,max:te=1e3,random:pe=Math.random}=F;if(!Number.isInteger(Y))throw new TypeError("min must be an integer");if(!Number.isInteger(te))throw new TypeError("max must be an integer");if(Y>=te)throw new RangeError("min must be smaller than max");let me=te-Y,Ce=new ne(H,W);for(let Oe=0;Oe<H;Oe++)for(let ct=0;ct<W;ct++){let Ge=Y+Math.round(pe()*me);Ce.set(Oe,ct,Ge)}return Ce}static eye(H,W,F){W===void 0&&(W=H),F===void 0&&(F=1);let Y=Math.min(H,W),te=this.zeros(H,W);for(let pe=0;pe<Y;pe++)te.set(pe,pe,F);return te}static diag(H,W,F){let Y=H.length;W===void 0&&(W=Y),F===void 0&&(F=W);let te=Math.min(Y,W,F),pe=this.zeros(W,F);for(let me=0;me<te;me++)pe.set(me,me,H[me]);return pe}static min(H,W){H=this.checkMatrix(H),W=this.checkMatrix(W);let F=H.rows,Y=H.columns,te=new ne(F,Y);for(let pe=0;pe<F;pe++)for(let me=0;me<Y;me++)te.set(pe,me,Math.min(H.get(pe,me),W.get(pe,me)));return te}static max(H,W){H=this.checkMatrix(H),W=this.checkMatrix(W);let F=H.rows,Y=H.columns,te=new this(F,Y);for(let pe=0;pe<F;pe++)for(let me=0;me<Y;me++)te.set(pe,me,Math.max(H.get(pe,me),W.get(pe,me)));return te}static checkMatrix(H){return Q.isMatrix(H)?H:new ne(H)}static isMatrix(H){return H!=null&&H.klass==="Matrix"}get size(){return this.rows*this.columns}apply(H){if(typeof H!="function")throw new TypeError("callback must be a function");for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)H.call(this,W,F);return this}to1DArray(){let H=[];for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)H.push(this.get(W,F));return H}to2DArray(){let H=[];for(let W=0;W<this.rows;W++){H.push([]);for(let F=0;F<this.columns;F++)H[W].push(this.get(W,F))}return H}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let H=0;H<this.rows;H++)for(let W=0;W<=H;W++)if(this.get(H,W)!==this.get(W,H))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let H=0;H<this.rows;H++)if(this.get(H,H)!==0)return!1;return!0}isEchelonForm(){let H=0,W=0,F=-1,Y=!0,te=!1;for(;H<this.rows&&Y;){for(W=0,te=!1;W<this.columns&&te===!1;)this.get(H,W)===0?W++:this.get(H,W)===1&&W>F?(te=!0,F=W):(Y=!1,te=!0);H++}return Y}isReducedEchelonForm(){let H=0,W=0,F=-1,Y=!0,te=!1;for(;H<this.rows&&Y;){for(W=0,te=!1;W<this.columns&&te===!1;)this.get(H,W)===0?W++:this.get(H,W)===1&&W>F?(te=!0,F=W):(Y=!1,te=!0);for(let pe=W+1;pe<this.rows;pe++)this.get(H,pe)!==0&&(Y=!1);H++}return Y}echelonForm(){let H=this.clone(),W=0,F=0;for(;W<H.rows&&F<H.columns;){let Y=W;for(let te=W;te<H.rows;te++)H.get(te,F)>H.get(Y,F)&&(Y=te);if(H.get(Y,F)===0)F++;else{H.swapRows(W,Y);let te=H.get(W,F);for(let pe=F;pe<H.columns;pe++)H.set(W,pe,H.get(W,pe)/te);for(let pe=W+1;pe<H.rows;pe++){let me=H.get(pe,F)/H.get(W,F);H.set(pe,F,0);for(let Ce=F+1;Ce<H.columns;Ce++)H.set(pe,Ce,H.get(pe,Ce)-H.get(W,Ce)*me)}W++,F++}}return H}reducedEchelonForm(){let H=this.echelonForm(),W=H.columns,F=H.rows,Y=F-1;for(;Y>=0;)if(H.maxRow(Y)===0)Y--;else{let te=0,pe=!1;for(;te<F&&pe===!1;)H.get(Y,te)===1?pe=!0:te++;for(let me=0;me<Y;me++){let Ce=H.get(me,te);for(let Oe=te;Oe<W;Oe++){let ct=H.get(me,Oe)-Ce*H.get(Y,Oe);H.set(me,Oe,ct)}}Y--}return H}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(H={}){if(typeof H!="object")throw new TypeError("options must be an object");const{rows:W=1,columns:F=1}=H;if(!Number.isInteger(W)||W<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(F)||F<=0)throw new TypeError("columns must be a positive integer");let Y=new ne(this.rows*W,this.columns*F);for(let te=0;te<W;te++)for(let pe=0;pe<F;pe++)Y.setSubMatrix(this,this.rows*te,this.columns*pe);return Y}fill(H){for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,H);return this}neg(){return this.mulS(-1)}getRow(H){u(this,H);let W=[];for(let F=0;F<this.columns;F++)W.push(this.get(H,F));return W}getRowVector(H){return ne.rowVector(this.getRow(H))}setRow(H,W){u(this,H),W=h(this,W);for(let F=0;F<this.columns;F++)this.set(H,F,W[F]);return this}swapRows(H,W){u(this,H),u(this,W);for(let F=0;F<this.columns;F++){let Y=this.get(H,F);this.set(H,F,this.get(W,F)),this.set(W,F,Y)}return this}getColumn(H){f(this,H);let W=[];for(let F=0;F<this.rows;F++)W.push(this.get(F,H));return W}getColumnVector(H){return ne.columnVector(this.getColumn(H))}setColumn(H,W){f(this,H),W=d(this,W);for(let F=0;F<this.rows;F++)this.set(F,H,W[F]);return this}swapColumns(H,W){f(this,H),f(this,W);for(let F=0;F<this.rows;F++){let Y=this.get(F,H);this.set(F,H,this.get(F,W)),this.set(F,W,Y)}return this}addRowVector(H){H=h(this,H);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,this.get(W,F)+H[F]);return this}subRowVector(H){H=h(this,H);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,this.get(W,F)-H[F]);return this}mulRowVector(H){H=h(this,H);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,this.get(W,F)*H[F]);return this}divRowVector(H){H=h(this,H);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,this.get(W,F)/H[F]);return this}addColumnVector(H){H=d(this,H);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,this.get(W,F)+H[W]);return this}subColumnVector(H){H=d(this,H);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,this.get(W,F)-H[W]);return this}mulColumnVector(H){H=d(this,H);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,this.get(W,F)*H[W]);return this}divColumnVector(H){H=d(this,H);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)this.set(W,F,this.get(W,F)/H[W]);return this}mulRow(H,W){u(this,H);for(let F=0;F<this.columns;F++)this.set(H,F,this.get(H,F)*W);return this}mulColumn(H,W){f(this,H);for(let F=0;F<this.rows;F++)this.set(F,H,this.get(F,H)*W);return this}max(H){if(this.isEmpty())return NaN;switch(H){case"row":{const W=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.get(F,Y)>W[F]&&(W[F]=this.get(F,Y));return W}case"column":{const W=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.get(F,Y)>W[Y]&&(W[Y]=this.get(F,Y));return W}case void 0:{let W=this.get(0,0);for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.get(F,Y)>W&&(W=this.get(F,Y));return W}default:throw new Error(`invalid option: ${H}`)}}maxIndex(){E(this);let H=this.get(0,0),W=[0,0];for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.get(F,Y)>H&&(H=this.get(F,Y),W[0]=F,W[1]=Y);return W}min(H){if(this.isEmpty())return NaN;switch(H){case"row":{const W=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.get(F,Y)<W[F]&&(W[F]=this.get(F,Y));return W}case"column":{const W=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.get(F,Y)<W[Y]&&(W[Y]=this.get(F,Y));return W}case void 0:{let W=this.get(0,0);for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.get(F,Y)<W&&(W=this.get(F,Y));return W}default:throw new Error(`invalid option: ${H}`)}}minIndex(){E(this);let H=this.get(0,0),W=[0,0];for(let F=0;F<this.rows;F++)for(let Y=0;Y<this.columns;Y++)this.get(F,Y)<H&&(H=this.get(F,Y),W[0]=F,W[1]=Y);return W}maxRow(H){if(u(this,H),this.isEmpty())return NaN;let W=this.get(H,0);for(let F=1;F<this.columns;F++)this.get(H,F)>W&&(W=this.get(H,F));return W}maxRowIndex(H){u(this,H),E(this);let W=this.get(H,0),F=[H,0];for(let Y=1;Y<this.columns;Y++)this.get(H,Y)>W&&(W=this.get(H,Y),F[1]=Y);return F}minRow(H){if(u(this,H),this.isEmpty())return NaN;let W=this.get(H,0);for(let F=1;F<this.columns;F++)this.get(H,F)<W&&(W=this.get(H,F));return W}minRowIndex(H){u(this,H),E(this);let W=this.get(H,0),F=[H,0];for(let Y=1;Y<this.columns;Y++)this.get(H,Y)<W&&(W=this.get(H,Y),F[1]=Y);return F}maxColumn(H){if(f(this,H),this.isEmpty())return NaN;let W=this.get(0,H);for(let F=1;F<this.rows;F++)this.get(F,H)>W&&(W=this.get(F,H));return W}maxColumnIndex(H){f(this,H),E(this);let W=this.get(0,H),F=[0,H];for(let Y=1;Y<this.rows;Y++)this.get(Y,H)>W&&(W=this.get(Y,H),F[0]=Y);return F}minColumn(H){if(f(this,H),this.isEmpty())return NaN;let W=this.get(0,H);for(let F=1;F<this.rows;F++)this.get(F,H)<W&&(W=this.get(F,H));return W}minColumnIndex(H){f(this,H),E(this);let W=this.get(0,H),F=[0,H];for(let Y=1;Y<this.rows;Y++)this.get(Y,H)<W&&(W=this.get(Y,H),F[0]=Y);return F}diag(){let H=Math.min(this.rows,this.columns),W=[];for(let F=0;F<H;F++)W.push(this.get(F,F));return W}norm(H="frobenius"){switch(H){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${H}`)}}cumulativeSum(){let H=0;for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)H+=this.get(W,F),this.set(W,F,H);return this}dot(H){Q.isMatrix(H)&&(H=H.to1DArray());let W=this.to1DArray();if(W.length!==H.length)throw new RangeError("vectors do not have the same size");let F=0;for(let Y=0;Y<W.length;Y++)F+=W[Y]*H[Y];return F}mmul(H){H=ne.checkMatrix(H);let W=this.rows,F=this.columns,Y=H.columns,te=new ne(W,Y),pe=new Float64Array(F);for(let me=0;me<Y;me++){for(let Ce=0;Ce<F;Ce++)pe[Ce]=H.get(Ce,me);for(let Ce=0;Ce<W;Ce++){let Oe=0;for(let ct=0;ct<F;ct++)Oe+=this.get(Ce,ct)*pe[ct];te.set(Ce,me,Oe)}}return te}mpow(H){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(H)||H<0)throw new RangeError("Exponent must be a non-negative integer");let W=ne.eye(this.rows),F=this;for(let Y=H;Y>=1;Y/=2)(Y&1)!==0&&(W=W.mmul(F)),F=F.mmul(F);return W}strassen2x2(H){H=ne.checkMatrix(H);let W=new ne(2,2);const F=this.get(0,0),Y=H.get(0,0),te=this.get(0,1),pe=H.get(0,1),me=this.get(1,0),Ce=H.get(1,0),Oe=this.get(1,1),ct=H.get(1,1),Ge=(F+Oe)*(Y+ct),$t=(me+Oe)*Y,kn=F*(pe-ct),_t=Oe*(Ce-Y),Jt=(F+te)*ct,Xn=(me-F)*(Y+pe),$e=(te-Oe)*(Ce+ct),_n=Ge+_t-Jt+$e,ar=kn+Jt,Hr=$t+_t,ti=Ge-$t+kn+Xn;return W.set(0,0,_n),W.set(0,1,ar),W.set(1,0,Hr),W.set(1,1,ti),W}strassen3x3(H){H=ne.checkMatrix(H);let W=new ne(3,3);const F=this.get(0,0),Y=this.get(0,1),te=this.get(0,2),pe=this.get(1,0),me=this.get(1,1),Ce=this.get(1,2),Oe=this.get(2,0),ct=this.get(2,1),Ge=this.get(2,2),$t=H.get(0,0),kn=H.get(0,1),_t=H.get(0,2),Jt=H.get(1,0),Xn=H.get(1,1),$e=H.get(1,2),_n=H.get(2,0),ar=H.get(2,1),Hr=H.get(2,2),ti=(F+Y+te-pe-me-ct-Ge)*Xn,ua=(F-pe)*(-kn+Xn),Mr=me*(-$t+kn+Jt-Xn-$e-_n+Hr),Ir=(-F+pe+me)*($t-kn+Xn),ia=(pe+me)*(-$t+kn),nt=F*$t,tn=(-F+Oe+ct)*($t-_t+$e),er=(-F+Oe)*(_t-$e),mn=(Oe+ct)*(-$t+_t),Yr=(F+Y+te-me-Ce-Oe-ct)*$e,Gi=ct*(-$t+_t+Jt-Xn-$e-_n+ar),Fi=(-te+ct+Ge)*(Xn+_n-ar),Ti=(te-Ge)*(Xn-ar),Oa=te*_n,ln=(ct+Ge)*(-_n+ar),Hn=(-te+me+Ce)*($e+_n-Hr),si=(te-Ce)*($e-Hr),Wi=(me+Ce)*(-_n+Hr),Lr=Y*Jt,Ii=Ce*ar,Xi=pe*_t,Ai=Oe*kn,qi=Ge*Hr,Zl=nt+Oa+Lr,Du=ti+Ir+ia+nt+Fi+Oa+ln,yl=nt+tn+mn+Yr+Oa+Hn+Wi,js=ua+Mr+Ir+nt+Oa+Hn+si,Ud=ua+Ir+ia+nt+Ii,Po=Oa+Hn+si+Wi+Xi,ru=nt+tn+er+Gi+Fi+Ti+Oa,Kl=Fi+Ti+Oa+ln+Ai,Hh=nt+tn+er+mn+qi;return W.set(0,0,Zl),W.set(0,1,Du),W.set(0,2,yl),W.set(1,0,js),W.set(1,1,Ud),W.set(1,2,Po),W.set(2,0,ru),W.set(2,1,Kl),W.set(2,2,Hh),W}mmulStrassen(H){H=ne.checkMatrix(H);let W=this.clone(),F=W.rows,Y=W.columns,te=H.rows,pe=H.columns;Y!==te&&console.warn(`Multiplying ${F} x ${Y} and ${te} x ${pe} matrix: dimensions do not match.`);function me(Ge,$t,kn){let _t=Ge.rows,Jt=Ge.columns;if(_t===$t&&Jt===kn)return Ge;{let Xn=Q.zeros($t,kn);return Xn=Xn.setSubMatrix(Ge,0,0),Xn}}let Ce=Math.max(F,te),Oe=Math.max(Y,pe);W=me(W,Ce,Oe),H=me(H,Ce,Oe);function ct(Ge,$t,kn,_t){if(kn<=512||_t<=512)return Ge.mmul($t);kn%2===1&&_t%2===1?(Ge=me(Ge,kn+1,_t+1),$t=me($t,kn+1,_t+1)):kn%2===1?(Ge=me(Ge,kn+1,_t),$t=me($t,kn+1,_t)):_t%2===1&&(Ge=me(Ge,kn,_t+1),$t=me($t,kn,_t+1));let Jt=parseInt(Ge.rows/2,10),Xn=parseInt(Ge.columns/2,10),$e=Ge.subMatrix(0,Jt-1,0,Xn-1),_n=$t.subMatrix(0,Jt-1,0,Xn-1),ar=Ge.subMatrix(0,Jt-1,Xn,Ge.columns-1),Hr=$t.subMatrix(0,Jt-1,Xn,$t.columns-1),ti=Ge.subMatrix(Jt,Ge.rows-1,0,Xn-1),ua=$t.subMatrix(Jt,$t.rows-1,0,Xn-1),Mr=Ge.subMatrix(Jt,Ge.rows-1,Xn,Ge.columns-1),Ir=$t.subMatrix(Jt,$t.rows-1,Xn,$t.columns-1),ia=ct(Q.add($e,Mr),Q.add(_n,Ir),Jt,Xn),nt=ct(Q.add(ti,Mr),_n,Jt,Xn),tn=ct($e,Q.sub(Hr,Ir),Jt,Xn),er=ct(Mr,Q.sub(ua,_n),Jt,Xn),mn=ct(Q.add($e,ar),Ir,Jt,Xn),Yr=ct(Q.sub(ti,$e),Q.add(_n,Hr),Jt,Xn),Gi=ct(Q.sub(ar,Mr),Q.add(ua,Ir),Jt,Xn),Fi=Q.add(ia,er);Fi.sub(mn),Fi.add(Gi);let Ti=Q.add(tn,mn),Oa=Q.add(nt,er),ln=Q.sub(ia,nt);ln.add(tn),ln.add(Yr);let Hn=Q.zeros(2*Fi.rows,2*Fi.columns);return Hn=Hn.setSubMatrix(Fi,0,0),Hn=Hn.setSubMatrix(Ti,Fi.rows,0),Hn=Hn.setSubMatrix(Oa,0,Fi.columns),Hn=Hn.setSubMatrix(ln,Fi.rows,Fi.columns),Hn.subMatrix(0,kn-1,0,_t-1)}return ct(W,H,Ce,Oe)}scaleRows(H={}){if(typeof H!="object")throw new TypeError("options must be an object");const{min:W=0,max:F=1}=H;if(!Number.isFinite(W))throw new TypeError("min must be a number");if(!Number.isFinite(F))throw new TypeError("max must be a number");if(W>=F)throw new RangeError("min must be smaller than max");let Y=new ne(this.rows,this.columns);for(let te=0;te<this.rows;te++){const pe=this.getRow(te);pe.length>0&&e(pe,{min:W,max:F,output:pe}),Y.setRow(te,pe)}return Y}scaleColumns(H={}){if(typeof H!="object")throw new TypeError("options must be an object");const{min:W=0,max:F=1}=H;if(!Number.isFinite(W))throw new TypeError("min must be a number");if(!Number.isFinite(F))throw new TypeError("max must be a number");if(W>=F)throw new RangeError("min must be smaller than max");let Y=new ne(this.rows,this.columns);for(let te=0;te<this.columns;te++){const pe=this.getColumn(te);pe.length&&e(pe,{min:W,max:F,output:pe}),Y.setColumn(te,pe)}return Y}flipRows(){const H=Math.ceil(this.columns/2);for(let W=0;W<this.rows;W++)for(let F=0;F<H;F++){let Y=this.get(W,F),te=this.get(W,this.columns-1-F);this.set(W,F,te),this.set(W,this.columns-1-F,Y)}return this}flipColumns(){const H=Math.ceil(this.rows/2);for(let W=0;W<this.columns;W++)for(let F=0;F<H;F++){let Y=this.get(F,W),te=this.get(this.rows-1-F,W);this.set(F,W,te),this.set(this.rows-1-F,W,Y)}return this}kroneckerProduct(H){H=ne.checkMatrix(H);let W=this.rows,F=this.columns,Y=H.rows,te=H.columns,pe=new ne(W*Y,F*te);for(let me=0;me<W;me++)for(let Ce=0;Ce<F;Ce++)for(let Oe=0;Oe<Y;Oe++)for(let ct=0;ct<te;ct++)pe.set(Y*me+Oe,te*Ce+ct,this.get(me,Ce)*H.get(Oe,ct));return pe}kroneckerSum(H){if(H=ne.checkMatrix(H),!this.isSquare()||!H.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let W=this.rows,F=H.rows,Y=this.kroneckerProduct(ne.eye(F,F)),te=ne.eye(W,W).kroneckerProduct(H);return Y.add(te)}transpose(){let H=new ne(this.columns,this.rows);for(let W=0;W<this.rows;W++)for(let F=0;F<this.columns;F++)H.set(F,W,this.get(W,F));return H}sortRows(H=ee){for(let W=0;W<this.rows;W++)this.setRow(W,this.getRow(W).sort(H));return this}sortColumns(H=ee){for(let W=0;W<this.columns;W++)this.setColumn(W,this.getColumn(W).sort(H));return this}subMatrix(H,W,F,Y){v(this,H,W,F,Y);let te=new ne(W-H+1,Y-F+1);for(let pe=H;pe<=W;pe++)for(let me=F;me<=Y;me++)te.set(pe-H,me-F,this.get(pe,me));return te}subMatrixRow(H,W,F){if(W===void 0&&(W=0),F===void 0&&(F=this.columns-1),W>F||W<0||W>=this.columns||F<0||F>=this.columns)throw new RangeError("Argument out of range");let Y=new ne(H.length,F-W+1);for(let te=0;te<H.length;te++)for(let pe=W;pe<=F;pe++){if(H[te]<0||H[te]>=this.rows)throw new RangeError(`Row index out of range: ${H[te]}`);Y.set(te,pe-W,this.get(H[te],pe))}return Y}subMatrixColumn(H,W,F){if(W===void 0&&(W=0),F===void 0&&(F=this.rows-1),W>F||W<0||W>=this.rows||F<0||F>=this.rows)throw new RangeError("Argument out of range");let Y=new ne(F-W+1,H.length);for(let te=0;te<H.length;te++)for(let pe=W;pe<=F;pe++){if(H[te]<0||H[te]>=this.columns)throw new RangeError(`Column index out of range: ${H[te]}`);Y.set(pe-W,te,this.get(pe,H[te]))}return Y}setSubMatrix(H,W,F){if(H=ne.checkMatrix(H),H.isEmpty())return this;let Y=W+H.rows-1,te=F+H.columns-1;v(this,W,Y,F,te);for(let pe=0;pe<H.rows;pe++)for(let me=0;me<H.columns;me++)this.set(W+pe,F+me,H.get(pe,me));return this}selection(H,W){p(this,H),g(this,W);let F=new ne(H.length,W.length);for(let Y=0;Y<H.length;Y++){let te=H[Y];for(let pe=0;pe<W.length;pe++){let me=W[pe];F.set(Y,pe,this.get(te,me))}}return F}trace(){let H=Math.min(this.rows,this.columns),W=0;for(let F=0;F<H;F++)W+=this.get(F,F);return W}clone(){return this.constructor.copy(this,new ne(this.rows,this.columns))}static copy(H,W){for(const[F,Y,te]of H.entries())W.set(F,Y,te);return W}sum(H){switch(H){case"row":return x(this);case"column":return T(this);case void 0:return S(this);default:throw new Error(`invalid option: ${H}`)}}product(H){switch(H){case"row":return w(this);case"column":return C(this);case void 0:return D(this);default:throw new Error(`invalid option: ${H}`)}}mean(H){const W=this.sum(H);switch(H){case"row":{for(let F=0;F<this.rows;F++)W[F]/=this.columns;return W}case"column":{for(let F=0;F<this.columns;F++)W[F]/=this.rows;return W}case void 0:return W/this.size;default:throw new Error(`invalid option: ${H}`)}}variance(H,W={}){if(typeof H=="object"&&(W=H,H=void 0),typeof W!="object")throw new TypeError("options must be an object");const{unbiased:F=!0,mean:Y=this.mean(H)}=W;if(typeof F!="boolean")throw new TypeError("unbiased must be a boolean");switch(H){case"row":{if(!t.isAnyArray(Y))throw new TypeError("mean must be an array");return L(this,F,Y)}case"column":{if(!t.isAnyArray(Y))throw new TypeError("mean must be an array");return B(this,F,Y)}case void 0:{if(typeof Y!="number")throw new TypeError("mean must be a number");return I(this,F,Y)}default:throw new Error(`invalid option: ${H}`)}}standardDeviation(H,W){typeof H=="object"&&(W=H,H=void 0);const F=this.variance(H,W);if(H===void 0)return Math.sqrt(F);for(let Y=0;Y<F.length;Y++)F[Y]=Math.sqrt(F[Y]);return F}center(H,W={}){if(typeof H=="object"&&(W=H,H=void 0),typeof W!="object")throw new TypeError("options must be an object");const{center:F=this.mean(H)}=W;switch(H){case"row":{if(!t.isAnyArray(F))throw new TypeError("center must be an array");return U(this,F),this}case"column":{if(!t.isAnyArray(F))throw new TypeError("center must be an array");return $(this,F),this}case void 0:{if(typeof F!="number")throw new TypeError("center must be a number");return X(this,F),this}default:throw new Error(`invalid option: ${H}`)}}scale(H,W={}){if(typeof H=="object"&&(W=H,H=void 0),typeof W!="object")throw new TypeError("options must be an object");let F=W.scale;switch(H){case"row":{if(F===void 0)F=N(this);else if(!t.isAnyArray(F))throw new TypeError("scale must be an array");return M(this,F),this}case"column":{if(F===void 0)F=k(this);else if(!t.isAnyArray(F))throw new TypeError("scale must be an array");return z(this,F),this}case void 0:{if(F===void 0)F=j(this);else if(typeof F!="number")throw new TypeError("scale must be a number");return V(this,F),this}default:throw new Error(`invalid option: ${H}`)}}toString(H){return a(this,H)}[Symbol.iterator](){return this.entries()}*entries(){for(let H=0;H<this.rows;H++)for(let W=0;W<this.columns;W++)yield[H,W,this.get(H,W)]}*values(){for(let H=0;H<this.rows;H++)for(let W=0;W<this.columns;W++)yield this.get(H,W)}}Q.prototype.klass="Matrix",typeof Symbol<"u"&&(Q.prototype[Symbol.for("nodejs.util.inspect.custom")]=i);function ee(ce,H){return ce-H}function re(ce){return ce.every(H=>typeof H=="number")}Q.random=Q.rand,Q.randomInt=Q.randInt,Q.diagonal=Q.diag,Q.prototype.diagonal=Q.prototype.diag,Q.identity=Q.eye,Q.prototype.negate=Q.prototype.neg,Q.prototype.tensorProduct=Q.prototype.kroneckerProduct;class ne extends Q{data;#e(H,W){if(this.data=[],Number.isInteger(W)&&W>=0)for(let F=0;F<H;F++)this.data.push(new Float64Array(W));else throw new TypeError("nColumns must be a positive integer");this.rows=H,this.columns=W}constructor(H,W){if(super(),ne.isMatrix(H))this.#e(H.rows,H.columns),ne.copy(H,this);else if(Number.isInteger(H)&&H>=0)this.#e(H,W);else if(t.isAnyArray(H)){const F=H;if(H=F.length,W=H?F[0].length:0,typeof W!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let Y=0;Y<H;Y++){if(F[Y].length!==W)throw new RangeError("Inconsistent array dimensions");if(!re(F[Y]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(F[Y]))}this.rows=H,this.columns=W}else throw new TypeError("First argument must be a positive number or an array")}set(H,W,F){return this.data[H][W]=F,this}get(H,W){return this.data[H][W]}removeRow(H){return u(this,H),this.data.splice(H,1),this.rows-=1,this}addRow(H,W){return W===void 0&&(W=H,H=this.rows),u(this,H,!0),W=Float64Array.from(h(this,W)),this.data.splice(H,0,W),this.rows+=1,this}removeColumn(H){f(this,H);for(let W=0;W<this.rows;W++){const F=new Float64Array(this.columns-1);for(let Y=0;Y<H;Y++)F[Y]=this.data[W][Y];for(let Y=H+1;Y<this.columns;Y++)F[Y-1]=this.data[W][Y];this.data[W]=F}return this.columns-=1,this}addColumn(H,W){typeof W>"u"&&(W=H,H=this.columns),f(this,H,!0),W=d(this,W);for(let F=0;F<this.rows;F++){const Y=new Float64Array(this.columns+1);let te=0;for(;te<H;te++)Y[te]=this.data[F][te];for(Y[te++]=W[F];te<this.columns+1;te++)Y[te]=this.data[F][te-1];this.data[F]=Y}return this.columns+=1,this}}c(Q,ne);class le extends Q{#e;get size(){return this.#e.size}get rows(){return this.#e.rows}get columns(){return this.#e.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(H){return ne.isMatrix(H)&&H.klassType==="SymmetricMatrix"}static zeros(H){return new this(H)}static ones(H){return new this(H).fill(1)}constructor(H){if(super(),ne.isMatrix(H)){if(!H.isSymmetric())throw new TypeError("not symmetric data");this.#e=ne.copy(H,new ne(H.rows,H.rows))}else if(Number.isInteger(H)&&H>=0)this.#e=new ne(H,H);else if(this.#e=new ne(H),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){const H=new le(this.diagonalSize);for(const[W,F,Y]of this.upperRightEntries())H.set(W,F,Y);return H}toMatrix(){return new ne(this)}get(H,W){return this.#e.get(H,W)}set(H,W,F){return this.#e.set(H,W,F),this.#e.set(W,H,F),this}removeCross(H){return this.#e.removeRow(H),this.#e.removeColumn(H),this}addCross(H,W){W===void 0&&(W=H,H=this.diagonalSize);const F=W.slice();return F.splice(H,1),this.#e.addRow(H,F),this.#e.addColumn(H,W),this}applyMask(H){if(H.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");const W=[];for(const[F,Y]of H.entries())Y||W.push(F);W.reverse();for(const F of W)this.removeCross(F);return this}toCompact(){const{diagonalSize:H}=this,W=new Array(H*(H+1)/2);for(let F=0,Y=0,te=0;te<W.length;te++)W[te]=this.get(Y,F),++F>=H&&(F=++Y);return W}static fromCompact(H){const W=H.length,F=(Math.sqrt(8*W+1)-1)/2;if(!Number.isInteger(F))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(H)}`);const Y=new le(F);for(let te=0,pe=0,me=0;me<W;me++)Y.set(te,pe,H[me]),++te>=F&&(te=++pe);return Y}*upperRightEntries(){for(let H=0,W=0;H<this.diagonalSize;void 0){const F=this.get(H,W);yield[H,W,F],++W>=this.diagonalSize&&(W=++H)}}*upperRightValues(){for(let H=0,W=0;H<this.diagonalSize;void 0)yield this.get(H,W),++W>=this.diagonalSize&&(W=++H)}}le.prototype.klassType="SymmetricMatrix";class ue extends le{static isDistanceMatrix(H){return le.isSymmetricMatrix(H)&&H.klassSubType==="DistanceMatrix"}constructor(H){if(super(H),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(H,W,F){return H===W&&(F=0),super.set(H,W,F)}addCross(H,W){return W===void 0&&(W=H,H=this.diagonalSize),W=W.slice(),W[H]=0,super.addCross(H,W)}toSymmetricMatrix(){return new le(this)}clone(){const H=new ue(this.diagonalSize);for(const[W,F,Y]of this.upperRightEntries())W!==F&&H.set(W,F,Y);return H}toCompact(){const{diagonalSize:H}=this,W=(H-1)*H/2,F=new Array(W);for(let Y=1,te=0,pe=0;pe<F.length;pe++)F[pe]=this.get(te,Y),++Y>=H&&(Y=++te+1);return F}static fromCompact(H){const W=H.length;if(W===0)return new this(0);const F=(Math.sqrt(8*W+1)+1)/2;if(!Number.isInteger(F))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(H)}`);const Y=new this(F);for(let te=1,pe=0,me=0;me<W;me++)Y.set(te,pe,H[me]),++te>=F&&(te=++pe+1);return Y}}ue.prototype.klassSubType="DistanceMatrix";class ve extends Q{constructor(H,W,F){super(),this.matrix=H,this.rows=W,this.columns=F}}class Se extends ve{constructor(H,W){f(H,W),super(H,H.rows,1),this.column=W}set(H,W,F){return this.matrix.set(H,this.column,F),this}get(H){return this.matrix.get(H,this.column)}}class Re extends ve{constructor(H,W){g(H,W),super(H,H.rows,W.length),this.columnIndices=W}set(H,W,F){return this.matrix.set(H,this.columnIndices[W],F),this}get(H,W){return this.matrix.get(H,this.columnIndices[W])}}class Xe extends ve{constructor(H){super(H,H.rows,H.columns)}set(H,W,F){return this.matrix.set(H,this.columns-W-1,F),this}get(H,W){return this.matrix.get(H,this.columns-W-1)}}class Le extends ve{constructor(H){super(H,H.rows,H.columns)}set(H,W,F){return this.matrix.set(this.rows-H-1,W,F),this}get(H,W){return this.matrix.get(this.rows-H-1,W)}}class Lt extends ve{constructor(H,W){u(H,W),super(H,1,H.columns),this.row=W}set(H,W,F){return this.matrix.set(this.row,W,F),this}get(H,W){return this.matrix.get(this.row,W)}}class xt extends ve{constructor(H,W){p(H,W),super(H,W.length,H.columns),this.rowIndices=W}set(H,W,F){return this.matrix.set(this.rowIndices[H],W,F),this}get(H,W){return this.matrix.get(this.rowIndices[H],W)}}class dt extends ve{constructor(H,W,F){p(H,W),g(H,F),super(H,W.length,F.length),this.rowIndices=W,this.columnIndices=F}set(H,W,F){return this.matrix.set(this.rowIndices[H],this.columnIndices[W],F),this}get(H,W){return this.matrix.get(this.rowIndices[H],this.columnIndices[W])}}class Bt extends ve{constructor(H,W,F,Y,te){v(H,W,F,Y,te),super(H,F-W+1,te-Y+1),this.startRow=W,this.startColumn=Y}set(H,W,F){return this.matrix.set(this.startRow+H,this.startColumn+W,F),this}get(H,W){return this.matrix.get(this.startRow+H,this.startColumn+W)}}class At extends ve{constructor(H){super(H,H.columns,H.rows)}set(H,W,F){return this.matrix.set(W,H,F),this}get(H,W){return this.matrix.get(W,H)}}class zt extends Q{constructor(H,W={}){const{rows:F=1}=W;if(H.length%F!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=F,this.columns=H.length/F,this.data=H}set(H,W,F){let Y=this._calculateIndex(H,W);return this.data[Y]=F,this}get(H,W){let F=this._calculateIndex(H,W);return this.data[F]}_calculateIndex(H,W){return H*this.columns+W}}class rn extends Q{constructor(H){super(),this.data=H,this.rows=H.length,this.columns=H[0].length}set(H,W,F){return this.data[H][W]=F,this}get(H,W){return this.data[H][W]}}function Wn(ce,H){if(t.isAnyArray(ce))return ce[0]&&t.isAnyArray(ce[0])?new rn(ce):new zt(ce,H);throw new Error("the argument is not an array")}class Sn{constructor(H){H=rn.checkMatrix(H);let W=H.clone(),F=W.rows,Y=W.columns,te=new Float64Array(F),pe=1,me,Ce,Oe,ct,Ge,$t,kn,_t,Jt;for(me=0;me<F;me++)te[me]=me;for(_t=new Float64Array(F),Ce=0;Ce<Y;Ce++){for(me=0;me<F;me++)_t[me]=W.get(me,Ce);for(me=0;me<F;me++){for(Jt=Math.min(me,Ce),Ge=0,Oe=0;Oe<Jt;Oe++)Ge+=W.get(me,Oe)*_t[Oe];_t[me]-=Ge,W.set(me,Ce,_t[me])}for(ct=Ce,me=Ce+1;me<F;me++)Math.abs(_t[me])>Math.abs(_t[ct])&&(ct=me);if(ct!==Ce){for(Oe=0;Oe<Y;Oe++)$t=W.get(ct,Oe),W.set(ct,Oe,W.get(Ce,Oe)),W.set(Ce,Oe,$t);kn=te[ct],te[ct]=te[Ce],te[Ce]=kn,pe=-pe}if(Ce<F&&W.get(Ce,Ce)!==0)for(me=Ce+1;me<F;me++)W.set(me,Ce,W.get(me,Ce)/W.get(Ce,Ce))}this.LU=W,this.pivotVector=te,this.pivotSign=pe}isSingular(){let H=this.LU,W=H.columns;for(let F=0;F<W;F++)if(H.get(F,F)===0)return!0;return!1}solve(H){H=ne.checkMatrix(H);let W=this.LU;if(W.rows!==H.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let Y=H.columns,te=H.subMatrixRow(this.pivotVector,0,Y-1),pe=W.columns,me,Ce,Oe;for(Oe=0;Oe<pe;Oe++)for(me=Oe+1;me<pe;me++)for(Ce=0;Ce<Y;Ce++)te.set(me,Ce,te.get(me,Ce)-te.get(Oe,Ce)*W.get(me,Oe));for(Oe=pe-1;Oe>=0;Oe--){for(Ce=0;Ce<Y;Ce++)te.set(Oe,Ce,te.get(Oe,Ce)/W.get(Oe,Oe));for(me=0;me<Oe;me++)for(Ce=0;Ce<Y;Ce++)te.set(me,Ce,te.get(me,Ce)-te.get(Oe,Ce)*W.get(me,Oe))}return te}get determinant(){let H=this.LU;if(!H.isSquare())throw new Error("Matrix must be square");let W=this.pivotSign,F=H.columns;for(let Y=0;Y<F;Y++)W*=H.get(Y,Y);return W}get lowerTriangularMatrix(){let H=this.LU,W=H.rows,F=H.columns,Y=new ne(W,F);for(let te=0;te<W;te++)for(let pe=0;pe<F;pe++)te>pe?Y.set(te,pe,H.get(te,pe)):te===pe?Y.set(te,pe,1):Y.set(te,pe,0);return Y}get upperTriangularMatrix(){let H=this.LU,W=H.rows,F=H.columns,Y=new ne(W,F);for(let te=0;te<W;te++)for(let pe=0;pe<F;pe++)te<=pe?Y.set(te,pe,H.get(te,pe)):Y.set(te,pe,0);return Y}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function In(ce,H){let W=0;return Math.abs(ce)>Math.abs(H)?(W=H/ce,Math.abs(ce)*Math.sqrt(1+W*W)):H!==0?(W=ce/H,Math.abs(H)*Math.sqrt(1+W*W)):0}class de{constructor(H){H=rn.checkMatrix(H);let W=H.clone(),F=H.rows,Y=H.columns,te=new Float64Array(Y),pe,me,Ce,Oe;for(Ce=0;Ce<Y;Ce++){let ct=0;for(pe=Ce;pe<F;pe++)ct=In(ct,W.get(pe,Ce));if(ct!==0){for(W.get(Ce,Ce)<0&&(ct=-ct),pe=Ce;pe<F;pe++)W.set(pe,Ce,W.get(pe,Ce)/ct);for(W.set(Ce,Ce,W.get(Ce,Ce)+1),me=Ce+1;me<Y;me++){for(Oe=0,pe=Ce;pe<F;pe++)Oe+=W.get(pe,Ce)*W.get(pe,me);for(Oe=-Oe/W.get(Ce,Ce),pe=Ce;pe<F;pe++)W.set(pe,me,W.get(pe,me)+Oe*W.get(pe,Ce))}}te[Ce]=-ct}this.QR=W,this.Rdiag=te}solve(H){H=ne.checkMatrix(H);let W=this.QR,F=W.rows;if(H.rows!==F)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let Y=H.columns,te=H.clone(),pe=W.columns,me,Ce,Oe,ct;for(Oe=0;Oe<pe;Oe++)for(Ce=0;Ce<Y;Ce++){for(ct=0,me=Oe;me<F;me++)ct+=W.get(me,Oe)*te.get(me,Ce);for(ct=-ct/W.get(Oe,Oe),me=Oe;me<F;me++)te.set(me,Ce,te.get(me,Ce)+ct*W.get(me,Oe))}for(Oe=pe-1;Oe>=0;Oe--){for(Ce=0;Ce<Y;Ce++)te.set(Oe,Ce,te.get(Oe,Ce)/this.Rdiag[Oe]);for(me=0;me<Oe;me++)for(Ce=0;Ce<Y;Ce++)te.set(me,Ce,te.get(me,Ce)-te.get(Oe,Ce)*W.get(me,Oe))}return te.subMatrix(0,pe-1,0,Y-1)}isFullRank(){let H=this.QR.columns;for(let W=0;W<H;W++)if(this.Rdiag[W]===0)return!1;return!0}get upperTriangularMatrix(){let H=this.QR,W=H.columns,F=new ne(W,W),Y,te;for(Y=0;Y<W;Y++)for(te=0;te<W;te++)Y<te?F.set(Y,te,H.get(Y,te)):Y===te?F.set(Y,te,this.Rdiag[Y]):F.set(Y,te,0);return F}get orthogonalMatrix(){let H=this.QR,W=H.rows,F=H.columns,Y=new ne(W,F),te,pe,me,Ce;for(me=F-1;me>=0;me--){for(te=0;te<W;te++)Y.set(te,me,0);for(Y.set(me,me,1),pe=me;pe<F;pe++)if(H.get(me,me)!==0){for(Ce=0,te=me;te<W;te++)Ce+=H.get(te,me)*Y.get(te,pe);for(Ce=-Ce/H.get(me,me),te=me;te<W;te++)Y.set(te,pe,Y.get(te,pe)+Ce*H.get(te,me))}}return Y}}class sr{constructor(H,W={}){if(H=rn.checkMatrix(H),H.isEmpty())throw new Error("Matrix must be non-empty");let F=H.rows,Y=H.columns;const{computeLeftSingularVectors:te=!0,computeRightSingularVectors:pe=!0,autoTranspose:me=!1}=W;let Ce=!!te,Oe=!!pe,ct=!1,Ge;if(F<Y)if(!me)Ge=H.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Ge=H.transpose(),F=Ge.rows,Y=Ge.columns,ct=!0;let nt=Ce;Ce=Oe,Oe=nt}else Ge=H.clone();let $t=Math.min(F,Y),kn=Math.min(F+1,Y),_t=new Float64Array(kn),Jt=new ne(F,$t),Xn=new ne(Y,Y),$e=new Float64Array(Y),_n=new Float64Array(F),ar=new Float64Array(kn);for(let nt=0;nt<kn;nt++)ar[nt]=nt;let Hr=Math.min(F-1,Y),ti=Math.max(0,Math.min(Y-2,F)),ua=Math.max(Hr,ti);for(let nt=0;nt<ua;nt++){if(nt<Hr){_t[nt]=0;for(let tn=nt;tn<F;tn++)_t[nt]=In(_t[nt],Ge.get(tn,nt));if(_t[nt]!==0){Ge.get(nt,nt)<0&&(_t[nt]=-_t[nt]);for(let tn=nt;tn<F;tn++)Ge.set(tn,nt,Ge.get(tn,nt)/_t[nt]);Ge.set(nt,nt,Ge.get(nt,nt)+1)}_t[nt]=-_t[nt]}for(let tn=nt+1;tn<Y;tn++){if(nt<Hr&&_t[nt]!==0){let er=0;for(let mn=nt;mn<F;mn++)er+=Ge.get(mn,nt)*Ge.get(mn,tn);er=-er/Ge.get(nt,nt);for(let mn=nt;mn<F;mn++)Ge.set(mn,tn,Ge.get(mn,tn)+er*Ge.get(mn,nt))}$e[tn]=Ge.get(nt,tn)}if(Ce&&nt<Hr)for(let tn=nt;tn<F;tn++)Jt.set(tn,nt,Ge.get(tn,nt));if(nt<ti){$e[nt]=0;for(let tn=nt+1;tn<Y;tn++)$e[nt]=In($e[nt],$e[tn]);if($e[nt]!==0){$e[nt+1]<0&&($e[nt]=0-$e[nt]);for(let tn=nt+1;tn<Y;tn++)$e[tn]/=$e[nt];$e[nt+1]+=1}if($e[nt]=-$e[nt],nt+1<F&&$e[nt]!==0){for(let tn=nt+1;tn<F;tn++)_n[tn]=0;for(let tn=nt+1;tn<F;tn++)for(let er=nt+1;er<Y;er++)_n[tn]+=$e[er]*Ge.get(tn,er);for(let tn=nt+1;tn<Y;tn++){let er=-$e[tn]/$e[nt+1];for(let mn=nt+1;mn<F;mn++)Ge.set(mn,tn,Ge.get(mn,tn)+er*_n[mn])}}if(Oe)for(let tn=nt+1;tn<Y;tn++)Xn.set(tn,nt,$e[tn])}}let Mr=Math.min(Y,F+1);if(Hr<Y&&(_t[Hr]=Ge.get(Hr,Hr)),F<Mr&&(_t[Mr-1]=0),ti+1<Mr&&($e[ti]=Ge.get(ti,Mr-1)),$e[Mr-1]=0,Ce){for(let nt=Hr;nt<$t;nt++){for(let tn=0;tn<F;tn++)Jt.set(tn,nt,0);Jt.set(nt,nt,1)}for(let nt=Hr-1;nt>=0;nt--)if(_t[nt]!==0){for(let tn=nt+1;tn<$t;tn++){let er=0;for(let mn=nt;mn<F;mn++)er+=Jt.get(mn,nt)*Jt.get(mn,tn);er=-er/Jt.get(nt,nt);for(let mn=nt;mn<F;mn++)Jt.set(mn,tn,Jt.get(mn,tn)+er*Jt.get(mn,nt))}for(let tn=nt;tn<F;tn++)Jt.set(tn,nt,-Jt.get(tn,nt));Jt.set(nt,nt,1+Jt.get(nt,nt));for(let tn=0;tn<nt-1;tn++)Jt.set(tn,nt,0)}else{for(let tn=0;tn<F;tn++)Jt.set(tn,nt,0);Jt.set(nt,nt,1)}}if(Oe)for(let nt=Y-1;nt>=0;nt--){if(nt<ti&&$e[nt]!==0)for(let tn=nt+1;tn<Y;tn++){let er=0;for(let mn=nt+1;mn<Y;mn++)er+=Xn.get(mn,nt)*Xn.get(mn,tn);er=-er/Xn.get(nt+1,nt);for(let mn=nt+1;mn<Y;mn++)Xn.set(mn,tn,Xn.get(mn,tn)+er*Xn.get(mn,nt))}for(let tn=0;tn<Y;tn++)Xn.set(tn,nt,0);Xn.set(nt,nt,1)}let Ir=Mr-1,ia=Number.EPSILON;for(;Mr>0;){let nt,tn;for(nt=Mr-2;nt>=-1&&nt!==-1;nt--){const er=Number.MIN_VALUE+ia*Math.abs(_t[nt]+Math.abs(_t[nt+1]));if(Math.abs($e[nt])<=er||Number.isNaN($e[nt])){$e[nt]=0;break}}if(nt===Mr-2)tn=4;else{let er;for(er=Mr-1;er>=nt&&er!==nt;er--){let mn=(er!==Mr?Math.abs($e[er]):0)+(er!==nt+1?Math.abs($e[er-1]):0);if(Math.abs(_t[er])<=ia*mn){_t[er]=0;break}}er===nt?tn=3:er===Mr-1?tn=1:(tn=2,nt=er)}switch(nt++,tn){case 1:{let er=$e[Mr-2];$e[Mr-2]=0;for(let mn=Mr-2;mn>=nt;mn--){let Yr=In(_t[mn],er),Gi=_t[mn]/Yr,Fi=er/Yr;if(_t[mn]=Yr,mn!==nt&&(er=-Fi*$e[mn-1],$e[mn-1]=Gi*$e[mn-1]),Oe)for(let Ti=0;Ti<Y;Ti++)Yr=Gi*Xn.get(Ti,mn)+Fi*Xn.get(Ti,Mr-1),Xn.set(Ti,Mr-1,-Fi*Xn.get(Ti,mn)+Gi*Xn.get(Ti,Mr-1)),Xn.set(Ti,mn,Yr)}break}case 2:{let er=$e[nt-1];$e[nt-1]=0;for(let mn=nt;mn<Mr;mn++){let Yr=In(_t[mn],er),Gi=_t[mn]/Yr,Fi=er/Yr;if(_t[mn]=Yr,er=-Fi*$e[mn],$e[mn]=Gi*$e[mn],Ce)for(let Ti=0;Ti<F;Ti++)Yr=Gi*Jt.get(Ti,mn)+Fi*Jt.get(Ti,nt-1),Jt.set(Ti,nt-1,-Fi*Jt.get(Ti,mn)+Gi*Jt.get(Ti,nt-1)),Jt.set(Ti,mn,Yr)}break}case 3:{const er=Math.max(Math.abs(_t[Mr-1]),Math.abs(_t[Mr-2]),Math.abs($e[Mr-2]),Math.abs(_t[nt]),Math.abs($e[nt])),mn=_t[Mr-1]/er,Yr=_t[Mr-2]/er,Gi=$e[Mr-2]/er,Fi=_t[nt]/er,Ti=$e[nt]/er,Oa=((Yr+mn)*(Yr-mn)+Gi*Gi)/2,ln=mn*Gi*(mn*Gi);let Hn=0;(Oa!==0||ln!==0)&&(Oa<0?Hn=0-Math.sqrt(Oa*Oa+ln):Hn=Math.sqrt(Oa*Oa+ln),Hn=ln/(Oa+Hn));let si=(Fi+mn)*(Fi-mn)+Hn,Wi=Fi*Ti;for(let Lr=nt;Lr<Mr-1;Lr++){let Ii=In(si,Wi);Ii===0&&(Ii=Number.MIN_VALUE);let Xi=si/Ii,Ai=Wi/Ii;if(Lr!==nt&&($e[Lr-1]=Ii),si=Xi*_t[Lr]+Ai*$e[Lr],$e[Lr]=Xi*$e[Lr]-Ai*_t[Lr],Wi=Ai*_t[Lr+1],_t[Lr+1]=Xi*_t[Lr+1],Oe)for(let qi=0;qi<Y;qi++)Ii=Xi*Xn.get(qi,Lr)+Ai*Xn.get(qi,Lr+1),Xn.set(qi,Lr+1,-Ai*Xn.get(qi,Lr)+Xi*Xn.get(qi,Lr+1)),Xn.set(qi,Lr,Ii);if(Ii=In(si,Wi),Ii===0&&(Ii=Number.MIN_VALUE),Xi=si/Ii,Ai=Wi/Ii,_t[Lr]=Ii,si=Xi*$e[Lr]+Ai*_t[Lr+1],_t[Lr+1]=-Ai*$e[Lr]+Xi*_t[Lr+1],Wi=Ai*$e[Lr+1],$e[Lr+1]=Xi*$e[Lr+1],Ce&&Lr<F-1)for(let qi=0;qi<F;qi++)Ii=Xi*Jt.get(qi,Lr)+Ai*Jt.get(qi,Lr+1),Jt.set(qi,Lr+1,-Ai*Jt.get(qi,Lr)+Xi*Jt.get(qi,Lr+1)),Jt.set(qi,Lr,Ii)}$e[Mr-2]=si;break}case 4:{if(_t[nt]<=0&&(_t[nt]=_t[nt]<0?-_t[nt]:0,Oe))for(let er=0;er<=Ir;er++)Xn.set(er,nt,-Xn.get(er,nt));for(;nt<Ir&&!(_t[nt]>=_t[nt+1]);){let er=_t[nt];if(_t[nt]=_t[nt+1],_t[nt+1]=er,Oe&&nt<Y-1)for(let mn=0;mn<Y;mn++)er=Xn.get(mn,nt+1),Xn.set(mn,nt+1,Xn.get(mn,nt)),Xn.set(mn,nt,er);if(Ce&&nt<F-1)for(let mn=0;mn<F;mn++)er=Jt.get(mn,nt+1),Jt.set(mn,nt+1,Jt.get(mn,nt)),Jt.set(mn,nt,er);nt++}Mr--;break}}}if(ct){let nt=Xn;Xn=Jt,Jt=nt}this.m=F,this.n=Y,this.s=_t,this.U=Jt,this.V=Xn}solve(H){let W=H,F=this.threshold,Y=this.s.length,te=ne.zeros(Y,Y);for(let $t=0;$t<Y;$t++)Math.abs(this.s[$t])<=F?te.set($t,$t,0):te.set($t,$t,1/this.s[$t]);let pe=this.U,me=this.rightSingularVectors,Ce=me.mmul(te),Oe=me.rows,ct=pe.rows,Ge=ne.zeros(Oe,ct);for(let $t=0;$t<Oe;$t++)for(let kn=0;kn<ct;kn++){let _t=0;for(let Jt=0;Jt<Y;Jt++)_t+=Ce.get($t,Jt)*pe.get(kn,Jt);Ge.set($t,kn,_t)}return Ge.mmul(W)}solveForDiagonal(H){return this.solve(ne.diag(H))}inverse(){let H=this.V,W=this.threshold,F=H.rows,Y=H.columns,te=new ne(F,this.s.length);for(let ct=0;ct<F;ct++)for(let Ge=0;Ge<Y;Ge++)Math.abs(this.s[Ge])>W&&te.set(ct,Ge,H.get(ct,Ge)/this.s[Ge]);let pe=this.U,me=pe.rows,Ce=pe.columns,Oe=new ne(F,me);for(let ct=0;ct<F;ct++)for(let Ge=0;Ge<me;Ge++){let $t=0;for(let kn=0;kn<Ce;kn++)$t+=te.get(ct,kn)*pe.get(Ge,kn);Oe.set(ct,Ge,$t)}return Oe}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let H=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,W=0,F=this.s;for(let Y=0,te=F.length;Y<te;Y++)F[Y]>H&&W++;return W}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return ne.diag(this.s)}}function zr(ce,H=!1){return ce=rn.checkMatrix(ce),H?new sr(ce).inverse():st(ce,ne.eye(ce.rows))}function st(ce,H,W=!1){return ce=rn.checkMatrix(ce),H=rn.checkMatrix(H),W?new sr(ce).solve(H):ce.isSquare()?new Sn(ce).solve(H):new de(ce).solve(H)}function Ft(ce){if(ce=ne.checkMatrix(ce),ce.isSquare()){if(ce.columns===0)return 1;let H,W,F,Y;if(ce.columns===2)return H=ce.get(0,0),W=ce.get(0,1),F=ce.get(1,0),Y=ce.get(1,1),H*Y-W*F;if(ce.columns===3){let te,pe,me;return te=new dt(ce,[1,2],[1,2]),pe=new dt(ce,[1,2],[0,2]),me=new dt(ce,[1,2],[0,1]),H=ce.get(0,0),W=ce.get(0,1),F=ce.get(0,2),H*Ft(te)-W*Ft(pe)+F*Ft(me)}else return new Sn(ce).determinant}else throw Error("determinant can only be calculated for a square matrix")}function An(ce,H){let W=[];for(let F=0;F<ce;F++)F!==H&&W.push(F);return W}function wn(ce,H,W,F=1e-9,Y=1e-9){if(ce>Y)return new Array(H.rows+1).fill(0);{let te=H.addRow(W,[0]);for(let pe=0;pe<te.rows;pe++)Math.abs(te.get(pe,0))<F&&te.set(pe,0,0);return te.to1DArray()}}function $n(ce,H={}){const{thresholdValue:W=1e-9,thresholdError:F=1e-9}=H;ce=ne.checkMatrix(ce);let Y=ce.rows,te=new ne(Y,Y);for(let pe=0;pe<Y;pe++){let me=ne.columnVector(ce.getRow(pe)),Ce=ce.subMatrixRow(An(Y,pe)).transpose(),ct=new sr(Ce).solve(me),Ge=ne.sub(me,Ce.mmul(ct)).abs().max();te.setRow(pe,wn(Ge,ct,pe,W,F))}return te}function Vr(ce,H=Number.EPSILON){if(ce=ne.checkMatrix(ce),ce.isEmpty())return ce.transpose();let W=new sr(ce,{autoTranspose:!0}),F=W.leftSingularVectors,Y=W.rightSingularVectors,te=W.diagonal;for(let pe=0;pe<te.length;pe++)Math.abs(te[pe])>H?te[pe]=1/te[pe]:te[pe]=0;return Y.mmul(ne.diag(te).mmul(F.transpose()))}function Tr(ce,H=ce,W={}){ce=new ne(ce);let F=!1;if(typeof H=="object"&&!ne.isMatrix(H)&&!t.isAnyArray(H)?(W=H,H=ce,F=!0):H=new ne(H),ce.rows!==H.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:Y=!0}=W;Y&&(ce=ce.center("column"),F||(H=H.center("column")));const te=ce.transpose().mmul(H);for(let pe=0;pe<te.rows;pe++)for(let me=0;me<te.columns;me++)te.set(pe,me,te.get(pe,me)*(1/(ce.rows-1)));return te}function Rr(ce,H=ce,W={}){ce=new ne(ce);let F=!1;if(typeof H=="object"&&!ne.isMatrix(H)&&!t.isAnyArray(H)?(W=H,H=ce,F=!0):H=new ne(H),ce.rows!==H.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:Y=!0,scale:te=!0}=W;Y&&(ce.center("column"),F||H.center("column")),te&&(ce.scale("column"),F||H.scale("column"));const pe=ce.standardDeviation("column",{unbiased:!0}),me=F?pe:H.standardDeviation("column",{unbiased:!0}),Ce=ce.transpose().mmul(H);for(let Oe=0;Oe<Ce.rows;Oe++)for(let ct=0;ct<Ce.columns;ct++)Ce.set(Oe,ct,Ce.get(Oe,ct)*(1/(pe[Oe]*me[ct]))*(1/(ce.rows-1)));return Ce}class ei{constructor(H,W={}){const{assumeSymmetric:F=!1}=W;if(H=rn.checkMatrix(H),!H.isSquare())throw new Error("Matrix is not a square matrix");if(H.isEmpty())throw new Error("Matrix must be non-empty");let Y=H.columns,te=new ne(Y,Y),pe=new Float64Array(Y),me=new Float64Array(Y),Ce=H,Oe,ct,Ge=!1;if(F?Ge=!0:Ge=H.isSymmetric(),Ge){for(Oe=0;Oe<Y;Oe++)for(ct=0;ct<Y;ct++)te.set(Oe,ct,Ce.get(Oe,ct));va(Y,me,pe,te),pi(Y,me,pe,te)}else{let $t=new ne(Y,Y),kn=new Float64Array(Y);for(ct=0;ct<Y;ct++)for(Oe=0;Oe<Y;Oe++)$t.set(Oe,ct,Ce.get(Oe,ct));qo(Y,$t,kn,te),ft(Y,me,pe,te,$t)}this.n=Y,this.e=me,this.d=pe,this.V=te}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let H=this.n,W=this.e,F=this.d,Y=new ne(H,H),te,pe;for(te=0;te<H;te++){for(pe=0;pe<H;pe++)Y.set(te,pe,0);Y.set(te,te,F[te]),W[te]>0?Y.set(te,te+1,W[te]):W[te]<0&&Y.set(te,te-1,W[te])}return Y}}function va(ce,H,W,F){let Y,te,pe,me,Ce,Oe,ct,Ge;for(Ce=0;Ce<ce;Ce++)W[Ce]=F.get(ce-1,Ce);for(me=ce-1;me>0;me--){for(Ge=0,pe=0,Oe=0;Oe<me;Oe++)Ge=Ge+Math.abs(W[Oe]);if(Ge===0)for(H[me]=W[me-1],Ce=0;Ce<me;Ce++)W[Ce]=F.get(me-1,Ce),F.set(me,Ce,0),F.set(Ce,me,0);else{for(Oe=0;Oe<me;Oe++)W[Oe]/=Ge,pe+=W[Oe]*W[Oe];for(Y=W[me-1],te=Math.sqrt(pe),Y>0&&(te=-te),H[me]=Ge*te,pe=pe-Y*te,W[me-1]=Y-te,Ce=0;Ce<me;Ce++)H[Ce]=0;for(Ce=0;Ce<me;Ce++){for(Y=W[Ce],F.set(Ce,me,Y),te=H[Ce]+F.get(Ce,Ce)*Y,Oe=Ce+1;Oe<=me-1;Oe++)te+=F.get(Oe,Ce)*W[Oe],H[Oe]+=F.get(Oe,Ce)*Y;H[Ce]=te}for(Y=0,Ce=0;Ce<me;Ce++)H[Ce]/=pe,Y+=H[Ce]*W[Ce];for(ct=Y/(pe+pe),Ce=0;Ce<me;Ce++)H[Ce]-=ct*W[Ce];for(Ce=0;Ce<me;Ce++){for(Y=W[Ce],te=H[Ce],Oe=Ce;Oe<=me-1;Oe++)F.set(Oe,Ce,F.get(Oe,Ce)-(Y*H[Oe]+te*W[Oe]));W[Ce]=F.get(me-1,Ce),F.set(me,Ce,0)}}W[me]=pe}for(me=0;me<ce-1;me++){if(F.set(ce-1,me,F.get(me,me)),F.set(me,me,1),pe=W[me+1],pe!==0){for(Oe=0;Oe<=me;Oe++)W[Oe]=F.get(Oe,me+1)/pe;for(Ce=0;Ce<=me;Ce++){for(te=0,Oe=0;Oe<=me;Oe++)te+=F.get(Oe,me+1)*F.get(Oe,Ce);for(Oe=0;Oe<=me;Oe++)F.set(Oe,Ce,F.get(Oe,Ce)-te*W[Oe])}}for(Oe=0;Oe<=me;Oe++)F.set(Oe,me+1,0)}for(Ce=0;Ce<ce;Ce++)W[Ce]=F.get(ce-1,Ce),F.set(ce-1,Ce,0);F.set(ce-1,ce-1,1),H[0]=0}function pi(ce,H,W,F){let Y,te,pe,me,Ce,Oe,ct,Ge,$t,kn,_t,Jt,Xn,$e,_n,ar;for(pe=1;pe<ce;pe++)H[pe-1]=H[pe];H[ce-1]=0;let Hr=0,ti=0,ua=Number.EPSILON;for(Oe=0;Oe<ce;Oe++){for(ti=Math.max(ti,Math.abs(W[Oe])+Math.abs(H[Oe])),ct=Oe;ct<ce&&!(Math.abs(H[ct])<=ua*ti);)ct++;if(ct>Oe)do{for(Y=W[Oe],Ge=(W[Oe+1]-Y)/(2*H[Oe]),$t=In(Ge,1),Ge<0&&($t=-$t),W[Oe]=H[Oe]/(Ge+$t),W[Oe+1]=H[Oe]*(Ge+$t),kn=W[Oe+1],te=Y-W[Oe],pe=Oe+2;pe<ce;pe++)W[pe]-=te;for(Hr=Hr+te,Ge=W[ct],_t=1,Jt=_t,Xn=_t,$e=H[Oe+1],_n=0,ar=0,pe=ct-1;pe>=Oe;pe--)for(Xn=Jt,Jt=_t,ar=_n,Y=_t*H[pe],te=_t*Ge,$t=In(Ge,H[pe]),H[pe+1]=_n*$t,_n=H[pe]/$t,_t=Ge/$t,Ge=_t*W[pe]-_n*Y,W[pe+1]=te+_n*(_t*Y+_n*W[pe]),Ce=0;Ce<ce;Ce++)te=F.get(Ce,pe+1),F.set(Ce,pe+1,_n*F.get(Ce,pe)+_t*te),F.set(Ce,pe,_t*F.get(Ce,pe)-_n*te);Ge=-_n*ar*Xn*$e*H[Oe]/kn,H[Oe]=_n*Ge,W[Oe]=_t*Ge}while(Math.abs(H[Oe])>ua*ti);W[Oe]=W[Oe]+Hr,H[Oe]=0}for(pe=0;pe<ce-1;pe++){for(Ce=pe,Ge=W[pe],me=pe+1;me<ce;me++)W[me]<Ge&&(Ce=me,Ge=W[me]);if(Ce!==pe)for(W[Ce]=W[pe],W[pe]=Ge,me=0;me<ce;me++)Ge=F.get(me,pe),F.set(me,pe,F.get(me,Ce)),F.set(me,Ce,Ge)}}function qo(ce,H,W,F){let Y=0,te=ce-1,pe,me,Ce,Oe,ct,Ge,$t;for(Ge=Y+1;Ge<=te-1;Ge++){for($t=0,Oe=Ge;Oe<=te;Oe++)$t=$t+Math.abs(H.get(Oe,Ge-1));if($t!==0){for(Ce=0,Oe=te;Oe>=Ge;Oe--)W[Oe]=H.get(Oe,Ge-1)/$t,Ce+=W[Oe]*W[Oe];for(me=Math.sqrt(Ce),W[Ge]>0&&(me=-me),Ce=Ce-W[Ge]*me,W[Ge]=W[Ge]-me,ct=Ge;ct<ce;ct++){for(pe=0,Oe=te;Oe>=Ge;Oe--)pe+=W[Oe]*H.get(Oe,ct);for(pe=pe/Ce,Oe=Ge;Oe<=te;Oe++)H.set(Oe,ct,H.get(Oe,ct)-pe*W[Oe])}for(Oe=0;Oe<=te;Oe++){for(pe=0,ct=te;ct>=Ge;ct--)pe+=W[ct]*H.get(Oe,ct);for(pe=pe/Ce,ct=Ge;ct<=te;ct++)H.set(Oe,ct,H.get(Oe,ct)-pe*W[ct])}W[Ge]=$t*W[Ge],H.set(Ge,Ge-1,$t*me)}}for(Oe=0;Oe<ce;Oe++)for(ct=0;ct<ce;ct++)F.set(Oe,ct,Oe===ct?1:0);for(Ge=te-1;Ge>=Y+1;Ge--)if(H.get(Ge,Ge-1)!==0){for(Oe=Ge+1;Oe<=te;Oe++)W[Oe]=H.get(Oe,Ge-1);for(ct=Ge;ct<=te;ct++){for(me=0,Oe=Ge;Oe<=te;Oe++)me+=W[Oe]*F.get(Oe,ct);for(me=me/W[Ge]/H.get(Ge,Ge-1),Oe=Ge;Oe<=te;Oe++)F.set(Oe,ct,F.get(Oe,ct)+me*W[Oe])}}}function ft(ce,H,W,F,Y){let te=ce-1,pe=0,me=ce-1,Ce=Number.EPSILON,Oe=0,ct=0,Ge=0,$t=0,kn=0,_t=0,Jt=0,Xn=0,$e,_n,ar,Hr,ti,ua,Mr,Ir,ia,nt,tn,er,mn,Yr,Gi;for($e=0;$e<ce;$e++)for(($e<pe||$e>me)&&(W[$e]=Y.get($e,$e),H[$e]=0),_n=Math.max($e-1,0);_n<ce;_n++)ct=ct+Math.abs(Y.get($e,_n));for(;te>=pe;){for(Hr=te;Hr>pe&&(_t=Math.abs(Y.get(Hr-1,Hr-1))+Math.abs(Y.get(Hr,Hr)),_t===0&&(_t=ct),!(Math.abs(Y.get(Hr,Hr-1))<Ce*_t));)Hr--;if(Hr===te)Y.set(te,te,Y.get(te,te)+Oe),W[te]=Y.get(te,te),H[te]=0,te--,Xn=0;else if(Hr===te-1){if(Mr=Y.get(te,te-1)*Y.get(te-1,te),Ge=(Y.get(te-1,te-1)-Y.get(te,te))/2,$t=Ge*Ge+Mr,Jt=Math.sqrt(Math.abs($t)),Y.set(te,te,Y.get(te,te)+Oe),Y.set(te-1,te-1,Y.get(te-1,te-1)+Oe),Ir=Y.get(te,te),$t>=0){for(Jt=Ge>=0?Ge+Jt:Ge-Jt,W[te-1]=Ir+Jt,W[te]=W[te-1],Jt!==0&&(W[te]=Ir-Mr/Jt),H[te-1]=0,H[te]=0,Ir=Y.get(te,te-1),_t=Math.abs(Ir)+Math.abs(Jt),Ge=Ir/_t,$t=Jt/_t,kn=Math.sqrt(Ge*Ge+$t*$t),Ge=Ge/kn,$t=$t/kn,_n=te-1;_n<ce;_n++)Jt=Y.get(te-1,_n),Y.set(te-1,_n,$t*Jt+Ge*Y.get(te,_n)),Y.set(te,_n,$t*Y.get(te,_n)-Ge*Jt);for($e=0;$e<=te;$e++)Jt=Y.get($e,te-1),Y.set($e,te-1,$t*Jt+Ge*Y.get($e,te)),Y.set($e,te,$t*Y.get($e,te)-Ge*Jt);for($e=pe;$e<=me;$e++)Jt=F.get($e,te-1),F.set($e,te-1,$t*Jt+Ge*F.get($e,te)),F.set($e,te,$t*F.get($e,te)-Ge*Jt)}else W[te-1]=Ir+Ge,W[te]=Ir+Ge,H[te-1]=Jt,H[te]=-Jt;te=te-2,Xn=0}else{if(Ir=Y.get(te,te),ia=0,Mr=0,Hr<te&&(ia=Y.get(te-1,te-1),Mr=Y.get(te,te-1)*Y.get(te-1,te)),Xn===10){for(Oe+=Ir,$e=pe;$e<=te;$e++)Y.set($e,$e,Y.get($e,$e)-Ir);_t=Math.abs(Y.get(te,te-1))+Math.abs(Y.get(te-1,te-2)),Ir=ia=.75*_t,Mr=-.4375*_t*_t}if(Xn===30&&(_t=(ia-Ir)/2,_t=_t*_t+Mr,_t>0)){for(_t=Math.sqrt(_t),ia<Ir&&(_t=-_t),_t=Ir-Mr/((ia-Ir)/2+_t),$e=pe;$e<=te;$e++)Y.set($e,$e,Y.get($e,$e)-_t);Oe+=_t,Ir=ia=Mr=.964}for(Xn=Xn+1,ti=te-2;ti>=Hr&&(Jt=Y.get(ti,ti),kn=Ir-Jt,_t=ia-Jt,Ge=(kn*_t-Mr)/Y.get(ti+1,ti)+Y.get(ti,ti+1),$t=Y.get(ti+1,ti+1)-Jt-kn-_t,kn=Y.get(ti+2,ti+1),_t=Math.abs(Ge)+Math.abs($t)+Math.abs(kn),Ge=Ge/_t,$t=$t/_t,kn=kn/_t,!(ti===Hr||Math.abs(Y.get(ti,ti-1))*(Math.abs($t)+Math.abs(kn))<Ce*(Math.abs(Ge)*(Math.abs(Y.get(ti-1,ti-1))+Math.abs(Jt)+Math.abs(Y.get(ti+1,ti+1))))));)ti--;for($e=ti+2;$e<=te;$e++)Y.set($e,$e-2,0),$e>ti+2&&Y.set($e,$e-3,0);for(ar=ti;ar<=te-1&&(Yr=ar!==te-1,ar!==ti&&(Ge=Y.get(ar,ar-1),$t=Y.get(ar+1,ar-1),kn=Yr?Y.get(ar+2,ar-1):0,Ir=Math.abs(Ge)+Math.abs($t)+Math.abs(kn),Ir!==0&&(Ge=Ge/Ir,$t=$t/Ir,kn=kn/Ir)),Ir!==0);ar++)if(_t=Math.sqrt(Ge*Ge+$t*$t+kn*kn),Ge<0&&(_t=-_t),_t!==0){for(ar!==ti?Y.set(ar,ar-1,-_t*Ir):Hr!==ti&&Y.set(ar,ar-1,-Y.get(ar,ar-1)),Ge=Ge+_t,Ir=Ge/_t,ia=$t/_t,Jt=kn/_t,$t=$t/Ge,kn=kn/Ge,_n=ar;_n<ce;_n++)Ge=Y.get(ar,_n)+$t*Y.get(ar+1,_n),Yr&&(Ge=Ge+kn*Y.get(ar+2,_n),Y.set(ar+2,_n,Y.get(ar+2,_n)-Ge*Jt)),Y.set(ar,_n,Y.get(ar,_n)-Ge*Ir),Y.set(ar+1,_n,Y.get(ar+1,_n)-Ge*ia);for($e=0;$e<=Math.min(te,ar+3);$e++)Ge=Ir*Y.get($e,ar)+ia*Y.get($e,ar+1),Yr&&(Ge=Ge+Jt*Y.get($e,ar+2),Y.set($e,ar+2,Y.get($e,ar+2)-Ge*kn)),Y.set($e,ar,Y.get($e,ar)-Ge),Y.set($e,ar+1,Y.get($e,ar+1)-Ge*$t);for($e=pe;$e<=me;$e++)Ge=Ir*F.get($e,ar)+ia*F.get($e,ar+1),Yr&&(Ge=Ge+Jt*F.get($e,ar+2),F.set($e,ar+2,F.get($e,ar+2)-Ge*kn)),F.set($e,ar,F.get($e,ar)-Ge),F.set($e,ar+1,F.get($e,ar+1)-Ge*$t)}}}if(ct!==0){for(te=ce-1;te>=0;te--)if(Ge=W[te],$t=H[te],$t===0)for(Hr=te,Y.set(te,te,1),$e=te-1;$e>=0;$e--){for(Mr=Y.get($e,$e)-Ge,kn=0,_n=Hr;_n<=te;_n++)kn=kn+Y.get($e,_n)*Y.get(_n,te);if(H[$e]<0)Jt=Mr,_t=kn;else if(Hr=$e,H[$e]===0?Y.set($e,te,Mr!==0?-kn/Mr:-kn/(Ce*ct)):(Ir=Y.get($e,$e+1),ia=Y.get($e+1,$e),$t=(W[$e]-Ge)*(W[$e]-Ge)+H[$e]*H[$e],ua=(Ir*_t-Jt*kn)/$t,Y.set($e,te,ua),Y.set($e+1,te,Math.abs(Ir)>Math.abs(Jt)?(-kn-Mr*ua)/Ir:(-_t-ia*ua)/Jt)),ua=Math.abs(Y.get($e,te)),Ce*ua*ua>1)for(_n=$e;_n<=te;_n++)Y.set(_n,te,Y.get(_n,te)/ua)}else if($t<0)for(Hr=te-1,Math.abs(Y.get(te,te-1))>Math.abs(Y.get(te-1,te))?(Y.set(te-1,te-1,$t/Y.get(te,te-1)),Y.set(te-1,te,-(Y.get(te,te)-Ge)/Y.get(te,te-1))):(Gi=nn(0,-Y.get(te-1,te),Y.get(te-1,te-1)-Ge,$t),Y.set(te-1,te-1,Gi[0]),Y.set(te-1,te,Gi[1])),Y.set(te,te-1,0),Y.set(te,te,1),$e=te-2;$e>=0;$e--){for(nt=0,tn=0,_n=Hr;_n<=te;_n++)nt=nt+Y.get($e,_n)*Y.get(_n,te-1),tn=tn+Y.get($e,_n)*Y.get(_n,te);if(Mr=Y.get($e,$e)-Ge,H[$e]<0)Jt=Mr,kn=nt,_t=tn;else if(Hr=$e,H[$e]===0?(Gi=nn(-nt,-tn,Mr,$t),Y.set($e,te-1,Gi[0]),Y.set($e,te,Gi[1])):(Ir=Y.get($e,$e+1),ia=Y.get($e+1,$e),er=(W[$e]-Ge)*(W[$e]-Ge)+H[$e]*H[$e]-$t*$t,mn=(W[$e]-Ge)*2*$t,er===0&&mn===0&&(er=Ce*ct*(Math.abs(Mr)+Math.abs($t)+Math.abs(Ir)+Math.abs(ia)+Math.abs(Jt))),Gi=nn(Ir*kn-Jt*nt+$t*tn,Ir*_t-Jt*tn-$t*nt,er,mn),Y.set($e,te-1,Gi[0]),Y.set($e,te,Gi[1]),Math.abs(Ir)>Math.abs(Jt)+Math.abs($t)?(Y.set($e+1,te-1,(-nt-Mr*Y.get($e,te-1)+$t*Y.get($e,te))/Ir),Y.set($e+1,te,(-tn-Mr*Y.get($e,te)-$t*Y.get($e,te-1))/Ir)):(Gi=nn(-kn-ia*Y.get($e,te-1),-_t-ia*Y.get($e,te),Jt,$t),Y.set($e+1,te-1,Gi[0]),Y.set($e+1,te,Gi[1]))),ua=Math.max(Math.abs(Y.get($e,te-1)),Math.abs(Y.get($e,te))),Ce*ua*ua>1)for(_n=$e;_n<=te;_n++)Y.set(_n,te-1,Y.get(_n,te-1)/ua),Y.set(_n,te,Y.get(_n,te)/ua)}for($e=0;$e<ce;$e++)if($e<pe||$e>me)for(_n=$e;_n<ce;_n++)F.set($e,_n,Y.get($e,_n));for(_n=ce-1;_n>=pe;_n--)for($e=pe;$e<=me;$e++){for(Jt=0,ar=pe;ar<=Math.min(_n,me);ar++)Jt=Jt+F.get($e,ar)*Y.get(ar,_n);F.set($e,_n,Jt)}}}function nn(ce,H,W,F){let Y,te;return Math.abs(W)>Math.abs(F)?(Y=F/W,te=W+Y*F,[(ce+Y*H)/te,(H-Y*ce)/te]):(Y=W/F,te=F+Y*W,[(Y*ce+H)/te,(Y*H-ce)/te])}class Yn{constructor(H){if(H=rn.checkMatrix(H),!H.isSymmetric())throw new Error("Matrix is not symmetric");let W=H,F=W.rows,Y=new ne(F,F),te=!0,pe,me,Ce;for(me=0;me<F;me++){let Oe=0;for(Ce=0;Ce<me;Ce++){let ct=0;for(pe=0;pe<Ce;pe++)ct+=Y.get(Ce,pe)*Y.get(me,pe);ct=(W.get(me,Ce)-ct)/Y.get(Ce,Ce),Y.set(me,Ce,ct),Oe=Oe+ct*ct}for(Oe=W.get(me,me)-Oe,te&&=Oe>0,Y.set(me,me,Math.sqrt(Math.max(Oe,0))),Ce=me+1;Ce<F;Ce++)Y.set(me,Ce,0)}this.L=Y,this.positiveDefinite=te}isPositiveDefinite(){return this.positiveDefinite}solve(H){H=rn.checkMatrix(H);let W=this.L,F=W.rows;if(H.rows!==F)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let Y=H.columns,te=H.clone(),pe,me,Ce;for(Ce=0;Ce<F;Ce++)for(me=0;me<Y;me++){for(pe=0;pe<Ce;pe++)te.set(Ce,me,te.get(Ce,me)-te.get(pe,me)*W.get(Ce,pe));te.set(Ce,me,te.get(Ce,me)/W.get(Ce,Ce))}for(Ce=F-1;Ce>=0;Ce--)for(me=0;me<Y;me++){for(pe=Ce+1;pe<F;pe++)te.set(Ce,me,te.get(Ce,me)-te.get(pe,me)*W.get(pe,Ce));te.set(Ce,me,te.get(Ce,me)/W.get(Ce,Ce))}return te}get lowerTriangularMatrix(){return this.L}}class Nr{constructor(H,W={}){H=rn.checkMatrix(H);let{Y:F}=W;const{scaleScores:Y=!1,maxIterations:te=1e3,terminationCriteria:pe=1e-10}=W;let me;if(F){if(t.isAnyArray(F)&&typeof F[0]=="number"?F=ne.columnVector(F):F=rn.checkMatrix(F),F.rows!==H.rows)throw new Error("Y should have the same number of rows as X");me=F.getColumnVector(0)}else me=H.getColumnVector(0);let Ce=1,Oe,ct,Ge,$t;for(let kn=0;kn<te&&Ce>pe;kn++)Ge=H.transpose().mmul(me).div(me.transpose().mmul(me).get(0,0)),Ge=Ge.div(Ge.norm()),Oe=H.mmul(Ge).div(Ge.transpose().mmul(Ge).get(0,0)),kn>0&&(Ce=Oe.clone().sub($t).pow(2).sum()),$t=Oe.clone(),F?(ct=F.transpose().mmul(Oe).div(Oe.transpose().mmul(Oe).get(0,0)),ct=ct.div(ct.norm()),me=F.mmul(ct).div(ct.transpose().mmul(ct).get(0,0))):me=Oe;if(F){let kn=H.transpose().mmul(Oe).div(Oe.transpose().mmul(Oe).get(0,0));kn=kn.div(kn.norm());let _t=H.clone().sub(Oe.clone().mmul(kn.transpose())),Jt=me.transpose().mmul(Oe).div(Oe.transpose().mmul(Oe).get(0,0)),Xn=F.clone().sub(Oe.clone().mulS(Jt.get(0,0)).mmul(ct.transpose()));this.t=Oe,this.p=kn.transpose(),this.w=Ge.transpose(),this.q=ct,this.u=me,this.s=Oe.transpose().mmul(Oe),this.xResidual=_t,this.yResidual=Xn,this.betas=Jt}else this.w=Ge.transpose(),this.s=Oe.transpose().mmul(Oe).sqrt(),Y?this.t=Oe.clone().div(this.s.get(0,0)):this.t=Oe,this.xResidual=H.sub(Oe.mmul(Ge.transpose()))}}return _a.AbstractMatrix=Q,_a.CHO=Yn,_a.CholeskyDecomposition=Yn,_a.DistanceMatrix=ue,_a.EVD=ei,_a.EigenvalueDecomposition=ei,_a.LU=Sn,_a.LuDecomposition=Sn,_a.Matrix=ne,_a.MatrixColumnSelectionView=Re,_a.MatrixColumnView=Se,_a.MatrixFlipColumnView=Xe,_a.MatrixFlipRowView=Le,_a.MatrixRowSelectionView=xt,_a.MatrixRowView=Lt,_a.MatrixSelectionView=dt,_a.MatrixSubView=Bt,_a.MatrixTransposeView=At,_a.NIPALS=Nr,_a.Nipals=Nr,_a.QR=de,_a.QrDecomposition=de,_a.SVD=sr,_a.SingularValueDecomposition=sr,_a.SymmetricMatrix=le,_a.WrapperMatrix1D=zt,_a.WrapperMatrix2D=rn,_a.correlation=Rr,_a.covariance=Tr,_a.default=ne,_a.determinant=Ft,_a.inverse=zr,_a.linearDependencies=$n,_a.pseudoInverse=Vr,_a.solve=st,_a.wrap=Wn,_a}var A6=U2t();const che=Ni(A6),C_=A6.Matrix,Xke=A6.SingularValueDecomposition;che.Matrix?che.Matrix:A6.Matrix;const j2t={center:[0,0],linkDistance:50};class qke{constructor(e={}){this.options=e,this.id="mds",this.options=Object.assign(Object.assign({},j2t),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericMDSLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericMDSLayout(!0,e,n)})}genericMDSLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a=[0,0],linkDistance:o=50}=i,s=n.getAllNodes(),l=n.getAllEdges();if(!s?.length||s.length===1)return eS(n,e,a);const c=Gke({nodes:s,edges:l}),u=Hke(c);z2t(u);const f=YOt(u,o),h=$2t(f),d=[];return h.forEach((g,v)=>{const y=wd(s[v]);y.data.x=g[0]+a[0],y.data.y=g[1]+a[1],d.push(y)}),e&&d.forEach(g=>n.mergeNodeData(g.id,{x:g.data.x,y:g.data.y})),{nodes:d,edges:l}})}}const z2t=t=>{let e=-999999;t.forEach(n=>{n.forEach(r=>{r!==1/0&&e<r&&(e=r)})}),t.forEach((n,r)=>{n.forEach((i,a)=>{i===1/0&&(t[r][a]=e)})})},$2t=t=>{const n=C_.mul(C_.pow(t,2),-.5),r=n.mean("row"),i=n.mean("column"),a=n.mean();n.add(a).subRowVector(r).subColumnVector(i);const o=new Xke(n),s=C_.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map(l=>C_.mul([l],[s]).toJSON()[0].splice(0,2))};function Nq(t){return!!t.tick&&!!t.stop}const H2t={gForce:!0,force2:!0,d3force:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0},G2t={center:[0,0],comboPadding:10,treeKey:"combo"};class W2t{constructor(e={}){this.options=e,this.id="comboCombined",this.options=Object.assign(Object.assign({},G2t),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericComboCombinedLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericComboCombinedLayout(!0,e,n)})}genericComboCombinedLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=this.initVals(Object.assign(Object.assign({},this.options),r)),{center:a,treeKey:o,outerLayout:s}=i,l=n.getAllNodes().filter(C=>!C.data._isCombo),c=n.getAllNodes().filter(C=>C.data._isCombo),u=n.getAllEdges(),f=l?.length;if(!f||f===1)return eS(n,e,a);const h=[],d=new Map;l.forEach(C=>{d.set(C.id,C)});const p=new Map;c.forEach(C=>{p.set(C.id,C)});const g=new Map,v=this.getInnerGraphs(n,o,d,p,u,i,g);yield Promise.all(v);const y=new Map,_=[],E=new Map;let x=!0;n.getRoots(o).forEach(C=>{const D=g.get(C.id),L=p.get(C.id)||d.get(C.id),B={id:C.id,data:Object.assign(Object.assign({},C.data),{x:D.data.x||L.data.x,y:D.data.y||L.data.y,fx:D.data.fx||L.data.fx,fy:D.data.fy||L.data.fy,mass:D.data.mass||L.data.mass,size:D.data.size})};_.push(B),y.set(C.id,!0),!isNaN(B.data.x)&&B.data.x!==0&&!isNaN(B.data.y)&&B.data.y!==0?x=!1:(B.data.x=Math.random()*100,B.data.y=Math.random()*100),Rq(n,[C],I=>{I.id!==C.id&&E.set(I.id,C.id)},"TB",o)});const T=[];u.forEach(C=>{const D=E.get(C.source)||C.source,L=E.get(C.target)||C.target;D!==L&&y.has(D)&&y.has(L)&&T.push({id:C.id,source:D,target:L,data:{}})});let S;if(_?.length){if(_.length===1)_[0].data.x=a[0],_[0].data.y=a[1];else{const C=new kc({nodes:_,edges:T}),D=s||new Yke;x&&H2t[D.id]&&(yield(_.length<100?new qke:new Pq).assign(C));const L=Object.assign({center:a,kg:5,preventOverlap:!0,animate:!1},D.id==="force"?{gravity:1,factor:4,linkDistance:(B,I,U)=>{const $=Math.max(...I.data.size)||32,X=Math.max(...U.data.size)||32;return $/2+X/2+200}}:{});S=yield uhe(D,C,L)}g.forEach(C=>{var D;const L=S.nodes.find(U=>U.id===C.id);if(L){const{x:U,y:$}=L.data;C.data.visited=!0,C.data.x=U,C.data.y=$,h.push({id:C.id,data:{x:U,y:$}})}const{x:B,y:I}=C.data;(D=C.data.nodes)===null||D===void 0||D.forEach(U=>{h.push({id:U.id,data:{x:U.data.x+B,y:U.data.y+I}})})}),g.forEach(({data:C})=>{const{x:D,y:L,visited:B,nodes:I}=C;I?.forEach(U=>{if(!B){const $=h.find(X=>X.id===U.id);$.data.x+=D||0,$.data.y+=L||0}})})}return e&&h.forEach(C=>{n.mergeNodeData(C.id,{x:C.data.x,y:C.data.y})}),{nodes:h,edges:u}})}initVals(e){const n=Object.assign({},e),{nodeSize:r,spacing:i,comboPadding:a}=e;let o,s;if(Ln(i)?s=()=>i:ur(i)?s=i:s=()=>0,n.spacing=s,!r)o=c=>{const u=s(c);return c.size?oy(c.size)?((c.size[0]>c.size[1]?c.size[0]:c.size[1])+u)/2:dl(c.size)?((c.size.width>c.size.height?c.size.width:c.size.height)+u)/2:(c.size+u)/2:32+u/2};else if(ur(r))o=c=>{const u=r(c),f=s(c);return oy(c.size)?((c.size[0]>c.size[1]?c.size[0]:c.size[1])+f)/2:((u||32)+f)/2};else if(oy(r)){const u=(r[0]>r[1]?r[0]:r[1])/2;o=f=>u+s(f)/2}else{const c=r/2;o=u=>c+s(u)/2}n.nodeSize=o;let l;return Ln(a)?l=()=>a:oy(a)?l=()=>Math.max.apply(null,a):ur(a)?l=a:l=()=>0,n.comboPadding=l,n}getInnerGraphs(e,n,r,i,a,o,s){const{nodeSize:l,comboPadding:c,spacing:u,innerLayout:f}=o,h=f||new Pq({}),d={center:[0,0],preventOverlap:!0,nodeSpacing:u},p=[],g=v=>{let y=c?.(v)||10;return oy(y)&&(y=Math.max(...y)),{size:y?[y*2,y*2]:[30,30],padding:y}};return e.getRoots(n).forEach(v=>{s.set(v.id,{id:v.id,data:{nodes:[],size:g(v).size}});let y=Promise.resolve();Rq(e,[v],_=>{var E;if(!_.data._isCombo)return;const{size:x,padding:T}=g(_);if(!(!((E=e.getChildren(_.id,n))===null||E===void 0)&&E.length))s.set(_.id,{id:_.id,data:Object.assign(Object.assign({},_.data),{size:x})});else{const S=s.get(_.id);s.set(_.id,{id:_.id,data:Object.assign({nodes:[]},S?.data)});const w=new Map,C=e.getChildren(_.id,n).map(B=>{if(B.data._isCombo)return s.has(B.id)||s.set(B.id,{id:B.id,data:Object.assign({},B.data)}),w.set(B.id,!0),s.get(B.id);const I=r.get(B.id)||i.get(B.id);return w.set(B.id,!0),{id:B.id,data:Object.assign(Object.assign({},I.data),B.data)}}),D={nodes:C,edges:a.filter(B=>w.has(B.source)&&w.has(B.target))};let L=1/0;C.forEach(B=>{var I;let{size:U}=B.data;U||(U=((I=s.get(B.id))===null||I===void 0?void 0:I.data.size)||l?.(B)||[30,30]),Ln(U)&&(U=[U,U]);const[$,X]=U;L>$&&(L=$),L>X&&(L=X),B.data.size=U}),y=y.then(()=>Pi(this,void 0,void 0,function*(){const B=new kc(D);yield uhe(h,B,d,!0);const{minX:I,minY:U,maxX:$,maxY:X}=XOt(C),N={x:($+I)/2,y:(X+U)/2};D.nodes.forEach(k=>{k.data.x-=N.x,k.data.y-=N.y});const M=[Math.max($-I,L)+T*2,Math.max(X-U,L)+T*2];s.get(_.id).data.size=M,s.get(_.id).data.nodes=C}))}return!0},"BT",n),p.push(y)}),p}}function uhe(t,e,n,r){var i;return Pi(this,void 0,void 0,function*(){return Nq(t)?(t.execute(e,n),t.stop(),t.tick((i=n.iterations)!==null&&i!==void 0?i:300)):r?yield t.assign(e,n):yield t.execute(e,n)})}class V2t{constructor(e){this.id="d3-force",this.config={inputNodeAttrs:["x","y","vx","vy","fx","fy"],outputNodeAttrs:["x","y","vx","vy"],simulationAttrs:["alpha","alphaMin","alphaDecay","alphaTarget","velocityDecay","randomSource"]},this.forceMap={link:wTe,manyBody:OTe,center:STe,collide:ATe,radial:zUe,x:jK,y:zK},this.options={link:{id:n=>n.id},manyBody:{},center:{x:0,y:0}},this.context={options:{},assign:!1,nodes:[],edges:[]},Nt(this.options,e),this.options.forceSimulation&&(this.simulation=this.options.forceSimulation)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericLayout(!0,e,n)})}stop(){this.simulation.stop()}tick(e){return this.simulation.tick(e),this.getResult()}restart(){this.simulation.restart()}setFixedPosition(e,n){const r=this.context.nodes.find(i=>i.id===e);r&&n.forEach((i,a)=>{if(typeof i=="number"||i===null){const o=["fx","fy","fz"][a];r[o]=i}})}getOptions(e){var n,r;const i=Nt({},this.options,e);return i.collide&&((n=i.collide)===null||n===void 0?void 0:n.radius)===void 0&&(i.collide=i.collide||{},i.collide.radius=(r=i.nodeSize)!==null&&r!==void 0?r:10),i.iterations===void 0&&(i.link&&i.link.iterations===void 0&&(i.iterations=i.link.iterations),i.collide&&i.collide.iterations===void 0&&(i.iterations=i.collide.iterations)),this.context.options=i,i}genericLayout(e,n,r){var i;return Pi(this,void 0,void 0,function*(){const a=this.getOptions(r),o=n.getAllNodes().map(({id:u,data:f})=>Object.assign(Object.assign({id:u},f),Wp(f.data,this.config.inputNodeAttrs))),s=n.getAllEdges().map(u=>Object.assign({},u));Object.assign(this.context,{assign:e,nodes:o,edges:s,graph:n});const l=new Promise(u=>{this.resolver=u}),c=this.setSimulation(a);return c.nodes(o),(i=c.force("link"))===null||i===void 0||i.links(s),l})}getResult(){const{assign:e,nodes:n,edges:r,graph:i}=this.context,a=n.map(s=>({id:s.id,data:Object.assign(Object.assign({},s.data),Wp(s,this.config.outputNodeAttrs))})),o=r.map(({id:s,source:l,target:c,data:u})=>({id:s,source:typeof l=="object"?l.id:l,target:typeof c=="object"?c.id:c,data:u}));return e&&a.forEach(s=>i.mergeNodeData(s.id,s.data)),{nodes:a,edges:o}}initSimulation(){return UK()}setSimulation(e){const n=this.simulation||this.options.forceSimulation||this.initSimulation();return this.simulation||(this.simulation=n.on("tick",()=>{var r;return(r=e.onTick)===null||r===void 0?void 0:r.call(e,this.getResult())}).on("end",()=>{var r;return(r=this.resolver)===null||r===void 0?void 0:r.call(this,this.getResult())})),fhe(n,this.config.simulationAttrs.map(r=>[r,e[r]])),Object.entries(this.forceMap).forEach(([r,i])=>{const a=r;if(e[r]){let o=n.force(a);o||(o=i(),n.force(a,o)),fhe(o,Object.entries(e[a]))}else n.force(a,null)}),n}}const fhe=(t,e)=>e.reduce((n,[r,i])=>!n[r]||i===void 0?n:n[r].call(t,i),t);function Nte(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ej,hhe;function Y2t(){if(hhe)return ej;hhe=1;function t(){this.__data__=[],this.size=0}return ej=t,ej}var tj,dhe;function Vw(){if(dhe)return tj;dhe=1;function t(e,n){return e===n||e!==e&&n!==n}return tj=t,tj}var nj,phe;function w6(){if(phe)return nj;phe=1;var t=Vw();function e(n,r){for(var i=n.length;i--;)if(t(n[i][0],r))return i;return-1}return nj=e,nj}var rj,ghe;function X2t(){if(ghe)return rj;ghe=1;var t=w6(),e=Array.prototype,n=e.splice;function r(i){var a=this.__data__,o=t(a,i);if(o<0)return!1;var s=a.length-1;return o==s?a.pop():n.call(a,o,1),--this.size,!0}return rj=r,rj}var ij,vhe;function q2t(){if(vhe)return ij;vhe=1;var t=w6();function e(n){var r=this.__data__,i=t(r,n);return i<0?void 0:r[i][1]}return ij=e,ij}var aj,mhe;function Z2t(){if(mhe)return aj;mhe=1;var t=w6();function e(n){return t(this.__data__,n)>-1}return aj=e,aj}var oj,yhe;function K2t(){if(yhe)return oj;yhe=1;var t=w6();function e(n,r){var i=this.__data__,a=t(i,n);return a<0?(++this.size,i.push([n,r])):i[a][1]=r,this}return oj=e,oj}var sj,_he;function O6(){if(_he)return sj;_he=1;var t=Y2t(),e=X2t(),n=q2t(),r=Z2t(),i=K2t();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,sj=a,sj}var lj,bhe;function Q2t(){if(bhe)return lj;bhe=1;var t=O6();function e(){this.__data__=new t,this.size=0}return lj=e,lj}var cj,Ehe;function J2t(){if(Ehe)return cj;Ehe=1;function t(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}return cj=t,cj}var uj,xhe;function eCt(){if(xhe)return uj;xhe=1;function t(e){return this.__data__.get(e)}return uj=t,uj}var fj,She;function tCt(){if(She)return fj;She=1;function t(e){return this.__data__.has(e)}return fj=t,fj}var hj,The;function Zke(){if(The)return hj;The=1;var t=typeof v_=="object"&&v_&&v_.Object===Object&&v_;return hj=t,hj}var dj,Ahe;function cv(){if(Ahe)return dj;Ahe=1;var t=Zke(),e=typeof self=="object"&&self&&self.Object===Object&&self,n=t||e||Function("return this")();return dj=n,dj}var pj,whe;function Yw(){if(whe)return pj;whe=1;var t=cv(),e=t.Symbol;return pj=e,pj}var gj,Ohe;function nCt(){if(Ohe)return gj;Ohe=1;var t=Yw(),e=Object.prototype,n=e.hasOwnProperty,r=e.toString,i=t?t.toStringTag:void 0;function a(o){var s=n.call(o,i),l=o[i];try{o[i]=void 0;var c=!0}catch{}var u=r.call(o);return c&&(s?o[i]=l:delete o[i]),u}return gj=a,gj}var vj,Che;function rCt(){if(Che)return vj;Che=1;var t=Object.prototype,e=t.toString;function n(r){return e.call(r)}return vj=n,vj}var mj,Rhe;function Uy(){if(Rhe)return mj;Rhe=1;var t=Yw(),e=nCt(),n=rCt(),r="[object Null]",i="[object Undefined]",a=t?t.toStringTag:void 0;function o(s){return s==null?s===void 0?i:r:a&&a in Object(s)?e(s):n(s)}return mj=o,mj}var yj,Mhe;function Jf(){if(Mhe)return yj;Mhe=1;function t(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}return yj=t,yj}var _j,Phe;function Xw(){if(Phe)return _j;Phe=1;var t=Uy(),e=Jf(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",a="[object Proxy]";function o(s){if(!e(s))return!1;var l=t(s);return l==r||l==i||l==n||l==a}return _j=o,_j}var bj,Nhe;function iCt(){if(Nhe)return bj;Nhe=1;var t=cv(),e=t["__core-js_shared__"];return bj=e,bj}var Ej,Ihe;function aCt(){if(Ihe)return Ej;Ihe=1;var t=iCt(),e=(function(){var r=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!e&&e in r}return Ej=n,Ej}var xj,Lhe;function Kke(){if(Lhe)return xj;Lhe=1;var t=Function.prototype,e=t.toString;function n(r){if(r!=null){try{return e.call(r)}catch{}try{return r+""}catch{}}return""}return xj=n,xj}var Sj,khe;function oCt(){if(khe)return Sj;khe=1;var t=Xw(),e=aCt(),n=Jf(),r=Kke(),i=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,s=Object.prototype,l=o.toString,c=s.hasOwnProperty,u=RegExp("^"+l.call(c).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!n(h)||e(h))return!1;var d=t(h)?u:a;return d.test(r(h))}return Sj=f,Sj}var Tj,Dhe;function sCt(){if(Dhe)return Tj;Dhe=1;function t(e,n){return e?.[n]}return Tj=t,Tj}var Aj,Bhe;function tS(){if(Bhe)return Aj;Bhe=1;var t=oCt(),e=sCt();function n(r,i){var a=e(r,i);return t(a)?a:void 0}return Aj=n,Aj}var wj,Fhe;function Ite(){if(Fhe)return wj;Fhe=1;var t=tS(),e=cv(),n=t(e,"Map");return wj=n,wj}var Oj,Uhe;function C6(){if(Uhe)return Oj;Uhe=1;var t=tS(),e=t(Object,"create");return Oj=e,Oj}var Cj,jhe;function lCt(){if(jhe)return Cj;jhe=1;var t=C6();function e(){this.__data__=t?t(null):{},this.size=0}return Cj=e,Cj}var Rj,zhe;function cCt(){if(zhe)return Rj;zhe=1;function t(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}return Rj=t,Rj}var Mj,$he;function uCt(){if($he)return Mj;$he=1;var t=C6(),e="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(a){var o=this.__data__;if(t){var s=o[a];return s===e?void 0:s}return r.call(o,a)?o[a]:void 0}return Mj=i,Mj}var Pj,Hhe;function fCt(){if(Hhe)return Pj;Hhe=1;var t=C6(),e=Object.prototype,n=e.hasOwnProperty;function r(i){var a=this.__data__;return t?a[i]!==void 0:n.call(a,i)}return Pj=r,Pj}var Nj,Ghe;function hCt(){if(Ghe)return Nj;Ghe=1;var t=C6(),e="__lodash_hash_undefined__";function n(r,i){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=t&&i===void 0?e:i,this}return Nj=n,Nj}var Ij,Whe;function dCt(){if(Whe)return Ij;Whe=1;var t=lCt(),e=cCt(),n=uCt(),r=fCt(),i=hCt();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,Ij=a,Ij}var Lj,Vhe;function pCt(){if(Vhe)return Lj;Vhe=1;var t=dCt(),e=O6(),n=Ite();function r(){this.size=0,this.__data__={hash:new t,map:new(n||e),string:new t}}return Lj=r,Lj}var kj,Yhe;function gCt(){if(Yhe)return kj;Yhe=1;function t(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}return kj=t,kj}var Dj,Xhe;function R6(){if(Xhe)return Dj;Xhe=1;var t=gCt();function e(n,r){var i=n.__data__;return t(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Dj=e,Dj}var Bj,qhe;function vCt(){if(qhe)return Bj;qhe=1;var t=R6();function e(n){var r=t(this,n).delete(n);return this.size-=r?1:0,r}return Bj=e,Bj}var Fj,Zhe;function mCt(){if(Zhe)return Fj;Zhe=1;var t=R6();function e(n){return t(this,n).get(n)}return Fj=e,Fj}var Uj,Khe;function yCt(){if(Khe)return Uj;Khe=1;var t=R6();function e(n){return t(this,n).has(n)}return Uj=e,Uj}var jj,Qhe;function _Ct(){if(Qhe)return jj;Qhe=1;var t=R6();function e(n,r){var i=t(this,n),a=i.size;return i.set(n,r),this.size+=i.size==a?0:1,this}return jj=e,jj}var zj,Jhe;function Lte(){if(Jhe)return zj;Jhe=1;var t=pCt(),e=vCt(),n=mCt(),r=yCt(),i=_Ct();function a(o){var s=-1,l=o==null?0:o.length;for(this.clear();++s<l;){var c=o[s];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=n,a.prototype.has=r,a.prototype.set=i,zj=a,zj}var $j,ede;function bCt(){if(ede)return $j;ede=1;var t=O6(),e=Ite(),n=Lte(),r=200;function i(a,o){var s=this.__data__;if(s instanceof t){var l=s.__data__;if(!e||l.length<r-1)return l.push([a,o]),this.size=++s.size,this;s=this.__data__=new n(l)}return s.set(a,o),this.size=s.size,this}return $j=i,$j}var Hj,tde;function M6(){if(tde)return Hj;tde=1;var t=O6(),e=Q2t(),n=J2t(),r=eCt(),i=tCt(),a=bCt();function o(s){var l=this.__data__=new t(s);this.size=l.size}return o.prototype.clear=e,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=a,Hj=o,Hj}var Gj,nde;function kte(){if(nde)return Gj;nde=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i&&n(e[r],r,e)!==!1;);return e}return Gj=t,Gj}var Wj,rde;function Qke(){if(rde)return Wj;rde=1;var t=tS(),e=(function(){try{var n=t(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Wj=e,Wj}var Vj,ide;function P6(){if(ide)return Vj;ide=1;var t=Qke();function e(n,r,i){r=="__proto__"&&t?t(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Vj=e,Vj}var Yj,ade;function N6(){if(ade)return Yj;ade=1;var t=P6(),e=Vw(),n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s){var l=a[o];(!(r.call(a,o)&&e(l,s))||s===void 0&&!(o in a))&&t(a,o,s)}return Yj=i,Yj}var Xj,ode;function rN(){if(ode)return Xj;ode=1;var t=N6(),e=P6();function n(r,i,a,o){var s=!a;a||(a={});for(var l=-1,c=i.length;++l<c;){var u=i[l],f=o?o(a[u],r[u],u,a,r):void 0;f===void 0&&(f=r[u]),s?e(a,u,f):t(a,u,f)}return a}return Xj=n,Xj}var qj,sde;function ECt(){if(sde)return qj;sde=1;function t(e,n){for(var r=-1,i=Array(e);++r<e;)i[r]=n(r);return i}return qj=t,qj}var Zj,lde;function Jp(){if(lde)return Zj;lde=1;function t(e){return e!=null&&typeof e=="object"}return Zj=t,Zj}var Kj,cde;function xCt(){if(cde)return Kj;cde=1;var t=Uy(),e=Jp(),n="[object Arguments]";function r(i){return e(i)&&t(i)==n}return Kj=r,Kj}var Qj,ude;function iN(){if(ude)return Qj;ude=1;var t=xCt(),e=Jp(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,a=t((function(){return arguments})())?t:function(o){return e(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Qj=a,Qj}var Jj,fde;function bc(){if(fde)return Jj;fde=1;var t=Array.isArray;return Jj=t,Jj}var mC={exports:{}},ez,hde;function SCt(){if(hde)return ez;hde=1;function t(){return!1}return ez=t,ez}mC.exports;var dde;function qw(){return dde||(dde=1,(function(t,e){var n=cv(),r=SCt(),i=e&&!e.nodeType&&e,a=i&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===i,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,c=l||r;t.exports=c})(mC,mC.exports)),mC.exports}var tz,pde;function I6(){if(pde)return tz;pde=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function n(r,i){var a=typeof r;return i=i??t,!!i&&(a=="number"||a!="symbol"&&e.test(r))&&r>-1&&r%1==0&&r<i}return tz=n,tz}var nz,gde;function Dte(){if(gde)return nz;gde=1;var t=9007199254740991;function e(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=t}return nz=e,nz}var rz,vde;function TCt(){if(vde)return rz;vde=1;var t=Uy(),e=Dte(),n=Jp(),r="[object Arguments]",i="[object Array]",a="[object Boolean]",o="[object Date]",s="[object Error]",l="[object Function]",c="[object Map]",u="[object Number]",f="[object Object]",h="[object RegExp]",d="[object Set]",p="[object String]",g="[object WeakMap]",v="[object ArrayBuffer]",y="[object DataView]",_="[object Float32Array]",E="[object Float64Array]",x="[object Int8Array]",T="[object Int16Array]",S="[object Int32Array]",w="[object Uint8Array]",C="[object Uint8ClampedArray]",D="[object Uint16Array]",L="[object Uint32Array]",B={};B[_]=B[E]=B[x]=B[T]=B[S]=B[w]=B[C]=B[D]=B[L]=!0,B[r]=B[i]=B[v]=B[a]=B[y]=B[o]=B[s]=B[l]=B[c]=B[u]=B[f]=B[h]=B[d]=B[p]=B[g]=!1;function I(U){return n(U)&&e(U.length)&&!!B[t(U)]}return rz=I,rz}var iz,mde;function aN(){if(mde)return iz;mde=1;function t(e){return function(n){return e(n)}}return iz=t,iz}var yC={exports:{}};yC.exports;var yde;function Bte(){return yde||(yde=1,(function(t,e){var n=Zke(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a&&n.process,s=(function(){try{var l=i&&i.require&&i.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}})();t.exports=s})(yC,yC.exports)),yC.exports}var az,_de;function Zw(){if(_de)return az;_de=1;var t=TCt(),e=aN(),n=Bte(),r=n&&n.isTypedArray,i=r?e(r):t;return az=i,az}var oz,bde;function Jke(){if(bde)return oz;bde=1;var t=ECt(),e=iN(),n=bc(),r=qw(),i=I6(),a=Zw(),o=Object.prototype,s=o.hasOwnProperty;function l(c,u){var f=n(c),h=!f&&e(c),d=!f&&!h&&r(c),p=!f&&!h&&!d&&a(c),g=f||h||d||p,v=g?t(c.length,String):[],y=v.length;for(var _ in c)(u||s.call(c,_))&&!(g&&(_=="length"||d&&(_=="offset"||_=="parent")||p&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||i(_,y)))&&v.push(_);return v}return oz=l,oz}var sz,Ede;function L6(){if(Ede)return sz;Ede=1;var t=Object.prototype;function e(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||t;return n===i}return sz=e,sz}var lz,xde;function eDe(){if(xde)return lz;xde=1;function t(e,n){return function(r){return e(n(r))}}return lz=t,lz}var cz,Sde;function ACt(){if(Sde)return cz;Sde=1;var t=eDe(),e=t(Object.keys,Object);return cz=e,cz}var uz,Tde;function Fte(){if(Tde)return uz;Tde=1;var t=L6(),e=ACt(),n=Object.prototype,r=n.hasOwnProperty;function i(a){if(!t(a))return e(a);var o=[];for(var s in Object(a))r.call(a,s)&&s!="constructor"&&o.push(s);return o}return uz=i,uz}var fz,Ade;function jy(){if(Ade)return fz;Ade=1;var t=Xw(),e=Dte();function n(r){return r!=null&&e(r.length)&&!t(r)}return fz=n,fz}var hz,wde;function db(){if(wde)return hz;wde=1;var t=Jke(),e=Fte(),n=jy();function r(i){return n(i)?t(i):e(i)}return hz=r,hz}var dz,Ode;function wCt(){if(Ode)return dz;Ode=1;var t=rN(),e=db();function n(r,i){return r&&t(i,e(i),r)}return dz=n,dz}var pz,Cde;function OCt(){if(Cde)return pz;Cde=1;function t(e){var n=[];if(e!=null)for(var r in Object(e))n.push(r);return n}return pz=t,pz}var gz,Rde;function CCt(){if(Rde)return gz;Rde=1;var t=Jf(),e=L6(),n=OCt(),r=Object.prototype,i=r.hasOwnProperty;function a(o){if(!t(o))return n(o);var s=e(o),l=[];for(var c in o)c=="constructor"&&(s||!i.call(o,c))||l.push(c);return l}return gz=a,gz}var vz,Mde;function nS(){if(Mde)return vz;Mde=1;var t=Jke(),e=CCt(),n=jy();function r(i){return n(i)?t(i,!0):e(i)}return vz=r,vz}var mz,Pde;function RCt(){if(Pde)return mz;Pde=1;var t=rN(),e=nS();function n(r,i){return r&&t(i,e(i),r)}return mz=n,mz}var _C={exports:{}};_C.exports;var Nde;function tDe(){return Nde||(Nde=1,(function(t,e){var n=cv(),r=e&&!e.nodeType&&e,i=r&&!0&&t&&!t.nodeType&&t,a=i&&i.exports===r,o=a?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var f=c.length,h=s?s(f):new c.constructor(f);return c.copy(h),h}t.exports=l})(_C,_C.exports)),_C.exports}var yz,Ide;function Ute(){if(Ide)return yz;Ide=1;function t(e,n){var r=-1,i=e.length;for(n||(n=Array(i));++r<i;)n[r]=e[r];return n}return yz=t,yz}var _z,Lde;function nDe(){if(Lde)return _z;Lde=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=0,o=[];++r<i;){var s=e[r];n(s,r,e)&&(o[a++]=s)}return o}return _z=t,_z}var bz,kde;function rDe(){if(kde)return bz;kde=1;function t(){return[]}return bz=t,bz}var Ez,Dde;function jte(){if(Dde)return Ez;Dde=1;var t=nDe(),e=rDe(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,a=i?function(o){return o==null?[]:(o=Object(o),t(i(o),function(s){return r.call(o,s)}))}:e;return Ez=a,Ez}var xz,Bde;function MCt(){if(Bde)return xz;Bde=1;var t=rN(),e=jte();function n(r,i){return t(r,e(r),i)}return xz=n,xz}var Sz,Fde;function zte(){if(Fde)return Sz;Fde=1;function t(e,n){for(var r=-1,i=n.length,a=e.length;++r<i;)e[a+r]=n[r];return e}return Sz=t,Sz}var Tz,Ude;function k6(){if(Ude)return Tz;Ude=1;var t=eDe(),e=t(Object.getPrototypeOf,Object);return Tz=e,Tz}var Az,jde;function iDe(){if(jde)return Az;jde=1;var t=zte(),e=k6(),n=jte(),r=rDe(),i=Object.getOwnPropertySymbols,a=i?function(o){for(var s=[];o;)t(s,n(o)),o=e(o);return s}:r;return Az=a,Az}var wz,zde;function PCt(){if(zde)return wz;zde=1;var t=rN(),e=iDe();function n(r,i){return t(r,e(r),i)}return wz=n,wz}var Oz,$de;function aDe(){if($de)return Oz;$de=1;var t=zte(),e=bc();function n(r,i,a){var o=i(r);return e(r)?o:t(o,a(r))}return Oz=n,Oz}var Cz,Hde;function oDe(){if(Hde)return Cz;Hde=1;var t=aDe(),e=jte(),n=db();function r(i){return t(i,n,e)}return Cz=r,Cz}var Rz,Gde;function NCt(){if(Gde)return Rz;Gde=1;var t=aDe(),e=iDe(),n=nS();function r(i){return t(i,n,e)}return Rz=r,Rz}var Mz,Wde;function ICt(){if(Wde)return Mz;Wde=1;var t=tS(),e=cv(),n=t(e,"DataView");return Mz=n,Mz}var Pz,Vde;function LCt(){if(Vde)return Pz;Vde=1;var t=tS(),e=cv(),n=t(e,"Promise");return Pz=n,Pz}var Nz,Yde;function sDe(){if(Yde)return Nz;Yde=1;var t=tS(),e=cv(),n=t(e,"Set");return Nz=n,Nz}var Iz,Xde;function kCt(){if(Xde)return Iz;Xde=1;var t=tS(),e=cv(),n=t(e,"WeakMap");return Iz=n,Iz}var Lz,qde;function Kw(){if(qde)return Lz;qde=1;var t=ICt(),e=Ite(),n=LCt(),r=sDe(),i=kCt(),a=Uy(),o=Kke(),s="[object Map]",l="[object Object]",c="[object Promise]",u="[object Set]",f="[object WeakMap]",h="[object DataView]",d=o(t),p=o(e),g=o(n),v=o(r),y=o(i),_=a;return(t&&_(new t(new ArrayBuffer(1)))!=h||e&&_(new e)!=s||n&&_(n.resolve())!=c||r&&_(new r)!=u||i&&_(new i)!=f)&&(_=function(E){var x=a(E),T=x==l?E.constructor:void 0,S=T?o(T):"";if(S)switch(S){case d:return h;case p:return s;case g:return c;case v:return u;case y:return f}return x}),Lz=_,Lz}var kz,Zde;function DCt(){if(Zde)return kz;Zde=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r){var i=r.length,a=new r.constructor(i);return i&&typeof r[0]=="string"&&e.call(r,"index")&&(a.index=r.index,a.input=r.input),a}return kz=n,kz}var Dz,Kde;function lDe(){if(Kde)return Dz;Kde=1;var t=cv(),e=t.Uint8Array;return Dz=e,Dz}var Bz,Qde;function $te(){if(Qde)return Bz;Qde=1;var t=lDe();function e(n){var r=new n.constructor(n.byteLength);return new t(r).set(new t(n)),r}return Bz=e,Bz}var Fz,Jde;function BCt(){if(Jde)return Fz;Jde=1;var t=$te();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Fz=e,Fz}var Uz,epe;function FCt(){if(epe)return Uz;epe=1;var t=/\w*$/;function e(n){var r=new n.constructor(n.source,t.exec(n));return r.lastIndex=n.lastIndex,r}return Uz=e,Uz}var jz,tpe;function UCt(){if(tpe)return jz;tpe=1;var t=Yw(),e=t?t.prototype:void 0,n=e?e.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return jz=r,jz}var zz,npe;function cDe(){if(npe)return zz;npe=1;var t=$te();function e(n,r){var i=r?t(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return zz=e,zz}var $z,rpe;function jCt(){if(rpe)return $z;rpe=1;var t=$te(),e=BCt(),n=FCt(),r=UCt(),i=cDe(),a="[object Boolean]",o="[object Date]",s="[object Map]",l="[object Number]",c="[object RegExp]",u="[object Set]",f="[object String]",h="[object Symbol]",d="[object ArrayBuffer]",p="[object DataView]",g="[object Float32Array]",v="[object Float64Array]",y="[object Int8Array]",_="[object Int16Array]",E="[object Int32Array]",x="[object Uint8Array]",T="[object Uint8ClampedArray]",S="[object Uint16Array]",w="[object Uint32Array]";function C(D,L,B){var I=D.constructor;switch(L){case d:return t(D);case a:case o:return new I(+D);case p:return e(D,B);case g:case v:case y:case _:case E:case x:case T:case S:case w:return i(D,B);case s:return new I;case l:case f:return new I(D);case c:return n(D);case u:return new I;case h:return r(D)}}return $z=C,$z}var Hz,ipe;function uDe(){if(ipe)return Hz;ipe=1;var t=Jf(),e=Object.create,n=(function(){function r(){}return function(i){if(!t(i))return{};if(e)return e(i);r.prototype=i;var a=new r;return r.prototype=void 0,a}})();return Hz=n,Hz}var Gz,ape;function fDe(){if(ape)return Gz;ape=1;var t=uDe(),e=k6(),n=L6();function r(i){return typeof i.constructor=="function"&&!n(i)?t(e(i)):{}}return Gz=r,Gz}var Wz,ope;function zCt(){if(ope)return Wz;ope=1;var t=Kw(),e=Jp(),n="[object Map]";function r(i){return e(i)&&t(i)==n}return Wz=r,Wz}var Vz,spe;function $Ct(){if(spe)return Vz;spe=1;var t=zCt(),e=aN(),n=Bte(),r=n&&n.isMap,i=r?e(r):t;return Vz=i,Vz}var Yz,lpe;function HCt(){if(lpe)return Yz;lpe=1;var t=Kw(),e=Jp(),n="[object Set]";function r(i){return e(i)&&t(i)==n}return Yz=r,Yz}var Xz,cpe;function GCt(){if(cpe)return Xz;cpe=1;var t=HCt(),e=aN(),n=Bte(),r=n&&n.isSet,i=r?e(r):t;return Xz=i,Xz}var qz,upe;function hDe(){if(upe)return qz;upe=1;var t=M6(),e=kte(),n=N6(),r=wCt(),i=RCt(),a=tDe(),o=Ute(),s=MCt(),l=PCt(),c=oDe(),u=NCt(),f=Kw(),h=DCt(),d=jCt(),p=fDe(),g=bc(),v=qw(),y=$Ct(),_=Jf(),E=GCt(),x=db(),T=nS(),S=1,w=2,C=4,D="[object Arguments]",L="[object Array]",B="[object Boolean]",I="[object Date]",U="[object Error]",$="[object Function]",X="[object GeneratorFunction]",N="[object Map]",M="[object Number]",k="[object Object]",z="[object RegExp]",j="[object Set]",V="[object String]",Q="[object Symbol]",ee="[object WeakMap]",re="[object ArrayBuffer]",ne="[object DataView]",le="[object Float32Array]",ue="[object Float64Array]",ve="[object Int8Array]",Se="[object Int16Array]",Re="[object Int32Array]",Xe="[object Uint8Array]",Le="[object Uint8ClampedArray]",Lt="[object Uint16Array]",xt="[object Uint32Array]",dt={};dt[D]=dt[L]=dt[re]=dt[ne]=dt[B]=dt[I]=dt[le]=dt[ue]=dt[ve]=dt[Se]=dt[Re]=dt[N]=dt[M]=dt[k]=dt[z]=dt[j]=dt[V]=dt[Q]=dt[Xe]=dt[Le]=dt[Lt]=dt[xt]=!0,dt[U]=dt[$]=dt[ee]=!1;function Bt(At,zt,rn,Wn,Sn,In){var de,sr=zt&S,zr=zt&w,st=zt&C;if(rn&&(de=Sn?rn(At,Wn,Sn,In):rn(At)),de!==void 0)return de;if(!_(At))return At;var Ft=g(At);if(Ft){if(de=h(At),!sr)return o(At,de)}else{var An=f(At),wn=An==$||An==X;if(v(At))return a(At,sr);if(An==k||An==D||wn&&!Sn){if(de=zr||wn?{}:p(At),!sr)return zr?l(At,i(de,At)):s(At,r(de,At))}else{if(!dt[An])return Sn?At:{};de=d(At,An,sr)}}In||(In=new t);var $n=In.get(At);if($n)return $n;In.set(At,de),E(At)?At.forEach(function(Rr){de.add(Bt(Rr,zt,rn,Rr,At,In))}):y(At)&&At.forEach(function(Rr,ei){de.set(ei,Bt(Rr,zt,rn,ei,At,In))});var Vr=st?zr?u:c:zr?T:x,Tr=Ft?void 0:Vr(At);return e(Tr||At,function(Rr,ei){Tr&&(ei=Rr,Rr=At[ei]),n(de,ei,Bt(Rr,zt,rn,ei,At,In))}),de}return qz=Bt,qz}var Zz,fpe;function WCt(){if(fpe)return Zz;fpe=1;var t=hDe(),e=4;function n(r){return t(r,e)}return Zz=n,Zz}var Kz,hpe;function Hte(){if(hpe)return Kz;hpe=1;function t(e){return function(){return e}}return Kz=t,Kz}var Qz,dpe;function VCt(){if(dpe)return Qz;dpe=1;function t(e){return function(n,r,i){for(var a=-1,o=Object(n),s=i(n),l=s.length;l--;){var c=s[e?l:++a];if(r(o[c],c,o)===!1)break}return n}}return Qz=t,Qz}var Jz,ppe;function Gte(){if(ppe)return Jz;ppe=1;var t=VCt(),e=t();return Jz=e,Jz}var e9,gpe;function Wte(){if(gpe)return e9;gpe=1;var t=Gte(),e=db();function n(r,i){return r&&t(r,i,e)}return e9=n,e9}var t9,vpe;function YCt(){if(vpe)return t9;vpe=1;var t=jy();function e(n,r){return function(i,a){if(i==null)return i;if(!t(i))return n(i,a);for(var o=i.length,s=r?o:-1,l=Object(i);(r?s--:++s<o)&&a(l[s],s,l)!==!1;);return i}}return t9=e,t9}var n9,mpe;function D6(){if(mpe)return n9;mpe=1;var t=Wte(),e=YCt(),n=e(t);return n9=n,n9}var r9,ype;function rS(){if(ype)return r9;ype=1;function t(e){return e}return r9=t,r9}var i9,_pe;function dDe(){if(_pe)return i9;_pe=1;var t=rS();function e(n){return typeof n=="function"?n:t}return i9=e,i9}var a9,bpe;function pDe(){if(bpe)return a9;bpe=1;var t=kte(),e=D6(),n=dDe(),r=bc();function i(a,o){var s=r(a)?t:e;return s(a,n(o))}return a9=i,a9}var o9,Epe;function gDe(){return Epe||(Epe=1,o9=pDe()),o9}var s9,xpe;function XCt(){if(xpe)return s9;xpe=1;var t=D6();function e(n,r){var i=[];return t(n,function(a,o,s){r(a,o,s)&&i.push(a)}),i}return s9=e,s9}var l9,Spe;function qCt(){if(Spe)return l9;Spe=1;var t="__lodash_hash_undefined__";function e(n){return this.__data__.set(n,t),this}return l9=e,l9}var c9,Tpe;function ZCt(){if(Tpe)return c9;Tpe=1;function t(e){return this.__data__.has(e)}return c9=t,c9}var u9,Ape;function vDe(){if(Ape)return u9;Ape=1;var t=Lte(),e=qCt(),n=ZCt();function r(i){var a=-1,o=i==null?0:i.length;for(this.__data__=new t;++a<o;)this.add(i[a])}return r.prototype.add=r.prototype.push=e,r.prototype.has=n,u9=r,u9}var f9,wpe;function KCt(){if(wpe)return f9;wpe=1;function t(e,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(e[r],r,e))return!0;return!1}return f9=t,f9}var h9,Ope;function mDe(){if(Ope)return h9;Ope=1;function t(e,n){return e.has(n)}return h9=t,h9}var d9,Cpe;function yDe(){if(Cpe)return d9;Cpe=1;var t=vDe(),e=KCt(),n=mDe(),r=1,i=2;function a(o,s,l,c,u,f){var h=l&r,d=o.length,p=s.length;if(d!=p&&!(h&&p>d))return!1;var g=f.get(o),v=f.get(s);if(g&&v)return g==s&&v==o;var y=-1,_=!0,E=l&i?new t:void 0;for(f.set(o,s),f.set(s,o);++y<d;){var x=o[y],T=s[y];if(c)var S=h?c(T,x,y,s,o,f):c(x,T,y,o,s,f);if(S!==void 0){if(S)continue;_=!1;break}if(E){if(!e(s,function(w,C){if(!n(E,C)&&(x===w||u(x,w,l,c,f)))return E.push(C)})){_=!1;break}}else if(!(x===T||u(x,T,l,c,f))){_=!1;break}}return f.delete(o),f.delete(s),_}return d9=a,d9}var p9,Rpe;function QCt(){if(Rpe)return p9;Rpe=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i,a){r[++n]=[a,i]}),r}return p9=t,p9}var g9,Mpe;function Vte(){if(Mpe)return g9;Mpe=1;function t(e){var n=-1,r=Array(e.size);return e.forEach(function(i){r[++n]=i}),r}return g9=t,g9}var v9,Ppe;function JCt(){if(Ppe)return v9;Ppe=1;var t=Yw(),e=lDe(),n=Vw(),r=yDe(),i=QCt(),a=Vte(),o=1,s=2,l="[object Boolean]",c="[object Date]",u="[object Error]",f="[object Map]",h="[object Number]",d="[object RegExp]",p="[object Set]",g="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",_="[object DataView]",E=t?t.prototype:void 0,x=E?E.valueOf:void 0;function T(S,w,C,D,L,B,I){switch(C){case _:if(S.byteLength!=w.byteLength||S.byteOffset!=w.byteOffset)return!1;S=S.buffer,w=w.buffer;case y:return!(S.byteLength!=w.byteLength||!B(new e(S),new e(w)));case l:case c:case h:return n(+S,+w);case u:return S.name==w.name&&S.message==w.message;case d:case g:return S==w+"";case f:var U=i;case p:var $=D&o;if(U||(U=a),S.size!=w.size&&!$)return!1;var X=I.get(S);if(X)return X==w;D|=s,I.set(S,w);var N=r(U(S),U(w),D,L,B,I);return I.delete(S),N;case v:if(x)return x.call(S)==x.call(w)}return!1}return v9=T,v9}var m9,Npe;function eRt(){if(Npe)return m9;Npe=1;var t=oDe(),e=1,n=Object.prototype,r=n.hasOwnProperty;function i(a,o,s,l,c,u){var f=s&e,h=t(a),d=h.length,p=t(o),g=p.length;if(d!=g&&!f)return!1;for(var v=d;v--;){var y=h[v];if(!(f?y in o:r.call(o,y)))return!1}var _=u.get(a),E=u.get(o);if(_&&E)return _==o&&E==a;var x=!0;u.set(a,o),u.set(o,a);for(var T=f;++v<d;){y=h[v];var S=a[y],w=o[y];if(l)var C=f?l(w,S,y,o,a,u):l(S,w,y,a,o,u);if(!(C===void 0?S===w||c(S,w,s,l,u):C)){x=!1;break}T||(T=y=="constructor")}if(x&&!T){var D=a.constructor,L=o.constructor;D!=L&&"constructor"in a&&"constructor"in o&&!(typeof D=="function"&&D instanceof D&&typeof L=="function"&&L instanceof L)&&(x=!1)}return u.delete(a),u.delete(o),x}return m9=i,m9}var y9,Ipe;function tRt(){if(Ipe)return y9;Ipe=1;var t=M6(),e=yDe(),n=JCt(),r=eRt(),i=Kw(),a=bc(),o=qw(),s=Zw(),l=1,c="[object Arguments]",u="[object Array]",f="[object Object]",h=Object.prototype,d=h.hasOwnProperty;function p(g,v,y,_,E,x){var T=a(g),S=a(v),w=T?u:i(g),C=S?u:i(v);w=w==c?f:w,C=C==c?f:C;var D=w==f,L=C==f,B=w==C;if(B&&o(g)){if(!o(v))return!1;T=!0,D=!1}if(B&&!D)return x||(x=new t),T||s(g)?e(g,v,y,_,E,x):n(g,v,w,y,_,E,x);if(!(y&l)){var I=D&&d.call(g,"__wrapped__"),U=L&&d.call(v,"__wrapped__");if(I||U){var $=I?g.value():g,X=U?v.value():v;return x||(x=new t),E($,X,y,_,x)}}return B?(x||(x=new t),r(g,v,y,_,E,x)):!1}return y9=p,y9}var _9,Lpe;function Yte(){if(Lpe)return _9;Lpe=1;var t=tRt(),e=Jp();function n(r,i,a,o,s){return r===i?!0:r==null||i==null||!e(r)&&!e(i)?r!==r&&i!==i:t(r,i,a,o,n,s)}return _9=n,_9}var b9,kpe;function nRt(){if(kpe)return b9;kpe=1;var t=M6(),e=Yte(),n=1,r=2;function i(a,o,s,l){var c=s.length,u=c,f=!l;if(a==null)return!u;for(a=Object(a);c--;){var h=s[c];if(f&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++c<u;){h=s[c];var d=h[0],p=a[d],g=h[1];if(f&&h[2]){if(p===void 0&&!(d in a))return!1}else{var v=new t;if(l)var y=l(p,g,d,a,o,v);if(!(y===void 0?e(g,p,n|r,l,v):y))return!1}}return!0}return b9=i,b9}var E9,Dpe;function _De(){if(Dpe)return E9;Dpe=1;var t=Jf();function e(n){return n===n&&!t(n)}return E9=e,E9}var x9,Bpe;function rRt(){if(Bpe)return x9;Bpe=1;var t=_De(),e=db();function n(r){for(var i=e(r),a=i.length;a--;){var o=i[a],s=r[o];i[a]=[o,s,t(s)]}return i}return x9=n,x9}var S9,Fpe;function bDe(){if(Fpe)return S9;Fpe=1;function t(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}return S9=t,S9}var T9,Upe;function iRt(){if(Upe)return T9;Upe=1;var t=nRt(),e=rRt(),n=bDe();function r(i){var a=e(i);return a.length==1&&a[0][2]?n(a[0][0],a[0][1]):function(o){return o===i||t(o,i,a)}}return T9=r,T9}var A9,jpe;function Qw(){if(jpe)return A9;jpe=1;var t=Uy(),e=Jp(),n="[object Symbol]";function r(i){return typeof i=="symbol"||e(i)&&t(i)==n}return A9=r,A9}var w9,zpe;function Xte(){if(zpe)return w9;zpe=1;var t=bc(),e=Qw(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(a,o){if(t(a))return!1;var s=typeof a;return s=="number"||s=="symbol"||s=="boolean"||a==null||e(a)?!0:r.test(a)||!n.test(a)||o!=null&&a in Object(o)}return w9=i,w9}var O9,$pe;function aRt(){if($pe)return O9;$pe=1;var t=Lte(),e="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(e);var a=function(){var o=arguments,s=i?i.apply(this,o):o[0],l=a.cache;if(l.has(s))return l.get(s);var c=r.apply(this,o);return a.cache=l.set(s,c)||l,c};return a.cache=new(n.Cache||t),a}return n.Cache=t,O9=n,O9}var C9,Hpe;function oRt(){if(Hpe)return C9;Hpe=1;var t=aRt(),e=500;function n(r){var i=t(r,function(o){return a.size===e&&a.clear(),o}),a=i.cache;return i}return C9=n,C9}var R9,Gpe;function sRt(){if(Gpe)return R9;Gpe=1;var t=oRt(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=t(function(i){var a=[];return i.charCodeAt(0)===46&&a.push(""),i.replace(e,function(o,s,l,c){a.push(l?c.replace(n,"$1"):s||o)}),a});return R9=r,R9}var M9,Wpe;function oN(){if(Wpe)return M9;Wpe=1;function t(e,n){for(var r=-1,i=e==null?0:e.length,a=Array(i);++r<i;)a[r]=n(e[r],r,e);return a}return M9=t,M9}var P9,Vpe;function lRt(){if(Vpe)return P9;Vpe=1;var t=Yw(),e=oN(),n=bc(),r=Qw(),i=t?t.prototype:void 0,a=i?i.toString:void 0;function o(s){if(typeof s=="string")return s;if(n(s))return e(s,o)+"";if(r(s))return a?a.call(s):"";var l=s+"";return l=="0"&&1/s==-1/0?"-0":l}return P9=o,P9}var N9,Ype;function Jw(){if(Ype)return N9;Ype=1;var t=lRt();function e(n){return n==null?"":t(n)}return N9=e,N9}var I9,Xpe;function B6(){if(Xpe)return I9;Xpe=1;var t=bc(),e=Xte(),n=sRt(),r=Jw();function i(a,o){return t(a)?a:e(a,o)?[a]:n(r(a))}return I9=i,I9}var L9,qpe;function sN(){if(qpe)return L9;qpe=1;var t=Qw();function e(n){if(typeof n=="string"||t(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return L9=e,L9}var k9,Zpe;function F6(){if(Zpe)return k9;Zpe=1;var t=B6(),e=sN();function n(r,i){i=t(i,r);for(var a=0,o=i.length;r!=null&&a<o;)r=r[e(i[a++])];return a&&a==o?r:void 0}return k9=n,k9}var D9,Kpe;function EDe(){if(Kpe)return D9;Kpe=1;var t=F6();function e(n,r,i){var a=n==null?void 0:t(n,r);return a===void 0?i:a}return D9=e,D9}var B9,Qpe;function cRt(){if(Qpe)return B9;Qpe=1;function t(e,n){return e!=null&&n in Object(e)}return B9=t,B9}var F9,Jpe;function xDe(){if(Jpe)return F9;Jpe=1;var t=B6(),e=iN(),n=bc(),r=I6(),i=Dte(),a=sN();function o(s,l,c){l=t(l,s);for(var u=-1,f=l.length,h=!1;++u<f;){var d=a(l[u]);if(!(h=s!=null&&c(s,d)))break;s=s[d]}return h||++u!=f?h:(f=s==null?0:s.length,!!f&&i(f)&&r(d,f)&&(n(s)||e(s)))}return F9=o,F9}var U9,ege;function SDe(){if(ege)return U9;ege=1;var t=cRt(),e=xDe();function n(r,i){return r!=null&&e(r,i,t)}return U9=n,U9}var j9,tge;function uRt(){if(tge)return j9;tge=1;var t=Yte(),e=EDe(),n=SDe(),r=Xte(),i=_De(),a=bDe(),o=sN(),s=1,l=2;function c(u,f){return r(u)&&i(f)?a(o(u),f):function(h){var d=e(h,u);return d===void 0&&d===f?n(h,u):t(f,d,s|l)}}return j9=c,j9}var z9,nge;function TDe(){if(nge)return z9;nge=1;function t(e){return function(n){return n?.[e]}}return z9=t,z9}var $9,rge;function fRt(){if(rge)return $9;rge=1;var t=F6();function e(n){return function(r){return t(r,n)}}return $9=e,$9}var H9,ige;function hRt(){if(ige)return H9;ige=1;var t=TDe(),e=fRt(),n=Xte(),r=sN();function i(a){return n(a)?t(r(a)):e(a)}return H9=i,H9}var G9,age;function zy(){if(age)return G9;age=1;var t=iRt(),e=uRt(),n=rS(),r=bc(),i=hRt();function a(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?e(o[0],o[1]):t(o):i(o)}return G9=a,G9}var W9,oge;function ADe(){if(oge)return W9;oge=1;var t=nDe(),e=XCt(),n=zy(),r=bc();function i(a,o){var s=r(a)?t:e;return s(a,n(o,3))}return W9=i,W9}var V9,sge;function dRt(){if(sge)return V9;sge=1;var t=Object.prototype,e=t.hasOwnProperty;function n(r,i){return r!=null&&e.call(r,i)}return V9=n,V9}var Y9,lge;function wDe(){if(lge)return Y9;lge=1;var t=dRt(),e=xDe();function n(r,i){return r!=null&&e(r,i,t)}return Y9=n,Y9}var X9,cge;function pRt(){if(cge)return X9;cge=1;var t=Fte(),e=Kw(),n=iN(),r=bc(),i=jy(),a=qw(),o=L6(),s=Zw(),l="[object Map]",c="[object Set]",u=Object.prototype,f=u.hasOwnProperty;function h(d){if(d==null)return!0;if(i(d)&&(r(d)||typeof d=="string"||typeof d.splice=="function"||a(d)||s(d)||n(d)))return!d.length;var p=e(d);if(p==l||p==c)return!d.size;if(o(d))return!t(d).length;for(var g in d)if(f.call(d,g))return!1;return!0}return X9=h,X9}var q9,uge;function qte(){if(uge)return q9;uge=1;function t(e){return e===void 0}return q9=t,q9}var Z9,fge;function ODe(){if(fge)return Z9;fge=1;var t=D6(),e=jy();function n(r,i){var a=-1,o=e(r)?Array(r.length):[];return t(r,function(s,l,c){o[++a]=i(s,l,c)}),o}return Z9=n,Z9}var K9,hge;function CDe(){if(hge)return K9;hge=1;var t=oN(),e=zy(),n=ODe(),r=bc();function i(a,o){var s=r(a)?t:n;return s(a,e(o,3))}return K9=i,K9}var Q9,dge;function RDe(){if(dge)return Q9;dge=1;function t(e,n,r,i){var a=-1,o=e==null?0:e.length;for(i&&o&&(r=e[++a]);++a<o;)r=n(r,e[a],a,e);return r}return Q9=t,Q9}var J9,pge;function gRt(){if(pge)return J9;pge=1;function t(e,n,r,i,a){return a(e,function(o,s,l){r=i?(i=!1,o):n(r,o,s,l)}),r}return J9=t,J9}var e$,gge;function MDe(){if(gge)return e$;gge=1;var t=RDe(),e=D6(),n=zy(),r=gRt(),i=bc();function a(o,s,l){var c=i(o)?t:r,u=arguments.length<3;return c(o,n(s,4),l,u,e)}return e$=a,e$}var t$,vge;function PDe(){if(vge)return t$;vge=1;var t=Uy(),e=bc(),n=Jp(),r="[object String]";function i(a){return typeof a=="string"||!e(a)&&n(a)&&t(a)==r}return t$=i,t$}var n$,mge;function vRt(){if(mge)return n$;mge=1;var t=TDe(),e=t("length");return n$=e,n$}var r$,yge;function Zte(){if(yge)return r$;yge=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="\\u200d",s=RegExp("["+o+t+i+a+"]");function l(c){return s.test(c)}return r$=l,r$}var i$,_ge;function mRt(){if(_ge)return i$;_ge=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="["+t+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",u="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",p=c+"?",g="["+a+"]?",v="(?:"+d+"(?:"+[u,f,h].join("|")+")"+g+p+")*",y=g+p+v,_="(?:"+[u+s+"?",s,f,h,o].join("|")+")",E=RegExp(l+"(?="+l+")|"+_+y,"g");function x(T){for(var S=E.lastIndex=0;E.test(T);)++S;return S}return i$=x,i$}var a$,bge;function yRt(){if(bge)return a$;bge=1;var t=vRt(),e=Zte(),n=mRt();function r(i){return e(i)?n(i):t(i)}return a$=r,a$}var o$,Ege;function _Rt(){if(Ege)return o$;Ege=1;var t=Fte(),e=Kw(),n=jy(),r=PDe(),i=yRt(),a="[object Map]",o="[object Set]";function s(l){if(l==null)return 0;if(n(l))return r(l)?i(l):l.length;var c=e(l);return c==a||c==o?l.size:t(l).length}return o$=s,o$}var s$,xge;function bRt(){if(xge)return s$;xge=1;var t=kte(),e=uDe(),n=Wte(),r=zy(),i=k6(),a=bc(),o=qw(),s=Xw(),l=Jf(),c=Zw();function u(f,h,d){var p=a(f),g=p||o(f)||c(f);if(h=r(h,4),d==null){var v=f&&f.constructor;g?d=p?new v:[]:l(f)?d=s(v)?e(i(f)):{}:d={}}return(g?t:n)(f,function(y,_,E){return h(d,y,_,E)}),d}return s$=u,s$}var l$,Sge;function ERt(){if(Sge)return l$;Sge=1;var t=Yw(),e=iN(),n=bc(),r=t?t.isConcatSpreadable:void 0;function i(a){return n(a)||e(a)||!!(r&&a&&a[r])}return l$=i,l$}var c$,Tge;function Kte(){if(Tge)return c$;Tge=1;var t=zte(),e=ERt();function n(r,i,a,o,s){var l=-1,c=r.length;for(a||(a=e),s||(s=[]);++l<c;){var u=r[l];i>0&&a(u)?i>1?n(u,i-1,a,o,s):t(s,u):o||(s[s.length]=u)}return s}return c$=n,c$}var u$,Age;function xRt(){if(Age)return u$;Age=1;function t(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}return u$=t,u$}var f$,wge;function NDe(){if(wge)return f$;wge=1;var t=xRt(),e=Math.max;function n(r,i,a){return i=e(i===void 0?r.length-1:i,0),function(){for(var o=arguments,s=-1,l=e(o.length-i,0),c=Array(l);++s<l;)c[s]=o[i+s];s=-1;for(var u=Array(i+1);++s<i;)u[s]=o[s];return u[i]=a(c),t(r,this,u)}}return f$=n,f$}var h$,Oge;function SRt(){if(Oge)return h$;Oge=1;var t=Hte(),e=Qke(),n=rS(),r=e?function(i,a){return e(i,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:n;return h$=r,h$}var d$,Cge;function TRt(){if(Cge)return d$;Cge=1;var t=800,e=16,n=Date.now;function r(i){var a=0,o=0;return function(){var s=n(),l=e-(s-o);if(o=s,l>0){if(++a>=t)return arguments[0]}else a=0;return i.apply(void 0,arguments)}}return d$=r,d$}var p$,Rge;function IDe(){if(Rge)return p$;Rge=1;var t=SRt(),e=TRt(),n=e(t);return p$=n,p$}var g$,Mge;function lN(){if(Mge)return g$;Mge=1;var t=rS(),e=NDe(),n=IDe();function r(i,a){return n(e(i,a,t),i+"")}return g$=r,g$}var v$,Pge;function LDe(){if(Pge)return v$;Pge=1;function t(e,n,r,i){for(var a=e.length,o=r+(i?1:-1);i?o--:++o<a;)if(n(e[o],o,e))return o;return-1}return v$=t,v$}var m$,Nge;function ARt(){if(Nge)return m$;Nge=1;function t(e){return e!==e}return m$=t,m$}var y$,Ige;function wRt(){if(Ige)return y$;Ige=1;function t(e,n,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===n)return i;return-1}return y$=t,y$}var _$,Lge;function kDe(){if(Lge)return _$;Lge=1;var t=LDe(),e=ARt(),n=wRt();function r(i,a,o){return a===a?n(i,a,o):t(i,e,o)}return _$=r,_$}var b$,kge;function ORt(){if(kge)return b$;kge=1;var t=kDe();function e(n,r){var i=n==null?0:n.length;return!!i&&t(n,r,0)>-1}return b$=e,b$}var E$,Dge;function CRt(){if(Dge)return E$;Dge=1;function t(e,n,r){for(var i=-1,a=e==null?0:e.length;++i<a;)if(r(n,e[i]))return!0;return!1}return E$=t,E$}var x$,Bge;function RRt(){if(Bge)return x$;Bge=1;function t(){}return x$=t,x$}var S$,Fge;function MRt(){if(Fge)return S$;Fge=1;var t=sDe(),e=RRt(),n=Vte(),r=1/0,i=t&&1/n(new t([,-0]))[1]==r?function(a){return new t(a)}:e;return S$=i,S$}var T$,Uge;function DDe(){if(Uge)return T$;Uge=1;var t=vDe(),e=ORt(),n=CRt(),r=mDe(),i=MRt(),a=Vte(),o=200;function s(l,c,u){var f=-1,h=e,d=l.length,p=!0,g=[],v=g;if(u)p=!1,h=n;else if(d>=o){var y=c?null:i(l);if(y)return a(y);p=!1,h=r,v=new t}else v=c?[]:g;e:for(;++f<d;){var _=l[f],E=c?c(_):_;if(_=u||_!==0?_:0,p&&E===E){for(var x=v.length;x--;)if(v[x]===E)continue e;c&&v.push(E),g.push(_)}else h(v,E,u)||(v!==g&&v.push(E),g.push(_))}return g}return T$=s,T$}var A$,jge;function BDe(){if(jge)return A$;jge=1;var t=jy(),e=Jp();function n(r){return e(r)&&t(r)}return A$=n,A$}var w$,zge;function PRt(){if(zge)return w$;zge=1;var t=Kte(),e=lN(),n=DDe(),r=BDe(),i=e(function(a){return n(t(a,1,r,!0))});return w$=i,w$}var O$,$ge;function NRt(){if($ge)return O$;$ge=1;var t=oN();function e(n,r){return t(r,function(i){return n[i]})}return O$=e,O$}var C$,Hge;function FDe(){if(Hge)return C$;Hge=1;var t=NRt(),e=db();function n(r){return r==null?[]:t(r,e(r))}return C$=n,C$}var R$,Gge;function eg(){if(Gge)return R$;Gge=1;var t;if(typeof Nte=="function")try{t={clone:WCt(),constant:Hte(),each:gDe(),filter:ADe(),has:wDe(),isArray:bc(),isEmpty:pRt(),isFunction:Xw(),isUndefined:qte(),keys:db(),map:CDe(),reduce:MDe(),size:_Rt(),transform:bRt(),union:PRt(),values:FDe()}}catch{}return t||(t=window._),R$=t,R$}var M$,Wge;function Qte(){if(Wge)return M$;Wge=1;var t=eg();M$=i;var e="\0",n="\0",r="";function i(u){this._isDirected=t.has(u,"directed")?u.directed:!0,this._isMultigraph=t.has(u,"multigraph")?u.multigraph:!1,this._isCompound=t.has(u,"compound")?u.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(u){return this._label=u,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(u){return t.isFunction(u)||(u=t.constant(u)),this._defaultNodeLabelFn=u,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return t.keys(this._nodes)},i.prototype.sources=function(){var u=this;return t.filter(this.nodes(),function(f){return t.isEmpty(u._in[f])})},i.prototype.sinks=function(){var u=this;return t.filter(this.nodes(),function(f){return t.isEmpty(u._out[f])})},i.prototype.setNodes=function(u,f){var h=arguments,d=this;return t.each(u,function(p){h.length>1?d.setNode(p,f):d.setNode(p)}),this},i.prototype.setNode=function(u,f){return t.has(this._nodes,u)?(arguments.length>1&&(this._nodes[u]=f),this):(this._nodes[u]=arguments.length>1?f:this._defaultNodeLabelFn(u),this._isCompound&&(this._parent[u]=n,this._children[u]={},this._children[n][u]=!0),this._in[u]={},this._preds[u]={},this._out[u]={},this._sucs[u]={},++this._nodeCount,this)},i.prototype.node=function(u){return this._nodes[u]},i.prototype.hasNode=function(u){return t.has(this._nodes,u)},i.prototype.removeNode=function(u){var f=this;if(t.has(this._nodes,u)){var h=function(d){f.removeEdge(f._edgeObjs[d])};delete this._nodes[u],this._isCompound&&(this._removeFromParentsChildList(u),delete this._parent[u],t.each(this.children(u),function(d){f.setParent(d)}),delete this._children[u]),t.each(t.keys(this._in[u]),h),delete this._in[u],delete this._preds[u],t.each(t.keys(this._out[u]),h),delete this._out[u],delete this._sucs[u],--this._nodeCount}return this},i.prototype.setParent=function(u,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(f))f=n;else{f+="";for(var h=f;!t.isUndefined(h);h=this.parent(h))if(h===u)throw new Error("Setting "+f+" as parent of "+u+" would create a cycle");this.setNode(f)}return this.setNode(u),this._removeFromParentsChildList(u),this._parent[u]=f,this._children[f][u]=!0,this},i.prototype._removeFromParentsChildList=function(u){delete this._children[this._parent[u]][u]},i.prototype.parent=function(u){if(this._isCompound){var f=this._parent[u];if(f!==n)return f}},i.prototype.children=function(u){if(t.isUndefined(u)&&(u=n),this._isCompound){var f=this._children[u];if(f)return t.keys(f)}else{if(u===n)return this.nodes();if(this.hasNode(u))return[]}},i.prototype.predecessors=function(u){var f=this._preds[u];if(f)return t.keys(f)},i.prototype.successors=function(u){var f=this._sucs[u];if(f)return t.keys(f)},i.prototype.neighbors=function(u){var f=this.predecessors(u);if(f)return t.union(f,this.successors(u))},i.prototype.isLeaf=function(u){var f;return this.isDirected()?f=this.successors(u):f=this.neighbors(u),f.length===0},i.prototype.filterNodes=function(u){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;t.each(this._nodes,function(g,v){u(v)&&f.setNode(v,g)}),t.each(this._edgeObjs,function(g){f.hasNode(g.v)&&f.hasNode(g.w)&&f.setEdge(g,h.edge(g))});var d={};function p(g){var v=h.parent(g);return v===void 0||f.hasNode(v)?(d[g]=v,v):v in d?d[v]:p(v)}return this._isCompound&&t.each(f.nodes(),function(g){f.setParent(g,p(g))}),f},i.prototype.setDefaultEdgeLabel=function(u){return t.isFunction(u)||(u=t.constant(u)),this._defaultEdgeLabelFn=u,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return t.values(this._edgeObjs)},i.prototype.setPath=function(u,f){var h=this,d=arguments;return t.reduce(u,function(p,g){return d.length>1?h.setEdge(p,g,f):h.setEdge(p,g),g}),this},i.prototype.setEdge=function(){var u,f,h,d,p=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(u=g.v,f=g.w,h=g.name,arguments.length===2&&(d=arguments[1],p=!0)):(u=g,f=arguments[1],h=arguments[3],arguments.length>2&&(d=arguments[2],p=!0)),u=""+u,f=""+f,t.isUndefined(h)||(h=""+h);var v=s(this._isDirected,u,f,h);if(t.has(this._edgeLabels,v))return p&&(this._edgeLabels[v]=d),this;if(!t.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(u),this.setNode(f),this._edgeLabels[v]=p?d:this._defaultEdgeLabelFn(u,f,h);var y=l(this._isDirected,u,f,h);return u=y.v,f=y.w,Object.freeze(y),this._edgeObjs[v]=y,a(this._preds[f],u),a(this._sucs[u],f),this._in[f][v]=y,this._out[u][v]=y,this._edgeCount++,this},i.prototype.edge=function(u,f,h){var d=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,f,h);return this._edgeLabels[d]},i.prototype.hasEdge=function(u,f,h){var d=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,f,h);return t.has(this._edgeLabels,d)},i.prototype.removeEdge=function(u,f,h){var d=arguments.length===1?c(this._isDirected,arguments[0]):s(this._isDirected,u,f,h),p=this._edgeObjs[d];return p&&(u=p.v,f=p.w,delete this._edgeLabels[d],delete this._edgeObjs[d],o(this._preds[f],u),o(this._sucs[u],f),delete this._in[f][d],delete this._out[u][d],this._edgeCount--),this},i.prototype.inEdges=function(u,f){var h=this._in[u];if(h){var d=t.values(h);return f?t.filter(d,function(p){return p.v===f}):d}},i.prototype.outEdges=function(u,f){var h=this._out[u];if(h){var d=t.values(h);return f?t.filter(d,function(p){return p.w===f}):d}},i.prototype.nodeEdges=function(u,f){var h=this.inEdges(u,f);if(h)return h.concat(this.outEdges(u,f))};function a(u,f){u[f]?u[f]++:u[f]=1}function o(u,f){--u[f]||delete u[f]}function s(u,f,h,d){var p=""+f,g=""+h;if(!u&&p>g){var v=p;p=g,g=v}return p+r+g+r+(t.isUndefined(d)?e:d)}function l(u,f,h,d){var p=""+f,g=""+h;if(!u&&p>g){var v=p;p=g,g=v}var y={v:p,w:g};return d&&(y.name=d),y}function c(u,f){return s(u,f.v,f.w,f.name)}return M$}var P$,Vge;function IRt(){return Vge||(Vge=1,P$="2.1.8"),P$}var N$,Yge;function LRt(){return Yge||(Yge=1,N$={Graph:Qte(),version:IRt()}),N$}var I$,Xge;function kRt(){if(Xge)return I$;Xge=1;var t=eg(),e=Qte();I$={write:n,read:a};function n(o){var s={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return t.isUndefined(o.graph())||(s.value=t.clone(o.graph())),s}function r(o){return t.map(o.nodes(),function(s){var l=o.node(s),c=o.parent(s),u={v:s};return t.isUndefined(l)||(u.value=l),t.isUndefined(c)||(u.parent=c),u})}function i(o){return t.map(o.edges(),function(s){var l=o.edge(s),c={v:s.v,w:s.w};return t.isUndefined(s.name)||(c.name=s.name),t.isUndefined(l)||(c.value=l),c})}function a(o){var s=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(l){s.setNode(l.v,l.value),l.parent&&s.setParent(l.v,l.parent)}),t.each(o.edges,function(l){s.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),s}return I$}var L$,qge;function DRt(){if(qge)return L$;qge=1;var t=eg();L$=e;function e(n){var r={},i=[],a;function o(s){t.has(r,s)||(r[s]=!0,a.push(s),t.each(n.successors(s),o),t.each(n.predecessors(s),o))}return t.each(n.nodes(),function(s){a=[],o(s),a.length&&i.push(a)}),i}return L$}var k$,Zge;function UDe(){if(Zge)return k$;Zge=1;var t=eg();k$=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(n){return n.key})},e.prototype.has=function(n){return t.has(this._keyIndices,n)},e.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!t.has(i,n)){var a=this._arr,o=a.length;return i[n]=o,a.push({key:n,priority:r}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},e.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},e.prototype._heapify=function(n){var r=this._arr,i=2*n,a=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,a<r.length&&(o=r[a].priority<r[o].priority?a:o),o!==n&&(this._swap(n,o),this._heapify(o)))},e.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,a;n!==0&&(a=n>>1,!(r[a].priority<i));)this._swap(n,a),n=a},e.prototype._swap=function(n,r){var i=this._arr,a=this._keyIndices,o=i[n],s=i[r];i[n]=s,i[r]=o,a[s.key]=n,a[o.key]=r},k$}var D$,Kge;function jDe(){if(Kge)return D$;Kge=1;var t=eg(),e=UDe();D$=r;var n=t.constant(1);function r(a,o,s,l){return i(a,String(o),s||n,l||function(c){return a.outEdges(c)})}function i(a,o,s,l){var c={},u=new e,f,h,d=function(p){var g=p.v!==f?p.v:p.w,v=c[g],y=s(p),_=h.distance+y;if(y<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+p+" Weight: "+y);_<v.distance&&(v.distance=_,v.predecessor=f,u.decrease(g,_))};for(a.nodes().forEach(function(p){var g=p===o?0:Number.POSITIVE_INFINITY;c[p]={distance:g},u.add(p,g)});u.size()>0&&(f=u.removeMin(),h=c[f],h.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(d);return c}return D$}var B$,Qge;function BRt(){if(Qge)return B$;Qge=1;var t=jDe(),e=eg();B$=n;function n(r,i,a){return e.transform(r.nodes(),function(o,s){o[s]=t(r,s,i,a)},{})}return B$}var F$,Jge;function zDe(){if(Jge)return F$;Jge=1;var t=eg();F$=e;function e(n){var r=0,i=[],a={},o=[];function s(l){var c=a[l]={onStack:!0,lowlink:r,index:r++};if(i.push(l),n.successors(l).forEach(function(h){t.has(a,h)?a[h].onStack&&(c.lowlink=Math.min(c.lowlink,a[h].index)):(s(h),c.lowlink=Math.min(c.lowlink,a[h].lowlink))}),c.lowlink===c.index){var u=[],f;do f=i.pop(),a[f].onStack=!1,u.push(f);while(l!==f);o.push(u)}}return n.nodes().forEach(function(l){t.has(a,l)||s(l)}),o}return F$}var U$,eve;function FRt(){if(eve)return U$;eve=1;var t=eg(),e=zDe();U$=n;function n(r){return t.filter(e(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return U$}var j$,tve;function URt(){if(tve)return j$;tve=1;var t=eg();j$=n;var e=t.constant(1);function n(i,a,o){return r(i,a||e,o||function(s){return i.outEdges(s)})}function r(i,a,o){var s={},l=i.nodes();return l.forEach(function(c){s[c]={},s[c][c]={distance:0},l.forEach(function(u){c!==u&&(s[c][u]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(u){var f=u.v===c?u.w:u.v,h=a(u);s[c][f]={distance:h,predecessor:c}})}),l.forEach(function(c){var u=s[c];l.forEach(function(f){var h=s[f];l.forEach(function(d){var p=h[c],g=u[d],v=h[d],y=p.distance+g.distance;y<v.distance&&(v.distance=y,v.predecessor=g.predecessor)})})}),s}return j$}var z$,nve;function $De(){if(nve)return z$;nve=1;var t=eg();z$=e,e.CycleException=n;function e(r){var i={},a={},o=[];function s(l){if(t.has(a,l))throw new n;t.has(i,l)||(a[l]=!0,i[l]=!0,t.each(r.predecessors(l),s),delete a[l],o.push(l))}if(t.each(r.sinks(),s),t.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,z$}var $$,rve;function jRt(){if(rve)return $$;rve=1;var t=$De();$$=e;function e(n){try{t(n)}catch(r){if(r instanceof t.CycleException)return!1;throw r}return!0}return $$}var H$,ive;function HDe(){if(ive)return H$;ive=1;var t=eg();H$=e;function e(r,i,a){t.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),s=[],l={};return t.each(i,function(c){if(!r.hasNode(c))throw new Error("Graph does not have node: "+c);n(r,c,a==="post",l,o,s)}),s}function n(r,i,a,o,s,l){t.has(o,i)||(o[i]=!0,a||l.push(i),t.each(s(i),function(c){n(r,c,a,o,s,l)}),a&&l.push(i))}return H$}var G$,ave;function zRt(){if(ave)return G$;ave=1;var t=HDe();G$=e;function e(n,r){return t(n,r,"post")}return G$}var W$,ove;function $Rt(){if(ove)return W$;ove=1;var t=HDe();W$=e;function e(n,r){return t(n,r,"pre")}return W$}var V$,sve;function HRt(){if(sve)return V$;sve=1;var t=eg(),e=Qte(),n=UDe();V$=r;function r(i,a){var o=new e,s={},l=new n,c;function u(h){var d=h.v===c?h.w:h.v,p=l.priority(d);if(p!==void 0){var g=a(h);g<p&&(s[d]=c,l.decrease(d,g))}}if(i.nodeCount()===0)return o;t.each(i.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),l.decrease(i.nodes()[0],0);for(var f=!1;l.size()>0;){if(c=l.removeMin(),t.has(s,c))o.setEdge(c,s[c]);else{if(f)throw new Error("Input graph is not connected: "+i);f=!0}i.nodeEdges(c).forEach(u)}return o}return V$}var Y$,lve;function GRt(){return lve||(lve=1,Y$={components:DRt(),dijkstra:jDe(),dijkstraAll:BRt(),findCycles:FRt(),floydWarshall:URt(),isAcyclic:jRt(),postorder:zRt(),preorder:$Rt(),prim:HRt(),tarjan:zDe(),topsort:$De()}),Y$}var X$,cve;function WRt(){if(cve)return X$;cve=1;var t=LRt();return X$={Graph:t.Graph,json:kRt(),alg:GRt(),version:t.version},X$}var q$,uve;function rv(){if(uve)return q$;uve=1;var t;if(typeof Nte=="function")try{t=WRt()}catch{}return t||(t=window.graphlib),q$=t,q$}var Z$,fve;function GDe(){if(fve)return Z$;fve=1;var t=hDe(),e=1,n=4;function r(i){return t(i,e|n)}return Z$=r,Z$}var K$,hve;function U6(){if(hve)return K$;hve=1;var t=Vw(),e=jy(),n=I6(),r=Jf();function i(a,o,s){if(!r(s))return!1;var l=typeof o;return(l=="number"?e(s)&&n(o,s.length):l=="string"&&o in s)?t(s[o],a):!1}return K$=i,K$}var Q$,dve;function VRt(){if(dve)return Q$;dve=1;var t=lN(),e=Vw(),n=U6(),r=nS(),i=Object.prototype,a=i.hasOwnProperty,o=t(function(s,l){s=Object(s);var c=-1,u=l.length,f=u>2?l[2]:void 0;for(f&&n(l[0],l[1],f)&&(u=1);++c<u;)for(var h=l[c],d=r(h),p=-1,g=d.length;++p<g;){var v=d[p],y=s[v];(y===void 0||e(y,i[v])&&!a.call(s,v))&&(s[v]=h[v])}return s});return Q$=o,Q$}var J$,pve;function YRt(){if(pve)return J$;pve=1;var t=zy(),e=jy(),n=db();function r(i){return function(a,o,s){var l=Object(a);if(!e(a)){var c=t(o,3);a=n(a),o=function(f){return c(l[f],f,l)}}var u=i(a,o,s);return u>-1?l[c?a[u]:u]:void 0}}return J$=r,J$}var eH,gve;function XRt(){if(gve)return eH;gve=1;var t=/\s/;function e(n){for(var r=n.length;r--&&t.test(n.charAt(r)););return r}return eH=e,eH}var tH,vve;function qRt(){if(vve)return tH;vve=1;var t=XRt(),e=/^\s+/;function n(r){return r&&r.slice(0,t(r)+1).replace(e,"")}return tH=n,tH}var nH,mve;function Jte(){if(mve)return nH;mve=1;var t=qRt(),e=Jf(),n=Qw(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;function l(c){if(typeof c=="number")return c;if(n(c))return r;if(e(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=e(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=t(c);var f=a.test(c);return f||o.test(c)?s(c.slice(2),f?2:8):i.test(c)?r:+c}return nH=l,nH}var rH,yve;function WDe(){if(yve)return rH;yve=1;var t=Jte(),e=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=t(i),i===e||i===-e){var a=i<0?-1:1;return a*n}return i===i?i:0}return rH=r,rH}var iH,_ve;function ZRt(){if(_ve)return iH;_ve=1;var t=WDe();function e(n){var r=t(n),i=r%1;return r===r?i?r-i:r:0}return iH=e,iH}var aH,bve;function KRt(){if(bve)return aH;bve=1;var t=LDe(),e=zy(),n=ZRt(),r=Math.max;function i(a,o,s){var l=a==null?0:a.length;if(!l)return-1;var c=s==null?0:n(s);return c<0&&(c=r(l+c,0)),t(a,e(o,3),c)}return aH=i,aH}var oH,Eve;function QRt(){if(Eve)return oH;Eve=1;var t=YRt(),e=KRt(),n=t(e);return oH=n,oH}var sH,xve;function VDe(){if(xve)return sH;xve=1;var t=Kte();function e(n){var r=n==null?0:n.length;return r?t(n,1):[]}return sH=e,sH}var lH,Sve;function JRt(){if(Sve)return lH;Sve=1;var t=Gte(),e=dDe(),n=nS();function r(i,a){return i==null?i:t(i,e(a),n)}return lH=r,lH}var cH,Tve;function eMt(){if(Tve)return cH;Tve=1;function t(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}return cH=t,cH}var uH,Ave;function tMt(){if(Ave)return uH;Ave=1;var t=P6(),e=Wte(),n=zy();function r(i,a){var o={};return a=n(a,3),e(i,function(s,l,c){t(o,l,a(s,l,c))}),o}return uH=r,uH}var fH,wve;function ene(){if(wve)return fH;wve=1;var t=Qw();function e(n,r,i){for(var a=-1,o=n.length;++a<o;){var s=n[a],l=r(s);if(l!=null&&(c===void 0?l===l&&!t(l):i(l,c)))var c=l,u=s}return u}return fH=e,fH}var hH,Ove;function nMt(){if(Ove)return hH;Ove=1;function t(e,n){return e>n}return hH=t,hH}var dH,Cve;function rMt(){if(Cve)return dH;Cve=1;var t=ene(),e=nMt(),n=rS();function r(i){return i&&i.length?t(i,n,e):void 0}return dH=r,dH}var pH,Rve;function YDe(){if(Rve)return pH;Rve=1;var t=P6(),e=Vw();function n(r,i,a){(a!==void 0&&!e(r[i],a)||a===void 0&&!(i in r))&&t(r,i,a)}return pH=n,pH}var gH,Mve;function XDe(){if(Mve)return gH;Mve=1;var t=Uy(),e=k6(),n=Jp(),r="[object Object]",i=Function.prototype,a=Object.prototype,o=i.toString,s=a.hasOwnProperty,l=o.call(Object);function c(u){if(!n(u)||t(u)!=r)return!1;var f=e(u);if(f===null)return!0;var h=s.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==l}return gH=c,gH}var vH,Pve;function qDe(){if(Pve)return vH;Pve=1;function t(e,n){if(!(n==="constructor"&&typeof e[n]=="function")&&n!="__proto__")return e[n]}return vH=t,vH}var mH,Nve;function iMt(){if(Nve)return mH;Nve=1;var t=rN(),e=nS();function n(r){return t(r,e(r))}return mH=n,mH}var yH,Ive;function aMt(){if(Ive)return yH;Ive=1;var t=YDe(),e=tDe(),n=cDe(),r=Ute(),i=fDe(),a=iN(),o=bc(),s=BDe(),l=qw(),c=Xw(),u=Jf(),f=XDe(),h=Zw(),d=qDe(),p=iMt();function g(v,y,_,E,x,T,S){var w=d(v,_),C=d(y,_),D=S.get(C);if(D){t(v,_,D);return}var L=T?T(w,C,_+"",v,y,S):void 0,B=L===void 0;if(B){var I=o(C),U=!I&&l(C),$=!I&&!U&&h(C);L=C,I||U||$?o(w)?L=w:s(w)?L=r(w):U?(B=!1,L=e(C,!0)):$?(B=!1,L=n(C,!0)):L=[]:f(C)||a(C)?(L=w,a(w)?L=p(w):(!u(w)||c(w))&&(L=i(C))):B=!1}B&&(S.set(C,L),x(L,C,E,T,S),S.delete(C)),t(v,_,L)}return yH=g,yH}var _H,Lve;function ZDe(){if(Lve)return _H;Lve=1;var t=M6(),e=YDe(),n=Gte(),r=aMt(),i=Jf(),a=nS(),o=qDe();function s(l,c,u,f,h){l!==c&&n(c,function(d,p){if(h||(h=new t),i(d))r(l,c,p,u,s,f,h);else{var g=f?f(o(l,p),d,p+"",l,c,h):void 0;g===void 0&&(g=d),e(l,p,g)}},a)}return _H=s,_H}var bH,kve;function KDe(){if(kve)return bH;kve=1;var t=lN(),e=U6();function n(r){return t(function(i,a){var o=-1,s=a.length,l=s>1?a[s-1]:void 0,c=s>2?a[2]:void 0;for(l=r.length>3&&typeof l=="function"?(s--,l):void 0,c&&e(a[0],a[1],c)&&(l=s<3?void 0:l,s=1),i=Object(i);++o<s;){var u=a[o];u&&r(i,u,o,l)}return i})}return bH=n,bH}var EH,Dve;function QDe(){if(Dve)return EH;Dve=1;var t=ZDe(),e=KDe(),n=e(function(r,i,a){t(r,i,a)});return EH=n,EH}var xH,Bve;function JDe(){if(Bve)return xH;Bve=1;function t(e,n){return e<n}return xH=t,xH}var SH,Fve;function oMt(){if(Fve)return SH;Fve=1;var t=ene(),e=JDe(),n=rS();function r(i){return i&&i.length?t(i,n,e):void 0}return SH=r,SH}var TH,Uve;function sMt(){if(Uve)return TH;Uve=1;var t=ene(),e=zy(),n=JDe();function r(i,a){return i&&i.length?t(i,e(a,2),n):void 0}return TH=r,TH}var AH,jve;function eBe(){if(jve)return AH;jve=1;var t=cv(),e=function(){return t.Date.now()};return AH=e,AH}var wH,zve;function lMt(){if(zve)return wH;zve=1;var t=N6(),e=B6(),n=I6(),r=Jf(),i=sN();function a(o,s,l,c){if(!r(o))return o;s=e(s,o);for(var u=-1,f=s.length,h=f-1,d=o;d!=null&&++u<f;){var p=i(s[u]),g=l;if(p==="__proto__"||p==="constructor"||p==="prototype")return o;if(u!=h){var v=d[p];g=c?c(v,p,d):void 0,g===void 0&&(g=r(v)?v:n(s[u+1])?[]:{})}t(d,p,g),d=d[p]}return o}return wH=a,wH}var OH,$ve;function cMt(){if($ve)return OH;$ve=1;var t=F6(),e=lMt(),n=B6();function r(i,a,o){for(var s=-1,l=a.length,c={};++s<l;){var u=a[s],f=t(i,u);o(f,u)&&e(c,n(u,i),f)}return c}return OH=r,OH}var CH,Hve;function uMt(){if(Hve)return CH;Hve=1;var t=cMt(),e=SDe();function n(r,i){return t(r,i,function(a,o){return e(r,o)})}return CH=n,CH}var RH,Gve;function fMt(){if(Gve)return RH;Gve=1;var t=VDe(),e=NDe(),n=IDe();function r(i){return n(e(i,void 0,t),i+"")}return RH=r,RH}var MH,Wve;function hMt(){if(Wve)return MH;Wve=1;var t=uMt(),e=fMt(),n=e(function(r,i){return r==null?{}:t(r,i)});return MH=n,MH}var PH,Vve;function dMt(){if(Vve)return PH;Vve=1;var t=Math.ceil,e=Math.max;function n(r,i,a,o){for(var s=-1,l=e(t((i-r)/(a||1)),0),c=Array(l);l--;)c[o?l:++s]=r,r+=a;return c}return PH=n,PH}var NH,Yve;function pMt(){if(Yve)return NH;Yve=1;var t=dMt(),e=U6(),n=WDe();function r(i){return function(a,o,s){return s&&typeof s!="number"&&e(a,o,s)&&(o=s=void 0),a=n(a),o===void 0?(o=a,a=0):o=n(o),s=s===void 0?a<o?1:-1:n(s),t(a,o,s,i)}}return NH=r,NH}var IH,Xve;function gMt(){if(Xve)return IH;Xve=1;var t=pMt(),e=t();return IH=e,IH}var LH,qve;function vMt(){if(qve)return LH;qve=1;function t(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}return LH=t,LH}var kH,Zve;function mMt(){if(Zve)return kH;Zve=1;var t=Qw();function e(n,r){if(n!==r){var i=n!==void 0,a=n===null,o=n===n,s=t(n),l=r!==void 0,c=r===null,u=r===r,f=t(r);if(!c&&!f&&!s&&n>r||s&&l&&u&&!c&&!f||a&&l&&u||!i&&u||!o)return 1;if(!a&&!s&&!f&&n<r||f&&i&&o&&!a&&!s||c&&i&&o||!l&&o||!u)return-1}return 0}return kH=e,kH}var DH,Kve;function yMt(){if(Kve)return DH;Kve=1;var t=mMt();function e(n,r,i){for(var a=-1,o=n.criteria,s=r.criteria,l=o.length,c=i.length;++a<l;){var u=t(o[a],s[a]);if(u){if(a>=c)return u;var f=i[a];return u*(f=="desc"?-1:1)}}return n.index-r.index}return DH=e,DH}var BH,Qve;function _Mt(){if(Qve)return BH;Qve=1;var t=oN(),e=F6(),n=zy(),r=ODe(),i=vMt(),a=aN(),o=yMt(),s=rS(),l=bc();function c(u,f,h){f.length?f=t(f,function(g){return l(g)?function(v){return e(v,g.length===1?g[0]:g)}:g}):f=[s];var d=-1;f=t(f,a(n));var p=r(u,function(g,v,y){var _=t(f,function(E){return E(g)});return{criteria:_,index:++d,value:g}});return i(p,function(g,v){return o(g,v,h)})}return BH=c,BH}var FH,Jve;function bMt(){if(Jve)return FH;Jve=1;var t=Kte(),e=_Mt(),n=lN(),r=U6(),i=n(function(a,o){if(a==null)return[];var s=o.length;return s>1&&r(a,o[0],o[1])?o=[]:s>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return FH=i,FH}var UH,eme;function tBe(){if(eme)return UH;eme=1;var t=Jw(),e=0;function n(r){var i=++e;return t(r)+i}return UH=n,UH}var jH,tme;function EMt(){if(tme)return jH;tme=1;function t(e,n,r){for(var i=-1,a=e.length,o=n.length,s={};++i<a;){var l=i<o?n[i]:void 0;r(s,e[i],l)}return s}return jH=t,jH}var zH,nme;function xMt(){if(nme)return zH;nme=1;var t=N6(),e=EMt();function n(r,i){return e(r||[],i||[],t)}return zH=n,zH}var $H,rme;function Js(){if(rme)return $H;rme=1;var t;if(typeof Nte=="function")try{t={cloneDeep:GDe(),constant:Hte(),defaults:VRt(),each:gDe(),filter:ADe(),find:QRt(),flatten:VDe(),forEach:pDe(),forIn:JRt(),has:wDe(),isUndefined:qte(),last:eMt(),map:CDe(),mapValues:tMt(),max:rMt(),merge:QDe(),min:oMt(),minBy:sMt(),now:eBe(),pick:hMt(),range:gMt(),reduce:MDe(),sortBy:bMt(),uniqueId:tBe(),values:FDe(),zipObject:xMt()}}catch{}return t||(t=window._),$H=t,$H}var HH,ime;function SMt(){if(ime)return HH;ime=1,HH=t;function t(){var r={};r._next=r._prev=r,this._sentinel=r}t.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return e(i),i},t.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&e(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},t.prototype.toString=function(){for(var r=[],i=this._sentinel,a=i._prev;a!==i;)r.push(JSON.stringify(a,n)),a=a._prev;return"["+r.join(", ")+"]"};function e(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return HH}var GH,ame;function TMt(){if(ame)return GH;ame=1;var t=Js(),e=rv().Graph,n=SMt();GH=i;var r=t.constant(1);function i(c,u){if(c.nodeCount()<=1)return[];var f=s(c,u||r),h=a(f.graph,f.buckets,f.zeroIdx);return t.flatten(t.map(h,function(d){return c.outEdges(d.v,d.w)}),!0)}function a(c,u,f){for(var h=[],d=u[u.length-1],p=u[0],g;c.nodeCount();){for(;g=p.dequeue();)o(c,u,f,g);for(;g=d.dequeue();)o(c,u,f,g);if(c.nodeCount()){for(var v=u.length-2;v>0;--v)if(g=u[v].dequeue(),g){h=h.concat(o(c,u,f,g,!0));break}}}return h}function o(c,u,f,h,d){var p=d?[]:void 0;return t.forEach(c.inEdges(h.v),function(g){var v=c.edge(g),y=c.node(g.v);d&&p.push({v:g.v,w:g.w}),y.out-=v,l(u,f,y)}),t.forEach(c.outEdges(h.v),function(g){var v=c.edge(g),y=g.w,_=c.node(y);_.in-=v,l(u,f,_)}),c.removeNode(h.v),p}function s(c,u){var f=new e,h=0,d=0;t.forEach(c.nodes(),function(v){f.setNode(v,{v,in:0,out:0})}),t.forEach(c.edges(),function(v){var y=f.edge(v.v,v.w)||0,_=u(v),E=y+_;f.setEdge(v.v,v.w,E),d=Math.max(d,f.node(v.v).out+=_),h=Math.max(h,f.node(v.w).in+=_)});var p=t.range(d+h+3).map(function(){return new n}),g=h+1;return t.forEach(f.nodes(),function(v){l(p,g,f.node(v))}),{graph:f,buckets:p,zeroIdx:g}}function l(c,u,f){f.out?f.in?c[f.out-f.in+u].enqueue(f):c[c.length-1].enqueue(f):c[0].enqueue(f)}return GH}var WH,ome;function AMt(){if(ome)return WH;ome=1;var t=Js(),e=TMt();WH={run:n,undo:i};function n(a){var o=a.graph().acyclicer==="greedy"?e(a,s(a)):r(a);t.forEach(o,function(l){var c=a.edge(l);a.removeEdge(l),c.forwardName=l.name,c.reversed=!0,a.setEdge(l.w,l.v,c,t.uniqueId("rev"))});function s(l){return function(c){return l.edge(c).weight}}}function r(a){var o=[],s={},l={};function c(u){t.has(l,u)||(l[u]=!0,s[u]=!0,t.forEach(a.outEdges(u),function(f){t.has(s,f.w)?o.push(f):c(f.w)}),delete s[u])}return t.forEach(a.nodes(),c),o}function i(a){t.forEach(a.edges(),function(o){var s=a.edge(o);if(s.reversed){a.removeEdge(o);var l=s.forwardName;delete s.reversed,delete s.forwardName,a.setEdge(o.w,o.v,s,l)}})}return WH}var VH,sme;function Uh(){if(sme)return VH;sme=1;var t=Js(),e=rv().Graph;VH={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:a,predecessorWeights:o,intersectRect:s,buildLayerMatrix:l,normalizeRanks:c,removeEmptyRanks:u,addBorderNode:f,maxRank:h,partition:d,time:p,notime:g};function n(v,y,_,E){var x;do x=t.uniqueId(E);while(v.hasNode(x));return _.dummy=y,v.setNode(x,_),x}function r(v){var y=new e().setGraph(v.graph());return t.forEach(v.nodes(),function(_){y.setNode(_,v.node(_))}),t.forEach(v.edges(),function(_){var E=y.edge(_.v,_.w)||{weight:0,minlen:1},x=v.edge(_);y.setEdge(_.v,_.w,{weight:E.weight+x.weight,minlen:Math.max(E.minlen,x.minlen)})}),y}function i(v){var y=new e({multigraph:v.isMultigraph()}).setGraph(v.graph());return t.forEach(v.nodes(),function(_){v.children(_).length||y.setNode(_,v.node(_))}),t.forEach(v.edges(),function(_){y.setEdge(_,v.edge(_))}),y}function a(v){var y=t.map(v.nodes(),function(_){var E={};return t.forEach(v.outEdges(_),function(x){E[x.w]=(E[x.w]||0)+v.edge(x).weight}),E});return t.zipObject(v.nodes(),y)}function o(v){var y=t.map(v.nodes(),function(_){var E={};return t.forEach(v.inEdges(_),function(x){E[x.v]=(E[x.v]||0)+v.edge(x).weight}),E});return t.zipObject(v.nodes(),y)}function s(v,y){var _=v.x,E=v.y,x=y.x-_,T=y.y-E,S=v.width/2,w=v.height/2;if(!x&&!T)throw new Error("Not possible to find intersection inside of the rectangle");var C,D;return Math.abs(T)*S>Math.abs(x)*w?(T<0&&(w=-w),C=w*x/T,D=w):(x<0&&(S=-S),C=S,D=S*T/x),{x:_+C,y:E+D}}function l(v){var y=t.map(t.range(h(v)+1),function(){return[]});return t.forEach(v.nodes(),function(_){var E=v.node(_),x=E.rank;t.isUndefined(x)||(y[x][E.order]=_)}),y}function c(v){var y=t.min(t.map(v.nodes(),function(_){return v.node(_).rank}));t.forEach(v.nodes(),function(_){var E=v.node(_);t.has(E,"rank")&&(E.rank-=y)})}function u(v){var y=t.min(t.map(v.nodes(),function(T){return v.node(T).rank})),_=[];t.forEach(v.nodes(),function(T){var S=v.node(T).rank-y;_[S]||(_[S]=[]),_[S].push(T)});var E=0,x=v.graph().nodeRankFactor;t.forEach(_,function(T,S){t.isUndefined(T)&&S%x!==0?--E:E&&t.forEach(T,function(w){v.node(w).rank+=E})})}function f(v,y,_,E){var x={width:0,height:0};return arguments.length>=4&&(x.rank=_,x.order=E),n(v,"border",x,y)}function h(v){return t.max(t.map(v.nodes(),function(y){var _=v.node(y).rank;if(!t.isUndefined(_))return _}))}function d(v,y){var _={lhs:[],rhs:[]};return t.forEach(v,function(E){y(E)?_.lhs.push(E):_.rhs.push(E)}),_}function p(v,y){var _=t.now();try{return y()}finally{console.log(v+" time: "+(t.now()-_)+"ms")}}function g(v,y){return y()}return VH}var YH,lme;function wMt(){if(lme)return YH;lme=1;var t=Js(),e=Uh();YH={run:n,undo:i};function n(a){a.graph().dummyChains=[],t.forEach(a.edges(),function(o){r(a,o)})}function r(a,o){var s=o.v,l=a.node(s).rank,c=o.w,u=a.node(c).rank,f=o.name,h=a.edge(o),d=h.labelRank;if(u!==l+1){a.removeEdge(o);var p,g,v;for(v=0,++l;l<u;++v,++l)h.points=[],g={width:0,height:0,edgeLabel:h,edgeObj:o,rank:l},p=e.addDummyNode(a,"edge",g,"_d"),l===d&&(g.width=h.width,g.height=h.height,g.dummy="edge-label",g.labelpos=h.labelpos),a.setEdge(s,p,{weight:h.weight},f),v===0&&a.graph().dummyChains.push(p),s=p;a.setEdge(s,c,{weight:h.weight},f)}}function i(a){t.forEach(a.graph().dummyChains,function(o){var s=a.node(o),l=s.edgeLabel,c;for(a.setEdge(s.edgeObj,l);s.dummy;)c=a.successors(o)[0],a.removeNode(o),l.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(l.x=s.x,l.y=s.y,l.width=s.width,l.height=s.height),o=c,s=a.node(o)})}return YH}var XH,cme;function PB(){if(cme)return XH;cme=1;var t=Js();XH={longestPath:e,slack:n};function e(r){var i={};function a(o){var s=r.node(o);if(t.has(i,o))return s.rank;i[o]=!0;var l=t.min(t.map(r.outEdges(o),function(c){return a(c.w)-r.edge(c).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),s.rank=l}t.forEach(r.sources(),a)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return XH}var qH,ume;function nBe(){if(ume)return qH;ume=1;var t=Js(),e=rv().Graph,n=PB().slack;qH=r;function r(s){var l=new e({directed:!1}),c=s.nodes()[0],u=s.nodeCount();l.setNode(c,{});for(var f,h;i(l,s)<u;)f=a(l,s),h=l.hasNode(f.v)?n(s,f):-n(s,f),o(l,s,h);return l}function i(s,l){function c(u){t.forEach(l.nodeEdges(u),function(f){var h=f.v,d=u===h?f.w:h;!s.hasNode(d)&&!n(l,f)&&(s.setNode(d,{}),s.setEdge(u,d,{}),c(d))})}return t.forEach(s.nodes(),c),s.nodeCount()}function a(s,l){return t.minBy(l.edges(),function(c){if(s.hasNode(c.v)!==s.hasNode(c.w))return n(l,c)})}function o(s,l,c){t.forEach(s.nodes(),function(u){l.node(u).rank+=c})}return qH}var ZH,fme;function OMt(){if(fme)return ZH;fme=1;var t=Js(),e=nBe(),n=PB().slack,r=PB().longestPath,i=rv().alg.preorder,a=rv().alg.postorder,o=Uh().simplify;ZH=s,s.initLowLimValues=f,s.initCutValues=l,s.calcCutValue=u,s.leaveEdge=d,s.enterEdge=p,s.exchangeEdges=g;function s(E){E=o(E),r(E);var x=e(E);f(x),l(x,E);for(var T,S;T=d(x);)S=p(x,E,T),g(x,E,T,S)}function l(E,x){var T=a(E,E.nodes());T=T.slice(0,T.length-1),t.forEach(T,function(S){c(E,x,S)})}function c(E,x,T){var S=E.node(T),w=S.parent;E.edge(T,w).cutvalue=u(E,x,T)}function u(E,x,T){var S=E.node(T),w=S.parent,C=!0,D=x.edge(T,w),L=0;return D||(C=!1,D=x.edge(w,T)),L=D.weight,t.forEach(x.nodeEdges(T),function(B){var I=B.v===T,U=I?B.w:B.v;if(U!==w){var $=I===C,X=x.edge(B).weight;if(L+=$?X:-X,y(E,T,U)){var N=E.edge(T,U).cutvalue;L+=$?-N:N}}}),L}function f(E,x){arguments.length<2&&(x=E.nodes()[0]),h(E,{},1,x)}function h(E,x,T,S,w){var C=T,D=E.node(S);return x[S]=!0,t.forEach(E.neighbors(S),function(L){t.has(x,L)||(T=h(E,x,T,L,S))}),D.low=C,D.lim=T++,w?D.parent=w:delete D.parent,T}function d(E){return t.find(E.edges(),function(x){return E.edge(x).cutvalue<0})}function p(E,x,T){var S=T.v,w=T.w;x.hasEdge(S,w)||(S=T.w,w=T.v);var C=E.node(S),D=E.node(w),L=C,B=!1;C.lim>D.lim&&(L=D,B=!0);var I=t.filter(x.edges(),function(U){return B===_(E,E.node(U.v),L)&&B!==_(E,E.node(U.w),L)});return t.minBy(I,function(U){return n(x,U)})}function g(E,x,T,S){var w=T.v,C=T.w;E.removeEdge(w,C),E.setEdge(S.v,S.w,{}),f(E),l(E,x),v(E,x)}function v(E,x){var T=t.find(E.nodes(),function(w){return!x.node(w).parent}),S=i(E,T);S=S.slice(1),t.forEach(S,function(w){var C=E.node(w).parent,D=x.edge(w,C),L=!1;D||(D=x.edge(C,w),L=!0),x.node(w).rank=x.node(C).rank+(L?D.minlen:-D.minlen)})}function y(E,x,T){return E.hasEdge(x,T)}function _(E,x,T){return T.low<=x.lim&&x.lim<=T.lim}return ZH}var KH,hme;function CMt(){if(hme)return KH;hme=1;var t=PB(),e=t.longestPath,n=nBe(),r=OMt();KH=i;function i(l){switch(l.graph().ranker){case"network-simplex":s(l);break;case"tight-tree":o(l);break;case"longest-path":a(l);break;default:s(l)}}var a=e;function o(l){e(l),n(l)}function s(l){r(l)}return KH}var QH,dme;function RMt(){if(dme)return QH;dme=1;var t=Js();QH=e;function e(i){var a=r(i);t.forEach(i.graph().dummyChains,function(o){for(var s=i.node(o),l=s.edgeObj,c=n(i,a,l.v,l.w),u=c.path,f=c.lca,h=0,d=u[h],p=!0;o!==l.w;){if(s=i.node(o),p){for(;(d=u[h])!==f&&i.node(d).maxRank<s.rank;)h++;d===f&&(p=!1)}if(!p){for(;h<u.length-1&&i.node(d=u[h+1]).minRank<=s.rank;)h++;d=u[h]}i.setParent(o,d),o=i.successors(o)[0]}})}function n(i,a,o,s){var l=[],c=[],u=Math.min(a[o].low,a[s].low),f=Math.max(a[o].lim,a[s].lim),h,d;h=o;do h=i.parent(h),l.push(h);while(h&&(a[h].low>u||f>a[h].lim));for(d=h,h=s;(h=i.parent(h))!==d;)c.push(h);return{path:l.concat(c.reverse()),lca:d}}function r(i){var a={},o=0;function s(l){var c=o;t.forEach(i.children(l),s),a[l]={low:c,lim:o++}}return t.forEach(i.children(),s),a}return QH}var JH,pme;function MMt(){if(pme)return JH;pme=1;var t=Js(),e=Uh();JH={run:n,cleanup:o};function n(s){var l=e.addDummyNode(s,"root",{},"_root"),c=i(s),u=t.max(t.values(c))-1,f=2*u+1;s.graph().nestingRoot=l,t.forEach(s.edges(),function(d){s.edge(d).minlen*=f});var h=a(s)+1;t.forEach(s.children(),function(d){r(s,l,f,h,u,c,d)}),s.graph().nodeRankFactor=f}function r(s,l,c,u,f,h,d){var p=s.children(d);if(!p.length){d!==l&&s.setEdge(l,d,{weight:0,minlen:c});return}var g=e.addBorderNode(s,"_bt"),v=e.addBorderNode(s,"_bb"),y=s.node(d);s.setParent(g,d),y.borderTop=g,s.setParent(v,d),y.borderBottom=v,t.forEach(p,function(_){r(s,l,c,u,f,h,_);var E=s.node(_),x=E.borderTop?E.borderTop:_,T=E.borderBottom?E.borderBottom:_,S=E.borderTop?u:2*u,w=x!==T?1:f-h[d]+1;s.setEdge(g,x,{weight:S,minlen:w,nestingEdge:!0}),s.setEdge(T,v,{weight:S,minlen:w,nestingEdge:!0})}),s.parent(d)||s.setEdge(l,g,{weight:0,minlen:f+h[d]})}function i(s){var l={};function c(u,f){var h=s.children(u);h&&h.length&&t.forEach(h,function(d){c(d,f+1)}),l[u]=f}return t.forEach(s.children(),function(u){c(u,1)}),l}function a(s){return t.reduce(s.edges(),function(l,c){return l+s.edge(c).weight},0)}function o(s){var l=s.graph();s.removeNode(l.nestingRoot),delete l.nestingRoot,t.forEach(s.edges(),function(c){var u=s.edge(c);u.nestingEdge&&s.removeEdge(c)})}return JH}var eG,gme;function PMt(){if(gme)return eG;gme=1;var t=Js(),e=Uh();eG=n;function n(i){function a(o){var s=i.children(o),l=i.node(o);if(s.length&&t.forEach(s,a),t.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var c=l.minRank,u=l.maxRank+1;c<u;++c)r(i,"borderLeft","_bl",o,l,c),r(i,"borderRight","_br",o,l,c)}}t.forEach(i.children(),a)}function r(i,a,o,s,l,c){var u={width:0,height:0,rank:c,borderType:a},f=l[a][c-1],h=e.addDummyNode(i,"border",u,o);l[a][c]=h,i.setParent(h,s),f&&i.setEdge(f,h,{weight:1})}return eG}var tG,vme;function NMt(){if(vme)return tG;vme=1;var t=Js();tG={adjust:e,undo:n};function e(c){var u=c.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&r(c)}function n(c){var u=c.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&a(c),(u==="lr"||u==="rl")&&(s(c),r(c))}function r(c){t.forEach(c.nodes(),function(u){i(c.node(u))}),t.forEach(c.edges(),function(u){i(c.edge(u))})}function i(c){var u=c.width;c.width=c.height,c.height=u}function a(c){t.forEach(c.nodes(),function(u){o(c.node(u))}),t.forEach(c.edges(),function(u){var f=c.edge(u);t.forEach(f.points,o),t.has(f,"y")&&o(f)})}function o(c){c.y=-c.y}function s(c){t.forEach(c.nodes(),function(u){l(c.node(u))}),t.forEach(c.edges(),function(u){var f=c.edge(u);t.forEach(f.points,l),t.has(f,"x")&&l(f)})}function l(c){var u=c.x;c.x=c.y,c.y=u}return tG}var nG,mme;function IMt(){if(mme)return nG;mme=1;var t=Js();nG=e;function e(n){var r={},i=t.filter(n.nodes(),function(c){return!n.children(c).length}),a=t.max(t.map(i,function(c){return n.node(c).rank})),o=t.map(t.range(a+1),function(){return[]});function s(c){if(!t.has(r,c)){r[c]=!0;var u=n.node(c);o[u.rank].push(c),t.forEach(n.successors(c),s)}}var l=t.sortBy(i,function(c){return n.node(c).rank});return t.forEach(l,s),o}return nG}var rG,yme;function LMt(){if(yme)return rG;yme=1;var t=Js();rG=e;function e(r,i){for(var a=0,o=1;o<i.length;++o)a+=n(r,i[o-1],i[o]);return a}function n(r,i,a){for(var o=t.zipObject(a,t.map(a,function(h,d){return d})),s=t.flatten(t.map(i,function(h){return t.sortBy(t.map(r.outEdges(h),function(d){return{pos:o[d.w],weight:r.edge(d).weight}}),"pos")}),!0),l=1;l<a.length;)l<<=1;var c=2*l-1;l-=1;var u=t.map(new Array(c),function(){return 0}),f=0;return t.forEach(s.forEach(function(h){var d=h.pos+l;u[d]+=h.weight;for(var p=0;d>0;)d%2&&(p+=u[d+1]),d=d-1>>1,u[d]+=h.weight;f+=h.weight*p})),f}return rG}var iG,_me;function kMt(){if(_me)return iG;_me=1;var t=Js();iG=e;function e(n,r){return t.map(r,function(i){var a=n.inEdges(i);if(a.length){var o=t.reduce(a,function(s,l){var c=n.edge(l),u=n.node(l.v);return{sum:s.sum+c.weight*u.order,weight:s.weight+c.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return iG}var aG,bme;function DMt(){if(bme)return aG;bme=1;var t=Js();aG=e;function e(i,a){var o={};t.forEach(i,function(l,c){var u=o[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:c};t.isUndefined(l.barycenter)||(u.barycenter=l.barycenter,u.weight=l.weight)}),t.forEach(a.edges(),function(l){var c=o[l.v],u=o[l.w];!t.isUndefined(c)&&!t.isUndefined(u)&&(u.indegree++,c.out.push(o[l.w]))});var s=t.filter(o,function(l){return!l.indegree});return n(s)}function n(i){var a=[];function o(c){return function(u){u.merged||(t.isUndefined(u.barycenter)||t.isUndefined(c.barycenter)||u.barycenter>=c.barycenter)&&r(c,u)}}function s(c){return function(u){u.in.push(c),--u.indegree===0&&i.push(u)}}for(;i.length;){var l=i.pop();a.push(l),t.forEach(l.in.reverse(),o(l)),t.forEach(l.out,s(l))}return t.map(t.filter(a,function(c){return!c.merged}),function(c){return t.pick(c,["vs","i","barycenter","weight"])})}function r(i,a){var o=0,s=0;i.weight&&(o+=i.barycenter*i.weight,s+=i.weight),a.weight&&(o+=a.barycenter*a.weight,s+=a.weight),i.vs=a.vs.concat(i.vs),i.barycenter=o/s,i.weight=s,i.i=Math.min(a.i,i.i),a.merged=!0}return aG}var oG,Eme;function BMt(){if(Eme)return oG;Eme=1;var t=Js(),e=Uh();oG=n;function n(a,o){var s=e.partition(a,function(g){return t.has(g,"barycenter")}),l=s.lhs,c=t.sortBy(s.rhs,function(g){return-g.i}),u=[],f=0,h=0,d=0;l.sort(i(!!o)),d=r(u,c,d),t.forEach(l,function(g){d+=g.vs.length,u.push(g.vs),f+=g.barycenter*g.weight,h+=g.weight,d=r(u,c,d)});var p={vs:t.flatten(u,!0)};return h&&(p.barycenter=f/h,p.weight=h),p}function r(a,o,s){for(var l;o.length&&(l=t.last(o)).i<=s;)o.pop(),a.push(l.vs),s++;return s}function i(a){return function(o,s){return o.barycenter<s.barycenter?-1:o.barycenter>s.barycenter?1:a?s.i-o.i:o.i-s.i}}return oG}var sG,xme;function FMt(){if(xme)return sG;xme=1;var t=Js(),e=kMt(),n=DMt(),r=BMt();sG=i;function i(s,l,c,u){var f=s.children(l),h=s.node(l),d=h?h.borderLeft:void 0,p=h?h.borderRight:void 0,g={};d&&(f=t.filter(f,function(T){return T!==d&&T!==p}));var v=e(s,f);t.forEach(v,function(T){if(s.children(T.v).length){var S=i(s,T.v,c,u);g[T.v]=S,t.has(S,"barycenter")&&o(T,S)}});var y=n(v,c);a(y,g);var _=r(y,u);if(d&&(_.vs=t.flatten([d,_.vs,p],!0),s.predecessors(d).length)){var E=s.node(s.predecessors(d)[0]),x=s.node(s.predecessors(p)[0]);t.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+E.order+x.order)/(_.weight+2),_.weight+=2}return _}function a(s,l){t.forEach(s,function(c){c.vs=t.flatten(c.vs.map(function(u){return l[u]?l[u].vs:u}),!0)})}function o(s,l){t.isUndefined(s.barycenter)?(s.barycenter=l.barycenter,s.weight=l.weight):(s.barycenter=(s.barycenter*s.weight+l.barycenter*l.weight)/(s.weight+l.weight),s.weight+=l.weight)}return sG}var lG,Sme;function UMt(){if(Sme)return lG;Sme=1;var t=Js(),e=rv().Graph;lG=n;function n(i,a,o){var s=r(i),l=new e({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(c){return i.node(c)});return t.forEach(i.nodes(),function(c){var u=i.node(c),f=i.parent(c);(u.rank===a||u.minRank<=a&&a<=u.maxRank)&&(l.setNode(c),l.setParent(c,f||s),t.forEach(i[o](c),function(h){var d=h.v===c?h.w:h.v,p=l.edge(d,c),g=t.isUndefined(p)?0:p.weight;l.setEdge(d,c,{weight:i.edge(h).weight+g})}),t.has(u,"minRank")&&l.setNode(c,{borderLeft:u.borderLeft[a],borderRight:u.borderRight[a]}))}),l}function r(i){for(var a;i.hasNode(a=t.uniqueId("_root")););return a}return lG}var cG,Tme;function jMt(){if(Tme)return cG;Tme=1;var t=Js();cG=e;function e(n,r,i){var a={},o;t.forEach(i,function(s){for(var l=n.parent(s),c,u;l;){if(c=n.parent(l),c?(u=a[c],a[c]=l):(u=o,o=l),u&&u!==l){r.setEdge(u,l);return}l=c}})}return cG}var uG,Ame;function zMt(){if(Ame)return uG;Ame=1;var t=Js(),e=IMt(),n=LMt(),r=FMt(),i=UMt(),a=jMt(),o=rv().Graph,s=Uh();uG=l;function l(h){var d=s.maxRank(h),p=c(h,t.range(1,d+1),"inEdges"),g=c(h,t.range(d-1,-1,-1),"outEdges"),v=e(h);f(h,v);for(var y=Number.POSITIVE_INFINITY,_,E=0,x=0;x<4;++E,++x){u(E%2?p:g,E%4>=2),v=s.buildLayerMatrix(h);var T=n(h,v);T<y&&(x=0,_=t.cloneDeep(v),y=T)}f(h,_)}function c(h,d,p){return t.map(d,function(g){return i(h,g,p)})}function u(h,d){var p=new o;t.forEach(h,function(g){var v=g.graph().root,y=r(g,v,p,d);t.forEach(y.vs,function(_,E){g.node(_).order=E}),a(g,p,y.vs)})}function f(h,d){t.forEach(d,function(p){t.forEach(p,function(g,v){h.node(g).order=v})})}return uG}var fG,wme;function $Mt(){if(wme)return fG;wme=1;var t=Js(),e=rv().Graph,n=Uh();fG={positionX:p,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:s,verticalAlignment:l,horizontalCompaction:c,alignCoordinates:h,findSmallestWidthAlignment:f,balance:d};function r(y,_){var E={};function x(T,S){var w=0,C=0,D=T.length,L=t.last(S);return t.forEach(S,function(B,I){var U=a(y,B),$=U?y.node(U).order:D;(U||B===L)&&(t.forEach(S.slice(C,I+1),function(X){t.forEach(y.predecessors(X),function(N){var M=y.node(N),k=M.order;(k<w||$<k)&&!(M.dummy&&y.node(X).dummy)&&o(E,N,X)})}),C=I+1,w=$)}),S}return t.reduce(_,x),E}function i(y,_){var E={};function x(S,w,C,D,L){var B;t.forEach(t.range(w,C),function(I){B=S[I],y.node(B).dummy&&t.forEach(y.predecessors(B),function(U){var $=y.node(U);$.dummy&&($.order<D||$.order>L)&&o(E,U,B)})})}function T(S,w){var C=-1,D,L=0;return t.forEach(w,function(B,I){if(y.node(B).dummy==="border"){var U=y.predecessors(B);U.length&&(D=y.node(U[0]).order,x(w,L,I,C,D),L=I,C=D)}x(w,L,w.length,D,S.length)}),w}return t.reduce(_,T),E}function a(y,_){if(y.node(_).dummy)return t.find(y.predecessors(_),function(E){return y.node(E).dummy})}function o(y,_,E){if(_>E){var x=_;_=E,E=x}var T=y[_];T||(y[_]=T={}),T[E]=!0}function s(y,_,E){if(_>E){var x=_;_=E,E=x}return t.has(y[_],E)}function l(y,_,E,x){var T={},S={},w={};return t.forEach(_,function(C){t.forEach(C,function(D,L){T[D]=D,S[D]=D,w[D]=L})}),t.forEach(_,function(C){var D=-1;t.forEach(C,function(L){var B=x(L);if(B.length){B=t.sortBy(B,function(N){return w[N]});for(var I=(B.length-1)/2,U=Math.floor(I),$=Math.ceil(I);U<=$;++U){var X=B[U];S[L]===L&&D<w[X]&&!s(E,L,X)&&(S[X]=L,S[L]=T[L]=T[X],D=w[X])}}})}),{root:T,align:S}}function c(y,_,E,x,T){var S={},w=u(y,_,E,T),C=T?"borderLeft":"borderRight";function D(I,U){for(var $=w.nodes(),X=$.pop(),N={};X;)N[X]?I(X):(N[X]=!0,$.push(X),$=$.concat(U(X))),X=$.pop()}function L(I){S[I]=w.inEdges(I).reduce(function(U,$){return Math.max(U,S[$.v]+w.edge($))},0)}function B(I){var U=w.outEdges(I).reduce(function(X,N){return Math.min(X,S[N.w]-w.edge(N))},Number.POSITIVE_INFINITY),$=y.node(I);U!==Number.POSITIVE_INFINITY&&$.borderType!==C&&(S[I]=Math.max(S[I],U))}return D(L,w.predecessors.bind(w)),D(B,w.successors.bind(w)),t.forEach(x,function(I){S[I]=S[E[I]]}),S}function u(y,_,E,x){var T=new e,S=y.graph(),w=g(S.nodesep,S.edgesep,x);return t.forEach(_,function(C){var D;t.forEach(C,function(L){var B=E[L];if(T.setNode(B),D){var I=E[D],U=T.edge(I,B);T.setEdge(I,B,Math.max(w(y,L,D),U||0))}D=L})}),T}function f(y,_){return t.minBy(t.values(_),function(E){var x=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY;return t.forIn(E,function(S,w){var C=v(y,w)/2;x=Math.max(S+C,x),T=Math.min(S-C,T)}),x-T})}function h(y,_){var E=t.values(_),x=t.min(E),T=t.max(E);t.forEach(["u","d"],function(S){t.forEach(["l","r"],function(w){var C=S+w,D=y[C],L;if(D!==_){var B=t.values(D);L=w==="l"?x-t.min(B):T-t.max(B),L&&(y[C]=t.mapValues(D,function(I){return I+L}))}})})}function d(y,_){return t.mapValues(y.ul,function(E,x){if(_)return y[_.toLowerCase()][x];var T=t.sortBy(t.map(y,x));return(T[1]+T[2])/2})}function p(y){var _=n.buildLayerMatrix(y),E=t.merge(r(y,_),i(y,_)),x={},T;t.forEach(["u","d"],function(w){T=w==="u"?_:t.values(_).reverse(),t.forEach(["l","r"],function(C){C==="r"&&(T=t.map(T,function(I){return t.values(I).reverse()}));var D=(w==="u"?y.predecessors:y.successors).bind(y),L=l(y,T,E,D),B=c(y,T,L.root,L.align,C==="r");C==="r"&&(B=t.mapValues(B,function(I){return-I})),x[w+C]=B})});var S=f(y,x);return h(x,S),d(x,y.graph().align)}function g(y,_,E){return function(x,T,S){var w=x.node(T),C=x.node(S),D=0,L;if(D+=w.width/2,t.has(w,"labelpos"))switch(w.labelpos.toLowerCase()){case"l":L=-w.width/2;break;case"r":L=w.width/2;break}if(L&&(D+=E?L:-L),L=0,D+=(w.dummy?_:y)/2,D+=(C.dummy?_:y)/2,D+=C.width/2,t.has(C,"labelpos"))switch(C.labelpos.toLowerCase()){case"l":L=C.width/2;break;case"r":L=-C.width/2;break}return L&&(D+=E?L:-L),L=0,D}}function v(y,_){return y.node(_).width}return fG}var hG,Ome;function HMt(){if(Ome)return hG;Ome=1;var t=Js(),e=Uh(),n=$Mt().positionX;hG=r;function r(a){a=e.asNonCompoundGraph(a),i(a),t.forEach(n(a),function(o,s){a.node(s).x=o})}function i(a){var o=e.buildLayerMatrix(a),s=a.graph().ranksep,l=0;t.forEach(o,function(c){var u=t.max(t.map(c,function(f){return a.node(f).height}));t.forEach(c,function(f){a.node(f).y=l+u/2}),l+=u+s})}return hG}var dG,Cme;function GMt(){if(Cme)return dG;Cme=1;var t=Js(),e=AMt(),n=wMt(),r=CMt(),i=Uh().normalizeRanks,a=RMt(),o=Uh().removeEmptyRanks,s=MMt(),l=PMt(),c=NMt(),u=zMt(),f=HMt(),h=Uh(),d=rv().Graph;dG=p;function p(re,ne){var le=ne&&ne.debugTiming?h.time:h.notime;le("layout",function(){var ue=le("  buildLayoutGraph",function(){return D(re)});le("  runLayout",function(){g(ue,le)}),le("  updateInputGraph",function(){v(re,ue)})})}function g(re,ne){ne("    makeSpaceForEdgeLabels",function(){L(re)}),ne("    removeSelfEdges",function(){z(re)}),ne("    acyclic",function(){e.run(re)}),ne("    nestingGraph.run",function(){s.run(re)}),ne("    rank",function(){r(h.asNonCompoundGraph(re))}),ne("    injectEdgeLabelProxies",function(){B(re)}),ne("    removeEmptyRanks",function(){o(re)}),ne("    nestingGraph.cleanup",function(){s.cleanup(re)}),ne("    normalizeRanks",function(){i(re)}),ne("    assignRankMinMax",function(){I(re)}),ne("    removeEdgeLabelProxies",function(){U(re)}),ne("    normalize.run",function(){n.run(re)}),ne("    parentDummyChains",function(){a(re)}),ne("    addBorderSegments",function(){l(re)}),ne("    order",function(){u(re)}),ne("    insertSelfEdges",function(){j(re)}),ne("    adjustCoordinateSystem",function(){c.adjust(re)}),ne("    position",function(){f(re)}),ne("    positionSelfEdges",function(){V(re)}),ne("    removeBorderNodes",function(){k(re)}),ne("    normalize.undo",function(){n.undo(re)}),ne("    fixupEdgeLabelCoords",function(){N(re)}),ne("    undoCoordinateSystem",function(){c.undo(re)}),ne("    translateGraph",function(){$(re)}),ne("    assignNodeIntersects",function(){X(re)}),ne("    reversePoints",function(){M(re)}),ne("    acyclic.undo",function(){e.undo(re)})}function v(re,ne){t.forEach(re.nodes(),function(le){var ue=re.node(le),ve=ne.node(le);ue&&(ue.x=ve.x,ue.y=ve.y,ne.children(le).length&&(ue.width=ve.width,ue.height=ve.height))}),t.forEach(re.edges(),function(le){var ue=re.edge(le),ve=ne.edge(le);ue.points=ve.points,t.has(ve,"x")&&(ue.x=ve.x,ue.y=ve.y)}),re.graph().width=ne.graph().width,re.graph().height=ne.graph().height}var y=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],x=["width","height"],T={width:0,height:0},S=["minlen","weight","width","height","labeloffset"],w={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function D(re){var ne=new d({multigraph:!0,compound:!0}),le=ee(re.graph());return ne.setGraph(t.merge({},_,Q(le,y),t.pick(le,E))),t.forEach(re.nodes(),function(ue){var ve=ee(re.node(ue));ne.setNode(ue,t.defaults(Q(ve,x),T)),ne.setParent(ue,re.parent(ue))}),t.forEach(re.edges(),function(ue){var ve=ee(re.edge(ue));ne.setEdge(ue,t.merge({},w,Q(ve,S),t.pick(ve,C)))}),ne}function L(re){var ne=re.graph();ne.ranksep/=2,t.forEach(re.edges(),function(le){var ue=re.edge(le);ue.minlen*=2,ue.labelpos.toLowerCase()!=="c"&&(ne.rankdir==="TB"||ne.rankdir==="BT"?ue.width+=ue.labeloffset:ue.height+=ue.labeloffset)})}function B(re){t.forEach(re.edges(),function(ne){var le=re.edge(ne);if(le.width&&le.height){var ue=re.node(ne.v),ve=re.node(ne.w),Se={rank:(ve.rank-ue.rank)/2+ue.rank,e:ne};h.addDummyNode(re,"edge-proxy",Se,"_ep")}})}function I(re){var ne=0;t.forEach(re.nodes(),function(le){var ue=re.node(le);ue.borderTop&&(ue.minRank=re.node(ue.borderTop).rank,ue.maxRank=re.node(ue.borderBottom).rank,ne=t.max(ne,ue.maxRank))}),re.graph().maxRank=ne}function U(re){t.forEach(re.nodes(),function(ne){var le=re.node(ne);le.dummy==="edge-proxy"&&(re.edge(le.e).labelRank=le.rank,re.removeNode(ne))})}function $(re){var ne=Number.POSITIVE_INFINITY,le=0,ue=Number.POSITIVE_INFINITY,ve=0,Se=re.graph(),Re=Se.marginx||0,Xe=Se.marginy||0;function Le(Lt){var xt=Lt.x,dt=Lt.y,Bt=Lt.width,At=Lt.height;ne=Math.min(ne,xt-Bt/2),le=Math.max(le,xt+Bt/2),ue=Math.min(ue,dt-At/2),ve=Math.max(ve,dt+At/2)}t.forEach(re.nodes(),function(Lt){Le(re.node(Lt))}),t.forEach(re.edges(),function(Lt){var xt=re.edge(Lt);t.has(xt,"x")&&Le(xt)}),ne-=Re,ue-=Xe,t.forEach(re.nodes(),function(Lt){var xt=re.node(Lt);xt.x-=ne,xt.y-=ue}),t.forEach(re.edges(),function(Lt){var xt=re.edge(Lt);t.forEach(xt.points,function(dt){dt.x-=ne,dt.y-=ue}),t.has(xt,"x")&&(xt.x-=ne),t.has(xt,"y")&&(xt.y-=ue)}),Se.width=le-ne+Re,Se.height=ve-ue+Xe}function X(re){t.forEach(re.edges(),function(ne){var le=re.edge(ne),ue=re.node(ne.v),ve=re.node(ne.w),Se,Re;le.points?(Se=le.points[0],Re=le.points[le.points.length-1]):(le.points=[],Se=ve,Re=ue),le.points.unshift(h.intersectRect(ue,Se)),le.points.push(h.intersectRect(ve,Re))})}function N(re){t.forEach(re.edges(),function(ne){var le=re.edge(ne);if(t.has(le,"x"))switch((le.labelpos==="l"||le.labelpos==="r")&&(le.width-=le.labeloffset),le.labelpos){case"l":le.x-=le.width/2+le.labeloffset;break;case"r":le.x+=le.width/2+le.labeloffset;break}})}function M(re){t.forEach(re.edges(),function(ne){var le=re.edge(ne);le.reversed&&le.points.reverse()})}function k(re){t.forEach(re.nodes(),function(ne){if(re.children(ne).length){var le=re.node(ne),ue=re.node(le.borderTop),ve=re.node(le.borderBottom),Se=re.node(t.last(le.borderLeft)),Re=re.node(t.last(le.borderRight));le.width=Math.abs(Re.x-Se.x),le.height=Math.abs(ve.y-ue.y),le.x=Se.x+le.width/2,le.y=ue.y+le.height/2}}),t.forEach(re.nodes(),function(ne){re.node(ne).dummy==="border"&&re.removeNode(ne)})}function z(re){t.forEach(re.edges(),function(ne){if(ne.v===ne.w){var le=re.node(ne.v);le.selfEdges||(le.selfEdges=[]),le.selfEdges.push({e:ne,label:re.edge(ne)}),re.removeEdge(ne)}})}function j(re){var ne=h.buildLayerMatrix(re);t.forEach(ne,function(le){var ue=0;t.forEach(le,function(ve,Se){var Re=re.node(ve);Re.order=Se+ue,t.forEach(Re.selfEdges,function(Xe){h.addDummyNode(re,"selfedge",{width:Xe.label.width,height:Xe.label.height,rank:Re.rank,order:Se+ ++ue,e:Xe.e,label:Xe.label},"_se")}),delete Re.selfEdges})})}function V(re){t.forEach(re.nodes(),function(ne){var le=re.node(ne);if(le.dummy==="selfedge"){var ue=re.node(le.e.v),ve=ue.x+ue.width/2,Se=ue.y,Re=le.x-ve,Xe=ue.height/2;re.setEdge(le.e,le.label),re.removeNode(ne),le.label.points=[{x:ve+2*Re/3,y:Se-Xe},{x:ve+5*Re/6,y:Se-Xe},{x:ve+Re,y:Se},{x:ve+5*Re/6,y:Se+Xe},{x:ve+2*Re/3,y:Se+Xe}],le.label.x=le.x,le.label.y=le.y}})}function Q(re,ne){return t.mapValues(t.pick(re,ne),Number)}function ee(re){var ne={};return t.forEach(re,function(le,ue){ne[ue.toLowerCase()]=le}),ne}return dG}var pG,Rme;function WMt(){if(Rme)return pG;Rme=1;var t=Js(),e=Uh(),n=rv().Graph;pG={debugOrdering:r};function r(i){var a=e.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return t.forEach(i.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+i.node(s).rank)}),t.forEach(i.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),t.forEach(a,function(s,l){var c="layer"+l;o.setNode(c,{rank:"same"}),t.reduce(s,function(u,f){return o.setEdge(u,f,{style:"invis"}),f})}),o}return pG}var gG,Mme;function VMt(){return Mme||(Mme=1,gG="0.8.5"),gG}var vG,Pme;function YMt(){return Pme||(Pme=1,vG={graphlib:rv(),layout:GMt(),debug:WMt(),util:{time:Uh().time,notime:Uh().notime},version:VMt()}),vG}var rBe=YMt();const XMt=Ni(rBe);class j6{constructor(e){this.id="dagre",this.options={},Object.assign(this.options,j6.defaultOptions,e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericDagreLayout(!1,e,Object.assign(Object.assign({},this.options),n))})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericDagreLayout(!0,e,Object.assign(Object.assign({},this.options),n))})}genericDagreLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const{nodeSize:i}=r,a=new rBe.graphlib.Graph;a.setGraph(r),a.setDefaultEdgeLabel(()=>({}));const o=n.getAllNodes(),s=n.getAllEdges();[...o,...s].some(({id:c})=>Ln(c))&&console.error("Dagre layout only support string id, it will convert number to string."),n.getAllNodes().forEach(c=>{const{id:u}=c,f=Object.assign({},c.data);if(i!==void 0){const[h,d]=nN(ur(i)?i(c):i);Object.assign(f,{width:h,height:d})}a.setNode(u.toString(),f)}),n.getAllEdges().forEach(({id:c,source:u,target:f})=>{a.setEdge(u.toString(),f.toString(),{id:c})}),XMt.layout(a);const l={nodes:[],edges:[]};return a.nodes().forEach(c=>{const u=a.node(c);l.nodes.push({id:c,data:u}),e&&n.mergeNodeData(c,u)}),a.edges().forEach(c=>{const u=a.edge(c),{id:f}=u,h=yo(u,["id"]),{v:d,w:p}=c;l.edges.push({id:f,source:d,target:p,data:h}),e&&n.mergeEdgeData(f,h)}),l})}}j6.defaultOptions={};class tne{constructor(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}distanceTo(e){const n=this.rx-e.rx,r=this.ry-e.ry;return Math.hypot(n,r)}setPos(e,n){this.rx=e,this.ry=n}resetForce(){this.fx=0,this.fy=0}addForce(e){const n=e.rx-this.rx,r=e.ry-this.ry;let i=Math.hypot(n,r);i=i<1e-4?1e-4:i;const a=this.g*(this.degree+1)*(e.degree+1)/i;this.fx+=a*n/i,this.fy+=a*r/i}in(e){return e.contains(this.rx,this.ry)}add(e){const n=this.mass+e.mass,r=(this.rx*this.mass+e.rx*e.mass)/n,i=(this.ry*this.mass+e.ry*e.mass)/n,a=this.degree+e.degree,o={rx:r,ry:i,mass:n,degree:a};return new tne(o)}}class tA{constructor(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}getLength(){return this.length}contains(e,n){const r=this.length/2;return e<=this.xmid+r&&e>=this.xmid-r&&n<=this.ymid+r&&n>=this.ymid-r}NW(){const e=this.xmid-this.length/4,n=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r};return new tA(i)}NE(){const e=this.xmid+this.length/4,n=this.ymid+this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r};return new tA(i)}SW(){const e=this.xmid-this.length/4,n=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r};return new tA(i)}SE(){const e=this.xmid+this.length/4,n=this.ymid-this.length/4,r=this.length/2,i={xmid:e,ymid:n,length:r};return new tA(i)}}class nA{constructor(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,e!=null&&(this.quad=e)}insert(e){if(this.body==null){this.body=e;return}this._isExternal()?(this.quad&&(this.NW=new nA(this.quad.NW()),this.NE=new nA(this.quad.NE()),this.SW=new nA(this.quad.SW()),this.SE=new nA(this.quad.SE())),this._putBody(this.body),this._putBody(e),this.body=this.body.add(e)):(this.body=this.body.add(e),this._putBody(e))}_putBody(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(e){if(!(this.body==null||e===this.body))if(this._isExternal())e.addForce(this.body);else{const n=this.quad?this.quad.getLength():0,r=this.body.distanceTo(e);n/r<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e))}}}const qMt={center:[0,0],width:300,height:300,kr:5,kg:1,mode:"normal",preventOverlap:!1,dissuadeHubs:!1,maxIteration:0,ks:.1,ksmax:10,tao:.1};class ZMt{constructor(e={}){this.options=e,this.id="forceAtlas2",this.options=Object.assign(Object.assign({},qMt),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericForceAtlas2Layout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericForceAtlas2Layout(!0,e,n)})}genericForceAtlas2Layout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=n.getAllEdges(),a=n.getAllNodes(),o=this.formatOptions(r,a.length),{width:s,height:l,prune:c,maxIteration:u,nodeSize:f,center:h}=o;if(!a?.length||a.length===1)return eS(n,e,h);const d=a.map(y=>wd(y,[s,l])),p=i.filter(y=>{const{source:_,target:E}=y;return _!==E}),g=new kc({nodes:d,edges:p}),v=this.getSizes(g,f);if(this.run(g,n,u,v,e,o),c){for(let _=0;_<p.length;_+=1){const{source:E,target:x}=p[_],T=g.getDegree(E),S=g.getDegree(E);if(T<=1){const w=g.getNode(x);g.mergeNodeData(E,{x:w.data.x,y:w.data.y})}else if(S<=1){const w=g.getNode(E);g.mergeNodeData(x,{x:w.data.x,y:w.data.y})}}const y=Object.assign(Object.assign({},o),{prune:!1,barnesHut:!1});this.run(g,n,100,v,e,y)}return{nodes:d,edges:i}})}getSizes(e,n){const r=e.getAllNodes(),i={};for(let a=0;a<r.length;a+=1){const o=r[a];i[o.id]=Mte(n,void 0)(o)}return i}formatOptions(e={},n){const r=Object.assign(Object.assign({},this.options),e),{center:i,width:a,height:o,barnesHut:s,prune:l,maxIteration:c,kr:u,kg:f}=r;return r.width=!a&&typeof window<"u"?window.innerWidth:a,r.height=!o&&typeof window<"u"?window.innerHeight:o,r.center=i||[r.width/2,r.height/2],s===void 0&&n>250&&(r.barnesHut=!0),l===void 0&&n>100&&(r.prune=!0),c===0&&!l?(r.maxIteration=250,n<=200&&n>100?r.maxIteration=1e3:n>200&&(r.maxIteration=1200)):c===0&&l&&(r.maxIteration=100,n<=200&&n>100?r.maxIteration=500:n>200&&(r.maxIteration=950)),u||(r.kr=50,n>100&&n<=500?r.kr=20:n>500&&(r.kr=1)),f||(r.kg=20,n>100&&n<=500?r.kg=10:n>500&&(r.kg=1)),r}run(e,n,r,i,a,o){const{kr:s,barnesHut:l,onTick:c}=o,u=e.getAllNodes();let f=0,h=r;const d={},p={},g={};for(let v=0;v<u.length;v+=1){const{data:y,id:_}=u[v];if(d[_]=[0,0],l){const E={id:v,rx:y.x,ry:y.y,mass:1,g:s,degree:e.getDegree(_)};g[_]=new tne(E)}}for(;h>0;)f=this.oneStep(e,{iter:h,preventOverlapIters:50,krPrime:100,sg:f,forces:d,preForces:p,bodies:g,sizes:i},o),h--,c?.({nodes:u,edges:n.getAllEdges()});return e}oneStep(e,n,r){const{iter:i,preventOverlapIters:a,krPrime:o,sg:s,preForces:l,bodies:c,sizes:u}=n;let{forces:f}=n;const{preventOverlap:h,barnesHut:d}=r,p=e.getAllNodes();for(let g=0;g<p.length;g+=1){const{id:v}=p[g];l[v]=[...f[v]],f[v]=[0,0]}return f=this.getAttrForces(e,i,a,u,f,r),d&&(h&&i>a||!h)?f=this.getOptRepGraForces(e,f,c,r):f=this.getRepGraForces(e,i,a,f,o,u,r),this.updatePos(e,f,l,s,r)}getAttrForces(e,n,r,i,a,o){const{preventOverlap:s,dissuadeHubs:l,mode:c,prune:u}=o,f=e.getAllEdges();for(let h=0;h<f.length;h+=1){const{source:d,target:p}=f[h],g=e.getNode(d),v=e.getNode(p),y=e.getDegree(d),_=e.getDegree(p);if(u&&(y<=1||_<=1))continue;const E=[v.data.x-g.data.x,v.data.y-g.data.y];let x=Math.hypot(E[0],E[1]);x=x<1e-4?1e-4:x,E[0]=E[0]/x,E[1]=E[1]/x,s&&n<r&&(x=x-i[d]-i[p]);let T=x,S=T;c==="linlog"&&(T=Math.log(1+x),S=T),l&&(T=x/y,S=x/_),s&&n<r&&x<=0?(T=0,S=0):s&&n<r&&x>0&&(T=x,S=x),a[d][0]+=T*E[0],a[p][0]-=S*E[0],a[d][1]+=T*E[1],a[p][1]-=S*E[1]}return a}getOptRepGraForces(e,n,r,i){const{kg:a,center:o,prune:s}=i,l=e.getAllNodes(),c=l.length;let u=9e10,f=-9e10,h=9e10,d=-9e10;for(let _=0;_<c;_+=1){const{id:E,data:x}=l[_];s&&e.getDegree(E)<=1||(r[E].setPos(x.x,x.y),x.x>=f&&(f=x.x),x.x<=u&&(u=x.x),x.y>=d&&(d=x.y),x.y<=h&&(h=x.y))}const p=Math.max(f-u,d-h),g={xmid:(f+u)/2,ymid:(d+h)/2,length:p,massCenter:o,mass:c},v=new tA(g),y=new nA(v);for(let _=0;_<c;_+=1){const{id:E}=l[_];s&&e.getDegree(E)<=1||r[E].in(v)&&y.insert(r[E])}for(let _=0;_<c;_+=1){const{id:E,data:x}=l[_],T=e.getDegree(E);if(s&&T<=1)continue;r[E].resetForce(),y.updateForce(r[E]),n[E][0]-=r[E].fx,n[E][1]-=r[E].fy;const S=[x.x-o[0],x.y-o[1]];let w=Math.hypot(S[0],S[1]);w=w<1e-4?1e-4:w,S[0]=S[0]/w,S[1]=S[1]/w;const C=a*(T+1);n[E][0]-=C*S[0],n[E][1]-=C*S[1]}return n}getRepGraForces(e,n,r,i,a,o,s){const{preventOverlap:l,kr:c,kg:u,center:f,prune:h}=s,d=e.getAllNodes(),p=d.length;for(let g=0;g<p;g+=1){const v=d[g],y=e.getDegree(v.id);for(let T=g+1;T<p;T+=1){const S=d[T],w=e.getDegree(S.id);if(h&&(y<=1||w<=1))continue;const C=[S.data.x-v.data.x,S.data.y-v.data.y];let D=Math.hypot(C[0],C[1]);D=D<1e-4?1e-4:D,C[0]=C[0]/D,C[1]=C[1]/D,l&&n<r&&(D=D-o[v.id]-o[S.id]);let L=c*(y+1)*(w+1)/D;l&&n<r&&D<0?L=a*(y+1)*(w+1):l&&n<r&&D===0?L=0:l&&n<r&&D>0&&(L=c*(y+1)*(w+1)/D),i[v.id][0]-=L*C[0],i[S.id][0]+=L*C[0],i[v.id][1]-=L*C[1],i[S.id][1]+=L*C[1]}const _=[v.data.x-f[0],v.data.y-f[1]],E=Math.hypot(_[0],_[1]);_[0]=_[0]/E,_[1]=_[1]/E;const x=u*(y+1);i[v.id][0]-=x*_[0],i[v.id][1]-=x*_[1]}return i}updatePos(e,n,r,i,a){const{ks:o,tao:s,prune:l,ksmax:c}=a,u=e.getAllNodes(),f=u.length,h=[],d=[];let p=0,g=0,v=i;for(let _=0;_<f;_+=1){const{id:E}=u[_],x=e.getDegree(E);if(l&&x<=1)continue;const T=[n[E][0]-r[E][0],n[E][1]-r[E][1]],S=Math.hypot(T[0],T[1]),w=[n[E][0]+r[E][0],n[E][1]+r[E][1]],C=Math.hypot(w[0],w[1]);h[_]=S,d[_]=C/2,p+=(x+1)*h[_],g+=(x+1)*d[_]}const y=v;v=s*g/p,y!==0&&(v=v>1.5*y?1.5*y:v);for(let _=0;_<f;_+=1){const{id:E,data:x}=u[_],T=e.getDegree(E);if(l&&T<=1||Ln(x.fx)&&Ln(x.fy))continue;let S=o*v/(1+v*Math.sqrt(h[_])),w=Math.hypot(n[E][0],n[E][1]);w=w<1e-4?1e-4:w;const C=c/w;S=S>C?C:S;const D=S*n[E][0],L=S*n[E][1];e.mergeNodeData(E,{x:x.x+D,y:x.y+L})}return v}}const KMt={maxIteration:1e3,gravity:10,speed:5,clustering:!1,clusterGravity:10,width:300,height:300,nodeClusterBy:"cluster"},QMt=800;class JMt{constructor(e={}){this.options=e,this.id="fruchterman",this.timeInterval=0,this.running=!1,this.options=Object.assign(Object.assign({},KMt),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericFruchtermanLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericFruchtermanLayout(!0,e,n)})}stop(){this.timeInterval&&typeof window<"u"&&window.clearInterval(this.timeInterval),this.running=!1}tick(e=this.options.maxIteration||1){if(this.lastResult)return this.lastResult;for(let r=0;r<e;r++)this.runOneStep(this.lastGraph,this.lastClusterMap,this.lastOptions);const n={nodes:this.lastLayoutNodes,edges:this.lastLayoutEdges};return this.lastAssign&&n.nodes.forEach(r=>this.lastGraph.mergeNodeData(r.id,{x:r.data.x,y:r.data.y,z:this.options.dimensions===3?r.data.z:void 0})),n}genericFruchtermanLayout(e,n,r){return Pi(this,void 0,void 0,function*(){if(this.running)return;const i=this.formatOptions(r),{dimensions:a,width:o,height:s,center:l,clustering:c,nodeClusterBy:u,maxIteration:f,onTick:h}=i,d=n.getAllNodes(),p=n.getAllEdges();if(!d?.length){const E={nodes:[],edges:p};return this.lastResult=E,E}if(d.length===1){e&&n.mergeNodeData(d[0].id,{x:l[0],y:l[1],z:a===3?l[2]:void 0});const E={nodes:[Object.assign(Object.assign({},d[0]),{data:Object.assign(Object.assign({},d[0].data),{x:l[0],y:l[1],z:a===3?l[2]:void 0})})],edges:p};return this.lastResult=E,E}const g=d.map(E=>wd(E,[o,s])),v=new kc({nodes:g,edges:p}),y={};if(c&&g.forEach(E=>{const x=E.data[u];y[x]||(y[x]={name:x,cx:0,cy:0,count:0})}),this.lastLayoutNodes=g,this.lastLayoutEdges=p,this.lastAssign=e,this.lastGraph=v,this.lastOptions=i,this.lastClusterMap=y,typeof window>"u")return;let _=0;return new Promise(E=>{this.timeInterval=window.setInterval(()=>{if(!this.running){E({nodes:g,edges:p});return}this.runOneStep(v,y,i),e&&g.forEach(({id:x,data:T})=>n.mergeNodeData(x,{x:T.x,y:T.y,z:a===3?T.z:void 0})),h?.({nodes:g,edges:p}),_++,_>=f&&(window.clearInterval(this.timeInterval),E({nodes:g,edges:p}))},0),this.running=!0})})}formatOptions(e={}){const n=Object.assign(Object.assign({},this.options),e),{clustering:r,nodeClusterBy:i}=n,{center:a,width:o,height:s}=n;return n.width=!o&&typeof window<"u"?window.innerWidth:o,n.height=!s&&typeof window<"u"?window.innerHeight:s,n.center=a||[n.width/2,n.height/2],n.clustering=r&&!!i,n}runOneStep(e,n,r){const{dimensions:i,height:a,width:o,gravity:s,center:l,speed:c,clustering:u,nodeClusterBy:f,clusterGravity:h}=r,d=a*o,p=Math.sqrt(d)/10,g=e.getAllNodes(),v=d/(g.length+1),y=Math.sqrt(v),_={};if(this.applyCalculate(e,_,y,v),u){for(const x in n)n[x].cx=0,n[x].cy=0,n[x].count=0;g.forEach(x=>{const{data:T}=x,S=n[T[f]];Ln(T.x)&&(S.cx+=T.x),Ln(T.y)&&(S.cy+=T.y),S.count++});for(const x in n)n[x].cx/=n[x].count,n[x].cy/=n[x].count;const E=h||s;g.forEach((x,T)=>{const{id:S,data:w}=x;if(!Ln(w.x)||!Ln(w.y))return;const C=n[w[f]],D=Math.sqrt((w.x-C.cx)*(w.x-C.cx)+(w.y-C.cy)*(w.y-C.cy)),L=y*E;_[S].x-=L*(w.x-C.cx)/D,_[S].y-=L*(w.y-C.cy)/D})}g.forEach((E,x)=>{const{id:T,data:S}=E;if(!Ln(S.x)||!Ln(S.y))return;const w=.01*y*s;_[T].x-=w*(S.x-l[0]),_[T].y-=w*(S.y-l[1]),i===3&&(_[T].z-=w*(S.z-l[2]))}),g.forEach((E,x)=>{const{id:T,data:S}=E;if(Ln(S.fx)&&Ln(S.fy)){S.x=S.fx,S.y=S.fy,i===3&&(S.z=S.fz);return}if(!Ln(S.x)||!Ln(S.y))return;const w=Math.sqrt(_[T].x*_[T].x+_[T].y*_[T].y+(i===3?_[T].z*_[T].z:0));if(w>0){const C=Math.min(p*(c/QMt),w);e.mergeNodeData(T,{x:S.x+_[T].x/w*C,y:S.y+_[T].y/w*C,z:i===3?S.z+_[T].z/w*C:void 0})}})}applyCalculate(e,n,r,i){this.calRepulsive(e,n,i),this.calAttractive(e,n,r)}calRepulsive(e,n,r){const i=e.getAllNodes();i.forEach(({data:a,id:o},s)=>{n[o]={x:0,y:0,z:0},i.forEach(({data:l,id:c},u)=>{if(s<=u||!Ln(a.x)||!Ln(l.x)||!Ln(a.y)||!Ln(l.y))return;let f=a.x-l.x,h=a.y-l.y,d=this.options.dimensions===3?a.z-l.z:0,p=f*f+h*h+d*d;p===0&&(p=1,f=.01,h=.01,d=.01);const g=r/p,v=f*g,y=h*g,_=d*g;n[o].x+=v,n[o].y+=y,n[c].x-=v,n[c].y-=y,this.options.dimensions===3&&(n[o].z+=_,n[c].z-=_)})})}calAttractive(e,n,r){e.getAllEdges().forEach(a=>{const{source:o,target:s}=a;if(!o||!s||o===s)return;const{data:l}=e.getNode(o),{data:c}=e.getNode(s);if(!Ln(c.x)||!Ln(l.x)||!Ln(c.y)||!Ln(l.y))return;const u=c.x-l.x,f=c.y-l.y,h=this.options.dimensions===3?c.z-l.z:0,d=Math.sqrt(u*u+f*f+h*h)/r,p=u*d,g=f*d,v=h*d;n[o].x+=p,n[o].y+=g,n[s].x-=p,n[s].y-=g,this.options.dimensions===3&&(n[o].z+=v,n[s].z-=v)})}}const ePt={begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30,width:300,height:300};class tPt{constructor(e={}){this.options=e,this.id="grid",this.options=Object.assign(Object.assign({},ePt),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericGridLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericGridLayout(!0,e,n)})}genericGridLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{begin:a=[0,0],condense:o,preventOverlapPadding:s,preventOverlap:l,rows:c,cols:u,nodeSpacing:f,nodeSize:h,width:d,height:p,position:g}=i;let{sortBy:v}=i;const y=n.getAllNodes(),_=n.getAllEdges(),E=y?.length;if(!E||E===1)return eS(n,e,a);const x=y.map(X=>wd(X));v!=="id"&&(!$i(v)||x[0].data[v]===void 0)&&(v="degree"),v==="degree"?x.sort((X,N)=>n.getDegree(N.id,"both")-n.getDegree(X.id,"both")):v==="id"?x.sort((X,N)=>Ln(N.id)&&Ln(X.id)?N.id-X.id:`${X.id}`.localeCompare(`${N.id}`)):x.sort((X,N)=>N.data[v]-X.data[v]);const T=!d&&typeof window<"u"?window.innerWidth:d,S=!p&&typeof window<"u"?window.innerHeight:p,w=E,C={rows:c,cols:u};if(c!=null&&u!=null)C.rows=c,C.cols=u;else if(c!=null&&u==null)C.rows=c,C.cols=Math.ceil(w/C.rows);else if(c==null&&u!=null)C.cols=u,C.rows=Math.ceil(w/C.cols);else{const X=Math.sqrt(w*S/T);C.rows=Math.round(X),C.cols=Math.round(T/S*X)}if(C.rows=Math.max(C.rows,1),C.cols=Math.max(C.cols,1),C.cols*C.rows>w){const X=KI(C),N=QI(C);(X-1)*N>=w?KI(C,X-1):(N-1)*X>=w&&QI(C,N-1)}else for(;C.cols*C.rows<w;){const X=KI(C),N=QI(C);(N+1)*X>=w?QI(C,N+1):KI(C,X+1)}let D=o?0:T/C.cols,L=o?0:S/C.rows;if(l||f){const X=ix(10,f),N=Rte(30,h,!1);x.forEach(M=>{(!M.data.x||!M.data.y)&&(M.data.x=0,M.data.y=0);const k=n.getNode(M.id),[z,j]=nN(N(k)||30),V=X!==void 0?X(M):s,Q=z+V,ee=j+V;D=Math.max(D,Q),L=Math.max(L,ee)})}const B={},I={row:0,col:0},U={};for(let X=0;X<x.length;X++){const N=x[X];let M;if(g&&(M=g(n.getNode(N.id))),M&&(M.row!==void 0||M.col!==void 0)){const k={row:M.row,col:M.col};if(k.col===void 0)for(k.col=0;Iq(B,k);)k.col++;else if(k.row===void 0)for(k.row=0;Iq(B,k);)k.row++;U[N.id]=k,iBe(B,k)}nPt(N,a,D,L,U,C,I,B)}const $={nodes:x,edges:_};return e&&x.forEach(X=>{n.mergeNodeData(X.id,{x:X.data.x,y:X.data.y})}),$})}}const KI=(t,e)=>{let n;const r=t.rows||5,i=t.cols||5;return e==null?n=Math.min(r,i):Math.min(r,i)===t.rows?t.rows=e:t.cols=e,n},QI=(t,e)=>{let n;const r=t.rows||5,i=t.cols||5;return e==null?n=Math.max(r,i):Math.max(r,i)===t.rows?t.rows=e:t.cols=e,n},Iq=(t,e)=>t[`c-${e.row}-${e.col}`]||!1,iBe=(t,e)=>t[`c-${e.row}-${e.col}`]=!0,Nme=(t,e)=>{const n=t.cols||5;e.col++,e.col>=n&&(e.col=0,e.row++)},nPt=(t,e,n,r,i,a,o,s)=>{let l,c;const u=i[t.id];if(u)l=u.col*n+n/2+e[0],c=u.row*r+r/2+e[1];else{for(;Iq(s,o);)Nme(a,o);l=o.col*n+n/2+e[0],c=o.row*r+r/2+e[1],iBe(s,o),Nme(a,o)}t.data.x=l,t.data.y=c},rPt=(t,e,n)=>{try{const r=C_.mul(C_.pow(e,2),-.5),i=r.mean("row"),a=r.mean("column"),o=r.mean();r.add(o).subRowVector(i).subColumnVector(a);const s=new Xke(r),l=C_.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map(c=>C_.mul([c],[l]).toJSON()[0].splice(0,t))}catch{const i=[];for(let a=0;a<e.length;a++){const o=Math.random()*n,s=Math.random()*n;i.push([o,s])}return i}},iPt=800,aPt={iterations:10,height:10,width:10,speed:100,gravity:10,k:5},oPt=(t,e)=>{const n=Object.assign(Object.assign({},aPt),e),{positions:r,iterations:i,width:a,k:o,speed:s=100,strictRadial:l,focusIdx:c,radii:u=[],nodeSizeFunc:f}=n,h=t.getAllNodes(),d=[],p=a/10;for(let g=0;g<i;g++)r.forEach((v,y)=>{d[y]={x:0,y:0}}),sPt(h,r,d,o,u,f),lPt(r,d,s,l,c,p,a,u);return r},sPt=(t,e,n,r,i,a)=>{e.forEach((o,s)=>{n[s]={x:0,y:0},e.forEach((l,c)=>{if(s===c||i[s]!==i[c])return;let u=o.x-l.x,f=o.y-l.y,h=Math.sqrt(u*u+f*f);if(h===0){h=1;const d=s>c?1:-1;u=.01*d,f=.01*d}if(h<a(t[s])/2+a(t[c])/2){const d=r*r/h;n[s].x+=u/h*d,n[s].y+=f/h*d}})})},lPt=(t,e,n,r,i,a,o,s)=>{const l=a||o/10;return r&&e.forEach((c,u)=>{const f=t[u].x-t[i].x,h=t[u].y-t[i].y,d=Math.sqrt(f*f+h*h);let p=h/d,g=-f/d;const v=Math.sqrt(c.x*c.x+c.y*c.y);let y=Math.acos((p*c.x+g*c.y)/v);y>Math.PI/2&&(y-=Math.PI/2,p*=-1,g*=-1);const _=Math.cos(y)*v;c.x=p*_,c.y=g*_}),t.forEach((c,u)=>{if(u===i)return;const f=Math.sqrt(e[u].x*e[u].x+e[u].y*e[u].y);if(f>0&&u!==i){const h=Math.min(l*(n/iPt),f);if(c.x+=e[u].x/f*h,c.y+=e[u].y/f*h,r){let d=c.x-t[i].x,p=c.y-t[i].y;const g=Math.sqrt(d*d+p*p);d=d/g*s[u],p=p/g*s[u],c.x=t[i].x+d,c.y=t[i].y+p}}}),t},cPt={maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,strictRadial:!0,maxPreventOverlapIteration:200,sortStrength:10};class uPt{constructor(e={}){this.options=e,this.id="radial",this.options=Object.assign(Object.assign({},cPt),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericRadialLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericRadialLayout(!0,e,n)})}genericRadialLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{width:a,height:o,center:s,focusNode:l,unitRadius:c,nodeSize:u,nodeSpacing:f,strictRadial:h,preventOverlap:d,maxPreventOverlapIteration:p,sortBy:g,linkDistance:v=50,sortStrength:y=10,maxIteration:_=1e3}=i,E=n.getAllNodes(),x=n.getAllEdges(),T=!a&&typeof window<"u"?window.innerWidth:a,S=!o&&typeof window<"u"?window.innerHeight:o,w=s||[T/2,S/2];if(!E?.length||E.length===1)return eS(n,e,w);let C=E[0];if($i(l)){for(let ue=0;ue<E.length;ue++)if(E[ue].id===l){C=E[ue];break}}else C=l||E[0];const D=dPt(E,C.id),L=Gke({nodes:E,edges:x}),B=Hke(L),I=gPt(B,D);pPt(B,D,I+1);const U=B[D];let $=T-w[0]>w[0]?w[0]:T-w[0],X=S-w[1]>w[1]?w[1]:S-w[1];$===0&&($=T/2),X===0&&(X=S/2);const N=Math.min($,X),M=Math.max(...U),k=[],z=c||N/M;U.forEach((ue,ve)=>{k[ve]=ue*z});const j=fPt(E,B,v,k,z,g,y),V=hPt(j),Q=rPt(v,j,v);let ee=Q.map(([ue,ve])=>({x:(isNaN(ue)?Math.random()*v:ue)-Q[D][0],y:(isNaN(ve)?Math.random()*v:ve)-Q[D][1]}));this.run(_,ee,V,j,k,D);let re;if(d){re=Mte(u,f);const ue={nodes:E,nodeSizeFunc:re,positions:ee,radii:k,height:S,width:T,strictRadial:!!h,focusIdx:D,iterations:p||200,k:ee.length/4.5};ee=oPt(n,ue)}const ne=[];return ee.forEach((ue,ve)=>{const Se=wd(E[ve]);Se.data.x=ue.x+w[0],Se.data.y=ue.y+w[1],ne.push(Se)}),e&&ne.forEach(ue=>n.mergeNodeData(ue.id,{x:ue.data.x,y:ue.data.y})),{nodes:ne,edges:x}})}run(e,n,r,i,a,o){for(let s=0;s<=e;s++){const l=s/e;this.oneIteration(l,n,a,i,r,o)}}oneIteration(e,n,r,i,a,o){const s=1-e;n.forEach((l,c)=>{const u=rhe(l,{x:0,y:0}),f=u===0?0:1/u;if(c===o)return;let h=0,d=0,p=0;n.forEach((v,y)=>{if(c===y)return;const _=rhe(l,v),E=_===0?0:1/_,x=i[y][c];p+=a[c][y],h+=a[c][y]*(v.x+x*(l.x-v.x)*E),d+=a[c][y]*(v.y+x*(l.y-v.y)*E)});const g=r[c]===0?0:1/r[c];p*=s,p+=e*g*g,h*=s,h+=e*g*l.x*f,l.x=h/p,d*=s,d+=e*g*l.y*f,l.y=d/p})}}const fPt=(t,e,n,r,i,a,o)=>{if(!t)return[];const s=[];if(e){const l={};e.forEach((c,u)=>{const f=[];c.forEach((h,d)=>{var p,g;if(u===d)f.push(0);else if(r[u]===r[d])if(a==="data")f.push(h*(Math.abs(u-d)*o)/(r[u]/i));else if(a){let v,y;if(l[t[u].id])v=l[t[u].id];else{const _=(a==="id"?t[u].id:(p=t[u].data)===null||p===void 0?void 0:p[a])||0;$i(_)?v=_.charCodeAt(0):v=_,l[t[u].id]=v}if(l[t[d].id])y=l[t[d].id];else{const _=(a==="id"?t[d].id:(g=t[d].data)===null||g===void 0?void 0:g[a])||0;$i(_)?y=_.charCodeAt(0):y=_,l[t[d].id]=y}f.push(h*(Math.abs(v-y)*o)/(r[u]/i))}else f.push(h*n/(r[u]/i));else{const v=(n+i)/2;f.push(h*v)}}),s.push(f)})}return s},hPt=t=>{const e=t.length,n=t[0].length,r=[];for(let i=0;i<e;i++){const a=[];for(let o=0;o<n;o++)t[i][o]!==0?a.push(1/(t[i][o]*t[i][o])):a.push(0);r.push(a)}return r},dPt=(t,e)=>{let n=-1;return t.forEach((r,i)=>{r.id===e&&(n=i)}),Math.max(n,0)},pPt=(t,e,n)=>{const r=t.length;for(let i=0;i<r;i++)if(t[e][i]===1/0){t[e][i]=n,t[i][e]=n;for(let a=0;a<r;a++)t[i][a]!==1/0&&t[e][a]===1/0&&(t[e][a]=n+t[i][a],t[a][e]=n+t[i][a])}for(let i=0;i<r;i++)if(i!==e){for(let a=0;a<r;a++)if(t[i][a]===1/0){let o=Math.abs(t[e][i]-t[e][a]);o=o===0?1:o,t[i][a]=o}}},gPt=(t,e)=>{let n=0;for(let r=0;r<t[e].length;r++)t[e][r]!==1/0&&(n=t[e][r]>n?t[e][r]:n);return n},vPt={center:[0,0],width:300,height:300};class mPt{constructor(e={}){this.options=e,this.id="random",this.options=Object.assign(Object.assign({},vPt),e)}execute(e,n){return Pi(this,void 0,void 0,function*(){return this.genericRandomLayout(!1,e,n)})}assign(e,n){return Pi(this,void 0,void 0,function*(){yield this.genericRandomLayout(!0,e,n)})}genericRandomLayout(e,n,r){return Pi(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},this.options),r),{center:a,width:o,height:s}=i,l=n.getAllNodes(),c=.9,u=!o&&typeof window<"u"?window.innerWidth:o,f=!s&&typeof window<"u"?window.innerHeight:s,h=a||[u/2,f/2],d=[];return l&&l.forEach(g=>{d.push({id:g.id,data:{x:(Math.random()-.5)*c*u+h[0],y:(Math.random()-.5)*c*f+h[1]}})}),e&&d.forEach(g=>n.mergeNodeData(g.id,{x:g.data.x,y:g.data.y})),{nodes:d,edges:n.getAllEdges()}})}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const aBe=Symbol("Comlink.proxy"),yPt=Symbol("Comlink.endpoint"),oBe=Symbol("Comlink.releaseProxy"),mG=Symbol("Comlink.finalizer"),Ek=Symbol("Comlink.thrown"),sBe=t=>typeof t=="object"&&t!==null||typeof t=="function",_Pt={canHandle:t=>sBe(t)&&t[aBe],serialize(t){const{port1:e,port2:n}=new MessageChannel;return cBe(t,e),[n,[n]]},deserialize(t){return t.start(),fBe(t)}},bPt={canHandle:t=>sBe(t)&&Ek in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},lBe=new Map([["proxy",_Pt],["throw",bPt]]);function EPt(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function cBe(t,e=globalThis,n=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!EPt(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:a,type:o,path:s}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(LE);let c;try{const u=s.slice(0,-1).reduce((h,d)=>h[d],t),f=s.reduce((h,d)=>h[d],t);switch(o){case"GET":c=f;break;case"SET":u[s.slice(-1)[0]]=LE(i.data.value),c=!0;break;case"APPLY":c=f.apply(u,l);break;case"CONSTRUCT":{const h=new f(...l);c=OPt(h)}break;case"ENDPOINT":{const{port1:h,port2:d}=new MessageChannel;cBe(t,d),c=wPt(h,[h])}break;case"RELEASE":c=void 0;break;default:return}}catch(u){c={value:u,[Ek]:0}}Promise.resolve(c).catch(u=>({value:u,[Ek]:0})).then(u=>{const[f,h]=LB(u);e.postMessage(Object.assign(Object.assign({},f),{id:a}),h),o==="RELEASE"&&(e.removeEventListener("message",r),uBe(e),mG in t&&typeof t[mG]=="function"&&t[mG]())}).catch(u=>{const[f,h]=LB({value:new TypeError("Unserializable return value"),[Ek]:0});e.postMessage(Object.assign(Object.assign({},f),{id:a}),h)})}),e.start&&e.start()}function xPt(t){return t.constructor.name==="MessagePort"}function uBe(t){xPt(t)&&t.close()}function fBe(t,e){const n=new Map;return t.addEventListener("message",function(i){const{data:a}=i;if(!a||!a.id)return;const o=n.get(a.id);if(o)try{o(a)}finally{n.delete(a.id)}}),Lq(t,n,[],e)}function JI(t){if(t)throw new Error("Proxy has been released and is not useable")}function hBe(t){return zT(t,new Map,{type:"RELEASE"}).then(()=>{uBe(t)})}const NB=new WeakMap,IB="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(NB.get(t)||0)-1;NB.set(t,e),e===0&&hBe(t)});function SPt(t,e){const n=(NB.get(e)||0)+1;NB.set(e,n),IB&&IB.register(t,e,t)}function TPt(t){IB&&IB.unregister(t)}function Lq(t,e,n=[],r=function(){}){let i=!1;const a=new Proxy(r,{get(o,s){if(JI(i),s===oBe)return()=>{TPt(a),hBe(t),e.clear(),i=!0};if(s==="then"){if(n.length===0)return{then:()=>a};const l=zT(t,e,{type:"GET",path:n.map(c=>c.toString())}).then(LE);return l.then.bind(l)}return Lq(t,e,[...n,s])},set(o,s,l){JI(i);const[c,u]=LB(l);return zT(t,e,{type:"SET",path:[...n,s].map(f=>f.toString()),value:c},u).then(LE)},apply(o,s,l){JI(i);const c=n[n.length-1];if(c===yPt)return zT(t,e,{type:"ENDPOINT"}).then(LE);if(c==="bind")return Lq(t,e,n.slice(0,-1));const[u,f]=Ime(l);return zT(t,e,{type:"APPLY",path:n.map(h=>h.toString()),argumentList:u},f).then(LE)},construct(o,s){JI(i);const[l,c]=Ime(s);return zT(t,e,{type:"CONSTRUCT",path:n.map(u=>u.toString()),argumentList:l},c).then(LE)}});return SPt(a,t),a}function APt(t){return Array.prototype.concat.apply([],t)}function Ime(t){const e=t.map(LB);return[e.map(n=>n[0]),APt(e.map(n=>n[1]))]}const dBe=new WeakMap;function wPt(t,e){return dBe.set(t,e),t}function OPt(t){return Object.assign(t,{[aBe]:!0})}function LB(t){for(const[e,n]of lBe)if(n.canHandle(t)){const[r,i]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:t},dBe.get(t)||[]]}function LE(t){switch(t.type){case"HANDLER":return lBe.get(t.name).deserialize(t.value);case"RAW":return t.value}}function zT(t,e,n,r){return new Promise(i=>{const a=CPt();e.set(a,i),t.start&&t.start(),t.postMessage(Object.assign({id:a},n),r)})}function CPt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}class RPt extends Jm{constructor(e,n,r){super(),this.graph=e,this.layout=n,this.options=r,this.spawnWorker()}spawnWorker(){this.proxy=fBe(new Worker(new URL("/vunk-markdown/assets/worker-_uLz92tA.js",import.meta.url),{type:"module"})),this.running&&(this.running=!1,this.execute())}execute(){var e;return Pi(this,void 0,void 0,function*(){if(this.running)return this;this.running=!0;const n=this.layout.options,{onTick:r}=n,i=yo(n,["onTick"]),a={};Object.keys(i).forEach(c=>{ur(i[c])||(a[c]=i[c])});const o={layout:{id:this.layout.id,options:a,iterations:(e=this.options)===null||e===void 0?void 0:e.iterations},nodes:this.graph.getAllNodes(),edges:this.graph.getAllEdges()},s=new Float32Array([0]),[l]=yield this.proxy.calculateLayout(o,[s]);return l})}stop(){return this.running=!1,this.proxy.stopLayout(),this}kill(){this.proxy[oBe]()}isRunning(){return this.running}}var MPt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class z6 extends y6{constructor(){super(...arguments),this.id="fishbone"}getRoot(){const e=this.context.model.getRootsData();if(!(Em(e)||e.length>2))return e[0]}formatSize(e){const n=typeof e=="function"?e:()=>e;return r=>Fh(n(r))}doLayout(e,n){const{hGap:r,getRibSep:i,vGap:a,nodeSize:o,height:s}=n,{model:l}=this.context,c=this.formatSize(o);let u=c(e)[0]+i(e);const f=(E,x=0)=>{var T;return x+=r*((E.children||[]).length+1),(T=E.children)===null||T===void 0||T.forEach(S=>{var w;(w=l.getNodeLikeDatum(S).children)===null||w===void 0||w.forEach(D=>{const L=l.getNodeLikeDatum(D);x=f(L,x)})}),x},h=E=>{if(E.depth===1)return u;const x=l.getParentData(E.id,"tree");if(ST(E)){const T=l.getParentData(x.id,"tree"),S=g(E)-g(T);return h(x)+S*r/a}else{const T=(x.children||[]).indexOf(E.id),S=l.getNodeData((x.children||[]).slice(T));return d(x)-S.reduce((w,C)=>w+f(C),0)-c(x)[0]/2}},d=mY(E=>{if(yG(E))return c(E)[0]/2;const x=l.getParentData(E.id,"tree");if(ST(E))return h(E)+f(E)+c(E)[0]/2;{const T=g(E)-g(x),S=r/a;return h(E)+T*S}},E=>E.id),p=E=>g(l.getParentData(E,"tree")),g=mY(E=>{if(yG(E))return s/2;if(ST(E)){const x=l.getParentData(E.id,"tree"),T=x.children.indexOf(E.id);if(T===0)return p(x.id)+a;const S=l.getNodeLikeDatum(x.children[T-1]);if(Em(S.children))return g(S)+a;const w=l.getDescendantsData(S.id);return Math.max(...w.map(C=>ST(C)?p(C.id):g(C)))+a}else{if(Em(E.children))return p(E.id)+a;const x=l.getNodeLikeDatum(E.children.slice(-1)[0]);if(Em(x.children))return g(x)+a;const T=l.getDescendantsData(E.id).slice(-1)[0];return(ST(T)?p(T.id):g(T))+a}},E=>E.id);let v=0;const y={nodes:[],edges:[]},_=E=>{var x;(x=E.children)===null||x===void 0||x.forEach(D=>_(l.getNodeLikeDatum(D)));const T=g(E),S=d(E);if(y.nodes.push({id:E.id,x:S,y:T}),yG(E))return;const w=l.getRelatedEdgesData(E.id,"in")[0],C=[h(E),ST(E)?T:p(E.id)];y.edges.push({id:pt(w),controlPoints:[C],relatedNodeId:E.id}),v=Math.max(v,S+i(E)),E.depth===1&&(u=v)};return _(e),y}placeAlterative(e,n){const r=(n.children||[]).filter((s,l)=>l%2!==0);if(r.length===0)return e;const{model:i}=this.context,a=e.nodes.find(s=>s.id===n.id).y,o=s=>{const l=i.getAncestorsData(s,"tree");if(Em(l))return!1;const c=l.length===1?s:l[l.length-2].id;return r.includes(c)};e.nodes.forEach(s=>{o(s.id)&&(s.y=2*a-s.y)}),e.edges.forEach(s=>{o(s.relatedNodeId)&&(s.controlPoints=s.controlPoints.map(l=>[l[0],2*a-l[1]]))})}rightToLeft(e,n){return e.nodes.forEach(r=>r.x=n.width-r.x),e.edges.forEach(r=>{r.controlPoints=r.controlPoints.map(i=>[n.width-i[0],i[1]])}),e}execute(e,n){return MPt(this,void 0,void 0,function*(){const r=Object.assign(Object.assign(Object.assign({},z6.defaultOptions),this.options),n),{direction:i,nodeSize:a}=r,o=this.getRoot();if(!o)return e;const s=this.formatSize(a);r.vGap||(r.vGap=Math.max(...(e.nodes||[]).map(h=>s(h)[1]))),r.hGap||(r.hGap=Math.max(...(e.nodes||[]).map(h=>s(h)[0])));let l=this.doLayout(o,r);this.placeAlterative(l,o),i==="RL"&&(l=this.rightToLeft(l,r));const{model:c}=this.context,u=[],f=[];return l.nodes.forEach(h=>{const{id:d,x:p,y:g}=h,v=c.getNodeLikeDatum(d);u.push(Lme(v,{x:p,y:g}))}),l.edges.forEach(h=>{const{id:d,controlPoints:p}=h,g=c.getEdgeDatum(d);f.push(Lme(g,{controlPoints:p}))}),{nodes:u,edges:f}})}}z6.defaultOptions={direction:"RL",getRibSep:()=>60};const Lme=(t,e)=>Object.assign(Object.assign({},t),{style:Object.assign(Object.assign({},t.style||{}),e)}),yG=t=>t.depth===0,ST=t=>(t.depth||(t.depth=0))%2===0;var PPt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class $6 extends y6{constructor(){super(...arguments),this.id="snake"}formatSize(e,n){const r=typeof n=="function"?n:(()=>n);return e.reduce((i,a)=>{const[o,s]=Fh(r(a))||[0,0];return[Math.max(i[0],o),Math.max(i[1],s)]},[0,0])}validate(e){const{nodes:n=[],edges:r=[]}=e,i={},a={},o={};n.forEach(h=>{i[h.id]=0,a[h.id]=0,o[h.id]=[]}),r.forEach(h=>{i[h.target]++,a[h.source]++,o[h.source].push(h.target)});const s=new Set,l=h=>{s.has(h)||(s.add(h),o[h].forEach(l))};if(l(n[0].id),s.size!==n.length)return!1;const c=n.filter(h=>i[h.id]===0),u=n.filter(h=>a[h.id]===0);return!(c.length!==1||u.length!==1||n.filter(h=>i[h.id]===1&&a[h.id]===1).length!==n.length-2)}execute(e,n){return PPt(this,void 0,void 0,function*(){var r;if(!this.validate(e))return e;const{nodeSize:i,padding:a,sortBy:o,cols:s,colGap:l,rowGap:c,clockwise:u,width:f,height:h}=Object.assign({},$6.defaultOptions,this.options,n),[d,p,g,v]=Qp(a),y=this.formatSize(e.nodes||[],i),_=Math.ceil((e.nodes||[]).length/s);let E=l||(f-v-p-s*y[0])/(s-1),x=c||(h-d-g-_*y[1])/(_-1);return(x===1/0||x<0)&&(x=0),(E===1/0||E<0)&&(E=0),{nodes:((o?(r=e.nodes)===null||r===void 0?void 0:r.sort(o):NPt(e))||[]).map((w,C)=>{const D=Math.floor(C/s),L=C%s,B=u?D%2===0?L:s-1-L:D%2===0?s-1-L:L,I=v+B*(y[0]+E)+y[0]/2,U=d+D*(y[1]+x)+y[1]/2;return{id:w.id,style:{x:I,y:U}}})}})}}$6.defaultOptions={padding:0,cols:5,clockwise:!0};function NPt(t){const{nodes:e=[],edges:n=[]}=t,r={},i={};e.forEach(s=>{r[s.id]=0,i[s.id]=[]}),n.forEach(s=>{r[s.target]++,i[s.source].push(s.target)});const a=[],o=[];for(e.forEach(s=>{r[s.id]===0&&a.push(s.id)});a.length>0;){const s=a.shift(),l=e.find(c=>c.id===s);o.push(l),i[s].forEach(c=>{r[c]--,r[c]===0&&a.push(c)})}return o}const IPt=["rgb(158, 1, 66)","rgb(213, 62, 79)","rgb(244, 109, 67)","rgb(253, 174, 97)","rgb(254, 224, 139)","rgb(255, 255, 191)","rgb(230, 245, 152)","rgb(171, 221, 164)","rgb(102, 194, 165)","rgb(50, 136, 189)","rgb(94, 79, 162)"],LPt=["rgb(78, 121, 167)","rgb(242, 142, 44)","rgb(225, 87, 89)","rgb(118, 183, 178)","rgb(89, 161, 79)","rgb(237, 201, 73)","rgb(175, 122, 161)","rgb(255, 157, 167)","rgb(156, 117, 95)","rgb(186, 176, 171)"],kPt=["rgb(255, 245, 235)","rgb(254, 230, 206)","rgb(253, 208, 162)","rgb(253, 174, 107)","rgb(253, 141, 60)","rgb(241, 105, 19)","rgb(217, 72, 1)","rgb(166, 54, 3)","rgb(127, 39, 4)"],DPt=["rgb(247, 252, 245)","rgb(229, 245, 224)","rgb(199, 233, 192)","rgb(161, 217, 155)","rgb(116, 196, 118)","rgb(65, 171, 93)","rgb(35, 139, 69)","rgb(0, 109, 44)","rgb(0, 68, 27)"],BPt=["rgb(247, 251, 255)","rgb(222, 235, 247)","rgb(198, 219, 239)","rgb(158, 202, 225)","rgb(107, 174, 214)","rgb(66, 146, 198)","rgb(33, 113, 181)","rgb(8, 81, 156)","rgb(8, 48, 107)"];class tu extends gte{}function eO(t,e=!0,n){const r=document.createElement("div");return r.setAttribute("class",`g6-${t}`),Object.assign(r.style,{position:"absolute",display:"block"}),e&&Object.assign(r.style,{position:"unset",gridArea:"1 / 1 / 2 / 2",inset:"0px",height:"100%",width:"100%",overflow:"hidden",pointerEvents:"none"}),n&&Object.assign(r.style,n),r}function kq(t,e="div",n={},r="",i=document.body){const a=document.getElementById(t);a&&a.remove();const o=document.createElement(e);return o.innerHTML=r,o.id=t,Object.assign(o.style,n),i.appendChild(o),o}var FPt=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class H6 extends tu{constructor(e,n){super(e,Object.assign({},H6.defaultOptions,n)),this.$element=eO("background"),this.context.canvas.getContainer().prepend(this.$element),this.update(n)}update(e){const n=Object.create(null,{update:{get:()=>super.update}});return FPt(this,void 0,void 0,function*(){n.update.call(this,e),Object.assign(this.$element.style,ww(this.options,["key","type"]))})}destroy(){super.destroy(),this.$element.remove()}}H6.defaultOptions={transition:"background 0.5s",backgroundSize:"cover",zIndex:"-1"};function nne(t,e,n,r,i,a){const o=t,s=e,l=n-o,c=r-s;let u=i-o,f=a-s,h=u*l+f*c,d=0;h<=0?d=0:(u=l-u,f=c-f,h=u*l+f*c,h<=0?d=0:d=h*h/(l*l+c*c));const p=u*u+f*f-d;return p<0?0:p}function R_(t,e,n,r){return(t-n)*(t-n)+(e-r)*(e-r)}function kme(t,e,n,r,i){return R_(t,e,n,r)<i*i}function UPt(t){if(!Number.isFinite(t))return n=>n;if(t===0)return Math.round;const e=Math.pow(10,t);return n=>Math.round(n*e)/e}function pBe(t){const e=Math.min(t.x1,t.x2),n=Math.max(t.x1,t.x2),r=Math.min(t.y1,t.y2),i=Math.max(t.y1,t.y2);return{x:e,y:r,x2:n,y2:i,width:n-e,height:i-r}}class Qc{constructor(e,n,r,i){this.x1=e,this.y1=n,this.x2=r,this.y2=i}equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2}draw(e){e.moveTo(this.x1,this.y1),e.lineTo(this.x2,this.y2)}toString(){return`Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`}static from(e){return new Qc(e.x1,e.y1,e.x2,e.y2)}cuts(e,n){if(this.y1===this.y2||n<this.y1&&n<=this.y2||n>this.y1&&n>=this.y2||e>this.x1&&e>=this.x2)return!1;if(e<this.x1&&e<=this.x2)return!0;const r=this.x1+(n-this.y1)*(this.x2-this.x1)/(this.y2-this.y1);return e<=r}distSquare(e,n){return nne(this.x1,this.y1,this.x2,this.y2,e,n)}ptClose(e,n,r){if(this.x1<this.x2){if(e<this.x1-r||e>this.x2+r)return!1}else if(e<this.x2-r||e>this.x1+r)return!1;if(this.y1<this.y2){if(n<this.y1-r||n>this.y2+r)return!1}else if(n<this.y2-r||n>this.y1+r)return!1;return!0}}var Ol;(function(t){t[t.POINT=1]="POINT",t[t.PARALLEL=2]="PARALLEL",t[t.COINCIDENT=3]="COINCIDENT",t[t.NONE=4]="NONE"})(Ol||(Ol={}));class _G{constructor(e,n=0,r=0){this.state=e,this.x=n,this.y=r}}function eL(t,e){const n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){const a=n/i,o=r/i;return 0<=a&&a<=1&&0<=o&&o<=1?new _G(Ol.POINT,t.x1+a*(t.x2-t.x1),t.y1+a*(t.y2-t.y1)):new _G(Ol.NONE)}return new _G(n===0||r===0?Ol.COINCIDENT:Ol.PARALLEL)}function gBe(t,e){const n=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),r=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){const a=n/i,o=r/i;if(0<=a&&a<=1&&0<=o&&o<=1)return a}return Number.POSITIVE_INFINITY}function jPt(t,e){function n(i,a,o,s){let l=gBe(e,new Qc(i,a,o,s));return l=Math.abs(l-.5),l>=0&&l<=1?1:0}let r=n(t.x,t.y,t.x2,t.y);return r+=n(t.x,t.y,t.x,t.y2),r>1||(r+=n(t.x,t.y2,t.x2,t.y2),r>1)?!0:(r+=n(t.x2,t.y,t.x2,t.y2),r>0)}var Cl;(function(t){t[t.LEFT=0]="LEFT",t[t.TOP=1]="TOP",t[t.RIGHT=2]="RIGHT",t[t.BOTTOM=3]="BOTTOM"})(Cl||(Cl={}));function xk(t,e,n){const r=new Set;return t.width<=0?(r.add(Cl.LEFT),r.add(Cl.RIGHT)):e<t.x?r.add(Cl.LEFT):e>t.x+t.width&&r.add(Cl.RIGHT),t.height<=0?(r.add(Cl.TOP),r.add(Cl.BOTTOM)):n<t.y?r.add(Cl.TOP):n>t.y+t.height&&r.add(Cl.BOTTOM),r}function vBe(t,e){let n=e.x1,r=e.y1;const i=e.x2,a=e.y2,o=Array.from(xk(t,i,a));if(o.length===0)return!0;let s=xk(t,n,r);for(;s.size!==0;){for(const l of o)if(s.has(l))return!1;if(s.has(Cl.RIGHT)||s.has(Cl.LEFT)){let l=t.x;s.has(Cl.RIGHT)&&(l+=t.width),r=r+(l-n)*(a-r)/(i-n),n=l}else{let l=t.y;s.has(Cl.BOTTOM)&&(l+=t.height),n=n+(l-r)*(i-n)/(a-r),r=l}s=xk(t,n,r)}return!0}function zPt(t,e){let n=Number.POSITIVE_INFINITY,r=0;function i(a,o,s,l){let c=gBe(e,new Qc(a,o,s,l));c=Math.abs(c-.5),c>=0&&c<=1&&(r++,c<n&&(n=c))}return i(t.x,t.y,t.x2,t.y),i(t.x,t.y,t.x,t.y2),r>1||(i(t.x,t.y2,t.x2,t.y2),r>1)?n:(i(t.x2,t.y,t.x2,t.y2),r===0?-1:n)}function $Pt(t,e){let n=0;const r=eL(t,new Qc(e.x,e.y,e.x2,e.y));n+=r.state===Ol.POINT?1:0;const i=eL(t,new Qc(e.x,e.y,e.x,e.y2));n+=i.state===Ol.POINT?1:0;const a=eL(t,new Qc(e.x,e.y2,e.x2,e.y2));n+=a.state===Ol.POINT?1:0;const o=eL(t,new Qc(e.x2,e.y,e.x2,e.y2));return n+=o.state===Ol.POINT?1:0,{top:r,left:i,bottom:a,right:o,count:n}}class nf{constructor(e,n,r,i){this.x=e,this.y=n,this.width=r,this.height=i}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get cx(){return this.x+this.width/2}get cy(){return this.y+this.height/2}get radius(){return Math.max(this.width,this.height)/2}static from(e){return new nf(e.x,e.y,e.width,e.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}clone(){return new nf(this.x,this.y,this.width,this.height)}add(e){const n=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x2,e.x+e.width),a=Math.max(this.y2,e.y+e.height);this.x=n,this.y=r,this.width=i-n,this.height=a-r}addPoint(e){const n=Math.min(this.x,e.x),r=Math.min(this.y,e.y),i=Math.max(this.x2,e.x),a=Math.max(this.y2,e.y);this.x=n,this.y=r,this.width=i-n,this.height=a-r}toString(){return`Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`}draw(e){e.rect(this.x,this.y,this.width,this.height)}containsPt(e,n){return e>=this.x&&e<=this.x2&&n>=this.y&&n<=this.y2}get area(){return this.width*this.height}intersects(e){return this.area<=0||e.width<=0||e.height<=0?!1:e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x2&&e.y<this.y2}distSquare(e,n){if(this.containsPt(e,n))return 0;const r=xk(this,e,n);return r.has(Cl.TOP)?r.has(Cl.LEFT)?R_(e,n,this.x,this.y):r.has(Cl.RIGHT)?R_(e,n,this.x2,this.y):(this.y-n)*(this.y-n):r.has(Cl.BOTTOM)?r.has(Cl.LEFT)?R_(e,n,this.x,this.y2):r.has(Cl.RIGHT)?R_(e,n,this.x2,this.y2):(n-this.y2)*(n-this.y2):r.has(Cl.LEFT)?(this.x-e)*(this.x-e):r.has(Cl.RIGHT)?(e-this.x2)*(e-this.x2):0}}function HPt(t){if(t.length===0)return null;const e=t[0],n=new nf(e.x,e.y,0,0);for(const r of t)n.addPoint(r);return n}class kB{constructor(e,n,r){this.cx=e,this.cy=n,this.radius=r}get x(){return this.cx-this.radius}get x2(){return this.cx+this.radius}get width(){return this.radius*2}get y(){return this.cy-this.radius}get y2(){return this.cy+this.radius}get height(){return this.radius*2}static from(e){return new kB(e.cx,e.cy,e.radius)}containsPt(e,n){return R_(this.cx,this.cy,e,n)<this.radius*this.radius}distSquare(e,n){const r=R_(this.cx,this.cy,e,n);if(r<this.radius*this.radius)return 0;const i=Math.sqrt(r)-this.radius;return i*i}draw(e){e.ellipse(this.cx,this.cy,this.radius,this.radius,0,0,Math.PI*2)}}class ax{constructor(e,n=0,r=0,i=0,a=0,o=10,s=10,l=new Float32Array(Math.max(0,o*s)).fill(0)){this.pixelGroup=e,this.i=n,this.j=r,this.pixelX=i,this.pixelY=a,this.width=o,this.height=s,this.area=l}createSub(e,n){return new ax(this.pixelGroup,e.x,e.y,n.x,n.y,e.width,e.height)}static fromPixelRegion(e,n){return new ax(n,0,0,e.x,e.y,Math.ceil(e.width/n),Math.ceil(e.height/n))}copy(e,n){return new ax(this.pixelGroup,this.scaleX(n.x),this.scaleY(n.y),n.x,n.y,e.width,e.height,e.area)}boundX(e){return e<this.i?this.i:e>=this.width?this.width-1:e}boundY(e){return e<this.j?this.j:e>=this.height?this.height-1:e}scaleX(e){return this.boundX(Math.floor((e-this.pixelX)/this.pixelGroup))}scaleY(e){return this.boundY(Math.floor((e-this.pixelY)/this.pixelGroup))}scale(e){const n=this.scaleX(e.x),r=this.scaleY(e.y),i=this.boundX(Math.ceil((e.x+e.width-this.pixelX)/this.pixelGroup)),a=this.boundY(Math.ceil((e.y+e.height-this.pixelY)/this.pixelGroup)),o=i-n,s=a-r;return new nf(n,r,o,s)}invertScaleX(e){return Math.round(e*this.pixelGroup+this.pixelX)}invertScaleY(e){return Math.round(e*this.pixelGroup+this.pixelY)}addPadding(e,n){const r=Math.ceil(n/this.pixelGroup),i=this.boundX(e.x-r),a=this.boundY(e.y-r),o=this.boundX(e.x2+r),s=this.boundY(e.y2+r),l=o-i,c=s-a;return new nf(i,a,l,c)}get(e,n){return e<0||n<0||e>=this.width||n>=this.height?Number.NaN:this.area[e+n*this.width]}inc(e,n,r){e<0||n<0||e>=this.width||n>=this.height||(this.area[e+n*this.width]+=r)}set(e,n,r){e<0||n<0||e>=this.width||n>=this.height||(this.area[e+n*this.width]=r)}incArea(e,n){if(e.width<=0||e.height<=0||n===0)return;const r=this.width,i=e.width,a=Math.max(0,e.i),o=Math.max(0,e.j),s=Math.min(e.i+e.width,r),l=Math.min(e.j+e.height,this.height);if(!(l<=0||s<=0||a>=r||l>=this.height))for(let c=o;c<l;c++){const u=(c-e.j)*i,f=c*r;for(let h=a;h<s;h++){const d=e.area[h-e.i+u];d!==0&&(this.area[h+f]+=n*d)}}}fill(e){this.area.fill(e)}fillArea(e,n){const r=e.x+e.y*this.width;for(let i=0;i<e.height;i++){const a=r+i*this.width;this.area.fill(n,a,a+e.width)}}fillHorizontalLine(e,n,r,i){const a=e+n*this.width;this.area.fill(i,a,a+r)}fillVerticalLine(e,n,r,i){const a=e+n*this.width;for(let o=0;o<r;o++)this.area[a+o*this.width]=i}clear(){this.area.fill(0)}toString(){let e="";for(let n=0;n<this.height;n++){const r=n*this.width;for(let i=0;i<this.width;i++){const a=this.area[r+i];e+=a.toFixed(1).padStart(6),e+=" "}e+=`
`}return e}draw(e,n=!0){if(this.width<=0||this.height<=0)return;e.save(),n&&e.translate(this.pixelX,this.pixelY);const r=this.area.reduce((o,s)=>Math.min(o,s),Number.POSITIVE_INFINITY),i=this.area.reduce((o,s)=>Math.max(o,s),Number.NEGATIVE_INFINITY),a=o=>(o-r)/(i-r);e.scale(this.pixelGroup,this.pixelGroup);for(let o=0;o<this.width;o++)for(let s=0;s<this.height;s++){const l=this.area[o+s*this.width];e.fillStyle=`rgba(0, 0, 0, ${a(l)})`,e.fillRect(o,s,1,1)}e.restore()}drawThreshold(e,n,r=!0){if(!(this.width<=0||this.height<=0)){e.save(),r&&e.translate(this.pixelX,this.pixelY),e.scale(this.pixelGroup,this.pixelGroup);for(let i=0;i<this.width;i++)for(let a=0;a<this.height;a++){const o=this.area[i+a*this.width];e.fillStyle=o>n?"black":"white",e.fillRect(i,a,1,1)}e.restore()}}}function mBe(t,e){const n=r=>({x:r.x-e,y:r.y-e,width:r.width+2*e,height:r.height+2*e});return Array.isArray(t)?t.map(n):n(t)}function Dme(t,e,n){return yBe(Object.assign(pBe(t),{distSquare:(r,i)=>nne(t.x1,t.y1,t.x2,t.y2,r,i)}),e,n)}function yBe(t,e,n){const r=mBe(t,n),i=e.scale(r),a=e.createSub(i,r);return GPt(a,e,n,(o,s)=>t.distSquare(o,s)),a}function GPt(t,e,n,r){const i=n*n;for(let a=0;a<t.height;a++)for(let o=0;o<t.width;o++){const s=e.invertScaleX(t.i+o),l=e.invertScaleY(t.j+a),c=r(s,l);if(c===0){t.set(o,a,i);continue}if(c<i){const u=n-Math.sqrt(c);t.set(o,a,u*u)}}return t}function WPt(t,e,n){const r=e.scale(t),i=e.addPadding(r,n),a=e.createSub(i,{x:t.x-n,y:t.y-n}),o=r.x-i.x,s=r.y-i.y,l=i.x2-r.x2,c=i.y2-r.y2,u=i.width-o-l,f=i.height-s-c,h=n*n;a.fillArea({x:o,y:s,width:u+1,height:f+1},h);const d=[0],p=Math.max(s,o,l,c);{const _=e.invertScaleX(r.x+r.width/2);for(let E=1;E<p;E++){const x=e.invertScaleY(r.y-E),T=t.distSquare(_,x);if(T<h){const S=n-Math.sqrt(T);d.push(S*S)}else break}}const g=[],v=Math.max(o,l),y=Math.max(s,l);for(let _=1;_<v;_++){const E=e.invertScaleX(r.x-_),x=[];for(let T=1;T<y;T++){const S=e.invertScaleY(r.y-T),w=t.distSquare(E,S);if(w<h){const C=n-Math.sqrt(w);x.push(C*C)}else x.push(0)}g.push(x)}for(let _=1;_<Math.min(s,d.length);_++){const E=d[_];a.fillHorizontalLine(o,s-_,u+1,E)}for(let _=1;_<Math.min(c,d.length);_++){const E=d[_];a.fillHorizontalLine(o,s+f+_,u+1,E)}for(let _=1;_<Math.min(o,d.length);_++){const E=d[_];a.fillVerticalLine(o-_,s,f+1,E)}for(let _=1;_<Math.min(c,d.length);_++){const E=d[_];a.fillVerticalLine(o+u+_,s,f+1,E)}for(let _=1;_<o;_++){const E=g[_-1],x=o-_;for(let T=1;T<s;T++)a.set(x,s-T,E[T-1]);for(let T=1;T<c;T++)a.set(x,s+f+T,E[T-1])}for(let _=1;_<l;_++){const E=g[_-1],x=o+u+_;for(let T=1;T<s;T++)a.set(x,s-T,E[T-1]);for(let T=1;T<c;T++)a.set(x,s+f+T,E[T-1])}return a}function Ms(t,e){return{x:t,y:e}}function VPt(t,e,n,r){if(t.length===0)return[];const i=KPt(t);return i.map((a,o)=>{const s=i.slice(0,o);return YPt(e,a,s,n,r)}).flat()}function YPt(t,e,n,r,i){const a=Ms(e.cx,e.cy),o=ZPt(a,n,t);if(o==null)return[];const s=new Qc(a.x,a.y,o.cx,o.cy),l=XPt(s,t,r,i);return qPt(l,t)}function XPt(t,e,n,r){const i=[],a=[];a.push(t);let o=!0;for(let s=0;s<n&&o;s++)for(o=!1;!o&&a.length>0;){const l=a.pop(),c=_Be(e,l),u=c?$Pt(l,c):null;if(!c||!u||u.count!==2){o||i.push(l);continue}let f=r,h=nL(c,f,u,!0),d=Y1(h,a)||Y1(h,i),p=tL(h,e);for(;!d&&p&&f>=1;)f/=1.5,h=nL(c,f,u,!0),d=Y1(h,a)||Y1(h,i),p=tL(h,e);if(h&&!d&&!p&&(a.push(new Qc(l.x1,l.y1,h.x,h.y)),a.push(new Qc(h.x,h.y,l.x2,l.y2)),o=!0),o)continue;f=r,h=nL(c,f,u,!1);let g=Y1(h,a)||Y1(h,i);for(p=tL(h,e);!g&&p&&f>=1;)f/=1.5,h=nL(c,f,u,!1),g=Y1(h,a)||Y1(h,i),p=tL(h,e);h&&!g&&(a.push(new Qc(l.x1,l.y1,h.x,h.y)),a.push(new Qc(h.x,h.y,l.x2,l.y2)),o=!0),o||i.push(l)}for(;a.length>0;)i.push(a.pop());return i}function qPt(t,e){const n=[];for(;t.length>0;){const r=t.pop();if(t.length===0){n.push(r);break}const i=t.pop(),a=new Qc(r.x1,r.y1,i.x2,i.y2);_Be(e,a)?(n.push(r),t.push(i)):t.push(a)}return n}function ZPt(t,e,n){let r=Number.POSITIVE_INFINITY;return e.reduce((i,a)=>{const o=R_(t.x,t.y,a.cx,a.cy);if(o>r)return i;const s=new Qc(t.x,t.y,a.cx,a.cy),l=QPt(n,s);return o*(l+1)*(l+1)<r&&(i=a,r=o*(l+1)*(l+1)),i},null)}function KPt(t){if(t.length<2)return t;let e=0,n=0;return t.forEach(r=>{e+=r.cx,n+=r.cy}),e/=t.length,n/=t.length,t.map(r=>{const i=e-r.cx,a=n-r.cy,o=i*i+a*a;return[r,o]}).sort((r,i)=>r[1]-i[1]).map(r=>r[0])}function tL(t,e){return e.some(n=>n.containsPt(t.x,t.y))}function Y1(t,e){return e.some(n=>!!(kme(n.x1,n.y1,t.x,t.y,.001)||kme(n.x2,n.y2,t.x,t.y,.001)))}function _Be(t,e){let n=Number.POSITIVE_INFINITY,r=null;for(const i of t){if(!vBe(i,e))continue;const a=zPt(i,e);a>=0&&a<n&&(r=i,n=a)}return r}function QPt(t,e){return t.reduce((n,r)=>vBe(r,e)&&jPt(r,e)?n+1:n,0)}function nL(t,e,n,r){const i=n.top,a=n.left,o=n.bottom,s=n.right;if(r){if(a.state===Ol.POINT){if(i.state===Ol.POINT)return Ms(t.x-e,t.y-e);if(o.state===Ol.POINT)return Ms(t.x-e,t.y2+e);const h=t.width*t.height;return t.width*((a.y-t.y+(s.y-t.y))*.5)<h*.5?a.y>s.y?Ms(t.x-e,t.y-e):Ms(t.x2+e,t.y-e):a.y<s.y?Ms(t.x-e,t.y2+e):Ms(t.x2+e,t.y2+e)}if(s.state===Ol.POINT){if(i.state===Ol.POINT)return Ms(t.x2+e,t.y-e);if(o.state===Ol.POINT)return Ms(t.x2+e,t.y2+e)}const u=t.height*t.width;return t.height*((i.x-t.x+(s.x-t.x))*.5)<u*.5?i.x>o.x?Ms(t.x-e,t.y-e):Ms(t.x-e,t.y2+e):i.x<o.x?Ms(t.x2+e,t.y-e):Ms(t.x2+e,t.y2+e)}if(a.state===Ol.POINT){if(i.state===Ol.POINT)return Ms(t.x2+e,t.y2+e);if(o.state===Ol.POINT)return Ms(t.x2+e,t.y-e);const u=t.height*t.width;return t.width*((a.y-t.y+(s.y-t.y))*.5)<u*.5?a.y>s.y?Ms(t.x2+e,t.y2+e):Ms(t.x-e,t.y2+e):a.y<s.y?Ms(t.x2+e,t.y-e):Ms(t.x-e,t.y-e)}if(s.state===Ol.POINT){if(i.state===Ol.POINT)return Ms(t.x-e,t.y2+e);if(o.state===Ol.POINT)return Ms(t.x-e,t.y-e)}const l=t.height*t.width;return t.height*((i.x-t.x+(s.x-t.x))*.5)<l*.5?i.x>o.x?Ms(t.x2+e,t.y2+e):Ms(t.x2+e,t.y-e):i.x<o.x?Ms(t.x-e,t.y2+e):Ms(t.x-e,t.y-e)}function JPt(t,e,n,r){if(!(t.closed?n<t.length:n<t.length-1))return!1;const a=t.get(e),o=t.get(n+1);for(let s=e+1;s<=n;s++){const l=t.get(s);if(nne(a.x,a.y,o.x,o.y,l.x,l.y)>r)return!1}return!0}function eNt(t=0){return e=>{if(t<0||e.length<3)return e;const n=[];let r=0;const i=t*t;for(;r<e.length;){let a=r+1;for(;JPt(e,r,a,i);)a++;n.push(e.get(r)),r=a}return new tO(n)}}function tNt(t,e){switch(t){case-2:return(((-e+3)*e-3)*e+1)/6;case-1:return((3*e-6)*e*e+4)/6;case 0:return(((-3*e+3)*e+3)*e+1)/6;case 1:return e*e*e/6;default:throw new Error("unknown error")}}function nNt(t=6){function a(o,s,l){let c=0,u=0;for(let f=-2;f<=1;f++){const h=o.get(s+f),d=tNt(f,l);c+=d*h.x,u+=d*h.y}return{x:c,y:u}}return o=>{if(o.length<3)return o;const s=[],l=o.closed,c=o.length+3-1+(l?0:2);s.push(a(o,2-(l?0:2),0));for(let u=2-(l?0:2);u<c;u++)for(let f=1;f<=t;f++)s.push(a(o,u,f/t));return new tO(s)}}function rNt(t=8){return e=>{let n=t,r=e.length;if(n>1)for(r=Math.floor(e.length/n);r<3&&n>1;)n-=1,r=Math.floor(e.length/n);const i=[];for(let a=0,o=0;o<r;o++,a+=n)i.push(e.get(a));return new tO(i)}}class tO{constructor(e=[],n=!0){this.points=e,this.closed=n}get(e){const n=e,r=this.points.length;return e<0?this.closed?this.get(e+r):this.points[0]:e>=r?this.closed?this.get(e-r):this.points[r-1]:this.points[n]}get length(){return this.points.length}toString(e=1/0){const n=this.points;if(n.length===0)return"";const r=typeof e=="function"?e:UPt(e);let i="M";for(const a of n)i+=`${r(a.x)},${r(a.y)} L`;return i=i.slice(0,-1),this.closed&&(i+=" Z"),i}draw(e){const n=this.points;if(n.length!==0){e.beginPath(),e.moveTo(n[0].x,n[0].y);for(const r of n)e.lineTo(r.x,r.y);this.closed&&e.closePath()}}sample(e){return rNt(e)(this)}simplify(e){return eNt(e)(this)}bSplines(e){return nNt(e)(this)}apply(e){return e(this)}containsElements(e){const n=HPt(this.points);return n?e.every(r=>n.containsPt(r.cx,r.cy)&&this.withinArea(r.cx,r.cy)):!1}withinArea(e,n){if(this.length===0)return!1;let r=0;const i=this.points[0],a=new Qc(i.x,i.y,i.x,i.y);for(let o=1;o<this.points.length;o++){const s=this.points[o];a.x1=a.x2,a.y1=a.y2,a.x2=s.x,a.y2=s.y,a.cuts(e,n)&&r++}return a.x1=a.x2,a.y1=a.y2,a.x2=i.x,a.y2=i.y,a.cuts(e,n)&&r++,r%2===1}}class iNt{constructor(e=0){this.count=0,this.arr=[],this.set=new Set,this.arr.length=e}add(e){this.set.add(`${e.x}x${e.y}`),this.arr[this.count++]=e}contains(e){return this.set.has(`${e.x}x${e.y}`)}isFirst(e){if(this.count===0)return!1;const n=this.arr[0];return n!=null&&n.x===e.x&&n.y===e.y}path(){return new tO(this.arr.slice(0,this.count))}clear(){this.set.clear(),this.count=0}get(e){return this.arr[e]}get length(){return this.count}}const p2=0,rL=1,iL=2,bG=3;function aNt(t,e){const n=(Math.floor(t.width)+Math.floor(t.height))*2,r=new iNt(n);function i(l,c,u,f){const h=t.get(l,c);return Number.isNaN(h)?Number.NaN:h>e?u+f:u}function a(l,c){let u=p2;return u=i(l,c,u,1),u=i(l+1,c,u,2),u=i(l,c+1,u,4),u=i(l+1,c+1,u,8),Number.isNaN(u)?-1:u}let o=rL;function s(l,c){let u=l,f=c,h=t.invertScaleX(u),d=t.invertScaleY(f);for(let p=0;p<t.width*t.height;p++){const g={x:h,y:d};if(r.contains(g)){if(r.isFirst(g))return!0}else r.add(g);const v=a(u,f);switch(v){case-1:return!0;case 0:case 3:case 2:case 7:o=iL;break;case 12:case 14:case 4:o=bG;break;case 6:o=o===p2?bG:iL;break;case 1:case 13:case 5:o=p2;break;case 9:o=o===iL?p2:rL;break;case 10:case 8:case 11:o=rL;break;default:return console.warn("Marching squares invalid state: "+v),!0}switch(o){case p2:f--,d-=t.pixelGroup;break;case rL:f++,d+=t.pixelGroup;break;case bG:u--,h-=t.pixelGroup;break;case iL:u++,h+=t.pixelGroup;break;default:return console.warn("Marching squares invalid state: "+v),!0}}return!0}for(let l=0;l<t.width;l++)for(let c=0;c<t.height;c++){if(t.get(l,c)<=e)continue;const u=a(l,c);if(!(u<0||u===15)&&s(l,c))return r.path()}return null}const G6={maxRoutingIterations:100,maxMarchingIterations:20,pixelGroup:4,edgeR0:10,edgeR1:20,nodeR0:15,nodeR1:50,morphBuffer:10,threshold:1,memberInfluenceFactor:1,edgeInfluenceFactor:1,nonMemberInfluenceFactor:-.8,virtualEdges:!0};function rR(t){return t!=null&&typeof t.radius=="number"}function Bme(t,e){if(rR(t)!==rR(e))return!1;if(rR(t)){const r=e;return t.cx===r.cx&&t.cy===r.cy&&t.radius===r.radius}const n=e;return t.x===n.x&&t.y===n.y&&t.width===n.width&&t.height===n.height}var Lg;(function(t){t[t.MEMBERS=0]="MEMBERS",t[t.NON_MEMBERS=1]="NON_MEMBERS",t[t.EDGES=2]="EDGES"})(Lg||(Lg={}));let Fme=class{constructor(e={}){this.dirty=new Set,this.members=[],this.nonMembers=[],this.virtualEdges=[],this.edges=[],this.activeRegion=new nf(0,0,0,0),this.potentialArea=new ax(1,0,0,0,0,0,0),this.o=Object.assign({},G6,e)}pushMember(...e){if(e.length!==0){this.dirty.add(Lg.MEMBERS);for(const n of e)this.members.push({raw:n,obj:rR(n)?kB.from(n):nf.from(n),area:null})}}removeMember(e){const n=this.members.findIndex(r=>Bme(r.raw,e));return n<0?!1:(this.members.splice(n,1),this.dirty.add(Lg.MEMBERS),!0)}removeNonMember(e){const n=this.nonMembers.findIndex(r=>Bme(r.raw,e));return n<0?!1:(this.nonMembers.splice(n,1),this.dirty.add(Lg.NON_MEMBERS),!0)}removeEdge(e){const n=this.edges.findIndex(r=>r.obj.equals(e));return n<0?!1:(this.edges.splice(n,1),this.dirty.add(Lg.NON_MEMBERS),!0)}pushNonMember(...e){if(e.length!==0){this.dirty.add(Lg.NON_MEMBERS);for(const n of e)this.nonMembers.push({raw:n,obj:rR(n)?kB.from(n):nf.from(n),area:null})}}pushEdge(...e){if(e.length!==0){this.dirty.add(Lg.EDGES);for(const n of e)this.edges.push({raw:n,obj:Qc.from(n),area:null})}}update(){const e=this.dirty.has(Lg.MEMBERS),n=this.dirty.has(Lg.NON_MEMBERS);let r=this.dirty.has(Lg.EDGES);this.dirty.clear();const i=this.members.map(c=>c.obj);if(this.o.virtualEdges&&(e||n)){const c=this.nonMembers.map(h=>h.obj),u=VPt(i,c,this.o.maxRoutingIterations,this.o.morphBuffer),f=new Map(this.virtualEdges.map(h=>[h.obj.toString(),h.area]));this.virtualEdges=u.map(h=>{var d;return{raw:h,obj:h,area:(d=f.get(h.toString()))!==null&&d!==void 0?d:null}}),r=!0}let a=!1;if(e||r){const c=this.virtualEdges.concat(this.edges).map(d=>d.obj),u=sNt(i,c),f=Math.max(this.o.edgeR1,this.o.nodeR1)+this.o.morphBuffer,h=nf.from(mBe(u,f));h.equals(this.activeRegion)||(a=!0,this.activeRegion=h)}if(a){const c=Math.ceil(this.activeRegion.width/this.o.pixelGroup),u=Math.ceil(this.activeRegion.height/this.o.pixelGroup);this.activeRegion.x!==this.potentialArea.pixelX||this.activeRegion.y!==this.potentialArea.pixelY?(this.potentialArea=ax.fromPixelRegion(this.activeRegion,this.o.pixelGroup),this.members.forEach(f=>f.area=null),this.nonMembers.forEach(f=>f.area=null),this.edges.forEach(f=>f.area=null),this.virtualEdges.forEach(f=>f.area=null)):(c!==this.potentialArea.width||u!==this.potentialArea.height)&&(this.potentialArea=ax.fromPixelRegion(this.activeRegion,this.o.pixelGroup))}const o=new Map,s=c=>{if(c.area){const u=`${c.obj.width}x${c.obj.height}x${c.obj instanceof nf?"R":"C"}`;o.set(u,c.area)}},l=c=>{if(c.area)return;const u=`${c.obj.width}x${c.obj.height}x${c.obj instanceof nf?"R":"C"}`;if(o.has(u)){const h=o.get(u);c.area=this.potentialArea.copy(h,{x:c.obj.x-this.o.nodeR1,y:c.obj.y-this.o.nodeR1});return}const f=c.obj instanceof nf?WPt(c.obj,this.potentialArea,this.o.nodeR1):yBe(c.obj,this.potentialArea,this.o.nodeR1);c.area=f,o.set(u,f)};this.members.forEach(s),this.nonMembers.forEach(s),this.members.forEach(l),this.nonMembers.forEach(c=>{this.activeRegion.intersects(c.obj)?l(c):c.area=null}),this.edges.forEach(c=>{c.area||(c.area=Dme(c.obj,this.potentialArea,this.o.edgeR1))}),this.virtualEdges.forEach(c=>{c.area||(c.area=Dme(c.obj,this.potentialArea,this.o.edgeR1))})}drawMembers(e){for(const n of this.members)n.obj.draw(e)}drawNonMembers(e){for(const n of this.nonMembers)n.obj.draw(e)}drawEdges(e){for(const n of this.edges)n.obj.draw(e)}drawPotentialArea(e,n=!0){this.potentialArea.draw(e,n)}compute(){if(this.members.length===0)return new tO([]);this.dirty.size>0&&this.update();const{o:e,potentialArea:n}=this,r=this.members.map(s=>s.area),i=this.virtualEdges.concat(this.edges).map(s=>s.area),a=this.nonMembers.filter(s=>s.area!=null).map(s=>s.area),o=this.members.map(s=>s.obj);return oNt(n,r,i,a,s=>s.containsElements(o),e)}};function oNt(t,e,n,r,i,a={}){const o=Object.assign({},G6,a);let s=o.threshold,l=o.memberInfluenceFactor,c=o.edgeInfluenceFactor,u=o.nonMemberInfluenceFactor;const f=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),h=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1);for(let d=0;d<o.maxMarchingIterations;d++){if(t.clear(),l!==0){const g=l/f;for(const v of e)t.incArea(v,g)}if(c!==0){const g=c/h;for(const v of n)t.incArea(v,g)}if(u!==0){const g=u/f;for(const v of r)t.incArea(v,g)}const p=aNt(t,s);if(p&&i(p))return p;if(s*=.95,d<=o.maxMarchingIterations*.5)l*=1.2,c*=1.2;else if(u!==0&&r.length>0)u*=.8;else break}return new tO([])}function sNt(t,e){if(t.length===0)return new nf(0,0,0,0);const n=nf.from(t[0]);for(const r of t)n.add(r);for(const r of e)n.add(pBe(r));return n}var lNt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class W6 extends tu{constructor(e,n){super(e,Nt({},W6.defaultOptions,n)),this.members=new Map,this.avoidMembers=new Map,this.bubbleSetOptions={},this.drawBubbleSets=()=>{const{style:r,bubbleSetOptions:i}=this.parseOptions();Fs(this.bubbleSetOptions,i)||this.init(),this.bubbleSetOptions=Object.assign({},i);const a=Object.assign(Object.assign({},r),{d:this.getPath()});this.shape?this.shape.update(a):(this.shape=new ZP({style:a}),this.context.canvas.appendChild(this.shape))},this.updateBubbleSetsPath=r=>{if(!this.shape)return;const i=pt(r.data);[...this.options.members,...this.options.avoidMembers].includes(i)&&this.shape.update(Object.assign(Object.assign({},this.parseOptions().style),{d:this.getPath(i)}))},this.getPath=r=>{const{graph:i}=this.context,a=this.options.members,o=[...this.members.keys()],s=this.options.avoidMembers,l=[...this.avoidMembers.keys()];if(!r&&Fs(a,o)&&Fs(s,l))return this.path;const{enter:c=[],exit:u=[]}=F_(o,a,v=>v),{enter:f=[],exit:h=[]}=F_(l,s,v=>v);r&&(u.push(r),c.push(r));const d=(v,y,_)=>{v.forEach(E=>{const x=_?this.members:this.avoidMembers,T=_?"pushMember":"pushNonMember",S=_?"removeMember":"removeNonMember";if(y){let w;i.getElementType(E)==="edge"?([w]=uNt(i,E),this.bubbleSets.pushEdge(w)):([w]=cNt(i,E),this.bubbleSets[T](w)),x.set(E,w)}else{const w=x.get(E);w&&(i.getElementType(E)==="edge"?this.bubbleSets.removeEdge(w):this.bubbleSets[S](w),x.delete(E))}})};d(u,!1,!0),d(c,!0,!0),d(h,!1,!1),d(f,!0,!1);const g=this.bubbleSets.compute().sample(8).simplify(0).bSplines().simplify(0);return this.path=ske(g.points.map(Ru)),this.path},this.bindEvents(),this.bubbleSets=new Fme(this.options)}bindEvents(){this.context.graph.on(jn.AFTER_RENDER,this.drawBubbleSets),this.context.graph.on(jn.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath)}init(){this.bubbleSets=new Fme(this.options),this.members=new Map,this.avoidMembers=new Map}parseOptions(){const e=this.options,{type:n,key:r,members:i,avoidMembers:a}=e,o=lNt(e,["type","key","members","avoidMembers"]),s=Object.keys(o).reduce((l,c)=>(c in G6?l.bubbleSetOptions[c]=o[c]:l.style[c]=o[c],l),{style:{},bubbleSetOptions:{}});return Object.assign({type:n,key:r,members:i,avoidMembers:a},s)}addMember(e){const n=Array.isArray(e)?e:[e];n.some(r=>this.options.avoidMembers.includes(r))&&(this.options.avoidMembers=this.options.avoidMembers.filter(r=>!n.includes(r))),this.options.members=[...new Set([...this.options.members,...n])],this.drawBubbleSets()}removeMember(e){const n=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(r=>!n.includes(r)),this.drawBubbleSets()}updateMember(e){this.options.members=ur(e)?e(this.options.members):e,this.drawBubbleSets()}getMember(){return this.options.members}addAvoidMember(e){const n=Array.isArray(e)?e:[e];n.some(r=>this.options.members.includes(r))&&(this.options.members=this.options.members.filter(r=>!n.includes(r))),this.options.avoidMembers=[...new Set([...this.options.avoidMembers,...n])],this.drawBubbleSets()}removeAvoidMember(e){const n=Array.isArray(e)?e:[e];this.options.avoidMembers.some(r=>n.includes(r))&&(this.options.avoidMembers=this.options.avoidMembers.filter(r=>!n.includes(r)),this.drawBubbleSets())}updateAvoidMember(e){this.options.avoidMembers=Array.isArray(e)?e:[e],this.drawBubbleSets()}getAvoidMember(){return this.options.avoidMembers}destroy(){this.context.graph.off(jn.AFTER_RENDER,this.drawBubbleSets),this.context.graph.off(jn.AFTER_ELEMENT_UPDATE,this.updateBubbleSetsPath),this.shape.destroy(),super.destroy()}}W6.defaultOptions=Object.assign({members:[],avoidMembers:[],fill:"lightblue",fillOpacity:.2,stroke:"blue",strokeOpacity:.2},G6);const cNt=(t,e)=>(Array.isArray(e)?e:[e]).map(r=>{const i=t.getElementRenderBounds(r);return new nf(i.min[0],i.min[1],t0(i),n0(i))}),uNt=(t,e)=>(Array.isArray(e)?e:[e]).map(r=>{const i=t.getEdgeData(r),a=t.getElementPosition(i.source),o=t.getElementPosition(i.target);return Qc.from({x1:a[0],y1:a[1],x2:o[0],y2:o[1]})});function fNt(t){return`
    <ul class="g6-contextmenu-ul">
      ${t.map(e=>`<li  class="g6-contextmenu-li" value="${e.value}">${e.name}</li>`).join("")}
    </ul>
  `}const hNt=`
  .g6-contextmenu {
    font-size: 12px;
    background-color: rgba(255, 255, 255, 0.96);
    border-radius: 4px;
    overflow: hidden;
    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;
    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;
  }

  .g6-contextmenu-ul {
    max-width: 256px;
    min-width: 96px;
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .g6-contextmenu-li {
    padding: 8px 12px;
    cursor: pointer;
    user-select: none;
  }

  .g6-contextmenu-li:hover {
    background-color: #f5f5f5;
    cursor: pointer;
  }
`;var Ume=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class V6 extends tu{constructor(e,n){super(e,Object.assign({},V6.defaultOptions,n)),this.targetElement=null,this.onTriggerEvent=r=>{var i;(i=r.preventDefault)===null||i===void 0||i.call(r),this.show(r)},this.onMenuItemClick=r=>{const{onClick:i,trigger:a}=this.options;if(r.target instanceof HTMLElement&&r.target.className.includes("g6-contextmenu-li")){const o=r.target.getAttribute("value");i?.(o,r.target,this.targetElement),this.hide()}a!=="click"&&this.hide()},this.initElement(),this.update(n)}initElement(){this.$element=eO("contextmenu",!1,{zIndex:"99"});const{className:e}=this.options;e&&this.$element.classList.add(e),this.context.canvas.getContainer().appendChild(this.$element),kq("g6-contextmenu-css","style",{},hNt,document.head)}show(e){return Ume(this,void 0,void 0,function*(){const{enable:n,offset:r}=this.options;if(typeof n=="function"&&!n(e)||!n){this.hide();return}const i=yield this.getDOMContent(e);i instanceof HTMLElement?(this.$element.innerHTML="",this.$element.appendChild(i)):this.$element.innerHTML=i;const a=this.context.graph.getCanvas().getContainer().getBoundingClientRect();this.$element.style.left=`${e.client.x-a.left+r[0]}px`,this.$element.style.top=`${e.client.y-a.top+r[1]}px`,this.$element.style.display="block",this.targetElement=e.target})}hide(){this.$element.style.display="none",this.targetElement=null}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.$element.remove()}getDOMContent(e){return Ume(this,void 0,void 0,function*(){const{getContent:n,getItems:r}=this.options;return r?fNt(yield r(e)):yield n(e)})}bindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;e.on(`canvas:${n}`,this.onTriggerEvent),e.on(`node:${n}`,this.onTriggerEvent),e.on(`edge:${n}`,this.onTriggerEvent),e.on(`combo:${n}`,this.onTriggerEvent),document.addEventListener("click",this.onMenuItemClick)}unbindEvents(){const{graph:e}=this.context,{trigger:n}=this.options;e.off(`canvas:${n}`,this.onTriggerEvent),e.off(`node:${n}`,this.onTriggerEvent),e.off(`edge:${n}`,this.onTriggerEvent),e.off(`combo:${n}`,this.onTriggerEvent),document.removeEventListener("click",this.onMenuItemClick)}}V6.defaultOptions={trigger:"contextmenu",offset:[4,4],loadingContent:'<div class="g6-contextmenu-loading">Loading...</div>',getContent:()=>"It is a empty context menu.",enable:()=>!0};class Y6 extends tu{constructor(e,n){super(e,Object.assign({},Y6.defaultOptions,n)),this.edgeBundles={},this.edgePoints={},this.onBundle=()=>{const{model:r,element:i}=this.context,a=r.getEdgeData();this.divideEdges(this.options.divisions);const{cycles:o,iterRate:s,divRate:l}=this.options;let{lambda:c,divisions:u,iterations:f}=this.options;for(let h=0;h<o;h++){for(let d=0;d<f;d++){const p={};a.forEach(g=>{var v;if(g.source===g.target)return;const y=pt(g);p[y]=this.getEdgeForces(g,u,c);for(let _=0;_<u+1;_++)(v=this.edgePoints)[y]||(v[y]=[]),this.edgePoints[y][_]=Hi(this.edgePoints[y][_],p[y][_])})}c/=2,u*=l,f*=s,this.divideEdges(u)}a.forEach(h=>{const d=pt(h),p=i.getElement(d);p?.update({d:xte(this.edgePoints[d])})})},this.bindEvents()}get nodeMap(){const e=this.context.model.getNodeData();return Object.fromEntries(e.map(n=>[pt(n),Ox(pl(n))]))}divideEdges(e){this.context.model.getEdgeData().forEach(r=>{var i;const a=pt(r);(i=this.edgePoints)[a]||(i[a]=[]);const o=this.nodeMap[r.source],s=this.nodeMap[r.target];if(e===1)this.edgePoints[a].push(o),this.edgePoints[a].push(nv(Hi(o,s),2)),this.edgePoints[a].push(s);else{const c=(this.edgePoints[a].length===0?_s(o,s):mNt(this.edgePoints[a]))/(e+1);let u=c;const f=[o];for(let h=1;h<this.edgePoints[a].length;h++){const d=this.edgePoints[a][h-1],p=this.edgePoints[a][h];let g=_s(p,d);for(;g>u;){const v=u/g,y=Hi(d,zg(Wo(p,d),v));f.push(y),g-=u,u=c}u-=g}f.push(s),this.edgePoints[a]=f}})}getVectorPosition(e){const n=this.nodeMap[e.source],r=this.nodeMap[e.target],[i,a]=Wo(r,n),o=_s(n,r);return{source:n,target:r,vx:i,vy:a,length:o}}measureEdgeCompatibility(e,n){const r=this.getVectorPosition(e),i=this.getVectorPosition(n),a=dNt(r,i),o=pNt(r,i),s=gNt(r,i),l=vNt(r,i);return a*o*s*l}getEdgeBundles(){const e={},n=this.options.bundleThreshold,r=this.context.model.getEdgeData();return r.forEach((i,a)=>{r.forEach((o,s)=>{var l,c;if(s<=a)return;this.measureEdgeCompatibility(i,o)>=n&&(e[l=pt(i)]||(e[l]=[]),e[pt(i)].push(o),e[c=pt(o)]||(e[c]=[]),e[pt(o)].push(i))})}),e}getSpringForce(e,n){const{pre:r,cur:i,next:a}=e;return zg(Wo(Hi(r,a),zg(i,2)),n)}getElectrostaticForce(e,n){Em(this.edgeBundles)&&(this.edgeBundles=this.getEdgeBundles());const r=this.edgeBundles[pt(n)];let i=[0,0];return r?.forEach(a=>{const o=this.edgePoints[pt(a)][e],s=this.edgePoints[pt(n)][e],l=Wo(o,s),c=_s(o,s);i=Hi(i,zg(l,1/c))}),i}getEdgeForces(e,n,r){const i=this.nodeMap[e.source],a=this.nodeMap[e.target],o=this.options.K/(_s(i,a)*(n+1)),s=[[0,0]],l=pt(e);for(let c=1;c<n;c++){const u=this.getSpringForce({pre:this.edgePoints[l][c-1],cur:this.edgePoints[l][c],next:this.edgePoints[l][c+1]||[0,0]},o),f=this.getElectrostaticForce(c,e);s.push(zg(Hi(u,f),r))}return s.push([0,0]),s}bindEvents(){const{graph:e}=this.context;e.on(jn.AFTER_RENDER,this.onBundle)}unbindEvents(){const{graph:e}=this.context;e.off(jn.AFTER_RENDER,this.onBundle)}destroy(){this.unbindEvents(),super.destroy()}}Y6.defaultOptions={K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:2/3,bundleThreshold:.6};const dNt=(t,e)=>Math.abs(cTt([t.vx,t.vy],[e.vx,e.vy])/(t.length*e.length)),pNt=(t,e)=>{const n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)},gNt=(t,e)=>{const n=(t.length+e.length)/2,r=nv(Hi(t.source,t.target),2),i=nv(Hi(e.source,e.target),2);return n/(n+_s(r,i))},jme=(t,e)=>{if(e.source[0]===e.target[0])return[e.source[0],t[1]];if(e.source[1]===e.target[1])return[t[0],e.source[1]];const n=(e.source[1]-e.target[1])/(e.source[0]-e.target[0]),r=(n*n*e.source[0]+n*(t[1]-e.source[1])+t[0])/(n*n+1),i=n*(r-e.source[0])+e.source[1];return[r,i]},zme=(t,e)=>{const n=jme(e.source,t),r=jme(e.target,t),i=nv(Hi(n,r),2),a=nv(Hi(t.source,t.target),2);return _s(n,r)===0?0:Math.max(0,1-2*_s(a,i)/_s(n,r))},vNt=(t,e)=>Math.min(zme(t,e),zme(e,t)),mNt=t=>{let e=0;for(let n=1;n<t.length;n++)e+=_s(t[n],t[n-1]);return e},yNt={fill:"#fff",fillOpacity:1,lineWidth:1,stroke:"#000",strokeOpacity:.8,zIndex:-1/0},$me=.05;class X6 extends tu{constructor(e,n){super(e,Object.assign({},X6.defaultOptions,n)),this.shapes=new Map,this.r=this.options.r,this.onEdgeFilter=r=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=Ru(r.canvas);this.renderLens(i),this.renderFocusElements()},this.renderLens=r=>{const i=Object.assign({},yNt,this.options.style);this.isLensOn||(this.lens=new KP({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,$g(r),{size:this.r*2}),this.lens.update(i)},this.getFilterData=()=>{const{filter:r}=this.options,{model:i}=this.context,a=i.getData();if(!r)return a;const{nodes:o,edges:s,combos:l}=a;return{nodes:o.filter(c=>r(pt(c),"node")),edges:s.filter(c=>r(pt(c),"edge")),combos:l.filter(c=>r(pt(c),"combo"))}},this.getFocusElements=r=>{const{nodes:i,edges:a}=this.getFilterData(),o=i.filter(c=>_s(pl(c),r)<this.r),s=o.map(c=>pt(c)),l=a.filter(c=>{const{source:u,target:f}=c,h=s.includes(u),d=s.includes(f);switch(this.options.nodeType){case"both":return h&&d;case"either":return h!==d;case"source":return h&&!d;case"target":return!h&&d;default:return!1}});return{nodes:o,edges:l}},this.renderFocusElements=()=>{const{element:r,graph:i}=this.context;if(!this.isLensOn)return;const a=this.lens.getCenter(),{nodes:o,edges:s}=this.getFocusElements(a),l=new Set,c=u=>{const f=pt(u);l.add(f);const h=r.getElement(f);if(!h)return;const d=this.shapes.get(f)||h.cloneNode();d.setPosition(h.getPosition()),d.id=h.id,this.shapes.has(f)?Object.entries(h.attributes).forEach(([v,y])=>{d.style[v]!==y&&(d.style[v]=y)}):(this.canvas.appendChild(d),this.shapes.set(f,d));const p=i.getElementType(f),g=this.getElementStyle(p,u);d.update(g)};o.forEach(c),s.forEach(c),this.shapes.forEach((u,f)=>{l.has(f)||(u.destroy(),this.shapes.delete(f))})},this.scaleRByWheel=r=>{var i;this.options.preventDefault&&r.preventDefault();const{clientX:a,clientY:o,deltaX:s,deltaY:l}=r,{graph:c,canvas:u}=this.context,f=c.getCanvasByClient([a,o]),h=(i=this.lens)===null||i===void 0?void 0:i.getCenter();if(!this.isLensOn||_s(f,h)>this.r)return;const{maxR:d,minR:p}=this.options,g=s+l>0?1/(1-$me):1-$me,v=Math.min(...u.getSize())/2;this.r=Math.max(p||0,Math.min(d||v,this.r*g)),this.renderLens(h),this.renderFocusElements()},this.isLensDragging=!1,this.onDragStart=r=>{var i;const a=Ru(r.canvas),o=(i=this.lens)===null||i===void 0?void 0:i.getCenter();!this.isLensOn||_s(a,o)>this.r||(this.isLensDragging=!0)},this.onDrag=r=>{if(!this.isLensDragging)return;const i=Ru(r.canvas);this.renderLens(i),this.renderFocusElements()},this.onDragEnd=()=>{this.isLensDragging=!1},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}getElementStyle(e,n){const r=e==="node"?this.options.nodeStyle:this.options.edgeStyle;return typeof r=="function"?r(n):r}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:n}=this.context,{trigger:r,scaleRBy:i}=this.options,a=n.getCanvas().getLayer();["click","drag"].includes(r)&&a.addEventListener(Zt.CLICK,this.onEdgeFilter),r==="pointermove"?a.addEventListener(Zt.POINTER_MOVE,this.onEdgeFilter):r==="drag"&&(a.addEventListener(Zt.DRAG_START,this.onDragStart),a.addEventListener(Zt.DRAG,this.onDrag),a.addEventListener(Zt.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.addEventListener(Zt.WHEEL,this.scaleRByWheel,{passive:!1}))}unbindEvents(){var e;const{graph:n}=this.context,{trigger:r,scaleRBy:i}=this.options,a=n.getCanvas().getLayer();["click","drag"].includes(r)&&a.removeEventListener(Zt.CLICK,this.onEdgeFilter),r==="pointermove"?a.removeEventListener(Zt.POINTER_MOVE,this.onEdgeFilter):r==="drag"&&(a.removeEventListener(Zt.DRAG_START,this.onDragStart),a.removeEventListener(Zt.DRAG,this.onDrag),a.removeEventListener(Zt.DRAG_END,this.onDragEnd)),i==="wheel"&&((e=this.graphDom)===null||e===void 0||e.removeEventListener(Zt.WHEEL,this.scaleRByWheel))}update(e){var n;this.unbindEvents(),super.update(e),this.r=(n=e.r)!==null&&n!==void 0?n:this.r,this.bindEvents()}destroy(){this.unbindEvents(),this.isLensOn&&this.lens.destroy(),this.shapes.forEach((e,n)=>{e.destroy(),this.shapes.delete(n)}),super.destroy()}}X6.defaultOptions={trigger:"pointermove",r:60,nodeType:"both",filter:()=>!0,style:{lineWidth:2},nodeStyle:{label:!1},edgeStyle:{label:!0},scaleRBy:"wheel",preventDefault:!0};const _Nt={fill:"#ccc",fillOpacity:.1,lineWidth:2,stroke:"#000",strokeOpacity:.8,labelFontSize:12},Hme=.05,Gme=.1;class q6 extends tu{constructor(e,n){super(e,Object.assign({},q6.defaultOptions,n)),this.r=this.options.r,this.d=this.options.d,this.onCreateFisheye=r=>{if(this.options.trigger==="drag"&&this.isLensOn)return;const i=Ru(r.canvas);this.onMagnify(i)},this.onMagnify=r=>{r.some(isNaN)||(this.renderLens(r),this.renderFocusElements())},this.renderLens=r=>{const i=Object.assign({},_Nt,this.options.style);this.isLensOn||(this.lens=new KP({style:i}),this.canvas.appendChild(this.lens)),Object.assign(i,$g(r),{size:this.r*2,label:this.options.showDPercent,labelText:this.getDPercent()}),this.lens.update(i)},this.getDPercent=()=>{const{minD:r,maxD:i}=this.options;return`${Math.round((this.d-r)/(i-r)*100)}%`},this.prevMagnifiedStyleMap=new Map,this.prevOriginStyleMap=new Map,this.renderFocusElements=()=>{if(!this.isLensOn)return;const{graph:r}=this.context,i=this.lens.getCenter(),a=(this.d+1)*this.r,o=new Map,s=new Map;r.getNodeData().forEach(c=>{const u=pl(c),f=_s(u,i);if(f>this.r)return;const h=a*f/(this.d*f+this.r),[d,p]=u,[g,v]=i,y=(d-g)/f,_=(p-v)/f,E=[g+h*y,v+h*_],x=pt(c),T=this.getNodeStyle(c),S=Wp(r.getElementRenderStyle(x),Object.keys(T));o.set(x,Object.assign(Object.assign({},$g(E)),T)),s.set(x,Object.assign(Object.assign({},$g(u)),S))}),this.updateStyle(o,s)},this.getNodeStyle=r=>{const{nodeStyle:i}=this.options;return typeof i=="function"?i(r):i},this.updateStyle=(r,i)=>{const{graph:a,element:o}=this.context,{enter:s,exit:l,keep:c}=F_(Array.from(this.prevMagnifiedStyleMap.keys()),Array.from(r.keys()),h=>h),u=new Set,f=(h,d)=>{const p=o.getElement(h);p?.update(d),a.getRelatedEdgesData(h).forEach(g=>{u.add(pt(g))})};[...s,...c].forEach(h=>{f(h,r.get(h))}),l.forEach(h=>{f(h,this.prevOriginStyleMap.get(h)),this.prevOriginStyleMap.delete(h)}),u.forEach(h=>{const d=o.getElement(h);d?.update({})}),this.prevMagnifiedStyleMap=r,i.forEach((h,d)=>{this.prevOriginStyleMap.has(d)||this.prevOriginStyleMap.set(d,h)})},this.isWheelValid=r=>{if(this.options.preventDefault&&r.preventDefault(),!this.isLensOn)return!1;const{clientX:i,clientY:a}=r,o=this.context.graph.getCanvasByClient([i,a]),s=this.lens.getCenter();return!(_s(o,s)>this.r)},this.scaleR=r=>{const{maxR:i,minR:a}=this.options,o=r?1/(1-Hme):1-Hme,s=Math.min(...this.context.canvas.getSize())/2;this.r=Math.max(a||0,Math.min(i||s,this.r*o))},this.scaleD=r=>{const{maxD:i,minD:a}=this.options,o=r?this.d+Gme:this.d-Gme;this.d=Math.max(a,Math.min(i,o))},this.scaleRByWheel=r=>{if(!this.isWheelValid(r))return;const{deltaX:i,deltaY:a}=r;this.scaleR(i+a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.scaleDByWheel=r=>{if(!this.isWheelValid(r))return;const{deltaX:i,deltaY:a}=r;this.scaleD(i+a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.isDragValid=r=>{if(this.options.preventDefault&&r.preventDefault(),!this.isLensOn)return!1;const i=Ru(r.canvas),a=this.lens.getCenter();return!(_s(i,a)>this.r)},this.isLensDragging=!1,this.onDragStart=r=>{this.isDragValid(r)&&(this.isLensDragging=!0)},this.onDrag=r=>{if(!this.isLensDragging)return;const i=Ru(r.canvas);this.onMagnify(i)},this.onDragEnd=()=>{this.isLensDragging=!1},this.scaleRByDrag=r=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=r;this.scaleR(i-a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.scaleDByDrag=r=>{if(!this.isLensDragging)return;const{dx:i,dy:a}=r;this.scaleD(i-a>0);const o=this.lens.getCenter();this.onMagnify(o)},this.bindEvents()}get canvas(){return this.context.canvas.getLayer("transient")}get isLensOn(){return this.lens&&!this.lens.destroyed}get graphDom(){return this.context.graph.getCanvas().getContextService().getDomElement()}bindEvents(){var e;const{graph:n}=this.context,{trigger:r,scaleRBy:i,scaleDBy:a}=this.options,o=n.getCanvas().getLayer();if(["click","drag"].includes(r)&&o.addEventListener(Zt.CLICK,this.onCreateFisheye),r==="pointermove"&&o.addEventListener(Zt.POINTER_MOVE,this.onCreateFisheye),r==="drag"||i==="drag"||a==="drag"){o.addEventListener(Zt.DRAG_START,this.onDragStart),o.addEventListener(Zt.DRAG_END,this.onDragEnd);const s=r==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;o.addEventListener(Zt.DRAG,s)}if(i==="wheel"||a==="wheel"){const s=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.addEventListener(Zt.WHEEL,s,{passive:!1})}}unbindEvents(){var e;const{graph:n}=this.context,{trigger:r,scaleRBy:i,scaleDBy:a}=this.options,o=n.getCanvas().getLayer();if(["click","drag"].includes(r)&&o.removeEventListener(Zt.CLICK,this.onCreateFisheye),r==="pointermove"&&o.removeEventListener(Zt.POINTER_MOVE,this.onCreateFisheye),r==="drag"||i==="drag"||a==="drag"){o.removeEventListener(Zt.DRAG_START,this.onDragStart),o.removeEventListener(Zt.DRAG_END,this.onDragEnd);const s=r==="drag"?this.onDrag:i==="drag"?this.scaleRByDrag:this.scaleDByDrag;o.removeEventListener(Zt.DRAG,s)}if(i==="wheel"||a==="wheel"){const s=i==="wheel"?this.scaleRByWheel:this.scaleDByWheel;(e=this.graphDom)===null||e===void 0||e.removeEventListener(Zt.WHEEL,s)}}update(e){var n,r;this.unbindEvents(),super.update(e),this.r=(n=e.r)!==null&&n!==void 0?n:this.r,this.d=(r=e.d)!==null&&r!==void 0?r:this.d,this.bindEvents()}destroy(){var e;this.unbindEvents(),this.isLensOn&&((e=this.lens)===null||e===void 0||e.destroy()),this.prevMagnifiedStyleMap.clear(),this.prevOriginStyleMap.clear(),super.destroy()}}q6.defaultOptions={trigger:"pointermove",r:120,d:1.5,maxD:5,minD:0,showDPercent:!0,style:{},nodeStyle:{label:!0},preventDefault:!0};class Z6 extends tu{constructor(e,n){super(e,Object.assign({},Z6.defaultOptions,n)),this.$el=this.context.canvas.getContainer(),this.graphSize=[0,0],this.onFullscreenChange=()=>{var r,i,a,o;const s=!!document.fullscreenElement;this.options.autoFit&&this.setGraphSize(s),s?(i=(r=this.options).onEnter)===null||i===void 0||i.call(r):(o=(a=this.options).onExit)===null||o===void 0||o.call(a)},this.shortcut=new zw(e.graph),this.bindEvents(),this.style=document.createElement("style"),document.head.appendChild(this.style),this.style.innerHTML=`
      :not(:root):fullscreen::backdrop {
        background: transparent;
      }
    `}bindEvents(){this.unbindEvents(),this.shortcut.unbindAll();const{request:e=[],exit:n=[]}=this.options.trigger;this.shortcut.bind(e,this.request),this.shortcut.bind(n,this.exit),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(i=>{document.addEventListener(i,this.onFullscreenChange,!1)})}unbindEvents(){this.shortcut.unbindAll(),["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"].forEach(n=>{document.removeEventListener(n,this.onFullscreenChange,!1)})}setGraphSize(e=!0){var n,r;let i,a;e?(i=((n=globalThis.screen)===null||n===void 0?void 0:n.width)||0,a=((r=globalThis.screen)===null||r===void 0?void 0:r.height)||0,this.graphSize=this.context.graph.getSize()):[i,a]=this.graphSize,this.context.graph.setSize(i,a),this.context.graph.render()}request(){document.fullscreenElement||!bNt()||this.$el.requestFullscreen().catch(e=>{e0.warn(`Error attempting to enable full-screen: ${e.message} (${e.name})`)})}exit(){document.fullscreenElement&&document.exitFullscreen()}update(e){this.unbindEvents(),super.update(e),this.bindEvents()}destroy(){this.exit(),this.style.remove(),super.destroy()}}Z6.defaultOptions={trigger:{},autoFit:!0};function bNt(){return document.fullscreenEnabled||Reflect.get(document,"webkitFullscreenEnabled")||Reflect.get(document,"mozFullscreenEnabled")||Reflect.get(document,"msFullscreenEnabled")}class K6 extends tu{constructor(e,n){super(e,Object.assign({},K6.defaultOptions,n)),this.$element=eO("grid-line",!0),this.offset=[0,0],this.currentScale=1,this.followZoom=i=>{const{data:{scale:a,origin:o}}=i;if(!a||o===void 0&&this.context.viewport===void 0)return;const s=this.currentScale;this.currentScale=a;const l=a/s,c=zg(o||this.context.graph.getCanvasCenter(),1-l),u=this.baseSize*a,f=zg(this.offset,l),h=OU(f,u),d=Hi(h,c);this.$element.style.backgroundSize=`${u}px ${u}px`,this.$element.style.backgroundPosition=`${d[0]}px ${d[1]}px`,this.offset=OU(d,u)},this.followTranslate=i=>{if(!this.options.follow)return;const{data:{translate:a}}=i;a&&this.updateOffset(a)},this.onTransform=i=>{const a=this.parseFollow(this.options.follow);a.zoom&&this.followZoom(i),a.translate&&this.followTranslate(i)},this.context.canvas.getContainer().prepend(this.$element),this.baseSize=this.options.size,this.updateStyle(),this.bindEvents()}update(e){super.update(e),e.size!==void 0&&(this.baseSize=e.size),this.updateStyle()}bindEvents(){const{graph:e}=this.context;e.on(jn.AFTER_TRANSFORM,this.onTransform)}updateStyle(){const{stroke:e,lineWidth:n,border:r,borderLineWidth:i,borderStroke:a,borderStyle:o}=this.options,s=this.baseSize*this.currentScale;Object.assign(this.$element.style,{border:r?`${i}px ${o} ${a}`:"none",backgroundImage:`linear-gradient(${e} ${n}px, transparent ${n}px), linear-gradient(90deg, ${e} ${n}px, transparent ${n}px)`,backgroundSize:`${s}px ${s}px`,backgroundRepeat:"repeat"})}updateOffset(e){const n=this.baseSize*this.currentScale;this.offset=OU(Hi(this.offset,e),n),this.$element.style.backgroundPosition=`${this.offset[0]}px ${this.offset[1]}px`}parseFollow(e){var n,r;return fx(e)?{translate:e,zoom:e}:{translate:(n=e?.translate)!==null&&n!==void 0?n:!1,zoom:(r=e?.zoom)!==null&&r!==void 0?r:!1}}destroy(){this.context.graph.off(jn.AFTER_TRANSFORM,this.onTransform),this.$element.remove(),super.destroy()}}K6.defaultOptions={border:!0,borderLineWidth:1,borderStroke:"#eee",borderStyle:"solid",lineWidth:1,size:20,stroke:"#eee"};function rne(t){const e={Added:new Map,Updated:new Map,Removed:new Map};return t.forEach(n=>{const{type:r,value:i}=n,a=pt(i);if(r==="NodeAdded"||r==="EdgeAdded"||r==="ComboAdded")e.Added.set(a,n);else if(r==="NodeUpdated"||r==="EdgeUpdated"||r==="ComboUpdated")if(e.Added.has(a))e.Added.set(a,{type:r.replace("Updated","Added"),value:i});else if(e.Updated.has(a)){const{original:o}=e.Updated.get(a);e.Updated.set(a,{type:r,value:i,original:o})}else e.Removed.has(a)||e.Updated.set(a,n);else(r==="NodeRemoved"||r==="EdgeRemoved"||r==="ComboRemoved")&&(e.Added.has(a)?e.Added.delete(a):(e.Updated.has(a)&&e.Updated.delete(a),e.Removed.set(a,n)))}),[...Array.from(e.Added.values()),...Array.from(e.Updated.values()),...Array.from(e.Removed.values())]}function bBe(t){const{NodeAdded:e=[],NodeUpdated:n=[],NodeRemoved:r=[],EdgeAdded:i=[],EdgeUpdated:a=[],EdgeRemoved:o=[],ComboAdded:s=[],ComboUpdated:l=[],ComboRemoved:c=[]}=GF(t,u=>u.type);return{add:{nodes:e,edges:i,combos:s},update:{nodes:n,edges:a,combos:l},remove:{nodes:r,edges:o,combos:c}}}function EBe(t,e){for(const n in t)dl(t[n])&&!Array.isArray(t[n])&&t[n]!==null?(e[n]||(e[n]={}),EBe(t[n],e[n])):e[n]===void 0&&(e[n]=PM(n))}function ENt(t,e=!1,n){const r={animation:e,current:{add:{},update:{},remove:{}},original:{add:{},update:{},remove:{}}},{add:i,update:a,remove:o}=bBe(rne(t));return["nodes","edges","combos"].forEach(s=>{a[s]&&a[s].forEach(l=>{var c,u;const f=Object.assign({},l.value);let h=Object.assign({},l.original);if(n){const d=n.graph.getElementType(pt(l.original)),p=d==="edge"?"stroke":"fill",g=n.element.getElementComputedStyle(d,l.original);h=Object.assign(Object.assign({},l.original),{style:Object.assign({[p]:g[p]},l.original.style)})}EBe(f,h),(c=r.current.update)[s]||(c[s]=[]),r.current.update[s].push(f),(u=r.original.update)[s]||(u[s]=[]),r.original.update[s].push(h)}),i[s]&&i[s].forEach(l=>{var c,u;const f=Object.assign({},l.value);(c=r.current.add)[s]||(c[s]=[]),r.current.add[s].push(f),(u=r.original.remove)[s]||(u[s]=[]),r.original.remove[s].push(f)}),o[s]&&o[s].forEach(l=>{var c,u;const f=Object.assign({},l.value);(c=r.current.remove)[s]||(c[s]=[]),r.current.remove[s].push(f),(u=r.original.add)[s]||(u[s]=[]),r.original.add[s].push(f)})}),r}class Q6 extends tu{constructor(e,n){super(e,Object.assign({},Q6.defaultOptions,n)),this.batchChanges=null,this.batchAnimation=!1,this.undoStack=[],this.redoStack=[],this.freezed=!1,this.executeCommand=(i,a=!0)=>{var o,s,l;this.freezed=!0,(s=(o=this.options).executeCommand)===null||s===void 0||s.call(o,i);const c=a?i.original:i.current;this.context.graph.addData(c.add),this.context.graph.updateData(c.update),this.context.graph.removeData(GLe(c.remove,!1)),(l=this.context.element)===null||l===void 0||l.draw({silence:!0,animation:i.animation}),this.freezed=!1},this.addCommand=i=>{var a;if(!this.freezed){if(i.type===jn.AFTER_DRAW){const{dataChanges:o=[],animation:s=!0}=i.data;if(!((a=this.context.batch)===null||a===void 0)&&a.isBatching){if(!this.batchChanges)return;this.batchChanges.push(o),this.batchAnimation&&(this.batchAnimation=s);return}this.batchChanges=[o],this.batchAnimation=s}this.undoStackPush(ENt(this.batchChanges.flat(),this.batchAnimation,this.context)),this.notify(l_.ADD,this.undoStack[this.undoStack.length-1])}},this.initBatchCommand=i=>{const{initiate:a}=i.data;this.batchAnimation=!1,a?this.batchChanges=[]:this.undoStack.pop()||(this.batchChanges=null)},this.emitter=new Jm;const{graph:r}=this.context;r.on(jn.AFTER_DRAW,this.addCommand),r.on(jn.BATCH_START,this.initBatchCommand),r.on(jn.BATCH_END,this.addCommand)}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}undo(){var e,n,r,i;const a=this.undoStack.pop();if(a){if(this.executeCommand(a),((n=(e=this.options).beforeAddCommand)===null||n===void 0?void 0:n.call(e,a,!1))===!1)return;this.redoStack.push(a),(i=(r=this.options).afterAddCommand)===null||i===void 0||i.call(r,a,!1),this.notify(l_.UNDO,a)}return this}redo(){const e=this.redoStack.pop();return e&&(this.executeCommand(e,!1),this.undoStackPush(e),this.notify(l_.REDO,e)),this}undoAndCancel(){const e=this.undoStack.pop();return e&&(this.executeCommand(e,!1),this.redoStack=[],this.notify(l_.CANCEL,e)),this}undoStackPush(e){var n,r,i,a;const{stackSize:o}=this.options;o!==0&&this.undoStack.length>=o&&this.undoStack.shift(),((r=(n=this.options).beforeAddCommand)===null||r===void 0?void 0:r.call(n,e,!0))!==!1&&(this.undoStack.push(e),(a=(i=this.options).afterAddCommand)===null||a===void 0||a.call(i,e,!0))}clear(){this.undoStack=[],this.redoStack=[],this.batchChanges=null,this.batchAnimation=!1,this.notify(l_.CLEAR,null)}notify(e,n){this.emitter.emit(e,{cmd:n}),this.emitter.emit(l_.CHANGE,{cmd:n})}on(e,n){this.emitter.on(e,n)}destroy(){const{graph:e}=this.context;e.off(jn.AFTER_DRAW,this.addCommand),e.off(jn.BATCH_START,this.initBatchCommand),e.off(jn.BATCH_END,this.addCommand),this.emitter.off(),super.destroy(),this.undoStack=[],this.redoStack=[]}}Q6.defaultOptions={stackSize:0};const EG={toXy(t,e){if(!e)return[...t];const n=e[0].slice(1),r=e[1].slice(1);return t.map(i=>[i[n],i[r]])},fromXy(t,e){if(!e)return[...t];const n=e[0].slice(1),r=e[1].slice(1);return t.map(([i,a])=>({[n]:i,[r]:a}))}};class xNt{constructor(e,n){this._cells=[],this._cellSize=n,this._reverseCellSize=1/n;for(const r of e){const i=this.coordToCellNum(r[0]),a=this.coordToCellNum(r[1]);this._cells[i]||(this._cells[i]=[]),this._cells[i][a]||(this._cells[i][a]=[]),this._cells[i][a].push(r)}}cellPoints(e,n){var r;return((r=this._cells[e])===null||r===void 0?void 0:r[n])||[]}rangePoints(e){const n=this.coordToCellNum(e[0]),r=this.coordToCellNum(e[1]),i=this.coordToCellNum(e[2]),a=this.coordToCellNum(e[3]),o=[];for(let s=n;s<=i;s++)for(let l=r;l<=a;l++){const c=this.cellPoints(s,l);for(const u of c)o.push(u)}return o}removePoint(e){const n=this.coordToCellNum(e[0]),r=this.coordToCellNum(e[1]),i=this._cells[n][r],a=i.findIndex(([o,s])=>o===e[0]&&s===e[1]);return a>-1&&i.splice(a,1),i}trunc(e){return Math.trunc(e)}coordToCellNum(e){return this.trunc(e*this._reverseCellSize)}extendBbox(e,n){return[e[0]-n*this._cellSize,e[1]-n*this._cellSize,e[2]+n*this._cellSize,e[3]+n*this._cellSize]}}function SNt(t,e){return new xNt(t,e)}const Wme=+(Math.pow(2,27)+1);function Sk(t,e,n){const r=t*e,i=Wme*t,a=i-t,o=i-a,s=t-o,l=Wme*e,c=l-e,u=l-c,f=e-u,p=r-o*u-s*u-o*f,g=s*f-p;return n?(n[0]=g,n[1]=r,n):[g,r]}function TNt(t,e,n){const r=t+e,i=r-t,a=r-i,o=e-i,s=t-a;return n?(n[0]=s+o,n[1]=r,n):[s+o,r]}function ANt(t,e){const n=t.length;if(n===1){const s=Sk(t[0],e);return s[0]?s:[s[1]]}const r=new Array(2*n),i=[.1,.1],a=[.1,.1];let o=0;Sk(t[0],e,i),i[0]&&(r[o++]=i[0]);for(let s=1;s<n;++s){Sk(t[s],e,a);const l=i[1];TNt(l,a[0],i),i[0]&&(r[o++]=i[0]);const c=a[1],u=i[1],f=c+u,h=f-c,d=u-h;i[1]=f,d&&(r[o++]=d)}return i[1]&&(r[o++]=i[1]),o===0&&(r[o++]=0),r.length=o,r}function wNt(t,e){const n=t+e,r=n-t,i=n-r,a=e-r,s=t-i+a;return s?[s,n]:[n]}function ONt(t,e){const n=t.length|0,r=e.length|0;if(n===1&&r===1)return wNt(t[0],-e[0]);const i=n+r,a=new Array(i);let o=0,s=0,l=0;const c=Math.abs;let u=t[s],f=c(u),h=-e[l],d=c(h),p,g;f<d?(g=u,s+=1,s<n&&(u=t[s],f=c(u))):(g=h,l+=1,l<r&&(h=-e[l],d=c(h))),s<n&&f<d||l>=r?(p=u,s+=1,s<n&&(u=t[s],f=c(u))):(p=h,l+=1,l<r&&(h=-e[l],d=c(h)));let v=p+g,y=v-p,_=g-y,E=_,x=v,T,S,w,C,D;for(;s<n&&l<r;)f<d?(p=u,s+=1,s<n&&(u=t[s],f=c(u))):(p=h,l+=1,l<r&&(h=-e[l],d=c(h))),g=E,v=p+g,y=v-p,_=g-y,_&&(a[o++]=_),T=x+v,S=T-x,w=T-S,C=v-S,D=x-w,E=D+C,x=T;for(;s<n;)p=u,g=E,v=p+g,y=v-p,_=g-y,_&&(a[o++]=_),T=x+v,S=T-x,w=T-S,C=v-S,D=x-w,E=D+C,x=T,s+=1,s<n&&(u=t[s]);for(;l<r;)p=h,g=E,v=p+g,y=v-p,_=g-y,_&&(a[o++]=_),T=x+v,S=T-x,w=T-S,C=v-S,D=x-w,E=D+C,x=T,l+=1,l<r&&(h=-e[l]);return E&&(a[o++]=E),x&&(a[o++]=x),o||(a[o++]=0),a.length=o,a}function CNt(t,e){const n=t+e,r=n-t,i=n-r,a=e-r,s=t-i+a;return s?[s,n]:[n]}function RNt(t,e){const n=t.length|0,r=e.length|0;if(n===1&&r===1)return CNt(t[0],e[0]);const i=n+r,a=new Array(i);let o=0,s=0,l=0;const c=Math.abs;let u=t[s],f=c(u),h=e[l],d=c(h),p,g;f<d?(g=u,s+=1,s<n&&(u=t[s],f=c(u))):(g=h,l+=1,l<r&&(h=e[l],d=c(h))),s<n&&f<d||l>=r?(p=u,s+=1,s<n&&(u=t[s],f=c(u))):(p=h,l+=1,l<r&&(h=e[l],d=c(h)));let v=p+g,y=v-p,_=g-y,E=_,x=v,T,S,w,C,D;for(;s<n&&l<r;)f<d?(p=u,s+=1,s<n&&(u=t[s],f=c(u))):(p=h,l+=1,l<r&&(h=e[l],d=c(h))),g=E,v=p+g,y=v-p,_=g-y,_&&(a[o++]=_),T=x+v,S=T-x,w=T-S,C=v-S,D=x-w,E=D+C,x=T;for(;s<n;)p=u,g=E,v=p+g,y=v-p,_=g-y,_&&(a[o++]=_),T=x+v,S=T-x,w=T-S,C=v-S,D=x-w,E=D+C,x=T,s+=1,s<n&&(u=t[s]);for(;l<r;)p=h,g=E,v=p+g,y=v-p,_=g-y,_&&(a[o++]=_),T=x+v,S=T-x,w=T-S,C=v-S,D=x-w,E=D+C,x=T,l+=1,l<r&&(h=e[l]);return E&&(a[o++]=E),x&&(a[o++]=x),o||(a[o++]=0),a.length=o,a}const Vme=5,DB=11102230246251565e-32,MNt=(3+16*DB)*DB,PNt=(7+56*DB)*DB;function NNt(t,e,n,r){return function(a,o,s){const l=t(t(e(o[1],s[0]),e(-s[1],o[0])),t(e(a[1],o[0]),e(-o[1],a[0]))),c=t(e(a[1],s[0]),e(-s[1],a[0])),u=r(l,c);return u[u.length-1]}}function INt(t,e,n,r){return function(a,o,s,l){const c=t(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2])))),u=t(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2])))),f=r(c,u);return f[f.length-1]}}function LNt(t,e,n,r){return function(a,o,s,l,c){const u=t(t(t(n(t(n(t(e(l[1],c[0]),e(-c[1],l[0])),s[2]),t(n(t(e(s[1],c[0]),e(-c[1],s[0])),-l[2]),n(t(e(s[1],l[0]),e(-l[1],s[0])),c[2]))),o[3]),t(n(t(n(t(e(l[1],c[0]),e(-c[1],l[0])),o[2]),t(n(t(e(o[1],c[0]),e(-c[1],o[0])),-l[2]),n(t(e(o[1],l[0]),e(-l[1],o[0])),c[2]))),-s[3]),n(t(n(t(e(s[1],c[0]),e(-c[1],s[0])),o[2]),t(n(t(e(o[1],c[0]),e(-c[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),c[2]))),l[3]))),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),-c[3]),t(n(t(n(t(e(l[1],c[0]),e(-c[1],l[0])),o[2]),t(n(t(e(o[1],c[0]),e(-c[1],o[0])),-l[2]),n(t(e(o[1],l[0]),e(-l[1],o[0])),c[2]))),a[3]),n(t(n(t(e(l[1],c[0]),e(-c[1],l[0])),a[2]),t(n(t(e(a[1],c[0]),e(-c[1],a[0])),-l[2]),n(t(e(a[1],l[0]),e(-l[1],a[0])),c[2]))),-o[3])))),t(t(n(t(n(t(e(o[1],c[0]),e(-c[1],o[0])),a[2]),t(n(t(e(a[1],c[0]),e(-c[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),c[2]))),l[3]),t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),-c[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),o[2]),t(n(t(e(o[1],l[0]),e(-l[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),l[2]))),a[3]))),t(n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),-o[3]),t(n(t(n(t(e(o[1],l[0]),e(-l[1],o[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),l[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-l[3]))))),f=t(t(t(n(t(n(t(e(l[1],c[0]),e(-c[1],l[0])),s[2]),t(n(t(e(s[1],c[0]),e(-c[1],s[0])),-l[2]),n(t(e(s[1],l[0]),e(-l[1],s[0])),c[2]))),a[3]),n(t(n(t(e(l[1],c[0]),e(-c[1],l[0])),a[2]),t(n(t(e(a[1],c[0]),e(-c[1],a[0])),-l[2]),n(t(e(a[1],l[0]),e(-l[1],a[0])),c[2]))),-s[3])),t(n(t(n(t(e(s[1],c[0]),e(-c[1],s[0])),a[2]),t(n(t(e(a[1],c[0]),e(-c[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),c[2]))),l[3]),n(t(n(t(e(s[1],l[0]),e(-l[1],s[0])),a[2]),t(n(t(e(a[1],l[0]),e(-l[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),l[2]))),-c[3]))),t(t(n(t(n(t(e(s[1],c[0]),e(-c[1],s[0])),o[2]),t(n(t(e(o[1],c[0]),e(-c[1],o[0])),-s[2]),n(t(e(o[1],s[0]),e(-s[1],o[0])),c[2]))),a[3]),n(t(n(t(e(s[1],c[0]),e(-c[1],s[0])),a[2]),t(n(t(e(a[1],c[0]),e(-c[1],a[0])),-s[2]),n(t(e(a[1],s[0]),e(-s[1],a[0])),c[2]))),-o[3])),t(n(t(n(t(e(o[1],c[0]),e(-c[1],o[0])),a[2]),t(n(t(e(a[1],c[0]),e(-c[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),c[2]))),s[3]),n(t(n(t(e(o[1],s[0]),e(-s[1],o[0])),a[2]),t(n(t(e(a[1],s[0]),e(-s[1],a[0])),-o[2]),n(t(e(a[1],o[0]),e(-o[1],a[0])),s[2]))),-c[3])))),h=r(u,f);return h[h.length-1]}}function J6(t){return(t===3?NNt:t===4?INt:LNt)(RNt,Sk,ANt,ONt)}const kNt=J6(3),DNt=J6(4),kE=[function(){return 0},function(){return 0},function(e,n){return n[0]-e[0]},function(e,n,r){const i=(e[1]-r[1])*(n[0]-r[0]),a=(e[0]-r[0])*(n[1]-r[1]),o=i-a;let s;if(i>0){if(a<=0)return o;s=i+a}else if(i<0){if(a>=0)return o;s=-(i+a)}else return o;const l=MNt*s;return o>=l||o<=-l?o:kNt(e,n,r)},function(e,n,r,i){const a=e[0]-i[0],o=n[0]-i[0],s=r[0]-i[0],l=e[1]-i[1],c=n[1]-i[1],u=r[1]-i[1],f=e[2]-i[2],h=n[2]-i[2],d=r[2]-i[2],p=o*u,g=s*c,v=s*l,y=a*u,_=a*c,E=o*l,x=f*(p-g)+h*(v-y)+d*(_-E),T=(Math.abs(p)+Math.abs(g))*Math.abs(f)+(Math.abs(v)+Math.abs(y))*Math.abs(h)+(Math.abs(_)+Math.abs(E))*Math.abs(d),S=PNt*T;return x>S||-x>S?x:DNt(e,n,r,i)}];function BNt(t){let e=kE[t.length];return e||(e=kE[t.length]=J6(t.length)),e.apply(void 0,...t)}function FNt(t,e,n,r,i,a,o){return function(...l){switch(l.length){case 0:case 1:return 0;case 2:return r(l[0],l[1]);case 3:return i(l[0],l[1],l[2]);case 4:return a(l[0],l[1],l[2],l[3]);case 5:return o(l[0],l[1],l[2],l[3],l[4])}return t(l)}}function UNt(){for(;kE.length<=Vme;)kE.push(J6(kE.length));const t=FNt(void 0,BNt,...kE);for(let e=0;e<=Vme;++e)t[e]=kE[e];return t}const bC=UNt(),Yme=bC[3];function jNt(t){const e=t.length;if(e<3){const s=new Array(e);for(let l=0;l<e;++l)s[l]=l;return e===2&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:s}const n=new Array(e);for(let s=0;s<e;++s)n[s]=s;n.sort((s,l)=>{const c=t[s][0]-t[l][0];return c||t[s][1]-t[l][1]});const r=[n[0],n[1]],i=[n[0],n[1]];for(let s=2;s<e;++s){const l=n[s],c=t[l];let u=r.length;for(;u>1&&Yme(t[r[u-2]],t[r[u-1]],c)<=0;)u-=1,r.pop();for(r.push(l),u=i.length;u>1&&Yme(t[i[u-2]],t[i[u-1]],c)>=0;)u-=1,i.pop();i.push(l)}const a=new Array(i.length+r.length-2);let o=0;for(let s=0,l=r.length;s<l;++s)a[o++]=r[s];for(let s=i.length-2;s>0;--s)a[o++]=i[s];return a}function zNt(t,e,n,r){for(let i=0;i<2;++i){const a=t[i],o=e[i],[s,l]=[Math.min(a,o),Math.max(a,o)],c=n[i],u=r[i],[f,h]=[Math.min(c,u),Math.max(c,u)];if(h<s||l<f)return!1}return!0}function $Nt(t,e,n,r){const i=bC(t,n,r),a=bC(e,n,r);if(i>0&&a>0||i<0&&a<0)return!1;const o=bC(n,t,e),s=bC(r,t,e);return o>0&&s>0||o<0&&s<0?!1:i===0&&a===0&&o===0&&s===0?zNt(t,e,n,r):!0}function HNt(t){const e=[t[0]];let n=t[0];for(let r=1;r<t.length;r++){const i=t[r];(n[0]!==i[0]||n[1]!==i[1])&&e.push(i),n=i}return e}function GNt(t){return t.sort(function(e,n){return e[0]-n[0]||e[1]-n[1]})}function Dq(t,e){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function Xme(t,e,n){const r=[e[0]-t[0],e[1]-t[1]],i=[n[0]-t[0],n[1]-t[1]],a=Dq(t,e),o=Dq(t,n);return(r[0]*i[0]+r[1]*i[1])/Math.sqrt(a*o)}function qme(t,e){for(let n=0;n<e.length-1;n++){const r=[e[n],e[n+1]];if(!(t[0][0]===r[0][0]&&t[0][1]===r[0][1]||t[0][0]===r[1][0]&&t[0][1]===r[1][1])&&$Nt(t[0],t[1],r[0],r[1]))return!0}return!1}function WNt(t){let e=1/0,n=1/0,r=-1/0,i=-1/0;for(let a=t.length-1;a>=0;a--)t[a][0]<e&&(e=t[a][0]),t[a][1]<n&&(n=t[a][1]),t[a][0]>r&&(r=t[a][0]),t[a][1]>i&&(i=t[a][1]);return[r-e,i-n]}function VNt(t){return[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1]),Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]}function YNt(t,e,n){let r=null,i=Zme,a=Zme,o,s;for(let l=0;l<e.length;l++)o=Xme(t[0],t[1],e[l]),s=Xme(t[1],t[0],e[l]),o>i&&s>a&&!qme([t[0],e[l]],n)&&!qme([t[1],e[l]],n)&&(i=o,a=s,r=e[l]);return r}function xBe(t,e,n,r,i){let a=!1;for(let o=0;o<t.length-1;o++){const s=[t[o],t[o+1]],l=s[0][0]+","+s[0][1]+","+s[1][0]+","+s[1][1];if(Dq(s[0],s[1])<e||i.has(l))continue;let c=0,u=VNt(s),f,h,d;do u=r.extendBbox(u,c),f=u[2]-u[0],h=u[3]-u[1],d=YNt(s,r.rangePoints(u),t),c++;while(d===null&&(n[0]>f||n[1]>h));f>=n[0]&&h>=n[1]&&i.add(l),d!==null&&(t.splice(o+1,0,d),r.removePoint(d),a=!0)}return a?xBe(t,e,n,r,i):t}function XNt(t,e,n){const r=e||20,i=HNt(GNt(EG.toXy(t,n)));if(i.length<4){const f=i.concat([i[0]]);return n?EG.fromXy(f,n):f}const a=WNt(i),o=[a[0]*Kme,a[1]*Kme],s=jNt(i).reverse().map(f=>i[f]);s.push(s[0]);const l=i.filter(function(f){return s.indexOf(f)<0}),c=Math.ceil(1/(i.length/(a[0]*a[1]))),u=xBe(s,Math.pow(r,2),o,SNt(l,c),new Set);return n?EG.fromXy(u,n):u}const Zme=Math.cos(90/(180/Math.PI)),Kme=.6;function qNt(t,e,n){if(t.length===1)return ZNt(t[0],e,n);if(t.length===2)return Qme(t,e,n);if(t.length===3){const[r,i,a]=yte(t);if(QLe(r,i,a))return Qme([r,a],e,n)}switch(n){case"smooth":return QNt(t,e);case"sharp":return JNt(t,e);case"rounded":default:return KNt(t,e)}}const ZNt=(t,e,n)=>{if(n==="sharp")return[["M",t[0]-e,t[1]-e],["L",t[0]+e,t[1]-e],["L",t[0]+e,t[1]+e],["L",t[0]-e,t[1]+e],["Z"]];const r=[e,e,0,0,0];return[["M",t[0],t[1]-e],["A",...r,t[0],t[1]+e],["A",...r,t[0],t[1]-e]]},Qme=(t,e,n)=>{const r=[e,e,0,0,0],i=n==="sharp"?Hi(t[0],O_(yy(Wo(t[0],t[1])),e)):t[0],a=n==="sharp"?Hi(t[1],O_(yy(Wo(t[1],t[0])),e)):t[1],o=O_(yy(i6(Wo(i,a),!1)),e),s=O_(o,-1),l=Hi(i,o),c=Hi(a,o),u=Hi(a,s),f=Hi(i,s);return n==="sharp"?[["M",l[0],l[1]],["L",c[0],c[1]],["L",u[0],u[1]],["L",f[0],f[1]],["Z"]]:[["M",l[0],l[1]],["L",c[0],c[1]],["A",...r,u[0],u[1]],["L",f[0],f[1]],["A",...r,l[0],l[1]]]},KNt=(t,e)=>{const n=yte(t).map((s,l)=>{const c=(l-2+t.length)%t.length,u=(l-1+t.length)%t.length,f=(l+1)%t.length,h=t[c],d=t[u],p=t[f],g=Wo(h,d),v=Wo(d,s),y=Wo(s,p),_=(w,C)=>vte(w,C,!0)<Math.PI,E=_(g,v),x=_(v,y),T=w=>O_(yy(i6(w,!1)),e),S=T(v);return[{p:Ox(E?Hi(d,T(g)):Hi(d,S)),concave:E&&d},{p:Ox(x?Hi(s,T(y)):Hi(s,S)),concave:x&&s}]}),r=[e,e,0,0,0],i=n.findIndex((s,l)=>!n[(l-1+n.length)%n.length][0].concave&&!n[(l-1+n.length)%n.length][1].concave&&!s[0].concave&&!s[0].concave&&!s[1].concave),a=n.slice(i).concat(n.slice(0,i));let o=[];return a.flatMap((s,l)=>{const c=[],u=a[n.length-1];return l===0&&c.push(["M",...u[1].p]),s[0].concave?o.push(s[0].p,s[1].p):c.push(["A",...r,...s[0].p]),s[1].concave?o.unshift(s[1].p):c.push(["L",...s[1].p]),o.length===3&&(c.pop(),c.push(["C",...o.flat()]),o=[]),c})},QNt=(t,e)=>{const n=yte(t).map((r,i)=>{const a=t[(i+1)%t.length];return{p:r,v:yy(Wo(a,r))}});return n.forEach((r,i)=>{const a=i>0?i-1:t.length-1,o=n[a].v,s=yy(Hi(o,O_(r.v,vte(o,r.v,!0)<Math.PI?1:-1)));r.p=Hi(r.p,O_(s,e))}),ske(n.map(r=>r.p))},JNt=(t,e)=>{const r=t.map((a,o)=>{const s=t[o===0?t.length-1:o-1],l=NM(O_(yy(i6(Wo(s,a),!1)),e));return[Hi(s,l),Hi(a,l)]}).flat();return r.map((a,o)=>{if(o%2===0)return null;const s=[r[(o-1)%r.length],r[o%r.length]],l=[r[(o+1)%r.length],r[(o+2)%r.length]];return mte(s,l,!0)}).filter(Boolean).map((a,o)=>[o===0?"M":"L",a[0],a[1]]).concat([["Z"]])};var e3t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class e5 extends tu{constructor(e,n){super(e,Object.assign({},e5.defaultOptions,n)),this.hullMemberIds=[],this.drawHull=()=>{if(!this.shape)this.shape=new ZP({style:this.getHullStyle()}),this.context.canvas.appendChild(this.shape);else{const r=!Fs(this.optionsCache,this.options);this.shape.update(this.getHullStyle(r))}this.optionsCache=Object.assign({},this.options)},this.updateHullPath=r=>{this.shape&&this.options.members.includes(pt(r.data))&&this.shape.update({d:this.getHullPath(!0)})},this.getHullPath=(r=!1)=>{const{graph:i}=this.context,a=this.getMember();if(a.length===0)return"";const o=a.map(c=>i.getNodeData(c)),s=XNt(o.map(pl),this.options.concavity).slice(1).reverse(),l=s.flatMap(c=>o.filter(u=>Fs(pl(u),c)).map(pt));return Fs(l,this.hullMemberIds)&&!r?this.path:(this.hullMemberIds=l,this.path=qNt(s,this.getPadding(),this.options.corner),this.path)},this.bindEvents()}bindEvents(){this.context.graph.on(jn.AFTER_RENDER,this.drawHull),this.context.graph.on(jn.AFTER_ELEMENT_UPDATE,this.updateHullPath)}unbindEvents(){this.context.graph.off(jn.AFTER_RENDER,this.drawHull),this.context.graph.off(jn.AFTER_ELEMENT_UPDATE,this.updateHullPath)}getHullStyle(e){const n=this.options,{members:r,padding:i,corner:a}=n,o=e3t(n,["members","padding","corner"]);return Object.assign(Object.assign({},o),{d:this.getHullPath(e)})}getPadding(){const{graph:e}=this.context;return this.hullMemberIds.reduce((r,i)=>{const{halfExtents:a}=e.getElementRenderBounds(i),o=Math.max(a[0],a[1]);return Math.max(r,o)},0)+this.options.padding}addMember(e){const n=Array.isArray(e)?e:[e];this.options.members=[...new Set([...this.options.members,...n])],this.shape.update({d:this.getHullPath()})}removeMember(e){const n=Array.isArray(e)?e:[e];this.options.members=this.options.members.filter(r=>!n.includes(r)),n.some(r=>this.hullMemberIds.includes(r))&&this.shape.update({d:this.getHullPath()})}updateMember(e){this.options.members=ur(e)?e(this.options.members):e,this.shape.update(this.getHullStyle(!0))}getMember(){return this.options.members}destroy(){this.unbindEvents(),this.shape.destroy(),this.hullMemberIds=[],super.destroy()}}e5.defaultOptions={members:[],padding:10,corner:"rounded",concavity:1/0,fill:"lightblue",fillOpacity:.2,labelOpacity:1,stroke:"blue",strokeOpacity:.2};function t5(t){const{width:e,height:n,renderer:r}=t,i=t3t(t),a=new aX({width:e,height:n,container:i,renderer:r||new xx});return[i,a]}function t3t(t){var e;const{container:n,className:r,graphCanvas:i}=t;if(n)return typeof n=="string"?document.getElementById(n):n;const a=eO(r,!1),{width:o,height:s,containerStyle:l}=t,[c,u]=n3t(t);return Object.assign(a.style,Object.assign({position:"absolute",left:c+"px",top:u+"px",width:o+"px",height:s+"px"},l)),(e=i.getContainer())===null||e===void 0||e.appendChild(a),a}function n3t(t){const{width:e,height:n,placement:r,graphCanvas:i}=t,[a,o]=i.getSize(),[s,l]=ZLe(r);return[s*(a-e),l*(o-n)]}var r3t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class n5 extends tu{constructor(e,n){super(e,Object.assign({},n5.defaultOptions,n)),this.typePrefix="__data__",this.draw=!1,this.fieldMap={node:new Map,edge:new Map,combo:new Map},this.selectedItems=[],this.bindEvents=()=>{const{graph:r}=this.context;r.on(jn.AFTER_DRAW,this.createElement)},this.changeState=(r,i)=>{const{graph:a}=this.context,{typePrefix:o}=this,s=Wr(r,[o,"id"]),l=Wr(r,[o,"style","labelText"]),[c]=s.split("__"),u=this.fieldMap[c].get(l)||[];a.setElementState(Object.fromEntries(u?.map(f=>[f,i])))},this.click=r=>{if(this.options.trigger==="hover")return;const i=Wr(r,[this.typePrefix,"id"]);this.selectedItems.includes(i)?(this.selectedItems=this.selectedItems.filter(a=>a!==i),this.changeState(r,[])):(this.selectedItems.push(i),this.changeState(r,"selected"))},this.mouseleave=r=>{this.options.trigger!=="click"&&(this.selectedItems=[],this.changeState(r,[]))},this.mouseenter=r=>{if(this.options.trigger==="click")return;const i=Wr(r,[this.typePrefix,"id"]);this.selectedItems.includes(i)?this.selectedItems=this.selectedItems.filter(a=>a!==i):(this.selectedItems.push(i),this.changeState(r,"active"))},this.setFieldMap=(r,i,a)=>{if(!r)return;const o=this.fieldMap[a];if(o)if(!o.has(r))o.set(r,[i]);else{const s=o.get(r);s&&(s.push(i),o.set(r,s))}},this.getEvents=()=>({mouseenter:this.mouseenter,mouseleave:this.mouseleave,click:this.click}),this.getMarkerData=(r,i)=>{if(!r)return[];const{model:a,element:o}=this.context,{nodes:s,edges:l,combos:c}=a.getData(),u={},f=v=>ur(r)?r(v):r,h={node:"circle",edge:"line",combo:"rect"},d={circle:"circle",ellipse:"circle",image:"bowtie",rect:"square",star:"cross",triangle:"triangle",diamond:"diamond",cubic:"dot",line:"hyphen",polyline:"hyphen",quadratic:"hv","cubic-horizontal":"hyphen","cubic-vertical":"line"},p=(v,y)=>o?.getElementComputedStyle(v,y),g=(v,y)=>{v.forEach(_=>{const{id:E}=_,x=Wr(_,["data",f(_)]),T=o?.getElementType(y,_)||"circle",S=p(y,_),w=(y==="edge"?S?.stroke:S?.fill)||"#1783ff";E&&x&&x.replace(/\s+/g,"")&&(this.setFieldMap(x,E,y),u[x]||(u[x]={id:`${y}__${E}`,label:x,marker:d[T]||h[y],elementType:y,lineWidth:1,stroke:w,fill:w}))})};switch(i){case"node":g(s,"node");break;case"edge":g(l,"edge");break;case"combo":g(c,"combo");break;default:return[]}return Object.values(u)},this.createElement=()=>{if(this.draw){this.updateElement();return}const r=this.options,{width:i,height:a,nodeField:o,edgeField:s,comboField:l,trigger:c,position:u,container:f,containerStyle:h,className:d}=r,p=r3t(r,["width","height","nodeField","edgeField","comboField","trigger","position","container","containerStyle","className"]),g=this.getMarkerData(o,"node"),v=this.getMarkerData(s,"edge"),y=this.getMarkerData(l,"combo"),_=[...g,...y,...v],E=Object.assign({width:i,height:a,data:_,itemMarkerLineWidth:({lineWidth:S})=>S,itemMarker:({marker:S})=>S,itemMarkerStroke:({stroke:S})=>S,itemMarkerFill:({fill:S})=>S,gridCol:g.length},p,this.getEvents()),x=new pX({className:"legend",style:E});this.category=x,this.upsertCanvas().appendChild(x),this.draw=!0},this.bindEvents()}update(e){super.update(e),this.clear(),this.createElement()}clear(){var e,n;(e=this.canvas)===null||e===void 0||e.destroy(),(n=this.container)===null||n===void 0||n.remove(),this.canvas=void 0,this.container=void 0,this.draw=!1}updateElement(){this.category&&this.category.update({itemMarkerOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5,itemLabelOpacity:({id:e})=>!this.selectedItems.length||this.selectedItems.includes(e)?1:.5})}upsertCanvas(){if(this.canvas)return this.canvas;const e=this.context.canvas,[n,r]=e.getSize(),{width:i=n,height:a=r,position:o,container:s,containerStyle:l,className:c}=this.options,[u,f]=t5({width:i,height:a,graphCanvas:e,container:s,containerStyle:l,placement:o,className:"legend"});return this.container=u,c&&u.classList.add(c),this.canvas=f,this.canvas}destroy(){this.clear(),this.context.graph.off(jn.AFTER_DRAW,this.createElement),super.destroy()}}n5.defaultOptions={position:"bottom",trigger:"hover",orientation:"horizontal",layout:"flex",itemSpacing:4,rowPadding:10,colPadding:10,itemMarkerSize:16,itemLabelFontSize:16,width:240,height:160};class r5 extends tu{constructor(e,n){super(e,Object.assign({},r5.defaultOptions,n)),this.onDraw=r=>{var i;!((i=r?.data)===null||i===void 0)&&i.render||this.onRender()},this.landmarkMap=new Map,this.mask=null,this.isMaskDragging=!1,this.onMaskDragStart=r=>{this.mask&&(this.isMaskDragging=!0,this.mask.setPointerCapture(r.pointerId),this.mask.addEventListener("pointermove",this.onMaskDrag),this.mask.addEventListener("pointerup",this.onMaskDragEnd),this.mask.addEventListener("pointercancel",this.onMaskDragEnd))},this.onMaskDrag=r=>{if(!this.mask||!this.isMaskDragging)return;const{size:[i,a]}=this.options,{movementX:o,movementY:s}=r,{left:l,top:c,width:u,height:f}=this.mask.style,[,,h,d]=this.maskBBox;let p=parseInt(l)+o,g=parseInt(c)+s,v=parseInt(u),y=parseInt(f);p<0&&(p=0),g<0&&(g=0),p+v>i&&(p=q1(i-v,0)),g+y>a&&(g=q1(a-y,0)),v<h&&(o>0?(p=q1(p-o,0),v=X1(v+o,i)):o<0&&(v=X1(v-o,i))),y<d&&(s>0?(g=q1(g-s,0),y=X1(y+s,a)):s<0&&(y=X1(y-s,a))),Object.assign(this.mask.style,{left:p+"px",top:g+"px",width:v+"px",height:y+"px"});const _=parseInt(l)-p,E=parseInt(c)-g;if(_===0&&E===0)return;const x=this.context.canvas.getCamera().getZoom(),T=this.canvas.getCamera().getZoom(),S=x/T;this.context.graph.translateBy([_*S,E*S],!1)},this.onMaskDragEnd=r=>{this.mask&&(this.isMaskDragging=!1,this.mask.releasePointerCapture(r.pointerId),this.mask.removeEventListener("pointermove",this.onMaskDrag),this.mask.removeEventListener("pointerup",this.onMaskDragEnd),this.mask.removeEventListener("pointercancel",this.onMaskDragEnd))},this.onTransform=Sy(()=>{this.isMaskDragging||(this.updateMask(),this.setCamera())},32,{leading:!0}),this.setOnRender(),this.bindEvents()}update(e){this.unbindEvents(),super.update(e),"delay"in e&&this.setOnRender(),this.bindEvents()}setOnRender(){this.onRender=Aw(()=>{this.renderMinimap(),this.renderMask()},this.options.delay)}bindEvents(){const{graph:e}=this.context;e.on(jn.AFTER_DRAW,this.onDraw),e.on(jn.AFTER_RENDER,this.onRender),e.on(jn.AFTER_ANIMATE,this.onRender),e.on(jn.AFTER_TRANSFORM,this.onTransform)}unbindEvents(){const{graph:e}=this.context;e.off(jn.AFTER_DRAW,this.onDraw),e.off(jn.AFTER_RENDER,this.onRender),e.off(jn.AFTER_ANIMATE,this.onRender),e.off(jn.AFTER_TRANSFORM,this.onTransform)}renderMinimap(){const e=this.getElements(),n=this.initCanvas();this.setShapes(n,e)}getElements(){const{filter:e}=this.options,{model:n,element:r}=this.context,i=n.getData(),a={nodes:i.nodes.filter(c=>r?.getElement(pt(c))),edges:i.edges.filter(c=>{const u=r?.getElement(pt(c));return u&&Tke(u)}),combos:i.combos.filter(c=>r?.getElement(pt(c)))};if(!e)return a;const{nodes:o,edges:s,combos:l}=a;return{nodes:o.filter(c=>e(pt(c),"node")),edges:s.filter(c=>e(pt(c),"edge")),combos:l.filter(c=>e(pt(c),"combo"))}}setShapes(e,n){const{nodes:r,edges:i,combos:a}=n,{shape:o}=this.options,{element:s}=this.context,l=(c,u)=>{const f=pt(c),h=s?.getElement(f);if(!h)return;const d=h.getShape("key");let p;if(typeof o=="string"){const g=o;p=h.getShape(g).cloneNode()}else{const g=o(f,u,h);g===h?p=g.cloneNode(!0):p=g}p.setPosition(d.getPosition()),h.style.zIndex&&(p.style.zIndex=h.style.zIndex),p.id=h.id,e.appendChild(p)};e.removeChildren(),i.forEach(c=>l(c,"edge")),a.forEach(c=>l(c,"combo")),r.forEach(c=>l(c,"node"))}initCanvas(){const{renderer:e,size:[n,r]}=this.options;if(this.canvas){const{width:i,height:a}=this.canvas.getConfig();(n!==i||r!==a)&&this.canvas.resize(n,r),e&&this.canvas.setRenderer(e)}else{const{className:i,position:a,container:o,containerStyle:s}=this.options,[l,c]=t5({renderer:e,width:n,height:r,placement:a,className:"minimap",container:o,containerStyle:s,graphCanvas:this.context.canvas});i&&l.classList.add(i),this.container=l,this.canvas=c}return this.setCamera(),this.canvas}createLandmark(e,n,r){const i=`${e.join(",")}-${n.join(",")}-${r}`;if(this.landmarkMap.has(i))return this.landmarkMap.get(i);const o=this.canvas.getCamera().createLandmark(i,{position:e,focalPoint:n,zoom:r});return this.landmarkMap.set(i,o),o}setCamera(){var e;const{canvas:n}=this.context,r=(e=this.canvas)===null||e===void 0?void 0:e.getCamera();if(!r)return;const{size:[i,a],padding:o}=this.options,[s,l,c,u]=Qp(o),{min:f,max:h,center:d}=n.getBounds("elements"),p=h[0]-f[0],g=h[1]-f[1],v=i-u-l,y=a-s-c,_=v/p,E=y/g,x=Math.min(_,E),T=this.createLandmark(d,d,x);r.gotoLandmark(T,0)}get maskBBox(){const{canvas:e}=this.context,n=e.getSize(),r=e.getCanvasByViewport([0,0]),i=e.getCanvasByViewport(n),a=this.canvas.canvas2Viewport($g(r)),o=this.canvas.canvas2Viewport($g(i)),s=o.x-a.x,l=o.y-a.y;return[a.x,a.y,s,l]}calculateMaskBBox(){const{size:[e,n]}=this.options;let[r,i,a,o]=this.maskBBox;return r<0&&(a=X1(a+r,e),r=0),i<0&&(o=X1(o+i,n),i=0),r+a>e&&(a=q1(e-r,0)),i+o>n&&(o=q1(n-i,0)),[X1(r,e),X1(i,n),q1(a,0),q1(o,0)]}renderMask(){const{maskStyle:e}=this.options;this.mask||(this.mask=document.createElement("div"),this.mask.addEventListener("pointerdown",this.onMaskDragStart),this.mask.draggable=!0,this.mask.addEventListener("dragstart",n=>n.preventDefault&&n.preventDefault())),this.container.appendChild(this.mask),Object.assign(this.mask.style,Object.assign(Object.assign({},e),{cursor:"move",position:"absolute",pointerEvents:"auto"})),this.updateMask()}updateMask(){if(!this.mask)return;const[e,n,r,i]=this.calculateMaskBBox();Object.assign(this.mask.style,{top:n+"px",left:e+"px",width:r+"px",height:i+"px"})}destroy(){var e,n,r;this.unbindEvents(),(e=this.canvas)===null||e===void 0||e.destroy(),(n=this.mask)===null||n===void 0||n.remove(),(r=this.container)===null||r===void 0||r.remove(),super.destroy()}}r5.defaultOptions={size:[240,160],shape:"key",padding:10,position:"right-bottom",maskStyle:{border:"1px solid #ddd",background:"rgba(0, 0, 0, 0.1)"},containerStyle:{border:"1px solid #ddd",background:"#fff"},delay:128};const X1=(t,e)=>Math.min(t,e),q1=(t,e)=>Math.max(t,e);var xG=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const SG={x1:0,y1:0,x2:0,y2:0,visibility:"hidden"};class i5 extends tu{constructor(e,n){super(e,Object.assign({},i5.defaultOptions,n)),this.initSnapline=()=>{const r=this.context.canvas.getLayer("transient");this.horizontalLine||(this.horizontalLine=r.appendChild(new Ex({style:Object.assign(Object.assign({},SG),this.options.horizontalLineStyle)}))),this.verticalLine||(this.verticalLine=r.appendChild(new Ex({style:Object.assign(Object.assign({},SG),this.options.verticalLineStyle)})))},this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!0,this.autoSnapToLine=(r,i,a)=>xG(this,void 0,void 0,function*(){const{verticalX:o,horizontalY:s}=a,{tolerance:l}=this.options,{min:[c,u],max:[f,h],center:[d,p]}=i;let g=0,v=0;o!==null&&(Ku(f,o)<l&&(g=o-f),Ku(c,o)<l&&(g=o-c),Ku(d,o)<l&&(g=o-d),g!==0&&(this.isVerticalSticking=!0)),s!==null&&(Ku(h,s)<l&&(v=s-h),Ku(u,s)<l&&(v=s-u),Ku(p,s)<l&&(v=s-p),v!==0&&(this.isHorizontalSticking=!0)),(g!==0||v!==0)&&(yield this.context.graph.translateElementBy({[r]:[g,v]},!1))}),this.enableSnap=r=>{const{target:i}=r,a=.5;if(this.isHorizontalSticking||this.isVerticalSticking){const[o,s]=this.getDelta(r);if(this.isHorizontalSticking&&this.isVerticalSticking&&Math.abs(o)<=a&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[-o,-s]},!1),!1;if(this.isHorizontalSticking&&Math.abs(s)<=a)return this.context.graph.translateElementBy({[i.id]:[0,-s]},!1),!1;if(this.isVerticalSticking&&Math.abs(o)<=a)return this.context.graph.translateElementBy({[i.id]:[-o,0]},!1),!1;this.isHorizontalSticking=!1,this.isVerticalSticking=!1,this.enableStick=!1,setTimeout(()=>{this.enableStick=!0},200)}return this.enableStick},this.calcSnaplineMetadata=(r,i)=>{const{tolerance:a,shape:o}=this.options,{min:[s,l],max:[c,u],center:[f,h]}=i;let d=null,p=null,g=null,v=null,y=null,_=null;return this.getNodes().some(E=>{if(Fs(r.id,E.id))return!1;const x=Jme(E,o).getRenderBounds(),{min:[T,S],max:[w,C],center:[D,L]}=x;return d===null&&(Ku(D,f)<a?d=D:Ku(T,s)<a||Ku(T,c)<a?d=T:(Ku(w,c)<a||Ku(w,s)<a)&&(d=w),d!==null&&(p=Math.min(S,l),g=Math.max(C,u))),v===null&&(Ku(L,h)<a?v=L:Ku(S,l)<a||Ku(S,u)<a?v=S:(Ku(C,u)<a||Ku(C,l)<a)&&(v=C),v!==null&&(y=Math.min(T,s),_=Math.max(w,c))),d!==null&&v!==null}),{verticalX:d,verticalMinY:p,verticalMaxY:g,horizontalY:v,horizontalMinX:y,horizontalMaxX:_}},this.onDragStart=()=>{this.initSnapline()},this.onDrag=r=>xG(this,void 0,void 0,function*(){const{target:i}=r;if(this.options.autoSnap&&!this.enableSnap(r))return;const a=Jme(i,this.options.shape).getRenderBounds(),o=this.calcSnaplineMetadata(i,a);this.hideSnapline(),(o.verticalX!==null||o.horizontalY!==null)&&this.updateSnapline(o),this.options.autoSnap&&(yield this.autoSnapToLine(i.id,a,o))}),this.onDragEnd=()=>{this.hideSnapline()},this.bindEvents()}getNodes(){var e;const{filter:n}=this.options,i=(((e=this.context.element)===null||e===void 0?void 0:e.getNodes())||[]).filter(a=>{var o;return Tke(a)&&((o=this.context.viewport)===null||o===void 0?void 0:o.isInViewport(a.getRenderBounds()))});return n?i.filter(a=>n(a)):i}hideSnapline(){this.horizontalLine.style.visibility="hidden",this.verticalLine.style.visibility="hidden"}getLineWidth(e){const{lineWidth:n}=this.options[`${e}LineStyle`];return+(n||SG.lineWidth||1)/this.context.graph.getZoom()}updateSnapline(e){const{verticalX:n,verticalMinY:r,verticalMaxY:i,horizontalY:a,horizontalMinX:o,horizontalMaxX:s}=e,[l,c]=this.context.canvas.getSize(),{offset:u}=this.options;a!==null?Object.assign(this.horizontalLine.style,{x1:u===1/0?0:o-u,y1:a,x2:u===1/0?l:s+u,y2:a,visibility:"visible",lineWidth:this.getLineWidth("horizontal")}):this.horizontalLine.style.visibility="hidden",n!==null?Object.assign(this.verticalLine.style,{x1:n,y1:u===1/0?0:r-u,x2:n,y2:u===1/0?c:i+u,visibility:"visible",lineWidth:this.getLineWidth("vertical")}):this.verticalLine.style.visibility="hidden"}getDelta(e){const n=this.context.graph.getZoom();return nv([e.dx,e.dy],n)}bindEvents(){return xG(this,void 0,void 0,function*(){const{graph:e}=this.context;e.on(Cp.DRAG_START,this.onDragStart),e.on(Cp.DRAG,this.onDrag),e.on(Cp.DRAG_END,this.onDragEnd)})}unbindEvents(){const{graph:e}=this.context;e.off(Cp.DRAG_START,this.onDragStart),e.off(Cp.DRAG,this.onDrag),e.off(Cp.DRAG_END,this.onDragEnd)}destroyElements(){var e,n;(e=this.horizontalLine)===null||e===void 0||e.destroy(),(n=this.verticalLine)===null||n===void 0||n.destroy()}destroy(){this.destroyElements(),this.unbindEvents(),super.destroy()}}i5.defaultOptions={tolerance:5,offset:20,autoSnap:!0,shape:"key",verticalLineStyle:{stroke:"#1783FF"},horizontalLineStyle:{stroke:"#1783FF"},filter:()=>!0};const Ku=(t,e)=>Math.abs(t-e),Jme=(t,e)=>typeof e=="function"?e(t):t.getShape(e);var i3t=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},a3t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const o3t=["timestamp","time","date","datetime"];class a5 extends tu{get padding(){return Qp(this.options.padding)}constructor(e,n){super(e,Object.assign({},a5.defaultOptions,n)),this.backup(),this.upsertTimebar()}play(){var e;(e=this.timebar)===null||e===void 0||e.play()}pause(){var e;(e=this.timebar)===null||e===void 0||e.pause()}forward(){var e;(e=this.timebar)===null||e===void 0||e.forward()}backward(){var e;(e=this.timebar)===null||e===void 0||e.backward()}reset(){var e;(e=this.timebar)===null||e===void 0||e.reset()}update(e){super.update(e),this.backup(),this.upsertTimebar()}backup(){this.originalData=e0e(this.context.graph.getData())}upsertTimebar(){const{canvas:e}=this.context,n=this.options,{onChange:r,timebarType:i,data:a,x:o,y:s,width:l,height:c,mode:u}=n,f=a3t(n,["onChange","timebarType","data","x","y","width","height","mode"]),h=e.getSize(),[d]=this.padding;this.upsertCanvas().ready.then(()=>{var p;const g=Object.assign(Object.assign({x:h[0]/2-l/2,y:d,onChange:v=>{const y=(Us(v)?v:[v,v]).map(_=>C9e(_)?_.getTime():_);this.options.mode==="modify"?this.filterElements(y):this.hiddenElements(y),r?.(y)}},f),{data:a.map(v=>Ln(v)?{time:v,value:0}:v),width:l,height:c,type:i});this.timebar?this.timebar.update(g):(this.timebar=new Oit({style:g}),(p=this.canvas)===null||p===void 0||p.appendChild(this.timebar))})}upsertCanvas(){if(this.canvas)return this.canvas;const{className:e,height:n,position:r}=this.options,i=this.context.canvas,[a]=i.getSize(),[o,,s]=this.padding,[l,c]=t5({width:a,height:n+o+s,graphCanvas:i,className:"timebar",placement:r});return this.container=l,e&&l.classList.add(e),this.canvas=c,this.canvas}filterElements(e){return i3t(this,void 0,void 0,function*(){var n;if(!this.originalData)return;const{elementTypes:r,getTime:i}=this.options,{graph:a,element:o}=this.context,s=e0e(this.originalData);r.forEach(c=>{const u=`${c}s`;s[u]=(this.originalData[u]||[]).filter(f=>{const h=i(f);return!!t0e(h,e)})});const l=[...s.nodes,...s.combos].map(c=>pt(c));s.edges=s.edges.filter(c=>{const u=c.source,f=c.target;return l.includes(u)&&l.includes(f)}),a.setData(s),yield(n=o.draw({animation:!1,silence:!0}))===null||n===void 0?void 0:n.finished})}hiddenElements(e){const{graph:n}=this.context,{elementTypes:r,getTime:i}=this.options,a=[],o=[];r.forEach(s=>{var l;const c=`${s}s`;(((l=this.originalData)===null||l===void 0?void 0:l[c])||[]).forEach(f=>{const h=pt(f),d=i(f);t0e(d,e)?o.push(h):a.push(h)})}),n.hideElement(a,!1),n.showElement(o,!1)}destroy(){var e,n,r;const{graph:i}=this.context;this.originalData&&i.setData(Object.assign({},this.originalData)),(e=this.timebar)===null||e===void 0||e.destroy(),(n=this.canvas)===null||n===void 0||n.destroy(),(r=this.container)===null||r===void 0||r.remove(),this.originalData=void 0,this.container=void 0,this.timebar=void 0,this.canvas=void 0,super.destroy()}}a5.defaultOptions={position:"bottom",enable:!0,timebarType:"time",className:"g6-timebar",width:450,height:60,zIndex:3,elementTypes:["node"],padding:10,mode:"modify",getTime:t=>s3t(t,o3t,void 0),loop:!1};const e0e=t=>{const{nodes:e=[],edges:n=[],combos:r=[]}=t;return{nodes:[...e],edges:[...n],combos:[...r]}},t0e=(t,e)=>{if(Ln(e))return t===e;const[n,r]=e;return t>=n&&t<=r},s3t=(t,e,n)=>{var r;for(let i=0;i<e.length;i++){const a=e[i],o=(r=t.data)===null||r===void 0?void 0:r[a];if(o)return o}return n};var l3t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const SBe={fill:"#1D2129",wordWrap:!0,maxLines:1,textOverflow:"ellipsis",textBaseline:"top",textAlign:"start",x:0},c3t=Object.assign(Object.assign({},SBe),{fillOpacity:.9,fontSize:16,fontWeight:"bold"}),u3t=Object.assign(Object.assign({},SBe),{fillOpacity:.65,fontSize:12,fontWeight:"normal"}),f3t={align:"left",spacing:8,size:44,padding:[16,24,0,24]},TG="title",n0e="subtitle";class h3t extends tu{get padding(){return Qp(this.options.padding)}constructor(e,n){const r=Object.assign({},f3t,n);super(e,r),this.onRender=()=>{const i=this.updateCanvas();this.renderTitle(i)},this.bindEvents()}bindEvents(){const{graph:e}=this.context;e.on(jn.AFTER_RENDER,this.onRender),e.on(jn.AFTER_ANIMATE,this.onRender)}unbindEvents(){const{graph:e}=this.context;e.off(jn.AFTER_RENDER,this.onRender),e.off(jn.AFTER_ANIMATE,this.onRender)}destroy(){var e,n;this.unbindEvents(),(e=this.canvas)===null||e===void 0||e.destroy(),(n=this.container)===null||n===void 0||n.remove(),super.destroy()}updateCanvas(){const{size:e,className:n,align:r}=this.options,[i]=this.context.canvas.getSize(),[a=0,,o=0]=this.padding,s=e+a+o;if(this.canvas){const{width:l,height:c}=this.canvas.getConfig();(i!==l||s!==c)&&this.canvas.resize(i,s)}else{const l={left:"left-top",center:"top",right:"right-top"},[c,u]=t5({width:i,height:s,placement:l[r]||l.left,className:"title-canvas",graphCanvas:this.context.canvas});n&&c.classList.add(n),this.container=c,this.canvas=u}return this.canvas}renderTitle(e){const n=new d3t({options:this.options,ctx:this.context});e.removeChildren(),n.getTitle().forEach(r=>{r&&e.appendChild(r)})}}class d3t{get padding(){return Qp(this.options.padding)}constructor(e){const{options:n,ctx:r}=e;this.options=n,this.context=r}getTitle(){const e=this.options,n=TG,r=e[n],i=n0e,a=e[i],{spacing:o=44,padding:s,align:l}=e,c=l3t(e,[n+"",i+"","spacing","padding","align"]),u=r,f=a,h=Pl(c,TG),d=Pl(c,n0e),[p]=this.context.graph.getSize(),[g=0,v=0,,y=0]=this.padding,_=p,E=_-y-v;let x=null,T=y,S="left";switch(l){case"left":T=y,S="left";break;case"center":T=_/2,S="center";break;case"right":T=_-v,S="right";break;default:T=y,S="left"}const w=new qm({className:TG,style:Object.assign(Object.assign(Object.assign(Object.assign({},c3t),{wordWrapWidth:E-5,x:T,y:g,textAlign:S}),h),{text:u})}),C=w.getBBox();return f&&(x=new qm({className:"subTitle",style:Object.assign(Object.assign(Object.assign(Object.assign({},u3t),{wordWrapWidth:E-5,x:T,y:C.height+o+g,textAlign:S}),d),{text:f})})),[w,x]}}function p3t(t){const e={top:"unset",right:"unset",bottom:"unset",left:"unset"};return t.split("-").forEach(r=>{e[r]="8px"}),e.flexDirection=t.startsWith("top")||t.startsWith("bottom")?"row":"column",e}const g3t=`
  .g6-toolbar {
    position: absolute;
    z-index: 100;
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);
    opacity: 0.65;
  }
  .g6-toolbar .g6-toolbar-item {
    display: inline-block;
    width: 16px;
    height: 16px;
    padding: 4px;
    cursor: pointer;
    box-sizing: content-box;
  }

  .g6-toolbar .g6-toolbar-item:hover {
    background-color: #f0f0f0;
  }

  .g6-toolbar .g6-toolbar-item svg {
    display: inline-block;
    width: 100%;
    height: 100%;
    pointer-events: none;
  }
`,v3t=`
  <svg>
    <symbol id="zoom-in" viewBox="64 64 896 896">
      <path d="M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="zoom-out" viewBox="64 64 896 896">
      <path d="M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"></path>
    </symbol>
    <symbol id="edit" viewBox="64 64 896 896">
      <path d="M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"></path>
    </symbol>
    <symbol id="delete" viewBox="64 64 896 896">
      <path d="M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"></path>
    </symbol>
    <symbol id="redo" viewBox="64 64 896 896">
      <path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"></path>
    </symbol>
    <symbol id="undo" viewBox="64 64 896 896">
      <path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z"></path>
    </symbol>
    <symbol id="export" viewBox="64 64 896 896">
      <path d="M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"></path>
    </symbol>
    <symbol id="auto-fit" viewBox="64 64 896 896">
      <path d="M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"></path>
      <path d="M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z"></path>
    </symbol>
    <symbol id="reset" viewBox="64 64 896 896">
      <path d="M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"></path>
    </symbol>
    <symbol id="exit-fullscreen" viewBox="0 0 1024 1024">
      <path d="M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z"  ></path></symbol>
    <symbol id="request-fullscreen" viewBox="0 0 1024 1024">
      <path d="M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z"  ></path></symbol>
  </svg>
`;var r0e=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class o5 extends tu{constructor(e,n){super(e,Object.assign({},o5.defaultOptions,n)),this.$element=eO("toolbar",!1),this.onToolbarItemClick=i=>{const{onClick:a}=this.options;if(i.target instanceof Element&&i.target.className.includes("g6-toolbar-item")){const o=i.target.getAttribute("value");a?.(o,i.target)}};const r=this.context.canvas.getContainer();this.$element.style.display="flex",r.appendChild(this.$element),kq("g6-toolbar-css","style",{},g3t,document.head),kq("g6-toolbar-svgicon","div",{display:"none"},v3t),this.$element.addEventListener("click",this.onToolbarItemClick),this.update(n)}update(e){const n=Object.create(null,{update:{get:()=>super.update}});return r0e(this,void 0,void 0,function*(){n.update.call(this,e);const{className:r,position:i,style:a}=this.options;this.$element.className=`g6-toolbar ${r||""}`,Object.assign(this.$element.style,a,p3t(i)),this.$element.innerHTML=yield this.getDOMContent()})}destroy(){this.$element.removeEventListener("click",this.onToolbarItemClick),this.$element.remove(),super.destroy()}getDOMContent(){return r0e(this,void 0,void 0,function*(){return(yield this.options.getItems()).map(n=>{var r;return`
          <div class="g6-toolbar-item" value="${n.value}" title="${(r=n.title)!==null&&r!==void 0?r:""}">
            <svg aria-hidden="true" focusable="false">
              <use xlink:href="#${n.id}"></use>
            </svg>
          </div>`}).join("")})}}o5.defaultOptions={position:"top-left"};var i0e=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class s5 extends tu{constructor(e,n){super(e,Object.assign({},s5.defaultOptions,n)),this.currentTarget=null,this.tooltipElement=null,this.container=null,this.isEnable=(r,i)=>{const{enable:a}=this.options;return typeof a=="function"?a(r,i):a},this.onClick=r=>{const{target:{id:i}}=r;this.currentTarget===i?this.hide(r):this.show(r)},this.onPointerMove=r=>{const{target:i}=r;!this.currentTarget||i.id===this.currentTarget||this.show(r)},this.onPointerLeave=r=>{this.hide(r)},this.onCanvasMove=r=>{this.hide(r)},this.onPointerOver=r=>{this.show(r)},this.showById=r=>i0e(this,void 0,void 0,function*(){const i={target:{id:r}};yield this.show(i)}),this.getElementData=(r,i)=>{const{model:a}=this.context;switch(i){case"node":return a.getNodeData([r]);case"edge":return a.getEdgeData([r]);case"combo":return a.getComboData([r]);default:return[]}},this.show=r=>i0e(this,void 0,void 0,function*(){var i,a;const{client:o,target:{id:s}}=r;if(eN(r.target))return;const l=this.context.graph.getElementType(s),{getContent:c,title:u}=this.options,f=this.getElementData(s,l);if(!this.tooltipElement||!this.isEnable(r,f))return;let h={};if(c){if(h.content=yield c(r,f),!h.content)return}else{const g=this.context.graph.getElementRenderStyle(s),v=l==="node"?g.fill:g.stroke;h={title:u||l,data:f.map(y=>({name:"ID",value:y.id||`${y.source} -> ${y.target}`,color:v}))}}this.currentTarget=s;let d,p;if(o)d=o.x,p=o.y;else{const g=Wr(f,"0.style",{x:0,y:0});d=g.x,p=g.y}(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!0),this.tooltipElement.update(Object.assign(Object.assign(Object.assign({},this.tooltipStyleProps),{x:d,y:p,style:{".tooltip":{visibility:"visible"}}}),h))}),this.hide=r=>{var i,a,o,s,l;if(!r){(a=(i=this.options).onOpenChange)===null||a===void 0||a.call(i,!1),(o=this.tooltipElement)===null||o===void 0||o.hide(),this.currentTarget=null;return}if(!this.tooltipElement||!this.currentTarget)return;const{client:{x:c,y:u}}=r;(l=(s=this.options).onOpenChange)===null||l===void 0||l.call(s,!1),this.tooltipElement.hide(c,u),this.currentTarget=null},this.initTooltip=()=>{var r;const i=new WRe({className:"tooltip",style:this.tooltipStyleProps});return(r=this.container)===null||r===void 0||r.appendChild(i.HTMLTooltipElement),i},this.render(),this.bindEvents()}getEvents(){return this.options.trigger==="click"?{"node:click":this.onClick,"edge:click":this.onClick,"combo:click":this.onClick,"canvas:click":this.onPointerLeave,contextmenu:this.onPointerLeave,drag:this.onPointerLeave}:{"node:pointerover":this.onPointerOver,"node:pointermove":this.onPointerMove,"canvas:pointermove":this.onCanvasMove,"edge:pointerover":this.onPointerOver,"edge:pointermove":this.onPointerMove,"combo:pointerover":this.onPointerOver,"combo:pointermove":this.onPointerMove,contextmenu:this.onPointerLeave,"node:drag":this.onPointerLeave}}update(e){var n;this.unbindEvents(),super.update(e),this.tooltipElement&&((n=this.container)===null||n===void 0||n.removeChild(this.tooltipElement.HTMLTooltipElement)),this.tooltipElement=this.initTooltip(),this.bindEvents()}render(){const{canvas:e}=this.context,n=e.getContainer();n&&(this.container=n,this.tooltipElement=this.initTooltip())}unbindEvents(){const{graph:e}=this.context,n=this.getEvents();Object.keys(n).forEach(r=>{e.off(r,n[r])})}bindEvents(){const{graph:e}=this.context,n=this.getEvents();Object.keys(n).forEach(r=>{e.on(r,n[r])})}get tooltipStyleProps(){const{canvas:e}=this.context,{center:n}=e.getBounds(),r=e.getContainer(),{top:i,left:a}=r.getBoundingClientRect(),{style:o,position:s,enterable:l,container:c={x:-a,y:-i},title:u,offset:f}=this.options,[h,d]=n,[p,g]=e.getSize();return{x:h,y:d,container:c,title:u,bounding:{x:0,y:0,width:p,height:g},position:s,enterable:l,offset:f,style:o}}destroy(){var e;this.unbindEvents(),this.tooltipElement&&((e=this.container)===null||e===void 0||e.removeChild(this.tooltipElement.HTMLTooltipElement)),super.destroy()}}s5.defaultOptions={trigger:"hover",position:"top-right",enterable:!1,enable:!0,offset:[10,10],style:{".tooltip":{visibility:"hidden"}}};var TBe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};let TT;function ABe(t,e){return TT||(TT=document.createElement("canvas")),TT.width=t,TT.height=e,TT.getContext("2d").clearRect(0,0,t,e),TT}function m3t(t,e,n,r){return TBe(this,void 0,void 0,function*(){const i=ABe(t,e),a=i.getContext("2d"),{rotate:o,opacity:s,textFill:l,textFontSize:c,textFontFamily:u,textFontVariant:f,textFontWeight:h,textAlign:d,textBaseline:p}=r;return a.textAlign=d,a.textBaseline=p,a.translate(t/2,e/2),a.font=`${c}px ${u} ${f} ${h}`,o&&a.rotate(o),s&&(a.globalAlpha=s),l&&(a.fillStyle=l,a.fillText(`${n}`,0,0)),i.toDataURL()})}function y3t(t,e,n,r){return TBe(this,void 0,void 0,function*(){const i=ABe(t,e),a=i.getContext("2d"),{rotate:o,opacity:s}=r;o&&a.rotate(o),s&&(a.globalAlpha=s);const l=new Image;return l.crossOrigin="anonymous",l.src=n,new Promise(c=>{l.onload=function(){const u=t>l.width?(t-l.width)/2:0,f=e>l.height?(e-l.height)/2:0;a.drawImage(l,0,0,l.width,l.height,u,f,t-u*2,e-f*2),c(i.toDataURL())}})})}var _3t=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},b3t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class l5 extends tu{constructor(e,n){super(e,Object.assign({},l5.defaultOptions,n)),this.$element=eO("watermark"),this.context.canvas.getContainer().appendChild(this.$element),this.update(n)}update(e){const n=Object.create(null,{update:{get:()=>super.update}});return _3t(this,void 0,void 0,function*(){n.update.call(this,e);const r=this.options,{width:i,height:a,text:o,imageURL:s}=r,l=b3t(r,["width","height","text","imageURL"]);Object.keys(l).forEach(u=>{u.startsWith("background")&&(this.$element.style[u]=e[u])});const c=s?yield y3t(i,a,s,l):yield m3t(i,a,o,l);this.$element.style.backgroundImage=`url(${c})`})}destroy(){super.destroy(),this.$element.remove()}}l5.defaultOptions={width:200,height:100,opacity:.2,rotate:Math.PI/12,text:"",textFill:"#000",textFontSize:16,textAlign:"center",textBaseline:"middle",backgroundRepeat:"repeat"};const E3t=["#7E92B5","#F4664A","#FFBE3A"],x3t={type:"group",color:["#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]},S3t={type:"group",color:["#99ADD1","#1783FF","#00C9C9","#F08F56","#D580FF","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};function wBe(t){const{bgColor:e,textColor:n,nodeColor:r,nodeColorDisabled:i,nodeStroke:a,nodeHaloStrokeOpacityActive:o=.15,nodeHaloStrokeOpacitySelected:s=.25,nodeOpacityDisabled:l=.06,nodeIconOpacityInactive:c=.85,nodeOpacityInactive:u=.25,nodeBadgePalette:f=E3t,nodePaletteOptions:h=x3t,edgeColor:d,edgeColorDisabled:p,edgePaletteOptions:g=S3t,comboColor:v,comboColorDisabled:y,comboStroke:_,comboStrokeDisabled:E,edgeColorInactive:x}=t;return{background:e,node:{palette:h,style:{donutOpacity:1,badgeBackgroundOpacity:1,badgeFill:"#fff",badgeFontSize:8,badgePadding:[0,4],badgePalette:f,fill:r,fillOpacity:1,halo:!1,iconFill:"#fff",iconOpacity:1,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelFill:n,labelFillOpacity:.85,labelLineHeight:16,labelPadding:[0,2],labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelOffsetY:2,lineWidth:0,portFill:r,portLineWidth:1,portStroke:a,portStrokeOpacity:.65,size:32,stroke:a,strokeOpacity:1,zIndex:2},state:{selected:{halo:!0,haloLineWidth:24,haloStrokeOpacity:s,labelFontSize:12,labelFontWeight:"bold",lineWidth:4,stroke:a},active:{halo:!0,haloLineWidth:12,haloStrokeOpacity:o},highlight:{labelFontWeight:"bold",lineWidth:4,stroke:a,strokeOpacity:.85},inactive:{badgeBackgroundOpacity:u,donutOpacity:u,fillOpacity:u,iconOpacity:c,labelFill:n,labelFillOpacity:u,strokeOpacity:u},disabled:{badgeBackgroundOpacity:.25,donutOpacity:l,fill:i,fillOpacity:l,iconFill:i,iconOpacity:.25,labelFill:n,labelFillOpacity:.25,strokeOpacity:l}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"node-expand",collapse:"node-collapse",update:[{fields:["x","y","fill","stroke"]}],translate:[{fields:["x","y"]}]}},edge:{palette:g,style:{badgeBackgroundFill:d,badgeFill:"#fff",badgeFontSize:8,badgeOffsetX:10,badgeBackgroundOpacity:1,fillOpacity:1,halo:!1,haloLineWidth:12,haloStrokeOpacity:1,increasedLineWidthForHitTesting:2,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[4,4,4,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,labelPlacement:"center",labelTextBaseline:"middle",lineWidth:1,stroke:d,strokeOpacity:1,zIndex:1},state:{selected:{halo:!0,haloStrokeOpacity:.25,labelFontSize:14,labelFontWeight:"bold",lineWidth:3},active:{halo:!0,haloStrokeOpacity:.15},highlight:{labelFontWeight:"bold",lineWidth:3},inactive:{stroke:x,fillOpacity:.08,labelOpacity:.25,strokeOpacity:.08,badgeBackgroundOpacity:.25},disabled:{stroke:p,fillOpacity:.45,strokeOpacity:.45,labelOpacity:.25,badgeBackgroundOpacity:.45}},animation:{enter:"fade",exit:"fade",expand:"path-in",collapse:"path-out",show:"fade",hide:"fade",update:[{fields:["sourceNode","targetNode"]},{fields:["stroke"],shape:"key"}],translate:[{fields:["sourceNode","targetNode"]}]}},combo:{style:{collapsedMarkerFill:e,collapsedMarkerFontSize:12,collapsedMarkerFillOpacity:1,collapsedSize:32,collapsedFillOpacity:1,fill:v,halo:!1,haloLineWidth:12,haloStroke:_,haloStrokeOpacity:.25,labelBackground:!1,labelBackgroundFill:e,labelBackgroundLineWidth:0,labelBackgroundOpacity:.75,labelBackgroundPadding:[2,4,2,4],labelFill:n,labelFontSize:12,labelFontWeight:400,labelOpacity:1,lineDash:0,lineWidth:1,fillOpacity:.04,strokeOpacity:1,padding:10,stroke:_},state:{selected:{halo:!0,labelFontSize:14,labelFontWeight:700,lineWidth:4},active:{halo:!0},highlight:{labelFontWeight:700,lineWidth:4},inactive:{fillOpacity:.65,labelOpacity:.25,strokeOpacity:.65},disabled:{fill:y,fillOpacity:.25,labelOpacity:.25,stroke:E,strokeOpacity:.25}},animation:{enter:"fade",exit:"fade",show:"fade",hide:"fade",expand:"combo-expand",collapse:"combo-collapse",update:[{fields:["x","y"]},{fields:["fill","stroke","lineWidth"],shape:"key"}],translate:[{fields:["x","y"]}]}}}}const T3t={type:"group",color:["#637088","#0F55A6","#008383","#9C5D38","#8B53A6","#4E40A6","#8F6608","#3E801D","#A65383","#175E75","#0F8248"]},A3t={bgColor:"#000000",comboColor:"#fdfdfd",comboColorDisabled:"#d0e4ff",comboStroke:"#99add1",comboStrokeDisabled:"#969696",edgeColor:"#637088",edgeColorDisabled:"#637088",edgeColorInactive:"#D0E4FF",edgePaletteOptions:T3t,nodeColor:"#1783ff",nodeColorDisabled:"#D0E4FF",nodeHaloStrokeOpacityActive:.25,nodeHaloStrokeOpacitySelected:.45,nodeIconOpacityInactive:.45,nodeOpacityDisabled:.25,nodeOpacityInactive:.45,nodeStroke:"#d0e4ff",textColor:"#ffffff"},w3t=wBe(A3t),O3t={bgColor:"#ffffff",comboColor:"#99ADD1",comboColorDisabled:"#f0f0f0",comboStroke:"#99add1",comboStrokeDisabled:"#d9d9d9",edgeColor:"#99add1",edgeColorDisabled:"#d9d9d9",edgeColorInactive:"#1B324F",nodeColor:"#1783ff",nodeColorDisabled:"#1B324F",nodeHaloStrokeOpacityActive:.15,nodeHaloStrokeOpacitySelected:.25,nodeIconOpacityInactive:.85,nodeOpacityDisabled:.06,nodeOpacityInactive:.25,nodeStroke:"#000000",textColor:"#000000"},C3t=wBe(O3t);class Bd extends gte{beforeDraw(e,n){return e}afterLayout(e,n){}}class R3t extends Bd{beforeDraw(e){const{model:n}=this.context,r=e.add.combos,i=a=>{const o=[];return a.forEach((s,l)=>{const u=n.getAncestorsData(l,"combo").map(f=>pt(f)).reverse();o.push([l,s,u.length])}),new Map(o.sort(([,,s],[,,l])=>l-s).map(([s,l])=>[s,l]))};return e.add.combos=i(r),e.update.combos=i(e.update.combos),e}}function Od(t,e,n,r,i){const a=pt(r),o=`${n}s`,s=i?r:t.add[o].get(a)||t.update[o].get(a)||t.remove[o].get(a)||r;Object.entries(t).forEach(([l,c])=>{e===l?c[o].set(a,s):c[o].delete(a)})}function Tk(t,e){return Object.keys(t).every(n=>t[n]===e[n])}class M3t extends Bd{beforeDraw(e,n){if(n.stage==="visibility"||!this.context.model.model.hasTreeStructure(es))return e;const{model:r}=this.context,{add:i,update:a}=e,o=[...e.update.combos.entries(),...e.add.combos.entries()];for(;o.length;){const[s,l]=o.pop();if(Lh(l)){const c=r.getDescendantsData(s),u=c.map(pt),{internal:f,external:h}=Tq(u,d=>r.getRelatedEdgesData(d));c.forEach(d=>{const p=pt(d),g=o.findIndex(([y])=>y===p);g!==-1&&o.splice(g,1);const v=r.getElementType(p);Od(e,"remove",v,d)}),f.forEach(d=>Od(e,"remove","edge",d)),h.forEach(d=>{var p;const g=pt(d);((p=this.context.element)===null||p===void 0?void 0:p.getElement(g))?a.edges.set(g,d):i.edges.set(g,d)})}else{const c=r.getChildrenData(s),u=c.map(pt),{edges:f}=Tq(u,h=>r.getRelatedEdgesData(h));[...c,...f].forEach(h=>{var d;const p=pt(h),g=r.getElementType(p);((d=this.context.element)===null||d===void 0?void 0:d.getElement(p))?Od(e,"update",g,h):Od(e,"add",g,h),g==="combo"&&o.push([p,h])})}}return e}}const a0e=(t,e,n,r)=>{const i=`${n}s`,a=pt(r);!t.add[i].has(a)&&!t.update[i].has(a)&&t[e][i].set(pt(r),r)};class P3t extends Bd{getElement(e){return this.context.element.getElement(e)}handleExpand(e,n){if(a0e(n,"add","node",e),Lh(e))return;const r=pt(e);a0e(n,"add","node",e),this.context.model.getRelatedEdgesData(r).forEach(o=>{Od(n,"add","edge",o)}),this.context.model.getChildrenData(r).forEach(o=>{this.handleExpand(o,n)})}beforeDraw(e){const{graph:n,model:r}=this.context;if(!r.model.hasTreeStructure(xd))return e;const{add:{nodes:i,edges:a},update:{nodes:o}}=e,s=new Map,l=new Map;i.forEach((u,f)=>{Lh(u)&&s.set(f,u)}),a.forEach(u=>{if(n.getElementType(u.source)!=="node")return;const f=n.getNodeData(u.source);Lh(f)&&s.set(u.source,f)}),o.forEach((u,f)=>{const h=this.getElement(f);if(!h)return;const d=h.attributes.collapsed;Lh(u)?d||s.set(f,u):d&&l.set(f,u)});const c=new Set;return s.forEach((u,f)=>{r.getDescendantsData(f).forEach(d=>{const p=pt(d);if(c.has(p))return;Od(e,"remove","node",d),r.getRelatedEdgesData(p).forEach(v=>{Od(e,"remove","edge",v)}),c.add(p)})}),l.forEach((u,f)=>{if(r.getAncestorsData(f,xd).some(Lh)){Od(e,"remove","node",u);return}this.handleExpand(u,e)}),e}}function OBe(t,e,n){yq[t][e]&&e0.warn(`The extension ${e} of ${t} has been registered before, and will be overridden.`),Object.assign(yq[t],{[e]:n})}var o0e=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},s0e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const l0e=["main"],c0e=["background","main","label","transient"];function N3t(t){return t.main}class u0e{getConfig(){return this.config}getLayer(e="main"){return this.extends.layers[e]||N3t(this.getLayers())}getLayers(){return this.extends.layers}getRenderer(e){return this.extends.renderers[e]}getCamera(e="main"){return this.getLayer(e).getCamera()}getRoot(e="main"){return this.getLayer(e).getRoot()}getContextService(e="main"){return this.getLayer(e).getContextService()}setCursor(e){this.config.cursor=e,this.getLayer().setCursor(e)}get document(){return this.getLayer().document}get context(){return this.getLayer().context}constructor(e){this.config={enableMultiLayer:!0},Object.assign(this.config,e);const n=this.config,{renderer:r,background:i,cursor:a,enableMultiLayer:o}=n,s=s0e(n,["renderer","background","cursor","enableMultiLayer"]),l=o?c0e:l0e,c=f0e(r,l),u=Object.fromEntries(l.map(f=>{const h=new aX(Object.assign(Object.assign({},s),{supportsMutipleCanvasesInOneContainer:o,renderer:c[f],background:o?f==="background"?i:void 0:i}));return[f,h]}));h0e(u),this.extends={config:this.config,renderer:r,renderers:c,layers:u}}get ready(){return Promise.all(Object.entries(this.getLayers()).map(([,e])=>e.ready))}resize(e,n){Object.assign(this.extends.config,{width:e,height:n}),Object.values(this.getLayers()).forEach(r=>{const i=r.getCamera(),a=i.getPosition(),o=i.getFocalPoint();r.resize(e,n),i.setPosition(a),i.setFocalPoint(o)})}getBounds(e){return YP(Object.values(this.getLayers()).map(n=>e?n.getRoot().childNodes.find(i=>i.classList.includes(e)):n.getRoot()).filter(n=>n?.childNodes.length>0).map(n=>n.getBounds()))}getContainer(){const e=this.extends.config.container;return typeof e=="string"?document.getElementById(e):e}getSize(){return[this.extends.config.width||0,this.extends.config.height||0]}appendChild(e,n){var r;const i=((r=e.style)===null||r===void 0?void 0:r.$layer)||"main";return this.getLayer(i).appendChild(e,n)}setRenderer(e){if(e===this.extends.renderer)return;const n=f0e(e,this.config.enableMultiLayer?c0e:l0e);this.extends.renderers=n,Object.entries(n).forEach(([r,i])=>this.getLayer(r).setRenderer(i)),h0e(this.getLayers())}getCanvasByViewport(e){return Ru(this.getLayer().viewport2Canvas($g(e)))}getViewportByCanvas(e){return Ru(this.getLayer().canvas2Viewport($g(e)))}getViewportByClient(e){return Ru(this.getLayer().client2Viewport($g(e)))}getClientByViewport(e){return Ru(this.getLayer().viewport2Client($g(e)))}getClientByCanvas(e){return this.getClientByViewport(this.getViewportByCanvas(e))}getCanvasByClient(e){const n=this.getLayer(),r=n.client2Viewport($g(e));return Ru(n.viewport2Canvas(r))}toDataURL(){return o0e(this,arguments,void 0,function*(e={}){const n=globalThis.devicePixelRatio||1,{mode:r="viewport"}=e,i=s0e(e,["mode"]);let[a,o,s,l]=[0,0,0,0];if(r==="viewport")[s,l]=this.getSize();else if(r==="overall"){const y=this.getBounds(),_=cb(y);[a,o]=y.min,[s,l]=_}const c=SY('<div id="virtual-image"></div>'),u=new aX({width:s,height:l,renderer:new xx,devicePixelRatio:n,container:c,background:this.extends.config.background});yield u.ready,u.appendChild(this.getLayer("background").getRoot().cloneNode(!0)),u.appendChild(this.getRoot().cloneNode(!0));const f=this.getLayer("label").getRoot().cloneNode(!0),h=u.viewport2Canvas({x:0,y:0}),d=this.getCanvasByViewport([0,0]);f.translate([d[0]-h.x,d[1]-h.y]),f.scale(1/this.getCamera().getZoom()),u.appendChild(f),u.appendChild(this.getLayer("transient").getRoot().cloneNode(!0));const p=this.getCamera(),g=u.getCamera();if(r==="viewport")g.setZoom(p.getZoom()),g.setPosition(p.getPosition()),g.setFocalPoint(p.getFocalPoint());else if(r==="overall"){const[y,_,E]=g.getPosition(),[x,T,S]=g.getFocalPoint();g.setPosition([y+a,_+o,E]),g.setFocalPoint([x+a,T+o,S])}const v=u.getContextService();return new Promise(y=>{u.addEventListener(Ed.RERENDER,()=>o0e(this,void 0,void 0,function*(){yield new Promise(E=>setTimeout(E,300));const _=yield v.toDataURL(i);y(_)}))})})}destroy(){Object.values(this.getLayers()).forEach(e=>{e.getCamera().cancelLandmarkAnimation(),e.destroy()})}}function f0e(t,e){return Object.fromEntries(e.map(n=>{const r=t?.(n)||new xx;return r instanceof xx&&r.setConfig({enableDirtyRectangleRendering:!1}),n==="main"?r.registerPlugin(new bee({isDocumentDraggable:!0,isDocumentDroppable:!0,dragstartDistanceThreshold:10,dragstartTimeThreshold:100})):r.unregisterPlugin(r.getPlugin("dom-interaction")),[n,r]}))}function h0e(t){Object.entries(t).forEach(([e,n])=>{const r=n.getContextService().getDomElement();r?.style&&(r.style.gridArea="1 / 1 / 2 / 2",r.style.outline="none",r.tabIndex=1,e!=="main"&&(r.style.pointerEvents="none")),r?.parentElement&&(r.parentElement.style.display="grid",r.parentElement.style.isolation="isolate")})}const AT=t=>t?parseInt(t):0;function I3t(t){const e=getComputedStyle(t),n=t.clientWidth||AT(e.width),r=t.clientHeight||AT(e.height),i=AT(e.paddingLeft)+AT(e.paddingRight),a=AT(e.paddingTop)+AT(e.paddingBottom);return[n-i,r-a]}function d0e(t){if(!t)return[0,0];let e=640,n=480;const[r,i]=I3t(t);e=r||e,n=i||n;const a=1,o=1;return[Math.max(Ln(e)?e:a,a),Math.max(Ln(n)?n:o,o)]}class c5{constructor(e){this.type=e}}class fc extends c5{constructor(e,n){super(e),this.data=n}}class Sp extends c5{constructor(e,n,r,i){super(e),this.animationType=n,this.animation=r,this.data=i}}class wT extends c5{constructor(e,n,r){super(e),this.elementType=n,this.data=r}}class aL extends c5{constructor(e,n){super(e),this.data=n}}function Mc(t,e){t.emit(e.type,e)}function L3t(t){if(!t)return null;if(t instanceof GCe)return{type:"canvas",element:t};let e=t;for(;e;){if(JP(e))return{type:"node",element:e};if(xke(e))return{type:"edge",element:e};if(Tte(e))return{type:"combo",element:e};e=e.parentElement}return null}function p0e(t){var e;return((e=t?.style)===null||e===void 0?void 0:e.zIndex)||0}const iR="cachedStyle",ine=t=>`__${t}__`;function k3t(t,e){const n=Array.isArray(e)?e:[e];Wr(t,iR)||H_(t,iR,{}),n.forEach(r=>{H_(Wr(t,iR),ine(r),t.attributes[r])})}function g0e(t,e){return Wr(t,[iR,ine(e)])}function D3t(t,e){return ine(e)in(Wr(t,iR)||{})}class B3t{constructor(e){this.tasks=[],this.animations=new Set,this.context=e}getTasks(){const e=[...this.tasks];return this.tasks=[],e}add(e,n){this.tasks.push([e,n])}animate(e,n,r){var i,a,o;(i=n?.before)===null||i===void 0||i.call(n);const s=this.getTasks().map(([c,u])=>{var f,h,d;const{element:p,elementType:g,stage:v}=c,y=PSt(this.context.options,g,v,e);(f=u?.before)===null||f===void 0||f.call(u);const _=y.length?ISt(p,this.inferStyle(c,r),y):null;return _?((h=u?.beforeAnimate)===null||h===void 0||h.call(u,_),_.finished.then(()=>{var E,x;(E=u?.afterAnimate)===null||E===void 0||E.call(u,_),(x=u?.after)===null||x===void 0||x.call(u),this.animations.delete(_)})):(d=u?.after)===null||d===void 0||d.call(u),_}).filter(Boolean);s.forEach(c=>this.animations.add(c));const l=hte(s);return l?((a=n?.beforeAnimate)===null||a===void 0||a.call(n,l),l.finished.then(()=>{var c,u;(c=n?.afterAnimate)===null||c===void 0||c.call(n,l),(u=n?.after)===null||u===void 0||u.call(n),this.release()})):(o=n?.after)===null||o===void 0||o.call(n),l}inferStyle(e,n){var r,i;const{element:a,elementType:o,stage:s,originalStyle:l,updatedStyle:c={}}=e;e.modifiedStyle||(e.modifiedStyle=Object.assign(Object.assign({},l),c));const{modifiedStyle:u}=e,f={},h={};if(s==="enter")Object.assign(f,{opacity:0});else if(s==="exit")Object.assign(h,{opacity:0});else if(s==="show")Object.assign(f,{opacity:0}),Object.assign(h,{opacity:(r=g0e(a,"opacity"))!==null&&r!==void 0?r:PM("opacity")});else if(s==="hide")Object.assign(f,{opacity:(i=g0e(a,"opacity"))!==null&&i!==void 0?i:PM("opacity")}),Object.assign(h,{opacity:0});else if(s==="collapse"){const{collapse:d}=n||{},{target:p,descendants:g,position:v}=d;if(o==="node"){if(g.includes(a.id)){const[y,_,E]=v;Object.assign(h,{x:y,y:_,z:E})}}else if(o==="combo"){if(a.id===p||g.includes(a.id)){const[y,_]=v;Object.assign(h,{x:y,y:_,childrenNode:l.childrenNode})}}else o==="edge"&&Object.assign(h,{sourceNode:u.sourceNode,targetNode:u.targetNode})}else if(s==="expand"){const{expand:d}=n||{},{target:p,descendants:g,position:v}=d;if(o==="node"){if(a.id===p||g.includes(a.id)){const[y,_,E]=v;Object.assign(f,{x:y,y:_,z:E})}}else if(o==="combo"){if(a.id===p||g.includes(a.id)){const[y,_,E]=v;Object.assign(f,{x:y,y:_,z:E,childrenNode:u.childrenNode})}}else o==="edge"&&Object.assign(f,{sourceNode:u.sourceNode,targetNode:u.targetNode})}return[Object.keys(f).length>0?Object.assign({},l,f):l,Object.keys(h).length>0?Object.assign({},u,h):u]}stop(){this.animations.forEach(e=>e.cancel())}clear(){this.tasks=[]}release(){var e,n;const{canvas:r}=this.context,i=(n=(e=r.document)===null||e===void 0?void 0:e.timeline)===null||n===void 0?void 0:n.animationsWithPromises;i&&(r.document.timeline.animationsWithPromises=i.filter(a=>a.playState!=="finished"))}destroy(){this.stop(),this.animations.clear(),this.tasks=[]}}class F3t{constructor(e){this.batchCount=0,this.context=e}emit(e){const{graph:n}=this.context;n.emit(e.type,e)}startBatch(e=!0){this.batchCount++,this.batchCount===1&&this.emit(new fc(jn.BATCH_START,{initiate:e}))}endBatch(){this.batchCount--,this.batchCount===0&&this.emit(new fc(jn.BATCH_END))}get isBatching(){return this.batchCount>0}destroy(){this.context=null}}class U3t extends pte{constructor(e){super(e),this.currentTarget=null,this.currentTargetType=null,this.category="behavior",this.forwardCanvasEvents=n=>{const{target:r}=n,i=L3t(r);if(!i)return;const{graph:a,canvas:o}=this.context,{type:s,element:l}=i;if("destroyed"in l&&(eN(l)||l.destroyed))return;const{type:c,detail:u,button:f}=n,h=Object.assign(Object.assign({},n),{target:l,targetType:s,originalTarget:r});c===Zt.POINTER_MOVE&&(this.currentTarget!==l&&(this.currentTarget&&a.emit(`${this.currentTargetType}:${Zt.POINTER_LEAVE}`,Object.assign(Object.assign({},h),{type:Zt.POINTER_LEAVE,target:this.currentTarget,targetType:this.currentTargetType})),l&&(Object.assign(h,{type:Zt.POINTER_ENTER}),a.emit(`${s}:${Zt.POINTER_ENTER}`,h))),this.currentTarget=l,this.currentTargetType=s),c===Zt.CLICK&&f===2||(a.emit(`${s}:${c}`,h),a.emit(c,h)),c===Zt.CLICK&&u===2&&(Object.assign(h,{type:Zt.DBLCLICK}),a.emit(`${s}:${Zt.DBLCLICK}`,h),a.emit(Zt.DBLCLICK,h)),c===Zt.POINTER_DOWN&&f===2&&(Object.assign(h,{type:Zt.CONTEXT_MENU,preventDefault:()=>{var d;(d=o.getContainer())===null||d===void 0||d.addEventListener(Zt.CONTEXT_MENU,p=>p.preventDefault(),{once:!0})}}),a.emit(`${s}:${Zt.CONTEXT_MENU}`,h),a.emit(Zt.CONTEXT_MENU,h))},this.forwardContainerEvents=n=>{this.context.graph.emit(n.type,n)},this.forwardEvents(),this.setBehaviors(this.context.options.behaviors||[])}setBehaviors(e){this.setExtensions(e)}forwardEvents(){const e=this.context.canvas.getContainer();e&&[eA.KEY_DOWN,eA.KEY_UP].forEach(r=>{e.addEventListener(r,this.forwardContainerEvents)});const n=this.context.canvas.document;n&&[Zt.CLICK,Zt.DBLCLICK,Zt.POINTER_OVER,Zt.POINTER_LEAVE,Zt.POINTER_ENTER,Zt.POINTER_MOVE,Zt.POINTER_OUT,Zt.POINTER_DOWN,Zt.POINTER_UP,Zt.CONTEXT_MENU,Zt.DRAG_START,Zt.DRAG,Zt.DRAG_END,Zt.DRAG_ENTER,Zt.DRAG_OVER,Zt.DRAG_LEAVE,Zt.DROP,Zt.WHEEL].forEach(r=>{n.addEventListener(r,this.forwardCanvasEvents)})}destroy(){const e=this.context.canvas.getContainer();e&&[eA.KEY_DOWN,eA.KEY_UP].forEach(n=>{e.removeEventListener(n,this.forwardContainerEvents)}),this.context.canvas.document.removeAllEventListeners(),super.destroy()}}var BM=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function Z1(t,e){const{data:n,style:r}=t,i=BM(t,["data","style"]),{data:a,style:o}=e,s=BM(e,["data","style"]),l=Object.assign(Object.assign({},i),s);return(n||a)&&Object.assign(l,{data:Object.assign(Object.assign({},n),a)}),(r||o)&&Object.assign(l,{style:Object.assign(Object.assign({},r),o)}),l}function AG(t){const{data:e,style:n}=t,i=BM(t,["data","style"]);return e&&(i.data=Object.assign({},e)),n&&(i.style=Object.assign({},n)),i}function OT(t={},e={}){const{states:n=[],data:r={},style:i={},children:a=[]}=t,o=BM(t,["states","data","style","children"]),{states:s=[],data:l={},style:c={},children:u=[]}=e,f=BM(e,["states","data","style","children"]),h=(p,g)=>p.length!==g.length?!1:p.every((v,y)=>v===g[y]),d=(p,g)=>{const v=Object.keys(p),y=Object.keys(g);return v.length!==y.length?!1:v.every(_=>p[_]===g[_])};return!(!d(o,f)||!h(a,u)||!h(n,s)||!d(r,l)||!d(i,c))}var j3t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function wG(t){const{id:e=pt(t),style:n,data:r}=t,i=j3t(t,["id","style","data"]),a=Object.assign(Object.assign({},t),{style:Object.assign({},n),data:Object.assign({},r)});return USt(t)?Object.assign({id:e,data:a},i):{id:e,data:a}}function Wc(t){return t.data}function z3t(t){if(t.hasTreeStructure(xd))return;t.attachTreeStructure(xd);const e=t.getAllEdges();for(const n of e){const{source:r,target:i}=n;t.setParent(i,r,xd)}}class $3t{constructor(){this.latestRemovedComboIds=new Set,this.comboIds=new Set,this.changes=[],this.batchCount=0,this.isTraceless=!1,this.enableUpdateNodeLikeHierarchy=!0,this.model=new kc}pushChange(e){if(this.isTraceless)return;const{type:n}=e;if(n===Ps.NodeUpdated||n===Ps.EdgeUpdated||n===Ps.ComboUpdated){const{value:r,original:i}=e;this.changes.push({value:AG(r),original:AG(i),type:n})}else this.changes.push({value:AG(e.value),type:n})}getChanges(){return this.changes}clearChanges(){this.changes=[]}batch(e){this.batchCount++,this.model.batch(e),this.batchCount--}isBatching(){return this.batchCount>0}silence(e){this.isTraceless=!0,e(),this.isTraceless=!1}isCombo(e){return this.comboIds.has(e)||this.latestRemovedComboIds.has(e)}getData(){return{nodes:this.getNodeData(),edges:this.getEdgeData(),combos:this.getComboData()}}getNodeData(e){return this.model.getAllNodes().reduce((n,r)=>{const i=Wc(r);return this.isCombo(pt(i))||(e===void 0||e.includes(pt(i)))&&n.push(i),n},[])}getEdgeDatum(e){return Wc(this.model.getEdge(e))}getEdgeData(e){return this.model.getAllEdges().reduce((n,r)=>{const i=Wc(r);return(e===void 0||e.includes(pt(i)))&&n.push(i),n},[])}getComboData(e){return this.model.getAllNodes().reduce((n,r)=>{const i=Wc(r);return this.isCombo(pt(i))&&(e===void 0||e.includes(pt(i)))&&n.push(i),n},[])}getRootsData(e=xd){return this.model.getRoots(e).map(Wc)}getAncestorsData(e,n){const{model:r}=this;return!r.hasNode(e)||!r.hasTreeStructure(n)?[]:r.getAncestors(e,n).map(Wc)}getDescendantsData(e){const n=this.getElementDataById(e),r=[];return rx(n,i=>{i!==n&&r.push(i)},i=>this.getChildrenData(pt(i)),"TB"),r}getParentData(e,n){const{model:r}=this;if(!n){e0.warn("The hierarchy structure key is not specified");return}if(!r.hasNode(e)||!r.hasTreeStructure(n))return;const i=r.getParent(e,n);return i?Wc(i):void 0}getChildrenData(e){const n=this.getElementType(e)==="node"?xd:es,{model:r}=this;return!r.hasNode(e)||!r.hasTreeStructure(n)?[]:r.getChildren(e,n).map(Wc)}getElementsDataByType(e){return e==="node"?this.getNodeData():e==="edge"?this.getEdgeData():e==="combo"?this.getComboData():[]}getElementDataById(e){return this.getElementType(e)==="edge"?this.getEdgeDatum(e):this.getNodeLikeDatum(e)}getNodeLikeDatum(e){const n=this.model.getNode(e);return Wc(n)}getNodeLikeData(e){return this.model.getAllNodes().reduce((n,r)=>{const i=Wc(r);return e?e.includes(pt(i))&&n.push(i):n.push(i),n},[])}getElementDataByState(e,n){return this.getElementsDataByType(e).filter(i=>{var a;return(a=i.states)===null||a===void 0?void 0:a.includes(n)})}getElementState(e){var n;return((n=this.getElementDataById(e))===null||n===void 0?void 0:n.states)||[]}hasNode(e){return this.model.hasNode(e)&&!this.isCombo(e)}hasEdge(e){return this.model.hasEdge(e)}hasCombo(e){return this.model.hasNode(e)&&this.isCombo(e)}getRelatedEdgesData(e,n="both"){return this.model.getRelatedEdges(e,n).map(Wc)}getNeighborNodesData(e){return this.model.getNeighbors(e).map(Wc)}setData(e){const{nodes:n=[],edges:r=[],combos:i=[]}=e,{nodes:a,edges:o,combos:s}=this.getData(),l=F_(a,n,f=>pt(f),OT),c=F_(o,r,f=>pt(f),OT),u=F_(s,i,f=>pt(f),OT);this.batch(()=>{const f={nodes:l.enter,edges:c.enter,combos:u.enter};this.addData(f),this.computeZIndex(f,"add",!0);const h={nodes:l.update,edges:c.update,combos:u.update};this.updateData(h),this.computeZIndex(h,"update",!0);const d={nodes:l.exit.map(pt),edges:c.exit.map(pt),combos:u.exit.map(pt)};this.removeData(d)})}addData(e){const{nodes:n,edges:r,combos:i}=e;this.batch(()=>{this.addComboData(i),this.addNodeData(n),this.addEdgeData(r)}),this.computeZIndex(e,"add")}addNodeData(e=[]){e.length&&(this.model.addNodes(e.map(n=>(this.pushChange({value:n,type:Ps.NodeAdded}),wG(n)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({nodes:e},"add"))}addEdgeData(e=[]){e.length&&(this.model.addEdges(e.map(n=>(this.pushChange({value:n,type:Ps.EdgeAdded}),wG(n)))),this.computeZIndex({edges:e},"add"))}addComboData(e=[]){if(!e.length)return;const{model:n}=this;n.hasTreeStructure(es)||n.attachTreeStructure(es),n.addNodes(e.map(r=>(this.comboIds.add(pt(r)),this.pushChange({value:r,type:Ps.ComboAdded}),wG(r)))),this.updateNodeLikeHierarchy(e),this.computeZIndex({combos:e},"add")}addChildrenData(e,n){const r=this.getNodeLikeDatum(e),i=n.map(pt);this.addNodeData(n),this.updateNodeData([{id:e,children:[...r.children||[],...i]}]),this.addEdgeData(i.map(a=>({source:e,target:a})))}computeZIndex(e,n,r=!1){!r&&this.isBatching()||this.batch(()=>{const{nodes:i=[],edges:a=[],combos:o=[]}=e;o.forEach(s=>{var l,c,u;const f=pt(s);if(n==="add"&&Ln((l=s.style)===null||l===void 0?void 0:l.zIndex)||n==="update"&&!("combo"in s))return;const h=this.getParentData(f,es),d=h?((u=(c=h.style)===null||c===void 0?void 0:c.zIndex)!==null&&u!==void 0?u:0)+1:0;this.preventUpdateNodeLikeHierarchy(()=>{this.updateComboData([{id:f,style:{zIndex:d}}])})}),i.forEach(s=>{var l,c,u;const f=pt(s);if(n==="add"&&Ln((l=s.style)===null||l===void 0?void 0:l.zIndex)||n==="update"&&!("combo"in s)&&!("children"in s))return;let h=0;const d=this.getParentData(f,es);if(d)h=(((c=d.style)===null||c===void 0?void 0:c.zIndex)||0)+1;else{const p=this.getParentData(f,xd);p&&(h=((u=p?.style)===null||u===void 0?void 0:u.zIndex)||0)}this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:f,style:{zIndex:h}}])})}),a.forEach(s=>{var l,c,u,f,h;if(Ln((l=s.style)===null||l===void 0?void 0:l.zIndex))return;let{id:d,source:p,target:g}=s;if(!d)d=pt(s);else{const _=this.getEdgeDatum(d);p=_.source,g=_.target}if(!p||!g)return;const v=((u=(c=this.getNodeLikeDatum(p))===null||c===void 0?void 0:c.style)===null||u===void 0?void 0:u.zIndex)||0,y=((h=(f=this.getNodeLikeDatum(g))===null||f===void 0?void 0:f.style)===null||h===void 0?void 0:h.zIndex)||0;this.updateEdgeData([{id:pt(s),style:{zIndex:Math.max(v,y)-1}}])})})}getFrontZIndex(e){var n;const r=this.getElementType(e),i=this.getElementDataById(e),a=this.getData();if(Object.assign(a,{[`${r}s`]:a[`${r}s`].filter(o=>pt(o)!==e)}),r==="combo"&&!Lh(i)){const o=new Set(this.getAncestorsData(e,es).map(pt));a.nodes=a.nodes.filter(s=>!o.has(pt(s))),a.combos=a.combos.filter(s=>!o.has(pt(s))),a.edges=a.edges.filter(({source:s,target:l})=>!o.has(s)&&!o.has(l))}return Math.max(((n=i.style)===null||n===void 0?void 0:n.zIndex)||0,0,...Object.values(a).flat().map(o=>{var s;return(((s=o?.style)===null||s===void 0?void 0:s.zIndex)||0)+1}))}updateNodeLikeHierarchy(e){if(!this.enableUpdateNodeLikeHierarchy)return;const{model:n}=this;e.forEach(r=>{const i=pt(r),a=HI(r);a!==void 0&&(n.hasTreeStructure(es)||n.attachTreeStructure(es),a===null&&this.refreshComboData(i),this.setParent(i,HI(r),es));const o=r.children||[];if(o.length){n.hasTreeStructure(xd)||n.attachTreeStructure(xd);const s=o.filter(l=>n.hasNode(l));s.forEach(l=>this.setParent(l,i,xd)),s.length!==o.length&&this.updateNodeData([{id:i,children:s}])}})}preventUpdateNodeLikeHierarchy(e){this.enableUpdateNodeLikeHierarchy=!1,e(),this.enableUpdateNodeLikeHierarchy=!0}updateData(e){const{nodes:n,edges:r,combos:i}=e;this.batch(()=>{this.updateNodeData(n),this.updateComboData(i),this.updateEdgeData(r)}),this.computeZIndex(e,"update")}updateNodeData(e=[]){if(!e.length)return;const{model:n}=this;this.batch(()=>{const r=[];e.forEach(i=>{const a=pt(i),o=Wc(n.getNode(a));if(OT(o,i))return;const s=Z1(o,i);this.pushChange({value:s,original:o,type:Ps.NodeUpdated}),n.mergeNodeData(a,s),r.push(s)}),this.updateNodeLikeHierarchy(r)}),this.computeZIndex({nodes:e},"update")}refreshData(){const{nodes:e,edges:n,combos:r}=this.getData();e.forEach(i=>{this.pushChange({value:i,original:i,type:Ps.NodeUpdated})}),n.forEach(i=>{this.pushChange({value:i,original:i,type:Ps.EdgeUpdated})}),r.forEach(i=>{this.pushChange({value:i,original:i,type:Ps.ComboUpdated})})}syncNodeLikeDatum(e){const{model:n}=this,r=pt(e);if(!n.hasNode(r))return;const i=Wc(n.getNode(r)),a=Z1(i,e);n.mergeNodeData(r,a)}syncEdgeDatum(e){const{model:n}=this,r=pt(e);if(!n.hasEdge(r))return;const i=Wc(n.getEdge(r)),a=Z1(i,e);n.mergeEdgeData(r,a)}updateEdgeData(e=[]){if(!e.length)return;const{model:n}=this;this.batch(()=>{e.forEach(r=>{const i=pt(r),a=Wc(n.getEdge(i));if(OT(a,r))return;r.source&&a.source!==r.source&&n.updateEdgeSource(i,r.source),r.target&&a.target!==r.target&&n.updateEdgeTarget(i,r.target);const o=Z1(a,r);this.pushChange({value:o,original:a,type:Ps.EdgeUpdated}),n.mergeEdgeData(i,o)})}),this.computeZIndex({edges:e},"update")}updateComboData(e=[]){if(!e.length)return;const{model:n}=this;n.batch(()=>{const r=[];e.forEach(i=>{const a=pt(i),o=Wc(n.getNode(a));if(OT(o,i))return;const s=Z1(o,i);this.pushChange({value:s,original:o,type:Ps.ComboUpdated}),n.mergeNodeData(a,s),r.push(s)}),this.updateNodeLikeHierarchy(r)}),this.computeZIndex({combos:e},"update")}setParent(e,n,r,i=!0){if(e===n)return;const a=this.getNodeLikeDatum(e),o=HI(a);if(o!==n&&r===es){const s={id:e,combo:n};this.isCombo(e)?this.syncNodeLikeDatum(s):this.syncNodeLikeDatum(s)}this.model.setParent(e,n,r),i&&r===es&&_9e([o,n]).forEach(s=>{s!==void 0&&this.refreshComboData(s)})}refreshComboData(e){const n=this.getComboData([e])[0],r=this.getAncestorsData(e,es);n&&this.pushChange({value:n,original:n,type:Ps.ComboUpdated}),r.forEach(i=>{this.pushChange({value:i,original:i,type:Ps.ComboUpdated})})}getElementPosition(e){const n=this.getElementDataById(e);return pl(n)}translateNodeLikeBy(e,n){this.isCombo(e)?this.translateComboBy(e,n):this.translateNodeBy(e,n)}translateNodeLikeTo(e,n){this.isCombo(e)?this.translateComboTo(e,n):this.translateNodeTo(e,n)}translateNodeBy(e,n){const r=this.getElementPosition(e),i=Hi(r,[...n,0].slice(0,3));this.translateNodeTo(e,i)}translateNodeTo(e,n){const[r=0,i=0,a=0]=n;this.preventUpdateNodeLikeHierarchy(()=>{this.updateNodeData([{id:e,style:{x:r,y:i,z:a}}])})}translateComboBy(e,n){const[r=0,i=0,a=0]=n;if([r,i,a].some(isNaN)||[r,i,a].every(l=>l===0))return;const o=this.getComboData([e])[0];if(!o)return;const s=new Set;rx(o,l=>{const c=pt(l);if(s.has(c))return;s.add(c);const[u,f,h]=pl(l),d=Z1(l,{style:{x:u+r,y:f+i,z:h+a}});this.pushChange({value:d,original:l,type:this.isCombo(c)?Ps.ComboUpdated:Ps.NodeUpdated}),this.model.mergeNodeData(c,d)},l=>this.getChildrenData(pt(l)),"BT")}translateComboTo(e,n){var r;if(n.some(isNaN))return;const[i=0,a=0,o=0]=n,s=(r=this.getComboData([e]))===null||r===void 0?void 0:r[0];if(!s)return;const[l,c,u]=pl(s),f=i-l,h=a-c,d=o-u;rx(s,p=>{const g=pt(p),[v,y,_]=pl(p),E=Z1(p,{style:{x:v+f,y:y+h,z:_+d}});this.pushChange({value:E,original:p,type:this.isCombo(g)?Ps.ComboUpdated:Ps.NodeUpdated}),this.model.mergeNodeData(g,E)},p=>this.getChildrenData(pt(p)),"BT")}removeData(e){const{nodes:n,edges:r,combos:i}=e;this.batch(()=>{this.removeEdgeData(r),this.removeNodeData(n),this.removeComboData(i),this.latestRemovedComboIds=new Set(i)})}removeNodeData(e=[]){e.length&&this.batch(()=>{e.forEach(n=>{this.removeEdgeData(this.getRelatedEdgesData(n).map(pt)),this.pushChange({value:this.getNodeData([n])[0],type:Ps.NodeRemoved}),this.removeNodeLikeHierarchy(n)}),this.model.removeNodes(e)})}removeEdgeData(e=[]){e.length&&(e.forEach(n=>this.pushChange({value:this.getEdgeData([n])[0],type:Ps.EdgeRemoved})),this.model.removeEdges(e))}removeComboData(e=[]){e.length&&this.batch(()=>{e.forEach(n=>{this.pushChange({value:this.getComboData([n])[0],type:Ps.ComboRemoved}),this.removeNodeLikeHierarchy(n),this.comboIds.delete(n)}),this.model.removeNodes(e)})}removeNodeLikeHierarchy(e){if(this.model.hasTreeStructure(es)){const n=HI(this.getNodeLikeDatum(e));this.setParent(e,void 0,es,!1),this.model.getChildren(e,es).forEach(r=>{const i=Wc(r),a=pt(i);this.setParent(pt(i),n,es,!1);const o=Z1(i,{id:pt(i),combo:n});this.pushChange({value:o,original:i,type:this.isCombo(a)?Ps.ComboUpdated:Ps.NodeUpdated}),this.model.mergeNodeData(pt(i),o)}),Kn(n)||this.refreshComboData(n)}}getElementType(e){if(this.model.hasNode(e))return this.isCombo(e)?"combo":"node";if(this.model.hasEdge(e))return"edge";throw new Error(uy(`Unknown element type of id: ${e}`))}destroy(){const{model:e}=this,n=e.getAllNodes(),r=e.getAllEdges();e.removeEdges(r.map(i=>i.id)),e.removeNodes(n.map(i=>i.id)),this.context={}}}var g2=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class H3t{constructor(e){this.elementMap={},this.shapeTypeMap={},this.paletteStyle={},this.defaultStyle={},this.stateStyle={},this.visibilityCache=new WeakMap,this.context=e}init(){this.initContainer()}initContainer(){if(!this.container||this.container.destroyed){const{canvas:e}=this.context;this.container=e.appendChild(new yc({className:"elements"}))}}emit(e,n){n.silence||Mc(this.context.graph,e)}forEachElementData(e){Cx.forEach(n=>{const r=this.context.model.getElementsDataByType(n);e(n,r)})}getElementType(e,n){var r;const{options:i,graph:a}=this.context,o=((r=i[e])===null||r===void 0?void 0:r.type)||n.type;return o?typeof o=="string"?o:o.call(a,n):e==="edge"?"line":"circle"}getTheme(e){return kLe(this.context.options)[e]||{}}getThemeStyle(e){return this.getTheme(e).style||{}}getThemeStateStyle(e,n){const{state:r={}}=this.getTheme(e);return Object.assign({},...n.map(i=>r[i]||{}))}computePaletteStyle(){const{options:e}=this.context;this.paletteStyle={},this.forEachElementData((n,r)=>{var i,a;const o=Object.assign({},ofe((i=this.getTheme(n))===null||i===void 0?void 0:i.palette),ofe((a=e[n])===null||a===void 0?void 0:a.palette));o?.field&&Object.assign(this.paletteStyle,OTt(r,o))})}getPaletteStyle(e,n){const r=this.paletteStyle[n];return r?e==="edge"?{stroke:r}:{fill:r}:{}}computeElementDefaultStyle(e,n){var r;const{options:i}=this.context,a=((r=i[e])===null||r===void 0?void 0:r.style)||{};"transform"in a&&Array.isArray(a.transform)&&(a.transform=[...a.transform]),this.defaultStyle[pt(n.datum)]=afe(a,n)}computeElementsDefaultStyle(e){const{graph:n}=this.context;this.forEachElementData((r,i)=>{const a=i.length;for(let o=0;o<a;o++){const s=i[o];(e===void 0||e.includes(pt(s)))&&this.computeElementDefaultStyle(r,{datum:s,graph:n})}})}getDefaultStyle(e){return this.defaultStyle[e]||{}}getElementState(e){try{const{model:n}=this.context;return n.getElementState(e)}catch{return[]}}getElementStateStyle(e,n,r){var i,a;const{options:o}=this.context,s=((a=(i=o[e])===null||i===void 0?void 0:i.state)===null||a===void 0?void 0:a[n])||{};return afe(s,r)}computeElementStatesStyle(e,n,r){this.stateStyle[pt(r.datum)]=Object.assign({},...n.map(i=>this.getElementStateStyle(e,i,r)))}computeElementsStatesStyle(e){const{graph:n}=this.context;this.forEachElementData((r,i)=>{const a=i.length;for(let o=0;o<a;o++){const s=i[o];if(e===void 0||e.includes(pt(s))){const l=this.getElementState(pt(s));this.computeElementStatesStyle(r,l,{datum:s,graph:n})}}})}getStateStyle(e){return this.stateStyle[e]||{}}computeStyle(e,n){e&&["translate","zIndex"].includes(e)||(this.computePaletteStyle(),this.computeElementsDefaultStyle(n),this.computeElementsStatesStyle(n))}getElement(e){return this.elementMap[e]}getNodes(){return this.context.model.getNodeData().map(({id:e})=>this.elementMap[e])}getEdges(){return this.context.model.getEdgeData().map(e=>this.elementMap[pt(e)])}getCombos(){return this.context.model.getComboData().map(({id:e})=>this.elementMap[e])}getElementComputedStyle(e,n){const r=pt(n),i=this.getThemeStyle(e),a=this.getPaletteStyle(e,r),o=n.style||{},s=this.getDefaultStyle(r),l=this.getThemeStateStyle(e,this.getElementState(r)),c=this.getStateStyle(r),u=Object.assign({},i,a,o,s,l,c);if(e==="combo"){const f=this.context.model.getChildrenData(r),d=!!u.collapsed?[]:f.map(pt).filter(p=>this.getElement(p));Object.assign(u,{childrenNode:d,childrenData:f})}return u}getDrawData(e){this.init();const n=this.computeChangesAndDrawData(e);if(!n)return null;const{type:r="draw",stage:i=r}=e;return this.markDestroyElement(n.drawData),this.computeStyle(i),{type:r,stage:i,data:n}}draw(e={animation:!0}){const n=this.getDrawData(e);if(!n)return;const{data:{drawData:{add:r,update:i,remove:a}}}=n;return this.destroyElements(a,e),this.createElements(r,e),this.updateElements(i,e),this.setAnimationTask(e,n)}preLayoutDraw(){return g2(this,arguments,void 0,function*(e={animation:!0}){var n,r;const i=this.getDrawData(e);if(!i)return;const{data:{drawData:a}}=i;yield(r=(n=this.context.layout)===null||n===void 0?void 0:n.preLayout)===null||r===void 0?void 0:r.call(n,a);const{add:o,update:s,remove:l}=a;return this.destroyElements(l,e),this.createElements(o,e),this.updateElements(s,e),this.setAnimationTask(e,i)})}setAnimationTask(e,n){const{animation:r,silence:i}=e,{data:{dataChanges:a,drawData:o},stage:s,type:l}=n;return this.context.animation.animate(r,i?{}:{before:()=>this.emit(new fc(jn.BEFORE_DRAW,{dataChanges:a,animation:r,stage:s,render:l==="render"}),e),beforeAnimate:c=>this.emit(new Sp(jn.BEFORE_ANIMATE,wh.DRAW,c,o),e),afterAnimate:c=>this.emit(new Sp(jn.AFTER_ANIMATE,wh.DRAW,c,o),e),after:()=>this.emit(new fc(jn.AFTER_DRAW,{dataChanges:a,animation:r,stage:s,render:l==="render",firstRender:this.context.graph.rendered===!1}),e)})}computeChangesAndDrawData(e){const{model:n}=this.context,r=n.getChanges(),i=rne(r);if(i.length===0)return null;const{NodeAdded:a=[],NodeUpdated:o=[],NodeRemoved:s=[],EdgeAdded:l=[],EdgeUpdated:c=[],EdgeRemoved:u=[],ComboAdded:f=[],ComboUpdated:h=[],ComboRemoved:d=[]}=GF(i,y=>y.type),p=y=>new Map(y.map(_=>{const E=_.value;return[pt(E),E]})),g={add:{nodes:p(a),edges:p(l),combos:p(f)},update:{nodes:p(o),edges:p(c),combos:p(h)},remove:{nodes:p(s),edges:p(u),combos:p(d)}},v=this.transformData(g,e);return n.clearChanges(),{dataChanges:r,drawData:v}}transformData(e,n){const r=this.context.transform.getTransformInstance();return Object.values(r).reduce((i,a)=>a.beforeDraw(i,n),e)}createElement(e,n,r){var i;const a=pt(n);if(this.getElement(a))return;const s=this.getElementType(e,n),l=this.getElementComputedStyle(e,n),c=Iy(e,s);if(!c)return e0.warn(`The element ${s} of ${e} is not registered.`);this.emit(new wT(jn.BEFORE_ELEMENT_CREATE,e,n),r);const u=this.container.appendChild(new c({id:a,context:this.context,style:l}));this.shapeTypeMap[a]=s,this.elementMap[a]=u;const{stage:f="enter"}=r;(i=this.context.animation)===null||i===void 0||i.add({element:u,elementType:e,stage:f,originalStyle:Object.assign({},u.attributes),updatedStyle:l},{after:()=>{var h;this.emit(new wT(jn.AFTER_ELEMENT_CREATE,e,n),r),(h=u.onCreate)===null||h===void 0||h.call(u)}})}createElements(e,n){const{nodes:r,edges:i,combos:a}=e;[["node",r],["combo",a],["edge",i]].forEach(([s,l])=>{l.forEach(c=>this.createElement(s,c,n))})}getUpdateStageStyle(e,n,r){const{stage:i="update"}=r;if(i==="translate")if(e==="node"||e==="combo"){const{style:{x:a=0,y:o=0,z:s=0}={}}=n;return{x:a,y:o,z:s}}else return{};return this.getElementComputedStyle(e,n)}updateElement(e,n,r){var i;const a=pt(n),{stage:o="update"}=r,s=this.getElement(a);if(!s)return()=>null;this.emit(new wT(jn.BEFORE_ELEMENT_UPDATE,e,n),r);const l=this.getElementType(e,n),c=this.getUpdateStageStyle(e,n,r);this.shapeTypeMap[a]!==l&&(s.destroy(),delete this.shapeTypeMap[a],delete this.elementMap[a],this.createElement(e,n,{animation:!1,silence:!0}));const u=o!=="visibility"?o:c.visibility==="hidden"?"hide":"show";u==="hide"&&delete c.visibility,(i=this.context.animation)===null||i===void 0||i.add({element:s,elementType:e,stage:u,originalStyle:Object.assign({},s.attributes),updatedStyle:c},{before:()=>{const f=this.elementMap[a];o!=="collapse"&&wq(f,c),o==="visibility"&&(D3t(f,"opacity")||k3t(f,"opacity"),this.visibilityCache.set(f,u==="show"?"visible":"hidden"),u==="show"&&Ax(f,"visible"))},after:()=>{var f;const h=this.elementMap[a];o==="collapse"&&wq(h,c),u==="hide"&&Ax(h,this.visibilityCache.get(h)),this.emit(new wT(jn.AFTER_ELEMENT_UPDATE,e,n),r),(f=h.onUpdate)===null||f===void 0||f.call(h)}})}updateElements(e,n){const{nodes:r,edges:i,combos:a}=e;[["node",r],["combo",a],["edge",i]].forEach(([s,l])=>{l.forEach(c=>this.updateElement(s,c,n))})}markDestroyElement(e){Object.values(e.remove).forEach(n=>{n.forEach(r=>{const i=pt(r),a=this.getElement(i);a&&DAt(a)})})}destroyElement(e,n,r){var i;const{stage:a="exit"}=r,o=pt(n),s=this.elementMap[o];if(!s)return()=>null;this.emit(new wT(jn.BEFORE_ELEMENT_DESTROY,e,n),r),(i=this.context.animation)===null||i===void 0||i.add({element:s,elementType:e,stage:a,originalStyle:Object.assign({},s.attributes),updatedStyle:{}},{after:()=>{var l;this.clearElement(o),s.destroy(),(l=s.onDestroy)===null||l===void 0||l.call(s),this.emit(new wT(jn.AFTER_ELEMENT_DESTROY,e,n),r)}})}destroyElements(e,n){const{nodes:r,edges:i,combos:a}=e;[["combo",a],["edge",i],["node",r]].forEach(([s,l])=>{l.forEach(c=>this.destroyElement(s,c,n))})}clearElement(e){delete this.paletteStyle[e],delete this.defaultStyle[e],delete this.stateStyle[e],delete this.elementMap[e],delete this.shapeTypeMap[e]}alignLayoutResultToElement(e,n){var r,i;const a=(r=e.nodes)===null||r===void 0?void 0:r.find(o=>pt(o)===n);if(a){const o=pl(this.context.model.getNodeLikeDatum(n)),s=pl(a),l=Wo(o,s);(i=e.nodes)===null||i===void 0||i.forEach(c=>{var u,f,h;!((u=c.style)===null||u===void 0)&&u.x&&(c.style.x+=l[0]),!((f=c.style)===null||f===void 0)&&f.y&&(c.style.y+=l[1]),!((h=c.style)===null||h===void 0)&&h.z&&(c.style.z+=l[2]||0)})}}collapseNode(e,n){return g2(this,void 0,void 0,function*(){var r;const{animation:i}=n,{model:a}=this.context,o=this.computeChangesAndDrawData({stage:"collapse",animation:i});if(!o)return;const{drawData:s}=o,{add:l,remove:c,update:u}=s;this.markDestroyElement(s);const f={animation:i,stage:"collapse",data:s};this.destroyElements(c,f),this.createElements(l,f),this.updateElements(u,f),yield(r=this.context.animation.animate(i,{beforeAnimate:h=>this.emit(new Sp(jn.BEFORE_ANIMATE,wh.COLLAPSE,h,s),f),afterAnimate:h=>this.emit(new Sp(jn.AFTER_ANIMATE,wh.COLLAPSE,h,s),f)},{collapse:{target:e,descendants:Array.from(c.nodes).map(([,h])=>pt(h)),position:pl(u.nodes.get(e))}}))===null||r===void 0?void 0:r.finished})}expandNode(e,n){return g2(this,void 0,void 0,function*(){var r;const{model:i,layout:a}=this.context,{animation:o,align:s}=n,l=pl(i.getNodeData([e])[0]),c=this.computeChangesAndDrawData({stage:"expand",animation:o});if(this.createElements(c.drawData.add,{animation:!1,stage:"expand",target:e}),this.context.animation.clear(),this.computeStyle("expand"),!c)return;const{drawData:u}=c,{update:f,add:h}=u,d={animation:o,stage:"expand",data:u};h.edges.forEach(p=>f.edges.set(pt(p),p)),h.nodes.forEach(p=>f.nodes.set(pt(p),p)),this.updateElements(f,d),yield(r=this.context.animation.animate(o,{beforeAnimate:p=>this.emit(new Sp(jn.BEFORE_ANIMATE,wh.EXPAND,p,u),d),afterAnimate:p=>this.emit(new Sp(jn.AFTER_ANIMATE,wh.EXPAND,p,u),d)},{expand:{target:e,descendants:Array.from(h.nodes).map(([,p])=>pt(p)),position:l}}))===null||r===void 0?void 0:r.finished})}collapseCombo(e,n){return g2(this,void 0,void 0,function*(){var r;const{model:i,element:a}=this.context;if(i.getAncestorsData(e,es).some(g=>Lh(g)))return;const o=a.getElement(e),s=o.getComboPosition(Object.assign(Object.assign({},o.attributes),{collapsed:!0})),l=this.computeChangesAndDrawData({stage:"collapse",animation:n});if(!l)return;const{dataChanges:c,drawData:u}=l;this.markDestroyElement(u);const{update:f,remove:h}=u,d={animation:n,stage:"collapse",data:u};this.destroyElements(h,d),this.updateElements(f,d);const p=g=>Array.from(g).map(([,v])=>pt(v));yield(r=this.context.animation.animate(n,{before:()=>this.emit(new fc(jn.BEFORE_DRAW,{dataChanges:c,animation:n}),d),beforeAnimate:g=>this.emit(new Sp(jn.BEFORE_ANIMATE,wh.COLLAPSE,g,u),d),afterAnimate:g=>this.emit(new Sp(jn.AFTER_ANIMATE,wh.COLLAPSE,g,u),d),after:()=>this.emit(new fc(jn.AFTER_DRAW,{dataChanges:c,animation:n}),d)},{collapse:{target:e,descendants:[...p(h.nodes),...p(h.combos)],position:s}}))===null||r===void 0?void 0:r.finished})}expandCombo(e,n){return g2(this,void 0,void 0,function*(){var r;const{model:i}=this.context,a=pl(i.getComboData([e])[0]);this.computeStyle("expand");const o=this.computeChangesAndDrawData({stage:"expand",animation:n});if(!o)return;const{dataChanges:s,drawData:l}=o,{add:c,update:u}=l,f={animation:n,stage:"expand",data:l,target:e};this.createElements(c,f),this.updateElements(u,f);const h=d=>Array.from(d).map(([,p])=>pt(p));yield(r=this.context.animation.animate(n,{before:()=>this.emit(new fc(jn.BEFORE_DRAW,{dataChanges:s,animation:n}),f),beforeAnimate:d=>this.emit(new Sp(jn.BEFORE_ANIMATE,wh.EXPAND,d,l),f),afterAnimate:d=>this.emit(new Sp(jn.AFTER_ANIMATE,wh.EXPAND,d,l),f),after:()=>this.emit(new fc(jn.AFTER_DRAW,{dataChanges:s,animation:n}),f)},{expand:{target:e,descendants:[...h(c.nodes),...h(c.combos)],position:a}}))===null||r===void 0?void 0:r.finished})}clear(){this.container.destroy(),this.initContainer(),this.elementMap={},this.shapeTypeMap={},this.defaultStyle={},this.stateStyle={},this.paletteStyle={}}destroy(){this.clear(),this.container.destroy(),this.context={}}}var CT=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})},G3t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class W3t{get presetOptions(){return{animation:!!DLe(this.context.options,!0)}}get options(){const{options:e}=this.context;return e.layout}constructor(e){this.instances=[],this.context=e}getLayoutInstance(){return this.instances}preLayout(e){return CT(this,void 0,void 0,function*(){var n,r,i,a;const{graph:o,model:s}=this.context,{add:l}=e;Mc(o,new fc(jn.BEFORE_LAYOUT,{type:"pre"}));const c=yield(n=this.context.layout)===null||n===void 0?void 0:n.simulate();(r=c?.nodes)===null||r===void 0||r.forEach(u=>{const f=pt(u),h=l.nodes.get(f);s.syncNodeLikeDatum(u),h&&Object.assign(h.style,u.style)}),(i=c?.edges)===null||i===void 0||i.forEach(u=>{const f=pt(u),h=l.edges.get(f);s.syncEdgeDatum(u),h&&Object.assign(h.style,u.style)}),(a=c?.combos)===null||a===void 0||a.forEach(u=>{const f=pt(u),h=l.combos.get(f);s.syncNodeLikeDatum(u),h&&Object.assign(h.style,u.style)}),Mc(o,new fc(jn.AFTER_LAYOUT,{type:"pre"})),this.transformDataAfterLayout("pre",e)})}postLayout(){return CT(this,arguments,void 0,function*(e=this.options){if(!e)return;const n=Array.isArray(e)?e:[e],{graph:r}=this.context;Mc(r,new fc(jn.BEFORE_LAYOUT,{type:"post"}));for(let i=0;i<n.length;i++){const a=n[i],o=this.getLayoutData(a),s=Object.assign(Object.assign({},this.presetOptions),a);Mc(r,new fc(jn.BEFORE_STAGE_LAYOUT,{options:s,index:i}));const l=yield this.stepLayout(o,s,i);Mc(r,new fc(jn.AFTER_STAGE_LAYOUT,{options:s,index:i})),a.animation||this.updateElementPosition(l,!1)}Mc(r,new fc(jn.AFTER_LAYOUT,{type:"post"})),this.transformDataAfterLayout("post")})}transformDataAfterLayout(e,n){const r=this.context.transform.getTransformInstance();Object.values(r).forEach(i=>i.afterLayout(e,n))}simulate(){return CT(this,void 0,void 0,function*(){if(!this.options)return{};const e=Array.isArray(this.options)?this.options:[this.options];let n={};for(let r=0;r<e.length;r++){const i=e[r],a=this.getLayoutData(i);n=yield this.stepLayout(a,Object.assign(Object.assign(Object.assign({},this.presetOptions),i),{animation:!1}),r)}return n})}stepLayout(e,n,r){return CT(this,void 0,void 0,function*(){return $At(n)?yield this.treeLayout(e,n,r):yield this.graphLayout(e,n,r)})}graphLayout(e,n,r){return CT(this,void 0,void 0,function*(){const{animation:i,enableWorker:a,iterations:o=300}=n,s=this.initGraphLayout(n);if(!s)return{};if(this.instances[r]=s,this.instance=s,a){const c=s;return this.supervisor=new RPt(c.graphData2LayoutModel(e),c.instance,{iterations:o}),bk(yield this.supervisor.execute())}if(Nq(s))return i?yield s.execute(e,{onTick:c=>{this.updateElementPosition(c,!1)}}):(s.execute(e),s.stop(),s.tick(o));const l=yield s.execute(e);if(i){const c=this.updateElementPosition(l,i);yield c?.finished}return l})}treeLayout(e,n,r){return CT(this,void 0,void 0,function*(){const{type:i,animation:a}=n,o=Iy("layout",i);if(!o)return{};const{nodes:s=[],edges:l=[]}=e,c=new kc({nodes:s.map(p=>({id:pt(p),data:p.data||{}})),edges:l.map(p=>({id:pt(p),source:p.source,target:p.target,data:p.data||{}}))});z3t(c);const u={nodes:[],edges:[]},f={nodes:[],edges:[]};c.getRoots(xd).forEach(p=>{rx(p,E=>{E.children=c.getSuccessors(E.id)},E=>c.getSuccessors(E.id),"TB");const g=o(p,n),{x:v,y,z:_=0}=g;rx(g,E=>{const{id:x,x:T,y:S,z:w=0}=E;u.nodes.push({id:x,style:{x:v,y,z:_}}),f.nodes.push({id:x,style:{x:T,y:S,z:w}})},E=>E.children,"TB")});const d=this.inferTreeLayoutOffset(f);if(v0e(f,d),a){v0e(u,d),this.updateElementPosition(u,!1);const p=this.updateElementPosition(f,a);yield p?.finished}return f})}inferTreeLayoutOffset(e){var n;let[r,i]=[1/0,-1/0],[a,o]=[1/0,-1/0];(n=e.nodes)===null||n===void 0||n.forEach(g=>{const{x:v=0,y=0}=g.style||{};r=Math.min(r,v),i=Math.max(i,v),a=Math.min(a,y),o=Math.max(o,y)});const{canvas:s}=this.context,l=s.getSize(),[c,u]=s.getCanvasByViewport([0,0]),[f,h]=s.getCanvasByViewport(l);if(r>=c&&i<=f&&a>=u&&o<=h)return[0,0];const d=(c+f)/2,p=(u+h)/2;return[d-(r+i)/2,p-(a+o)/2]}stopLayout(){this.instance&&Nq(this.instance)&&(this.instance.stop(),this.instance=void 0),this.supervisor&&(this.supervisor.stop(),this.supervisor=void 0),this.animationResult&&(this.animationResult.finish(),this.animationResult=void 0)}getLayoutData(e){const{nodeFilter:n=()=>!0,comboFilter:r=()=>!0,preLayout:i=!1,isLayoutInvisibleNodes:a=!1}=e,{nodes:o,edges:s,combos:l}=this.context.model.getData(),{element:c,model:u}=this.context,f=y=>c.getElement(y),h=i?y=>{var _;return!a&&(((_=y.style)===null||_===void 0?void 0:_.visibility)==="hidden"||u.getAncestorsData(y.id,xd).some(Lh)||u.getAncestorsData(y.id,es).some(Lh))?!1:n(y)}:y=>{const _=pt(y),E=f(_);return!E||eN(E)?!1:n(y)},d=o.filter(h),p=l.filter(r),g=new Map(d.map(y=>[pt(y),y]));p.forEach(y=>g.set(pt(y),y));const v=s.filter(({source:y,target:_})=>g.has(y)&&g.has(_));return{nodes:d,edges:v,combos:p}}initGraphLayout(e){var n;const{element:r,viewport:i}=this.context,{type:a,enableWorker:o,animation:s,iterations:l}=e,c=G3t(e,["type","enableWorker","animation","iterations"]),[u,f]=i.getCanvasSize(),h=[u/2,f/2],d=(n=e?.nodeSize)!==null&&n!==void 0?n:(_=>{const E=r?.getElement(_.id);return E?E.attributes.size:r?.getElementComputedStyle("node",_).size}),p=Iy("layout",a);if(!p)return e0.warn(`The layout of ${a} is not registered.`);const g=Object.getPrototypeOf(p.prototype)===y6.prototype?p:GAt(p,this.context),v=new g(this.context),y={nodeSize:d,width:u,height:f,center:h};switch(v.id){case"d3-force":case"d3-force-3d":Object.assign(y,{center:{x:u/2,y:f/2,z:0}});break}return Nt(v.options,y,c),v}updateElementPosition(e,n){const{model:r,element:i}=this.context;return i?(r.updateData(e),i.draw({animation:n,silence:!0})):null}destroy(){var e;this.stopLayout(),this.context={},(e=this.supervisor)===null||e===void 0||e.kill(),this.supervisor=void 0,this.instance=void 0,this.instances=[],this.animationResult=void 0}}const v0e=(t,e)=>{var n;const[r,i]=e;(n=t.nodes)===null||n===void 0||n.forEach(a=>{if(a.style){const{x:o=0,y:s=0}=a.style;a.style.x=o+r,a.style.y=s+i}else a.style={x:r,y:i}})};function V3t(t){return[Y3t].reduce((n,r)=>r(n),t)}function Y3t(t){return!t.layout||Array.isArray(t.layout)||"preLayout"in t.layout||["antv-dagre","combo-combined","compact-box","circular","concentric","dagre","fishbone","grid","indented","mds","radial","random","snake","dendrogram","mindmap"].includes(t.layout.type)&&(t.layout.preLayout=!0),t}class X3t extends pte{constructor(e){super(e),this.category="plugin",this.setPlugins(this.context.options.plugins||[])}setPlugins(e){this.setExtensions(e)}getPluginInstance(e){const n=this.extensionMap[e];if(n)return n;e0.warn(`Cannot find the plugin ${e}, will try to find it by type.`);const r=this.extensions.find(i=>i.type===e);if(r)return this.extensionMap[r.key]}}const oL=["update-related-edges","collapse-expand-node","collapse-expand-combo","get-edge-actual-ends","arrange-draw-order"];class q3t extends pte{constructor(e){super(e),this.category="transform",this.setTransforms(this.context.options.transforms||[])}getTransforms(){}setTransforms(e){this.setExtensions([...oL.slice(0,oL.length-1),...e,oL[oL.length-1]])}getTransformInstance(e){return e?this.extensionMap[e]:this.extensionMap}}var v2=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};class Z3t{get padding(){return Qp(this.context.options.padding)}get paddingOffset(){const[e,n,r,i]=this.padding,[a,o,s]=[(i-n)/2,(e-r)/2,0];return[a,o,s]}constructor(e){this.landmarkCounter=0,this.context=e;const[n,r]=this.paddingOffset,{zoom:i,rotation:a,x:o=n,y:s=r}=e.options;this.transform({mode:"absolute",scale:i,translate:[o,s],rotate:a},!1)}get camera(){const{canvas:e}=this.context;return new Proxy(e.getCamera(),{get:(n,r)=>{const a=Object.entries(e.getLayers()).filter(([s])=>!["main"].includes(s)).map(([,s])=>s.getCamera()),o=n[r];if(typeof o=="function")return(...s)=>{const l=o.apply(n,s);return a.forEach(c=>{c[r].apply(c,s)}),l}}})}createLandmark(e){return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`,e)}getAnimation(e){const n=DLe(this.context.options,e);return n?Wp(Object.assign({},n),["easing","duration"]):!1}getCanvasSize(){const{canvas:e}=this.context,{width:n=0,height:r=0}=e.getConfig();return[n,r]}getCanvasCenter(){const{canvas:e}=this.context,{width:n=0,height:r=0}=e.getConfig();return[n/2,r/2,0]}getViewportCenter(){const[e,n]=this.camera.getPosition();return[e,n,0]}getGraphCenter(){return this.context.graph.getViewportByCanvas(this.getCanvasCenter())}getZoom(){return this.camera.getZoom()}getRotation(){return this.camera.getRoll()}getTranslateOptions(e){const{camera:n}=this,{mode:r,translate:i=[]}=e,a=this.getZoom(),o=n.getPosition(),s=n.getFocalPoint(),[l,c]=this.getCanvasCenter(),[u=0,f=0,h=0]=i,d=nv([-u,-f,-h],a);return r==="relative"?{position:Hi(o,d),focalPoint:Hi(s,d)}:{position:Hi([l,c,o[2]],d),focalPoint:Hi([l,c,s[2]],d)}}getRotateOptions(e){const{mode:n,rotate:r=0}=e;return{roll:n==="relative"?this.camera.getRoll()+r:r}}getZoomOptions(e){const{zoomRange:n}=this.context.options,r=this.camera.getZoom(),{mode:i,scale:a=1}=e;return ga(i==="relative"?r*a:a,...n)}transform(e,n){return v2(this,void 0,void 0,function*(){const{graph:r}=this.context,{translate:i,rotate:a,scale:o,origin:s}=e;this.cancelAnimation();const l=this.getAnimation(n);if(Mc(r,new aL(jn.BEFORE_TRANSFORM,e)),!a&&o&&!i&&s&&!l){this.camera.setZoomByViewportPoint(this.getZoomOptions(e),s),Mc(r,new aL(jn.AFTER_TRANSFORM,e));return}const c={};if(i&&Object.assign(c,this.getTranslateOptions(e)),Ln(a)&&Object.assign(c,this.getRotateOptions(e)),Ln(o)&&Object.assign(c,{zoom:this.getZoomOptions(e)}),l)return Mc(r,new Sp(jn.BEFORE_ANIMATE,wh.TRANSFORM,null,e)),new Promise(u=>{this.transformResolver=u,this.camera.gotoLandmark(this.createLandmark(c),Object.assign(Object.assign({},l),{onfinish:()=>{Mc(r,new Sp(jn.AFTER_ANIMATE,wh.TRANSFORM,null,e)),Mc(r,new aL(jn.AFTER_TRANSFORM,e)),this.transformResolver=void 0,u()}}))});this.camera.gotoLandmark(this.createLandmark(c),{duration:0}),Mc(r,new aL(jn.AFTER_TRANSFORM,e))})}fitView(e,n){return v2(this,void 0,void 0,function*(){const[r,i,a,o]=this.padding,{when:s="always",direction:l="both"}=e||{},[c,u]=this.context.canvas.getSize(),f=c-o-i,h=u-r-a,d=this.context.canvas.getBounds(),p=this.getBBoxInViewport(d),[g,v]=cb(p),y=l==="x"&&g>=f||l==="y"&&v>=h||l==="both"&&g>=f&&v>=h;if(s==="overflow"&&!y)return yield this.fitCenter({animation:n});const _=f/g,E=h/v,x=l==="x"?_:l==="y"?E:Math.min(_,E),T=this.getAnimation(n);Number.isFinite(x)&&(yield this.transform({mode:"relative",scale:x,translate:Hi(Wo(this.getCanvasCenter(),this.getBBoxInViewport(d).center),nv(this.paddingOffset,x))},T))})}fitCenter(e){return v2(this,void 0,void 0,function*(){const n=this.context.canvas.getBounds();yield this.focus(n,e)})}focusElements(e){return v2(this,arguments,void 0,function*(n,r={}){const{element:i}=this.context;if(!i)return;const a=s=>r.shapes?s.getShape(r.shapes).getRenderBounds():s.getRenderBounds(),o=YP(n.map(s=>a(i.getElement(s))));yield this.focus(o,r)})}focus(e,n){return v2(this,void 0,void 0,function*(){const r=this.context.graph.getViewportByCanvas(e.center),i=n.position||this.getCanvasCenter(),a=Wo(i,r);yield this.transform({mode:"relative",translate:Hi(a,this.paddingOffset)},n.animation)})}getBBoxInViewport(e){const{min:n,max:r}=e,{graph:i}=this.context,[a,o]=i.getViewportByCanvas(n),[s,l]=i.getViewportByCanvas(r),c=new cs;return c.setMinMax([a,o,0],[s,l,0]),c}isInViewport(e,n=!1,r=0){const{graph:i}=this.context,a=this.getCanvasSize(),[o,s]=i.getCanvasByViewport([0,0]),[l,c]=i.getCanvasByViewport(a);let u=new cs;return u.setMinMax([o,s,0],[l,c,0]),r&&(u=ub(u,r)),aw(e)?tv(e,u):n?$St(e,u):u.intersects(e)}cancelAnimation(){var e,n;!((e=this.camera.landmarks)===null||e===void 0)&&e.length&&this.camera.cancelLandmarkAnimation(),(n=this.transformResolver)===null||n===void 0||n.call(this)}}var ls=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};let CBe=class RBe extends Jm{constructor(e){var n;super(),this.options={},this.rendered=!1,this.destroyed=!1,this.context={model:new $3t},this.isCollapsingExpanding=!1,this.onResize=Aw(()=>{this.resize()},300),this._setOptions(Object.assign({},RBe.defaultOptions,e),!0),this.context.graph=this,this.options.autoResize&&((n=globalThis.addEventListener)===null||n===void 0||n.call(globalThis,"resize",this.onResize))}getOptions(){return this.options}setOptions(e){this._setOptions(e,!1)}_setOptions(e,n){if(this.updateCanvas(e),Object.assign(this.options,V3t(e)),n){const{data:h}=e;h&&this.addData(h);return}const{behaviors:r,combo:i,data:a,edge:o,layout:s,node:l,plugins:c,theme:u,transforms:f}=e;r&&this.setBehaviors(r),a&&this.setData(a),l&&this.setNode(l),o&&this.setEdge(o),i&&this.setCombo(i),s&&this.setLayout(s),u&&this.setTheme(u),c&&this.setPlugins(c),f&&this.setTransforms(f)}getSize(){return this.context.canvas?this.context.canvas.getSize():[this.options.width||0,this.options.height||0]}setSize(e,n){e&&(this.options.width=e),n&&(this.options.height=n),this.resize(e,n)}setZoomRange(e){this.options.zoomRange=e}getZoomRange(){return this.options.zoomRange}setNode(e){this.options.node=e,this.context.model.refreshData()}setEdge(e){this.options.edge=e,this.context.model.refreshData()}setCombo(e){this.options.combo=e,this.context.model.refreshData()}getTheme(){return this.options.theme}setTheme(e){this.options.theme=ur(e)?e(this.getTheme()):e}setLayout(e){this.options.layout=ur(e)?e(this.getLayout()):e}getLayout(){return this.options.layout}setBehaviors(e){var n;this.options.behaviors=ur(e)?e(this.getBehaviors()):e,(n=this.context.behavior)===null||n===void 0||n.setBehaviors(this.options.behaviors)}updateBehavior(e){this.setBehaviors(n=>n.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r))}getBehaviors(){return this.options.behaviors||[]}setPlugins(e){var n;this.options.plugins=ur(e)?e(this.getPlugins()):e,(n=this.context.plugin)===null||n===void 0||n.setPlugins(this.options.plugins)}updatePlugin(e){this.setPlugins(n=>n.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r))}getPlugins(){return this.options.plugins||[]}getPluginInstance(e){return this.context.plugin.getPluginInstance(e)}setTransforms(e){var n;this.options.transforms=ur(e)?e(this.getTransforms()):e,(n=this.context.transform)===null||n===void 0||n.setTransforms(this.options.transforms)}updateTransform(e){this.setTransforms(n=>n.map(r=>typeof r=="object"&&r.key===e.key?Object.assign(Object.assign({},r),e):r)),this.context.model.refreshData()}getTransforms(){return this.options.transforms||[]}getData(){return this.context.model.getData()}hasNode(e){return this.context.model.hasNode(e)}hasEdge(e){return this.context.model.hasEdge(e)}hasCombo(e){return this.context.model.hasCombo(e)}getElementData(e){return Array.isArray(e)?e.map(n=>this.context.model.getElementDataById(n)):this.context.model.getElementDataById(e)}getNodeData(e){return e===void 0?this.context.model.getNodeData():Array.isArray(e)?this.context.model.getNodeData(e):this.context.model.getNodeLikeDatum(e)}getEdgeData(e){return e===void 0?this.context.model.getEdgeData():Array.isArray(e)?this.context.model.getEdgeData(e):this.context.model.getEdgeDatum(e)}getComboData(e){return e===void 0?this.context.model.getComboData():Array.isArray(e)?this.context.model.getComboData(e):this.context.model.getNodeLikeDatum(e)}setData(e){this.context.model.setData(ur(e)?e(this.getData()):e)}addData(e){this.context.model.addData(ur(e)?e(this.getData()):e)}addNodeData(e){this.context.model.addNodeData(ur(e)?e(this.getNodeData()):e)}addEdgeData(e){this.context.model.addEdgeData(ur(e)?e(this.getEdgeData()):e)}addComboData(e){this.context.model.addComboData(ur(e)?e(this.getComboData()):e)}addChildrenData(e,n){this.context.model.addChildrenData(e,n)}updateData(e){this.context.model.updateData(ur(e)?e(this.getData()):e)}updateNodeData(e){this.context.model.updateNodeData(ur(e)?e(this.getNodeData()):e)}updateEdgeData(e){this.context.model.updateEdgeData(ur(e)?e(this.getEdgeData()):e)}updateComboData(e){this.context.model.updateComboData(ur(e)?e(this.getComboData()):e)}removeData(e){this.context.model.removeData(ur(e)?e(this.getData()):e)}removeNodeData(e){this.context.model.removeNodeData(ur(e)?e(this.getNodeData()):e)}removeEdgeData(e){this.context.model.removeEdgeData(ur(e)?e(this.getEdgeData()):e)}removeComboData(e){this.context.model.removeComboData(ur(e)?e(this.getComboData()):e)}getElementType(e){return this.context.model.getElementType(e)}getRelatedEdgesData(e,n="both"){return this.context.model.getRelatedEdgesData(e,n)}getNeighborNodesData(e){return this.context.model.getNeighborNodesData(e)}getAncestorsData(e,n){return this.context.model.getAncestorsData(e,n)}getParentData(e,n){return this.context.model.getParentData(e,n)}getChildrenData(e){return this.context.model.getChildrenData(e)}getDescendantsData(e){return this.context.model.getDescendantsData(e)}getElementDataByState(e,n){return this.context.model.getElementDataByState(e,n)}initCanvas(){return ls(this,void 0,void 0,function*(){var e;if(this.context.canvas)return yield this.context.canvas.ready;const{container:n="container",width:r,height:i,renderer:a,cursor:o,background:s,canvas:l,devicePixelRatio:c=(e=globalThis.devicePixelRatio)!==null&&e!==void 0?e:1}=this.options;if(n instanceof u0e)this.context.canvas=n,o&&n.setCursor(o),a&&n.setRenderer(a),yield n.ready;else{const u=$i(n)?document.getElementById(n):n,f=d0e(u);this.emit(jn.BEFORE_CANVAS_INIT,{container:u,width:r,height:i});const h=Object.assign(Object.assign({},l),{container:u,width:r||f[0],height:i||f[1],background:s,renderer:a,cursor:o,devicePixelRatio:c}),d=new u0e(h);this.context.canvas=d,yield d.ready,this.emit(jn.AFTER_CANVAS_INIT,{canvas:d})}})}updateCanvas(e){var n,r;const{renderer:i,cursor:a,height:o,width:s}=e,l=this.context.canvas;l&&(i&&(this.emit(jn.BEFORE_RENDERER_CHANGE,{renderer:this.options.renderer}),l.setRenderer(i),this.emit(jn.AFTER_RENDERER_CHANGE,{renderer:i})),a&&l.setCursor(a),(Ln(s)||Ln(o))&&this.setSize((n=s??this.options.width)!==null&&n!==void 0?n:0,(r=o??this.options.height)!==null&&r!==void 0?r:0))}initRuntime(){this.context.options=this.options,this.context.batch||(this.context.batch=new F3t(this.context)),this.context.plugin||(this.context.plugin=new X3t(this.context)),this.context.viewport||(this.context.viewport=new Z3t(this.context)),this.context.transform||(this.context.transform=new q3t(this.context)),this.context.element||(this.context.element=new H3t(this.context)),this.context.animation||(this.context.animation=new B3t(this.context)),this.context.layout||(this.context.layout=new W3t(this.context)),this.context.behavior||(this.context.behavior=new U3t(this.context))}prepare(){return ls(this,void 0,void 0,function*(){if(yield Promise.resolve(),this.destroyed){console.error(uy("The graph instance has been destroyed"));return}yield this.initCanvas(),this.initRuntime()})}render(){return ls(this,void 0,void 0,function*(){if(yield this.prepare(),Mc(this,new fc(jn.BEFORE_RENDER)),this.options.layout)if(!this.rendered&&HAt(this.options.layout)){const e=yield this.context.element.preLayoutDraw({type:"render"});yield Promise.all([e?.finished,this.autoFit()])}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e?.finished,this.context.layout.postLayout()]),yield this.autoFit()}else{const e=this.context.element.draw({type:"render"});yield Promise.all([e?.finished,this.autoFit()])}this.rendered=!0,Mc(this,new fc(jn.AFTER_RENDER))})}draw(){return ls(this,void 0,void 0,function*(){var e;yield this.prepare(),yield(e=this.context.element.draw())===null||e===void 0?void 0:e.finished})}layout(e){return ls(this,void 0,void 0,function*(){yield this.context.layout.postLayout(e)})}stopLayout(){this.context.layout.stopLayout()}clear(){return ls(this,void 0,void 0,function*(){const{model:e,element:n}=this.context;e.setData({}),e.clearChanges(),n?.clear()})}destroy(){var e;Mc(this,new fc(jn.BEFORE_DESTROY));const{layout:n,animation:r,element:i,model:a,canvas:o,behavior:s,plugin:l}=this.context;l?.destroy(),s?.destroy(),n?.destroy(),r?.destroy(),i?.destroy(),a.destroy(),o?.destroy(),this.options={},this.context={},this.off(),(e=globalThis.removeEventListener)===null||e===void 0||e.call(globalThis,"resize",this.onResize),this.destroyed=!0,Mc(this,new fc(jn.AFTER_DESTROY))}getCanvas(){return this.context.canvas}resize(e,n){var r;const i=d0e((r=this.context.canvas)===null||r===void 0?void 0:r.getContainer()),a=[e||i[0],n||i[1]];if(!this.context.canvas)return;const o=this.context.canvas.getSize();Fs(a,o)||(Mc(this,new fc(jn.BEFORE_SIZE_CHANGE,{size:a})),this.context.canvas.resize(...a),Mc(this,new fc(jn.AFTER_SIZE_CHANGE,{size:a})))}fitView(e,n){return ls(this,void 0,void 0,function*(){var r;yield(r=this.context.viewport)===null||r===void 0?void 0:r.fitView(e,n)})}fitCenter(e){return ls(this,void 0,void 0,function*(){var n;yield(n=this.context.viewport)===null||n===void 0?void 0:n.fitCenter({animation:e})})}autoFit(){return ls(this,void 0,void 0,function*(){const{autoFit:e}=this.context.options;if(e)if($i(e))e==="view"?yield this.fitView():e==="center"&&(yield this.fitCenter());else{const{type:n,animation:r}=e;n==="view"?yield this.fitView(e.options,r):n==="center"&&(yield this.fitCenter(r))}})}focusElement(e,n){return ls(this,void 0,void 0,function*(){var r;yield(r=this.context.viewport)===null||r===void 0?void 0:r.focusElements(Array.isArray(e)?e:[e],{animation:n})})}zoomBy(e,n,r){return ls(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",scale:e,origin:r},n)})}zoomTo(e,n,r){return ls(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",scale:e,origin:r},n)})}getZoom(){return this.context.viewport.getZoom()}rotateBy(e,n,r){return ls(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",rotate:e,origin:r},n)})}rotateTo(e,n,r){return ls(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",rotate:e,origin:r},n)})}getRotation(){return this.context.viewport.getRotation()}translateBy(e,n){return ls(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"relative",translate:e},n)})}translateTo(e,n){return ls(this,void 0,void 0,function*(){yield this.context.viewport.transform({mode:"absolute",translate:e},n)})}getPosition(){return Wo([0,0],this.getCanvasByViewport([0,0]))}translateElementBy(e,n){return ls(this,arguments,void 0,function*(r,i,a=!0){var o,s;const[l,c]=dl(r)?[r,(o=i)!==null&&o!==void 0?o:!0]:[{[r]:i},a];Object.entries(l).forEach(([u,f])=>this.context.model.translateNodeLikeBy(u,f)),yield(s=this.context.element.draw({animation:c,stage:"translate"}))===null||s===void 0?void 0:s.finished})}translateElementTo(e,n){return ls(this,arguments,void 0,function*(r,i,a=!0){var o,s;const[l,c]=dl(r)?[r,(o=i)!==null&&o!==void 0?o:!0]:[{[r]:i},a];Object.entries(l).forEach(([u,f])=>this.context.model.translateNodeLikeTo(u,f)),yield(s=this.context.element.draw({animation:c,stage:"translate"}))===null||s===void 0?void 0:s.finished})}getElementPosition(e){return this.context.model.getElementPosition(e)}getElementRenderStyle(e){return ww(this.context.element.getElement(e).attributes,["context"])}setElementVisibility(e,n){return ls(this,arguments,void 0,function*(r,i,a=!0){var o,s;const[l,c]=dl(r)?[r,(o=i)!==null&&o!==void 0?o:!0]:[{[r]:i},a],u={nodes:[],edges:[],combos:[]};Object.entries(l).forEach(([d,p])=>{const g=this.getElementType(d);u[`${g}s`].push({id:d,style:{visibility:p}})});const{model:f,element:h}=this.context;f.preventUpdateNodeLikeHierarchy(()=>{f.updateData(u)}),yield(s=h.draw({animation:c,stage:"visibility"}))===null||s===void 0?void 0:s.finished})}showElement(e,n){return ls(this,void 0,void 0,function*(){const r=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(r.map(i=>[i,"visible"])),n)})}hideElement(e,n){return ls(this,void 0,void 0,function*(){const r=Array.isArray(e)?e:[e];yield this.setElementVisibility(Object.fromEntries(r.map(i=>[i,"hidden"])),n)})}getElementVisibility(e){var n,r;const i=this.context.element.getElement(e);return(r=(n=i?.style)===null||n===void 0?void 0:n.visibility)!==null&&r!==void 0?r:"visible"}setElementZIndex(e,n){return ls(this,void 0,void 0,function*(){var r;const i={nodes:[],edges:[],combos:[]},a=dl(e)?e:{[e]:n};Object.entries(a).forEach(([l,c])=>{const u=this.getElementType(l);i[`${u}s`].push({id:l,style:{zIndex:c}})});const{model:o,element:s}=this.context;o.preventUpdateNodeLikeHierarchy(()=>o.updateData(i)),yield(r=s.draw({animation:!1,stage:"zIndex"}))===null||r===void 0?void 0:r.finished})}frontElement(e){return ls(this,void 0,void 0,function*(){const n=Array.isArray(e)?e:[e],{model:r}=this.context,i={};n.map(a=>{const o=r.getFrontZIndex(a);if(r.getElementType(a)==="combo"){const l=r.getAncestorsData(a,es).at(-1)||this.getComboData(a),c=[l,...r.getDescendantsData(pt(l))],u=o-p0e(l);c.forEach(h=>{i[pt(h)]=this.getElementZIndex(pt(h))+u});const{internal:f}=Tq(c.map(pt),h=>r.getRelatedEdgesData(h));f.forEach(h=>{const d=pt(h);i[d]=this.getElementZIndex(d)+u})}else i[a]=o}),yield this.setElementZIndex(i)})}getElementZIndex(e){return p0e(this.context.model.getElementDataById(e))}setElementState(e,n){return ls(this,arguments,void 0,function*(r,i,a=!0){var o,s;const[l,c]=dl(r)?[r,(o=i)!==null&&o!==void 0?o:!0]:[{[r]:i},a],u=h=>h?Array.isArray(h)?h:[h]:[],f={nodes:[],edges:[],combos:[]};Object.entries(l).forEach(([h,d])=>{const p=this.getElementType(h);f[`${p}s`].push({id:h,states:u(d)})}),this.updateData(f),yield(s=this.context.element.draw({animation:c,stage:"state"}))===null||s===void 0?void 0:s.finished})}getElementState(e){return this.context.model.getElementState(e)}getElementRenderBounds(e){return this.context.element.getElement(e).getRenderBounds()}collapseElement(e){return ls(this,arguments,void 0,function*(n,r=!0){const{model:i,element:a}=this.context;if(Lh(i.getNodeLikeData([n])[0])||this.isCollapsingExpanding)return;typeof r=="boolean"&&(r={animation:r,align:!0});const o=i.getElementType(n);yield this.frontElement(n),this.isCollapsingExpanding=!0,i.updateData(o==="node"?{nodes:[{id:n,style:{collapsed:!0}}]}:{combos:[{id:n,style:{collapsed:!0}}]}),o==="node"?yield a.collapseNode(n,r):o==="combo"&&(yield a.collapseCombo(n,!!r.animation)),this.isCollapsingExpanding=!1})}expandElement(e){return ls(this,arguments,void 0,function*(n,r=!0){const{model:i,element:a}=this.context;if(!Lh(i.getNodeLikeData([n])[0])||this.isCollapsingExpanding)return;typeof r=="boolean"&&(r={animation:r,align:!0});const o=i.getElementType(n);this.isCollapsingExpanding=!0,i.updateData(o==="node"?{nodes:[{id:n,style:{collapsed:!1}}]}:{combos:[{id:n,style:{collapsed:!1}}]}),o==="node"?yield a.expandNode(n,r):o==="combo"&&(yield a.expandCombo(n,!!r.animation)),this.isCollapsingExpanding=!1})}setElementCollapsibility(e,n){const r=this.getElementType(e);r==="node"?this.updateNodeData([{id:e,style:{collapsed:n}}]):r==="combo"&&this.updateComboData([{id:e,style:{collapsed:n}}])}toDataURL(){return ls(this,arguments,void 0,function*(e={}){return this.context.canvas.toDataURL(e)})}getCanvasByViewport(e){return this.context.canvas.getCanvasByViewport(e)}getViewportByCanvas(e){return this.context.canvas.getViewportByCanvas(e)}getClientByCanvas(e){return this.context.canvas.getClientByCanvas(e)}getCanvasByClient(e){return this.context.canvas.getCanvasByClient(e)}getViewportCenter(){return this.context.viewport.getViewportCenter()}getCanvasCenter(){return this.context.viewport.getCanvasCenter()}on(e,n,r){return super.on(e,n,r)}once(e,n){return super.once(e,n)}off(e,n){return super.off(e,n)}};CBe.defaultOptions={autoResize:!1,theme:"light",rotation:0,zoom:1,zoomRange:[.01,10]};var K3t=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function MBe(t,e){const{getNodeData:n=(s,l)=>{if(s.depth=l,!s.children)return s;const{children:c}=s,u=K3t(s,["children"]);return Object.assign(Object.assign({},u),{children:c.map(f=>f.id)})},getEdgeData:r=(s,l)=>({source:s.id,target:l.id}),getChildren:i=s=>s.children||[]}=e||{},a=[],o=[];return rx(t,(s,l)=>{a.push(n(s,l));const c=i(s);for(const u of c)o.push(r(s,u))},s=>i(s),"TB"),{nodes:a,edges:o}}class Q3t extends Bd{beforeDraw(e){const{add:n,update:r}=e,{model:i}=this.context;return[...n.edges.entries(),...r.edges.entries()].forEach(([,a])=>{PBe(i,a)}),e}}const PBe=(t,e)=>{const{source:n,target:r}=e,i=t.getElementDataById(n),a=t.getElementDataById(r),o=gfe(i,f=>t.getParentData(f,es)),s=gfe(a,f=>t.getParentData(f,es)),l=pt(o),c=pt(s),u={sourceNode:l,targetNode:c};return e.style?Object.assign(e.style,u):e.style=u,e},J3t=(t,e,n)=>{const[r,i]=e,[a,o]=n;if(i===r)return a;const s=(t-r)/(i-r);return a+s*(o-a)},eIt=(t,e,n)=>{const[r,i]=e,[a,o]=n,s=Math.log(t-r+1)/Math.log(i-r+1);return a+s*(o-a)},tIt=(t,e,n,r=2)=>{const[i,a]=e,[o,s]=n,l=Math.pow((t-i)/(a-i),r);return o+l*(s-o)},nIt=(t,e,n)=>{const[r,i]=e,[a,o]=n,s=Math.sqrt((t-r)/(i-r));return a+s*(o-a)};class u5 extends Bd{constructor(e,n){super(e,Nt({},u5.defaultOptions,n)),this.assignSizeByCentrality=(r,i,a,o,s,l)=>{const c=[i,a],u=[o[0],s[0]],f=[o[1],s[1]],h=[o[2],s[2]],d=(p,g)=>{if(typeof l=="function")return l(p,c,g);switch(l){case"linear":return J3t(p,c,g);case"log":return eIt(p,c,g);case"pow":return tIt(p,c,g,2);case"sqrt":return nIt(p,c,g);default:return g[0]}};return[d(r,u),d(r,f),d(r,h)]}}beforeDraw(e){const{model:n}=this.context,r=n.getNodeData(),i=Fh(this.options.maxSize),a=Fh(this.options.minSize),o=this.getCentralities(this.options.centrality),s=o.size>0?Math.max(...o.values()):0,l=o.size>0?Math.min(...o.values()):0;return r.forEach(c=>{var u;const f=this.assignSizeByCentrality(o.get(pt(c))||0,l,s,a,i,this.options.scale),h=(u=this.context.element)===null||u===void 0?void 0:u.getElement(pt(c)),d={size:f};this.assignLabelStyle(d,f,c,h),(!h||!Tk(d,h.attributes))&&Od(e,h?"update":"add","node",Nt(c,{style:d}),!0)}),e}assignLabelStyle(e,n,r,i){var a;const o=i?i.config.style:(a=this.context.element)===null||a===void 0?void 0:a.getElementComputedStyle("node",r);if(Object.assign(e,Wp(o,["labelFontSize","labelLineHeight"])),this.options.mapLabelSize){const s=this.getLabelSizeByNodeSize(n,1/0,Number(e.labelFontSize));Object.assign(e,{labelFontSize:s,labelLineHeight:s+zSt(e.labelPadding)})}return e}getLabelSizeByNodeSize(e,n,r){const i=Math.min(...e)/2,[a,o]=Array.isArray(this.options.mapLabelSize)?this.options.mapLabelSize:[r,n];return Math.min(o,Math.max(i,a))}getCentralities(e){const{model:n}=this.context,r=n.getData();if(typeof e=="function")return e(r);const i=n.getRelatedEdgesData.bind(n);return WLe(r,i,e)}}u5.defaultOptions={centrality:{type:"degree"},maxSize:80,minSize:20,scale:"linear",mapLabelSize:!1};class f5 extends Bd{constructor(e,n){super(e,Object.assign({},f5.defaultOptions,n))}get ref(){return this.context.model.getRootsData()[0]}afterLayout(){var e;const n=pl(this.ref),{graph:r,model:i}=this.context;(e=i.getData().nodes)===null||e===void 0||e.forEach(o=>{var s;if(pt(o)===pt(this.ref))return;const l=YLe(Wo(pl(o),n)),c=Math.abs(l)>Math.PI/2,u=!o.children||o.children.length===0,f=pt(o),h=(s=this.context.element)===null||s===void 0?void 0:s.getElement(f);if(!h||!h.isVisible())return;const d=Fh(r.getElementRenderStyle(f).size)[0]/2,p=(u?1:-1)*(d+this.options.offset),g=[["translate",p*Math.cos(l),p*Math.sin(l)],["rotate",c?Ph(l)+180:Ph(l)]];i.updateNodeData([{id:pt(o),style:{labelTextAlign:c===u?"right":"left",labelTextBaseline:"middle",labelTransform:g}}])}),r.draw()}}f5.defaultOptions={offset:5};const rIt="quadratic",m0e=["top","top-right","right","right-bottom","bottom","bottom-left","left","left-top"];class h5 extends Bd{constructor(e,n){super(e,Object.assign({},h5.defaultOptions,n)),this.cacheMergeStyle=new Map,this.getAffectedParallelEdges=r=>{const{add:{edges:i},update:{nodes:a,edges:o,combos:s},remove:{edges:l}}=r,{model:c}=this.context,u=new Map,f=(p,g)=>{c.getRelatedEdgesData(g).forEach(y=>!u.has(pt(y))&&u.set(pt(y),y))};a.forEach(f),s.forEach(f);const h=p=>{const g=new Set(r.remove.edges.keys()),v=c.getEdgeData().filter(y=>!g.has(pt(y))).map(y=>PBe(c,y));iIt(p,v).forEach(y=>{const _=pt(y);u.has(_)||u.set(_,y)})};if(l.size&&l.forEach(h),i.size&&i.forEach(h),o.size){const p=bBe(rne(c.getChanges())).update.edges;o.forEach(g=>{var v;h(g);const y=(v=p.find(_=>pt(_.value)===pt(g)))===null||v===void 0?void 0:v.original;y&&!ane(g,y)&&h(y)})}Em(this.options.edges)||u.forEach((p,g)=>!this.options.edges.includes(g)&&u.delete(g));const d=c.getEdgeData().map(pt);return new Map([...u].sort((p,g)=>d.indexOf(p[0])-d.indexOf(g[0])))},this.applyBundlingStyle=(r,i,a)=>{const{edgeMap:o,reverses:s}=y0e(i);o.forEach(l=>{l.forEach((c,u,f)=>{var h;const d=f.length,p=c.style||{};if(c.source===c.target){const y=m0e.length;p.loopPlacement=m0e[u%y],p.loopDist=Math.floor(u/y)*a+50}else if(d===1)p.curveOffset=0;else{const y=(u%2===0?1:-1)*(s[`${c.source}|${c.target}|${u}`]?-1:1);p.curveOffset=d%2===1?y*Math.ceil(u/2)*a*2:y*(Math.floor(u/2)*a*2+a)}const g=Object.assign(c,{type:rIt,style:p}),v=(h=this.context.element)===null||h===void 0?void 0:h.getElement(pt(c));(!v||!Tk(g.style,v.attributes))&&Od(r,v?"update":"add","edge",g,!0)})})},this.resetEdgeStyle=r=>{const i=r.style||{},a=this.cacheMergeStyle.get(pt(r))||{};return Object.keys(a).forEach(o=>{Fs(i[o],a[o])&&(r[o]?i[o]=r[o]:delete i[o])}),Object.assign(r,{style:i})},this.applyMergingStyle=(r,i)=>{const{edgeMap:a,reverses:o}=y0e(i);a.forEach(s=>{var l;if(s.length===1){const u=s[0],f=(l=this.context.element)===null||l===void 0?void 0:l.getElement(pt(u)),h=this.resetEdgeStyle(u);(!f||!Tk(h,f.attributes))&&Od(r,f?"update":"add","edge",h);return}const c=s.map(({source:u,target:f,style:h={}},d)=>{const{startArrow:p,endArrow:g}=h,v={},[y,_]=o[`${u}|${f}|${d}`]?["endArrow","startArrow"]:["startArrow","endArrow"];return fx(p)&&(v[y]=p),fx(g)&&(v[_]=g),v}).reduce((u,f)=>Object.assign(Object.assign({},u),f),{});s.forEach((u,f,h)=>{var d;if(f!==0){Od(r,"remove","edge",u);return}const p=Object.assign({},ur(this.options.style)?this.options.style(h):this.options.style,{childrenData:h});this.cacheMergeStyle.set(pt(u),p);const g=Object.assign(Object.assign({},u),{type:"line",style:Object.assign(Object.assign(Object.assign({},u.style),c),p)}),v=(d=this.context.element)===null||d===void 0?void 0:d.getElement(pt(u));(!v||!Tk(g.style,v.attributes))&&Od(r,v?"update":"add","edge",g,!0)})})}}beforeDraw(e){const n=this.getAffectedParallelEdges(e);return n.size===0||(this.options.mode==="bundle"?this.applyBundlingStyle(e,n,this.options.distance):this.applyMergingStyle(e,n)),e}}h5.defaultOptions={mode:"bundle",distance:15};const y0e=t=>{const e=new Map,n=new Set,r={},i=new Map;for(const[a,o]of t){if(n.has(a))continue;const{source:s,target:l}=o,c=`${s}-${l}`;e.has(c)||(e.set(c,[]),i.set(c,new Set));const u=e.get(c),f=i.get(c);u&&f&&!f.has(a)&&(u.push(o),f.add(a),n.add(a));for(const[h,d]of t)if(!(n.has(h)||h===a)&&ane(o,d)){const p=e.get(c),g=i.get(c);p&&g&&!g.has(h)&&(p.push(d),g.add(h),s===d.target&&l===d.source&&(r[`${d.source}|${d.target}|${p.length-1}`]=!0),n.add(h))}}return{edgeMap:e,reverses:r}},iIt=(t,e,n)=>e.filter(r=>ane(r,t)),ane=(t,e)=>{const{sourceNode:n,targetNode:r}=t.style||{},{sourceNode:i,targetNode:a}=e.style||{};return n===i&&r===a||n===a&&r===i};class aIt extends Bd{beforeDraw(e,n){const{stage:r}=n;if(r==="visibility")return e;const{model:i}=this.context,{update:{nodes:a,edges:o,combos:s}}=e,l=(c,u)=>{i.getRelatedEdgesData(u).forEach(h=>!o.has(pt(h))&&o.set(pt(h),h))};return a.forEach(l),s.forEach(l),e}}const oIt={animation:{"combo-collapse":jLe,"combo-expand":FSt,"node-collapse":FLe,"node-expand":DSt,"path-in":ULe,"path-out":BSt,fade:LSt,translate:kSt},behavior:{"brush-select":XP,"click-select":o6,"collapse-expand":g6,"create-edge":v6,"drag-canvas":m6,"drag-element-force":VAt,"drag-element":tN,"fix-element-size":_6,"focus-element":b6,"hover-activate":Gw,"lasso-select":XAt,"auto-adapt-label":r6,"optimize-viewport-transform":E6,"scroll-canvas":x6,"zoom-canvas":S6},combo:{circle:YTt,rect:XTt},edge:{cubic:Jx,line:yke,polyline:Ste,quadratic:p6,"cubic-horizontal":f6,"cubic-radial":h6,"cubic-vertical":d6},layout:{"antv-dagre":ZOt,"combo-combined":W2t,"compact-box":ZI.compactBox,"d3-force":V2t,"force-atlas2":ZMt,circular:JOt,concentric:Pq,dagre:j6,dendrogram:ZI.dendrogram,fishbone:z6,force:Yke,fruchterman:JMt,grid:tPt,indented:ZI.indented,mds:qke,mindmap:ZI.mindmap,radial:uPt,random:mPt,snake:$6},node:{circle:KP,diamond:FTt,ellipse:c6,hexagon:HTt,html:QP,image:fke,rect:WTt,star:VTt,donut:l6,triangle:u6},palette:{spectral:IPt,tableau:LPt,oranges:kPt,greens:DPt,blues:BPt},theme:{dark:w3t,light:C3t},plugin:{"bubble-sets":W6,"edge-bundling":Y6,"edge-filter-lens":X6,"grid-line":K6,background:H6,contextmenu:V6,fisheye:q6,fullscreen:Z6,history:Q6,hull:e5,legend:n5,minimap:r5,snapline:i5,timebar:a5,title:h3t,toolbar:o5,tooltip:s5,watermark:l5},transform:{"arrange-draw-order":R3t,"collapse-expand-combo":M3t,"collapse-expand-node":P3t,"get-edge-actual-ends":Q3t,"map-node-size":u5,"place-radial-labels":f5,"process-parallel-edges":h5,"update-related-edges":aIt},shape:{circle:Wm,ellipse:BP,group:yc,html:qx,image:_te,line:Ex,path:Ad,polygon:Zx,polyline:S4,rect:Nu,text:Kx,label:qm,badge:$w}};function sIt(){Object.entries(oIt).forEach(([t,e])=>{Object.entries(e).forEach(([n,r])=>{OBe(t,n,r)})})}sIt();var NBe=function(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,e||[])).next())})};const{version:lIt}=QIe;function cIt(){return Number((lIt||"").split(".")[0])}const IBe=(()=>{let t;return()=>(t||(cIt()>=18?t=JV(()=>import("./chunk-S48GxbI4.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57])):t=JV(()=>import("./chunk-COoHjZYh.js"),__vite__mapDeps([58,2,3,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57]))),t)})();function _0e(t,e){return NBe(this,void 0,void 0,function*(){const{render:n}=yield IBe();return n(t,e)})}function uIt(t){return NBe(this,void 0,void 0,function*(){const{unmount:e}=yield IBe();return e(t)})}class fIt extends QP{getKeyStyle(e){return Object.assign({},super.getKeyStyle(e))}constructor(e){super(e)}update(e){super.update(e)}connectedCallback(){super.connectedCallback();const{component:e}=this.attributes;_0e(e,this.getDomElement())}attributeChangedCallback(e,n,r){super.attributeChangedCallback(e,n,r),e==="component"&&n!==r&&_0e(this.attributes.component,this.getDomElement())}destroy(){uIt(this.getDomElement()),super.destroy()}}class hIt extends Gw{getActiveIds(e){const{model:n,graph:r}=this.context,i=e.target.id,a=r.getElementType(i),o=[i];if(a==="edge"){const s=n.getEdgeDatum(i);this.collectChainNodes(s.source,"in",o),this.collectChainNodes(s.target,"out",o)}else a==="node"&&this.collectChainNodes(i,"both",o);return r.frontElement(o),o}collectChainNodes(e,n,r){const{model:i}=this.context;i.getRelatedEdgesData(e,n).forEach(o=>{r.includes(pt(o))||r.push(pt(o)),r.includes(o.source)||(r.push(o.source),this.collectChainNodes(o.source,"in",r)),r.includes(o.target)||(r.push(o.target),this.collectChainNodes(o.target,"out",r))})}}class dIt extends Gw{getActiveIds(e){const{model:n,graph:r}=this.context,i=e.target.id,a=r.getElementType(i),o=[i];if(a==="edge"){const s=n.getEdgeDatum(i);o.push(s.source,s.target)}else a==="node"&&o.push(...n.getRelatedEdgesData(i).map(pt));return r.frontElement(o),o}}class pIt extends Ste{getControlPoints(e){const[n,r]=this.getEndpoints(e,!1),[i]=n,[,a]=r;return[[i,a]]}}class gIt extends Bd{beforeDraw(e){const{model:n}=this.context,{nodes:r,edges:i}=n.getData(),a=r.filter(s=>s.depth===1),o=a.map(s=>s.id);return i.forEach(s=>{o.includes(s.target)&&(s.style||={},s.style.zIndex=a.length-a.findIndex(l=>l.id===s.target))}),e}}class one extends Bd{static defaultOptions={colors:["#1783FF","#F08F56","#D580FF","#00C9C9","#7863FF","#DB9D0D","#60C42D","#FF80CA","#2491B3","#17C76F"]};constructor(e,n){super(e,Object.assign({},one.defaultOptions,n))}beforeDraw(e){const n=this.context.model.getNodeData();if(n.length===0)return e;let r=0;const i=(a,o)=>{const s=n.find(l=>l.id==a);s&&(s.style||={},s.style.color=o||this.options.colors[r++%this.options.colors.length],s.children?.forEach(l=>i(l,s.style?.color)))};return n.filter(a=>a.depth===1).forEach(a=>i(a.id)),e}}const vIt=_c.div`
  ${({$placement:t})=>{switch(t){case"top":return"transform: translate(-50%, -100%); flex-direction: column-reverse;";case"right":return"transform: translate(0, -50%);";case"left":return"transform: translate(-100%, -50%); flex-direction: row-reverse;";default:return"transform: translate(-50%, 0); flex-direction: column;"}}}

  .arrow-count-icon-bar {
    ${({$placement:t})=>t==="top"||t==="bottom"?"width: 3px; height: 8px; margin: 0 7px;":"width: 8px; height: 3px; margin: 7px 0;"}
    background-color: ${({$color:t})=>t};
  }

  .arrow-count-icon-circle {
    width: 16px;
    height: 16px;
    color: #fff;
    font-weight: 600;
    font-size: 10px;
    line-height: ${({$isCollapsed:t})=>t?"16px":"14px"};
    text-align: center;
    background-color: ${({$color:t})=>t};
    border-radius: 50%;
  }

  .arrow-count-icon-circle-arrow {
    width: 16px;
    height: 16px;
    transform: ${({$isCollapsed:t,$placement:e})=>{if(t)return"none";switch(e){case"top":return"translateY(1px) rotate(-90deg)";case"right":return"translateX(-1px) rotate(0deg)";case"left":return"translateX(1px) rotate(180deg)";default:return"translateY(-1px) rotate(90deg)"}}};
  }

  display: ${({$isCollapsed:t})=>t?"flex":"none"};

  .collapsible-node-wrapper:hover & {
    display: flex;
  }
`,mIt=t=>{const{className:e,style:n,graph:r,data:i,isCollapsed:a,countType:o="descendant",placement:s="bottom"}=t,l=r.getNodeData(i.id).style?.color||"#99ADD1",c=(o==="descendant"?r.getDescendantsData(i.id):r.getChildrenData(i.id)).length;return et.createElement(vIt,{$color:l,$isCollapsed:a,$placement:s,className:`arrow-count-icon ${a?"arrow-count-icon-collapsed":""} ${e||""}`,style:n},et.createElement("div",{className:"arrow-count-icon-bar"}),et.createElement("div",{className:"arrow-count-icon-circle"},a?c:et.createElement("div",{className:"arrow-count-icon-circle-arrow"},et.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},et.createElement("path",{d:"M11,4 L5.5,8 L11,12",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))))},yIt=_c.div`
  height: 16px;
  width: 16px;
  transform: translate(-50%, -50%);
  background: #fff;
  border-radius: 50%;
  border: 2px solid #99add1;
  color: #99add1;
  font-weight: 800;
  line-height: 14px;
  text-align: center;
  box-sizing: content-box;
`,_It=t=>{const{isCollapsed:e,style:n,className:r}=t;return et.createElement(yIt,{className:r,style:n},e?"+":"-")},sne=Object.freeze(Object.defineProperty({__proto__:null,ArrowCountIcon:mIt,PlusMinusIcon:_It},Symbol.toStringTag,{value:"Module"})),bIt=_c.div`
  height: inherit;
  width: inherit;
  border-radius: 8px;
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.1);
  position: relative;
  border: none;
  background-color: #fff;
  box-sizing: content-box;

  ${t=>t.$isActive&&A_`
      transform: translate(-3px, -3px);
      border: 2px solid #1783ff;
    `}

  .org-chart-node-line {
    width: 100%;
    height: 6px;
    background-color: ${t=>t.$color};
    border-radius: 8px 8px 0 0;
  }

  .org-chart-node-content {
    height: calc(100% - 6px);
    margin: 0 16px 3px;
    display: flex;
    align-items: center;

    &-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 16px;
      background-color: ${t=>t.$color};
      font-weight: 600;
      font-size: 18px;
      text-align: center;
      line-height: 40px;
      color: #fff;
    }

    &-detail {
      width: calc(100% - 56px);
    }

    &-name {
      color: #242424;
      font-weight: 600;
      font-size: 18px;
      margin-bottom: 5px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    &-post {
      color: #616161;
      font-size: 14px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
  }
`,LBe=t=>{const{name:e,position:n,status:r="online",isActive:i,className:a,style:o}=t,s={online:"#1783FF",busy:"#00C9C9",offline:"#F08F56"};return et.createElement(bIt,{$color:s[r],$isActive:i,className:a,style:o},et.createElement("div",{className:"org-chart-node-line"}),et.createElement("div",{className:"org-chart-node-content"},et.createElement("div",{className:"org-chart-node-content-avatar"},e.slice(0,1)),et.createElement("div",{className:"org-chart-node-content-detail"},et.createElement("div",{className:"org-chart-node-content-name"},e),n&&et.createElement("div",{className:"org-chart-node-content-post"},n))))};var Bq=function(){return Bq=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Bq.apply(this,arguments)},d5=Bq({},QIe),EIt=d5.version;d5.render;d5.unmountComponentAtNode;var xIt;try{var SIt=Number((EIt||"").split(".")[0]);SIt>=18&&(xIt=d5.createRoot)}catch{}var TIt=new Map;typeof document<"u"&&TIt.set("tooltip",document.createElement("div"));var AIt=function(t){if(typeof document>"u")return"loading";var e=t.attachShadow({mode:"open"}),n=document.createElement("div"),r=document.createElement("style");r.innerHTML=`.loading {
    display: inline-block;
    position: relative;
    width: 80px;
    height: 80px;
  }
  .loading div {
    position: absolute;
    top: 33px;
    width: 13px;
    height: 13px;
    border-radius: 50%;
    background: #ccc;
    animation-timing-function: cubic-bezier(0, 1, 1, 0);
  }
  .loading div:nth-child(1) {
    left: 8px;
    animation: loading1 0.6s infinite;
  }
  .loading div:nth-child(2) {
    left: 8px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(3) {
    left: 32px;
    animation: loading2 0.6s infinite;
  }
  .loading div:nth-child(4) {
    left: 56px;
    animation: loading3 0.6s infinite;
  }
  @keyframes loading1 {
    0% {
      transform: scale(0);
    }
    100% {
      transform: scale(1);
    }
  }
  @keyframes loading3 {
    0% {
      transform: scale(1);
    }
    100% {
      transform: scale(0);
    }
  }
  @keyframes loading2 {
    0% {
      transform: translate(0, 0);
    }
    100% {
      transform: translate(24px, 0);
    }
  }
  `,n.classList.add("loading"),n.innerHTML="<div></div><div></div><div></div><div></div>",e.appendChild(r),e.appendChild(n)},wIt=function(t){var e=t.loadingTemplate,n=t.theme,r=n===void 0?"light":n,i=et.useRef(null);et.useEffect(function(){!e&&i.current&&AIt(i.current)},[]);var a=function(){return e||et.createElement("div",{ref:i})};return et.createElement("div",{className:"charts-loading-container",style:{position:"absolute",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,zIndex:99,backgroundColor:r==="dark"?"rgb(20, 20, 20)":"rgb(255, 255, 255)"}},a())},OIt=(function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),CIt=(function(t){OIt(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.state={hasError:!1},n.renderError=function(r){var i=n.props.errorTemplate;return typeof i=="function"?i(r):i||et.createElement("h5",null," ",r.message)},n}return e.getDerivedStateFromError=function(n){return{hasError:!0,error:n}},e.getDerivedStateFromProps=function(n,r){return r.children!==n.children?{children:n.children,hasError:!1,error:void 0}:null},e.prototype.render=function(){return this.state.hasError?this.renderError(this.state.error):et.createElement(jt.Fragment,null,this.props.children)},e})(et.Component),OG,RIt=function(){return OG||(OG=document.createElement("canvas").getContext("2d")),OG},MIt=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))},kBe=Ve.memoize(function(t,e){e===void 0&&(e={});var n=e.fontSize,r=e.fontFamily,i=r===void 0?"sans-serif":r,a=e.fontWeight,o=e.fontStyle,s=e.fontVariant,l=RIt();return l.font=[o,a,s,"".concat(n,"px"),i].join(" "),l.measureText(Ve.isString(t)?t:"")},function(t,e){return e===void 0&&(e={}),MIt([t],Ve.values(e),!0).join("")}),DBe=function(t,e){return e===void 0&&(e={}),kBe(t,e).width},PIt=function(t,e){e===void 0&&(e={});var n=kBe(t,e);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent};function NIt(t,e){let n=0,r=0,i=0;return t.length===4?(n=parseInt(t[1]+t[1],16),r=parseInt(t[2]+t[2],16),i=parseInt(t[3]+t[3],16)):t.length===7&&(n=parseInt(t[1]+t[2],16),r=parseInt(t[3]+t[4],16),i=parseInt(t[5]+t[6],16)),`rgba(${n}, ${r}, ${i}, ${e})`}function IIt(t,e){let n=0,r=0,i=0;t.length===4?(n=parseInt(t[1]+t[1],16),r=parseInt(t[2]+t[2],16),i=parseInt(t[3]+t[3],16)):t.length===7&&(n=parseInt(t[1]+t[2],16),r=parseInt(t[3]+t[4],16),i=parseInt(t[5]+t[6],16)),n=Math.max(0,n-e),r=Math.max(0,r-e),i=Math.max(0,i-e);const a=o=>o.toString(16).padStart(2,"0");return`#${a(n)}${a(r)}${a(i)}`}const LIt=_c.div`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow-wrap: anywhere;
  line-height: 1.5em;
  text-align: center;
  height: inherit;
  width: inherit;
  box-sizing: content-box;
  font-size: 14px;

  ${({$type:t,$color:e,$borderWidth:n})=>{switch(t){case"normal":return`
          color: ${e};
        `;case"filled":return A_`
          color: #fff;
          background-color: ${e};
          border-radius: 8px;
        `;case"outlined":return A_`
          height: calc(100% - 2 * ${n}px);
          width: calc(100% - 2 * ${n}px);
          color: ${e};
          background-color: #fff;
          border: ${n}px solid ${e};
          border-radius: 8px;
        `;case"underlined":return A_`
          height: calc(100% - ${n}px / 2);
          width: inherit;
          border-bottom: ${n}px solid ${e};
          background-color: #fff;
          color: ${e};
        `}}}

  ${({$isActive:t,$isSelected:e,$borderWidth:n,$color:r})=>(t||e)&&A_`
      height: calc(100% - 2 * ${n}px);
      width: calc(100% - 2 * ${n}px);
      border: ${n}px solid ${IIt(r,100)};
      ${e&&`box-shadow: 0 0 0 2px ${NIt(r,.1)};`}
    `}
`,BBe=t=>{const{className:e,style:n={},type:r="normal",text:i="",font:a,color:o="#1783ff",borderWidth:s=3,maxWidth:l=1/0,isActive:c=!1,isSelected:u=!1}=t,f=DBe(i,a)>l;return et.createElement(LIt,{$type:r,$color:o,$borderWidth:s,$isActive:c,$isSelected:u,className:`text-node text-node-${r} ${e||""}`,style:{...n,...a}},et.createElement("div",{style:f?{width:"calc(100% - 12px)"}:{}},i))},cN=Object.freeze(Object.defineProperty({__proto__:null,OrganizationChartNode:LBe,TextNode:BBe},Symbol.toStringTag,{value:"Module"})),kIt=_c.div`
  position: relative;
  height: inherit;
  width: inherit;
`,DIt=_c.div`
  position: absolute;
  z-index: 10;

  &:hover {
    cursor: pointer;
  }

  ${({$placement:t,$offsetX:e,$offsetY:n})=>{const r={top:`left: calc(50% + ${e}px); top: ${n}px;`,bottom:`left: calc(50% + ${e}px); top: calc(100% + ${n}px);`,right:`left: calc(100% + ${e}px); top: calc(50% + ${n}px);`,left:`left: ${e}px; top: calc(50% + ${n}px);`};return A_`
      ${r[t]}
    `}}
`,BIt=t=>e=>{const{data:n,graph:r,trigger:i,iconRender:a,iconPlacement:o,iconOffsetX:s,iconOffsetY:l,iconClassName:c,iconStyle:u,refreshLayout:f}=e,[h,d]=jt.useState(Ve.get(n,"style.collapsed",!1)),p=jt.useRef(null),g=jt.useRef(null),v=i==="icon"&&!Ve.isEmpty(n.children),y=async E=>{E.stopPropagation(),await r[h?"expandElement":"collapseElement"](pt(n)),d(T=>!T),f&&await r.layout()};jt.useEffect(()=>{const E=i==="icon"?g.current:i==="node"?p.current:i;return E?.addEventListener("click",y),()=>{E?.removeEventListener("click",y)}},[i,h]);const _=E=>typeof E=="function"?E.call(r,n):E;return et.createElement(kIt,{ref:p,className:"collapsible-node-wrapper"},v&&et.createElement(DIt,{ref:g,$placement:_(o),$offsetX:_(s),$offsetY:_(l),className:c,style:u},a?.call(r,h,n)),t.call(r,n))},FIt=(t,e,n)=>{const r=(i=!1)=>{const[a,o]=i?["target","source"]:["source","target"];return e.filter(s=>s[a]===t).map(s=>s[o])};return n==="out"?r():n==="in"?r(!0):r().concat(r(!0))},Fq={nodes:[],edges:[]};function FBe(t){if(typeof t!="object"||t===null||!("id"in t))return!1;if("children"in t){if(!Array.isArray(t.children))return!1;for(const e of t.children)if(!FBe(e))return!1}return!0}function UBe(t){if(typeof t!="object"||t===null||!Object.keys(t).every(a=>["nodes","edges","combos"].includes(a)))return!1;const{nodes:e=[],edges:n=[],combos:r=[]}=t;if(!Array.isArray(e)||!Array.isArray(n)||!Array.isArray(r))return!1;const i=new Set(e.map(a=>a.id));return!(!e.every(a=>typeof a=="object"&&a!==null&&"id"in a)||!n.every(a=>i.has(a.source)&&i.has(a.target)))}function UIt(t){if(!UBe(t))return;const{nodes:e=[],edges:n=[]}=t,r=Object.fromEntries(e.map(l=>[l.id,l])),i=Object.fromEntries(e.map(l=>[l.id,0])),a=Object.fromEntries(e.map(l=>[l.id,[]]));for(const{source:l,target:c}of n)a[l].push(c),i[c]=(i[c]||0)+1;const o=Object.entries(i).filter(([l,c])=>c===0).map(([l])=>l);if(o.length!==1)return;const s=l=>({...r[l],children:a[l].map(s)});return s(o[0])}function jIt(t,e){return FBe(t)?MBe(t,{getNodeData:(n,r)=>{if(n.depth=r,n.style||={},e&&(n.style.collapsed=r>=e),!n.children)return n;const{children:i,...a}=n;return{...a,children:i.map(o=>o.id)}}}):Fq}function p5(t,e){if(!t)return Fq;const n=UBe(t)?UIt(t):t;return n?jIt(n,e):Fq}const{PlusMinusIcon:zIt}=sne;class lne extends Bd{static defaultOptions={enable:!0,trigger:"icon",direction:"out",iconRender:e=>et.createElement(zIt,{isCollapsed:e}),iconPlacement:"bottom",iconOffsetX:0,iconOffsetY:0,iconClassName:"",iconStyle:{},refreshLayout:!1};constructor(e,n){super(e,Object.assign({},lne.defaultOptions,n))}afterLayout(){const{graph:e,element:n,model:r}=this.context,{nodes:i=[],edges:a=[]}=e.getData(),{enable:o,...s}=this.options;i.forEach(c=>{const u=pt(c);if(c.children&&c.children.length>0)return;const f=FIt(u,a,this.options.direction);f.length!==0&&r.updateNodeData([{id:u,children:f}])});const l=e.getOptions().node;if(Ve.has(l,"style.component")){const c=Ve.get(l,"style.component");Ve.set(l,"style.component",u=>{if(!(typeof o=="function"?o(u):o))return c.call(e,u);const f=BIt(c);return et.createElement(f,{data:u,graph:e,...s})})}e.setNode(l),e.draw()}}const $It=(t,e,n)=>{const[r,i]=e,[a,o]=n;if(i===r)return a;const s=(t-r)/(i-r);return a+s*(o-a)},HIt=(t,e,n)=>{const[r,i]=e,[a,o]=n,s=Math.log(t-r+1)/Math.log(i-r+1);return a+s*(o-a)},GIt=(t,e,n,r=2)=>{const[i,a]=e,[o,s]=n,l=Math.pow((t-i)/(a-i),r);return o+l*(s-o)},WIt=(t,e,n)=>{const[r,i]=e,[a,o]=n,s=Math.sqrt((t-r)/(i-r));return a+s*(o-a)};class cne extends Bd{static defaultOptions={minValue:(e,n)=>Math.min(...Object.values(n)),maxValue:(e,n)=>Math.max(...Object.values(n)),minLineWidth:1,maxLineWidth:10,scale:"linear"};constructor(e,n){super(e,Object.assign({},cne.defaultOptions,n))}beforeDraw(e){const{maxValue:n,minValue:r,maxLineWidth:i,minLineWidth:a,scale:o,value:s}=this.options,l=this.context.model.getEdgeData(),c=typeof s=="function"?s:()=>s,u=Object.fromEntries(l.map(d=>[pt(d),c(d)])),{add:{edges:f},update:{edges:h}}=e;return[...f.values(),...h.values()].forEach(d=>{const p=this.assignLineWidthByValue(u[pt(d)]||0,typeof r=="function"?r(d,u):r,typeof n=="function"?n(d,u):n,typeof a=="function"?a(d):a,typeof i=="function"?i(d):i,o);d.style||={},d.style.lineWidth=p}),e}assignLineWidthByValue=(e,n,r,i,a,o)=>{const s=[n,r],l=[i,a];if(e<n||e>r||n===r)return l[0];if(typeof o=="function")return o(e,s,l);switch(o){case"linear":return $It(e,s,l);case"log":return HIt(e,s,l);case"pow":return GIt(e,s,l,2);case"sqrt":return WIt(e,s,l);default:return l[0]}}}class VIt extends Bd{beforeDraw(e){const{graph:n,element:r}=this.context,{add:{nodes:i},update:{nodes:a}}=e;return[...i.values(),...a.values()].forEach(o=>{r.computeElementDefaultStyle("node",{graph:n,datum:o});const s=r.getDefaultStyle(o.id),[l,c]=Fh(s.size);o.style||(o.style={}),o.style.dx=-l/2,o.style.dy=-c/2}),e}}const YIt={node:{react:fIt},edge:{indented:pIt},behavior:{"hover-activate-neighbors":dIt,"hover-activate-chain":hIt},transform:{"translate-react-node-origin":VIt,"collapse-expand-react-node":lne,"assign-color-by-branch":one,"map-edge-line-width":cne,"arrange-edge-z-index":gIt}};function XIt(){Object.entries(YIt).forEach(([t,e])=>{Object.entries(e).forEach(([n,r])=>{OBe(t,n,r)})})}XIt();var qIt=et.createContext({graph:null,isReady:!1}),Uq=function(){return Uq=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Uq.apply(this,arguments)},ZIt=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a};function KIt(t){var e=t.onInit,n=t.onReady,r=t.onDestroy,i=t.options,a=ZIt(jt.useState(!1),2),o=a[0],s=a[1],l=jt.useRef(null),c=jt.useRef(null);return jt.useEffect(function(){if(!(l.current||!c.current)){var u=new CBe(Uq({container:c.current},i));return l.current=u,s(!0),e?.(l.current),function(){var f=l.current;f&&(f.destroy(),r?.(),l.current=null)}}},[]),jt.useEffect(function(){var u=c.current,f=l.current;!i||!u||!f||f.destroyed||(f.setOptions(i),f.render().then(function(){return n?.(f)}))},[i]),{graph:l.current,containerRef:c,isReady:o}}var jq=function(){return jq=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},jq.apply(this,arguments)},QIt=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n},JIt=jt.forwardRef(function(t,e){var n=t.style,r=t.children,i=QIt(t,["style","children"]),a=KIt(i),o=a.graph,s=a.containerRef,l=a.isReady;jt.useImperativeHandle(e,function(){return o},[o]);var c=jq({height:"inherit",position:"relative"},n);return r?et.createElement(qIt.Provider,{value:{graph:o,isReady:l}},et.createElement("div",{ref:s,style:c},l&&r)):et.createElement("div",{ref:s,style:c})}),eLt=jt.memo(JIt);const pb=jt.forwardRef(({children:t,...e},n)=>{const{containerStyle:r,className:i,onInit:a,onReady:o,onDestroy:s,errorTemplate:l,loading:c,loadingTemplate:u,...f}=e,h=jt.useRef(null);return jt.useImperativeHandle(n,()=>h.current),et.createElement(CIt,{errorTemplate:l},c&&et.createElement(wIt,{loadingTemplate:u}),!Ve.isEmpty(f.data)&&et.createElement(eLt,{ref:d=>{h.current=d},className:i,style:r,options:f,onInit:a,onReady:o,onDestroy:s},t))}),gb={autoResize:!0,behaviors:[{key:"zoom-canvas",type:"zoom-canvas"},{key:"drag-canvas",type:"drag-canvas"}]};function Zm(...t){if(t.length===0)return{};const e={...t[0]};for(let n=1;n<t.length;n++){const r=t[n];for(const i in r)if(r.hasOwnProperty(i)){const a=r[i],o=e[i];["component","data"].includes(i)?e[i]=a:typeof a=="function"?["plugins","behaviors","transforms"].includes(i)?e[i]=a(o||[]):e[i]=function(s){const l=a.call(this,s);return Ve.isPlainObject(l)?Zm(o,l):l}:Ve.isPlainObject(a)&&Ve.isPlainObject(o)?e[i]=Zm(o,a):e[i]=a}}return e}const tLt={node:{type:"circle",style:{labelText:t=>t.id}}},nLt=({direction:t,compact:e})=>{const n=i=>Ve.isEmpty(i.children),r=e?"compact-box":"dendrogram";return t==="vertical"?{node:{style:{labelBackground:!0,labelPlacement:"right",labelTransform:i=>n(i)?"rotate(90deg) translate(18px)":"translate(18px)",ports:[{placement:"top"},{placement:"bottom"}]}},edge:{type:"cubic-vertical"},layout:{type:r,direction:"TB",nodeSep:40,rankSep:140,getVGap:()=>80,getHGap:()=>20}}:t==="horizontal"?{node:{style:{labelBackground:!0,labelPlacement:i=>n(i)?"right":"left",ports:[{placement:"left"},{placement:"right"}]}},edge:{type:"cubic-horizontal"},layout:{type:r,direction:"LR",nodeSep:40,rankSep:200,getVGap:()=>5,getHGap:()=>100}}:{node:{style:{labelBackground:!0}},edge:{type:"cubic-radial"},layout:{type:r,direction:"RL",radial:!0,nodeSep:40,rankSep:200,getVGap:()=>30,getHGap:()=>60},transforms:i=>[...i,"place-radial-labels"]}};jt.forwardRef(({children:t,...e},n)=>{const r=jt.useMemo(()=>{const{data:i,defaultExpandLevel:a,direction:o="horizontal",compact:s=!1,...l}=e;return Zm(gb,tLt,{data:p5(i,a)},nLt({direction:o,compact:s}),l)},[e]);return et.createElement(pb,{...r,ref:n},t)});function Oo(t,e){const n=e?typeof e=="function"?e(t):Ve.get(t,`data.${e}`,t.id):t.id;return String(n)}function Dm(t,e=[0,0],n={fontSize:16,fontFamily:"PingFang SC"},r=0,i=1/0){const a=PIt(t,n),o=DBe(t,n)+4,s=i===1/0?1:Math.ceil(o/i),[l,c]=e;return[Math.max(r,Math.min(i,o))+l,c+a+a*1.5*(s-1)]}const rLt={node:{style:{size:10,labelPlacement:"center"}},edge:{type:"polyline"},layout:{type:"fishbone",hGap:40,vGap:60},animation:!1},b0e="system-ui, sans-serif",iLt=(t,e)=>e===0?Dm(t,[80,48],{fontSize:24,fontWeight:600,fontFamily:b0e}):e===1?Dm(t,[80,30],{fontSize:18,fontFamily:b0e}):[2,30],aLt=t=>{const e=t.depth;return e===0?"#EFF0F0":e===1?t.style?.color||"#EFF0F0":"transparent"};function oLt({type:t,labelField:e}){const n={node:{type:"rect",style:{fill:r=>aLt(r),labelFill:r=>r.depth===1?"#fff":"#262626",labelFillOpacity:1,labelFontSize:r=>r.depth===0?24:r.depth===1?18:16,labelFontWeight:r=>r.depth===0?600:400,labelLineHeight:r=>r.depth===0?26:r.depth===1?20:18,labelText:r=>Oo(r,e),radius:8,size:r=>iLt(r.id,r.depth)}},edge:{type:"polyline",style:{lineWidth:3,stroke:function(r){const i=this.getNodeData(r.target);return Ve.get(i,"style.color","#99ADD1")}}},transforms:r=>[...r,{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}]};return n.layout||={},t==="decision"?(n.node.style.labelPlacement=r=>r.depth===0||r.depth===1?"center":"right",Object.assign(n.layout,{direction:"LR"})):t==="cause"&&(n.node.style.labelPlacement=r=>r.depth===0||r.depth===1?"center":"left",Object.assign(n.layout,{direction:"RL"})),n}const sLt=jt.forwardRef(({children:t,...e},n)=>{const{data:r,defaultExpandLevel:i,type:a="cause",labelField:o,...s}=e,l=jt.useMemo(()=>Zm(gb,rLt,{data:p5(r)},oLt({type:a,labelField:o}),s),[e]);return et.createElement(pb,{...l,ref:n},t)}),{TextNode:lLt}=cN,cLt={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{strokeOpacity:.5},state:{active:{strokeOpacity:1}}},layout:{type:"dagre",rankdir:"LR",animation:!1},transforms:["translate-react-node-origin"]},uLt=({labelField:t})=>({node:{style:{component:n=>{const r=Oo(n,t);return et.createElement(lLt,{type:"filled",text:r})},size:[100,40],ports:[{placement:"left"},{placement:"right"}]}}});jt.forwardRef(({children:t,...e},n)=>{const{labelField:r,...i}=e,a=jt.useMemo(()=>Zm(gb,cLt,uLt({labelField:r}),i),[e]);return et.createElement(pb,{...a,ref:n},t)});const{TextNode:fLt}=cN,hLt={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,endArrow:!0,radius:8,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]},dLt=({direction:t,labelField:e})=>({node:{style:{component:r=>{const i=Oo(r,e);return et.createElement(fLt,{type:"filled",text:i})},size:[100,40],ports:t==="vertical"?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},layout:{type:"dagre",rankdir:t==="vertical"?"TB":"LR"}}),pLt=jt.forwardRef(({children:t,...e},n)=>{const r=jt.useMemo(()=>{const{direction:i="horizontal",labelField:a,...o}=e;return Zm(gb,hLt,dLt({direction:i,labelField:a}),o)},[e]);return et.createElement(pb,{...r,ref:n},t)}),gLt=Ve.memoize((t,e)=>{if(!e)return"center";const n=pl(t)[0];return pl(e)[0]>n?"left":"right"},(t,e)=>e?[pl(t),pl(e)].flat().join("-"):"center"),sy=(t,e)=>{const n=t.getParentData(pt(e),"tree");return gLt(e,n)},vm=Ve.memoize((t,e,n,r=0)=>{const i={fontWeight:r===0?600:400,fontSize:r===0?24:16},o=Dm(t,r===0?[64,30]:[12,12],i,e,n);return{font:i,size:o}}),M_=Ve.memoize((t,e,n,r=0)=>{const i={fontWeight:r===0||r===1?600:400,fontSize:r===0?24:16},o=Dm(t,r===0?[64,30]:[36,24],i,e,n);return{font:i,size:o}}),{ArrowCountIcon:vLt}=sne,{TextNode:CG}=cN,mLt={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"indented",style:{lineWidth:3}},transforms:t=>[...t,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(e,n){return et.createElement(vLt,{graph:this,data:n,isCollapsed:e})}}],layout:{type:"indented",direction:"LR",indent:t=>yLt(t,20),getVGap:()=>14,preLayout:!1},animation:{duration:500}},yLt=(t,e)=>{if(t.depth===0)return 0;let n=e,r=t.parent;for(;r;)n+=r.width/2,r=r.parent;return n/t.depth},E0e=(t,e)=>{const n=sy(t,e);return n==="left"?"right":n==="center"?"center":"left"},_Lt=({type:t,nodeMinWidth:e,nodeMaxWidth:n,direction:r,labelField:i})=>{let a={};const o=e||0,s=n||300;if(t==="boxed")a={node:{style:{component:function(l){const c=l.depth,u=l.style?.color,f=Oo(l,i),{font:h}=M_(f,o,s,c),d={type:c===0||c===1?"filled":"outlined",text:f,color:c===0?"#f1f4f5":u,maxWidth:s,font:h,style:{textAlign:E0e(this,l),...c===0?{color:"#252525"}:{}}};return et.createElement(CG,{...d})},size:l=>{const c=Oo(l,i);return M_(c,o,s,l.depth).size}}},edge:{style:{stroke:function(l){const c=this.getNodeData(l.source);return Ve.get(c,"style.color","#99ADD1")},radius:16}},transforms:l=>[...l,{type:"assign-color-by-branch",key:"assign-color-by-branch"}],layout:{type:"indented",getWidth:l=>{const c=Oo(l,i),[u]=M_(c,o,s,l.depth).size;return u},getHeight:l=>{const c=Oo(l,i),[,u]=M_(c,o,s,l.depth).size;return u}}};else if(t==="linear")a={node:{style:{component:function(l){const c=l.depth,u=l.style?.color,f=Oo(l,i),{font:h}=vm(f,o,s,c),d={text:f,color:u,maxWidth:s,font:h};return Object.assign(d,c===0?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:{textAlign:E0e(this,l)}}),et.createElement(CG,{...d})},size:l=>{const c=Oo(l,i);return vm(c,o,s,l.depth).size},ports:function(l){const c=sy(this,l);return c==="left"?[{placement:"bottom"},{placement:"bottom-right"}]:c==="center"?[{placement:"bottom"}]:[{placement:"bottom"},{placement:"bottom-left"}]}}},edge:{style:{stroke:function(l){const c=this.getNodeData(l.target);return Ve.get(c,"style.color","#99ADD1")},radius:24}},layout:{type:"indented",getWidth:l=>{const c=Oo(l,i),[u]=vm(c,o,s,l.depth).size;return u},getHeight:l=>{const c=Oo(l,i),[,u]=vm(c,o,s,l.depth).size;return u},getVGap:()=>12},transforms:l=>[...l,{type:"assign-color-by-branch",key:"assign-color-by-branch"},{type:"arrange-edge-z-index",key:"arrange-edge-z-index"}]};else{const l=[24,16];a={node:{style:{component:c=>{const u=Oo(c,i);return et.createElement(CG,{type:"filled",text:u})},size:c=>{const u=Oo(c,i);return Dm(u,l)}}},layout:{type:"indented",getWidth:c=>{const u=Oo(c,i),[f]=Dm(u,l);return f},getHeight:c=>{const u=Oo(c,i),[,f]=Dm(u,l);return f}}}}return r&&(a.layout||={},Object.assign(a.layout,{direction:r==="alternate"?"H":r==="left"?"RL":"LR"})),a},bLt=jt.forwardRef(({children:t,...e},n)=>{const{data:r,defaultExpandLevel:i,type:a="default",nodeMinWidth:o,nodeMaxWidth:s,direction:l="right",labelField:c,...u}=e,f=jt.useMemo(()=>Zm(gb,mLt,{data:p5(r,i)},_Lt({type:a,nodeMinWidth:o,nodeMaxWidth:s,direction:l,labelField:c}),u),[e]);return et.createElement(pb,{...f,ref:n},t)}),{ArrowCountIcon:ELt}=sne,{TextNode:RG}=cN,xLt={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"cubic-horizontal",style:{lineWidth:3}},transforms:t=>[...t,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",enable:!1,trigger:"icon",iconRender:function(e,n){const r=sy(this,n);return et.createElement(ELt,{graph:this,data:n,isCollapsed:e,placement:r==="left"?"left":"right"})},iconPlacement:function(e){return sy(this,e)==="left"?"left":"right"}}],layout:{type:"mindmap",direction:"H",preLayout:!1,getWidth:()=>120,getHGap:()=>64},animation:{duration:500}};function SLt({type:t,direction:e,nodeMinWidth:n,nodeMaxWidth:r,labelField:i}){let a={};if(t==="boxed"){const o=n||120,s=r||300;a={node:{style:{component:l=>{const c=l.depth,u=l.style?.color,f=Oo(l,i),{font:h}=M_(f,o,s,c),d={text:f,color:u,maxWidth:s,font:h};return Object.assign(d,c===0?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:c===1?{type:"filled"}:{type:"outlined"}),et.createElement(RG,{...d})},size:l=>{const c=Oo(l,i);return M_(c,o,s,l.depth).size},dx:function(l){const c=sy(this,l),u=Oo(l,i),[f]=M_(u,o,s,l.depth).size;return c==="left"?-f:c==="center"?-f/2:0},ports:[{placement:"left"},{placement:"right"}]}},edge:{style:{stroke:function(l){const c=this.getNodeData(l.source);return Ve.get(c,"style.color","#99ADD1")}}},transforms:l=>[...l,{type:"assign-color-by-branch",key:"assign-color-by-branch"}],layout:{type:"mindmap",getHeight:l=>{const c=Oo(l,i),[,u]=M_(c,o,s,l.depth).size;return u},getVGap:()=>14}}}else if(t==="linear"){const o=n||0,s=r||300;a={node:{style:{component:function(l){const c=sy(this,l),u=l.depth,f=l.style?.color,h=Oo(l,i),{font:d}=vm(h,o,s,u),p={text:h,color:f,maxWidth:s,font:d};return Object.assign(p,u===0?{type:"filled",color:"#f1f4f5",style:{color:"#252525"}}:{type:"underlined",style:c==="left"?{textAlign:"right"}:c==="center"?{textAlign:"center"}:{}}),et.createElement(RG,{...p})},size:l=>{const c=Oo(l,i);return vm(c,o,s,l.depth).size},dx:function(l){const c=sy(this,l),u=Oo(l,i),[f]=vm(u,o,s,l.depth).size;return c==="left"?-f:c==="center"?-f/2:0},dy:function(l){const c=Oo(l,i),[,u]=vm(c,o,s,l.depth).size;return u/2},ports:function(l){return sy(this,l)==="center"?[{placement:"left"},{placement:"right"}]:[{placement:"left-bottom"},{placement:"right-bottom"}]}}},edge:{style:{stroke:function(l){const c=this.getNodeData(l.target);return Ve.get(c,"style.color","#99ADD1")}}},layout:{type:"mindmap",getHeight:l=>{const c=Oo(l,i),[,u]=vm(c,o,s,l.depth).size;return u},getVGap:()=>12},transforms:l=>[...l.filter(c=>c.key!=="collapse-expand-react-node"),{type:"assign-color-by-branch",key:"assign-color-by-branch"},{...l.find(c=>c.key==="collapse-expand-react-node"),iconOffsetY:c=>{if(c.depth===0)return 0;const u=Oo(c,i),[,f]=vm(u,o,s,c.depth).size;return f/2}}]}}else{const o=[24,16];a={node:{style:{component:s=>{const l=Oo(s,i);return et.createElement(RG,{type:"filled",text:l})},size:s=>{const l=Oo(s,i);return Dm(l,o)},dx:function(s){const l=sy(this,s),c=Oo(s,i),[u]=Dm(c,o);return l==="left"?-u:l==="center"?-u/2:0},ports:[{placement:"left"},{placement:"right"}]}},layout:{type:"mindmap",getHeight:s=>{const l=Oo(s,i),[,c]=Dm(l,o);return c}}}}return e&&(a.layout||={},a.layout.direction=e==="alternate"?"H":e==="left"?"RL":"LR"),a}const TLt=jt.forwardRef(({children:t,...e},n)=>{const r=jt.useMemo(()=>{const{data:i,type:a="default",nodeMinWidth:o,nodeMaxWidth:s,direction:l="alternate",labelField:c,defaultExpandLevel:u,...f}=e;return Zm(gb,xLt,{data:p5(i,u)},SLt({type:a,nodeMinWidth:o,nodeMaxWidth:s,direction:l,labelField:c}),f)},[e]);return et.createElement(pb,{...r,ref:n},t)}),MG=32,ALt={node:{type:"circle"},layout:{type:"d3-force",link:{distance:MG*4},collide:{radius:MG},manyBody:{strength:-MG*22},x:{},y:{}}},wLt=jt.forwardRef(({children:t,...e},n)=>{const r=jt.useMemo(()=>Zm(gb,ALt,e),[e]);return et.createElement(pb,{...r,ref:n},t)}),{TextNode:OLt}=cN,CLt={node:{type:"react",state:{active:{halo:!1},selected:{halo:!1}}},edge:{type:"polyline",style:{lineWidth:2,router:{type:"orth"}}},layout:{type:"dagre",animation:!1},transforms:["translate-react-node-origin"]};function RLt({direction:t,labelField:e}){return{node:{style:{component:r=>{const i=Oo(r,e);return et.createElement(OLt,{type:"filled",text:i})},size:[100,40],ports:t==="vertical"?[{placement:"top"},{placement:"bottom"}]:[{placement:"left"},{placement:"right"}]}},transforms:r=>[...r,{type:"collapse-expand-react-node",key:"collapse-expand-react-node",iconPlacement:t==="vertical"?"bottom":"right",enable:!1,refreshLayout:!0}],layout:{type:"dagre",rankdir:t==="vertical"?"TB":"LR"}}}const MLt=jt.forwardRef(({children:t,...e},n)=>{const r=jt.useMemo(()=>{const{direction:i="vertical",labelField:a,...o}=e;return Zm(gb,CLt,RLt({direction:i,labelField:a}),o)},[e]);return et.createElement(pb,{...r,ref:n},t)});function FM(t){"@babel/helpers - typeof";return FM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},FM(t)}var PLt=["children"];function x0e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function S0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?x0e(Object(n),!0).forEach(function(r){NLt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x0e(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NLt(t,e,n){return e=ILt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ILt(t){var e=LLt(t,"string");return FM(e)=="symbol"?e:String(e)}function LLt(t,e){if(FM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(FM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kLt(t,e){if(t==null)return{};var n=DLt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function DLt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var BLt=MBe;function g5(t){return BLt(t,{getNodeData:function(n,r){if(n.id=n.name,n.depth=r,!n.children)return n;var i=n.children,a=kLt(n,PLt);return S0e(S0e({},a),{},{children:i.map(function(o){return o.name})})},getEdgeData:function(n,r){return{source:n.name,target:r.name}}})}function jBe(t){return{nodes:t.nodes.map(function(e){return{id:e.name,style:{labelText:e.name}}}),edges:t.edges.map(function(e){return{source:e.source,target:e.target,style:{labelText:e.name}}})}}var FLt=["data"];function UM(t){"@babel/helpers - typeof";return UM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},UM(t)}function zq(){return zq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zq.apply(this,arguments)}function ULt(t,e){if(t==null)return{};var n=jLt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function jLt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function T0e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function A0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?T0e(Object(n),!0).forEach(function(r){zLt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T0e(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function zLt(t,e,n){return e=$Lt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $Lt(t){var e=HLt(t,"string");return UM(e)=="symbol"?e:String(e)}function HLt(t,e){if(UM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(UM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var GLt=function(e){var n=e.theme,r=n===void 0?"default":n;return{autoFit:"view",autoResize:!0,zoomRange:[.1,5],zoom:1,behaviors:["drag-canvas"],transforms:function(a){return[A0e(A0e({},a.find(function(o){return o.key==="assign-color-by-branch"})||{}),fte[r])]}}},WLt=function(e){var n=e.data,r=ULt(e,FLt),i=jt.useMemo(function(){return g5(n)},[n]),a=jw("FishboneDiagram",GLt(e),r);return et.createElement(sLt,zq({data:i},a))};function VLt(t){return YLt(t)?{node:{style:{ports:[{placement:"right"},{placement:"left"},{placement:"top"},{placement:"bottom"}]}},layout:{type:"snake",cols:3,rowGap:40}}:{}}function YLt(t){var e=t.nodes,n=e===void 0?[]:e,r=t.edges,i=r===void 0?[]:r,a={},o={},s={};n.forEach(function(d){a[d.id]=0,o[d.id]=0,s[d.id]=[]}),i.forEach(function(d){a[d.target]++,o[d.source]++,s[d.source].push(d.target)});var l=new Set,c=function d(p){l.has(p)||(l.add(p),s[p].forEach(d))};if(c(n[0].id),l.size!==n.length)return!1;var u=n.filter(function(d){return a[d.id]===0}),f=n.filter(function(d){return o[d.id]===0});if(u.length!==1||f.length!==1)return!1;var h=n.filter(function(d){return a[d.id]===1&&o[d.id]===1});return h.length===n.length-2}var XLt=["data"];function $q(){return $q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$q.apply(this,arguments)}function qLt(t,e){if(t==null)return{};var n=ZLt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ZLt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var KLt=BBe,QLt={autoResize:!0,autoFit:"view",zoomRange:[.1,5],zoom:1,node:{style:{component:function(e){var n,r=(n=e.states)===null||n===void 0?void 0:n.includes("active");return et.createElement(KLt,{text:e.id,isActive:r,type:"filled",style:{fontSize:12},borderWidth:2})},size:[140,32]}},edge:{style:{endArrow:!0,labelBackground:!0,labelMaxLines:2,labelMaxWidth:"40%",labelWordWrap:!0},state:{active:{halo:!1,labelWordWrap:!1,stroke:"#001f98"}}},behaviors:["drag-canvas",{type:"hover-activate-neighbors",onHover:function(e){e.view.setCursor("pointer")},onHoverEnd:function(e){e.view.setCursor("default")}}]},JLt=function(e){var n=e.data,r=qLt(e,XLt),i=jt.useMemo(function(){return jBe(n)},[n]),a=jw("FlowDiagram",VP(QLt,VLt(i)),r);return et.createElement(pLt,$q({data:i},a))};function jM(t){"@babel/helpers - typeof";return jM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jM(t)}var ekt=["data"];function Hq(){return Hq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hq.apply(this,arguments)}function tkt(t,e){if(t==null)return{};var n=nkt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nkt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function w0e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?w0e(Object(n),!0).forEach(function(r){rkt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w0e(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function rkt(t,e,n){return e=ikt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ikt(t){var e=akt(t,"string");return jM(e)=="symbol"?e:String(e)}function akt(t,e){if(jM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function okt(t){return ukt(t)||ckt(t)||lkt(t)||skt()}function skt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lkt(t,e){if(t){if(typeof t=="string")return Gq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gq(t,e)}}function ckt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function ukt(t){if(Array.isArray(t))return Gq(t)}function Gq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var fkt=function(e){var n=e.theme,r=n===void 0?"default":n;return{type:"boxed",autoFit:"view",autoResize:!0,padding:2,zoomRange:[.1,5],zoom:1,node:{animation:{translate:!1,update:!1}},edge:{animation:{translate:!1,update:!1}},transforms:function(a){return[].concat(okt(a.filter(function(o){return o.type!=="collapse-expand-react-node"})),[sL(sL({},a.find(function(o){return o.type==="collapse-expand-react-node"})),{},{enable:!0}),sL(sL({},a.find(function(o){return o.key==="assign-color-by-branch"})||{}),fte[r])])},behaviors:["drag-canvas"]}},hkt=function(e){var n=e.data,r=tkt(e,ekt),i=jt.useMemo(function(){return g5(n)},[n]),a=jw("MindMap",fkt(e),r);return et.createElement(TLt,Hq({data:i},a))},dkt=["data"];function Wq(){return Wq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wq.apply(this,arguments)}function pkt(t,e){if(t==null)return{};var n=gkt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function gkt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function vkt(t){return bkt(t)||_kt(t)||ykt(t)||mkt()}function mkt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ykt(t,e){if(t){if(typeof t=="string")return Vq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vq(t,e)}}function _kt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function bkt(t){if(Array.isArray(t))return Vq(t)}function Vq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ekt={autoFit:"view",autoResize:!0,zoomRange:[.1,5],zoom:1,node:{style:{size:28,labelFontSize:10,labelBackground:!0},animation:{enter:!1}},edge:{style:{labelFontSize:10,labelBackground:!0,endArrow:!0},animation:{enter:!1}},behaviors:["drag-canvas",{key:"hover-activate",type:"hover-activate",degree:1}],transforms:function(e){return[].concat(vkt(e),["process-parallel-edges"])},layout:{type:"force",animation:!1}},xkt=function(e){var n=e.data,r=pkt(e,dkt),i=jt.useMemo(function(){return jBe(n)},[n]),a=jw("NetworkGraph",Ekt,r);return et.createElement(wLt,Wq({data:i},a))};function zM(t){"@babel/helpers - typeof";return zM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zM(t)}var Skt=["data"];function Yq(){return Yq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yq.apply(this,arguments)}function Tkt(t,e){if(t==null)return{};var n=Akt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Akt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function O0e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function C0e(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O0e(Object(n),!0).forEach(function(r){wkt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O0e(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wkt(t,e,n){return e=Okt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Okt(t){var e=Ckt(t,"string");return zM(e)=="symbol"?e:String(e)}function Ckt(t,e){if(zM(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(zM(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Rkt(t){return Ikt(t)||Nkt(t)||Pkt(t)||Mkt()}function Mkt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pkt(t,e){if(t){if(typeof t=="string")return Xq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xq(t,e)}}function Nkt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ikt(t){if(Array.isArray(t))return Xq(t)}function Xq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Lkt=LBe,kkt={padding:[40,0,0,120],autoFit:"view",autoResize:!0,zoomRange:[.1,5],zoom:1,node:{style:{component:function(e){var n,r=(n=e.states)===null||n===void 0?void 0:n.includes("active");return et.createElement(Lkt,{name:e.name,position:e.description,status:"online",isActive:r})},size:[280,80]}},edge:{state:{active:{stroke:"#1890ff",halo:!1}}},behaviors:["drag-canvas","hover-activate-neighbors"],transforms:function(e){return[].concat(Rkt(e.filter(function(n){return n.type!=="collapse-expand-react-node"})),[C0e(C0e({},e.find(function(n){return n.type==="collapse-expand-react-node"})),{},{enable:!0,iconOffsetY:24})])},animation:!1},Dkt=function(e){var n=e.data,r=Tkt(e,Skt),i=jt.useMemo(function(){return g5(n)},[n]),a=jw("OrganizationChart",kkt,r);return et.createElement(MLt,Yq({data:i},a))};function $M(t){"@babel/helpers - typeof";return $M=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$M(t)}var Bkt=["data"];function qq(){return qq=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qq.apply(this,arguments)}function Fkt(t,e){if(t==null)return{};var n=Ukt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Ukt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function R0e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function lL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R0e(Object(n),!0).forEach(function(r){jkt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R0e(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jkt(t,e,n){return e=zkt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zkt(t){var e=$kt(t,"string");return $M(e)=="symbol"?e:String(e)}function $kt(t,e){if($M(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if($M(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hkt(t){return Ykt(t)||Vkt(t)||Wkt(t)||Gkt()}function Gkt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wkt(t,e){if(t){if(typeof t=="string")return Zq(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zq(t,e)}}function Vkt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Ykt(t){if(Array.isArray(t))return Zq(t)}function Zq(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xkt=function(e){var n=e.theme,r=n===void 0?"default":n;return{type:"linear",autoFit:"view",autoResize:!0,zoomRange:[.1,5],zoom:1,node:{animation:{update:!1,translate:!1}},edge:{animation:{update:!1,translate:!1}},transforms:function(a){return[].concat(Hkt(a.filter(function(o){return o.type!=="collapse-expand-react-node"})),[lL(lL({},a.find(function(o){return o.type==="collapse-expand-react-node"})),{},{enable:!0}),lL(lL({},a.find(function(o){return o.key==="assign-color-by-branch"})||{}),fte[r])])},behaviors:["drag-canvas"]}},qkt=function(e){var n=e.data,r=Fkt(e,Bkt),i=jt.useMemo(function(){return g5(n)},[n]),a=jw("IndentedTree",Xkt(e),r);return et.createElement(bLt,qq({data:i},a))},zBe={},$Be={},M0e=t=>$Be[t],Fd=(t,e)=>{$Be[t]=e},Zkt=t=>zBe[t],nO=(t,e)=>{zBe[t]=e},P0e={},PG={},NG=34,m2=10,IG=13;function HBe(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function Kkt(t,e){var n=HBe(t);return function(r,i){return e(n(r),i,t)}}function N0e(t){var e=Object.create(null),n=[];return t.forEach(function(r){for(var i in r)i in e||n.push(e[i]=i)}),n}function Ah(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function Qkt(t){return t<0?"-"+Ah(-t,6):t>9999?"+"+Ah(t,6):Ah(t,4)}function Jkt(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),r=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":Qkt(t.getUTCFullYear())+"-"+Ah(t.getUTCMonth()+1,2)+"-"+Ah(t.getUTCDate(),2)+(i?"T"+Ah(e,2)+":"+Ah(n,2)+":"+Ah(r,2)+"."+Ah(i,3)+"Z":r?"T"+Ah(e,2)+":"+Ah(n,2)+":"+Ah(r,2)+"Z":n||e?"T"+Ah(e,2)+":"+Ah(n,2)+"Z":"")}function eDt(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function r(f,h){var d,p,g=i(f,function(v,y){if(d)return d(v,y-1);p=v,d=h?Kkt(v,h):HBe(v)});return g.columns=p||[],g}function i(f,h){var d=[],p=f.length,g=0,v=0,y,_=p<=0,E=!1;f.charCodeAt(p-1)===m2&&--p,f.charCodeAt(p-1)===IG&&--p;function x(){if(_)return PG;if(E)return E=!1,P0e;var S,w=g,C;if(f.charCodeAt(w)===NG){for(;g++<p&&f.charCodeAt(g)!==NG||f.charCodeAt(++g)===NG;);return(S=g)>=p?_=!0:(C=f.charCodeAt(g++))===m2?E=!0:C===IG&&(E=!0,f.charCodeAt(g)===m2&&++g),f.slice(w+1,S-1).replace(/""/g,'"')}for(;g<p;){if((C=f.charCodeAt(S=g++))===m2)E=!0;else if(C===IG)E=!0,f.charCodeAt(g)===m2&&++g;else if(C!==n)continue;return f.slice(w,S)}return _=!0,f.slice(w,p)}for(;(y=x())!==PG;){for(var T=[];y!==P0e&&y!==PG;)T.push(y),y=x();h&&(T=h(T,v++))==null||d.push(T)}return d}function a(f,h){return f.map(function(d){return h.map(function(p){return u(d[p])}).join(t)})}function o(f,h){return h==null&&(h=N0e(f)),[h.map(u).join(t)].concat(a(f,h)).join(`
`)}function s(f,h){return h==null&&(h=N0e(f)),a(f,h).join(`
`)}function l(f){return f.map(c).join(`
`)}function c(f){return f.map(u).join(t)}function u(f){return f==null?"":f instanceof Date?Jkt(f):e.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:s,formatRows:l,formatRow:c,formatValue:u}}var tDt=eDt(","),nDt=tDt.parse,bh=63710088e-1,rDt={centimeters:bh*100,centimetres:bh*100,degrees:bh/111325,feet:bh*3.28084,inches:bh*39.37,kilometers:bh/1e3,kilometres:bh/1e3,meters:bh,metres:bh,miles:bh/1609.344,millimeters:bh*1e3,millimetres:bh*1e3,nauticalmiles:bh/1852,radians:1,yards:bh*1.0936};function HM(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function une(t,e,n){n===void 0&&(n={});for(var r=0,i=t;r<i.length;r++){var a=i[r];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:t};return HM(s,e,n)}function iDt(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:t};return HM(r,e,n)}function aDt(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function oDt(t,e,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:t};return HM(r,e,n)}function sDt(t,e){e===void 0&&(e="kilometers");var n=rDt[e];if(!n)throw new Error(e+" units is invalid");return t*n}function hhn(t){var e=t%(2*Math.PI);return e*180/Math.PI}function cL(t){var e=t%360;return e*Math.PI/180}function GBe(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function I0e(t){return t.type==="Feature"?t.geometry:t}function WBe(t,e,n){if(t!==null)for(var r,i,a,o,s,l,c,u=0,f=0,h,d=t.type,p=d==="FeatureCollection",g=d==="Feature",v=p?t.features.length:1,y=0;y<v;y++){c=p?t.features[y].geometry:g?t.geometry:t,h=c?c.type==="GeometryCollection":!1,s=h?c.geometries.length:1;for(var _=0;_<s;_++){var E=0,x=0;if(o=h?c.geometries[_]:c,o!==null){l=o.coordinates;var T=o.type;switch(u=0,T){case null:break;case"Point":if(e(l,f,y,E,x)===!1)return!1;f++,E++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],f,y,E,x)===!1)return!1;f++,T==="MultiPoint"&&E++}T==="LineString"&&E++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-u;i++){if(e(l[r][i],f,y,E,x)===!1)return!1;f++}T==="MultiLineString"&&E++,T==="Polygon"&&x++}T==="Polygon"&&E++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(x=0,i=0;i<l[r].length;i++){for(a=0;a<l[r][i].length-u;a++){if(e(l[r][i][a],f,y,E,x)===!1)return!1;f++}x++}E++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(WBe(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function lDt(t,e){var n,r,i,a,o,s,l,c,u,f,h=0,d=t.type==="FeatureCollection",p=t.type==="Feature",g=d?t.features.length:1;for(n=0;n<g;n++){for(s=d?t.features[n].geometry:p?t.geometry:t,c=d?t.features[n].properties:p?t.properties:{},u=d?t.features[n].bbox:p?t.bbox:void 0,f=d?t.features[n].id:p?t.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,i=0;i<o;i++){if(a=l?s.geometries[i]:s,a===null){if(e(null,h,c,u,f)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(a,h,c,u,f)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<a.geometries.length;r++)if(e(a.geometries[r],h,c,u,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}function VBe(t,e){lDt(t,function(n,r,i,a,o){var s=n===null?null:n.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return e(HM(n,i,{bbox:a,id:o}),r,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var u=n.coordinates[c],f={type:l,coordinates:u};if(e(HM(f,i),r,c)===!1)return!1}})}var Ak={REGISTERED_PROTOCOLS:{}},cDt=Object.defineProperty,uDt=Object.defineProperties,fDt=Object.getOwnPropertyDescriptors,L0e=Object.getOwnPropertySymbols,hDt=Object.prototype.hasOwnProperty,dDt=Object.prototype.propertyIsEnumerable,k0e=(t,e,n)=>e in t?cDt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v5=(t,e)=>{for(var n in e||(e={}))hDt.call(e,n)&&k0e(t,n,e[n]);if(L0e)for(var n of L0e(e))dDt.call(e,n)&&k0e(t,n,e[n]);return t},m5=(t,e)=>uDt(t,fDt(e)),fne=t=>Ak.REGISTERED_PROTOCOLS[t.substring(0,t.indexOf("://"))],pDt=class extends Error{constructor(t,e,n,r){super(`AJAXError: ${e} (${t}): ${n}`),this.status=t,this.statusText=e,this.url=n,this.body=r}};function YBe(t,e){const n=new XMLHttpRequest,r=Array.isArray(t.url)?t.url[0]:t.url;n.open(t.method||"GET",r,!0),t.type==="arrayBuffer"&&(n.responseType="arraybuffer");for(const i in t.headers)t.headers.hasOwnProperty(i)&&n.setRequestHeader(i,t.headers[i]);return t.type==="json"&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials=t.credentials==="include",n.onerror=()=>{e(new Error(n.statusText))},n.onload=()=>{if((n.status>=200&&n.status<300||n.status===0)&&n.response!==null){let i=n.response;if(t.type==="json")try{i=JSON.parse(n.response)}catch(a){return e(a)}e(null,i,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"),n)}else{const i=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});e(new pDt(n.status,n.statusText,r.toString(),i))}},n.cancel=n.abort,n.send(t.body),n}function gDt(t){return new Promise((e,n)=>{YBe(t,(r,i,a,o,s)=>{r?n({err:r,data:null,xhr:s}):e({err:null,data:i,cacheControl:a,expires:o,xhr:s})})})}function y5(t,e){return YBe(t,e)}var vDt=(t,e)=>(fne(t.url)||y5)(m5(v5({},t),{type:"json"}),e),hne=(t,e)=>(fne(t.url)||y5)(m5(v5({},t),{type:"arrayBuffer"}),e),dhn=(t,e)=>y5(m5(v5({},t),{method:"POST"}),e),mDt=(t,e)=>y5(m5(v5({},t),{method:"GET"}),e);function phn(t){const e=window.document.createElement("a");return e.href=t,e.protocol===window.document.location.protocol&&e.host===window.document.location.host}var D0e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function XBe(t,e){const n=new window.Image,r=window.URL||window.webkitURL;n.crossOrigin="anonymous",n.onload=()=>{e(null,n),r.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame(()=>{n.src=D0e})},n.onerror=()=>e(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const i=new Blob([new Uint8Array(t)],{type:"image/png"});n.src=t.byteLength?r.createObjectURL(i):D0e}function qBe(t,e){const n=new Blob([new Uint8Array(t)],{type:"image/png"});createImageBitmap(n).then(r=>{e(null,r)}).catch(r=>{e(new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}var Kq=(t,e,n)=>{const r=(i,a)=>{if(i)e(i);else if(a){const o=typeof createImageBitmap=="function",s=n?n(a):a;o?qBe(s,e):XBe(s,e)}};return t.type==="json"?vDt(t,r):hne(t,r)},yDt=(t,e)=>{typeof createImageBitmap=="function"?qBe(t,e):XBe(t,e)},dne=(t=>(t.CENTER="center",t.TOP="top",t["TOP-LEFT"]="top-left",t["TOP-RIGHT"]="top-right",t.BOTTOM="bottom",t["BOTTOM-LEFT"]="bottom-left",t["BOTTOM-RIGHT"]="bottom-right",t.LEFT="left",t.RIGHT="right",t))(dne||{}),BB={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ZBe(t,e,n){const r=t.classList;for(const i in BB)BB.hasOwnProperty(i)&&r.remove(`l7-${n}-anchor-${i}`);r.add(`l7-${n}-anchor-${e}`)}function pne(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function KBe(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function uN(){}var GM=.7,FB=1/GM,wA="\\s*([+-]?\\d+)\\s*",WM="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bm="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_Dt=/^#([0-9a-f]{3,8})$/,bDt=new RegExp("^rgb\\("+[wA,wA,wA]+"\\)$"),EDt=new RegExp("^rgb\\("+[Bm,Bm,Bm]+"\\)$"),xDt=new RegExp("^rgba\\("+[wA,wA,wA,WM]+"\\)$"),SDt=new RegExp("^rgba\\("+[Bm,Bm,Bm,WM]+"\\)$"),TDt=new RegExp("^hsl\\("+[WM,Bm,Bm]+"\\)$"),ADt=new RegExp("^hsla\\("+[WM,Bm,Bm,WM]+"\\)$"),B0e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pne(uN,Rx,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:F0e,formatHex:F0e,formatHsl:wDt,formatRgb:U0e,toString:U0e});function F0e(){return this.rgb().formatHex()}function wDt(){return QBe(this).formatHsl()}function U0e(){return this.rgb().formatRgb()}function Rx(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=_Dt.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?j0e(e):n===3?new Cd(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?uL(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?uL(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=bDt.exec(t))?new Cd(e[1],e[2],e[3],1):(e=EDt.exec(t))?new Cd(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=xDt.exec(t))?uL(e[1],e[2],e[3],e[4]):(e=SDt.exec(t))?uL(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=TDt.exec(t))?H0e(e[1],e[2]/100,e[3]/100,1):(e=ADt.exec(t))?H0e(e[1],e[2]/100,e[3]/100,e[4]):B0e.hasOwnProperty(t)?j0e(B0e[t]):t==="transparent"?new Cd(NaN,NaN,NaN,0):null}function j0e(t){return new Cd(t>>16&255,t>>8&255,t&255,1)}function uL(t,e,n,r){return r<=0&&(t=e=n=NaN),new Cd(t,e,n,r)}function ODt(t){return t instanceof uN||(t=Rx(t)),t?(t=t.rgb(),new Cd(t.r,t.g,t.b,t.opacity)):new Cd}function UB(t,e,n,r){return arguments.length===1?ODt(t):new Cd(t,e,n,r??1)}function Cd(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}pne(Cd,UB,KBe(uN,{brighter:function(t){return t=t==null?FB:Math.pow(FB,t),new Cd(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?GM:Math.pow(GM,t),new Cd(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z0e,formatHex:z0e,formatRgb:$0e,toString:$0e}));function z0e(){return"#"+LG(this.r)+LG(this.g)+LG(this.b)}function $0e(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function LG(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function H0e(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Am(t,e,n,r)}function QBe(t){if(t instanceof Am)return new Am(t.h,t.s,t.l,t.opacity);if(t instanceof uN||(t=Rx(t)),!t)return new Am;if(t instanceof Am)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(e===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-e)/s+2:o=(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Am(o,s,l,t.opacity)}function CDt(t,e,n,r){return arguments.length===1?QBe(t):new Am(t,e,n,r??1)}function Am(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}pne(Am,CDt,KBe(uN,{brighter:function(t){return t=t==null?FB:Math.pow(FB,t),new Am(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?GM:Math.pow(GM,t),new Am(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Cd(kG(t>=240?t-240:t+120,i,r),kG(t,i,r),kG(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function kG(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function ghn(t){return typeof t=="string"?!!Rx(t):!1}function Xo(t){const e=Rx(t),n=[0,0,0,0];return e!=null&&(n[0]=e.r/255,n[1]=e.g/255,n[2]=e.b/255,n[3]=e.opacity),n}function ox(t){const e=t&&t[0],n=t&&t[1],r=t&&t[2];return e+n*256+r*65536-1}function ow(t){return[t+1&255,t+1>>8&255,t+1>>8>>8&255]}function JBe(t){let e=window.document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;let r=null;const i=n.createLinearGradient(0,0,256,1),a=t.positions[0],o=t.positions[t.positions.length-1];for(let s=0;s<t.colors.length;++s){const l=(t.positions[s]-a)/(o-a);i.addColorStop(l,t.colors[s])}return n.fillStyle=i,n.fillRect(0,0,256,1),r=new Uint8ClampedArray(n.getImageData(0,0,256,1).data),e=null,n=null,{data:r,width:256,height:1}}function RDt(t,e){let n=window.document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;const i=r.createLinearGradient(0,0,256,1),a=e[1]-e[0];for(let l=0;l<t.colors.length;++l){const c=Math.max((t.positions[l]-e[0])/a,0);i.addColorStop(c,t.colors[l])}r.fillStyle=i,r.fillRect(0,0,256,1);const o=r.getImageData(0,0,256,1).data,s=gne(r,o);return n=null,r=null,s}function MDt(t){let e=window.document.createElement("canvas"),n=e.getContext("2d");e.width=256,e.height=1;const r=n.createImageData(256,1);return r.data.fill(0),t.positions.forEach((i,a)=>{const o=Xo(t.colors[a]);r.data[i*4+0]=o[0]*255,r.data[i*4+1]=o[1]*255,r.data[i*4+2]=o[2]*255,r.data[i*4+3]=o[3]*255}),e=null,n=null,r}function PDt(t){let e=window.document.createElement("canvas"),n=e.getContext("2d");n.globalAlpha=1,e.width=256,e.height=1;const r=256/t.colors.length;for(let o=0;o<t.colors.length;o++)n.beginPath(),n.lineWidth=2,n.strokeStyle=t.colors[o],n.moveTo(o*r,0),n.lineTo((o+1)*r,0),n.stroke();const i=n.getImageData(0,0,256,1).data,a=gne(n,i);return e=null,n=null,a}function NDt(t,e){let n=window.document.createElement("canvas"),r=n.getContext("2d");r.globalAlpha=1,n.width=256,n.height=1;const i=e[1]-e[0];t.positions.length-t.colors.length!==1&&console.warn("positions  colors ,poisitions ");for(let s=0;s<t.colors.length;s++)r.beginPath(),r.lineWidth=2,r.strokeStyle=t.colors[s],r.moveTo((t.positions[s]-e[0])/i*255,0),r.lineTo((t.positions[s+1]-e[0])/i*255,0),r.stroke();const a=r.getImageData(0,0,256,1).data,o=gne(r,a);return n=null,r=null,o}function gne(t,e){const n=t.createImageData(256,1);for(let r=0;r<n.data.length;r+=4)n.data[r+0]=e[r+0],n.data[r+1]=e[r+1],n.data[r+2]=e[r+2],n.data[r+3]=e[r+3];return n}function vne(t){switch(t?.type){case"cat":return[0,255];default:return[0,1]}}var DG,G0e;function IDt(){if(G0e)return DG;G0e=1;function t(e,n,r){return e===e&&(r!==void 0&&(e=e<=r?e:r),n!==void 0&&(e=e>=n?e:n)),e}return DG=t,DG}var BG,W0e;function LDt(){if(W0e)return BG;W0e=1;var t=IDt(),e=Jte();function n(r,i,a){return a===void 0&&(a=i,i=void 0),a!==void 0&&(a=e(a),a=a===a?a:0),i!==void 0&&(i=e(i),i=i===i?i:0),t(e(r),i,a)}return BG=n,BG}var kDt=LDt();const DDt=Ni(kDt);var BDt=GDe();const FDt=Ni(BDt);var FG,V0e;function eFe(){if(V0e)return FG;V0e=1;var t=Jf(),e=eBe(),n=Jte(),r="Expected a function",i=Math.max,a=Math.min;function o(s,l,c){var u,f,h,d,p,g,v=0,y=!1,_=!1,E=!0;if(typeof s!="function")throw new TypeError(r);l=n(l)||0,t(c)&&(y=!!c.leading,_="maxWait"in c,h=_?i(n(c.maxWait)||0,l):h,E="trailing"in c?!!c.trailing:E);function x(U){var $=u,X=f;return u=f=void 0,v=U,d=s.apply(X,$),d}function T(U){return v=U,p=setTimeout(C,l),y?x(U):d}function S(U){var $=U-g,X=U-v,N=l-$;return _?a(N,h-X):N}function w(U){var $=U-g,X=U-v;return g===void 0||$>=l||$<0||_&&X>=h}function C(){var U=e();if(w(U))return D(U);p=setTimeout(C,S(U))}function D(U){return p=void 0,E&&u?x(U):(u=f=void 0,d)}function L(){p!==void 0&&clearTimeout(p),v=0,u=g=f=p=void 0}function B(){return p===void 0?d:D(e())}function I(){var U=e(),$=w(U);if(u=arguments,f=this,g=U,$){if(p===void 0)return T(g);if(_)return clearTimeout(p),p=setTimeout(C,l),x(g)}return p===void 0&&(p=setTimeout(C,l)),d}return I.cancel=L,I.flush=B,I}return FG=o,FG}var UDt=eFe();const jDt=Ni(UDt);var zDt=EDe();const $Dt=Ni(zDt);var UG,Y0e;function HDt(){if(Y0e)return UG;Y0e=1;var t=Uy(),e=Jp(),n="[object Boolean]";function r(i){return i===!0||i===!1||e(i)&&t(i)==n}return UG=r,UG}var GDt=HDt();const WDt=Ni(GDt);var jG,X0e;function VDt(){if(X0e)return jG;X0e=1;var t=Yte();function e(n,r){return t(n,r)}return jG=e,jG}var YDt=VDt();const XDt=Ni(YDt);var zG,q0e;function qDt(){if(q0e)return zG;q0e=1;function t(e){return e==null}return zG=t,zG}var ZDt=qDt();const KDt=Ni(ZDt);var $G,Z0e;function QDt(){if(Z0e)return $G;Z0e=1;var t=Uy(),e=Jp(),n="[object Number]";function r(i){return typeof i=="number"||e(i)&&t(i)==n}return $G=r,$G}var JDt=QDt();const eBt=Ni(JDt);var tBt=XDe();const nBt=Ni(tBt);var rBt=PDe();const iBt=Ni(rBt);var aBt=Zw();const oBt=Ni(aBt);var sBt=QDe();const lBt=Ni(sBt);var HG,K0e;function cBt(){if(K0e)return HG;K0e=1;var t=ZDe(),e=KDe(),n=e(function(r,i,a,o){t(r,i,a,o)});return HG=n,HG}var uBt=cBt();const fBt=Ni(uBt);var GG,Q0e;function hBt(){if(Q0e)return GG;Q0e=1;function t(e,n,r,i){for(var a=r-1,o=e.length;++a<o;)if(i(e[a],n))return a;return-1}return GG=t,GG}var WG,J0e;function dBt(){if(J0e)return WG;J0e=1;var t=oN(),e=kDe(),n=hBt(),r=aN(),i=Ute(),a=Array.prototype,o=a.splice;function s(l,c,u,f){var h=f?n:e,d=-1,p=c.length,g=l;for(l===c&&(c=i(c)),u&&(g=t(l,r(u)));++d<p;)for(var v=0,y=c[d],_=u?u(y):y;(v=h(g,_,v,f))>-1;)g!==l&&o.call(g,v,1),o.call(l,v,1);return l}return WG=s,WG}var VG,eye;function pBt(){if(eye)return VG;eye=1;var t=dBt();function e(n,r){return n&&n.length&&r&&r.length?t(n,r):n}return VG=e,VG}var YG,tye;function gBt(){if(tye)return YG;tye=1;var t=lN(),e=pBt(),n=t(e);return YG=n,YG}var vBt=gBt();const mBt=Ni(vBt);var XG,nye;function yBt(){if(nye)return XG;nye=1;var t=eFe(),e=Jf(),n="Expected a function";function r(i,a,o){var s=!0,l=!0;if(typeof i!="function")throw new TypeError(n);return e(o)&&(s="leading"in o?!!o.leading:s,l="trailing"in o?!!o.trailing:l),t(i,a,{leading:s,maxWait:a,trailing:l})}return XG=r,XG}var _Bt=yBt();const bBt=Ni(_Bt);var qG,rye;function EBt(){if(rye)return qG;rye=1;var t=DDe();function e(n){return n&&n.length?t(n):[]}return qG=e,qG}var xBt=EBt();const SBt=Ni(xBt);var ZG,iye;function TBt(){if(iye)return ZG;iye=1;function t(e,n,r){var i=-1,a=e.length;n<0&&(n=-n>a?0:a+n),r=r>a?a:r,r<0&&(r+=a),a=n>r?0:r-n>>>0,n>>>=0;for(var o=Array(a);++i<a;)o[i]=e[i+n];return o}return ZG=t,ZG}var KG,aye;function ABt(){if(aye)return KG;aye=1;var t=TBt();function e(n,r,i){var a=n.length;return i=i===void 0?a:i,!r&&i>=a?n:t(n,r,i)}return KG=e,KG}var QG,oye;function wBt(){if(oye)return QG;oye=1;function t(e){return e.split("")}return QG=t,QG}var JG,sye;function OBt(){if(sye)return JG;sye=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\ufe0e\\ufe0f",o="["+t+"]",s="["+i+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+s+"|"+l+")",u="[^"+t+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",p=c+"?",g="["+a+"]?",v="(?:"+d+"(?:"+[u,f,h].join("|")+")"+g+p+")*",y=g+p+v,_="(?:"+[u+s+"?",s,f,h,o].join("|")+")",E=RegExp(l+"(?="+l+")|"+_+y,"g");function x(T){return T.match(E)||[]}return JG=x,JG}var eW,lye;function CBt(){if(lye)return eW;lye=1;var t=wBt(),e=Zte(),n=OBt();function r(i){return e(i)?n(i):t(i)}return eW=r,eW}var tW,cye;function RBt(){if(cye)return tW;cye=1;var t=ABt(),e=Zte(),n=CBt(),r=Jw();function i(a){return function(o){o=r(o);var s=e(o)?n(o):void 0,l=s?s[0]:o.charAt(0),c=s?t(s,1).join(""):o.slice(1);return l[a]()+c}}return tW=i,tW}var nW,uye;function tFe(){if(uye)return nW;uye=1;var t=RBt(),e=t("toUpperCase");return nW=e,nW}var MBt=tFe();const PBt=Ni(MBt);var NBt=Xw();const IBt=Ni(NBt);var LBt=Jf();const kBt=Ni(LBt);var DBt=qte();const BBt=Ni(DBt);var rW,fye;function FBt(){if(fye)return rW;fye=1;var t=Jw(),e=tFe();function n(r){return e(t(r).toLowerCase())}return rW=n,rW}var iW,hye;function UBt(){if(hye)return iW;hye=1;function t(e){return function(n){return e?.[n]}}return iW=t,iW}var aW,dye;function jBt(){if(dye)return aW;dye=1;var t=UBt(),e={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},n=t(e);return aW=n,aW}var oW,pye;function zBt(){if(pye)return oW;pye=1;var t=jBt(),e=Jw(),n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,r="\\u0300-\\u036f",i="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",o=r+i+a,s="["+o+"]",l=RegExp(s,"g");function c(u){return u=e(u),u&&u.replace(n,t).replace(l,"")}return oW=c,oW}var sW,gye;function $Bt(){if(gye)return sW;gye=1;var t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function e(n){return n.match(t)||[]}return sW=e,sW}var lW,vye;function HBt(){if(vye)return lW;vye=1;var t=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function e(n){return t.test(n)}return lW=e,lW}var cW,mye;function GBt(){if(mye)return cW;mye=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=e+n+r,a="\\u2700-\\u27bf",o="a-z\\xdf-\\xf6\\xf8-\\xff",s="\\xac\\xb1\\xd7\\xf7",l="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",c="\\u2000-\\u206f",u=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",f="A-Z\\xc0-\\xd6\\xd8-\\xde",h="\\ufe0e\\ufe0f",d=s+l+c+u,p="[']",g="["+d+"]",v="["+i+"]",y="\\d+",_="["+a+"]",E="["+o+"]",x="[^"+t+d+y+a+o+f+"]",T="\\ud83c[\\udffb-\\udfff]",S="(?:"+v+"|"+T+")",w="[^"+t+"]",C="(?:\\ud83c[\\udde6-\\uddff]){2}",D="[\\ud800-\\udbff][\\udc00-\\udfff]",L="["+f+"]",B="\\u200d",I="(?:"+E+"|"+x+")",U="(?:"+L+"|"+x+")",$="(?:"+p+"(?:d|ll|m|re|s|t|ve))?",X="(?:"+p+"(?:D|LL|M|RE|S|T|VE))?",N=S+"?",M="["+h+"]?",k="(?:"+B+"(?:"+[w,C,D].join("|")+")"+M+N+")*",z="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",j="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",V=M+N+k,Q="(?:"+[_,C,D].join("|")+")"+V,ee=RegExp([L+"?"+E+"+"+$+"(?="+[g,L,"$"].join("|")+")",U+"+"+X+"(?="+[g,L+I,"$"].join("|")+")",L+"?"+I+"+"+$,L+"+"+X,j,z,y,Q].join("|"),"g");function re(ne){return ne.match(ee)||[]}return cW=re,cW}var uW,yye;function WBt(){if(yye)return uW;yye=1;var t=$Bt(),e=HBt(),n=Jw(),r=GBt();function i(a,o,s){return a=n(a),o=s?void 0:o,o===void 0?e(a)?r(a):t(a):a.match(o)||[]}return uW=i,uW}var fW,_ye;function VBt(){if(_ye)return fW;_ye=1;var t=RDe(),e=zBt(),n=WBt(),r="[']",i=RegExp(r,"g");function a(o){return function(s){return t(n(e(s).replace(i,"")),o,"")}}return fW=a,fW}var hW,bye;function YBt(){if(bye)return hW;bye=1;var t=FBt(),e=VBt(),n=e(function(r,i,a){return i=i.toLowerCase(),r+(a?t(i):i)});return hW=n,hW}var XBt=YBt();const qBt=Ni(XBt);var ZBt=tBe();const KBt=Ni(ZBt);var gs={isNil:KDt,merge:lBt,throttle:bBt,isString:iBt,debounce:jDt,pull:mBt,isTypedArray:oBt,isPlainObject:nBt,isNumber:eBt,isBoolean:WDt,isEqual:XDt,cloneDeep:FDt,uniq:SBt,clamp:DDt,upperFirst:PBt,get:$Dt,mergeWith:fBt,isFunction:IBt,isObject:kBt,isUndefined:BBt,camelCase:qBt,uniqueId:KBt},{pull:QBt}=gs;function _5(t){let e=t;return typeof t=="string"&&(e=window.document.getElementById(t)),e}function mne(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function yne(t){return mne(t).split(/\s+/)}function JBt(t){var e;const n=(e=document?.documentElement)==null?void 0:e.style;if(!n)return t[0];for(const r in t)if(t[r]&&t[r]in n)return t[r];return t[0]}function is(t,e,n){const r=window.document.createElement(t);return e&&(r.className=e||""),n&&n.appendChild(r),r}function Ip(t){const e=t.parentNode;e&&e.removeChild(t)}function Md(t,e){if(t.classList!==void 0){const n=yne(e);for(let r=0,i=n.length;r<i;r++)t.classList.add(n[r])}else if(!_ne(t,e)){const n=b5(t);bne(t,(n?n+" ":"")+e)}}function Mx(t,e){t.classList!==void 0?yne(e).forEach(r=>{t.classList.remove(r)}):bne(t,mne((" "+b5(t)+" ").replace(" "+e+" "," ")))}function _ne(t,e){if(t.classList!==void 0)return t.classList.contains(e);const n=b5(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function bne(t,e){t instanceof HTMLElement?t.className=e:t.className.baseVal=e}function eFt(t,e,n){n===void 0?_ne(t,e)?Mx(t,e):Md(t,e):n?Md(t,e):Mx(t,e)}function b5(t){return t instanceof SVGElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function tFt(t){for(;t&&t.firstChild;)t.removeChild(t.firstChild)}var nFt=JBt(["transform","WebkitTransform"]);function Ene(t,e){t.style[nFt]=e}function rFt(){if(typeof Event=="function")window.dispatchEvent(new Event("resize"));else{const t=window.document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}}function iFt(t){const e=["padding: "+(t.height/2-8)+"px "+t.width/2+"px;","line-height: "+t.height+"px;","background-image: url("+t.toDataURL()+");"];console.log(`%c
`,e.join(""))}function nFe(){var t;const e=window.document.querySelector('meta[name="viewport"]');if(!e)return 1;const r=((t=e.content)==null?void 0:t.split(",")).find(i=>{const[a]=i.split("=");return a==="initial-scale"});return r?r.split("=")[1]*1:1}var jf=nFe()<1?1:window.devicePixelRatio;function xne(t,e){t.setAttribute("style",`${t.style.cssText}${e}`)}function Qq(t){return t.split(";").map(e=>e.trim()).filter(e=>e)}function aFt(t,e){var n;const r=Qq((n=t.getAttribute("style"))!=null?n:""),i=Qq(e),a=QBt(r,...i);t.setAttribute("style",a.join(";"))}function rFe(t){return Object.entries(t).map(([e,n])=>`${e}: ${n}`).join(";")}function iFe(t,e){return{left:t.left-e.left,top:t.top-e.top,right:e.left+e.width-t.left-t.width,bottom:e.top+e.height-t.top-t.height}}function oFt(t,e){t.checked=e,e?t.setAttribute("checked","true"):t.removeAttribute("checked")}function E5(t){t.innerHTML=""}function aFe(t){t.setAttribute("draggable","false")}function p_(t,e){if(typeof e=="string"){const n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.append(n.firstChild)}else Array.isArray(e)?t.append(...e):t.append(e)}function oFe(t,e){var n;const r=Array.isArray(e)?e:[e];let i=t;for(;i instanceof Element&&i!==window.document.body;){if(r.find(a=>i?.matches(a)))return i;i=(n=i?.parentElement)!=null?n:null}}const vhn=Object.freeze(Object.defineProperty({__proto__:null,DPR:jf,addClass:Md,addStyle:xne,appendElementType:p_,clearChildren:E5,create:is,css2Style:rFe,empty:tFt,findParentElement:oFe,getClass:b5,getContainer:_5,getDiffRect:iFe,getStyleList:Qq,getViewPortScale:nFe,hasClass:_ne,printCanvas:iFt,remove:Ip,removeClass:Mx,removeStyle:aFt,setChecked:oFt,setClass:bne,setTransform:Ene,setUnDraggable:aFe,splitWords:yne,toggleClass:eFt,triggerResize:rFt,trim:mne},Symbol.toStringTag,{value:"Module"}));function sFt(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap}function lFt(){return typeof importScripts=="function"}var mhn=lFt()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href,jB=navigator?.userAgent,yhn=!!jB.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),_hn=jB.indexOf("Android")>-1||jB.indexOf("Adr")>-1;function sFe(){const t=jB,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];let n=!0;for(const r of e)if(t.indexOf(r)>0){n=!1;break}return n}function lFe(t,e){t.forEach(n=>{e[n]&&(e[n]=e[n].bind(e))})}var bhn=class{constructor(t=16){this.duration=16,this.timestamp=new Date().getTime(),this.duration=t}run(t){const e=new Date().getTime(),n=e-this.timestamp;this.timestamp=e,n>=this.duration&&t()}};function Jq(t){var e=[1/0,1/0,-1/0,-1/0];return WBe(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}Jq.default=Jq;function dW(t){return typeof t=="number"}function vc(t){return t-Math.fround(t)}var zB=2*Math.PI*6378137/2;function cFt(t,e){const[n,r,i,a]=e;return t.lng>n&&t.lng<=i&&t.lat>r&&t.lat<=a}function uFt(t){const e=[1/0,1/0,-1/0,-1/0];return t.forEach(n=>{const{coordinates:r}=n;cFe(e,r)}),e}function cFe(t,e){return Array.isArray(e[0])?e.forEach(n=>{cFe(t,n)}):(t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])),t}function Ehn(t,e){return uFe(t,e)}function uFe(t,e){return Array.isArray(t[0])?t.map(n=>uFe(n,e)):e(t)}function wk(t,e=!0,n={enable:!0,decimal:1}){t=dFt(t,e);const r=t[0],i=t[1];let a=r*zB/180,o=Math.log(Math.tan((90+i)*Math.PI/360))/(Math.PI/180);return o=o*zB/180,n.enable&&(a=Number(a.toFixed(n.decimal)),o=Number(o.toFixed(n.decimal))),t.length===3?[a,o,t[2]]:[a,o]}function xhn(t,e=6){const n=t[0],r=t[1];let i=n/zB*180,a=r/zB*180;return a=180/Math.PI*(2*Math.atan(Math.exp(a*Math.PI/180))-Math.PI/2),e!=null&&(i=Number(i.toFixed(e)),a=Number(a.toFixed(e))),t.length===3?[i,a,t[2]]:[i,a]}function fFt(t){if(t==null)throw new Error("lng is required");return(t>180||t<-180)&&(t=t%360,t>180&&(t=-360+t),t<-180&&(t=360+t),t===0&&(t=0)),t}function hFt(t){if(t==null)throw new Error("lat is required");return(t>90||t<-90)&&(t=t%180,t>90&&(t=-180+t),t<-90&&(t=180+t),t===0&&(t=0)),t}function dFt(t,e){if(e===!1)return t;const n=fFt(t[0]);let r=hFt(t[1]);return r>85&&(r=85),r<-85&&(r=-85),t.length===3?[n,r,t[2]]:[n,r]}function Rp(t){const e=85.0511287798,n=Math.max(Math.min(e,t[1]),-e),r=256<<20;let i=Math.PI/180,a=t[0]*i,o=n*i;o=Math.log(Math.tan(Math.PI/4+o/2));const s=.5/Math.PI,l=.5,c=-.5/Math.PI;return i=.5,a=r*(s*a+l),o=r*(c*o+i),[Math.floor(a),Math.floor(o)]}function Shn(t){const e=.5/Math.PI,n=.5,r=-.5/Math.PI;let i=.5;const a=256<<20;let[o,s]=t;o=(o/a-n)/e,s=(s/a-i)/r,s=(Math.atan(Math.pow(Math.E,s))-Math.PI/4)*2,i=Math.PI/180;const l=s/i;return[o/i,l]}function pW(t,e){const n=85.0511287798,r=Math.PI/180,i=6378137;return e=Math.max(Math.min(n,e),-n),t*=r,e*=r,e=Math.log(Math.tan(Math.PI/4+e/2)),[t*i,e*i]}function Thn(t,e){const n=Math.PI/180,r=6378137,i=t/r/n,a=2*(Math.atan(Math.exp(e/r))-Math.PI/4)/n;return[i,a]}function Ahn(t,e,n){const r=cL(e[1]-t[1]),i=cL(e[0]-t[0]),a=cL(t[1]),o=cL(e[1]),s=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(a)*Math.cos(o);return sDt(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),"meters")}function whn(t){const e=Math.PI/180,n=85.0511287798,r=6378137,i=Math.max(Math.min(n,t[1]),-n),a=Math.sin(i*e),o=r*t[0]*e,s=r*Math.log((1+a)/(1-a))/2;return[o,s]}function VM(t,e){const n=Math.abs(t[1][1]-t[0][1])*e,r=Math.abs(t[1][0]-t[0][0])*e;return[[t[0][0]-r,t[0][1]-n],[t[1][0]+r,t[1][1]+n]]}function Sne(t,e){return t[0][0]<=e[0][0]&&t[0][1]<=e[0][1]&&t[1][0]>=e[1][0]&&t[1][1]>=e[1][1]}function $B(t){return[[t[0],t[1]],[t[2],t[3]]]}function pFt(t){const e=fFe(t,[0,0]);return[t[0]/e,t[1]/e]}function fFe(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}function gFt(t,e){return t[0]*e[0]+t[1]*e[1]}function Eye(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Ohn(t,e){return Math.acos(gFt(t,e)/(Eye(t)*Eye(e)))*180/Math.PI}function vFt(t,e){return e[0]>0?e[1]>0?90-Math.atan(e[1]/e[0])*180/Math.PI:90+Math.atan(-e[1]/e[0])*180/Math.PI:e[1]<0?180+(90-Math.atan(e[1]/e[0])*180/Math.PI):270+Math.atan(e[1]/-e[0])*180/Math.PI}function Chn(t,e=100){if(!t||t.length<2)return;const n=[0,1];let r=0;const i=[];for(let a=0;a<t.length-1;a++){const o=t[a],s=t[a+1],l=fFe(o,s);r+=l;const c=[o[0]-s[0],o[1]-s[1]];let u=vFt(n,c);if(a>0){const f=i[a-1].rotation;f-u>360-f+u&&(u=u+360)}i.push({start:o,end:s,dis:l,rotation:u,duration:0})}return i.map(a=>{a.duration=e*(a.dis/r)}),i}function Px(t){if(dW(t[0]))return t;if(dW(t[0][0]))throw new Error("");if(dW(t[0][0][0])){const e=t;let n=0,r=0,i=0;return e.forEach(a=>{a.forEach(o=>{n+=o[0],r+=o[1],i++})}),[n/i,r/i,0]}else throw new Error("")}function mFt(t){let e=t[0],n=t[1],r=t[0],i=t[1],a=0,o=0,s=0;for(let l=0;l<t.length;l+=2){const c=t[l],u=t[l+1];c&&u&&(e=Math.max(c,e),n=Math.max(u,n),r=Math.min(c,r),i=Math.min(u,i),a+=c,o+=u,s++)}return{center:[a/s,o/s],radius:Math.sqrt(Math.pow(e-r,2)+Math.pow(n-i,2))/2}}function yFt(t){return Jq(aDt([iDt(t)]))}function Rhn(t){let r=0;t+="x";const i=Math.floor(9007199254740991/137);for(let a=0;a<t.length;a++)r>i&&(r=Math.floor(r/137)),r=r*131+t.charCodeAt(a);return r}function Mhn(t){t=t.toString();let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return e>>>0}function _Ft(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}var bFt=class{constructor(t=50,e){this.limit=t,this.destroy=e||this.defaultDestroy,this.order=[],this.clear()}clear(){this.order.forEach(t=>{this.delete(t)}),this.cache={},this.order=[]}get(t){const e=this.cache[t];return e&&(this.deleteOrder(t),this.appendOrder(t)),e}set(t,e){this.cache[t]?(this.delete(t),this.cache[t]=e,this.appendOrder(t)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[t]=e,this.appendOrder(t))}delete(t){const e=this.cache[t];e&&(this.deleteCache(t),this.deleteOrder(t),this.destroy(e,t))}deleteCache(t){delete this.cache[t]}deleteOrder(t){const e=this.order.findIndex(n=>n===t);e>=0&&this.order.splice(e,1)}appendOrder(t){this.order.push(t)}defaultDestroy(t,e){return null}};function hFe(t){if(t.length===0)throw new Error("max requires at least one data point");let e=t[0];for(let n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e*1}function dFe(t){if(t.length===0)throw new Error("min requires at least one data point");let e=t[0];for(let n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e*1}function Tne(t){if(t.length===0)return 0;let e=t[0]*1;for(let n=1;n<t.length;n++)e+=t[n]*1;return e}function pFe(t){if(t.length===0)throw new Error("mean requires at least one data point");return Tne(t)/t.length}function gFe(t){if(t.length===0)throw new Error("mean requires at least one data point");if(t.length<3)return t[0];t.sort();let e=t[0],n=NaN,r=0,i=1;for(let a=1;a<t.length+1;a++)t[a]!==e?(i>r&&(r=i,n=e),i=1,e=t[a]):i++;return n*1}var x5={min:dFe,max:hFe,mean:pFe,sum:Tne,mode:gFe};function S5(t,e){return t.map(n=>n[e])}function vFe(t,e){return x5[t](e)}const Phn=Object.freeze(Object.defineProperty({__proto__:null,getColumn:S5,getSatByColumn:vFe,max:hFe,mean:pFe,min:dFe,mode:gFe,statMap:x5,sum:Tne},Symbol.toStringTag,{value:"Module"}));function EFt(t,e){e===void 0&&(e={});var n=Number(t[0]),r=Number(t[1]),i=Number(t[2]),a=Number(t[3]);if(t.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[n,r],s=[n,a],l=[i,a],c=[i,r];return une([[o,c,l,s,o]],e.properties,{bbox:t,id:e.id})}var gW={exports:{}},xye;function xFt(){return xye||(xye=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function a(l,c,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var d=new i(u,f||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],d]:l._events[p].push(d):(l._events[p]=d,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],u,f;if(this._eventsCount===0)return c;for(f in u=this._events)e.call(u,f)&&c.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},s.prototype.listeners=function(c){var u=n?n+c:c,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,d=f.length,p=new Array(d);h<d;h++)p[h]=f[h].fn;return p},s.prototype.listenerCount=function(c){var u=n?n+c:c,f=this._events[u];return f?f.fn?1:f.length:0},s.prototype.emit=function(c,u,f,h,d,p){var g=n?n+c:c;if(!this._events[g])return!1;var v=this._events[g],y=arguments.length,_,E;if(v.fn){switch(v.once&&this.removeListener(c,v.fn,void 0,!0),y){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,f),!0;case 4:return v.fn.call(v.context,u,f,h),!0;case 5:return v.fn.call(v.context,u,f,h,d),!0;case 6:return v.fn.call(v.context,u,f,h,d,p),!0}for(E=1,_=new Array(y-1);E<y;E++)_[E-1]=arguments[E];v.fn.apply(v.context,_)}else{var x=v.length,T;for(E=0;E<x;E++)switch(v[E].once&&this.removeListener(c,v[E].fn,void 0,!0),y){case 1:v[E].fn.call(v[E].context);break;case 2:v[E].fn.call(v[E].context,u);break;case 3:v[E].fn.call(v[E].context,u,f);break;case 4:v[E].fn.call(v[E].context,u,f,h);break;default:if(!_)for(T=1,_=new Array(y-1);T<y;T++)_[T-1]=arguments[T];v[E].fn.apply(v[E].context,_)}}return!0},s.prototype.on=function(c,u,f){return a(this,c,u,f,!1)},s.prototype.once=function(c,u,f){return a(this,c,u,f,!0)},s.prototype.removeListener=function(c,u,f,h){var d=n?n+c:c;if(!this._events[d])return this;if(!u)return o(this,d),this;var p=this._events[d];if(p.fn)p.fn===u&&(!h||p.once)&&(!f||p.context===f)&&o(this,d);else{for(var g=0,v=[],y=p.length;g<y;g++)(p[g].fn!==u||h&&!p[g].once||f&&p[g].context!==f)&&v.push(p[g]);v.length?this._events[d]=v.length===1?v[0]:v:o(this,d)}return this},s.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s})(gW)),gW.exports}var ku=xFt();const Ane=Ni(ku);var aR=(t=>(t.Realtime="realtime",t.Overlap="overlap",t.Replace="replace",t))(aR||{}),bp=(t=>(t.Loading="Loading",t.Loaded="Loaded",t.Failure="Failure",t.Cancelled="Cancelled",t))(bp||{}),mFe=0,Sye=1,T5=2;function SFt(t){t.forEach(e=>{e.isCurrent&&(e.isVisible=e.isLoaded)})}function TFt(t){t.forEach(e=>{e.properties.state=mFe}),t.forEach(e=>{e.isCurrent&&!yFe(e)&&wne(e)}),t.forEach(e=>{e.isVisible=!!(e.properties.state&T5)})}function AFt(t){t.forEach(n=>{n.properties.state=mFe}),t.forEach(n=>{n.isCurrent&&yFe(n)}),t.slice().sort((n,r)=>n.z-r.z).forEach(n=>{n.isVisible=!!(n.properties.state&T5),n.children.length&&(n.isVisible||n.properties.state&Sye)?n.children.forEach(r=>{r.properties.state=Sye}):n.isCurrent&&wne(n)})}function yFe(t){for(;t;){if(t.isLoaded)return t.properties.state|=T5,!0;t=t.parent}return!1}function wne(t){t.children.forEach(e=>{e.isLoaded?e.properties.state|=T5:wne(e)})}var _Fe=[-1/0,-1/0,1/0,1/0],wFt=.2,OFt=5,CFt={[aR.Realtime]:SFt,[aR.Overlap]:TFt,[aR.Replace]:AFt},RFt=()=>{};function eZ(t,e,n){const r=Math.floor((t+180)/360*Math.pow(2,n)),i=Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*Math.pow(2,n));return[r,i]}function Tye(t,e,n){const r=t/Math.pow(2,n)*360-180,i=Math.PI-2*Math.PI*e/Math.pow(2,n),a=180/Math.PI*Math.atan(.5*(Math.exp(i)-Math.exp(-i)));return[r,a]}var bFe=(t,e,n)=>{const[r,i]=Tye(t,e,n),[a,o]=Tye(t+1,e+1,n);return[r,o,a,i]};function MFt({zoom:t,latLonBounds:e,maxZoom:n=1/0,minZoom:r=0,zoomOffset:i=0,extent:a=_Fe}){let o=Math.ceil(t)+i;if(Number.isFinite(r)&&o<r)return[];Number.isFinite(n)&&o>n&&(o=n);const[s,l,c,u]=e,f=[Math.max(s,a[0]),Math.max(l,a[1]),Math.min(c,a[2]),Math.min(u,a[3])],h=[],[d,p]=eZ(f[0],f[1],o),[g,v]=eZ(f[2],f[3],o);for(let x=d;x<=g;x++)for(let T=v;T<=p;T++)h.push({x,y:T,z:o});const y=(g+d)/2,_=(p+v)/2,E=(x,T)=>Math.abs(x-y)+Math.abs(T-_);return h.sort((x,T)=>E(x.x,x.y)-E(T.x,T.y)),h}var PFt=(t,e,n,r=!0)=>{const i=Math.pow(2,n),a=i-1,o=i;let s=t;const l=e;return r&&(s<0?s=s+o:s>a&&(s=s%o)),{warpX:s,warpY:l}},NFt=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),IFt=class extends ku.EventEmitter{constructor(t){super(),this.tileSize=256,this.isVisible=!1,this.isCurrent=!1,this.isVisibleChange=!1,this.loadedLayers=0,this.isLayerLoaded=!1,this.isLoad=!1,this.isChildLoad=!1,this.parent=null,this.children=[],this.data=null,this.properties={},this.loadDataId=0;const{x:e,y:n,z:r,tileSize:i,warp:a=!0}=t;this.x=e,this.y=n,this.z=r,this.warp=a||!0,this.tileSize=i}get isLoading(){return this.loadStatus===bp.Loading}get isLoaded(){return this.loadStatus===bp.Loaded}get isFailure(){return this.loadStatus===bp.Failure}setTileLayerLoaded(){this.isLayerLoaded=!0}get isCancelled(){return this.loadStatus===bp.Cancelled}get isDone(){return[bp.Loaded,bp.Cancelled,bp.Failure].includes(this.loadStatus)}get bounds(){return bFe(this.x,this.y,this.z)}get bboxPolygon(){const[t,e,n,r]=this.bounds,i=[(n-t)/2,(r-e)/2];return EFt(this.bounds,{properties:{key:this.key,id:this.key,bbox:this.bounds,center:i,meta:`
      ${this.key}
      `}})}get key(){return`${this.x}_${this.y}_${this.z}`}layerLoad(){this.loadedLayers++,this.emit("layerLoaded")}loadData(t){return NFt(this,arguments,function*({getData:e,onLoad:n,onError:r}){this.loadDataId++;const i=this.loadDataId;this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=bp.Loading;let a=null,o;try{const{x:s,y:l,z:c,bounds:u,tileSize:f,warp:h}=this,{warpX:d,warpY:p}=PFt(s,l,c,h),{signal:g}=this.abortController;a=yield e({x:d,y:p,z:c,bounds:u,tileSize:f,signal:g,warp:h},this)}catch(s){o=s}if(i===this.loadDataId&&!(this.isCancelled&&!a)){if(o||!a){this.loadStatus=bp.Failure,r(o,this);return}this.loadStatus=bp.Loaded,this.data=a,n(this)}})}reloadData(t){this.isLoading&&this.abortLoad(),this.loadData(t)}abortLoad(){this.isLoaded||this.isCancelled||(this.loadStatus=bp.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}},LFt=(t,e)=>{const n=$B(t),r=VM(n,e),i=360*3-180,a=85.0511287798065;return[Math.max(r[0][0],-i),Math.max(r[0][1],-a),Math.min(r[1][0],i),Math.min(r[1][1],a)]},kFt=(t,e)=>{const n=$B(t),r=$B(e);return Sne(n,r)},DFt=Object.defineProperty,BFt=Object.defineProperties,FFt=Object.getOwnPropertyDescriptors,Aye=Object.getOwnPropertySymbols,UFt=Object.prototype.hasOwnProperty,jFt=Object.prototype.propertyIsEnumerable,wye=(t,e,n)=>e in t?DFt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oye=(t,e)=>{for(var n in e||(e={}))UFt.call(e,n)&&wye(t,n,e[n]);if(Aye)for(var n of Aye(e))jFt.call(e,n)&&wye(t,n,e[n]);return t},zFt=(t,e)=>BFt(t,FFt(e)),{throttle:$Ft}=gs,HFt=class extends Ane{constructor(t){super(),this.currentTiles=[],this.cacheTiles=new Map,this.throttleUpdate=$Ft((e,n)=>{this.update(e,n)},16),this.onTileLoad=e=>{this.emit("tile-loaded",e),this.updateTileVisible(),this.loadFinished()},this.onTileError=(e,n)=>{this.emit("tile-error",{error:e,tile:n}),this.updateTileVisible(),this.loadFinished()},this.onTileUnload=e=>{this.emit("tile-unload",e),this.loadFinished()},this.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:_Fe,getTileData:RFt,warp:!0,updateStrategy:aR.Replace},this.updateOptions(t)}get isLoaded(){return this.currentTiles.every(t=>t.isDone)}get tiles(){return Array.from(this.cacheTiles.values()).sort((e,n)=>e.z-n.z)}updateOptions(t){const e=t.minZoom===void 0?this.options.minZoom:Math.ceil(t.minZoom),n=t.maxZoom===void 0?this.options.maxZoom:Math.floor(t.maxZoom);this.options=zFt(Oye(Oye({},this.options),t),{minZoom:e,maxZoom:n})}update(t,e){const n=Math.max(0,Math.ceil(t));if(this.lastViewStates&&this.lastViewStates.zoom===n&&kFt(this.lastViewStates.latLonBoundsBuffer,e))return;const r=LFt(e,wFt);this.lastViewStates={zoom:n,latLonBounds:e,latLonBoundsBuffer:r},this.currentZoom=n;let i=!1;const a=this.getTileIndices(n,r).filter(o=>this.options.warp||o.x>=0&&o.x<Math.pow(2,n));this.emit("tiles-load-start"),this.currentTiles=a.map(({x:o,y:s,z:l})=>{let c=this.getTile(o,s,l);return c?((c?.isFailure||c?.isCancelled)&&c.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),c):(c=this.createTile(o,s,l),i=!0,c)}),i&&this.resizeCacheTiles(),this.updateTileVisible(),this.pruneRequests()}reloadAll(){for(const[t,e]of this.cacheTiles){if(!this.currentTiles.includes(e)){this.cacheTiles.delete(t),this.onTileUnload(e);return}this.onTileUnload(e),e.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}reloadTileById(t,e,n){const r=this.cacheTiles.get(`${e},${n},${t}`);r&&(this.onTileUnload(r),r.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}))}reloadTileByLnglat(t,e,n){const r=this.getTileByLngLat(t,e,n);r&&this.reloadTileById(r.z,r.x,r.y)}reloadTileByExtent(t,e){this.getTileIndices(e,t).forEach(r=>{this.reloadTileById(r.z,r.x,r.y)})}pruneRequests(){const t=[];for(const e of this.cacheTiles.values())e.isLoading&&!e.isCurrent&&!e.isVisible&&t.push(e);for(;t.length>0;)t.shift().abortLoad()}getTileByLngLat(t,e,n){const{zoomOffset:r}=this.options,i=Math.ceil(n)+r,a=eZ(t,e,i);return this.tiles.filter(s=>s.key===`${a[0]}_${a[1]}_${i}`)[0]}getTileExtent(t,e){return this.getTileIndices(e,t)}getTileByZXY(t,e,n){return this.tiles.filter(i=>i.key===`${e}_${n}_${t}`)[0]}clear(){for(const t of this.cacheTiles.values())t.isLoading?t.abortLoad():this.onTileUnload(t);this.lastViewStates=void 0,this.cacheTiles.clear(),this.currentTiles=[]}destroy(){this.clear(),this.removeAllListeners()}updateTileVisible(){const t=this.options.updateStrategy,e=new Map;for(const i of this.cacheTiles.values())e.set(i.key,i.isVisible),i.isCurrent=!1,i.isVisible=!1;for(const i of this.currentTiles)i.isCurrent=!0,i.isVisible=!0;const n=Array.from(this.cacheTiles.values());typeof t=="function"?t(n):CFt[t](n);let r=!1;Array.from(this.cacheTiles.values()).forEach(i=>{i.isVisible!==e.get(i.key)?(i.isVisibleChange=!0,r=!0):i.isVisibleChange=!1}),r&&this.emit("tile-update")}getTileIndices(t,e){const{tileSize:n,extent:r,zoomOffset:i}=this.options,a=Math.floor(this.options.maxZoom),o=Math.ceil(this.options.minZoom);return MFt({maxZoom:a,minZoom:o,zoomOffset:i,zoom:t,latLonBounds:e,extent:r})}getTileId(t,e,n){return`${t},${e},${n}`}loadFinished(){const t=!this.currentTiles.some(e=>!e.isDone);return t&&this.emit("tiles-load-finished"),t}getTile(t,e,n){const r=this.getTileId(t,e,n);return this.cacheTiles.get(r)}createTile(t,e,n){const r=this.getTileId(t,e,n),i=new IFt({x:t,y:e,z:n,tileSize:this.options.tileSize,warp:this.options.warp});return this.cacheTiles.set(r,i),i.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),i}resizeCacheTiles(){const t=OFt*this.currentTiles.length;if(this.cacheTiles.size>t){for(const[n,r]of this.cacheTiles)if(!r.isVisible&&!this.currentTiles.includes(r)&&(this.cacheTiles.delete(n),this.onTileUnload(r)),this.cacheTiles.size<=t)break}this.rebuildTileTree()}rebuildTileTree(){for(const t of this.cacheTiles.values())t.parent=null,t.children.length=0;for(const t of this.cacheTiles.values()){const e=this.getNearestAncestor(t.x,t.y,t.z);t.parent=e,e?.children&&e.children.push(t)}}getNearestAncestor(t,e,n){for(;n>this.options.minZoom;){t=Math.floor(t/2),e=Math.floor(e/2),n=n-1;const r=this.getTile(t,e,n);if(r)return r}return null}};function Nhn(t){return/(?=.*{box})(?=.*{z})(?=.*{x})(?=.*({y}|{-y}))/.test(t)}function EFe(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const r=n[1].charCodeAt(0),i=n[2].charCodeAt(0);let a;for(a=r;a<=i;++a)e.push(t.replace(n[0],String.fromCharCode(a)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const r=parseInt(n[2],10);for(let i=parseInt(n[1],10);i<=r;i++)e.push(t.replace(n[0],i.toString()));return e}return e.push(t),e}function OA(t,e){if(!t||!t.length)throw new Error("url is not allowed to be empty");const{x:n,y:r,z:i}=e,a=EFe(t),o=Math.abs(n+r)%a.length;return(fne(a[o])?`${a[o]}/{z}/{x}/{y}`:a[o]).replace(/\{x\}/g,n.toString()).replace(/\{y\}/g,r.toString()).replace(/\{z\}/g,i.toString()).replace(/\{bbox\}/g,bFe(n,r,i).join(",")).replace(/\{-y\}/g,(Math.pow(2,i)-r-1).toString())}function GFt(t,e){const{x:n,y:r,z:i,layer:a,version:o="1.0.0",style:s="default",format:l,service:c="WMTS",tileMatrixset:u}=e,f=EFe(t),h=Math.abs(n+r)%f.length;return`${f[h]}&SERVICE=${c}&REQUEST=GetTile&VERSION=${o}&LAYER=${a}&STYLE=${s}&TILEMATRIXSET=${u}&FORMAT=${l}&TILECOL=${n}&TILEROW=${r}&TILEMATRIX=${i}`}function y2(t,e){return t??e}var vW,Cye;function WFt(){if(Cye)return vW;Cye=1,vW=t;function t(r,i){var a=r&&r.type,o;if(a==="FeatureCollection")for(o=0;o<r.features.length;o++)t(r.features[o],i);else if(a==="GeometryCollection")for(o=0;o<r.geometries.length;o++)t(r.geometries[o],i);else if(a==="Feature")t(r.geometry,i);else if(a==="Polygon")e(r.coordinates,i);else if(a==="MultiPolygon")for(o=0;o<r.coordinates.length;o++)e(r.coordinates[o],i);return r}function e(r,i){if(r.length!==0){n(r[0],i);for(var a=1;a<r.length;a++)n(r[a],!i)}}function n(r,i){for(var a=0,o=0,s=0,l=r.length,c=l-1;s<l;c=s++){var u=(r[s][0]-r[c][0])*(r[c][1]+r[s][1]),f=a+u;o+=Math.abs(a)>=Math.abs(u)?a-f+u:u-f+a,a=f}a+o>=0!=!!i&&r.reverse()}return vW}var VFt=WFt();const YFt=Ni(VFt);function XFt(t,e){return t.map(n=>n[e]*1)}function xFe(t){return Array.isArray(t)?t.length===0||typeof t[0]=="number":!1}function tZ(t){const e=Object.isFrozen(t)?gs.cloneDeep(t):t;return YFt(e,!0),e}function rO(t,e){return t||[[e[0],e[3]],[e[2],e[3]],[e[2],e[1]],[e[0],e[1]]]}var qFt=Object.defineProperty,ZFt=Object.defineProperties,KFt=Object.getOwnPropertyDescriptors,Rye=Object.getOwnPropertySymbols,QFt=Object.prototype.hasOwnProperty,JFt=Object.prototype.propertyIsEnumerable,Mye=(t,e,n)=>e in t?qFt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Pye=(t,e)=>{for(var n in e||(e={}))QFt.call(e,n)&&Mye(t,n,e[n]);if(Rye)for(var n of Rye(e))JFt.call(e,n)&&Mye(t,n,e[n]);return t},Nye=(t,e)=>ZFt(t,KFt(e));function SFe(t,e){const{x:n,y:r,x1:i,y1:a,coordinates:o,geometry:s}=e,l=[];if(!Array.isArray(t))return{dataArray:[]};if(s)return t.filter(c=>c[s]&&c[s].type&&c[s].coordinates&&c[s].coordinates.length>0).forEach((c,u)=>{const f=tZ(c[s]);VBe(f,h=>{const d=GBe(h),p=Nye(Pye({},c),{_id:u,coordinates:d});l.push(p)})}),{dataArray:l};for(let c=0;c<t.length;c++){const u=t[c];let f=[];if(o){let d="Polygon";Array.isArray(o[0])||(d="Point"),Array.isArray(o[0])&&!Array.isArray(o[0][0])&&(d="LineString"),f=tZ({type:d,coordinates:u[o]}).coordinates}else if(n&&r&&i&&a){const d=[parseFloat(u[n]),parseFloat(u[r])],p=[parseFloat(u[i]),parseFloat(u[a])];f=[d,p]}else n&&r&&(f=[parseFloat(u[n]),parseFloat(u[r])]);const h=Nye(Pye({},u),{_id:c,coordinates:f});l.push(h)}return{dataArray:l}}function e4t(t,e){const n=nDt(t);return SFe(n,e)}var t4t=Object.defineProperty,n4t=Object.defineProperties,r4t=Object.getOwnPropertyDescriptors,Iye=Object.getOwnPropertySymbols,i4t=Object.prototype.hasOwnProperty,a4t=Object.prototype.propertyIsEnumerable,Lye=(t,e,n)=>e in t?t4t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,o4t=(t,e)=>{for(var n in e||(e={}))i4t.call(e,n)&&Lye(t,n,e[n]);if(Iye)for(var n of Iye(e))a4t.call(e,n)&&Lye(t,n,e[n]);return t},s4t=(t,e)=>n4t(t,r4t(e));function l4t(t){const e=t.toString();let n=5381,r=e.length;for(;r;)n=n*33^e.charCodeAt(--r);return n>>>0}function c4t(t,e){return e===void 0?null:isNaN(t.properties[e]*1)?t.properties&&t.properties[e]?l4t(t.properties[e]+"")%1000019:null:t.properties[e]*1}function u4t(t,e){const n=[],r={};return t.features?(t.features=t.features.filter(i=>{const a=i.geometry;return i!=null&&a&&a.type&&a.coordinates&&a.coordinates.length>0}),t=tZ(t),t.features.length===0?{dataArray:[],featureKeys:r}:(VBe(t,(i,a)=>{let o=c4t(i,e?.featureId);o===null&&(o=a);const s=o,l=GBe(i),c=s4t(o4t({},i.properties),{coordinates:l,_id:s});n.push(c)}),{dataArray:n,featureKeys:r})):(t.features=[],{dataArray:[]})}function nZ(t,e,n,r){for(var i=r,a=n-e>>1,o=n-e,s,l=t[e],c=t[e+1],u=t[n],f=t[n+1],h=e+3;h<n;h+=3){var d=f4t(t[h],t[h+1],l,c,u,f);if(d>i)s=h,i=d;else if(d===i){var p=Math.abs(h-a);p<o&&(s=h,o=p)}}i>r&&(s-e>3&&nZ(t,e,s,r),t[s+2]=i,n-s>3&&nZ(t,s,n,r))}function f4t(t,e,n,r,i,a){var o=i-n,s=a-r;if(o!==0||s!==0){var l=((t-n)*o+(e-r)*s)/(o*o+s*s);l>1?(n=i,r=a):l>0&&(n+=o*l,r+=s*l)}return o=t-n,s=e-r,o*o+s*s}function YM(t,e,n,r){var i={id:typeof t>"u"?null:t,type:e,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return h4t(i),i}function h4t(t){var e=t.geometry,n=t.type;if(n==="Point"||n==="MultiPoint"||n==="LineString")mW(t,e);else if(n==="Polygon"||n==="MultiLineString")for(var r=0;r<e.length;r++)mW(t,e[r]);else if(n==="MultiPolygon")for(r=0;r<e.length;r++)for(var i=0;i<e[r].length;i++)mW(t,e[r][i])}function mW(t,e){for(var n=0;n<e.length;n+=3)t.minX=Math.min(t.minX,e[n]),t.minY=Math.min(t.minY,e[n+1]),t.maxX=Math.max(t.maxX,e[n]),t.maxY=Math.max(t.maxY,e[n+1])}function d4t(t,e){var n=[];if(t.type==="FeatureCollection")for(var r=0;r<t.features.length;r++)Ok(n,t.features[r],e,r);else t.type==="Feature"?Ok(n,t,e):Ok(n,{geometry:t},e);return n}function Ok(t,e,n,r){if(e.geometry){var i=e.geometry.coordinates,a=e.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=e.id;if(n.promoteId?l=e.properties[n.promoteId]:n.generateId&&(l=r||0),a==="Point")kye(i,s);else if(a==="MultiPoint")for(var c=0;c<i.length;c++)kye(i[c],s);else if(a==="LineString")rZ(i,s,o,!1);else if(a==="MultiLineString")if(n.lineMetrics){for(c=0;c<i.length;c++)s=[],rZ(i[c],s,o,!1),t.push(YM(l,"LineString",s,e.properties));return}else yW(i,s,o,!1);else if(a==="Polygon")yW(i,s,o,!0);else if(a==="MultiPolygon")for(c=0;c<i.length;c++){var u=[];yW(i[c],u,o,!0),s.push(u)}else if(a==="GeometryCollection"){for(c=0;c<e.geometry.geometries.length;c++)Ok(t,{id:l,geometry:e.geometry.geometries[c],properties:e.properties},n,r);return}else throw new Error("Input data is not a valid GeoJSON object.");t.push(YM(l,a,s,e.properties))}}function kye(t,e){e.push(TFe(t[0])),e.push(AFe(t[1])),e.push(0)}function rZ(t,e,n,r){for(var i,a,o=0,s=0;s<t.length;s++){var l=TFe(t[s][0]),c=AFe(t[s][1]);e.push(l),e.push(c),e.push(0),s>0&&(r?o+=(i*c-l*a)/2:o+=Math.sqrt(Math.pow(l-i,2)+Math.pow(c-a,2))),i=l,a=c}var u=e.length-3;e[2]=1,nZ(e,0,u,n),e[u+2]=1,e.size=Math.abs(o),e.start=0,e.end=e.size}function yW(t,e,n,r){for(var i=0;i<t.length;i++){var a=[];rZ(t[i],a,n,r),e.push(a)}}function TFe(t){return t/360+.5}function AFe(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function J0(t,e,n,r,i,a,o,s){if(n/=e,r/=e,a>=n&&o<r)return t;if(o<n||a>=r)return null;for(var l=[],c=0;c<t.length;c++){var u=t[c],f=u.geometry,h=u.type,d=i===0?u.minX:u.minY,p=i===0?u.maxX:u.maxY;if(d>=n&&p<r){l.push(u);continue}else if(p<n||d>=r)continue;var g=[];if(h==="Point"||h==="MultiPoint")p4t(f,g,n,r,i);else if(h==="LineString")wFe(f,g,n,r,i,!1,s.lineMetrics);else if(h==="MultiLineString")_W(f,g,n,r,i,!1);else if(h==="Polygon")_W(f,g,n,r,i,!0);else if(h==="MultiPolygon")for(var v=0;v<f.length;v++){var y=[];_W(f[v],y,n,r,i,!0),y.length&&g.push(y)}if(g.length){if(s.lineMetrics&&h==="LineString"){for(v=0;v<g.length;v++)l.push(YM(u.id,h,g[v],u.tags));continue}(h==="LineString"||h==="MultiLineString")&&(g.length===1?(h="LineString",g=g[0]):h="MultiLineString"),(h==="Point"||h==="MultiPoint")&&(h=g.length===3?"Point":"MultiPoint"),l.push(YM(u.id,h,g,u.tags))}}return l.length?l:null}function p4t(t,e,n,r,i){for(var a=0;a<t.length;a+=3){var o=t[a+i];o>=n&&o<=r&&(e.push(t[a]),e.push(t[a+1]),e.push(t[a+2]))}}function wFe(t,e,n,r,i,a,o){for(var s=Dye(t),l=i===0?g4t:v4t,c=t.start,u,f,h=0;h<t.length-3;h+=3){var d=t[h],p=t[h+1],g=t[h+2],v=t[h+3],y=t[h+4],_=i===0?d:p,E=i===0?v:y,x=!1;o&&(u=Math.sqrt(Math.pow(d-v,2)+Math.pow(p-y,2))),_<n?E>n&&(f=l(s,d,p,v,y,n),o&&(s.start=c+u*f)):_>r?E<r&&(f=l(s,d,p,v,y,r),o&&(s.start=c+u*f)):bW(s,d,p,g),E<n&&_>=n&&(f=l(s,d,p,v,y,n),x=!0),E>r&&_<=r&&(f=l(s,d,p,v,y,r),x=!0),!a&&x&&(o&&(s.end=c+u*f),e.push(s),s=Dye(t)),o&&(c+=u)}var T=t.length-3;d=t[T],p=t[T+1],g=t[T+2],_=i===0?d:p,_>=n&&_<=r&&bW(s,d,p,g),T=s.length-3,a&&T>=3&&(s[T]!==s[0]||s[T+1]!==s[1])&&bW(s,s[0],s[1],s[2]),s.length&&e.push(s)}function Dye(t){var e=[];return e.size=t.size,e.start=t.start,e.end=t.end,e}function _W(t,e,n,r,i,a){for(var o=0;o<t.length;o++)wFe(t[o],e,n,r,i,a,!1)}function bW(t,e,n,r){t.push(e),t.push(n),t.push(r)}function g4t(t,e,n,r,i,a){var o=(a-e)/(r-e);return t.push(a),t.push(n+(i-n)*o),t.push(1),o}function v4t(t,e,n,r,i,a){var o=(a-n)/(i-n);return t.push(e+(r-e)*o),t.push(a),t.push(1),o}function m4t(t,e){var n=e.buffer/e.extent,r=t,i=J0(t,1,-1-n,n,0,-1,2,e),a=J0(t,1,1-n,2+n,0,-1,2,e);return(i||a)&&(r=J0(t,1,-n,1+n,0,-1,2,e)||[],i&&(r=Bye(i,1).concat(r)),a&&(r=r.concat(Bye(a,-1)))),r}function Bye(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],a=i.type,o;if(a==="Point"||a==="MultiPoint"||a==="LineString")o=EW(i.geometry,e);else if(a==="MultiLineString"||a==="Polygon"){o=[];for(var s=0;s<i.geometry.length;s++)o.push(EW(i.geometry[s],e))}else if(a==="MultiPolygon")for(o=[],s=0;s<i.geometry.length;s++){for(var l=[],c=0;c<i.geometry[s].length;c++)l.push(EW(i.geometry[s][c],e));o.push(l)}n.push(YM(i.id,a,o,i.tags))}return n}function EW(t,e){var n=[];n.size=t.size,t.start!==void 0&&(n.start=t.start,n.end=t.end);for(var r=0;r<t.length;r+=3)n.push(t[r]+e,t[r+1],t[r+2]);return n}function Fye(t,e){if(t.transformed)return t;var n=1<<t.z,r=t.x,i=t.y,a,o,s;for(a=0;a<t.features.length;a++){var l=t.features[a],c=l.geometry,u=l.type;if(l.geometry=[],u===1)for(o=0;o<c.length;o+=2)l.geometry.push(Uye(c[o],c[o+1],e,n,r,i));else for(o=0;o<c.length;o++){var f=[];for(s=0;s<c[o].length;s+=2)f.push(Uye(c[o][s],c[o][s+1],e,n,r,i));l.geometry.push(f)}}return t.transformed=!0,t}function Uye(t,e,n,r,i,a){return[Math.round(n*(t*r-i)),Math.round(n*(e*r-a))]}function y4t(t,e,n,r,i){for(var a=e===i.maxZoom?0:i.tolerance/((1<<e)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:e,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<t.length;s++){o.numFeatures++,_4t(o,t[s],a,i);var l=t[s].minX,c=t[s].minY,u=t[s].maxX,f=t[s].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),u>o.maxX&&(o.maxX=u),f>o.maxY&&(o.maxY=f)}return o}function _4t(t,e,n,r){var i=e.geometry,a=e.type,o=[];if(a==="Point"||a==="MultiPoint")for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),t.numPoints++,t.numSimplified++;else if(a==="LineString")xW(o,i,t,n,!1,!1);else if(a==="MultiLineString"||a==="Polygon")for(s=0;s<i.length;s++)xW(o,i[s],t,n,a==="Polygon",s===0);else if(a==="MultiPolygon")for(var l=0;l<i.length;l++){var c=i[l];for(s=0;s<c.length;s++)xW(o,c[s],t,n,!0,s===0)}if(o.length){var u=e.tags||null;if(a==="LineString"&&r.lineMetrics){u={};for(var f in e.tags)u[f]=e.tags[f];u.mapbox_clip_start=i.start/i.size,u.mapbox_clip_end=i.end/i.size}var h={geometry:o,type:a==="Polygon"||a==="MultiPolygon"?3:a==="LineString"||a==="MultiLineString"?2:1,tags:u};e.id!==null&&(h.id=e.id),t.features.push(h)}}function xW(t,e,n,r,i,a){var o=r*r;if(r>0&&e.size<(i?o:r)){n.numPoints+=e.length/3;return}for(var s=[],l=0;l<e.length;l+=3)(r===0||e[l+2]>o)&&(n.numSimplified++,s.push(e[l]),s.push(e[l+1])),n.numPoints++;i&&b4t(s,a),t.push(s)}function b4t(t,e){for(var n=0,r=0,i=t.length,a=i-2;r<i;a=r,r+=2)n+=(t[r]-t[a])*(t[r+1]+t[a+1]);if(n>0===e)for(r=0,i=t.length;r<i/2;r+=2){var o=t[r],s=t[r+1];t[r]=t[i-2-r],t[r+1]=t[i-1-r],t[i-2-r]=o,t[i-1-r]=s}}function E4t(t,e){return new A5(t,e)}function A5(t,e){e=this.options=x4t(Object.create(this.options),e);var n=e.debug;if(n&&console.time("preprocess data"),e.maxZoom<0||e.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(e.promoteId&&e.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=d4t(t,e);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",e.indexMaxZoom,e.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=m4t(r,e),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}A5.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};A5.prototype.splitTile=function(t,e,n,r,i,a,o){for(var s=[t,e,n,r],l=this.options,c=l.debug;s.length;){r=s.pop(),n=s.pop(),e=s.pop(),t=s.pop();var u=1<<e,f=iZ(e,n,r),h=this.tiles[f];if(!h&&(c>1&&console.time("creation"),h=this.tiles[f]=y4t(t,e,n,r,l),this.tileCoords.push({z:e,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",e,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var d="z"+e;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(h.source=t,i){if(e===l.maxZoom||e===i)continue;var p=1<<i-e;if(n!==Math.floor(a/p)||r!==Math.floor(o/p))continue}else if(e===l.indexMaxZoom||h.numPoints<=l.indexMaxPoints)continue;if(h.source=null,t.length!==0){c>1&&console.time("clipping");var g=.5*l.buffer/l.extent,v=.5-g,y=.5+g,_=1+g,E,x,T,S,w,C;E=x=T=S=null,w=J0(t,u,n-g,n+y,0,h.minX,h.maxX,l),C=J0(t,u,n+v,n+_,0,h.minX,h.maxX,l),t=null,w&&(E=J0(w,u,r-g,r+y,1,h.minY,h.maxY,l),x=J0(w,u,r+v,r+_,1,h.minY,h.maxY,l),w=null),C&&(T=J0(C,u,r-g,r+y,1,h.minY,h.maxY,l),S=J0(C,u,r+v,r+_,1,h.minY,h.maxY,l),C=null),c>1&&console.timeEnd("clipping"),s.push(E||[],e+1,n*2,r*2),s.push(x||[],e+1,n*2,r*2+1),s.push(T||[],e+1,n*2+1,r*2),s.push(S||[],e+1,n*2+1,r*2+1)}}};A5.prototype.getTile=function(t,e,n){var r=this.options,i=r.extent,a=r.debug;if(t<0||t>24)return null;var o=1<<t;e=(e%o+o)%o;var s=iZ(t,e,n);if(this.tiles[s])return Fye(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",t,e,n);for(var l=t,c=e,u=n,f;!f&&l>0;)l--,c=Math.floor(c/2),u=Math.floor(u/2),f=this.tiles[iZ(l,c,u)];return!f||!f.source?null:(a>1&&console.log("found parent tile z%d-%d-%d",l,c,u),a>1&&console.time("drilling down"),this.splitTile(f.source,l,c,u,t,e,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?Fye(this.tiles[s],i):null)};function iZ(t,e,n){return((1<<t)*n+e)*32+t}function x4t(t,e){for(var n in e)t[n]=e[n];return t}var EC=class{constructor(e,n,r,i){this.vectorLayerCache={},this.x=n,this.y=r,this.z=i,this.vectorTile=e}getTileData(e){return!e||!this.vectorTile.layers[e]?[]:this.vectorLayerCache[e]?this.vectorLayerCache[e]:this.vectorTile.layers[e].features}getFeatureById(){throw new Error("Method not implemented.")}},S4t=Object.defineProperty,T4t=Object.defineProperties,A4t=Object.getOwnPropertyDescriptors,jye=Object.getOwnPropertySymbols,w4t=Object.prototype.hasOwnProperty,O4t=Object.prototype.propertyIsEnumerable,zye=(t,e,n)=>e in t?S4t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,HB=(t,e)=>{for(var n in e||(e={}))w4t.call(e,n)&&zye(t,n,e[n]);if(jye)for(var n of jye(e))O4t.call(e,n)&&zye(t,n,e[n]);return t},C4t=(t,e)=>T4t(t,A4t(e)),R4t=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),M4t={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function P4t(t){let e=0;for(let n=0,r=t.length,i=r-1,a,o;n<r;i=n++)a=t[n],o=t[i],e+=(o.x-a.x)*(a.y+o.y);return e}function N4t(t){const e=t.length;if(e<=1)return[t];const n=[];let r,i;for(let a=0;a<e;a++){const o=P4t(t[a]);o!==0&&(i===void 0&&(i=o<0),i===o<0?(r&&n.push(r),r=[t[a]]):r.push(t[a]))}return r&&n.push(r),n}var I4t=["Unknown","Point","LineString","Polygon"];function L4t(t,e,n,r,i){let a=i.geometry;const o=i.type,s=i.tags,l=i.id,c=t*Math.pow(2,r),u=t*e,f=t*n;let h=I4t[o],d,p;function g(y){for(let _=0;_<y.length;_++){const E=y[_];if(E[3])break;const x=180-(E[1]+f)*360/c,T=(E[0]+u)*360/c-180,S=360/Math.PI*Math.atan(Math.exp(x*Math.PI/180))-90;y[_]=[T,S,0,1]}}switch(o){case 1:const y=[];for(d=0;d<a.length;d++)y[d]=a[d][0];a=y,g(a);break;case 2:for(d=0;d<a.length;d++)g(a[d]);break;case 3:for(a=N4t(a),d=0;d<a.length;d++)for(p=0;p<a[d].length;p++)g(a[d][p]);break}return a.length===1?a=a[0]:h="Multi"+h,{type:"Feature",geometry:{type:h,coordinates:a},properties:s,id:l,relativeOrigin:[0,0],coord:""}}var k4t=(t,e,n,r)=>R4t(void 0,null,function*(){return new Promise(i=>{const a=e.getTile(t.z,t.x,t.y),s={layers:{defaultLayer:{features:a?a.features.map(c=>L4t(r,n.x,n.y,n.z,c)):[]}}},l=new EC(s,t.x,t.y,t.z);i(l)})});function D4t(t){const e={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!0,debug:0};return t===void 0||typeof t.geojsonvtOptions>"u"?e:HB(HB({},e),t.geojsonvtOptions)}function B4t(t,e){const n=D4t(e),r=n.extent||4096,i=E4t(t,n),a=(s,l)=>k4t(l,i,s,r),o=C4t(HB(HB({},M4t),e),{getTileData:a});return{data:t,dataArray:[],tilesetOptions:o,isTile:!0}}var F4t=Object.defineProperty,U4t=Object.defineProperties,j4t=Object.getOwnPropertyDescriptors,$ye=Object.getOwnPropertySymbols,z4t=Object.prototype.hasOwnProperty,$4t=Object.prototype.propertyIsEnumerable,Hye=(t,e,n)=>e in t?F4t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Gye=(t,e)=>{for(var n in e||(e={}))z4t.call(e,n)&&Hye(t,n,e[n]);if($ye)for(var n of $ye(e))$4t.call(e,n)&&Hye(t,n,e[n]);return t},Wye=(t,e)=>U4t(t,j4t(e));function OFe(t,e){const{extent:n=[121.168,30.2828,121.384,30.4219],coordinates:r,requestParameters:i={}}=e,a=new Promise(l=>{t instanceof HTMLImageElement||sFt(t)?l([t]):H4t(t,i,c=>{l(c)})}),o=rO(r,n);return{originData:t,images:a,_id:1,dataArray:[{_id:0,coordinates:o}]}}function H4t(t,e,n){const r=[];if(typeof t=="string")Kq(Wye(Gye({},e),{url:t}),(i,a)=>{a&&(r.push(a),n(r))});else{const i=t.length;let a=0;t.forEach(o=>{Kq(Wye(Gye({},e),{url:o}),(s,l)=>{a++,l&&r.push(l),a===i&&n(r)})})}return OFe}var G4t=Object.defineProperty,W4t=Object.defineProperties,V4t=Object.getOwnPropertyDescriptors,Vye=Object.getOwnPropertySymbols,Y4t=Object.prototype.hasOwnProperty,X4t=Object.prototype.propertyIsEnumerable,Yye=(t,e,n)=>e in t?G4t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,CFe=(t,e)=>{for(var n in e||(e={}))Y4t.call(e,n)&&Yye(t,n,e[n]);if(Vye)for(var n of Vye(e))X4t.call(e,n)&&Yye(t,n,e[n]);return t},RFe=(t,e)=>W4t(t,V4t(e)),q4t=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),Z4t=(t,e,n,r)=>q4t(void 0,null,function*(){const i={x:e.x,y:e.y,z:e.z},a=OA(t,i);return new Promise(o=>{r?r(i,(s,l)=>{if(s||!l){const c={layers:{defaultLayer:{features:[]}}},u=new EC(c,e.x,e.y,e.z);o(u)}else{const c={layers:{defaultLayer:{features:l.features}}},u=new EC(c,e.x,e.y,e.z);o(u)}}):mDt(RFe(CFe({},n),{url:a}),(s,l)=>{if(s||!l){const c={layers:{defaultLayer:{features:[]}}},u=new EC(c,e.x,e.y,e.z);o(u)}else{const u={layers:{defaultLayer:{features:JSON.parse(l)}}},f=new EC(u,e.x,e.y,e.z);o(f)}})})});function K4t(t,e){const n=(i,a)=>Z4t(t,a,e?.requestParameters,e.getCustomData),r=RFe(CFe({},e),{getTileData:n});return{dataArray:[],tilesetOptions:r,isTile:!0}}var _2={},SW,Xye;function MFe(){if(Xye)return SW;Xye=1,SW=t;function t(e,n){this.x=e,this.y=n}return t.prototype={clone:function(){return new t(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,n){return this.clone()._rotateAround(e,n)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var n=e.x-this.x,r=e.y-this.y;return n*n+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,n){return Math.atan2(this.x*n-this.y*e,this.x*e+this.y*n)},_matMult:function(e){var n=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=n,this.y=r,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var n=Math.cos(e),r=Math.sin(e),i=n*this.x-r*this.y,a=r*this.x+n*this.y;return this.x=i,this.y=a,this},_rotateAround:function(e,n){var r=Math.cos(e),i=Math.sin(e),a=n.x+r*(this.x-n.x)-i*(this.y-n.y),o=n.y+i*(this.x-n.x)+r*(this.y-n.y);return this.x=a,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},t.convert=function(e){return e instanceof t?e:Array.isArray(e)?new t(e[0],e[1]):e},SW}var TW,qye;function PFe(){if(qye)return TW;qye=1;var t=MFe();TW=e;function e(o,s,l,c,u){this.properties={},this.extent=l,this.type=0,this._pbf=o,this._geometry=-1,this._keys=c,this._values=u,o.readFields(n,this,s)}function n(o,s,l){o==1?s.id=l.readVarint():o==2?r(l,s):o==3?s.type=l.readVarint():o==4&&(s._geometry=l.pos)}function r(o,s){for(var l=o.readVarint()+o.pos;o.pos<l;){var c=s._keys[o.readVarint()],u=s._values[o.readVarint()];s.properties[c]=u}}e.types=["Unknown","Point","LineString","Polygon"],e.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var s=o.readVarint()+o.pos,l=1,c=0,u=0,f=0,h=[],d;o.pos<s;){if(c<=0){var p=o.readVarint();l=p&7,c=p>>3}if(c--,l===1||l===2)u+=o.readSVarint(),f+=o.readSVarint(),l===1&&(d&&h.push(d),d=[]),d.push(new t(u,f));else if(l===7)d&&d.push(d[0].clone());else throw new Error("unknown command "+l)}return d&&h.push(d),h},e.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var s=o.readVarint()+o.pos,l=1,c=0,u=0,f=0,h=1/0,d=-1/0,p=1/0,g=-1/0;o.pos<s;){if(c<=0){var v=o.readVarint();l=v&7,c=v>>3}if(c--,l===1||l===2)u+=o.readSVarint(),f+=o.readSVarint(),u<h&&(h=u),u>d&&(d=u),f<p&&(p=f),f>g&&(g=f);else if(l!==7)throw new Error("unknown command "+l)}return[h,p,d,g]},e.prototype.toGeoJSON=function(o,s,l){var c=this.extent*Math.pow(2,l),u=this.extent*o,f=this.extent*s,h=this.loadGeometry(),d=e.types[this.type],p,g;function v(E){for(var x=0;x<E.length;x++){var T=E[x],S=180-(T.y+f)*360/c;E[x]=[(T.x+u)*360/c-180,360/Math.PI*Math.atan(Math.exp(S*Math.PI/180))-90]}}switch(this.type){case 1:var y=[];for(p=0;p<h.length;p++)y[p]=h[p][0];h=y,v(h);break;case 2:for(p=0;p<h.length;p++)v(h[p]);break;case 3:for(h=i(h),p=0;p<h.length;p++)for(g=0;g<h[p].length;g++)v(h[p][g]);break}h.length===1?h=h[0]:d="Multi"+d;var _={type:"Feature",geometry:{type:d,coordinates:h},properties:this.properties};return"id"in this&&(_.id=this.id),_};function i(o){var s=o.length;if(s<=1)return[o];for(var l=[],c,u,f=0;f<s;f++){var h=a(o[f]);h!==0&&(u===void 0&&(u=h<0),u===h<0?(c&&l.push(c),c=[o[f]]):c.push(o[f]))}return c&&l.push(c),l}function a(o){for(var s=0,l=0,c=o.length,u=c-1,f,h;l<c;u=l++)f=o[l],h=o[u],s+=(h.x-f.x)*(f.y+h.y);return s}return TW}var AW,Zye;function NFe(){if(Zye)return AW;Zye=1;var t=PFe();AW=e;function e(i,a){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(n,this,a),this.length=this._features.length}function n(i,a,o){i===15?a.version=o.readVarint():i===1?a.name=o.readString():i===5?a.extent=o.readVarint():i===2?a._features.push(o.pos):i===3?a._keys.push(o.readString()):i===4&&a._values.push(r(o))}function r(i){for(var a=null,o=i.readVarint()+i.pos;i.pos<o;){var s=i.readVarint()>>3;a=s===1?i.readString():s===2?i.readFloat():s===3?i.readDouble():s===4?i.readVarint64():s===5?i.readVarint():s===6?i.readSVarint():s===7?i.readBoolean():null}return a}return e.prototype.feature=function(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];var a=this._pbf.readVarint()+this._pbf.pos;return new t(this._pbf,a,this.extent,this._keys,this._values)},AW}var wW,Kye;function Q4t(){if(Kye)return wW;Kye=1;var t=NFe();wW=e;function e(r,i){this.layers=r.readFields(n,{},i)}function n(r,i,a){if(r===3){var o=new t(a,a.readVarint()+a.pos);o.length&&(i[o.name]=o)}}return wW}var Qye;function J4t(){return Qye||(Qye=1,_2.VectorTile=Q4t(),_2.VectorTileFeature=PFe(),_2.VectorTileLayer=NFe()),_2}var e6t=J4t(),fL={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var Jye;function t6t(){return Jye||(Jye=1,fL.read=function(t,e,n,r,i){var a,o,s=i*8-r-1,l=(1<<s)-1,c=l>>1,u=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,a=d&(1<<-u)-1,d>>=-u,u+=s;u>0;a=a*256+t[e+f],f+=h,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=r;u>0;o=o*256+t[e+f],f+=h,u-=8);if(a===0)a=1-c;else{if(a===l)return o?NaN:(d?-1:1)*(1/0);o=o+Math.pow(2,r),a=a-c}return(d?-1:1)*o*Math.pow(2,a-r)},fL.write=function(t,e,n,r,i,a){var o,s,l,c=a*8-i-1,u=(1<<c)-1,f=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?e+=h/l:e+=h*Math.pow(2,1-f),e*l>=2&&(o++,l/=2),o+f>=u?(s=0,o=u):o+f>=1?(s=(e*l-1)*Math.pow(2,i),o=o+f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[n+d]=s&255,d+=p,s/=256,i-=8);for(o=o<<i|s,c+=i;c>0;t[n+d]=o&255,d+=p,o/=256,c-=8);t[n+d-p]|=g*128}),fL}var OW,e1e;function n6t(){if(e1e)return OW;e1e=1,OW=e;var t=t6t();function e(I){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(I)?I:new Uint8Array(I||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var n=65536*65536,r=1/n,i=12,a=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");e.prototype={destroy:function(){this.buf=null},readFields:function(I,U,$){for($=$||this.length;this.pos<$;){var X=this.readVarint(),N=X>>3,M=this.pos;this.type=X&7,I(N,U,this),this.pos===M&&this.skip(X)}return U},readMessage:function(I,U){return this.readFields(I,U,this.readVarint()+this.pos)},readFixed32:function(){var I=S(this.buf,this.pos);return this.pos+=4,I},readSFixed32:function(){var I=C(this.buf,this.pos);return this.pos+=4,I},readFixed64:function(){var I=S(this.buf,this.pos)+S(this.buf,this.pos+4)*n;return this.pos+=8,I},readSFixed64:function(){var I=S(this.buf,this.pos)+C(this.buf,this.pos+4)*n;return this.pos+=8,I},readFloat:function(){var I=t.read(this.buf,this.pos,!0,23,4);return this.pos+=4,I},readDouble:function(){var I=t.read(this.buf,this.pos,!0,52,8);return this.pos+=8,I},readVarint:function(I){var U=this.buf,$,X;return X=U[this.pos++],$=X&127,X<128||(X=U[this.pos++],$|=(X&127)<<7,X<128)||(X=U[this.pos++],$|=(X&127)<<14,X<128)||(X=U[this.pos++],$|=(X&127)<<21,X<128)?$:(X=U[this.pos],$|=(X&15)<<28,o($,I,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var I=this.readVarint();return I%2===1?(I+1)/-2:I/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var I=this.readVarint()+this.pos,U=this.pos;return this.pos=I,I-U>=i&&a?L(this.buf,U,I):D(this.buf,U,I)},readBytes:function(){var I=this.readVarint()+this.pos,U=this.buf.subarray(this.pos,I);return this.pos=I,U},readPackedVarint:function(I,U){if(this.type!==e.Bytes)return I.push(this.readVarint(U));var $=s(this);for(I=I||[];this.pos<$;)I.push(this.readVarint(U));return I},readPackedSVarint:function(I){if(this.type!==e.Bytes)return I.push(this.readSVarint());var U=s(this);for(I=I||[];this.pos<U;)I.push(this.readSVarint());return I},readPackedBoolean:function(I){if(this.type!==e.Bytes)return I.push(this.readBoolean());var U=s(this);for(I=I||[];this.pos<U;)I.push(this.readBoolean());return I},readPackedFloat:function(I){if(this.type!==e.Bytes)return I.push(this.readFloat());var U=s(this);for(I=I||[];this.pos<U;)I.push(this.readFloat());return I},readPackedDouble:function(I){if(this.type!==e.Bytes)return I.push(this.readDouble());var U=s(this);for(I=I||[];this.pos<U;)I.push(this.readDouble());return I},readPackedFixed32:function(I){if(this.type!==e.Bytes)return I.push(this.readFixed32());var U=s(this);for(I=I||[];this.pos<U;)I.push(this.readFixed32());return I},readPackedSFixed32:function(I){if(this.type!==e.Bytes)return I.push(this.readSFixed32());var U=s(this);for(I=I||[];this.pos<U;)I.push(this.readSFixed32());return I},readPackedFixed64:function(I){if(this.type!==e.Bytes)return I.push(this.readFixed64());var U=s(this);for(I=I||[];this.pos<U;)I.push(this.readFixed64());return I},readPackedSFixed64:function(I){if(this.type!==e.Bytes)return I.push(this.readSFixed64());var U=s(this);for(I=I||[];this.pos<U;)I.push(this.readSFixed64());return I},skip:function(I){var U=I&7;if(U===e.Varint)for(;this.buf[this.pos++]>127;);else if(U===e.Bytes)this.pos=this.readVarint()+this.pos;else if(U===e.Fixed32)this.pos+=4;else if(U===e.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+U)},writeTag:function(I,U){this.writeVarint(I<<3|U)},realloc:function(I){for(var U=this.length||16;U<this.pos+I;)U*=2;if(U!==this.length){var $=new Uint8Array(U);$.set(this.buf),this.buf=$,this.length=U}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(I){this.realloc(4),w(this.buf,I,this.pos),this.pos+=4},writeSFixed32:function(I){this.realloc(4),w(this.buf,I,this.pos),this.pos+=4},writeFixed64:function(I){this.realloc(8),w(this.buf,I&-1,this.pos),w(this.buf,Math.floor(I*r),this.pos+4),this.pos+=8},writeSFixed64:function(I){this.realloc(8),w(this.buf,I&-1,this.pos),w(this.buf,Math.floor(I*r),this.pos+4),this.pos+=8},writeVarint:function(I){if(I=+I||0,I>268435455||I<0){c(I,this);return}this.realloc(4),this.buf[this.pos++]=I&127|(I>127?128:0),!(I<=127)&&(this.buf[this.pos++]=(I>>>=7)&127|(I>127?128:0),!(I<=127)&&(this.buf[this.pos++]=(I>>>=7)&127|(I>127?128:0),!(I<=127)&&(this.buf[this.pos++]=I>>>7&127)))},writeSVarint:function(I){this.writeVarint(I<0?-I*2-1:I*2)},writeBoolean:function(I){this.writeVarint(!!I)},writeString:function(I){I=String(I),this.realloc(I.length*4),this.pos++;var U=this.pos;this.pos=B(this.buf,I,this.pos);var $=this.pos-U;$>=128&&h(U,$,this),this.pos=U-1,this.writeVarint($),this.pos+=$},writeFloat:function(I){this.realloc(4),t.write(this.buf,I,this.pos,!0,23,4),this.pos+=4},writeDouble:function(I){this.realloc(8),t.write(this.buf,I,this.pos,!0,52,8),this.pos+=8},writeBytes:function(I){var U=I.length;this.writeVarint(U),this.realloc(U);for(var $=0;$<U;$++)this.buf[this.pos++]=I[$]},writeRawMessage:function(I,U){this.pos++;var $=this.pos;I(U,this);var X=this.pos-$;X>=128&&h($,X,this),this.pos=$-1,this.writeVarint(X),this.pos+=X},writeMessage:function(I,U,$){this.writeTag(I,e.Bytes),this.writeRawMessage(U,$)},writePackedVarint:function(I,U){U.length&&this.writeMessage(I,d,U)},writePackedSVarint:function(I,U){U.length&&this.writeMessage(I,p,U)},writePackedBoolean:function(I,U){U.length&&this.writeMessage(I,y,U)},writePackedFloat:function(I,U){U.length&&this.writeMessage(I,g,U)},writePackedDouble:function(I,U){U.length&&this.writeMessage(I,v,U)},writePackedFixed32:function(I,U){U.length&&this.writeMessage(I,_,U)},writePackedSFixed32:function(I,U){U.length&&this.writeMessage(I,E,U)},writePackedFixed64:function(I,U){U.length&&this.writeMessage(I,x,U)},writePackedSFixed64:function(I,U){U.length&&this.writeMessage(I,T,U)},writeBytesField:function(I,U){this.writeTag(I,e.Bytes),this.writeBytes(U)},writeFixed32Field:function(I,U){this.writeTag(I,e.Fixed32),this.writeFixed32(U)},writeSFixed32Field:function(I,U){this.writeTag(I,e.Fixed32),this.writeSFixed32(U)},writeFixed64Field:function(I,U){this.writeTag(I,e.Fixed64),this.writeFixed64(U)},writeSFixed64Field:function(I,U){this.writeTag(I,e.Fixed64),this.writeSFixed64(U)},writeVarintField:function(I,U){this.writeTag(I,e.Varint),this.writeVarint(U)},writeSVarintField:function(I,U){this.writeTag(I,e.Varint),this.writeSVarint(U)},writeStringField:function(I,U){this.writeTag(I,e.Bytes),this.writeString(U)},writeFloatField:function(I,U){this.writeTag(I,e.Fixed32),this.writeFloat(U)},writeDoubleField:function(I,U){this.writeTag(I,e.Fixed64),this.writeDouble(U)},writeBooleanField:function(I,U){this.writeVarintField(I,!!U)}};function o(I,U,$){var X=$.buf,N,M;if(M=X[$.pos++],N=(M&112)>>4,M<128||(M=X[$.pos++],N|=(M&127)<<3,M<128)||(M=X[$.pos++],N|=(M&127)<<10,M<128)||(M=X[$.pos++],N|=(M&127)<<17,M<128)||(M=X[$.pos++],N|=(M&127)<<24,M<128)||(M=X[$.pos++],N|=(M&1)<<31,M<128))return l(I,N,U);throw new Error("Expected varint not more than 10 bytes")}function s(I){return I.type===e.Bytes?I.readVarint()+I.pos:I.pos+1}function l(I,U,$){return $?U*4294967296+(I>>>0):(U>>>0)*4294967296+(I>>>0)}function c(I,U){var $,X;if(I>=0?($=I%4294967296|0,X=I/4294967296|0):($=~(-I%4294967296),X=~(-I/4294967296),$^4294967295?$=$+1|0:($=0,X=X+1|0)),I>=18446744073709552e3||I<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");U.realloc(10),u($,X,U),f(X,U)}function u(I,U,$){$.buf[$.pos++]=I&127|128,I>>>=7,$.buf[$.pos++]=I&127|128,I>>>=7,$.buf[$.pos++]=I&127|128,I>>>=7,$.buf[$.pos++]=I&127|128,I>>>=7,$.buf[$.pos]=I&127}function f(I,U){var $=(I&7)<<4;U.buf[U.pos++]|=$|((I>>>=3)?128:0),I&&(U.buf[U.pos++]=I&127|((I>>>=7)?128:0),I&&(U.buf[U.pos++]=I&127|((I>>>=7)?128:0),I&&(U.buf[U.pos++]=I&127|((I>>>=7)?128:0),I&&(U.buf[U.pos++]=I&127|((I>>>=7)?128:0),I&&(U.buf[U.pos++]=I&127)))))}function h(I,U,$){var X=U<=16383?1:U<=2097151?2:U<=268435455?3:Math.floor(Math.log(U)/(Math.LN2*7));$.realloc(X);for(var N=$.pos-1;N>=I;N--)$.buf[N+X]=$.buf[N]}function d(I,U){for(var $=0;$<I.length;$++)U.writeVarint(I[$])}function p(I,U){for(var $=0;$<I.length;$++)U.writeSVarint(I[$])}function g(I,U){for(var $=0;$<I.length;$++)U.writeFloat(I[$])}function v(I,U){for(var $=0;$<I.length;$++)U.writeDouble(I[$])}function y(I,U){for(var $=0;$<I.length;$++)U.writeBoolean(I[$])}function _(I,U){for(var $=0;$<I.length;$++)U.writeFixed32(I[$])}function E(I,U){for(var $=0;$<I.length;$++)U.writeSFixed32(I[$])}function x(I,U){for(var $=0;$<I.length;$++)U.writeFixed64(I[$])}function T(I,U){for(var $=0;$<I.length;$++)U.writeSFixed64(I[$])}function S(I,U){return(I[U]|I[U+1]<<8|I[U+2]<<16)+I[U+3]*16777216}function w(I,U,$){I[$]=U,I[$+1]=U>>>8,I[$+2]=U>>>16,I[$+3]=U>>>24}function C(I,U){return(I[U]|I[U+1]<<8|I[U+2]<<16)+(I[U+3]<<24)}function D(I,U,$){for(var X="",N=U;N<$;){var M=I[N],k=null,z=M>239?4:M>223?3:M>191?2:1;if(N+z>$)break;var j,V,Q;z===1?M<128&&(k=M):z===2?(j=I[N+1],(j&192)===128&&(k=(M&31)<<6|j&63,k<=127&&(k=null))):z===3?(j=I[N+1],V=I[N+2],(j&192)===128&&(V&192)===128&&(k=(M&15)<<12|(j&63)<<6|V&63,(k<=2047||k>=55296&&k<=57343)&&(k=null))):z===4&&(j=I[N+1],V=I[N+2],Q=I[N+3],(j&192)===128&&(V&192)===128&&(Q&192)===128&&(k=(M&15)<<18|(j&63)<<12|(V&63)<<6|Q&63,(k<=65535||k>=1114112)&&(k=null))),k===null?(k=65533,z=1):k>65535&&(k-=65536,X+=String.fromCharCode(k>>>10&1023|55296),k=56320|k&1023),X+=String.fromCharCode(k),N+=z}return X}function L(I,U,$){return a.decode(I.subarray(U,$))}function B(I,U,$){for(var X=0,N,M;X<U.length;X++){if(N=U.charCodeAt(X),N>55295&&N<57344)if(M)if(N<56320){I[$++]=239,I[$++]=191,I[$++]=189,M=N;continue}else N=M-55296<<10|N-56320|65536,M=null;else{N>56319||X+1===U.length?(I[$++]=239,I[$++]=191,I[$++]=189):M=N;continue}else M&&(I[$++]=239,I[$++]=191,I[$++]=189,M=null);N<128?I[$++]=N:(N<2048?I[$++]=N>>6|192:(N<65536?I[$++]=N>>12|224:(I[$++]=N>>18|240,I[$++]=N>>12&63|128),I[$++]=N>>6&63|128),I[$++]=N&63|128)}return $}return OW}var r6t=n6t();const i6t=Ni(r6t);var a6t=Object.defineProperty,o6t=Object.defineProperties,s6t=Object.getOwnPropertyDescriptors,t1e=Object.getOwnPropertySymbols,l6t=Object.prototype.hasOwnProperty,c6t=Object.prototype.propertyIsEnumerable,n1e=(t,e,n)=>e in t?a6t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,r1e=(t,e)=>{for(var n in e||(e={}))l6t.call(e,n)&&n1e(t,n,e[n]);if(t1e)for(var n of t1e(e))c6t.call(e,n)&&n1e(t,n,e[n]);return t},u6t=(t,e)=>o6t(t,s6t(e)),i1e=class{constructor(t,e,n,r){this.vectorLayerCache={},this.x=e,this.y=n,this.z=r,this.vectorTile=new e6t.VectorTile(new i6t(t))}getTileData(t){if(!t||!this.vectorTile.layers[t])return[];if(this.vectorLayerCache[t])return this.vectorLayerCache[t];const e=this.vectorTile.layers[t];if(Array.isArray(e.features))return this.vectorLayerCache[t]=e.features,e.features;const n=[];for(let r=0;r<e.length;r++){const a=e.feature(r).toGeoJSON(this.x,this.y,this.z);n.push(u6t(r1e({},a),{properties:r1e({id:a.id},a.properties)}))}return this.vectorLayerCache[t]=n,n}getFeatureById(){throw new Error("Method not implemented.")}},f6t=Object.defineProperty,h6t=Object.defineProperties,d6t=Object.getOwnPropertyDescriptors,a1e=Object.getOwnPropertySymbols,p6t=Object.prototype.hasOwnProperty,g6t=Object.prototype.propertyIsEnumerable,o1e=(t,e,n)=>e in t?f6t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aZ=(t,e)=>{for(var n in e||(e={}))p6t.call(e,n)&&o1e(t,n,e[n]);if(a1e)for(var n of a1e(e))g6t.call(e,n)&&o1e(t,n,e[n]);return t},IFe=(t,e)=>h6t(t,d6t(e)),v6t=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),m6t={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0},y6t=(t,e,n,r,i)=>v6t(void 0,null,function*(){const a=OA(t,e);return new Promise(o=>{if(i)i({x:n.x,y:n.y,z:n.z},(s,l)=>{if(s||!l)o(void 0);else{const c=new i1e(l,n.x,n.y,n.z);o(c)}});else{const s=hne(IFe(aZ({},r),{url:a}),(l,c)=>{if(l||!c)o(void 0);else{const u=new i1e(c,n.x,n.y,n.z);o(u)}});n.xhrCancel=()=>s.cancel()}})});function _6t(t,e){const n=Array.isArray(t)?t[0]:t,r=(a,o)=>y6t(n,a,o,e?.requestParameters,e?.getCustomData),i=IFe(aZ(aZ({},m6t),e),{getTileData:r});return{data:n,dataArray:[],tilesetOptions:i,isTile:!0}}function b6t(t,e,n){switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"^":return Math.pow(e,n);case"abs":return Math.abs(e);case"floor":return Math.floor(e);case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"sin":return Math.sin(e);case"cos":return Math.cos(e);case"atan":return n===-1?Math.atan(e):Math.atan2(e,n);case"min":return Math.min(e,n);case"max":return Math.max(e,n);case"log10":return Math.log(e);case"log2":return Math.log2(e);default:return console.warn("Calculate symbol err! Return default 0"),0}}function oR(t,e){const{width:n,height:r}=e[0],i=e.map(l=>l.rasterData),a=n*r,o=[],s=JSON.stringify(t);for(let l=0;l<a;l++){const c=JSON.parse(s),u=LFe(c,i,l);if(typeof u=="number")o.push(u);else{const f=oZ(c);o.push(f)}}return o}function LFe(t,e,n){if(t.length===2&&t[0]==="band"&&typeof t[1]=="number")try{return e[t[1]][n]}catch{return console.warn("Raster Data err!"),0}t.map((r,i)=>{if(Array.isArray(r)&&r.length>0)switch(r[0]){case"band":try{t[i]=e[r[1]][n]}catch{console.warn("Raster Data err!"),t[i]=0}break;default:LFe(r,e,n)}})}function E6t(t){const[e,n=-1,r=-1]=t;return e===void 0?(console.warn("Express err!"),["+",0,0]):[e.replace(/\s+/g,""),n,r]}function oZ(t){const e=E6t(t),n=e[0];let r=e[1],i=e[2];return Array.isArray(r)&&(r=oZ(t[1])),Array.isArray(i)&&(i=oZ(t[2])),b6t(n,r,i)}var x6t={nd:{type:"operation",expression:["/",["-",["band",1],["band",0]],["+",["band",1],["band",0]]]},rgb:{type:"function",method:S6t}};function S6t(t,e){const n=t[0].rasterData,r=t[1].rasterData,i=t[2].rasterData,a=[],[o,s]=e?.countCut||[2,98],l=e?.RMinMax||CA(n,o,s),c=e?.GMinMax||CA(r,o,s),u=e?.BMinMax||CA(i,o,s);for(let f=0;f<n.length;f++)a.push(Math.max(0,n[f]-l[0])),a.push(Math.max(0,r[f]-c[0])),a.push(Math.max(0,i[f]-u[0]));return{rasterData:a,rMinMax:l,gMinMax:c,bMinMax:u}}function CA(t,e,n){const r=t.slice().sort((s,l)=>s-l),i=r.length,a=r[Math.ceil(i*e/100)],o=r[Math.ceil(i*n/100)];return[a,o]}var T6t=Object.defineProperty,A6t=Object.defineProperties,w6t=Object.getOwnPropertyDescriptors,s1e=Object.getOwnPropertySymbols,O6t=Object.prototype.hasOwnProperty,C6t=Object.prototype.propertyIsEnumerable,l1e=(t,e,n)=>e in t?T6t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,R6t=(t,e)=>{for(var n in e||(e={}))O6t.call(e,n)&&l1e(t,n,e[n]);if(s1e)for(var n of s1e(e))C6t.call(e,n)&&l1e(t,n,e[n]);return t},M6t=(t,e)=>A6t(t,w6t(e)),kFe=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())});function One(t,e,n){return kFe(this,null,function*(){if(t.length===0)return{rasterData:[0],width:1,heigh:1};const r=yield Promise.all(t.map(({data:l,bands:c=[0]})=>e(l,c))),i=[];r.forEach(l=>{Array.isArray(l)?i.push(...l):i.push(l)});const{width:a,height:o}=i[0];let s;switch(typeof n){case"function":s=n(i);break;case"object":Array.isArray(n)?s={rasterData:oR(n,i)}:s=P6t(n,i);break;default:s={rasterData:i[0].rasterData}}return M6t(R6t({},s),{width:a,height:o})})}function P6t(t,e){const n=x6t[t.type];if(n.type==="function")return n.method(e,t?.options);if(n.type==="operation")return t.type==="rgb"?N6t(n.expression,e):{rasterData:oR(n.expression,e)}}function N6t(t,e){t.r===void 0&&console.warn("Channel R lost in Operation! Use band[0] to fill!"),t.g===void 0&&console.warn("Channel G lost in Operation! Use band[0] to fill!"),t.b===void 0&&console.warn("Channel B lost in Operation! Use band[0] to fill!");const n=oR(t.r||["band",0],e),r=oR(t.g||["band",0],e),i=oR(t.b||["band",0],e);return[n,r,i]}function sZ(t,e,n,r){return kFe(this,null,function*(){const i=yield One(t,e,n);r(null,{data:i})})}function I6t(t,e){const{extent:n=[121.168,30.2828,121.384,30.4219],coordinates:r,width:i,height:a,min:o,max:s,format:l,operation:c}=e;let u,f,h;if(l===void 0||xFe(t))u=Array.from(t),f=i,h=a;else{const g=Array.isArray(t)?t:[t];u=One(g,l,c)}const d=rO(r,n);return{_id:1,dataArray:[{_id:1,data:u,width:f,height:h,min:o,max:s,coordinates:d}]}}let fN=(function(t){return t.Normal="normal",t.PostProcessing="post-processing",t})({}),se=(function(t){return t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.CULL_FACE=2884]="CULL_FACE",t[t.BLEND=3042]="BLEND",t[t.DITHER=3024]="DITHER",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.RED=6403]="RED",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.TEXTURE1=33985]="TEXTURE1",t[t.TEXTURE2=33986]="TEXTURE2",t[t.TEXTURE3=33987]="TEXTURE3",t[t.TEXTURE4=33988]="TEXTURE4",t[t.TEXTURE5=33989]="TEXTURE5",t[t.TEXTURE6=33990]="TEXTURE6",t[t.TEXTURE7=33991]="TEXTURE7",t[t.TEXTURE8=33992]="TEXTURE8",t[t.TEXTURE9=33993]="TEXTURE9",t[t.TEXTURE10=33994]="TEXTURE10",t[t.TEXTURE11=33995]="TEXTURE11",t[t.TEXTURE12=33996]="TEXTURE12",t[t.TEXTURE13=33997]="TEXTURE13",t[t.TEXTURE14=33998]="TEXTURE14",t[t.TEXTURE15=33999]="TEXTURE15",t[t.TEXTURE16=34e3]="TEXTURE16",t[t.TEXTURE17=34001]="TEXTURE17",t[t.TEXTURE18=34002]="TEXTURE18",t[t.TEXTURE19=34003]="TEXTURE19",t[t.TEXTURE20=34004]="TEXTURE20",t[t.TEXTURE21=34005]="TEXTURE21",t[t.TEXTURE22=34006]="TEXTURE22",t[t.TEXTURE23=34007]="TEXTURE23",t[t.TEXTURE24=34008]="TEXTURE24",t[t.TEXTURE25=34009]="TEXTURE25",t[t.TEXTURE26=34010]="TEXTURE26",t[t.TEXTURE27=34011]="TEXTURE27",t[t.TEXTURE28=34012]="TEXTURE28",t[t.TEXTURE29=34013]="TEXTURE29",t[t.TEXTURE30=34014]="TEXTURE30",t[t.TEXTURE31=34015]="TEXTURE31",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t})({});const L6t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`,{camelCase:k6t,isNil:D6t,upperFirst:B6t}=gs;class $y{constructor(){Z(this,"shaderModuleService",void 0),Z(this,"rendererService",void 0),Z(this,"config",void 0),Z(this,"quad",L6t),Z(this,"enabled",!0),Z(this,"renderToScreen",!1),Z(this,"model",void 0),Z(this,"name",void 0),Z(this,"optionsToUpdate",{})}getName(){return this.name}setName(e){this.name=e}getType(){return fN.PostProcessing}init(e,n){this.config=n,this.rendererService=e.getContainer().rendererService,this.shaderModuleService=e.getContainer().shaderModuleService;const{createAttribute:r,createBuffer:i,createModel:a}=this.rendererService,{vs:o,fs:s,uniforms:l}=this.setupShaders();this.model=a({vs:o,fs:s,attributes:{a_Position:r({buffer:i({data:[-4,-4,4,-4,0,4],type:se.FLOAT}),size:2})},uniforms:ze(ze({u_Texture:null},l),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}render(e,n){const r=e.multiPassRenderer.getPostProcessor(),{useFramebuffer:i,getViewportSize:a,clear:o}=this.rendererService,{width:s,height:l}=a();i(this.renderToScreen?null:r.getWriteFBO(),()=>{o({framebuffer:r.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});const c=ze({u_BloomFinal:0,u_Texture:r.getReadFBO(),u_ViewportSize:[s,l]},this.convertOptionsToUniforms(this.optionsToUpdate));n&&(c.u_BloomFinal=1,c.u_Texture2=n),this.model.draw({uniforms:c})})}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}setRenderToScreen(e){this.renderToScreen=e}updateOptions(e){this.optionsToUpdate=ze(ze({},this.optionsToUpdate),e)}setupShaders(){throw new Error("Method not implemented.")}convertOptionsToUniforms(e){const n={};return Object.keys(e).forEach(r=>{D6t(e[r])||(n[`u_${B6t(k6t(r))}`]=e[r])}),n}}function F6t(t){let e=0;switch(t){case"vec2":case"ivec2":e=2;break;case"vec3":case"ivec3":e=3;break;case"vec4":case"ivec4":case"mat2":e=4;break;case"mat3":e=9;break;case"mat4":e=16;break}return e}const DFe=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function c1e(t,e=!1){const n={};return t=t.replace(DFe,(r,i,a)=>{const o=a.split(":"),s=o[0].trim();let l="";switch(o.length>1&&(l=o[1].trim()),i){case"bool":l=l==="true";break;case"float":case"int":l=Number(l);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":l?l=l.replace("[","").replace("]","").split(",").reduce((c,u)=>(c.push(Number(u.trim())),c),[]):l=new Array(F6t(i)).fill(0);break}return n[s]=l,`${e?"uniform ":""}${i} ${s};
`}),{content:t,uniforms:n}}function CW(t){let{content:e,uniforms:n}=c1e(t,!0);return e=e.replace(/(\s*uniform\s*.*\s*){((?:\s*.*\s*)*?)};/g,(r,i,a)=>{a=a.trim().replace(/^.*$/gm,l=>`uniform ${l}`);const{content:o,uniforms:s}=c1e(a);return Object.assign(n,s),`${i}{
${o}
};`}),{content:e,uniforms:n}}function u1e(t){const e={};return t.replace(DFe,(n,r,i)=>{const a=i.trim();return e[a]?"":(e[a]=!0,`uniform ${r} ${a};
`)})}const U6t=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];function j6t(t){return U6t.indexOf(t)}const{clamp:f1e}=gs,z6t=64,$6t=131072,H6t=524288,G6t=2097152,W6t=8388608;function hL(t,e){return t=f1e(Math.floor(t),0,255),e=f1e(Math.floor(e),0,255),256*t+e}function Lhn(t){const{color:e,radius:n,tileX:r,tileY:i,shape:a,opacity:o,stroke:s,strokeWidth:l,strokeOpacity:c}=t,u=[],f=[],h=[],d=[hL(e[0],e[1]),hL(e[2],e[3])],p=[hL(s[0],s[1]),hL(s[2],s[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach(([g,v])=>{u.push([...d,(g+1)*W6t+(v+1)*G6t+j6t(a)*$6t+n,(r+512)*H6t+(i+512)*z6t]),f.push([...p,l,c]),h.push([o,0,0,0])}),{packedBuffer:u,packedBuffer2:f,packedBuffer3:h}}const TE={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"};let GB=(function(t){return t.TOPRIGHT="topright",t.TOPLEFT="topleft",t.BOTTOMRIGHT="bottomright",t.BOTTOMLEFT="bottomleft",t.TOPCENTER="topcenter",t.BOTTOMCENTER="bottomcenter",t.LEFTCENTER="leftcenter",t.RIGHTCENTER="rightcenter",t.LEFTTOP="lefttop",t.RIGHTTOP="righttop",t.LEFTBOTTOM="leftbottom",t.RIGHTBOTTOM="rightbottom",t})({}),sw=(function(t){return t[t.LNGLAT=1]="LNGLAT",t[t.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",t[t.VECTOR_TILE=3]="VECTOR_TILE",t[t.IDENTITY=4]="IDENTITY",t[t.METER_OFFSET=5]="METER_OFFSET",t})({});const RT={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",RelativeOrigin:"u_RelativeOrigin"};var Lc={MapInitStart:"mapInitStart",LayerInitStart:"layerInitStart",LayerInitEnd:"layerInitEnd",SourceInitStart:"sourceInitStart",SourceInitEnd:"sourceInitEnd",ScaleInitStart:"scaleInitStart",ScaleInitEnd:"scaleInitEnd",MappingStart:"mappingStart",MappingEnd:"mappingEnd",BuildModelStart:"buildModelStart",BuildModelEnd:"buildModelEnd"};let Oh=(function(t){return t.Hover="hover",t.Click="click",t.Select="select",t.Active="active",t.Drag="drag",t})({}),c_=(function(t){return t.normal="normal",t.additive="additive",t.subtractive="subtractive",t.min="min",t.max="max",t.none="none",t})({}),WE=(function(t){return t.MULTIPLE="MULTIPLE",t.SINGLE="SINGLE",t})({}),w5=(function(t){return t.AND="and",t.OR="or",t})({}),Mu=(function(t){return t.INIT="init",t.UPDATE="update",t})({}),go=(function(t){return t.LINEAR="linear",t.SEQUENTIAL="sequential",t.POWER="power",t.LOG="log",t.IDENTITY="identity",t.TIME="time",t.QUANTILE="quantile",t.QUANTIZE="quantize",t.THRESHOLD="threshold",t.CAT="cat",t.DIVERGING="diverging",t.CUSTOM="threshold",t})({}),MT=(function(t){return t.CONSTANT="constant",t.VARIABLE="variable",t})({}),fr=(function(t){return t[t.Attribute=0]="Attribute",t[t.InstancedAttribute=1]="InstancedAttribute",t[t.Uniform=2]="Uniform",t})({});const Nx=["mapload","mapchange","mapAfterFrameChange"];var dL={exports:{}},h1e;function V6t(){if(h1e)return dL.exports;h1e=1,dL.exports=e,dL.exports.default=e;var t=1e20;function e(o,s,l,c,u,f){this.fontSize=o||24,this.buffer=s===void 0?3:s,this.cutoff=c||.25,this.fontFamily=u||"sans-serif",this.fontWeight=f||"normal",this.radius=l||8;var h=this.size=this.fontSize+this.buffer*2,d=h+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=h,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(d*d),this.gridInner=new Float64Array(d*d),this.f=new Float64Array(d),this.z=new Float64Array(d+1),this.v=new Uint16Array(d),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(h/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function n(o,s,l,c,u,f,h){f.fill(t,0,s*l),h.fill(0,0,s*l);for(var d=(s-c)/2,p=0;p<u;p++)for(var g=0;g<c;g++){var v=(p+d)*s+g+d,y=o.data[4*(p*c+g)+3]/255;if(y===1)f[v]=0,h[v]=t;else if(y===0)f[v]=t,h[v]=0;else{var _=Math.max(0,.5-y),E=Math.max(0,y-.5);f[v]=_*_,h[v]=E*E}}}function r(o,s,l,c,u,f,h){for(var d=0;d<s*l;d++){var p=Math.sqrt(c[d])-Math.sqrt(u[d]);o[d]=Math.round(255-255*(p/f+h))}}e.prototype._draw=function(o,s){var l=this.ctx.measureText(o),c=l.width,u=2*this.buffer,f,h,d,p,g,v,y,_;s&&this.useMetrics?(g=Math.floor(l.actualBoundingBoxAscent),_=this.buffer+Math.ceil(l.actualBoundingBoxAscent),v=this.buffer,y=this.buffer,h=Math.min(this.size,Math.ceil(l.actualBoundingBoxRight-l.actualBoundingBoxLeft)),p=Math.min(this.size-v,Math.ceil(l.actualBoundingBoxAscent+l.actualBoundingBoxDescent)),f=h+u,d=p+u,this.ctx.textBaseline="alphabetic"):(f=h=this.size,d=p=this.size,g=19*this.fontSize/24,v=y=0,_=this.middle,this.ctx.textBaseline="middle");var E;h&&p&&(this.ctx.clearRect(y,v,h,p),this.ctx.fillText(o,this.buffer,_),E=this.ctx.getImageData(y,v,h,p));var x=new Uint8ClampedArray(f*d);return n(E,f,d,h,p,this.gridOuter,this.gridInner),i(this.gridOuter,f,d,this.f,this.v,this.z),i(this.gridInner,f,d,this.f,this.v,this.z),r(x,f,d,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:x,metrics:{width:h,height:p,sdfWidth:f,sdfHeight:d,top:g,left:0,advance:c}}},e.prototype.draw=function(o){return this._draw(o,!1).data},e.prototype.drawWithMetrics=function(o){return this._draw(o,!0)};function i(o,s,l,c,u,f){for(var h=0;h<s;h++)a(o,h,s,l,c,u,f);for(var d=0;d<l;d++)a(o,d*s,1,s,c,u,f)}function a(o,s,l,c,u,f,h){var d,p,g,v;for(f[0]=0,h[0]=-t,h[1]=t,d=0;d<c;d++)u[d]=o[s+d*l];for(d=1,p=0,g=0;d<c;d++){do v=f[p],g=(u[d]-u[v]+d*d-v*v)/(d-v)/2;while(g<=h[p]&&--p>-1);p++,f[p]=d,h[p]=g,h[p+1]=t}for(d=0,p=0;d<c;d++){for(;h[p+1]<d;)p++;v=f[p],o[s+d*l]=u[v]+(d-v)*(d-v)}}return dL.exports}var Y6t=V6t();const X6t=Ni(Y6t),b2=30;function q6t({characterSet:t,getFontWidth:e,fontHeight:n,buffer:r,maxCanvasWidth:i,mapping:a={},xOffset:o=0,yOffset:s=0}){let l=0,c=o;Array.from(t).forEach((f,h)=>{if(!a[f]){const d=e(f,h);c+b2>i&&(c=0,l++),a[f]={x:c,y:s+l*b2,width:b2,height:b2,advance:d},c+=b2}});const u=n+r*2;return{mapping:a,xOffset:c,yOffset:s+l*u,canvasHeight:BFe(s+(l+1)*u)}}function Z6t(t,e,n){let r=0,i=0,a=0,o=[];const s={};for(const c of t)if(!s[c.id]){const{size:u}=c;r+u+e>n&&(d1e(s,o,i),r=0,i=a+i+e,a=0,o=[]),o.push({icon:c,xOffset:r}),r=r+u+e,a=Math.max(a,u)}o.length>0&&d1e(s,o,i);const l=BFe(a+i+e);return{mapping:s,canvasHeight:l}}function d1e(t,e,n){for(const r of e){const{icon:i,xOffset:a}=r;t[i.id]=ze(ze({},i),{},{x:a,y:n,image:i.image,width:i.width,height:i.height})}}function BFe(t){return Math.pow(2,Math.ceil(Math.log2(t)))}const K6t=o5t(),Q6t="sans-serif",J6t="normal",e5t=24,t5t=3,n5t=.25,r5t=8,p1e=1024,i5t=1,g1e=1,a5t=3;function o5t(){const t=[];for(let e=32;e<128;e++)t.push(String.fromCharCode(e));return t}function v1e(t,e,n,r){t.font=`${r} ${n}px ${e}`,t.fillStyle="black",t.textBaseline="middle"}function m1e(t,e){for(let n=0;n<t.length;n++)e.data[4*n+3]=t[n]}class s5t extends ku.EventEmitter{constructor(...e){super(...e),Z(this,"fontAtlas",void 0),Z(this,"iconFontMap",void 0),Z(this,"iconFontGlyphs",{}),Z(this,"fontOptions",void 0),Z(this,"key",void 0),Z(this,"cache",new bFt(a5t))}get scale(){return g1e}get canvas(){const e=this.cache.get(this.key);return e&&e.data}get mapping(){const e=this.cache.get(this.key);return e&&e.mapping||{}}getCanvasByKey(e){const n=this.cache.get(e);return n&&n.data}getMappingByKey(e){const n=this.cache.get(e);return n&&n.mapping||{}}init(){this.cache.clear(),this.fontOptions={fontFamily:Q6t,fontWeight:J6t,characterSet:K6t,fontSize:e5t,buffer:t5t,sdf:!0,cutoff:n5t,radius:r5t,iconfont:!1},this.key="",this.iconFontMap=new Map}addIconGlyphs(e){e.forEach(n=>{this.iconFontGlyphs[n.name]=n.unicode})}addIconFont(e,n){this.iconFontMap.set(e,n)}getIconFontKey(e){return this.iconFontMap.get(e)||e}getGlyph(e){return this.iconFontGlyphs[e]?String.fromCharCode(parseInt(this.iconFontGlyphs[e],16)):""}setFontOptions(e){this.fontOptions=ze(ze({},this.fontOptions),e),this.key=this.getKey();const n=this.getNewChars(this.key,this.fontOptions.characterSet),r=this.cache.get(this.key);if(r&&n.length===0)return;const i=this.generateFontAtlas(this.key,n,r);this.fontAtlas=i,this.cache.set(this.key,i)}addFontFace(e,n){const r=document.createElement("style");r.type="text/css",r.innerText=`
        @font-face{
            font-family: '${e}';
            src: url('${n}') format('woff2'),
            url('${n}') format('woff'),
            url('${n}') format('truetype');
        }`,r.onload=()=>{if(document.fonts)try{document.fonts.load(`24px ${e}`,"L7text"),document.fonts.ready.then(()=>{this.emit("fontloaded",{fontFamily:e})})}catch(i){console.warn(" document.fonts !"),console.warn(" iconfont !"),console.warn(i)}},document.getElementsByTagName("head")[0].appendChild(r)}destroy(){this.cache.clear(),this.iconFontMap.clear()}generateFontAtlas(e,n,r){const{fontFamily:i,fontWeight:a,fontSize:o,buffer:s,sdf:l,radius:c,cutoff:u,iconfont:f}=this.fontOptions;let h=r&&r.data;h||(h=window.document.createElement("canvas"),h.width=p1e);const d=h.getContext("2d",{willReadFrequently:!0});v1e(d,i,o,a);const{mapping:p,canvasHeight:g,xOffset:v,yOffset:y}=q6t(ze({getFontWidth:E=>d.measureText(E).width,fontHeight:o*g1e,buffer:s,characterSet:n,maxCanvasWidth:p1e},r&&{mapping:r.mapping,xOffset:r.xOffset,yOffset:r.yOffset})),_=d.getImageData(0,0,h.width,h.height);if(h.height=g,d.putImageData(_,0,0),v1e(d,i,o,a),l){const E=new X6t(o,s,c,u,i,a),x=d.getImageData(0,0,E.size,E.size);for(const T of n){if(f){const S=String.fromCharCode(parseInt(T.replace("&#x","").replace(";",""),16)),w=E.draw(S);m1e(w,x)}else m1e(E.draw(T),x);d.putImageData(x,p[T].x,p[T].y)}}else for(const E of n)d.fillText(E,p[E].x,p[E].y+o*i5t);return{xOffset:v,yOffset:y,mapping:p,data:h,width:h.width,height:h.height}}getKey(){const{fontFamily:e,fontWeight:n}=this.fontOptions;return`${e}_${n}`}getNewChars(e,n){const r=this.cache.get(e);if(!r)return n;const i=[],a=r.mapping,o=new Set(Object.keys(a));return new Set(n).forEach(l=>{o.has(l)||i.push(l)}),i}}const l5t=3,y1e=1024,E2=64;class c5t extends ku.EventEmitter{constructor(...e){super(...e),Z(this,"canvasHeight",128),Z(this,"texture",void 0),Z(this,"canvas",void 0),Z(this,"iconData",void 0),Z(this,"iconMap",void 0),Z(this,"ctx",void 0),Z(this,"loadingImageCount",0)}isLoading(){return this.loadingImageCount===0}init(){this.iconData=[],this.iconMap={},this.canvas=window.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}addImage(e,n){var r=this;return kt(function*(){let i=new Image;r.loadingImageCount++,r.hasImage(e)?console.warn("Image Id already exists"):r.iconData.push({id:e,size:E2}),r.updateIconMap(),i=yield r.loadImage(n);const a=r.iconData.find(o=>o.id===e);a&&(a.image=i,a.width=i.width,a.height=i.height),r.update()})()}addImageMini(e,n,r){const i=r.getSceneConfig().canvas;let a=i.createImage();if(this.loadingImageCount++,this.hasImage(e))throw new Error("Image Id already exists");this.iconData.push({id:e,size:E2}),this.updateIconMap(),this.loadImageMini(n,i).then(o=>{a=o;const s=this.iconData.find(l=>l.id===e);s&&(s.image=a,s.width=a.width,s.height=a.height),this.update()})}getTexture(){return this.texture}getIconMap(){return this.iconMap}getCanvas(){return this.canvas}hasImage(e){return this.iconMap.hasOwnProperty(e)}removeImage(e){this.hasImage(e)&&(this.iconData=this.iconData.filter(n=>n.id!==e),delete this.iconMap[e],this.update())}destroy(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}loadImage(e){return new Promise((n,r)=>{if(e instanceof HTMLImageElement){n(e);return}const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{n(i)},i.onerror=()=>{r(new Error("Could not load image at "+e))},i.src=e instanceof File?URL.createObjectURL(e):e})}update(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}updateIconAtlas(){this.canvas.width=y1e,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(e=>{const{x:n,y:r,image:i,width:a=64,height:o=64}=this.iconMap[e],l=Math.max(a,o)/E2,c=o/l,u=a/l;i&&this.ctx.drawImage(i,n+(E2-u)/2,r+(E2-c)/2,u,c)})}updateIconMap(){const{mapping:e,canvasHeight:n}=Z6t(this.iconData,l5t,y1e);this.iconMap=e,this.canvasHeight=n}loadImageMini(e,n){return new Promise((r,i)=>{const a=n.createImage();a.crossOrigin="anonymous",a.onload=()=>{r(a)},a.onerror=()=>{i(new Error("Could not load image at "+e))},a.src=e})}}class u5t{constructor(){Z(this,"viewport",void 0),Z(this,"overridedViewProjectionMatrix",void 0),Z(this,"viewMatrixInverse",void 0),Z(this,"cameraPosition",void 0)}init(){}update(e){this.viewport=e,this.viewMatrixInverse=Zr(),qs(this.viewMatrixInverse,e.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}getProjectionMatrix(){return this.viewport.getProjectionMatrix()}getModelMatrix(){return this.viewport.getModelMatrix()}getViewMatrix(){return this.viewport.getViewMatrix()}getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}getViewProjectionMatrixUncentered(){return this.viewport.getViewProjectionMatrixUncentered()}getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}getZoom(){return this.viewport.getZoom()}getZoomScale(){return this.viewport.getZoomScale()}getCenter(){const[e,n]=this.viewport.getCenter();return[e,n]}getFocalDistance(){return this.viewport.getFocalDistance()}getCameraPosition(){return this.cameraPosition}projectFlat(e,n){return this.viewport.projectFlat(e,n)}setViewProjectionMatrix(e){this.overridedViewProjectionMatrix=e}}const f5t={topleft:"column",topright:"column",bottomright:"column",bottomleft:"column",leftcenter:"column",rightcenter:"column",topcenter:"row",bottomcenter:"row",lefttop:"row",righttop:"row",leftbottom:"row",rightbottom:"row"};class h5t{constructor(){Z(this,"container",void 0),Z(this,"controlCorners",void 0),Z(this,"controlContainer",void 0),Z(this,"scene",void 0),Z(this,"mapsService",void 0),Z(this,"controls",[]),Z(this,"unAddControls",[])}init(e,n){this.container=e.container,this.scene=n,this.mapsService=n.mapService,this.initControlPos()}addControl(e,n){n.mapService.map?(e.addTo(this.scene),this.controls.push(e)):this.unAddControls.push(e)}getControlByName(e){return this.controls.find(n=>n.controlOption.name===e)}removeControl(e){const n=this.controls.indexOf(e);return n>-1&&this.controls.splice(n,1),e.remove(),this}addControls(){this.unAddControls.forEach(e=>{e.addTo(this.scene),this.controls.push(e)}),this.unAddControls=[]}destroy(){for(const e of this.controls)e.remove();this.controls=[],this.clearControlPos()}initControlPos(){const e=this.controlCorners={},n="l7-",r=this.controlContainer=is("div",n+"control-container",this.container);function i(o=[]){const s=o.map(l=>n+l).join(" ");e[o.filter(l=>!["row","column"].includes(l)).join("")]=is("div",s,r)}function a(o){return[...o.replace(/^(top|bottom|left|right|center)/,"$1-").split("-"),f5t[o]]}Object.values(GB).forEach(o=>{i(a(o))}),this.checkCornerOverlap()}clearControlPos(){for(const e in this.controlCorners)this.controlCorners[e]&&Ip(this.controlCorners[e]);this.controlContainer&&Ip(this.controlContainer)}checkCornerOverlap(){const e=window.MutationObserver;if(e)for(const n of Object.keys(this.controlCorners)){const r=n.match(/^(top|bottom)(left|right)$/);if(r){const[,i,a]=r,o=this.controlCorners[`${i}${a}`];new e(([{target:l}])=>{o&&(o.style[i]=l.clientHeight+"px")}).observe(this.controlCorners[`${a}${i}`],{childList:!0,attributes:!0})}}}}class d5t{constructor(){Z(this,"container",void 0),Z(this,"scene",void 0),Z(this,"mapsService",void 0),Z(this,"markers",[]),Z(this,"markerLayers",[]),Z(this,"unAddMarkers",[]),Z(this,"unAddMarkerLayers",[])}addMarkerLayer(e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(e),e.addTo(this.scene)):this.unAddMarkerLayers.push(e)}removeMarkerLayer(e){e.destroy(),this.markerLayers.indexOf(e);const n=this.markerLayers.indexOf(e);n>-1&&this.markerLayers.splice(n,1)}addMarker(e){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(e),e.addTo(this.scene)):this.unAddMarkers.push(e)}addMarkers(){this.unAddMarkers.forEach(e=>{e.addTo(this.scene),this.markers.push(e)}),this.unAddMarkers=[]}addMarkerLayers(){this.unAddMarkerLayers.forEach(e=>{this.markerLayers.push(e),e.addTo(this.scene)}),this.unAddMarkers=[]}removeMarker(e){e.remove(),this.markers.indexOf(e);const n=this.markers.indexOf(e);n>-1&&this.markers.splice(n,1)}removeAllMarkers(){this.destroy()}init(e){this.scene=e,this.mapsService=e.mapService}destroy(){this.markers.forEach(e=>{e.remove()}),this.markers=[],this.markerLayers.forEach(e=>{e.destroy()}),this.markerLayers=[]}removeMakerLayerMarker(e){e.destroy()}}class p5t{constructor(){Z(this,"scene",void 0),Z(this,"mapsService",void 0),Z(this,"popups",[]),Z(this,"unAddPopups",[])}get isMarkerReady(){return this.mapsService.map&&this.mapsService.getMarkerContainer()}removePopup(e){e!=null&&e.isOpen()&&e.remove();const n=this.popups.indexOf(e);n>-1&&this.popups.splice(n,1);const r=this.unAddPopups.indexOf(e);r>-1&&this.unAddPopups.splice(r,1)}destroy(){this.popups.forEach(e=>e.remove())}addPopup(e){e&&e.getOptions().autoClose&&[...this.popups,...this.unAddPopups].forEach(n=>{n.getOptions().autoClose&&this.removePopup(n)}),this.isMarkerReady?(e.addTo(this.scene),this.popups.push(e)):this.unAddPopups.push(e),e.on("close",()=>{this.removePopup(e)})}initPopup(){this.unAddPopups.length&&this.unAddPopups.forEach(e=>{this.addPopup(e),this.unAddPopups=[]})}init(e){this.scene=e,this.mapsService=e.mapService}}const g5t={MapToken:" Demo  Token,  Token   https://lbs.amap.com/api/javascript-api/guide/abc/prepare  Mapbox https://docs.mapbox.com/help/glossary/access-token/",SDK:"mapbox-gl apiL7"},{merge:v5t}=gs,m5t={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,stencil:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},y5t={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",maskLayers:[],enableMask:!0,maskOperation:w5.AND,pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0};class _5t{constructor(){Z(this,"sceneConfigCache",{}),Z(this,"layerConfigCache",{}),Z(this,"layerAttributeConfigCache",{})}getSceneConfig(e){return this.sceneConfigCache[e]}getSceneWarninfo(e){return g5t[e]}setSceneConfig(e,n){this.sceneConfigCache[e]=ze(ze({},m5t),n)}getLayerConfig(e){return this.layerConfigCache[e]}setLayerConfig(e,n,r){this.layerConfigCache[n]=ze({},v5t({},this.sceneConfigCache[e],y5t,r))}getAttributeConfig(e){return this.layerAttributeConfigCache[e]}setAttributeConfig(e,n){this.layerAttributeConfigCache[e]=ze(ze({},this.layerAttributeConfigCache[e]),n)}clean(){this.sceneConfigCache={},this.layerConfigCache={}}}const RW=Math.PI/180,b5t=512,_1e=4003e4;function b1e({latitude:t=0,zoom:e=0,scale:n,highPrecision:r=!1,flipY:i=!1}){n=n!==void 0?n:Math.pow(2,e);const a={},o=b5t*n,s=Math.cos(t*RW),l=o/360,c=l/s,u=o/_1e/s;if(a.pixelsPerMeter=[u,-u,u],a.metersPerPixel=[1/u,-1/u,1/u],a.pixelsPerDegree=[l,-c,u],a.degreesPerPixel=[1/l,-1/c,1/u],r){const f=RW*Math.tan(t*RW)/s,h=l*f/2,d=o/_1e*f,p=d/c*u;a.pixelsPerDegree2=[0,-h,d],a.pixelsPerMeter2=[p,0,p],i&&(a.pixelsPerDegree2[1]=-a.pixelsPerDegree2[1],a.pixelsPerMeter2[1]=-a.pixelsPerMeter2[1])}return i&&(a.pixelsPerMeter[1]=-a.pixelsPerMeter[1],a.metersPerPixel[1]=-a.metersPerPixel[1],a.pixelsPerDegree[1]=-a.pixelsPerDegree[1],a.degreesPerPixel[1]=-a.degreesPerPixel[1]),a}const E5t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];class x5t{constructor(e){Z(this,"needRefresh",!0),Z(this,"coordinateSystem",void 0),Z(this,"viewportCenter",void 0),Z(this,"viewportCenterProjection",void 0),Z(this,"pixelsPerDegree",void 0),Z(this,"pixelsPerDegree2",void 0),Z(this,"pixelsPerMeter",void 0),this.cameraService=e}refresh(e){const n=this.cameraService.getZoom(),r=e||this.cameraService.getCenter(),{pixelsPerMeter:i,pixelsPerDegree:a}=b1e({latitude:r[1],zoom:n});this.viewportCenter=r,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=i,this.pixelsPerDegree=a,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===sw.LNGLAT?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===sw.LNGLAT_OFFSET&&this.calculateLnglatOffset(r,n),this.needRefresh=!1}getCoordinateSystem(){return this.coordinateSystem}setCoordinateSystem(e){this.coordinateSystem=e}getViewportCenter(){return this.viewportCenter}setViewportCenter(e){this.refresh(e)}getViewportCenterProjection(){return this.viewportCenterProjection}getPixelsPerDegree(){return this.pixelsPerDegree}getPixelsPerDegree2(){return this.pixelsPerDegree2}getPixelsPerMeter(){return this.pixelsPerMeter}calculateLnglatOffset(e,n,r,i){const{pixelsPerMeter:a,pixelsPerDegree:o,pixelsPerDegree2:s}=b1e({latitude:e[1],zoom:n,scale:r,flipY:i,highPrecision:!0});let l=this.cameraService.getViewMatrix();const c=this.cameraService.getProjectionMatrix();let u=qa([],c,l);const f=this.cameraService.projectFlat([Math.fround(e[0]),Math.fround(e[1])],Math.pow(2,n));this.viewportCenterProjection=fs([],[f[0],f[1],0,1],u),l=this.cameraService.getViewMatrixUncentered()||l,u=qa([],c,l),u=qa([],u,E5t),this.cameraService.setViewProjectionMatrix(u),this.pixelsPerMeter=a,this.pixelsPerDegree=o,this.pixelsPerDegree2=s}}class S5t extends ku.EventEmitter{constructor(...e){super(...e),Z(this,"renderMap",new Map),Z(this,"enable",!1),Z(this,"renderEnable",!1),Z(this,"cacheLogs",{})}setEnable(e){this.enable=!!e}log(e,n){if(!this.enable)return;const r=e.split(".");let i=null;r.forEach((a,o)=>{i!==null?(i[a]||(i[a]={}),o!==r.length-1&&(i=i[a])):(this.cacheLogs[a]||(this.cacheLogs[a]={}),o!==r.length-1&&(i=this.cacheLogs[a])),o===r.length-1&&(i[a]=ze(ze({time:Date.now()},i[a]),n))})}getLog(e){switch(typeof e){case"string":return this.cacheLogs[e];case"object":return e.map(n=>this.cacheLogs[n]).filter(n=>n!==void 0);case"undefined":return this.cacheLogs}}removeLog(e){delete this.cacheLogs[e]}generateRenderUid(){return this.renderEnable?_Ft():""}renderDebug(e){this.renderEnable=e}renderStart(e){if(!this.renderEnable||!this.enable)return;const n=this.renderMap.get(e)||{};this.renderMap.set(e,ze(ze({},n),{},{renderUid:e,renderStart:Date.now()}))}renderEnd(e){if(!this.renderEnable||!this.enable)return;const n=this.renderMap.get(e);if(n){const r=n.renderStart,i=Date.now();this.emit("renderEnd",ze(ze({},n),{},{renderEnd:i,renderDuration:i-r})),this.renderMap.delete(e)}}destroy(){this.cacheLogs=null,this.renderMap.clear()}}var MW={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */var E1e;function T5t(){return E1e||(E1e=1,(function(t){(function(e,n,r,i){var a=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),s="function",l=Math.round,c=Math.abs,u=Date.now;function f(he,Te,Fe){return setTimeout(E(he,Fe),Te)}function h(he,Te,Fe){return Array.isArray(he)?(d(he,Fe[Te],Fe),!0):!1}function d(he,Te,Fe){var Et;if(he)if(he.forEach)he.forEach(Te,Fe);else if(he.length!==i)for(Et=0;Et<he.length;)Te.call(Fe,he[Et],Et,he),Et++;else for(Et in he)he.hasOwnProperty(Et)&&Te.call(Fe,he[Et],Et,he)}function p(he,Te,Fe){var Et="DEPRECATED METHOD: "+Te+`
`+Fe+` AT 
`;return function(){var On=new Error("get-stack-trace"),lr=On&&On.stack?On.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",gi=e.console&&(e.console.warn||e.console.log);return gi&&gi.call(e.console,Et,lr),he.apply(this,arguments)}}var g;typeof Object.assign!="function"?g=function(Te){if(Te===i||Te===null)throw new TypeError("Cannot convert undefined or null to object");for(var Fe=Object(Te),Et=1;Et<arguments.length;Et++){var On=arguments[Et];if(On!==i&&On!==null)for(var lr in On)On.hasOwnProperty(lr)&&(Fe[lr]=On[lr])}return Fe}:g=Object.assign;var v=p(function(Te,Fe,Et){for(var On=Object.keys(Fe),lr=0;lr<On.length;)(!Et||Et&&Te[On[lr]]===i)&&(Te[On[lr]]=Fe[On[lr]]),lr++;return Te},"extend","Use `assign`."),y=p(function(Te,Fe){return v(Te,Fe,!0)},"merge","Use `assign`.");function _(he,Te,Fe){var Et=Te.prototype,On;On=he.prototype=Object.create(Et),On.constructor=he,On._super=Et,Fe&&g(On,Fe)}function E(he,Te){return function(){return he.apply(Te,arguments)}}function x(he,Te){return typeof he==s?he.apply(Te&&Te[0]||i,Te):he}function T(he,Te){return he===i?Te:he}function S(he,Te,Fe){d(L(Te),function(Et){he.addEventListener(Et,Fe,!1)})}function w(he,Te,Fe){d(L(Te),function(Et){he.removeEventListener(Et,Fe,!1)})}function C(he,Te){for(;he;){if(he==Te)return!0;he=he.parentNode}return!1}function D(he,Te){return he.indexOf(Te)>-1}function L(he){return he.trim().split(/\s+/g)}function B(he,Te,Fe){if(he.indexOf&&!Fe)return he.indexOf(Te);for(var Et=0;Et<he.length;){if(Fe&&he[Et][Fe]==Te||!Fe&&he[Et]===Te)return Et;Et++}return-1}function I(he){return Array.prototype.slice.call(he,0)}function U(he,Te,Fe){for(var Et=[],On=[],lr=0;lr<he.length;){var gi=he[lr][Te];B(On,gi)<0&&Et.push(he[lr]),On[lr]=gi,lr++}return Et=Et.sort(function(cr,hr){return cr[Te]>hr[Te]}),Et}function $(he,Te){for(var Fe,Et,On=Te[0].toUpperCase()+Te.slice(1),lr=0;lr<a.length;){if(Fe=a[lr],Et=Fe?Fe+On:Te,Et in he)return Et;lr++}return i}var X=1;function N(){return X++}function M(he){var Te=he.ownerDocument||he;return Te.defaultView||Te.parentWindow||e}var k=/mobile|tablet|ip(ad|hone|od)|android/i,z="ontouchstart"in e,j=$(e,"PointerEvent")!==i,V=z&&k.test(navigator.userAgent),Q="touch",ee="pen",re="mouse",ne="kinect",le=25,ue=1,ve=2,Se=4,Re=8,Xe=1,Le=2,Lt=4,xt=8,dt=16,Bt=Le|Lt,At=xt|dt,zt=Bt|At,rn=["x","y"],Wn=["clientX","clientY"];function Sn(he,Te){var Fe=this;this.manager=he,this.callback=Te,this.element=he.element,this.target=he.options.inputTarget,this.domHandler=function(Et){x(he.options.enable,[he])&&Fe.handler(Et)},this.init()}Sn.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&w(this.element,this.evEl,this.domHandler),this.evTarget&&w(this.target,this.evTarget,this.domHandler),this.evWin&&w(M(this.element),this.evWin,this.domHandler)}};function In(he){var Te,Fe=he.options.inputClass;return Fe?Te=Fe:j?Te=H:V?Te=Oe:z?Te=kn:Te=ft,new Te(he,de)}function de(he,Te,Fe){var Et=Fe.pointers.length,On=Fe.changedPointers.length,lr=Te&ue&&Et-On===0,gi=Te&(Se|Re)&&Et-On===0;Fe.isFirst=!!lr,Fe.isFinal=!!gi,lr&&(he.session={}),Fe.eventType=Te,sr(he,Fe),he.emit("hammer.input",Fe),he.recognize(Fe),he.session.prevInput=Fe}function sr(he,Te){var Fe=he.session,Et=Te.pointers,On=Et.length;Fe.firstInput||(Fe.firstInput=Ft(Te)),On>1&&!Fe.firstMultiple?Fe.firstMultiple=Ft(Te):On===1&&(Fe.firstMultiple=!1);var lr=Fe.firstInput,gi=Fe.firstMultiple,No=gi?gi.center:lr.center,cr=Te.center=An(Et);Te.timeStamp=u(),Te.deltaTime=Te.timeStamp-lr.timeStamp,Te.angle=Tr(No,cr),Te.distance=Vr(No,cr),zr(Fe,Te),Te.offsetDirection=$n(Te.deltaX,Te.deltaY);var hr=wn(Te.deltaTime,Te.deltaX,Te.deltaY);Te.overallVelocityX=hr.x,Te.overallVelocityY=hr.y,Te.overallVelocity=c(hr.x)>c(hr.y)?hr.x:hr.y,Te.scale=gi?ei(gi.pointers,Et):1,Te.rotation=gi?Rr(gi.pointers,Et):0,Te.maxPointers=Fe.prevInput?Te.pointers.length>Fe.prevInput.maxPointers?Te.pointers.length:Fe.prevInput.maxPointers:Te.pointers.length,st(Fe,Te);var Xr=he.element;C(Te.srcEvent.target,Xr)&&(Xr=Te.srcEvent.target),Te.target=Xr}function zr(he,Te){var Fe=Te.center,Et=he.offsetDelta||{},On=he.prevDelta||{},lr=he.prevInput||{};(Te.eventType===ue||lr.eventType===Se)&&(On=he.prevDelta={x:lr.deltaX||0,y:lr.deltaY||0},Et=he.offsetDelta={x:Fe.x,y:Fe.y}),Te.deltaX=On.x+(Fe.x-Et.x),Te.deltaY=On.y+(Fe.y-Et.y)}function st(he,Te){var Fe=he.lastInterval||Te,Et=Te.timeStamp-Fe.timeStamp,On,lr,gi,No;if(Te.eventType!=Re&&(Et>le||Fe.velocity===i)){var cr=Te.deltaX-Fe.deltaX,hr=Te.deltaY-Fe.deltaY,Xr=wn(Et,cr,hr);lr=Xr.x,gi=Xr.y,On=c(Xr.x)>c(Xr.y)?Xr.x:Xr.y,No=$n(cr,hr),he.lastInterval=Te}else On=Fe.velocity,lr=Fe.velocityX,gi=Fe.velocityY,No=Fe.direction;Te.velocity=On,Te.velocityX=lr,Te.velocityY=gi,Te.direction=No}function Ft(he){for(var Te=[],Fe=0;Fe<he.pointers.length;)Te[Fe]={clientX:l(he.pointers[Fe].clientX),clientY:l(he.pointers[Fe].clientY)},Fe++;return{timeStamp:u(),pointers:Te,center:An(Te),deltaX:he.deltaX,deltaY:he.deltaY}}function An(he){var Te=he.length;if(Te===1)return{x:l(he[0].clientX),y:l(he[0].clientY)};for(var Fe=0,Et=0,On=0;On<Te;)Fe+=he[On].clientX,Et+=he[On].clientY,On++;return{x:l(Fe/Te),y:l(Et/Te)}}function wn(he,Te,Fe){return{x:Te/he||0,y:Fe/he||0}}function $n(he,Te){return he===Te?Xe:c(he)>=c(Te)?he<0?Le:Lt:Te<0?xt:dt}function Vr(he,Te,Fe){Fe||(Fe=rn);var Et=Te[Fe[0]]-he[Fe[0]],On=Te[Fe[1]]-he[Fe[1]];return Math.sqrt(Et*Et+On*On)}function Tr(he,Te,Fe){Fe||(Fe=rn);var Et=Te[Fe[0]]-he[Fe[0]],On=Te[Fe[1]]-he[Fe[1]];return Math.atan2(On,Et)*180/Math.PI}function Rr(he,Te){return Tr(Te[1],Te[0],Wn)+Tr(he[1],he[0],Wn)}function ei(he,Te){return Vr(Te[0],Te[1],Wn)/Vr(he[0],he[1],Wn)}var va={mousedown:ue,mousemove:ve,mouseup:Se},pi="mousedown",qo="mousemove mouseup";function ft(){this.evEl=pi,this.evWin=qo,this.pressed=!1,Sn.apply(this,arguments)}_(ft,Sn,{handler:function(Te){var Fe=va[Te.type];Fe&ue&&Te.button===0&&(this.pressed=!0),Fe&ve&&Te.which!==1&&(Fe=Se),this.pressed&&(Fe&Se&&(this.pressed=!1),this.callback(this.manager,Fe,{pointers:[Te],changedPointers:[Te],pointerType:re,srcEvent:Te}))}});var nn={pointerdown:ue,pointermove:ve,pointerup:Se,pointercancel:Re,pointerout:Re},Yn={2:Q,3:ee,4:re,5:ne},Nr="pointerdown",ce="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Nr="MSPointerDown",ce="MSPointerMove MSPointerUp MSPointerCancel");function H(){this.evEl=Nr,this.evWin=ce,Sn.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(H,Sn,{handler:function(Te){var Fe=this.store,Et=!1,On=Te.type.toLowerCase().replace("ms",""),lr=nn[On],gi=Yn[Te.pointerType]||Te.pointerType,No=gi==Q,cr=B(Fe,Te.pointerId,"pointerId");lr&ue&&(Te.button===0||No)?cr<0&&(Fe.push(Te),cr=Fe.length-1):lr&(Se|Re)&&(Et=!0),!(cr<0)&&(Fe[cr]=Te,this.callback(this.manager,lr,{pointers:Fe,changedPointers:[Te],pointerType:gi,srcEvent:Te}),Et&&Fe.splice(cr,1))}});var W={touchstart:ue,touchmove:ve,touchend:Se,touchcancel:Re},F="touchstart",Y="touchstart touchmove touchend touchcancel";function te(){this.evTarget=F,this.evWin=Y,this.started=!1,Sn.apply(this,arguments)}_(te,Sn,{handler:function(Te){var Fe=W[Te.type];if(Fe===ue&&(this.started=!0),!!this.started){var Et=pe.call(this,Te,Fe);Fe&(Se|Re)&&Et[0].length-Et[1].length===0&&(this.started=!1),this.callback(this.manager,Fe,{pointers:Et[0],changedPointers:Et[1],pointerType:Q,srcEvent:Te})}}});function pe(he,Te){var Fe=I(he.touches),Et=I(he.changedTouches);return Te&(Se|Re)&&(Fe=U(Fe.concat(Et),"identifier")),[Fe,Et]}var me={touchstart:ue,touchmove:ve,touchend:Se,touchcancel:Re},Ce="touchstart touchmove touchend touchcancel";function Oe(){this.evTarget=Ce,this.targetIds={},Sn.apply(this,arguments)}_(Oe,Sn,{handler:function(Te){var Fe=me[Te.type],Et=ct.call(this,Te,Fe);Et&&this.callback(this.manager,Fe,{pointers:Et[0],changedPointers:Et[1],pointerType:Q,srcEvent:Te})}});function ct(he,Te){var Fe=I(he.touches),Et=this.targetIds;if(Te&(ue|ve)&&Fe.length===1)return Et[Fe[0].identifier]=!0,[Fe,Fe];var On,lr,gi=I(he.changedTouches),No=[],cr=this.target;if(lr=Fe.filter(function(hr){return C(hr.target,cr)}),Te===ue)for(On=0;On<lr.length;)Et[lr[On].identifier]=!0,On++;for(On=0;On<gi.length;)Et[gi[On].identifier]&&No.push(gi[On]),Te&(Se|Re)&&delete Et[gi[On].identifier],On++;if(No.length)return[U(lr.concat(No),"identifier"),No]}var Ge=2500,$t=25;function kn(){Sn.apply(this,arguments);var he=E(this.handler,this);this.touch=new Oe(this.manager,he),this.mouse=new ft(this.manager,he),this.primaryTouch=null,this.lastTouches=[]}_(kn,Sn,{handler:function(Te,Fe,Et){var On=Et.pointerType==Q,lr=Et.pointerType==re;if(!(lr&&Et.sourceCapabilities&&Et.sourceCapabilities.firesTouchEvents)){if(On)_t.call(this,Fe,Et);else if(lr&&Xn.call(this,Et))return;this.callback(Te,Fe,Et)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function _t(he,Te){he&ue?(this.primaryTouch=Te.changedPointers[0].identifier,Jt.call(this,Te)):he&(Se|Re)&&Jt.call(this,Te)}function Jt(he){var Te=he.changedPointers[0];if(Te.identifier===this.primaryTouch){var Fe={x:Te.clientX,y:Te.clientY};this.lastTouches.push(Fe);var Et=this.lastTouches,On=function(){var lr=Et.indexOf(Fe);lr>-1&&Et.splice(lr,1)};setTimeout(On,Ge)}}function Xn(he){for(var Te=he.srcEvent.clientX,Fe=he.srcEvent.clientY,Et=0;Et<this.lastTouches.length;Et++){var On=this.lastTouches[Et],lr=Math.abs(Te-On.x),gi=Math.abs(Fe-On.y);if(lr<=$t&&gi<=$t)return!0}return!1}var $e=$(o.style,"touchAction"),_n=$e!==i,ar="compute",Hr="auto",ti="manipulation",ua="none",Mr="pan-x",Ir="pan-y",ia=er();function nt(he,Te){this.manager=he,this.set(Te)}nt.prototype={set:function(he){he==ar&&(he=this.compute()),_n&&this.manager.element.style&&ia[he]&&(this.manager.element.style[$e]=he),this.actions=he.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var he=[];return d(this.manager.recognizers,function(Te){x(Te.options.enable,[Te])&&(he=he.concat(Te.getTouchAction()))}),tn(he.join(" "))},preventDefaults:function(he){var Te=he.srcEvent,Fe=he.offsetDirection;if(this.manager.session.prevented){Te.preventDefault();return}var Et=this.actions,On=D(Et,ua)&&!ia[ua],lr=D(Et,Ir)&&!ia[Ir],gi=D(Et,Mr)&&!ia[Mr];if(On){var No=he.pointers.length===1,cr=he.distance<2,hr=he.deltaTime<250;if(No&&cr&&hr)return}if(!(gi&&lr)&&(On||lr&&Fe&Bt||gi&&Fe&At))return this.preventSrc(Te)},preventSrc:function(he){this.manager.session.prevented=!0,he.preventDefault()}};function tn(he){if(D(he,ua))return ua;var Te=D(he,Mr),Fe=D(he,Ir);return Te&&Fe?ua:Te||Fe?Te?Mr:Ir:D(he,ti)?ti:Hr}function er(){if(!_n)return!1;var he={},Te=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Fe){he[Fe]=Te?e.CSS.supports("touch-action",Fe):!0}),he}var mn=1,Yr=2,Gi=4,Fi=8,Ti=Fi,Oa=16,ln=32;function Hn(he){this.options=g({},this.defaults,he||{}),this.id=N(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=mn,this.simultaneous={},this.requireFail=[]}Hn.prototype={defaults:{},set:function(he){return g(this.options,he),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(he){if(h(he,"recognizeWith",this))return this;var Te=this.simultaneous;return he=Lr(he,this),Te[he.id]||(Te[he.id]=he,he.recognizeWith(this)),this},dropRecognizeWith:function(he){return h(he,"dropRecognizeWith",this)?this:(he=Lr(he,this),delete this.simultaneous[he.id],this)},requireFailure:function(he){if(h(he,"requireFailure",this))return this;var Te=this.requireFail;return he=Lr(he,this),B(Te,he)===-1&&(Te.push(he),he.requireFailure(this)),this},dropRequireFailure:function(he){if(h(he,"dropRequireFailure",this))return this;he=Lr(he,this);var Te=B(this.requireFail,he);return Te>-1&&this.requireFail.splice(Te,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(he){return!!this.simultaneous[he.id]},emit:function(he){var Te=this,Fe=this.state;function Et(On){Te.manager.emit(On,he)}Fe<Fi&&Et(Te.options.event+si(Fe)),Et(Te.options.event),he.additionalEvent&&Et(he.additionalEvent),Fe>=Fi&&Et(Te.options.event+si(Fe))},tryEmit:function(he){if(this.canEmit())return this.emit(he);this.state=ln},canEmit:function(){for(var he=0;he<this.requireFail.length;){if(!(this.requireFail[he].state&(ln|mn)))return!1;he++}return!0},recognize:function(he){var Te=g({},he);if(!x(this.options.enable,[this,Te])){this.reset(),this.state=ln;return}this.state&(Ti|Oa|ln)&&(this.state=mn),this.state=this.process(Te),this.state&(Yr|Gi|Fi|Oa)&&this.tryEmit(Te)},process:function(he){},getTouchAction:function(){},reset:function(){}};function si(he){return he&Oa?"cancel":he&Fi?"end":he&Gi?"move":he&Yr?"start":""}function Wi(he){return he==dt?"down":he==xt?"up":he==Le?"left":he==Lt?"right":""}function Lr(he,Te){var Fe=Te.manager;return Fe?Fe.get(he):he}function Ii(){Hn.apply(this,arguments)}_(Ii,Hn,{defaults:{pointers:1},attrTest:function(he){var Te=this.options.pointers;return Te===0||he.pointers.length===Te},process:function(he){var Te=this.state,Fe=he.eventType,Et=Te&(Yr|Gi),On=this.attrTest(he);return Et&&(Fe&Re||!On)?Te|Oa:Et||On?Fe&Se?Te|Fi:Te&Yr?Te|Gi:Yr:ln}});function Xi(){Ii.apply(this,arguments),this.pX=null,this.pY=null}_(Xi,Ii,{defaults:{event:"pan",threshold:10,pointers:1,direction:zt},getTouchAction:function(){var he=this.options.direction,Te=[];return he&Bt&&Te.push(Ir),he&At&&Te.push(Mr),Te},directionTest:function(he){var Te=this.options,Fe=!0,Et=he.distance,On=he.direction,lr=he.deltaX,gi=he.deltaY;return On&Te.direction||(Te.direction&Bt?(On=lr===0?Xe:lr<0?Le:Lt,Fe=lr!=this.pX,Et=Math.abs(he.deltaX)):(On=gi===0?Xe:gi<0?xt:dt,Fe=gi!=this.pY,Et=Math.abs(he.deltaY))),he.direction=On,Fe&&Et>Te.threshold&&On&Te.direction},attrTest:function(he){return Ii.prototype.attrTest.call(this,he)&&(this.state&Yr||!(this.state&Yr)&&this.directionTest(he))},emit:function(he){this.pX=he.deltaX,this.pY=he.deltaY;var Te=Wi(he.direction);Te&&(he.additionalEvent=this.options.event+Te),this._super.emit.call(this,he)}});function Ai(){Ii.apply(this,arguments)}_(Ai,Ii,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ua]},attrTest:function(he){return this._super.attrTest.call(this,he)&&(Math.abs(he.scale-1)>this.options.threshold||this.state&Yr)},emit:function(he){if(he.scale!==1){var Te=he.scale<1?"in":"out";he.additionalEvent=this.options.event+Te}this._super.emit.call(this,he)}});function qi(){Hn.apply(this,arguments),this._timer=null,this._input=null}_(qi,Hn,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Hr]},process:function(he){var Te=this.options,Fe=he.pointers.length===Te.pointers,Et=he.distance<Te.threshold,On=he.deltaTime>Te.time;if(this._input=he,!Et||!Fe||he.eventType&(Se|Re)&&!On)this.reset();else if(he.eventType&ue)this.reset(),this._timer=f(function(){this.state=Ti,this.tryEmit()},Te.time,this);else if(he.eventType&Se)return Ti;return ln},reset:function(){clearTimeout(this._timer)},emit:function(he){this.state===Ti&&(he&&he.eventType&Se?this.manager.emit(this.options.event+"up",he):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Zl(){Ii.apply(this,arguments)}_(Zl,Ii,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ua]},attrTest:function(he){return this._super.attrTest.call(this,he)&&(Math.abs(he.rotation)>this.options.threshold||this.state&Yr)}});function Du(){Ii.apply(this,arguments)}_(Du,Ii,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Bt|At,pointers:1},getTouchAction:function(){return Xi.prototype.getTouchAction.call(this)},attrTest:function(he){var Te=this.options.direction,Fe;return Te&(Bt|At)?Fe=he.overallVelocity:Te&Bt?Fe=he.overallVelocityX:Te&At&&(Fe=he.overallVelocityY),this._super.attrTest.call(this,he)&&Te&he.offsetDirection&&he.distance>this.options.threshold&&he.maxPointers==this.options.pointers&&c(Fe)>this.options.velocity&&he.eventType&Se},emit:function(he){var Te=Wi(he.offsetDirection);Te&&this.manager.emit(this.options.event+Te,he),this.manager.emit(this.options.event,he)}});function yl(){Hn.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(yl,Hn,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ti]},process:function(he){var Te=this.options,Fe=he.pointers.length===Te.pointers,Et=he.distance<Te.threshold,On=he.deltaTime<Te.time;if(this.reset(),he.eventType&ue&&this.count===0)return this.failTimeout();if(Et&&On&&Fe){if(he.eventType!=Se)return this.failTimeout();var lr=this.pTime?he.timeStamp-this.pTime<Te.interval:!0,gi=!this.pCenter||Vr(this.pCenter,he.center)<Te.posThreshold;this.pTime=he.timeStamp,this.pCenter=he.center,!gi||!lr?this.count=1:this.count+=1,this._input=he;var No=this.count%Te.taps;if(No===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Ti,this.tryEmit()},Te.interval,this),Yr):Ti}return ln},failTimeout:function(){return this._timer=f(function(){this.state=ln},this.options.interval,this),ln},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ti&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function js(he,Te){return Te=Te||{},Te.recognizers=T(Te.recognizers,js.defaults.preset),new ru(he,Te)}js.VERSION="2.0.7",js.defaults={domEvents:!1,touchAction:ar,enable:!0,inputTarget:null,inputClass:null,preset:[[Zl,{enable:!1}],[Ai,{enable:!1},["rotate"]],[Du,{direction:Bt}],[Xi,{direction:Bt},["swipe"]],[yl],[yl,{event:"doubletap",taps:2},["tap"]],[qi]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ud=1,Po=2;function ru(he,Te){this.options=g({},js.defaults,Te||{}),this.options.inputTarget=this.options.inputTarget||he,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=he,this.input=In(this),this.touchAction=new nt(this,this.options.touchAction),Kl(this,!0),d(this.options.recognizers,function(Fe){var Et=this.add(new Fe[0](Fe[1]));Fe[2]&&Et.recognizeWith(Fe[2]),Fe[3]&&Et.requireFailure(Fe[3])},this)}ru.prototype={set:function(he){return g(this.options,he),he.touchAction&&this.touchAction.update(),he.inputTarget&&(this.input.destroy(),this.input.target=he.inputTarget,this.input.init()),this},stop:function(he){this.session.stopped=he?Po:Ud},recognize:function(he){var Te=this.session;if(!Te.stopped){this.touchAction.preventDefaults(he);var Fe,Et=this.recognizers,On=Te.curRecognizer;(!On||On&&On.state&Ti)&&(On=Te.curRecognizer=null);for(var lr=0;lr<Et.length;)Fe=Et[lr],Te.stopped!==Po&&(!On||Fe==On||Fe.canRecognizeWith(On))?Fe.recognize(he):Fe.reset(),!On&&Fe.state&(Yr|Gi|Fi)&&(On=Te.curRecognizer=Fe),lr++}},get:function(he){if(he instanceof Hn)return he;for(var Te=this.recognizers,Fe=0;Fe<Te.length;Fe++)if(Te[Fe].options.event==he)return Te[Fe];return null},add:function(he){if(h(he,"add",this))return this;var Te=this.get(he.options.event);return Te&&this.remove(Te),this.recognizers.push(he),he.manager=this,this.touchAction.update(),he},remove:function(he){if(h(he,"remove",this))return this;if(he=this.get(he),he){var Te=this.recognizers,Fe=B(Te,he);Fe!==-1&&(Te.splice(Fe,1),this.touchAction.update())}return this},on:function(he,Te){if(he!==i&&Te!==i){var Fe=this.handlers;return d(L(he),function(Et){Fe[Et]=Fe[Et]||[],Fe[Et].push(Te)}),this}},off:function(he,Te){if(he!==i){var Fe=this.handlers;return d(L(he),function(Et){Te?Fe[Et]&&Fe[Et].splice(B(Fe[Et],Te),1):delete Fe[Et]}),this}},emit:function(he,Te){this.options.domEvents&&Hh(he,Te);var Fe=this.handlers[he]&&this.handlers[he].slice();if(!(!Fe||!Fe.length)){Te.type=he,Te.preventDefault=function(){Te.srcEvent.preventDefault()};for(var Et=0;Et<Fe.length;)Fe[Et](Te),Et++}},destroy:function(){this.element&&Kl(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Kl(he,Te){var Fe=he.element;if(Fe.style){var Et;d(he.options.cssProps,function(On,lr){Et=$(Fe.style,lr),Te?(he.oldCssProps[Et]=Fe.style[Et],Fe.style[Et]=On):Fe.style[Et]=he.oldCssProps[Et]||""}),Te||(he.oldCssProps={})}}function Hh(he,Te){var Fe=n.createEvent("Event");Fe.initEvent(he,!0,!0),Fe.gesture=Te,Te.target.dispatchEvent(Fe)}g(js,{INPUT_START:ue,INPUT_MOVE:ve,INPUT_END:Se,INPUT_CANCEL:Re,STATE_POSSIBLE:mn,STATE_BEGAN:Yr,STATE_CHANGED:Gi,STATE_ENDED:Fi,STATE_RECOGNIZED:Ti,STATE_CANCELLED:Oa,STATE_FAILED:ln,DIRECTION_NONE:Xe,DIRECTION_LEFT:Le,DIRECTION_RIGHT:Lt,DIRECTION_UP:xt,DIRECTION_DOWN:dt,DIRECTION_HORIZONTAL:Bt,DIRECTION_VERTICAL:At,DIRECTION_ALL:zt,Manager:ru,Input:Sn,TouchAction:nt,TouchInput:Oe,MouseInput:ft,PointerEventInput:H,TouchMouseInput:kn,SingleTouchInput:te,Recognizer:Hn,AttrRecognizer:Ii,Tap:yl,Pan:Xi,Swipe:Du,Pinch:Ai,Rotate:Zl,Press:qi,on:S,off:w,each:d,merge:y,extend:v,assign:g,inherit:_,bindFn:E,prefixed:$});var iu=typeof e<"u"?e:typeof self<"u"?self:{};iu.Hammer=js,t.exports?t.exports=js:e[r]=js})(window,document,"Hammer")})(MW)),MW.exports}var A5t=T5t();const x2=Ni(A5t),w5t={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"};class O5t extends Ane{get mapService(){return this.container.mapService}constructor(e){super(),Z(this,"indragging",!1),Z(this,"hammertime",void 0),Z(this,"lastClickTime",0),Z(this,"lastClickXY",[-1,-1]),Z(this,"clickTimer",void 0),Z(this,"$containter",void 0),Z(this,"onDrag",n=>{const r=this.interactionEvent(n);r.type=w5t[r.type],r.type==="dragging"?this.indragging=!0:this.indragging=!1,this.emit(Oh.Drag,r)}),Z(this,"onHammer",n=>{n.srcEvent.stopPropagation();const r=this.interactionEvent(n);this.emit(Oh.Hover,r)}),Z(this,"onTouch",n=>{const r=n.touches[0];this.onHover({clientX:r.clientX,clientY:r.clientY,type:"touchstart"})}),Z(this,"onTouchEnd",n=>{if(n.changedTouches.length>0){const r=n.changedTouches[0];this.onHover({clientX:r.clientX,clientY:r.clientY,type:"touchend"})}}),Z(this,"onTouchMove",n=>{const r=n.changedTouches[0];this.onHover({clientX:r.clientX,clientY:r.clientY,type:"touchmove"})}),Z(this,"onHover",n=>{const{clientX:r,clientY:i}=n;let a=r,o=i;const s=n.type,l=this.mapService.getMapContainer();if(l){const{top:u,left:f}=l.getBoundingClientRect();a=a-f-l.clientLeft,o=o-u-l.clientTop}const c=this.mapService.containerToLngLat([a,o]);if(s==="click"){this.isDoubleTap(a,o,c);return}if(s==="touch"){this.isDoubleTap(a,o,c);return}s!=="click"&&s!=="dblclick"&&this.emit(Oh.Hover,{x:a,y:o,lngLat:c,type:s,target:n})}),this.container=e}init(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(Oh.Hover)}triggerHover({x:e,y:n}){this.emit(Oh.Hover,{x:e,y:n})}triggerSelect(e){this.emit(Oh.Select,{featureId:e})}triggerActive(e){this.emit(Oh.Active,{featureId:e})}addEventListenerOnMap(){const e=this.mapService.getMapContainer();if(e){const n=new x2.Manager(e);n.add(new x2.Tap({event:"dblclick",taps:2})),n.add(new x2.Tap({event:"click"})),n.add(new x2.Pan({threshold:0,pointers:0})),n.add(new x2.Press({})),n.on("dblclick click",this.onHammer),n.on("panstart panmove panend pancancel",this.onDrag),e.addEventListener("touchstart",this.onTouch),e.addEventListener("touchend",this.onTouchEnd),e.addEventListener("mousemove",this.onHover),e.addEventListener("touchmove",this.onTouchMove),e.addEventListener("mousedown",this.onHover,!0),e.addEventListener("mouseup",this.onHover),e.addEventListener("contextmenu",this.onHover),this.hammertime=n}}removeEventListenerOnMap(){const e=this.mapService.getMapContainer();e&&(e.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),e.removeEventListener("touchstart",this.onTouch),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("mousedown",this.onHover),e.removeEventListener("mouseup",this.onHover),e.removeEventListener("contextmenu",this.onHover))}interactionEvent(e){const{type:n,pointerType:r}=e;let i,a;r==="touch"?(a=Math.floor(e.pointers[0].clientY),i=Math.floor(e.pointers[0].clientX)):(a=Math.floor(e.srcEvent.y),i=Math.floor(e.srcEvent.x));const o=this.mapService.getMapContainer();if(o){const{top:l,left:c}=o.getBoundingClientRect();i-=c,a-=l}const s=this.mapService.containerToLngLat([i,a]);return{x:i,y:a,lngLat:s,type:n,target:e.srcEvent}}isDoubleTap(e,n,r){const i=new Date().getTime();let a="click";i-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-e)<10&&Math.abs(this.lastClickXY[1]-n)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),a="dblclick",this.emit(Oh.Hover,{x:e,y:n,lngLat:r,type:a})):(this.lastClickTime=i,this.lastClickXY=[e,n],this.clickTimer=setTimeout(()=>{a="click",this.emit(Oh.Hover,{x:e,y:n,lngLat:r,type:a})},400))}}let C5t=0;function R5t(t){let e=t;if(typeof t=="string"&&(e=document.getElementById(t)),e){const n=document.createElement("div");return n.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,n.id=`l7-scene-${C5t++}`,n.classList.add("l7-scene"),e.appendChild(n),n}return null}function M5t(t){var e;let n=!0;if((t==null||(e=t.target)===null||e===void 0?void 0:e.target)instanceof HTMLElement){var r;let a=t==null||(r=t.target)===null||r===void 0?void 0:r.target;for(;a;){var i;const o=Array.from(a.classList);if(o.includes("l7-marker")||o.includes("l7-popup")){n=!1;break}a=(i=a)===null||i===void 0?void 0:i.parentElement}}return n}let Ix=(function(t){return t[t.SAMPLED=0]="SAMPLED",t[t.RENDER_TARGET=1]="RENDER_TARGET",t})({});class P5t{constructor(e){var n=this;Z(this,"pickedColors",void 0),Z(this,"pickedTileLayers",[]),Z(this,"pickingFBO",void 0),Z(this,"width",0),Z(this,"height",0),Z(this,"alreadyInPicking",!1),Z(this,"pickBufferScale",1),Z(this,"pickFromPickingFBO",(function(){var r=kt(function*(i,{x:a,y:o,lngLat:s,type:l,target:c}){var u;let f=!1;const{readPixels:h,readPixelsAsync:d,getViewportSize:p,queryVerdorInfo:g}=n.rendererService,{width:v,height:y}=p(),{enableHighlight:_,enableSelect:E}=i.getLayerConfig(),x=a*jf,T=o*jf;if(x>v-1*jf||x<0||T>y-1*jf||T<0)return!1;let S;if(g()==="WebGPU"?S=yield d({x:Math.floor(x/n.pickBufferScale),y:Math.floor((y-(o+1)*jf)/n.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:n.pickingFBO}):S=h({x:Math.floor(x/n.pickBufferScale),y:Math.floor((y-(o+1)*jf)/n.pickBufferScale),width:1,height:1,data:new Uint8Array(4),framebuffer:n.pickingFBO}),n.pickedColors=S,S[0]!==0||S[1]!==0||S[2]!==0){const C=ox(S),D=i.layerPickService.getFeatureById(C);C!==i.getCurrentPickId()&&l==="mousemove"&&(l="mouseenter");const L={x:a,y:o,type:l,lngLat:s,featureId:C,feature:D,target:c};D&&(f=!0,i.setCurrentPickId(C),n.triggerHoverOnLayer(i,L))}else{const C={x:a,y:o,lngLat:s,type:i.getCurrentPickId()!==null&&l==="mousemove"?"mouseout":"un"+l,featureId:null,target:c,feature:null};n.triggerHoverOnLayer(i,ze(ze({},C),{},{type:"unpick"})),n.triggerHoverOnLayer(i,C),i.setCurrentPickId(null)}if(_&&i.layerPickService.highlightPickedFeature(S),E&&l==="click"&&((u=S)===null||u===void 0?void 0:u.toString())!==[0,0,0,0].toString()){const C=ox(S);i.getCurrentSelectedId()===null||C!==i.getCurrentSelectedId()?(i.layerPickService.selectFeature(S),i.setCurrentSelectedId(C)):(i.layerPickService.selectFeature(new Uint8Array([0,0,0,0])),i.setCurrentSelectedId(null))}return f});return function(i,a){return r.apply(this,arguments)}})()),this.container=e}get mapService(){return this.container.mapService}get rendererService(){return this.container.rendererService}get configService(){return this.container.globalConfigService}get interactionService(){return this.container.interactionService}get layerService(){return this.container.layerService}init(e){const{createTexture2D:n,createFramebuffer:r,getViewportSize:i}=this.rendererService;let{width:a,height:o}=i();this.pickBufferScale=this.configService.getSceneConfig(e).pickBufferScale||1,a=Math.round(a/this.pickBufferScale),o=Math.round(o/this.pickBufferScale);const s=n({width:a,height:o,usage:Ix.RENDER_TARGET,label:"Picking Texture"});this.pickingFBO=r({color:s,depth:!0,width:a,height:o}),this.interactionService.on(Oh.Hover,this.pickingAllLayer.bind(this))}boxPickLayer(e,n,r){var i=this;return kt(function*(){const{useFramebufferAsync:a,clear:o}=i.rendererService;i.resizePickingFBO(),e.hooks.beforePickingEncode.call(),yield a(i.pickingFBO,kt(function*(){o({framebuffer:i.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),e.renderModels({ispick:!0})})),e.hooks.afterPickingEncode.call();const s=yield i.pickBox(e,n);r(s)})()}pickBox(e,n){var r=this;return kt(function*(){const[i,a,o,s]=n.map(y=>{const _=y<0?0:y;return Math.floor(_*jf/r.pickBufferScale)}),{readPixelsAsync:l,getViewportSize:c}=r.rendererService,{width:u,height:f}=c();if(i>(u-1)*jf/r.pickBufferScale||o<0||a>(f-1)*jf/r.pickBufferScale||s<0)return[];const h=Math.min(u/r.pickBufferScale,o)-i,d=Math.min(f/r.pickBufferScale,s)-a,p=yield l({x:i,y:Math.floor(f/r.pickBufferScale-(s+1)),width:h,height:d,data:new Uint8Array(h*d*4),framebuffer:r.pickingFBO}),g=[],v={};for(let y=0;y<p.length/4;y=y+1){const _=p.slice(y*4,y*4+4),E=ox(_);if(E!==-1&&!v[E]){const x=e.layerPickService.getFeatureById(E);g.push(ze(ze({},x),{},{pickedFeatureIdx:E})),v[E]=!0}}return g})()}handleCursor(e,n){const{cursor:r="",cursorEnabled:i}=e.getLayerConfig();if(i){const o=this.mapService.getType()==="amap"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),s=o?.style.getPropertyValue("cursor");n==="unmousemove"&&s!==""?o?.style.setProperty("cursor",""):n==="mousemove"&&o?.style.setProperty("cursor",r)}}destroy(){this.pickingFBO.destroy(),this.pickingFBO=null}pickingAllLayer(e){var n=this;return kt(function*(){!n.layerService.needPick(e.type)||!n.isPickingAllLayer()||(n.alreadyInPicking=!0,yield n.pickingLayers(e),n.layerService.renderLayers(),n.alreadyInPicking=!1)})()}isPickingAllLayer(){return!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())}resizePickingFBO(){const{getViewportSize:e}=this.rendererService,{width:n,height:r}=e();(this.width!==n||this.height!==r)&&(this.pickingFBO.resize({width:Math.round(n/this.pickBufferScale),height:Math.round(r/this.pickBufferScale)}),this.width=n,this.height=r)}pickingLayers(e){var n=this;return kt(function*(){const{clear:r,useFramebufferAsync:i}=n.rendererService;n.resizePickingFBO();const a=n.layerService.getRenderList();for(const o of a.filter(s=>s.needPick(e.type)).reverse()){yield i(n.pickingFBO,kt(function*(){r({framebuffer:n.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),o.layerPickService.pickRender(e)}));const s=yield n.pickFromPickingFBO(o,e);if(n.layerService.pickedLayerId=s?+o.id:-1,s&&!o.getLayerConfig().enablePropagation)break}})()}triggerHoverOnLayer(e,n){M5t(n)&&(this.handleCursor(e,n.type),e.emit(n.type,n))}}class N5t{constructor(e=!0){Z(this,"autoStart",void 0),Z(this,"startTime",0),Z(this,"oldTime",0),Z(this,"running",!1),Z(this,"elapsedTime",0),this.autoStart=e}start(){this.startTime=(typeof performance>"u"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=(typeof performance>"u"?Date:performance).now();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}const{throttle:x1e}=gs;class I5t extends ku.EventEmitter{get renderService(){return this.container.rendererService}get mapService(){return this.container.mapService}get debugService(){return this.container.debugService}constructor(e){super(),Z(this,"pickedLayerId",-1),Z(this,"clock",new N5t),Z(this,"alreadyInRendering",!1),Z(this,"layers",[]),Z(this,"layerList",[]),Z(this,"layerRenderID",void 0),Z(this,"sceneInited",!1),Z(this,"animateInstanceCount",0),Z(this,"shaderPicking",!0),Z(this,"enableRender",!0),Z(this,"reRender",x1e(()=>{this.renderLayers()},32)),Z(this,"throttleRenderLayers",x1e(()=>{this.renderLayers()},16)),this.container=e}needPick(e){return this.updateLayerRenderList(),this.layerList.some(n=>n.needPick(e))}add(e){this.layers.push(e),this.sceneInited&&e.init().then(()=>{this.renderLayers()})}addMask(e){this.sceneInited&&e.init().then(()=>{this.renderLayers()})}initLayers(){var e=this;return kt(function*(){e.sceneInited=!0,e.layers.forEach((function(){var n=kt(function*(r){r.startInit||(yield r.init(),e.updateLayerRenderList())});return function(r){return n.apply(this,arguments)}})())})()}getSceneInited(){return this.sceneInited}getRenderList(){return this.layerList}getLayers(){return this.layers}getLayer(e){return this.layers.find(n=>n.id===e)}getLayerByName(e){return this.layers.find(n=>n.name===e)}remove(e,n){var r=this;return kt(function*(){if(n){n.layerChildren||(n.layerChildren=[]);const i=n.layerChildren.findIndex(a=>a.id===e.id);i>-1&&n.layerChildren.splice(i,1)}else{const i=r.layers.findIndex(a=>a.id===e.id);i>-1&&r.layers.splice(i,1)}e.destroy(),r.reRender(),r.emit("layerChange",r.layers)})()}removeAllLayers(){var e=this;return kt(function*(){e.destroy(),e.reRender()})()}setEnableRender(e){this.enableRender=e}renderLayers(){var e=this;return kt(function*(){if(e.alreadyInRendering||!e.enableRender)return;e.updateLayerRenderList();const n=e.debugService.generateRenderUid();e.debugService.renderStart(n),e.alreadyInRendering=!0,e.clear();for(const r of e.layerList)r.prerender();e.renderService.beginFrame();for(const r of e.layerList){const{enableMask:i}=r.getLayerConfig();r.masks.filter(a=>a.inited).length>0&&i&&e.renderMask(r.masks),r.getLayerConfig().enableMultiPassRenderer?yield r.renderMultiPass():r.render()}e.renderService.endFrame(),e.debugService.renderEnd(n),e.alreadyInRendering=!1})()}renderMask(e){let n=0;this.renderService.clear({stencil:0,depth:1,framebuffer:null});const r=e.length>1?WE.MULTIPLE:WE.SINGLE;for(const i of e)i.render({isStencil:!0,stencilType:r,stencilIndex:n++})}beforeRenderData(e){var n=this;return kt(function*(){(yield e.hooks.beforeRenderData.promise())&&n.renderLayers()})()}renderTileLayerMask(e){let n=0;const{enableMask:r=!0}=e.getLayerConfig();let i=e.tileMask?1:0;const a=e.masks.filter(s=>s.inited);i=i+(r?a.length:1);const o=i>1?WE.MULTIPLE:WE.SINGLE;if((e.tileMask||a.length&&r)&&this.renderService.clear({stencil:0,depth:1,framebuffer:null}),a.length&&r)for(const s of a)s.render({isStencil:!0,stencilType:o,stencilIndex:n++});e.tileMask&&e.tileMask.render({isStencil:!0,stencilType:o,stencilIndex:n++,stencilOperation:w5.OR})}renderTileLayer(e){var n=this;return kt(function*(){n.renderTileLayerMask(e),e.getLayerConfig().enableMultiPassRenderer?yield e.renderMultiPass():yield e.render()})()}updateLayerRenderList(){this.layerList=[],this.layers.filter(e=>e.inited).filter(e=>e.isVisible()).sort((e,n)=>e.zIndex-n.zIndex).forEach(e=>{this.layerList.push(e)})}destroy(){this.layers.forEach(e=>{e.destroy()}),this.layers=[],this.layerList=[],this.emit("layerChange",this.layers)}startAnimate(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}stopAnimate(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}getOESTextureFloat(){return this.renderService.extensionObject.OES_texture_float}enableShaderPick(){this.shaderPicking=!0}disableShaderPick(){this.shaderPicking=!1}getShaderPickStat(){return this.shaderPicking}clear(){const e=Xo(this.mapService.bgColor);this.renderService.clear({color:e,depth:1,stencil:0,framebuffer:null})}runRender(){this.renderLayers(),this.layerRenderID=window.requestAnimationFrame(this.runRender.bind(this))}stopRender(){window.cancelAnimationFrame(this.layerRenderID)}}const{isNil:L5t}=gs;class k5t{constructor(e){Z(this,"name",void 0),Z(this,"type",void 0),Z(this,"scale",void 0),Z(this,"descriptor",void 0),Z(this,"featureBufferLayout",[]),Z(this,"needRescale",!1),Z(this,"needRemapping",!1),Z(this,"needRegenerateVertices",!1),Z(this,"featureRange",{startIndex:0,endIndex:1/0}),Z(this,"vertexAttribute",void 0),Z(this,"defaultCallback",n=>{if(n.length===0){var r;return((r=this.scale)===null||r===void 0?void 0:r.defaultValues)||[]}return n.map((i,a)=>{var o;return((o=this.scale)===null||o===void 0?void 0:o.scalers[a].func)(i)})}),this.setProps(e)}setProps(e){Object.assign(this,e)}mapping(e){var n;if((n=this.scale)!==null&&n!==void 0&&n.callback){var r;const i=(r=this.scale)===null||r===void 0?void 0:r.callback(...e);if(!L5t(i))return[i]}return this.defaultCallback(e)}resetDescriptor(){this.descriptor&&(this.descriptor.buffer.data=[])}}const D5t=["buffer","update","name"],B5t=["buffer","update","name"],F5t={[se.FLOAT]:4,[se.UNSIGNED_BYTE]:1,[se.UNSIGNED_SHORT]:2};class U5t{constructor(e){Z(this,"attributesAndIndices",void 0),Z(this,"attributes",[]),Z(this,"triangulation",void 0),Z(this,"featureLayout",{sizePerElement:0,elements:[]}),this.rendererService=e}registerStyleAttribute(e){let n=this.getLayerStyleAttribute(e.name||"");return n?n.setProps(e):(n=new k5t(e),this.attributes.push(n)),n}unRegisterStyleAttribute(e){const n=this.attributes.findIndex(r=>r.name===e);n>-1&&this.attributes.splice(n,1)}updateScaleAttribute(e){this.attributes.forEach(n=>{var r;const i=n.name,a=(r=n.scale)===null||r===void 0?void 0:r.field;(e[i]||a&&e[a])&&(n.needRescale=!0,n.needRemapping=!0,n.needRegenerateVertices=!0)})}updateStyleAttribute(e,n,r){let i=this.getLayerStyleAttribute(e);i||(i=this.registerStyleAttribute(ze(ze({},n),{},{name:e})));const{scale:a}=n;a&&i&&(i.scale=a,i.needRescale=!0,i.needRemapping=!0,i.needRegenerateVertices=!0,r&&r.featureRange&&(i.featureRange=r.featureRange))}getLayerStyleAttributes(){return this.attributes}getLayerStyleAttribute(e){return this.attributes.find(n=>n.name===e)}getLayerAttributeScale(e){var n;const r=this.getLayerStyleAttribute(e),i=r==null||(n=r.scale)===null||n===void 0?void 0:n.scalers;return i&&i[0]?i[0].func:null}updateAttributeByFeatureRange(e,n,r=0,i,a){const o=this.attributes.find(s=>s.name===e);if(o&&o.descriptor){const{descriptor:s}=o,{update:l,buffer:c,size:u=0}=s,f=F5t[c.type||se.FLOAT];if(l){const{elements:h,sizePerElement:d}=this.featureLayout,p=h.slice(r,i);if(!p.length)return;const{offset:g}=p[0],v=g*u*f,y=p.map(({featureIdx:_,vertices:E,normals:x},T)=>{const S=E.length/d,w=[];for(let C=0;C<S;C++){const D=x?x.slice(C*3,C*3+3):[];w.push(...l(n[_],_,E.slice(C*d,C*d+d),T,D))}return w}).flat();o.vertexAttribute.updateBuffer({data:y,offset:v}),a?.emit(`legend:${e}`,a.getLegend(e))}}}createAttributesAndIndices(e,n,r,i){this.featureLayout={sizePerElement:0,elements:[]},n&&(this.triangulation=n);const a=this.attributes.map(g=>(g.resetDescriptor(),g.descriptor));let o=0,s=0;const l=[];let c=3;e.forEach((g,v)=>{const{indices:y,vertices:_,normals:E,size:x,indexes:T,count:S}=this.triangulation(g,r);typeof S=="number"&&(s+=S),y.forEach(C=>{l.push(C+o)}),c=x;const w=_.length/x;this.featureLayout.sizePerElement=c,this.featureLayout.elements.push({featureIdx:v,vertices:_,normals:E,offset:o}),o+=w;for(let C=0;C<w;C++){const D=E?.slice(C*3,C*3+3)||[],L=_.slice(C*x,C*x+x);let B=0;T&&T[C]!==void 0&&(B=T[C]),a.forEach((I,U)=>{I&&I.update&&I.buffer.data.push(...I.update(g,v,L,C,D,B))})}});const{createAttribute:u,createBuffer:f,createElements:h}=this.rendererService,d={};a.forEach((g,v)=>{if(g){const{buffer:y,update:_,name:E}=g,x=Ro(g,D5t),T=u(ze({buffer:f(y)},x));d[g.name||""]=T,this.attributes[v].vertexAttribute=T}});const p=h({data:l,type:se.UNSIGNED_INT,count:l.length});return this.attributesAndIndices={attributes:d,elements:p,count:s},Object.values(this.attributes).filter(g=>g.scale).forEach(g=>{const v=g.name;i?.emit(`legend:${v}`,i.getLegend(v))}),this.attributesAndIndices}createAttributes(e,n){this.featureLayout={sizePerElement:0,elements:[]},n&&(this.triangulation=n);const r=this.attributes.map(c=>(c.resetDescriptor(),c.descriptor));let i=0,a=3;e.forEach((c,u)=>{const{indices:f,vertices:h,normals:d,size:p,indexes:g}=this.triangulation(c);f.forEach(y=>{}),a=p;const v=h.length/p;this.featureLayout.sizePerElement=a,this.featureLayout.elements.push({featureIdx:u,vertices:h,normals:d,offset:i}),i+=v;for(let y=0;y<v;y++){const _=d?.slice(y*3,y*3+3)||[],E=h.slice(y*p,y*p+p);let x=0;g&&g[y]!==void 0&&(x=g[y]),r.forEach((T,S)=>{T&&T.update&&T.buffer.data.push(...T.update(c,u,E,y,_,x))})}});const{createAttribute:o,createBuffer:s}=this.rendererService,l={};return r.forEach((c,u)=>{if(c){const{buffer:f,update:h,name:d}=c,p=Ro(c,B5t),g=o(ze({buffer:s(f)},p));l[c.name||""]=g,this.attributes[u].vertexAttribute=g}}),{attributes:l}}clearAllAttributes(){var e;this.attributes.forEach(n=>{n.vertexAttribute&&n.vertexAttribute.destroy()}),(e=this.attributesAndIndices)===null||e===void 0||e.elements.destroy(),this.attributes=[]}}function FFe(t,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function s(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((r=r.apply(t,[])).next())})}function UFe(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function Cne(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function Rne(t,e,n){if(arguments.length===2)for(var r=0,i=e.length,a;r<i;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return t.concat(a||Array.prototype.slice.call(e))}function jFe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lZ={exports:{}},WB={exports:{}},XM={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return r&&typeof r.length=="number"&&r.length>=0&&r.length%1===0}t.exports=e.default})(XM,XM.exports);var jh={},cZ={exports:{}},uZ={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];var a=r.pop();return n.call(this,r,a)}},t.exports=e.default})(uZ,uZ.exports);var vb={};Object.defineProperty(vb,"__esModule",{value:!0});vb.fallback=zFe;vb.wrap=$Fe;var j5t=vb.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,z5t=vb.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,$5t=vb.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function zFe(t){setTimeout(t,0)}function $Fe(t){return function(e){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];return t(function(){return e.apply(void 0,n)})}}var xC;j5t?xC=queueMicrotask:z5t?xC=setImmediate:$5t?xC=process.nextTick:xC=zFe;vb.default=$Fe(xC);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=l;var n=uZ.exports,r=s(n),i=vb,a=s(i),o=jh;function s(f){return f&&f.__esModule?f:{default:f}}function l(f){return(0,o.isAsync)(f)?function(){for(var h=[],d=arguments.length;d--;)h[d]=arguments[d];var p=h.pop(),g=f.apply(this,h);return c(g,p)}:(0,r.default)(function(h,d){var p;try{p=f.apply(this,h)}catch(g){return d(g)}if(p&&typeof p.then=="function")return c(p,d);d(null,p)})}function c(f,h){return f.then(function(d){u(h,null,d)},function(d){u(h,d&&d.message?d:new Error(d))})}function u(f,h,d){try{f(h,d)}catch(p){(0,a.default)(function(g){throw g},p)}}t.exports=e.default})(cZ,cZ.exports);Object.defineProperty(jh,"__esModule",{value:!0});jh.isAsyncIterable=jh.isAsyncGenerator=jh.isAsync=void 0;var H5t=cZ.exports,G5t=W5t(H5t);function W5t(t){return t&&t.__esModule?t:{default:t}}function HFe(t){return t[Symbol.toStringTag]==="AsyncFunction"}function V5t(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function Y5t(t){return typeof t[Symbol.asyncIterator]=="function"}function X5t(t){if(typeof t!="function")throw new Error("expected a function");return HFe(t)?(0,G5t.default)(t):t}jh.default=X5t;jh.isAsync=HFe;jh.isAsyncGenerator=V5t;jh.isAsyncIterable=Y5t;var Lx={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r,i){if(i===void 0&&(i=r.length),!i)throw new Error("arity is undefined");function a(){for(var o=this,s=[],l=arguments.length;l--;)s[l]=arguments[l];return typeof s[i-1]=="function"?r.apply(this,s):new Promise(function(c,u){s[i-1]=function(f){for(var h=[],d=arguments.length-1;d-- >0;)h[d]=arguments[d+1];if(f)return u(f);c(h.length>1?h:h[0])},r.apply(o,s)})}return a}t.exports=e.default})(Lx,Lx.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=XM.exports,r=l(n),i=jh,a=l(i),o=Lx.exports,s=l(o);function l(c){return c&&c.__esModule?c:{default:c}}e.default=(0,s.default)(function(c,u,f){var h=(0,r.default)(u)?[]:{};c(u,function(d,p,g){(0,a.default)(d)(function(v){for(var y,_=[],E=arguments.length-1;E-- >0;)_[E]=arguments[E+1];_.length<2&&(y=_,_=y[0]),h[p]=_,g(v)})},function(d){return f(d,h)})},3),t.exports=e.default})(WB,WB.exports);var fZ={exports:{}},VB={exports:{}},hZ={exports:{}},qM={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function i(){for(var a=[],o=arguments.length;o--;)a[o]=arguments[o];if(r!==null){var s=r;r=null,s.apply(this,a)}}return Object.assign(i,r),i}t.exports=e.default})(qM,qM.exports);var dZ={exports:{}},pZ={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){return n[Symbol.iterator]&&n[Symbol.iterator]()},t.exports=e.default})(pZ,pZ.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var n=XM.exports,r=o(n),i=pZ.exports,a=o(i);function o(f){return f&&f.__esModule?f:{default:f}}function s(f){var h=-1,d=f.length;return function(){return++h<d?{value:f[h],key:h}:null}}function l(f){var h=-1;return function(){var p=f.next();return p.done?null:(h++,{value:p.value,key:h})}}function c(f){var h=f?Object.keys(f):[],d=-1,p=h.length;return function g(){var v=h[++d];return v==="__proto__"?g():d<p?{value:f[v],key:v}:null}}function u(f){if((0,r.default)(f))return s(f);var h=(0,a.default)(f);return h?l(h):c(f)}t.exports=e.default})(dZ,dZ.exports);var ZM={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){return function(){for(var i=[],a=arguments.length;a--;)i[a]=arguments[a];if(r===null)throw new Error("Callback was already called.");var o=r;r=null,o.apply(this,i)}}t.exports=e.default})(ZM,ZM.exports);var gZ={exports:{}},KM={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n={};e.default=n,t.exports=e.default})(KM,KM.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=a;var n=KM.exports,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function a(o,s,l,c){var u=!1,f=!1,h=!1,d=0,p=0;function g(){d>=s||h||u||(h=!0,o.next().then(function(_){var E=_.value,x=_.done;if(!(f||u)){if(h=!1,x){u=!0,d<=0&&c(null);return}d++,l(E,p,v),p++,g()}}).catch(y))}function v(_,E){if(d-=1,!f){if(_)return y(_);if(_===!1){u=!0,f=!0;return}if(E===r.default||u&&d<=0)return u=!0,c(null);g()}}function y(_){f||(h=!1,u=!0,c(_))}g()}t.exports=e.default})(gZ,gZ.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=qM.exports,r=d(n),i=dZ.exports,a=d(i),o=ZM.exports,s=d(o),l=jh,c=gZ.exports,u=d(c),f=KM.exports,h=d(f);function d(p){return p&&p.__esModule?p:{default:p}}e.default=function(p){return function(g,v,y){if(y=(0,r.default)(y),p<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!g)return y(null);if((0,l.isAsyncGenerator)(g))return(0,u.default)(g,p,v,y);if((0,l.isAsyncIterable)(g))return(0,u.default)(g[Symbol.asyncIterator](),p,v,y);var _=(0,a.default)(g),E=!1,x=!1,T=0,S=!1;function w(D,L){if(!x)if(T-=1,D)E=!0,y(D);else if(D===!1)E=!0,x=!0;else{if(L===h.default||E&&T<=0)return E=!0,y(null);S||C()}}function C(){for(S=!0;T<p&&!E;){var D=_();if(D===null){E=!0,T<=0&&y(null);return}T+=1,v(D.value,D.key,(0,s.default)(w))}S=!1}C()}},t.exports=e.default})(hZ,hZ.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=hZ.exports,r=l(n),i=jh,a=l(i),o=Lx.exports,s=l(o);function l(u){return u&&u.__esModule?u:{default:u}}function c(u,f,h,d){return(0,r.default)(f)(u,(0,a.default)(h),d)}e.default=(0,s.default)(c,4),t.exports=e.default})(VB,VB.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=VB.exports,r=o(n),i=Lx.exports,a=o(i);function o(l){return l&&l.__esModule?l:{default:l}}function s(l,c,u){return(0,r.default)(l,1,c,u)}e.default=(0,a.default)(s,3),t.exports=e.default})(fZ,fZ.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=WB.exports,r=o(n),i=fZ.exports,a=o(i);function o(l){return l&&l.__esModule?l:{default:l}}function s(l,c){return(0,r.default)(a.default,l,c)}t.exports=e.default})(lZ,lZ.exports);var O5=jFe(lZ.exports),um=(function(){function t(){this.args=[],this.tasks=[]}return t.prototype.call=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];return this.args=n,O5(this.tasks)},t.prototype.tap=function(e,n){var r=this;this.tasks.push(function(i){n.apply(void 0,Rne([],Cne(r.args),!1)),i(null,e)})},t})(),S1e={exports:{}},vZ={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=XM.exports,r=v(n),i=KM.exports,a=v(i),o=VB.exports,s=v(o),l=qM.exports,c=v(l),u=ZM.exports,f=v(u),h=jh,d=v(h),p=Lx.exports,g=v(p);function v(x){return x&&x.__esModule?x:{default:x}}function y(x,T,S){S=(0,c.default)(S);var w=0,C=0,D=x.length,L=!1;D===0&&S(null);function B(I,U){I===!1&&(L=!0),L!==!0&&(I?S(I):(++C===D||U===a.default)&&S(null))}for(;w<D;w++)T(x[w],w,(0,f.default)(B))}function _(x,T,S){return(0,s.default)(x,1/0,T,S)}function E(x,T,S){var w=(0,r.default)(x)?y:_;return w(x,(0,d.default)(T),S)}e.default=(0,g.default)(E,3),t.exports=e.default})(vZ,vZ.exports);(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=vZ.exports,r=o(n),i=WB.exports,a=o(i);function o(l){return l&&l.__esModule?l:{default:l}}function s(l,c){return(0,a.default)(r.default,l,c)}t.exports=e.default})(S1e,S1e.exports);var mZ={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=qM.exports,r=u(n),i=ZM.exports,a=u(i),o=jh,s=u(o),l=Lx.exports,c=u(l);function u(h){return h&&h.__esModule?h:{default:h}}function f(h,d){if(d=(0,r.default)(d),!Array.isArray(h))return d(new Error("First argument to waterfall must be an array of functions"));if(!h.length)return d();var p=0;function g(y){var _=(0,s.default)(h[p++]);_.apply(void 0,y.concat([(0,a.default)(v)]))}function v(y){for(var _=[],E=arguments.length-1;E-- >0;)_[E]=arguments[E+1];if(y!==!1){if(y||p===h.length)return d.apply(void 0,[y].concat(_));g(_)}}g([])}e.default=(0,c.default)(f),t.exports=e.default})(mZ,mZ.exports);var q5t=jFe(mZ.exports),T1e=(function(){function t(){this.tasks=[]}return t.prototype.call=function(){return O5(this.tasks)},t.prototype.tap=function(e,n){this.tasks.push(function(r){var i=n();r(i,e)})},t})(),Z5t=(function(){function t(){this.args=[],this.tasks=[]}return t.prototype.promise=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];return this.args=n,O5(this.tasks)},t.prototype.tapPromise=function(e,n){var r=this;this.tasks.push(function(i){return FFe(r,void 0,void 0,function(){return UFe(this,function(a){switch(a.label){case 0:return[4,n.apply(void 0,Rne([],Cne(this.args),!1))];case 1:return a.sent(),i(null,e),[2]}})})})},t})(),K5t=(function(){function t(){this.args=[],this.tasks=[]}return t.prototype.promise=function(){for(var e=arguments,n=[],r=0;r<arguments.length;r++)n[r]=e[r];return this.args=n,O5(this.tasks)},t.prototype.tapPromise=function(e,n){var r=this;this.tasks.push(function(i){return FFe(r,void 0,void 0,function(){var a;return UFe(this,function(o){switch(o.label){case 0:return[4,n.apply(void 0,Rne([],Cne(this.args),!1))];case 1:return a=o.sent(),i(a,e),[2]}})})})},t})(),Q5t=(function(){function t(){this.tasks=[]}return t.prototype.promise=function(){return q5t(this.tasks)},t.prototype.tapPromise=function(e,n){this.tasks.length===0?this.tasks.push(function(r){n().then(function(i){r(null,i)})}):this.tasks.push(function(r,i){n(r).then(function(a){i(null,a)})})},t})(),PW={exports:{}},A1e;function GFe(){if(A1e)return PW.exports;A1e=1;var t=PW.exports={};return t.forEach=function(e,n){for(var r=0;r<e.length;r++){var i=n(e[r]);if(i)return i}},PW.exports}var NW,w1e;function J5t(){return w1e||(w1e=1,NW=function(t){var e=t.stateHandler.getState;function n(o){var s=e(o);return s&&!!s.isDetectable}function r(o){e(o).isDetectable=!0}function i(o){return!!e(o).busy}function a(o,s){e(o).busy=!!s}return{isDetectable:n,markAsDetectable:r,isBusy:i,markBusy:a}}),NW}var IW,O1e;function e8t(){return O1e||(O1e=1,IW=function(t){var e={};function n(o){var s=t.get(o);return s===void 0?[]:e[s]||[]}function r(o,s){var l=t.get(o);e[l]||(e[l]=[]),e[l].push(s)}function i(o,s){for(var l=n(o),c=0,u=l.length;c<u;++c)if(l[c]===s){l.splice(c,1);break}}function a(o){var s=n(o);s&&(s.length=0)}return{get:n,add:r,removeListener:i,removeAllListeners:a}}),IW}var LW,C1e;function t8t(){return C1e||(C1e=1,LW=function(){var t=1;function e(){return t++}return{generate:e}}),LW}var kW,R1e;function n8t(){return R1e||(R1e=1,kW=function(t){var e=t.idGenerator,n=t.stateHandler.getState;function r(a){var o=n(a);return o&&o.id!==void 0?o.id:null}function i(a){var o=n(a);if(!o)throw new Error("setId required the element to have a resize detection state.");var s=e.generate();return o.id=s,s}return{get:r,set:i}}),kW}var DW,M1e;function r8t(){return M1e||(M1e=1,DW=function(t){function e(){}var n={log:e,warn:e,error:e};if(!t&&window.console){var r=function(i,a){i[a]=function(){var s=console[a];if(s.apply)s.apply(console,arguments);else for(var l=0;l<arguments.length;l++)s(arguments[l])}};r(n,"log"),r(n,"warn"),r(n,"error")}return n}),DW}var BW={exports:{}},P1e;function WFe(){if(P1e)return BW.exports;P1e=1;var t=BW.exports={};return t.isIE=function(e){function n(){var i=navigator.userAgent.toLowerCase();return i.indexOf("msie")!==-1||i.indexOf("trident")!==-1||i.indexOf(" edge/")!==-1}if(!n())return!1;if(!e)return!0;var r=(function(){var i,a=3,o=document.createElement("div"),s=o.getElementsByTagName("i");do o.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->";while(s[0]);return a>4?a:i})();return e===r},t.isLegacyOpera=function(){return!!window.opera},BW.exports}var FW={exports:{}},N1e;function i8t(){if(N1e)return FW.exports;N1e=1;var t=FW.exports={};t.getOption=e;function e(n,r,i){var a=n[r];return a==null&&i!==void 0?i:a}return FW.exports}var UW,I1e;function a8t(){if(I1e)return UW;I1e=1;var t=i8t();UW=function(r){r=r||{};var i=r.reporter,a=t.getOption(r,"async",!0),o=t.getOption(r,"auto",!0);o&&!a&&(i&&i.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),a=!0);var s=e(),l,c=!1;function u(v,y){!c&&o&&a&&s.size()===0&&d(),s.add(v,y)}function f(){for(c=!0;s.size();){var v=s;s=e(),v.process()}c=!1}function h(v){c||(v===void 0&&(v=a),l&&(p(l),l=null),v?d():f())}function d(){l=g(f)}function p(v){var y=clearTimeout;return y(v)}function g(v){var y=function(_){return setTimeout(_,0)};return y(v)}return{add:u,force:h}};function e(){var n={},r=0,i=0,a=0;function o(c,u){u||(u=c,c=0),c>i?i=c:c<a&&(a=c),n[c]||(n[c]=[]),n[c].push(u),r++}function s(){for(var c=a;c<=i;c++)for(var u=n[c],f=0;f<u.length;f++){var h=u[f];h()}}function l(){return r}return{add:o,process:s,size:l}}return UW}var jW,L1e;function o8t(){if(L1e)return jW;L1e=1;var t="_erd";function e(i){return i[t]={},n(i)}function n(i){return i[t]}function r(i){delete i[t]}return jW={initState:e,getState:n,cleanState:r},jW}var zW,k1e;function s8t(){if(k1e)return zW;k1e=1;var t=WFe();return zW=function(e){e=e||{};var n=e.reporter,r=e.batchProcessor,i=e.stateHandler.getState;if(!n)throw new Error("Missing required dependency: reporter.");function a(u,f){function h(){f(u)}if(t.isIE(8))i(u).object={proxy:h},u.attachEvent("onresize",h);else{var d=l(u);if(!d)throw new Error("Element is not detectable by this strategy.");d.contentDocument.defaultView.addEventListener("resize",h)}}function o(u){var f=e.important?" !important; ":"; ";return(u.join(f)+f).trim()}function s(u,f,h){h||(h=f,f=u,u=null),u=u||{},u.debug;function d(p,g){var v=o(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),y=!1,_=window.getComputedStyle(p),E=p.offsetWidth,x=p.offsetHeight;i(p).startSize={width:E,height:x};function T(){function S(){if(_.position==="static"){p.style.setProperty("position","relative",u.important?"important":"");var D=function(L,B,I,U){function $(N){return N.replace(/[^-\d\.]/g,"")}var X=I[U];X!=="auto"&&$(X)!=="0"&&(L.warn("An element that is positioned static has style."+U+"="+X+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+U+" will be set to 0. Element: ",B),B.style.setProperty(U,"0",u.important?"important":""))};D(n,p,_,"top"),D(n,p,_,"right"),D(n,p,_,"bottom"),D(n,p,_,"left")}}function w(){y||S();function D(B,I){if(!B.contentDocument){var U=i(B);U.checkForObjectDocumentTimeoutId&&window.clearTimeout(U.checkForObjectDocumentTimeoutId),U.checkForObjectDocumentTimeoutId=setTimeout(function(){U.checkForObjectDocumentTimeoutId=0,D(B,I)},100);return}I(B.contentDocument)}var L=this;D(L,function(I){g(p)})}_.position!==""&&(S(),y=!0);var C=document.createElement("object");C.style.cssText=v,C.tabIndex=-1,C.type="text/html",C.setAttribute("aria-hidden","true"),C.onload=w,t.isIE()||(C.data="about:blank"),i(p)&&(p.appendChild(C),i(p).object=C,t.isIE()&&(C.data="about:blank"))}r?r.add(T):T()}t.isIE(8)?h(f):d(f,h)}function l(u){return i(u).object}function c(u){if(i(u)){var f=l(u);f&&(t.isIE(8)?u.detachEvent("onresize",f.proxy):u.removeChild(f),i(u).checkForObjectDocumentTimeoutId&&window.clearTimeout(i(u).checkForObjectDocumentTimeoutId),delete i(u).object)}}return{makeDetectable:s,addListener:a,uninstall:c}},zW}var $W,D1e;function l8t(){if(D1e)return $W;D1e=1;var t=GFe().forEach;return $W=function(e){e=e||{};var n=e.reporter,r=e.batchProcessor,i=e.stateHandler.getState;e.stateHandler.hasState;var a=e.idHandler;if(!r)throw new Error("Missing required dependency: batchProcessor");if(!n)throw new Error("Missing required dependency: reporter.");var o=f(),s="erd_scroll_detection_scrollbar_style",l="erd_scroll_detection_container";function c(T){h(T,s,l)}c(window.document);function u(T){var S=e.important?" !important; ":"; ";return(T.join(S)+S).trim()}function f(){var T=500,S=500,w=document.createElement("div");w.style.cssText=u(["position: absolute","width: "+T*2+"px","height: "+S*2+"px","visibility: hidden","margin: 0","padding: 0"]);var C=document.createElement("div");C.style.cssText=u(["position: absolute","width: "+T+"px","height: "+S+"px","overflow: scroll","visibility: none","top: "+-T*3+"px","left: "+-S*3+"px","visibility: hidden","margin: 0","padding: 0"]),C.appendChild(w),document.body.insertBefore(C,document.body.firstChild);var D=T-C.clientWidth,L=S-C.clientHeight;return document.body.removeChild(C),{width:D,height:L}}function h(T,S,w){function C(I,U){U=U||function(X){T.head.appendChild(X)};var $=T.createElement("style");return $.innerHTML=I,$.id=S,U($),$}if(!T.getElementById(S)){var D=w+"_animation",L=w+"_animation_active",B=`/* Created by the element-resize-detector library. */
`;B+="."+w+" > div::-webkit-scrollbar { "+u(["display: none"])+` }

`,B+="."+L+" { "+u(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+D,"animation-name: "+D])+` }
`,B+="@-webkit-keyframes "+D+` { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
`,B+="@keyframes "+D+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",C(B)}}function d(T){T.className+=" "+l+"_animation_active"}function p(T,S,w){if(T.addEventListener)T.addEventListener(S,w);else if(T.attachEvent)T.attachEvent("on"+S,w);else return n.error("[scroll] Don't know how to add event listeners.")}function g(T,S,w){if(T.removeEventListener)T.removeEventListener(S,w);else if(T.detachEvent)T.detachEvent("on"+S,w);else return n.error("[scroll] Don't know how to remove event listeners.")}function v(T){return i(T).container.childNodes[0].childNodes[0].childNodes[0]}function y(T){return i(T).container.childNodes[0].childNodes[0].childNodes[1]}function _(T,S){var w=i(T).listeners;if(!w.push)throw new Error("Cannot add listener to an element that is not detectable.");i(T).listeners.push(S)}function E(T,S,w){w||(w=S,S=T,T=null),T=T||{};function C(){if(T.debug){var Re=Array.prototype.slice.call(arguments);if(Re.unshift(a.get(S),"Scroll: "),n.log.apply)n.log.apply(null,Re);else for(var Xe=0;Xe<Re.length;Xe++)n.log(Re[Xe])}}function D(Re){function Xe(Le){var Lt=Le.getRootNode&&Le.getRootNode().contains(Le);return Le===Le.ownerDocument.body||Le.ownerDocument.body.contains(Le)||Lt}return!Xe(Re)||window.getComputedStyle(Re)===null}function L(Re){var Xe=i(Re).container.childNodes[0],Le=window.getComputedStyle(Xe);return!Le.width||Le.width.indexOf("px")===-1}function B(){var Re=window.getComputedStyle(S),Xe={};return Xe.position=Re.position,Xe.width=S.offsetWidth,Xe.height=S.offsetHeight,Xe.top=Re.top,Xe.right=Re.right,Xe.bottom=Re.bottom,Xe.left=Re.left,Xe.widthCSS=Re.width,Xe.heightCSS=Re.height,Xe}function I(){var Re=B();i(S).startSize={width:Re.width,height:Re.height},C("Element start size",i(S).startSize)}function U(){i(S).listeners=[]}function $(){if(C("storeStyle invoked."),!i(S)){C("Aborting because element has been uninstalled");return}var Re=B();i(S).style=Re}function X(Re,Xe,Le){i(Re).lastWidth=Xe,i(Re).lastHeight=Le}function N(Re){return v(Re).childNodes[0]}function M(){return 2*o.width+1}function k(){return 2*o.height+1}function z(Re){return Re+10+M()}function j(Re){return Re+10+k()}function V(Re){return Re*2+M()}function Q(Re){return Re*2+k()}function ee(Re,Xe,Le){var Lt=v(Re),xt=y(Re),dt=z(Xe),Bt=j(Le),At=V(Xe),zt=Q(Le);Lt.scrollLeft=dt,Lt.scrollTop=Bt,xt.scrollLeft=At,xt.scrollTop=zt}function re(){var Re=i(S).container;if(!Re){Re=document.createElement("div"),Re.className=l,Re.style.cssText=u(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),i(S).container=Re,d(Re),S.appendChild(Re);var Xe=function(){i(S).onRendered&&i(S).onRendered()};p(Re,"animationstart",Xe),i(S).onAnimationStart=Xe}return Re}function ne(){function Re(){var wn=i(S).style;if(wn.position==="static"){S.style.setProperty("position","relative",T.important?"important":"");var $n=function(Vr,Tr,Rr,ei){function va(qo){return qo.replace(/[^-\d\.]/g,"")}var pi=Rr[ei];pi!=="auto"&&va(pi)!=="0"&&(Vr.warn("An element that is positioned static has style."+ei+"="+pi+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+ei+" will be set to 0. Element: ",Tr),Tr.style[ei]=0)};$n(n,S,wn,"top"),$n(n,S,wn,"right"),$n(n,S,wn,"bottom"),$n(n,S,wn,"left")}}function Xe(wn,$n,Vr,Tr){return wn=wn?wn+"px":"0",$n=$n?$n+"px":"0",Vr=Vr?Vr+"px":"0",Tr=Tr?Tr+"px":"0",["left: "+wn,"top: "+$n,"right: "+Tr,"bottom: "+Vr]}if(C("Injecting elements"),!i(S)){C("Aborting because element has been uninstalled");return}Re();var Le=i(S).container;Le||(Le=re());var Lt=o.width,xt=o.height,dt=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),Bt=u(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(Xe(-(1+Lt),-(1+xt),-xt,-Lt))),At=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),zt=u(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),rn=u(["position: absolute","left: 0","top: 0"]),Wn=u(["position: absolute","width: 200%","height: 200%"]),Sn=document.createElement("div"),In=document.createElement("div"),de=document.createElement("div"),sr=document.createElement("div"),zr=document.createElement("div"),st=document.createElement("div");Sn.dir="ltr",Sn.style.cssText=dt,Sn.className=l,In.className=l,In.style.cssText=Bt,de.style.cssText=At,sr.style.cssText=rn,zr.style.cssText=zt,st.style.cssText=Wn,de.appendChild(sr),zr.appendChild(st),In.appendChild(de),In.appendChild(zr),Sn.appendChild(In),Le.appendChild(Sn);function Ft(){var wn=i(S);wn&&wn.onExpand?wn.onExpand():C("Aborting expand scroll handler: element has been uninstalled")}function An(){var wn=i(S);wn&&wn.onShrink?wn.onShrink():C("Aborting shrink scroll handler: element has been uninstalled")}p(de,"scroll",Ft),p(zr,"scroll",An),i(S).onExpandScroll=Ft,i(S).onShrinkScroll=An}function le(){function Re(At,zt,rn){var Wn=N(At),Sn=z(zt),In=j(rn);Wn.style.setProperty("width",Sn+"px",T.important?"important":""),Wn.style.setProperty("height",In+"px",T.important?"important":"")}function Xe(At){var zt=S.offsetWidth,rn=S.offsetHeight,Wn=zt!==i(S).lastWidth||rn!==i(S).lastHeight;C("Storing current size",zt,rn),X(S,zt,rn),r.add(0,function(){if(Wn){if(!i(S)){C("Aborting because element has been uninstalled");return}if(!Le()){C("Aborting because element container has not been initialized");return}if(T.debug){var In=S.offsetWidth,de=S.offsetHeight;(In!==zt||de!==rn)&&n.warn(a.get(S),"Scroll: Size changed before updating detector elements.")}Re(S,zt,rn)}}),r.add(1,function(){if(!i(S)){C("Aborting because element has been uninstalled");return}if(!Le()){C("Aborting because element container has not been initialized");return}ee(S,zt,rn)}),Wn&&At&&r.add(2,function(){if(!i(S)){C("Aborting because element has been uninstalled");return}if(!Le()){C("Aborting because element container has not been initialized");return}At()})}function Le(){return!!i(S).container}function Lt(){function At(){return i(S).lastNotifiedWidth===void 0}C("notifyListenersIfNeeded invoked");var zt=i(S);if(At()&&zt.lastWidth===zt.startSize.width&&zt.lastHeight===zt.startSize.height)return C("Not notifying: Size is the same as the start size, and there has been no notification yet.");if(zt.lastWidth===zt.lastNotifiedWidth&&zt.lastHeight===zt.lastNotifiedHeight)return C("Not notifying: Size already notified");C("Current size not notified, notifying..."),zt.lastNotifiedWidth=zt.lastWidth,zt.lastNotifiedHeight=zt.lastHeight,t(i(S).listeners,function(rn){rn(S)})}function xt(){if(C("startanimation triggered."),L(S)){C("Ignoring since element is still unrendered...");return}C("Element rendered.");var At=v(S),zt=y(S);(At.scrollLeft===0||At.scrollTop===0||zt.scrollLeft===0||zt.scrollTop===0)&&(C("Scrollbars out of sync. Updating detector elements..."),Xe(Lt))}function dt(){if(C("Scroll detected."),L(S)){C("Scroll event fired while unrendered. Ignoring...");return}Xe(Lt)}if(C("registerListenersAndPositionElements invoked."),!i(S)){C("Aborting because element has been uninstalled");return}i(S).onRendered=xt,i(S).onExpand=dt,i(S).onShrink=dt;var Bt=i(S).style;Re(S,Bt.width,Bt.height)}function ue(){if(C("finalizeDomMutation invoked."),!i(S)){C("Aborting because element has been uninstalled");return}var Re=i(S).style;X(S,Re.width,Re.height),ee(S,Re.width,Re.height)}function ve(){w(S)}function Se(){C("Installing..."),U(),I(),r.add(0,$),r.add(1,ne),r.add(2,le),r.add(3,ue),r.add(4,ve)}C("Making detectable..."),D(S)?(C("Element is detached"),re(),C("Waiting until element is attached..."),i(S).onRendered=function(){C("Element is now attached"),Se()}):Se()}function x(T){var S=i(T);S&&(S.onExpandScroll&&g(v(T),"scroll",S.onExpandScroll),S.onShrinkScroll&&g(y(T),"scroll",S.onShrinkScroll),S.onAnimationStart&&g(S.container,"animationstart",S.onAnimationStart),S.container&&T.removeChild(S.container))}return{makeDetectable:E,addListener:_,uninstall:x,initDocument:c}},$W}var HW,B1e;function c8t(){if(B1e)return HW;B1e=1;var t=GFe().forEach,e=J5t(),n=e8t(),r=t8t(),i=n8t(),a=r8t(),o=WFe(),s=a8t(),l=o8t(),c=s8t(),u=l8t();function f(g){return Array.isArray(g)||g.length!==void 0}function h(g){if(Array.isArray(g))return g;var v=[];return t(g,function(y){v.push(y)}),v}function d(g){return g&&g.nodeType===1}HW=function(g){g=g||{};var v;if(g.idHandler)v={get:function(M){return g.idHandler.get(M,!0)},set:g.idHandler.set};else{var y=r(),_=i({idGenerator:y,stateHandler:l});v=_}var E=g.reporter;if(!E){var x=E===!1;E=a(x)}var T=p(g,"batchProcessor",s({reporter:E})),S={};S.callOnAdd=!!p(g,"callOnAdd",!0),S.debug=!!p(g,"debug",!1);var w=n(v),C=e({stateHandler:l}),D,L=p(g,"strategy","object"),B=p(g,"important",!1),I={reporter:E,batchProcessor:T,stateHandler:l,idHandler:v,important:B};if(L==="scroll"&&(o.isLegacyOpera()?(E.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),L="object"):o.isIE(9)&&(E.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),L="object")),L==="scroll")D=u(I);else if(L==="object")D=c(I);else throw new Error("Invalid strategy name: "+L);var U={};function $(M,k,z){function j(le){var ue=w.get(le);t(ue,function(Se){Se(le)})}function V(le,ue,ve){w.add(ue,ve),le&&ve(ue)}if(z||(z=k,k=M,M={}),!k)throw new Error("At least one element required.");if(!z)throw new Error("Listener required.");if(d(k))k=[k];else if(f(k))k=h(k);else return E.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");var Q=0,ee=p(M,"callOnAdd",S.callOnAdd),re=p(M,"onReady",function(){}),ne=p(M,"debug",S.debug);t(k,function(ue){l.getState(ue)||(l.initState(ue),v.set(ue));var ve=v.get(ue);if(ne&&E.log("Attaching listener to element",ve,ue),!C.isDetectable(ue)){if(ne&&E.log(ve,"Not detectable."),C.isBusy(ue)){ne&&E.log(ve,"System busy making it detectable"),V(ee,ue,z),U[ve]=U[ve]||[],U[ve].push(function(){Q++,Q===k.length&&re()});return}return ne&&E.log(ve,"Making detectable..."),C.markBusy(ue,!0),D.makeDetectable({debug:ne,important:B},ue,function(Re){if(ne&&E.log(ve,"onElementDetectable"),l.getState(Re)){C.markAsDetectable(Re),C.markBusy(Re,!1),D.addListener(Re,j),V(ee,Re,z);var Xe=l.getState(Re);if(Xe&&Xe.startSize){var Le=Re.offsetWidth,Lt=Re.offsetHeight;(Xe.startSize.width!==Le||Xe.startSize.height!==Lt)&&j(Re)}U[ve]&&t(U[ve],function(xt){xt()})}else ne&&E.log(ve,"Element uninstalled before being detectable.");delete U[ve],Q++,Q===k.length&&re()})}ne&&E.log(ve,"Already detecable, adding listener."),V(ee,ue,z),Q++}),Q===k.length&&re()}function X(M){if(!M)return E.error("At least one element is required.");if(d(M))M=[M];else if(f(M))M=h(M);else return E.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t(M,function(k){w.removeAllListeners(k),D.uninstall(k),l.cleanState(k)})}function N(M){D.initDocument&&D.initDocument(M)}return{listenTo:$,removeListener:w.removeListener,removeAllListeners:w.removeAllListeners,uninstall:X,initDocument:N}};function p(g,v,y){var _=g[v];return _==null&&y!==void 0?y:_}return HW}var u8t=c8t();const f8t=Ni(u8t);let h8t=class extends ku.EventEmitter{get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get controlService(){return this.container.controlService}get configService(){return this.container.globalConfigService}get map(){return this.container.mapService}get coordinateSystemService(){return this.container.coordinateSystemService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get cameraService(){return this.container.cameraService}get interactionService(){return this.container.interactionService}get pickingService(){return this.container.pickingService}get shaderModuleService(){return this.container.shaderModuleService}get markerService(){return this.container.markerService}get popupService(){return this.container.popupService}constructor(e){super(),Z(this,"destroyed",!1),Z(this,"loaded",!1),Z(this,"id",void 0),Z(this,"inited",!1),Z(this,"rendering",!1),Z(this,"$container",void 0),Z(this,"canvas",void 0),Z(this,"markerContainer",void 0),Z(this,"resizeDetector",void 0),Z(this,"hooks",void 0),Z(this,"handleWindowResized",()=>{this.emit("resize"),this.$container&&(this.initContainer(),this.coordinateSystemService.needRefresh=!0,this.render())}),Z(this,"handleMapCameraChanged",n=>{this.cameraService.update(n),this.render()}),this.container=e,this.hooks={init:new Z5t},this.id=e.id}init(e){var n=this;this.configService.setSceneConfig(this.id,e),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",()=>this.render()),this.fontService.init(),this.hooks.init.tapPromise("initMap",kt(function*(){n.debugService.log("map.mapInitStart",{type:n.map.version}),yield new Promise(r=>{n.map.onCameraChanged(i=>{n.cameraService.init(),n.cameraService.update(i),r()}),n.map.init()}),n.map.onCameraChanged(n.handleMapCameraChanged),n.map.addMarkerContainer(),n.markerService.addMarkers(),n.markerService.addMarkerLayers(),n.popupService.initPopup(),n.interactionService.init(),n.interactionService.on(Oh.Drag,n.addSceneEvent.bind(n))})),this.hooks.init.tapPromise("initRenderer",kt(function*(){var r;const i=((r=n.map)===null||r===void 0?void 0:r.getOverlayContainer())||void 0;if(i?n.$container=i:n.$container=R5t(n.configService.getSceneConfig(n.id).id||""),n.$container){const{canvas:o}=e;if(n.canvas=o||is("canvas","",n.$container),n.setCanvas(),yield n.rendererService.init(n.canvas,n.configService.getSceneConfig(n.id),e.gl),n.registerContextLost(),n.initContainer(),n.resizeDetector=f8t({strategy:"scroll"}),n.resizeDetector.listenTo(n.$container,n.handleWindowResized),window.matchMedia){var a;(a=window.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||a===void 0||a.addListener(n.handleWindowResized.bind("screen"))}}else console.error(" id ");n.pickingService.init(n.id)})),this.render()}registerContextLost(){const e=this.rendererService.getCanvas();e&&e.addEventListener("webglcontextlost",()=>this.emit("webglcontextlost"))}addLayer(e){this.layerService.sceneService=this,this.layerService.add(e)}addMask(e){this.layerService.sceneService=this,this.layerService.addMask(e)}render(){var e=this;return kt(function*(){e.rendering||e.destroyed||(e.rendering=!0,e.inited?(yield e.layerService.initLayers(),yield e.layerService.renderLayers()):(yield e.hooks.init.promise(),e.destroyed&&e.destroy(),yield e.layerService.initLayers(),e.layerService.renderLayers(),e.controlService.addControls(),e.loaded=!0,e.emit("loaded"),e.inited=!0),e.rendering=!1)})()}addFontFace(e,n){this.fontService.addFontFace(e,n)}getSceneContainer(){return this.$container}exportPng(e){var n=this;return kt(function*(){var r;const i=(r=n.$container)===null||r===void 0?void 0:r.getElementsByTagName("canvas")[0];return yield n.render(),e==="jpg"?i?.toDataURL("image/jpeg"):i?.toDataURL("image/png")})()}getSceneConfig(){return this.configService.getSceneConfig(this.id)}getPointSizeRange(){return this.rendererService.getPointSizeRange()}addMarkerContainer(){const e=this.$container.parentElement;e!==null&&(this.markerContainer=is("div","l7-marker-container",e))}getMarkerContainer(){return this.markerContainer}destroy(){var e;if(!this.inited){this.destroyed=!0;return}this.resizeDetector.removeListener(this.$container,this.handleWindowResized),this.pickingService.destroy(),this.layerService.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),this.removeAllListeners(),this.inited=!1,this.map.destroy(),setTimeout(()=>{var n;(n=this.$container)===null||n===void 0||n.removeChild(this.canvas),this.canvas=null,this.rendererService.destroy()}),(e=this.$container)===null||e===void 0||(e=e.parentNode)===null||e===void 0||e.removeChild(this.$container),this.emit("destroy")}initContainer(){var e,n;const r=jf,i=((e=this.$container)===null||e===void 0?void 0:e.clientWidth)||400,a=((n=this.$container)===null||n===void 0?void 0:n.clientHeight)||300,o=this.canvas;o&&(o.width=i*r,o.height=a*r),this.rendererService.viewport({x:0,y:0,width:r*i,height:r*a})}setCanvas(){var e,n;const r=jf,i=((e=this.$container)===null||e===void 0?void 0:e.clientWidth)||400,a=((n=this.$container)===null||n===void 0?void 0:n.clientHeight)||300,o=this.canvas;o.width=i*r,o.height=a*r,o.style.width="100%",o.style.height="100%"}addSceneEvent(e){this.emit(e.type,e)}};const{uniq:d8t}=gs,F1e=`#define PI (3.14159265359)
`,p8t=`#define ambientRatio (0.5)
#define diffuseRatio (0.3)
#define specularRatio (0.2)

float calc_lighting(vec4 pos) {
  vec3 worldPos = vec3(pos * u_ModelMatrix);

  vec3 worldNormal = a_Normal;
  // //cal light weight
  vec3 viewDir = normalize(u_CameraPosition - worldPos);

  vec3 lightDir = normalize(vec3(1, -10.5, 12));

  vec3 halfDir = normalize(viewDir + lightDir);
  // //lambert
  float lambert = dot(worldNormal, lightDir);
  //specular
  float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
  //sum to light weight
  float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

  return lightWeight;
}
`,g8t=`#define SHIFT_RIGHT17 (1.0 / 131072.0)
#define SHIFT_RIGHT18 (1.0 / 262144.0)
#define SHIFT_RIGHT19 (1.0 / 524288.0)
#define SHIFT_RIGHT20 (1.0 / 1048576.0)
#define SHIFT_RIGHT21 (1.0 / 2097152.0)
#define SHIFT_RIGHT22 (1.0 / 4194304.0)
#define SHIFT_RIGHT23 (1.0 / 8388608.0)
#define SHIFT_RIGHT24 (1.0 / 16777216.0)

#define SHIFT_LEFT17 (131072.0)
#define SHIFT_LEFT18 (262144.0)
#define SHIFT_LEFT19 (524288.0)
#define SHIFT_LEFT20 (1048576.0)
#define SHIFT_LEFT21 (2097152.0)
#define SHIFT_LEFT22 (4194304.0)
#define SHIFT_LEFT23 (8388608.0)
#define SHIFT_LEFT24 (16777216.0)

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(unpack_float(encodedColor[0]) / 255.0, unpack_float(encodedColor[1]) / 255.0);
}
`,v8t=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}


vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  return weight;
}
`,m8t=`in vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE (0.0)
#define PICKING_ENCODE (1.0)
#define PICKING_HIGHLIGHT (2.0)
#define COLOR_SCALE (1.0 / 255.0)

#define HIGHLIGHT (1.0)
#define SELECT (2.0)

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  float activeType = v_PickingResult.a;
  if (activeType > 0.0) {
    vec4 highLightColor = activeType > 1.5 ? u_SelectColor : u_HighlightColor;
    highLightColor = highLightColor * COLOR_SCALE;
    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));
    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }

}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE
    ? vec4(pickingColor, step(0.001, color.a))
    : color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  //  shader 
  // return color;
  if (u_shaderPick < 0.5) {
    return color; //  
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }

}

vec4 filterColorAlpha(vec4 color, float alpha) {
  //  shader 
  // return color;
  if (u_shaderPick < 0.5) {
    return color; //  
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,y8t=`layout(location = ATTRIBUTE_LOCATION_PICKING_COLOR) in vec3 a_PickingColor;
out vec4 v_PickingResult;

#pragma include "picking_uniforms"

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return distance(vertexColor,u_PickingColor.rgb) < 0.01;
}

//  select 
bool isVertexSelected(vec3 vertexColor) {
  return distance(vertexColor,u_CurrentSelectedId.rgb) < 0.01;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  if(u_PickingStage == PICKING_HIGHLIGHT) {
    if(isVertexPicked(pickingColor)) {
       v_PickingResult = vec4(pickingColor.rgb * COLOR_SCALE,HIGHLIGHT);
       return;
    }
    if(isVertexSelected(pickingColor)) {
     v_PickingResult = vec4(u_CurrentSelectedId.rgb * COLOR_SCALE,SELECT);
      return;
    }

  } else {
      v_PickingResult= vec4(pickingColor.rgb * COLOR_SCALE,NORMAL);
      return;
  }

  // // v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && (isVertexPicked(pickingColor) || isVertexPicked(u_CurrentSelectedId)));

  // // Stores the picking color so that the fragment shader can render it during picking
  // v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,U1e=`layout(std140) uniform PickingUniforms {
  vec4 u_HighlightColor;
  vec4 u_SelectColor;
  vec3 u_PickingColor;
  float u_PickingStage;
  vec3 u_CurrentSelectedId;
  float u_PickingThreshold;
  float u_PickingBuffer;
  float u_shaderPick;
  float u_activeMix;
};
`,_8t=`#define E (2.718281828459045)
vec2 ProjectFlat(vec2 lnglat) {
  float maxs = 85.0511287798;
  float lat = max(min(maxs, lnglat.y), -maxs);
  float scale = 268435456.0;
  float d = PI / 180.0;
  float x = lnglat.x * d;
  float y = lat * d;
  y = log(tan(PI / 4.0 + y / 2.0));

  float a = 0.5 / PI,
    b = 0.5,
    c = -0.5 / PI;
  d = 0.5;
  x = scale * (a * x + b);
  y = scale * (c * y + d);
  return vec2(x, y);
}

vec2 unProjectFlat(vec2 px) {
  float a = 0.5 / PI;
  float b = 0.5;
  float c = -0.5 / PI;
  float d = 0.5;
  float scale = 268435456.0;
  float x = (px.x / scale - b) / a;
  float y = (px.y / scale - d) / c;
  y = (atan(pow(E, y)) - PI / 4.0) * 2.0;
  d = PI / 180.0;
  float lat = y / d;
  float lng = x / d;
  return vec2(lng, lat);
}

float pixelDistance(vec2 from, vec2 to) {
  vec2 a1 = ProjectFlat(from);
  vec2 b1 = ProjectFlat(to);
  return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) {
  //  => 
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) {
  //  => 
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}

float customPixelDistance(vec2 from, vec2 to) {
  vec2 a1 = ProjectFlat(from);
  vec2 b1 = ProjectFlat(to);
  return distance(a1, b1);
}
`,j1e=`#define TILE_SIZE (512.0)
#define PI (3.1415926536)
#define WORLD_SCALE (TILE_SIZE / (PI * 2.0))
#define EARTH_CIRCUMFERENCE (40.03e6)

#define COORDINATE_SYSTEM_LNGLAT (1.0) // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET (2.0) // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE (3.0)
#define COORDINATE_SYSTEM_IDENTITY (4.0)
#define COORDINATE_SYSTEM_METER_OFFSET (5.0)

#pragma include "scene_uniforms"

const vec2 ZERO_64_XY_LOW = vec2(0.0, 0.0);

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(radians(x) + PI, PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5)));
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}

// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1.0, 1.0);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
      u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01 ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}

vec4 project_position(vec4 position, vec2 position64xyLow) {
  // 
  bool usingRelativeCoords = abs(u_RelativeOrigin.x) > 0.0001 || abs(u_RelativeOrigin.y) > 0.0001;

  if (usingRelativeCoords) {
    // CPUViewportCenter=RelativeOrigin
    // 

    if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // 
      // ViewportCenterRelativeOriginposition
      float X = position.x;
      float Y = position.y;
      return project_offset(
        vec4(X + position64xyLow.x, Y + position64xyLow.y, position.z, position.w)
      );
    } else {
      // 
      vec2 absolutePos = position.xy + u_RelativeOrigin.xy;
      return vec4(
        project_mercator(absolutePos) * WORLD_SCALE * u_ZoomScale,
        project_scale(position.z),
        position.w
      );
    }
  }

  // 
  vec4 absolutePosition = position;
  vec2 absolutePosition64xyLow = position64xyLow;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // 
    vec2 center = u_ViewportCenter;
    float X = absolutePosition.x - center.x;
    float Y = absolutePosition.y - center.y;
    return project_offset(
      vec4(
        X + absolutePosition64xyLow.x,
        Y + absolutePosition64xyLow.y,
        absolutePosition.z,
        absolutePosition.w
      )
    );
  }
  if (
    u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 &&
    u_CoordinateSystem > COORDINATE_SYSTEM_LNGLAT - 0.01
  ) {
    // 
    return vec4(
      project_mercator(absolutePosition.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(absolutePosition.z),
      absolutePosition.w
    );
  }

  return absolutePosition;
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_XY_LOW);
}

vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

// 
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom) * u_FocalDistance;
  }

  return pixel * 2.0 * u_FocalDistance;
}

// 
float project_float_pixel(float pixel) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox  Web zoom 1
    return pixel * pow(2.0, 19.0 - u_Zoom) * u_FocalDistance;
  }

  return pixel * u_FocalDistance;
}

// Project meter into the unit of pixel which used in the camera world space
float project_float_meter(float meter) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Since the zoom level uniform is updated by mapservice and it's alread been subtracted by 1
    // Not sure if we are supposed to do that again
    return meter;
  } else {
    return project_float_pixel(meter);
  }

  // TODO: change the following code to make adaptations for amap
  // return u_FocalDistance * TILE_SIZE * pow(2.0, u_Zoom) * meter / EARTH_CIRCUMFERENCE;

}

float project_pixel(float pixel) {
  return pixel * u_FocalDistance;
}

vec2 project_pixel(vec2 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec3 project_pixel(vec3 pixel) {
  return pixel * -1.0 * u_FocalDistance;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}

bool isEqual(float a, float b) {
  return a < b + 0.001 && a > b - 0.001;
}

`,b8t=`vec2 rotate_matrix(vec2 v, float a) {
  float b = a / 180.0 * 3.1415926535897932384626433832795;
  float s = sin(b);
  float c = cos(b);
  mat2 m = mat2(c, s, -s, c);
  return m * v;
}
`,z1e=`layout(std140) uniform SceneUniforms {
  mat4 u_ViewMatrix;
  mat4 u_ProjectionMatrix;
  mat4 u_ViewProjectionMatrix;
  mat4 u_ModelMatrix;
  vec4 u_ViewportCenterProjection;
  vec3 u_PixelsPerDegree;
  float u_Zoom;
  vec3 u_PixelsPerDegree2;
  float u_ZoomScale;
  vec3 u_PixelsPerMeter;
  float u_CoordinateSystem;
  vec3 u_CameraPosition;
  float u_DevicePixelRatio;
  vec2 u_ViewportCenter;
  vec2 u_ViewportSize;
  float u_FocalDistance;
  vec2 u_RelativeOrigin;
  float u_Reserved3;
};
`,E8t=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b) {
  return a.x * b.x - a.y * b.y;
}

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0 / k;
  if (p.x + k * p.y > 0.0) p = vec2(p.x - k * p.y, -k * p.x - p.y) / 2.0;
  p.x -= clamp(p.x, -2.0, 0.0);
  return -length(p) * sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p) - b;
  return length(max(d, vec2(0))) + min(max(d.x, d.y), 0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994, 0.587785252, 0.726542528);
  p.x = abs(p.x);
  p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);
  p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);
  p -= vec2(clamp(p.x, -r * k.z, r * k.z), r);
  return length(p) * sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404, 0.5, 0.577350269);
  p = abs(p);
  p -= 2.0 * min(dot(k.xy, p), 0.0) * k.xy;
  p -= vec2(clamp(p.x, -k.z * r, k.z * r), r);
  return length(p) * sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623);
  p = abs(p);
  p -= 2.0 * min(dot(vec2(k.x, k.y), p), 0.0) * vec2(k.x, k.y);
  p -= 2.0 * min(dot(vec2(-k.x, k.y), p), 0.0) * vec2(-k.x, k.y);
  p -= vec2(clamp(p.x, -k.z * r, k.z * r), r);
  return length(p) * sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k = vec4(-0.5, 0.8660254038, 0.5773502692, 1.7320508076);
  p = abs(p);
  p -= 2.0 * min(dot(k.xy, p), 0.0) * k.xy;
  p -= 2.0 * min(dot(k.yx, p), 0.0) * k.yx;
  p -= vec2(clamp(p.x, r * k.z, r * k.w), r);
  return length(p) * sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0 * ndot(q, b) + ndot(b, b)) / dot(b, b), -1.0, 1.0);
  float d = length(q - 0.5 * b * vec2(1.0 - h, 1.0 + h));
  return d * sign(q.x * b.y + q.y * b.x - b.x * b.y);
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r * r - d * d); // can delay this sqrt
  return (p.y - b) * d > p.x * b
    ? length(p - vec2(0.0, b))
    : length(p - vec2(-d, 0.0)) - r;
}
`,$1e=/precision\s+(high|low|medium)p\s+float/,H1e=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,x8t=/#pragma include (["^+"]?["[a-zA-Z_0-9](.*)"]*?)/g,S8t=/void\s+main\s*\([^)]*\)\s*\{\n?/;class T8t{constructor(){Z(this,"moduleCache",{}),Z(this,"rawContentCache",{})}registerBuiltinModules(){this.destroy(),this.registerModule("common",{vs:F1e,fs:F1e}),this.registerModule("decode",{vs:g8t,fs:""}),this.registerModule("scene_uniforms",{vs:z1e,fs:z1e}),this.registerModule("picking_uniforms",{vs:U1e,fs:U1e}),this.registerModule("projection",{vs:j1e,fs:j1e}),this.registerModule("project",{vs:_8t,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:E8t}),this.registerModule("lighting",{vs:v8t,fs:""}),this.registerModule("light",{vs:p8t,fs:""}),this.registerModule("picking",{vs:y8t,fs:m8t}),this.registerModule("rotation_2d",{vs:b8t,fs:""})}registerModule(e,n){n.vs=n.vs.replace(/\r\n/g,`
`),n.fs=n.fs.replace(/\r\n/g,`
`);const{vs:r,fs:i,uniforms:a,defines:o,inject:s}=n,{content:l,uniforms:c}=CW(r),{content:u,uniforms:f}=CW(i);this.rawContentCache[e]={fs:u,defines:o,inject:s,uniforms:ze(ze(ze({},c),f),a),vs:l}}getModule(e){let n=this.rawContentCache[e].vs,r=this.rawContentCache[e].fs;const{defines:i={},inject:a={}}=this.rawContentCache[e];let o={};a["vs:#decl"]&&(n=a["vs:#decl"]+n,o=CW(a["vs:#decl"]).uniforms),a["vs:#main-start"]&&(n=n.replace(S8t,g=>g+a["vs:#main-start"])),a["fs:#decl"]&&(r=a["fs:#decl"]+r),n=A8t(i)+n;const{content:l,includeList:c}=this.processModule(n,[],"vs"),{content:u,includeList:f}=this.processModule(r,[],"fs"),h=d8t(c.concat(f).concat(e)).reduce((g,v)=>ze(ze({},g),this.rawContentCache[v].uniforms),ze({},o)),d=($1e.test(u)?"":H1e)+l,p=($1e.test(u)?"":H1e)+u;return this.moduleCache[e]={vs:d.trim(),fs:p.trim(),uniforms:h},this.moduleCache[e]}destroy(){this.moduleCache={},this.rawContentCache={}}processModule(e,n,r){return{content:e.replace(x8t,(a,o)=>{const l=o.split(" ")[0].replace(/"/g,"");if(n.indexOf(l)>-1)return"";const c=this.rawContentCache[l][r];n.push(l);const{content:u}=this.processModule(c,n,r);return u}),includeList:n}}}function A8t(t){return Object.keys(t).reduce((n,r)=>n+`#define ${r.toUpperCase()} ${t[r]}
`,`
`)}class Mne{constructor(){Z(this,"shaderModuleService",void 0),Z(this,"rendererService",void 0),Z(this,"cameraService",void 0),Z(this,"mapService",void 0),Z(this,"interactionService",void 0),Z(this,"layerService",void 0),Z(this,"config",void 0)}getName(){return""}getType(){return fN.Normal}init(e,n){this.config=n,this.rendererService=e.getContainer().rendererService,this.cameraService=e.getContainer().cameraService,this.mapService=e.getContainer().mapService,this.interactionService=e.getContainer().interactionService,this.layerService=e.getContainer().layerService,this.shaderModuleService=e.getContainer().shaderModuleService}render(e){}}class w8t extends Mne{getName(){return"clear"}init(e,n){super.init(e,n)}render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}class O8t{constructor(e){Z(this,"passes",[]),Z(this,"layer",void 0),Z(this,"renderFlag",void 0),Z(this,"width",0),Z(this,"height",0),this.postProcessor=e}setLayer(e){this.layer=e}setRenderFlag(e){this.renderFlag=e}getRenderFlag(){return this.renderFlag}getPostProcessor(){return this.postProcessor}render(){var e=this;return kt(function*(){for(const n of e.passes)yield n.render(e.layer);yield e.postProcessor.render(e.layer)})()}resize(e,n){(this.width!==e||this.height!==n)&&(this.postProcessor.resize(e,n),this.width=e,this.height=n)}add(e,n){e.getType()===fN.PostProcessing?this.postProcessor.add(e,this.layer,n):(e.init(this.layer,n),this.passes.push(e))}insert(e,n,r){e.init(this.layer,n),this.passes.splice(r,0,e)}destroy(){this.passes.length=0}}class C8t extends Mne{constructor(...e){var n;super(...e),n=this,Z(this,"pickingFBO",void 0),Z(this,"layer",void 0),Z(this,"width",0),Z(this,"height",0),Z(this,"alreadyInRendering",!1),Z(this,"pickFromPickingFBO",({x:r,y:i,lngLat:a,type:o})=>{if(!this.layer.isVisible()||!this.layer.needPick(o))return;const{getViewportSize:s,readPixelsAsync:l,useFramebuffer:c}=this.rendererService,{width:u,height:f}=s(),{enableHighlight:h,enableSelect:d}=this.layer.getLayerConfig(),p=r*jf,g=i*jf;if(p>u||p<0||g>f||g<0)return;let v;c(this.pickingFBO,kt(function*(){var y;if(v=yield l({x:Math.round(p),y:Math.round(f-(i+1)*jf),width:1,height:1,data:new Uint8Array(4),framebuffer:n.pickingFBO}),v[0]!==0||v[1]!==0||v[2]!==0){const _=ox(v),E=n.layer.getSource().getFeatureById(_),x={x:r,y:i,type:o,lngLat:a,featureId:_,feature:E};E&&(n.layer.setCurrentPickId(_),n.triggerHoverOnLayer(x))}else{const _={x:r,y:i,lngLat:a,type:n.layer.getCurrentPickId()===null?"un"+o:"mouseout",featureId:null,feature:null};n.triggerHoverOnLayer(ze(ze({},_),{},{type:"unpick"})),n.triggerHoverOnLayer(_),n.layer.setCurrentPickId(null)}h&&n.highlightPickedFeature(v),d&&o==="click"&&((y=v)===null||y===void 0?void 0:y.toString())!==[0,0,0,0].toString()&&n.selectFeature(v)}))})}getType(){return fN.Normal}getName(){return"pixelPicking"}init(e,n){super.init(e,n),this.layer=e;const{createTexture2D:r,createFramebuffer:i,getViewportSize:a}=this.rendererService,{width:o,height:s}=a(),l=r({width:o,height:s,wrapS:se.CLAMP_TO_EDGE,wrapT:se.CLAMP_TO_EDGE,label:"Picking Texture"});this.pickingFBO=i({color:l}),this.interactionService.on(Oh.Hover,this.pickFromPickingFBO),this.interactionService.on(Oh.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(Oh.Active,this.highlightFeatureHandle.bind(this))}render(e){if(this.alreadyInRendering)return;const{getViewportSize:n,useFramebuffer:r,clear:i}=this.rendererService,{width:a,height:o}=n();this.alreadyInRendering=!0,(this.width!==a||this.height!==o)&&(this.pickingFBO.resize({width:a,height:o}),this.width=a,this.height=o),r(this.pickingFBO,()=>{i({framebuffer:this.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});const s=this.layer.multiPassRenderer.getRenderFlag();this.layer.multiPassRenderer.setRenderFlag(!1),e.hooks.beforePickingEncode.call(),e.render(),e.hooks.afterPickingEncode.call(),this.layer.multiPassRenderer.setRenderFlag(s),this.alreadyInRendering=!1})}triggerHoverOnLayer(e){this.layer.emit(e.type,e)}highlightPickedFeature(e){const[n,r,i]=e;this.layer.hooks.beforeHighlight.call([n,r,i]),this.layerService.renderLayers()}selectFeature(e){const[n,r,i]=e;this.layer.hooks.beforeSelect.call([n,r,i]),this.layerService.renderLayers()}selectFeatureHandle({featureId:e}){const n=ow(e);this.selectFeature(new Uint8Array(n))}highlightFeatureHandle({featureId:e}){const n=ow(e);this.highlightPickedFeature(new Uint8Array(n))}}class R8t{constructor(e){Z(this,"passes",[]),Z(this,"readFBO",void 0),Z(this,"writeFBO",void 0),this.rendererService=e,this.init()}getReadFBO(){return this.readFBO}getWriteFBO(){return this.writeFBO}getCurrentFBOTex(){const{getViewportSize:e,createTexture2D:n}=this.rendererService,{width:r,height:i}=e();return n({x:0,y:0,width:r,height:i,copy:!0})}getReadFBOTex(){var e=this;const{useFramebuffer:n}=this.rendererService;return new Promise(r=>{n(this.readFBO,kt(function*(){r(e.getCurrentFBOTex())}))})}renderBloomPass(e,n){var r=this;return kt(function*(){const i=yield r.getReadFBOTex();let a=0;for(;a<4;)yield n.render(e,i),r.swap(),a++})()}render(e){var n=this;return kt(function*(){for(let r=0;r<n.passes.length;r++){const i=n.passes[r];i.setRenderToScreen(n.isLastEnabledPass(r)),i.getName()==="bloom"?yield n.renderBloomPass(e,i):(yield i.render(e),r!==n.passes.length-1&&n.swap())}})()}resize(e,n){this.readFBO.resize({width:e,height:n}),this.writeFBO.resize({width:e,height:n})}add(e,n,r){e.init(n,r),this.passes.push(e)}insert(e,n,r,i){e.init(r,i),this.passes.splice(n,0,e)}getPostProcessingPassByName(e){return this.passes.find(n=>n.getName()===e)}init(){const{createFramebuffer:e,createTexture2D:n}=this.rendererService;this.readFBO=e({color:n({width:1,height:1,wrapS:se.CLAMP_TO_EDGE,wrapT:se.CLAMP_TO_EDGE,usage:Ix.RENDER_TARGET})}),this.writeFBO=e({color:n({width:1,height:1,wrapS:se.CLAMP_TO_EDGE,wrapT:se.CLAMP_TO_EDGE,usage:Ix.RENDER_TARGET})})}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].isEnabled())return!1;return!0}swap(){const e=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=e}}class M8t extends Mne{getType(){return fN.Normal}getName(){return"render"}init(e,n){super.init(e,n)}render(e){const{useFramebuffer:n,clear:r}=this.rendererService,i=e.multiPassRenderer.getPostProcessor().getReadFBO();n(i,()=>{r({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i}),e.multiPassRenderer.setRenderFlag(!1),e.models.forEach(a=>{a.draw({uniforms:e.layerModel.getUninforms()})}),e.multiPassRenderer.setRenderFlag(!0)})}}const P8t=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,N8t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`,{isNil:GW}=gs;class I8t extends $y{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:N8t,fs:P8t});const{vs:e,fs:n,uniforms:r}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:ze(ze({},r),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(e){const n={};return GW(e.bloomRadius)||(n.u_radius=e.bloomRadius),GW(e.bloomIntensity)||(n.u_intensity=e.bloomIntensity),GW(e.bloomBaseRadio)||(n.u_baseRadio=e.bloomBaseRadio),n}}const L8t=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,k8t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`,{isNil:D8t}=gs;class B8t extends $y{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:k8t,fs:L8t});const{vs:e,fs:n,uniforms:r}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:ze(ze({},r),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(e){const n={};return D8t(e.blurRadius)||(n.u_BlurDir=[e.blurRadius,0]),n}}const F8t=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,U8t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`,{isNil:j8t}=gs;class z8t extends $y{setupShaders(){this.shaderModuleService.registerModule("blur-pass",{vs:U8t,fs:F8t});const{vs:e,fs:n,uniforms:r}=this.shaderModuleService.getModule("blur-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:ze(ze({},r),{},{u_ViewportSize:[i,a]})}}convertOptionsToUniforms(e){const n={};return j8t(e.blurRadius)||(n.u_BlurDir=[0,e.blurRadius]),n}}const $8t=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,H8t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`;class G8t extends $y{setupShaders(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:H8t,fs:$8t});const{vs:e,fs:n,uniforms:r}=this.shaderModuleService.getModule("colorhalftone-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:ze(ze({},r),{},{u_ViewportSize:[i,a]})}}}const W8t=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}
`,V8t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`;class Y8t extends $y{setupShaders(){return this.shaderModuleService.registerModule("copy-pass",{vs:V8t,fs:W8t}),this.shaderModuleService.getModule("copy-pass")}}const X8t=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,q8t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`;class Z8t extends $y{setupShaders(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:q8t,fs:X8t});const{vs:e,fs:n,uniforms:r}=this.shaderModuleService.getModule("hexagonalpixelate-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:ze(ze({},r),{},{u_ViewportSize:[i,a]})}}}const K8t=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Q8t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`;class J8t extends $y{setupShaders(){this.shaderModuleService.registerModule("ink-pass",{vs:Q8t,fs:K8t});const{vs:e,fs:n,uniforms:r}=this.shaderModuleService.getModule("ink-pass"),{width:i,height:a}=this.rendererService.getViewportSize();return{vs:e,fs:n,uniforms:ze(ze({},r),{},{u_ViewportSize:[i,a]})}}}const e7t=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,t7t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`;class n7t extends $y{setupShaders(){return this.shaderModuleService.registerModule("noise-pass",{vs:t7t,fs:e7t}),this.shaderModuleService.getModule("noise-pass")}}const r7t=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0.0, 1.0);
}
`,i7t=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`;class a7t extends $y{setupShaders(){return this.shaderModuleService.registerModule("sepia-pass",{vs:r7t,fs:i7t}),this.shaderModuleService.getModule("sepia-pass")}}const VFe=new _5t;let o7t=0;function s7t(){const t=new T8t,e=new S5t,n=new u5t,r=new x5t(n),i=new s5t,a=new c5t,o=new d5t,s=new p5t,l=new h5t,c={id:`${o7t++}`,globalConfigService:VFe,shaderModuleService:t,debugService:e,cameraService:n,coordinateSystemService:r,fontService:i,iconService:a,markerService:o,popupService:s,controlService:l,customRenderService:{}},u=new I5t(c);c.layerService=u;const f=new h8t(c);c.sceneService=f;const h=new O5t(c);c.interactionService=h;const d=new P5t(c);c.pickingService=d;const p={clear:new w8t,pixelPicking:new C8t,render:new M8t};c.normalPassFactory=v=>p[v];const g={copy:new Y8t,bloom:new I8t,blurH:new B8t,blurV:new z8t,noise:new n7t,sepia:new a7t,colorHalftone:new G8t,hexagonalPixelate:new Z8t,ink:new J8t};return c.postProcessingPass=g,c.postProcessingPassFactory=v=>g[v],c}function sR(t){const e=ze({},t);return e.postProcessor=new R8t(e.rendererService),e.multiPassRenderer=new O8t(e.postProcessor),e.styleAttributeService=new U5t(e.rendererService),e}const pL=["loaded","fontloaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"];let wu=(function(t){return t.IMAGE="image",t.CUSTOMIMAGE="customImage",t.ARRAYBUFFER="arraybuffer",t.RGB="rgb",t.TERRAINRGB="terrainRGB",t.CUSTOMRGB="customRGB",t.CUSTOMARRAYBUFFER="customArrayBuffer",t.CUSTOMTERRAINRGB="customTerrainRGB",t})({});var YFe=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),l7t=(t,e,n,r)=>YFe(void 0,null,function*(){return new Promise((i,a)=>{e({x:t.x,y:t.y,z:t.z},(o,s)=>{if(o||s.length===0){a(o);return}s&&sZ([{data:s,bands:[0]}],n,r,(l,c)=>{l?a(l):c&&i(c)})})})}),c7t=(t,e)=>YFe(void 0,null,function*(){return new Promise((n,r)=>{e({x:t.x,y:t.y,z:t.z},(i,a)=>{if(i||!a){r(i);return}a instanceof ArrayBuffer?yDt(a,(o,s)=>{o&&r(o),n(s)}):a instanceof HTMLImageElement?n(a):r(i)})})});function u7t(t,e){return Array.isArray(t)?typeof t[0]=="string"?t.map(n=>OA(n,e)):t.map(n=>({url:OA(n.url,e),bands:n.bands||[0]})):OA(t,e)}function f7t(t){return typeof t=="string"?[{url:t,bands:[0]}]:typeof t[0]=="string"?t.map(e=>({url:e,bands:[0]})):t}function G1e(t,e){t.xhrCancel=()=>{e.map(n=>{n.abort()})}}var h7t=Object.defineProperty,d7t=Object.defineProperties,p7t=Object.getOwnPropertyDescriptors,W1e=Object.getOwnPropertySymbols,g7t=Object.prototype.hasOwnProperty,v7t=Object.prototype.propertyIsEnumerable,V1e=(t,e,n)=>e in t?h7t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Y1e=(t,e)=>{for(var n in e||(e={}))g7t.call(e,n)&&V1e(t,n,e[n]);if(W1e)for(var n of W1e(e))v7t.call(e,n)&&V1e(t,n,e[n]);return t},X1e=(t,e)=>d7t(t,p7t(e)),XFe=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),m7t=(t,e,n,r,i)=>XFe(void 0,null,function*(){const a=f7t(e.url);if(a.length>1){const{rasterFiles:o,xhrList:s,errList:l}=yield y7t(a,e);if(G1e(t,s),l.length>0){n(l,null);return}sZ(o,r,i,n)}else{const o=hne(e,(s,l)=>{if(s)n(s);else if(l){const c=[{data:l,bands:a[0].bands}];sZ(c,r,i,n)}});G1e(t,[o])}});function y7t(t,e){return XFe(this,null,function*(){const n=[],r=[],i=[];for(let a=0;a<t.length;a++){const o=t[a],s=X1e(Y1e({},e),{url:o.url}),l=o.bands,{err:c,data:u,xhr:f}=yield gDt(X1e(Y1e({},s),{type:"arrayBuffer"}));c&&i.push(c),r.push(f),n.push({data:u,bands:l})}return{rasterFiles:n,xhrList:r,errList:i}})}var _7t=Object.defineProperty,b7t=Object.defineProperties,E7t=Object.getOwnPropertyDescriptors,q1e=Object.getOwnPropertySymbols,x7t=Object.prototype.hasOwnProperty,S7t=Object.prototype.propertyIsEnumerable,Z1e=(t,e,n)=>e in t?_7t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ck=(t,e)=>{for(var n in e||(e={}))x7t.call(e,n)&&Z1e(t,n,e[n]);if(q1e)for(var n of q1e(e))S7t.call(e,n)&&Z1e(t,n,e[n]);return t},qFe=(t,e)=>b7t(t,E7t(e)),ZFe=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),T7t=(t,e,n,r)=>ZFe(void 0,null,function*(){const{format:i=KFe,operation:a,requestParameters:o={}}=r,s=qFe(Ck({},o),{url:u7t(t,e)});return new Promise((l,c)=>{m7t(n,s,(u,f)=>{u?c(u):f&&l(f)},i,a)})}),K1e=(t,e,n,r)=>ZFe(void 0,null,function*(){let i;const a=Array.isArray(t)?t[0]:t;return r.wmtsOptions?i=(r?.getURLFromTemplate||GFt)(a,Ck(Ck({},e),r.wmtsOptions)):i=(r?.getURLFromTemplate||OA)(a,e),new Promise((o,s)=>{var l;const c=Kq(qFe(Ck({},r?.requestParameters),{url:i,type:((l=r?.requestParameters)==null?void 0:l.type)||"arrayBuffer"}),(u,f)=>{u?s(u):f&&o(f)},r.transformResponse);n.xhrCancel=()=>c.cancel()})}),KFe=()=>({rasterData:new Uint8Array([0]),width:1,height:1}),A7t=Object.defineProperty,w7t=Object.defineProperties,O7t=Object.getOwnPropertyDescriptors,Q1e=Object.getOwnPropertySymbols,C7t=Object.prototype.hasOwnProperty,R7t=Object.prototype.propertyIsEnumerable,J1e=(t,e,n)=>e in t?A7t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,e_e=(t,e)=>{for(var n in e||(e={}))C7t.call(e,n)&&J1e(t,n,e[n]);if(Q1e)for(var n of Q1e(e))R7t.call(e,n)&&J1e(t,n,e[n]);return t},M7t=(t,e)=>w7t(t,O7t(e)),P7t={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,warp:!0};wu.ARRAYBUFFER,wu.RGB;function N7t(t){return!!(Array.isArray(t)&&t.length===0||!Array.isArray(t)&&typeof t!="string")}function I7t(t,e={}){if(N7t(t))throw new Error("tile server url is error");const{extent:n=[1/0,1/0,-1/0,-1/0],coordinates:r}=e;let i=e?.dataType||wu.IMAGE;i===wu.RGB&&(i=wu.ARRAYBUFFER);const a=(l,c)=>{switch(i){case wu.IMAGE:return K1e(t,l,c,e);case wu.CUSTOMIMAGE:case wu.CUSTOMTERRAINRGB:return c7t(c,e?.getCustomData);case wu.ARRAYBUFFER:return T7t(t,l,c,e);case wu.CUSTOMARRAYBUFFER:case wu.CUSTOMRGB:return l7t(c,e?.getCustomData,e?.format||KFe,e?.operation);default:return K1e(t,l,c,e)}},o=M7t(e_e(e_e({},P7t),e),{getTileData:a}),s=rO(r,n);return{data:t,dataArray:[{_id:1,coordinates:s}],tilesetOptions:o,isTile:!0}}var L7t=Object.defineProperty,k7t=Object.defineProperties,D7t=Object.getOwnPropertyDescriptors,YB=Object.getOwnPropertySymbols,QFe=Object.prototype.hasOwnProperty,JFe=Object.prototype.propertyIsEnumerable,t_e=(t,e,n)=>e in t?L7t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,B7t=(t,e)=>{for(var n in e||(e={}))QFe.call(e,n)&&t_e(t,n,e[n]);if(YB)for(var n of YB(e))JFe.call(e,n)&&t_e(t,n,e[n]);return t},F7t=(t,e)=>k7t(t,D7t(e)),U7t=(t,e)=>{var n={};for(var r in t)QFe.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&YB)for(var r of YB(t))e.indexOf(r)<0&&JFe.call(t,r)&&(n[r]=t[r]);return n};function j7t(t,e){const n=e,{extent:r=[121.168,30.2828,121.384,30.4219],coordinates:i,width:a,height:o}=n,s=U7t(n,["extent","coordinates","width","height"]);t.length<2&&console.warn("RGB2");const[l,c]=s.bands||[0,1],u=[t[l],t[c]],f=[];for(let p=0;p<u[0].length;p++)f.push((u[1][p]-u[0][p])/(u[1][p]+u[0][p]));const h=rO(i,r);return{_id:1,dataArray:[F7t(B7t({_id:1,data:f,width:a,height:o},s),{coordinates:h})]}}var z7t=Object.defineProperty,$7t=Object.defineProperties,H7t=Object.getOwnPropertyDescriptors,XB=Object.getOwnPropertySymbols,e4e=Object.prototype.hasOwnProperty,t4e=Object.prototype.propertyIsEnumerable,n_e=(t,e,n)=>e in t?z7t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,G7t=(t,e)=>{for(var n in e||(e={}))e4e.call(e,n)&&n_e(t,n,e[n]);if(XB)for(var n of XB(e))t4e.call(e,n)&&n_e(t,n,e[n]);return t},W7t=(t,e)=>$7t(t,H7t(e)),V7t=(t,e)=>{var n={};for(var r in t)e4e.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&XB)for(var r of XB(t))e.indexOf(r)<0&&t4e.call(t,r)&&(n[r]=t[r]);return n};function Y7t(t,e){const n=e,{extent:r,coordinates:i,width:a,height:o}=n,s=V7t(n,["extent","coordinates","width","height"]);t.length<3&&console.warn("RGB");const[l,c,u]=s.bands||[0,1,2],f=[t[l],t[c],t[u]],h=[],[d,p]=s?.countCut||[2,98],g=s?.RMinMax||CA(f[0],d,p),v=s?.GMinMax||CA(f[1],d,p),y=s?.BMinMax||CA(f[2],d,p);for(let x=0;x<f[0].length;x++)h.push(Math.max(0,f[0][x]-g[0])),h.push(Math.max(0,f[1][x]-v[0])),h.push(Math.max(0,f[2][x]-y[0]));const _=rO(i,r);return{_id:1,dataArray:[W7t(G7t({_id:1,data:h,width:a,height:o,rMinMax:g,gMinMax:v,bMinMax:y},s),{coordinates:_})]}}var X7t=Object.defineProperty,q7t=Object.defineProperties,Z7t=Object.getOwnPropertyDescriptors,qB=Object.getOwnPropertySymbols,n4e=Object.prototype.hasOwnProperty,r4e=Object.prototype.propertyIsEnumerable,r_e=(t,e,n)=>e in t?X7t(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K7t=(t,e)=>{for(var n in e||(e={}))n4e.call(e,n)&&r_e(t,n,e[n]);if(qB)for(var n of qB(e))r4e.call(e,n)&&r_e(t,n,e[n]);return t},Q7t=(t,e)=>q7t(t,Z7t(e)),J7t=(t,e)=>{var n={};for(var r in t)n4e.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&qB)for(var r of qB(t))e.indexOf(r)<0&&r4e.call(t,r)&&(n[r]=t[r]);return n};function eUt(t,e){const n=e,{extent:r,coordinates:i,min:a,max:o,width:s,height:l,format:c,operation:u}=n,f=J7t(n,["extent","coordinates","min","max","width","height","format","operation"]);let h;if(c===void 0||xFe(t))h=Array.from(t);else{const g=Array.isArray(t)?t:[t];h=One(g,c,u)}const d=rO(i,r);return{_id:1,dataArray:[Q7t(K7t({_id:1,data:h,width:s,height:l},f),{min:a,max:o,coordinates:d})]}}var tUt=Object.defineProperty,nUt=Object.defineProperties,rUt=Object.getOwnPropertyDescriptors,i_e=Object.getOwnPropertySymbols,iUt=Object.prototype.hasOwnProperty,aUt=Object.prototype.propertyIsEnumerable,a_e=(t,e,n)=>e in t?tUt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,o_e=(t,e)=>{for(var n in e||(e={}))iUt.call(e,n)&&a_e(t,n,e[n]);if(i_e)for(var n of i_e(e))aUt.call(e,n)&&a_e(t,n,e[n]);return t},oUt=(t,e)=>nUt(t,rUt(e)),sUt=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),lUt={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},cUt=t=>sUt(void 0,null,function*(){return new Promise(e=>{const[n,r,i,a]=t.bounds,o={layers:{testTile:{features:[{type:"Feature",properties:{key:t.x+"/"+t.y+"/"+t.z,x:(n+i)/2,y:(r+a)/2},geometry:{type:"LineString",coordinates:[[i,a],[i,r],[n,r],[n,r]]}}]}}};e(o)})});function uUt(t,e){const n=i=>cUt(i),r=oUt(o_e(o_e({},lUt),e),{getTileData:n});return{data:t,dataArray:[],tilesetOptions:r,isTile:!0}}var Rk={exports:{}},fUt=Rk.exports,s_e;function hUt(){return s_e||(s_e=1,(function(t,e){(function(n,r){t.exports=r()})(fUt,(function(){function n(L,B,I,U,$,X){if(!($-U<=I)){var N=U+$>>1;r(L,B,N,U,$,X%2),n(L,B,I,U,N-1,X+1),n(L,B,I,N+1,$,X+1)}}function r(L,B,I,U,$,X){for(;$>U;){if($-U>600){var N=$-U+1,M=I-U+1,k=Math.log(N),z=.5*Math.exp(2*k/3),j=.5*Math.sqrt(k*z*(N-z)/N)*(M-N/2<0?-1:1),V=Math.max(U,Math.floor(I-M*z/N+j)),Q=Math.min($,Math.floor(I+(N-M)*z/N+j));r(L,B,I,V,Q,X)}var ee=B[2*I+X],re=U,ne=$;for(i(L,B,U,I),B[2*$+X]>ee&&i(L,B,U,$);re<ne;){for(i(L,B,re,ne),re++,ne--;B[2*re+X]<ee;)re++;for(;B[2*ne+X]>ee;)ne--}B[2*U+X]===ee?i(L,B,U,ne):(ne++,i(L,B,ne,$)),ne<=I&&(U=ne+1),I<=ne&&($=ne-1)}}function i(L,B,I,U){a(L,I,U),a(B,2*I,2*U),a(B,2*I+1,2*U+1)}function a(L,B,I){var U=L[B];L[B]=L[I],L[I]=U}function o(L,B,I,U,$,X,N){for(var M=[0,L.length-1,0],k=[],z,j;M.length;){var V=M.pop(),Q=M.pop(),ee=M.pop();if(Q-ee<=N){for(var re=ee;re<=Q;re++)z=B[2*re],j=B[2*re+1],z>=I&&z<=$&&j>=U&&j<=X&&k.push(L[re]);continue}var ne=Math.floor((ee+Q)/2);z=B[2*ne],j=B[2*ne+1],z>=I&&z<=$&&j>=U&&j<=X&&k.push(L[ne]);var le=(V+1)%2;(V===0?I<=z:U<=j)&&(M.push(ee),M.push(ne-1),M.push(le)),(V===0?$>=z:X>=j)&&(M.push(ne+1),M.push(Q),M.push(le))}return k}function s(L,B,I,U,$,X){for(var N=[0,L.length-1,0],M=[],k=$*$;N.length;){var z=N.pop(),j=N.pop(),V=N.pop();if(j-V<=X){for(var Q=V;Q<=j;Q++)l(B[2*Q],B[2*Q+1],I,U)<=k&&M.push(L[Q]);continue}var ee=Math.floor((V+j)/2),re=B[2*ee],ne=B[2*ee+1];l(re,ne,I,U)<=k&&M.push(L[ee]);var le=(z+1)%2;(z===0?I-$<=re:U-$<=ne)&&(N.push(V),N.push(ee-1),N.push(le)),(z===0?I+$>=re:U+$>=ne)&&(N.push(ee+1),N.push(j),N.push(le))}return M}function l(L,B,I,U){var $=L-I,X=B-U;return $*$+X*X}var c=function(L){return L[0]},u=function(L){return L[1]},f=function(B,I,U,$,X){I===void 0&&(I=c),U===void 0&&(U=u),$===void 0&&($=64),X===void 0&&(X=Float64Array),this.nodeSize=$,this.points=B;for(var N=B.length<65536?Uint16Array:Uint32Array,M=this.ids=new N(B.length),k=this.coords=new X(B.length*2),z=0;z<B.length;z++)M[z]=z,k[2*z]=I(B[z]),k[2*z+1]=U(B[z]);n(M,k,$,0,M.length-1,0)};f.prototype.range=function(B,I,U,$){return o(this.ids,this.coords,B,I,U,$,this.nodeSize)},f.prototype.within=function(B,I,U){return s(this.ids,this.coords,B,I,U,this.nodeSize)};var h={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(L){return L}},d=Math.fround||(function(L){return(function(B){return L[0]=+B,L[0]})})(new Float32Array(1)),p=function(B){this.options=w(Object.create(h),B),this.trees=new Array(this.options.maxZoom+1)};p.prototype.load=function(B){var I=this.options,U=I.log,$=I.minZoom,X=I.maxZoom,N=I.nodeSize;U&&console.time("total time");var M="prepare "+B.length+" points";U&&console.time(M),this.points=B;for(var k=[],z=0;z<B.length;z++)B[z].geometry&&k.push(v(B[z],z));this.trees[X+1]=new f(k,C,D,N,Float32Array),U&&console.timeEnd(M);for(var j=X;j>=$;j--){var V=+Date.now();k=this._cluster(k,j),this.trees[j]=new f(k,C,D,N,Float32Array),U&&console.log("z%d: %d clusters in %dms",j,k.length,+Date.now()-V)}return U&&console.timeEnd("total time"),this},p.prototype.getClusters=function(B,I){var U=((B[0]+180)%360+360)%360-180,$=Math.max(-90,Math.min(90,B[1])),X=B[2]===180?180:((B[2]+180)%360+360)%360-180,N=Math.max(-90,Math.min(90,B[3]));if(B[2]-B[0]>=360)U=-180,X=180;else if(U>X){var M=this.getClusters([U,$,180,N],I),k=this.getClusters([-180,$,X,N],I);return M.concat(k)}for(var z=this.trees[this._limitZoom(I)],j=z.range(E(U),x(N),E(X),x($)),V=[],Q=0,ee=j;Q<ee.length;Q+=1){var re=ee[Q],ne=z.points[re];V.push(ne.numPoints?y(ne):this.points[ne.index])}return V},p.prototype.getChildren=function(B){var I=this._getOriginId(B),U=this._getOriginZoom(B),$="No cluster with the specified id.",X=this.trees[U];if(!X)throw new Error($);var N=X.points[I];if(!N)throw new Error($);for(var M=this.options.radius/(this.options.extent*Math.pow(2,U-1)),k=X.within(N.x,N.y,M),z=[],j=0,V=k;j<V.length;j+=1){var Q=V[j],ee=X.points[Q];ee.parentId===B&&z.push(ee.numPoints?y(ee):this.points[ee.index])}if(z.length===0)throw new Error($);return z},p.prototype.getLeaves=function(B,I,U){I=I||10,U=U||0;var $=[];return this._appendLeaves($,B,I,U,0),$},p.prototype.getTile=function(B,I,U){var $=this.trees[this._limitZoom(B)],X=Math.pow(2,B),N=this.options,M=N.extent,k=N.radius,z=k/M,j=(U-z)/X,V=(U+1+z)/X,Q={features:[]};return this._addTileFeatures($.range((I-z)/X,j,(I+1+z)/X,V),$.points,I,U,X,Q),I===0&&this._addTileFeatures($.range(1-z/X,j,1,V),$.points,X,U,X,Q),I===X-1&&this._addTileFeatures($.range(0,j,z/X,V),$.points,-1,U,X,Q),Q.features.length?Q:null},p.prototype.getClusterExpansionZoom=function(B){for(var I=this._getOriginZoom(B)-1;I<=this.options.maxZoom;){var U=this.getChildren(B);if(I++,U.length!==1)break;B=U[0].properties.cluster_id}return I},p.prototype._appendLeaves=function(B,I,U,$,X){for(var N=this.getChildren(I),M=0,k=N;M<k.length;M+=1){var z=k[M],j=z.properties;if(j&&j.cluster?X+j.point_count<=$?X+=j.point_count:X=this._appendLeaves(B,j.cluster_id,U,$,X):X<$?X++:B.push(z),B.length===U)break}return X},p.prototype._addTileFeatures=function(B,I,U,$,X,N){for(var M=0,k=B;M<k.length;M+=1){var z=k[M],j=I[z],V=j.numPoints,Q=void 0,ee=void 0,re=void 0;if(V)Q=_(j),ee=j.x,re=j.y;else{var ne=this.points[j.index];Q=ne.properties,ee=E(ne.geometry.coordinates[0]),re=x(ne.geometry.coordinates[1])}var le={type:1,geometry:[[Math.round(this.options.extent*(ee*X-U)),Math.round(this.options.extent*(re*X-$))]],tags:Q},ue=void 0;V?ue=j.id:this.options.generateId?ue=j.index:this.points[j.index].id&&(ue=this.points[j.index].id),ue!==void 0&&(le.id=ue),N.features.push(le)}},p.prototype._limitZoom=function(B){return Math.max(this.options.minZoom,Math.min(Math.floor(+B),this.options.maxZoom+1))},p.prototype._cluster=function(B,I){for(var U=[],$=this.options,X=$.radius,N=$.extent,M=$.reduce,k=$.minPoints,z=X/(N*Math.pow(2,I)),j=0;j<B.length;j++){var V=B[j];if(!(V.zoom<=I)){V.zoom=I;for(var Q=this.trees[I+1],ee=Q.within(V.x,V.y,z),re=V.numPoints||1,ne=re,le=0,ue=ee;le<ue.length;le+=1){var ve=ue[le],Se=Q.points[ve];Se.zoom>I&&(ne+=Se.numPoints||1)}if(ne>re&&ne>=k){for(var Re=V.x*re,Xe=V.y*re,Le=M&&re>1?this._map(V,!0):null,Lt=(j<<5)+(I+1)+this.points.length,xt=0,dt=ee;xt<dt.length;xt+=1){var Bt=dt[xt],At=Q.points[Bt];if(!(At.zoom<=I)){At.zoom=I;var zt=At.numPoints||1;Re+=At.x*zt,Xe+=At.y*zt,At.parentId=Lt,M&&(Le||(Le=this._map(V,!0)),M(Le,this._map(At)))}}V.parentId=Lt,U.push(g(Re/ne,Xe/ne,Lt,ne,Le))}else if(U.push(V),ne>1)for(var rn=0,Wn=ee;rn<Wn.length;rn+=1){var Sn=Wn[rn],In=Q.points[Sn];In.zoom<=I||(In.zoom=I,U.push(In))}}}return U},p.prototype._getOriginId=function(B){return B-this.points.length>>5},p.prototype._getOriginZoom=function(B){return(B-this.points.length)%32},p.prototype._map=function(B,I){if(B.numPoints)return I?w({},B.properties):B.properties;var U=this.points[B.index].properties,$=this.options.map(U);return I&&$===U?w({},$):$};function g(L,B,I,U,$){return{x:d(L),y:d(B),zoom:1/0,id:I,parentId:-1,numPoints:U,properties:$}}function v(L,B){var I=L.geometry.coordinates,U=I[0],$=I[1];return{x:d(E(U)),y:d(x($)),zoom:1/0,index:B,parentId:-1}}function y(L){return{type:"Feature",id:L.id,properties:_(L),geometry:{type:"Point",coordinates:[T(L.x),S(L.y)]}}}function _(L){var B=L.numPoints,I=B>=1e4?Math.round(B/1e3)+"k":B>=1e3?Math.round(B/100)/10+"k":B;return w(w({},L.properties),{cluster:!0,cluster_id:L.id,point_count:B,point_count_abbreviated:I})}function E(L){return L/360+.5}function x(L){var B=Math.sin(L*Math.PI/180),I=.5-.25*Math.log((1+B)/(1-B))/Math.PI;return I<0?0:I>1?1:I}function T(L){return(L-.5)*360}function S(L){var B=(180-L*360)*Math.PI/180;return 360*Math.atan(Math.exp(B))/Math.PI-90}function w(L,B){for(var I in B)L[I]=B[I];return L}function C(L){return L.x}function D(L){return L.y}return p}))})(Rk)),Rk.exports}var dUt=hUt();const i4e=Ni(dUt);var pUt=Object.defineProperty,l_e=Object.getOwnPropertySymbols,gUt=Object.prototype.hasOwnProperty,vUt=Object.prototype.propertyIsEnumerable,c_e=(t,e,n)=>e in t?pUt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,a4e=(t,e)=>{for(var n in e||(e={}))gUt.call(e,n)&&c_e(t,n,e[n]);if(l_e)for(var n of l_e(e))vUt.call(e,n)&&c_e(t,n,e[n]);return t};function o4e(t,e){const{radius:n=40,maxZoom:r=18,minZoom:i=0,zoom:a=2}=e;if(t.pointIndex){const l=t.pointIndex.getClusters(t.extent,Math.floor(a));return t.dataArray=mUt(l),t}const o=new i4e({radius:n,minZoom:i,maxZoom:r}),s={features:[]};return s.features=t.dataArray.map(l=>({type:"Feature",geometry:{type:"Point",coordinates:l.coordinates},properties:a4e({},l)})),o.load(s.features),o}function mUt(t){return t.map((e,n)=>a4e({coordinates:e.geometry.coordinates,_id:n+1},e.properties))}function yUt(t){if(t.length===0)throw new Error("max requires at least one data point");let e=t[0];for(let n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function _Ut(t){if(t.length===0)throw new Error("min requires at least one data point");let e=t[0];for(let n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function s4e(t){if(t.length===0)return 0;let e=t[0],n=0,r;for(let i=1;i<t.length;i++)r=e+t[i]*1,Math.abs(e)>=Math.abs(t[i])?n+=e-r+t[i]:n+=t[i]-r+e,e=r;return e+n*1}function bUt(t){if(t.length===0)throw new Error("mean requires at least one data point");return s4e(t)/t.length}var EUt={min:_Ut,max:yUt,mean:bUt,sum:s4e},xUt=Object.defineProperty,u_e=Object.getOwnPropertySymbols,SUt=Object.prototype.hasOwnProperty,TUt=Object.prototype.propertyIsEnumerable,f_e=(t,e,n)=>e in t?xUt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S2=(t,e)=>{for(var n in e||(e={}))SUt.call(e,n)&&f_e(t,n,e[n]);if(u_e)for(var n of u_e(e))TUt.call(e,n)&&f_e(t,n,e[n]);return t},h_e=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),{cloneDeep:AUt,isFunction:d_e,isString:wUt,mergeWith:OUt}=gs;function CUt(t,e){if(Array.isArray(e))return e}var RUt=class extends ku.EventEmitter{constructor(t,e){super(),this.type="source",this.isTile=!1,this.inited=!1,this.hooks={init:new um},this.parser={type:"geojson"},this.transforms=[],this.cluster=!1,this.clusterOptions={enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"},this.invalidExtent=!1,this.dataArrayChanged=!1,this.cfg={autoRender:!0},this.originData=t,this.initCfg(e),this.init().then(()=>{this.inited=!0,this.emit("update",{type:"inited"})})}getSourceCfg(){return this.cfg}getClusters(t){return this.clusterIndex.getClusters(this.caculClusterExtent(2),t)}getClustersLeaves(t){return this.clusterIndex.getLeaves(t,1/0)}getParserType(){return this.parser.type}updateClusterData(t){const{method:e="sum",field:n}=this.clusterOptions;let r=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(t));this.clusterOptions.zoom=t,r.forEach(i=>{i.id||(i.properties.point_count=1)}),(n||d_e(e))&&(r=r.map(i=>{const a=i.id;if(a){const s=this.clusterIndex.getLeaves(a,1/0).map(c=>c.properties);let l;if(wUt(e)&&n){const c=XFt(s,n);l=EUt[e](c)}d_e(e)&&(l=e(s)),i.properties.stat=l}else i.properties.point_count=1;return i})),this.data=M0e("geojson")({type:"FeatureCollection",features:r}),this.executeTrans()}getFeatureById(t){const{type:e="geojson",geometry:n}=this.parser;if(e==="geojson"&&!this.cluster){const r=t<this.originData.features.length?this.originData.features[t]:"null",i=AUt(r);if(i?.properties&&(this.transforms.length!==0||this.dataArrayChanged)){const a=this.data.dataArray.find(o=>o._id===t);i.properties=a}return i}else return e==="json"&&n?this.data.dataArray.find(r=>r._id===t):t<this.data.dataArray.length?this.data.dataArray[t]:"null"}updateFeaturePropertiesById(t,e){this.data.dataArray=this.data.dataArray.map(n=>n._id===t?S2(S2({},n),e):n),this.dataArrayChanged=!0,this.emit("update",{type:"update"})}getFeatureId(t,e){const n=this.data.dataArray.find(r=>r[t]===e);return n?._id}setData(t,e){this.originData=t,this.dataArrayChanged=!1,this.initCfg(e),this.init().then(()=>{this.emit("update",{type:"update"})})}reloadAllTile(){var t;(t=this.tileset)==null||t.reloadAll()}reloadTilebyId(t,e,n){var r;(r=this.tileset)==null||r.reloadTileById(t,e,n)}reloadTileByLnglat(t,e,n){var r;(r=this.tileset)==null||r.reloadTileByLnglat(t,e,n)}getTileExtent(t,e){var n;return(n=this.tileset)==null?void 0:n.getTileExtent(t,e)}getTileByZXY(t,e,n){var r;return(r=this.tileset)==null?void 0:r.getTileByZXY(t,e,n)}reloadTileByExtent(t,e){var n;(n=this.tileset)==null||n.reloadTileByExtent(t,e)}destroy(){var t;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(t=this.tileset)==null||t.destroy()}processData(){return h_e(this,null,function*(){return new Promise((t,e)=>{try{this.excuteParser(),this.initCluster(),this.executeTrans(),t({})}catch(n){e(n)}})})}initCfg(t){this.cfg=OUt(this.cfg,t,CUt);const e=this.cfg;e&&(e.parser&&(this.parser=e.parser),e.transforms&&(this.transforms=e.transforms),this.cluster=e.cluster||!1,e.clusterOptions&&(this.cluster=!0,this.clusterOptions=S2(S2({},this.clusterOptions),e.clusterOptions)))}init(){return h_e(this,null,function*(){this.inited=!1,yield this.processData(),this.inited=!0})}excuteParser(){const t=this.parser,e=t.type||"geojson",n=M0e(e);this.data=n(this.originData,t),this.tileset=this.initTileset(),!t.cancelExtent&&(this.extent=uFt(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3])}setCenter(t){this.center=[(t[0]+t[2])/2,(t[1]+t[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}initTileset(){const{tilesetOptions:t}=this.data;return t?(this.isTile=!0,this.tileset?(this.tileset.updateOptions(t),this.tileset):new HFt(S2({},t))):void 0}executeTrans(){this.transforms.forEach(e=>{const{type:n}=e,r=Zkt(n)(this.data,e);Object.assign(this.data,r)})}initCluster(){if(!this.cluster)return;const t=this.clusterOptions||{};this.clusterIndex=o4e(this.data,t)}caculClusterExtent(t){let e=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(e=VM($B(this.extent),t)),e[0].concat(e[1])}};function MUt(t,e){const{callback:n}=e;return n&&(t.dataArray=t.dataArray.filter(n)),t}var Pne=6378e3;function PUt(t,e){const n=t.dataArray,{size:r=10}=e,i=r/(2*Math.PI*Pne)*(256<<20)/2,{gridHash:a,gridOffset:o}=NUt(n,r),s=DUt(a,o,e);return{yOffset:i,xOffset:i,radius:i,type:"grid",dataArray:s}}function NUt(t,e){let n=1/0,r=-1/0,i;for(const l of t)i=l.coordinates[1],Number.isFinite(i)&&(n=i<n?i:n,r=i>r?i:r);const a=(n+r)/2,o=IUt(e,a);if(o.xOffset<=0||o.yOffset<=0)return{gridHash:{},gridOffset:o};const s={};for(const l of t){const c=l.coordinates[1],u=l.coordinates[0];if(Number.isFinite(c)&&Number.isFinite(u)){const f=Math.floor((c+90)/o.yOffset),h=Math.floor((u+180)/o.xOffset),d=`${f}-${h}`;s[d]=s[d]||{count:0,points:[]},s[d].count+=1,s[d].points.push(l)}}return{gridHash:s,gridOffset:o}}function IUt(t,e){const n=LUt(t),r=kUt(e,t);return{yOffset:n,xOffset:r}}function LUt(t){return t/Pne*(180/Math.PI)}function kUt(t,e){return e/Pne*(180/Math.PI)/Math.cos(t*Math.PI/180)}function DUt(t,e,n){return Object.keys(t).reduce((r,i,a)=>{const o=i.split("-"),s=parseInt(o[0],10),l=parseInt(o[1],10),c={};if(n.field&&n.method){const u=S5(t[i].points,n.field);c[n.method]=x5[n.method](u)}return Object.assign(c,{_id:a,coordinates:Rp([-180+e.xOffset*(l+.5),-90+e.yOffset*(s+.5)]),rawData:t[i].points,count:t[i].count}),r.push(c),r},[])}var $T=Math.PI/3,BUt=[0,$T,2*$T,3*$T,4*$T,5*$T];function FUt(t){return t[0]}function UUt(t){return t[1]}function jUt(){var t=0,e=0,n=1,r=1,i=FUt,a=UUt,o,s,l;function c(f){var h={},d=[],p,g=f.length;for(p=0;p<g;++p)if(!(isNaN(y=+i.call(null,v=f[p],p,f))||isNaN(_=+a.call(null,v,p,f)))){var v,y,_,E=Math.round(_=_/l),x=Math.round(y=y/s-(E&1)/2),T=_-E;if(Math.abs(T)*3>1){var S=y-x,w=x+(y<x?-1:1)/2,C=E+(_<E?-1:1),D=y-w,L=_-C;S*S+T*T>D*D+L*L&&(x=w+(E&1?1:-1)/2,E=C)}var B=x+"-"+E,I=h[B];I?I.push(v):(d.push(I=h[B]=[v]),I.x=(x+(E&1)/2)*s,I.y=E*l)}return d}function u(f){var h=0,d=0;return BUt.map(function(p){var g=Math.sin(p)*f,v=-Math.cos(p)*f,y=g-h,_=v-d;return h=g,d=v,[y,_]})}return c.hexagon=function(f){return"m"+u(f==null?o:+f).join("l")+"z"},c.centers=function(){for(var f=[],h=Math.round(e/l),d=Math.round(t/s),p=h*l;p<r+o;p+=l,++h)for(var g=d*s+(h&1)*s/2;g<n+s/2;g+=s)f.push([g,p]);return f},c.mesh=function(){var f=u(o).slice(0,4).join("l");return c.centers().map(function(h){return"M"+h+"m"+f}).join("")},c.x=function(f){return arguments.length?(i=f,c):i},c.y=function(f){return arguments.length?(a=f,c):a},c.radius=function(f){return arguments.length?(o=+f,s=o*2*Math.sin($T),l=o*1.5,c):o},c.size=function(f){return arguments.length?(t=e=0,n=+f[0],r=+f[1],c):[n-t,r-e]},c.extent=function(f){return arguments.length?(t=+f[0][0],e=+f[0][1],n=+f[1][0],r=+f[1][1],c):[[t,e],[n,r]]},c.radius(1)}var zUt=Object.defineProperty,$Ut=Object.defineProperties,HUt=Object.getOwnPropertyDescriptors,p_e=Object.getOwnPropertySymbols,GUt=Object.prototype.hasOwnProperty,WUt=Object.prototype.propertyIsEnumerable,g_e=(t,e,n)=>e in t?zUt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,VUt=(t,e)=>{for(var n in e||(e={}))GUt.call(e,n)&&g_e(t,n,e[n]);if(p_e)for(var n of p_e(e))WUt.call(e,n)&&g_e(t,n,e[n]);return t},YUt=(t,e)=>$Ut(t,HUt(e)),XUt=6378e3;function qUt(t,e){const n=t.dataArray,{size:r=10,method:i="sum"}=e,a=r/(2*Math.PI*XUt)*(256<<20)/2,o=n.map(u=>{const[f,h]=Rp(u.coordinates);return YUt(VUt({},u),{coordinates:[f,h]})});return{dataArray:jUt().radius(a).x(u=>u.coordinates[0]).y(u=>u.coordinates[1])(o).map((u,f)=>{if(e.field&&i){const h=S5(u,e.field);u[i]=x5[i](h)}return{[e.method]:u[i],count:u.length,rawData:u,coordinates:[u.x,u.y],_id:f}}),radius:a,xOffset:a,yOffset:a,type:"hexagon"}}var ZUt=Object.defineProperty,v_e=Object.getOwnPropertySymbols,KUt=Object.prototype.hasOwnProperty,QUt=Object.prototype.propertyIsEnumerable,m_e=(t,e,n)=>e in t?ZUt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,y_e=(t,e)=>{for(var n in e||(e={}))KUt.call(e,n)&&m_e(t,n,e[n]);if(v_e)for(var n of v_e(e))QUt.call(e,n)&&m_e(t,n,e[n]);return t};function JUt(t,e){const{sourceField:n,targetField:r,data:i}=e,a={};return i.forEach(o=>{a[o[n]]=o}),t.dataArray=t.dataArray.map(o=>{const s=o[r];return y_e(y_e({},o),a[s])}),t}function ejt(t,e){const{callback:n}=e;return n&&(t.dataArray=t.dataArray.map(n)),t}var tjt=Object.defineProperty,njt=Object.defineProperties,rjt=Object.getOwnPropertyDescriptors,__e=Object.getOwnPropertySymbols,ijt=Object.prototype.hasOwnProperty,ajt=Object.prototype.propertyIsEnumerable,b_e=(t,e,n)=>e in t?tjt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ojt=(t,e)=>{for(var n in e||(e={}))ijt.call(e,n)&&b_e(t,n,e[n]);if(__e)for(var n of __e(e))ajt.call(e,n)&&b_e(t,n,e[n]);return t},sjt=(t,e)=>njt(t,rjt(e));function ljt(t){let e=1/0,n=-1/0,r=1/0,i=-1/0;t.forEach(s=>{const l=s.coordinates;if(!l)return;const c=u=>{if(typeof u[0]=="number"&&typeof u[1]=="number"){const[f,h]=u;e=Math.min(e,f),n=Math.max(n,f),r=Math.min(r,h),i=Math.max(i,h)}else Array.isArray(u[0])&&u.forEach(c)};c(l)});const a=(e+n)/2,o=(r+i)/2;return[a,o]}function cjt(t,e){const[n,r]=e;return t.map(i=>{if(!i.coordinates)return i;const a=o=>{if(typeof o[0]=="number"&&typeof o[1]=="number"){const s=Number((o[0]-n).toPrecision(15)),l=Number((o[1]-r).toPrecision(15));return[s,l,...o.slice(2)||[]]}else if(Array.isArray(o[0]))return o.map(a);return o};return sjt(ojt({},i),{coordinates:a(i.coordinates)})})}function ujt(t,e={}){const{enableRelativeCoordinates:n=!1,relativeOrigin:r}=e;if(!n)return{dataArray:t,relativeOrigin:[0,0],originalExtent:[0,0,0,0]};let i=1/0,a=-1/0,o=1/0,s=-1/0;t.forEach(f=>{const h=f.coordinates;if(!h)return;const d=p=>{if(typeof p[0]=="number"&&typeof p[1]=="number"){const[g,v]=p;i=Math.min(i,g),a=Math.max(a,g),o=Math.min(o,v),s=Math.max(s,v)}else Array.isArray(p[0])&&p.forEach(d)};d(h)});const l=[i,o,a,s],c=r||ljt(t);return{dataArray:cjt(t,c),relativeOrigin:c,originalExtent:l}}Fd("rasterTile",I7t);Fd("mvt",_6t);Fd("geojsonvt",B4t);Fd("testTile",uUt);Fd("geojson",u4t);Fd("jsonTile",K4t);Fd("image",OFe);Fd("csv",e4t);Fd("json",SFe);Fd("raster",I6t);Fd("rasterRgb",eUt);Fd("rgb",Y7t);Fd("ndi",j7t);nO("cluster",o4e);nO("filter",MUt);nO("join",JUt);nO("map",ejt);nO("grid",PUt);nO("hexagon",qUt);var lw=RUt;let fjt=class extends ku.EventEmitter{getMarkerLayerContainerSize(){}constructor(e){super(),Z(this,"markerOption",void 0),Z(this,"popup",void 0),Z(this,"mapsService",void 0),Z(this,"lngLat",void 0),Z(this,"scene",void 0),Z(this,"added",!1),Z(this,"preLngLat",{lng:0,lat:0}),Z(this,"onMarkerDragStart",n=>{const r=this.mapsService.getContainer();if(!r)return;this.mapsService.setMapStatus({dragEnable:!1,zoomEnable:!1});const{left:i,top:a}=r.getClientRects()[0],{x:o,y:s}=n;this.preLngLat=this.mapsService.containerToLngLat([o-i,s-a]),this.mapsService.on("mousemove",this.onMarkerDragMove),document.addEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragstart",this.lngLat)}),Z(this,"onMarkerDragMove",n=>{const r=n.lngLat||n.lnglat,{lng:i,lat:a}=this.preLngLat,{lng:o,lat:s}=r,l={lng:this.lngLat.lng+o-i,lat:this.lngLat.lat+s-a};this.setLnglat(l),this.preLngLat=r,this.emit("dragging",l)}),Z(this,"onMarkerDragEnd",()=>{this.mapsService.setMapStatus({dragEnable:!0,zoomEnable:!0}),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.emit("dragend",this.lngLat)}),Z(this,"eventHandle",n=>{this.polyfillEvent(n),this.emit(n.type,{target:n,data:this.markerOption.extData,lngLat:this.lngLat})}),Z(this,"touchStartTime",void 0),this.markerOption=ze(ze({},this.getDefault()),e),lFe(["update","onMove","onMapClick","updatePositionWhenZoom"],this),this.init()}getDefault(){return{element:void 0,anchor:dne.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1,overflowHide:!0}}addTo(e){this.scene=e,this.mapsService=e.mapService;const{element:n}=this.markerOption;return this.mapsService.getMarkerContainer().appendChild(n),this.registerMarkerEvent(n),this.mapsService.on("camerachange",this.update),this.update(),this.updateDraggable(),this.added=!0,this.emit("added"),this}remove(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("camerachange",this.update)),this.unRegisterMarkerEvent(),this.removeAllListeners();const{element:e}=this.markerOption;return e&&Ip(e),this.popup&&this.popup.remove(),this}setLnglat(e){return this.lngLat=e,Array.isArray(e)&&(this.lngLat={lng:e[0],lat:e[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}getLnglat(){return this.lngLat}getElement(){return this.markerOption.element}setElement(e){if(!this.added)return this.once("added",()=>{this.setElement(e)}),this;const{element:n}=this.markerOption;return n&&Ip(n),this.markerOption.element=e,this.init(),this.mapsService.getMarkerContainer().appendChild(e),this.registerMarkerEvent(e),this.updateDraggable(),this.update(),this}openPopup(){if(!this.added)return this.once("added",()=>{this.openPopup()}),this;const e=this.popup;return e?(e.isOpen()||e.addTo(this.scene),this):this}closePopup(){this.added||this.once("added",()=>{this.closePopup()});const e=this.popup;return e&&e.remove(),this}setPopup(e){return this.popup=e,this.lngLat&&this.popup.setLnglat(this.lngLat),this}togglePopup(){const e=this.popup;if(e)e.isOpen()?e.remove():e.addTo(this.scene);else return this;return this}getPopup(){return this.popup}getOffset(){return this.markerOption.offsets}setDraggable(e){this.markerOption.draggable=e,this.updateDraggable()}getDraggable(){return this.markerOption.draggable}getExtData(){return this.markerOption.extData}setExtData(e){this.markerOption.extData=e}update(){if(!this.mapsService)return;const{element:e,anchor:n}=this.markerOption;this.updatePosition(),Ene(e,`${BB[n]}`)}updatePositionWhenZoom(e){if(!this.mapsService)return;const{element:n,offsets:r}=this.markerOption,{lng:i,lat:a}=this.lngLat;if(n){n.style.display="block",n.style.whiteSpace="nowrap";const{containerHeight:o,containerWidth:s,bounds:l}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!l)return;const c=e.map,u=e.center,f=e.zoom,h=c.DE(this.lngLat,f,u);if(h.x=Math.round(h.x+r[0]),h.y=Math.round(h.y-r[1]),Math.abs(l[0][0])>180||Math.abs(l[1][0])>180){if(h.x>s){const d=this.mapsService.lngLatToContainer([i-360,a]);h.x=d.x}if(h.x<0){const d=this.mapsService.lngLatToContainer([i+360,a]);h.x=d.x}}(h.x>s||h.x<0||h.y>o||h.y<0)&&(n.style.display="none"),n.style.left=h.x+"px",n.style.top=h.y+"px",n.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)"}}onMapClick(e){const{element:n}=this.markerOption;this.popup&&n&&this.togglePopup()}getCurrentContainerSize(){const e=this.mapsService.getContainer();return{containerHeight:e?.scrollHeight||0,containerWidth:e?.scrollWidth||0,bounds:this.mapsService.getBounds()}}updateDraggable(){const{element:e}=this.markerOption;e?.removeEventListener("mousedown",this.onMarkerDragStart),this.mapsService.off("mousemove",this.onMarkerDragMove),document.removeEventListener("mouseup",this.onMarkerDragEnd),this.markerOption.draggable&&e?.addEventListener("mousedown",this.onMarkerDragStart)}updatePosition(){if(!this.mapsService)return;const{element:e,offsets:n}=this.markerOption,{lng:r,lat:i}=this.lngLat,a=this.mapsService.lngLatToContainer([r,i]);if(e){e.style.display="block",e.style.whiteSpace="nowrap";const{containerHeight:o,containerWidth:s,bounds:l}=this.getMarkerLayerContainerSize()||this.getCurrentContainerSize();if(!l)return;if(Math.abs(l[0][0])>180||Math.abs(l[1][0])>180){if(a.x>s){const c=this.mapsService.lngLatToContainer([r-360,i]);a.x=c.x}if(a.x<0){const c=this.mapsService.lngLatToContainer([r+360,i]);a.x=c.x}}this.markerOption.overflowHide&&(a.x>s||a.x<0||a.y>o||a.y<0)&&(e.style.display="none"),e.style.left=a.x+n[0]+"px",e.style.top=a.y-n[1]+"px"}}init(){let{element:e}=this.markerOption;const{color:n,anchor:r}=this.markerOption;if(!e){e=is("div"),this.markerOption.element=e;const i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"display","block"),i.setAttributeNS(null,"height","48px"),i.setAttributeNS(null,"width","48px"),i.setAttributeNS(null,"viewBox","0 0 1024 1024");const a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),a.setAttributeNS(null,"fill",n),i.appendChild(a),e.appendChild(i)}Md(e,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(i=>{var a,o;const s=((a=this.markerOption)===null||a===void 0?void 0:a.style)&&((o=this.markerOption)===null||o===void 0?void 0:o.style[i]);e&&(e.style[i]=s)}),ZBe(e,r,"marker")}registerMarkerEvent(e){e.addEventListener("click",this.onMapClick),e.addEventListener("mousemove",this.eventHandle),e.addEventListener("click",this.eventHandle),e.addEventListener("mousedown",this.eventHandle),e.addEventListener("mouseup",this.eventHandle),e.addEventListener("dblclick",this.eventHandle),e.addEventListener("contextmenu",this.eventHandle),e.addEventListener("mouseover",this.eventHandle),e.addEventListener("mouseout",this.eventHandle),e.addEventListener("touchstart",this.eventHandle),e.addEventListener("touchend",this.eventHandle)}unRegisterMarkerEvent(){const e=this.getElement();e.removeEventListener("click",this.onMapClick),e.removeEventListener("mousemove",this.eventHandle),e.removeEventListener("click",this.eventHandle),e.removeEventListener("mousedown",this.eventHandle),e.removeEventListener("mouseup",this.eventHandle),e.removeEventListener("dblclick",this.eventHandle),e.removeEventListener("contextmenu",this.eventHandle),e.removeEventListener("mouseover",this.eventHandle),e.removeEventListener("mouseout",this.eventHandle),e.removeEventListener("touchstart",this.eventHandle),e.removeEventListener("touchend",this.eventHandle)}polyfillEvent(e){!this.mapsService||this.mapsService.getType()!=="amap"||sFe()||(e.type==="touchstart"&&(this.touchStartTime=Date.now()),e.type==="touchend"&&Date.now()-this.touchStartTime<300&&this.emit("click",{target:e,data:this.markerOption.extData,lngLat:this.lngLat}))}addDragHandler(e){return null}onUp(e){throw new Error("Method not implemented.")}};const{merge:hjt}=gs;class Bhn extends ku.EventEmitter{constructor(e){var n;super(),Z(this,"markers",[]),Z(this,"markerLayerOption",void 0),Z(this,"clusterIndex",void 0),Z(this,"points",[]),Z(this,"clusterMarkers",[]),Z(this,"mapsService",void 0),Z(this,"scene",void 0),Z(this,"zoom",void 0),Z(this,"bbox",void 0),Z(this,"inited",void 0),Z(this,"containerSize",void 0),this.markerLayerOption=hjt(this.getDefault(),e),lFe(["update"],this),this.zoom=((n=this.markerLayerOption.clusterOption)===null||n===void 0?void 0:n.zoom)||-99}getDefault(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}addTo(e){return this.scene=e,this.mapsService=e.mapService,this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.mapsService.on("camerachange",this.setContainerSize.bind(this)),this.mapsService.on("viewchange",this.setContainerSize.bind(this)),this.addMarkers(),this.inited=!0,this}setContainerSize(){if(!this.mapsService)return;const e=this.mapsService.getContainer();this.containerSize={containerWidth:e?.scrollWidth||0,containerHeight:e?.scrollHeight||0,bounds:this.mapsService.getBounds()}}getContainerSize(){return this.containerSize}addMarker(e){const n=this.markerLayerOption.cluster;if(e.getMarkerLayerContainerSize=this.getContainerSize.bind(this),n&&(this.addPoint(e,this.markers.length),this.mapsService)){const r=this.mapsService.getZoom(),i=this.mapsService.getBounds();this.bbox=VM(i,.5),this.zoom=Math.floor(r),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(e)}removeMarker(e){this.markers.indexOf(e);const n=this.markers.indexOf(e);n>-1&&(this.markers.splice(n,1),this.markerLayerOption.cluster&&(this.removePoint(n),this.mapsService&&this.getClusterMarker(this.bbox,this.zoom)))}hide(){this.markers.map(e=>{e.getElement().style.opacity="0"}),this.clusterMarkers.map(e=>{e.getElement().style.opacity="0"})}show(){this.markers.map(e=>{e.getElement().style.opacity="1"}),this.clusterMarkers.map(e=>{e.getElement().style.opacity="1"})}getMarkers(){return this.markerLayerOption.cluster?this.clusterMarkers:this.markers}getOriginMarkers(){return this.markers}addMarkers(){this.getMarkers().forEach(e=>{e.addTo(this.scene)})}clear(){this.markers.forEach(e=>{e.remove()}),this.clusterMarkers.forEach(e=>{e.remove()}),this.markers=[],this.points=[],this.clusterMarkers=[]}destroy(){this.clear(),this.removeAllListeners(),this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("camerachange",this.setContainerSize.bind(this)),this.mapsService.off("viewchange",this.setContainerSize.bind(this))}addPoint(e,n){const{lng:r,lat:i}=e.getLnglat(),a={geometry:{type:"Point",coordinates:[r,i]},properties:ze(ze({},e.getExtData()),{},{marker_id:n})};this.points.push(a),this.clusterIndex&&this.clusterIndex.load(this.points)}removePoint(e){const n=this.points.findIndex(r=>r.properties.marker_id===e);n>-1&&this.points.splice(n,1),this.clusterIndex&&this.clusterIndex.load(this.points)}initCluster(){if(!this.markerLayerOption.cluster)return;const{radius:e,minZoom:n=0,maxZoom:r}=this.markerLayerOption.clusterOption;this.clusterIndex=new i4e({radius:e,minZoom:n,maxZoom:r}),this.clusterIndex.load(this.points)}getClusterMarker(e,n){const r=e[0].concat(e[1]),i=this.clusterIndex.getClusters(r,n);this.clusterMarkers.forEach(a=>{a.remove()}),this.clusterMarkers=[],i.forEach(a=>{var o;const{field:s,method:l}=this.markerLayerOption.clusterOption;if((o=a.properties)!==null&&o!==void 0&&o.cluster_id){var c;const f=this.getLeaves((c=a.properties)===null||c===void 0?void 0:c.cluster_id);if(a.properties.clusterData=f,s&&l){const h=f?.map(v=>({[s]:v.properties[s]})),d=S5(h,s),p=vFe(l,d),g="point_"+l;a.properties[g]=p.toFixed(2)}}const u=this.clusterMarker(a);this.clusterMarkers.push(u),u.addTo(this.scene)})}getLeaves(e,n=1/0,r=0){return e?this.clusterIndex.getLeaves(e,n,r):null}clusterMarker(e){const n=this.markerLayerOption.clusterOption,{element:r=this.generateElement.bind(this)}=n;return new fjt({element:r(e)}).setLnglat({lng:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]})}normalMarker(e){const n=e.properties.marker_id;return this.markers[n]}update(){if(!this.mapsService||this.markers.length===0)return;const e=this.mapsService.getZoom(),n=this.mapsService.getBounds();(!this.bbox||Math.abs(e-this.zoom)>=1||!Sne(this.bbox,n))&&(this.bbox=VM(n,.5),this.zoom=Math.floor(e),this.getClusterMarker(this.bbox,this.zoom))}generateElement(e){const n=is("div","l7-marker-cluster"),r=is("div","",n),i=is("span","",r),{field:a,method:o}=this.markerLayerOption.clusterOption;e.properties.point_count=e.properties.point_count||1;const s=a&&o?e.properties["point_"+o]||e.properties[a]:e.properties.point_count;return i.textContent=s,n}}window._iconfont_svg_string_3580659='<svg><symbol id="l7-icon-area1" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.064889 219.136l38.798223 466.261333a113.777778 113.777778 0 1 1-133.518223 145.237334H279.210667a113.777778 113.777778 0 1 1-60.302223-137.272889L697.856 227.555556A113.777778 113.777778 0 0 1 796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m577.592889-534.072889L269.198222 796.444444c4.152889 7.168 7.509333 14.791111 10.012445 22.812445h465.578666a114.119111 114.119111 0 0 1 65.479111-71.224889l-38.798222-466.261333a112.924444 112.924444 0 0 1-23.210666-7.964445zM796.444444 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-area" viewBox="0 0 1024 1024"><path d="M796.444444 56.888889a113.777778 113.777778 0 0 1 43.008 219.136l38.855112 466.261333a113.777778 113.777778 0 0 1-16.497778 224.540445L853.333333 967.111111a113.777778 113.777778 0 0 1-108.544-79.644444H279.210667a113.834667 113.834667 0 0 1-100.067556 79.36L170.666667 967.111111a113.777778 113.777778 0 0 1-17.066667-226.304l30.492444-351.175111a113.777778 113.777778 0 0 1 34.986667-218.680889L227.555556 170.666667a113.777778 113.777778 0 0 1 99.896888 59.221333l355.84-71.395556a113.777778 113.777778 0 0 1 104.675556-101.262222L796.444444 56.888889z m56.888889 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-682.666666 0a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m526.051555-582.314666L340.650667 296.903111a113.891556 113.891556 0 0 1-88.462223 98.645333l-30.947555 355.84c27.477333 13.653333 48.64 38.115556 58.026667 67.754667h465.521777a114.119111 114.119111 0 0 1 65.536-71.168l-38.855111-466.261333a113.948444 113.948444 0 0 1-74.752-56.206222zM227.555556 238.933333a45.511111 45.511111 0 1 0 0 91.022223 45.511111 45.511111 0 0 0 0-91.022223z m568.888888-113.777777a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-delete" viewBox="0 0 1024 1024"><path d="M705.422222 85.333333a34.133333 34.133333 0 0 1 34.133334 34.133334V227.555556h136.533333a34.133333 34.133333 0 0 1 0 68.266666h-25.543111l-24.348445 610.076445a34.133333 34.133333 0 0 1-34.133333 32.768H231.936a34.133333 34.133333 0 0 1-34.076444-32.768L173.340444 295.822222H147.911111a34.133333 34.133333 0 1 1 0-68.266666H284.444444V119.466667a34.133333 34.133333 0 0 1 34.133334-34.133334h386.844444zM241.720889 295.822222l22.983111 574.577778h494.535111l23.04-574.577778H241.720889zM671.288889 153.6H352.711111V227.555556h318.577778V153.6z"  ></path></symbol><symbol id="l7-icon-color" viewBox="0 0 1024 1024"><path d="M512 56.888889c9.841778 0 19.626667 0.341333 29.354667 0.910222 69.176889 4.437333 119.068444 62.577778 124.302222 131.072l0.455111 9.386667c0.739556 44.600889 15.303111 84.935111 44.999111 114.631111 27.022222 27.022222 62.805333 41.528889 102.570667 44.430222l12.060444 0.568889c72.476444 1.194667 135.793778 52.451556 140.458667 124.757333 1.137778 18.261333 1.251556 36.807111 0.170667 55.637334-13.198222 233.585778-211.399111 424.220444-445.326223 428.714666L512 967.111111a455.111111 455.111111 0 0 1-455.054222-464.156444c4.551111-233.927111 195.185778-432.128 428.771555-445.326223C494.535111 57.116444 503.296 56.888889 512 56.888889z m0 68.266667a385.706667 385.706667 0 0 0-22.414222 0.625777C291.726222 136.988444 129.080889 305.948444 125.155556 504.263111c-4.152889 212.366222 163.100444 387.185778 372.508444 394.353778l13.425778 0.227555 8.533333-0.113777c198.371556-3.811556 367.331556-166.456889 378.538667-364.373334a396.174222 396.174222 0 0 0-0.170667-47.331555c-1.991111-31.232-29.127111-56.604444-67.128889-60.472889l-8.248889-0.455111-14.051555-0.682667c-56.547556-4.209778-107.406222-25.884444-145.806222-64.284444-38.855111-38.798222-60.416-90.225778-64.284445-145.749334l-0.910222-21.333333c-2.901333-38.001778-28.785778-66.048-60.302222-68.096A433.891556 433.891556 0 0 0 512 125.155556zM438.044444 682.666667a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m-170.666666-227.555556a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z m142.222222-227.555555a68.266667 68.266667 0 1 1 0 136.533333 68.266667 68.266667 0 0 1 0-136.533333z"  ></path></symbol><symbol id="l7-icon-base-map" viewBox="0 0 1024 1024"><path d="M923.761778 115.029333A34.133333 34.133333 0 0 1 967.111111 147.911111v624.128a34.133333 34.133333 0 0 1-22.186667 32.028445l-278.755555 103.992888a34.133333 34.133333 0 0 1-23.665778 0.056889L381.724444 812.714667a34.133333 34.133333 0 0 0-23.665777 0.113777L102.968889 908.060444a34.133333 34.133333 0 0 1-45.738667-26.965333L56.888889 876.088889V251.960889a34.133333 34.133333 0 0 1 22.186667-32.028445l278.755555-103.992888a34.133333 34.133333 0 0 1 20.992-0.967112l266.183111 72.988445a34.133333 34.133333 0 0 0 18.204445 0zM403.911111 192.625778v555.576889l216.177778 79.075555V251.960889l-216.177778-59.335111z m-68.266667 4.380444L125.155556 275.569778v551.310222l210.432-78.506667V197.006222zM898.844444 192.853333l-210.545777 58.936889v575.089778l210.545777-78.563556V192.853333z"  ></path></symbol><symbol id="l7-icon-dot" viewBox="0 0 1024 1024"><path d="M341.333333 739.555556a113.777778 113.777778 0 0 1 8.533334 227.271111L341.333333 967.111111a113.777778 113.777778 0 0 1-8.533333-227.271111L341.333333 739.555556z m0 68.266666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM910.222222 341.333333a113.777778 113.777778 0 0 1 8.533334 227.271111L910.222222 568.888889a113.777778 113.777778 0 0 1-8.533333-227.271111L910.222222 341.333333z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM227.555556 56.888889a113.777778 113.777778 0 0 1 8.533333 227.271111L227.555556 284.444444a113.777778 113.777778 0 0 1-8.533334-227.271111L227.555556 56.888889z m0 68.266667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-display" viewBox="0 0 1024 1024"><path d="M512 170.666667c284.444444 0 455.111111 227.555556 455.111111 341.333333s-170.666667 341.333333-455.111111 341.333333-455.111111-227.555556-455.111111-341.333333 170.666667-341.333333 455.111111-341.333333z m0 68.266666C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 110.762667 178.574222 273.066667 386.844444 273.066667s386.844444-162.304 386.844444-273.066667c0-110.762667-178.574222-273.066667-386.844444-273.066667zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-enlarge" viewBox="0 0 1024 1024"><path d="M546.133333 147.911111l-0.056889 329.955556H876.088889a34.133333 34.133333 0 0 1 0 68.266666H546.076444v329.955556a34.133333 34.133333 0 0 1-68.266666 0V546.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h329.898667V147.911111a34.133333 34.133333 0 0 1 68.266666 0z"  ></path></symbol><symbol id="l7-icon-export-picture" viewBox="0 0 1024 1024"><path d="M883.873684 161.684211a32.336842 32.336842 0 0 1 32.336842 32.336842v582.063158a32.336842 32.336842 0 0 1-32.336842 32.336842H86.231579a32.336842 32.336842 0 0 1-32.336842-32.336842V194.021053a32.336842 32.336842 0 0 1 32.336842-32.336842h797.642105z m-32.336842 64.673684H118.568421v517.389473h170.792421a32.175158 32.175158 0 0 1 0.431158-0.646736l3.772632-4.473264 330.320842-330.374736a32.336842 32.336842 0 0 1 38.588631-5.389474l4.473263 3.018105 184.589474 147.725474V226.357895z m-202.428631 248.131368L379.850105 743.747368H851.536842v-107.304421l-202.428631-161.953684zM323.368421 323.368421a107.789474 107.789474 0 1 1 0 215.578947 107.789474 107.789474 0 0 1 0-215.578947z m0 64.673684a43.115789 43.115789 0 1 0 0 86.231579 43.115789 43.115789 0 0 0 0-86.231579z"  ></path></symbol><symbol id="l7-icon-exit-fullscreen" viewBox="0 0 1024 1024"><path d="M841.955556 591.644444a34.133333 34.133333 0 0 1 5.518222 67.811556l-5.518222 0.455111h-133.745778l192 192.056889a34.133333 34.133333 0 0 1-38.343111 55.182222l-5.176889-2.958222-4.721778-3.982222L659.911111 708.266667V841.955556a34.133333 34.133333 0 0 1-28.615111 33.678222L625.777778 876.088889a34.133333 34.133333 0 0 1-33.678222-28.615111L591.644444 841.955556V625.777778a34.133333 34.133333 0 0 1 28.615112-33.678222L625.777778 591.644444h216.177778z m-443.733334 0a34.133333 34.133333 0 0 1 33.678222 28.615112L432.355556 625.777778v216.177778a34.133333 34.133333 0 0 1-67.811556 5.518222L364.088889 841.955556v-133.745778l-192.056889 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L315.847111 659.911111H182.044444a34.133333 34.133333 0 0 1-33.678222-28.615111L147.911111 625.777778a34.133333 34.133333 0 0 1 28.615111-33.678222L182.044444 591.644444H398.222222zM167.310222 119.808l4.721778 3.982222L364.088889 315.847111V182.044444a34.133333 34.133333 0 0 1 28.615111-33.678222L398.222222 147.911111a34.133333 34.133333 0 0 1 33.678222 28.615111L432.355556 182.044444V398.222222a34.133333 34.133333 0 0 1-28.615112 33.678222L398.222222 432.355556H182.044444a34.133333 34.133333 0 0 1-5.518222-67.811556L182.044444 364.088889h133.802667L123.790222 172.032a34.133333 34.133333 0 0 1 43.52-52.224z m732.899556 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L708.266667 364.088889H841.955556a34.133333 34.133333 0 0 1 33.678222 28.615111L876.088889 398.222222a34.133333 34.133333 0 0 1-28.615111 33.678222L841.955556 432.355556H625.777778a34.133333 34.133333 0 0 1-33.678222-28.615112L591.644444 398.222222V182.044444a34.133333 34.133333 0 0 1 67.811556-5.518222l0.455111 5.518222v133.802667l192.056889-192.056889a34.133333 34.133333 0 0 1 48.241778 0z"  ></path></symbol><symbol id="l7-icon-line" viewBox="0 0 1024 1024"><path d="M853.333333 56.888889a113.777778 113.777778 0 0 1 8.533334 227.271111L853.333333 284.444444c-19.000889 0-36.864-4.664889-52.622222-12.856888l-529.123555 529.066666a113.777778 113.777778 0 0 1-92.387556 166.115556L170.666667 967.111111a113.777778 113.777778 0 0 1-8.533334-227.271111L170.666667 739.555556c19.000889 0 36.864 4.664889 52.622222 12.856888l529.123555-529.066666a113.777778 113.777778 0 0 1 92.387556-166.115556L853.333333 56.888889zM170.666667 807.822222a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m682.666666-682.666666a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-layer" viewBox="0 0 1024 1024"><path d="M767.089778 625.777778l180.167111 82.773333a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730667-420.977778 193.422222a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422222a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730667L256.853333 625.777778l81.749334 37.546666L172.771556 739.555556 512 895.374222 851.171556 739.555556l-165.831112-76.231112 81.749334-37.546666z m0-227.555556l180.167111 82.773334a34.133333 34.133333 0 0 1 4.892444 59.278222l-4.892444 2.730666-420.977778 193.422223a34.133333 34.133333 0 0 1-22.983111 1.991111l-5.575111-1.991111-420.977778-193.422223a34.133333 34.133333 0 0 1-4.892444-59.278222l4.892444-2.730666L256.853333 398.222222l81.749334 37.546667-165.831111 76.174222L512 667.818667l339.171556-155.875556-165.831112-76.174222L767.089778 398.222222zM497.720889 60.017778a34.133333 34.133333 0 0 1 28.558222 0l420.977778 193.422222a34.133333 34.133333 0 0 1 0 62.008889l-420.977778 193.422222a34.133333 34.133333 0 0 1-28.558222 0l-420.977778-193.422222a34.133333 34.133333 0 0 1 0-62.008889zM512 128.568889L172.771556 284.387556 512 440.263111l339.171556-155.875555L512 128.568889z"  ></path></symbol><symbol id="l7-icon-narrow" viewBox="0 0 1024 1024"><path d="M910.222222 512a34.133333 34.133333 0 0 1-34.133333 34.133333H147.911111a34.133333 34.133333 0 1 1 0-68.266666h728.177778a34.133333 34.133333 0 0 1 34.133333 34.133333z"  ></path></symbol><symbol id="l7-icon-fullscreen" viewBox="0 0 1024 1024"><path d="M645.176889 597.674667l4.721778 3.982222L841.955556 793.6l0.056888-133.688889a34.133333 34.133333 0 0 1 28.615112-33.678222L876.088889 625.777778a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 659.911111v216.177778a34.133333 34.133333 0 0 1-28.615111 33.678222L876.088889 910.222222h-216.177778a34.133333 34.133333 0 0 1-5.518222-67.811555l5.518222-0.455111h133.745778l-192-192.056889a34.133333 34.133333 0 0 1 43.52-52.224z m-222.833778 3.982222a34.133333 34.133333 0 0 1 3.982222 43.52l-3.982222 4.721778L230.286222 841.955556H364.088889a34.133333 34.133333 0 0 1 33.678222 28.615111L398.222222 876.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L364.088889 910.222222H147.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 876.088889v-216.177778a34.133333 34.133333 0 0 1 67.811555-5.518222l0.455111 5.518222-0.056888 133.745778 192.113777-192a34.133333 34.133333 0 0 1 48.241778 0zM364.088889 113.777778a34.133333 34.133333 0 0 1 5.518222 67.811555L364.088889 182.044444H230.343111l192 192.056889a34.133333 34.133333 0 0 1-43.52 52.224l-4.721778-3.982222-192.113777-192.056889L182.044444 364.088889a34.133333 34.133333 0 0 1-28.615111 33.678222L147.911111 398.222222a34.133333 34.133333 0 0 1-33.678222-28.615111L113.777778 364.088889V147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L147.911111 113.777778h216.177778z m512 0a34.133333 34.133333 0 0 1 33.678222 28.615111L910.222222 147.911111v216.177778a34.133333 34.133333 0 0 1-67.811555 5.518222L841.955556 364.088889l-0.056889-133.745778-192 192a34.133333 34.133333 0 0 1-52.224-43.52l3.982222-4.721778L793.6 182.044444H659.911111a34.133333 34.133333 0 0 1-33.678222-28.615111L625.777778 147.911111a34.133333 34.133333 0 0 1 28.615111-33.678222L659.911111 113.777778h216.177778z"  ></path></symbol><symbol id="l7-icon-hide" viewBox="0 0 1024 1024"><path d="M875.52 87.836444a34.133333 34.133333 0 0 1 7.281778 43.121778l-3.527111 5.006222-682.666667 796.444445a34.133333 34.133333 0 0 1-55.409778-39.367111l3.527111-5.006222 97.166223-113.379556C123.164444 697.969778 56.888889 582.940444 56.888889 512c0-113.777778 170.666667-341.333333 455.111111-341.333333a496.64 496.64 0 0 1 208.952889 45.112889l106.439111-124.188445a34.133333 34.133333 0 0 1 48.128-3.754667z m-38.684444 202.524445C921.031111 362.951111 967.111111 452.835556 967.111111 512c0 113.777778-170.666667 341.333333-455.111111 341.333333-50.631111 0-97.678222-7.224889-140.8-19.740444l50.232889-58.595556A417.393778 417.393778 0 0 0 512 785.066667c208.270222 0 386.844444-162.304 386.844444-273.066667 0-52.849778-40.675556-117.418667-105.813333-170.496l43.804445-51.2zM512 238.933333C303.729778 238.933333 125.155556 401.237333 125.155556 512c0 66.787556 64.853333 152.291556 162.133333 209.692444L377.173333 616.675556a170.666667 170.666667 0 0 1 217.713778-253.895112l78.620445-91.704888A432.924444 432.924444 0 0 0 512 238.933333z m166.684444 236.088889a170.666667 170.666667 0 0 1-177.664 207.303111l177.607112-207.303111zM512 409.6a102.4 102.4 0 0 0-88.746667 153.486222L548.864 416.426667A102.172444 102.172444 0 0 0 512 409.6z"  ></path></symbol><symbol id="l7-icon-rectangle" viewBox="0 0 1024 1024"><path d="M170.666667 56.888889a113.777778 113.777778 0 0 1 108.544 79.644444H853.333333a34.133333 34.133333 0 0 1 33.678223 28.615111L887.466667 170.666667v574.122666a113.777778 113.777778 0 1 1-142.677334 142.734223L170.666667 887.466667a34.133333 34.133333 0 0 1-33.678223-28.615111L136.533333 853.333333V279.210667A113.777778 113.777778 0 0 1 170.666667 56.888889z m682.666666 750.933333a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z m-34.133333-603.022222H279.210667a114.062222 114.062222 0 0 1-74.353778 74.410667L204.8 819.2h539.989333a114.062222 114.062222 0 0 1 74.410667-74.410667V204.8zM170.666667 125.155556a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-ranging" viewBox="0 0 1024 1024"><path d="M723.171556 50.403556l250.424888 250.424888a31.061333 31.061333 0 0 1 0 43.918223L344.746667 973.596444a31.061333 31.061333 0 0 1-43.918223 0L50.403556 723.171556a31.061333 31.061333 0 0 1 0-43.918223L679.253333 50.403556a31.061333 31.061333 0 0 1 43.918223 0z m-21.959112 74.524444l-39.765333 39.822222 98.986667 98.872889a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222 62.179556 62.122667a34.133333 34.133333 0 0 1-44.088889 51.882667L563.2 387.242667 501.077333 325.063111 437.191111 388.949333l98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-63.886222 63.886222L387.242667 563.2a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.584-62.122667-62.179556-63.886222 63.886222 98.986667 98.929778a34.133333 34.133333 0 0 1-44.088889 51.882667l-4.209778-3.640889-98.929778-98.929778-39.765333 39.822222 197.802667 197.745778 576.284444-576.284444-197.802667-197.745778z"  ></path></symbol><symbol id="l7-icon-reposition" viewBox="0 0 1024 1024"><path d="M512 56.888889a34.133333 34.133333 0 0 1 34.133333 34.133333v24.177778A398.336 398.336 0 0 1 908.856889 477.866667h24.177778a34.133333 34.133333 0 0 1 0 68.266666h-24.177778A398.336 398.336 0 0 1 546.133333 908.856889L546.133333 932.977778a34.133333 34.133333 0 0 1-68.266666 0v-24.177778A398.336 398.336 0 0 1 115.2 546.133333L91.022222 546.133333a34.133333 34.133333 0 1 1 0-68.266666h24.177778A398.336 398.336 0 0 1 477.866667 115.2V91.022222A34.133333 34.133333 0 0 1 512 56.888889z m34.190222 126.862222L546.133333 193.422222a34.133333 34.133333 0 1 1-68.266666 0v-9.671111A330.069333 330.069333 0 0 0 183.751111 477.866667h9.671111a34.133333 34.133333 0 1 1 0 68.266666l-9.671111 0.056889A330.069333 330.069333 0 0 0 477.866667 840.248889V830.577778a34.133333 34.133333 0 0 1 68.266666 0l0.056889 9.671111A330.069333 330.069333 0 0 0 840.248889 546.133333L830.577778 546.133333a34.133333 34.133333 0 0 1 0-68.266666h9.671111A330.069333 330.069333 0 0 0 546.133333 183.751111zM512 341.333333a170.666667 170.666667 0 1 1 0 341.333334 170.666667 170.666667 0 0 1 0-341.333334z m0 68.266667a102.4 102.4 0 1 0 0 204.8 102.4 102.4 0 0 0 0-204.8z"  ></path></symbol><symbol id="l7-icon-round" viewBox="0 0 1024 1024"><path d="M512 56.888889a455.111111 455.111111 0 0 1 391.395556 687.502222 113.777778 113.777778 0 0 1-159.061334 158.890667A455.111111 455.111111 0 0 1 120.604444 279.608889 113.777778 113.777778 0 0 1 279.608889 120.604444 452.835556 452.835556 0 0 1 512 56.888889z m0 68.266667a384.910222 384.910222 0 0 0-191.715556 50.744888A113.777778 113.777778 0 0 1 175.957333 320.284444a386.844444 386.844444 0 0 0 527.815111 527.758223 113.777778 113.777778 0 0 1 144.270223-144.440889A386.844444 386.844444 0 0 0 512 125.155556z m299.406222 640.739555a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222zM212.593778 167.082667a45.511111 45.511111 0 1 0 0 91.022222 45.511111 45.511111 0 0 0 0-91.022222z"  ></path></symbol><symbol id="l7-icon-guanbi" viewBox="0 0 1024 1024"><path d="M576 512l277.333333 277.333333-64 64-277.333333-277.333333L234.666667 853.333333 170.666667 789.333333l277.333333-277.333333L170.666667 234.666667 234.666667 170.666667l277.333333 277.333333L789.333333 170.666667 853.333333 234.666667 576 512z"  ></path></symbol></svg>',(function(t){try{let c=function(){s||(s=!0,a())},u=function(){try{o.documentElement.doScroll("left")}catch{return void setTimeout(u,50)}c()};var n=(n=document.getElementsByTagName("script"))[n.length-1],e=n.getAttribute("data-injectcss"),n=n.getAttribute("data-disable-injectsvg");if(!n){var r,i,a,o,s,l=function(f,h){h.parentNode.insertBefore(f,h)};if(e&&!t.__iconfont__svg__cssinject__){t.__iconfont__svg__cssinject__=!0;try{document.write("<style>.svgfont {display: inline-block;width: 1em;height: 1em;fill: currentColor;vertical-align: -0.1em;font-size:16px;}</style>")}catch(f){console&&console.log(f)}}r=function(){var f,h=document.createElement("div");h.innerHTML=t._iconfont_svg_string_3580659,(h=h.getElementsByTagName("svg")[0])&&(h.setAttribute("aria-hidden","true"),h.style.position="absolute",h.style.width=0,h.style.height=0,h.style.overflow="hidden",h=h,(f=document.body).firstChild?l(h,f.firstChild):f.appendChild(h))},document.addEventListener?~["complete","loaded","interactive"].indexOf(document.readyState)?setTimeout(r,0):(i=function(){document.removeEventListener("DOMContentLoaded",i,!1),r()},document.addEventListener("DOMContentLoaded",i,!1)):document.attachEvent&&(a=r,o=t.document,s=!1,u(),o.onreadystatechange=function(){o.readyState=="complete"&&(o.onreadystatechange=null,c())})}}catch{}})(window);class QM extends Ane{constructor(e){super(),Z(this,"controlOption",void 0),Z(this,"container",void 0),Z(this,"isShow",void 0),Z(this,"sceneContainer",void 0),Z(this,"scene",void 0),Z(this,"mapsService",void 0),Z(this,"renderService",void 0),Z(this,"layerService",void 0),Z(this,"controlService",void 0),Z(this,"configService",void 0),QM.controlCount++,this.controlOption=ze(ze({},this.getDefault(e)),e||{})}getOptions(){return this.controlOption}setOptions(e){const n=this.getDefault(e);Object.entries(e).forEach(([r,i])=>{i===void 0&&(e[r]=n[r])}),"position"in e&&this.setPosition(e.position),"className"in e&&this.setClassName(e.className),"style"in e&&this.setStyle(e.style),this.controlOption=ze(ze({},this.controlOption),e)}addTo(e){this.mapsService=e.mapService,this.renderService=e.rendererService,this.layerService=e.layerService,this.controlService=e.controlService,this.configService=e.globalConfigService,this.scene=e.sceneService,this.sceneContainer=e,this.isShow=!0,this.container=this.onAdd(),Md(this.container,"l7-control");const{className:n,style:r}=this.controlOption;return n&&this.setClassName(n),r&&this.setStyle(r),this.insertContainer(),this.emit("add",this),this}remove(){if(!this.mapsService)return this;Ip(this.container),this.onRemove(),this.emit("remove",this)}onAdd(){return is("div")}onRemove(){}show(){const e=this.container;Mx(e,"l7-control--hide"),this.isShow=!0,this.emit("show",this)}hide(){const e=this.container;Md(e,"l7-control--hide"),this.isShow=!1,this.emit("hide",this)}getDefault(e){return{position:GB.TOPRIGHT,name:`${QM.controlCount}`}}getContainer(){return this.container}getIsShow(){return this.isShow}_refocusOnMap(e){if(this.mapsService&&e&&e.screenX>0&&e.screenY>0){const n=this.mapsService.getContainer();n!==null&&n.focus()}}setPosition(e=GB.TOPLEFT){const n=this.controlService;return n&&n.removeControl(this),this.controlOption.position=e,n&&n.addControl(this,this.sceneContainer),this}setClassName(e){const n=this.container,{className:r}=this.controlOption;r&&Mx(n,r),e&&Md(n,e)}setStyle(e){const n=this.container;e?n.setAttribute("style",e):n.removeAttribute("style")}insertContainer(){const e=this.controlOption.position,n=this.container;if(e instanceof Element)e.appendChild(n);else{const r=this.controlService.controlCorners[e];["bottomleft","bottomright","righttop","rightbottom"].includes(e)?r.insertBefore(n,r.firstChild):r.appendChild(n)}}checkUpdateOption(e,n){return n.some(r=>r in e)}}Z(QM,"controlCount",0);class ZB extends ku.EventEmitter{get buttonRect(){return this.button.getBoundingClientRect()}constructor(e,n){super(),Z(this,"popperDOM",void 0),Z(this,"contentDOM",void 0),Z(this,"button",void 0),Z(this,"option",void 0),Z(this,"isShow",!1),Z(this,"content",void 0),Z(this,"timeout",null),Z(this,"show",()=>this.isShow||!this.contentDOM.innerHTML?this:(this.resetPopperPosition(),Mx(this.popperDOM,"l7-popper-hide"),this.isShow=!0,this.option.unique&&ZB.conflictPopperList.forEach(r=>{r!==this&&r.isShow&&r.hide()}),this.emit("show"),window.addEventListener("pointerdown",this.onPopperUnClick),this)),Z(this,"hide",()=>this.isShow?(Md(this.popperDOM,"l7-popper-hide"),this.isShow=!1,this.emit("hide"),window.removeEventListener("pointerdown",this.onPopperUnClick),this):this),Z(this,"setHideTimeout",()=>{this.timeout||(this.timeout=window.setTimeout(()=>{this.isShow&&(this.hide(),this.timeout=null)},300))}),Z(this,"clearHideTimeout",()=>{this.timeout&&(window.clearTimeout(this.timeout),this.timeout=null)}),Z(this,"onBtnClick",()=>{this.isShow?this.hide():this.show()}),Z(this,"onPopperUnClick",r=>{oFe(r.target,[".l7-button-control",".l7-popper-content"])||this.hide()}),Z(this,"onBtnMouseLeave",()=>{this.setHideTimeout()}),Z(this,"onBtnMouseMove",()=>{this.clearHideTimeout(),!this.isShow&&this.show()}),this.button=e,this.option=n,this.init(),n.unique&&ZB.conflictPopperList.push(this)}getPopperDOM(){return this.popperDOM}getIsShow(){return this.isShow}getContent(){return this.content}setContent(e){typeof e=="string"?this.contentDOM.innerHTML=e:e instanceof HTMLElement&&(E5(this.contentDOM),this.contentDOM.appendChild(e)),this.content=e}init(){const{trigger:e}=this.option;this.popperDOM=this.createPopper(),e==="click"?this.button.addEventListener("click",this.onBtnClick):(this.button.addEventListener("mousemove",this.onBtnMouseMove),this.button.addEventListener("mouseleave",this.onBtnMouseLeave),this.popperDOM.addEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.addEventListener("mouseleave",this.onBtnMouseLeave))}destroy(){this.button.removeEventListener("click",this.onBtnClick),this.button.removeEventListener("mousemove",this.onBtnMouseMove),this.button.removeEventListener("mousemove",this.onBtnMouseLeave),this.popperDOM.removeEventListener("mousemove",this.onBtnMouseMove),this.popperDOM.removeEventListener("mouseleave",this.onBtnMouseLeave),Ip(this.popperDOM)}resetPopperPosition(){const e={},{container:n,offset:r=[0,0],placement:i}=this.option,[a,o]=r,s=this.button.getBoundingClientRect(),l=n.getBoundingClientRect(),{left:c,right:u,top:f,bottom:h}=iFe(s,l);let d=!1,p=!1;/^(left|right)/.test(i)?(i.includes("left")?e.right=`${s.width+u}px`:i.includes("right")&&(e.left=`${s.width+c}px`),i.includes("start")?e.top=`${f}px`:i.includes("end")?e.bottom=`${h}px`:(e.top=`${f+s.height/2}px`,p=!0,e.transform=`translate(${a}px, calc(${o}px - 50%))`)):/^(top|bottom)/.test(i)&&(i.includes("top")?e.bottom=`${s.height+h}px`:i.includes("bottom")&&(e.top=`${s.height+f}px`),i.includes("start")?e.left=`${c}px`:i.includes("end")?e.right=`${u}px`:(e.left=`${c+s.width/2}px`,d=!0,e.transform=`translate(calc(${a}px - 50%), ${o}px)`)),e.transform=`translate(calc(${a}px - ${d?"50%":"0%"}), calc(${o}px - ${p?"50%":"0%"})`;const g=i.split("-");g.length&&Md(this.popperDOM,g.map(v=>`l7-popper-${v}`).join(" ")),xne(this.popperDOM,rFe(e))}createPopper(){const{container:e,className:n="",content:r}=this.option,i=is("div",`l7-popper l7-popper-hide ${n}`),a=is("div","l7-popper-content"),o=is("div","l7-popper-arrow");return i.appendChild(a),i.appendChild(o),e.appendChild(i),this.popperDOM=i,this.contentDOM=a,r&&this.setContent(r),i}}Z(ZB,"conflictPopperList",[]);const djt=t=>{const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.classList.add("l7-iconfont"),e.setAttribute("aria-hidden","true");const n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttributeNS("http://www.w3.org/1999/xlink","href",`#${t}`),e.appendChild(n),e},E_e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],_y=(()=>{if(typeof document>"u")return!1;const t=E_e[0],e={};for(const n of E_e)if(n?.[1]in document){for(const[i,a]of n.entries())e[t[i]]=a;return e}return!1})(),x_e={change:_y.fullscreenchange,error:_y.fullscreenerror};let md={request(t=document.documentElement,e){return new Promise((n,r)=>{const i=()=>{md.off("change",i),n()};md.on("change",i);const a=t[_y.requestFullscreen](e);a instanceof Promise&&a.then(i).catch(r)})},exit(){return new Promise((t,e)=>{if(!md.isFullscreen){t();return}const n=()=>{md.off("change",n),t()};md.on("change",n);const r=document[_y.exitFullscreen]();r instanceof Promise&&r.then(n).catch(e)})},toggle(t,e){return md.isFullscreen?md.exit():md.request(t,e)},onchange(t){md.on("change",t)},onerror(t){md.on("error",t)},on(t,e){const n=x_e[t];n&&document.addEventListener(n,e,!1)},off(t,e){const n=x_e[t];n&&document.removeEventListener(n,e,!1)},raw:_y};Object.defineProperties(md,{isFullscreen:{get:()=>!!document[_y.fullscreenElement]},element:{enumerable:!0,get:()=>{var t;return(t=document[_y.fullscreenElement])!==null&&t!==void 0?t:void 0}},isEnabled:{enumerable:!0,get:()=>!!document[_y.fullscreenEnabled]}});_y||(md={isEnabled:!1});const Fhn=md;class pjt extends QM{getDefault(){return{position:GB.BOTTOMLEFT,name:"logo",href:"https://l7.antv.antgroup.com/",img:"https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*GRb1TKp4HcMAAAAAAAAAAAAAARQnAQ"}}onAdd(){const e=is("div","l7-control-logo");return this.setLogoContent(e),e}onRemove(){return null}setOptions(e){super.setOptions(e),this.checkUpdateOption(e,["img","href"])&&(E5(this.container),this.setLogoContent(this.container))}setLogoContent(e){const{href:n,img:r}=this.controlOption,i=is("img");if(i.setAttribute("src",r),i.setAttribute("aria-label","AntV logo"),aFe(i),n){const a=is("a","l7-control-logo-link");a.target="_blank",a.href=n,a.rel="noopener nofollow",a.setAttribute("rel","noopener nofollow"),a.appendChild(i),e.appendChild(a)}else e.appendChild(i)}}class gjt{constructor(){Z(this,"mapService",void 0),Z(this,"fontService",void 0)}apply(e,{styleAttributeService:n,mapService:r,fontService:i}){var a=this;this.mapService=r,this.fontService=i,e.hooks.init.tapPromise("DataMappingPlugin",kt(function*(){e.log(Lc.MappingStart,Mu.INIT),a.generateMaping(e,{styleAttributeService:n}),e.log(Lc.MappingEnd,Mu.INIT)})),e.hooks.beforeRenderData.tapPromise("DataMappingPlugin",(function(){var o=kt(function*(s){if(!s)return s;e.dataState.dataMappingNeedUpdate=!1,e.log(Lc.MappingStart,Mu.UPDATE);const l=a.generateMaping(e,{styleAttributeService:n});return e.log(Lc.MappingEnd,Mu.UPDATE),l});return function(s){return o.apply(this,arguments)}})()),e.hooks.beforeRender.tap("DataMappingPlugin",()=>{const o=e.getSource();if(e.layerModelNeedUpdate||!o||!o.inited)return;const s=n.getLayerStyleAttributes()||[],l=n.getLayerStyleAttribute("filter"),{dataArray:c}=o.data;if(Array.isArray(c)&&c.length===0)return;const u=s.filter(h=>h.needRemapping);let f=c;if(l!=null&&l.needRemapping&&l!==null&&l!==void 0&&l.scale&&(f=c.filter(h=>this.applyAttributeMapping(l,h)[0])),u.length){const h=this.mapping(e,u,f,e.getEncodedData());e.setEncodedData(h)}})}generateMaping(e,{styleAttributeService:n}){const r=n.getLayerStyleAttributes()||[],i=n.getLayerStyleAttribute("filter"),{dataArray:a}=e.getSource().data;let o=a;i!=null&&i.scale&&(o=a.filter(l=>this.applyAttributeMapping(i,l)[0])),o=e.processData(o);const s=this.mapping(e,r,o,void 0);return e.setEncodedData(s),e.emit("dataUpdate",null),!0}mapping(e,n,r,i){const a=n.filter(s=>s.scale!==void 0).filter(s=>s.name!=="filter"),o=r.map((s,l)=>{const c=i?i[l]:{},u=ze({id:s._id,coordinates:s.coordinates},c);return a.forEach(f=>{let h=this.applyAttributeMapping(f,s);(f.name==="color"||f.name==="stroke")&&(h=h.map(d=>Xo(d))),u[f.name]=Array.isArray(h)&&h.length===1?h[0]:h,f.name==="shape"&&(u.shape=this.fontService.getIconFontKey(u[f.name]))}),u});return n.forEach(s=>{s.needRemapping=!1}),this.adjustData2SimpleCoordinates(o),o}adjustData2SimpleCoordinates(e){e.length>0&&this.mapService.version==="SIMPLE"&&e.map(n=>{n.simpleCoordinate||(n.coordinates=this.unProjectCoordinates(n.coordinates),n.simpleCoordinate=!0)})}unProjectCoordinates(e){if(typeof e[0]=="number")return this.mapService.simpleMapCoord.unproject(e);if(e[0]&&e[0][0]instanceof Array){const n=[];return e.map(r=>{const i=[];r.map(a=>{i.push(this.mapService.simpleMapCoord.unproject(a))}),n.push(i)}),n}else{const n=[];return e.map(r=>{n.push(this.mapService.simpleMapCoord.unproject(r))}),n}}applyAttributeMapping(e,n){var r;if(!e.scale)return[];const i=(e==null||(r=e.scale)===null||r===void 0?void 0:r.scalers)||[],a=[];return i.forEach(({field:s})=>{var l;(n.hasOwnProperty(s)||((l=e.scale)===null||l===void 0?void 0:l.type)==="variable")&&a.push(n[s])}),e.mapping?e.mapping(a):[]}getArrowPoints(e,n){const r=[n[0]-e[0],n[1]-e[1]],i=pFt(r);return[e[0]+i[0]*1e-4,e[1]+i[1]*1e-4]}}class vjt{constructor(){Z(this,"mapService",void 0)}apply(e){var n=this;this.mapService=e.getContainer().mapService,e.hooks.init.tapPromise("DataSourcePlugin",kt(function*(){e.log(Lc.SourceInitStart,Mu.INIT);let r=e.getSource();if(!r){const{data:i,options:a}=e.sourceOption||e.defaultSourceConfig;r=new lw(i,a),e.setSource(r)}r.inited?(n.updateClusterData(e),e.log(Lc.SourceInitEnd,Mu.INIT)):yield new Promise(i=>{r.on("update",a=>{a.type==="inited"&&(n.updateClusterData(e),e.log(Lc.SourceInitEnd,Mu.INIT)),i(null)})})})),e.hooks.beforeRenderData.tapPromise("DataSourcePlugin",kt(function*(){const r=n.updateClusterData(e),i=e.dataState.dataSourceNeedUpdate;return e.dataState.dataSourceNeedUpdate=!1,r||i}))}updateClusterData(e){if(e.isTileLayer||e.tileLayer||!e.getSource())return!1;const n=e.getSource(),r=n.cluster,{zoom:i=0}=n.clusterOptions,a=this.mapService.getZoom()-1,o=e.dataState.dataSourceNeedUpdate;return r&&o&&n.updateClusterData(Math.floor(a)),r&&Math.abs(e.clusterZoom-a)>=1?(i!==Math.floor(a)&&n.updateClusterData(Math.floor(a)),e.clusterZoom=a,!0):!1}}function S_e(t,e){let n,r;for(const i of t)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}function mjt(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function yjt(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return mjt((n-r/e)*e,o,i,a,s)}}function Nne(t){return function(){return t}}function _jt(t,e){return function(n){return t+n*e}}function bjt(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ejt(t){return(t=+t)==1?l4e:function(e,n){return n-e?bjt(e,n,t):Nne(isNaN(e)?n:e)}}function l4e(t,e){var n=e-t;return n?_jt(t,n):Nne(isNaN(t)?e:t)}const T_e=(function t(e){var n=Ejt(e);function r(i,a){var o=n((i=UB(i)).r,(a=UB(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),c=l4e(i.opacity,a.opacity);return function(u){return i.r=o(u),i.g=s(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function xjt(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),a=new Array(n),o,s;for(o=0;o<n;++o)s=UB(e[o]),r[o]=s.r||0,i[o]=s.g||0,a[o]=s.b||0;return r=t(r),i=t(i),a=t(a),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=a(l),s+""}}}var Sjt=xjt(yjt);function Tjt(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=t[i]*(1-a)+e[i]*a;return r}}function Ajt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function wjt(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=Ine(t[o],e[o]);for(;o<n;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Ojt(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function KB(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Cjt(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ine(t[i],e[i]):r[i]=e[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var yZ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,WW=new RegExp(yZ.source,"g");function Rjt(t){return function(){return t}}function Mjt(t){return function(e){return t(e)+""}}function Pjt(t,e){var n=yZ.lastIndex=WW.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(t=t+"",e=e+"";(r=yZ.exec(t))&&(i=WW.exec(e));)(a=i.index)>n&&(a=e.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:KB(r,i)})),n=WW.lastIndex;return n<e.length&&(a=e.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Mjt(l[0].x):Rjt(e):(e=l.length,function(c){for(var u=0,f;u<e;++u)s[(f=l[u]).i]=f.x(c);return s.join("")})}function Ine(t,e){var n=typeof e,r;return e==null||n==="boolean"?Nne(e):(n==="number"?KB:n==="string"?(r=Rx(e))?(e=r,T_e):Pjt:e instanceof Rx?T_e:e instanceof Date?Ojt:Ajt(e)?Tjt:Array.isArray(e)?wjt:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Cjt:KB)(t,e)}function Njt(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Lne(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function c4e(t){return t.length===1&&(t=Ijt(t)),{left:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(r==null&&(r=0),i==null&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function Ijt(t){return function(e,n){return Lne(t(e),n)}}var Ljt=c4e(Lne),C5=Ljt.right;function kjt(t){return t===null?NaN:+t}var _Z=Math.sqrt(50),bZ=Math.sqrt(10),EZ=Math.sqrt(2);function u4e(t,e,n){var r,i=-1,a,o,s;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((r=e<t)&&(a=t,t=e,e=a),(s=Mk(t,e,n))===0||!isFinite(s))return[];if(s>0)for(t=Math.ceil(t/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-t+1));++i<a;)o[i]=(t+i)*s;else for(t=Math.floor(t*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(t-e+1));++i<a;)o[i]=(t-i)/s;return r&&o.reverse(),o}function Mk(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=_Z?10:a>=bZ?5:a>=EZ?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=_Z?10:a>=bZ?5:a>=EZ?2:1)}function xZ(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=_Z?i*=10:a>=bZ?i*=5:a>=EZ&&(i*=2),e<t?-i:i}function Djt(t,e,n){if(n==null&&(n=kjt),!!(r=t.length)){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t),s=+n(t[a+1],a+1,t);return o+(s-o)*(i-a)}}function mb(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function f4e(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t);break}return this}var Ep="$";function QB(){}QB.prototype=JB.prototype={constructor:QB,has:function(t){return Ep+t in this},get:function(t){return this[Ep+t]},set:function(t,e){return this[Ep+t]=e,this},remove:function(t){var e=Ep+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Ep&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Ep&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Ep&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Ep&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Ep&&++t;return t},empty:function(){for(var t in this)if(t[0]===Ep)return!1;return!0},each:function(t){for(var e in this)e[0]===Ep&&t(this[e],e.slice(1),this)}};function JB(t,e){var n=new QB;if(t instanceof QB)t.each(function(s,l){n.set(l,s)});else if(Array.isArray(t)){var r=-1,i=t.length,a;if(e==null)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(a=t[r],r,t),a)}else if(t)for(var o in t)n.set(o,t[o]);return n}function A_e(){}var AE=JB.prototype;A_e.prototype={constructor:A_e,has:AE.has,add:function(t){return t+="",this[Ep+t]=t,this},remove:AE.remove,clear:AE.clear,values:AE.keys,size:AE.size,empty:AE.empty,each:AE.each};var h4e=Array.prototype,d4e=h4e.map,kx=h4e.slice,w_e={name:"implicit"};function eF(){var t=JB(),e=[],n=[],r=w_e;function i(a){var o=a+"",s=t.get(o);if(!s){if(r!==w_e)return r;t.set(o,s=e.push(a))}return n[(s-1)%n.length]}return i.domain=function(a){if(!arguments.length)return e.slice();e=[],t=JB();for(var o=-1,s=a.length,l,c;++o<s;)t.has(c=(l=a[o])+"")||t.set(c,e.push(l));return i},i.range=function(a){return arguments.length?(n=kx.call(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return eF(e,n).unknown(r)},mb.apply(i,arguments),i}function Bjt(t){return function(){return t}}function Fjt(t){return+t}var O_e=[0,1];function sf(t){return t}function SZ(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Bjt(isNaN(e)?NaN:.5)}function C_e(t){var e=t[0],n=t[t.length-1],r;return e>n&&(r=e,e=n,n=r),function(i){return Math.max(e,Math.min(n,i))}}function Ujt(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=SZ(i,r),a=n(o,a)):(r=SZ(r,i),a=n(a,o)),function(s){return a(r(s))}}function jjt(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=SZ(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(s){var l=C5(t,s,1,r)-1;return a[l](i[l](s))}}function R5(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function kne(){var t=O_e,e=O_e,n=Ine,r,i,a,o=sf,s,l,c;function u(){return s=Math.min(t.length,e.length)>2?jjt:Ujt,l=c=null,f}function f(h){return isNaN(h=+h)?a:(l||(l=s(t.map(r),e,n)))(r(o(h)))}return f.invert=function(h){return o(i((c||(c=s(e,t.map(r),KB)))(h)))},f.domain=function(h){return arguments.length?(t=d4e.call(h,Fjt),o===sf||(o=C_e(t)),u()):t.slice()},f.range=function(h){return arguments.length?(e=kx.call(h),u()):e.slice()},f.rangeRound=function(h){return e=kx.call(h),n=Njt,u()},f.clamp=function(h){return arguments.length?(o=h?C_e(t):sf,f):o!==sf},f.interpolate=function(h){return arguments.length?(n=h,u()):n},f.unknown=function(h){return arguments.length?(a=h,f):a},function(h,d){return r=h,i=d,u()}}function p4e(t,e){return kne()(t,e)}function zjt(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function tF(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function cw(t){return t=tF(Math.abs(t)),t?t[1]:NaN}function $jt(t,e){return function(n,r){for(var i=n.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[o=(o+1)%t.length];return a.reverse().join(e)}}function Hjt(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Gjt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function nF(t){if(!(e=Gjt.exec(t)))throw new Error("invalid format: "+t);var e;return new Dne({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}nF.prototype=Dne.prototype;function Dne(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Dne.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wjt(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var g4e;function Vjt(t,e){var n=tF(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(g4e=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+tF(t,Math.max(0,e+a-1))[0]}function R_e(t,e){var n=tF(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const M_e={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:zjt,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return R_e(t*100,e)},r:R_e,s:Vjt,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function P_e(t){return t}var N_e=Array.prototype.map,I_e=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yjt(t){var e=t.grouping===void 0||t.thousands===void 0?P_e:$jt(N_e.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal+"",a=t.numerals===void 0?P_e:Hjt(N_e.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",s=t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(f){f=nF(f);var h=f.fill,d=f.align,p=f.sign,g=f.symbol,v=f.zero,y=f.width,_=f.comma,E=f.precision,x=f.trim,T=f.type;T==="n"?(_=!0,T="g"):M_e[T]||(E===void 0&&(E=12),x=!0,T="g"),(v||h==="0"&&d==="=")&&(v=!0,h="0",d="=");var S=g==="$"?n:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",w=g==="$"?r:/[%p]/.test(T)?o:"",C=M_e[T],D=/[defgprs%]/.test(T);E=E===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,E)):Math.max(0,Math.min(20,E));function L(B){var I=S,U=w,$,X,N;if(T==="c")U=C(B)+U,B="";else{B=+B;var M=B<0||1/B<0;if(B=isNaN(B)?l:C(Math.abs(B),E),x&&(B=Wjt(B)),M&&+B==0&&p!=="+"&&(M=!1),I=(M?p==="("?p:s:p==="-"||p==="("?"":p)+I,U=(T==="s"?I_e[8+g4e/3]:"")+U+(M&&p==="("?")":""),D){for($=-1,X=B.length;++$<X;)if(N=B.charCodeAt($),48>N||N>57){U=(N===46?i+B.slice($+1):B.slice($))+U,B=B.slice(0,$);break}}}_&&!v&&(B=e(B,1/0));var k=I.length+B.length+U.length,z=k<y?new Array(y-k+1).join(h):"";switch(_&&v&&(B=e(z+B,z.length?y-U.length:1/0),z=""),d){case"<":B=I+B+U+z;break;case"=":B=I+z+B+U;break;case"^":B=z.slice(0,k=z.length>>1)+I+B+U+z.slice(k);break;default:B=z+I+B+U;break}return a(B)}return L.toString=function(){return f+""},L}function u(f,h){var d=c((f=nF(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(cw(h)/3)))*3,g=Math.pow(10,-p),v=I_e[8+p/3];return function(y){return d(g*y)+v}}return{format:c,formatPrefix:u}}var gL,Bne,v4e;Xjt({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function Xjt(t){return gL=Yjt(t),Bne=gL.format,v4e=gL.formatPrefix,gL}function qjt(t){return Math.max(0,-cw(Math.abs(t)))}function Zjt(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(cw(e)/3)))*3-cw(Math.abs(t)))}function Kjt(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,cw(e)-cw(t))+1}function Qjt(t,e,n,r){var i=xZ(t,e,n),a;switch(r=nF(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(a=Zjt(i,o))&&(r.precision=a),v4e(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=Kjt(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=qjt(i))&&(r.precision=a-(r.type==="%")*2);break}}return Bne(r)}function hN(t){var e=t.domain;return t.ticks=function(n){var r=e();return u4e(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Qjt(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,a=r.length-1,o=r[i],s=r[a],l;return s<o&&(l=o,o=s,s=l,l=i,i=a,a=l),l=Mk(o,s,n),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=Mk(o,s,n)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=Mk(o,s,n)),l>0?(r[i]=Math.floor(o/l)*l,r[a]=Math.ceil(s/l)*l,e(r)):l<0&&(r[i]=Math.ceil(o*l)/l,r[a]=Math.floor(s*l)/l,e(r)),t},t}function m4e(){var t=p4e(sf,sf);return t.copy=function(){return R5(t,m4e())},mb.apply(t,arguments),hN(t)}function y4e(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],a=t[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),t[n]=e.floor(i),t[r]=e.ceil(a),t}function L_e(t){return Math.log(t)}function k_e(t){return Math.exp(t)}function Jjt(t){return-Math.log(-t)}function ezt(t){return-Math.exp(-t)}function tzt(t){return isFinite(t)?+("1e"+t):t<0?0:t}function nzt(t){return t===10?tzt:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function rzt(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function D_e(t){return function(e){return-t(-e)}}function izt(t){var e=t(L_e,k_e),n=e.domain,r=10,i,a;function o(){return i=rzt(r),a=nzt(r),n()[0]<0?(i=D_e(i),a=D_e(a),t(Jjt,ezt)):t(L_e,k_e),e}return e.base=function(s){return arguments.length?(r=+s,o()):r},e.domain=function(s){return arguments.length?(n(s),o()):n()},e.ticks=function(s){var l=n(),c=l[0],u=l[l.length-1],f;(f=u<c)&&(h=c,c=u,u=h);var h=i(c),d=i(u),p,g,v,y=s==null?10:+s,_=[];if(!(r%1)&&d-h<y){if(h=Math.round(h)-1,d=Math.round(d)+1,c>0){for(;h<d;++h)for(g=1,p=a(h);g<r;++g)if(v=p*g,!(v<c)){if(v>u)break;_.push(v)}}else for(;h<d;++h)for(g=r-1,p=a(h);g>=1;--g)if(v=p*g,!(v<c)){if(v>u)break;_.push(v)}}else _=u4e(h,d,Math.min(d-h,y)).map(a);return f?_.reverse():_},e.tickFormat=function(s,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=Bne(l)),s===1/0)return l;s==null&&(s=10);var c=Math.max(1,r*s/e.ticks().length);return function(u){var f=u/a(Math.round(i(u)));return f*r<r-.5&&(f*=r),f<=c?l(u):""}},e.nice=function(){return n(y4e(n(),{floor:function(s){return a(Math.floor(i(s)))},ceil:function(s){return a(Math.ceil(i(s)))}}))},e}function _4e(){var t=izt(kne()).domain([1,10]);return t.copy=function(){return R5(t,_4e()).base(t.base())},mb.apply(t,arguments),t}function B_e(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function azt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function ozt(t){return t<0?-t*t:t*t}function szt(t){var e=t(sf,sf),n=1;function r(){return n===1?t(sf,sf):n===.5?t(azt,ozt):t(B_e(n),B_e(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},hN(e)}function b4e(){var t=szt(kne());return t.copy=function(){return R5(t,b4e()).exponent(t.exponent())},mb.apply(t,arguments),t}function E4e(){var t=[],e=[],n=[],r;function i(){var o=0,s=Math.max(1,e.length);for(n=new Array(s-1);++o<s;)n[o-1]=Djt(t,o/s);return a}function a(o){return isNaN(o=+o)?r:e[C5(n,o)]}return a.invertExtent=function(o){var s=e.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:t[0],s<n.length?n[s]:t[t.length-1]]},a.domain=function(o){if(!arguments.length)return t.slice();t=[];for(var s=0,l=o.length,c;s<l;++s)c=o[s],c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(Lne),i()},a.range=function(o){return arguments.length?(e=kx.call(o),i()):e.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return E4e().domain(t).range(e).unknown(r)},mb.apply(a,arguments)}function x4e(){var t=0,e=1,n=1,r=[.5],i=[0,1],a;function o(l){return l<=l?i[C5(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*e-(l-n)*t)/(n+1);return o}return o.domain=function(l){return arguments.length?(t=+l[0],e=+l[1],s()):[t,e]},o.range=function(l){return arguments.length?(n=(i=kx.call(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var c=i.indexOf(l);return c<0?[NaN,NaN]:c<1?[t,r[0]]:c>=n?[r[n-1],e]:[r[c-1],r[c]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return x4e().domain([t,e]).range(i).unknown(a)},mb.apply(hN(o),arguments)}function S4e(){var t=[.5],e=[0,1],n,r=1;function i(a){return a<=a?e[C5(t,a,0,r)]:n}return i.domain=function(a){return arguments.length?(t=kx.call(a),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(a){return arguments.length?(e=kx.call(a),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(a){var o=e.indexOf(a);return[t[o-1],t[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return S4e().domain(t).range(e).unknown(n)},mb.apply(i,arguments)}var VW=new Date,YW=new Date;function eh(t,e,n,r){function i(a){return t(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return t(a=new Date(+a)),a},i.ceil=function(a){return t(a=new Date(a-1)),e(a,1),t(a),a},i.round=function(a){var o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=function(a,o){return e(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,s){var l=[],c;if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;do l.push(c=new Date(+a)),e(a,s),t(a);while(c<a&&a<o);return l},i.filter=function(a){return eh(function(o){if(o>=o)for(;t(o),!a(o);)o.setTime(o-1)},function(o,s){if(o>=o)if(s<0)for(;++s<=0;)for(;e(o,-1),!a(o););else for(;--s>=0;)for(;e(o,1),!a(o););})},n&&(i.count=function(a,o){return VW.setTime(+a),YW.setTime(+o),t(VW),t(YW),Math.floor(n(VW,YW))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?function(o){return r(o)%a===0}:function(o){return i.count(0,o)%a===0}):i}),i}var rF=eh(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});rF.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?eh(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):rF};rF.range;var iF=1e3,JM=6e4,F_e=36e5,T4e=864e5,A4e=6048e5,w4e=eh(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*iF)},function(t,e){return(e-t)/iF},function(t){return t.getUTCSeconds()});w4e.range;var O4e=eh(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*iF)},function(t,e){t.setTime(+t+e*JM)},function(t,e){return(e-t)/JM},function(t){return t.getMinutes()});O4e.range;var C4e=eh(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*iF-t.getMinutes()*JM)},function(t,e){t.setTime(+t+e*F_e)},function(t,e){return(e-t)/F_e},function(t){return t.getHours()});C4e.range;var M5=eh(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*JM)/T4e},function(t){return t.getDate()-1});M5.range;function iS(t){return eh(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*JM)/A4e})}var Fne=iS(0),aF=iS(1),lzt=iS(2),czt=iS(3),uw=iS(4),uzt=iS(5),fzt=iS(6);Fne.range;aF.range;lzt.range;czt.range;uw.range;uzt.range;fzt.range;var R4e=eh(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});R4e.range;var K_=eh(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});K_.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:eh(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};K_.range;var Une=eh(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/T4e},function(t){return t.getUTCDate()-1});Une.range;function aS(t){return eh(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/A4e})}var M4e=aS(0),oF=aS(1),hzt=aS(2),dzt=aS(3),fw=aS(4),pzt=aS(5),gzt=aS(6);M4e.range;oF.range;hzt.range;dzt.range;fw.range;pzt.range;gzt.range;var Dx=eh(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Dx.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:eh(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};Dx.range;function XW(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function qW(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function T2(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function vzt(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,a=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=A2(i),u=w2(i),f=A2(a),h=w2(a),d=A2(o),p=w2(o),g=A2(s),v=w2(s),y=A2(l),_=w2(l),E={a:M,A:k,b:z,B:j,c:null,d:G_e,e:G_e,f:Uzt,g:qzt,G:Kzt,H:Dzt,I:Bzt,j:Fzt,L:P4e,m:jzt,M:zzt,p:V,q:Q,Q:Y_e,s:X_e,S:$zt,u:Hzt,U:Gzt,V:Wzt,w:Vzt,W:Yzt,x:null,X:null,y:Xzt,Y:Zzt,Z:Qzt,"%":V_e},x={a:ee,A:re,b:ne,B:le,c:null,d:W_e,e:W_e,f:n9t,g:h9t,G:p9t,H:Jzt,I:e9t,j:t9t,L:I4e,m:r9t,M:i9t,p:ue,q:ve,Q:Y_e,s:X_e,S:a9t,u:o9t,U:s9t,V:l9t,w:c9t,W:u9t,x:null,X:null,y:f9t,Y:d9t,Z:g9t,"%":V_e},T={a:L,A:B,b:I,B:U,c:$,d:$_e,e:$_e,f:Nzt,g:z_e,G:j_e,H:H_e,I:H_e,j:Czt,L:Pzt,m:Ozt,M:Rzt,p:D,q:wzt,Q:Lzt,s:kzt,S:Mzt,u:Ezt,U:xzt,V:Szt,w:bzt,W:Tzt,x:X,X:N,y:z_e,Y:j_e,Z:Azt,"%":Izt};E.x=S(n,E),E.X=S(r,E),E.c=S(e,E),x.x=S(n,x),x.X=S(r,x),x.c=S(e,x);function S(Se,Re){return function(Xe){var Le=[],Lt=-1,xt=0,dt=Se.length,Bt,At,zt;for(Xe instanceof Date||(Xe=new Date(+Xe));++Lt<dt;)Se.charCodeAt(Lt)===37&&(Le.push(Se.slice(xt,Lt)),(At=U_e[Bt=Se.charAt(++Lt)])!=null?Bt=Se.charAt(++Lt):At=Bt==="e"?" ":"0",(zt=Re[Bt])&&(Bt=zt(Xe,At)),Le.push(Bt),xt=Lt+1);return Le.push(Se.slice(xt,Lt)),Le.join("")}}function w(Se,Re){return function(Xe){var Le=T2(1900,void 0,1),Lt=C(Le,Se,Xe+="",0),xt,dt;if(Lt!=Xe.length)return null;if("Q"in Le)return new Date(Le.Q);if("s"in Le)return new Date(Le.s*1e3+("L"in Le?Le.L:0));if(Re&&!("Z"in Le)&&(Le.Z=0),"p"in Le&&(Le.H=Le.H%12+Le.p*12),Le.m===void 0&&(Le.m="q"in Le?Le.q:0),"V"in Le){if(Le.V<1||Le.V>53)return null;"w"in Le||(Le.w=1),"Z"in Le?(xt=qW(T2(Le.y,0,1)),dt=xt.getUTCDay(),xt=dt>4||dt===0?oF.ceil(xt):oF(xt),xt=Une.offset(xt,(Le.V-1)*7),Le.y=xt.getUTCFullYear(),Le.m=xt.getUTCMonth(),Le.d=xt.getUTCDate()+(Le.w+6)%7):(xt=XW(T2(Le.y,0,1)),dt=xt.getDay(),xt=dt>4||dt===0?aF.ceil(xt):aF(xt),xt=M5.offset(xt,(Le.V-1)*7),Le.y=xt.getFullYear(),Le.m=xt.getMonth(),Le.d=xt.getDate()+(Le.w+6)%7)}else("W"in Le||"U"in Le)&&("w"in Le||(Le.w="u"in Le?Le.u%7:"W"in Le?1:0),dt="Z"in Le?qW(T2(Le.y,0,1)).getUTCDay():XW(T2(Le.y,0,1)).getDay(),Le.m=0,Le.d="W"in Le?(Le.w+6)%7+Le.W*7-(dt+5)%7:Le.w+Le.U*7-(dt+6)%7);return"Z"in Le?(Le.H+=Le.Z/100|0,Le.M+=Le.Z%100,qW(Le)):XW(Le)}}function C(Se,Re,Xe,Le){for(var Lt=0,xt=Re.length,dt=Xe.length,Bt,At;Lt<xt;){if(Le>=dt)return-1;if(Bt=Re.charCodeAt(Lt++),Bt===37){if(Bt=Re.charAt(Lt++),At=T[Bt in U_e?Re.charAt(Lt++):Bt],!At||(Le=At(Se,Xe,Le))<0)return-1}else if(Bt!=Xe.charCodeAt(Le++))return-1}return Le}function D(Se,Re,Xe){var Le=c.exec(Re.slice(Xe));return Le?(Se.p=u[Le[0].toLowerCase()],Xe+Le[0].length):-1}function L(Se,Re,Xe){var Le=d.exec(Re.slice(Xe));return Le?(Se.w=p[Le[0].toLowerCase()],Xe+Le[0].length):-1}function B(Se,Re,Xe){var Le=f.exec(Re.slice(Xe));return Le?(Se.w=h[Le[0].toLowerCase()],Xe+Le[0].length):-1}function I(Se,Re,Xe){var Le=y.exec(Re.slice(Xe));return Le?(Se.m=_[Le[0].toLowerCase()],Xe+Le[0].length):-1}function U(Se,Re,Xe){var Le=g.exec(Re.slice(Xe));return Le?(Se.m=v[Le[0].toLowerCase()],Xe+Le[0].length):-1}function $(Se,Re,Xe){return C(Se,e,Re,Xe)}function X(Se,Re,Xe){return C(Se,n,Re,Xe)}function N(Se,Re,Xe){return C(Se,r,Re,Xe)}function M(Se){return o[Se.getDay()]}function k(Se){return a[Se.getDay()]}function z(Se){return l[Se.getMonth()]}function j(Se){return s[Se.getMonth()]}function V(Se){return i[+(Se.getHours()>=12)]}function Q(Se){return 1+~~(Se.getMonth()/3)}function ee(Se){return o[Se.getUTCDay()]}function re(Se){return a[Se.getUTCDay()]}function ne(Se){return l[Se.getUTCMonth()]}function le(Se){return s[Se.getUTCMonth()]}function ue(Se){return i[+(Se.getUTCHours()>=12)]}function ve(Se){return 1+~~(Se.getUTCMonth()/3)}return{format:function(Se){var Re=S(Se+="",E);return Re.toString=function(){return Se},Re},parse:function(Se){var Re=w(Se+="",!1);return Re.toString=function(){return Se},Re},utcFormat:function(Se){var Re=S(Se+="",x);return Re.toString=function(){return Se},Re},utcParse:function(Se){var Re=w(Se+="",!0);return Re.toString=function(){return Se},Re}}}var U_e={"-":"",_:" ",0:"0"},nu=/^\s*\d+/,mzt=/^%/,yzt=/[\\^$*+?|[\]().{}]/g;function so(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function _zt(t){return t.replace(yzt,"\\$&")}function A2(t){return new RegExp("^(?:"+t.map(_zt).join("|")+")","i")}function w2(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function bzt(t,e,n){var r=nu.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Ezt(t,e,n){var r=nu.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function xzt(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Szt(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Tzt(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function j_e(t,e,n){var r=nu.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function z_e(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Azt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function wzt(t,e,n){var r=nu.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function Ozt(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function $_e(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Czt(t,e,n){var r=nu.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function H_e(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Rzt(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Mzt(t,e,n){var r=nu.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Pzt(t,e,n){var r=nu.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Nzt(t,e,n){var r=nu.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Izt(t,e,n){var r=mzt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Lzt(t,e,n){var r=nu.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function kzt(t,e,n){var r=nu.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function G_e(t,e){return so(t.getDate(),e,2)}function Dzt(t,e){return so(t.getHours(),e,2)}function Bzt(t,e){return so(t.getHours()%12||12,e,2)}function Fzt(t,e){return so(1+M5.count(K_(t),t),e,3)}function P4e(t,e){return so(t.getMilliseconds(),e,3)}function Uzt(t,e){return P4e(t,e)+"000"}function jzt(t,e){return so(t.getMonth()+1,e,2)}function zzt(t,e){return so(t.getMinutes(),e,2)}function $zt(t,e){return so(t.getSeconds(),e,2)}function Hzt(t){var e=t.getDay();return e===0?7:e}function Gzt(t,e){return so(Fne.count(K_(t)-1,t),e,2)}function N4e(t){var e=t.getDay();return e>=4||e===0?uw(t):uw.ceil(t)}function Wzt(t,e){return t=N4e(t),so(uw.count(K_(t),t)+(K_(t).getDay()===4),e,2)}function Vzt(t){return t.getDay()}function Yzt(t,e){return so(aF.count(K_(t)-1,t),e,2)}function Xzt(t,e){return so(t.getFullYear()%100,e,2)}function qzt(t,e){return t=N4e(t),so(t.getFullYear()%100,e,2)}function Zzt(t,e){return so(t.getFullYear()%1e4,e,4)}function Kzt(t,e){var n=t.getDay();return t=n>=4||n===0?uw(t):uw.ceil(t),so(t.getFullYear()%1e4,e,4)}function Qzt(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+so(e/60|0,"0",2)+so(e%60,"0",2)}function W_e(t,e){return so(t.getUTCDate(),e,2)}function Jzt(t,e){return so(t.getUTCHours(),e,2)}function e9t(t,e){return so(t.getUTCHours()%12||12,e,2)}function t9t(t,e){return so(1+Une.count(Dx(t),t),e,3)}function I4e(t,e){return so(t.getUTCMilliseconds(),e,3)}function n9t(t,e){return I4e(t,e)+"000"}function r9t(t,e){return so(t.getUTCMonth()+1,e,2)}function i9t(t,e){return so(t.getUTCMinutes(),e,2)}function a9t(t,e){return so(t.getUTCSeconds(),e,2)}function o9t(t){var e=t.getUTCDay();return e===0?7:e}function s9t(t,e){return so(M4e.count(Dx(t)-1,t),e,2)}function L4e(t){var e=t.getUTCDay();return e>=4||e===0?fw(t):fw.ceil(t)}function l9t(t,e){return t=L4e(t),so(fw.count(Dx(t),t)+(Dx(t).getUTCDay()===4),e,2)}function c9t(t){return t.getUTCDay()}function u9t(t,e){return so(oF.count(Dx(t)-1,t),e,2)}function f9t(t,e){return so(t.getUTCFullYear()%100,e,2)}function h9t(t,e){return t=L4e(t),so(t.getUTCFullYear()%100,e,2)}function d9t(t,e){return so(t.getUTCFullYear()%1e4,e,4)}function p9t(t,e){var n=t.getUTCDay();return t=n>=4||n===0?fw(t):fw.ceil(t),so(t.getUTCFullYear()%1e4,e,4)}function g9t(){return"+0000"}function V_e(){return"%"}function Y_e(t){return+t}function X_e(t){return Math.floor(+t/1e3)}var PT,k4e;v9t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function v9t(t){return PT=vzt(t),k4e=PT.format,PT.parse,PT.utcFormat,PT.utcParse,PT}var SC=1e3,TC=SC*60,AC=TC*60,eP=AC*24,m9t=eP*7,q_e=eP*30,ZW=eP*365;function y9t(t){return new Date(t)}function _9t(t){return t instanceof Date?+t:+new Date(+t)}function D4e(t,e,n,r,i,a,o,s,l){var c=p4e(sf,sf),u=c.invert,f=c.domain,h=l(".%L"),d=l(":%S"),p=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),y=l("%b %d"),_=l("%B"),E=l("%Y"),x=[[o,1,SC],[o,5,5*SC],[o,15,15*SC],[o,30,30*SC],[a,1,TC],[a,5,5*TC],[a,15,15*TC],[a,30,30*TC],[i,1,AC],[i,3,3*AC],[i,6,6*AC],[i,12,12*AC],[r,1,eP],[r,2,2*eP],[n,1,m9t],[e,1,q_e],[e,3,3*q_e],[t,1,ZW]];function T(w){return(o(w)<w?h:a(w)<w?d:i(w)<w?p:r(w)<w?g:e(w)<w?n(w)<w?v:y:t(w)<w?_:E)(w)}function S(w,C,D,L){if(w==null&&(w=10),typeof w=="number"){var B=Math.abs(D-C)/w,I=c4e(function(U){return U[2]}).right(x,B);I===x.length?(L=xZ(C/ZW,D/ZW,w),w=t):I?(I=x[B/x[I-1][2]<x[I][2]/B?I-1:I],L=I[1],w=I[0]):(L=Math.max(xZ(C,D,w),1),w=s)}return L==null?w:w.every(L)}return c.invert=function(w){return new Date(u(w))},c.domain=function(w){return arguments.length?f(d4e.call(w,_9t)):f().map(y9t)},c.ticks=function(w,C){var D=f(),L=D[0],B=D[D.length-1],I=B<L,U;return I&&(U=L,L=B,B=U),U=S(w,L,B,C),U=U?U.range(L,B+1):[],I?U.reverse():U},c.tickFormat=function(w,C){return C==null?T:l(C)},c.nice=function(w,C){var D=f();return(w=S(w,D[0],D[D.length-1],C))?f(y4e(D,w)):c},c.copy=function(){return R5(c,D4e(t,e,n,r,i,a,o,s,l))},c}function b9t(){return mb.apply(D4e(K_,R4e,Fne,M5,C4e,O4e,w4e,rF,k4e).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function E9t(){var t=0,e=1,n,r,i,a,o=sf,s=!1,l;function c(u){return isNaN(u=+u)?l:o(i===0?.5:(u=(a(u)-n)*i,s?Math.max(0,Math.min(1,u)):u))}return c.domain=function(u){return arguments.length?(n=a(t=+u[0]),r=a(e=+u[1]),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(u){return arguments.length?(s=!!u,c):s},c.interpolator=function(u){return arguments.length?(o=u,c):o},c.unknown=function(u){return arguments.length?(l=u,c):l},function(u){return a=u,n=u(t),r=u(e),i=n===r?0:1/(r-n),c}}function B4e(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function F4e(){var t=hN(E9t()(sf));return t.copy=function(){return B4e(t,F4e())},f4e.apply(t,arguments)}function x9t(){var t=0,e=.5,n=1,r,i,a,o,s,l=sf,c,u=!1,f;function h(d){return isNaN(d=+d)?f:(d=.5+((d=+c(d))-i)*(d<i?o:s),l(u?Math.max(0,Math.min(1,d)):d))}return h.domain=function(d){return arguments.length?(r=c(t=+d[0]),i=c(e=+d[1]),a=c(n=+d[2]),o=r===i?0:.5/(i-r),s=i===a?0:.5/(a-i),h):[t,e,n]},h.clamp=function(d){return arguments.length?(u=!!d,h):u},h.interpolator=function(d){return arguments.length?(l=d,h):l},h.unknown=function(d){return arguments.length?(f=d,h):f},function(d){return c=d,r=d(t),i=d(e),a=d(n),o=r===i?0:.5/(i-r),s=i===a?0:.5/(a-i),h}}function U4e(){var t=hN(x9t()(sf));return t.copy=function(){return B4e(t,U4e())},f4e.apply(t,arguments)}function j4e(t){let e,n=[];function r(i){return i??e}return r.invert=r,r.domain=r.range=i=>i?(n=i,i):n,r.unknown=i=>i?(e=i,i):e,r.copy=()=>j4e().unknown(e),r}const{isNil:KW,isString:S9t,uniq:T9t}=gs,A9t=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,w9t={[go.LINEAR]:m4e,[go.POWER]:b4e,[go.LOG]:_4e,[go.IDENTITY]:j4e,[go.SEQUENTIAL]:F4e,[go.TIME]:b9t,[go.QUANTILE]:E4e,[go.QUANTIZE]:x4e,[go.THRESHOLD]:S4e,[go.CAT]:eF,[go.DIVERGING]:U4e};class O9t{constructor(){Z(this,"scaleOptions",{})}apply(e,{styleAttributeService:n}){var r=this;e.hooks.init.tapPromise("FeatureScalePlugin",kt(function*(){var i;e.log(Lc.ScaleInitStart,Mu.INIT),r.scaleOptions=e.getScaleOptions();const a=n.getLayerStyleAttributes(),o=(i=e.getSource())===null||i===void 0?void 0:i.data.dataArray;Array.isArray(o)&&o.length===0||(r.caculateScalesForAttributes(a||[],o),e.log(Lc.ScaleInitEnd,Mu.INIT))})),e.hooks.beforeRenderData.tapPromise("FeatureScalePlugin",(function(){var i=kt(function*(a){if(!a)return a;e.log(Lc.ScaleInitStart,Mu.UPDATE),r.scaleOptions=e.getScaleOptions();const o=n.getLayerStyleAttributes(),s=e.getSource().data.dataArray;return Array.isArray(s)&&s.length===0||(r.caculateScalesForAttributes(o||[],s),e.log(Lc.ScaleInitEnd,Mu.UPDATE),e.layerModelNeedUpdate=!0),!0});return function(a){return i.apply(this,arguments)}})()),e.hooks.beforeRender.tap("FeatureScalePlugin",()=>{if(e.layerModelNeedUpdate)return;this.scaleOptions=e.getScaleOptions();const i=n.getLayerStyleAttributes(),a=e.getSource().data.dataArray;if(!(Array.isArray(a)&&a.length===0)&&i){const o=i.filter(s=>s.needRescale);o.length&&this.caculateScalesForAttributes(o,a)}})}isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}caculateScalesForAttributes(e,n){e.forEach(r=>{if(r.scale){const i=r.scale,a=r.scale.field;i.names=this.parseFields(KW(a)?[]:a);const o=[];i.names.forEach(s=>{var l;o.push(this.createScale(s,r.name,(l=r.scale)===null||l===void 0?void 0:l.values,n))}),o.some(s=>s.type===MT.VARIABLE)?(i.type=MT.VARIABLE,o.forEach(s=>{if(!i.callback&&i.values!=="text"){var l;switch((l=s.option)===null||l===void 0?void 0:l.type){case go.LOG:case go.LINEAR:case go.POWER:if(i.values&&i.values.length>2){const u=s.scale.ticks(i.values.length);s.scale.domain(u)}i.values?s.scale.range(i.values):s.scale.range(s.option.domain);break;case go.QUANTILE:case go.QUANTIZE:case go.THRESHOLD:s.scale.range(i.values);break;case go.IDENTITY:break;case go.CAT:i.values?s.scale.range(i.values):s.scale.range(s.option.domain);break;case go.DIVERGING:case go.SEQUENTIAL:s.scale.interpolator(Sjt(i.values));break}}if(i.values==="text"){var c;s.scale.range((c=s.option)===null||c===void 0?void 0:c.domain)}})):(i.type=MT.CONSTANT,i.defaultValues=o.map((s,l)=>s.scale(i.names[l]))),i.scalers=o.map(s=>({field:s.field,func:s.scale,option:s.option})),r.needRescale=!1}})}parseFields(e){return Array.isArray(e)?e:S9t(e)?e.split("*"):[e]}createScale(e,n,r,i){var a,o;const s=this.scaleOptions[n]&&((a=this.scaleOptions[n])===null||a===void 0?void 0:a.field)===e?this.scaleOptions[n]:this.scaleOptions[e],l={field:e,scale:void 0,type:MT.VARIABLE,option:s};if(!i||!i.length)return s&&s.type?l.scale=this.createDefaultScale(s):(l.scale=eF([e]),l.type=MT.CONSTANT),l;const c=(o=i.find(u=>!KW(u[e])))===null||o===void 0?void 0:o[e];if(this.isNumber(e)||KW(c)&&!s)l.scale=eF([e]),l.type=MT.CONSTANT;else{let u=s&&s.type||this.getDefaultType(c);r==="text"&&(u=go.CAT),r===void 0&&(u=go.IDENTITY);const f=this.createScaleConfig(u,e,s,i);l.scale=this.createDefaultScale(f),l.option=f}return l}getDefaultType(e){let n=go.LINEAR;return typeof e=="string"&&(n=A9t.test(e)?go.TIME:go.CAT),n}createScaleConfig(e,n,r,i){const a=ze(ze({},r),{},{type:e});if(a!=null&&a.domain)return a;let o=[];if(e===go.QUANTILE){const s=new Map;i?.forEach(l=>{s.set(l._id,l[n])}),o=Array.from(s.values())}else o=i?.map(s=>s[n])||[];if(e===go.CAT||e===go.IDENTITY)a.domain=T9t(o);else if(e===go.QUANTILE)a.domain=o;else if(e===go.DIVERGING){const s=S_e(o),l=r?.neutral!==void 0?r?.neutral:(s[0]+s[1])/2;a.domain=[s[0],l,s[1]]}else a.domain=S_e(o);return a}createDefaultScale({type:e,domain:n,unknown:r,clamp:i,nice:a}){const o=w9t[e]();return n&&o.domain&&o.domain(n),r&&o.unknown(r),i!==void 0&&o.clamp&&o.clamp(i),a!==void 0&&o.nice&&o.nice(a),o}}class C9t{apply(e){e.hooks.beforeRender.tap("LayerAnimateStylePlugin",()=>{e.animateStatus&&e.models.forEach(r=>{r.addUniforms(ze({},e.layerModel.getAnimateUniforms()))})})}}let R9t=class{apply(e){e.hooks.afterInit.tap("LayerMaskPlugin",()=>{const{maskLayers:n,enableMask:r}=e.getLayerConfig();!e.tileLayer&&n&&n.length>0&&e.updateLayerConfig({mask:r})})}};class M9t{build(e){return kt(function*(){e.prepareBuildModel(),yield e.buildModels()})()}initLayerModel(e){var n=this;return kt(function*(){yield n.build(e),e.styleNeedUpdate=!1})()}prepareLayerModel(e){var n=this;return kt(function*(){yield n.build(e),e.styleNeedUpdate=!1})()}apply(e){var n=this;e.hooks.init.tapPromise("LayerModelPlugin",kt(function*(){if(e.getSource().isTile){e.prepareBuildModel();return}e.log(Lc.BuildModelStart,Mu.INIT),yield n.initLayerModel(e),e.log(Lc.BuildModelEnd,Mu.INIT)})),e.hooks.beforeRenderData.tapPromise("LayerModelPlugin",(function(){var r=kt(function*(i){return!i||e.getSource().isTile?!1:(e.log(Lc.BuildModelStart,Mu.UPDATE),yield n.prepareLayerModel(e),e.log(Lc.BuildModelEnd,Mu.UPDATE),!0)});return function(i){return r.apply(this,arguments)}})())}}class P9t{apply(e){e.hooks.afterInit.tap("LayerStylePlugin",()=>{const{autoFit:n,fitBoundsOptions:r}=e.getLayerConfig();n&&e.fitBounds(r),e.styleNeedUpdate=!1})}}const N9t=["type"],Z_e={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},I9t={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},L9t={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},k9t={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function D9t(t){const e={u_DirectionalLights:new Array(3).fill(ze({},L9t)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(ze({},k9t)),u_NumOfSpotLights:0};return(!t||!t.length)&&(t=[I9t]),t.forEach(n=>{let{type:r="directional"}=n,i=Ro(n,N9t);const a=Z_e[r].lights,o=Z_e[r].num,s=e[o];e[a][s]=ze(ze({},e[a][s]),i),e[o]++}),e}class B9t{apply(e){e.hooks.beforeRender.tap("LightingPlugin",()=>{const{enableLighting:n}=e.getLayerConfig();n&&e.models.forEach(r=>r.addUniforms(ze({},D9t())))})}}function z4e(t){return t.map(e=>(typeof e=="string"&&(e=[e,{}]),e))}function $4e(t,e,n,r){const i=t.multiPassRenderer;return i.add(r("render")),z4e(e).forEach(a=>{const[o,s]=a;i.add(n(o),s)}),i.add(n("copy")),i}class F9t{constructor(){Z(this,"enabled",void 0)}apply(e,{rendererService:n,postProcessingPassFactory:r,normalPassFactory:i}){e.hooks.init.tapPromise("MultiPassRendererPlugin",()=>{const{enableMultiPassRenderer:a,passes:o=[]}=e.getLayerConfig();this.enabled=!!a&&e.getLayerConfig().enableMultiPassRenderer!==!1,this.enabled&&(e.multiPassRenderer=$4e(e,o,r,i),e.multiPassRenderer.setRenderFlag(!0))}),e.hooks.beforeRender.tap("MultiPassRendererPlugin",()=>{if(this.enabled){const{width:a,height:o}=n.getViewportSize();e.multiPassRenderer.resize(a,o)}})}}const P_={POSITION:0,POSITION_64LOW:1,COLOR:2,PICKING_COLOR:3,STROKE:4,OPACITY:5,OFFSETS:6,ROTATION:7,MAX:8};function U9t(t){switch(t){case"rotation":return{name:"Rotation",type:fr.Attribute,descriptor:{name:"a_Rotation",shaderLocation:P_.ROTATION,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{rotation:n=0}=e;return Array.isArray(n)?[n[0]]:[n]}}};case"stroke":return{name:"stroke",type:fr.Attribute,descriptor:{name:"a_Stroke",shaderLocation:P_.STROKE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:4,update:e=>{const{stroke:n=[1,1,1,1]}=e;return n}}};case"opacity":return{name:"opacity",type:fr.Attribute,descriptor:{name:"a_Opacity",shaderLocation:P_.OPACITY,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{opacity:n=1}=e;return[n]}}};case"offsets":return{name:"offsets",type:fr.Attribute,descriptor:{name:"a_Offsets",shaderLocation:P_.OFFSETS,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const{offsets:n}=e;return n}}};default:return}}const{isNumber:j9t}=gs,NT={ENCODE:1,HIGHLIGHT:2};class z9t{constructor(){Z(this,"pickingUniformMap",void 0)}pickOption2Array(){const e=[];return this.pickingUniformMap.forEach(n=>{j9t(n)?e.push(n):e.push(...n)}),e}updatePickOption(e,n){Object.keys(e).forEach(o=>{this.pickingUniformMap.set(o,e[o])});const r=n.getLayerConfig().pickingBuffer||0,i=Number(n.getShaderPickStat());this.pickingUniformMap.set("u_PickingBuffer",r),this.pickingUniformMap.set("u_shaderPick",i),n.getPickingUniformBuffer().subData({offset:0,data:this.pickOption2Array()})}apply(e,{styleAttributeService:n}){this.pickingUniformMap=new Map([["u_HighlightColor",[1,0,0,1]],["u_SelectColor",[1,0,0,1]],["u_PickingColor",[0,0,0]],["u_PickingStage",0],["u_CurrentSelectedId",[0,0,0]],["u_PickingThreshold",10],["u_PickingBuffer",0],["u_shaderPick",0],["u_activeMix",0]]),e.hooks.init.tapPromise("PixelPickingPlugin",()=>{const{enablePicking:r}=e.getLayerConfig();n.registerStyleAttribute({name:"pickingColor",type:fr.Attribute,descriptor:{name:"a_PickingColor",shaderLocation:P_.PICKING_COLOR,buffer:{data:[],type:se.FLOAT},size:3,update:i=>{const{id:a}=i;return r?ow(a):[0,0,0]}}})}),e.hooks.beforePickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:r}=e.getLayerConfig();r&&e.isVisible()&&(this.updatePickOption({u_PickingStage:NT.ENCODE},e),e.models.forEach(i=>i.addUniforms({u_PickingStage:NT.ENCODE})))}),e.hooks.afterPickingEncode.tap("PixelPickingPlugin",()=>{const{enablePicking:r}=e.getLayerConfig();r&&e.isVisible()&&(this.updatePickOption({u_PickingStage:NT.HIGHLIGHT},e),e.models.forEach(i=>i.addUniforms({u_PickingStage:NT.HIGHLIGHT})))}),e.hooks.beforeHighlight.tap("PixelPickingPlugin",r=>{const{highlightColor:i,activeMix:a=0}=e.getLayerConfig(),o=typeof i=="string"?Xo(i):i||[1,0,0,1];e.updateLayerConfig({pickedFeatureID:ox(new Uint8Array(r))});const s={u_PickingStage:NT.HIGHLIGHT,u_PickingColor:r,u_HighlightColor:o.map(l=>l*255),u_activeMix:a};this.updatePickOption(s,e),e.models.forEach(l=>l.addUniforms(s))}),e.hooks.beforeSelect.tap("PixelPickingPlugin",r=>{const{selectColor:i,selectMix:a=0}=e.getLayerConfig(),o=typeof i=="string"?Xo(i):i||[1,0,0,1];e.updateLayerConfig({pickedFeatureID:ox(new Uint8Array(r))});const s={u_PickingStage:NT.HIGHLIGHT,u_PickingColor:r,u_HighlightColor:o.map(l=>l*255),u_activeMix:a,u_CurrentSelectedId:r,u_SelectColor:o.map(l=>l*255)};this.updatePickOption(s,e),e.models.forEach(l=>l.addUniforms(s))})}}const $9t=["mvt","geojsonvt","testTile"];function H9t(t){const e=t.getSource();return $9t.includes(e.parser.type)}class G9t{apply(e,{styleAttributeService:n}){e.hooks.init.tapPromise("RegisterStyleAttributePlugin",()=>{H9t(e)||this.registerBuiltinAttributes(n,e)})}registerBuiltinAttributes(e,n){if(n.type==="MaskLayer"){this.registerPositionAttribute(e);return}this.registerPositionAttribute(e),this.registerColorAttribute(e)}registerPositionAttribute(e){e.registerStyleAttribute({name:"position",type:fr.Attribute,descriptor:{name:"a_Position",shaderLocation:P_.POSITION,buffer:{data:[],type:se.FLOAT},size:3,update:(n,r,i)=>i.length===2?[i[0],i[1],0]:[i[0],i[1],i[2]]}})}registerColorAttribute(e){e.registerStyleAttribute({name:"color",type:fr.Attribute,descriptor:{name:"a_Color",shaderLocation:P_.COLOR,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:4,update:n=>{const{color:r}=n;return!r||!r.length?[1,1,1,1]:r}}})}}class W9t{constructor(){Z(this,"cameraService",void 0),Z(this,"coordinateSystemService",void 0),Z(this,"rendererService",void 0),Z(this,"mapService",void 0),Z(this,"layerService",void 0)}apply(e,{rendererService:n,mapService:r,layerService:i,coordinateSystemService:a,cameraService:o}){this.rendererService=n,this.mapService=r,this.layerService=i,this.coordinateSystemService=a,this.cameraService=o;let s;this.rendererService.uniformBuffers[0]||(s=this.rendererService.createBuffer({data:new Float32Array(96),isUBO:!0,label:"renderUniformBuffer"}),this.rendererService.uniformBuffers[0]=s),e.hooks.beforeRender.tap("ShaderUniformPlugin",()=>{const c=e.getRelativeOrigin&&e.getRelativeOrigin()||[0,0];this.coordinateSystemService.refresh(),c&&(Math.abs(c[0])>1e-4||Math.abs(c[1])>1e-4)&&this.coordinateSystemService.getCoordinateSystem()===2&&this.coordinateSystemService.setViewportCenter(c);const{width:f,height:h}=this.rendererService.getViewportSize(),{data:d,uniforms:p}=this.generateUBO(f,h,c);this.layerService.alreadyInRendering&&this.rendererService.uniformBuffers[0]&&this.rendererService.uniformBuffers[0].subData({offset:0,data:d}),this.rendererService.queryVerdorInfo()==="WebGL1"&&e.models.forEach(v=>{v.addUniforms(ze(ze({},p),{},{u_PickingBuffer:e.getLayerConfig().pickingBuffer||0,u_shaderPick:Number(e.getShaderPickStat())}))})})}generateUBO(e,n,r){const i=this.cameraService.getProjectionMatrix(),a=this.cameraService.getViewMatrix(),o=this.cameraService.getViewProjectionMatrix(),s=this.cameraService.getModelMatrix(),l=this.coordinateSystemService.getViewportCenterProjection(),c=this.coordinateSystemService.getPixelsPerDegree(),u=this.cameraService.getZoom(),f=this.coordinateSystemService.getPixelsPerDegree2(),h=this.cameraService.getZoomScale(),d=this.coordinateSystemService.getPixelsPerMeter(),p=this.coordinateSystemService.getCoordinateSystem(),g=this.cameraService.getCameraPosition(),v=window.devicePixelRatio,y=this.coordinateSystemService.getViewportCenter(),_=[e,n],E=this.cameraService.getFocalDistance(),x=r&&r.length>=2?[r[0],r[1]]:[0,0];return{data:[...a,...i,...o,...s,...l,...c,u,...f,h,...d,p,...g,v,...y,..._,E,...x,0],uniforms:{[TE.ProjectionMatrix]:i,[TE.ViewMatrix]:a,[TE.ViewProjectionMatrix]:o,[TE.Zoom]:u,[TE.ZoomScale]:h,[TE.FocalDistance]:E,[TE.CameraPosition]:g,[RT.CoordinateSystem]:p,[RT.ViewportCenter]:y,[RT.ViewportCenterProjection]:l,[RT.PixelsPerDegree]:c,[RT.PixelsPerDegree2]:f,[RT.PixelsPerMeter]:d,u_ViewportSize:_,u_ModelMatrix:s,u_DevicePixelRatio:v,u_RelativeOrigin:x}}}}class V9t{apply(e){e.hooks.beforeRender.tap("UpdateModelPlugin",()=>{e.layerModel&&e.layerModel.needUpdate().then(n=>{n&&e.renderLayers()})}),e.hooks.afterRender.tap("UpdateModelPlugin",()=>{e.layerModelNeedUpdate=!1})}}class Y9t{apply(e,{styleAttributeService:n}){e.hooks.init.tapPromise("UpdateStyleAttributePlugin",()=>{this.initStyleAttribute(e,{styleAttributeService:n})}),e.hooks.beforeRender.tap("UpdateStyleAttributePlugin",()=>{e.layerModelNeedUpdate||e.inited&&this.updateStyleAttribute(e,{styleAttributeService:n})})}updateStyleAttribute(e,{styleAttributeService:n}){const r=n.getLayerStyleAttributes()||[],i=n.getLayerStyleAttribute("filter");if(i&&i.needRegenerateVertices){e.layerModelNeedUpdate=!0,r.forEach(a=>a.needRegenerateVertices=!1);return}r.filter(a=>a.needRegenerateVertices).forEach(a=>{n.updateAttributeByFeatureRange(a.name,e.getEncodedData(),a.featureRange.startIndex,a.featureRange.endIndex,e),a.needRegenerateVertices=!1})}initStyleAttribute(e,{styleAttributeService:n}){(n.getLayerStyleAttributes()||[]).filter(i=>i.needRegenerateVertices).forEach(i=>{n.updateAttributeByFeatureRange(i.name,e.getEncodedData(),i.featureRange.startIndex,i.featureRange.endIndex),i.needRegenerateVertices=!1})}}function X9t(){return[new vjt,new G9t,new O9t,new gjt,new P9t,new R9t,new Y9t,new V9t,new F9t,new W9t,new C9t,new B9t,new z9t,new M9t]}const H4e={[c_.additive]:{enable:!0,func:{srcRGB:se.ONE,dstRGB:se.ONE,srcAlpha:1,dstAlpha:1}},[c_.none]:{enable:!1},[c_.normal]:{enable:!0,func:{srcRGB:se.SRC_ALPHA,dstRGB:se.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}},[c_.subtractive]:{enable:!0,func:{srcRGB:se.ONE,dstRGB:se.ONE,srcAlpha:se.ZERO,dstAlpha:se.ONE_MINUS_SRC_COLOR},equation:{rgb:se.FUNC_SUBTRACT,alpha:se.FUNC_SUBTRACT}},[c_.max]:{enable:!0,func:{srcRGB:se.ONE,dstRGB:se.ONE},equation:{rgb:se.MAX_EXT}},[c_.min]:{enable:!0,func:{srcRGB:se.ONE,dstRGB:se.ONE},equation:{rgb:se.MIN_EXT}}};class q9t{constructor(e){Z(this,"layer",void 0),this.layer=e}pickRender(e){const r=this.layer.getContainer().layerService,i=this.layer;if(i.tileLayer)return i.tileLayer.pickRender(e);i.hooks.beforePickingEncode.call(),r.renderTileLayerMask(i),i.renderModels({ispick:!0}),i.hooks.afterPickingEncode.call()}pick(e,n){var r=this;return kt(function*(){const a=r.layer.getContainer().pickingService;return e.type==="RasterLayer"?r.pickRasterLayer(e,n):(r.pickRender(n),a.pickFromPickingFBO(e,n))})()}pickRasterLayer(e,n,r){const i=this.layer.getContainer(),a=i.pickingService,o=i.mapService,s=this.layer.getSource().extent,l=cFt(n.lngLat,s),c={x:n.x,y:n.y,type:n.type,lngLat:n.lngLat,target:n,rasterValue:null},u=r||e;if(l){const f=this.readRasterValue(e,s,o,n.x,n.y);return c.rasterValue=f,a.triggerHoverOnLayer(u,c),!0}else return c.type=n.type==="mousemove"?"mouseout":"un"+n.type,a.triggerHoverOnLayer(u,ze(ze({},c),{},{type:"unpick"})),a.triggerHoverOnLayer(u,c),!1}readRasterValue(e,n,r,i,a){const o=e.getSource().data.dataArray[0],[s=0,l=0,c=10,u=-10]=n,f=r.lngLatToContainer([s,l]),h=r.lngLatToContainer([c,u]),d=h.x-f.x,p=f.y-h.y,g=[(i-f.x)/d,(a-h.y)/p],v=o.width||1,y=o.height||1,_=Math.floor(g[0]*v),E=Math.floor(g[1]*y),x=Math.max(0,E-1)*v+_;return o.data[x]}selectFeature(e){const n=this.layer,[r,i,a]=e;n.hooks.beforeSelect.call([r,i,a])}highlightPickedFeature(e){const[n,r,i]=e;this.layer.hooks.beforeHighlight.call([n,r,i])}getFeatureById(e){return this.layer.getSource().getFeatureById(e)}}class Z9t{constructor(e){Z(this,"layer",void 0),Z(this,"rendererService",void 0),Z(this,"colorTexture",void 0),Z(this,"key",void 0),this.layer=e;const n=this.layer.getContainer();this.rendererService=n.rendererService}getColorTexture(e,n){const r=this.getTextureKey(e,n);return this.key===r?this.colorTexture:(this.createColorTexture(e,n),this.key=r,this.colorTexture)}createColorTexture(e,n){const{createTexture2D:r}=this.rendererService,i=this.getColorRampBar(e,n),a=r({data:new Uint8Array(i.data),width:i.width,height:i.height,flipY:!1,unorm:!0});return this.colorTexture=a,a}setColorTexture(e,n,r){this.key=this.getTextureKey(n,r),this.colorTexture=e}destroy(){var e;(e=this.colorTexture)===null||e===void 0||e.destroy()}getColorRampBar(e,n){switch(e.type){case"cat":return MDt(e);case"quantize":return PDt(e);case"custom":return NDt(e,n);case"linear":return RDt(e,n);default:return JBe(e)}}getTextureKey(e,n){var r;return`${e.colors.join("_")}_${e==null||(r=e.positions)===null||r===void 0?void 0:r.join("_")}_${e.type}_${n?.join("_")}`}}const K9t=["passes"],Q9t=["moduleName","vertexShader","fragmentShader","defines","inject","triangulation","styleOption","pickingEnabled"],{isEqual:QW,isFunction:K_e,isNumber:Q_e,isObject:Su,isPlainObject:J9t,isUndefined:e$t}=gs;let J_e=0;class oS extends ku.EventEmitter{get shaderModuleService(){return this.container.shaderModuleService}get cameraService(){return this.container.cameraService}get coordinateService(){return this.container.coordinateSystemService}get iconService(){return this.container.iconService}get fontService(){return this.container.fontService}get pickingService(){return this.container.pickingService}get rendererService(){return this.container.rendererService}get layerService(){return this.container.layerService}get debugService(){return this.container.debugService}get interactionService(){return this.container.interactionService}get mapService(){var e;return(e=this.container)===null||e===void 0?void 0:e.mapService}get normalPassFactory(){return this.container.normalPassFactory}constructor(e={}){super(),Z(this,"id",`${J_e++}`),Z(this,"name",`${J_e}`),Z(this,"parent",void 0),Z(this,"coordCenter",void 0),Z(this,"type",void 0),Z(this,"visible",!0),Z(this,"zIndex",0),Z(this,"minZoom",void 0),Z(this,"maxZoom",void 0),Z(this,"inited",!1),Z(this,"layerModelNeedUpdate",!1),Z(this,"pickedFeatureID",null),Z(this,"selectedFeatureID",null),Z(this,"styleNeedUpdate",!1),Z(this,"rendering",void 0),Z(this,"forceRender",!1),Z(this,"clusterZoom",0),Z(this,"layerType",void 0),Z(this,"triangulation",void 0),Z(this,"layerPickService",void 0),Z(this,"textureService",void 0),Z(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json"}}}),Z(this,"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),Z(this,"hooks",{init:new K5t,afterInit:new T1e,beforeRender:new T1e,beforeRenderData:new Q5t,afterRender:new um,beforePickingEncode:new um,afterPickingEncode:new um,beforeHighlight:new um(["pickedColor"]),afterHighlight:new um,beforeSelect:new um(["pickedColor"]),afterSelect:new um,beforeDestroy:new um,afterDestroy:new um}),Z(this,"models",[]),Z(this,"multiPassRenderer",void 0),Z(this,"plugins",void 0),Z(this,"startInit",!1),Z(this,"sourceOption",void 0),Z(this,"layerModel",void 0),Z(this,"shapeOption",void 0),Z(this,"tileLayer",void 0),Z(this,"layerChildren",[]),Z(this,"masks",[]),Z(this,"configService",VFe),Z(this,"styleAttributeService",void 0),Z(this,"layerSource",void 0),Z(this,"postProcessingPassFactory",void 0),Z(this,"animateOptions",{enable:!1}),Z(this,"relativeOrigin",[0,0]),Z(this,"originalExtent",[0,0,0,0]),Z(this,"absoluteDataArray",[]),Z(this,"container",void 0),Z(this,"encodedData",void 0),Z(this,"currentPickId",null),Z(this,"rawConfig",void 0),Z(this,"needUpdateConfig",void 0),Z(this,"encodeStyleAttribute",{}),Z(this,"enableShaderEncodeStyles",[]),Z(this,"enableDataEncodeStyles",[]),Z(this,"pendingStyleAttributes",[]),Z(this,"scaleOptions",{}),Z(this,"animateStartTime",void 0),Z(this,"animateStatus",!1),Z(this,"isDestroyed",!1),Z(this,"uniformBuffers",[]),Z(this,"encodeDataLength",0),Z(this,"sourceEvent",()=>{this.dataState.dataSourceNeedUpdate=!0,this.processRelativeCoordinates();const n=this.getLayerConfig();n&&n.autoFit&&this.fitBounds(n.fitBoundsOptions),this.layerSource.getSourceCfg().autoRender&&setTimeout(()=>{this.reRender()},10)}),this.name=e.name||this.id,this.zIndex=e.zIndex||0,this.rawConfig=e,this.masks=e.maskLayers||[]}addMask(e){this.masks.push(e),this.updateLayerConfig({maskLayers:this.masks}),this.enableMask()}removeMask(e){const n=this.masks.indexOf(e);n>-1&&this.masks.splice(n,1),this.updateLayerConfig({maskLayers:this.masks})}disableMask(){this.updateLayerConfig({enableMask:!1})}enableMask(){this.updateLayerConfig({enableMask:!0})}addMaskLayer(e){this.masks.push(e)}removeMaskLayer(e){const n=this.masks.indexOf(e);n>-1&&this.masks.splice(n,1),e.destroy()}getAttribute(e){return this.styleAttributeService.getLayerStyleAttribute(e)}getLayerConfig(){return this.configService.getLayerConfig(this.id)}updateLayerConfig(e){if(Object.keys(e).map(n=>{n in this.rawConfig&&(this.rawConfig[n]=e[n])}),!this.startInit)this.needUpdateConfig=ze(ze({},this.needUpdateConfig),e);else{const n=this.container.id;this.configService.setLayerConfig(n,this.id,ze(ze(ze({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),e)),this.needUpdateConfig={}}}setContainer(e){this.container=e}getContainer(){return this.container}addPlugin(e){return this.plugins.push(e),this}init(){var e=this;return kt(function*(){const n=e.container.id;e.startInit=!0,e.configService.setLayerConfig(n,e.id,e.rawConfig),e.layerType=e.rawConfig.layerType;const{enableMultiPassRenderer:r,passes:i}=e.getLayerConfig();r&&i!==null&&i!==void 0&&i.length&&i.length>0&&e.mapService.on("mapAfterFrameChange",()=>{e.renderLayers()}),e.postProcessingPassFactory=e.container.postProcessingPassFactory,e.styleAttributeService=e.container.styleAttributeService,r&&(e.multiPassRenderer=e.container.multiPassRenderer,e.multiPassRenderer.setLayer(e)),e.pendingStyleAttributes.forEach(({attributeName:a,attributeField:o,attributeValues:s,updateOptions:l})=>{e.styleAttributeService.updateStyleAttribute(a,{scale:ze({field:o},e.splitValuesAndCallbackInAttribute(s,o?void 0:e.getLayerConfig()[a]))},l)}),e.pendingStyleAttributes=[],e.plugins=X9t();for(const a of e.plugins)a.apply(e,e.container);e.layerPickService=new q9t(e),e.textureService=new Z9t(e),e.log(Lc.LayerInitStart),yield e.hooks.init.promise(),e.log(Lc.LayerInitEnd),e.inited=!0,e.emit("inited",{target:e,type:"inited"}),e.emit("add",{target:e,type:"add"}),e.hooks.afterInit.call()})()}log(e,n="init"){var r;if(this.tileLayer||this.isTileLayer)return;const i=`${this.id}.${n}.${e}`,a={id:this.id,type:this.type};(r=this.debugService)===null||r===void 0||r.log(i,a)}updateModelData(e){e.attributes&&e.elements?this.models.map(n=>{n.updateAttributesAndElements(e.attributes,e.elements)}):console.warn("data error")}setLayerPickService(e){this.layerPickService=e}prepareBuildModel(){Object.keys(this.needUpdateConfig||{}).length!==0&&this.updateLayerConfig({});const{animateOption:e}=this.getLayerConfig();e!=null&&e.enable&&(this.layerService.startAnimate(),this.animateStatus=!0)}color(e,n,r){return this.updateStyleAttribute("color",e,n,r),this}texture(e,n,r){return this.updateStyleAttribute("texture",e,n,r),this}rotate(e,n,r){return this.updateStyleAttribute("rotate",e,n,r),this}size(e,n,r){return this.updateStyleAttribute("size",e,n,r),this}filter(e,n,r){const i=this.updateStyleAttribute("filter",e,n,r);return this.dataState.dataSourceNeedUpdate=i&&this.inited,this}shape(e,n,r){this.shapeOption={field:e,values:n};const i=this.updateStyleAttribute("shape",e,n,r);return this.dataState.dataSourceNeedUpdate=i&&this.inited,this}label(e,n,r){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:e,attributeValues:n,updateOptions:r}),this}animate(e){let n={};return Su(e)?(n.enable=!0,n=ze(ze({},n),e)):n.enable=e,this.updateLayerConfig({animateOption:n}),this}source(e,n){return e?.type==="source"?(this.setSource(e),this):(this.sourceOption={data:e,options:n},this.clusterZoom=0,this)}setData(e,n){return this.inited?(this.dataUpdatelog(),this.layerSource.setData(e,n)):this.on("inited",()=>{this.dataUpdatelog(),this.layerSource.setData(e,n)}),this}dataUpdatelog(){this.log(Lc.SourceInitStart,Mu.UPDATE),this.layerSource.once("update",()=>{this.log(Lc.SourceInitEnd,Mu.UPDATE)})}style(e){const{passes:n}=e,r=Ro(e,K9t);n&&z4e(n).forEach(a=>{const o=this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(a[0]);o&&o.updateOptions(a[1])}),r.borderColor&&(r.stroke=r.borderColor),r.borderWidth&&(r.strokeWidth=r.borderWidth);const i=r;return Object.keys(r).forEach(a=>{const o=r[a];Array.isArray(o)&&o.length===2&&!Q_e(o[0])&&!Q_e(o[1])&&(i[a]={field:o[0],value:o[1]})}),this.encodeStyle(i),this.updateLayerConfig(i),this}encodeStyle(e){Object.keys(e).forEach(n=>{[...this.enableShaderEncodeStyles,...this.enableDataEncodeStyles].includes(n)&&J9t(e[n])&&(e[n].field||e[n].value)&&!QW(this.encodeStyleAttribute[n],e[n])?(this.encodeStyleAttribute[n]=e[n],this.updateStyleAttribute(n,e[n].field,e[n].value),this.inited&&(this.dataState.dataMappingNeedUpdate=!0)):this.encodeStyleAttribute[n]&&(delete this.encodeStyleAttribute[n],this.dataState.dataSourceNeedUpdate=!0)})}scale(e,n){const r=ze({},this.scaleOptions);if(Su(e)?this.scaleOptions=ze(ze({},this.scaleOptions),e):this.scaleOptions[e]=n,this.styleAttributeService&&!QW(r,this.scaleOptions)){const i=Su(e)?e:{[e]:n};this.styleAttributeService.updateScaleAttribute(i)}return this}renderLayers(){this.rendering=!0,this.layerService.reRender(),this.rendering=!1}prerender(){}render(e={}){return this.tileLayer?(this.tileLayer.render(),this):(this.layerService.beforeRenderData(this),this.encodeDataLength<=0&&!this.forceRender?this:(this.renderModels(e),this))}renderMultiPass(){var e=this;return kt(function*(){e.encodeDataLength<=0&&!e.forceRender||(e.multiPassRenderer&&e.multiPassRenderer.getRenderFlag()?yield e.multiPassRenderer.render():e.renderModels())})()}active(e){const n={};return n.enableHighlight=Su(e)?!0:e,Su(e)?(n.enableHighlight=!0,e.color&&(n.highlightColor=e.color),e.mix&&(n.activeMix=e.mix)):n.enableHighlight=!!e,this.updateLayerConfig(n),this}setActive(e,n){if(Su(e)){const{x:r=0,y:i=0}=e;this.updateLayerConfig({highlightColor:Su(n)?n.color:this.getLayerConfig().highlightColor,activeMix:Su(n)?n.mix:this.getLayerConfig().activeMix}),this.pick({x:r,y:i})}else this.updateLayerConfig({pickedFeatureID:e,highlightColor:Su(n)?n.color:this.getLayerConfig().highlightColor,activeMix:Su(n)?n.mix:this.getLayerConfig().activeMix}),this.hooks.beforeHighlight.call(ow(e)).then(()=>{setTimeout(()=>{this.reRender()},1)})}select(e){const n={};return n.enableSelect=Su(e)?!0:e,Su(e)?(n.enableSelect=!0,e.color&&(n.selectColor=e.color),e.mix&&(n.selectMix=e.mix)):n.enableSelect=!!e,this.updateLayerConfig(n),this}setSelect(e,n){if(Su(e)){const{x:r=0,y:i=0}=e;this.updateLayerConfig({selectColor:Su(n)?n.color:this.getLayerConfig().selectColor,selectMix:Su(n)?n.mix:this.getLayerConfig().selectMix}),this.pick({x:r,y:i})}else this.updateLayerConfig({pickedFeatureID:e,selectColor:Su(n)?n.color:this.getLayerConfig().selectColor,selectMix:Su(n)?n.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(ow(e)).then(()=>{setTimeout(()=>{this.reRender()},1)})}setBlend(e){return this.updateLayerConfig({blend:e}),this.reRender(),this}show(){return this.updateLayerConfig({visible:!0}),this.reRender(),this.emit("show"),this}hide(){return this.updateLayerConfig({visible:!1}),this.reRender(),this.emit("hide"),this}setIndex(e){return this.zIndex=e,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}setCurrentPickId(e){this.currentPickId=e}getCurrentPickId(){return this.currentPickId}setCurrentSelectedId(e){this.selectedFeatureID=e}getCurrentSelectedId(){return this.selectedFeatureID}isVisible(){const e=this.mapService.getZoom(),{visible:n,minZoom:r=-1/0,maxZoom:i=1/0}=this.getLayerConfig();return!!n&&e>=r&&e<i}setMultiPass(e,n){if(this.updateLayerConfig({enableMultiPassRenderer:e}),n&&this.updateLayerConfig({passes:n}),e){const{passes:r=[]}=this.getLayerConfig();this.multiPassRenderer=$4e(this,r,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);const{width:i,height:a}=this.rendererService.getViewportSize();this.multiPassRenderer.resize(i,a)}return this}setMinZoom(e){return this.updateLayerConfig({minZoom:e}),this}getMinZoom(){const{minZoom:e}=this.getLayerConfig();return e}getMaxZoom(){const{maxZoom:e}=this.getLayerConfig();return e}get(e){return this.getLayerConfig()[e]}setMaxZoom(e){return this.updateLayerConfig({maxZoom:e}),this}setAutoFit(e){return this.updateLayerConfig({autoFit:e}),this}fitBounds(e){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;const r=this.getSource().extent;return r.some(a=>Math.abs(a)===1/0)?this:(this.mapService.fitBounds([[r[0],r[1]],[r[2],r[3]]],e),this)}destroy(e=!0){var n,r,i,a,o;if(this.isDestroyed)return;(n=this.layerModel)===null||n===void 0||n.uniformBuffers.forEach(l=>{l.destroy()}),this.layerChildren.map(l=>l.destroy(!1)),this.layerChildren=[];const{maskfence:s}=this.getLayerConfig();s&&(this.masks.map(l=>l.destroy(!1)),this.masks=[]),this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),(r=this.multiPassRenderer)===null||r===void 0||r.destroy(),this.textureService.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(i=this.layerModel)===null||i===void 0||i.clearModels(e),(a=this.tileLayer)===null||a===void 0||a.destroy(),this.models=[],(o=this.debugService)===null||o===void 0||o.removeLog(this.id),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroyed=!0}clear(){this.styleAttributeService.clearAllAttributes()}clearModels(){var e;this.models.forEach(n=>n.destroy()),(e=this.layerModel)===null||e===void 0||e.clearModels(),this.models=[]}isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(e=>e.needRescale||e.needRemapping||e.needRegenerateVertices).length}setSource(e){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=e,this.clusterZoom=0,this.inited&&this.layerSource.cluster){const n=this.mapService.getZoom();this.layerSource.updateClusterData(n)}this.layerSource.inited&&this.sourceEvent(),this.layerSource.on("update",({type:n})=>{if(this.coordCenter===void 0){const r=this.layerSource.center;this.coordCenter=r}if(n==="update"){if(this.tileLayer){this.tileLayer.reload();return}this.sourceEvent()}n==="inited"&&this.processRelativeCoordinates()})}getSource(){return this.layerSource}getScaleOptions(){return this.scaleOptions}setEncodedData(e){this.encodedData=e,this.encodeDataLength=e.length}getEncodedData(){return this.encodedData}getScale(e){return this.styleAttributeService.getLayerAttributeScale(e)}getLegend(e){var n,r,i;const a=this.styleAttributeService.getLayerStyleAttribute(e);return{type:(r=((a==null||(n=a.scale)===null||n===void 0?void 0:n.scalers)||[])[0])===null||r===void 0||(r=r.option)===null||r===void 0?void 0:r.type,field:a==null||(i=a.scale)===null||i===void 0?void 0:i.field,items:this.getLegendItems(e)}}getLegendItems(e){const n=this.styleAttributeService.getLayerAttributeScale(e);return n?n.invertExtent?n.range().map(i=>({value:n.invertExtent(i),[e]:i})):n.ticks?n.ticks().map(i=>({value:i,[e]:n(i)})):n!=null&&n.domain?n.domain().filter(i=>!e$t(i)).map(i=>({value:i,[e]:n(i)})):[]:[]}pick({x:e,y:n}){this.interactionService.triggerHover({x:e,y:n})}boxSelect(e,n){this.pickingService.boxPickLayer(this,e,n)}buildLayerModel(e){var n=this;return kt(function*(){const{moduleName:r,vertexShader:i,fragmentShader:a,defines:o,inject:s,triangulation:l,styleOption:c,pickingEnabled:u=!0}=e,f=Ro(e,Q9t);n.shaderModuleService.registerModule(r,{vs:i,fs:a,defines:o,inject:s});const{vs:h,fs:d,uniforms:p}=n.shaderModuleService.getModule(r),{createModel:g}=n.rendererService;return new Promise(v=>{const{attributes:y,elements:_,count:E}=n.styleAttributeService.createAttributesAndIndices(n.encodedData,l,c,n),x=[...n.layerModel.uniformBuffers,...n.rendererService.uniformBuffers];u&&x.push(n.getPickingUniformBuffer());const T=ze({attributes:y,uniforms:p,fs:d,vs:h,elements:_,blend:H4e[c_.normal],uniformBuffers:x,textures:n.layerModel.textures},f);E&&(T.count=E);const S=g(T);v(S)})})()}createAttributes(e){const{triangulation:n}=e,{attributes:r}=this.styleAttributeService.createAttributes(this.encodedData,n);return r}getTime(){return this.layerService.clock.getDelta()}setAnimateStartTime(){this.animateStartTime=this.layerService.clock.getElapsedTime()}stopAnimate(){this.animateStatus&&(this.layerService.stopAnimate(),this.animateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}getLayerAnimateTime(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}needPick(e){const{enableHighlight:n=!0,enableSelect:r=!0}=this.getLayerConfig();let i=this.eventNames().indexOf(e)!==-1||this.eventNames().indexOf("un"+e)!==-1;return(e==="click"||e==="dblclick")&&r&&(i=!0),e==="mousemove"&&(n||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(i=!0),this.isVisible()&&i}buildModels(){return kt(function*(){throw new Error("Method not implemented.")})()}rebuildModels(){var e=this;return kt(function*(){yield e.buildModels()})()}renderMulPass(e){return kt(function*(){yield e.render()})()}renderModels(e={}){return this.encodeDataLength<=0&&!this.forceRender?(this.clearModels(),this):(this.hooks.beforeRender.call(),this.models.forEach(n=>{n.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(e),textures:this.layerModel.textures},e?.ispick||!1)}),this.hooks.afterRender.call(),this)}updateStyleAttribute(e,n,r,i){const a=this.configService.getAttributeConfig(this.id)||{};return QW(a[e],{field:n,values:r})?!1:(["color","size","texture","rotate","filter","label","shape"].indexOf(e)!==-1&&this.configService.setAttributeConfig(this.id,{[e]:{field:n,values:r}}),this.startInit?this.styleAttributeService.updateStyleAttribute(e,{scale:ze({field:n},this.splitValuesAndCallbackInAttribute(r,this.getLayerConfig()[n]))},i):this.pendingStyleAttributes.push({attributeName:e,attributeField:n,attributeValues:r,updateOptions:i}),!0)}getLayerAttributeConfig(){return this.configService.getAttributeConfig(this.id)}getShaderPickStat(){return this.layerService.getShaderPickStat()}setEarthTime(e){console.warn("empty fn")}processData(e){return e}getModelType(){throw new Error("Method not implemented.")}getDefaultConfig(){return{}}processRelativeCoordinates(){if(!this.getLayerConfig().enableRelativeCoordinates||!this.layerSource||!this.layerSource.data)return;this.absoluteDataArray=[...this.layerSource.data.dataArray];const r=ujt(this.layerSource.data.dataArray,{enableRelativeCoordinates:!0});this.layerSource.data.dataArray=r.dataArray,this.relativeOrigin=r.relativeOrigin,this.originalExtent=r.originalExtent}getAbsoluteData(){return this.absoluteDataArray}getRelativeOrigin(){return this.relativeOrigin}getOriginalExtent(){return this.originalExtent}initLayerModels(){var e=this;return kt(function*(){e.models.forEach(r=>r.destroy()),e.models=[],e.uniformBuffers.forEach(r=>{r.destroy()}),e.uniformBuffers=[];const n=e.rendererService.createBuffer({data:new Float32Array(20).fill(0),isUBO:!0,label:"pickingUniforms"});e.uniformBuffers.push(n),e.models=yield e.layerModel.initModels()})()}getPickingUniformBuffer(){return this.uniformBuffers[0]}reRender(){this.inited&&this.layerService.reRender()}splitValuesAndCallbackInAttribute(e){return{values:K_e(e)?void 0:e,callback:K_e(e)?e:void 0}}}function t$t(t,e){return{enable:t,mask:255,func:{cmp:se.EQUAL,ref:e?1:0,mask:1}}}function ebe(t){return t.maskOperation===w5.OR?{enable:!0,mask:255,func:{cmp:se.ALWAYS,ref:1,mask:255},opFront:{fail:se.KEEP,zfail:se.REPLACE,zpass:se.REPLACE}}:{enable:!0,mask:255,func:{cmp:t.stencilType===WE.SINGLE||t.stencilIndex===0?se.ALWAYS:se.LESS,ref:t.stencilType===WE.SINGLE?1:t.stencilIndex===0?2:1,mask:255},opFront:{fail:se.KEEP,zfail:se.REPLACE,zpass:se.REPLACE}}}const n$t={opacity:1,stroke:[1,0,0,1],offsets:[0,0],rotation:0,extrusionBase:0,strokeOpacity:1,thetaOffset:.314},vL={opacity:"float",stroke:"vec4",offsets:"vec2",textOffset:"vec2",rotation:"float",extrusionBase:"float",strokeOpacity:"float",thetaOffset:"float"};var mL={exports:{}},tbe;function r$t(){if(tbe)return mL.exports;tbe=1,mL.exports=t,mL.exports.default=t;function t(N,M,k){k=k||2;var z=M&&M.length,j=z?M[0]*k:N.length,V=e(N,0,j,k,!0),Q=[];if(!V||V.next===V.prev)return Q;var ee,re,ne,le,ue,ve,Se;if(z&&(V=l(N,M,V,k)),N.length>80*k){ee=ne=N[0],re=le=N[1];for(var Re=k;Re<j;Re+=k)ue=N[Re],ve=N[Re+1],ue<ee&&(ee=ue),ve<re&&(re=ve),ue>ne&&(ne=ue),ve>le&&(le=ve);Se=Math.max(ne-ee,le-re),Se=Se!==0?32767/Se:0}return r(V,Q,k,ee,re,Se,0),Q}function e(N,M,k,z,j){var V,Q;if(j===X(N,M,k,z)>0)for(V=M;V<k;V+=z)Q=I(V,N[V],N[V+1],Q);else for(V=k-z;V>=M;V-=z)Q=I(V,N[V],N[V+1],Q);return Q&&x(Q,Q.next)&&(U(Q),Q=Q.next),Q}function n(N,M){if(!N)return N;M||(M=N);var k=N,z;do if(z=!1,!k.steiner&&(x(k,k.next)||E(k.prev,k,k.next)===0)){if(U(k),k=M=k.prev,k===k.next)break;z=!0}else k=k.next;while(z||k!==M);return M}function r(N,M,k,z,j,V,Q){if(N){!Q&&V&&d(N,z,j,V);for(var ee=N,re,ne;N.prev!==N.next;){if(re=N.prev,ne=N.next,V?a(N,z,j,V):i(N)){M.push(re.i/k|0),M.push(N.i/k|0),M.push(ne.i/k|0),U(N),N=ne.next,ee=ne.next;continue}if(N=ne,N===ee){Q?Q===1?(N=o(n(N),M,k),r(N,M,k,z,j,V,2)):Q===2&&s(N,M,k,z,j,V):r(n(N),M,k,z,j,V,1);break}}}}function i(N){var M=N.prev,k=N,z=N.next;if(E(M,k,z)>=0)return!1;for(var j=M.x,V=k.x,Q=z.x,ee=M.y,re=k.y,ne=z.y,le=j<V?j<Q?j:Q:V<Q?V:Q,ue=ee<re?ee<ne?ee:ne:re<ne?re:ne,ve=j>V?j>Q?j:Q:V>Q?V:Q,Se=ee>re?ee>ne?ee:ne:re>ne?re:ne,Re=z.next;Re!==M;){if(Re.x>=le&&Re.x<=ve&&Re.y>=ue&&Re.y<=Se&&y(j,ee,V,re,Q,ne,Re.x,Re.y)&&E(Re.prev,Re,Re.next)>=0)return!1;Re=Re.next}return!0}function a(N,M,k,z){var j=N.prev,V=N,Q=N.next;if(E(j,V,Q)>=0)return!1;for(var ee=j.x,re=V.x,ne=Q.x,le=j.y,ue=V.y,ve=Q.y,Se=ee<re?ee<ne?ee:ne:re<ne?re:ne,Re=le<ue?le<ve?le:ve:ue<ve?ue:ve,Xe=ee>re?ee>ne?ee:ne:re>ne?re:ne,Le=le>ue?le>ve?le:ve:ue>ve?ue:ve,Lt=g(Se,Re,M,k,z),xt=g(Xe,Le,M,k,z),dt=N.prevZ,Bt=N.nextZ;dt&&dt.z>=Lt&&Bt&&Bt.z<=xt;){if(dt.x>=Se&&dt.x<=Xe&&dt.y>=Re&&dt.y<=Le&&dt!==j&&dt!==Q&&y(ee,le,re,ue,ne,ve,dt.x,dt.y)&&E(dt.prev,dt,dt.next)>=0||(dt=dt.prevZ,Bt.x>=Se&&Bt.x<=Xe&&Bt.y>=Re&&Bt.y<=Le&&Bt!==j&&Bt!==Q&&y(ee,le,re,ue,ne,ve,Bt.x,Bt.y)&&E(Bt.prev,Bt,Bt.next)>=0))return!1;Bt=Bt.nextZ}for(;dt&&dt.z>=Lt;){if(dt.x>=Se&&dt.x<=Xe&&dt.y>=Re&&dt.y<=Le&&dt!==j&&dt!==Q&&y(ee,le,re,ue,ne,ve,dt.x,dt.y)&&E(dt.prev,dt,dt.next)>=0)return!1;dt=dt.prevZ}for(;Bt&&Bt.z<=xt;){if(Bt.x>=Se&&Bt.x<=Xe&&Bt.y>=Re&&Bt.y<=Le&&Bt!==j&&Bt!==Q&&y(ee,le,re,ue,ne,ve,Bt.x,Bt.y)&&E(Bt.prev,Bt,Bt.next)>=0)return!1;Bt=Bt.nextZ}return!0}function o(N,M,k){var z=N;do{var j=z.prev,V=z.next.next;!x(j,V)&&T(j,z,z.next,V)&&D(j,V)&&D(V,j)&&(M.push(j.i/k|0),M.push(z.i/k|0),M.push(V.i/k|0),U(z),U(z.next),z=N=V),z=z.next}while(z!==N);return n(z)}function s(N,M,k,z,j,V){var Q=N;do{for(var ee=Q.next.next;ee!==Q.prev;){if(Q.i!==ee.i&&_(Q,ee)){var re=B(Q,ee);Q=n(Q,Q.next),re=n(re,re.next),r(Q,M,k,z,j,V,0),r(re,M,k,z,j,V,0);return}ee=ee.next}Q=Q.next}while(Q!==N)}function l(N,M,k,z){var j=[],V,Q,ee,re,ne;for(V=0,Q=M.length;V<Q;V++)ee=M[V]*z,re=V<Q-1?M[V+1]*z:N.length,ne=e(N,ee,re,z,!1),ne===ne.next&&(ne.steiner=!0),j.push(v(ne));for(j.sort(c),V=0;V<j.length;V++)k=u(j[V],k);return k}function c(N,M){return N.x-M.x}function u(N,M){var k=f(N,M);if(!k)return M;var z=B(k,N);return n(z,z.next),n(k,k.next)}function f(N,M){var k=M,z=N.x,j=N.y,V=-1/0,Q;do{if(j<=k.y&&j>=k.next.y&&k.next.y!==k.y){var ee=k.x+(j-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(ee<=z&&ee>V&&(V=ee,Q=k.x<k.next.x?k:k.next,ee===z))return Q}k=k.next}while(k!==M);if(!Q)return null;var re=Q,ne=Q.x,le=Q.y,ue=1/0,ve;k=Q;do z>=k.x&&k.x>=ne&&z!==k.x&&y(j<le?z:V,j,ne,le,j<le?V:z,j,k.x,k.y)&&(ve=Math.abs(j-k.y)/(z-k.x),D(k,N)&&(ve<ue||ve===ue&&(k.x>Q.x||k.x===Q.x&&h(Q,k)))&&(Q=k,ue=ve)),k=k.next;while(k!==re);return Q}function h(N,M){return E(N.prev,N,M.prev)<0&&E(M.next,N,N.next)<0}function d(N,M,k,z){var j=N;do j.z===0&&(j.z=g(j.x,j.y,M,k,z)),j.prevZ=j.prev,j.nextZ=j.next,j=j.next;while(j!==N);j.prevZ.nextZ=null,j.prevZ=null,p(j)}function p(N){var M,k,z,j,V,Q,ee,re,ne=1;do{for(k=N,N=null,V=null,Q=0;k;){for(Q++,z=k,ee=0,M=0;M<ne&&(ee++,z=z.nextZ,!!z);M++);for(re=ne;ee>0||re>0&&z;)ee!==0&&(re===0||!z||k.z<=z.z)?(j=k,k=k.nextZ,ee--):(j=z,z=z.nextZ,re--),V?V.nextZ=j:N=j,j.prevZ=V,V=j;k=z}V.nextZ=null,ne*=2}while(Q>1);return N}function g(N,M,k,z,j){return N=(N-k)*j|0,M=(M-z)*j|0,N=(N|N<<8)&16711935,N=(N|N<<4)&252645135,N=(N|N<<2)&858993459,N=(N|N<<1)&1431655765,M=(M|M<<8)&16711935,M=(M|M<<4)&252645135,M=(M|M<<2)&858993459,M=(M|M<<1)&1431655765,N|M<<1}function v(N){var M=N,k=N;do(M.x<k.x||M.x===k.x&&M.y<k.y)&&(k=M),M=M.next;while(M!==N);return k}function y(N,M,k,z,j,V,Q,ee){return(j-Q)*(M-ee)>=(N-Q)*(V-ee)&&(N-Q)*(z-ee)>=(k-Q)*(M-ee)&&(k-Q)*(V-ee)>=(j-Q)*(z-ee)}function _(N,M){return N.next.i!==M.i&&N.prev.i!==M.i&&!C(N,M)&&(D(N,M)&&D(M,N)&&L(N,M)&&(E(N.prev,N,M.prev)||E(N,M.prev,M))||x(N,M)&&E(N.prev,N,N.next)>0&&E(M.prev,M,M.next)>0)}function E(N,M,k){return(M.y-N.y)*(k.x-M.x)-(M.x-N.x)*(k.y-M.y)}function x(N,M){return N.x===M.x&&N.y===M.y}function T(N,M,k,z){var j=w(E(N,M,k)),V=w(E(N,M,z)),Q=w(E(k,z,N)),ee=w(E(k,z,M));return!!(j!==V&&Q!==ee||j===0&&S(N,k,M)||V===0&&S(N,z,M)||Q===0&&S(k,N,z)||ee===0&&S(k,M,z))}function S(N,M,k){return M.x<=Math.max(N.x,k.x)&&M.x>=Math.min(N.x,k.x)&&M.y<=Math.max(N.y,k.y)&&M.y>=Math.min(N.y,k.y)}function w(N){return N>0?1:N<0?-1:0}function C(N,M){var k=N;do{if(k.i!==N.i&&k.next.i!==N.i&&k.i!==M.i&&k.next.i!==M.i&&T(k,k.next,N,M))return!0;k=k.next}while(k!==N);return!1}function D(N,M){return E(N.prev,N,N.next)<0?E(N,M,N.next)>=0&&E(N,N.prev,M)>=0:E(N,M,N.prev)<0||E(N,N.next,M)<0}function L(N,M){var k=N,z=!1,j=(N.x+M.x)/2,V=(N.y+M.y)/2;do k.y>V!=k.next.y>V&&k.next.y!==k.y&&j<(k.next.x-k.x)*(V-k.y)/(k.next.y-k.y)+k.x&&(z=!z),k=k.next;while(k!==N);return z}function B(N,M){var k=new $(N.i,N.x,N.y),z=new $(M.i,M.x,M.y),j=N.next,V=M.prev;return N.next=M,M.prev=N,k.next=j,j.prev=k,z.next=k,k.prev=z,V.next=z,z.prev=V,z}function I(N,M,k,z){var j=new $(N,M,k);return z?(j.next=z.next,j.prev=z,z.next.prev=j,z.next=j):(j.prev=j,j.next=j),j}function U(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function $(N,M,k){this.i=N,this.x=M,this.y=k,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}t.deviation=function(N,M,k,z){var j=M&&M.length,V=j?M[0]*k:N.length,Q=Math.abs(X(N,0,V,k));if(j)for(var ee=0,re=M.length;ee<re;ee++){var ne=M[ee]*k,le=ee<re-1?M[ee+1]*k:N.length;Q-=Math.abs(X(N,ne,le,k))}var ue=0;for(ee=0;ee<z.length;ee+=3){var ve=z[ee]*k,Se=z[ee+1]*k,Re=z[ee+2]*k;ue+=Math.abs((N[ve]-N[Re])*(N[Se+1]-N[ve+1])-(N[ve]-N[Se])*(N[Re+1]-N[ve+1]))}return Q===0&&ue===0?0:Math.abs((ue-Q)/Q)};function X(N,M,k,z){for(var j=0,V=M,Q=k-z;V<k;V+=z)j+=(N[Q]-N[V])*(N[V+1]+N[Q+1]),Q=V;return j}return t.flatten=function(N){for(var M=N[0][0].length,k={vertices:[],holes:[],dimensions:M},z=0,j=0;j<N.length;j++){for(var V=0;V<N[j].length;V++)for(var Q=0;Q<M;Q++)k.vertices.push(N[j][V][Q]);j>0&&(z+=N[j-1].length,k.holes.push(z))}return k},mL.exports}var i$t=r$t();const ky=Ni(i$t);function nbe(t){return Math.max(Math.ceil(t/4)*4,4)}function G4e(t,e,n,r=!0){const i=n===3;if(r){t=t.slice();const o=[];for(let s=0;s<t.length;s+=n){o[0]=t[s],o[1]=t[s+1],i&&(o[2]=t[s+2]);const l=wk(o,!0,{enable:!1,decimal:1});t[s]=l[0],t[s+1]=l[1],i&&(t[s+2]=l[2])}}return ky(t,e,n)}const W4e="ATTRIBUTE_LOCATION_";class Eo{get attributeLocation(){return ze({},P_)}constructor(e){Z(this,"triangulation",void 0),Z(this,"uniformBuffers",[]),Z(this,"textures",[]),Z(this,"createTexture2D",void 0),Z(this,"preStyleAttribute",{}),Z(this,"encodeStyleAttribute",{}),Z(this,"layer",void 0),Z(this,"dataTexture",void 0),Z(this,"DATA_TEXTURE_WIDTH",void 0),Z(this,"dataTextureTest",void 0),Z(this,"configService",void 0),Z(this,"shaderModuleService",void 0),Z(this,"rendererService",void 0),Z(this,"iconService",void 0),Z(this,"fontService",void 0),Z(this,"styleAttributeService",void 0),Z(this,"mapService",void 0),Z(this,"cameraService",void 0),Z(this,"layerService",void 0),Z(this,"pickingService",void 0),Z(this,"attributeUnifoms",void 0),Z(this,"commonUnifoms",void 0),this.layer=e,this.configService=e.getContainer().globalConfigService,this.rendererService=e.getContainer().rendererService,this.pickingService=e.getContainer().pickingService,this.shaderModuleService=e.getContainer().shaderModuleService,this.styleAttributeService=e.getContainer().styleAttributeService,this.mapService=e.getContainer().mapService,this.iconService=e.getContainer().iconService,this.fontService=e.getContainer().fontService,this.cameraService=e.getContainer().cameraService,this.layerService=e.getContainer().layerService,this.registerStyleAttribute(),this.registerBuiltinAttributes(),this.startModelAnimate();const{createTexture2D:n}=this.rendererService;this.createTexture2D=n}getBlend(){const{blend:e="normal"}=this.layer.getLayerConfig();return H4e[c_[e]]}getStencil(e){const{mask:n=!1,maskInside:r=!0,enableMask:i,maskOperation:a=w5.AND}=this.layer.getLayerConfig();if(this.layer.type==="MaskLayer")return ebe({stencilType:WE.SINGLE});if(e.isStencil)return ebe(ze(ze({},e),{},{maskOperation:a}));const o=n||i&&this.layer.masks.length!==0||this.layer.tileMask!==void 0;return t$t(o,r)}getDefaultStyle(){return{}}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());this.updateStyleUnifoms();const r=ze(ze({},n.uniformsOption),e.uniformsOption);return Object.keys(r).forEach(i=>{typeof r[i]=="boolean"&&(r[i]=r[i]?1:0)}),!this.rendererService.hasOwnProperty("device")&&this.textures&&this.textures.length===1&&(r.u_texture=this.textures[0]),r}getAnimateUniforms(){return{}}needUpdate(){return kt(function*(){return!1})()}buildModels(){return kt(function*(){throw new Error("Method not implemented.")})()}initModels(){return kt(function*(){throw new Error("Method not implemented.")})()}clearModels(e=!0){}getAttribute(){throw new Error("Method not implemented.")}prerender(){}render(e){throw new Error("Method not implemented.")}registerBuiltinAttributes(){throw new Error("Method not implemented.")}animateOption2Array(e){return[e.enable?0:1,e.duration||4,e.interval||.2,e.trailLength||.1]}startModelAnimate(){const{animateOption:e}=this.layer.getLayerConfig();e.enable&&this.layer.setAnimateStartTime()}getInject(){return a$t(this.layer.enableShaderEncodeStyles,this.layer.encodeStyleAttribute)}getDefines(){const e=Object.keys(this.attributeLocation).reduce((n,r)=>{const i=W4e+r;return n[i]=this.attributeLocation[r],n},{});return ze({},e)}getStyleAttribute(){const e={};return this.layer.enableShaderEncodeStyles.forEach(n=>{if(!this.layer.encodeStyleAttribute[n]){const r=this.layer.getLayerConfig()[n];let i=typeof r>"u"?n$t[n]:r;n==="stroke"&&(i=Xo(i)),e["u_"+n]=i}}),e}registerStyleAttribute(){Object.keys(this.layer.encodeStyleAttribute).forEach(e=>{const n=U9t(e);n&&this.styleAttributeService.registerStyleAttribute(n)})}registerPosition64LowAttribute(e=!0){this.styleAttributeService.registerStyleAttribute({name:"position64Low",type:fr.Attribute,descriptor:{name:"a_Position64Low",shaderLocation:this.attributeLocation.POSITION_64LOW,buffer:{data:[],type:se.FLOAT},size:2,update:(n,r,i)=>e?[vc(i[0]),vc(i[1])]:[0,0]}})}updateEncodeAttribute(e,n){this.encodeStyleAttribute[e]=n}initUniformsBuffer(){const e=this.getUniformsBufferInfo(this.getStyleAttribute()),n=this.getCommonUniformsInfo();e.uniformsLength!==0&&(this.attributeUnifoms=this.rendererService.createBuffer({data:new Float32Array(nbe(e.uniformsLength)).fill(0),isUBO:!0,label:"layerModelAttributeUnifoms"}),this.uniformBuffers.push(this.attributeUnifoms)),n.uniformsLength!==0&&(this.commonUnifoms=this.rendererService.createBuffer({data:new Float32Array(nbe(n.uniformsLength)).fill(0),isUBO:!0,label:"layerModelCommonUnifoms"}),this.uniformBuffers.push(this.commonUnifoms))}getUniformsBufferInfo(e){let n=0;const r=[];return Object.values(e).forEach(i=>{Array.isArray(i)?(r.push(...i),n+=i.length):typeof i=="number"?(r.push(i),n+=1):typeof i=="boolean"&&(r.push(Number(i)),n+=1)}),{uniformsOption:e,uniformsLength:n,uniformsArray:r}}getCommonUniformsInfo(){return{uniformsLength:0,uniformsArray:[],uniformsOption:{}}}updateStyleUnifoms(){var e,n;const{uniformsArray:r}=this.getUniformsBufferInfo(this.getStyleAttribute()),{uniformsArray:i}=this.getCommonUniformsInfo();(e=this.attributeUnifoms)===null||e===void 0||e.subData({offset:0,data:new Uint8Array(new Float32Array(r).buffer)}),(n=this.commonUnifoms)===null||n===void 0||n.subData({offset:0,data:new Uint8Array(new Float32Array(i).buffer)})}}function a$t(t,e){const n=[];let r="";t.forEach(o=>{const s=o.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase(),l=W4e+s;e[o]?r+=`#define USE_ATTRIBUTE_${s} 0.0 
`:n.push(`  ${vL[o]} u_${o};`),r+=`
#ifdef USE_ATTRIBUTE_${s}
layout(location = ${l}) in ${vL[o]} a_${o.charAt(0).toUpperCase()+o.slice(1)};
#endif 
`});const i=n.length?`
layout(std140) uniform AttributeUniforms {
  ${n.join(`
`)}
};
`:"";r+=i;let a="";return t.forEach(o=>{const s=o.replace(/([a-z])([A-Z])/g,"$1_$2").toUpperCase();a+=`
  #ifdef USE_ATTRIBUTE_${s}
    ${vL[o]} ${o} = a_${o.charAt(0).toUpperCase()+o.slice(1)};
  #else
    ${vL[o]} ${o} = u_${o};
  #endif
  `}),{"vs:#decl":r,"fs:#decl":i,"vs:#main-start":a}}let jhn=(function(t){return t[t.solid=0]="solid",t[t.dash=1]="dash",t})({}),rbe=(function(t){return t.VERTICAL="vertical",t.HORIZONTAL="horizontal",t})({}),o$t=(function(t){return t.NORMAL="normal",t.REPLACE="replace",t})({}),jne=(function(t){return t[t.pixel=0]="pixel",t[t.meter=1]="meter",t})({}),zhn=(function(t){return t.ALWAYS="always",t.DRAGEND="dragend",t})({});const P5=100,V4e=36,s$t=40;function ibe(t){return t/180*Math.acos(-1)}function Y4e(t){const e=ibe(t[0])+Math.PI/2,n=ibe(t[1]),r=P5+Math.random()*.4,i=r*Math.cos(n)*Math.cos(e),a=r*Math.cos(n)*Math.sin(e),o=r*Math.sin(n);return[a,o,i]}function X4e(t,e){const n=Zr(),r=Zr(),i=yr(0,1,0),a=yr(0,0,0);e=e||{},t=typeof t<"u"?t:1;const s=2+(typeof e.segments<"u"?e.segments:32),l=2*s,c=[],u=[],f=[],h=[],d=[],p=[];for(let g=0;g<=s;g++){const v=g/s,y=v*Math.PI;for(let _=0;_<=l;_++){const E=_/l,x=E*Math.PI*2;Pu(r),eb(r,r,-y),Pu(n),Dy(n,n,x),ka(a,i,r),ka(a,a,n),Ay(a,a,-t),f.push(a.slice()),h.push(...a.slice()),Ic(a,a),d.push(...a.slice()),p.push([E,1-v]),h.push(E,1-v)}if(g>0){const _=f.length;let E=_-2*(l+1);for(;E+l+2<_;E++)c.push([E,E+1,E+l+1]),u.push(E,E+1,E+l+1),c.push([E+l+1,E+1,E+l+2]),u.push(E+l+1,E+1,E+l+2)}}return{cells:c,positions:f,uvs:p,positionsArr:h,indicesArr:u,normalArr:d}}const abe=Xc();Xc();const mp=Xc(),O2=Xc(),yL=Xc();function obe(t,e,n,r,i){h_(t,n,r),PR(t,t),e=bY(-t[1],t[0]);const a=bY(-n[1],n[0]);return[i/fD(e,a),e]}function C2(t,e){return xQ(t,-e[1],e[0])}function _L(t,e,n){return swe(t,e,n),PR(t,t),t}function sbe(t,e){return t[0]===e[0]&&t[1]===e[1]}class l$t{constructor(e={}){Z(this,"complex",void 0),Z(this,"join",void 0),Z(this,"cap",void 0),Z(this,"miterLimit",void 0),Z(this,"thickness",void 0),Z(this,"normal",void 0),Z(this,"lastFlip",-1),Z(this,"miter",bY(0,0)),Z(this,"started",!1),Z(this,"dash",!1),Z(this,"totalDistance",0),Z(this,"currentIndex",0),this.join=e.join||"miter",this.cap=e.cap||"butt",this.miterLimit=e.miterLimit||10,this.thickness=e.thickness||1,this.dash=e.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}simpleExtrude(e){const n=this.complex;if(e.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const r=e.length;let i=n.startIndex;for(let a=1;a<r;a++){const o=e[a-1],s=e[a],l=a<e.length-1?e[a+1]:null,c=this.simpleSegment(n,i,o,s,l);i+=c}if(this.dash)for(let a=0;a<n.positions.length/6;a++)n.positions[a*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}extrude(e){const n=this.complex;if(e.length<=1)return n;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;const r=e.length;let i=n.startIndex;for(let a=1;a<r;a++){const o=e[a-1],s=e[a],l=a<e.length-1?e[a+1]:null,c=this.segment(n,i,o,s,l);i+=c}if(this.dash)for(let a=0;a<n.positions.length/6;a++)n.positions[a*6+5]=this.totalDistance;return n.startIndex=n.positions.length/6,n}simpleSegment(e,n,r,i,a){let o=0;const s=e.indices,l=e.positions,c=e.normals,u=Rp([i[0],i[1]]),f=Rp([r[0],r[1]]);_L(mp,u,f);let h=0;if(this.dash&&(h=this.lineSegmentDistance(u,f),this.totalDistance+=h),this.normal||(this.normal=Xc(),C2(this.normal,mp)),this.started||(this.started=!0,this.extrusions(l,c,r,this.normal,this.thickness,this.totalDistance-h)),s.push(n+0,n+1,n+2),!a)C2(this.normal,mp),this.extrusions(l,c,i,this.normal,this.thickness,this.totalDistance),s.push(...this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3]),o+=2;else{const d=Rp([a[0],a[1]]);sbe(u,d)&&h_(d,u,PR(d,EY(d,u,f))),_L(O2,d,u);const[p,g]=obe(yL,Xc(),mp,O2,this.thickness);let v=fD(yL,this.normal)<0?-1:1;this.extrusions(l,c,i,g,p,this.totalDistance),s.push(...this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3]),v=-1,BC(this.normal,g),o+=2,this.lastFlip=v}return o}segment(e,n,r,i,a){let o=0;const s=e.indices,l=e.positions,c=e.normals,u=this.cap==="square",f=this.join==="bevel",h=Rp([i[0],i[1]]),d=Rp([r[0],r[1]]);_L(mp,h,d);let p=0;if(this.dash&&(p=this.lineSegmentDistance(h,d),this.totalDistance+=p),this.normal||(this.normal=Xc(),C2(this.normal,mp)),!this.started)if(this.started=!0,u){const g=Xc(),v=Xc();h_(g,this.normal,mp),h_(v,this.normal,mp),c.push(v[0],v[1],0),c.push(g[0],g[1],0),l.push(r[0],r[1],r[2]|0,this.totalDistance-p,-this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),l.push(r[0],r[1],r[2]|0,this.totalDistance-p,this.thickness,r[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(l,c,r,this.normal,this.thickness,this.totalDistance-p);if(s.push(n+0,n+1,n+2),a){const g=Rp([a[0],a[1]]);sbe(h,g)&&h_(g,h,PR(g,EY(g,h,d))),_L(O2,g,h);const[v,y]=obe(yL,Xc(),mp,O2,this.thickness);let _=fD(yL,this.normal)<0?-1:1,E=f;!E&&this.join==="miter"&&v>this.miterLimit&&(E=!0),E?(c.push(this.normal[0],this.normal[1],0),c.push(y[0],y[1],0),l.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*_,i[2]|0),this.complex.indexes.push(this.currentIndex),l.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness*_,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s.push(...this.lastFlip!==-_?[n,n+2,n+3]:[n+2,n+1,n+3]),s.push(n+2,n+3,n+4),C2(abe,O2),BC(this.normal,abe),c.push(this.normal[0],this.normal[1],0),l.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*_,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,o+=3):(this.extrusions(l,c,i,y,v,this.totalDistance),s.push(...this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3]),_=-1,BC(this.normal,y),o+=2),this.lastFlip=_}else{if(C2(this.normal,mp),u){const g=Xc(),v=Xc();swe(v,mp,this.normal),h_(g,mp,this.normal),c.push(v[0],v[1],0),c.push(g[0],g[1],0),l.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),l.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(l,c,i,this.normal,this.thickness,this.totalDistance);s.push(...this.lastFlip===1?[n,n+2,n+3]:[n+2,n+1,n+3]),o+=2}return o}extrusions(e,n,r,i,a,o){n.push(i[0],i[1],0),n.push(i[0],i[1],0),e.push(r[0],r[1],r[2]|0,o,-a,r[2]|0),this.complex.indexes.push(this.currentIndex),e.push(r[0],r[1],r[2]|0,o,a,r[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}lineSegmentDistance(e,n){const r=n[0]-e[0],i=n[1]-e[1];return Math.sqrt(r*r+i*i)}}let R2=(function(t){return t.CYLINDER="cylinder",t.SQUARECOLUMN="squareColumn",t.TRIANGLECOLUMN="triangleColumn",t.HEXAGONCOLUMN="hexagonColumn",t.PENTAGONCOLUMN="pentagonColumn",t})({}),M2=(function(t){return t.CIRCLE="circle",t.SQUARE="square",t.TRIANGLE="triangle",t.HEXAGON="hexagon",t.PENTAGON="pentagon",t})({});function dN(t,e=0){const n=Math.PI*2/t,r=[];for(let a=0;a<t;a++)r.push(n*a+e*Math.PI/12);return r.map(a=>{const o=Math.sin(a+Math.PI/4),s=Math.cos(a+Math.PI/4);return[o,s,0]})}function TZ(){return dN(30)}function lbe(){return dN(4)}function cbe(){return dN(3)}function ube(){return dN(6,1)}function fbe(){return dN(5)}const RA={[M2.CIRCLE]:TZ,[M2.HEXAGON]:ube,[M2.TRIANGLE]:cbe,[M2.SQUARE]:lbe,[M2.PENTAGON]:fbe,[R2.CYLINDER]:TZ,[R2.HEXAGONCOLUMN]:ube,[R2.TRIANGLECOLUMN]:cbe,[R2.SQUARECOLUMN]:lbe,[R2.PENTAGONCOLUMN]:fbe};function c$t(t){const e=t[0][0],n=t[0][t[0].length-1];e[0]===n[0]&&e[1]===n[1]&&(t[0]=t[0].slice(0,t[0].length-1));const r=t[0].length,i=ky.flatten(t),{vertices:a,dimensions:o}=i,s=[],l=[];for(let u=0;u<a.length/o;u++)o===2?s.push(a[u*2],a[u*2+1],1):s.push(a[u*3],a[u*3+1],1);const c=ky(i.vertices,i.holes,i.dimensions);l.push(...c);for(let u=0;u<r;u++){const f=i.vertices.slice(u*o,(u+1)*o);let h=i.vertices.slice((u+1)*o,(u+2)*o);h.length===0&&(h=i.vertices.slice(0,o));const d=s.length/3;s.push(f[0],f[1],1,h[0],h[1],1,f[0],f[1],0,h[0],h[1],0),l.push(...[0,2,1,2,3,1].map(p=>p+d))}return{positions:s,index:l}}function u$t(t){const e=ky.flatten(t),n=ky(e.vertices,e.holes,e.dimensions);return{positions:e.vertices,index:n}}function q4e(t,e=!1){const n=t[0][0],r=t[0][t[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(t[0]=t[0].slice(0,t[0].length-1));const i=t[0].length,a=ky.flatten(t),{vertices:o,dimensions:s,holes:l}=a,c=[],u=[],f=[];for(let d=0;d<o.length/s;d++)c.push(o[d*s],o[d*s+1],1,-1,-1),f.push(0,0,1);const h=G4e(o,l,s,e);u.push(...h);for(let d=0;d<i;d++){const p=a.vertices.slice(d*s,(d+1)*s);let g=a.vertices.slice((d+1)*s,(d+2)*s);g.length===0&&(g=a.vertices.slice(0,s));const v=c.length/5;c.push(p[0],p[1],1,0,0,g[0],g[1],1,.1,0,p[0],p[1],0,0,.8,g[0],g[1],0,.1,.8);const y=f$t([g[0],g[1],1],[p[0],p[1],0],[p[0],p[1],1],e);f.push(...y,...y,...y,...y),u.push(...[1,2,0,3,2,1].map(_=>_+v))}return{positions:c,index:u,normals:f}}function f$t(t,e,n,r=!1){const i=Pr(),a=Pr(),o=Pr();r&&(t=wk(t),e=wk(e),n=wk(n));const s=yr(...t),l=yr(...e),c=yr(...n);lD(i,c,l),lD(a,s,l),uA(o,i,a);const u=Pr();return Ic(u,o),u}const bL={};function sx(t){const e=Px(t.coordinates);return{vertices:[...e,...e,...e,...e],indices:[0,1,2,2,3,0],size:e.length}}function hbe(t){const e=Px(t.coordinates),n=Y4e(e);return{vertices:[...n,...n,...n,...n],indices:[0,1,2,2,3,0],size:n.length}}function zne(t){const{shape:e}=t,{positions:n,index:r,normals:i}=m$t(e,!1);return{vertices:n,indices:r,normals:i,size:5}}function h$t(t){const e=Px(t.coordinates);return{vertices:[...e],indices:[0],size:e.length}}function AZ(t){const{coordinates:e}=t,n=new l$t({dash:!0,join:"bevel"});let r=e;r[0]&&!Array.isArray(r[0][0])&&(r=[e]),r.forEach(a=>{n.extrude(a)});const i=n.complex;return{vertices:i.positions,indices:i.indices,normals:i.normals,indexes:i.indexes,size:6}}function d$t(t){const{coordinates:e}=t,n=[];if(!Array.isArray(e[0]))return{vertices:[],indices:[],normals:[],size:6,count:0};const{results:r,totalDistance:i}=p$t(e);return r.map(a=>{n.push(a[0],a[1],a[2],a[3],0,i)}),{vertices:n,indices:[],normals:[],size:6,count:r.length}}function dbe(t,e){const n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function JW(t,e){return t.length<3&&t.push(0),e!==void 0&&t.push(e),t}function p$t(t){let e=t;Array.isArray(e)&&Array.isArray(e[0])&&Array.isArray(e[0][0])&&(e=t.flat());let n=0;if(e.length<2)return{results:e,totalDistance:0};{const r=[],i=JW(e[0],n);r.push(i);for(let o=1;o<e.length-1;o++){const s=dbe(Rp(e[o-1]),Rp(e[o]));n+=s;const l=JW(e[o],n);r.push(l),r.push(l)}const a=dbe(Rp(e[e.length-2]),Rp(e[e.length-1]));return n+=a,r.push(JW(e[e.length-1],n)),{results:r,totalDistance:n}}}function pN(t){const{coordinates:e}=t,n=ky.flatten(e),{vertices:r,dimensions:i,holes:a}=n;return{indices:G4e(r,a,i),vertices:r,size:i}}function g$t(t){const{indices:e,vertices:n,size:r}=pN(t);return{indices:e,vertices:v$t(n),size:r+4}}function v$t(t){const e=[],{center:n,radius:r}=mFt(t);for(let i=0;i<t.length;i+=2){const a=t[i],o=t[i+1];e.push(a,o,0,...n,r)}return e}function Z4e(t){const e=t.coordinates,{positions:n,index:r,normals:i}=q4e(e,!0);return{vertices:n,indices:r,normals:i,size:5}}function K4e(t){const{shape:e}=t,{positions:n,index:r}=y$t(e);return{vertices:n,indices:r,size:3}}function N5(t){const e=t.coordinates;return{vertices:[...e[0],0,0,0,...e[1],0,1,0,...e[2],0,1,1,...e[3],0,0,1],indices:[0,1,2,0,2,3],size:5}}function $ne(t,e){const{segmentNumber:n=30}=e,r=t.coordinates,i=[],a=[];for(let o=0;o<n;o++)i.push(o,1,o,r[0][0],r[0][1],r[1][0],r[1][1],o,-1,o,r[0][0],r[0][1],r[1][0],r[1][1]),o!==n-1&&a.push(...[0,1,2,1,3,2].map(s=>o*2+s));return{vertices:i,indices:a,size:7}}function pbe(t){const e=t.coordinates;e.length===2&&e.push(0);const n=EL(-1,1),r=EL(1,1),i=EL(-1,-1),a=EL(1,-1);return{vertices:[...e,...n,...e,...i,...e,...a,...e,...r],indices:[0,1,2,3,0,2],size:5}}function m$t(t,e=!1){if(bL&&bL[t])return bL[t];const n=RA[t]?RA[t]():RA.cylinder(),r=q4e([n],e);return bL[t]=r,r}function y$t(t){const e=["cylinder","triangleColumn","hexagonColumn","squareColumn"],n=RA[t]?RA[t]():RA.circle();return e.indexOf(t)===-1?u$t([n]):c$t([n])}function EL(t,e){const n=(t+1)/2,r=(e+1)/2;return[n,r]}function $hn(){const t=X4e(P5,{segments:V4e}),{positionsArr:e,indicesArr:n,normalArr:r}=t;return{vertices:e,indices:n,size:5,normals:r}}function Hhn(){const t=X4e(P5+s$t,{segments:V4e}),{positionsArr:e,indicesArr:n,normalArr:r}=t;return{vertices:e,indices:n,size:5,normals:r}}function Q4e(t,e){return{type:t.type,field:"value",items:t.positions.map((n,r)=>({[e]:r>=t.colors.length?null:t.colors[r],value:n}))}}const _$t=`in vec4 v_color;

#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,b$t=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location =  ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;

layout(std140) uniform commonUniforms {
    vec2 u_radius;
    float u_opacity;
    float u_coverage;
    float u_angle;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_color.a *= u_opacity;

  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset = a_Position.xy * u_radius * rotationMatrix * u_coverage;

  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);
  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(project_pos);

  setPickingColor(a_PickingColor);
}
`;class E$t extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,POS:9})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{opacity:e,coverage:n,angle:r}=this.layer.getLayerConfig(),i={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:e||1,u_coverage:n||.9,u_angle:r||0};return this.getUniformsBufferInfo(i)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"heatmapGrid",vertexShader:b$t,fragmentShader:_$t,defines:e.getDefines(),triangulation:K4e,primitive:se.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:fr.Attribute,descriptor:{shaderLocation:this.attributeLocation.POS,name:"a_Pos",buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:e=>{const n=e.coordinates;return[n[0],n[1],0]}}})}}const x$t=`in vec4 v_color;

layout(std140) uniform commonUniforms {
  vec2 u_radius;
  float u_opacity;
  float u_coverage;
  float u_angle;
};

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,S$t=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  vec2 u_radius;
  float u_opacity;
  float u_coverage;
  float u_angle;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "light"
#pragma include "picking"

void main() {
  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset = vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage);

  vec2 lnglat = unProjectFlat(a_Pos.xy + offset); // 
  vec4 project_pos = project_position(vec4(lnglat, a_Position.z * a_Size, 1.0));

  float lightWeight = calc_lighting(project_pos);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w);

  gl_Position = project_common_position_to_clipspace(project_pos);

  setPickingColor(a_PickingColor);
}
`;class T$t extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{opacity:e,coverage:n,angle:r}=this.layer.getLayerConfig(),i={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:e||1,u_coverage:n||.9,u_angle:r||0};return this.getUniformsBufferInfo(i)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"heatmapGrid3d",vertexShader:S$t,fragmentShader:x$t,defines:e.getDefines(),triangulation:zne,primitive:se.TRIANGLES,depth:{enable:!0}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n}=e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:fr.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:fr.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:e=>{const n=e.coordinates;return[n[0],n[1],0]}}})}}function A$t(t,e){const n=[],r=[],i=[],a=t+1,o=e+1,s=t/2,l=e/2;for(let c=0;c<o;c++){const u=c-l;for(let f=0;f<a;f++){const h=f-s;r.push(h/s,-u/l,0),i.push(f/t),i.push(1-c/e)}}for(let c=0;c<e;c++)for(let u=0;u<t;u++){const f=u+a*c,h=u+a*(c+1),d=u+1+a*(c+1),p=u+1+a*c;n.push(f,h,p),n.push(h,d,p)}return{vertices:r,indices:n,uvs:i}}const w$t=`layout(std140) uniform commonUniforms {
  mat4 u_ViewProjectionMatrixUncentered;
  mat4 u_InverseViewProjectionMatrix;
  float u_opacity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
  float u_common_uniforms_padding3;
};

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;
in float v_intensity;
out vec4 outputColor;

void main() {
  float intensity = texture(SAMPLER_2D(u_texture), v_texCoord).r;
  vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(intensity, 0));
  outputColor = color;
  // gl_FragColor.a = color.a * smoothstep(0.1,0.2,intensity)* u_opacity;
  outputColor.a = color.a * smoothstep(0.0, 0.1, intensity) * u_opacity;
}
`,O$t=`layout(location = 0) in vec3 a_Position;
layout(location = 10) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  mat4 u_ViewProjectionMatrixUncentered;
  mat4 u_InverseViewProjectionMatrix;
  float u_opacity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
  float u_common_uniforms_padding3;
};

uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

out vec2 v_texCoord;
out float v_intensity;

vec2 toBezier(float t, vec2 P0, vec2 P1, vec2 P2, vec2 P3) {
  float t2 = t * t;
  float one_minus_t = 1.0 - t;
  float one_minus_t2 = one_minus_t * one_minus_t;
  return P0 * one_minus_t2 * one_minus_t +
  P1 * 3.0 * t * one_minus_t2 +
  P2 * 3.0 * t2 * one_minus_t +
  P3 * t2 * t;
}
vec2 toBezier(float t, vec4 p) {
  return toBezier(t, vec2(0.0, 0.0), vec2(p.x, p.y), vec2(p.z, p.w), vec2(1.0, 1.0));
}

#pragma include "projection"
#pragma include "project"

void main() {
  v_texCoord = a_Uv;

  vec2 pos = a_Uv * vec2(2.0) - vec2(1.0); //  0 -> 1  uv  -1 -> 1 NDC

  vec4 p1 = vec4(pos, 0.0, 1.0); // x/y z == 0
  vec4 p2 = vec4(pos, 1.0, 1.0); // x/yz==1 

  vec4 inverseP1 = u_InverseViewProjectionMatrix * p1; // p1
  vec4 inverseP2 = u_InverseViewProjectionMatrix * p2;

  inverseP1 = inverseP1 / inverseP1.w; // 
  inverseP2 = inverseP2 / inverseP2.w;

  float zPos = (0.0 - inverseP1.z) / (inverseP2.z - inverseP1.z); // ??
  vec4 position = inverseP1 + zPos * (inverseP2 - inverseP1);

  vec4 b = vec4(0.5, 0.0, 1.0, 0.5);
  float fh;

  v_intensity = texture(SAMPLER_2D(u_texture), v_texCoord).r;
  fh = toBezier(v_intensity, b).y;
  gl_Position = u_ViewProjectionMatrixUncentered * vec4(position.xy, fh * project_pixel(50.0), 1.0);

}
`,C$t=`uniform sampler2D u_texture; // 
uniform sampler2D u_colorTexture; // 

layout(std140) uniform commonUniforms {
  float u_opacity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
  float u_common_uniforms_padding3;
};
in vec2 v_texCoord;
out vec4 outputColor;

#pragma include "scene_uniforms"

float getBlurIndusty() {
  float vW = 2.0 / u_ViewportSize.x;
  float vH = 2.0 / u_ViewportSize.y;
  vec2 vUv = v_texCoord;
  float i11 = texture(SAMPLER_2D(u_texture), vec2(vUv.x - 1.0 * vW, vUv.y + 1.0 * vH)).r;
  float i12 = texture(SAMPLER_2D(u_texture), vec2(vUv.x - 0.0 * vW, vUv.y + 1.0 * vH)).r;
  float i13 = texture(SAMPLER_2D(u_texture), vec2(vUv.x + 1.0 * vW, vUv.y + 1.0 * vH)).r;

  float i21 = texture(SAMPLER_2D(u_texture), vec2(vUv.x - 1.0 * vW, vUv.y)).r;
  float i22 = texture(SAMPLER_2D(u_texture), vec2(vUv.x, vUv.y)).r;
  float i23 = texture(SAMPLER_2D(u_texture), vec2(vUv.x + 1.0 * vW, vUv.y)).r;

  float i31 = texture(SAMPLER_2D(u_texture), vec2(vUv.x - 1.0 * vW, vUv.y - 1.0 * vH)).r;
  float i32 = texture(SAMPLER_2D(u_texture), vec2(vUv.x - 0.0 * vW, vUv.y - 1.0 * vH)).r;
  float i33 = texture(SAMPLER_2D(u_texture), vec2(vUv.x + 1.0 * vW, vUv.y - 1.0 * vH)).r;

  return (i11 + i12 + i13 + i21 + i21 + i22 + i23 + i31 + i32 + i33) / 9.0;
}

void main() {
  // float intensity = texture(u_texture, v_texCoord).r;
  float intensity = getBlurIndusty();
  vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(intensity, 0.0));
  outputColor = color;
  outputColor.a = color.a * smoothstep(0.0, 0.1, intensity) * u_opacity;
}
`,R$t=`layout(location = 0) in vec3 a_Position;
layout(location = 10) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  float u_opacity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
  float u_common_uniforms_padding3;
};

#pragma include "scene_uniforms"

out vec2 v_texCoord;
void main() {
  v_texCoord = a_Uv;
  #ifdef VIEWPORT_ORIGIN_TL
  v_texCoord.y = 1.0 - v_texCoord.y;
  #endif

  gl_Position = vec4(a_Position.xy, 0, 1.0);
}
`,M$t=`layout(std140) uniform commonUniforms {
  float u_radius;
  float u_intensity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
};

in vec2 v_extrude;
in float v_weight;
out vec4 outputColor;
#define GAUSS_COEF (0.3989422804014327)

void main() {
  float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);
  float val = v_weight * u_intensity * GAUSS_COEF * exp(d);
  outputColor = vec4(val, 1.0, 1.0, 1.0);
}
`,P$t=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_DIR) in vec2 a_Dir;

layout(std140) uniform commonUniforms {
  float u_radius;
  float u_intensity;
  float u_common_uniforms_padding1;
  float u_common_uniforms_padding2;
};

out vec2 v_extrude;
out float v_weight;

#define GAUSS_COEF (0.3989422804014327)

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 picking_color_placeholder = u_PickingColor;

  v_weight = a_Size;
  float ZERO = 1.0 / 255.0 / 16.0;
  float extrude_x = a_Dir.x * 2.0 - 1.0;
  float extrude_y = a_Dir.y * 2.0 - 1.0;
  vec2 extrude_dir = normalize(vec2(extrude_x, extrude_y));
  float S = sqrt(-2.0 * log(ZERO / a_Size / u_intensity / GAUSS_COEF)) / 2.5;
  v_extrude = extrude_dir * S;

  vec2 offset = project_pixel(v_extrude * u_radius);
  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

}
`,{isEqual:N$t}=gs;class gbe extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0),Z(this,"colorTexture",void 0),Z(this,"heatmapFramerBuffer",void 0),Z(this,"heatmapTexture",void 0),Z(this,"intensityModel",void 0),Z(this,"colorModel",void 0),Z(this,"shapeType",void 0),Z(this,"preRampColors",void 0),Z(this,"colorModelUniformBuffer",[]),Z(this,"heat3DModelUniformBuffer",[])}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10,DIR:11})}prerender(){const{clear:e,useFramebuffer:n}=this.rendererService;n(this.heatmapFramerBuffer,()=>{e({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.heatmapFramerBuffer}),this.drawIntensityMode()})}render(e){const{rampColors:n}=this.layer.getLayerConfig();N$t(this.preRampColors,n)||this.updateColorTexture(),this.shapeType==="heatmap"?this.drawHeatMap(e):this.draw3DHeatMap(e)}getUninforms(){throw new Error("Method not implemented.")}initModels(){var e=this;return kt(function*(){var n;const{createFramebuffer:r,getViewportSize:i,createTexture2D:a}=e.rendererService,o=e.styleAttributeService.getLayerStyleAttribute("shape"),s=(o==null||(n=o.scale)===null||n===void 0?void 0:n.field)||"heatmap";e.shapeType=s,e.intensityModel=yield e.buildHeatMapIntensity(),e.colorModel=s==="heatmap"?e.buildHeatmap():e.build3dHeatMap();const{width:l,height:c}=i();return e.heatmapTexture=a({width:Math.floor(l/4),height:Math.floor(c/4),wrapS:se.CLAMP_TO_EDGE,wrapT:se.CLAMP_TO_EDGE,min:se.LINEAR,mag:se.LINEAR,usage:Ix.RENDER_TARGET}),e.heatmapFramerBuffer=r({color:e.heatmapTexture,depth:!0,width:Math.floor(l/4),height:Math.floor(c/4)}),e.updateColorTexture(),[e.intensityModel,e.colorModel]})()}buildModels(){var e=this;return kt(function*(){return e.initModels()})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"dir",type:fr.Attribute,descriptor:{name:"a_Dir",shaderLocation:this.attributeLocation.DIR,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:(e,n,r)=>[r[3],r[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=1}=e;return[n]}}})}buildHeatMapIntensity(){var e=this;return kt(function*(){return e.uniformBuffers=[e.rendererService.createBuffer({data:new Float32Array(4).fill(0),isUBO:!0})],e.layer.triangulation=pbe,yield e.layer.buildLayerModel({moduleName:"heatmapIntensity",vertexShader:P$t,fragmentShader:M$t,triangulation:pbe,defines:e.getDefines(),depth:{enable:!1},cull:{enable:!0,face:se.FRONT}})})()}buildHeatmap(){this.shaderModuleService.registerModule("heatmapColor",{vs:R$t,fs:C$t}),this.colorModelUniformBuffer=[this.rendererService.createBuffer({data:new Float32Array(4).fill(0),isUBO:!0})];const{vs:e,fs:n,uniforms:r}=this.shaderModuleService.getModule("heatmapColor"),{createAttribute:i,createElements:a,createBuffer:o,createModel:s}=this.rendererService;return s({vs:e,fs:n,uniformBuffers:[...this.colorModelUniformBuffer,...this.rendererService.uniformBuffers],attributes:{a_Position:i({shaderLocation:this.attributeLocation.POSITION,buffer:o({data:[-1,1,0,1,1,0,-1,-1,0,1,-1,0],type:se.FLOAT}),size:3}),a_Uv:i({shaderLocation:this.attributeLocation.UV,buffer:o({data:[0,1,1,1,0,0,1,0],type:se.FLOAT}),size:2})},uniforms:ze({},r),depth:{enable:!1},elements:a({data:[0,2,1,2,3,1],type:se.UNSIGNED_INT,count:6})})}build3dHeatMap(){const{getViewportSize:e}=this.rendererService,{width:n,height:r}=e(),i=A$t(n/4,r/4);this.shaderModuleService.registerModule("heatmap3dColor",{vs:O$t,fs:w$t}),this.heat3DModelUniformBuffer=[this.rendererService.createBuffer({data:new Float32Array(36).fill(0),isUBO:!0})];const{vs:a,fs:o,uniforms:s}=this.shaderModuleService.getModule("heatmap3dColor"),{createAttribute:l,createElements:c,createBuffer:u,createModel:f}=this.rendererService;return f({vs:a,fs:o,attributes:{a_Position:l({shaderLocation:this.attributeLocation.POSITION,buffer:u({data:i.vertices,type:se.FLOAT}),size:3}),a_Uv:l({shaderLocation:this.attributeLocation.UV,buffer:u({data:i.uvs,type:se.FLOAT}),size:2})},primitive:se.TRIANGLES,uniformBuffers:[...this.heat3DModelUniformBuffer,...this.rendererService.uniformBuffers],uniforms:ze({},s),depth:{enable:!0},blend:{enable:!0,func:{srcRGB:se.SRC_ALPHA,srcAlpha:1,dstRGB:se.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},elements:c({data:i.indices,type:se.UNSIGNED_INT,count:i.indices.length})})}drawIntensityMode(){var e;const{intensity:n=10,radius:r=5}=this.layer.getLayerConfig(),i={u_radius:r,u_intensity:n};this.uniformBuffers[0].subData({offset:0,data:[r,n]}),this.layerService.beforeRenderData(this.layer),this.layer.hooks.beforeRender.call(),(e=this.intensityModel)===null||e===void 0||e.draw({uniforms:i,blend:{enable:!0,func:{srcRGB:se.ONE,srcAlpha:1,dstRGB:se.ONE,dstAlpha:1}},stencil:{enable:!1,mask:255,func:{cmp:514,ref:1,mask:255}}}),this.layer.hooks.afterRender.call()}drawHeatMap(e){var n;const{opacity:r=1}=this.layer.getLayerConfig(),i={u_opacity:r,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer},a=[this.heatmapTexture,this.colorTexture];this.colorModelUniformBuffer[0].subData({offset:0,data:[r]}),(n=this.colorModel)===null||n===void 0||n.draw({uniforms:i,textures:a,blend:this.getBlend(),stencil:this.getStencil(e)})}draw3DHeatMap(e){var n;const{opacity:r=1}=this.layer.getLayerConfig(),i=Zr();qs(i,this.cameraService.getViewProjectionMatrixUncentered());const a={u_opacity:r,u_colorTexture:this.colorTexture,u_texture:this.heatmapFramerBuffer,u_ViewProjectionMatrixUncentered:this.cameraService.getViewProjectionMatrixUncentered(),u_InverseViewProjectionMatrix:[...i]};this.heat3DModelUniformBuffer[0].subData({offset:0,data:[...a.u_ViewProjectionMatrixUncentered,...a.u_InverseViewProjectionMatrix,r]});const o=[this.heatmapTexture,this.colorTexture];(n=this.colorModel)===null||n===void 0||n.draw({uniforms:a,textures:o,blend:{enable:!0,func:{srcRGB:se.SRC_ALPHA,srcAlpha:1,dstRGB:se.ONE_MINUS_SRC_ALPHA,dstAlpha:1}},stencil:this.getStencil(e)})}updateColorTexture(){const{createTexture2D:e}=this.rendererService;this.texture&&this.texture.destroy();const{rampColors:n}=this.layer.getLayerConfig(),r=JBe(n);this.colorTexture=e({data:r.data,usage:Ix.SAMPLED,width:r.width,height:r.height,wrapS:se.CLAMP_TO_EDGE,wrapT:se.CLAMP_TO_EDGE,min:se.NEAREST,mag:se.NEAREST,flipY:!1,unorm:!0}),this.preRampColors=n}}const I$t=`in vec4 v_color;

#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,L$t=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;

layout(std140) uniform commonUniforms {
  vec2 u_radius;
  float u_opacity;
  float u_coverage;
  float u_angle;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

void main() {
  v_color = a_Color;
  v_color.a *= u_opacity;

  mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));
  vec2 offset = vec2(a_Position.xy * u_radius * rotationMatrix * u_coverage);
  vec2 lnglat = unProjectFlat(a_Pos.xy + offset);

  vec4 project_pos = project_position(vec4(lnglat, 0, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class k$t extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,POS:9})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{opacity:e,coverage:n,angle:r}=this.layer.getLayerConfig(),i={u_radius:[this.layer.getSource().data.xOffset,this.layer.getSource().data.yOffset],u_opacity:e||1,u_coverage:n||.9,u_angle:r||0};return this.getUniformsBufferInfo(i)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"heatmapHexagon",vertexShader:L$t,fragmentShader:I$t,defines:e.getDefines(),triangulation:K4e,depth:{enable:!1},primitive:se.TRIANGLES})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"pos",type:fr.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:e=>{const n=e.coordinates;return[n[0],n[1],0]}}})}}const D$t={heatmap:gbe,heatmap3d:gbe,grid:E$t,grid3d:T$t,hexagon:k$t};class B$t extends oS{constructor(...e){super(...e),Z(this,"type","HeatMapLayer")}buildModels(){var e=this;return kt(function*(){const n=e.getModelType();e.layerModel=new D$t[n](e),yield e.initLayerModels()})()}prerender(){this.getModelType()==="heatmap"&&this.layerModel&&this.layerModel.prerender()}renderModels(e={}){return this.getModelType()==="heatmap"?(this.layerModel&&this.layerModel.render(e),this):this.encodeDataLength<=0&&!this.forceRender?this:(this.hooks.beforeRender.call(),this.models.forEach(r=>r.draw({uniforms:this.layerModel.getUninforms(),blend:this.layerModel.getBlend(),stencil:this.layerModel.getStencil(e)})),this.hooks.afterRender.call(),this)}updateModelData(e){e.attributes&&e.elements?this.models[0].updateAttributesAndElements(e.attributes,e.elements):console.warn("data error")}getModelType(){var e;const n=this.styleAttributeService.getLayerStyleAttribute("shape"),{shape3d:r}=this.getLayerConfig(),a=this.getSource().data.type,o=(n==null||(e=n.scale)===null||e===void 0?void 0:e.field)||"heatmap";return o==="heatmap"||o==="heatmap3d"?"heatmap":a==="hexagon"?r?.indexOf(o)===-1?"hexagon":"grid3d":a==="grid"?r?.indexOf(o)===-1?"grid":"grid3d":"heatmap"}getLegend(e){if(this.getModelType()==="heatmap"){if(e!=="color")return{type:void 0,field:void 0,items:[]};const n=this.getLayerConfig().rampColors;return Q4e(n,e)}else return super.getLegend(e)}}const F$t=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

in vec2 v_texCoord;
out vec4 outputColor;
vec3 setContrast(vec3 rgb, float contrast) {
  vec3 color = mix(vec3(0.5), rgb, contrast);
  color = clamp(color, 0.0, 1.0);
  return color;
}
vec3 setSaturation(vec3 rgb, float adjustment) {
  const vec3 grayVector = vec3(0.2125, 0.7154, 0.0721);
  vec3 intensity = vec3(dot(rgb, grayVector));
  vec3 color = mix(intensity, rgb, adjustment);
  color = clamp(color, 0.0, 1.0);
  return color;
}
void main() {
  vec4 color = texture(SAMPLER_2D(u_texture),vec2(v_texCoord.x,v_texCoord.y));
  //brightness
  color.rgb = mix(vec3(0.0, 0.0, 0.0), color.rgb, u_brightness);
  //contrast
  color.rgb = setContrast(color.rgb, u_contrast);
  // saturation
  color.rgb = setSaturation(color.rgb, u_saturation);
  // gamma
  color.rgb = pow(color.rgb, vec3(u_gamma));
  outputColor = color;
  outputColor.a *= u_opacity;
  if(outputColor.a < 0.01)
    discard;
}
`,U$t=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
    float u_opacity:1.0;
    float u_brightness:1.0;
    float u_contrast:1.0;
    float u_saturation:1.0;
    float u_gamma:1.0;
};

out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;let j$t=class extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:e,brightness:n,contrast:r,saturation:i,gamma:a}=this.layer.getLayerConfig(),o={u_opacity:y2(e,1),u_brightness:y2(n,1),u_contrast:y2(r,1),u_saturation:y2(i,1),u_gamma:y2(a,1)};return this.textures=[this.texture],this.getUniformsBufferInfo(o)}initModels(){var e=this;return kt(function*(){return yield e.loadTexture(),e.buildModels()})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy()}loadTexture(){var e=this;return kt(function*(){const{createTexture2D:n}=e.rendererService,i=yield e.layer.getSource().data.images;e.texture=n({data:i[0],width:i[0].width,height:i[0].height,mag:se.LINEAR,min:se.LINEAR})})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"rasterImage",vertexShader:U$t,fragmentShader:F$t,defines:e.getDefines(),triangulation:N5,primitive:se.TRIANGLES,blend:{enable:!0},depth:{enable:!1},pickingEnabled:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:(e,n,r)=>[r[3],r[4]]}})}};const z$t={image:j$t};class $$t extends oS{constructor(...e){super(...e),Z(this,"type","ImageLayer")}buildModels(){var e=this;return kt(function*(){const n=e.getModelType();e.layerModel=new z$t[n](e),yield e.initLayerModels()})()}getDefaultConfig(){const e=this.getModelType();return{image:{}}[e]}getModelType(){return"image"}}const H$t=`
#define Animate 0.0
#define LineTexture 1.0
uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_lineData;
//dash
in vec4 v_dash_array;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"

void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      discard;
    };
  }
  float animateSpeed = 0.0; // 
  outputColor = v_color;
  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_lineData.b, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;
  }

  // 
  if(u_line_texture == LineTexture) { // while load texture
    float arcRadio = smoothstep( 0.0, 1.0, (v_lineData.r / segmentNumber));
    // float arcRadio = smoothstep( 0.0, 1.0, d_distance_ratio);

    float count = v_lineData.g; // 

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);
    float v = v_lineData.a; //  v
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;

    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
    
  } else {
     outputColor = filterColor(outputColor);
  }
}`,G$t=`#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_lineDir: 1.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_blur : 0.9;
  float u_line_type: 0.0;
  float u_time;
  float u_linearColor: 0.0;
};

out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_lineData;
//dash
out vec4 v_dash_array;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}
vec2 midPoint(vec2 source, vec2 target, float arcThetaOffset) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = arcThetaOffset;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  if (u_lineDir == 1.0) {
    // 
    return mid;
  } else {
    // 
    // (mid + vmin)/2 = (s + t)/2
    vec2 vmid = source + target - mid;
    return vmid;
  }
  // return mid;
}
float getSegmentRatio(float index) {
  // dash: index / (segmentNumber - 1.);
  // normal: smoothstep(0.0, 1.0, index / (segmentNumber - 1.));
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
  //  return index / (segmentNumber - 1.);
}
vec2 interpolate(vec2 source, vec2 target, float t, float arcThetaOffset) {
  // if the angularDist is PI, linear interpolation is applied. otherwise, use spherical interpolation
  vec2 mid = midPoint(source, target, arcThetaOffset);
  vec3 x = vec3(source.x, mid.x, target.x);
  vec3 y = vec3(source.y, mid.y, target.y);
  return vec2(bezier3(x, t), bezier3(y, t));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
   dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
   return dir_screenspace.xy * sign(offset_direction);
}

void main() {
  //vs
  if (u_linearColor == 1.0) {
    float d_segmentIndex = a_Position.x + 1.0; // 
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex / segmentNumber);
  } else {
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;

  vec2 source_world = a_Instance.rg; // 
  vec2 target_world = a_Instance.ba; // 

  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);

  //  dashArray  distanceRatio 
  float total_Distance = pixelDistance(source_world, target_world) / 2.0 * PI;
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  v_distance_ratio = segmentIndex / segmentNumber;

  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));
  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  float d_distance_ratio;

  if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
      if(u_lineDir != 1.0) {
        d_distance_ratio = 1.0 - d_distance_ratio;
      }
  }

  v_lineData.b = d_distance_ratio;

  vec4 source = project_position(vec4(source_world, 0, 1.), a_Instance64Low.xy);
  vec4 target = project_position(vec4(target_world, 0, 1.), a_Instance64Low.zw);

  vec2 currPos = interpolate(source.xy, target.xy, segmentRatio, thetaOffset);
  vec2 nextPos = interpolate(source.xy, target.xy, nextSegmentRatio, thetaOffset);

  vec2 offset = project_pixel(
    getExtrusionOffset((nextPos.xy - currPos.xy) * indexDir, a_Position.y)
  );

  float d_segmentIndex = a_Position.x + 1.0; // 
  v_lineData.r = d_segmentIndex;

  if(LineTexture == u_line_texture) { // 
    float arcDistrance = length(source - target); // 
    arcDistrance = project_pixel(arcDistrance);

    v_iconMapUV = a_iconMapUV;

    float pixelLen = project_pixel_texture(u_icon_step); //  - 
    float texCount = floor(arcDistrance / pixelLen); // 
    v_lineData.g = texCount;

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // 
    float linePixelSize = project_pixel(a_Size); // 
    v_lineData.a = lineOffsetWidth / linePixelSize; //  v 
  }

  gl_Position = project_common_position_to_clipspace(vec4(currPos.xy + offset, 0, 1.0));

  setPickingColor(a_PickingColor);
}
`,W$t={solid:0,dash:1};class V$t extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0),Z(this,"updateTexture",()=>{const{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=n({data:this.iconService.getCanvas(),mag:se.NEAREST,min:se.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:e,targetColor:n,textureBlend:r="normal",lineType:i="solid",dashArray:a=[10,5],forward:o=!0,lineTexture:s=!1,iconStep:l=100,segmentNumber:c=30}=this.layer.getLayerConfig(),{animateOption:u}=this.layer.getLayerConfig();let f=a;i!=="dash"&&(f=[0,0]),f.length===2&&f.push(0,0);let h=0,d=[0,0,0,0],p=[0,0,0,0];if(e&&n&&(d=Xo(e),p=Xo(n),h=1),this.rendererService.getDirty()){var g;(g=this.texture)===null||g===void 0||g.bind()}const v={u_animate:this.animateOption2Array(u),u_dash_array:f,u_sourceColor:d,u_targetColor:p,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:c,u_lineDir:o?1:-1,u_icon_step:l,u_line_texture:s?1:0,u_textureBlend:r==="normal"?0:1,u_blur:.9,u_line_type:W$t[i||"solid"],u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:h};return this.getUniformsBufferInfo(v)}initModels(){var e=this;return kt(function*(){return e.updateTexture(),e.iconService.on("imageUpdate",e.updateTexture),e.buildModels()})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:H$t,vert:G$t,type:""}}buildModels(){var e=this;return kt(function*(){e.initUniformsBuffer();const{segmentNumber:n=30}=e.layer.getLayerConfig(),{frag:r,vert:i,type:a}=e.getShaders();return[yield e.layer.buildLayerModel({moduleName:"lineArc2d"+a,vertexShader:i,fragmentShader:r,defines:e.getDefines(),inject:e.getInject(),triangulation:$ne,depth:{enable:!1},styleOption:{segmentNumber:n}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=1}=e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:fr.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>[r[3],r[4],r[5],r[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:fr.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>[vc(r[3]),vc(r[4]),vc(r[5]),vc(r[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const n=this.iconService.getIconMap(),{texture:r}=e,{x:i,y:a}=n[r]||{x:0,y:0};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:fr.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{thetaOffset:n=1}=e;return[n]}}})}}const Y$t=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};

in vec4 v_color;
in vec4 v_dash_array;
in float v_segmentIndex;
in vec2 v_iconMapUV;
in vec4 v_line_data;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // 
  float d_distance_ratio = v_line_data.g; // 
  outputColor = v_color;

  if(u_line_type == LineTypeDash) {
    float flag = 0.;
    float dashLength = mod(d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      flag = 1.;
    }
    outputColor.a *=flag;
  }

  if(u_animate.x == Animate && u_line_texture != LineTexture) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);

      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      // alpha = smoothstep(0., 1., alpha);
      alpha = clamp(alpha, 0.0, 1.0);
      outputColor.a *= alpha;

      // u_animate
      // x enable
      // y duration
      // z interval
      // w trailLength
  }

  if(u_line_texture == LineTexture && u_line_type != LineTypeDash) { // while load texture
    // float arcRadio = smoothstep( 0.0, 1.0, (v_segmentIndex / segmentNumber));
    float arcRadio = v_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // // 

    float time = 0.0;
    if(u_animate.x == Animate) {
      time = u_time / u_animate.y;
    }
    float redioCount = arcRadio * count;

    float u = fract(redioCount - time);

    float v = v_line_data.a;  //  v 
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_animate.x == Animate) {
      float currentPlane = floor(redioCount - time);
      float textureStep = floor(count * u_animate.z);
      float a = mod(currentPlane, textureStep);
      if(a < textureStep - 1.0) {
        pattern = vec4(0.0);
      }
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
          discard;
        } else {
          outputColor = filterColor(pattern);
        }
    }

  } else {
    outputColor = filterColor(outputColor);
  }
}
`,X$t=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;


layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_globel;
  float u_globel_radius;
  float u_global_height: 10;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0.0;
};
out vec4 v_color;
out vec4 v_dash_array;
out float v_segmentIndex;
out vec2 v_iconMapUV;
out vec4 v_line_data;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps (float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return smoothstep(0.0, 1.0, index / (segmentNumber - 1.0));
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(
    mix(source, target, segmentRatio),
    sqrt(max(0.0, vertex_height))
  );
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;

  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}

float torad(float deg) {
  return (deg / 180.0) * acos(-1.0);
}

vec3 lglt2xyz(vec2 lnglat) {
  float pi = 3.1415926;
  // + Math.PI/2 
  float lng = torad(lnglat.x) + pi / 2.0;
  float lat = torad(lnglat.y);

  // 
  float radius = u_globel_radius;

  float z = radius * cos(lat) * cos(lng);
  float x = radius * cos(lat) * sin(lng);
  float y = radius * sin(lat);
  return vec3(x, y, z);
}

void main() {
  //vs
  if(u_linearColor==1.0){
    float d_segmentIndex = a_Position.x + 1.0; // 
    v_color = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
  }
  else{
    v_color = a_Color;
  }
  v_color.a = v_color.a * opacity;
  vec2 source = project_position(vec4(a_Instance.rg, 0, 0), a_Instance64Low.xy).xy;
  vec2 target = project_position(vec4(a_Instance.ba, 0, 0), a_Instance64Low.zw).xy;
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  float d_distance_ratio;
   if(u_line_type == LineTypeDash) {
    d_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / (total_Distance / segmentNumber * segmentIndex);
  }
    if(u_animate.x == Animate) {
      d_distance_ratio = segmentIndex / segmentNumber;
  }
  v_line_data.g = d_distance_ratio; // 

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  vec3 curr = getPos(source, target, segmentRatio);
  vec3 next = getPos(source, target, nextSegmentRatio);
  vec2 offset = getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y);
  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);


  v_segmentIndex = a_Position.x;
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) { // 

    float arcDistrance = length(source - target);
    float pixelLen =  project_pixel_texture(u_icon_step);
    v_line_data.b = floor(arcDistrance/pixelLen); // 

    vec2 projectOffset = project_pixel(offset);
    float lineOffsetWidth = length(projectOffset + projectOffset * sign(a_Position.y)); // 
    float linePixelSize = project_pixel(a_Size);  // 
    v_line_data.a = lineOffsetWidth/linePixelSize;  //  v 

    v_iconMapUV = a_iconMapUV;
  }


  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + project_pixel(offset), curr.z * thetaOffset, 1.0));

  // 
  if(u_globel > 0.0) {
    vec3 startLngLat = lglt2xyz(a_Instance.rg);
    vec3 endLngLat = lglt2xyz(a_Instance.ba);
    float globalRadius = length(startLngLat);

    vec3 lineDir = normalize(endLngLat - startLngLat);
    vec3 midPointDir = normalize((startLngLat + endLngLat)/2.0);

    // 
    vec3 lnglatOffset = cross(lineDir, midPointDir) * a_Position.y;
    // 
    float lnglatLength = length(a_Instance.rg - a_Instance.ba)/50.0;
    // 
    float lineHeight = u_global_height * (-4.0*segmentRatio*segmentRatio + 4.0 * segmentRatio) * lnglatLength;
    // 
    vec3 globalPoint = normalize(mix(startLngLat, endLngLat, segmentRatio)) * (globalRadius + lineHeight) + lnglatOffset * a_Size;

    gl_Position = u_ViewProjectionMatrix * vec4(globalPoint, 1.0);
  }


  setPickingColor(a_PickingColor);
}
`,q$t={solid:0,dash:1};class vbe extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0),Z(this,"updateTexture",()=>{const{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=n({data:this.iconService.getCanvas(),mag:se.NEAREST,min:se.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12,THETA_OFFSET:13})}getCommonUniformsInfo(){const{sourceColor:e,targetColor:n,textureBlend:r="normal",lineType:i="solid",dashArray:a=[10,5],lineTexture:o=!1,iconStep:s=100,segmentNumber:l=30,globalArcHeight:c=10}=this.layer.getLayerConfig(),{animateOption:u}=this.layer.getLayerConfig();a.length===2&&a.push(0,0);let f=0,h=[0,0,0,0],d=[0,0,0,0];if(e&&n&&(h=Xo(e),d=Xo(n),f=1),this.rendererService.getDirty()){var p;(p=this.texture)===null||p===void 0||p.bind()}const g={u_animate:this.animateOption2Array(u),u_dash_array:a,u_sourceColor:h,u_targetColor:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_globel:this.mapService.version==="GLOBEL"?1:0,u_globel_radius:P5,u_global_height:c,segmentNumber:l,u_line_type:q$t[i]||0,u_icon_step:s,u_line_texture:o?1:0,u_textureBlend:r==="normal"?0:1,u_time:this.layer.getLayerAnimateTime()||0,u_linearColor:f};return this.getUniformsBufferInfo(g)}initModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),e.updateTexture(),e.iconService.on("imageUpdate",e.updateTexture),e.buildModels()})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}getShaders(){return{frag:Y$t,vert:X$t,type:""}}buildModels(){var e=this;return kt(function*(){const{segmentNumber:n=30}=e.layer.getLayerConfig(),{frag:r,vert:i,type:a}=e.getShaders();return[yield e.layer.buildLayerModel({moduleName:"lineArc3d"+a,vertexShader:i,fragmentShader:r,defines:e.getDefines(),inject:e.getInject(),triangulation:$ne,styleOption:{segmentNumber:n}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=1}=e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:fr.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>[r[3],r[4],r[5],r[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:fr.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>[vc(r[3]),vc(r[4]),vc(r[5]),vc(r[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const n=this.iconService.getIconMap(),{texture:r}=e,{x:i,y:a}=n[r]||{x:0,y:0};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"thetaOffset",type:fr.Attribute,descriptor:{name:"a_ThetaOffset",shaderLocation:this.attributeLocation.THETA_OFFSET,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{thetaOffset:n=1}=e;return[n]}}})}}const mbe={circle:2,triangle:2,diamond:4,rect:2,classic:3,halfTriangle:2,none:0},Ih=1/2;function Z$t(t,e){const{width:n=2,height:r=1}=e;return{vertices:[0,Ih*t,1*t*n,-(r+Ih)*t,1*t*n,(r-Ih)*t,0,Ih*t,1*t*n,-(r+Ih)*t,1*t*n,(r-Ih)*t],indices:[3,4,5],outLineIndices:[0,1,2],normals:[1*t,-2*t,1,-2*t,1.5*t,1,1*t,1.5*t,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function K$t(t,e){const{width:n=2,height:r=3}=e;return{vertices:[0,0,1*t*n,1*r,1*t*n,-1*r,0,0,1*t*n,1*r,1*t*n,-1*r],outLineIndices:[0,1,2],indices:[3,4,5],normals:[0,-1.5*t,1,2,1*t,1,-2,1*t,1,0,0,0,0,0,0,0,0,0],dimensions:2}}function Q$t(t,e){const{width:n=2,height:r=2}=e;return{vertices:[0,r/2,t*n*1,r/2,t*n*1,-r/2,0,-r/2,0,r/2,t*n*1,r/2,t*n*1,-r/2,0,-r/2],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-t,1,1,0,1,0,-t,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function J$t(t,e){const{width:n=2,height:r=3}=e;return{vertices:[0,0,1*n*t,.5*r,2*n*t,0,1*n*t,-.5*r,0,0,1*n*t,.5*r,2*n*t,0,1*n*t,-.5*r],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-t,1,1,0,1,0,-t,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function eHt(t,e){const{width:n=2,height:r=3}=e;return{vertices:[0,0,2*t*n,1*r,1.5*t*n,0,2*t*n,-1*r,0,0,2*t*n,1*r,1.5*t*n,0,2*t*n,-1*r],dimensions:2,indices:[4,5,6,4,6,7],outLineIndices:[0,1,2,0,2,3],normals:[0,-t,1,1,0,1,0,-t,1,-1,-0,1,0,0,0,0,0,0,0,0,0,0,0,0]}}function tHt(t,e){const{width:n=2,height:r=2}=e,i=TZ(),a=ky.flatten([i]),o=ky(a.vertices,a.holes,a.dimensions),s=i.map(l=>[l[0]*n*t,l[1]*r]).flat();return{vertices:[...s,...s],dimensions:2,indices:o.map(l=>l+i.length),outLineIndices:o,normals:[...i.map(l=>[l[1]*r,l[0]*n*t,1]).flat(),...new Array(i.length*3).fill(0)]}}function nHt(t,e=0,n){const r=typeof n.source=="object"?n.source.type:n.source,i=typeof n.target=="object"?n.target.type:n.target,{width:a=r?mbe[r]:0}=typeof n.source=="object"?n.source:{},{width:o=i?mbe[i]:0}=typeof n.target=="object"?n.target:{};return{vertices:[0,Ih,1*a,...t,1,Ih,-1*o,...t,1,-Ih,-1*o,...t,0,-Ih,1*a,...t,0,Ih,1*a,...t,1,Ih,-1*o,...t,1,-Ih,-1*o,...t,0,-Ih,1*a,...t],outLineIndices:[0,1,2,0,2,3].map(s=>s+e),indices:[4,5,6,4,6,7].map(s=>s+e),normals:[1,-1,1,1,1,1,-1,0,1,-1,0,1,0,0,0,0,0,0,0,0,0,0,0,0],dimensions:2}}function ybe(t,e){const n=typeof t=="object"?t.type:t,r=e==="source"?1:-1,i=typeof t=="object"?t:{};switch(n){case"circle":return tHt(r,i);case"triangle":return K$t(r,i);case"diamond":return J$t(r,i);case"rect":return Q$t(r,i);case"classic":return eHt(r,i);case"halfTriangle":return Z$t(r,i);default:return{vertices:[],indices:[],normals:[],dimensions:2,outLineIndices:[],outLineNormals:[]}}}function rHt(t){const e=t.coordinates.flat(),n=1;return{vertices:[1,0,0,...e,1,2,-3,...e,1,1,-3,...e,0,1,0,...e,0,0,0,...e,1,0,0,...e,1,2,-3,...e,1,1,-3,...e,0,1,0,...e,0,0,0,...e],normals:[-1,2*n,1,2*n,-n,1,n,-n,1,n,-n,1,-1,-n,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],indices:[0,1,2,0,2,3,0,3,4,5,6,7,5,7,8,5,8,9],size:7}}function iHt(t,e){return e?aHt(t,e):rHt(t)}function aHt(t,e){const n=t.coordinates.flat(),{target:r="classic",source:i="circle"}=e,a=_be(ybe(i,"source"),n,0,0),o=nHt(n,a.vertices.length/7,e),s=_be(ybe(r,"target"),n,1,a.vertices.length/7+o.vertices.length/7);return{vertices:[...a.vertices,...o.vertices,...s.vertices],indices:[...a.outLineIndices,...o.outLineIndices,...s.outLineIndices,...a.indices,...o.indices,...s.indices],normals:[...a.normals,...o.normals,...s.normals],size:7}}function _be(t,e,n=1,r=0){const i=[],{vertices:a,indices:o,dimensions:s,outLineIndices:l}=t;for(let c=0;c<a.length;c+=s)i.push(n,a[c+1],a[c],...e);return ze(ze({},t),{},{vertices:i,indices:o.map(c=>c+r),outLineIndices:l.map(c=>c+r)})}const oHt=`// #extension GL_OES_standard_derivatives : enable

in vec4 v_color;
out vec4 outputColor;

// line texture

#pragma include "picking"

void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,sHt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniorm {
  float u_gap_width: 1.0;
  float u_stroke_width: 1.0;
  float u_stroke_opacity: 1.0;
};

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

out vec4 v_color;

vec2 project_pixel_offset(vec2 offsets) {
  vec2 data = project_pixel(offsets);

  return vec2(data.x, -data.y);
}

vec2 line_dir(vec2 target, vec2 source) {
  return normalize(ProjectFlat(target) - ProjectFlat(source));
}


void main() {
  // 
  vec2 source_world = a_Instance.rg; // 
  vec2 target_world = a_Instance.ba; // 
  vec2 flowlineDir = line_dir(target_world, source_world);
  vec2 perpendicularDir = vec2(-flowlineDir.y, flowlineDir.x);

  vec2 position = mix(source_world, target_world, a_Position.x);
  vec2 position64Low = mix(a_Instance64Low.rg, a_Instance64Low.ba, a_Position.x);

  float lengthCommon = length(
    project_position(vec4(target_world, 0, 1)) - project_position(vec4(source_world, 0, 1))
  );
  vec2 offsetDistances = a_Size.x * project_pixel_offset(vec2(a_Position.y, a_Position.z)); // Mapbox || 
  vec2 limitedOffsetDistances = clamp(
    offsetDistances,
    project_pixel(-lengthCommon * 0.2),
    project_pixel(lengthCommon * 0.2)
  );

  float startOffsetCommon = project_pixel(offsets[0]);
  float endOffsetCommon = project_pixel(offsets[1]);
  float endpointOffset = mix(
    clamp(startOffsetCommon, 0.0, lengthCommon * 0.2),
    -clamp(endOffsetCommon, 0.0, lengthCommon * 0.2),
    a_Position.x
  );

  vec2 normalsCommon = u_stroke_width * project_pixel_offset(vec2(a_Normal.x, a_Normal.y));

  float gapCommon = -1. * project_pixel(u_gap_width);
  vec3 offsetCommon = vec3(
    flowlineDir * (limitedOffsetDistances[1] + normalsCommon.y + endpointOffset * 1.05) -
      perpendicularDir * (limitedOffsetDistances[0] + gapCommon + normalsCommon.x),
    0.0
  );

  vec4 project_pos = project_position(vec4(position.xy, 0, 1.0), position64Low);

  vec4 fillColor = vec4(a_Color.rgb, a_Color.a * opacity);
  v_color = mix(fillColor, vec4(u_stroke.xyz, u_stroke.w * fillColor.w * u_stroke_opacity), a_Normal.z);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy +  offsetCommon.xy, 0., 1.0));

  setPickingColor(a_PickingColor);
}
`;class lHt extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,NORMAL:12})}getCommonUniformsInfo(){const{gapWidth:e=2,strokeWidth:n=1,strokeOpacity:r=1}=this.layer.getLayerConfig(),i={u_gap_width:e,u_stroke_width:n,u_stroke_opacity:r};return this.getUniformsBufferInfo(i)}initModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return[yield e.layer.buildLayerModel({moduleName:"flow_line",vertexShader:sHt,fragmentShader:oHt,defines:e.getDefines(),inject:e.getInject(),triangulation:iHt,styleOption:e.layer.getLayerConfig().symbol,primitive:se.TRIANGLES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const{size:n=1}=e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:fr.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>[r[3],r[4],r[5],r[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:fr.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>[vc(r[3]),vc(r[4]),vc(r[5]),vc(r[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:fr.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i,a)=>a}})}}const cHt=`#define LineTypeSolid 0.0
#define LineTypeDash 1.0
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

in vec4 v_dash_array;
in vec4 v_color;
in vec2 v_iconMapUV;
in vec4 v_line_data;
in float v_distance_ratio;

out vec4 outputColor;
#pragma include "picking"
#pragma include "project"
#pragma include "projection"

void main() {

  float animateSpeed = 0.0;
  float d_segmentIndex = v_line_data.g;

  // 
  if(u_linearColor == 1.0) { // 
    outputColor = mix(u_sourceColor, u_targetColor, d_segmentIndex/segmentNumber);
    outputColor.a *= v_color.a;
  } else { //  color 
    outputColor = v_color;
  }

  // float blur = 1.- smoothstep(u_blur, 1., length(v_normal.xy));
  // float blur = smoothstep(1.0, u_blur, length(v_normal.xy));
  if(u_line_type == LineTypeDash) {
    float dashLength = mod(v_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z)) {
      // 
    } else {
      // 
      discard;
    };
  }

  // 
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
      float alpha =1.0 - fract( mod(1.0- v_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + u_time / u_animate.y);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  // 
  if(LineTexture == u_line_texture && u_line_type != LineTypeDash) {
    float arcRadio = smoothstep( 0.0, 1.0, (d_segmentIndex / (segmentNumber - 1.0)));
    // float arcRadio = d_segmentIndex / (segmentNumber - 1.0);
    float count = v_line_data.b; // 
    float u = fract(arcRadio * count - animateSpeed * count);
    // float u = fract(arcRadio * count - animateSpeed);
    if(u_animate.x == Animate) {
      u = outputColor.a/v_color.a;
    }

    float v = v_line_data.a; //  v 

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // 
    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  } else {
    outputColor = filterColor(outputColor);
  }

  // gl_FragColor = filterColor(gl_FragColor);
}
`,uHt=`#define LineTypeSolid (0.0)
#define LineTypeDash (1.0)
#define Animate (0.0)
#define LineTexture (1.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_INSTANCE) in vec4 a_Instance;
layout(location = ATTRIBUTE_LOCATION_INSTANCE_64LOW) in vec4 a_Instance64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array: [10.0, 5., 0, 0];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float segmentNumber;
  float u_line_type: 0.0;
  float u_icon_step: 100;
  float u_line_texture: 0.0;
  float u_textureBlend;
  float u_time;
  float u_linearColor: 0;
};

out vec4 v_dash_array;
out vec4 v_color;
out vec2 v_iconMapUV;
out vec4 v_line_data;
out float v_distance_ratio;

#pragma include "projection"
#pragma include "project"
#pragma include "picking"

float maps(float value, float start1, float stop1, float start2, float stop2) {
  return start2 + (stop2 - start2) * ((value - start1) / (stop1 - start1));
}

float getSegmentRatio(float index) {
  return index / (segmentNumber - 1.0);
}

float paraboloid(vec2 source, vec2 target, float ratio) {
  vec2 x = mix(source, target, ratio);
  vec2 center = mix(source, target, 0.5);
  float dSourceCenter = distance(source, center);
  float dXCenter = distance(x, center);
  return (dSourceCenter + dXCenter) * (dSourceCenter - dXCenter);
}

vec3 getPos(vec2 source, vec2 target, float segmentRatio) {
  float vertex_height = paraboloid(source, target, segmentRatio);

  return vec3(mix(source, target, segmentRatio), sqrt(max(0.0, vertex_height)));
}
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  vec2 offset = dir_screenspace * offset_direction * setPickingSize(a_Size) / 2.0;
  return offset;
}
vec2 getNormal(vec2 line_clipspace, float offset_direction) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);
  return dir_screenspace.xy * sign(offset_direction);
}
float getAngularDist(vec2 source, vec2 target) {
  vec2 delta = source - target;
  vec2 sin_half_delta = sin(delta / 2.0);
  float a =
    sin_half_delta.y * sin_half_delta.y +
    cos(source.y) * cos(target.y) * sin_half_delta.x * sin_half_delta.x;
  return 2.0 * atan(sqrt(a), sqrt(1.0 - a));
}

vec2 midPoint(vec2 source, vec2 target) {
  vec2 center = target - source;
  float r = length(center);
  float theta = atan(center.y, center.x);
  float thetaOffset = 0.314;
  float r2 = r / 2.0 / cos(thetaOffset);
  float theta2 = theta + thetaOffset;
  vec2 mid = vec2(r2 * cos(theta2) + source.x, r2 * sin(theta2) + source.y);
  return mid;
}
float bezier3(vec3 arr, float t) {
  float ut = 1.0 - t;
  return (arr.x * ut + arr.y * t) * ut + (arr.y * ut + arr.z * t) * t;
}

vec2 interpolate(vec2 source, vec2 target, float angularDist, float t) {
  if (abs(angularDist - PI) < 0.001) {
    return (1.0 - t) * source + t * target;
  }
  float a = sin((1.0 - t) * angularDist) / sin(angularDist);
  float b = sin(t * angularDist) / sin(angularDist);
  vec2 sin_source = sin(source);
  vec2 cos_source = cos(source);
  vec2 sin_target = sin(target);
  vec2 cos_target = cos(target);
  float x = a * cos_source.y * cos_source.x + b * cos_target.y * cos_target.x;
  float y = a * cos_source.y * sin_source.x + b * cos_target.y * sin_target.x;
  float z = a * sin_source.y + b * sin_target.y;
  return vec2(atan(y, x), atan(z, sqrt(x * x + y * y)));

}

void main() {
  v_color = a_Color;
  v_color.a = v_color.a * opacity;
  vec2 source = radians(a_Instance.rg);
  vec2 target = radians(a_Instance.ba);
  float angularDist = getAngularDist(source, target);
  float segmentIndex = a_Position.x;
  float segmentRatio = getSegmentRatio(segmentIndex);
  float indexDir = mix(-1.0, 1.0, step(segmentIndex, 0.0));

  if (u_line_type == LineTypeDash) {
    v_distance_ratio = segmentIndex / segmentNumber;
    float total_Distance = pixelDistance(source, target) / 2.0 * PI;
    total_Distance = total_Distance * 16.0; // total_Distance*16.0 
    v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / total_Distance;
  }

  if (u_animate.x == Animate) {
    v_distance_ratio = segmentIndex / segmentNumber;
  }

  float nextSegmentRatio = getSegmentRatio(segmentIndex + indexDir);
  v_distance_ratio = segmentIndex / segmentNumber;

  vec4 curr = project_position(vec4(degrees(interpolate(source, target, angularDist, segmentRatio)), 0.0, 1.0), a_Instance64Low.xy);
  vec4 next = project_position(vec4(degrees(interpolate(source, target, angularDist, nextSegmentRatio)), 0.0, 1.0), a_Instance64Low.zw);

  // v_normal = getNormal((next.xy - curr.xy) * indexDir, a_Position.y);
  vec2 offset = project_pixel(getExtrusionOffset((next.xy - curr.xy) * indexDir, a_Position.y));
  //  vec4 project_pos = project_position(vec4(curr.xy, 0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, curr.z, 1.0));

  v_line_data.g = a_Position.x; // 
  if (LineTexture == u_line_texture) {
    float d_arcDistrance = length(source - target);
    d_arcDistrance = project_pixel(d_arcDistrance);

    float d_pixelLen = project_pixel(u_icon_step) / 8.0;
    v_line_data.b = floor(d_arcDistrance / d_pixelLen); // 

    float lineOffsetWidth = length(offset + offset * sign(a_Position.y)); // 
    float linePixelSize = project_pixel(a_Size); // 
    v_line_data.a = lineOffsetWidth / linePixelSize; //  v 

    v_iconMapUV = a_iconMapUV;
  }

  gl_Position = project_common_position_to_clipspace(vec4(curr.xy + offset, 0, 1.0));
  setPickingColor(a_PickingColor);
}

`,fHt={solid:0,dash:1};class hHt extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0),Z(this,"updateTexture",()=>{const{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=n({data:this.iconService.getCanvas(),mag:se.NEAREST,min:se.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,INSTANCE:10,INSTANCE_64LOW:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:e,targetColor:n,textureBlend:r="normal",lineType:i="solid",dashArray:a=[10,5],lineTexture:o=!1,iconStep:s=100,segmentNumber:l=30}=this.layer.getLayerConfig(),{animateOption:c}=this.layer.getLayerConfig();if(a.length===2&&a.push(0,0),this.rendererService.getDirty()){var u;(u=this.texture)===null||u===void 0||u.bind()}let f=0,h=[0,0,0,0],d=[0,0,0,0];e&&n&&(h=Xo(e),d=Xo(n),f=1);let p=this.layer.getLayerAnimateTime();isNaN(p)&&(p=0);const g={u_animate:this.animateOption2Array(c),u_dash_array:a,u_sourceColor:h,u_targetColor:d,u_textSize:[1024,this.iconService.canvasHeight||128],segmentNumber:l,u_line_type:fHt[i]||0,u_icon_step:s,u_line_texture:o?1:0,u_textureBlend:r==="normal"?0:1,u_time:p,u_linearColor:f};return this.getUniformsBufferInfo(g)}initModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),e.updateTexture(),e.iconService.on("imageUpdate",e.updateTexture),e.buildModels()})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var e=this;return kt(function*(){const{segmentNumber:n=30}=e.layer.getLayerConfig();return[yield e.layer.buildLayerModel({moduleName:"lineGreatCircle",vertexShader:uHt,fragmentShader:cHt,triangulation:$ne,styleOption:{segmentNumber:n},defines:e.getDefines(),inject:e.getInject(),depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=1}=e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"instance",type:fr.Attribute,descriptor:{name:"a_Instance",shaderLocation:this.attributeLocation.INSTANCE,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>[r[3],r[4],r[5],r[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"instance64Low",type:fr.Attribute,descriptor:{name:"a_Instance64Low",shaderLocation:this.attributeLocation.INSTANCE_64LOW,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>[vc(r[3]),vc(r[4]),vc(r[5]),vc(r[6])]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const n=this.iconService.getIconMap(),{texture:r}=e,{x:i,y:a}=n[r]||{x:0,y:0};return[i,a]}}})}}const dHt=`// #extension GL_OES_standard_derivatives : enable
#define Animate 0.0
#define LineTexture 1.0

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

in vec4 v_color;
in vec4 v_stroke;
// dash
in vec4 v_dash_array;
in float v_d_distance_ratio;
in vec2 v_iconMapUV;
in vec4 v_texture_data;

out vec4 outputColor;
#pragma include "picking"

// [animate, duration, interval, trailLength],
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_d_distance_ratio, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // 
      discard;
    };
  }
  float animateSpeed = 0.0; // 
  float d_distance_ratio = v_texture_data.r; // 
  if(u_linearDir < 1.0) {
    d_distance_ratio = v_texture_data.a;
  }
  if(u_linearColor == 1.0) { // 
    outputColor = mix(u_sourceColor, u_targetColor, d_distance_ratio);
    outputColor.a *= v_color.a;
  } else { //  color 
     outputColor = v_color;
  }
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_texture_data.g;      // 
    float d_texPixelLen = v_texture_data.b;  // 
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_texture_data.a;  //  v 

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
     vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor += pattern;
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = pattern;
    }
  } 

  float v = v_texture_data.a;
  float strokeWidth = min(0.5, u_strokeWidth);
  //  border
  if(strokeWidth > 0.01) {
    float borderOuterWidth = strokeWidth / 2.0;


    if(v >= 1.0 - strokeWidth || v <= strokeWidth) {
      if(v > strokeWidth) { // 
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - strokeWidth))/strokeWidth);
        //  float linear = step(0.0, (v - (1.0 - borderWidth))/borderWidth);
        outputColor.rgb = mix(outputColor.rgb, v_stroke.rgb, linear);
      } else if(v <= strokeWidth) {
        float linear = smoothstep(0.0, 1.0, v/strokeWidth);
        outputColor.rgb = mix(v_stroke.rgb, outputColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      outputColor.a = mix(0.0, outputColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  // blur
  float blurV = v_texture_data.a;
  if(blurV < 0.5) {
    outputColor.a *= mix(u_blur.r, u_blur.g, blurV/0.5);
  } else {
    outputColor.a *= mix(u_blur.g, u_blur.b, (blurV - 0.5)/0.5);
  }
  
  outputColor = filterColor(outputColor);
}
`,pHt=`#define Animate (0.0)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_INDEX) in vec3 a_DistanceAndIndexAndMiter;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec4 a_Normal_Total_Distance;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_dash_array;
  vec4 u_blur;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed: 0.0;
  float u_vertexScale: 1.0;
  float u_raisingHeight: 0.0;
  float u_strokeWidth: 0.0;
  float u_textureBlend;
  float u_line_texture;
  float u_linearDir: 1.0;
  float u_linearColor: 0;
  float u_time;
};

out vec4 v_color;
out vec4 v_stroke;
//dash
out vec4 v_dash_array;
out float v_d_distance_ratio;
// texV  -  v 
out vec2 v_iconMapUV;
out vec4 v_texture_data;

#pragma include "projection"
#pragma include "picking"

void main() {
  vec2 a_DistanceAndIndex = a_DistanceAndIndexAndMiter.xy;
  float a_Miter = a_DistanceAndIndexAndMiter.z;
  vec3 a_Normal = a_Normal_Total_Distance.xyz;
  float a_Total_Distance = a_Normal_Total_Distance.w;
  //dash
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_Total_Distance;
  v_d_distance_ratio = a_DistanceAndIndex.x / a_Total_Distance;

  // cal style mapping - 
  float d_texPixelLen; // 
  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);

  v_color = a_Color;
  v_color.a *= opacity;
  v_stroke = stroke;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * a_Normal;

  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // 
  float linePixelSize = project_pixel(a_Size.x) * 2.0; //   * 2
  float texV = lineOffsetWidth / linePixelSize; //  v 

  v_texture_data = vec4(currentLinePointRatio, lineDistance, d_texPixelLen, texV);
  // 

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; //  -  vertex height
  float lineHeight = a_Size.y; // size  [linewidth, lineheight]

  //  mapbox 
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // 
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    h *= mapboxZoomScale;
    h += u_raisingHeight * mapboxZoomScale;
    if (u_heightfixed > 0.0) {
      lineHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(
    vec4(project_pos.xy + offset, lineHeight + h, 1.0)
  );

  setPickingColor(a_PickingColor);
}
`;class J4e extends Eo{constructor(...e){super(...e),Z(this,"textureEventFlag",!1),Z(this,"texture",this.createTexture2D({data:new Uint8Array([0,0,0,0]),width:1,height:1})),Z(this,"updateTexture",()=>{const{createTexture2D:n}=this.rendererService;if(this.textures.length===0&&(this.textures=[this.texture]),this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=n({data:this.iconService.getCanvas(),mag:se.NEAREST,min:se.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,DISTANCE_INDEX:10,NORMAL:11,UV:12})}getCommonUniformsInfo(){const{sourceColor:e,targetColor:n,textureBlend:r="normal",lineType:i="solid",dashArray:a=[10,5,0,0],lineTexture:o=!1,iconStep:s=100,vertexHeightScale:l=20,strokeWidth:c=0,raisingHeight:u=0,heightfixed:f=!1,linearDir:h=rbe.VERTICAL,blur:d=[1,1,1,0]}=this.layer.getLayerConfig();let p=a;if(i!=="dash"&&(p=[0,0,0,0]),p.length===2&&p.push(0,0),this.rendererService.getDirty()&&this.texture){var g;(g=this.texture)===null||g===void 0||g.bind()}const{animateOption:v}=this.layer.getLayerConfig();let y=0,_=[0,0,0,0],E=[0,0,0,0];e&&n&&(_=Xo(e),E=Xo(n),y=1);const x={u_animate:this.animateOption2Array(v),u_dash_array:p,u_blur:d,u_sourceColor:_,u_targetColor:E,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:s,u_heightfixed:Number(f),u_vertexScale:l,u_raisingHeight:Number(u),u_strokeWidth:c,u_textureBlend:r===o$t.NORMAL?0:1,u_line_texture:o?1:0,u_linearDir:h===rbe.VERTICAL?1:0,u_linearColor:y,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(x)}initModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),e.textureEventFlag||(e.textureEventFlag=!0,e.updateTexture(),e.iconService.on("imageUpdate",e.updateTexture)),e.buildModels()})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var e=this;return kt(function*(){const{depth:n=!1}=e.layer.getLayerConfig(),{frag:r,vert:i,type:a}=e.getShaders();return e.layer.triangulation=AZ,[yield e.layer.buildLayerModel({moduleName:"line"+a,vertexShader:i,fragmentShader:r,triangulation:AZ,defines:e.getDefines(),inject:e.getInject(),depth:{enable:n}})]})()}getShaders(){return{frag:dHt,vert:pHt,type:""}}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:fr.Attribute,descriptor:{name:"a_DistanceAndIndexAndMiter",shaderLocation:this.attributeLocation.DISTANCE_INDEX,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i,a,o)=>o===void 0?[r[3],10,r[4]]:[r[3],o,r[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const{size:n=1}=e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal_total_distance",type:fr.Attribute,descriptor:{name:"a_Normal_Total_Distance",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r,i,a)=>[...a,r[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const n=this.iconService.getIconMap(),{texture:r}=e,{x:i,y:a}=n[r]||{x:0,y:0};return[i,a]}}})}}const gHt=`
layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};
in float v_distanceScale;
in vec4 v_color;
//dash
in vec4 v_dash_array;

out vec4 outputColor;
void main() {
  if(u_dash_array!=vec4(0.0)){
    float dashLength = mod(v_distanceScale, v_dash_array.x + v_dash_array.y + v_dash_array.z + v_dash_array.w);
    if(!(dashLength < v_dash_array.x || (dashLength > (v_dash_array.x + v_dash_array.y) && dashLength <  v_dash_array.x + v_dash_array.y + v_dash_array.z))) {
      // 
      discard;
    };
  }
  if(u_linearColor==1.0){
    outputColor = mix(u_sourceColor, u_targetColor, v_distanceScale);
    outputColor.a *= v_color.a; // 
  }
  else{
    outputColor = v_color;
  }
}
`,vHt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec4 a_SizeDistanceAndTotalDistance;

layout(std140) uniform commonUniorm {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec4 u_dash_array;
  float u_vertexScale: 1.0;
  float u_linearColor: 0;
};

#pragma include "projection"
#pragma include "picking"

out vec4 v_color;
out float v_distanceScale;
out vec4 v_dash_array;

void main() {
  //dash
  v_dash_array = pow(2.0, 20.0 - u_Zoom) * u_dash_array / a_SizeDistanceAndTotalDistance.a;

  v_color = a_Color;
  v_distanceScale = a_SizeDistanceAndTotalDistance.b / a_SizeDistanceAndTotalDistance.a;
  v_color.a = v_color.a * opacity;
  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float h = float(a_Position.z) * u_vertexScale; //  - 

  float lineHeight = a_SizeDistanceAndTotalDistance.y;
  //  mapbox 
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // 
    h *= 2.0 / pow(2.0, 20.0 - u_Zoom);
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, lineHeight + h, 1.0));
  gl_PointSize = 10.0;

}
`;class mHt extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getCommonUniformsInfo(){const{sourceColor:e,targetColor:n,lineType:r="solid",dashArray:i=[10,5,0,0],vertexHeightScale:a=20}=this.layer.getLayerConfig();let o=i;r!=="dash"&&(o=[0,0,0,0]),o.length===2&&o.push(0,0);let s=0,l=[0,0,0,0],c=[0,0,0,0];e&&n&&(l=Xo(e),c=Xo(n),s=1);const u={u_sourceColor:l,u_targetColor:c,u_dash_array:o,u_vertexScale:a,u_linearColor:s};return this.getUniformsBufferInfo(u)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}getShaders(){return{frag:gHt,vert:vHt,type:"lineSimpleNormal"}}buildModels(){var e=this;return kt(function*(){e.initUniformsBuffer();const{frag:n,vert:r,type:i}=e.getShaders();return[yield e.layer.buildLayerModel({moduleName:i,vertexShader:r,fragmentShader:n,triangulation:d$t,defines:e.getDefines(),inject:e.getInject(),primitive:se.LINES,depth:{enable:!1},pick:!1})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"sizeDistanceAndTotalDistance",type:fr.Attribute,descriptor:{name:"a_SizeDistanceAndTotalDistance",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:4,update:(e,n,r)=>{const{size:i=1}=e,a=Array.isArray(i)?[i[0],i[1]]:[i,0];return[a[0],a[1],r[3],r[5]]}}})}}const yHt=`#define Animate 0.0
#define LineTexture 1.0

// line texture

uniform sampler2D u_texture;
layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};


in vec2 v_iconMapUV;
in vec4 v_color;
in float v_blur;
in vec4 v_dataset;

out vec4 outputColor;

#pragma include "picking"

void main() {
  float animateSpeed = 0.0; // 
  float d_distance_ratio = v_dataset.r; // 
  float v = v_dataset.a;

  if(u_linearColor == 1.0) { // 
    outputColor = mix(u_sourceColor, u_targetColor, v);
  } else { //  color 
     outputColor = v_color;
  }

  outputColor.a *= v_color.a; // 
  if(u_animate.x == Animate) {
      animateSpeed = u_time / u_animate.y;
       float alpha =1.0 - fract( mod(1.0- d_distance_ratio, u_animate.z)* (1.0/ u_animate.z) + animateSpeed);
      alpha = (alpha + u_animate.w -1.0) / u_animate.w;
      alpha = smoothstep(0., 1., alpha);
      outputColor.a *= alpha;
  }

  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = v_dataset.g;      // 
    float d_texPixelLen = v_dataset.b;  // 
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen - animateSpeed);
    float v = v_dataset.a;  //  v 

    //  start
    float flag = 0.0;
    if(u > 1.0/u_iconStepCount) {
      flag = 1.0;
    }
    u = fract(u*u_iconStepCount);
    //  end

    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    vec4 pattern = texture(SAMPLER_2D(u_texture), uv);

    // Tip: 
    if(flag > 0.0) {
      pattern = vec4(0.0);
    }

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      outputColor = filterColor(outputColor + pattern);
    } else { // replace
        pattern.a *= v_color.a;
        if(outputColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        outputColor = filterColor(pattern);
    }
  }


  // blur - AA
  if(v < v_blur) {
    outputColor.a = mix(0.0, outputColor.a, v/v_blur);
  } else if(v > 1.0 - v_blur) {
    outputColor.a = mix(outputColor.a, 0.0, (v - (1.0 - v_blur))/v_blur);
  }

  outputColor = filterColor(outputColor);
}
`,_Ht=`#define Animate 0.0
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec2 a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_iconMapUV;
layout(location = ATTRIBUTE_LOCATION_DISTANCE_MITER_TOTAL) in vec3 a_Distance_Total_Miter;

layout(std140) uniform commonUniorm {
  vec4 u_animate: [ 1., 2., 1.0, 0.2 ];
  vec4 u_sourceColor;
  vec4 u_targetColor;
  vec2 u_textSize;
  float u_icon_step: 100;
  float u_heightfixed;
  float u_linearColor: 0;
  float u_line_texture;
  float u_textureBlend;
  float u_iconStepCount;
  float u_time;
};

// texV  -  v 
out vec2 v_iconMapUV;
out vec4 v_color;
out float v_blur;
out vec4 v_dataset;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float a_Distance = a_Distance_Total_Miter.x;
  float a_Miter = a_Distance_Total_Miter.y;
  float a_Total_Distance = a_Distance_Total_Miter.z;

  float d_distance_ratio; // 
  float d_texPixelLen; // 

  v_iconMapUV = a_iconMapUV;
  if (u_heightfixed < 1.0) {
    //  zoom 
    d_texPixelLen = project_pixel(u_icon_step);
  } else {
    d_texPixelLen = u_icon_step;
  }

  if (u_animate.x == Animate || u_linearColor == 1.0) {
    d_distance_ratio = a_Distance / a_Total_Distance;
  }

  float miter = (a_Miter + 1.0) / 2.0;
  // 
  v_dataset[0] = d_distance_ratio; // 
  v_dataset[1] = a_Distance; // 
  v_dataset[2] = d_texPixelLen; // 
  v_dataset[3] = miter; //  v  0 - 1

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0), a_Position64Low);

  float originSize = a_Size.x; // 
  if (u_heightfixed < 1.0) {
    originSize = project_float_meter(a_Size.x); //  zoom 
  }

  float wallHeight = originSize * miter;
  float lightWeight = calc_lighting(vec4(project_pos.xy, wallHeight, 1.0));

  v_blur = min(project_float_pixel(2.0) / originSize, 0.05);
  v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  //  mapbox 
  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    // mapbox
    // 
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    if (u_heightfixed > 0.0) {
      wallHeight *= mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, wallHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;class bHt extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0),Z(this,"updateTexture",()=>{const{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas()}),this.layer.render();return}this.texture=n({data:this.iconService.getCanvas(),mag:se.NEAREST,min:se.NEAREST,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:12,UV:13,DISTANCE_MITER_TOTAL:15})}getCommonUniformsInfo(){const{sourceColor:e,targetColor:n,textureBlend:r="normal",heightfixed:i=!1,lineTexture:a=!1,iconStep:o=100,iconStepCount:s=1}=this.layer.getLayerConfig(),{animateOption:l}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var c;(c=this.texture)===null||c===void 0||c.bind()}let u=0,f=[0,0,0,0],h=[0,0,0,0];e&&n&&(f=Xo(e),h=Xo(n),u=1);const d={u_animate:this.animateOption2Array(l),u_sourceColor:f,u_targetColor:h,u_textSize:[1024,this.iconService.canvasHeight||128],u_icon_step:o,u_heightfixed:Number(i),u_linearColor:u,u_line_texture:a?1:0,u_textureBlend:r==="normal"?0:1,u_iconStepCount:s,u_time:this.layer.getLayerAnimateTime()||0};return this.getUniformsBufferInfo(d)}initModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),e.updateTexture(),e.iconService.on("imageUpdate",e.updateTexture),e.buildModels()})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var e=this;return kt(function*(){return[yield e.layer.buildLayerModel({moduleName:"lineWall",vertexShader:_Ht,fragmentShader:yHt,triangulation:AZ,defines:e.getDefines(),inject:e.getInject(),depth:{enable:!1},blend:e.getBlend()})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const{size:n=1}=e;return Array.isArray(n)?[n[0],n[1]]:[n,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:fr.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"distanceAndTotalAndMiter",type:fr.Attribute,descriptor:{name:"a_Distance_Total_Miter",shaderLocation:this.attributeLocation.DISTANCE_MITER_TOTAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r)=>[r[3],r[4],r[5]]}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_iconMapUV",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const n=this.iconService.getIconMap(),{texture:r}=e,{x:i,y:a}=n[r]||{x:0,y:0};return[i,a]}}})}}const EHt={arc:V$t,arc3d:vbe,greatcircle:hHt,wall:bHt,line:J4e,simple:mHt,flowline:lHt,earthArc3d:vbe};class Hne extends oS{constructor(...e){super(...e),Z(this,"type","LineLayer"),Z(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","thetaOffset"]),Z(this,"arrowInsertCount",0),Z(this,"defaultSourceConfig",{data:[{lng1:100,lat1:30,lng2:130,lat2:30}],options:{parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}}})}buildModels(){var e=this;return kt(function*(){const n=e.getModelType();e.layerModel=new EHt[n](e),yield e.initLayerModels()})()}getDefaultConfig(){const e=this.getModelType();return{line:{},linearline:{},simple:{},wall:{},arc3d:{blend:"additive"},arc:{blend:"additive"},greatcircle:{blend:"additive"},tileLine:{},earthArc3d:{},flowline:{},arrow:{}}[e]}getModelType(){var e;if(this.layerType)return this.layerType;const n=this.styleAttributeService.getLayerStyleAttribute("shape");return(n==null||(e=n.scale)===null||e===void 0?void 0:e.field)||"line"}processData(e){if(this.getModelType()!=="simple")return e;const n=[];return e.map(r=>{if(Array.isArray(r.coordinates)&&Array.isArray(r.coordinates[0])&&Array.isArray(r.coordinates[0][0])){const i=ze({},r);r.coordinates.map(a=>{n.push(ze(ze({},i),{},{coordinates:a}))})}else n.push(r)}),n}}const xHt=`layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

in vec4 v_color;
in float v_blur;
in float v_innerRadius;

out vec4 outputColor;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  // Tip:  0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: 
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);

  if (v_innerRadius < 0.99) {
    //  stroke  stroke > 0.01
    float blurWidth = (1.0 - v_blur) / 2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if (fragmengTocenter > v_innerRadius + blurWidth) {
      outputColor = stroke;
    } else if (fragmengTocenter > v_innerRadius - blurWidth) {
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      outputColor = mix(v_color, stroke, mixR);
    } else {
      outputColor = v_color;
    }
  } else {
    //  stroke  stroke <= 0.01
    outputColor = v_color;
  }

  outputColor = filterColor(outputColor);

  if (u_additive > 0.0) {
    outputColor *= circleClipOpacity;
  } else {
    outputColor.a *= circleClipOpacity;
  }

}
`,SHt=`
layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform commonUniorm {
  vec4 u_stroke_color;
  float u_additive;
  float u_stroke_opacity;
  float u_stroke_width;
};

out vec4 v_color;
out float v_blur;
out float v_innerRadius;

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_blur = 1.0 - max(2.0 / a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  vec2 offset = project_pixel(u_offsets);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function bbe(t){const e=t.coordinates;return{vertices:[...e],indices:[0],size:e.length}}class THt extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const{blend:e,strokeOpacity:n=1,strokeWidth:r=0,stroke:i="#fff"}=this.layer.getLayerConfig(),a={u_stroke_color:Xo(i),u_additive:e==="additive"?1:0,u_stroke_opacity:n,u_stroke_width:r};return this.getUniformsBufferInfo(a)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.layer.triangulation=bbe,e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"pointSimple",vertexShader:SHt,fragmentShader:xHt,defines:e.getDefines(),inject:e.getInject(),triangulation:bbe,depth:{enable:!1},primitive:se.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=1}=e;return Array.isArray(n)?[n[0]]:[n]}}})}}const AHt=`precision highp float;
in vec4 v_color;

#pragma include "picking"

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // 
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};
in float v_lightWeight;
in float v_barLinearZ;
out vec4 outputColor;
void main() {

   outputColor = v_color;

  // 
  if(u_opacitylinear > 0.0) {
    outputColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - v_barLinearZ): v_barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,wHt=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_POS) in vec3 a_Pos;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniform {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor: 0;
  float u_heightfixed: 0.0; // 
  float u_globel;
  float u_r;
  float u_pickLight: 0.0;
  float u_opacitylinear: 0.0;
  float u_opacitylinear_dir: 1.0;
  float u_lightEnable: 1.0;
};

out vec4 v_color;
out float v_lightWeight;
out float v_barLinearZ;
// 


#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) +
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - 
  vec3 size = a_Size * a_Position;

  // a_Position.z  0 - 1 01 
  v_barLinearZ =  a_Position.z;

  vec3 offset = size; //  - 
  if(u_heightfixed < 1.0) { // 
    //
  } else {//    mapbox 
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r 
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // 
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // 
    lightWeight = calc_lighting(pos);
  }
  v_lightWeight = lightWeight;
  // 
  if(u_linearColor == 1.0) { // 
    v_color = mix(u_sourceColor, u_targetColor, v_barLinearZ);
    v_color.rgb *= lightWeight;
  } else { //  color 
     v_color = a_Color;
  }
  v_color.a *= u_opacity;


  //  xy 
  //mxx
  float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
  float xRadian = getXRadian(a_Pos.y, r);
  float xcos = cos(xRadian);//
  float xsin = sin(xRadian);//
  mat4 mx = mat4(
    1,0,0,0,
    0,xcos,-xsin,0,
    0,xsin,xcos,0,
    0,0,0,1);

  //myy
  float yRadian = getYRadian(a_Pos.x, a_Pos.z);
  float ycos = cos(yRadian);//
  float ysin = sin(yRadian);//
  mat4 my = mat4(
    ycos,0,-ysin,0,
    0,1,0,0,
    ysin,0,ycos,0,
    0,0,0,1);

  gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);


  setPickingColor(a_PickingColor);
}
`,{isNumber:OHt}=gs;let CHt=class extends Eo{constructor(...e){super(...e),Z(this,"raiseCount",0),Z(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,POS:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:e={enable:!1,speed:.01,repeat:!1},opacity:n=1,sourceColor:r,targetColor:i,pickLight:a=!1,heightfixed:o=!0,opacityLinear:s={enable:!1,dir:"up"},lightEnable:l=!0}=this.layer.getLayerConfig();let c=0,u=[0,0,0,0],f=[0,0,0,0];if(r&&i&&(u=Xo(r),f=Xo(i),c=1),this.raiseCount<1&&this.raiseRepeat>0&&e.enable){const{speed:p=.01}=e;this.raiseCount+=p,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const h={u_sourceColor:u,u_targetColor:f,u_linearColor:c,u_pickLight:Number(a),u_heightfixed:Number(o),u_r:e.enable&&this.raiseRepeat>0?this.raiseCount:1,u_opacity:OHt(n)?n:1,u_opacitylinear:Number(s.enable),u_opacitylinear_dir:s.dir==="up"?1:0,u_lightEnable:Number(l)};return this.getUniformsBufferInfo(h)}initModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),e.buildModels()})()}buildModels(){var e=this;return kt(function*(){const{animateOption:{repeat:n=1}}=e.layer.getLayerConfig();return e.raiseRepeat=n,[yield e.layer.buildLayerModel({moduleName:"pointEarthExtrude",vertexShader:wHt,fragmentShader:AHt,triangulation:zne,depth:{enable:!0},defines:e.getDefines(),inject:e.getInject(),cull:{enable:!0,face:se.FRONT},blend:e.getBlend()})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:e=>{const{size:n}=e;if(n){let r=[];return Array.isArray(n)&&(r=n.length===2?[n[0],n[0],n[1]]:n),Array.isArray(n)||(r=[n,n,n]),r}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:fr.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:fr.Attribute,descriptor:{name:"a_Pos",shaderLocation:this.attributeLocation.POS,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:e=>{const n=Px(e.coordinates);return Y4e([n[0],n[1]])}}})}};const RHt=`in vec4 v_data;
in vec4 v_color;
in float v_radius;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 strokeColor = u_stroke == vec4(0.0) ? v_color : u_stroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(outer_df > antialiasblur + 0.018) discard;

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(u_stroke_width < 0.01) {
    outputColor = vec4(v_color.rgb, v_color.a * u_opacity);
  } else {
    outputColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), strokeColor * u_stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor = filterColor(outputColor);
  }
}
`,MHt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniform {
  float u_additive;
  float u_stroke_opacity : 1;
  float u_stroke_width : 2;
  float u_blur : 0.0;
};
out vec4 v_data;
out vec4 v_color;
out float v_radius;

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize 
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur);

  // TODP: /abs(extrude.x) 
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1 + vec3(u_offsets,0.0), 1.0);

  setPickingColor(a_PickingColor);
}
`;let PHt=class extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:e=1,strokeWidth:n=0,blend:r,blur:i=0}=this.layer.getLayerConfig();this.layer.getLayerConfig();const a={u_additive:r==="additive"?1:0,u_stroke_opacity:e,u_stroke_width:n,u_blur:i};return this.getUniformsBufferInfo(a)}initModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.layer.triangulation=hbe,[yield e.layer.buildLayerModel({moduleName:"pointEarthFill",vertexShader:MHt,fragmentShader:RHt,triangulation:hbe,defines:e.getDefines(),inject:e.getInject(),depth:{enable:!0},blend:e.getBlend()})]})()}animateOption2Array(e){return[e.enable?0:1,e.speed||1,e.rings||3,0]}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"extrude",type:fr.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i)=>{const[a,o,s]=r,l=yr(0,0,1),c=yr(a,0,s),u=a>=0?Die(l,c):Math.PI*2-Die(l,c),f=Math.PI*2-Math.asin(o/100),h=Zr();Dy(h,h,u),Qm(h,h,f);const d=yr(1,1,0);ka(d,d,h),Ic(d,d);const p=yr(-1,1,0);ka(p,p,h),Ic(p,p);const g=yr(-1,-1,0);ka(g,g,h),Ic(g,g);const v=yr(1,-1,0);ka(v,v,h),Ic(v,v);const y=[...d,...p,...g,...v],_=i%4*3;return[y[_],y[_+1],y[_+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=5}=e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:fr.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{shape:n=2}=e;return[this.layer.getLayerConfig().shape2d.indexOf(n)]}}})}};const NHt=`in vec4 v_color;
in float v_lightWeight;
out vec4 outputColor;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  // 
  // picking
  if (u_pickLight > 0.0) {
    outputColor = filterColorAlpha(outputColor, v_lightWeight);
  } else {
    outputColor = filterColor(outputColor);
  }
}
`,IHt=`#define pi (3.1415926535)

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in vec3 a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec4 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

layout(std140) uniform commonUniforms {
  float u_pickLight;
  float u_heightfixed;
  float u_r;
  float u_linearColor;
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_opacitylinear;
  float u_opacitylinear_dir;
  float u_lightEnable;
};
out vec4 v_color;
out float v_lightWeight;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if (x > 0.0 && z > 0.0) {
    return atan(x / z);
  } else if (x > 0.0 && z <= 0.0) {
    return atan(-z / x) + pi / 2.0;
  } else if (x <= 0.0 && z <= 0.0) {
    return pi + atan(x / z); //atan(x/z) +
  } else {
    return atan(z / -x) + pi * 3.0 / 2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y / r);
}

void main() {
  vec3 size = a_Size * a_Position;

  vec3 offset = size; //  - 

  if (u_heightfixed < 1.0) {
    // 
  } else {
    //    mapbox 
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      offset *= 4.0 / pow(2.0, 21.0 - u_Zoom);
    }
  }

  vec2 positions = a_Extrude.xy;
  vec2 positions64Low = a_Extrude.zw;
  vec4 project_pos = project_position(vec4(positions, 0.0, 1.0), positions64Low);

  // u_r 
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // // 
  float lightWeight = 1.0;

  if (u_lightEnable > 0.0) {
    // 
    lightWeight = calc_lighting(pos);
  }

  v_lightWeight = lightWeight;

  v_color = a_Color;

  // 
  if (u_linearColor == 1.0) {
    // 
    v_color = mix(u_sourceColor, u_targetColor, a_Position.z);
    v_color.a = v_color.a * opacity;
  } else {
    v_color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);
  }

  if (u_opacitylinear > 0.0) {
    v_color.a *= u_opacitylinear_dir > 0.0 ? 1.0 - a_Position.z : a_Position.z;
  }

  gl_Position = project_common_position_to_clipspace(pos);

  setPickingColor(a_PickingColor);
}
`;let e6e=class extends Eo{constructor(...e){super(...e),Z(this,"raiseCount",0),Z(this,"raiseRepeat",0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,NORMAL:11})}getCommonUniformsInfo(){const{animateOption:e={enable:!1,speed:.01,repeat:!1},sourceColor:n,targetColor:r,pickLight:i=!1,heightfixed:a=!1,opacityLinear:o={enable:!1,dir:"up"},lightEnable:s=!0}=this.layer.getLayerConfig();let l=0,c=[0,0,0,0],u=[0,0,0,0];if(n&&r&&(c=Xo(n),u=Xo(r),l=1),this.raiseCount<1&&this.raiseRepeat>0&&e.enable){const{speed:d=.01}=e;this.raiseCount+=d,this.raiseCount>=1&&(this.raiseRepeat>1?(this.raiseCount=0,this.raiseRepeat--):this.raiseCount=1)}const f={u_pickLight:Number(i),u_heightfixed:Number(a),u_r:e.enable&&this.raiseRepeat>0?this.raiseCount:1,u_linearColor:l,u_sourceColor:c,u_targetColor:u,u_opacitylinear:Number(o.enable),u_opacitylinear_dir:o.dir==="up"?1:0,u_lightEnable:Number(s)};return this.getUniformsBufferInfo(f)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){const{depth:n=!0,animateOption:{repeat:r=1}}=e.layer.getLayerConfig();return e.raiseRepeat=r,e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"pointExtrude",vertexShader:IHt,fragmentShader:NHt,triangulation:zne,defines:e.getDefines(),inject:e.getInject(),cull:{enable:!0,face:se.FRONT},depth:{enable:n}})]})()}registerBuiltinAttributes(){this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:e=>{const{size:n}=e;if(n){let r=[];return Array.isArray(n)&&(r=n.length===2?[n[0],n[0],n[1]]:n),Array.isArray(n)||(r=[n,n,n]),r}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:fr.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:fr.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:4,update:e=>{const n=Px(e.coordinates);return[n[0],n[1],vc(n[0]),vc(n[1])]}}})}};const LHt=`layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

in vec4 v_color;
in vec4 v_stroke;
in vec4 v_data;
in float v_radius;

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {
  int shape = int(floor(v_data.w + 0.5));
  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + u_stroke_width);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.0));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(antialiasblur, 0.0, inner_df);

  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

  if (u_stroke_width < 0.01) {
    outputColor = v_color;
  } else {
    outputColor = mix(v_color, v_stroke * u_stroke_opacity, color_t);
  }
  float intensity = 1.0;
  if (u_time != -1.0) {
    //wave
    float d = length(v_data.xy);
    if (d > 0.5) {
      discard;
    }
    intensity =
      clamp(cos(d * PI), 0.0, 1.0) *
      clamp(cos(2.0 * PI * (d * 2.0 * u_animate.z - u_animate.y * u_time)), 0.0, 1.0);
  }

  if (u_additive > 0.0) {
    outputColor *= opacity_t;
    outputColor *= intensity; //wave
    outputColor = filterColorAlpha(outputColor, outputColor.a);
  } else {
    outputColor.a *= opacity_t;
    outputColor.a *= intensity; //wave
    outputColor = filterColor(outputColor);
  }
  //  mask 
  if (outputColor.a < 0.01) {
    discard;
  }
}
`,kHt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_SHAPE) in float a_Shape;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniforms {
  vec3 u_blur_height_fixed;
  float u_stroke_width;
  float u_additive;
  float u_stroke_opacity;
  float u_size_unit;
  float u_time;
  vec4 u_animate;
};

out vec4 v_color;
out vec4 v_stroke;
out vec4 v_data;
out float v_radius;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // 
   v_stroke = stroke;
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  /*
  *  setPickingSize 
  *  u_meter2coord 
  */
  float newSize = setPickingSize(a_Size);
  // float newSize = setPickingSize(a_Size) * 0.00001038445708445579;



  // unpack color(vec2)
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  if(u_size_unit == 1.0) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }

   v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / newSize, u_blur_height_fixed.x);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + u_offsets);

  offset = project_pixel(offset);
  offset = rotate_matrix(offset,rotation);

  // TODP: /abs(extrude.x) 
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raisingHeight = u_blur_height_fixed.y;

  if(u_blur_height_fixed.z < 1.0) { // false
    raisingHeight = project_pixel(u_blur_height_fixed.y);
  } else {
     if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_blur_height_fixed.y * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  setPickingColor(a_PickingColor);
}
`;let t6e=class extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,SHAPE:10,EXTRUDE:11})}getCommonUniformsInfo(){const{strokeOpacity:e=1,strokeWidth:n=0,blend:r,blur:i=0,raisingHeight:a=0,heightfixed:o=!1,unit:s="pixel"}=this.layer.getLayerConfig();let l=this.getAnimateUniforms().u_time;isNaN(l)&&(l=-1);const c={u_blur_height_fixed:[i,Number(a),Number(o)],u_stroke_width:n,u_additive:r==="additive"?1:0,u_stroke_opacity:e,u_size_unit:jne[s],u_time:l,u_animate:this.getAnimateUniforms().u_animate};return this.getUniformsBufferInfo(c)}getAnimateUniforms(){const{animateOption:e={enable:!1}}=this.layer.getLayerConfig();return{u_animate:this.animateOption2Array(e),u_time:this.layer.getLayerAnimateTime()}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),sx)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){const{frag:n,vert:r,type:i}=e.getShaders();return e.layer.triangulation=sx,e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:i,vertexShader:r,fragmentShader:n,defines:e.getDefines(),inject:e.getInject(),triangulation:sx,depth:{enable:!1}})]})()}getShaders(){return{frag:LHt,vert:kHt,type:"pointFill"}}animateOption2Array(e){return[e.enable?0:1,e.speed||1,e.rings||3,0]}registerBuiltinAttributes(){const e=this.layer.getLayerConfig().shape2d;this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:fr.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:(n,r,i,a)=>{const o=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],s=a%4*3;return[o[s],o[s+1],o[s+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:n=>{const{size:r=5}=n;return Array.isArray(r)?[r[0]]:[r]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:fr.Attribute,descriptor:{name:"a_Shape",shaderLocation:this.attributeLocation.SHAPE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:n=>{const{shape:r=2}=n;return[e.indexOf(r)]}}})}};const DHt=`in vec2 v_uv;//  uv 
in vec2 v_Iconuv;
in float v_opacity;
out vec4 outputColor;

uniform sampler2D u_texture;
layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed: 0.0;
  float u_raisingHeight: 0.0;
  float u_size_unit;
};

#pragma include "scene_uniforms"
#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  outputColor = texture(SAMPLER_2D(u_texture), pos);
  outputColor.a *= v_opacity;
  outputColor = filterColor(outputColor);
}
`,BHt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniform {
  vec2 u_textSize;
  float u_heightfixed;
  float u_raisingHeight;
  float u_size_unit;
};

out vec2 v_uv;
out vec2 v_Iconuv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  vec3 extrude = a_Extrude;
  v_uv = (a_Extrude.xy + 1.0) / 2.0;
  v_uv.x = 1.0 - v_uv.x;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;
  v_opacity = opacity;
  float newSize = a_Size;
  if (u_size_unit == 1.0) {
    newSize = newSize * u_PixelsPerMeter.z;
  }

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = extrude.xy * newSize + offsets;

  offset = rotate_matrix(offset, rotation);

  offset = project_pixel(offset);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`;class FHt extends Eo{constructor(...e){super(...e),Z(this,"meter2coord",1),Z(this,"texture",void 0),Z(this,"isMeter",!1),Z(this,"radian",0),Z(this,"updateTexture",()=>{const{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),this.layerService.throttleRenderLayers();return}this.texture=n({data:this.iconService.getCanvas(),mag:se.LINEAR,min:se.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0}),this.textures=[this.texture]})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10,UV:11})}getCommonUniformsInfo(){const{raisingHeight:e=0,heightfixed:n=!1,unit:r="pixel"}=this.layer.getLayerConfig();if(this.rendererService.getDirty()){var i;(i=this.texture)===null||i===void 0||i.bind()}const a={u_textSize:[1024,this.iconService.canvasHeight||128],u_heightfixed:Number(n),u_raisingHeight:Number(e),u_size_unit:jne[r]};return this.getUniformsBufferInfo(a)}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),sx)}initModels(){var e=this;return kt(function*(){return e.iconService.on("imageUpdate",e.updateTexture),e.updateTexture(),e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"pointFillImage",vertexShader:BHt,fragmentShader:DHt,triangulation:sx,depth:{enable:!1},defines:e.getDefines(),inject:e.getInject(),cull:{enable:!0,face:se.FRONT}})]})()}clearModels(){var e;this.iconService.off("imageUpdate",this.updateTexture),(e=this.texture)===null||e===void 0||e.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const n=this.iconService.getIconMap(),{shape:r}=e,{x:i,y:a}=n[r]||{x:-64,y:-64};return[i,a]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:fr.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i)=>{const a=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=i%4*3;return[a[o],a[o+1],a[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=5}=e;return Array.isArray(n)?[n[0]]:[n]}}})}}const UHt=`layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

uniform sampler2D u_texture;

in vec4 v_color;
in vec2 v_uv;
in float v_opacity;

#pragma include "picking"

out vec4 outputColor;

void main() {
  vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.0;
  vec4 textureColor;

  // Y = 0.299R + 0.587G + 0.114B // 

  textureColor = texture(SAMPLER_2D(u_texture), pos);

  // Tip:  mipmap 
  float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
  if (fragmengTocenter >= 0.5) {
    float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
    textureColor.a *= luma;
  }

  if (
    all(lessThan(v_color, vec4(1.0 + 0.00001))) && all(greaterThan(v_color, vec4(1.0 - 0.00001))) ||
    v_color == vec4(1.0)
  ) {
    outputColor = textureColor;
  } else {
    outputColor = step(0.01, textureColor.z) * v_color;
  }
  outputColor.a *= v_opacity;
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,jHt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_textSize;
  float u_raisingHeight;
  float u_heightfixed;
};

out vec4 v_color;
out vec2 v_uv;
out float v_opacity;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - 
  v_color = a_Color;
  v_opacity = opacity;
  v_uv = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  vec2 offset = project_pixel(offsets);

  float raisingHeight = u_raisingHeight;
  if (u_heightfixed < 1.0) {
    // false
    raisingHeight = project_pixel(u_raisingHeight);
  } else {
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      raisingHeight = u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, raisingHeight, 1.0));

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;class n6e extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0),Z(this,"updateTexture",()=>{const{createTexture2D:n}=this.rendererService;if(this.texture){this.texture.update({data:this.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),setTimeout(()=>{this.layerService.throttleRenderLayers()});return}this.texture=n({data:this.iconService.getCanvas(),mag:se.LINEAR,min:se.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:this.iconService.canvasHeight||128,mipmap:!0})})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,UV:10})}getUninforms(){if(this.rendererService.getDirty()){var e;(e=this.texture)===null||e===void 0||e.bind()}const n=this.getCommonUniformsInfo(),r=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},n.uniformsOption),r.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:e=0,heightfixed:n=!1}=this.layer.getLayerConfig(),r={u_textSize:[1024,this.iconService.canvasHeight||128],u_raisingHeight:Number(e),u_heightfixed:Number(n),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(r)}initModels(){var e=this;return kt(function*(){return e.iconService.on("imageUpdate",e.updateTexture),e.updateTexture(),e.buildModels()})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"pointImage",vertexShader:jHt,fragmentShader:UHt,triangulation:h$t,defines:e.getDefines(),inject:e.getInject(),depth:{enable:!1},primitive:se.POINTS})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=5}=e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:e=>{const n=this.iconService.getIconMap(),{shape:r}=e,{x:i,y:a}=n[r]||{x:-64,y:-64};return[i,a]}}})}}const zHt=`in vec4 v_color;
out vec4 outputColor;
void main() {
  outputColor = v_color;
}
`,$Ht=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;

layout(std140) uniform u_Common {
  float u_size_scale;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "project"

void main() {
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(project_pos);

  gl_PointSize = a_Size * u_size_scale * 2.0 * u_DevicePixelRatio;
}
`;function Ebe(t){const e=t.coordinates;return{vertices:[...e],indices:[0],size:e.length}}class r6e extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9})}getDefaultStyle(){return{blend:"additive"}}getCommonUniformsInfo(){const e={u_size_scale:.5};return this.getUniformsBufferInfo(e)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.layer.triangulation=Ebe,e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"pointNormal",vertexShader:$Ht,fragmentShader:zHt,triangulation:Ebe,defines:e.getDefines(),inject:e.getInject(),depth:{enable:!1},primitive:se.POINTS,pick:!1})]})()}clearModels(){}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=1}=e;return Array.isArray(n)?[n[0]]:[n]}}})}}const HHt=`
layout(std140) uniform commonUniorm{
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};
in vec4 v_data;
in vec4 v_color;
in float v_radius;
in vec2 v_extrude;
#pragma include "sdf_2d"
#pragma include "picking"

out vec4 outputColor;

void main() {

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  outputColor = vec4(v_color.rgb, v_color.a);

  if(u_additive > 0.0) {
    outputColor *= opacity_t;
  } else {
    outputColor.a *= opacity_t;
  }

  if(outputColor.a > 0.0) {
    outputColor = filterColor(outputColor);
  }

  vec2 extrude =  v_extrude;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  outputColor.a *= radar_v;
}
`,GHt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_EXTRUDE) in vec3 a_Extrude;

layout(std140) uniform commonUniorm {
  float u_additive;
  float u_size_unit;
  float u_speed: 1.0;
  float u_time;
};

out vec4 v_data;
out vec4 v_color;
out float v_radius;
out vec2 v_extrude;

#pragma include "projection"
#pragma include "picking"

void main() {
  float newSize = setPickingSize(a_Size);

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2(
    cos(time), sin(time),
    -sin(time), cos(time)
  );
  v_extrude = rotateMatrix * a_Extrude.xy;

  v_color = a_Color;
  v_color.a *= opacity;

  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  if(u_size_unit == 1.) {
    newSize = newSize  * u_PixelsPerMeter.z;
  }
  v_radius = newSize;

  vec2 offset = (a_Extrude.xy * (newSize));

  offset = project_pixel(offset);

  v_data = vec4(a_Extrude.x, a_Extrude.y, antialiasblur, -1.0);

  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  setPickingColor(a_PickingColor);
}
`;class WHt extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,EXTRUDE:10})}getCommonUniformsInfo(){const{blend:e,speed:n=1,unit:r="pixel"}=this.layer.getLayerConfig(),i={u_additive:e==="additive"?1:0,u_size_unit:jne[r],u_speed:n,u_time:this.layer.getLayerAnimateTime()};return this.getUniformsBufferInfo(i)}getAnimateUniforms(){return{}}getAttribute(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),sx)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"pointRadar",vertexShader:GHt,fragmentShader:HHt,triangulation:sx,defines:e.getDefines(),inject:e.getInject(),depth:{enable:!1}})]})()}animateOption2Array(e){return[e.enable?0:1,e.speed||1,e.rings||3,0]}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:fr.Attribute,descriptor:{name:"a_Extrude",shaderLocation:this.attributeLocation.EXTRUDE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i)=>{const a=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],o=i%4*3;return[a[o],a[o+1],a[o+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{shaderLocation:this.attributeLocation.SIZE,name:"a_Size",buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=5}=e;return Array.isArray(n)?[n[0]]:[n]}}})}}class VHt{constructor(e,n,r){Z(this,"boxCells",[]),Z(this,"xCellCount",void 0),Z(this,"yCellCount",void 0),Z(this,"boxKeys",void 0),Z(this,"bboxes",void 0),Z(this,"width",void 0),Z(this,"height",void 0),Z(this,"xScale",void 0),Z(this,"yScale",void 0),Z(this,"boxUid",void 0);const i=this.boxCells;this.xCellCount=Math.ceil(e/r),this.yCellCount=Math.ceil(n/r);for(let a=0;a<this.xCellCount*this.yCellCount;a++)i.push([]);this.boxKeys=[],this.bboxes=[],this.width=e,this.height=n,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/n,this.boxUid=0}insert(e,n,r,i,a){this.forEachCell(n,r,i,a,this.insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i),this.bboxes.push(a)}query(e,n,r,i,a){return this.queryHitTest(e,n,r,i,!1,a)}hitTest(e,n,r,i,a){return this.queryHitTest(e,n,r,i,!0,a)}insertBoxCell(e,n,r,i,a,o){this.boxCells[a].push(o)}queryHitTest(e,n,r,i,a,o){if(r<0||e>this.width||i<0||n>this.height)return a?!1:[];const s=[];if(e<=0&&n<=0&&this.width<=r&&this.height<=i){if(a)return!0;for(let c=0;c<this.boxKeys.length;c++)s.push({key:this.boxKeys[c],x1:this.bboxes[c*4],y1:this.bboxes[c*4+1],x2:this.bboxes[c*4+2],y2:this.bboxes[c*4+3]});return o?s.filter(o):s}const l={hitTest:a,seenUids:{box:{},circle:{}}};return this.forEachCell(e,n,r,i,this.queryCell,s,l,o),a?s.length>0:s}queryCell(e,n,r,i,a,o,s,l){const c=s.seenUids,u=this.boxCells[a];if(u!==null){const f=this.bboxes;for(const h of u)if(!c.box[h]){c.box[h]=!0;const d=h*4;if(e<=f[d+2]&&n<=f[d+3]&&r>=f[d+0]&&i>=f[d+1]&&(!l||l(this.boxKeys[h]))){if(s.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[h],x1:f[d],y1:f[d+1],x2:f[d+2],y2:f[d+3]})}}}return!1}forEachCell(e,n,r,i,a,o,s,l){const c=this.convertToXCellCoord(e),u=this.convertToYCellCoord(n),f=this.convertToXCellCoord(r),h=this.convertToYCellCoord(i);for(let d=c;d<=f;d++)for(let p=u;p<=h;p++){const g=this.xCellCount*p+d;if(a.call(this,e,n,r,i,g,o,s,l))return}}convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}}class YHt{constructor(e,n){Z(this,"width",void 0),Z(this,"height",void 0),Z(this,"grid",void 0),Z(this,"viewportPadding",100),Z(this,"screenRightBoundary",void 0),Z(this,"screenBottomBoundary",void 0),Z(this,"gridRightBoundary",void 0),Z(this,"gridBottomBoundary",void 0),this.width=e,this.height=n,this.viewportPadding=Math.max(e,n),this.grid=new VHt(e+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=e+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=e+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}placeCollisionBox(e){const n=e.x1+e.anchorPointX+this.viewportPadding,r=e.y1+e.anchorPointY+this.viewportPadding,i=e.x2+e.anchorPointX+this.viewportPadding,a=e.y2+e.anchorPointY+this.viewportPadding;return!this.isInsideGrid(n,r,i,a)||this.grid.hitTest(n,r,i,a)?{box:[]}:{box:[n,r,i,a]}}insertCollisionBox(e,n){const r={featureIndex:n};this.grid.insert(r,e[0],e[1],e[2],e[3])}project(e,n,r){const i=Om(n,r,0,1),a=gc(),o=uQ(...e);return fs(a,i,o),{x:(a[0]/a[3]+1)/2*this.width+this.viewportPadding,y:(-a[1]/a[3]+1)/2*this.height+this.viewportPadding}}isInsideGrid(e,n,r,i){return r>=0&&e<this.gridRightBoundary&&i>=0&&n<this.gridBottomBoundary}}function i6e(t){let e=.5,n=.5;switch(t){case"right":case"top-right":case"bottom-right":e=1;break;case"left":case"top-left":case"bottom-left":e=0;break;default:e=.5}switch(t){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:e,verticalAlign:n}}function a6e(t,e,n,r,i,a,o){const s=(e-n)*i,l=(-r*o+.5)*a;for(const c of t)c.x+=s,c.y+=l}function XHt(t,e,n,r,i,a,o){let l=0,c=-8,u=0;const f=t.positionedGlyphs,h=0,d=f.length;n.forEach(y=>{if(y.split("").forEach(_=>{const E=e[_];E&&(f.push({glyph:_,x:l,y:c+0,vertical:!1,scale:1,metrics:E}),l+=E.advance+o)}),f.length!==d){const _=l-o;u=Math.max(_,u),f.length-1}l=0,c-=r+5});const{horizontalAlign:p,verticalAlign:g}=i6e(i);a6e(f,h,p,g,u,r,n.length);const v=c- -8;t.top+=-g*v,t.bottom=t.top-v,t.left+=-p*u,t.right=t.left+u}function qHt(t,e,n,r,i,a,o){let l=0,c=-8,u=0;const f=t.positionedGlyphs,h=0,d=f.length;n.forEach(y=>{const _=e[y];if(_&&(f.push({glyph:y,x:_.advance/2,y:c+0,vertical:!1,scale:1,metrics:_}),l+=_.advance+o),f.length!==d){const x=l-o;u=Math.max(x,u),f.length-1}l=0,c-=r+5});const{horizontalAlign:p,verticalAlign:g}=i6e(i);a6e(f,h,p,g,u,r,n.length);const v=c- -8;t.top+=-g*v,t.bottom=t.top-v,t.left+=-p*u,t.right=t.left+u}function ZHt(t,e,n,r,i,a,o=[0,0],s){const l=t.split(`
`),c=[],u={positionedGlyphs:c,top:o[1],bottom:o[1],left:o[0],right:o[0],lineCount:l.length,text:t};return s?qHt(u,e,l,n,r,i,a):XHt(u,e,l,n,r,i,a),c.length?u:!1}function KHt(t,e=[0,0],n){const{positionedGlyphs:r=[]}=t,i=[];for(const a of r){const o=a.metrics,s=4,l=o.advance*a.scale/2,c=[0,0],u=[a.x+l+e[0],a.y+e[1]],f=(0-s)*a.scale-l+u[0],h=(0-s)*a.scale+u[1],d=f+o.width*a.scale,p=h+o.height*a.scale,g={x:f,y:h},v={x:d,y:h},y={x:f,y:p},_={x:d,y:p};i.push({tl:g,tr:v,bl:y,br:_,tex:o,glyphOffset:c})}return i}const xbe=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0

uniform sampler2D u_sdf_map;
layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

in vec2 v_uv;
in float v_gamma_scale;
in vec4 v_color;
in vec4 v_stroke_color;
in float v_fontScale;

out vec4 outputColor;

#pragma include "picking"
void main() {
  // get style data mapping

  // get sdf from atlas
  float dist = texture(SAMPLER_2D(u_sdf_map), v_uv).a;

  lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);

  outputColor = mix(v_color, v_stroke_color, smoothstep(0., 0.5, 1.- dist));

  outputColor.a *= alpha;
   //  mask 
  if (outputColor.a < 0.01) {
    discard;
  }
  outputColor = filterColor(outputColor);
}
`,Sbe=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0

layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_TEXT_OFFSETS) in vec2 a_textOffsets;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_tex;

layout(std140) uniform commonUniforms {
  vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
  vec2 u_sdf_map_size;
  float u_raisingHeight: 0.0;
  float u_stroke_width : 2;
  float u_gamma_scale : 0.5;
  float u_halo_blur : 0.5;
};

out vec2 v_uv;
out float v_gamma_scale;
out vec4 v_color;
out vec4 v_stroke_color;
out float v_fontScale;

#pragma include "projection"
#pragma include "picking"
#pragma include "rotation_2d"

void main() {
  // cal style mapping - 

  v_uv = a_tex / u_sdf_map_size;



  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  v_stroke_color = vec4(u_stroke_color.xyz, u_stroke_color.w * opacity);

  // 
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  vec2 offset = rotate_matrix(a_textOffsets,rotation);

  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));

  gl_Position = vec4(
    projected_position.xy / projected_position.w + offset * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`,{isEqual:P2}=gs;function Tbe(t){const e=this,n=t.id,r=[],i=[];if(!e.glyphInfoMap||!e.glyphInfoMap[n])return{vertices:[],indices:[],size:7};const a=e.glyphInfoMap[n].centroid,o=a.length===2?[a[0],a[1],0]:a;return e.glyphInfoMap[n].glyphQuads.forEach((s,l)=>{r.push(...o,s.tex.x,s.tex.y+s.tex.height,s.tl.x,s.tl.y,...o,s.tex.x+s.tex.width,s.tex.y+s.tex.height,s.tr.x,s.tr.y,...o,s.tex.x+s.tex.width,s.tex.y,s.br.x,s.br.y,...o,s.tex.x,s.tex.y,s.bl.x,s.bl.y),i.push(0+l*4,1+l*4,2+l*4,2+l*4,3+l*4,0+l*4)}),{vertices:r,indices:i,size:7}}class o6e extends Eo{constructor(...e){var n;super(...e),n=this,Z(this,"glyphInfo",void 0),Z(this,"glyphInfoMap",{}),Z(this,"rawEncodeData",void 0),Z(this,"texture",void 0),Z(this,"currentZoom",-1),Z(this,"extent",void 0),Z(this,"textureHeight",0),Z(this,"textCount",0),Z(this,"preTextStyle",{}),Z(this,"mapping",kt(function*(){n.initGlyph(),n.updateTexture(),yield n.reBuildModel()}))}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,TEXT_OFFSETS:10,UV:11})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze(ze({},e.uniformsOption),n.uniformsOption),{u_sdf_map:this.textures[0]})}getCommonUniformsInfo(){const{stroke:e="#fff",strokeWidth:n=0,halo:r=.5,gamma:i=2,raisingHeight:a=0}=this.layer.getLayerConfig(),o=this.getFontServiceMapping(),s=this.getFontServiceCanvas();o&&Object.keys(o).length!==this.textCount&&s&&(this.updateTexture(),this.textCount=Object.keys(o).length),this.preTextStyle=this.getTextStyle();const l={u_stroke_color:Xo(e),u_sdf_map_size:[s?.width||1,s?.height||1],u_raisingHeight:Number(a),u_stroke_width:n,u_gamma_scale:i,u_halo_blur:r};return this.getUniformsBufferInfo(l)}initModels(){var e=this;return kt(function*(){return e.bindEvent(),e.extent=e.textExtent(),e.rawEncodeData=e.layer.getEncodedData(),e.preTextStyle=e.getTextStyle(),e.initUniformsBuffer(),e.buildModels()})()}buildModels(){var e=this;return kt(function*(){const{textAllowOverlap:n=!1}=e.layer.getLayerConfig();return e.initGlyph(),e.updateTexture(),n||e.filterGlyphs(),[yield e.layer.buildLayerModel({moduleName:"pointText",vertexShader:Sbe,fragmentShader:xbe,defines:e.getDefines(),inject:e.getInject(),triangulation:Tbe.bind(e),depth:{enable:!1}})]})()}needUpdate(){var e=this;return kt(function*(){const{textAllowOverlap:n=!1,textAnchor:r="center",textOffset:i,padding:a,fontFamily:o,fontWeight:s}=e.getTextStyle();if(!P2(a,e.preTextStyle.padding)||!P2(i,e.preTextStyle.textOffset)||!P2(r,e.preTextStyle.textAnchor)||!P2(o,e.preTextStyle.fontFamily)||!P2(s,e.preTextStyle.fontWeight))return yield e.mapping(),!0;if(n)return!1;const l=e.mapService.getZoom(),c=e.mapService.getBounds(),u=Sne(e.extent,c);return Math.abs(e.currentZoom-l)>.5||!u||n!==e.preTextStyle.textAllowOverlap?(yield e.reBuildModel(),!0):!1})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy(),this.layer.off("remapping",this.mapping)}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:fr.Attribute,descriptor:{shaderLocation:this.attributeLocation.TEXT_OFFSETS,name:"a_textOffsets",buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:2,update:(e,n,r)=>[r[5],r[6]]}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:fr.Attribute,descriptor:{name:"a_tex",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:(e,n,r)=>[r[3],r[4]]}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=12}=e;return Array.isArray(n)?[n[0]]:[n]}}})}bindEvent(){this.layer.isTileLayer||this.layer.on("remapping",this.mapping)}textExtent(){const e=this.mapService.getBounds();return VM(e,.5)}initTextFont(){const{fontWeight:e,fontFamily:n}=this.getTextStyle(),r=this.rawEncodeData,i=[];r.forEach(a=>{let{shape:o=""}=a;o=o.toString();for(const s of o)i.indexOf(s)===-1&&i.push(s)}),this.fontService.setFontOptions({characterSet:i,fontWeight:e,fontFamily:n,iconfont:!1})}initIconFontTex(){const{fontWeight:e,fontFamily:n}=this.getTextStyle(),r=this.rawEncodeData,i=[];r.forEach(a=>{let{shape:o=""}=a;o=`${o}`,i.indexOf(o)===-1&&i.push(o)}),this.fontService.setFontOptions({characterSet:i,fontWeight:e,fontFamily:n,iconfont:!0})}getTextStyle(){const{fontWeight:e="400",fontFamily:n="sans-serif",textAllowOverlap:r=!1,padding:i=[0,0],textAnchor:a="center",textOffset:o=[0,0],opacity:s=1,strokeOpacity:l=1,strokeWidth:c=0,stroke:u="#000"}=this.layer.getLayerConfig();return{fontWeight:e,fontFamily:n,textAllowOverlap:r,padding:i,textAnchor:a,textOffset:o,opacity:s,strokeOpacity:l,strokeWidth:c,stroke:u}}generateGlyphLayout(e){const n=this.getFontServiceMapping(),{spacing:r=2,textAnchor:i="center",textOffset:a}=this.layer.getLayerConfig(),o=this.rawEncodeData;this.glyphInfo=o.map(s=>{const{shape:l="",id:c,size:u=1}=s,f=s.textOffset?s.textOffset:a||[0,0],h=s.textAnchor?s.textAnchor:i||"center",d=ZHt(l.toString(),n,u,h,"left",r,f,e),p=KHt(d,f);return s.shaping=d,s.glyphQuads=p,s.centroid=Px(s.coordinates),this.glyphInfoMap[c]={shaping:d,glyphQuads:p,centroid:Px(s.coordinates)},s})}getFontServiceMapping(){const{fontWeight:e="400",fontFamily:n="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getMappingByKey(`${n}_${e}`)}getFontServiceCanvas(){const{fontWeight:e="400",fontFamily:n="sans-serif"}=this.layer.getLayerConfig();return this.fontService.getCanvasByKey(`${n}_${e}`)}filterGlyphs(){const{padding:e=[0,0],textAllowOverlap:n=!1}=this.layer.getLayerConfig();if(n)return;this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();const{width:r,height:i}=this.rendererService.getViewportSize(),a=new YHt(r,i);this.glyphInfo.filter(s=>{const{shaping:l,id:c=0}=s,u=s.centroid,h=s.size/16,d=this.mapService.lngLatToContainer(u),{box:p}=a.placeCollisionBox({x1:l.left*h-e[0],x2:l.right*h+e[0],y1:l.top*h-e[1],y2:l.bottom*h+e[1],anchorPointX:d.x,anchorPointY:d.y});return p&&p.length?(a.insertCollisionBox(p,c),!0):!1}).forEach(s=>{this.glyphInfoMap[s.id]=s})}initGlyph(){const{iconfont:e=!1}=this.layer.getLayerConfig();e?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(e)}updateTexture(){const{createTexture2D:e}=this.rendererService,n=this.getFontServiceCanvas();this.textureHeight=n.height,this.texture&&this.texture.destroy(),this.texture=e({data:n,mag:se.LINEAR,min:se.LINEAR,width:n.width,height:n.height}),this.textures=[this.texture]}reBuildModel(){var e=this;return kt(function*(){e.filterGlyphs();const n=yield e.layer.buildLayerModel({moduleName:"pointText",vertexShader:Sbe,fragmentShader:xbe,triangulation:Tbe.bind(e),defines:e.getDefines(),inject:e.getInject(),depth:{enable:!1}});e.layer.models=[n]})()}}const QHt={fillImage:FHt,fill:t6e,radar:WHt,image:n6e,normal:r6e,simplePoint:THt,extrude:e6e,text:o6e,earthFill:PHt,earthExtrude:CHt};class tP extends oS{constructor(...e){super(...e),Z(this,"type","PointLayer"),Z(this,"enableShaderEncodeStyles",["stroke","offsets","opacity","rotation"]),Z(this,"enableDataEncodeStyles",["textOffset","textAnchor"]),Z(this,"defaultSourceConfig",{data:[],options:{parser:{type:"json",x:"lng",y:"lat"}}})}buildModels(){var e=this;return kt(function*(){const n=e.getModelType();e.layerModel&&e.layerModel.clearModels(),e.layerModel=new QHt[n](e),yield e.initLayerModels()})()}rebuildModels(){var e=this;return kt(function*(){yield e.buildModels()})()}getModelTypeWillEmptyData(){if(this.shapeOption){const{field:e,values:n}=this.shapeOption,{shape2d:r}=this.getLayerConfig(),i=this.iconService.getIconMap();if(e&&r?.indexOf(e)!==-1)return"fill";if(n==="text")return"text";if(n&&n instanceof Array){for(const a of n)if(typeof a=="string"&&i.hasOwnProperty(a))return"image"}}return"normal"}getDefaultConfig(){const e=this.getModelType();return{fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},text:{blend:"normal"},tile:{},tileText:{},earthFill:{},earthExtrude:{}}[e]}getModelType(){const e=this.getEncodedData(),{shape2d:n,shape3d:r,billboard:i=!0}=this.getLayerConfig(),a=this.iconService.getIconMap(),o=e.find(s=>s.hasOwnProperty("shape"));if(o){const s=o.shape;return s==="dot"?"normal":s==="simple"?"simplePoint":s==="radar"?"radar":this.layerType==="fillImage"||i===!1?"fillImage":n?.indexOf(s)!==-1?this.mapService.version==="GLOBEL"?"earthFill":"fill":r?.indexOf(s)!==-1?this.mapService.version==="GLOBEL"?"earthExtrude":"extrude":a.hasOwnProperty(s)?"image":"text"}else return this.getModelTypeWillEmptyData()}}function JHt(t){return wZ.apply(this,arguments)}function wZ(){return wZ=kt(function*(t){if(window.createImageBitmap){const e=yield fetch(t);return yield createImageBitmap(yield e.blob())}else{const e=new window.Image;return new Promise(n=>{e.onload=()=>n(e),e.src=t,e.crossOrigin="Anonymous"})}}),wZ.apply(this,arguments)}const eGt=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  // top face
  if (u_topsurface < 1.0) {
    discard;
  }

  outputColor = v_Color;

  outputColor = filterColor(outputColor);
}
`,tGt=`layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;
out vec4 outputColor;

#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  float isSide = v_texture_data.x;
  float sidey = v_uvs[2];
  float lightWeight = v_texture_data.y;

  // Tip:  GPU 
  if (isSide < 0.999) {
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      // side use linear
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      // side notuse linear
      outputColor = v_Color;
    }
  } else {
    // top face
    if (u_topsurface < 1.0) {
      discard;
    }
    outputColor = v_Color;
  }

  outputColor = filterColorAlpha(outputColor, lightWeight);
}
`,nGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  v_uvs = a_uvs;
  // cal style mapping - 
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);

  if (u_heightfixed > 0.0) {
    // 
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;
    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  float lightWeight = calc_lighting(project_pos);
  v_texture_data = vec2(a_Position.z, lightWeight);

  v_Color = vec4(a_Color.rgb * lightWeight, a_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,rGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  float isSide = a_Position.z;
  float topU = a_uvs[0];
  float topV = 1.0 - a_uvs[1];
  float sidey = a_uvs[2];

  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);

  if (u_heightfixed > 0.0) {
    // 
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

 gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  // Tip:  GPU 
  if (isSide < 0.999) {
    // side face
    // if(u_sidesurface < 1.0) {
    //   discard;
    // }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      v_Color = linearColor;
    } else {
      v_Color = a_Color;
    }

  } else {
    v_Color = a_Color;
  }

  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  setPickingColor(a_PickingColor);
}
`,iGt=`uniform sampler2D u_texture;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

in vec4 v_Color;
in vec3 v_uvs;
in vec2 v_texture_data;

#pragma include "scene_uniforms"
#pragma include "picking"

out vec4 outputColor;

void main() {
  float opacity = u_opacity;
  float isSide = v_texture_data.x;
  float lightWeight = v_texture_data.y;
  float topU = v_uvs[0];
  float topV = 1.0 - v_uvs[1];
  float sidey = v_uvs[2];

  outputColor = texture(SAMPLER_2D(u_texture), vec2(topU, topV));
  // Tip:  GPU 
  if (isSide < 0.999) {
    // 
    // side face
    if (u_sidesurface < 1.0) {
      discard;
    }

    if (u_linearColor == 1.0) {
      vec4 linearColor = mix(u_targetColor, u_sourceColor, sidey);
      linearColor.rgb *= lightWeight;
      outputColor = linearColor;
    } else {
      outputColor = v_Color;
    }
  } else {
    // top face
    if (u_topsurface < 1.0) {
      discard;
    }
  }

  outputColor.a *= opacity;
  outputColor = filterColor(outputColor);
}
`,aGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;
layout(location = ATTRIBUTE_LOCATION_UV) in vec3 a_uvs;

layout(std140) uniform commonUniforms {
  vec4 u_sourceColor;
  vec4 u_targetColor;
  float u_linearColor;
  float u_topsurface;
  float u_sidesurface;
  float u_heightfixed; // 
  float u_raisingHeight;
};

out vec4 v_Color;
out vec3 v_uvs;
out vec2 v_texture_data;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size, 1.0);
  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_uvs = a_uvs;
  v_Color = a_Color;
  v_Color.a *= opacity;

  v_texture_data = vec2(a_Position.z, lightWeight);

  if (u_heightfixed > 0.0) {
    // 
    project_pos.z = a_Position.z * a_Size;
    project_pos.z += u_raisingHeight;

    if (
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
      u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    ) {
      float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
      project_pos.z *= mapboxZoomScale;
      project_pos.z += u_raisingHeight * mapboxZoomScale;
    }
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class oGt extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,UV:11})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{mapTexture:e,heightfixed:n=!1,raisingHeight:r=0,topsurface:i=!0,sidesurface:a=!0,sourceColor:o,targetColor:s}=this.layer.getLayerConfig();let l=0,c=[1,1,1,1],u=[1,1,1,1];o&&s&&(c=Xo(o),u=Xo(s),l=1);const f={u_sourceColor:c,u_targetColor:u,u_linearColor:l,u_topsurface:Number(i),u_sidesurface:Number(a),u_heightfixed:Number(n),u_raisingHeight:Number(r)};return e&&this.texture&&(f.u_texture=this.texture,this.textures=[this.texture]),this.getUniformsBufferInfo(f)}initModels(){var e=this;return kt(function*(){return yield e.loadTexture(),e.buildModels()})()}buildModels(){var e=this;return kt(function*(){const{frag:n,vert:r,type:i}=e.getShaders();return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:i,vertexShader:r,fragmentShader:n,depth:{enable:!0},defines:e.getDefines(),inject:e.getInject(),triangulation:Z4e})]})()}getShaders(){const{pickLight:e,mapTexture:n}=this.layer.getLayerConfig();return n?{frag:iGt,vert:aGt,type:"polygonExtrudeTexture"}:e?{frag:tGt,vert:nGt,type:"polygonExtrudePickLight"}:{frag:eGt,vert:rGt,type:"polygonExtrude"}}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy(),this.textures=[]}registerBuiltinAttributes(){const e=this.layer.getSource().extent,n=e[2]-e[0],r=e[3]-e[1];this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uvs",type:fr.Attribute,descriptor:{name:"a_uvs",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(i,a,o)=>{const s=o[0],l=o[1];return[(s-e[0])/n,(l-e[1])/r,o[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:fr.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(i,a,o,s,l)=>l}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:i=>{const{size:a=10}=i;return Array.isArray(a)?[a[0]]:[a]}}})}loadTexture(){var e=this;return kt(function*(){const{mapTexture:n}=e.layer.getLayerConfig(),{createTexture2D:r}=e.rendererService;if(e.texture=r({height:1,width:1}),n){const i=yield JHt(n);e.texture=r({data:i,width:i.width,height:i.height,wrapS:se.CLAMP_TO_EDGE,wrapT:se.CLAMP_TO_EDGE,min:se.LINEAR,mag:se.LINEAR})}})()}}const sGt=`in vec4 v_Color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_Color;
  outputColor = filterColor(outputColor);
}
`,lGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_SIZE) in float a_Size;
layout(location = ATTRIBUTE_LOCATION_NORMAL) in vec3 a_Normal;

out vec4 v_Color;

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

void main() {
  vec4 pos = vec4(a_Position.xy, a_Position.z * a_Size + (1.0 - a_Position.z) * extrusionBase, 1.0);

  vec4 project_pos = project_position(pos, a_Position64Low);
  float lightWeight = calc_lighting(project_pos);
  v_Color = a_Color;
  v_Color = vec4(v_Color.rgb * lightWeight, v_Color.w * opacity);

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}
`;class cGt extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,SIZE:9,NORMAL:10,EXTRUSION_BASE:11})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const e={};return this.getUniformsBufferInfo(e)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){const{frag:n,vert:r,type:i}=e.getShaders();return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:i,vertexShader:r,fragmentShader:n,defines:e.getDefines(),inject:e.getInject(),triangulation:Z4e,depth:{enable:!0}})]})()}getShaders(){return{frag:sGt,vert:lGt,type:"polygonExtrude"}}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"normal",type:fr.Attribute,descriptor:{name:"a_Normal",shaderLocation:this.attributeLocation.NORMAL,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(e,n,r,i,a)=>a}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:fr.Attribute,descriptor:{name:"a_Size",shaderLocation:this.attributeLocation.SIZE,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{size:n=10}=e;return Array.isArray(n)?[n[0]]:[n]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrusionBase",type:fr.Attribute,descriptor:{name:"a_ExtrusionBase",shaderLocation:this.attributeLocation.EXTRUSION_BASE,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:1,update:e=>{const{extrusionBase:n=0}=e;return[n]}}})}}const uGt=`in vec4 v_color;
#pragma include "scene_uniforms"
#pragma include "picking"
out vec4 outputColor;
void main() {
  outputColor = v_color;
  outputColor = filterColor(outputColor);
}
`,fGt=`layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

in vec4 v_color;
in vec3 v_linear;
in vec2 v_pos;
out vec4 outputColor;
#pragma include "scene_uniforms"
#pragma include "picking"

void main() {
  outputColor = v_color;
  if (u_opacitylinear > 0.0) {
    outputColor.a *=
      u_dir == 1.0
        ? 1.0 - length(v_pos - v_linear.xy) / v_linear.z
        : length(v_pos - v_linear.xy) / v_linear.z;
  }
  outputColor = filterColor(outputColor);
}
`,hGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_LINEAR) in vec3 a_linear;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
  float u_opacitylinear;
  float u_dir;
};

out vec4 v_color;
out vec3 v_linear;
out vec2 v_pos;

#pragma include "projection"
#pragma include "picking"

void main() {
  if (u_opacitylinear > 0.0) {
    v_linear = a_linear;
    v_pos = a_Position.xy;
  }
  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  project_pos.z += u_raisingHeight;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  setPickingColor(a_PickingColor);
}
`,dGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;

layout(std140) uniform commonUniforms {
  float u_raisingHeight;
};

out vec4 v_color;

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - 

  v_color = vec4(a_Color.xyz, a_Color.w * opacity);
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);

  project_pos.z += u_raisingHeight;

  if (
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
  ) {
    float mapboxZoomScale = 4.0 / pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
    project_pos.z += u_raisingHeight * mapboxZoomScale;
  }

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  setPickingColor(a_PickingColor);
}

`;class pGt extends Eo{get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,LINEAR:9})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{raisingHeight:e=0,opacityLinear:n={enable:!1,dir:"in"}}=this.layer.getLayerConfig(),r={u_raisingHeight:Number(e),u_opacitylinear:Number(n.enable),u_dir:n.dir==="in"?1:0};return this.getUniformsBufferInfo(r)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){const{frag:n,vert:r,triangulation:i,type:a}=e.getModelParams();return e.initUniformsBuffer(),e.layer.triangulation=i,[yield e.layer.buildLayerModel({moduleName:a,vertexShader:r,fragmentShader:n,defines:e.getDefines(),inject:e.getInject(),triangulation:i,primitive:se.TRIANGLES,depth:{enable:!1}})]})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute();const{opacityLinear:e={enable:!1,dir:"in"}}=this.layer.getLayerConfig();e.enable&&this.styleAttributeService.registerStyleAttribute({name:"linear",type:fr.Attribute,descriptor:{name:"a_linear",shaderLocation:this.attributeLocation.LINEAR,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:3,update:(n,r,i)=>[i[3],i[4],i[5]]}})}getModelParams(){const{opacityLinear:e={enable:!1}}=this.layer.getLayerConfig();return e.enable?{frag:fGt,vert:hGt,type:"polygonLinear",triangulation:g$t}:{frag:uGt,vert:dGt,type:"polygonFill",triangulation:pN}}}const gGt=`layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

in vec2 v_uv;
in float v_opacity;
out vec4 outputColor;

float coast2water_fadedepth = 0.1;
float large_waveheight = 0.75; // change to adjust the "heavy" waves
float large_wavesize = 3.4; // factor to adjust the large wave size
float small_waveheight = 0.6; // change to adjust the small random waves
float small_wavesize = 0.5; // factor to ajust the small wave size
float water_softlight_fact = 15.0; // range [1..200] (should be << smaller than glossy-fact)
float water_glossylight_fact = 120.0; // range [1..200]
float particle_amount = 70.0;

vec3 water_specularcolor = vec3(1.3, 1.3, 0.9); // specular Color (RGB) of the water-highlights
#define light (vec3(-0.0, sin(u_time * 0.5) * 0.5 + 0.35, 2.8)) // position of the sun

uniform sampler2D u_texture1;
uniform sampler2D u_texture2;
uniform sampler2D u_texture3;

float hash(float n) {
  return fract(sin(n) * 43758.5453123);
}

// 2d noise function
float noise1(vec2 x) {
  vec2 p = floor(x);
  vec2 f = smoothstep(0.0, 1.0, fract(x));
  float n = p.x + p.y * 57.0;
  return mix(mix(hash(n + 0.0), hash(n + 1.0), f.x), mix(hash(n + 57.0), hash(n + 58.0), f.x), f.y);
}

float noise(vec2 p) {
  return texture(SAMPLER_2D(u_texture2), p * vec2(1.0 / 256.0)).x;
}

vec4 highness(vec2 p) {
  vec4 t = texture(SAMPLER_2D(u_texture1), fract(p));
  float clipped =
    -2.0 -
    smoothstep(3.0, 10.0, t.a) * 6.9 -
    smoothstep(10.0, 100.0, t.a) * 89.9 -
    smoothstep(0.0, 10000.0, t.a) * 10000.0;
  return clamp(t, 0.0, 3.0) + clamp(t / 3.0 - 1.0, 0.0, 1.0) + clamp(t / 16.0 - 1.0, 0.0, 1.0);
}

float height_map(vec2 p) {
  vec4 height = highness(p);
  /*
    height = -0.5+
        0.5*smoothstep(-100.,0.,-height)+
        2.75*smoothstep(0.,2.,height)+
        1.75*smoothstep(2.,4.,height)+
        2.75*smoothstep(4.,16.,height)+
        1.5*smoothstep(16.,1000.,height);
    */

  mat2 m = mat2(0.9563 * 1.4, -0.2924 * 1.4, 0.2924 * 1.4, 0.9563 * 1.4);
  //p = p*6.;
  float f = 0.6 * noise1(p);
  p = m * p * 1.1 * 6.0;
  f += 0.25 * noise(p);
  p = m * p * 1.32;
  f += 0.1666 * noise(p);
  p = m * p * 1.11;
  f += 0.0834 * noise(p);
  p = m * p * 1.12;
  f += 0.0634 * noise(p);
  p = m * p * 1.13;
  f += 0.0444 * noise(p);
  p = m * p * 1.14;
  f += 0.0274 * noise(p);
  p = m * p * 1.15;
  f += 0.0134 * noise(p);
  p = m * p * 1.16;
  f += 0.0104 * noise(p);
  p = m * p * 1.17;
  f += 0.0084 * noise(p);
  f = 0.25 * f + dot(height, vec4(-0.03125, -0.125, 0.25, 0.25)) * 0.5;
  const float FLAT_LEVEL = 0.92525;
  //f = f*0.25+height*0.75;
  if (f < FLAT_LEVEL) f = f;
  else f = pow((f - FLAT_LEVEL) / (1.0 - FLAT_LEVEL), 2.0) * (1.0 - FLAT_LEVEL) * 2.0 + FLAT_LEVEL; // makes a smooth coast-increase
  return clamp(f, 0.0, 10.0);
}

vec3 plasma_quintic(float x) {
  x = clamp(x, 0.0, 1.0);
  vec4 x1 = vec4(1.0, x, x * x, x * x * x); // 1 x x2 x3
  vec4 x2 = x1 * x1.w * x; // x4 x5 x6 x7
  return vec3(
    dot(x1.xyzw, vec4(+0.063861086, +1.992659096, -1.023901152, -0.490832805)) +
      dot(x2.xy, vec2(+1.308442123, -0.914547012)),
    dot(x1.xyzw, vec4(+0.04971859, -0.791144343, +2.892305078, +0.811726816)) +
      dot(x2.xy, vec2(-4.686502417, +2.717794514)),
    dot(x1.xyzw, vec4(+0.513275779, +1.58025506, -5.164414457, +4.559573646)) +
      dot(x2.xy, vec2(-1.916810682, +0.570638854))
  );
}

vec4 color(vec2 p) {
  vec4 c1 = vec4(1.7, 1.6, 0.9, 1);
  vec4 c2 = vec4(0.2, 0.94, 0.1, 1);
  vec4 c3 = vec4(0.3, 0.2, 0.0, 1);
  vec4 c4 = vec4(0.99, 0.99, 1.6, 1);
  vec4 v = highness(p);
  float los = smoothstep(0.1, 1.1, v.b);
  float his = smoothstep(3.5, 6.5, v.b);
  float ces = smoothstep(1.0, 5.0, v.a);
  vec4 lo = mix(c1, c2, los);
  vec4 hi = mix(c3, c4, his);
  vec4 ce = mix(lo, hi, ces);

  return vec4(plasma_quintic(ces), 1).ragb;
}

vec3 terrain_map(vec2 p) {
  return color(p).rgb * 0.75 +
  0.25 * vec3(0.7, 0.55, 0.4) +
  texture(SAMPLER_2D(u_texture3), fract(p * 5.0)).rgb * 0.5; // test-terrain is simply 'sandstone'
}

const mat2 m = mat2(
   0.72, -1.6 ,
   1.6 ,  0.72
);

float water_map(vec2 p, float height) {
  vec2 p2 = p * large_wavesize;
  vec2 shift1 = 0.001 * vec2(u_time * 160.0 * 2.0, u_time * 120.0 * 2.0);
  vec2 shift2 = 0.001 * vec2(u_time * 190.0 * 2.0, -u_time * 130.0 * 2.0);

  // coarse crossing 'ocean' waves...
  float f = 0.6 * noise(p);
  f += 0.25 * noise(p * m);
  f += 0.1666 * noise(p * m * m);
  float wave =
    sin(p2.x * 0.622 + p2.y * 0.622 + shift2.x * 4.269) * large_waveheight * f * height * height;

  p *= small_wavesize;
  f = 0.0;
  float amp = 1.0,
    s = 0.5;
  for (int i = 0; i < 9; i++) {
    p = m * p * 0.947;
    f -= amp * abs(sin((noise(p + shift1 * s) - 0.5) * 2.0));
    amp = amp * 0.59;
    s *= -1.329;
  }

  return wave + f * small_waveheight;
}

float nautic(vec2 p) {
  p *= 18.0;
  float f = 0.0;
  float amp = 1.0,
    s = 0.5;
  for (int i = 0; i < 3; i++) {
    p = m * p * 1.2;
    f += amp * abs(smoothstep(0.0, 1.0, noise(p + u_time * s)) - 0.5);
    amp = amp * 0.5;
    s *= -1.227;
  }
  return pow(1.0 - f, 5.0);
}

float particles(vec2 p) {
  p *= 200.0;
  float f = 0.0;
  float amp = 1.0,
    s = 1.5;
  for (int i = 0; i < 3; i++) {
    p = m * p * 1.2;
    f += amp * noise(p + u_time * s);
    amp = amp * 0.5;
    s *= -1.227;
  }
  return pow(f * 0.35, 7.0) * particle_amount;
}

float test_shadow(vec2 xy, float height) {
  vec3 r0 = vec3(xy, height);
  vec3 rd = normalize(light - r0);

  float hit = 1.0;
  float t = 0.001;
  for (int j = 1; j < 25; j++) {
    vec3 p = r0 + t * rd;
    float h = height_map(p.xy);
    float height_diff = p.z - h;
    if (height_diff < 0.0) {
      return 0.0;
    }
    t += 0.01 + height_diff * 0.02;
    hit = min(hit, 2.0 * height_diff / t); // soft shaddow
  }
  return hit;
}

vec3 CalcTerrain(vec2 uv, float height) {
  vec3 col = terrain_map(uv);
  vec2 iResolution = vec2(512.0);
  float h1 = height_map(uv - vec2(0.0, 0.5) / iResolution.xy);
  float h2 = height_map(uv + vec2(0.0, 0.5) / iResolution.xy);
  float h3 = height_map(uv - vec2(0.5, 0.0) / iResolution.xy);
  float h4 = height_map(uv + vec2(0.5, 0.0) / iResolution.xy);
  vec3 norm = normalize(vec3(h3 - h4, h1 - h2, 1.0));
  vec3 r0 = vec3(uv, height);
  vec3 rd = normalize(light - r0);
  float grad = dot(norm, rd);
  col *= grad + pow(grad, 8.0);
  float terrainshade = test_shadow(uv, height);
  col = mix(col * 0.25, col, terrainshade);
  return col;
}

void main() {
  vec3 watercolor = u_watercolor.rgb;
  vec3 watercolor2 = u_watercolor2.rgb;
  vec2 uv = v_uv;
  float WATER_LEVEL = 0.84; // Water level (range: 0.0 - 2.0)
  float deepwater_fadedepth = 0.4 + coast2water_fadedepth;
  float height = height_map(uv);
  vec3 col;

  float waveheight = clamp(WATER_LEVEL * 3.0 - 1.5, 0.0, 1.0);
  float level = WATER_LEVEL + 0.2 * water_map(uv * 15.0 + vec2(u_time * 0.1), waveheight);
  if (height > level) {
    col = CalcTerrain(uv, height);
  }
  if (height <= level) {
    vec2 dif = vec2(0.0, 0.01);
    vec2 pos = uv * 15.0 + vec2(u_time * 0.01);
    float h1 = water_map(pos - dif, waveheight);
    float h2 = water_map(pos + dif, waveheight);
    float h3 = water_map(pos - dif.yx, waveheight);
    float h4 = water_map(pos + dif.yx, waveheight);
    vec3 normwater = normalize(vec3(h3 - h4, h1 - h2, 0.125)); // norm-vector of the 'bumpy' water-plane
    uv += normwater.xy * 0.002 * (level - height);

    col = CalcTerrain(uv, height);

    float coastfade = clamp((level - height) / coast2water_fadedepth, 0.0, 1.0);
    float coastfade2 = clamp((level - height) / deepwater_fadedepth, 0.0, 1.0);
    float intensity = col.r * 0.2126 + col.g * 0.7152 + col.b * 0.0722;
    watercolor = mix(watercolor * intensity, watercolor2, smoothstep(0.0, 1.0, coastfade2));

    vec3 r0 = vec3(uv, WATER_LEVEL);
    vec3 rd = normalize(light - r0); // ray-direction to the light from water-position
    float grad = dot(normwater, rd); // dot-product of norm-vector and light-direction
    float specular = pow(grad, water_softlight_fact); // used for soft highlights
    float specular2 = pow(grad, water_glossylight_fact); // used for glossy highlights
    float gradpos = dot(vec3(0.0, 0.0, 1.0), rd);
    float specular1 = smoothstep(0.0, 1.0, pow(gradpos, 5.0)); // used for diffusity (some darker corona around light's specular reflections...)
    float watershade = test_shadow(uv, level);
    watercolor *= 2.2 + watershade;
    watercolor += (0.2 + 0.8 * watershade) * ((grad - 1.0) * 0.5 + specular) * 0.25;
    watercolor /= 1.0 + specular1 * 1.25;
    watercolor += watershade * specular2 * water_specularcolor;
    watercolor +=
      watershade *
      coastfade *
      (1.0 - coastfade2) *
      (vec3(0.5, 0.6, 0.7) * nautic(uv) + vec3(1.0, 1.0, 1.0) * particles(uv));

    col = mix(col, watercolor, coastfade);
  }

  outputColor = vec4(col, v_opacity);
}
`,vGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  vec4 u_watercolor;
  vec4 u_watercolor2;
  float u_time;
};

out vec2 v_uv;
out float v_opacity;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_opacity = opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class mGt extends Eo{constructor(...e){super(...e),Z(this,"texture1",void 0),Z(this,"texture2",void 0),Z(this,"texture3",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{watercolor:e="#6D99A8",watercolor2:n="#0F121C"}=this.layer.getLayerConfig(),r={u_watercolor:Xo(e),u_watercolor2:Xo(n),u_time:this.layer.getLayerAnimateTime(),u_texture1:this.texture1,u_texture2:this.texture2,u_texture3:this.texture3};return this.textures=[this.texture1,this.texture2,this.texture3],this.getUniformsBufferInfo(r)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var e=this;return kt(function*(){return e.loadTexture(),e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"polygonOcean",vertexShader:vGt,fragmentShader:gGt,defines:e.getDefines(),inject:e.getInject(),triangulation:pN,primitive:se.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var e,n,r;(e=this.texture1)===null||e===void 0||e.destroy(),(n=this.texture2)===null||n===void 0||n.destroy(),(r=this.texture3)===null||r===void 0||r.destroy()}registerBuiltinAttributes(){const e=this.layer.getSource().extent,[n,r,i,a]=e,o=i-n,s=a-r;this.styleAttributeService.registerStyleAttribute({name:"oceanUv",type:fr.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:2,update:(l,c,u)=>{const[f,h]=u;return[(f-n)/o,(h-r)/s]}}})}loadTexture(){const{createTexture2D:e}=this.rendererService,n={height:0,width:0};this.texture1=e(n),this.texture2=e(n),this.texture3=e(n),r(a=>{this.texture1=i(a[0]),this.texture2=i(a[1]),this.texture3=i(a[2]),this.layerService.reRender()});function r(a){let o=0;const s=[];["https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*MJ22QbpuCzIAAAAAAAAAAAAAARQnAQ","https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*-z2HSIVDsHIAAAAAAAAAAAAAARQnAQ"].map(c=>{const u=new Image;u.crossOrigin="",u.src=c,s.push(u),u.onload=()=>{o++,o===3&&a(s)}})}function i(a){return e({data:a,width:a.width,height:a.height,wrapS:se.MIRRORED_REPEAT,wrapT:se.MIRRORED_REPEAT,min:se.LINEAR,mag:se.LINEAR})}}}const yGt=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};

out vec4 outputColor;

in vec4 v_Color;
in vec2 v_uv;

float rand(vec2 n) {
  return 0.5 + 0.5 * fract(sin(dot(n.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

float water(vec3 p) {
  float t = u_time * u_speed;
  p.z += t * 2.0;
  p.x += t * 2.0;
  vec3 c1 = texture(SAMPLER_2D(u_texture), p.xz / 30.0).xyz;
  p.z += t * 3.0;
  p.x += t * 0.52;
  vec3 c2 = texture(SAMPLER_2D(u_texture), p.xz / 30.0).xyz;
  p.z += t * 4.0;
  p.x += t * 0.8;
  vec3 c3 = texture(SAMPLER_2D(u_texture), p.xz / 30.0).xyz;
  c1 += c2 - c3;
  float z = (c1.x + c1.y + c1.z) / 3.0;
  return p.y + z / 4.0;
}

float map(vec3 p) {
  float d = 100.0;
  d = water(p);
  return d;
}

float intersect(vec3 ro, vec3 rd) {
  float d = 0.0;
  for (int i = 0; i <= 100; i++) {
    float h = map(ro + rd * d);
    if (h < 0.1) return d;
    d += h;
  }
  return 0.0;
}

vec3 norm(vec3 p) {
  float eps = 0.1;
  return normalize(
    vec3(
      map(p + vec3(eps, 0, 0)) - map(p + vec3(-eps, 0, 0)),
      map(p + vec3(0, eps, 0)) - map(p + vec3(0, -eps, 0)),
      map(p + vec3(0, 0, eps)) - map(p + vec3(0, 0, -eps))
    )
  );
}

float calSpc() {
  vec3 l1 = normalize(vec3(1, 1, 1));
  vec3 ro = vec3(-3, 20, -8);
  vec3 rc = vec3(0, 0, 0);
  vec3 ww = normalize(rc - ro);
  vec3 uu = normalize(cross(vec3(0, 1, 0), ww));
  vec3 vv = normalize(cross(rc - ro, uu));
  vec3 rd = normalize(uu * v_uv.x + vv * v_uv.y + ww);
  float d = intersect(ro, rd);
  vec3 p = ro + rd * d;
  vec3 n = norm(p);
  float spc = pow(max(0.0, dot(reflect(l1, n), rd)), 30.0);
  return spc;
}

void main() {
  outputColor = v_Color;
  float spc = calSpc();
  outputColor += spc * 0.4;
}
`,_Gt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_COLOR) in vec4 a_Color;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_uv;

layout(std140) uniform commonUniforms {
  float u_speed;
  float u_time;
};
out vec4 v_Color;
out vec2 v_uv;

#pragma include "projection"

void main() {
  v_uv = a_uv;
  v_Color = a_Color;
  v_Color.a *= opacity;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));

  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class bGt extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{speed:e=.5}=this.layer.getLayerConfig(),n={u_speed:e,u_time:this.layer.getLayerAnimateTime(),u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(n)}getAnimateUniforms(){return{u_time:this.layer.getLayerAnimateTime()}}initModels(){var e=this;return kt(function*(){return e.loadTexture(),e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"polygonWater",vertexShader:_Gt,fragmentShader:yGt,triangulation:pN,defines:e.getDefines(),inject:e.getInject(),primitive:se.TRIANGLES,depth:{enable:!1},pickingEnabled:!1,diagnosticDerivativeUniformityEnabled:!1})]})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy()}registerBuiltinAttributes(){const e=this.layer.getSource().extent,[n,r,i,a]=e,o=i-n,s=a-r;this.styleAttributeService.registerStyleAttribute({name:"waterUv",type:fr.Attribute,descriptor:{name:"a_uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.STATIC_DRAW,data:[],type:se.FLOAT},size:2,update:(l,c,u)=>{const[f,h]=u;return[(f-n)/o,(h-r)/s]}}})}loadTexture(){const{waterTexture:e}=this.layer.getLayerConfig(),{createTexture2D:n}=this.rendererService;this.texture=n({height:1,width:1});const r=new Image;r.crossOrigin="",e?(console.warn("L7 recommendhttps://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ"),r.src=e):r.src="https://gw.alipayobjects.com/mdn/rms_816329/afts/img/A*EojwT4VzSiYAAAAAAAAAAAAAARQnAQ",r.onload=()=>{this.texture=n({data:r,width:r.width,height:r.height,wrapS:se.MIRRORED_REPEAT,wrapT:se.MIRRORED_REPEAT,min:se.LINEAR,mag:se.LINEAR}),this.layerService.reRender()}}}const EGt={fill:pGt,line:J4e,extrude:oGt,text:o6e,point_fill:t6e,point_image:n6e,point_normal:r6e,point_extrude:e6e,water:bGt,ocean:mGt,extrusion:cGt};class s6e extends oS{constructor(...e){super(...e),Z(this,"type","PolygonLayer"),Z(this,"enableShaderEncodeStyles",["opacity","extrusionBase","rotation","offsets","stroke"])}buildModels(){var e=this;return kt(function*(){const n=e.getModelType();e.layerModel=new EGt[n](e),yield e.initLayerModels()})()}getModelType(){var e;const n=this.styleAttributeService.getLayerStyleAttribute("shape"),r=n==null||(e=n.scale)===null||e===void 0?void 0:e.field;return r==="fill"||!r?"fill":r==="extrude"?"extrude":r==="extrusion"?"extrusion":r==="water"?"water":r==="ocean"?"ocean":r==="line"?"line":this.getPointModelType()}getPointModelType(){const e=this.getEncodedData(),{shape2d:n,shape3d:r}=this.getLayerConfig(),i=this.iconService.getIconMap(),a=e.find(o=>o.hasOwnProperty("shape"));if(a){const o=a.shape;return o==="dot"?"point_normal":n?.indexOf(o)!==-1?"point_fill":r?.indexOf(o)!==-1?"point_extrude":i.hasOwnProperty(o)?"point_image":"text"}else return"fill"}}const xGt=`layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

uniform sampler2D u_rasterTexture;
uniform sampler2D u_colorTexture;

in vec2 v_texCoord;

bool isnan_emu(float x) {
  return x > 0.0 || x < 0.0
    ? x != x
    : x != 0.0;
}

out vec4 outputColor;

void main() {
  // Can use any component here since u_rasterTexture is under luminance format.
  float value = texture(SAMPLER_2D(u_rasterTexture), vec2(v_texCoord.x, v_texCoord.y)).r;
  if (value == u_noDataValue || isnan_emu(value)) {
    discard;
  } else if (u_clampLow < 0.5 && value < u_domain[0] || u_clampHigh < 0.5 && value > u_domain[1]) {
    discard;
  } else {
    float normalisedValue = (value - u_domain[0]) / (u_domain[1] - u_domain[0]);
    vec4 color = texture(SAMPLER_2D(u_colorTexture), vec2(normalisedValue, 0));

    outputColor = color;
    outputColor.a = outputColor.a * u_opacity;
    if (outputColor.a < 0.01) discard;
  }
}
`,SGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;let Abe=class extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0),Z(this,"colorTexture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{opacity:e=1,clampLow:n=!0,clampHigh:r=!0,noDataValue:i=-9999999,domain:a,rampColors:o}=this.layer.getLayerConfig(),s=a||vne(o);this.colorTexture=this.layer.textureService.getColorTexture(o,s);const l={u_domain:s,u_opacity:e||1,u_noDataValue:i,u_clampLow:n?1:0,u_clampHigh:(typeof r<"u"?r:n)?1:0,u_rasterTexture:this.texture,u_colorTexture:this.colorTexture};return this.textures=[this.texture,this.colorTexture],this.getUniformsBufferInfo(l)}getRasterData(e){return kt(function*(){if(Array.isArray(e.data))return{data:e.data,width:e.width,height:e.height};{const{rasterData:n,width:r,height:i}=yield e.data;return{data:Array.from(n),width:r,height:i}}})()}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){e.initUniformsBuffer();const n=e.layer.getSource(),{createTexture2D:r,queryVerdorInfo:i}=e.rendererService,a=n.data.dataArray[0],{data:o,width:s,height:l}=yield e.getRasterData(a);return e.texture=r({data:new Float32Array(o),width:s,height:l,format:i()==="WebGL1"?se.LUMINANCE:se.RED,type:se.FLOAT,alignment:1}),[yield e.layer.buildLayerModel({moduleName:"rasterImageData",vertexShader:SGt,fragmentShader:xGt,defines:e.getDefines(),triangulation:N5,primitive:se.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}clearModels(){var e,n;(e=this.texture)===null||e===void 0||e.destroy(),(n=this.colorTexture)===null||n===void 0||n.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{shaderLocation:this.attributeLocation.UV,name:"a_Uv",buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:(e,n,r)=>[r[3],r[4]]}})}};const TGt=["data"],AGt=["rasterData"],wGt=`uniform sampler2D u_texture;
layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

in vec2 v_texCoord;

out vec4 outputColor;

void main() {
  vec3 rgb = texture(SAMPLER_2D(u_texture), vec2(v_texCoord.x, v_texCoord.y)).rgb;

  if (rgb == vec3(u_noDataValue)) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = vec4(
      rgb.r / (u_rminmax.y - u_rminmax.x),
      rgb.g / (u_gminmax.y - u_gminmax.x),
      rgb.b / (u_bminmax.y - u_bminmax.x),
      u_opacity
    );
  }

  if (outputColor.a < 0.01) discard;

}
`,OGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_POSITION_64LOW) in vec2 a_Position64Low;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec2 u_rminmax;
  vec2 u_gminmax;
  vec2 u_bminmax;
  float u_opacity;
  float u_noDataValue;
};

out vec2 v_texCoord;

#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0), a_Position64Low);
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class CGt extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0),Z(this,"dataOption",{})}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{opacity:e=1,noDataValue:n=0}=this.layer.getLayerConfig(),{rMinMax:r=[0,255],gMinMax:i=[0,255],bMinMax:a=[0,255]}=this.dataOption,o={u_rminmax:r,u_gminmax:i,u_bminmax:a,u_opacity:e||1,u_noDataValue:n,u_texture:this.texture};return this.textures=[this.texture],this.getUniformsBufferInfo(o)}getRasterData(e){var n=this;return kt(function*(){if(Array.isArray(e.data)){const{data:o}=e,s=Ro(e,TGt);return n.dataOption=s,ze({data:o},s)}const r=yield e.data,{rasterData:i}=r,a=Ro(r,AGt);return n.dataOption=a,Array.isArray(i)?ze({data:i},a):ze({data:Array.from(i)},a)})()}initModels(){var e=this;return kt(function*(){e.initUniformsBuffer();const n=e.layer.getSource(),{createTexture2D:r}=e.rendererService,i=n.data.dataArray[0],{data:a,width:o,height:s}=yield e.getRasterData(i);return e.texture=r({data:new Float32Array(a),width:o,height:s,format:se.RGB,type:se.FLOAT}),[yield e.layer.buildLayerModel({moduleName:"rasterImageDataRGBA",vertexShader:OGt,fragmentShader:wGt,defines:e.getDefines(),triangulation:N5,primitive:se.TRIANGLES,depth:{enable:!1},pickingEnabled:!1})]})()}buildModels(){var e=this;return kt(function*(){return e.initModels()})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:(e,n,r)=>[r[3],r[4]]}})}}const RGt=`uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};

in vec2 v_texCoord;
out vec4 outputColor;

float getElevation(vec2 coord, float bias) {
  // Convert encoded elevation value to meters
  vec4 data = texture(SAMPLER_2D(u_texture), coord, bias) * 255.0;
  data.a = -1.0;
  return dot(data, u_unpack);
}

vec4 getColor(float value) {
  float normalisedValue = (value - u_domain[0]) / (u_domain[1] - u_domain[0]);
  vec2 coord = vec2(normalisedValue, 0);
  return texture(SAMPLER_2D(u_colorTexture), coord);
}

void main() {
  float value = getElevation(v_texCoord, 0.0);
  if (value == u_noDataValue) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else if (u_clampLow < 0.5 && value < u_domain[0] || u_clampHigh < 0.5 && value > u_domain[1]) {
    outputColor = vec4(0.0, 0, 0, 0.0);
  } else {
    outputColor = getColor(value);
    outputColor.a = outputColor.a * u_opacity;
    if (outputColor.a < 0.01) discard;
  }
}
`,MGt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;
layout(location = ATTRIBUTE_LOCATION_UV) in vec2 a_Uv;

layout(std140) uniform commonUniforms {
  vec4 u_unpack;
  vec2 u_domain;
  float u_opacity;
  float u_noDataValue;
  float u_clampLow;
  float u_clampHigh;
};
out vec2 v_texCoord;
#pragma include "projection"

void main() {
  v_texCoord = a_Uv;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0.0, 1.0));
}
`;class PGt extends Eo{constructor(...e){super(...e),Z(this,"texture",void 0)}get attributeLocation(){return Object.assign(super.attributeLocation,{MAX:super.attributeLocation.MAX,UV:9})}getCommonUniformsInfo(){const{opacity:e,clampLow:n=!0,clampHigh:r=!0,noDataValue:i=-9999999,domain:a,rampColors:o,colorTexture:s,rScaler:l=6553.6,gScaler:c=25.6,bScaler:u=.1,offset:f=1e4}=this.layer.getLayerConfig(),h=a||vne(o);let d=s;s?this.layer.textureService.setColorTexture(s,o,h):d=this.layer.textureService.getColorTexture(o,h);const p={u_unpack:[l,c,u,f],u_domain:h,u_opacity:e||1,u_noDataValue:i,u_clampLow:n,u_clampHigh:typeof r<"u"?r:n,u_texture:this.texture,u_colorTexture:d};return this.textures=[this.texture,d],this.getUniformsBufferInfo(p)}initModels(){var e=this;return kt(function*(){e.initUniformsBuffer();const n=e.layer.getSource(),{createTexture2D:r}=e.rendererService,i=yield n.data.images;return e.texture=r({data:i[0],width:i[0].width,height:i[0].height,min:se.LINEAR,mag:se.LINEAR}),[yield e.layer.buildLayerModel({moduleName:"RasterTileDataImage",vertexShader:MGt,fragmentShader:RGt,defines:e.getDefines(),triangulation:N5,primitive:se.TRIANGLES,depth:{enable:!1}})]})()}clearModels(){var e;(e=this.texture)===null||e===void 0||e.destroy()}buildModels(){var e=this;return kt(function*(){return e.initModels()})()}registerBuiltinAttributes(){this.registerPosition64LowAttribute(),this.styleAttributeService.registerStyleAttribute({name:"uv",type:fr.Attribute,descriptor:{name:"a_Uv",shaderLocation:this.attributeLocation.UV,buffer:{usage:se.DYNAMIC_DRAW,data:[],type:se.FLOAT},size:2,update:(e,n,r)=>[r[3],r[4]]}})}}const NGt={raster:Abe,rasterRgb:CGt,raster3d:Abe,rasterTerrainRgb:PGt};class Gne extends oS{constructor(...e){super(...e),Z(this,"type","RasterLayer")}buildModels(){var e=this;return kt(function*(){const n=e.getModelType();e.layerModel=new NGt[n](e),yield e.initLayerModels()})()}getDefaultConfig(){const e=this.getModelType();return{raster:{},rasterRgb:{},raster3d:{},rasterTerrainRgb:{}}[e]}getModelType(){switch(this.layerSource.getParserType()){case"raster":case"ndi":return"raster";case"rasterRgb":return"rasterRgb";case"rgb":return"rasterRgb";case"image":return"rasterTerrainRgb";default:return"raster"}}getLegend(e){if(e!=="color")return{type:void 0,field:void 0,items:[]};const n=this.getLayerConfig().rampColors;return Q4e(n,e)}}class IGt{constructor({rendererService:e,layerService:n,parent:r}){Z(this,"tileResource",new Map),Z(this,"rendererService",void 0),Z(this,"layerService",void 0),Z(this,"parent",void 0),Z(this,"layerTiles",[]),this.rendererService=e,this.layerService=n,this.parent=r}get tiles(){return this.layerTiles}hasTile(e){return this.layerTiles.some(n=>n.key===e)}addTile(e){this.layerTiles.push(e)}getTile(e){return this.layerTiles.find(n=>n.key===e)}getVisibleTileBylngLat(e){return this.layerTiles.find(n=>n.isLoaded&&n.visible&&n.lnglatInBounds(e))}removeTile(e){const n=this.layerTiles.findIndex(i=>i.key===e),r=this.layerTiles.splice(n,1);r[0]&&r[0].destroy()}updateTileVisible(e){const n=this.getTile(e.key);if(e.isVisible)if(e.parent){const r=this.isChildrenLoaded(e.parent);n?.updateVisible(r)}else n?.updateVisible(!0);else if(e.parent){const r=this.isChildrenLoaded(e.parent);n?.updateVisible(!r)}else n?.updateVisible(!1)}isParentLoaded(e){const n=e.parent;if(!n)return!0;const r=this.getTile(n?.key);return!!(r!=null&&r.isLoaded)}isChildrenLoaded(e){const n=e?.children;return n.length===0?!0:n.every(r=>{const i=this.getTile(r?.key);return i?i?.isLoaded===!0:!0})}render(){var e=this;return kt(function*(){const r=e.getRenderLayers().map((function(){var i=kt(function*(a){yield e.layerService.renderTileLayer(a)});return function(a){return i.apply(this,arguments)}})());yield Promise.all(r)})()}getRenderLayers(){const e=this.layerTiles.filter(r=>r.visible&&r.isLoaded),n=[];return e.map(r=>n.push(...r.getLayers())),n}getLayers(){const e=this.layerTiles.filter(r=>r.isLoaded),n=[];return e.map(r=>n.push(...r.getLayers())),n}getTiles(){return this.layerTiles}destroy(){this.layerTiles.forEach(e=>e.destroy()),this.tileResource.clear()}}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function LGt(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=c[0]&2?i.return:c[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,c[1])).done)return a;switch(i=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Q_=(function(){function t(e,n){this.next=null,this.key=e,this.data=n,this.left=null,this.right=null}return t})();function kGt(t,e){return t>e?1:t<e?-1:0}function g_(t,e,n){for(var r=new Q_(null,null),i=r,a=r;;){var o=n(t,e.key);if(o<0){if(e.left===null)break;if(n(t,e.left.key)<0){var s=e.left;if(e.left=s.right,s.right=e,e=s,e.left===null)break}a.left=e,a=e,e=e.left}else if(o>0){if(e.right===null)break;if(n(t,e.right.key)>0){var s=e.right;if(e.right=s.left,s.left=e,e=s,e.right===null)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,a.left=e.right,e.left=r.right,e.right=r.left,e}function eV(t,e,n,r){var i=new Q_(t,e);if(n===null)return i.left=i.right=null,i;n=g_(t,n,r);var a=r(t,n.key);return a<0?(i.left=n.left,i.right=n,n.left=null):a>=0&&(i.right=n.right,i.left=n,n.right=null),i}function wbe(t,e,n){var r=null,i=null;if(e){e=g_(t,e,n);var a=n(e.key,t);a===0?(r=e.left,i=e.right):a<0?(i=e.right,e.right=null,r=e):(r=e.left,e.left=null,i=e)}return{left:r,right:i}}function DGt(t,e,n){return e===null?t:(t===null||(e=g_(t.key,e,n),e.left=t),e)}function OZ(t,e,n,r,i){if(t){r(""+e+(n?" ":" ")+i(t)+`
`);var a=e+(n?"    ":"   ");t.left&&OZ(t.left,a,!1,r,i),t.right&&OZ(t.right,a,!0,r,i)}}var Wne=(function(){function t(e){e===void 0&&(e=kGt),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,n){return this._size++,this._root=eV(e,n,this._root,this._comparator)},t.prototype.add=function(e,n){var r=new Q_(e,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,a=g_(e,this._root,i),o=i(e,a.key);return o===0?this._root=a:(o<0?(r.left=a.left,r.right=a,a.left=null):o>0&&(r.right=a.right,r.left=a,a.right=null),this._size++,this._root=r),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,n,r){var i;if(n===null)return null;n=g_(e,n,r);var a=r(e,n.key);return a===0?(n.left===null?i=n.right:(i=g_(e,n.left,r),i.right=n.right),this._size--,i):n},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=g_(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},t.prototype.find=function(e){return this._root&&(this._root=g_(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},t.prototype.contains=function(e){for(var n=this._root,r=this._comparator;n;){var i=r(e,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},t.prototype.forEach=function(e,n){for(var r=this._root,i=[],a=!1;!a;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),e.call(n,r),r=r.right):a=!0;return this},t.prototype.range=function(e,n,r,i){for(var a=[],o=this._comparator,s=this._root,l;a.length!==0||s;)if(s)a.push(s),s=s.left;else{if(s=a.pop(),l=o(s.key,n),l>0)break;if(o(s.key,e)>=0&&r.call(i,s))return this;s=s.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(n){var r=n.key;return e.push(r)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(n){var r=n.data;return e.push(r)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var n=this._root,r=!1,i=0,a=[];!r;)if(n)a.push(n),n=n.left;else if(a.length>0){if(n=a.pop(),i===e)return n;i++,n=n.right}else r=!0;return null},t.prototype.next=function(e){var n=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var a=i(e.key,n.key);if(a===0)break;a<0?(r=n,n=n.left):n=n.right}return r},t.prototype.prev=function(e){var n=this._root,r=null;if(e.left!==null){for(r=e.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var a=i(e.key,n.key);if(a===0)break;a<0?n=n.left:(r=n,n=n.right)}return r},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return FGt(this._root)},t.prototype.load=function(e,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=e.length,a=this._comparator;if(r&&MZ(e,n,0,i-1,a),this._root===null)this._root=CZ(e,n,0,i),this._size=i;else{var o=UGt(this.toList(),BGt(e,n),a);i=this._size+i,this._root=RZ({head:o},0,i)}return this},t.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){e===void 0&&(e=function(r){return String(r.key)});var n=[];return OZ(this._root,"",!0,function(r){return n.push(r)},e),n.join("")},t.prototype.update=function(e,n,r){var i=this._comparator,a=wbe(e,this._root,i),o=a.left,s=a.right;i(e,n)<0?s=eV(n,r,s,i):o=eV(n,r,o,i),this._root=DGt(o,s,i)},t.prototype.split=function(e){return wbe(e,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var e,n,r;return LGt(this,function(i){switch(i.label){case 0:e=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:e===null?[3,2]:(n.push(e),e=e.left,[3,5]);case 2:return n.length===0?[3,4]:(e=n.pop(),[4,e]);case 3:return i.sent(),e=e.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},t})();function CZ(t,e,n,r){var i=r-n;if(i>0){var a=n+Math.floor(i/2),o=t[a],s=e[a],l=new Q_(o,s);return l.left=CZ(t,e,n,a),l.right=CZ(t,e,a+1,r),l}return null}function BGt(t,e){for(var n=new Q_(null,null),r=n,i=0;i<t.length;i++)r=r.next=new Q_(t[i],e[i]);return r.next=null,n.next}function FGt(t){for(var e=t,n=[],r=!1,i=new Q_(null,null),a=i;!r;)e?(n.push(e),e=e.left):n.length>0?(e=a=a.next=n.pop(),e=e.right):r=!0;return a.next=null,i.next}function RZ(t,e,n){var r=n-e;if(r>0){var i=e+Math.floor(r/2),a=RZ(t,e,i),o=t.head;return o.left=a,t.head=t.head.next,o.right=RZ(t,i+1,n),o}return null}function UGt(t,e,n){for(var r=new Q_(null,null),i=r,a=t,o=e;a!==null&&o!==null;)n(a.key,o.key)<0?(i.next=a,a=a.next):(i.next=o,o=o.next),i=i.next;return a!==null?i.next=a:o!==null&&(i.next=o),r.next}function MZ(t,e,n,r,i){if(!(n>=r)){for(var a=t[n+r>>1],o=n-1,s=r+1;;){do o++;while(i(t[o],a)<0);do s--;while(i(t[s],a)>0);if(o>=s)break;var l=t[o];t[o]=t[s],t[s]=l,l=e[o],e[o]=e[s],e[s]=l}MZ(t,e,n,s,i),MZ(t,e,s+1,r,i)}}var l6e={};const N2=(t,e)=>t.ll.x<=e.x&&e.x<=t.ur.x&&t.ll.y<=e.y&&e.y<=t.ur.y,PZ=(t,e)=>{if(e.ur.x<t.ll.x||t.ur.x<e.ll.x||e.ur.y<t.ll.y||t.ur.y<e.ll.y)return null;const n=t.ll.x<e.ll.x?e.ll.x:t.ll.x,r=t.ur.x<e.ur.x?t.ur.x:e.ur.x,i=t.ll.y<e.ll.y?e.ll.y:t.ll.y,a=t.ur.y<e.ur.y?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:a}}};let N_=Number.EPSILON;N_===void 0&&(N_=Math.pow(2,-52));const jGt=N_*N_,Obe=(t,e)=>{if(-N_<t&&t<N_&&-N_<e&&e<N_)return 0;const n=t-e;return n*n<jGt*t*e?0:t<e?-1:1};class zGt{constructor(){this.reset()}reset(){this.xRounder=new Cbe,this.yRounder=new Cbe}round(e,n){return{x:this.xRounder.round(e),y:this.yRounder.round(n)}}}class Cbe{constructor(){this.tree=new Wne,this.round(0)}round(e){const n=this.tree.add(e),r=this.tree.prev(n);if(r!==null&&Obe(n.key,r.key)===0)return this.tree.remove(e),r.key;const i=this.tree.next(n);return i!==null&&Obe(n.key,i.key)===0?(this.tree.remove(e),i.key):e}}const nP=new zGt,Pk=(t,e)=>t.x*e.y-t.y*e.x,c6e=(t,e)=>t.x*e.x+t.y*e.y,Rbe=(t,e,n)=>{const r=lUe(t.x,t.y,e.x,e.y,n.x,n.y);return r>0?-1:r<0?1:0},sF=t=>Math.sqrt(c6e(t,t)),$Gt=(t,e,n)=>{const r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return Pk(i,r)/sF(i)/sF(r)},HGt=(t,e,n)=>{const r={x:e.x-t.x,y:e.y-t.y},i={x:n.x-t.x,y:n.y-t.y};return c6e(i,r)/sF(i)/sF(r)},Mbe=(t,e,n)=>e.y===0?null:{x:t.x+e.x/e.y*(n-t.y),y:n},Pbe=(t,e,n)=>e.x===0?null:{x:n,y:t.y+e.y/e.x*(n-t.x)},GGt=(t,e,n,r)=>{if(e.x===0)return Pbe(n,r,t.x);if(r.x===0)return Pbe(t,e,n.x);if(e.y===0)return Mbe(n,r,t.y);if(r.y===0)return Mbe(t,e,n.y);const i=Pk(e,r);if(i==0)return null;const a={x:n.x-t.x,y:n.y-t.y},o=Pk(a,e)/i,s=Pk(a,r)/i,l=t.x+s*e.x,c=n.x+o*r.x,u=t.y+s*e.y,f=n.y+o*r.y,h=(l+c)/2,d=(u+f)/2;return{x:h,y:d}};class Op{static compare(e,n){const r=Op.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:j_.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x<n.x?-1:e.x>n.x?1:e.y<n.y?-1:e.y>n.y?1:0}constructor(e,n){e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const a=n[r];this.point.events.push(a),a.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const a=this.point.events[i];a.consumedBy===void 0&&r.otherSE.point.events===a.otherSE.point.events&&r.segment.consume(a.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const a=i.otherSE;n.set(i,{sine:$Gt(this.point,e.point,a.point),cosine:HGt(this.point,e.point,a.point)})};return(i,a)=>{n.has(i)||r(i),n.has(a)||r(a);const{sine:o,cosine:s}=n.get(i),{sine:l,cosine:c}=n.get(a);return o>=0&&l>=0?s<c?1:s>c?-1:0:o<0&&l<0?s<c?-1:s>c?1:0:l<o?-1:l>o?1:0}}}let WGt=0;class j_{static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,a=e.rightSE.point.x,o=n.rightSE.point.x;if(o<r)return 1;if(a<i)return-1;const s=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,u=n.rightSE.point.y;if(r<i){if(l<s&&l<c)return 1;if(l>s&&l>c)return-1;const f=e.comparePoint(n.leftSE.point);if(f<0)return 1;if(f>0)return-1;const h=n.comparePoint(e.rightSE.point);return h!==0?h:-1}if(r>i){if(s<l&&s<u)return-1;if(s>l&&s>u)return 1;const f=n.comparePoint(e.leftSE.point);if(f!==0)return f;const h=e.comparePoint(n.rightSE.point);return h<0?1:h>0?-1:1}if(s<l)return-1;if(s>l)return 1;if(a<o){const f=n.comparePoint(e.rightSE.point);if(f!==0)return f}if(a>o){const f=e.comparePoint(n.rightSE.point);if(f<0)return 1;if(f>0)return-1}if(a!==o){const f=c-s,h=a-r,d=u-l,p=o-i;if(f>h&&d<p)return 1;if(f<h&&d>p)return-1}return a>o?1:a<o||c<u?-1:c>u?1:e.id<n.id?-1:e.id>n.id?1:0}constructor(e,n,r,i){this.id=++WGt,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static fromRing(e,n,r){let i,a,o;const s=Op.comparePoints(e,n);if(s<0)i=e,a=n,o=1;else if(s>0)i=n,a=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Op(i,!0),c=new Op(a,!1);return new j_(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e<n?e:n},ur:{x:this.rightSE.point.x,y:e>n?e:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(e){return e.x===this.leftSE.point.x&&e.y===this.leftSE.point.y||e.x===this.rightSE.point.x&&e.y===this.rightSE.point.y}comparePoint(e){if(this.isAnEndpoint(e))return 0;const n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return e.x===n.x?0:e.x<n.x?1:-1;const a=(e.y-n.y)/i.y,o=n.x+a*i.x;if(e.x===o)return 0;const s=(e.x-n.x)/i.x,l=n.y+s*i.y;return e.y===l?0:e.y<l?-1:1}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=PZ(n,r);if(i===null)return null;const a=this.leftSE.point,o=this.rightSE.point,s=e.leftSE.point,l=e.rightSE.point,c=N2(n,s)&&this.comparePoint(s)===0,u=N2(r,a)&&e.comparePoint(a)===0,f=N2(n,l)&&this.comparePoint(l)===0,h=N2(r,o)&&e.comparePoint(o)===0;if(u&&c)return h&&!f?o:!h&&f?l:null;if(u)return f&&a.x===l.x&&a.y===l.y?null:a;if(c)return h&&o.x===s.x&&o.y===s.y?null:s;if(h&&f)return null;if(h)return o;if(f)return l;const d=GGt(a,this.vector(),s,e.vector());return d===null||!N2(i,d)?null:nP.round(d.x,d.y)}split(e){const n=[],r=e.events!==void 0,i=new Op(e,!0),a=new Op(e,!1),o=this.rightSE;this.replaceRightSE(a),n.push(a),n.push(i);const s=new j_(i,o,this.rings.slice(),this.windings.slice());return Op.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),Op.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),a.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=j_.compare(n,r);if(i!==0){if(i>0){const a=n;n=r,r=a}if(n.prev===r){const a=n;n=r,r=a}for(let a=0,o=r.rings.length;a<o;a++){const s=r.rings[a],l=r.windings[a],c=n.rings.indexOf(s);c===-1?(n.rings.push(s),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let s=0,l=this.rings.length;s<l;s++){const c=this.rings[s],u=this.windings[s],f=n.indexOf(c);f===-1?(n.push(c),r.push(u)):r[f]+=u}const a=[],o=[];for(let s=0,l=n.length;s<l;s++){if(r[s]===0)continue;const c=n[s],u=c.poly;if(o.indexOf(u)===-1)if(c.isExterior)a.push(u);else{o.indexOf(u)===-1&&o.push(u);const f=a.indexOf(c.poly);f!==-1&&a.splice(f,1)}}for(let s=0,l=a.length;s<l;s++){const c=a[s].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Gg.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===Gg.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}default:throw new Error(`Unrecognized operation type found ${Gg.type}`)}return this._isInResult}}class Nbe{constructor(e,n,r){if(!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=nP.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let a=i;for(let o=1,s=e.length;o<s;o++){if(typeof e[o][0]!="number"||typeof e[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let l=nP.round(e[o][0],e[o][1]);l.x===a.x&&l.y===a.y||(this.segments.push(j_.fromRing(a,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),a=l)}(i.x!==a.x||i.y!==a.y)&&this.segments.push(j_.fromRing(a,i,this))}getSweepEvents(){const e=[];for(let n=0,r=this.segments.length;n<r;n++){const i=this.segments[n];e.push(i.leftSE),e.push(i.rightSE)}return e}}class VGt{constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Nbe(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let r=1,i=e.length;r<i;r++){const a=new Nbe(e[r],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=n}getSweepEvents(){const e=this.exteriorRing.getSweepEvents();for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getSweepEvents();for(let a=0,o=i.length;a<o;a++)e.push(i[a])}return e}}class Ibe{constructor(e,n){if(!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let r=0,i=e.length;r<i;r++){const a=new VGt(e[r],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=n}getSweepEvents(){const e=[];for(let n=0,r=this.polys.length;n<r;n++){const i=this.polys[n].getSweepEvents();for(let a=0,o=i.length;a<o;a++)e.push(i[a])}return e}}class lF{static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];if(!a.isInResult()||a.ringOut)continue;let o=null,s=a.leftSE,l=a.rightSE;const c=[s],u=s.point,f=[];for(;o=s,s=l,c.push(s),s.point!==u;)for(;;){const h=s.getAvailableLinkedEvents();if(h.length===0){const g=c[0].point,v=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${g.x}, ${g.y}]. Last matching segment found ends at [${v.x}, ${v.y}].`)}if(h.length===1){l=h[0].otherSE;break}let d=null;for(let g=0,v=f.length;g<v;g++)if(f[g].point===s.point){d=g;break}if(d!==null){const g=f.splice(d)[0],v=c.splice(g.index);v.unshift(v[0].otherSE),n.push(new lF(v.reverse()));continue}f.push({index:c.length,point:s.point});const p=s.getLeftmostComparator(o);l=h.sort(p)[0].otherSE;break}n.push(new lF(c))}return n}constructor(e){this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,u=this.events.length-1;c<u;c++){const f=this.events[c].point,h=this.events[c+1].point;Rbe(f,e,h)!==0&&(n.push(f),e=f)}if(n.length===1)return null;const r=n[0],i=n[1];Rbe(r,e,i)===0&&n.shift(),n.push(n[0]);const a=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,s=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=s;c+=a)l.push([n[c].x,n[c].y]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let e=this.events[0];for(let i=1,a=this.events.length;i<a;i++){const o=this.events[i];Op.compare(e,o)>0&&(e=o)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return r.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}}class Lbe{constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){const e=[this.exteriorRing.getGeom()];if(e[0]===null)return null;for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}}class YGt{constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){const e=[];for(let n=0,r=this.polys.length;n<r;n++){const i=this.polys[n].getGeom();i!==null&&e.push(i)}return e}_composePolys(e){const n=[];for(let r=0,i=e.length;r<i;r++){const a=e[r];if(!a.poly)if(a.isExteriorRing())n.push(new Lbe(a));else{const o=a.enclosingRing();o.poly||n.push(new Lbe(o)),o.poly.addInterior(a)}}return n}}class XGt{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j_.compare;this.queue=e,this.tree=new Wne(n),this.segments=[]}process(e){const n=e.segment,r=[];if(e.consumedBy)return e.isLeft?this.queue.remove(e.otherSE):this.tree.remove(n),r;const i=e.isLeft?this.tree.add(n):this.tree.find(n);if(!i)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let a=i,o=i,s,l;for(;s===void 0;)a=this.tree.prev(a),a===null?s=null:a.key.consumedBy===void 0&&(s=a.key);for(;l===void 0;)o=this.tree.next(o),o===null?l=null:o.key.consumedBy===void 0&&(l=o.key);if(e.isLeft){let c=null;if(s){const f=s.getIntersection(n);if(f!==null&&(n.isAnEndpoint(f)||(c=f),!s.isAnEndpoint(f))){const h=this._splitSafely(s,f);for(let d=0,p=h.length;d<p;d++)r.push(h[d])}}let u=null;if(l){const f=l.getIntersection(n);if(f!==null&&(n.isAnEndpoint(f)||(u=f),!l.isAnEndpoint(f))){const h=this._splitSafely(l,f);for(let d=0,p=h.length;d<p;d++)r.push(h[d])}}if(c!==null||u!==null){let f=null;c===null?f=u:u===null?f=c:f=Op.comparePoints(c,u)<=0?c:u,this.queue.remove(n.rightSE),r.push(n.rightSE);const h=n.split(f);for(let d=0,p=h.length;d<p;d++)r.push(h[d])}r.length>0?(this.tree.remove(n),r.push(e)):(this.segments.push(n),n.prev=s)}else{if(s&&l){const c=s.getIntersection(l);if(c!==null){if(!s.isAnEndpoint(c)){const u=this._splitSafely(s,c);for(let f=0,h=u.length;f<h;f++)r.push(u[f])}if(!l.isAnEndpoint(c)){const u=this._splitSafely(l,c);for(let f=0,h=u.length;f<h;f++)r.push(u[f])}}}this.tree.remove(n)}return r}_splitSafely(e,n){this.tree.remove(e);const r=e.rightSE;this.queue.remove(r);const i=e.split(n);return i.push(r),e.consumedBy===void 0&&this.tree.add(e),i}}const kbe=typeof process<"u"&&l6e.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,qGt=typeof process<"u"&&l6e.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class ZGt{run(e,n,r){Gg.type=e,nP.reset();const i=[new Ibe(n,!0)];for(let f=0,h=r.length;f<h;f++)i.push(new Ibe(r[f],!1));if(Gg.numMultiPolys=i.length,Gg.type==="difference"){const f=i[0];let h=1;for(;h<i.length;)PZ(i[h].bbox,f.bbox)!==null?h++:i.splice(h,1)}if(Gg.type==="intersection")for(let f=0,h=i.length;f<h;f++){const d=i[f];for(let p=f+1,g=i.length;p<g;p++)if(PZ(d.bbox,i[p].bbox)===null)return[]}const a=new Wne(Op.compare);for(let f=0,h=i.length;f<h;f++){const d=i[f].getSweepEvents();for(let p=0,g=d.length;p<g;p++)if(a.insert(d[p]),a.size>kbe)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const o=new XGt(a);let s=a.size,l=a.pop();for(;l;){const f=l.key;if(a.size===s){const d=f.segment;throw new Error(`Unable to pop() ${f.isLeft?"left":"right"} SweepEvent [${f.point.x}, ${f.point.y}] from segment #${d.id} [${d.leftSE.point.x}, ${d.leftSE.point.y}] -> [${d.rightSE.point.x}, ${d.rightSE.point.y}] from queue.`)}if(a.size>kbe)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(o.segments.length>qGt)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const h=o.process(f);for(let d=0,p=h.length;d<p;d++){const g=h[d];g.consumedBy===void 0&&a.insert(g)}s=a.size,l=a.pop()}nP.reset();const c=lF.factory(o.segments);return new YGt(c).getGeom()}}const Gg=new ZGt,KGt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Gg.run("union",t,n)},QGt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Gg.run("intersection",t,n)},JGt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Gg.run("xor",t,n)},eWt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Gg.run("difference",t,n)};var tWt={union:KGt,intersection:QGt,xor:JGt,difference:eWt};function nWt(t,e,n){n===void 0&&(n={});var r=I0e(t),i=I0e(e),a=tWt.union(r.coordinates,i.coordinates);return a.length===0?null:a.length===1?une(a[0],n.properties):oDt(a,n.properties)}class rWt{getCombineFeature(e){let n=null;const r=e[0];return e.map(i=>{const a=une(i.coordinates);n===null?n=a:n=nWt(n,a)}),r&&(n.properties=ze({},r)),n}}const I2="select",L2="active";class iWt{constructor({layerService:e,tileLayerService:n,parent:r}){Z(this,"layerService",void 0),Z(this,"tileLayerService",void 0),Z(this,"tileSourceService",void 0),Z(this,"parent",void 0),Z(this,"tilePickID",new Map),this.layerService=e,this.tileLayerService=n,this.parent=r,this.tileSourceService=new rWt}pickRender(e){const n=this.tileLayerService.getVisibleTileBylngLat(e.lngLat);if(n){const r=n.getMainLayer();r?.layerPickService.pickRender(e)}}pick(e,n){var r=this;return kt(function*(){const a=r.parent.getContainer().pickingService;if(e.type==="RasterLayer"){const o=r.tileLayerService.getVisibleTileBylngLat(n.lngLat);if(o&&o.getMainLayer()!==void 0){const s=o.getMainLayer();return s.layerPickService.pickRasterLayer(s,n,r.parent)}return!1}return r.pickRender(n),a.pickFromPickingFBO(e,n)})()}selectFeature(e){const[n,r,i]=e,a=this.color2PickId(n,r,i);this.tilePickID.set(I2,a),this.updateHighLight(n,r,i,I2)}highlightPickedFeature(e){const[n,r,i]=e,a=this.color2PickId(n,r,i);this.tilePickID.set(L2,a),this.updateHighLight(n,r,i,L2)}updateHighLight(e,n,r,i){this.tileLayerService.tiles.map(a=>{const o=a.getMainLayer();switch(i){case I2:o?.hooks.beforeSelect.call([e,n,r]);break;case L2:o?.hooks.beforeHighlight.call([e,n,r]);break}})}setPickState(){const e=this.tilePickID.get(I2),n=this.tilePickID.get(L2);if(e){const[r,i,a]=this.pickId2Color(e);this.updateHighLight(r,i,a,I2);return}if(n){const[r,i,a]=this.pickId2Color(n);this.updateHighLight(r,i,a,L2);return}}color2PickId(e,n,r){return ox(new Uint8Array([e,n,r]))}pickId2Color(e){return ow(e)}getFeatureById(e){const n=this.tileLayerService.getTiles().filter(i=>i.visible),r=[];return n.forEach(i=>{r.push(...i.getFeatureById(e))}),r}pickRasterLayer(){return!1}}function aWt(t){return t==="PolygonLayer"?s6e:t==="LineLayer"?Hne:tP}function oWt(t){return["PolygonLayer","LineLayer"].indexOf(t)!==-1}class sS extends ku.EventEmitter{constructor(e,n){super(),Z(this,"x",void 0),Z(this,"y",void 0),Z(this,"z",void 0),Z(this,"key",void 0),Z(this,"parent",void 0),Z(this,"sourceTile",void 0),Z(this,"visible",!0),Z(this,"layers",[]),Z(this,"isLoaded",!1),Z(this,"tileMaskLayers",[]),Z(this,"tileMask",void 0),this.parent=n,this.sourceTile=e,this.x=e.x,this.y=e.y,this.z=e.z,this.key=`${this.x}_${this.y}_${this.z}`}getLayers(){return this.layers}styleUpdate(...e){}lnglatInBounds(e){const[n,r,i,a]=this.sourceTile.bounds,{lng:o,lat:s}=e;return o>=n&&o<=i&&s>=r&&s<=a}getLayerOptions(){var e;const n=this.parent.getLayerConfig();return ze(ze({},n),{},{textAllowOverlap:!0,autoFit:!1,maskLayers:this.getMaskLayer(),tileMask:oWt(this.parent.type),mask:n.mask||((e=n.maskLayers)===null||e===void 0?void 0:e.length)!==0&&n.enableMask})}getMaskLayer(){const{maskLayers:e}=this.parent.getLayerConfig(),n=[];return e?.forEach(r=>{if(!r.tileLayer)return n.push(r),r;const a=r.tileLayer.getTile(this.sourceTile.key),o=a?.getLayers()[0];o&&n.push(o)}),n}addTileMask(){var e=this;return kt(function*(){const n=new s6e({name:"mask",visible:!0,enablePicking:!1}).source({type:"FeatureCollection",features:[e.sourceTile.bboxPolygon]},{parser:{type:"geojson",featureId:"id"}}).shape("fill").color("#0f0").style({opacity:.5}),r=sR(e.parent.container);n.setContainer(r),yield n.init(),e.tileMask=n;const i=e.getMainLayer();return i!==void 0&&(i.tileMask=n),n})()}addMask(e,n){var r=this;return kt(function*(){const i=sR(r.parent.container);n.setContainer(i),yield n.init(),e.addMask(n),r.tileMaskLayers.push(n)})()}addLayer(e){var n=this;return kt(function*(){e.isTileLayer=!0;const r=sR(n.parent.container);e.setContainer(r),n.layers.push(e),yield e.init()})()}updateVisible(e){this.visible=e,this.updateOptions("visible",e)}updateOptions(e,n){this.layers.forEach(r=>{r.updateLayerConfig({[e]:n})})}getMainLayer(){return this.layers[0]}getFeatures(e){return[]}getFeatureById(e){return[]}destroy(){var e;(e=this.tileMask)===null||e===void 0||e.destroy(),this.layers.forEach(n=>n.destroy())}}class sWt extends sS{initTileLayer(){var e=this;return kt(function*(){const n=e.getSourceOption(),r=n.data.features[0].properties,i=new Hne().source(n.data,n.options).size(1).shape("line").color("red"),a=new tP({minZoom:e.z-1,maxZoom:e.z+1,textAllowOverlap:!0}).source([r],{parser:{type:"json",x:"x",y:"y"}}).size(20).color("red").shape(e.key).style({stroke:"#fff",strokeWidth:2});yield e.addLayer(i),yield e.addLayer(a),e.isLoaded=!0})()}getSourceOption(){const e=this.parent.getSource();return{data:{type:"FeatureCollection",features:this.sourceTile.data.layers.testTile.features},options:{parser:{type:"geojson"},transforms:e.transforms}}}}class lWt extends sS{initTileLayer(){var e=this;return kt(function*(){const n=e.parent.getLayerAttributeConfig(),r=e.getLayerOptions(),i=e.getSourceOption(),a=new $$t(ze({},r)).source(i.data,i.options);n&&Object.keys(n).forEach(o=>{var s,l;const c=o;a[c]((s=n[c])===null||s===void 0?void 0:s.field,(l=n[c])===null||l===void 0?void 0:l.values)}),yield e.addLayer(a),e.isLoaded=!0})()}getSourceOption(){const e=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:e.transforms}}}}const cWt=`layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

out vec4 outputColor;

void main() {
  outputColor = u_color;
  outputColor.a *= u_opacity;
}
`,uWt=`layout(location = ATTRIBUTE_LOCATION_POSITION) in vec3 a_Position;

layout(std140) uniform commonUniorm {
  vec4 u_color;
  float u_opacity;
};

#pragma include "projection"

void main() {
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
}

`;class fWt extends Eo{getUninforms(){const e=this.getCommonUniformsInfo(),n=this.getUniformsBufferInfo(this.getStyleAttribute());return this.updateStyleUnifoms(),ze(ze({},e.uniformsOption),n.uniformsOption)}getCommonUniformsInfo(){const{opacity:e=1,color:n="#000"}=this.layer.getLayerConfig(),r={u_color:Xo(n),u_opacity:e||1};return this.getUniformsBufferInfo(r)}initModels(){var e=this;return kt(function*(){return e.buildModels()})()}buildModels(){var e=this;return kt(function*(){return e.initUniformsBuffer(),[yield e.layer.buildLayerModel({moduleName:"mask",vertexShader:uWt,fragmentShader:cWt,defines:e.getDefines(),triangulation:pN,depth:{enable:!1},pick:!1})]})()}clearModels(e=!0){e&&this.layerService.clear()}registerBuiltinAttributes(){return""}}const hWt={fill:fWt};class u6e extends oS{constructor(...e){super(...e),Z(this,"type","MaskLayer")}buildModels(){var e=this;return kt(function*(){const n=e.getModelType();e.layerModel=new hWt[n](e),yield e.initLayerModels()})()}getModelType(){return"fill"}}class dWt extends sS{initTileLayer(){var e=this;return kt(function*(){const n=e.parent.getLayerAttributeConfig(),r=e.getLayerOptions(),i=e.getSourceOption(),a=new u6e(ze({},r)).source(i.data,i.options);n&&Object.keys(n).forEach(o=>{var s,l;const c=o;a[c]((s=n[c])===null||s===void 0?void 0:s.field,(l=n[c])===null||l===void 0?void 0:l.values)}),yield e.addLayer(a),e.isLoaded=!0})()}getFeatures(e){return e?this.sourceTile.data.getTileData(e):[]}getSourceOption(){const e=this.parent.getSource(),{sourceLayer:n,featureId:r}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(n)},options:{parser:{type:"geojson",featureId:r},transforms:e.transforms}}}}const pWt=["rasterData"];let gWt=class extends sS{initTileLayer(){var e=this;return kt(function*(){const n=e.parent.getLayerAttributeConfig(),r=e.getLayerOptions(),i=e.getSourceOption(),a=new Gne(ze({},r)).source(i.data,i.options);n&&Object.keys(n).forEach(o=>{var s,l;const c=o;a[c]((s=n[c])===null||s===void 0?void 0:s.field,(l=n[c])===null||l===void 0?void 0:l.values)}),yield e.addLayer(a),e.isLoaded=!0})()}getSourceOption(){const e=this.parent.getSource(),n=this.sourceTile.data.data,{rasterData:r}=n,i=Ro(n,pWt);return{data:r,options:{parser:ze({type:"rasterRgb",extent:this.sourceTile.bounds},i),transforms:e.transforms}}}};class vWt extends sS{initTileLayer(){var e=this;return kt(function*(){const n=e.parent.getLayerAttributeConfig(),r=e.getLayerOptions(),i=e.getSourceOption(),a=new Gne(ze({},r)).source(i.data,i.options);n&&Object.keys(n).forEach(o=>{var s,l;const c=o;a[c]((s=n[c])===null||s===void 0?void 0:s.field,(l=n[c])===null||l===void 0?void 0:l.values)}),yield e.addLayer(a),e.isLoaded=!0})()}getSourceOption(){const e=this.parent.getSource();return{data:this.sourceTile.data,options:{parser:{type:"image",extent:this.sourceTile.bounds},transforms:e.transforms}}}}const mWt=["rasterData"],yWt={positions:[0,1],colors:["#000","#fff"]};class _Wt extends sS{constructor(...e){super(...e),Z(this,"colorTexture",void 0)}initTileLayer(){var e=this;return kt(function*(){const n=e.parent.getLayerAttributeConfig(),r=e.getLayerOptions(),i=e.getSourceOption(),{rampColors:a,domain:o}=e.getLayerOptions();e.colorTexture=e.parent.textureService.getColorTexture(a,o);const s=new Gne(ze(ze({},r),{},{colorTexture:e.colorTexture})).source(i.data,i.options);n&&Object.keys(n).forEach(l=>{var c,u;const f=l;s[f]((c=n[f])===null||c===void 0?void 0:c.field,(u=n[f])===null||u===void 0?void 0:u.values)}),yield e.addLayer(s),e.isLoaded=!0})()}getSourceOption(){const e=this.parent.getSource(),n=this.sourceTile.data.data,{rasterData:r}=n,i=Ro(n,mWt);return{data:r,options:{parser:ze({type:"raster",extent:this.sourceTile.bounds},i),transforms:e.transforms}}}styleUpdate(...e){const{rampColors:n=yWt,domain:r}=e;this.colorTexture=this.parent.textureService.getColorTexture(n,r||vne(n)),this.layers.forEach(i=>i.style({colorTexture:this.colorTexture}))}destroy(){this.layers.forEach(e=>e.destroy())}}class xL extends sS{initTileLayer(){var e=this;return kt(function*(){const n=e.parent.getLayerAttributeConfig(),r=e.getLayerOptions(),i=aWt(e.parent.type),a=e.getSourceOption();if(!a){e.isLoaded=!0,e.emit("loaded");return}const o=new i(ze({},r)).source(a.data,a.options);Object.keys(n).forEach(s=>{var l,c;const u=s;o[u]((l=n[u])===null||l===void 0?void 0:l.field,(c=n[u])===null||c===void 0?void 0:c.values)}),yield e.addLayer(o),r.tileMask&&(yield e.addTileMask()),e.setLayerMinMaxZoom(o),e.isLoaded=!0,e.emit("loaded")})()}getSourceOption(){const e=this.parent.getSource(),{sourceLayer:n="defaultLayer",featureId:r="id"}=this.parent.getLayerConfig();return{data:{type:"FeatureCollection",features:this.getFeatures(n)},options:{parser:{type:"geojson",featureId:r},transforms:e.transforms}}}setLayerMinMaxZoom(e){e.getModelType()==="text"&&e.updateLayerConfig({maxZoom:this.z+1,minZoom:this.z-1})}getFeatures(e){return this.sourceTile.data.getTileData(e)}getFeatureById(e){const n=this.getMainLayer();return n?n.getSource().data.dataArray.filter(i=>i._id===e):[]}}function bWt(t){switch(t.type){case"PolygonLayer":return xL;case"LineLayer":return xL;case"PointLayer":return xL;case"TileDebugLayer":return sWt;case"MaskLayer":return dWt;case"RasterLayer":const{dataType:n}=t.getSource().parser;switch(n){case wu.RGB:case wu.CUSTOMRGB:return gWt;case wu.ARRAYBUFFER:case wu.CUSTOMARRAYBUFFER:return _Wt;case wu.TERRAINRGB:case wu.CUSTOMTERRAINRGB:return vWt;default:return lWt}default:return xL}}const EWt=["shape","color","size","style","animate","filter","rotate","scale","setBlend","setSelect","setActive","disableMask","enableMask","addMask","removeMask"],{debounce:xWt}=gs;class SWt{constructor(e){Z(this,"parent",void 0),Z(this,"tileLayerService",void 0),Z(this,"mapService",void 0),Z(this,"layerService",void 0),Z(this,"rendererService",void 0),Z(this,"pickingService",void 0),Z(this,"tilePickService",void 0),Z(this,"tilesetManager",void 0),Z(this,"initedTileset",!1),Z(this,"lastViewStates",void 0),Z(this,"mapchange",()=>{var r;if(this.parent.isVisible()===!1)return;const{latLonBounds:i,zoom:a}=this.getCurrentView();this.lastViewStates&&this.lastViewStates.zoom===a&&this.lastViewStates.latLonBounds.toString()===i.toString()||(this.lastViewStates={zoom:a,latLonBounds:i},(r=this.tilesetManager)===null||r===void 0||r.throttleUpdate(a,i))}),Z(this,"viewchange",xWt(this.mapchange,24)),this.parent=e;const n=this.parent.getContainer();this.rendererService=n.rendererService,this.layerService=n.layerService,this.mapService=n.mapService,this.pickingService=n.pickingService,this.tileLayerService=new IGt({rendererService:this.rendererService,layerService:this.layerService,parent:e}),this.tilePickService=new iWt({tileLayerService:this.tileLayerService,layerService:this.layerService,parent:e}),this.parent.setLayerPickService(this.tilePickService),this.proxy(e),this.initTileSetManager()}initTileSetManager(){var e;const n=this.parent.getSource();if(this.tilesetManager=n.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0),this.parent.isVisible()===!1)return;const{latLonBounds:r,zoom:i}=this.getCurrentView();(e=this.tilesetManager)===null||e===void 0||e.update(i,r)}getCurrentView(){const e=this.mapService.getBounds(),n=[e[0][0],e[0][1],e[1][0],e[1][1]],r=this.mapService.getZoom();return{latLonBounds:n,zoom:r}}bindTilesetEvent(){this.tilesetManager.on("tile-loaded",e=>{}),this.tilesetManager.on("tile-unload",e=>{this.tileUnLoad(e)}),this.tilesetManager.on("tile-error",(e,n)=>{this.tileError(e)}),this.tilesetManager.on("tile-update",()=>{this.tileUpdate()}),this.mapService.on("zoomend",this.mapchange),this.mapService.on("moveend",this.viewchange)}render(){this.tileLayerService.render()}getLayers(){return this.tileLayerService.getLayers()}getTiles(){return this.tileLayerService.getTiles()}getTile(e){return this.tileLayerService.getTile(e)}tileLoaded(e){}tileError(e){console.warn("error:",e)}destroy(){var e;this.mapService.off("zoomend",this.mapchange),this.mapService.off("moveend",this.viewchange),(e=this.tilesetManager)===null||e===void 0||e.destroy(),this.tileLayerService.destroy()}reload(){var e;this.tilesetManager.clear();const{latLonBounds:n,zoom:r}=this.getCurrentView();(e=this.tilesetManager)===null||e===void 0||e.update(r,n)}tileUnLoad(e){this.tileLayerService.removeTile(e.key)}tileUpdate(){var e=this;return kt(function*(){if(!e.tilesetManager)return;const n=e.parent.getMinZoom(),r=e.parent.getMaxZoom(),i=e.tilesetManager.tiles.filter(a=>a.isLoaded).filter(a=>a.isVisibleChange).filter(a=>a.data).filter(a=>a.z>=n&&a.z<r);yield Promise.all(i.map((function(){var a=kt(function*(o){if(e.tileLayerService.hasTile(o.key))e.tileLayerService.updateTileVisible(o),e.tilePickService.setPickState(),e.layerService.reRender();else{const s=bWt(e.parent),l=new s(o,e.parent);yield l.initTileLayer(),e.tilePickService.setPickState(),l.getLayers().length!==0&&(e.tileLayerService.addTile(l),e.tileLayerService.updateTileVisible(o),e.layerService.reRender())}});return function(o){return a.apply(this,arguments)}})())),e.tilesetManager.isLoaded&&e.parent.emit("tiles-loaded",e.tilesetManager.currentTiles)})()}setPickState(e){}pickRender(e){this.tilePickService.pickRender(e)}selectFeature(e){this.tilePickService.selectFeature(e)}highlightPickedFeature(e){this.tilePickService.highlightPickedFeature(e)}proxy(e){EWt.forEach(n=>{const r=e[n].bind(e);e[n]=(...i)=>(r(...i),this.getLayers().map(a=>{a[n](...i)}),n==="style"&&this.getTiles().forEach(a=>a.styleUpdate(...i)),e)})}}class TWt extends ku.EventEmitter{get lngLat(){var e;return(e=this.popupOption.lngLat)!==null&&e!==void 0?e:{lng:0,lat:0}}set lngLat(e){this.popupOption.lngLat=e}constructor(e){super(),Z(this,"popupOption",void 0),Z(this,"mapsService",void 0),Z(this,"sceneService",void 0),Z(this,"layerService",void 0),Z(this,"scene",void 0),Z(this,"closeButton",void 0),Z(this,"container",void 0),Z(this,"content",void 0),Z(this,"contentTitle",void 0),Z(this,"contentPanel",void 0),Z(this,"tip",void 0),Z(this,"isShow",!0),Z(this,"onMouseMove",r=>{var i;const a=this.mapsService.getMapContainer(),{left:o=0,top:s=0}=(i=a?.getBoundingClientRect())!==null&&i!==void 0?i:{};this.setPopupPosition(r.clientX-o,r.clientY-s)}),Z(this,"updateLngLatPosition",()=>{if(!this.mapsService||this.popupOption.followCursor)return;const{lng:r,lat:i}=this.lngLat,{x:a,y:o}=this.mapsService.lngLatToContainer([r,i]);this.setPopupPosition(a,o)}),Z(this,"updateLngLatPositionWhenZoom",r=>{if(!this.mapsService||this.popupOption.followCursor)return;const i=r.map,a=i.getSize();a.x=a.x/2,a.y=a.y/2;const o=r.center,s=r.zoom,l=i.DE(this.lngLat,s,o);l.x=Math.round(l.x),l.y=Math.round(l.y),this.setPopupPosition(l.x,l.y,!0)}),Z(this,"onKeyDown",r=>{r.keyCode===27&&this.remove()}),Z(this,"onCloseButtonClick",r=>{r.stopPropagation&&r.stopPropagation(),this.hide()}),Z(this,"updatePosition",(r,i=!0)=>{const a=!!this.lngLat,{className:o,style:s,maxWidth:l,anchor:c,stopPropagation:u}=this.popupOption;if(!this.mapsService||!a||!this.content)return;const f=this.mapsService.getMarkerContainer();if(!this.container&&f&&(this.container=is("div",`l7-popup ${o??""} ${this.isShow?"":"l7-popup-hide"}`,f),s&&this.container.setAttribute("style",s),this.tip=is("div","l7-popup-tip",this.container),this.container.appendChild(this.content),u&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(h=>{this.container.addEventListener(h,d=>{d.stopPropagation()})}),this.container.style.whiteSpace="nowrap"),i?this.updateLngLatPositionWhenZoom(r):this.updateLngLatPosition(),Ene(this.container,`${BB[c]}`),ZBe(this.container,c,"popup"),l){const{width:h}=this.container.getBoundingClientRect();h>parseFloat(l)&&(this.container.style.width=l)}else this.container.style.removeProperty("width")}),Z(this,"updateWhenZoom",r=>{this.updatePosition(r,!0)}),Z(this,"update",()=>{this.updatePosition(null,!1)}),this.popupOption=ze(ze({},this.getDefault(e??{})),e);const{lngLat:n}=this.popupOption;n&&(this.lngLat=n)}getIsShow(){return this.isShow}addTo(e){this.mapsService=e.mapService,this.sceneService=e.sceneService,this.layerService=e.layerService,this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=e,this.update(),this.updateCloseOnClick(),this.updateCloseOnEsc(),this.updateFollowCursor();const{html:n,text:r,title:i}=this.popupOption;return n?this.setHTML(n):r&&this.setText(r),i&&this.setTitle(i),this.emit("open"),this}remove(){if(this!==null&&this!==void 0&&this.isOpen())return this.content&&Ip(this.content),this.container&&(Ip(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.updateCloseOnClick(!0),this.updateCloseOnEsc(!0),this.updateFollowCursor(!0),delete this.mapsService),this.emit("close"),this}getOptions(){return this.popupOption}setOptions(e){this.show();const{className:n}=this.popupOption;if(this.popupOption=ze(ze({},this.popupOption),e),this.checkUpdateOption(e,["html","text","title","closeButton","closeButtonOffsets","maxWidth","anchor","stopPropagation","lngLat","offsets"])&&(this.container&&(Ip(this.container),this.container=void 0),this.popupOption.html?this.setHTML(this.popupOption.html):this.popupOption.text&&this.setText(this.popupOption.text),this.popupOption.title&&this.setTitle(this.popupOption.title)),this.checkUpdateOption(e,["closeOnEsc"])&&this.updateCloseOnEsc(),this.checkUpdateOption(e,["closeOnClick"])&&this.updateCloseOnClick(),this.checkUpdateOption(e,["followCursor"])&&this.updateFollowCursor(),this.checkUpdateOption(e,["html"])&&e.html?this.setHTML(e.html):this.checkUpdateOption(e,["text"])&&e.text&&this.setText(e.text),this.checkUpdateOption(e,["className"])){var r;n&&this.container.classList.remove(n??""),this.container.classList.add((r=e.className)!==null&&r!==void 0?r:"")}if(this.checkUpdateOption(e,["style"])){var i;xne(this.container,(i=e.style)!==null&&i!==void 0?i:"")}return this.checkUpdateOption(e,["lngLat"])&&e.lngLat&&this.setLnglat(e.lngLat),this}open(){return this.addTo(this.scene),this}close(){return this.remove(),this}show(){if(!this.isShow)return this.container&&Mx(this.container,"l7-popup-hide"),this.isShow=!0,this.emit("show"),this}hide(){if(this.isShow)return this.container&&Md(this.container,"l7-popup-hide"),this.isShow=!1,this.emit("hide"),this}setHTML(e){return this.popupOption.html=e,this.setDOMContent(e)}setText(e){return this.popupOption.text=e,this.setDOMContent(window.document.createTextNode(e))}setTitle(e){this.show(),this.popupOption.title=e,e?(this.contentTitle||(this.contentTitle=is("div","l7-popup-content__title"),this.content.firstChild?this.content.insertBefore(this.contentTitle,this.content.firstChild):this.content.append(this.contentTitle)),E5(this.contentTitle),p_(this.contentTitle,e)):this.contentTitle&&(Ip(this.contentTitle),this.contentTitle=void 0)}panToPopup(){const{lng:e,lat:n}=this.lngLat;return this.popupOption.autoPan&&this.mapsService.panTo([e,n]),this}setLngLat(e){return this.setLnglat(e)}setLnglat(e){return this.show(),this.lngLat=e,Array.isArray(e)&&(this.lngLat={lng:e[0],lat:e[1]}),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this.popupOption.autoPan&&setTimeout(()=>{this.panToPopup()},0),this}getLnglat(){return this.lngLat}setMaxWidth(e){return this.popupOption.maxWidth=e,this.update(),this}isOpen(){return!!this.mapsService}getDefault(e){return{closeButton:!0,closeOnClick:!1,maxWidth:"240px",offsets:[0,0],anchor:dne.BOTTOM,stopPropagation:!0,autoPan:!1,autoClose:!0,closeOnEsc:!1,followCursor:!1}}setDOMContent(e){return this.show(),this.createContent(),p_(this.contentPanel,e),this.update(),this}updateCloseOnClick(e){const n=this.mapsService;n&&(n?.off("click",this.onCloseButtonClick),this.popupOption.closeOnClick&&!e&&requestAnimationFrame(()=>{n?.on("click",this.onCloseButtonClick)}))}updateCloseOnEsc(e){window.removeEventListener("keydown",this.onKeyDown),this.popupOption.closeOnEsc&&!e&&window.addEventListener("keydown",this.onKeyDown)}updateFollowCursor(e){var n;const r=(n=this.mapsService)===null||n===void 0?void 0:n.getContainer();r&&(r?.removeEventListener("mousemove",this.onMouseMove),this.popupOption.followCursor&&!e&&r?.addEventListener("mousemove",this.onMouseMove))}createContent(){if(this.content&&Ip(this.content),this.contentTitle=void 0,this.content=is("div","l7-popup-content",this.container),this.setTitle(this.popupOption.title),this.popupOption.closeButton){const e=djt("l7-icon-guanbi");Md(e,"l7-popup-close-button"),this.content.appendChild(e),this.popupOption.closeButtonOffsets&&(e.style.right=this.popupOption.closeButtonOffsets[0]+"px",e.style.top=this.popupOption.closeButtonOffsets[1]+"px"),e.setAttribute("aria-label","Close popup"),e.addEventListener("click",()=>{this.hide()}),e.addEventListener("pointerup",n=>{n.stopPropagation()}),e.addEventListener("pointerdown",n=>{n.stopPropagation()}),this.closeButton=e}else this.closeButton=void 0;this.contentPanel=is("div","l7-popup-content__panel",this.content)}setPopupPosition(e,n,r=!1){if(this.container){const{offsets:i}=this.popupOption;this.container.style.left=e+i[0]+"px",this.container.style.top=n-i[1]+"px",r?this.container.style.transition="left 0.25s cubic-bezier(0,0,0.25,1), top 0.25s cubic-bezier(0,0,0.25,1)":this.container.style.transition=""}}checkUpdateOption(e,n){return n.some(r=>r in e)}}const{get:AWt}=gs;class Khn extends TWt{constructor(...e){super(...e),Z(this,"layerClickCountByFrame",0),Z(this,"layerConfigMap",new WeakMap),Z(this,"displayFeatureInfo",void 0),Z(this,"onLayerClick",(n,r)=>{requestAnimationFrame(()=>{if(this.popupOption.closeOnClick&&this.layerClickCountByFrame++,this.isShow&&this.isSameFeature(n,r.featureId))this.hide();else{const{title:i,content:a}=this.getLayerInfoFrag(n,r);this.setDOMContent(a),this.setLnglat(r.lngLat),this.setTitle(i),this.setDisplayFeatureInfo({layer:n,featureId:r.featureId}),this.show()}})}),Z(this,"onSceneClick",()=>{this.layerClickCountByFrame=0,requestAnimationFrame(()=>{this.layerClickCountByFrame||this.hide()})}),Z(this,"onLayerHide",()=>{this.hide(),this.setDisplayFeatureInfo(void 0)}),Z(this,"updateCloseOnClick",()=>{})}get layerConfigItems(){var e;const{config:n,items:r}=this.popupOption;return(e=n??r)!==null&&e!==void 0?e:[]}getActualTriggerEvent(){const{trigger:e}=this.popupOption;return e==="click"?sFe()?"click":"touchend":e}addTo(e){return super.addTo(e),this.bindLayerEvent(),this.hide(),this}remove(){return super.remove(),this.unbindLayerEvent(),this}setOptions(e){this.unbindLayerEvent();const n=ze({},e),r=n.trigger||this.popupOption.trigger,i=n.items||this.popupOption.items,a=i?.length===0;n.followCursor=r==="hover"&&!a;const o=this.isShow;return super.setOptions(n),this.bindLayerEvent(),(a||!o)&&this.hide(),this}getDefault(e){const n=e.trigger==="hover";return ze(ze({},super.getDefault(e)),{},{trigger:"hover",followCursor:n,lngLat:{lng:0,lat:0},offsets:[0,10],closeButton:!1,closeOnClick:!0,autoClose:!1,closeOnEsc:!1})}bindLayerEvent(){const{trigger:e,closeOnClick:n}=this.popupOption,r=this.getActualTriggerEvent();this.layerConfigItems.forEach(i=>{var a;const o=this.getLayerByConfig(i);if(!o)return;const s=ze({},i);if(e==="hover"){const f=this.onLayerMouseMove.bind(this,o),h=this.onLayerMouseOut.bind(this,o);s.onMouseMove=f,s.onMouseOut=h,o?.on("mousemove",f),o?.on("mouseout",h)}else{var l;const f=this.onLayerClick.bind(this,o);s.onClick=f,o?.on(r,f);const h=(l=this.mapsService)===null||l===void 0?void 0:l.getMapContainer();h&&n&&h.addEventListener(r,this.onSceneClick)}const c=o==null||(a=o.getSource)===null||a===void 0?void 0:a.call(o),u=this.onSourceUpdate.bind(this);c?.on("update",u),s.onSourceUpdate=u,this.layerConfigMap.set(o,s)})}unbindLayerEvent(){const e=this.getActualTriggerEvent();this.layerConfigItems.forEach(n=>{var r;const i=this.getLayerByConfig(n),a=i&&this.layerConfigMap.get(i);if(!a)return;const{onMouseMove:o,onMouseOut:s,onClick:l,onSourceUpdate:c}=a;if(o&&i.off("mousemove",o),s&&i.off("mouseout",s),l&&i.off(e,l),c){var u;i==null||(u=i.getSource())===null||u===void 0||u.off("update",c)}const f=(r=this.mapsService)===null||r===void 0?void 0:r.getMapContainer();f&&f.removeEventListener(e,this.onSceneClick)})}onLayerMouseMove(e,n){if(!this.isSameFeature(e,n.featureId)){const{title:r,content:i}=this.getLayerInfoFrag(e,n);this.setDOMContent(i),this.setTitle(r),this.setDisplayFeatureInfo({layer:e,featureId:n.featureId}),this.show()}}onLayerMouseOut(e){this.setDisplayFeatureInfo(void 0),this.isShow&&this.hide()}onSourceUpdate(){this.hide(),this.setDisplayFeatureInfo(void 0)}getLayerInfoFrag(e,n){const r=this.layerConfigMap.get(e);let i;const a=document.createDocumentFragment();if(r){let o=n.feature;o.type==="Feature"&&"properties"in o&&"geometry"in o&&(o=o.properties);const{title:s,fields:l,customContent:c}=r;if(s){i=document.createDocumentFragment();const u=s instanceof Function?s(o):s;p_(i,u)}if(c){const u=c instanceof Function?c(o):c;p_(a,u)}else l!=null&&l.length&&l?.forEach(u=>{var f,h;const{field:d,formatField:p,formatValue:g,getValue:v}=typeof u=="string"?{field:u}:u,y=is("div","l7-layer-popup__row"),_=v?v(n.feature):AWt(o,d),E=(f=p instanceof Function?p(d,o):p)!==null&&f!==void 0?f:d;let x=(h=g instanceof Function?g(_,o):g)!==null&&h!==void 0?h:_;const T=is("span","l7-layer-popup__key",y);p_(T,E),p_(T,document.createTextNode(""));const S=is("span","l7-layer-popup__value",y);Array.isArray(x)&&x.every(w=>!(w instanceof Object))&&(x=x.map(w=>String(w)).join(",")),p_(S,x),a.appendChild(y)})}return{title:i,content:a}}getLayerByConfig(e){const n=e.layer;if(n instanceof Object)return n;if(typeof n=="string")return this.layerService.getLayer(n)||this.layerService.getLayerByName(n)}isSameFeature(e,n){const r=this.displayFeatureInfo;return r&&e===r.layer&&n===r.featureId}setDisplayFeatureInfo(e){const n=this.displayFeatureInfo;n&&n.layer.off("hide",this.onLayerHide),e&&e.layer.on("hide",this.onLayerHide),this.displayFeatureInfo=e}}function wWt(t,e){var n=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(n||r)&&(e||(e=document),!!e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var a=e.body||e.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):e.documentElement.appendChild(i)}var o=e.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),i.appendChild(o),o}}wWt(`.l7-marker-container {
  position: absolute;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  width: 40px;
  height: 40px;
  background-color: rgb(181 226 140 / 60%);
  background-clip: padding-box;
  border-radius: 20px;
}

.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-top: 5px;
  margin-left: 5px;
  font:
    12px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  text-align: center;
  background-color: rgb(110 204 57 / 60%);
  border-radius: 15px;
}

.l7-marker-cluster span {
  line-height: 30px;
}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  box-shadow: none;
}

.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  background-clip: padding-box;
  border: 2px solid rgb(0 0 0 / 20%);
}

.mapboxgl-ctrl-logo,
.amap-logo {
  display: none !important;
}

.l7-select-box {
  border: 3px dashed gray;
  border-radius: 2px;
  position: absolute;
  z-index: 999;
  box-sizing: border-box;
}

.l7-control-container {
  font:
    12px/1.5 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
}

.l7-control-container .l7-control {
  position: relative;
  z-index: 999;
  float: left;
  clear: both;
  color: #595959;
  font-size: 12px;
  pointer-events: visiblepainted;

  /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}

.l7-control-container .l7-control.l7-control--hide {
  display: none;
}

.l7-control-container .l7-top {
  top: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}

.l7-control-container .l7-top .l7-control:not(.l7-control--hide) {
  margin-top: 8px;
}

.l7-control-container .l7-right {
  right: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}

.l7-control-container .l7-right .l7-control:not(.l7-control--hide) {
  margin-right: 8px;
}

.l7-control-container .l7-bottom {
  bottom: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}

.l7-control-container .l7-bottom .l7-control:not(.l7-control--hide) {
  margin-bottom: 8px;
}

.l7-control-container .l7-left {
  left: 0;
  display: flex;
  position: absolute;
  z-index: 999;
  pointer-events: none;
}

.l7-control-container .l7-left .l7-control:not(.l7-control--hide) {
  margin-left: 8px;
}

.l7-control-container .l7-center {
  position: absolute;
  display: flex;
  justify-content: center;
}

.l7-control-container .l7-center.l7-top,
.l7-control-container .l7-center.l7-bottom {
  width: 100%;
}

.l7-control-container .l7-center.l7-left,
.l7-control-container .l7-center.l7-right {
  height: 100%;
}

.l7-control-container .l7-center .l7-control {
  margin-right: 8px;
  margin-bottom: 8px;
}

.l7-control-container .l7-row {
  flex-direction: row;
}

.l7-control-container .l7-row.l7-top {
  align-items: flex-start;
}

.l7-control-container .l7-row.l7-bottom {
  align-items: flex-end;
}

.l7-control-container .l7-column {
  flex-direction: column;
}

.l7-control-container .l7-column.l7-left {
  align-items: flex-start;
}

.l7-control-container .l7-column.l7-right {
  align-items: flex-end;
}

.l7-button-control {
  min-width: 28px;
  height: 28px;
  background-color: #fff;
  border-width: 0;
  border-radius: 2px;
  outline: 0;
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 6px;
  box-shadow: 0 0 20px 0 rgb(0 0 0 / 15%);
  line-height: 16px;
}

.l7-button-control .l7-iconfont {
  fill: #595959;
  color: #595959;
  width: 16px;
  height: 16px;
}

.l7-button-control.l7-button-control--row {
  padding: 0 16px 0 13px;
}

.l7-button-control.l7-button-control--row * + .l7-button-control__text {
  margin-left: 8px;
}

.l7-button-control.l7-button-control--column {
  height: 44px;
  flex-direction: column;
}

.l7-button-control.l7-button-control--column .l7-iconfont {
  margin-top: 3px;
}

.l7-button-control.l7-button-control--column .l7-button-control__text {
  margin-top: 3px;
  font-size: 10px;
  -webkit-transform: scale(0.83333);
          transform: scale(0.83333);
}

.l7-button-control:not(:disabled):hover {
  background-color: #f3f3f3;
}

.l7-button-control:not(:disabled):active {
  background-color: #f3f3f3;
}

.l7-button-control:disabled {
  background-color: #fafafa;
  color: #bdbdbd;
  cursor: not-allowed;
}

.l7-button-control:disabled .l7-iconfont {
  fill: #bdbdbd;
  color: #bdbdbd;
}

.l7-button-control:disabled:hover {
  background-color: #fafafa;
}

.l7-button-control:disabled:active {
  background-color: #fafafa;
}

.l7-popper {
  position: absolute;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 5;
  color: #595959;
}

.l7-popper.l7-popper-hide {
  display: none;
}

.l7-popper .l7-popper-content {
  min-height: 28px;
  background: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgb(0 0 0 / 15%);
}

.l7-popper .l7-popper-arrow {
  width: 0;
  height: 0;
  border-width: 4px;
  border-style: solid;
  border-color: transparent;
  box-shadow: 0 0 20px 0 rgb(0 0 0 / 15%);
}

.l7-popper.l7-popper-left {
  flex-direction: row;
}

.l7-popper.l7-popper-left .l7-popper-arrow {
  border-left-color: #fff;
  margin: 10px 0;
}

.l7-popper.l7-popper-right {
  flex-direction: row-reverse;
}

.l7-popper.l7-popper-right .l7-popper-arrow {
  border-right-color: #fff;
  margin: 10px 0;
}

.l7-popper.l7-popper-top {
  flex-direction: column;
}

.l7-popper.l7-popper-top .l7-popper-arrow {
  border-top-color: #fff;
  margin: 0 10px;
}

.l7-popper.l7-popper-bottom {
  flex-direction: column-reverse;
}

.l7-popper.l7-popper-bottom .l7-popper-arrow {
  border-bottom-color: #fff;
  margin: 0 10px;
}

.l7-popper.l7-popper-start {
  align-items: flex-start;
}

.l7-popper.l7-popper-end {
  align-items: flex-end;
}

.l7-select-control--normal {
  padding: 4px 0;
}

.l7-select-control--normal .l7-select-control-item {
  display: flex;
  align-items: center;
  height: 24px;
  padding: 0 16px;
  font-size: 12px;
  line-height: 24px;
}

.l7-select-control--normal .l7-select-control-item > * + * {
  margin-left: 6px;
}

.l7-select-control--normal .l7-select-control-item input[type='checkbox'] {
  width: 14px;
  height: 14px;
}

.l7-select-control--normal .l7-select-control-item:hover {
  background-color: #f3f3f3;
}

.l7-select-control--image {
  display: flex;
  flex-wrap: wrap;
  align-items: flex-start;
  box-sizing: content-box;
  max-width: 460px;
  max-height: 400px;
  margin: 12px 0 0 12px;
  overflow: hidden auto;
}

.l7-select-control--image .l7-select-control-item {
  position: relative;
  display: flex;
  flex: 0 0 calc((100% - (12px + 9px) * 2) / 3);
  flex-direction: column;
  justify-content: center;
  box-sizing: content-box;
  margin-right: 12px;
  margin-bottom: 12px;
  overflow: hidden;
  font-size: 12px;
  border: 1px solid #fff;
  border-radius: 2px;
}

.l7-select-control--image .l7-select-control-item img {
  width: 100%;
  height: 80px;
}

.l7-select-control--image .l7-select-control-item input[type='checkbox'] {
  position: absolute;
  top: 0;
  right: 0;
}

.l7-select-control--image .l7-select-control-item .l7-select-control-item-row {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 26px;
}

.l7-select-control--image .l7-select-control-item .l7-select-control-item-row > * + * {
  margin-left: 8px;
}

.l7-select-control--image .l7-select-control-item.l7-select-control-item-active {
  border-color: #0370fe;
}

.l7-select-control-item {
  cursor: pointer;
}

.l7-select-control-item input[type='checkbox'] {
  margin: 0;
  cursor: pointer;
}

.l7-select-control--multiple .l7-select-control-item:hover {
  background-color: transparent;
}

.l7-control-logo {
  width: 89px;
  height: 16px;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-control-logo img {
  height: 100%;
  width: 100%;
}

.l7-control-logo .l7-control-logo-link {
  display: block;
  cursor: pointer;
}

.l7-control-logo .l7-control-logo-link img {
  cursor: pointer;
}

.l7-control-mouse-location {
  background-color: #fff;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgb(0 0 0 / 15%);
  padding: 2px 4px;
  min-width: 130px;
}

.l7-control-zoom {
  overflow: hidden;
  border-radius: 2px;
  box-shadow: 0 0 20px 0 rgb(0 0 0 / 15%);
}

.l7-control-zoom .l7-button-control {
  font-size: 16px;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
  box-shadow: 0 0 0;
}

.l7-control-zoom .l7-button-control .l7-iconfont {
  width: 14px;
  height: 14px;
}

.l7-control-zoom .l7-button-control:last-child {
  border-bottom: 0;
}

.l7-control-zoom .l7-control-zoom__number {
  color: #595959;
  padding: 0;
}

.l7-control-zoom .l7-control-zoom__number:hover {
  background-color: #fff;
}

.l7-control-scale {
  display: flex;
  flex-direction: column;
}

.l7-control-scale .l7-control-scale-line {
  box-sizing: border-box;
  padding: 2px 5px 1px;
  overflow: hidden;
  color: #595959;
  font-size: 10px;
  line-height: 1.1;
  white-space: nowrap;
  background: #fff;
  border: 2px solid #000;
  border-top: 0;
  transition: width 0.1s;
}

.l7-control-scale .l7-control-scale-line + .l7-control-scale .l7-control-scale-line {
  margin-top: -2px;
  border-top: 2px solid #777;
  border-bottom: none;
}

.l7-right .l7-control-scale {
  display: flex;
  align-items: flex-end;
}

.l7-right .l7-control-scale .l7-control-scale-line {
  text-align: right;
}

.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  z-index: 5;
  display: flex;
  will-change: transform;
  pointer-events: none;
}

.l7-popup.l7-popup-hide {
  display: none;
}

.l7-popup .l7-popup-content {
  position: relative;
  padding: 16px;
  font-size: 14px;
  background: #fff;
  border-radius: 3px;
  box-shadow: 0 1px 2px rgb(0 0 0 / 10%);
}

.l7-popup .l7-popup-content .l7-popup-content__title {
  margin-bottom: 8px;
  font-weight: bold;
}

.l7-popup .l7-popup-content .l7-popup-close-button,
.l7-popup .l7-popup-content .l7-popup-content__title,
.l7-popup .l7-popup-content .l7-popup-content__panel {
  white-space: normal;
  -webkit-user-select: text;
     -moz-user-select: text;
      -ms-user-select: text;
          user-select: text;
  pointer-events: initial;
}

.l7-popup .l7-popup-content .l7-popup-close-button {
  position: absolute;
  top: 0;
  right: 0;
  width: 18px;
  height: 18px;
  padding: 0;
  font-size: 14px;
  line-height: 18px;
  text-align: center;
  background-color: transparent;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
}

.l7-popup .l7-popup-tip {
  position: relative;
  z-index: 1;
  width: 0;
  height: 0;
  border: 10px solid transparent;
}

.l7-popup.l7-popup-anchor-bottom,
.l7-popup.l7-popup-anchor-bottom-left,
.l7-popup.l7-popup-anchor-bottom-right {
  flex-direction: column-reverse;
}

.l7-popup.l7-popup-anchor-bottom .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-bottom-right .l7-popup-tip {
  bottom: 1px;
}

.l7-popup.l7-popup-anchor-top,
.l7-popup.l7-popup-anchor-top-left,
.l7-popup.l7-popup-anchor-top-right {
  flex-direction: column;
}

.l7-popup.l7-popup-anchor-top .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-left .l7-popup-tip,
.l7-popup.l7-popup-anchor-top-right .l7-popup-tip {
  top: 1px;
}

.l7-popup.l7-popup-anchor-left {
  flex-direction: row;
}

.l7-popup.l7-popup-anchor-right {
  flex-direction: row-reverse;
}

.l7-popup-anchor-top .l7-popup-tip {
  position: relative;
  align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
  align-self: flex-start;
  border-top: none;
  border-bottom-color: #fff;
  border-left: none;
}

.l7-popup-anchor-top-right .l7-popup-tip {
  align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
  align-self: center;
  border-top-color: #fff;
  border-bottom: none;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
  align-self: flex-start;
  border-top-color: #fff;
  border-bottom: none;
  border-left: none;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
  align-self: flex-end;
  border-top-color: #fff;
  border-right: none;
  border-bottom: none;
}

.l7-popup-anchor-left .l7-popup-tip {
  align-self: center;
  border-right-color: #fff;
  border-left: none;
}

.l7-popup-anchor-right .l7-popup-tip {
  right: 1px;
  align-self: center;
  border-right: none;
  border-left-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
  display: none;
}

.l7-popup-track-pointer * {
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
  pointer-events: none;
}

.l7-map:hover .l7-popup-track-pointer {
  display: flex;
}

.l7-map:active .l7-popup-track-pointer {
  display: none;
}

.l7-layer-popup__row {
  font-size: 12px;
}

.l7-layer-popup__row + .l7-layer-popup__row {
  margin-top: 4px;
}

.l7-control-swipe {
  position: absolute;
  top: 50%;
  left: 50%;
  z-index: 6;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  touch-action: none;
}

.l7-control-swipe_hide {
  display: none;
}

.l7-control-swipe::before {
  position: absolute;
  top: -5000px;
  bottom: -5000px;
  left: 50%;
  z-index: -1;
  width: 4px;
  background: #fff;
  -webkit-transform: translate(-2px, 0);
          transform: translate(-2px, 0);
  content: '';
}

.l7-control-swipe.horizontal::before {
  inset: 50% -5000px auto;
  width: auto;
  height: 4px;
}

.l7-control-swipe__button {
  display: block;
  width: 28px;
  height: 28px;
  margin: 0;
  padding: 0;
  color: #595959;
  font-weight: bold;
  font-size: inherit;
  text-align: center;
  text-decoration: none;
  background-color: #fff;
  border: none;
  border-radius: 2px;
  outline: none;
}

.l7-control-swipe,
.l7-control-swipe__button {
  cursor: ew-resize;
}

.l7-control-swipe.horizontal,
.l7-control-swipe.horizontal button {
  cursor: ns-resize;
}

.l7-control-swipe::after,
.l7-control-swipe__button::before,
.l7-control-swipe__button::after {
  position: absolute;
  top: 25%;
  bottom: 25%;
  left: 50%;
  width: 2px;
  background: currentcolor;
  -webkit-transform: translate(-1px, 0);
          transform: translate(-1px, 0);
  content: '';
}

.l7-control-swipe__button::after {
  -webkit-transform: translateX(4px);
          transform: translateX(4px);
}

.l7-control-swipe__button::before {
  -webkit-transform: translateX(-6px);
          transform: translateX(-6px);
}
`);class I5{constructor(e){Z(this,"configService",void 0),Z(this,"config",void 0),this.config=e}setContainer(e,n){this.configService=e.globalConfigService,e.mapConfig=ze(ze({},this.config),{},{id:n}),e.mapService=new(this.getServiceConstructor())(e)}getServiceConstructor(){throw new Error("Method not implemented.")}}var Nk={exports:{}},OWt=Nk.exports,Dbe;function CWt(){return Dbe||(Dbe=1,(function(t,e){(function(n,r){t.exports=r()})(OWt,function(){function n(f){var h=[];return f.AMapUI&&h.push(r(f.AMapUI)),f.Loca&&h.push(i(f.Loca)),Promise.all(h)}function r(f){return new Promise(function(h,d){var p=[];if(f.plugins)for(var g=0;g<f.plugins.length;g+=1)o.AMapUI.plugins.indexOf(f.plugins[g])==-1&&p.push(f.plugins[g]);if(s.AMapUI===a.failed)d(" AMapUI ");else if(s.AMapUI===a.notload){s.AMapUI=a.loading,o.AMapUI.version=f.version||o.AMapUI.version,g=o.AMapUI.version;var v=document.body||document.head,y=document.createElement("script");y.type="text/javascript",y.src="https://webapi.amap.com/ui/"+g+"/main.js",y.onerror=function(_){s.AMapUI=a.failed,d(" AMapUI ")},y.onload=function(){if(s.AMapUI=a.loaded,p.length)window.AMapUI.loadUI(p,function(){for(var _=0,E=p.length;_<E;_++){var x=p[_].split("/").slice(-1)[0];window.AMapUI[x]=arguments[_]}for(h();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()});else for(h();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()},v.appendChild(y)}else s.AMapUI===a.loaded?f.version&&f.version!==o.AMapUI.version?d(" AMapUI "):p.length?window.AMapUI.loadUI(p,function(){for(var _=0,E=p.length;_<E;_++){var x=p[_].split("/").slice(-1)[0];window.AMapUI[x]=arguments[_]}h()}):h():f.version&&f.version!==o.AMapUI.version?d(" AMapUI "):l.AMapUI.push(function(_){_?d(_):p.length?window.AMapUI.loadUI(p,function(){for(var E=0,x=p.length;E<x;E++){var T=p[E].split("/").slice(-1)[0];window.AMapUI[T]=arguments[E]}h()}):h()})})}function i(f){return new Promise(function(h,d){if(s.Loca===a.failed)d(" Loca ");else if(s.Loca===a.notload){s.Loca=a.loading,o.Loca.version=f.version||o.Loca.version;var p=o.Loca.version,g=o.AMap.version.startsWith("2"),v=p.startsWith("2");if(g&&!v||!g&&v)d("JSAPI  Loca ");else{g=o.key,v=document.body||document.head;var y=document.createElement("script");y.type="text/javascript",y.src="https://webapi.amap.com/loca?v="+p+"&key="+g,y.onerror=function(_){s.Loca=a.failed,d(" AMapUI ")},y.onload=function(){for(s.Loca=a.loaded,h();l.Loca.length;)l.Loca.splice(0,1)[0]()},v.appendChild(y)}}else s.Loca===a.loaded?f.version&&f.version!==o.Loca.version?d(" Loca "):h():f.version&&f.version!==o.Loca.version?d(" Loca "):l.Loca.push(function(_){_?d(_):d()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(f){f.notload="notload",f.loading="loading",f.loaded="loaded",f.failed="failed"})(a||(a={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},l={AMapUI:[],Loca:[]},c=[],u=function(f){typeof f=="function"&&(s.AMap===a.loaded?f(window.AMap):c.push(f))};return{load:function(f){return new Promise(function(h,d){if(s.AMap==a.failed)d("");else if(s.AMap==a.notload){var p=f.key,g=f.version,v=f.plugins;p?(window.AMap&&location.host!=="lbs.amap.com"&&d("API"),o.key=p,o.AMap.version=g||o.AMap.version,o.AMap.plugins=v||o.AMap.plugins,s.AMap=a.loading,g=document.body||document.head,window.___onAPILoaded=function(_){if(delete window.___onAPILoaded,_)s.AMap=a.failed,d(_);else for(s.AMap=a.loaded,n(f).then(function(){h(window.AMap)}).catch(d);c.length;)c.splice(0,1)[0]()},v=document.createElement("script"),v.type="text/javascript",v.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+p+"&plugin="+o.AMap.plugins.join(","),v.onerror=function(_){s.AMap=a.failed,d(_)},g.appendChild(v)):d("key")}else if(s.AMap==a.loaded)if(f.key&&f.key!==o.key)d(" key");else if(f.version&&f.version!==o.AMap.version)d(" JSAPI ");else{if(p=[],f.plugins)for(g=0;g<f.plugins.length;g+=1)o.AMap.plugins.indexOf(f.plugins[g])==-1&&p.push(f.plugins[g]);p.length?window.AMap.plugin(p,function(){n(f).then(function(){h(window.AMap)}).catch(d)}):n(f).then(function(){h(window.AMap)}).catch(d)}else if(f.key&&f.key!==o.key)d(" key");else if(f.version&&f.version!==o.AMap.version)d(" JSAPI ");else{var y=[];if(f.plugins)for(g=0;g<f.plugins.length;g+=1)o.AMap.plugins.indexOf(f.plugins[g])==-1&&y.push(f.plugins[g]);u(function(){y.length?window.AMap.plugin(y,function(){n(f).then(function(){h(window.AMap)}).catch(d)}):n(f).then(function(){h(window.AMap)}).catch(d)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},l={AMap:[],AMapUI:[],Loca:[]}}}})})(Nk)),Nk.exports}var RWt=CWt();const MWt=Ni(RWt);var tV,Bbe;function PWt(){if(Bbe)return tV;Bbe=1,tV=t;function t(e,n,r,i){this.cx=3*e,this.bx=3*(r-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(i-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=r,this.p2y=i}return t.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,n){if(n===void 0&&(n=1e-6),e<0)return 0;if(e>1)return 1;for(var r=e,i=0;i<8;i++){var a=this.sampleCurveX(r)-e;if(Math.abs(a)<n)return r;var o=this.sampleCurveDerivativeX(r);if(Math.abs(o)<1e-6)break;r=r-a/o}var s=0,l=1;for(r=e,i=0;i<20&&(a=this.sampleCurveX(r),!(Math.abs(a-e)<n));i++)e>a?s=r:l=r,r=(l-s)*.5+s;return r},solve:function(e,n){return this.sampleCurveY(this.solveCurveX(e,n))}},tV}var NWt=PWt();const IWt=Ni(NWt),Lp={number:function(e,n,r){return e+r*(n-e)}};function wm(t,e,n){return Math.min(n,Math.max(e,t))}function rA(t,e,n){const r=n-e,i=((t-e)%r+r)%r+e;return i===e?n:i}let LWt=1;function kWt(){return LWt++}function ll(t,...e){for(const n of e)for(const r in n)t[r]=n[r];return t}function DWt(t,e){const n={};for(let r=0;r<e.length;r++){const i=e[r];i in t&&(n[i]=t[i])}return n}function Vne(t,e,n,r){const i=new IWt(t,e,n,r);return a=>i.solve(a)}const NZ=Vne(.25,.1,.25,1),Fbe={};function BWt(t){Fbe[t]||(typeof console<"u"&&console.warn(t),Fbe[t]=!0)}function Ube(t){return t*Math.PI/180}function jbe(t,e,n){n[t]&&n[t].indexOf(e)!==-1||(n[t]=n[t]||[],n[t].push(e))}function nV(t,e,n){if(n&&n[t]){const r=n[t].indexOf(e);r!==-1&&n[t].splice(r,1)}}let la=class{constructor(e,n={}){Z(this,"type",void 0),ll(this,n),this.type=e}};class FWt extends la{constructor(e,n={}){super("error",n),Z(this,"error",void 0),this.error=e}}class UWt{constructor(){Z(this,"_listeners",void 0),Z(this,"_oneTimeListeners",void 0),Z(this,"_eventedParent",void 0),Z(this,"_eventedParentData",void 0)}on(e,n){return this._listeners=this._listeners||{},jbe(e,n,this._listeners),this}off(e,n){return nV(e,n,this._listeners),nV(e,n,this._oneTimeListeners),this}once(e,n){return n?(this._oneTimeListeners=this._oneTimeListeners||{},jbe(e,n,this._oneTimeListeners),this):new Promise(r=>this.once(e,r))}fire(e,n){typeof e=="string"&&(e=new la(e,n||{}));const r=e.type;if(this.listens(r)){e.target=this;const i=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const s of i)s.call(this,e);const a=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const s of a)nV(r,s,this._oneTimeListeners),s.call(this,e);const o=this._eventedParent;o&&(ll(e,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),o.fire(e))}else e instanceof FWt&&console.error(e.error);return this}emit(e,n){return this.fire(e,n)}listens(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)}setEventedParent(e,n){return e&&(this._eventedParent=e),this._eventedParentData=n,this}}var jWt=MFe();const La=Ni(jWt);var Yne;class fi{static testProp(e){if(!fi.docStyle)return e[0];for(let n=0;n<e.length;n++)if(e[n]in fi.docStyle)return e[n];return e[0]}static create(e,n,r){const i=window.document.createElement(e);return n!==void 0&&(i.className=n),r&&r.appendChild(i),i}static createNS(e,n){return window.document.createElementNS(e,n)}static disableDrag(){fi.docStyle&&fi.selectProp&&(fi.userSelect=fi.docStyle[fi.selectProp],fi.docStyle[fi.selectProp]="none")}static enableDrag(){fi.docStyle&&fi.selectProp&&(fi.docStyle[fi.selectProp]=fi.userSelect)}static setTransform(e,n){e.style[fi.transformProp]=n}static addEventListener(e,n,r,i={}){"passive"in i?e.addEventListener(n,r,i):e.addEventListener(n,r,i.capture)}static removeEventListener(e,n,r,i={}){"passive"in i?e.removeEventListener(n,r,i):e.removeEventListener(n,r,i.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",fi.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",fi.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",fi.suppressClickInternal,!0)},0)}static getScale(e){const n=e.getBoundingClientRect();return{x:n.width/e.offsetWidth||1,y:n.height/e.offsetHeight||1,boundingClientRect:n}}static getPoint(e,n,r){const i=n.boundingClientRect;return new La((r.clientX-i.left)/n.x-e.clientLeft,(r.clientY-i.top)/n.y-e.clientTop)}static mousePos(e,n){const r=fi.getScale(e);return fi.getPoint(e,r,n)}static touchPos(e,n){const r=[],i=fi.getScale(e);for(let a=0;a<n.length;a++)r.push(fi.getPoint(e,i,n[a]));return r}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}Yne=fi;Z(fi,"docStyle",typeof window<"u"&&window.document&&window.document.documentElement.style);Z(fi,"userSelect",void 0);Z(fi,"selectProp",Yne.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]));Z(fi,"transformProp",Yne.testProp(["transform","WebkitTransform"]));class Xne{constructor(e){Z(this,"size",1e4),this.size=e||1e4}setSize(e){this.size=e}getSize(){return[this.size,this.size]}mercatorXfromLng(e){return(180+e)/360*this.size}mercatorYfromLat(e){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360)*this.size}lngFromMercatorX(e){return e/this.size*360-180}latFromMercatorY(e){const n=180-(1-e/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90}project(e){const n=this.mercatorXfromLng(e[0]),r=this.mercatorYfromLat(e[1]);return[n,r]}unproject(e){const n=this.lngFromMercatorX(e[0]),r=this.latFromMercatorY(e[1]);return[n,r]}}class mm extends la{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r,i={}){super(e,i),Z(this,"target",void 0),Z(this,"originalEvent",void 0),Z(this,"point",void 0),Z(this,"lngLat",void 0),Z(this,"_defaultPrevented",void 0);const a=fi.mousePos(n.getCanvasContainer(),r),o=n.unproject(a);if(this.point=a,this.lngLat=o,this.originalEvent=r,this._defaultPrevented=!1,this.target=n,n.version==="SIMPLE"){const s=new Xne(n.mapSize),[l,c]=s.project([o.lng,o.lat]);this.lngLat={lng:l,lat:c}}}}class SL extends la{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){super(e),Z(this,"target",void 0),Z(this,"originalEvent",void 0),Z(this,"lngLat",void 0),Z(this,"point",void 0),Z(this,"points",void 0),Z(this,"lngLats",void 0),Z(this,"_defaultPrevented",void 0);const i=e==="touchend"?r.changedTouches:r.touches,a=fi.touchPos(n.getCanvasContainer(),i),o=a.map(c=>n.unproject(c)),s=a.reduce((c,u,f,h)=>c.add(u.div(h.length)),new La(0,0)),l=n.unproject(s);this.target=n,this.points=a,this.point=s,this.lngLats=o,this.lngLat=l,this.originalEvent=r,this._defaultPrevented=!1}}class zWt extends la{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,n,r){super(e),Z(this,"target",void 0),Z(this,"originalEvent",void 0),Z(this,"_defaultPrevented",void 0),this.target=n,this._defaultPrevented=!1,this.originalEvent=r}}const f6e=63710088e-1;class Wa{constructor(e,n){if(Z(this,"lng",void 0),Z(this,"lat",void 0),isNaN(e)||isNaN(n))throw new Error(`Invalid LngLat object: (${e}, ${n})`);if(this.lng=+e,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Wa(rA(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const n=Math.PI/180,r=this.lat*n,i=e.lat*n,a=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((e.lng-this.lng)*n);return f6e*Math.acos(Math.min(a,1))}static convert(e){if(e instanceof Wa)return e;if(Array.isArray(e)&&(e.length===2||e.length===3))return new Wa(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&typeof e=="object"&&e!==null)return new Wa(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const h6e=2*Math.PI*f6e;function d6e(t){return h6e*Math.cos(t*Math.PI/180)}function Ik(t){return(180+t)/360}function Lk(t){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t*Math.PI/360)))/360}function p6e(t,e){return t/d6e(e)}function $Wt(t){return t*360-180}function IZ(t){const e=180-t*360;return 360/Math.PI*Math.atan(Math.exp(e*Math.PI/180))-90}function HWt(t,e){return t*d6e(IZ(e))}function GWt(t){return 1/Math.cos(t*Math.PI/180)}class Wg{constructor(e,n,r=0){Z(this,"x",void 0),Z(this,"y",void 0),Z(this,"z",void 0),this.x=+e,this.y=+n,this.z=+r}static fromLngLat(e,n=0){const r=Wa.convert(e);return new Wg(Ik(r.lng),Lk(r.lat),p6e(n,r.lat))}toLngLat(){return new Wa($Wt(this.x),IZ(this.y))}toAltitude(){return HWt(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/h6e*GWt(IZ(this.y))}}class Hg{constructor(e,n){Z(this,"_ne",void 0),Z(this,"_sw",void 0),e&&(n?this.setSouthWest(e).setNorthEast(n):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof Wa?new Wa(e.lng,e.lat):Wa.convert(e),this}setSouthWest(e){return this._sw=e instanceof Wa?new Wa(e.lng,e.lat):Wa.convert(e),this}extend(e){const n=this._sw,r=this._ne;let i,a;if(e instanceof Wa)i=e,a=e;else if(e instanceof Hg){if(i=e._sw,a=e._ne,!i||!a)return this}else{if(Array.isArray(e))if(e.length===4||e.every(Array.isArray)){const o=e;return this.extend(Hg.convert(o))}else{const o=e;return this.extend(Wa.convert(o))}else if(e&&("lng"in e||"lon"in e)&&"lat"in e)return this.extend(Wa.convert(e));return this}return!n&&!r?(this._sw=new Wa(i.lng,i.lat),this._ne=new Wa(a.lng,a.lat)):(n.lng=Math.min(i.lng,n.lng),n.lat=Math.min(i.lat,n.lat),r.lng=Math.max(a.lng,r.lng),r.lat=Math.max(a.lat,r.lat)),this}getCenter(){return new Wa((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Wa(this.getWest(),this.getNorth())}getSouthEast(){return new Wa(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:n,lat:r}=Wa.convert(e),i=this._sw.lat<=r&&r<=this._ne.lat;let a=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(a=this._sw.lng>=n&&n>=this._ne.lng),i&&a}static convert(e){return e instanceof Hg?e:new Hg(e)}static fromLngLat(e,n=0){const i=360*n/40075017,a=i/Math.cos(Math.PI/180*e.lat);return new Hg(new Wa(e.lng-a,e.lat-i),new Wa(e.lng+a,e.lat+i))}}const WWt="AbortError";function VWt(){return new Error(WWt)}const YWt=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date);let rV;const Up={now:YWt,frameAsync(t){return new Promise((e,n)=>{const r=requestAnimationFrame(e);t.signal.addEventListener("abort",()=>{cancelAnimationFrame(r),n(VWt())})})},get prefersReducedMotion(){return window.matchMedia?(rV==null&&(rV=window.matchMedia("(prefers-reduced-motion: reduce)")),rV.matches):!1}};class XWt extends UWt{constructor(e,n){super(),Z(this,"transform",void 0),Z(this,"handlers",void 0),Z(this,"_moving",void 0),Z(this,"_zooming",void 0),Z(this,"_rotating",void 0),Z(this,"_pitching",void 0),Z(this,"_padding",void 0),Z(this,"_bearingSnap",void 0),Z(this,"_easeStart",void 0),Z(this,"_easeOptions",void 0),Z(this,"_easeId",void 0),Z(this,"_onEaseFrame",void 0),Z(this,"_onEaseEnd",void 0),Z(this,"_easeFrameId",void 0),Z(this,"_requestedCameraState",void 0),Z(this,"transformCameraUpdate",void 0),Z(this,"_renderFrameCallback",()=>{const r=Math.min((Up.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(r)),r<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}),this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=n.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new Wa(this.transform.center.lng,this.transform.center.lat)}setCenter(e,n){return this.jumpTo({center:e},n)}panBy(e,n,r){return e=La.convert(e).mult(-1),this.panTo(this.transform.center,ll({offset:e},n),r)}panTo(e,n,r){return this.easeTo(ll({center:e},n),r)}getZoom(){return this.transform.zoom}setZoom(e,n){return this.jumpTo({zoom:e},n),this}zoomTo(e,n,r){return this.easeTo(ll({zoom:e},n),r)}zoomIn(e,n){return this.zoomTo(this.getZoom()+1,e,n),this}zoomOut(e,n){return this.zoomTo(this.getZoom()-1,e,n),this}getBearing(){return this.transform.bearing}setBearing(e,n){return this.jumpTo({bearing:e},n),this}getPadding(){return this.transform.padding}setPadding(e,n){return this.jumpTo({padding:e},n),this}rotateTo(e,n,r){return this.easeTo(ll({bearing:e},n),r)}resetNorth(e,n){return this.rotateTo(0,ll({duration:1e3},e),n),this}resetNorthPitch(e,n){return this.easeTo(ll({bearing:0,pitch:0,duration:1e3},e),n),this}snapToNorth(e,n){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,n):this}getPitch(){return this.transform.pitch}setPitch(e,n){return this.jumpTo({pitch:e},n),this}cameraForBounds(e,n){e=Hg.convert(e);const r=n&&n.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),r,n)}_cameraForBoxAndBearing(e,n,r,i){const a={top:0,bottom:0,right:0,left:0};if(i=ll({padding:a,offset:[0,0],maxZoom:this.transform.maxZoom},i),typeof i.padding=="number"){const N=i.padding;i.padding={top:N,bottom:N,right:N,left:N}}i.padding=ll(a,i.padding);const o=this.transform,s=o.padding,l=new Hg(e,n),c=o.project(l.getNorthWest()),u=o.project(l.getNorthEast()),f=o.project(l.getSouthEast()),h=o.project(l.getSouthWest()),d=Ube(-r),p=c.rotate(d),g=u.rotate(d),v=f.rotate(d),y=h.rotate(d),_=new La(Math.max(p.x,g.x,y.x,v.x),Math.max(p.y,g.y,y.y,v.y)),E=new La(Math.min(p.x,g.x,y.x,v.x),Math.min(p.y,g.y,y.y,v.y)),x=_.sub(E),T=(o.width-(s.left+s.right+i.padding.left+i.padding.right))/x.x,S=(o.height-(s.top+s.bottom+i.padding.top+i.padding.bottom))/x.y;if(S<0||T<0){BWt("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}const w=Math.min(o.scaleZoom(o.scale*Math.min(T,S)),i.maxZoom),C=La.convert(i.offset),D=(i.padding.left-i.padding.right)/2,L=(i.padding.top-i.padding.bottom)/2,I=new La(D,L).rotate(Ube(r)),$=C.add(I).mult(o.scale/o.zoomScale(w));return{center:o.unproject(c.add(f).div(2).sub($)),zoom:w,bearing:r}}fitBounds(e,n,r){return this._fitInternal(this.cameraForBounds(e,n),n,r)}fitScreenCoordinates(e,n,r,i,a){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(La.convert(e)),this.transform.pointLocation(La.convert(n)),r,i),i,a)}_fitInternal(e,n,r){return e?(n=ll(e,n),delete n.padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(e,n){this.stop();const r=this._getTransformForUpdate();let i=!1,a=!1,o=!1;return"zoom"in e&&r.zoom!==+e.zoom&&(i=!0,r.zoom=+e.zoom),e.center!==void 0&&(r.center=Wa.convert(e.center)),"bearing"in e&&r.bearing!==+e.bearing&&(a=!0,r.bearing=+e.bearing),"pitch"in e&&r.pitch!==+e.pitch&&(o=!0,r.pitch=+e.pitch),e.padding!=null&&!r.isPaddingEqual(e.padding)&&(r.padding=e.padding),this._applyUpdatedTransform(r),this.fire(new la("movestart",n)).fire(new la("move",n)),i&&this.fire(new la("zoomstart",n)).fire(new la("zoom",n)).fire(new la("zoomend",n)),a&&this.fire(new la("rotatestart",n)).fire(new la("rotate",n)).fire(new la("rotateend",n)),o&&this.fire(new la("pitchstart",n)).fire(new la("pitch",n)).fire(new la("pitchend",n)),this.fire(new la("moveend",n))}calculateCameraOptionsFromTo(e,n,r,i=0){const a=Wg.fromLngLat(e,n),o=Wg.fromLngLat(r,i),s=o.x-a.x,l=o.y-a.y,c=o.z-a.z,u=Math.hypot(s,l,c);if(u===0)throw new Error("Can't calculate camera options with same From and To");const f=Math.hypot(s,l),h=this.transform.scaleZoom(this.transform.cameraToCenterDistance/u/this.transform.tileSize),d=Math.atan2(s,-l)*180/Math.PI;let p=Math.acos(f/u)*180/Math.PI;return p=c<0?90-p:90+p,{center:o.toLngLat(),zoom:h,pitch:p,bearing:d}}easeTo(e,n){var r;this._stop(!1,e.easeId),e=ll({offset:[0,0],duration:500,easing:NZ},e),(e.animate===!1||!e.essential&&Up.prefersReducedMotion)&&(e.duration=0);const i=this._getTransformForUpdate(),a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:s,f="padding"in e?e.padding:i.padding,h=La.convert(e.offset);let d=i.centerPoint.add(h);const p=i.pointLocation(d),{center:g,zoom:v}=i.getConstrained(Wa.convert(e.center||p),(r=e.zoom)!==null&&r!==void 0?r:a);this._normalizeCenter(g);const y=i.project(p),_=i.project(g).sub(y),E=i.zoomScale(v-a);let x,T;e.around&&(x=Wa.convert(e.around),T=i.locationPoint(x));const S={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||v!==a,this._rotating=this._rotating||o!==c,this._pitching=this._pitching||u!==s,this._padding=!i.isPaddingEqual(f),this._easeId=e.easeId,this._prepareEase(n,e.noMoveStart,S),this._ease(w=>{if(this._zooming&&(i.zoom=Lp.number(a,v,w)),this._rotating&&(i.bearing=Lp.number(o,c,w)),this._pitching&&(i.pitch=Lp.number(s,u,w)),this._padding&&(i.interpolatePadding(l,f,w),d=i.centerPoint.add(h)),x)i.setLocationAtPoint(x,T);else{const C=i.zoomScale(i.zoom-a),D=v>a?Math.min(2,E):Math.max(.5,E),L=Math.pow(D,1-w),B=i.unproject(y.add(_.mult(w*L)).mult(C));i.setLocationAtPoint(i.renderWorldCopies?B.wrap():B,d)}this._applyUpdatedTransform(i),this._fireMoveEvents(n)},w=>{this._afterEase(n,w)},e),this}_prepareEase(e,n,r={}){this._moving=!0,!n&&!r.moving&&this.fire(new la("movestart",e)),this._zooming&&!r.zooming&&this.fire(new la("zoomstart",e)),this._rotating&&!r.rotating&&this.fire(new la("rotatestart",e)),this._pitching&&!r.pitching&&this.fire(new la("pitchstart",e))}_getTransformForUpdate(){return this.transformCameraUpdate?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_applyUpdatedTransform(e){if(!this.transformCameraUpdate)return;const n=e.clone(),{center:r,zoom:i,pitch:a,bearing:o,elevation:s}=this.transformCameraUpdate(n);r&&(n.center=r),i!==void 0&&(n.zoom=i),a!==void 0&&(n.pitch=a),o!==void 0&&(n.bearing=o),s!==void 0&&(n.elevation=s),this.transform.apply(n)}_fireMoveEvents(e){this.fire(new la("move",e)),this._zooming&&this.fire(new la("zoom",e)),this._rotating&&this.fire(new la("rotate",e)),this._pitching&&this.fire(new la("pitch",e))}_afterEase(e,n){if(this._easeId&&n&&this._easeId===n)return;delete this._easeId;const r=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new la("zoomend",e)),i&&this.fire(new la("rotateend",e)),a&&this.fire(new la("pitchend",e)),this.fire(new la("moveend",e))}flyTo(e,n){var r;if(!e.essential&&Up.prefersReducedMotion){const M=DWt(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(M,n)}this.stop(),e=ll({offset:[0,0],speed:1.2,curve:1.42,easing:NZ},e);const i=this._getTransformForUpdate(),a=this.getZoom(),o=this.getBearing(),s=this.getPitch(),l=this.getPadding(),c="bearing"in e?this._normalizeBearing(e.bearing,o):o,u="pitch"in e?+e.pitch:s,f="padding"in e?e.padding:i.padding,h=La.convert(e.offset);let d=i.centerPoint.add(h);const p=i.pointLocation(d),{center:g,zoom:v}=i.getConstrained(Wa.convert(e.center||p),(r=e.zoom)!==null&&r!==void 0?r:a);this._normalizeCenter(g);const y=i.zoomScale(v-a),_=i.project(p),E=i.project(g).sub(_);let x=e.curve;const T=Math.max(i.width,i.height),S=T/y,w=E.mag();if("minZoom"in e){const M=wm(Math.min(e.minZoom,a,v),i.minZoom,i.maxZoom),k=T/i.zoomScale(M-a);x=Math.sqrt(k/w*2)}const C=x*x;function D(M){const k=(S*S-T*T+(M?-1:1)*C*C*w*w)/(2*(M?S:T)*C*w);return Math.log(Math.sqrt(k*k+1)-k)}function L(M){return(Math.exp(M)-Math.exp(-M))/2}function B(M){return(Math.exp(M)+Math.exp(-M))/2}function I(M){return L(M)/B(M)}const U=D(!1);let $=function(M){return B(U)/B(U+x*M)},X=function(M){return T*((B(U)*I(U+x*M)-L(U))/C)/w},N=(D(!0)-U)/x;if(Math.abs(w)<1e-6||!isFinite(N)){if(Math.abs(T-S)<1e-6)return this.easeTo(e,n);const M=S<T?-1:1;N=Math.abs(Math.log(S/T))/x,X=()=>0,$=k=>Math.exp(M*x*k)}if("duration"in e)e.duration=+e.duration;else{const M="screenSpeed"in e?+e.screenSpeed/x:+e.speed;e.duration=1e3*N/M}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=o!==c,this._pitching=u!==s,this._padding=!i.isPaddingEqual(f),this._prepareEase(n,!1),this._ease(M=>{const k=M*N,z=1/$(k);i.zoom=M===1?v:a+i.scaleZoom(z),this._rotating&&(i.bearing=Lp.number(o,c,M)),this._pitching&&(i.pitch=Lp.number(s,u,M)),this._padding&&(i.interpolatePadding(l,f,M),d=i.centerPoint.add(h));const j=M===1?g:i.unproject(_.add(E.mult(X(k))).mult(z));i.setLocationAtPoint(i.renderWorldCopies?j.wrap():j,d),this._applyUpdatedTransform(i),this._fireMoveEvents(n)},()=>{this._afterEase(n)},e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,n){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const i=this._onEaseEnd;delete this._onEaseEnd,i.call(this,n)}if(!e){var r;(r=this.handlers)===null||r===void 0||r.stop(!1)}return this}_ease(e,n,r){r.animate===!1||r.duration===0?(e(1),n()):(this._easeStart=Up.now(),this._easeOptions=r,this._onEaseFrame=e,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,n){e=rA(e,-180,180);const r=Math.abs(e-n);return Math.abs(e-360-n)<r&&(e-=360),Math.abs(e+360-n)<r&&(e+=360),e}_normalizeCenter(e){const n=this.transform;if(!n.renderWorldCopies||n.lngRange)return;const r=e.lng-n.center.lng;e.lng+=r>180?-360:r<-180?360:0}}class qne{constructor(e=0,n=0,r=0,i=0){if(Z(this,"top",void 0),Z(this,"bottom",void 0),Z(this,"left",void 0),Z(this,"right",void 0),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=r,this.right=i}interpolate(e,n,r){return n.top!=null&&e.top!=null&&(this.top=Lp.number(e.top,n.top,r)),n.bottom!=null&&e.bottom!=null&&(this.bottom=Lp.number(e.bottom,n.bottom,r)),n.left!=null&&e.left!=null&&(this.left=Lp.number(e.left,n.left,r)),n.right!=null&&e.right!=null&&(this.right=Lp.number(e.right,n.right,r)),this}getCenter(e,n){const r=wm((this.left+e-this.right)/2,0,e),i=wm((this.top+n-this.bottom)/2,0,n);return new La(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new qne(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const TL=85.051129;class Zne{constructor(e,n,r,i,a){Z(this,"tileSize",void 0),Z(this,"tileZoom",void 0),Z(this,"lngRange",void 0),Z(this,"latRange",void 0),Z(this,"scale",void 0),Z(this,"width",void 0),Z(this,"height",void 0),Z(this,"angle",void 0),Z(this,"rotationMatrix",void 0),Z(this,"pixelsToGLUnits",void 0),Z(this,"cameraToCenterDistance",void 0),Z(this,"mercatorMatrix",void 0),Z(this,"projMatrix",void 0),Z(this,"invProjMatrix",void 0),Z(this,"alignedProjMatrix",void 0),Z(this,"pixelMatrix",void 0),Z(this,"pixelMatrix3D",void 0),Z(this,"pixelMatrixInverse",void 0),Z(this,"glCoordMatrix",void 0),Z(this,"labelPlaneMatrix",void 0),Z(this,"minElevationForCurrentTile",void 0),Z(this,"_fov",void 0),Z(this,"_pitch",void 0),Z(this,"_zoom",void 0),Z(this,"_unmodified",void 0),Z(this,"_renderWorldCopies",void 0),Z(this,"_minZoom",void 0),Z(this,"_maxZoom",void 0),Z(this,"_minPitch",void 0),Z(this,"_maxPitch",void 0),Z(this,"_center",void 0),Z(this,"_elevation",void 0),Z(this,"_pixelPerMeter",void 0),Z(this,"_edgeInsets",void 0),Z(this,"_constraining",void 0),Z(this,"_posMatrixCache",void 0),Z(this,"_alignedPosMatrixCache",void 0),this.tileSize=512,this._renderWorldCopies=a===void 0?!0:!!a,this._minZoom=e||0,this._maxZoom=n||22,this._minPitch=r??0,this._maxPitch=i??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new Wa(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new qne,this._posMatrixCache={},this._alignedPosMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new Zne(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new La(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const n=-rA(e,-180,180)*Math.PI/180;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=z9e(),$9e(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const n=wm(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const n=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==n&&(this._unmodified=!1,this._zoom=n,this.tileZoom=Math.max(0,Math.floor(n)),this.scale=this.zoomScale(n),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,n,r){this._unmodified=!1,this._edgeInsets.interpolate(e,n,r),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const n=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,n)}resize(e,n){this.width=e,this.height=n,this.pixelsToGLUnits=[2/e,-2/n],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const n=wm(e.lat,-TL,TL);return new La(Ik(e.lng)*this.worldSize,Lk(n)*this.worldSize)}unproject(e){return new Wg(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){const e=this.pointLocation(this.getCameraPoint()),n=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter;return{lngLat:e,altitude:n+this.elevation}}setLocationAtPoint(e,n){const r=this.pointCoordinate(n),i=this.pointCoordinate(this.centerPoint),a=this.locationCoordinate(e),o=new Wg(a.x-(r.x-i.x),a.y-(r.y-i.y));this.center=this.coordinateLocation(o),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e){return this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}locationCoordinate(e){return Wg.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e){const r=[e.x,e.y,0,1],i=[e.x,e.y,1,1];fs(r,r,this.pixelMatrixInverse),fs(i,i,this.pixelMatrixInverse);const a=r[3],o=i[3],s=r[0]/a,l=i[0]/o,c=r[1]/a,u=i[1]/o,f=r[2]/a,h=i[2]/o,d=f===h?0:(0-f)/(h-f);return new Wg(Lp.number(s,l,d)/this.worldSize,Lp.number(c,u,d)/this.worldSize)}coordinatePoint(e,n=0,r=this.pixelMatrix){const i=[e.x*this.worldSize,e.y*this.worldSize,n,1];return fs(i,i,r),new La(i[0]/i[3],i[1]/i[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new Hg().extend(this.pointLocation(new La(0,e))).extend(this.pointLocation(new La(this.width,e))).extend(this.pointLocation(new La(this.width,this.height))).extend(this.pointLocation(new La(0,this.height)))}getMaxBounds(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new Hg([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-TL,TL])}customLayerMatrix(){return SP(this.mercatorMatrix)}getConstrained(e,n){n=wm(+n,this.minZoom,this.maxZoom);const r={center:new Wa(e.lng,e.lat),zoom:n};let i=this.lngRange;if(!this._renderWorldCopies&&i===null){const T=179.9999999999;i=[-T,T]}const a=this.tileSize*this.zoomScale(r.zoom);let o=0,s=a,l=0,c=a,u=0,f=0;const{x:h,y:d}=this.size;if(this.latRange){const T=this.latRange;o=Lk(T[1])*a,s=Lk(T[0])*a,s-o<d&&(u=d/(s-o))}i&&(l=rA(Ik(i[0])*a,0,a),c=rA(Ik(i[1])*a,0,a),c<l&&(c+=a),c-l<h&&(f=h/(c-l)));const{x:p,y:g}=this.project.call({worldSize:a},e);let v,y;const _=Math.max(f||0,u||0);if(_){const T=new La(f?(c+l)/2:p,u?(s+o)/2:g);return r.center=this.unproject.call({worldSize:a},T).wrap(),r.zoom+=this.scaleZoom(_),r}if(this.latRange){const T=d/2;g-T<o&&(y=o+T),g+T>s&&(y=s-T)}if(i){const T=(l+c)/2;let S=p;this._renderWorldCopies&&(S=rA(p,T-a/2,T+a/2));const w=h/2;S-w<l&&(v=l+w),S+w>c&&(v=c-w)}if(v!==void 0||y!==void 0){var E,x;const T=new La((E=v)!==null&&E!==void 0?E:p,(x=y)!==null&&x!==void 0?x:g);r.center=this.unproject.call({worldSize:a},T).wrap()}return r}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:n,zoom:r}=this.getConstrained(this.center,this.zoom);this.center=n,this.zoom=r,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this._fov/2,n=this.centerOffset,r=this.point.x,i=this.point.y;this.cameraToCenterDistance=.5/Math.tan(e)*this.height,this._pixelPerMeter=p6e(1,this.center.lat)*this.worldSize;let a=Pu(new Float64Array(16));Hf(a,a,[this.width/2,-this.height/2,1]),Vs(a,a,[1,-1,0]),this.labelPlaneMatrix=a,a=Pu(new Float64Array(16)),Hf(a,a,[1,-1,1]),Vs(a,a,[-1,-1,0]),Hf(a,a,[2/this.width,2/this.height,1]),this.glCoordMatrix=a;const o=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),s=Math.min(this.elevation,this.minElevationForCurrentTile),l=o-s*this._pixelPerMeter/Math.cos(this._pitch),c=s<0?l:o,u=Math.PI/2+this._pitch,f=this._fov*(.5+n.y/this.height),h=Math.sin(f)*c/Math.sin(wm(Math.PI-u-f,.01,Math.PI-.01)),d=this.getHorizon(),g=2*Math.atan(d/this.cameraToCenterDistance)*(.5+n.y/(d*2)),v=Math.sin(g)*c/Math.sin(wm(Math.PI-u-g,.01,Math.PI-.01)),y=Math.min(h,v),_=(Math.cos(Math.PI/2-this._pitch)*y+c)*1.01,E=this.height/50;a=new Float64Array(16),vQ(a,this._fov,this.width/this.height,E,_),a[8]=-n.x*2/this.width,a[9]=n.y*2/this.height,Hf(a,a,[1,-1,1]),Vs(a,a,[0,0,-this.cameraToCenterDistance]),Qm(a,a,this._pitch),eb(a,a,this.angle),Vs(a,a,[-r,-i,0]),this.mercatorMatrix=Hf([],a,[this.worldSize,this.worldSize,this.worldSize]),Hf(a,a,[1,1,this._pixelPerMeter]),this.pixelMatrix=qa(new Float64Array(16),this.labelPlaneMatrix,a),Vs(a,a,[0,0,-this.elevation]),this.projMatrix=a,this.invProjMatrix=qs([],a),this.pixelMatrix3D=qa(new Float64Array(16),this.labelPlaneMatrix,a);const x=this.width%2/2,T=this.height%2/2,S=Math.cos(this.angle),w=Math.sin(this.angle),C=r-Math.round(r)+S*x+w*T,D=i-Math.round(i)+S*T+w*x,L=new Float64Array(a);if(Vs(L,L,[C>.5?C-1:C,D>.5?D-1:D,0]),this.alignedProjMatrix=L,a=qs(new Float64Array(16),this.pixelMatrix),!a)throw new Error("failed to invert matrix");this.pixelMatrixInverse=a,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new La(0,0)),n=[e.x*this.worldSize,e.y*this.worldSize,0,1];return fs(n,n,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=this._pitch,n=Math.tan(e)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new La(0,n))}getCameraQueryGeometry(e){const n=this.getCameraPoint();if(e.length===1)return[e[0],n];{let r=n.x,i=n.y,a=n.x,o=n.y;for(const s of e)r=Math.min(r,s.x),i=Math.min(i,s.y),a=Math.max(a,s.x),o=Math.max(o,s.y);return[new La(r,i),new La(a,i),new La(a,o),new La(r,o),new La(r,i)]}}lngLatToCameraDepth(e,n){const r=this.locationCoordinate(e),i=[r.x*this.worldSize,r.y*this.worldSize,n,1];return fs(i,i,this.projMatrix),i[2]/i[3]}}class gN{constructor(e){Z(this,"_map",void 0),this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(La.convert(e))}}class qWt{constructor(e,n){Z(this,"_map",void 0),Z(this,"_tr",void 0),Z(this,"_el",void 0),Z(this,"_container",void 0),Z(this,"_enabled",void 0),Z(this,"_active",void 0),Z(this,"_startPos",void 0),Z(this,"_lastPos",void 0),Z(this,"_box",void 0),Z(this,"_clickTolerance",void 0),this._map=e,this._tr=new gN(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,n){this.isEnabled()&&e.shiftKey&&e.button===0&&(fi.disableDrag(),this._startPos=this._lastPos=n,this._active=!0)}mousemoveWindow(e,n){if(!this._active)return;const r=n;if(this._lastPos.equals(r)||!this._box&&r.dist(this._startPos)<this._clickTolerance)return;const i=this._startPos;this._lastPos=r,this._box||(this._box=fi.create("div","l7-boxzoom",this._container),this._container.classList.add("l7-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(i.x,r.x),o=Math.max(i.x,r.x),s=Math.min(i.y,r.y),l=Math.max(i.y,r.y);fi.setTransform(this._box,`translate(${a}px,${s}px)`),this._box.style.width=`${o-a}px`,this._box.style.height=`${l-s}px`}mouseupWindow(e,n){if(!this._active||e.button!==0)return;const r=this._startPos,i=n;if(this.reset(),fi.suppressClick(),r.x===i.x&&r.y===i.y)this._fireEvent("boxzoomcancel",e);else return this._map.fire(new la("boxzoomend",{originalEvent:e})),{cameraAnimation:a=>a.fitScreenCoordinates(r,i,this._tr.bearing,{linear:!0})}}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("l7-crosshair"),this._box&&(fi.remove(this._box),this._box=null),fi.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,n){return this._map.fire(new la(e,{originalEvent:n}))}}class ZWt{constructor(e){Z(this,"_tr",void 0),Z(this,"_enabled",void 0),Z(this,"_active",void 0),this._tr=new gN(e),this.reset()}reset(){this._active=!1}dblclick(e,n){return e.preventDefault(),{cameraAnimation:r=>{r.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(n)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class KWt{constructor(e,n){Z(this,"_options",void 0),Z(this,"_map",void 0),Z(this,"_container",void 0),Z(this,"_bypassKey",navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey"),Z(this,"_enabled",void 0),this._map=e,this._options=n,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("l7-cooperative-gestures"),this._container=fi.create("div","l7-cooperative-gesture-screen",e);const n=document.createElement("div");n.className="l7-desktop-message",n.textContent="Missing UI string",this._container.appendChild(n);const r=document.createElement("div");r.className="l7-mobile-message",r.textContent="Missing UI string",this._container.appendChild(r),this._container.setAttribute("aria-hidden","true")}_destoryUI(){this._container&&(fi.remove(this._container),this._map.getCanvasContainer().classList.remove("l7-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destoryUI()}isEnabled(){return this._enabled}touchmove(e){this._onCooperativeGesture(e.touches.length===1)}wheel(e){this._map.scrollZoom.isEnabled()&&this._onCooperativeGesture(!e[this._bypassKey])}_onCooperativeGesture(e){!this._enabled||!e||(this._container.classList.add("l7-show"),setTimeout(()=>{this._container.classList.remove("l7-show")},100))}}const QWt={panStep:100,bearingStep:15,pitchStep:10};class JWt{constructor(e){Z(this,"_tr",void 0),Z(this,"_enabled",void 0),Z(this,"_active",void 0),Z(this,"_panStep",void 0),Z(this,"_bearingStep",void 0),Z(this,"_pitchStep",void 0),Z(this,"_rotationDisabled",void 0),this._tr=new gN(e);const n=QWt;this._panStep=n.panStep,this._bearingStep=n.bearingStep,this._pitchStep=n.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let n=0,r=0,i=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:s=>{const l=this._tr;s.easeTo({duration:300,easeId:"keyboardHandler",easing:eVt,zoom:n?Math.round(l.zoom)+n*(e.shiftKey?2:1):l.zoom,bearing:l.bearing+r*this._bearingStep,pitch:l.pitch+i*this._pitchStep,offset:[-a*this._panStep,-o*this._panStep],center:l.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function eVt(t){return t*(2-t)}class tVt{constructor(e,n){Z(this,"_mousedownPos",void 0),Z(this,"_clickTolerance",void 0),Z(this,"_map",void 0),this._map=e,this._clickTolerance=n.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new zWt(e.type,this._map,e))}mousedown(e,n){return this._mousedownPos=n,this._firePreventable(new mm(e.type,this._map,e))}mouseup(e){this._map.fire(new mm(e.type,this._map,e))}click(e,n){this._mousedownPos&&this._mousedownPos.dist(n)>=this._clickTolerance||this._map.fire(new mm(e.type,this._map,e))}dblclick(e){return this._firePreventable(new mm(e.type,this._map,e))}mouseover(e){this._map.fire(new mm(e.type,this._map,e))}mouseout(e){this._map.fire(new mm(e.type,this._map,e))}touchstart(e){return this._firePreventable(new SL(e.type,this._map,e))}touchmove(e){this._map.fire(new SL(e.type,this._map,e))}touchend(e){this._map.fire(new SL(e.type,this._map,e))}touchcancel(e){this._map.fire(new SL(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class nVt{constructor(e){Z(this,"_map",void 0),Z(this,"_delayContextMenu",void 0),Z(this,"_ignoreContextMenu",void 0),Z(this,"_contextMenuEvent",void 0),this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new mm(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new mm("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new mm(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kne{constructor(e){Z(this,"contextmenu",void 0),Z(this,"mousedown",void 0),Z(this,"mousemoveWindow",void 0),Z(this,"mouseup",void 0),Z(this,"touchstart",void 0),Z(this,"touchmoveWindow",void 0),Z(this,"touchend",void 0),Z(this,"_clickTolerance",void 0),Z(this,"_moveFunction",void 0),Z(this,"_activateOnStart",void 0),Z(this,"_active",void 0),Z(this,"_enabled",void 0),Z(this,"_moved",void 0),Z(this,"_lastPoint",void 0),Z(this,"_moveStateManager",void 0),this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const n=this._moveFunction(...e);if(n.bearingDelta||n.pitchDelta||n.around||n.panDelta)return this._active=!0,n}dragStart(e,n){!this.isEnabled()||this._lastPoint||this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=n.length?n[0]:n,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,n){if(!this.isEnabled())return;const r=this._lastPoint;if(!r)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e)){this.reset(e);return}const i=n.length?n[0]:n;if(!(!this._moved&&i.dist(r)<this._clickTolerance))return this._moved=!0,this._lastPoint=i,this._move(r,i)}dragEnd(e){!this.isEnabled()||!this._lastPoint||this._moveStateManager.isValidEndEvent(e)&&(this._moved&&fi.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const rVt=0,iVt=2,aVt={[rVt]:1,[iVt]:2};function oVt(t,e){const n=aVt[e];return t.buttons===void 0||(t.buttons&n)!==n}class Qne{constructor(e){Z(this,"_eventButton",void 0),Z(this,"_correctEvent",void 0),this._correctEvent=e.checkCorrectEvent}startMove(e){const n=fi.mouseButton(e);this._eventButton=n}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!oVt(e,this._eventButton)}isValidEndEvent(e){return fi.mouseButton(e)===this._eventButton}}const Jne=0,g6e=2,ere=t=>{t.mousedown=t.dragStart,t.mousemoveWindow=t.dragMove,t.mouseup=t.dragEnd,t.contextmenu=e=>{e.preventDefault()}},sVt=({enable:t,clickTolerance:e})=>{const n=new Qne({checkCorrectEvent:r=>fi.mouseButton(r)===Jne&&!r.ctrlKey});return new Kne({clickTolerance:e,move:(r,i)=>({around:i,panDelta:i.sub(r)}),activateOnStart:!0,moveStateManager:n,enable:t,assignEvents:ere})},lVt=({enable:t,clickTolerance:e,bearingDegreesPerPixelMoved:n=.8})=>{const r=new Qne({checkCorrectEvent:i=>fi.mouseButton(i)===Jne&&i.ctrlKey||fi.mouseButton(i)===g6e});return new Kne({clickTolerance:e,move:(i,a)=>({bearingDelta:(a.x-i.x)*n}),moveStateManager:r,enable:t,assignEvents:ere})},cVt=({enable:t,clickTolerance:e,pitchDegreesPerPixelMoved:n=-.5})=>{const r=new Qne({checkCorrectEvent:i=>fi.mouseButton(i)===Jne&&i.ctrlKey||fi.mouseButton(i)===g6e});return new Kne({clickTolerance:e,move:(i,a)=>({pitchDelta:(a.y-i.y)*n}),moveStateManager:r,enable:t,assignEvents:ere})},zbe=4.000244140625,uVt=1/100,fVt=1/450,hVt=2;class dVt{constructor(e,n){Z(this,"_map",void 0),Z(this,"_tr",void 0),Z(this,"_enabled",void 0),Z(this,"_active",void 0),Z(this,"_zooming",void 0),Z(this,"_aroundCenter",void 0),Z(this,"_around",void 0),Z(this,"_aroundPoint",void 0),Z(this,"_type",void 0),Z(this,"_lastValue",void 0),Z(this,"_timeout",void 0),Z(this,"_finishTimeout",void 0),Z(this,"_lastWheelEvent",void 0),Z(this,"_lastWheelEventTime",void 0),Z(this,"_startZoom",void 0),Z(this,"_targetZoom",void 0),Z(this,"_delta",void 0),Z(this,"_easing",void 0),Z(this,"_prevEase",void 0),Z(this,"_frameId",void 0),Z(this,"_triggerRenderFrame",void 0),Z(this,"_defaultZoomRate",void 0),Z(this,"_wheelZoomRate",void 0),Z(this,"_onTimeout",r=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(r)}),this._map=e,this._tr=new gN(e),this._triggerRenderFrame=n,this._delta=0,this._defaultZoomRate=uVt,this._wheelZoomRate=fVt}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(e){if(!this.isEnabled()||this._map.cooperativeGestures.isEnabled()&&!e[this._map.cooperativeGestures._bypassKey])return;let n=e.deltaMode===WheelEvent.DOM_DELTA_LINE?e.deltaY*40:e.deltaY;const r=Up.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,n!==0&&n%zbe===0?this._type="wheel":n!==0&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),e.shiftKey&&n&&(n=n/4),this._type&&(this._lastWheelEvent=e,this._delta-=n,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const n=fi.mousePos(this._map.getCanvasContainer(),e),r=this._tr;n.y>r.transform.height/2-r.transform.getHorizon()?this._around=Wa.convert(this._aroundCenter?r.center:r.unproject(n)):this._around=Wa.convert(r.center),this._aroundPoint=r.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const s=this._type==="wheel"&&Math.abs(this._delta)>zbe?this._wheelZoomRate:this._defaultZoomRate;let l=hVt/(1+Math.exp(-Math.abs(this._delta*s)));this._delta<0&&l!==0&&(l=1/l);const c=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(c*l))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const n=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,r=this._startZoom,i=this._easing;let a=!1,o;if(this._type==="wheel"&&r&&i){const s=Math.min((Up.now()-this._lastWheelEventTime)/200,1),l=i(s);o=Lp.number(r,n,l),s<1?this._frameId||(this._frameId=!0):a=!0}else o=n,a=!0;return this._active=!0,a&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!a,zoomDelta:o-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let n=NZ;if(this._prevEase){const r=this._prevEase,i=(Up.now()-r.start)/r.duration,a=r.easing(i+.01)-r.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.27*.27-o*o);n=Vne(o,s,.25,1)}return this._prevEase={start:Up.now(),duration:e,easing:n},n}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class pVt{constructor(e,n){Z(this,"_clickZoom",void 0),Z(this,"_tapZoom",void 0),this._clickZoom=e,this._tapZoom=n}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class gVt{constructor(e,n,r){Z(this,"_el",void 0),Z(this,"_mousePan",void 0),Z(this,"_touchPan",void 0),Z(this,"_inertiaOptions",void 0),this._el=e,this._mousePan=n,this._touchPan=r}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("l7-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("l7-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class vVt{constructor(e,n,r){Z(this,"_mouseRotate",void 0),Z(this,"_mousePitch",void 0),Z(this,"_pitchWithRotate",void 0),this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class mVt{constructor(e,n,r,i){Z(this,"_el",void 0),Z(this,"_touchZoom",void 0),Z(this,"_touchRotate",void 0),Z(this,"_tapDragZoom",void 0),Z(this,"_rotationDisabled",void 0),Z(this,"_enabled",void 0),this._el=e,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("l7-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("l7-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}function LZ(t,e){if(t.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${t.length}, points ${e.length}`);const n={};for(let r=0;r<t.length;r++)n[t[r].identifier]=e[r];return n}function yVt(t){const e=new La(0,0);for(const n of t)e._add(n);return e.div(t.length)}const v6e=500,_Vt=500,tre=30;class bVt{constructor(e){Z(this,"numTouches",void 0),Z(this,"centroid",void 0),Z(this,"startTime",void 0),Z(this,"aborted",void 0),Z(this,"touches",void 0),this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=e.timeStamp),r.length===this.numTouches&&(this.centroid=yVt(n),this.touches=LZ(r,n)))}touchmove(e,n,r){if(this.aborted||!this.centroid)return;const i=LZ(r,n);for(const a in this.touches){const o=this.touches[a],s=i[a];(!s||s.dist(o)>tre)&&(this.aborted=!0)}}touchend(e,n,r){if((!this.centroid||e.timeStamp-this.startTime>_Vt)&&(this.aborted=!0),r.length===0){const i=!this.aborted&&this.centroid;if(this.reset(),i)return i}}}class kZ{constructor(e){Z(this,"singleTap",void 0),Z(this,"numTaps",void 0),Z(this,"lastTime",void 0),Z(this,"lastTap",void 0),Z(this,"count",void 0),this.singleTap=new bVt(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,n,r){this.singleTap.touchstart(e,n,r)}touchmove(e,n,r){this.singleTap.touchmove(e,n,r)}touchend(e,n,r){const i=this.singleTap.touchend(e,n,r);if(i){const a=e.timeStamp-this.lastTime<v6e,o=!this.lastTap||this.lastTap.dist(i)<tre;if((!a||!o)&&this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class EVt{constructor(){Z(this,"_enabled",void 0),Z(this,"_active",void 0),Z(this,"_swipePoint",void 0),Z(this,"_swipeTouch",void 0),Z(this,"_tapTime",void 0),Z(this,"_tapPoint",void 0),Z(this,"_tap",void 0),this._tap=new kZ({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,n,r){if(!this._swipePoint)if(!this._tapTime)this._tap.touchstart(e,n,r);else{const i=n[0],a=e.timeStamp-this._tapTime<v6e,o=this._tapPoint.dist(i)<tre;!a||!o?this.reset():r.length>0&&(this._swipePoint=i,this._swipeTouch=r[0].identifier)}}touchmove(e,n,r){if(!this._tapTime)this._tap.touchmove(e,n,r);else if(this._swipePoint){if(r[0].identifier!==this._swipeTouch)return;const i=n[0],a=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:a/128}}}touchend(e,n,r){if(this._tapTime)this._swipePoint&&r.length===0&&this.reset();else{const i=this._tap.touchend(e,n,r);i&&(this._tapTime=e.timeStamp,this._tapPoint=i)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xVt{constructor(e){Z(this,"_tr",void 0),Z(this,"_enabled",void 0),Z(this,"_active",void 0),Z(this,"_zoomIn",void 0),Z(this,"_zoomOut",void 0),this._tr=new gN(e),this._zoomIn=new kZ({numTouches:1,numTaps:2}),this._zoomOut=new kZ({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,n,r){this._zoomIn.touchstart(e,n,r),this._zoomOut.touchstart(e,n,r)}touchmove(e,n,r){this._zoomIn.touchmove(e,n,r),this._zoomOut.touchmove(e,n,r)}touchend(e,n,r){const i=this._zoomIn.touchend(e,n,r),a=this._zoomOut.touchend(e,n,r),o=this._tr;if(i)return this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:s=>s.easeTo({duration:300,zoom:o.zoom+1,around:o.unproject(i)},{originalEvent:e})};if(a)return this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:s=>s.easeTo({duration:300,zoom:o.zoom-1,around:o.unproject(a)},{originalEvent:e})}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class SVt{constructor(e,n){Z(this,"_enabled",void 0),Z(this,"_active",void 0),Z(this,"_touches",void 0),Z(this,"_clickTolerance",void 0),Z(this,"_sum",void 0),Z(this,"_map",void 0),this._clickTolerance=e.clickTolerance||1,this._map=n,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new La(0,0)}minTouchs(){return this._map.cooperativeGestures.isEnabled()?2:1}touchstart(e,n,r){return this._calculateTransform(e,n,r)}touchmove(e,n,r){if(!(!this._active||r.length<this.minTouchs()))return e.preventDefault(),this._calculateTransform(e,n,r)}touchend(e,n,r){this._calculateTransform(e,n,r),this._active&&r.length<this.minTouchs()&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,n,r){r.length>0&&(this._active=!0);const i=LZ(r,n),a=new La(0,0),o=new La(0,0);let s=0;for(const u in i){const f=i[u],h=this._touches[u];h&&(a._add(f),o._add(f.sub(h)),s++,i[u]=f)}if(this._touches=i,s<this.minTouchs()||!o.mag())return;const l=o.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:l}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class nre{constructor(){Z(this,"_enabled",void 0),Z(this,"_active",void 0),Z(this,"_firstTwoTouches",void 0),Z(this,"_vector",void 0),Z(this,"_startVector",void 0),Z(this,"_aroundCenter",void 0),this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,n,r){this._firstTwoTouches||r.length<2||(this._firstTwoTouches=[r[0].identifier,r[1].identifier],this._start([n[0],n[1]]))}touchmove(e,n,r){if(!this._firstTwoTouches)return;e.preventDefault();const[i,a]=this._firstTwoTouches,o=AL(r,n,i),s=AL(r,n,a);if(!o||!s)return;const l=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],l,e)}touchend(e,n,r){if(!this._firstTwoTouches)return;const[i,a]=this._firstTwoTouches,o=AL(r,n,i),s=AL(r,n,a);o&&s||(this._active&&fi.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function AL(t,e,n){for(let r=0;r<t.length;r++)if(t[r].identifier===n)return e[r]}const TVt=.1;function $be(t,e){return Math.log(t/e)/Math.LN2}class AVt extends nre{constructor(...e){super(...e),Z(this,"_distance",void 0),Z(this,"_startDistance",void 0)}reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,n){const r=this._distance;if(this._distance=e[0].dist(e[1]),!(!this._active&&Math.abs($be(this._distance,this._startDistance))<TVt))return this._active=!0,{zoomDelta:$be(this._distance,r),pinchAround:n}}}const wVt=25;function Hbe(t,e){return t.angleWith(e)*180/Math.PI}class OVt extends nre{constructor(...e){super(...e),Z(this,"_minDiameter",void 0)}reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,n,r){const i=this._vector;if(this._vector=e[0].sub(e[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Hbe(this._vector,i),pinchAround:n}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const n=Math.PI*this._minDiameter,r=wVt/n*360,i=Hbe(e,this._startVector);return Math.abs(i)<r}}function iV(t){return Math.abs(t.y)>Math.abs(t.x)}const CVt=100;class RVt extends nre{constructor(e){super(),Z(this,"_valid",void 0),Z(this,"_firstMove",void 0),Z(this,"_lastPoints",void 0),Z(this,"_map",void 0),Z(this,"_currentTouchCount",0),this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,n,r){super.touchstart(e,n,r),this._currentTouchCount=r.length}_start(e){this._lastPoints=e,iV(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,n,r){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const i=e[0].sub(this._lastPoints[0]),a=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(i,a,r.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(i.y+a.y)/2*-.5}):void 0}gestureBeginsVertically(e,n,r){if(this._valid!==void 0)return this._valid;const i=2,a=e.mag()>=i,o=n.mag()>=i;if(!a&&!o)return;if(!a||!o)return this._firstMove===void 0&&(this._firstMove=r),r-this._firstMove<CVt?void 0:!1;const s=e.y>0==n.y>0;return iV(e)&&iV(n)&&s}}const L5={linearity:.3,easing:Vne(0,0,.3,1)},MVt=ll({deceleration:2500,maxSpeed:1400},L5),PVt=ll({deceleration:20,maxSpeed:1400},L5),NVt=ll({deceleration:1e3,maxSpeed:360},L5),IVt=ll({deceleration:1e3,maxSpeed:90},L5);class LVt{constructor(e){Z(this,"_map",void 0),Z(this,"_inertiaBuffer",void 0),this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Up.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,n=Up.now(),r=160;for(;e.length>0&&n-e[0].time>r;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new La(0,0),pinchAround:void 0,around:void 0};for(const{settings:o}of this._inertiaBuffer)n.zoom+=o.zoomDelta||0,n.bearing+=o.bearingDelta||0,n.pitch+=o.pitchDelta||0,o.panDelta&&n.pan._add(o.panDelta),o.around&&(n.around=o.around),o.pinchAround&&(n.pinchAround=o.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,a={};if(n.pan.mag()){const o=OL(n.pan.mag(),i,ll({},MVt,e||{}));a.offset=n.pan.mult(o.amount/n.pan.mag()),a.center=this._map.transform.center,wL(a,o)}if(n.zoom){const o=OL(n.zoom,i,PVt);a.zoom=this._map.transform.zoom+o.amount,wL(a,o)}if(n.bearing){const o=OL(n.bearing,i,NVt);a.bearing=this._map.transform.bearing+wm(o.amount,-179,179),wL(a,o)}if(n.pitch){const o=OL(n.pitch,i,IVt);a.pitch=this._map.transform.pitch+o.amount,wL(a,o)}if(a.zoom||a.bearing){const o=n.pinchAround===void 0?n.around:n.pinchAround;a.around=o?this._map.unproject(o):this._map.getCenter()}return this.clear(),ll(a,{noMoveStart:!0})}}function wL(t,e){(!t.duration||t.duration<e.duration)&&(t.duration=e.duration,t.easing=e.easing)}function OL(t,e,n){const{maxSpeed:r,linearity:i,deceleration:a}=n,o=wm(t*i/(e/1e3),-r,r),s=Math.abs(o)/(a*i);return{easing:n.easing,duration:s*1e3,amount:o*(s/2)}}const CL=t=>t.zoom||t.drag||t.pitch||t.rotate;class kVt extends la{constructor(e,n){super(e),Z(this,"type","renderFrame"),Z(this,"timeStamp",void 0),this.timeStamp=n}}function aV(t){return t.panDelta&&t.panDelta.mag()||t.zoomDelta||t.bearingDelta||t.pitchDelta}class DVt{constructor(e,n){Z(this,"_map",void 0),Z(this,"_el",void 0),Z(this,"_handlers",void 0),Z(this,"_eventsInProgress",void 0),Z(this,"_frameId",void 0),Z(this,"_inertia",void 0),Z(this,"_bearingSnap",void 0),Z(this,"_handlersById",void 0),Z(this,"_updatingCamera",void 0),Z(this,"_changes",void 0),Z(this,"_zoom",void 0),Z(this,"_previousActiveHandlers",void 0),Z(this,"_listeners",void 0),Z(this,"handleWindowEvent",i=>{this.handleEvent(i,`${i.type}Window`)}),Z(this,"handleEvent",(i,a)=>{if(i.type==="blur"){this.stop(!0);return}this._updatingCamera=!0;const o=i.type==="renderFrame"?void 0:i,s={needsRenderFrame:!1},l={},c={},u=i.touches,f=u?this._getMapTouches(u):void 0,h=f?fi.touchPos(this._map.getCanvasContainer(),f):fi.mousePos(this._map.getCanvasContainer(),i);for(const{handlerName:g,handler:v,allowed:y}of this._handlers){if(!v.isEnabled())continue;let _;this._blockedByActive(c,y,g)?v.reset():v[a||i.type]&&(_=v[a||i.type](i,h,f),this.mergeHandlerResult(s,l,_,g,o),_&&_.needsRenderFrame&&this._triggerRenderFrame()),(_||v.isActive())&&(c[g]=v)}const d={};for(const g in this._previousActiveHandlers)c[g]||(d[g]=o);this._previousActiveHandlers=c,(Object.keys(d).length||aV(s))&&(this._changes.push([s,l,d]),this._triggerRenderFrame()),(Object.keys(c).length||aV(s))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:p}=s;p&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],p(this._map))}),this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new LVt(e),this._bearingSnap=n.bearingSnap||7,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(n);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[i,a,o]of this._listeners)fi.addEventListener(i,a,i===document?this.handleWindowEvent:this.handleEvent,o)}destroy(){for(const[e,n,r]of this._listeners)fi.removeEventListener(e,n,e===document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const n=this._map,r=n.getCanvasContainer();this._add("mapEvent",new tVt(n,e));const i=n.boxZoom=new qWt(n,e);this._add("boxZoom",i),e.interactive&&e.boxZoom&&i.enable();const a=n.cooperativeGestures=new KWt(n,e.cooperativeGestures);this._add("cooperativeGestures",a),e.cooperativeGestures&&a.enable();const o=new xVt(n),s=new ZWt(n);n.doubleClickZoom=new pVt(s,o),this._add("tapZoom",o),this._add("clickZoom",s),e.interactive&&e.doubleClickZoom&&n.doubleClickZoom.enable();const l=new EVt;this._add("tapDragZoom",l);const c=n.touchPitch=new RVt(n);this._add("touchPitch",c),e.interactive&&e.touchPitch&&n.touchPitch.enable(e.touchPitch);const u=lVt(e),f=cVt(e);n.dragRotate=new vVt(e,u,f),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",f,["mouseRotate"]),e.interactive&&e.dragRotate&&n.dragRotate.enable();const h=sVt(e),d=new SVt(e,n);n.dragPan=new gVt(r,h,d),this._add("mousePan",h),this._add("touchPan",d,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&n.dragPan.enable(e.dragPan);const p=new OVt,g=new AVt;n.touchZoomRotate=new mVt(r,g,p,l),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",g,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&n.touchZoomRotate.enable(e.touchZoomRotate);const v=n.scrollZoom=new dVt(n,()=>this._triggerRenderFrame());this._add("scrollZoom",v,["mousePan"]),e.interactive&&e.scrollZoom&&n.scrollZoom.enable(e.scrollZoom);const y=n.keyboard=new JWt(n);this._add("keyboard",y),e.interactive&&e.keyboard&&n.keyboard.enable(),this._add("blockableMapEvent",new nVt(n))}_add(e,n,r){this._handlers.push({handlerName:e,handler:n,allowed:r}),this._handlersById[e]=n}stop(e){if(!this._updatingCamera){for(const{handler:n}of this._handlers)n.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!CL(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,n,r){for(const i in e)if(i!==r&&(!n||n.indexOf(i)<0))return!0;return!1}_getMapTouches(e){const n=[];for(const r of e){const i=r.target;this._el.contains(i)&&n.push(r)}return n}mergeHandlerResult(e,n,r,i,a){if(!r)return;ll(e,r);const o={handlerName:i,originalEvent:r.originalEvent||a};r.zoomDelta!==void 0&&(n.zoom=o),r.panDelta!==void 0&&(n.drag=o),r.pitchDelta!==void 0&&(n.pitch=o),r.bearingDelta!==void 0&&(n.rotate=o)}_applyChanges(){const e={},n={},r={};for(const[i,a,o]of this._changes)i.panDelta&&(e.panDelta=(e.panDelta||new La(0,0))._add(i.panDelta)),i.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+i.pitchDelta),i.around!==void 0&&(e.around=i.around),i.pinchAround!==void 0&&(e.pinchAround=i.pinchAround),i.noInertia&&(e.noInertia=i.noInertia),ll(n,a),ll(r,o);this._updateMapTransform(e,n,r),this._changes=[]}_updateMapTransform(e,n,r){const i=this._map,a=i._getTransformForUpdate();if(!aV(e))return this._fireEvents(n,r,!0);const{panDelta:o,zoomDelta:s,bearingDelta:l,pitchDelta:c,pinchAround:u}=e;let{around:f}=e;u!==void 0&&(f=u),i._stop(!0),f=f||i.transform.centerPoint;const h=a.pointLocation(o?f.sub(o):f);l&&(a.bearing+=l),c&&(a.pitch+=c),s&&(a.zoom+=s),a.setLocationAtPoint(h,f),i._applyUpdatedTransform(a),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(n,r,!0)}_fireEvents(e,n,r){const i=CL(this._eventsInProgress),a=CL(e),o={};for(const f in e){const{originalEvent:h}=e[f];this._eventsInProgress[f]||(o[`${f}start`]=h),this._eventsInProgress[f]=e[f]}!i&&a&&this._fireEvent("movestart",a.originalEvent);for(const f in o)this._fireEvent(f,o[f]);a&&this._fireEvent("move",a.originalEvent);for(const f in e){const{originalEvent:h}=e[f];this._fireEvent(f,h)}const s={};let l;for(const f in this._eventsInProgress){const{handlerName:h,originalEvent:d}=this._eventsInProgress[f];this._handlersById[h].isActive()||(delete this._eventsInProgress[f],l=n[h]||d,s[`${f}end`]=l)}for(const f in s)this._fireEvent(f,s[f]);const c=CL(this._eventsInProgress);if(r&&((i||a)&&!c)){this._updatingCamera=!0;const f=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),h=d=>d!==0&&-this._bearingSnap<d&&d<this._bearingSnap;f&&(f.essential||!Up.prefersReducedMotion)?(h(f.bearing||this._map.getBearing())&&(f.bearing=0),f.freezeElevation=!0,this._map.easeTo(f,{originalEvent:l})):(this._map.fire(new la("moveend",{originalEvent:l})),h(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(e,n){this._map.fire(new la(e,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{delete this._frameId,this.handleEvent(new kVt("renderFrame",e)),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class BVt{constructor(){Z(this,"_queue",void 0),Z(this,"_id",void 0),Z(this,"_cleared",void 0),Z(this,"_currentlyRunning",void 0),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const n=++this._id;return this._queue.push({callback:e,id:n,cancelled:!1}),n}remove(e){const n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue;for(const i of r)if(i.id===e){i.cancelled=!0;return}}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const n=this._currentlyRunning=this._queue;this._queue=[];for(const r of n)if(!r.cancelled&&(r.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function FVt(t,e){var n=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(n||r)&&(e||(e=document),!!e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var a=e.body||e.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):e.documentElement.appendChild(i)}var o=e.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),i.appendChild(o),o}}FVt(`.l7-map {
  font:
    12px/20px 'Helvetica Neue',
    Arial,
    Helvetica,
    sans-serif;
  overflow: hidden;
  position: relative;
  -webkit-tap-highlight-color: rgb(0 0 0 / 0%);
}

.l7-canvas {
  position: absolute;
  left: 0;
  top: 0;
}

.l7-map:full-screen {
  width: 100%;
  height: 100%;
}

.l7-canary {
  background-color: salmon;
}

.l7-canvas-container.l7-interactive,
.l7-ctrl-group button.l7-ctrl-compass {
  cursor: grab;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-canvas-container.l7-interactive.l7-track-pointer {
  cursor: pointer;
}

.l7-canvas-container.l7-interactive:active,
.l7-ctrl-group button.l7-ctrl-compass:active {
  cursor: grabbing;
}

.l7-canvas-container.l7-touch-zoom-rotate,
.l7-canvas-container.l7-touch-zoom-rotate .l7-canvas {
  touch-action: pan-x pan-y;
}

.l7-canvas-container.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-drag-pan .l7-canvas {
  touch-action: pinch-zoom;
}

.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan,
.l7-canvas-container.l7-touch-zoom-rotate.l7-touch-drag-pan .l7-canvas {
  touch-action: none;
}

.l7-canvas-container.l7-touch-drag-pan.l7-cooperative-gestures,
.l7-canvas-container.l7-touch-drag-pan.l7-cooperative-gestures .l7-canvas {
  touch-action: pan-x pan-y;
}

.l7-cooperative-gesture-screen {
  background: rgba(0 0 0 / 40%);
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  padding: 1rem;
  font-size: 1.4em;
  line-height: 1.2;
  opacity: 0;
  pointer-events: none;
  transition: opacity 1s ease 1s;
  z-index: 99999;
}

.l7-cooperative-gesture-screen.l7-show {
  opacity: 1;
  transition: opacity 0.05s;
}

.l7-cooperative-gesture-screen .l7-mobile-message {
  display: none;
}

@media (hover: none), (width <= 480px) {
  .l7-cooperative-gesture-screen .l7-desktop-message {
    display: none;
  }

  .l7-cooperative-gesture-screen .l7-mobile-message {
    display: block;
  }
}

.l7-ctrl-top-left,
.l7-ctrl-top-right,
.l7-ctrl-bottom-left,
.l7-ctrl-bottom-right {
  position: absolute;
  pointer-events: none;
  z-index: 2;
}

.l7-ctrl-top-left {
  top: 0;
  left: 0;
}

.l7-ctrl-top-right {
  top: 0;
  right: 0;
}

.l7-ctrl-bottom-left {
  bottom: 0;
  left: 0;
}

.l7-ctrl-bottom-right {
  right: 0;
  bottom: 0;
}

.l7-ctrl {
  clear: both;
  pointer-events: auto;

  /* workaround for a Safari bug https://github.com/mapbox/mapbox-gl-js/issues/8185 */
  -webkit-transform: translate(0, 0);
          transform: translate(0, 0);
}

.l7-ctrl-top-left .l7-ctrl {
  margin: 10px 0 0 10px;
  float: left;
}

.l7-ctrl-top-right .l7-ctrl {
  margin: 10px 10px 0 0;
  float: right;
}

.l7-ctrl-bottom-left .l7-ctrl {
  margin: 0 0 10px 10px;
  float: left;
}

.l7-ctrl-bottom-right .l7-ctrl {
  margin: 0 10px 10px 0;
  float: right;
}

.l7-crosshair,
.l7-crosshair .l7-interactive,
.l7-crosshair .l7-interactive:active {
  cursor: crosshair;
}

.l7-boxzoom {
  position: absolute;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
  background: #fff;
  border: 2px dotted #202020;
  opacity: 0.5;
  z-index: 10;
}
`);const kk=-2,m6e=22,n_=0,y6e=60,RL=85,UVt={interactive:!0,bearingSnap:7,scrollZoom:!0,minZoom:kk,maxZoom:m6e,minPitch:n_,maxPitch:y6e,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,fadeDuration:300,clickTolerance:3,pitchWithRotate:!0};let jVt=class extends XWt{constructor(e){const n=ze(ze({},UVt),e);if(n.minZoom!=null&&n.maxZoom!=null&&n.minZoom>n.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(n.minPitch!=null&&n.maxPitch!=null&&n.minPitch>n.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(n.minPitch!=null&&n.minPitch<n_)throw new Error(`minPitch must be greater than or equal to ${n_}`);if(n.maxPitch!=null&&n.maxPitch>RL)throw new Error(`maxPitch must be less than or equal to ${RL}`);const r=new Zne(n.minZoom,n.maxZoom,n.minPitch,n.maxPitch,n.renderWorldCopies);if(super(r,{bearingSnap:n.bearingSnap}),Z(this,"_container",void 0),Z(this,"_canvasContainer",void 0),Z(this,"_interactive",void 0),Z(this,"_frameRequest",void 0),Z(this,"_loaded",void 0),Z(this,"_idleTriggered",!1),Z(this,"_fullyLoaded",void 0),Z(this,"_trackResize",void 0),Z(this,"_resizeObserver",void 0),Z(this,"_preserveDrawingBuffer",void 0),Z(this,"_failIfMajorPerformanceCaveat",void 0),Z(this,"_fadeDuration",void 0),Z(this,"_crossSourceCollisions",void 0),Z(this,"_crossFadingFactor",1),Z(this,"_collectResourceTiming",void 0),Z(this,"_renderTaskQueue",new BVt),Z(this,"_mapId",kWt()),Z(this,"_removed",void 0),Z(this,"_clickTolerance",void 0),Z(this,"version",void 0),Z(this,"mapSize",void 0),Z(this,"scrollZoom",void 0),Z(this,"boxZoom",void 0),Z(this,"dragRotate",void 0),Z(this,"dragPan",void 0),Z(this,"keyboard",void 0),Z(this,"doubleClickZoom",void 0),Z(this,"touchZoomRotate",void 0),Z(this,"touchPitch",void 0),Z(this,"cooperativeGestures",void 0),Z(this,"_onMapScroll",i=>{if(i.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}),this._interactive=n.interactive,this._trackResize=n.trackResize===!0,this._bearingSnap=n.bearingSnap,this._fadeDuration=n.fadeDuration,this._clickTolerance=n.clickTolerance,this.version=e.version,this.mapSize=e.mapSize,typeof n.container=="string"){if(this._container=document.getElementById(n.container),!this._container)throw new Error(`Container '${n.container}' not found.`)}else if(n.container instanceof HTMLElement)this._container=n.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(n.maxBounds&&this.setMaxBounds(n.maxBounds),this._setupContainer(),this.on("move",()=>this._update()).on("moveend",()=>this._update()).on("zoom",()=>this._update()).once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){let i=!1;const a=gs.throttle(o=>{this._trackResize&&!this._removed&&this.resize(o)._update()},50);this._resizeObserver=new ResizeObserver(o=>{if(!i){i=!0;return}a(o)}),this._resizeObserver.observe(this._container)}this.handlers=new DVt(this,n),this.jumpTo({center:n.center,zoom:n.zoom,bearing:n.bearing,pitch:n.pitch}),n.bounds&&(this.resize(),this.fitBounds(n.bounds,ll({},n.fitBoundsOptions,{duration:0}))),this.resize()}_getMapId(){return this._mapId}calculateCameraOptionsFromTo(e,n,r,i){return super.calculateCameraOptionsFromTo(e,n,r,i)}resize(e){var n;const r=this._containerDimensions(),i=r[0],a=r[1];this.transform.resize(i,a),(n=this._requestedCameraState)===null||n===void 0||n.resize(i,a);const o=!this._moving;return o&&(this.stop(),this.fire(new la("movestart",e)).fire(new la("move",e))),this.fire(new la("resize",e)),o&&this.fire(new la("moveend",e)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(e){return this.transform.setMaxBounds(e&&Hg.convert(e)),this._update()}setMinZoom(e){if(e=e??kk,e>=kk&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error(`minZoom must be between ${kk} and the current maxZoom, inclusive`)}getMinZoom(){return this.transform.minZoom}setMaxZoom(e){if(e=e??m6e,e>=this.transform.minZoom)return this.transform.maxZoom=e,this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(e){if(e=e??n_,e<n_)throw new Error(`minPitch must be greater than or equal to ${n_}`);if(e>=n_&&e<=this.transform.maxPitch)return this.transform.minPitch=e,this.getPitch()<e&&this.setPitch(e),this;throw new Error(`minPitch must be between ${n_} and the current maxPitch, inclusive`)}getMinPitch(){return this.transform.minPitch}setMaxPitch(e){if(e=e??y6e,e>RL)throw new Error(`maxPitch must be less than or equal to ${RL}`);if(e>=this.transform.minPitch)return this.transform.maxPitch=e,this.getPitch()>e&&this.setPitch(e),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){this.transform.renderWorldCopies=e}project(e){return this.transform.locationPoint(Wa.convert(e))}unproject(e){return this.transform.pointLocation(La.convert(e))}isMoving(){var e;return this._moving||((e=this.handlers)===null||e===void 0?void 0:e.isMoving())}isZooming(){var e;return this._zooming||((e=this.handlers)===null||e===void 0?void 0:e.isZooming())}isRotating(){var e;return this._rotating||((e=this.handlers)===null||e===void 0?void 0:e.isRotating())}on(e,n){return super.on(e,n)}once(e,n){return super.once(e,n)}off(e,n){return super.off(e,n)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}_containerDimensions(){let e=0,n=0;return this._container&&(e=this._container.clientWidth||400,n=this._container.clientHeight||300),[e,n]}_setupContainer(){const e=this._container;e.classList.add("l7-map");const n=this._canvasContainer=fi.create("div","l7-canvas-container",e);this._interactive&&n.classList.add("l7-interactive"),this._container.addEventListener("scroll",this._onMapScroll,!1)}_update(){return this.triggerRepaint(),this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_render(e){if(this._renderTaskQueue.run(e),!this._removed)return this.fire(new la("render")),this.isMoving()||this.fire(new la("idle")),this}remove(){var e;this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.handlers.destroy(),delete this.handlers,(e=this._resizeObserver)===null||e===void 0||e.disconnect(),fi.remove(this._canvasContainer),this._container.classList.remove("l7-map"),this._removed=!0,this.fire(new la("remove"))}triggerRepaint(){this._frameRequest||(this._frameRequest=new AbortController,Up.frameAsync(this._frameRequest).then(e=>{this._frameRequest=null,this._render(e)}).catch(()=>{}))}getCameraTargetElevation(){return this.transform.elevation}};const zVt=12;class $Vt{constructor(e){Z(this,"map",void 0),Z(this,"simpleMapCoord",new Xne),Z(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Z(this,"config",void 0),Z(this,"configService",void 0),Z(this,"coordinateSystemService",void 0),Z(this,"eventEmitter",void 0),Z(this,"markerContainer",void 0),Z(this,"mapContainer",void 0),Z(this,"cameraChangedCallback",void 0),this.config=e.mapConfig,this.configService=e.globalConfigService,this.coordinateSystemService=e.coordinateSystemService,this.eventEmitter=new ku.EventEmitter}onCameraChanged(e){this.cameraChangedCallback=e}updateView(e){var n;this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:e.bearing,center:e.center,viewportHeight:e.viewportHeight,pitch:e.pitch,viewportWidth:e.viewportWidth,zoom:e.zoom}),this.updateCoordinateSystemService(),(n=this.cameraChangedCallback)===null||n===void 0||n.call(this,this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:e=!0}=this.config;this.viewport.getZoom()>zVt&&e?this.coordinateSystemService.setCoordinateSystem(sw.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(sw.LNGLAT)}creatMapContainer(e){let n;return typeof e=="string"?n=document.getElementById(e):n=e,n}getMapStyleValue(e){var n;return(n=this.getMapStyleConfig()[e])!==null&&n!==void 0?n:e}setBgColor(e){this.bgColor=e}getMapContainer(){return this.mapContainer}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}emit(e,...n){this.eventEmitter.emit(e,...n)}once(e,n){this.eventEmitter.once(e,n)}meterToCoord(e,n){return 1}destroy(){this.eventEmitter.removeAllListeners()}}function lR(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Dk(t,e){var n=fs([],e,t);return g$e(n,n,1/n[3]),n}function Bx(t,e){if(!t)throw new Error(e||"viewport-mercator-project: assertion failed.")}var Vg=Math.PI,_6e=Vg/4,z_=Vg/180,Gbe=180/Vg,rre=512,Wbe=4003e4,HVt=1.5;function b6e(t){return Math.pow(2,t)}function oV(t,e){var n=ir(t,2),r=n[0],i=n[1];Bx(Number.isFinite(r)&&Number.isFinite(e)),Bx(Number.isFinite(i)&&i>=-90&&i<=90,"invalid latitude"),e*=rre;var a=r*z_,o=i*z_,s=e*(a+Vg)/(2*Vg),l=e*(Vg-Math.log(Math.tan(_6e+o*.5)))/(2*Vg);return[s,l]}function Vbe(t,e){var n=ir(t,2),r=n[0],i=n[1];e*=rre;var a=r/e*(2*Vg)-Vg,o=2*(Math.atan(Math.exp(Vg-i/e*(2*Vg)))-_6e);return[a*Gbe,o*Gbe]}function GVt(t){var e=t.latitude,n=t.longitude,r=t.zoom,i=t.scale,a=t.highPrecision,o=a===void 0?!1:a;i=i!==void 0?i:b6e(r),Bx(Number.isFinite(e)&&Number.isFinite(n)&&Number.isFinite(i));var s={},l=rre*i,c=Math.cos(e*z_),u=l/360,f=u/c,h=l/Wbe/c;if(s.pixelsPerMeter=[h,-h,h],s.metersPerPixel=[1/h,-1/h,1/h],s.pixelsPerDegree=[u,-f,h],s.degreesPerPixel=[1/u,-1/f,1/h],o){var d=z_*Math.tan(e*z_)/c,p=u*d/2,g=l/Wbe*d,v=g/f*h;s.pixelsPerDegree2=[0,-p,g],s.pixelsPerMeter2=[v,0,v]}return s}function WVt(t){var e=t.height,n=t.pitch,r=t.bearing,i=t.altitude,a=t.center,o=a===void 0?null:a,s=lR();return Vs(s,s,[0,0,-i]),Hf(s,s,[1,1,1/e]),Qm(s,s,-n*z_),eb(s,s,r*z_),Hf(s,s,[1,-1,1]),o&&Vs(s,s,h$e([],o)),s}function VVt(t){var e=t.width,n=t.height,r=t.altitude,i=r===void 0?HVt:r,a=t.pitch,o=a===void 0?0:a,s=t.nearZMultiplier,l=s===void 0?1:s,c=t.farZMultiplier,u=c===void 0?1:c,f=o*z_,h=Math.atan(.5/i),d=Math.sin(h)*i/Math.sin(Math.PI/2-f-h),p=Math.cos(Math.PI/2-f)*d+i;return{fov:2*Math.atan(n/2/i),aspect:e/n,focalDistance:i,near:l,far:p*u}}function YVt(t){var e=t.width,n=t.height,r=t.pitch,i=t.altitude,a=t.nearZMultiplier,o=t.farZMultiplier,s=VVt({width:e,height:n,altitude:i,pitch:r,nearZMultiplier:a,farZMultiplier:o}),l=s.fov,c=s.aspect,u=s.near,f=s.far,h=vQ([],l,c,u,f);return h}function XVt(t,e){var n=ir(t,3),r=n[0],i=n[1],a=n[2],o=a===void 0?0:a;return Bx(Number.isFinite(r)&&Number.isFinite(i)&&Number.isFinite(o)),Dk(e,[r,i,o,1])}function E6e(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=ir(t,3),i=r[0],a=r[1],o=r[2];if(Bx(Number.isFinite(i)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(o)){var s=Dk(e,[i,a,o,1]);return s}var l=Dk(e,[i,a,0,1]),c=Dk(e,[i,a,1,1]),u=l[2],f=c[2],h=u===f?0:((n||0)-u)/(f-u);return _$e([],l,c,h)}var Ybe=lR(),qVt=(function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width,r=e.height,i=e.viewMatrix,a=i===void 0?Ybe:i,o=e.projectionMatrix,s=o===void 0?Ybe:o;it(this,t),this.width=n||1,this.height=r||1,this.scale=1,this.pixelsPerMeter=1,this.viewMatrix=a,this.projectionMatrix=s;var l=lR();qa(l,l,this.projectionMatrix),qa(l,l,this.viewMatrix),this.viewProjectionMatrix=l;var c=lR();Hf(c,c,[this.width/2,-this.height/2,1]),Vs(c,c,[1,-1,0]),qa(c,c,this.viewProjectionMatrix);var u=qs(lR(),c);if(!u)throw new Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=c,this.pixelUnprojectionMatrix=u,this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}return at(t,[{key:"equals",value:function(n){return n instanceof t?n.width===this.width&&n.height===this.height&&_Y(n.projectionMatrix,this.projectionMatrix)&&_Y(n.viewMatrix,this.viewMatrix):!1}},{key:"project",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.topLeft,a=i===void 0?!0:i,o=this.projectPosition(n),s=XVt(o,this.pixelProjectionMatrix),l=ir(s,2),c=l[0],u=l[1],f=a?u:this.height-u;return n.length===2?[c,f]:[c,f,s[2]]}},{key:"unproject",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.topLeft,a=i===void 0?!0:i,o=r.targetZ,s=ir(n,3),l=s[0],c=s[1],u=s[2],f=a?c:this.height-c,h=o&&o*this.pixelsPerMeter,d=E6e([l,f,u],this.pixelUnprojectionMatrix,h),p=this.unprojectPosition(d),g=ir(p,3),v=g[0],y=g[1],_=g[2];return Number.isFinite(u)?[v,y,_]:Number.isFinite(o)?[v,y,o]:[v,y]}},{key:"projectPosition",value:function(n){var r=this.projectFlat(n),i=ir(r,2),a=i[0],o=i[1],s=(n[2]||0)*this.pixelsPerMeter;return[a,o,s]}},{key:"unprojectPosition",value:function(n){var r=this.unprojectFlat(n),i=ir(r,2),a=i[0],o=i[1],s=(n[2]||0)/this.pixelsPerMeter;return[a,o,s]}},{key:"projectFlat",value:function(n){return arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale,n}},{key:"unprojectFlat",value:function(n){return arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale,n}}]),t})();function ZVt(t){var e=t.width,n=t.height,r=t.bounds,i=t.minExtent,a=i===void 0?0:i,o=t.maxZoom,s=o===void 0?24:o,l=t.padding,c=l===void 0?0:l,u=t.offset,f=u===void 0?[0,0]:u,h=ir(r,2),d=ir(h[0],2),p=d[0],g=d[1],v=ir(h[1],2),y=v[0],_=v[1];if(Number.isFinite(c)){var E=c;c={top:E,bottom:E,left:E,right:E}}else Bx(Number.isFinite(c.top)&&Number.isFinite(c.bottom)&&Number.isFinite(c.left)&&Number.isFinite(c.right));var x=new DZ({width:e,height:n,longitude:0,latitude:0,zoom:0}),T=x.project([p,_]),S=x.project([y,g]),w=[Math.max(Math.abs(S[0]-T[0]),a),Math.max(Math.abs(S[1]-T[1]),a)],C=[e-c.left-c.right-Math.abs(f[0])*2,n-c.top-c.bottom-Math.abs(f[1])*2];Bx(C[0]>0&&C[1]>0);var D=C[0]/w[0],L=C[1]/w[1],B=(c.right-c.left)/2/D,I=(c.bottom-c.top)/2/L,U=[(S[0]+T[0])/2+B,(S[1]+T[1])/2+I],$=x.unproject(U),X=x.zoom+Math.log2(Math.abs(Math.min(D,L)));return{longitude:$[0],latitude:$[1],zoom:Math.min(X,s)}}var DZ=(function(t){Sr(e,t);function e(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=r.width,a=r.height,o=r.latitude,s=o===void 0?0:o,l=r.longitude,c=l===void 0?0:l,u=r.zoom,f=u===void 0?0:u,h=r.pitch,d=h===void 0?0:h,p=r.bearing,g=p===void 0?0:p,v=r.altitude,y=v===void 0?1.5:v,_=r.nearZMultiplier,E=r.farZMultiplier;it(this,e),i=i||1,a=a||1;var x=b6e(f);y=Math.max(.75,y);var T=oV([c,s],x);T[2]=0;var S=YVt({width:i,height:a,pitch:d,altitude:y,nearZMultiplier:_||1/a,farZMultiplier:E||1.01}),w=WVt({height:a,center:T,pitch:d,bearing:g,altitude:y});return n=UOe(this,vx(e).call(this,{width:i,height:a,viewMatrix:w,projectionMatrix:S})),n.latitude=s,n.longitude=c,n.zoom=f,n.pitch=d,n.bearing=g,n.altitude=y,n.scale=x,n.center=T,n.pixelsPerMeter=GVt(iC(iC(n))).pixelsPerMeter[2],Object.freeze(iC(iC(n))),n}return at(e,[{key:"projectFlat",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return oV(r,i)}},{key:"unprojectFlat",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.scale;return Vbe(r,i)}},{key:"getMapCenterByLngLatPosition",value:function(r){var i=r.lngLat,a=r.pos,o=E6e(a,this.pixelUnprojectionMatrix),s=oV(i,this.scale),l=h_([],s,y$e([],o)),c=h_([],this.center,l);return Vbe(c,this.scale)}},{key:"getLocationAtPoint",value:function(r){var i=r.lngLat,a=r.pos;return this.getMapCenterByLngLatPosition({lngLat:i,pos:a})}},{key:"fitBounds",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.width,o=this.height,s=ZVt(Object.assign({width:a,height:o,bounds:r},i)),l=s.longitude,c=s.latitude,u=s.zoom;return new e({width:a,height:o,longitude:l,latitude:c,zoom:u})}}]),e})(qVt);class rP{constructor(){Z(this,"viewport",new DZ)}syncWithMapCamera(e){const{center:n,zoom:r,pitch:i,bearing:a,viewportHeight:o,viewportWidth:s}=e,l={width:this.viewport.width,height:this.viewport.height,longitude:this.viewport.center[0],latitude:this.viewport.center[1],zoom:this.viewport.zoom,pitch:this.viewport.pitch,bearing:this.viewport.bearing};this.viewport=new DZ(ze(ze({},l),{},{width:s,height:o,longitude:n&&n[0],latitude:n&&n[1],zoom:r,pitch:i,bearing:a}))}getZoom(){return this.viewport.zoom}getZoomScale(){return Math.pow(2,this.getZoom())}getCenter(){return[this.viewport.longitude,this.viewport.latitude]}getProjectionMatrix(){return this.viewport.projectionMatrix}getModelMatrix(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}getViewMatrix(){return this.viewport.viewMatrix}getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}getViewProjectionMatrixUncentered(){return this.viewport.viewProjectionMatrix}getFocalDistance(){return 1}projectFlat(e,n){return this.viewport.projectFlat(e,n)}}let x6e=(function(t){return t.GAODE="GAODE",t.MAPBOX="MAPBOX",t.DEFAULT="DEFAUlTMAP",t.SIMPLE="SIMPLE",t.GLOBEL="GLOBEL",t})({});function cF(t={}){const e={top:0,right:0,bottom:0,left:0};if(typeof t=="number")return{top:t,right:t,bottom:t,left:t};if(Array.isArray(t)){if(t.length===4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]}}return ze(ze({},e),t)}const KVt={normal:"amap://styles/normal",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true",fresh:"amap://styles/fresh",grey:"amap://styles/grey",graffiti:"amap://styles/graffiti",macaron:"amap://styles/macaron",darkblue:"amap://styles/darkblue",wine:"amap://styles/wine"},QVt=["id","style","minZoom","maxZoom","token","mapInstance","plugin"];function JVt(t,e){var n=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(n||r)&&(e||(e=document),!!e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var a=e.body||e.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):e.documentElement.appendChild(i)}var o=e.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),i.appendChild(o),o}}JVt(`.amap-logo {
  display: none !important;
}

.amap-copyright {
  display: none !important;
}

.amap-overlays {
  z-index: 3 !important;
}
`);const eYt="2.0",Xbe="f59bcf249433f8b05caaee19f349b3d7",wE=1;window.forceWebGL=!0;const qbe={contextmenu:"rightclick",camerachange:"viewchange"};let tYt=class extends $Vt{constructor(...e){super(...e),Z(this,"viewport",new rP),Z(this,"version",x6e.GAODE),Z(this,"handleCameraChanged",()=>{const n=this.getViewState();this.updateView(n)})}getType(){return"amap"}init(){var e=this;return kt(function*(){const n=e.config,{id:r,style:i="light",minZoom:a=0,maxZoom:o=24,token:s=Xbe,mapInstance:l,plugin:c=[]}=n,u=Ro(n,QVt);if(window.AMap||l||(c.push("Map3D"),yield MWt.load({key:s,version:eYt,plugins:c})),l)e.map=l,e.mapContainer=e.map.getContainer(),e.map.on("viewchange",e.handleCameraChanged);else{const f=ze({mapStyle:e.getMapStyleValue(i),zooms:[a,o],viewMode:"3D"},u);if(f.zoom&&(f.zoom+=wE),s===Xbe&&(window._AMapSecurityConfig={securityJsCode:"2653011adeb04230b3a26cc9a780a800"},console.warn(`%c${e.configService.getSceneWarninfo("MapToken")}!`,"color: #873bf4;font-weigh:900;font-size: 16px;")),!r)throw Error("No container id specified");window.forceWebGL=!0,e.mapContainer=e.creatMapContainer(r);const h=new AMap.Map(e.mapContainer,f);e.map=h,h.on("viewchange",e.handleCameraChanged)}e.syncInitViewPort()})()}syncInitViewPort(){const e=this.getViewState();this.updateView(e)}getViewState(){const{center:e,zoom:n}=nYt(this.map);return{center:e,viewportWidth:this.map.getContainer().clientWidth,viewportHeight:this.map.getContainer().clientHeight,bearing:-this.map.getRotation(),pitch:this.map.getPitch(),zoom:n-wE}}creatMapContainer(e){const n=super.creatMapContainer(e),r=document.createElement("div");return r.style.cssText+=`
       position: absolute;
       top: 0;
       height: 100%;
       width: 100%;
     `,r.id=gs.uniqueId("l7_amap_div"),n.appendChild(r),r}getContainer(){return this.map.getContainer()}addMarkerContainer(){if(!this.map)return;const e=this.map.getContainer();if(e!==null){const n=e.getElementsByClassName("amap-maps")[0];n.style.zIndex="auto",this.markerContainer=is("div","l7-marker-container2",n)}}getMarkerContainer(){return this.markerContainer}getCanvasOverlays(){var e;return(e=this.mapContainer)===null||e===void 0?void 0:e.querySelector(".amap-overlays")}on(e,n){Nx.indexOf(e)!==-1?this.eventEmitter.on(e,n):this.map.on(qbe[e]||e,n)}off(e,n){Nx.indexOf(e)!==-1?this.eventEmitter.off(e,n):this.map.off(qbe[e]||e,n)}getSize(){const e=this.map.getSize();return[e.getWidth(),e.getHeight()]}getMinZoom(){return this.map.getZooms()[0]-wE}getMaxZoom(){return this.map.getZooms()[1]-wE}getZoom(){return this.map.getZoom()-wE}getCenter(e){if(e!=null&&e.padding){const r=this.getCenter(),i=cF(e.padding),a=this.lngLatToPixel([r.lng,r.lat]),o=[(i.right-i.left)/2,(i.bottom-i.top)/2];return this.pixelToLngLat([a.x-o[0],a.y-o[1]])}const n=this.map.getCenter();return{lng:n.getLng(),lat:n.getLat()}}getPitch(){return this.map.getPitch()}getRotation(){return 360-this.map.getRotation()}getBounds(){const e=this.map.getBounds(),n=e.getNorthEast(),r=e.getSouthWest(),i=this.getCenter(),a=i.lng>n.getLng()||i.lng<r.getLng()?180-n.getLng():n.getLng();return[[i.lng<r.getLng()?r.getLng()-180:r.getLng(),r.getLat()],[a,n.getLat()]]}getMapContainer(){return this.mapContainer}getMapCanvasContainer(){var e;return(e=this.map.getContainer())===null||e===void 0?void 0:e.getElementsByClassName("amap-maps")[0]}getMapStyleConfig(){return KVt}getMapStyleValue(e){return this.getMapStyleConfig()[e]||e}getMapStyle(){return this.map.getMapStyle()}setMapStyle(e){this.map.setMapStyle(this.getMapStyleValue(e))}setRotation(e){return this.map.setRotation(e)}zoomIn(){this.map.zoomIn()}zoomOut(){this.map.zoomOut()}panTo(e){this.map.panTo(e)}panBy(e=0,n=0){this.map.panBy(e,n)}fitBounds(e){this.map.setBounds(new AMap.Bounds([e[0][0],e[0][1],e[1][0],e[1][1]]),!0)}setZoomAndCenter(e,n){this.map.setZoomAndCenter(e+wE,n)}setCenter(e,n){if(n!=null&&n.padding){const r=cF(n.padding),i=this.lngLatToPixel(e),a=[(r.right-r.left)/2,(r.bottom-r.top)/2],o=this.pixelToLngLat([i.x+a[0],i.y+a[1]]);this.map.setCenter([o.lng,o.lat])}else this.map.setCenter(e)}setPitch(e){return this.map.setPitch(e)}setZoom(e){return this.map.setZoom(e+wE)}setMaxZoom(e){throw new Error("Method not implemented.")}setMinZoom(e){throw new Error("Method not implemented.")}setMapStatus(e){this.map.setStatus(e)}meterToCoord(e,n){const r=AMap.GeometryUtil.distance(new AMap.LngLat(...e),new AMap.LngLat(...n)),[i,a]=pW(...e),[o,s]=pW(...n);return Math.sqrt(Math.pow(i-o,2)+Math.pow(a-s,2))/r}pixelToLngLat(e){const n=this.map.pixelToLngLat(new AMap.Pixel(e[0],e[1]));return{lng:n.getLng(),lat:n.getLat()}}lngLatToPixel(e){const n=this.map.lnglatToPixel(e);return{x:n.getX(),y:n.getY()}}containerToLngLat(e){const n=new AMap.Pixel(e[0],e[1]),r=this.map.containerToLngLat(n);return{lng:r?.getLng(),lat:r?.getLat()}}lngLatToContainer(e){const n=this.map.lngLatToContainer(e);return{x:n.getX(),y:n.getY()}}lngLatToMercator([e,n],r){const[i,a]=pW(e,n);return{x:i,y:a,z:r}}getModelMatrix(e,n,r,i=[1,1,1]){const a=this.viewport.projectFlat(e),o=Zr();return Vs(o,o,yr(a[0],a[1],n)),Hf(o,o,yr(i[0],i[1],i[2])),Qm(o,o,r[0]),Dy(o,o,r[1]),eb(o,o,r[2]),o}exportMap(e){var n;const r=(n=this.getContainer())===null||n===void 0?void 0:n.getElementsByClassName("amap-layer")[0];if(console.log("renderCanvas",r),!r)throw new Error("");return e==="jpg"?r?.toDataURL("image/jpeg"):r?.toDataURL("image/png")}destroy(){var e;super.destroy(),(e=this.mapContainer)===null||e===void 0||(e=e.parentNode)===null||e===void 0||e.removeChild(this.mapContainer),delete window.initAMap;const n=document.getElementById("amap-script");n&&document.head.removeChild(n),this.map.destroy()}};function nYt(t){const e=t._view.getOptions(),n=e.center,r=e.zoom;return{center:n,zoom:r}}class ire extends I5{getServiceConstructor(){return tYt}}const rYt={light:"mapbox://styles/zcxduo/ck2ypyb1r3q9o1co1766dex29",dark:"mapbox://styles/zcxduo/ck241p6413s0b1cpayzldv7x7",normal:"mapbox://styles/mapbox/streets-v11",blank:{version:8,sources:{},layers:[{id:"background",type:"background",layout:{visibility:"none"}}]}},Zbe={mapmove:"move",camerachange:"move",zoomchange:"zoom",dragging:"drag"},iYt=12;class are{constructor(e){Z(this,"version","DEFAUlTMAP"),Z(this,"map",void 0),Z(this,"simpleMapCoord",new Xne),Z(this,"bgColor","rgba(0.0, 0.0, 0.0, 0.0)"),Z(this,"config",void 0),Z(this,"configService",void 0),Z(this,"coordinateSystemService",void 0),Z(this,"eventEmitter",void 0),Z(this,"markerContainer",void 0),Z(this,"cameraChangedCallback",void 0),Z(this,"$mapContainer",void 0),Z(this,"handleCameraChanged",n=>{const{lat:r,lng:i}=this.map.getCenter();this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:this.map.getBearing(),center:[i,r],viewportHeight:this.map.transform.height,pitch:this.map.getPitch(),viewportWidth:this.map.transform.width,zoom:this.map.getZoom(),cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}),this.config=e.mapConfig,this.configService=e.globalConfigService,this.coordinateSystemService=e.coordinateSystemService,this.eventEmitter=new ku.EventEmitter}setBgColor(e){this.bgColor=e}addMarkerContainer(){const e=this.map.getCanvasContainer();this.markerContainer=is("div","l7-marker-container",e),this.markerContainer.setAttribute("tabindex","-1")}getMarkerContainer(){return this.markerContainer}getOverlayContainer(){}getCanvasOverlays(){}on(e,n){Nx.indexOf(e)!==-1?this.eventEmitter.on(e,n):this.map.on(Zbe[e]||e,n)}off(e,n){this.map.off(Zbe[e]||e,n),this.eventEmitter.off(e,n)}getContainer(){return this.map.getContainer()}getMapCanvasContainer(){return this.map.getCanvasContainer()}getSize(){if(this.version==="SIMPLE")return this.simpleMapCoord.getSize();const e=this.map.transform;return[e.width,e.height]}getType(){return"default"}getZoom(){return this.map.getZoom()}setZoom(e){return this.map.setZoom(e)}getCenter(){return this.map.getCenter()}setCenter(e){this.map.setCenter(e)}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getBearing()}getBounds(){return this.map.getBounds().toArray()}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}setRotation(e){this.map.setBearing(e)}zoomIn(e,n){this.map.zoomIn(e,n)}zoomOut(e,n){this.map.zoomOut(e,n)}setPitch(e){return this.map.setPitch(e)}panTo(e){this.map.panTo(e)}panBy(e=0,n=0){this.map.panBy([e,n])}fitBounds(e,n){this.map.fitBounds(e,n)}setMaxZoom(e){this.map.setMaxZoom(e)}setMinZoom(e){this.map.setMinZoom(e)}setMapStatus(e){e.doubleClickZoom===!0&&this.map.doubleClickZoom.enable(),e.doubleClickZoom===!1&&this.map.doubleClickZoom.disable(),e.dragEnable===!1&&this.map.dragPan.disable(),e.dragEnable===!0&&this.map.dragPan.enable(),e.rotateEnable===!1&&this.map.dragRotate.disable(),e.dragEnable===!0&&this.map.dragRotate.enable(),e.keyboardEnable===!1&&this.map.keyboard.disable(),e.keyboardEnable===!0&&this.map.keyboard.enable(),e.zoomEnable===!1&&this.map.scrollZoom.disable(),e.zoomEnable===!0&&this.map.scrollZoom.enable()}setZoomAndCenter(e,n){this.map.flyTo({zoom:e,center:n})}setMapStyle(e){var n;(n=this.map)===null||n===void 0||n.setStyle(this.getMapStyleValue(e))}meterToCoord(e,n){return 1}pixelToLngLat(e){return this.map.unproject(e)}lngLatToPixel(e){return this.map.project(e)}containerToLngLat(e){return this.map.unproject(e)}lngLatToContainer(e){return this.map.project(e)}getMapStyle(){try{var e;const n=(e=this.map.getStyle().sprite)!==null&&e!==void 0?e:"";return/^mapbox:\/\/sprites\/zcxduo\/\w+\/\w+$/.test(n)?n?.replace(/\/\w+$/,"").replace(/sprites/,"styles"):n}catch{return""}}getMapStyleConfig(){return rYt}getMapStyleValue(e){var n;return(n=this.getMapStyleConfig()[e])!==null&&n!==void 0?n:e}destroy(){this.eventEmitter.removeAllListeners(),this.map&&(this.map.remove(),this.$mapContainer=null)}emit(e,...n){this.eventEmitter.emit(e,...n)}once(e,...n){this.eventEmitter.once(e,...n)}getMapContainer(){return this.$mapContainer}exportMap(e){var n;const r=(n=this.map)===null||n===void 0?void 0:n.getCanvas();return e==="jpg"?r?.toDataURL("image/jpeg"):r?.toDataURL("image/png")}onCameraChanged(e){this.cameraChangedCallback=e}creatMapContainer(e){let n=e;return typeof e=="string"&&(n=document.getElementById(e)),n}updateView(e){this.emit("mapchange"),this.viewport.syncWithMapCamera({bearing:e.bearing,center:e.center,viewportHeight:e.viewportHeight,pitch:e.pitch,viewportWidth:e.viewportWidth,zoom:e.zoom,cameraHeight:0}),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)}updateCoordinateSystemService(){const{offsetCoordinate:e=!0}=this.config;this.viewport.getZoom()>iYt&&e?this.coordinateSystemService.setCoordinateSystem(sw.LNGLAT_OFFSET):this.coordinateSystemService.setCoordinateSystem(sw.LNGLAT)}}if(!window)throw Error("BMapGL JSAPI can only be used in Browser.");var kg=(function(t){return t.notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed",t})(kg||{});let fm={key:"",BMapGL:{version:"1.0"}},X0={BMapGL:kg.notload};const BZ=[],Kbe=t=>{if(typeof t=="function"){if(X0.BMapGL===kg.loaded){t(window.BMapGL);return}BZ.push(t)}},aYt=t=>new Promise((e,n)=>{if(X0.BMapGL===kg.failed)n("");else if(X0.BMapGL===kg.notload){const{key:r,version:i}=t;if(!r){n("key");return}fm.key=r,fm.BMapGL.version=i||fm.BMapGL.version,X0.BMapGL=kg.loading;const a=document.body||document.head;window.___onBMapGLAPILoaded=s=>{if(delete window.___onBMapGLAPILoaded,s)X0.BMapGL=kg.failed,n(s);else for(X0.BMapGL=kg.loaded;BZ.length;)BZ.splice(0,1)[0](window.BMapGL)};const o=document.createElement("script");o.type="text/javascript",o.src=`https://api.map.baidu.com/api?type=webgl&v=${fm.BMapGL.version}&ak=${fm.key}&callback=___onBMapGLAPILoaded`,o.onerror=s=>{X0.BMapGL=kg.failed,n(s)},a.appendChild(o),Kbe(e)}else if(X0.BMapGL===kg.loaded){if(t.key&&t.key!==fm.key){n(" key");return}if(t.version&&t.version!==fm.BMapGL.version){n(" JSAPI ");return}e(window.BMapGL)}else{if(t.key&&t.key!==fm.key){n(" key");return}if(t.version&&t.version!==fm.BMapGL.version){n(" JSAPI ");return}Kbe(e)}}),oYt=()=>{delete window.BMapGL,fm={key:"",BMapGL:{version:"1.0"}},X0={BMapGL:kg.notload}},sYt={load:aYt,reset:oYt},lYt=["id","center","zoom","token","mapInstance","version","mapSize","minZoom","maxZoom"];function cYt(t,e){var n=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(n||r)&&(e||(e=document),!!e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var a=e.body||e.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):e.documentElement.appendChild(i)}var o=e.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),i.appendChild(o),o}}cYt(`.BMap_cpyCtrl .anchorBL {
  display: none !important;
}

.anchorBL {
  display: none !important;
}
`);const Qbe={mapmove:"moving",contextmenu:"rightclick",camerachange:"update",zoomchange:"zoomend"},Jbe="zLhopYPPERGtpGOgimcdKcCimGRyyIsh",eEe="1.0";class uYt extends are{constructor(...e){super(...e),Z(this,"viewport",void 0),Z(this,"styleConfig",{normal:[]}),Z(this,"currentStyle","normal"),Z(this,"evtCbProxyMap",new Map),Z(this,"handleCameraChanged",()=>{this.emit("mapchange");const n=this.getMap(),{lng:r,lat:i}=n.getCenter(),a={center:[r,i],viewportHeight:n.getContainer().clientHeight,viewportWidth:n.getContainer().clientWidth,bearing:360-n.getHeading(),pitch:n.getTilt(),zoom:n.getZoom()-1.75};this.viewport.syncWithMapCamera(a),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)})}getMap(){return this.map}setBgColor(e){this.bgColor=e}init(){var e=this;return kt(function*(){e.viewport=new rP;const n=e.config,{id:r,center:i=[121.30654632240122,31.25744185633306],zoom:a=12,token:o=Jbe,mapInstance:s,version:l=eEe,mapSize:c=1e4,minZoom:u=0,maxZoom:f=21}=n,h=Ro(n,lYt);if(e.viewport=new rP,e.version=l,e.simpleMapCoord.setSize(c),window.BMapGL||s||(yield sYt.load({key:o,version:eEe})),s){e.map=s,e.$mapContainer=e.map.getContainer();const d=new BMapGL.Point(i[0],i[1]);e.map.isLoaded()||e.map.centerAndZoom(d,a),e.initMapByConfig(e.config),e.map.on("update",e.handleCameraChanged)}else{const d=ze({enableWheelZoom:!0,minZoom:u,maxZoom:f},h);if(o===Jbe&&console.warn(`%c${e.configService.getSceneWarninfo("MapToken")}!`,"color: #873bf4;font-weigh:900;font-size: 16px;"),!r)throw Error("No container id specified");const p=_5(r);let g=[...p.childNodes];const v=new BMapGL.Map(p,d);e.$mapContainer=v.getContainer(),g.forEach(_=>{e.$mapContainer.appendChild(_)}),g=null,e.map=v;const y=new BMapGL.Point(i[0],i[1]);e.map.centerAndZoom(y,a),e.initMapByConfig(e.config),v.on("update",e.handleCameraChanged)}})()}destroy(){this.getMap().destroy()}onCameraChanged(e){this.cameraChangedCallback=e}addMarkerContainer(){}getMarkerContainer(){return this.map.getPanes().markerPane}getCanvasOverlays(){var e;return(e=this.getMap().getContainer().querySelector("#platform"))===null||e===void 0?void 0:e.lastChild}on(e,n){if(Nx.indexOf(e)!==-1){this.eventEmitter.on(e,n);return}let r=this.evtCbProxyMap.get(e);if(r||this.evtCbProxyMap.set(e,r=new Map),r.get(n))return;const i=(...a)=>{a[0]&&typeof a[0]=="object"&&!a[0].lngLat&&!a[0].lnglat&&(a[0].lngLat=a[0].latlng||a[0].latLng),n(...a)};r.set(n,i),this.map.on(Qbe[e]||e,i)}off(e,n){var r,i;if(Nx.indexOf(e)!==-1){this.eventEmitter.off(e,n);return}const a=(r=this.evtCbProxyMap.get(e))===null||r===void 0?void 0:r.get(n);a&&((i=this.evtCbProxyMap.get(e))===null||i===void 0||i.delete(n),this.map.off(Qbe[e]||e,a))}once(e,n){this.eventEmitter.once(e,n)}getContainer(){return this.getMap().getContainer()}getSize(){const e=this.getMap().getSize();return[e.width,e.height]}getMinZoom(){return this.map.getMinZoom()}getMaxZoom(){return this.map.getMaxZoom()}getType(){return"bmap"}getZoom(){return this.getMap().getZoom()}getCenter(e){if(e!=null&&e.padding){const r=this.getCenter(),i=cF(e.padding),a=this.lngLatToPixel([r.lng,r.lat]),o=[(i.right-i.left)/2,(i.bottom-i.top)/2];return this.pixelToLngLat([a.x-o[0],a.y-o[1]])}const n=this.map.getCenter();return{lng:n.lng,lat:n.lat}}getPitch(){return this.getMap().getTilt()}getRotation(){return 360-this.getMap().getHeading()}getBounds(){const e=this.getMap().getBounds(),n=e.getNorthEast(),r=e.getSouthWest();return[[r.lng,r.lat],[n.lng,n.lat]]}getMapContainer(){return this.getMap().getContainer()}getMapCanvasContainer(){return this.getMap().getContainer()}getMapStyleConfig(){return this.styleConfig}getMapStyleValue(e){return this.styleConfig[e]}setMapStyle(e){if(this.currentStyle===e)return;const n=Array.isArray(e)?e:this.styleConfig[e]||e;if(Array.isArray(n)){this.map.setMapStyleV2({styleJson:n}),this.currentStyle=e;return}if(typeof n=="string"){this.map.setMapStyleV2({styleId:n}),this.currentStyle=e;return}}setRotation(e){this.getMap().setHeading(e)}zoomIn(){this.getMap().zoomIn()}zoomOut(){this.getMap().zoomOut()}panTo(e){this.getMap().panTo(new BMapGL.Point(e[0],e[1]))}panBy(e,n){this.getMap().panBy(e,n)}fitBounds(e,n){this.map.setViewport(e.map(r=>new BMapGL.Point(r[0],r[1])),n)}setZoomAndCenter(e,[n,r]){this.getMap().centerAndZoom(new BMapGL.Point(n,r),e+1.75)}setCenter([e,n],r){let i={lng:e,lat:n};if(r!=null&&r.padding){const a=cF(r.padding),o=this.lngLatToPixel([e,n]),s=[(a.right-a.left)/2,(a.bottom-a.top)/2];i=this.pixelToLngLat([o.x+s[0],o.y+s[1]])}this.getMap().setCenter(new BMapGL.Point(i.lng,i.lat))}setPitch(e){this.getMap().setTilt(e)}setZoom(e){this.getMap().setZoom(e)}setMapStatus(e){const n=this.getMap();Object.keys(e).forEach(r=>{switch(r){case"doubleClickZoom":e.doubleClickZoom?n.enableDoubleClickZoom():n.disableDoubleClickZoom();break;case"dragEnable":e.dragEnable?n.enableDragging():n.disableDragging();break;case"keyboardEnable":e.keyboardEnable?n.enableKeyboard():n.disableKeyboard();break;case"resizeEnable":e.resizeEnable?n.enableAutoResize():n.disableAutoResize();break;case"rotateEnable":e.rotateEnable?(n.enableRotate(),n.enableRotateGestures()):(n.disableRotate(),n.disableRotateGestures());break;case"zoomEnable":e.zoomEnable?(this.map.enableDoubleClickZoom(),this.map.enableScrollWheelZoom(),this.map.enablePinchToZoom()):(this.map.disableDoubleClickZoom(),this.map.disableScrollWheelZoom(),this.map.disablePinchToZoom());break;case"showIndoorMap":n.setDisplayOptions({indoor:!!e.showIndoorMap});break}})}meterToCoord(e,n){const r=this.getMap().getDistance(new BMapGL.Point(...e),new BMapGL.Point(...n)),[i,a]=this.lngLatToCoord(e),[o,s]=this.lngLatToCoord(n);return Math.sqrt(Math.pow(i-o,2)+Math.pow(a-s,2))/r}pixelToLngLat([e,n]){const r=this.getMap().pixelToPoint(new BMapGL.Pixel(e,n));return{lng:r.lng,lat:r.lat}}lngLatToPixel([e,n]){const r=this.getMap().pointToPixel(new BMapGL.Point(e,n));return{x:r.x,y:r.y}}containerToLngLat([e,n]){const r=this.getMap().overlayPixelToPoint(new BMapGL.Pixel(e,n));return{lng:r.lng,lat:r.lat}}lngLatToContainer([e,n]){const r=this.getMap().pointToOverlayPixel(new BMapGL.Point(e,n));return{x:r.x,y:r.y}}lngLatToCoord([e,n]){const{x:r,y:i}=this.getMap().pointToPixel(new BMapGL.Point(e,n));return[r,-i]}lngLatToCoords(e){return e.map(n=>Array.isArray(n[0])?this.lngLatToCoords(n):this.lngLatToCoord(n))}lngLatToMercator([e,n],r){const[i,a]=this.getMap().lnglatToMercator(e,n);return{x:i,y:a,z:r}}getModelMatrix(e,n,r,i=[1,1,1]){const a=this.viewport.projectFlat(e),o=Zr();return Vs(o,o,yr(a[0],a[1],n)),Hf(o,o,yr(i[0],i[1],i[2])),Qm(o,o,r[0]),Dy(o,o,r[1]),eb(o,o,r[2]),o}getCustomCoordCenter(){throw new Error("Method not implemented.")}exportMap(e){const n=this.getMap()._webglPainter._canvas;return e==="jpg"?n?.toDataURL("image/jpeg"):n?.toDataURL("image/png")}hideLogo(){const e=this.map.getContainer();e&&Md(e,"bmap-contianer--hide-logo")}initMapByConfig(e){const{style:n,pitch:r=0,rotation:i=0,logoVisible:a=!0}=e;n&&this.setMapStyle(n),r&&this.setPitch(r),i&&this.setRotation(i),a===!1&&this.hideLogo()}}let fYt=class extends I5{getServiceConstructor(){return uYt}};const hYt=["id","style","rotation","mapInstance","version","mapSize","interactive"];class dYt extends are{constructor(...e){super(...e),Z(this,"version",x6e.DEFAULT),Z(this,"viewport",void 0)}lngLatToCoord(e,n={x:0,y:0,z:0}){const{x:r,y:i}=this.lngLatToMercator(e,0);return[r-n.x,i-n.y]}lngLatToMercator(e,n){const{x:r=0,y:i=0,z:a=0}=Wg.fromLngLat(e,n);return{x:r,y:i,z:a}}getModelMatrix(e,n,r,i=[1,1,1],a={x:0,y:0,z:0}){const o=Wg.fromLngLat(e,n),s=o.meterInMercatorCoordinateUnits(),l=Zr();return Vs(l,l,yr(o.x-a.x,o.y-a.y,o.z||0-a.z)),Hf(l,l,yr(s*i[0],-s*i[1],s*i[2])),Qm(l,l,r[0]),Dy(l,l,r[1]),eb(l,l,r[2]),l}init(){var e=this;return kt(function*(){const n=e.config,{id:r="map",style:i="light",rotation:a=0,mapInstance:o,version:s="DEFAULTMAP",mapSize:l=1e4,interactive:c=!0}=n,u=Ro(n,hYt);e.viewport=new rP,e.version=s,e.simpleMapCoord.setSize(l),s==="SIMPLE"&&u.center&&(u.center=e.simpleMapCoord.unproject(u.center)),o?(e.map=o,e.$mapContainer=e.map.getContainer()):(e.$mapContainer=e.creatMapContainer(r),e.map=new jVt(ze({container:e.$mapContainer,bearing:a,version:s,mapSize:l},u))),e.map.on("load",()=>{e.handleCameraChanged()}),c&&e.map.on("move",e.handleCameraChanged),setTimeout(()=>{e.handleCameraChanged()},100),e.handleCameraChanged()})()}creatMapContainer(e){let n=e;typeof e=="string"&&(n=document.getElementById(e));const r=document.createElement("div");return r.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,n.appendChild(r),r}exportMap(e){return""}setMapStyle(e){}getCanvasOverlays(){return this.getContainer()}}class pYt extends I5{getServiceConstructor(){return dYt}}if(!window)throw Error("TMap JSAPI can only be used in Browser.");var Dg=(function(t){return t.notload="notload",t.loading="loading",t.loaded="loaded",t.failed="failed",t})(Dg||{});const G0={key:"",version:"1.exp",libraries:[]};let q0={TMap:Dg.notload};const FZ=[],tEe=t=>{if(typeof t=="function"){if(q0.TMap===Dg.loaded){t(window.TMap);return}FZ.push(t)}},gYt=t=>new Promise((e,n)=>{if(q0.TMap===Dg.failed)n("");else if(q0.TMap===Dg.notload){const{key:r,version:i,libraries:a}=t;if(!r){n("key");return}G0.key=r,G0.version=i||G0.version,G0.libraries=a||G0.libraries,q0.TMap=Dg.loading,window._onTMapAPILoaded=l=>{if(delete window._onTMapAPILoaded,l)q0.TMap=Dg.failed,n(l);else for(q0.TMap=Dg.loaded;FZ.length;)FZ.splice(0,1)[0](window.TMap)};const o=document.createElement("script");o.type="text/javascript",o.async=!1,o.src="https://map.qq.com/api/gljs?callback=_onTMapAPILoaded&v="+G0.version+"&key="+r+"&plugin="+G0.libraries.join(","),o.onerror=l=>{q0.TMap=Dg.failed,n(l)},(document.body||document.head).appendChild(o),tEe(e)}else if(q0.TMap===Dg.loaded){if(t.key&&t.key!==G0.key){n(" key");return}if(t.version&&t.version!==G0.version){n(" JSAPI ");return}tEe(e)}}),vYt=()=>{delete window.TMap,q0={TMap:Dg.notload}},mYt={load:gYt,reset:vYt},yYt=["id","mapInstance","center","token","version","libraries","minZoom","maxZoom","rotation","pitch","mapSize","logoVisible"];function _Yt(t,e){var n=typeof my<"u"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx<"u"&&wx!==null&&(typeof wx.request<"u"||typeof wx.miniProgram<"u");if(!(n||r)&&(e||(e=document),!!e)){var i=e.head||e.getElementsByTagName("head")[0];if(!i){i=e.createElement("head");var a=e.body||e.getElementsByTagName("body")[0];a?a.parentNode.insertBefore(i,a):e.documentElement.appendChild(i)}var o=e.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(e.createTextNode(t)),i.appendChild(o),o}}_Yt(`img[src*='//mapapi.qq.com/web/jsapi/logo/logo_def.png'],.logo-text
{
  display: none !important;
}

.tencent-map > canvas + div {
  z-index: 3 !important;
}
`);const bYt="OB4BZ-D4W3U-B7VVO-4PJWW-6TKDJ-WPB77",EYt="1.exp",IT={mapmove:"center_changed",camerachange:["drag","pan","rotate","pitch","zoom"],zoomchange:"zoom",dragging:"drag"};class xYt extends are{constructor(...e){super(...e),Z(this,"viewport",null),Z(this,"evtCbProxyMap",new Map),Z(this,"handleCameraChanged",()=>{this.emit("mapchange");const n=this.map,{lng:r,lat:i}=n.getCenter(),a={center:[r,i],viewportHeight:n.getContainer().clientHeight,viewportWidth:n.getContainer().clientWidth,bearing:n.getHeading(),pitch:n.getPitch(),zoom:n.getZoom()-1};this.viewport.syncWithMapCamera(a),this.updateCoordinateSystemService(),this.cameraChangedCallback(this.viewport)})}init(){var e=this;return kt(function*(){var n;e.viewport=new rP;const r=e.config,{id:i,mapInstance:a,center:o=[121.30654632240122,31.25744185633306],token:s=bYt,version:l=EYt,libraries:c=[],minZoom:u=3,maxZoom:f=18,rotation:h=0,pitch:d=0,mapSize:p=1e4,logoVisible:g=!0}=r,v=Ro(r,yYt);if(window.TMap||a||(yield mYt.load({key:s,version:l,libraries:c})),a)e.map=a,e.$mapContainer=e.map.getContainer(),g===!1&&e.hideLogo();else{if(!i)throw Error("No container id specified");const _=_5(i),E=new TMap.Map(_,ze({maxZoom:f,minZoom:u,rotation:h,pitch:d,showControl:!1,center:new TMap.LatLng(o[1],o[0])},v));e.map=E,e.$mapContainer=E.getContainer(),g===!1&&e.hideLogo()}e.map.canvasContainer.style.position="absolute",e.map.drawContainer.classList.add("tencent-map");const y=(n=e.map.controlManager.controlContainer)===null||n===void 0?void 0:n.parentNode;y&&(y.style.zIndex=2),e.simpleMapCoord.setSize(p),e.map.on("drag",e.handleCameraChanged),e.map.on("pan",e.handleCameraChanged),e.map.on("rotate",e.handleCameraChanged),e.map.on("pitch",e.handleCameraChanged),e.map.on("zoom",e.handleCameraChanged),e.handleCameraChanged()})()}destroy(){this.map.destroy()}onCameraChanged(e){this.cameraChangedCallback=e}addMarkerContainer(){const e=this.map.getContainer();this.markerContainer=is("div","l7-marker-container",e),this.markerContainer.setAttribute("tabindex","-1"),this.markerContainer.style.zIndex="2"}getMarkerContainer(){return this.markerContainer}on(e,n){if(Nx.indexOf(e)!==-1)this.eventEmitter.on(e,n);else{const r=i=>{let a=this.evtCbProxyMap.get(i);if(a||this.evtCbProxyMap.set(i,a=new Map),a.get(n))return;const o=(...s)=>{s[0]&&typeof s[0]=="object"&&!s[0].lngLat&&!s[0].lnglat&&(s[0].lngLat=s[0].latlng||s[0].latLng),n(...s)};a.set(n,o),i==="mouseover"&&this.map.getContainer().addEventListener("mouseover",s=>{this.map.emit(s.type,new mm(s.type,this.map,s))}),this.map.on(i,o)};Array.isArray(IT[e])?IT[e].forEach(i=>{r(i||e)}):r(IT[e]||e)}}off(e,n){if(Nx.indexOf(e)!==-1){this.eventEmitter.off(e,n);return}const r=i=>{var a,o;const s=(a=this.evtCbProxyMap.get(e))===null||a===void 0?void 0:a.get(n);s&&((o=this.evtCbProxyMap.get(i))===null||o===void 0||o.delete(n),this.map.off(i,s))};Array.isArray(IT[e])?IT[e].forEach(i=>{r(i||e)}):r(IT[e]||e)}once(){throw new Error("Method not implemented.")}getContainer(){return this.map.getContainer()}getSize(){return[this.map.width,this.map.height]}getMinZoom(){return this.map.transform._minZoom}getMaxZoom(){return this.map.transform._maxZoom}getType(){return"tmap"}getZoom(){return this.map.getZoom()}getCenter(){const{lng:e,lat:n}=this.map.getCenter();return{lng:e,lat:n}}getPitch(){return this.map.getPitch()}getRotation(){return this.map.getRotation()}getBounds(){const e=this.map.getBounds().getNorthEast(),n=this.map.getBounds().getSouthWest();return[[n.lng,n.lat],[e.lng,e.lat]]}getMapContainer(){return this.map.getContainer()}getMapCanvasContainer(){var e;return(e=this.map.getContainer())===null||e===void 0?void 0:e.getElementsByTagName("canvas")[0]}getCanvasOverlays(){var e;return(e=this.getMapCanvasContainer())===null||e===void 0||(e=e.nextSibling)===null||e===void 0?void 0:e.firstChild}getMapStyleConfig(){throw new Error("Method not implemented.")}setBgColor(e){this.bgColor=e}setMapStyle(e){this.map.setMapStyleId(e)}setRotation(e){this.map.setRotation(e)}zoomIn(){this.map.setZoom(this.getZoom()+1)}zoomOut(){this.map.setZoom(this.getZoom()-1)}panTo([e,n]){this.map.panTo(new TMap.LatLng(n,e))}panBy(e,n){this.map.panBy([e,n])}fitBounds(e,n){const[r,i]=e,a=new TMap.LatLng(r[1],r[0]),o=new TMap.LatLng(i[1],i[0]),s=new TMap.LatLngBounds(a,o);this.map.fitBounds(s,n)}setZoomAndCenter(e,[n,r]){this.map.setCenter(new TMap.LatLng(r,n)),this.map.setZoom(e)}setCenter([e,n]){this.map.setCenter(new TMap.LatLng(n,e))}setPitch(e){this.map.setPitch(e)}setZoom(e){this.map.setZoom(e)}setMapStatus(e){Object.keys(e).map(n=>{switch(n){case"doubleClickZoom":this.map.setDoubleClickZoom(!!e.doubleClickZoom);break;case"dragEnable":this.map.setDraggable(!!e.dragEnable);break;case"rotateEnable":this.map.setRotatable(!!e.rotateEnable);break;case"zoomEnable":this.map.setDoubleClickZoom(!!e.zoomEnable),this.map.setScrollable(!!e.zoomEnable);break;case"keyboardEnable":case"resizeEnable":case"showIndoorMap":throw Error("Options may bot be supported")}})}meterToCoord([e,n],[r,i]){const a=TMap.geometry.computeDistance([new TMap.LatLng(n,e),new TMap.LatLng(i,r)]),[o,s]=this.lngLatToCoord([e,n]),[l,c]=this.lngLatToCoord([r,i]);return Math.sqrt(Math.pow(o-l,2)+Math.pow(s-c,2))/a}pixelToLngLat([e,n]){const{lng:r,lat:i}=this.map.getCenter(),{x:a,y:o}=this.lngLatToPixel([r,i]),{x:s,y:l}=this.lngLatToContainer([r,i]),{lng:c,lat:u}=this.map.unprojectFromContainer(new TMap.Point(s+(e-a),l+(n-o)));return this.containerToLngLat([c,u])}lngLatToPixel([e,n]){const{x:r,y:i}=this.map.projectToWorldPlane(new TMap.LatLng(n,e));return{x:r,y:i}}containerToLngLat([e,n]){const{lng:r,lat:i}=this.map.unprojectFromContainer(new TMap.Point(e,n));return{lng:r,lat:i}}lngLatToContainer([e,n]){const{x:r,y:i}=this.map.projectToContainer(new TMap.LatLng(n,e));return{x:r,y:i}}lngLatToCoord([e,n]){const{x:r,y:i}=this.lngLatToPixel([e,n]);return[r,-i]}lngLatToCoords(e){return e.map(n=>Array.isArray(n[0])?this.lngLatToCoords(n):this.lngLatToCoord(n))}lngLatToMercator(e,n){const{x:r=0,y:i=0,z:a=0}=Wg.fromLngLat(e,n);return{x:r,y:i,z:a}}getModelMatrix(e,n,r,i=[1,1,1]){const a=this.viewport.projectFlat(e),o=Zr();return Vs(o,o,yr(a[0],a[1],n)),Hf(o,o,yr(i[0],i[1],i[2])),Qm(o,o,r[0]),Dy(o,o,r[1]),eb(o,o,r[2]),o}getCustomCoordCenter(){throw new Error("Method not implemented.")}exportMap(e){const n=this.getMapCanvasContainer();return e==="jpg"?n?.toDataURL("image/jpeg"):n?.toDataURL("image/png")}rotateY(){throw new Error("Method not implemented.")}hideLogo(){const e=this.map.getContainer();e&&Md(e,"tmap-contianer--hide-logo")}}class SYt extends I5{getServiceConstructor(){return xYt}}const TYt=ire,AYt=ire,wYt=ire;var ke;(function(t){t[t.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",t[t.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",t[t.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC_COLOR=768]="SRC_COLOR",t[t.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.DST_COLOR=774]="DST_COLOR",t[t.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",t[t.CONSTANT_COLOR=32769]="CONSTANT_COLOR",t[t.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",t[t.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",t[t.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",t[t.FUNC_ADD=32774]="FUNC_ADD",t[t.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",t[t.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",t[t.BLEND_EQUATION=32777]="BLEND_EQUATION",t[t.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",t[t.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",t[t.BLEND_DST_RGB=32968]="BLEND_DST_RGB",t[t.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",t[t.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",t[t.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",t[t.BLEND_COLOR=32773]="BLEND_COLOR",t[t.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",t[t.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",t[t.LINE_WIDTH=2849]="LINE_WIDTH",t[t.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",t[t.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",t[t.CULL_FACE_MODE=2885]="CULL_FACE_MODE",t[t.FRONT_FACE=2886]="FRONT_FACE",t[t.DEPTH_RANGE=2928]="DEPTH_RANGE",t[t.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",t[t.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",t[t.DEPTH_FUNC=2932]="DEPTH_FUNC",t[t.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",t[t.STENCIL_FUNC=2962]="STENCIL_FUNC",t[t.STENCIL_FAIL=2964]="STENCIL_FAIL",t[t.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",t[t.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",t[t.STENCIL_REF=2967]="STENCIL_REF",t[t.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",t[t.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",t[t.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",t[t.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",t[t.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",t[t.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",t[t.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",t[t.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",t[t.VIEWPORT=2978]="VIEWPORT",t[t.SCISSOR_BOX=3088]="SCISSOR_BOX",t[t.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",t[t.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",t[t.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",t[t.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",t[t.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",t[t.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",t[t.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",t[t.RED_BITS=3410]="RED_BITS",t[t.GREEN_BITS=3411]="GREEN_BITS",t[t.BLUE_BITS=3412]="BLUE_BITS",t[t.ALPHA_BITS=3413]="ALPHA_BITS",t[t.DEPTH_BITS=3414]="DEPTH_BITS",t[t.STENCIL_BITS=3415]="STENCIL_BITS",t[t.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",t[t.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",t[t.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",t[t.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",t[t.SAMPLES=32937]="SAMPLES",t[t.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",t[t.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",t[t.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",t[t.VENDOR=7936]="VENDOR",t[t.RENDERER=7937]="RENDERER",t[t.VERSION=7938]="VERSION",t[t.IMPLEMENTATION_COLOR_READ_TYPE=35738]="IMPLEMENTATION_COLOR_READ_TYPE",t[t.IMPLEMENTATION_COLOR_READ_FORMAT=35739]="IMPLEMENTATION_COLOR_READ_FORMAT",t[t.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",t[t.STATIC_DRAW=35044]="STATIC_DRAW",t[t.STREAM_DRAW=35040]="STREAM_DRAW",t[t.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.BUFFER_SIZE=34660]="BUFFER_SIZE",t[t.BUFFER_USAGE=34661]="BUFFER_USAGE",t[t.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",t[t.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",t[t.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",t[t.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",t[t.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",t[t.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",t[t.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",t[t.CULL_FACE=2884]="CULL_FACE",t[t.FRONT=1028]="FRONT",t[t.BACK=1029]="BACK",t[t.FRONT_AND_BACK=1032]="FRONT_AND_BACK",t[t.BLEND=3042]="BLEND",t[t.DEPTH_TEST=2929]="DEPTH_TEST",t[t.DITHER=3024]="DITHER",t[t.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",t[t.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",t[t.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",t[t.SCISSOR_TEST=3089]="SCISSOR_TEST",t[t.STENCIL_TEST=2960]="STENCIL_TEST",t[t.NO_ERROR=0]="NO_ERROR",t[t.INVALID_ENUM=1280]="INVALID_ENUM",t[t.INVALID_VALUE=1281]="INVALID_VALUE",t[t.INVALID_OPERATION=1282]="INVALID_OPERATION",t[t.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",t[t.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",t[t.CW=2304]="CW",t[t.CCW=2305]="CCW",t[t.DONT_CARE=4352]="DONT_CARE",t[t.FASTEST=4353]="FASTEST",t[t.NICEST=4354]="NICEST",t[t.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",t[t.BYTE=5120]="BYTE",t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.SHORT=5122]="SHORT",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.INT=5124]="INT",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.FLOAT=5126]="FLOAT",t[t.DOUBLE=5130]="DOUBLE",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.ALPHA=6406]="ALPHA",t[t.RGB=6407]="RGB",t[t.RGBA=6408]="RGBA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",t[t.VERTEX_SHADER=35633]="VERTEX_SHADER",t[t.COMPILE_STATUS=35713]="COMPILE_STATUS",t[t.DELETE_STATUS=35712]="DELETE_STATUS",t[t.LINK_STATUS=35714]="LINK_STATUS",t[t.VALIDATE_STATUS=35715]="VALIDATE_STATUS",t[t.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",t[t.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",t[t.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",t[t.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",t[t.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",t[t.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",t[t.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",t[t.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",t[t.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",t[t.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",t[t.SHADER_TYPE=35663]="SHADER_TYPE",t[t.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",t[t.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",t[t.NEVER=512]="NEVER",t[t.ALWAYS=519]="ALWAYS",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.GEQUAL=518]="GEQUAL",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.KEEP=7680]="KEEP",t[t.REPLACE=7681]="REPLACE",t[t.INCR=7682]="INCR",t[t.DECR=7683]="DECR",t[t.INVERT=5386]="INVERT",t[t.INCR_WRAP=34055]="INCR_WRAP",t[t.DECR_WRAP=34056]="DECR_WRAP",t[t.NEAREST=9728]="NEAREST",t[t.LINEAR=9729]="LINEAR",t[t.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",t[t.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",t[t.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",t[t.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",t[t.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",t[t.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",t[t.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",t[t.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE=5890]="TEXTURE",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t[t.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",t[t.TEXTURE0=33984]="TEXTURE0",t[t.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",t[t.REPEAT=10497]="REPEAT",t[t.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t[t.TEXTURE_WIDTH=4096]="TEXTURE_WIDTH",t[t.TEXTURE_HEIGHT=4097]="TEXTURE_HEIGHT",t[t.FLOAT_VEC2=35664]="FLOAT_VEC2",t[t.FLOAT_VEC3=35665]="FLOAT_VEC3",t[t.FLOAT_VEC4=35666]="FLOAT_VEC4",t[t.INT_VEC2=35667]="INT_VEC2",t[t.INT_VEC3=35668]="INT_VEC3",t[t.INT_VEC4=35669]="INT_VEC4",t[t.BOOL=35670]="BOOL",t[t.BOOL_VEC2=35671]="BOOL_VEC2",t[t.BOOL_VEC3=35672]="BOOL_VEC3",t[t.BOOL_VEC4=35673]="BOOL_VEC4",t[t.FLOAT_MAT2=35674]="FLOAT_MAT2",t[t.FLOAT_MAT3=35675]="FLOAT_MAT3",t[t.FLOAT_MAT4=35676]="FLOAT_MAT4",t[t.SAMPLER_2D=35678]="SAMPLER_2D",t[t.SAMPLER_CUBE=35680]="SAMPLER_CUBE",t[t.LOW_FLOAT=36336]="LOW_FLOAT",t[t.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",t[t.HIGH_FLOAT=36338]="HIGH_FLOAT",t[t.LOW_INT=36339]="LOW_INT",t[t.MEDIUM_INT=36340]="MEDIUM_INT",t[t.HIGH_INT=36341]="HIGH_INT",t[t.FRAMEBUFFER=36160]="FRAMEBUFFER",t[t.RENDERBUFFER=36161]="RENDERBUFFER",t[t.RGBA4=32854]="RGBA4",t[t.RGB5_A1=32855]="RGB5_A1",t[t.RGB565=36194]="RGB565",t[t.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",t[t.STENCIL_INDEX=6401]="STENCIL_INDEX",t[t.STENCIL_INDEX8=36168]="STENCIL_INDEX8",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t[t.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",t[t.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",t[t.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",t[t.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",t[t.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",t[t.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",t[t.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",t[t.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",t[t.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",t[t.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",t[t.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",t[t.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",t[t.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",t[t.NONE=0]="NONE",t[t.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",t[t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",t[t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",t[t.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",t[t.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",t[t.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER",t[t.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER",t[t.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",t[t.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",t[t.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",t[t.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",t[t.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",t[t.READ_BUFFER=3074]="READ_BUFFER",t[t.UNPACK_ROW_LENGTH=3314]="UNPACK_ROW_LENGTH",t[t.UNPACK_SKIP_ROWS=3315]="UNPACK_SKIP_ROWS",t[t.UNPACK_SKIP_PIXELS=3316]="UNPACK_SKIP_PIXELS",t[t.PACK_ROW_LENGTH=3330]="PACK_ROW_LENGTH",t[t.PACK_SKIP_ROWS=3331]="PACK_SKIP_ROWS",t[t.PACK_SKIP_PIXELS=3332]="PACK_SKIP_PIXELS",t[t.TEXTURE_BINDING_3D=32874]="TEXTURE_BINDING_3D",t[t.UNPACK_SKIP_IMAGES=32877]="UNPACK_SKIP_IMAGES",t[t.UNPACK_IMAGE_HEIGHT=32878]="UNPACK_IMAGE_HEIGHT",t[t.MAX_3D_TEXTURE_SIZE=32883]="MAX_3D_TEXTURE_SIZE",t[t.MAX_ELEMENTS_VERTICES=33e3]="MAX_ELEMENTS_VERTICES",t[t.MAX_ELEMENTS_INDICES=33001]="MAX_ELEMENTS_INDICES",t[t.MAX_TEXTURE_LOD_BIAS=34045]="MAX_TEXTURE_LOD_BIAS",t[t.MAX_FRAGMENT_UNIFORM_COMPONENTS=35657]="MAX_FRAGMENT_UNIFORM_COMPONENTS",t[t.MAX_VERTEX_UNIFORM_COMPONENTS=35658]="MAX_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_ARRAY_TEXTURE_LAYERS=35071]="MAX_ARRAY_TEXTURE_LAYERS",t[t.MIN_PROGRAM_TEXEL_OFFSET=35076]="MIN_PROGRAM_TEXEL_OFFSET",t[t.MAX_PROGRAM_TEXEL_OFFSET=35077]="MAX_PROGRAM_TEXEL_OFFSET",t[t.MAX_VARYING_COMPONENTS=35659]="MAX_VARYING_COMPONENTS",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT",t[t.RASTERIZER_DISCARD=35977]="RASTERIZER_DISCARD",t[t.VERTEX_ARRAY_BINDING=34229]="VERTEX_ARRAY_BINDING",t[t.MAX_VERTEX_OUTPUT_COMPONENTS=37154]="MAX_VERTEX_OUTPUT_COMPONENTS",t[t.MAX_FRAGMENT_INPUT_COMPONENTS=37157]="MAX_FRAGMENT_INPUT_COMPONENTS",t[t.MAX_SERVER_WAIT_TIMEOUT=37137]="MAX_SERVER_WAIT_TIMEOUT",t[t.MAX_ELEMENT_INDEX=36203]="MAX_ELEMENT_INDEX",t[t.RED=6403]="RED",t[t.RGB8=32849]="RGB8",t[t.RGBA8=32856]="RGBA8",t[t.RGB10_A2=32857]="RGB10_A2",t[t.TEXTURE_3D=32879]="TEXTURE_3D",t[t.TEXTURE_WRAP_R=32882]="TEXTURE_WRAP_R",t[t.TEXTURE_MIN_LOD=33082]="TEXTURE_MIN_LOD",t[t.TEXTURE_MAX_LOD=33083]="TEXTURE_MAX_LOD",t[t.TEXTURE_BASE_LEVEL=33084]="TEXTURE_BASE_LEVEL",t[t.TEXTURE_MAX_LEVEL=33085]="TEXTURE_MAX_LEVEL",t[t.TEXTURE_COMPARE_MODE=34892]="TEXTURE_COMPARE_MODE",t[t.TEXTURE_COMPARE_FUNC=34893]="TEXTURE_COMPARE_FUNC",t[t.SRGB=35904]="SRGB",t[t.SRGB8=35905]="SRGB8",t[t.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8",t[t.COMPARE_REF_TO_TEXTURE=34894]="COMPARE_REF_TO_TEXTURE",t[t.RGBA32F=34836]="RGBA32F",t[t.RGB32F=34837]="RGB32F",t[t.RGBA16F=34842]="RGBA16F",t[t.RGB16F=34843]="RGB16F",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_BINDING_2D_ARRAY=35869]="TEXTURE_BINDING_2D_ARRAY",t[t.R11F_G11F_B10F=35898]="R11F_G11F_B10F",t[t.RGB9_E5=35901]="RGB9_E5",t[t.RGBA32UI=36208]="RGBA32UI",t[t.RGB32UI=36209]="RGB32UI",t[t.RGBA16UI=36214]="RGBA16UI",t[t.RGB16UI=36215]="RGB16UI",t[t.RGBA8UI=36220]="RGBA8UI",t[t.RGB8UI=36221]="RGB8UI",t[t.RGBA32I=36226]="RGBA32I",t[t.RGB32I=36227]="RGB32I",t[t.RGBA16I=36232]="RGBA16I",t[t.RGB16I=36233]="RGB16I",t[t.RGBA8I=36238]="RGBA8I",t[t.RGB8I=36239]="RGB8I",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.R8=33321]="R8",t[t.RG8=33323]="RG8",t[t.R16F=33325]="R16F",t[t.R32F=33326]="R32F",t[t.RG16F=33327]="RG16F",t[t.RG32F=33328]="RG32F",t[t.R8I=33329]="R8I",t[t.R8UI=33330]="R8UI",t[t.R16I=33331]="R16I",t[t.R16UI=33332]="R16UI",t[t.R32I=33333]="R32I",t[t.R32UI=33334]="R32UI",t[t.RG8I=33335]="RG8I",t[t.RG8UI=33336]="RG8UI",t[t.RG16I=33337]="RG16I",t[t.RG16UI=33338]="RG16UI",t[t.RG32I=33339]="RG32I",t[t.RG32UI=33340]="RG32UI",t[t.R8_SNORM=36756]="R8_SNORM",t[t.RG8_SNORM=36757]="RG8_SNORM",t[t.RGB8_SNORM=36758]="RGB8_SNORM",t[t.RGBA8_SNORM=36759]="RGBA8_SNORM",t[t.RGB10_A2UI=36975]="RGB10_A2UI",t[t.TEXTURE_IMMUTABLE_FORMAT=37167]="TEXTURE_IMMUTABLE_FORMAT",t[t.TEXTURE_IMMUTABLE_LEVELS=33503]="TEXTURE_IMMUTABLE_LEVELS",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.HALF_FLOAT=5131]="HALF_FLOAT",t[t.RG=33319]="RG",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.INT_2_10_10_10_REV=36255]="INT_2_10_10_10_REV",t[t.CURRENT_QUERY=34917]="CURRENT_QUERY",t[t.QUERY_RESULT=34918]="QUERY_RESULT",t[t.QUERY_RESULT_AVAILABLE=34919]="QUERY_RESULT_AVAILABLE",t[t.ANY_SAMPLES_PASSED=35887]="ANY_SAMPLES_PASSED",t[t.ANY_SAMPLES_PASSED_CONSERVATIVE=36202]="ANY_SAMPLES_PASSED_CONSERVATIVE",t[t.MAX_DRAW_BUFFERS=34852]="MAX_DRAW_BUFFERS",t[t.DRAW_BUFFER0=34853]="DRAW_BUFFER0",t[t.DRAW_BUFFER1=34854]="DRAW_BUFFER1",t[t.DRAW_BUFFER2=34855]="DRAW_BUFFER2",t[t.DRAW_BUFFER3=34856]="DRAW_BUFFER3",t[t.DRAW_BUFFER4=34857]="DRAW_BUFFER4",t[t.DRAW_BUFFER5=34858]="DRAW_BUFFER5",t[t.DRAW_BUFFER6=34859]="DRAW_BUFFER6",t[t.DRAW_BUFFER7=34860]="DRAW_BUFFER7",t[t.DRAW_BUFFER8=34861]="DRAW_BUFFER8",t[t.DRAW_BUFFER9=34862]="DRAW_BUFFER9",t[t.DRAW_BUFFER10=34863]="DRAW_BUFFER10",t[t.DRAW_BUFFER11=34864]="DRAW_BUFFER11",t[t.DRAW_BUFFER12=34865]="DRAW_BUFFER12",t[t.DRAW_BUFFER13=34866]="DRAW_BUFFER13",t[t.DRAW_BUFFER14=34867]="DRAW_BUFFER14",t[t.DRAW_BUFFER15=34868]="DRAW_BUFFER15",t[t.MAX_COLOR_ATTACHMENTS=36063]="MAX_COLOR_ATTACHMENTS",t[t.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1",t[t.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2",t[t.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3",t[t.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4",t[t.COLOR_ATTACHMENT5=36069]="COLOR_ATTACHMENT5",t[t.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6",t[t.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7",t[t.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8",t[t.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9",t[t.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10",t[t.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11",t[t.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12",t[t.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13",t[t.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14",t[t.COLOR_ATTACHMENT15=36079]="COLOR_ATTACHMENT15",t[t.SAMPLER_3D=35679]="SAMPLER_3D",t[t.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW",t[t.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY",t[t.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW",t[t.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW",t[t.INT_SAMPLER_2D=36298]="INT_SAMPLER_2D",t[t.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D",t[t.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE",t[t.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY",t[t.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D",t[t.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D",t[t.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE",t[t.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY",t[t.MAX_SAMPLES=36183]="MAX_SAMPLES",t[t.SAMPLER_BINDING=35097]="SAMPLER_BINDING",t[t.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER",t[t.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER",t[t.PIXEL_PACK_BUFFER_BINDING=35053]="PIXEL_PACK_BUFFER_BINDING",t[t.PIXEL_UNPACK_BUFFER_BINDING=35055]="PIXEL_UNPACK_BUFFER_BINDING",t[t.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER",t[t.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER",t[t.COPY_READ_BUFFER_BINDING=36662]="COPY_READ_BUFFER_BINDING",t[t.COPY_WRITE_BUFFER_BINDING=36663]="COPY_WRITE_BUFFER_BINDING",t[t.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3",t[t.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4",t[t.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2",t[t.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4",t[t.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2",t[t.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3",t[t.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2",t[t.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3",t[t.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4",t[t.UNSIGNED_NORMALIZED=35863]="UNSIGNED_NORMALIZED",t[t.SIGNED_NORMALIZED=36764]="SIGNED_NORMALIZED",t[t.VERTEX_ATTRIB_ARRAY_INTEGER=35069]="VERTEX_ATTRIB_ARRAY_INTEGER",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR",t[t.TRANSFORM_FEEDBACK_BUFFER_MODE=35967]="TRANSFORM_FEEDBACK_BUFFER_MODE",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS=35968]="MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS",t[t.TRANSFORM_FEEDBACK_VARYINGS=35971]="TRANSFORM_FEEDBACK_VARYINGS",t[t.TRANSFORM_FEEDBACK_BUFFER_START=35972]="TRANSFORM_FEEDBACK_BUFFER_START",t[t.TRANSFORM_FEEDBACK_BUFFER_SIZE=35973]="TRANSFORM_FEEDBACK_BUFFER_SIZE",t[t.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN=35976]="TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN",t[t.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS=35978]="MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS",t[t.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS=35979]="MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS",t[t.INTERLEAVED_ATTRIBS=35980]="INTERLEAVED_ATTRIBS",t[t.SEPARATE_ATTRIBS=35981]="SEPARATE_ATTRIBS",t[t.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER",t[t.TRANSFORM_FEEDBACK_BUFFER_BINDING=35983]="TRANSFORM_FEEDBACK_BUFFER_BINDING",t[t.TRANSFORM_FEEDBACK=36386]="TRANSFORM_FEEDBACK",t[t.TRANSFORM_FEEDBACK_PAUSED=36387]="TRANSFORM_FEEDBACK_PAUSED",t[t.TRANSFORM_FEEDBACK_ACTIVE=36388]="TRANSFORM_FEEDBACK_ACTIVE",t[t.TRANSFORM_FEEDBACK_BINDING=36389]="TRANSFORM_FEEDBACK_BINDING",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE",t[t.FRAMEBUFFER_ATTACHMENT_RED_SIZE=33298]="FRAMEBUFFER_ATTACHMENT_RED_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE=33299]="FRAMEBUFFER_ATTACHMENT_GREEN_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE=33300]="FRAMEBUFFER_ATTACHMENT_BLUE_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE=33301]="FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE=33302]="FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE",t[t.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE=33303]="FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE",t[t.FRAMEBUFFER_DEFAULT=33304]="FRAMEBUFFER_DEFAULT",t[t.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8",t[t.DRAW_FRAMEBUFFER_BINDING=36006]="DRAW_FRAMEBUFFER_BINDING",t[t.READ_FRAMEBUFFER_BINDING=36010]="READ_FRAMEBUFFER_BINDING",t[t.RENDERBUFFER_SAMPLES=36011]="RENDERBUFFER_SAMPLES",t[t.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER=36052]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER",t[t.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE=36182]="FRAMEBUFFER_INCOMPLETE_MULTISAMPLE",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t[t.UNIFORM_BUFFER_BINDING=35368]="UNIFORM_BUFFER_BINDING",t[t.UNIFORM_BUFFER_START=35369]="UNIFORM_BUFFER_START",t[t.UNIFORM_BUFFER_SIZE=35370]="UNIFORM_BUFFER_SIZE",t[t.MAX_VERTEX_UNIFORM_BLOCKS=35371]="MAX_VERTEX_UNIFORM_BLOCKS",t[t.MAX_FRAGMENT_UNIFORM_BLOCKS=35373]="MAX_FRAGMENT_UNIFORM_BLOCKS",t[t.MAX_COMBINED_UNIFORM_BLOCKS=35374]="MAX_COMBINED_UNIFORM_BLOCKS",t[t.MAX_UNIFORM_BUFFER_BINDINGS=35375]="MAX_UNIFORM_BUFFER_BINDINGS",t[t.MAX_UNIFORM_BLOCK_SIZE=35376]="MAX_UNIFORM_BLOCK_SIZE",t[t.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS=35377]="MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS",t[t.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS=35379]="MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS",t[t.UNIFORM_BUFFER_OFFSET_ALIGNMENT=35380]="UNIFORM_BUFFER_OFFSET_ALIGNMENT",t[t.ACTIVE_UNIFORM_BLOCKS=35382]="ACTIVE_UNIFORM_BLOCKS",t[t.UNIFORM_TYPE=35383]="UNIFORM_TYPE",t[t.UNIFORM_SIZE=35384]="UNIFORM_SIZE",t[t.UNIFORM_BLOCK_INDEX=35386]="UNIFORM_BLOCK_INDEX",t[t.UNIFORM_OFFSET=35387]="UNIFORM_OFFSET",t[t.UNIFORM_ARRAY_STRIDE=35388]="UNIFORM_ARRAY_STRIDE",t[t.UNIFORM_MATRIX_STRIDE=35389]="UNIFORM_MATRIX_STRIDE",t[t.UNIFORM_IS_ROW_MAJOR=35390]="UNIFORM_IS_ROW_MAJOR",t[t.UNIFORM_BLOCK_BINDING=35391]="UNIFORM_BLOCK_BINDING",t[t.UNIFORM_BLOCK_DATA_SIZE=35392]="UNIFORM_BLOCK_DATA_SIZE",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORMS=35394]="UNIFORM_BLOCK_ACTIVE_UNIFORMS",t[t.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES=35395]="UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES",t[t.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER=35396]="UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER",t[t.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER=35398]="UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER",t[t.OBJECT_TYPE=37138]="OBJECT_TYPE",t[t.SYNC_CONDITION=37139]="SYNC_CONDITION",t[t.SYNC_STATUS=37140]="SYNC_STATUS",t[t.SYNC_FLAGS=37141]="SYNC_FLAGS",t[t.SYNC_FENCE=37142]="SYNC_FENCE",t[t.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE",t[t.UNSIGNALED=37144]="UNSIGNALED",t[t.SIGNALED=37145]="SIGNALED",t[t.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED",t[t.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED",t[t.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED",t[t.WAIT_FAILED=37149]="WAIT_FAILED",t[t.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT",t[t.COLOR=6144]="COLOR",t[t.DEPTH=6145]="DEPTH",t[t.STENCIL=6146]="STENCIL",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX",t[t.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24",t[t.STREAM_READ=35041]="STREAM_READ",t[t.STREAM_COPY=35042]="STREAM_COPY",t[t.STATIC_READ=35045]="STATIC_READ",t[t.STATIC_COPY=35046]="STATIC_COPY",t[t.DYNAMIC_READ=35049]="DYNAMIC_READ",t[t.DYNAMIC_COPY=35050]="DYNAMIC_COPY",t[t.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F",t[t.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8",t[t.INVALID_INDEX=4294967295]="INVALID_INDEX",t[t.TIMEOUT_IGNORED=-1]="TIMEOUT_IGNORED",t[t.MAX_CLIENT_WAIT_TIMEOUT_WEBGL=37447]="MAX_CLIENT_WAIT_TIMEOUT_WEBGL",t[t.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE=35070]="VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE",t[t.UNMASKED_VENDOR_WEBGL=37445]="UNMASKED_VENDOR_WEBGL",t[t.UNMASKED_RENDERER_WEBGL=37446]="UNMASKED_RENDERER_WEBGL",t[t.MAX_TEXTURE_MAX_ANISOTROPY_EXT=34047]="MAX_TEXTURE_MAX_ANISOTROPY_EXT",t[t.TEXTURE_MAX_ANISOTROPY_EXT=34046]="TEXTURE_MAX_ANISOTROPY_EXT",t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37493]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37494]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37495]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37496]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37497]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.UNSIGNED_INT_24_8_WEBGL=34042]="UNSIGNED_INT_24_8_WEBGL",t[t.HALF_FLOAT_OES=36193]="HALF_FLOAT_OES",t[t.RGBA32F_EXT=34836]="RGBA32F_EXT",t[t.RGB32F_EXT=34837]="RGB32F_EXT",t[t.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT=33297]="FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT",t[t.UNSIGNED_NORMALIZED_EXT=35863]="UNSIGNED_NORMALIZED_EXT",t[t.MIN_EXT=32775]="MIN_EXT",t[t.MAX_EXT=32776]="MAX_EXT",t[t.SRGB_EXT=35904]="SRGB_EXT",t[t.SRGB_ALPHA_EXT=35906]="SRGB_ALPHA_EXT",t[t.SRGB8_ALPHA8_EXT=35907]="SRGB8_ALPHA8_EXT",t[t.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT=33296]="FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT",t[t.FRAGMENT_SHADER_DERIVATIVE_HINT_OES=35723]="FRAGMENT_SHADER_DERIVATIVE_HINT_OES",t[t.COLOR_ATTACHMENT0_WEBGL=36064]="COLOR_ATTACHMENT0_WEBGL",t[t.COLOR_ATTACHMENT1_WEBGL=36065]="COLOR_ATTACHMENT1_WEBGL",t[t.COLOR_ATTACHMENT2_WEBGL=36066]="COLOR_ATTACHMENT2_WEBGL",t[t.COLOR_ATTACHMENT3_WEBGL=36067]="COLOR_ATTACHMENT3_WEBGL",t[t.COLOR_ATTACHMENT4_WEBGL=36068]="COLOR_ATTACHMENT4_WEBGL",t[t.COLOR_ATTACHMENT5_WEBGL=36069]="COLOR_ATTACHMENT5_WEBGL",t[t.COLOR_ATTACHMENT6_WEBGL=36070]="COLOR_ATTACHMENT6_WEBGL",t[t.COLOR_ATTACHMENT7_WEBGL=36071]="COLOR_ATTACHMENT7_WEBGL",t[t.COLOR_ATTACHMENT8_WEBGL=36072]="COLOR_ATTACHMENT8_WEBGL",t[t.COLOR_ATTACHMENT9_WEBGL=36073]="COLOR_ATTACHMENT9_WEBGL",t[t.COLOR_ATTACHMENT10_WEBGL=36074]="COLOR_ATTACHMENT10_WEBGL",t[t.COLOR_ATTACHMENT11_WEBGL=36075]="COLOR_ATTACHMENT11_WEBGL",t[t.COLOR_ATTACHMENT12_WEBGL=36076]="COLOR_ATTACHMENT12_WEBGL",t[t.COLOR_ATTACHMENT13_WEBGL=36077]="COLOR_ATTACHMENT13_WEBGL",t[t.COLOR_ATTACHMENT14_WEBGL=36078]="COLOR_ATTACHMENT14_WEBGL",t[t.COLOR_ATTACHMENT15_WEBGL=36079]="COLOR_ATTACHMENT15_WEBGL",t[t.DRAW_BUFFER0_WEBGL=34853]="DRAW_BUFFER0_WEBGL",t[t.DRAW_BUFFER1_WEBGL=34854]="DRAW_BUFFER1_WEBGL",t[t.DRAW_BUFFER2_WEBGL=34855]="DRAW_BUFFER2_WEBGL",t[t.DRAW_BUFFER3_WEBGL=34856]="DRAW_BUFFER3_WEBGL",t[t.DRAW_BUFFER4_WEBGL=34857]="DRAW_BUFFER4_WEBGL",t[t.DRAW_BUFFER5_WEBGL=34858]="DRAW_BUFFER5_WEBGL",t[t.DRAW_BUFFER6_WEBGL=34859]="DRAW_BUFFER6_WEBGL",t[t.DRAW_BUFFER7_WEBGL=34860]="DRAW_BUFFER7_WEBGL",t[t.DRAW_BUFFER8_WEBGL=34861]="DRAW_BUFFER8_WEBGL",t[t.DRAW_BUFFER9_WEBGL=34862]="DRAW_BUFFER9_WEBGL",t[t.DRAW_BUFFER10_WEBGL=34863]="DRAW_BUFFER10_WEBGL",t[t.DRAW_BUFFER11_WEBGL=34864]="DRAW_BUFFER11_WEBGL",t[t.DRAW_BUFFER12_WEBGL=34865]="DRAW_BUFFER12_WEBGL",t[t.DRAW_BUFFER13_WEBGL=34866]="DRAW_BUFFER13_WEBGL",t[t.DRAW_BUFFER14_WEBGL=34867]="DRAW_BUFFER14_WEBGL",t[t.DRAW_BUFFER15_WEBGL=34868]="DRAW_BUFFER15_WEBGL",t[t.MAX_COLOR_ATTACHMENTS_WEBGL=36063]="MAX_COLOR_ATTACHMENTS_WEBGL",t[t.MAX_DRAW_BUFFERS_WEBGL=34852]="MAX_DRAW_BUFFERS_WEBGL",t[t.VERTEX_ARRAY_BINDING_OES=34229]="VERTEX_ARRAY_BINDING_OES",t[t.QUERY_COUNTER_BITS_EXT=34916]="QUERY_COUNTER_BITS_EXT",t[t.CURRENT_QUERY_EXT=34917]="CURRENT_QUERY_EXT",t[t.QUERY_RESULT_EXT=34918]="QUERY_RESULT_EXT",t[t.QUERY_RESULT_AVAILABLE_EXT=34919]="QUERY_RESULT_AVAILABLE_EXT",t[t.TIME_ELAPSED_EXT=35007]="TIME_ELAPSED_EXT",t[t.TIMESTAMP_EXT=36392]="TIMESTAMP_EXT",t[t.GPU_DISJOINT_EXT=36795]="GPU_DISJOINT_EXT"})(ke||(ke={}));var Aa;(function(t){t[t.Buffer=0]="Buffer",t[t.Texture=1]="Texture",t[t.RenderTarget=2]="RenderTarget",t[t.Sampler=3]="Sampler",t[t.Program=4]="Program",t[t.Bindings=5]="Bindings",t[t.InputLayout=6]="InputLayout",t[t.RenderPipeline=7]="RenderPipeline",t[t.ComputePipeline=8]="ComputePipeline",t[t.Readback=9]="Readback",t[t.QueryPool=10]="QueryPool",t[t.RenderBundle=11]="RenderBundle"})(Aa||(Aa={}));var Ua;(function(t){t[t.NEVER=512]="NEVER",t[t.LESS=513]="LESS",t[t.EQUAL=514]="EQUAL",t[t.LEQUAL=515]="LEQUAL",t[t.GREATER=516]="GREATER",t[t.NOTEQUAL=517]="NOTEQUAL",t[t.GEQUAL=518]="GEQUAL",t[t.ALWAYS=519]="ALWAYS"})(Ua||(Ua={}));var iP;(function(t){t[t.CCW=2305]="CCW",t[t.CW=2304]="CW"})(iP||(iP={}));var kh;(function(t){t[t.NONE=0]="NONE",t[t.FRONT=1]="FRONT",t[t.BACK=2]="BACK",t[t.FRONT_AND_BACK=3]="FRONT_AND_BACK"})(kh||(kh={}));var Ji;(function(t){t[t.ZERO=0]="ZERO",t[t.ONE=1]="ONE",t[t.SRC=768]="SRC",t[t.ONE_MINUS_SRC=769]="ONE_MINUS_SRC",t[t.DST=774]="DST",t[t.ONE_MINUS_DST=775]="ONE_MINUS_DST",t[t.SRC_ALPHA=770]="SRC_ALPHA",t[t.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",t[t.DST_ALPHA=772]="DST_ALPHA",t[t.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",t[t.CONST=32769]="CONST",t[t.ONE_MINUS_CONSTANT=32770]="ONE_MINUS_CONSTANT",t[t.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE"})(Ji||(Ji={}));var Pc;(function(t){t[t.ADD=32774]="ADD",t[t.SUBSTRACT=32778]="SUBSTRACT",t[t.REVERSE_SUBSTRACT=32779]="REVERSE_SUBSTRACT",t[t.MIN=32775]="MIN",t[t.MAX=32776]="MAX"})(Pc||(Pc={}));var Xf;(function(t){t[t.CLAMP_TO_EDGE=0]="CLAMP_TO_EDGE",t[t.REPEAT=1]="REPEAT",t[t.MIRRORED_REPEAT=2]="MIRRORED_REPEAT"})(Xf||(Xf={}));var Ys;(function(t){t[t.POINT=0]="POINT",t[t.BILINEAR=1]="BILINEAR"})(Ys||(Ys={}));var hc;(function(t){t[t.NO_MIP=0]="NO_MIP",t[t.NEAREST=1]="NEAREST",t[t.LINEAR=2]="LINEAR"})(hc||(hc={}));var Rl;(function(t){t[t.POINTS=0]="POINTS",t[t.TRIANGLES=1]="TRIANGLES",t[t.TRIANGLE_STRIP=2]="TRIANGLE_STRIP",t[t.LINES=3]="LINES",t[t.LINE_STRIP=4]="LINE_STRIP"})(Rl||(Rl={}));var mo;(function(t){t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE"})(mo||(mo={}));var Kg;(function(t){t[t.STATIC=1]="STATIC",t[t.DYNAMIC=2]="DYNAMIC"})(Kg||(Kg={}));var Fx;(function(t){t[t.VERTEX=1]="VERTEX",t[t.INSTANCE=2]="INSTANCE"})(Fx||(Fx={}));var nEe;(function(t){t.LOADED="loaded"})(nEe||(nEe={}));var ea;(function(t){t[t.TEXTURE_2D=0]="TEXTURE_2D",t[t.TEXTURE_2D_ARRAY=1]="TEXTURE_2D_ARRAY",t[t.TEXTURE_3D=2]="TEXTURE_3D",t[t.TEXTURE_CUBE_MAP=3]="TEXTURE_CUBE_MAP"})(ea||(ea={}));var uf;(function(t){t[t.SAMPLED=1]="SAMPLED",t[t.RENDER_TARGET=2]="RENDER_TARGET",t[t.STORAGE=4]="STORAGE"})(uf||(uf={}));var Cc;(function(t){t[t.NONE=0]="NONE",t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t[t.RGB=7]="RGB",t[t.ALL=15]="ALL"})(Cc||(Cc={}));var ks;(function(t){t[t.KEEP=7680]="KEEP",t[t.ZERO=0]="ZERO",t[t.REPLACE=7681]="REPLACE",t[t.INVERT=5386]="INVERT",t[t.INCREMENT_CLAMP=7682]="INCREMENT_CLAMP",t[t.DECREMENT_CLAMP=7683]="DECREMENT_CLAMP",t[t.INCREMENT_WRAP=34055]="INCREMENT_WRAP",t[t.DECREMENT_WRAP=34056]="DECREMENT_WRAP"})(ks||(ks={}));var Ls;(function(t){t[t.Float=0]="Float",t[t.UnfilterableFloat=1]="UnfilterableFloat",t[t.Uint=2]="Uint",t[t.Sint=3]="Sint",t[t.Depth=4]="Depth"})(Ls||(Ls={}));var Yg;(function(t){t[t.LOWER_LEFT=0]="LOWER_LEFT",t[t.UPPER_LEFT=1]="UPPER_LEFT"})(Yg||(Yg={}));var hw;(function(t){t[t.NEGATIVE_ONE=0]="NEGATIVE_ONE",t[t.ZERO=1]="ZERO"})(hw||(hw={}));var uF;(function(t){t[t.OcclusionConservative=0]="OcclusionConservative"})(uF||(uF={}));var Qt;(function(t){t[t.U8=1]="U8",t[t.U16=2]="U16",t[t.U32=3]="U32",t[t.S8=4]="S8",t[t.S16=5]="S16",t[t.S32=6]="S32",t[t.F16=7]="F16",t[t.F32=8]="F32",t[t.BC1=65]="BC1",t[t.BC2=66]="BC2",t[t.BC3=67]="BC3",t[t.BC4_UNORM=68]="BC4_UNORM",t[t.BC4_SNORM=69]="BC4_SNORM",t[t.BC5_UNORM=70]="BC5_UNORM",t[t.BC5_SNORM=71]="BC5_SNORM",t[t.U16_PACKED_5551=97]="U16_PACKED_5551",t[t.U16_PACKED_565=98]="U16_PACKED_565",t[t.D24=129]="D24",t[t.D32F=130]="D32F",t[t.D24S8=131]="D24S8",t[t.D32FS8=132]="D32FS8"})(Qt||(Qt={}));var dr;(function(t){t[t.R=1]="R",t[t.RG=2]="RG",t[t.RGB=3]="RGB",t[t.RGBA=4]="RGBA",t[t.A=5]="A"})(dr||(dr={}));var Qn;(function(t){t[t.None=0]="None",t[t.Normalized=1]="Normalized",t[t.sRGB=2]="sRGB",t[t.Depth=4]="Depth",t[t.Stencil=8]="Stencil",t[t.RenderTarget=16]="RenderTarget",t[t.Luminance=32]="Luminance"})(Qn||(Qn={}));function Ur(t,e,n){return t<<16|e<<8|n}var Je;(function(t){t[t.ALPHA=Ur(Qt.U8,dr.A,Qn.None)]="ALPHA",t[t.U8_LUMINANCE=Ur(Qt.U8,dr.A,Qn.Luminance)]="U8_LUMINANCE",t[t.F16_LUMINANCE=Ur(Qt.F16,dr.A,Qn.Luminance)]="F16_LUMINANCE",t[t.F32_LUMINANCE=Ur(Qt.F32,dr.A,Qn.Luminance)]="F32_LUMINANCE",t[t.F16_R=Ur(Qt.F16,dr.R,Qn.None)]="F16_R",t[t.F16_RG=Ur(Qt.F16,dr.RG,Qn.None)]="F16_RG",t[t.F16_RGB=Ur(Qt.F16,dr.RGB,Qn.None)]="F16_RGB",t[t.F16_RGBA=Ur(Qt.F16,dr.RGBA,Qn.None)]="F16_RGBA",t[t.F32_R=Ur(Qt.F32,dr.R,Qn.None)]="F32_R",t[t.F32_RG=Ur(Qt.F32,dr.RG,Qn.None)]="F32_RG",t[t.F32_RGB=Ur(Qt.F32,dr.RGB,Qn.None)]="F32_RGB",t[t.F32_RGBA=Ur(Qt.F32,dr.RGBA,Qn.None)]="F32_RGBA",t[t.U8_R=Ur(Qt.U8,dr.R,Qn.None)]="U8_R",t[t.U8_R_NORM=Ur(Qt.U8,dr.R,Qn.Normalized)]="U8_R_NORM",t[t.U8_RG=Ur(Qt.U8,dr.RG,Qn.None)]="U8_RG",t[t.U8_RG_NORM=Ur(Qt.U8,dr.RG,Qn.Normalized)]="U8_RG_NORM",t[t.U8_RGB=Ur(Qt.U8,dr.RGB,Qn.None)]="U8_RGB",t[t.U8_RGB_NORM=Ur(Qt.U8,dr.RGB,Qn.Normalized)]="U8_RGB_NORM",t[t.U8_RGB_SRGB=Ur(Qt.U8,dr.RGB,Qn.sRGB|Qn.Normalized)]="U8_RGB_SRGB",t[t.U8_RGBA=Ur(Qt.U8,dr.RGBA,Qn.None)]="U8_RGBA",t[t.U8_RGBA_NORM=Ur(Qt.U8,dr.RGBA,Qn.Normalized)]="U8_RGBA_NORM",t[t.U8_RGBA_SRGB=Ur(Qt.U8,dr.RGBA,Qn.sRGB|Qn.Normalized)]="U8_RGBA_SRGB",t[t.U16_R=Ur(Qt.U16,dr.R,Qn.None)]="U16_R",t[t.U16_R_NORM=Ur(Qt.U16,dr.R,Qn.Normalized)]="U16_R_NORM",t[t.U16_RG_NORM=Ur(Qt.U16,dr.RG,Qn.Normalized)]="U16_RG_NORM",t[t.U16_RGBA_NORM=Ur(Qt.U16,dr.RGBA,Qn.Normalized)]="U16_RGBA_NORM",t[t.U16_RGBA=Ur(Qt.U16,dr.RGBA,Qn.None)]="U16_RGBA",t[t.U16_RGB=Ur(Qt.U16,dr.RGB,Qn.None)]="U16_RGB",t[t.U16_RG=Ur(Qt.U16,dr.RG,Qn.None)]="U16_RG",t[t.U32_R=Ur(Qt.U32,dr.R,Qn.None)]="U32_R",t[t.U32_RG=Ur(Qt.U32,dr.RG,Qn.None)]="U32_RG",t[t.U32_RGB=Ur(Qt.U32,dr.RGB,Qn.None)]="U32_RGB",t[t.U32_RGBA=Ur(Qt.U32,dr.RGBA,Qn.None)]="U32_RGBA",t[t.S8_R=Ur(Qt.S8,dr.R,Qn.None)]="S8_R",t[t.S8_R_NORM=Ur(Qt.S8,dr.R,Qn.Normalized)]="S8_R_NORM",t[t.S8_RG_NORM=Ur(Qt.S8,dr.RG,Qn.Normalized)]="S8_RG_NORM",t[t.S8_RGB_NORM=Ur(Qt.S8,dr.RGB,Qn.Normalized)]="S8_RGB_NORM",t[t.S8_RGBA_NORM=Ur(Qt.S8,dr.RGBA,Qn.Normalized)]="S8_RGBA_NORM",t[t.S16_R=Ur(Qt.S16,dr.R,Qn.None)]="S16_R",t[t.S16_RG=Ur(Qt.S16,dr.RG,Qn.None)]="S16_RG",t[t.S16_RG_NORM=Ur(Qt.S16,dr.RG,Qn.Normalized)]="S16_RG_NORM",t[t.S16_RGB_NORM=Ur(Qt.S16,dr.RGB,Qn.Normalized)]="S16_RGB_NORM",t[t.S16_RGBA=Ur(Qt.S16,dr.RGBA,Qn.None)]="S16_RGBA",t[t.S16_RGBA_NORM=Ur(Qt.S16,dr.RGBA,Qn.Normalized)]="S16_RGBA_NORM",t[t.S32_R=Ur(Qt.S32,dr.R,Qn.None)]="S32_R",t[t.S32_RG=Ur(Qt.S32,dr.RG,Qn.None)]="S32_RG",t[t.S32_RGB=Ur(Qt.S32,dr.RGB,Qn.None)]="S32_RGB",t[t.S32_RGBA=Ur(Qt.S32,dr.RGBA,Qn.None)]="S32_RGBA",t[t.U16_RGBA_5551=Ur(Qt.U16_PACKED_5551,dr.RGBA,Qn.Normalized)]="U16_RGBA_5551",t[t.U16_RGB_565=Ur(Qt.U16_PACKED_565,dr.RGB,Qn.Normalized)]="U16_RGB_565",t[t.BC1=Ur(Qt.BC1,dr.RGBA,Qn.Normalized)]="BC1",t[t.BC1_SRGB=Ur(Qt.BC1,dr.RGBA,Qn.Normalized|Qn.sRGB)]="BC1_SRGB",t[t.BC2=Ur(Qt.BC2,dr.RGBA,Qn.Normalized)]="BC2",t[t.BC2_SRGB=Ur(Qt.BC2,dr.RGBA,Qn.Normalized|Qn.sRGB)]="BC2_SRGB",t[t.BC3=Ur(Qt.BC3,dr.RGBA,Qn.Normalized)]="BC3",t[t.BC3_SRGB=Ur(Qt.BC3,dr.RGBA,Qn.Normalized|Qn.sRGB)]="BC3_SRGB",t[t.BC4_UNORM=Ur(Qt.BC4_UNORM,dr.R,Qn.Normalized)]="BC4_UNORM",t[t.BC4_SNORM=Ur(Qt.BC4_SNORM,dr.R,Qn.Normalized)]="BC4_SNORM",t[t.BC5_UNORM=Ur(Qt.BC5_UNORM,dr.RG,Qn.Normalized)]="BC5_UNORM",t[t.BC5_SNORM=Ur(Qt.BC5_SNORM,dr.RG,Qn.Normalized)]="BC5_SNORM",t[t.D24=Ur(Qt.D24,dr.R,Qn.Depth)]="D24",t[t.D24_S8=Ur(Qt.D24S8,dr.RG,Qn.Depth|Qn.Stencil)]="D24_S8",t[t.D32F=Ur(Qt.D32F,dr.R,Qn.Depth)]="D32F",t[t.D32F_S8=Ur(Qt.D32FS8,dr.RG,Qn.Depth|Qn.Stencil)]="D32F_S8",t[t.U8_RGB_RT=Ur(Qt.U8,dr.RGB,Qn.RenderTarget|Qn.Normalized)]="U8_RGB_RT",t[t.U8_RGBA_RT=Ur(Qt.U8,dr.RGBA,Qn.RenderTarget|Qn.Normalized)]="U8_RGBA_RT",t[t.U8_RGBA_RT_SRGB=Ur(Qt.U8,dr.RGBA,Qn.RenderTarget|Qn.Normalized|Qn.sRGB)]="U8_RGBA_RT_SRGB"})(Je||(Je={}));function ore(t){return t>>>8&255}function r0(t){return t>>>16&255}function dw(t){return t&255}function S6e(t){switch(t){case Qt.F32:case Qt.U32:case Qt.S32:return 4;case Qt.U16:case Qt.S16:case Qt.F16:return 2;case Qt.U8:case Qt.S8:return 1;default:throw new Error("whoops")}}function T6e(t){return S6e(r0(t))}function OYt(t){var e=S6e(r0(t)),n=ore(t);return e*n}function A6e(t){var e=dw(t);if(e&Qn.Depth)return Ls.Depth;if(e&Qn.Normalized)return Ls.Float;var n=r0(t);if(n===Qt.F16||n===Qt.F32)return Ls.Float;if(n===Qt.U8||n===Qt.U16||n===Qt.U32)return Ls.Uint;if(n===Qt.S8||n===Qt.S16||n===Qt.S32)return Ls.Sint;throw new Error("whoops")}function mi(t,e){if(e===void 0&&(e=""),!t)throw new Error("Assert fail: ".concat(e))}function VE(t){if(t!=null)return t;throw new Error("Missing object")}function w6e(t,e){return t.r===e.r&&t.g===e.g&&t.b===e.b&&t.a===e.a}function O6e(t,e){t.r=e.r,t.g=e.g,t.b=e.b,t.a=e.a}function C6e(t){var e=t.r,n=t.g,r=t.b,i=t.a;return{r:e,g:n,b:r,a:i}}function vN(t,e,n,r){return r===void 0&&(r=1),{r:t,g:e,b:n,a:r}}var k5=vN(0,0,0,0);vN(0,0,0,1);var CYt=vN(1,1,1,0);vN(1,1,1,1);function fF(t){return!!(t&&(t&t-1)===0)}function K1(t,e){return t??e}function RYt(t){return t===void 0?null:t}function hF(t,e){var n=e-1;return t+n&~n}function MYt(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}function PYt(t,e){e===void 0&&(e=1);var n=t.split(`
`);return n.map(function(r,i){return"".concat(NYt(""+(e+i),4," "),"  ").concat(r)}).join(`
`)}function NYt(t,e,n){for(;t.length<e;)t="".concat(n).concat(t);return t}function rEe(t,e){t.blendDstFactor=e.blendDstFactor,t.blendSrcFactor=e.blendSrcFactor,t.blendMode=e.blendMode}function dF(t,e){return t===void 0&&(t={}),t.compare=e.compare,t.depthFailOp=e.depthFailOp,t.passOp=e.passOp,t.failOp=e.failOp,t.mask=e.mask,t}function R6e(t,e){return t===void 0&&(t={rgbBlendState:{},alphaBlendState:{},channelWriteMask:0}),rEe(t.rgbBlendState,e.rgbBlendState),rEe(t.alphaBlendState,e.alphaBlendState),t.channelWriteMask=e.channelWriteMask,t}function M6e(t,e){t.length!==e.length&&(t.length=e.length);for(var n=0;n<e.length;n++)t[n]=R6e(t[n],e[n])}function IYt(t,e){e.attachmentsState!==void 0&&M6e(t.attachmentsState,e.attachmentsState),t.blendConstant&&e.blendConstant&&O6e(t.blendConstant,e.blendConstant),t.depthCompare=K1(e.depthCompare,t.depthCompare),t.depthWrite=K1(e.depthWrite,t.depthWrite),t.stencilWrite=K1(e.stencilWrite,t.stencilWrite),t.stencilFront&&e.stencilFront&&dF(t.stencilFront,e.stencilFront),t.stencilBack&&e.stencilBack&&dF(t.stencilBack,e.stencilBack),t.cullMode=K1(e.cullMode,t.cullMode),t.frontFace=K1(e.frontFace,t.frontFace),t.polygonOffset=K1(e.polygonOffset,t.polygonOffset),t.polygonOffsetFactor=K1(e.polygonOffsetFactor,t.polygonOffsetFactor),t.polygonOffsetUnits=K1(e.polygonOffsetUnits,t.polygonOffsetUnits)}function pw(t){var e=Object.assign({},t);return e.attachmentsState=[],M6e(e.attachmentsState,t.attachmentsState),e.blendConstant=e.blendConstant&&C6e(e.blendConstant),e.stencilFront=dF(void 0,t.stencilFront),e.stencilBack=dF(void 0,t.stencilBack),e}var iEe={blendMode:Pc.ADD,blendSrcFactor:Ji.ONE,blendDstFactor:Ji.ZERO},gw={attachmentsState:[{channelWriteMask:Cc.ALL,rgbBlendState:iEe,alphaBlendState:iEe}],blendConstant:C6e(k5),depthWrite:!0,depthCompare:Ua.LEQUAL,stencilWrite:!1,stencilFront:{compare:Ua.ALWAYS,passOp:ks.KEEP,depthFailOp:ks.KEEP,failOp:ks.KEEP},stencilBack:{compare:Ua.ALWAYS,passOp:ks.KEEP,depthFailOp:ks.KEEP,failOp:ks.KEEP},cullMode:kh.NONE,frontFace:iP.CCW,polygonOffset:!1,polygonOffsetFactor:0,polygonOffsetUnits:0};function LYt(t,e){t===void 0&&(t=null),e===void 0&&(e=gw);var n=pw(e);return t!==null&&IYt(n,t),n}LYt({depthCompare:Ua.ALWAYS,depthWrite:!1},gw);var P6e={texture:null,sampler:null,formatKind:Ls.Float,dimension:ea.TEXTURE_2D};function I_(t,e,n){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!n(t[r],e[r]))return!1;return!0}function iA(t,e){for(var n=Array(t.length),r=0;r<t.length;r++)n[r]=e(t[r]);return n}function kYt(t,e){return t.texture===e.texture&&t.binding===e.binding}function aEe(t,e){return t.buffer===e.buffer&&t.size===e.size&&t.binding===e.binding&&t.offset===e.offset}function DYt(t,e){return t===null?e===null:e===null?!1:t.sampler===e.sampler&&t.texture===e.texture&&t.dimension===e.dimension&&t.formatKind===e.formatKind&&t.comparison===e.comparison}function BYt(t,e){return t.samplerBindings=t.samplerBindings||[],t.uniformBufferBindings=t.uniformBufferBindings||[],t.storageBufferBindings=t.storageBufferBindings||[],t.storageTextureBindings=t.storageTextureBindings||[],e.samplerBindings=e.samplerBindings||[],e.uniformBufferBindings=e.uniformBufferBindings||[],e.storageBufferBindings=e.storageBufferBindings||[],e.storageTextureBindings=e.storageTextureBindings||[],!(t.samplerBindings.length!==e.samplerBindings.length||!I_(t.samplerBindings,e.samplerBindings,DYt)||!I_(t.uniformBufferBindings,e.uniformBufferBindings,aEe)||!I_(t.storageBufferBindings,e.storageBufferBindings,aEe)||!I_(t.storageTextureBindings,e.storageTextureBindings,kYt))}function oEe(t,e){return t.blendMode==e.blendMode&&t.blendSrcFactor===e.blendSrcFactor&&t.blendDstFactor===e.blendDstFactor}function FYt(t,e){return!(!oEe(t.rgbBlendState,e.rgbBlendState)||!oEe(t.alphaBlendState,e.alphaBlendState)||t.channelWriteMask!==e.channelWriteMask)}function pF(t,e){return t.compare==e.compare&&t.depthFailOp===e.depthFailOp&&t.failOp===e.failOp&&t.passOp===e.passOp&&t.mask===e.mask}function UYt(t,e){return!I_(t.attachmentsState,e.attachmentsState,FYt)||t.blendConstant&&e.blendConstant&&!w6e(t.blendConstant,e.blendConstant)||t.stencilFront&&e.stencilFront&&!pF(t.stencilFront,e.stencilFront)||t.stencilBack&&e.stencilBack&&!pF(t.stencilBack,e.stencilBack)?!1:t.depthCompare===e.depthCompare&&t.depthWrite===e.depthWrite&&t.stencilWrite===e.stencilWrite&&t.cullMode===e.cullMode&&t.frontFace===e.frontFace&&t.polygonOffset===e.polygonOffset&&t.polygonOffsetFactor===e.polygonOffsetFactor&&t.polygonOffsetUnits===e.polygonOffsetUnits}function N6e(t,e){return t.id===e.id}function jYt(t,e){return t===e}function zYt(t,e){return!(t.topology!==e.topology||t.inputLayout!==e.inputLayout||t.sampleCount!==e.sampleCount||t.megaStateDescriptor&&e.megaStateDescriptor&&!UYt(t.megaStateDescriptor,e.megaStateDescriptor)||!N6e(t.program,e.program)||!I_(t.colorAttachmentFormats,e.colorAttachmentFormats,jYt)||t.depthStencilAttachmentFormat!==e.depthStencilAttachmentFormat)}function $Yt(t,e){return t.offset===e.offset&&t.shaderLocation===e.shaderLocation&&t.format===e.format&&t.divisor===e.divisor}function HYt(t,e){return Kn(t)?Kn(e):Kn(e)?!1:t.arrayStride===e.arrayStride&&t.stepMode===e.stepMode&&I_(t.attributes,e.attributes,$Yt)}function GYt(t,e){return!(t.indexBufferFormat!==e.indexBufferFormat||!I_(t.vertexBufferDescriptors,e.vertexBufferDescriptors,HYt)||!N6e(t.program,e.program))}function WYt(t){var e=t.sampler,n=t.texture,r=t.dimension,i=t.formatKind,a=t.comparison;return{sampler:e,texture:n,dimension:r,formatKind:i,comparison:a}}function sEe(t){var e=t.buffer,n=t.size,r=t.binding,i=t.offset;return{binding:r,buffer:e,offset:i,size:n}}function VYt(t){var e=t.binding,n=t.texture;return{binding:e,texture:n}}function YYt(t){var e=t.samplerBindings&&iA(t.samplerBindings,WYt),n=t.uniformBufferBindings&&iA(t.uniformBufferBindings,sEe),r=t.storageBufferBindings&&iA(t.storageBufferBindings,sEe),i=t.storageTextureBindings&&iA(t.storageTextureBindings,VYt);return{samplerBindings:e,uniformBufferBindings:n,storageBufferBindings:r,storageTextureBindings:i,pipeline:t.pipeline}}function XYt(t){var e=t.inputLayout,n=t.program,r=t.topology,i=t.megaStateDescriptor&&pw(t.megaStateDescriptor),a=t.colorAttachmentFormats.slice(),o=t.depthStencilAttachmentFormat,s=t.sampleCount;return{inputLayout:e,megaStateDescriptor:i,program:n,topology:r,colorAttachmentFormats:a,depthStencilAttachmentFormat:o,sampleCount:s}}function qYt(t){var e=t.shaderLocation,n=t.format,r=t.offset,i=t.divisor;return{shaderLocation:e,format:n,offset:r,divisor:i}}function ZYt(t){if(Kn(t))return t;var e=t.arrayStride,n=t.stepMode,r=iA(t.attributes,qYt);return{arrayStride:e,stepMode:n,attributes:r}}function KYt(t){var e=iA(t.vertexBufferDescriptors,ZYt),n=t.indexBufferFormat,r=t.program;return{vertexBufferDescriptors:e,indexBufferFormat:n,program:r}}var aa,QYt=/([^[]*)(\[[0-9]+\])?/;function JYt(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};var e=t.match(QYt);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:e[1],length:Number(e[2])||1,isArray:!!e[2]}}function Uf(){var t=null;return function(e,n,r){var i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function Cs(t,e,n,r){var i=null,a=null;return function(o,s,l){var c=e(l,n),u=c.length,f=!1;if(i===null)i=new Float32Array(u),a=u,f=!0;else{mi(a===u,"Uniform length cannot change.");for(var h=0;h<u;++h)if(c[h]!==i[h]){f=!0;break}}return f&&(r(o,t,s,c),i.set(c)),f}}function Qu(t,e,n,r){t[e](n,r)}function W0(t,e,n,r){t[e](n,!1,r)}var eXt={},tXt={},nXt={},lEe=[0];function sre(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(lEe[0]=t,t=lEe);var i=t.length;if(t instanceof n)return t;var a=r[i];a||(a=new n(i),r[i]=a);for(var o=0;o<i;o++)a[o]=t[o];return a}function pd(t,e){return sre(t,e,Float32Array,eXt)}function Q1(t,e){return sre(t,e,Int32Array,tXt)}function ML(t,e){return sre(t,e,Uint32Array,nXt)}var rXt=(aa={},aa[ke.FLOAT]=Cs.bind(null,"uniform1fv",pd,1,Qu),aa[ke.FLOAT_VEC2]=Cs.bind(null,"uniform2fv",pd,2,Qu),aa[ke.FLOAT_VEC3]=Cs.bind(null,"uniform3fv",pd,3,Qu),aa[ke.FLOAT_VEC4]=Cs.bind(null,"uniform4fv",pd,4,Qu),aa[ke.INT]=Cs.bind(null,"uniform1iv",Q1,1,Qu),aa[ke.INT_VEC2]=Cs.bind(null,"uniform2iv",Q1,2,Qu),aa[ke.INT_VEC3]=Cs.bind(null,"uniform3iv",Q1,3,Qu),aa[ke.INT_VEC4]=Cs.bind(null,"uniform4iv",Q1,4,Qu),aa[ke.BOOL]=Cs.bind(null,"uniform1iv",Q1,1,Qu),aa[ke.BOOL_VEC2]=Cs.bind(null,"uniform2iv",Q1,2,Qu),aa[ke.BOOL_VEC3]=Cs.bind(null,"uniform3iv",Q1,3,Qu),aa[ke.BOOL_VEC4]=Cs.bind(null,"uniform4iv",Q1,4,Qu),aa[ke.FLOAT_MAT2]=Cs.bind(null,"uniformMatrix2fv",pd,4,W0),aa[ke.FLOAT_MAT3]=Cs.bind(null,"uniformMatrix3fv",pd,9,W0),aa[ke.FLOAT_MAT4]=Cs.bind(null,"uniformMatrix4fv",pd,16,W0),aa[ke.UNSIGNED_INT]=Cs.bind(null,"uniform1uiv",ML,1,Qu),aa[ke.UNSIGNED_INT_VEC2]=Cs.bind(null,"uniform2uiv",ML,2,Qu),aa[ke.UNSIGNED_INT_VEC3]=Cs.bind(null,"uniform3uiv",ML,3,Qu),aa[ke.UNSIGNED_INT_VEC4]=Cs.bind(null,"uniform4uiv",ML,4,Qu),aa[ke.FLOAT_MAT2x3]=Cs.bind(null,"uniformMatrix2x3fv",pd,6,W0),aa[ke.FLOAT_MAT2x4]=Cs.bind(null,"uniformMatrix2x4fv",pd,8,W0),aa[ke.FLOAT_MAT3x2]=Cs.bind(null,"uniformMatrix3x2fv",pd,6,W0),aa[ke.FLOAT_MAT3x4]=Cs.bind(null,"uniformMatrix3x4fv",pd,12,W0),aa[ke.FLOAT_MAT4x2]=Cs.bind(null,"uniformMatrix4x2fv",pd,8,W0),aa[ke.FLOAT_MAT4x3]=Cs.bind(null,"uniformMatrix4x3fv",pd,12,W0),aa[ke.SAMPLER_2D]=Uf,aa[ke.SAMPLER_CUBE]=Uf,aa[ke.SAMPLER_3D]=Uf,aa[ke.SAMPLER_2D_SHADOW]=Uf,aa[ke.SAMPLER_2D_ARRAY]=Uf,aa[ke.SAMPLER_2D_ARRAY_SHADOW]=Uf,aa[ke.SAMPLER_CUBE_SHADOW]=Uf,aa[ke.INT_SAMPLER_2D]=Uf,aa[ke.INT_SAMPLER_3D]=Uf,aa[ke.INT_SAMPLER_CUBE]=Uf,aa[ke.INT_SAMPLER_2D_ARRAY]=Uf,aa[ke.UNSIGNED_INT_SAMPLER_2D]=Uf,aa[ke.UNSIGNED_INT_SAMPLER_3D]=Uf,aa[ke.UNSIGNED_INT_SAMPLER_CUBE]=Uf,aa[ke.UNSIGNED_INT_SAMPLER_2D_ARRAY]=Uf,aa);function cEe(t,e,n){var r=rXt[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}var iXt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function aXt(t){return Object.prototype.toString.call(t)in iXt}function k2(t,e){return"#define ".concat(t," ").concat(e)}function oXt(t){var e={};return t.replace(/^\s*#define\s*(\S*)\s*(\S*)\s*$/gm,function(n,r,i){var a=Number(i);return e[r]=isNaN(a)?i:a,""}),e}function sXt(t,e){var n=[];return t.replace(/^\s*layout\(location\s*=\s*(\S*)\)\s*in\s+\S+\s*(.*);$/gm,function(r,i,a){var o=Number(i);return n.push({location:isNaN(o)?e[i]:o,name:a}),""}),n}function uEe(t){if(t===void 0)return null;var e=/binding\s*=\s*(\d+)/.exec(t);if(e!==null){var n=parseInt(e[1],10);if(!Number.isNaN(n))return n}return null}function fEe(t){var e="",n=t;return[n,e]}function vw(t,e,n,r,i){var a;r===void 0&&(r=null),i===void 0&&(i=!0);var o=t.glslVersion==="#version 100",s=e==="frag"&&((a=n.match(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm))===null||a===void 0?void 0:a.length)>1,l=n.replace(`\r
`,`
`).split(`
`).map(function(S){return S.replace(/[/][/].*$/,"")}).filter(function(S){var w=!S||/^\s+$/.test(S);return!w}),c="";r!==null&&(c=Object.keys(r).map(function(S){return k2(S,r[S])}).join(`
`));var u=l.find(function(S){return S.startsWith("precision")})||"precision mediump float;",f=i?l.filter(function(S){return!S.startsWith("precision")}).join(`
`):l.join(`
`),h="";if(t.viewportOrigin===Yg.UPPER_LEFT&&(h+="".concat(k2("VIEWPORT_ORIGIN_TL","1"),`
`)),t.clipSpaceNearZ===hw.ZERO&&(h+="".concat(k2("CLIPSPACE_NEAR_ZERO","1"),`
`)),t.explicitBindingLocations){var d=0,p=0,g=0;f=f.replace(/^\s*(layout\((.*)\))?\s*uniform(.+{)$/gm,function(S,w,C,D){var L=C?"".concat(C,", "):"";return"layout(".concat(L,"set = ").concat(d,", binding = ").concat(p++,") uniform ").concat(D)}),d++,p=0,mi(t.separateSamplerTextures),f=f.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(S,w,C,D,L){var B=uEe(C);B===null&&(B=p++);var I=Ae(fEe(D),2),U=I[0],$=I[1];return e==="frag"?`
layout(set = `.concat(d,", binding = ").concat(B*2+0,") uniform texture").concat(U," T_").concat(L,`;
layout(set = `).concat(d,", binding = ").concat(B*2+1,") uniform sampler").concat($," S_").concat(L,";").trim():""}),f=f.replace(e==="frag"?/^\s*\b(varying|in)\b/gm:/^\s*\b(varying|out)\b/gm,function(S,w){return"layout(location = ".concat(g++,") ").concat(w)}),h+="".concat(k2("gl_VertexID","gl_VertexIndex"),`
`),h+="".concat(k2("gl_InstanceID","gl_InstanceIndex"),`
`),u=u.replace(/^precision (.*) sampler(.*);$/gm,"")}else{var v=0;f=f.replace(/^\s*(layout\((.*)\))?\s*uniform sampler(\w+) (.*);/gm,function(S,w,C,D,L){var B=uEe(C);return B===null&&(B=v++),"uniform sampler".concat(D," ").concat(L,"; // BINDING=").concat(B)})}if(f=f.replace(/\bPU_SAMPLER_(\w+)\((.*?)\)/g,function(S,w,C){return"SAMPLER_".concat(w,"(P_").concat(C,")")}),f=f.replace(/\bPF_SAMPLER_(\w+)\((.*?)\)/g,function(S,w,C){return"PP_SAMPLER_".concat(w,"(P_").concat(C,")")}),f=f.replace(/\bPU_TEXTURE\((.*?)\)/g,function(S,w){return"TEXTURE(P_".concat(w,")")}),t.separateSamplerTextures)f=f.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(S,w,C){var D=Ae(fEe(w),2),L=D[0],B=D[1];return"texture".concat(L," T_P_").concat(C,", sampler").concat(B," S_P_").concat(C)}),f=f.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(S,w,C){return"T_".concat(C,", S_").concat(C)}),f=f.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(S,w,C){return"sampler".concat(w,"(T_").concat(C,", S_").concat(C,")")}),f=f.replace(/\bTEXTURE\((.*?)\)/g,function(S,w){return"T_".concat(w)});else{var y=[];f=f.replace(/\bPD_SAMPLER_(\w+)\((.*?)\)/g,function(S,w,C){return"sampler".concat(w," P_").concat(C)}),f=f.replace(/\bPP_SAMPLER_(\w+)\((.*?)\)/g,function(S,w,C){return C}),f=f.replace(/\bSAMPLER_(\w+)\((.*?)\)/g,function(S,w,C){return y.push([C,w]),C}),o&&y.forEach(function(S){var w=Ae(S,2),C=w[0],D=w[1];f=f.replace(new RegExp("texture\\(".concat(C),"g"),function(){return"texture".concat(D,"(").concat(C)})}),f=f.replace(/\bTEXTURE\((.*?)\)/g,function(S,w){return w})}var _="".concat(o?"":t.glslVersion,`
`).concat(o&&s?`#extension GL_EXT_draw_buffers : require
`:"",`
`).concat(o&&e==="frag"?`#extension GL_OES_standard_derivatives : enable
`:"").concat(i?u:"",`
`).concat(h||"").concat(c?c+`
`:"",`
`).concat(f,`
`).trim();if(t.explicitBindingLocations&&e==="frag"&&(_=_.replace(/^\b(out)\b/g,function(S,w){return"layout(location = 0) ".concat(w)})),o){if(e==="frag"&&(_=_.replace(/^\s*in\s+(\S+)\s*(.*);$/gm,function(S,w,C){return"varying ".concat(w," ").concat(C,`;
`)})),e==="vert"&&(_=_.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(S,w,C){return"varying ".concat(w," ").concat(C,`;
`)}),_=_.replace(/^\s*layout\(location\s*=\s*\S*\)\s*in\s+(\S+)\s*(.*);$/gm,function(S,w,C){return"attribute ".concat(w," ").concat(C,`;
`)})),_=_.replace(/\s*uniform\s*.*\s*{((?:\s*.*\s*)*?)};/g,function(S,w){return w.trim().replace(/^.*$/gm,function(C){var D=C.trim();return D.startsWith("#")?D:C?"uniform ".concat(D):""})}),e==="frag")if(s){var E=[];_=_.replace(/^\s*layout\(location\s*=\s*\d*\)\s*out\s+vec4\s*(.*);$/gm,function(S,w){return E.push(w),"vec4 ".concat(w,`;
`)});var x=_.lastIndexOf("}");_=_.substring(0,x)+`
    `.concat(E.map(function(S,w){return"gl_FragData[".concat(w,"] = ").concat(S,`;
    `)}).join(`
`))+_.substring(x)}else{var T;if(_=_.replace(/^\s*out\s+(\S+)\s*(.*);$/gm,function(S,w,C){return T=C,"".concat(w," ").concat(C,`;
`)}),T){var x=_.lastIndexOf("}");_=_.substring(0,x)+`
  gl_FragColor = vec4(`.concat(T,`);
`)+_.substring(x)}}_=_.replace(/^\s*layout\((.*)\)/gm,"")}return _}var tg=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=t.call(this)||this;return a.id=r,a.device=i,a.device.resourceCreationTracker!==null&&a.device.resourceCreationTracker.trackResourceCreated(a),a}return e.prototype.destroy=function(){this.device.resourceCreationTracker!==null&&this.device.resourceCreationTracker.trackResourceDestroyed(this)},e})(Cw),lXt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;o.type=Aa.Bindings;var s=a.uniformBufferBindings,l=a.samplerBindings;return o.uniformBufferBindings=s||[],o.samplerBindings=l||[],o.bindingLayouts=o.createBindingLayouts(),o}return e.prototype.createBindingLayouts=function(){var n=0,r=0,i=[],a=this.uniformBufferBindings.length,o=this.samplerBindings.length;return i.push({firstUniformBuffer:n,numUniformBuffers:a,firstSampler:r,numSamplers:o}),n+=a,r+=o,{numUniformBuffers:n,numSamplers:r,bindingLayoutTables:i}},e})(tg),D2;function wr(t){return D2!==void 0?D2:typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?(D2=!0,!0):(D2=!!(t&&t._version===2),D2)}function I6e(t){var e=r0(t);switch(e){case Qt.BC1:case Qt.BC2:case Qt.BC3:case Qt.BC4_UNORM:case Qt.BC4_SNORM:case Qt.BC5_UNORM:case Qt.BC5_SNORM:return!0;default:return!1}}function L6e(t){var e=dw(t);if(e&Qn.Normalized)return!1;var n=r0(t);return n===Qt.S8||n===Qt.S16||n===Qt.S32||n===Qt.U8||n===Qt.U16||n===Qt.U32}function cXt(t){switch(t){case Kg.STATIC:return ke.STATIC_DRAW;case Kg.DYNAMIC:return ke.DYNAMIC_DRAW}}function hEe(t){if(t&mo.INDEX)return ke.ELEMENT_ARRAY_BUFFER;if(t&mo.VERTEX)return ke.ARRAY_BUFFER;if(t&mo.UNIFORM)return ke.UNIFORM_BUFFER}function uXt(t){switch(t){case Rl.TRIANGLES:return ke.TRIANGLES;case Rl.POINTS:return ke.POINTS;case Rl.TRIANGLE_STRIP:return ke.TRIANGLE_STRIP;case Rl.LINES:return ke.LINES;case Rl.LINE_STRIP:return ke.LINE_STRIP;default:throw new Error("Unknown primitive topology mode")}}function fXt(t){switch(t){case Qt.U8:return ke.UNSIGNED_BYTE;case Qt.U16:return ke.UNSIGNED_SHORT;case Qt.U32:return ke.UNSIGNED_INT;case Qt.S8:return ke.BYTE;case Qt.S16:return ke.SHORT;case Qt.S32:return ke.INT;case Qt.F16:return ke.HALF_FLOAT;case Qt.F32:return ke.FLOAT;default:throw new Error("whoops")}}function hXt(t){switch(t){case dr.R:return 1;case dr.RG:return 2;case dr.RGB:return 3;case dr.RGBA:return 4;default:return 1}}function dXt(t){var e=r0(t),n=ore(t),r=dw(t),i=fXt(e),a=hXt(n),o=!!(r&Qn.Normalized);return{size:a,type:i,normalized:o}}function pXt(t){switch(t){case Je.U8_R:return ke.UNSIGNED_BYTE;case Je.U16_R:return ke.UNSIGNED_SHORT;case Je.U32_R:return ke.UNSIGNED_INT;default:throw new Error("whoops")}}function B2(t){switch(t){case Xf.CLAMP_TO_EDGE:return ke.CLAMP_TO_EDGE;case Xf.REPEAT:return ke.REPEAT;case Xf.MIRRORED_REPEAT:return ke.MIRRORED_REPEAT;default:throw new Error("whoops")}}function PL(t,e){if(e===hc.LINEAR&&t===Ys.BILINEAR)return ke.LINEAR_MIPMAP_LINEAR;if(e===hc.LINEAR&&t===Ys.POINT)return ke.NEAREST_MIPMAP_LINEAR;if(e===hc.NEAREST&&t===Ys.BILINEAR)return ke.LINEAR_MIPMAP_NEAREST;if(e===hc.NEAREST&&t===Ys.POINT)return ke.NEAREST_MIPMAP_NEAREST;if(e===hc.NO_MIP&&t===Ys.BILINEAR)return ke.LINEAR;if(e===hc.NO_MIP&&t===Ys.POINT)return ke.NEAREST;throw new Error("Unknown texture filter mode")}function MA(t,e){e===void 0&&(e=0);var n=t;return n.gl_buffer_pages[e/n.pageByteSize|0]}function HT(t){var e=t;return e.gl_texture}function UZ(t){var e=t;return e.gl_sampler}function F2(t,e){t.name=e,t.__SPECTOR_Metadata={name:e}}function dEe(t,e){for(var n=[];;){var r=e.exec(t);if(!r)break;n.push(r)}return n}function J1(t){return t.blendMode==Pc.ADD&&t.blendSrcFactor==Ji.ONE&&t.blendDstFactor===Ji.ZERO}function gXt(t){switch(t){case uF.OcclusionConservative:return ke.ANY_SAMPLES_PASSED_CONSERVATIVE;default:throw new Error("whoops")}}function vXt(t){if(t===ea.TEXTURE_2D)return ke.TEXTURE_2D;if(t===ea.TEXTURE_2D_ARRAY)return ke.TEXTURE_2D_ARRAY;if(t===ea.TEXTURE_CUBE_MAP)return ke.TEXTURE_CUBE_MAP;if(t===ea.TEXTURE_3D)return ke.TEXTURE_3D;throw new Error("whoops")}function sV(t,e,n,r){return!(t%n!==0||e%r!==0)}var mXt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;o.type=Aa.Buffer;var s=a.viewOrSize,l=a.usage,c=a.hint,u=c===void 0?Kg.STATIC:c,f=i.uniformBufferMaxPageByteSize,h=i.gl,d=l&mo.UNIFORM;d||(wr(h)?h.bindVertexArray(null):i.OES_vertex_array_object.bindVertexArrayOES(null));var p=Ln(s)?hF(s,4):hF(s.byteLength,4);o.gl_buffer_pages=[];var g;if(d){for(var v=p;v>0;)o.gl_buffer_pages.push(o.createBufferPage(Math.min(v,f),l,u)),v-=f;g=f}else o.gl_buffer_pages.push(o.createBufferPage(p,l,u)),g=p;return o.pageByteSize=g,o.byteSize=p,o.usage=l,o.gl_target=hEe(l),Ln(s)||o.setSubData(0,new Uint8Array(s.buffer)),d||(wr(h)?h.bindVertexArray(o.device.currentBoundVAO):i.OES_vertex_array_object.bindVertexArrayOES(o.device.currentBoundVAO)),o}return e.prototype.setSubData=function(n,r,i,a){i===void 0&&(i=0),a===void 0&&(a=r.byteLength-i);for(var o=this.device.gl,s=this.pageByteSize,l=n+a,c=n,u=n%s;c<l;){var f=wr(o)?o.COPY_WRITE_BUFFER:this.gl_target,h=MA(this,c);if(h.ubo)return;o.bindBuffer(f,h),wr(o)?o.bufferSubData(f,u,r,i,Math.min(l-c,s)):o.bufferSubData(f,u,r),c+=s,u=0,i+=s,this.device.debugGroupStatisticsBufferUpload()}},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var n=0;n<this.gl_buffer_pages.length;n++)this.gl_buffer_pages[n].ubo||this.device.gl.deleteBuffer(this.gl_buffer_pages[n]);this.gl_buffer_pages=[]},e.prototype.createBufferPage=function(n,r,i){var a=this.device.gl,o=r&mo.UNIFORM;if(!wr(a)&&o)return{ubo:!0};var s=this.device.ensureResourceExists(a.createBuffer()),l=hEe(r),c=cXt(i);return a.bindBuffer(l,s),a.bufferData(l,n,c),s},e})(tg),yXt=(function(t){Cr(e,t);function e(n){var r,i,a,o,s=n.id,l=n.device,c=n.descriptor,u,f=t.call(this,{id:s,device:l})||this;f.type=Aa.InputLayout;var h=c.vertexBufferDescriptors,d=c.indexBufferFormat,p=c.program;mi(d===Je.U16_R||d===Je.U32_R||d===null);var g=d!==null?pXt(d):null,v=d!==null?T6e(d):null,y=f.device.gl,_=f.device.ensureResourceExists(wr(y)?y.createVertexArray():l.OES_vertex_array_object.createVertexArrayOES());wr(y)?y.bindVertexArray(_):l.OES_vertex_array_object.bindVertexArrayOES(_),y.bindBuffer(y.ARRAY_BUFFER,MA(f.device.fallbackVertexBuffer));try{for(var E=$p(c.vertexBufferDescriptors),x=E.next();!x.done;x=E.next()){var T=x.value,S=T.stepMode,w=T.attributes;try{for(var C=(a=void 0,$p(w)),D=C.next();!D.done;D=C.next()){var L=D.value,B=L.shaderLocation,I=L.format,U=L.divisor,$=U===void 0?1:U,X=wr(y)?B:(u=p.attributes[B])===null||u===void 0?void 0:u.location,N=dXt(I);if(L.vertexFormat=N,!Kn(X)){L6e(I);var M=N.size,k=N.type,z=N.normalized;y.vertexAttribPointer(X,M,k,z,0,0),S===Fx.INSTANCE&&(wr(y)?y.vertexAttribDivisor(X,$):l.ANGLE_instanced_arrays.vertexAttribDivisorANGLE(X,$)),y.enableVertexAttribArray(X)}}}catch(j){a={error:j}}finally{try{D&&!D.done&&(o=C.return)&&o.call(C)}finally{if(a)throw a.error}}}}catch(j){r={error:j}}finally{try{x&&!x.done&&(i=E.return)&&i.call(E)}finally{if(r)throw r.error}}return wr(y)?y.bindVertexArray(null):l.OES_vertex_array_object.bindVertexArrayOES(null),f.vertexBufferDescriptors=h,f.vao=_,f.indexBufferFormat=d,f.indexBufferType=g,f.indexBufferCompByteSize=v,f.program=p,f}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.currentBoundVAO===this.vao&&(wr(this.device.gl)?(this.device.gl.bindVertexArray(null),this.device.gl.deleteVertexArray(this.vao)):(this.device.OES_vertex_array_object.bindVertexArrayOES(null),this.device.OES_vertex_array_object.deleteVertexArrayOES(this.vao)),this.device.currentBoundVAO=null)},e})(tg),jZ=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=n.fake,s=t.call(this,{id:r,device:i})||this;s.type=Aa.Texture,a=Ot({dimension:ea.TEXTURE_2D,depthOrArrayLayers:1,mipLevelCount:1},a);var l=s.device.gl,c,u,f=s.clampmipLevelCount(a);if(s.immutable=a.usage===uf.RENDER_TARGET,s.pixelStore=a.pixelStore,s.format=a.format,s.dimension=a.dimension,s.formatKind=A6e(a.format),s.width=a.width,s.height=a.height,s.depthOrArrayLayers=a.depthOrArrayLayers,s.mipmaps=f>=1,!o){u=s.device.ensureResourceExists(l.createTexture());var h=s.device.translateTextureType(a.format),d=s.device.translateTextureInternalFormat(a.format);if(s.device.setActiveTexture(l.TEXTURE0),s.device.currentTextures[0]=null,s.preprocessImage(),a.dimension===ea.TEXTURE_2D){if(c=ke.TEXTURE_2D,l.bindTexture(c,u),s.immutable)if(wr(l))l.texStorage2D(c,f,d,a.width,a.height);else{var p=(d===ke.DEPTH_COMPONENT||s.isNPOT(),0);(s.format===Je.D32F||s.format===Je.D24_S8)&&!wr(l)&&!i.WEBGL_depth_texture||(l.texImage2D(c,p,d,a.width,a.height,0,d,h,null),s.mipmaps&&(s.mipmaps=!1,l.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,ke.LINEAR),l.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_S,ke.CLAMP_TO_EDGE),l.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_T,ke.CLAMP_TO_EDGE)))}mi(a.depthOrArrayLayers===1)}else if(a.dimension===ea.TEXTURE_2D_ARRAY)c=ke.TEXTURE_2D_ARRAY,l.bindTexture(c,u),s.immutable&&wr(l)&&l.texStorage3D(c,f,d,a.width,a.height,a.depthOrArrayLayers);else if(a.dimension===ea.TEXTURE_3D)c=ke.TEXTURE_3D,l.bindTexture(c,u),s.immutable&&wr(l)&&l.texStorage3D(c,f,d,a.width,a.height,a.depthOrArrayLayers);else if(a.dimension===ea.TEXTURE_CUBE_MAP)c=ke.TEXTURE_CUBE_MAP,l.bindTexture(c,u),s.immutable&&wr(l)&&l.texStorage2D(c,f,d,a.width,a.height),mi(a.depthOrArrayLayers===6);else throw new Error("whoops")}return s.gl_texture=u,s.gl_target=c,s.mipLevelCount=f,s}return e.prototype.setImageData=function(n,r){r===void 0&&(r=0);var i=this.device.gl;I6e(this.format);var a=this.gl_target===ke.TEXTURE_3D||this.gl_target===ke.TEXTURE_2D_ARRAY,o=this.gl_target===ke.TEXTURE_CUBE_MAP,s=aXt(n[0]);this.device.setActiveTexture(i.TEXTURE0),this.device.currentTextures[0]=null;var l=n[0],c,u;s?(c=this.width,u=this.height):(c=l.width,u=l.height,this.width=c,this.height=u),i.bindTexture(this.gl_target,this.gl_texture);var f=this.device.translateTextureFormat(this.format),h=wr(i)?this.device.translateInternalTextureFormat(this.format):f,d=this.device.translateTextureType(this.format);this.preprocessImage();for(var p=0;p<this.depthOrArrayLayers;p++){var g=n[p],v=this.gl_target;o&&(v=ke.TEXTURE_CUBE_MAP_POSITIVE_X+p%6),this.immutable?i.texSubImage2D(v,r,0,0,c,u,f,d,g):wr(i)?a?i.texImage3D(v,r,h,c,u,this.depthOrArrayLayers,0,f,d,g):i.texImage2D(v,r,h,c,u,0,f,d,g):s?i.texImage2D(v,r,f,c,u,0,f,d,g):i.texImage2D(v,r,f,f,d,g)}this.mipmaps&&this.generateMipmap(a)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.gl.deleteTexture(HT(this))},e.prototype.clampmipLevelCount=function(n){if(n.dimension===ea.TEXTURE_2D_ARRAY&&n.depthOrArrayLayers>1){var r=r0(n.format);if(r===Qt.BC1)for(var i=n.width,a=n.height,o=0;o<n.mipLevelCount;o++){if(i<=2||a<=2)return o-1;i=Math.max(i/2|0,1),a=Math.max(a/2|0,1)}}return n.mipLevelCount},e.prototype.preprocessImage=function(){var n=this.device.gl;this.pixelStore&&(this.pixelStore.unpackFlipY&&n.pixelStorei(ke.UNPACK_FLIP_Y_WEBGL,!0),this.pixelStore.packAlignment&&n.pixelStorei(ke.PACK_ALIGNMENT,this.pixelStore.packAlignment),this.pixelStore.unpackAlignment&&n.pixelStorei(ke.UNPACK_ALIGNMENT,this.pixelStore.unpackAlignment))},e.prototype.generateMipmap=function(n){n===void 0&&(n=!1);var r=this.device.gl;return!wr(r)&&this.isNPOT()?this:(this.gl_texture&&this.gl_target&&(r.bindTexture(this.gl_target,this.gl_texture),n?(r.texParameteri(this.gl_target,ke.TEXTURE_BASE_LEVEL,0),r.texParameteri(this.gl_target,ke.TEXTURE_MAX_LEVEL,Math.log2(this.width)),r.texParameteri(this.gl_target,ke.TEXTURE_MIN_FILTER,ke.LINEAR_MIPMAP_LINEAR),r.texParameteri(this.gl_target,ke.TEXTURE_MAG_FILTER,ke.LINEAR)):r.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,ke.NEAREST_MIPMAP_LINEAR),r.generateMipmap(this.gl_target),r.bindTexture(this.gl_target,null)),this)},e.prototype.isNPOT=function(){var n=this.device.gl;return wr(n)?!1:!fF(this.width)||!fF(this.height)},e})(tg),_Xt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;o.type=Aa.RenderTarget,o.gl_renderbuffer=null,o.texture=null;var s=o.device.gl,l=a.format,c=a.width,u=a.height,f=a.sampleCount,h=f===void 0?1:f,d=a.texture,p=!1;if((l===Je.D32F||l===Je.D24_S8)&&d&&!wr(s)&&!i.WEBGL_depth_texture&&(d.destroy(),o.texture=null,p=!0),!p&&d)o.texture=d;else{o.gl_renderbuffer=o.device.ensureResourceExists(s.createRenderbuffer()),s.bindRenderbuffer(s.RENDERBUFFER,o.gl_renderbuffer);var g=o.device.translateTextureInternalFormat(l,!0);wr(s)&&h>1?s.renderbufferStorageMultisample(ke.RENDERBUFFER,h,g,c,u):s.renderbufferStorage(ke.RENDERBUFFER,g,c,u)}return o.format=l,o.width=c,o.height=u,o.sampleCount=h,o}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gl_renderbuffer!==null&&this.device.gl.deleteRenderbuffer(this.gl_renderbuffer),this.texture&&this.texture.destroy()},e})(tg),Ch;(function(t){t[t.NeedsCompile=0]="NeedsCompile",t[t.Compiling=1]="Compiling",t[t.NeedsBind=2]="NeedsBind",t[t.ReadyToUse=3]="ReadyToUse"})(Ch||(Ch={}));var bXt=(function(t){Cr(e,t);function e(n,r){var i=n.id,a=n.device,o=n.descriptor,s=t.call(this,{id:i,device:a})||this;s.rawVertexGLSL=r,s.type=Aa.Program,s.uniformSetters={},s.attributes=[];var l=s.device.gl;return s.descriptor=o,s.gl_program=s.device.ensureResourceExists(l.createProgram()),s.gl_shader_vert=null,s.gl_shader_frag=null,s.compileState=Ch.NeedsCompile,s.tryCompileProgram(),s}return e.prototype.destroy=function(){t.prototype.destroy.call(this),this.device.gl.deleteProgram(this.gl_program),this.device.gl.deleteShader(this.gl_shader_vert),this.device.gl.deleteShader(this.gl_shader_frag)},e.prototype.tryCompileProgram=function(){mi(this.compileState===Ch.NeedsCompile);var n=this.descriptor,r=n.vertex,i=n.fragment,a=this.device.gl;r?.glsl&&i?.glsl&&(this.gl_shader_vert=this.compileShader(r.postprocess?r.postprocess(r.glsl):r.glsl,a.VERTEX_SHADER),this.gl_shader_frag=this.compileShader(i.postprocess?i.postprocess(i.glsl):i.glsl,a.FRAGMENT_SHADER),a.attachShader(this.gl_program,this.gl_shader_vert),a.attachShader(this.gl_program,this.gl_shader_frag),a.linkProgram(this.gl_program),this.compileState=Ch.Compiling,wr(a)||(this.readUniformLocationsFromLinkedProgram(),this.readAttributesFromLinkedProgram()))},e.prototype.readAttributesFromLinkedProgram=function(){for(var n,r=this.device.gl,i=r.getProgramParameter(this.gl_program,r.ACTIVE_ATTRIBUTES),a=oXt(this.descriptor.vertex.glsl),o=sXt(this.rawVertexGLSL,a),s=function(u){var f=r.getActiveAttrib(l.gl_program,u),h=f.name,d=f.type,p=f.size,g=r.getAttribLocation(l.gl_program,h),v=(n=o.find(function(y){return y.name===h}))===null||n===void 0?void 0:n.location;g>=0&&!Kn(v)&&(l.attributes[v]={name:h,location:g,type:d,size:p})},l=this,c=0;c<i;c++)s(c)},e.prototype.readUniformLocationsFromLinkedProgram=function(){for(var n=this.device.gl,r=n.getProgramParameter(this.gl_program,n.ACTIVE_UNIFORMS),i=0;i<r;i++){var a=n.getActiveUniform(this.gl_program,i),o=JYt(a.name).name,s=n.getUniformLocation(this.gl_program,o);if(this.uniformSetters[o]=cEe(n,s,a),a&&a.size>1)for(var l=0;l<a.size;l++)s=n.getUniformLocation(this.gl_program,"".concat(o,"[").concat(l,"]")),this.uniformSetters["".concat(o,"[").concat(l,"]")]=cEe(n,s,a)}},e.prototype.compileShader=function(n,r){var i=this.device.gl,a=this.device.ensureResourceExists(i.createShader(r));return i.shaderSource(a,n),i.compileShader(a),a},e.prototype.setUniformsLegacy=function(n){n===void 0&&(n={});var r=this.device.gl;if(!wr(r)){var i=!1;for(var a in n){i||(r.useProgram(this.gl_program),i=!0);var o=n[a],s=this.uniformSetters[a];if(s){var l=o;l instanceof jZ&&(l=l.textureIndex),s(l)}}}return this},e})(tg),EXt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;o.type=Aa.QueryPool;var s=o.device.gl;if(wr(s)){var l=a.elemCount,c=a.type;o.gl_query=MYt(l,function(){return o.device.ensureResourceExists(s.createQuery())}),o.gl_query_type=gXt(c)}return o}return e.prototype.queryResultOcclusion=function(n){var r=this.device.gl;if(wr(r)){var i=this.gl_query[n];return r.getQueryParameter(i,r.QUERY_RESULT_AVAILABLE)?!!r.getQueryParameter(i,r.QUERY_RESULT):null}return null},e.prototype.destroy=function(){t.prototype.destroy.call(this);var n=this.device.gl;if(wr(n))for(var r=0;r<this.gl_query.length;r++)n.deleteQuery(this.gl_query[r])},e})(tg),xXt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=t.call(this,{id:r,device:i})||this;return a.type=Aa.Readback,a.gl_pbo=null,a.gl_sync=null,a}return e.prototype.clientWaitAsync=function(n,r,i){r===void 0&&(r=0),i===void 0&&(i=10);var a=this.device.gl;return new Promise(function(o,s){function l(){var c=a.clientWaitSync(n,r,0);if(c==a.WAIT_FAILED){s();return}if(c==a.TIMEOUT_EXPIRED){setTimeout(l,ga(i,0,a.MAX_CLIENT_WAIT_TIMEOUT_WEBGL));return}o()}l()})},e.prototype.getBufferSubDataAsync=function(n,r,i,a,o,s){return Pi(this,void 0,void 0,function(){var l;return lA(this,function(c){switch(c.label){case 0:return l=this.device.gl,wr(l)?(this.gl_sync=l.fenceSync(l.SYNC_GPU_COMMANDS_COMPLETE,0),l.flush(),[4,this.clientWaitAsync(this.gl_sync,0,10)]):[3,2];case 1:return c.sent(),l.bindBuffer(n,r),l.getBufferSubData(n,i,a,o,s),l.bindBuffer(n,null),[2,a];case 2:return[2]}})})},e.prototype.readTexture=function(n,r,i,a,o,s,l,c){return l===void 0&&(l=0),c===void 0&&(c=s.byteLength||0),Pi(this,void 0,void 0,function(){var u,f,h,d,p;return lA(this,function(g){return u=this.device.gl,f=n,h=this.device.translateTextureFormat(f.format),d=this.device.translateTextureType(f.format),p=OYt(f.format),wr(u)?(this.gl_pbo=this.device.ensureResourceExists(u.createBuffer()),u.bindBuffer(u.PIXEL_PACK_BUFFER,this.gl_pbo),u.bufferData(u.PIXEL_PACK_BUFFER,c,u.STREAM_READ),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),u.bindFramebuffer(ke.READ_FRAMEBUFFER,this.device.readbackFramebuffer),u.framebufferTexture2D(ke.READ_FRAMEBUFFER,ke.COLOR_ATTACHMENT0,ke.TEXTURE_2D,f.gl_texture,0),u.bindBuffer(u.PIXEL_PACK_BUFFER,this.gl_pbo),u.readPixels(r,i,a,o,h,d,l*p),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),[2,this.getBufferSubDataAsync(u.PIXEL_PACK_BUFFER,this.gl_pbo,0,s,l,0)]):[2,this.readTextureSync(n,r,i,a,o,s,l,c)]})})},e.prototype.readTextureSync=function(n,r,i,a,o,s,l,c){c===void 0&&(c=s.byteLength||0);var u=this.device.gl,f=n,h=this.device.translateTextureType(f.format);return u.bindFramebuffer(ke.FRAMEBUFFER,this.device.readbackFramebuffer),u.framebufferTexture2D(ke.FRAMEBUFFER,ke.COLOR_ATTACHMENT0,ke.TEXTURE_2D,f.gl_texture,0),u.pixelStorei(u.PACK_ALIGNMENT,4),u.readPixels(r,i,a,o,u.RGBA,h,s),s},e.prototype.readBuffer=function(n,r,i,a,o){return Pi(this,void 0,void 0,function(){var s;return lA(this,function(l){return s=this.device.gl,wr(s)?[2,this.getBufferSubDataAsync(s.ARRAY_BUFFER,MA(n,r),r,i,a,o)]:[2,Promise.reject()]})})},e.prototype.destroy=function(){t.prototype.destroy.call(this),wr(this.device.gl)&&(this.gl_sync!==null&&this.device.gl.deleteSync(this.gl_sync),this.gl_pbo!==null&&this.device.gl.deleteBuffer(this.gl_pbo))},e})(tg),SXt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o,s,l=t.call(this,{id:r,device:i})||this;return l.type=Aa.RenderPipeline,l.drawMode=uXt((o=a.topology)!==null&&o!==void 0?o:Rl.TRIANGLES),l.program=a.program,l.inputLayout=a.inputLayout,l.megaState=Ot(Ot({},pw(gw)),a.megaStateDescriptor),l.colorAttachmentFormats=a.colorAttachmentFormats.slice(),l.depthStencilAttachmentFormat=a.depthStencilAttachmentFormat,l.sampleCount=(s=a.sampleCount)!==null&&s!==void 0?s:1,l}return e})(tg),TXt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;return o.type=Aa.ComputePipeline,o.descriptor=a,o}return e})(tg),AXt=(function(){function t(){this.liveObjects=new Set,this.creationStacks=new Map,this.deletionStacks=new Map}return t.prototype.trackResourceCreated=function(e){this.creationStacks.set(e,new Error().stack),this.liveObjects.add(e)},t.prototype.trackResourceDestroyed=function(e){this.deletionStacks.has(e)&&console.warn("Object double freed:",e,`

Creation stack: `,this.creationStacks.get(e),`

Deletion stack: `,this.deletionStacks.get(e),`

This stack: `,new Error().stack),this.deletionStacks.set(e,new Error().stack),this.liveObjects.delete(e)},t.prototype.checkForLeaks=function(){var e,n;try{for(var r=$p(this.liveObjects.values()),i=r.next();!i.done;i=r.next()){var a=i.value;console.warn("Object leaked:",a,"Creation stack:",this.creationStacks.get(a))}}catch(o){e={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.setResourceLeakCheck=function(e,n){n?this.liveObjects.add(e):this.liveObjects.delete(e)},t})(),wXt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o,s,l=t.call(this,{id:r,device:i})||this;l.type=Aa.Sampler;var c=l.device.gl;if(wr(c)){var u=l.device.ensureResourceExists(c.createSampler());c.samplerParameteri(u,ke.TEXTURE_WRAP_S,B2(a.addressModeU)),c.samplerParameteri(u,ke.TEXTURE_WRAP_T,B2(a.addressModeV)),c.samplerParameteri(u,ke.TEXTURE_WRAP_R,B2((o=a.addressModeW)!==null&&o!==void 0?o:a.addressModeU)),c.samplerParameteri(u,ke.TEXTURE_MIN_FILTER,PL(a.minFilter,a.mipmapFilter)),c.samplerParameteri(u,ke.TEXTURE_MAG_FILTER,PL(a.magFilter,hc.NO_MIP)),a.lodMinClamp!==void 0&&c.samplerParameterf(u,ke.TEXTURE_MIN_LOD,a.lodMinClamp),a.lodMaxClamp!==void 0&&c.samplerParameterf(u,ke.TEXTURE_MAX_LOD,a.lodMaxClamp),a.compareFunction!==void 0&&(c.samplerParameteri(u,c.TEXTURE_COMPARE_MODE,c.COMPARE_REF_TO_TEXTURE),c.samplerParameteri(u,c.TEXTURE_COMPARE_FUNC,a.compareFunction));var f=(s=a.maxAnisotropy)!==null&&s!==void 0?s:1;f>1&&l.device.EXT_texture_filter_anisotropic!==null&&(mi(a.minFilter===Ys.BILINEAR&&a.magFilter===Ys.BILINEAR&&a.mipmapFilter===hc.LINEAR),c.samplerParameterf(u,l.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,f)),l.gl_sampler=u}else l.descriptor=a;return l}return e.prototype.setTextureParameters=function(n,r,i){var a,o=this.device.gl,s=this.descriptor;this.isNPOT(r,i)?o.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_MIN_FILTER,ke.LINEAR):o.texParameteri(n,ke.TEXTURE_MIN_FILTER,PL(s.minFilter,s.mipmapFilter)),o.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_S,B2(s.addressModeU)),o.texParameteri(ke.TEXTURE_2D,ke.TEXTURE_WRAP_T,B2(s.addressModeV)),o.texParameteri(n,ke.TEXTURE_MAG_FILTER,PL(s.magFilter,hc.NO_MIP));var l=(a=s.maxAnisotropy)!==null&&a!==void 0?a:1;l>1&&this.device.EXT_texture_filter_anisotropic!==null&&(mi(s.minFilter===Ys.BILINEAR&&s.magFilter===Ys.BILINEAR&&s.mipmapFilter===hc.LINEAR),o.texParameteri(n,this.device.EXT_texture_filter_anisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l))},e.prototype.destroy=function(){t.prototype.destroy.call(this),wr(this.device.gl)&&this.device.gl.deleteSampler(UZ(this))},e.prototype.isNPOT=function(n,r){return!fF(n)||!fF(r)},e})(tg),OXt=(function(){function t(){}return t.prototype.dispatchWorkgroups=function(e,n,r){},t.prototype.dispatchWorkgroupsIndirect=function(e,n){},t.prototype.setPipeline=function(e){},t.prototype.setBindings=function(e){},t.prototype.pushDebugGroup=function(e){},t.prototype.popDebugGroup=function(){},t.prototype.insertDebugMarker=function(e){},t})(),CXt=(function(t){Cr(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.type=Aa.RenderBundle,n.commands=[],n}return e.prototype.push=function(n){this.commands.push(n)},e.prototype.replay=function(){this.commands.forEach(function(n){return n()})},e})(tg),pEe=65536,RXt=/uniform(?:\s+)(\w+)(?:\s?){([^]*?)}/g,MXt=(function(){function t(e,n){n===void 0&&(n={}),this.shaderDebug=!1,this.OES_vertex_array_object=null,this.ANGLE_instanced_arrays=null,this.OES_texture_float=null,this.OES_draw_buffers_indexed=null,this.WEBGL_draw_buffers=null,this.WEBGL_depth_texture=null,this.WEBGL_color_buffer_float=null,this.EXT_color_buffer_half_float=null,this.WEBGL_compressed_texture_s3tc=null,this.WEBGL_compressed_texture_s3tc_srgb=null,this.EXT_texture_compression_rgtc=null,this.EXT_texture_filter_anisotropic=null,this.KHR_parallel_shader_compile=null,this.EXT_texture_norm16=null,this.EXT_color_buffer_float=null,this.OES_texture_float_linear=null,this.OES_texture_half_float_linear=null,this.scTexture=null,this.scPlatformFramebuffer=null,this.currentActiveTexture=null,this.currentBoundVAO=null,this.currentProgram=null,this.resourceCreationTracker=null,this.resourceUniqueId=0,this.currentColorAttachments=[],this.currentColorAttachmentLevels=[],this.currentColorResolveTos=[],this.currentColorResolveToLevels=[],this.currentSampleCount=-1,this.currentIndexBufferByteOffset=null,this.currentMegaState=pw(gw),this.currentSamplers=[],this.currentTextures=[],this.currentUniformBuffers=[],this.currentUniformBufferByteOffsets=[],this.currentUniformBufferByteSizes=[],this.currentScissorEnabled=!1,this.currentStencilRef=null,this.currentRenderPassDescriptor=null,this.currentRenderPassDescriptorStack=[],this.debugGroupStack=[],this.resolveColorAttachmentsChanged=!1,this.resolveDepthStencilAttachmentsChanged=!1,this.explicitBindingLocations=!1,this.separateSamplerTextures=!1,this.viewportOrigin=Yg.LOWER_LEFT,this.clipSpaceNearZ=hw.NEGATIVE_ONE,this.supportMRT=!1,this.inBlitRenderPass=!1,this.supportedSampleCounts=[],this.occlusionQueriesRecommended=!1,this.computeShadersSupported=!1,this.gl=e,this.contextAttributes=VE(e.getContextAttributes()),wr(e)?(this.EXT_texture_norm16=e.getExtension("EXT_texture_norm16"),this.EXT_color_buffer_float=e.getExtension("EXT_color_buffer_float")):(this.OES_vertex_array_object=e.getExtension("OES_vertex_array_object"),this.ANGLE_instanced_arrays=e.getExtension("ANGLE_instanced_arrays"),this.OES_texture_float=e.getExtension("OES_texture_float"),this.WEBGL_draw_buffers=e.getExtension("WEBGL_draw_buffers"),this.WEBGL_depth_texture=e.getExtension("WEBGL_depth_texture"),this.WEBGL_color_buffer_float=e.getExtension("WEBGL_color_buffer_float"),this.EXT_color_buffer_half_float=e.getExtension("EXT_color_buffer_half_float"),e.getExtension("EXT_frag_depth"),e.getExtension("OES_element_index_uint"),e.getExtension("OES_standard_derivatives")),this.WEBGL_compressed_texture_s3tc=e.getExtension("WEBGL_compressed_texture_s3tc"),this.WEBGL_compressed_texture_s3tc_srgb=e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),this.EXT_texture_compression_rgtc=e.getExtension("EXT_texture_compression_rgtc"),this.EXT_texture_filter_anisotropic=e.getExtension("EXT_texture_filter_anisotropic"),this.EXT_texture_norm16=e.getExtension("EXT_texture_norm16"),this.OES_texture_float_linear=e.getExtension("OES_texture_float_linear"),this.OES_texture_half_float_linear=e.getExtension("OES_texture_half_float_linear"),this.KHR_parallel_shader_compile=e.getExtension("KHR_parallel_shader_compile"),wr(e)?(this.platformString="WebGL2",this.glslVersion="#version 300 es"):(this.platformString="WebGL1",this.glslVersion="#version 100"),this.scTexture=new jZ({id:this.getNextUniqueId(),device:this,descriptor:{width:0,height:0,depthOrArrayLayers:1,dimension:ea.TEXTURE_2D,mipLevelCount:1,usage:uf.RENDER_TARGET,format:this.contextAttributes.alpha===!1?Je.U8_RGB_RT:Je.U8_RGBA_RT},fake:!0}),this.scTexture.formatKind=Ls.Float,this.scTexture.gl_target=null,this.scTexture.gl_texture=null,this.resolveColorReadFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveColorDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveDepthStencilReadFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.resolveDepthStencilDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.renderPassDrawFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.readbackFramebuffer=this.ensureResourceExists(e.createFramebuffer()),this.fallbackTexture2D=this.createFallbackTexture(ea.TEXTURE_2D,Ls.Float),this.fallbackTexture2DDepth=this.createFallbackTexture(ea.TEXTURE_2D,Ls.Depth),this.fallbackVertexBuffer=this.createBuffer({viewOrSize:1,usage:mo.VERTEX,hint:Kg.STATIC}),wr(e)&&(this.fallbackTexture2DArray=this.createFallbackTexture(ea.TEXTURE_2D_ARRAY,Ls.Float),this.fallbackTexture3D=this.createFallbackTexture(ea.TEXTURE_3D,Ls.Float),this.fallbackTextureCube=this.createFallbackTexture(ea.TEXTURE_CUBE_MAP,Ls.Float)),this.currentMegaState.depthCompare=Ua.LESS,this.currentMegaState.depthWrite=!1,this.currentMegaState.attachmentsState[0].channelWriteMask=Cc.ALL,e.enable(e.DEPTH_TEST),e.enable(e.STENCIL_TEST),this.checkLimits(),n.shaderDebug&&(this.shaderDebug=!0),n.trackResources&&(this.resourceCreationTracker=new AXt)}return t.prototype.destroy=function(){this.blitBindings&&this.blitBindings.destroy(),this.blitInputLayout&&this.blitInputLayout.destroy(),this.blitRenderPipeline&&this.blitRenderPipeline.destroy(),this.blitVertexBuffer&&this.blitVertexBuffer.destroy(),this.blitProgram&&this.blitProgram.destroy()},t.prototype.createFallbackTexture=function(e,n){var r=e===ea.TEXTURE_CUBE_MAP?6:1,i=n===Ls.Depth?Je.D32F:Je.U8_RGBA_NORM,a=this.createTexture({dimension:e,format:i,usage:uf.SAMPLED,width:1,height:1,depthOrArrayLayers:r,mipLevelCount:1});return n===Ls.Float&&a.setImageData([new Uint8Array(4*r)]),HT(a)},t.prototype.getNextUniqueId=function(){return++this.resourceUniqueId},t.prototype.checkLimits=function(){var e=this.gl;if(this.maxVertexAttribs=e.getParameter(ke.MAX_VERTEX_ATTRIBS),wr(e)){this.uniformBufferMaxPageByteSize=Math.min(e.getParameter(ke.MAX_UNIFORM_BLOCK_SIZE),pEe),this.uniformBufferWordAlignment=e.getParameter(e.UNIFORM_BUFFER_OFFSET_ALIGNMENT)/4;var n=e.getInternalformatParameter(e.RENDERBUFFER,e.DEPTH32F_STENCIL8,e.SAMPLES);this.supportedSampleCounts=n?_r([],Ae(n),!1):[],this.occlusionQueriesRecommended=!0}else this.uniformBufferWordAlignment=64,this.uniformBufferMaxPageByteSize=pEe;this.uniformBufferMaxPageWordSize=this.uniformBufferMaxPageByteSize/4,this.supportedSampleCounts.includes(1)||this.supportedSampleCounts.push(1),this.supportedSampleCounts.sort(function(r,i){return r-i})},t.prototype.configureSwapChain=function(e,n,r){var i=this.scTexture;i.width=e,i.height=n,this.scPlatformFramebuffer=RYt(r)},t.prototype.getDevice=function(){return this},t.prototype.getCanvas=function(){return this.gl.canvas},t.prototype.getOnscreenTexture=function(){return this.scTexture},t.prototype.beginFrame=function(){},t.prototype.endFrame=function(){},t.prototype.translateTextureInternalFormat=function(e,n){switch(n===void 0&&(n=!1),e){case Je.ALPHA:return ke.ALPHA;case Je.U8_LUMINANCE:case Je.F16_LUMINANCE:case Je.F32_LUMINANCE:return ke.LUMINANCE;case Je.F16_R:return ke.R16F;case Je.F16_RG:return ke.RG16F;case Je.F16_RGB:return ke.RGB16F;case Je.F16_RGBA:return ke.RGBA16F;case Je.F32_R:return ke.R32F;case Je.F32_RG:return ke.RG32F;case Je.F32_RGB:return ke.RGB32F;case Je.F32_RGBA:return wr(this.gl)?ke.RGBA32F:n?this.WEBGL_color_buffer_float.RGBA32F_EXT:ke.RGBA;case Je.U8_R_NORM:return ke.R8;case Je.U8_RG_NORM:return ke.RG8;case Je.U8_RGB_NORM:case Je.U8_RGB_RT:return ke.RGB8;case Je.U8_RGB_SRGB:return ke.SRGB8;case Je.U8_RGBA_NORM:case Je.U8_RGBA_RT:return wr(this.gl)?ke.RGBA8:n?ke.RGBA4:ke.RGBA;case Je.U8_RGBA:return ke.RGBA;case Je.U8_RGBA_SRGB:case Je.U8_RGBA_RT_SRGB:return ke.SRGB8_ALPHA8;case Je.U16_R:return ke.R16UI;case Je.U16_R_NORM:return this.EXT_texture_norm16.R16_EXT;case Je.U16_RG_NORM:return this.EXT_texture_norm16.RG16_EXT;case Je.U16_RGBA_NORM:return this.EXT_texture_norm16.RGBA16_EXT;case Je.U16_RGBA_5551:return ke.RGB5_A1;case Je.U16_RGB_565:return ke.RGB565;case Je.U32_R:return ke.R32UI;case Je.S8_RGBA_NORM:return ke.RGBA8_SNORM;case Je.S8_RG_NORM:return ke.RG8_SNORM;case Je.BC1:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT;case Je.BC1_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;case Je.BC2:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT;case Je.BC2_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;case Je.BC3:return this.WEBGL_compressed_texture_s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT;case Je.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;case Je.BC4_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_RGTC1_EXT;case Je.BC4_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT;case Je.BC5_UNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT;case Je.BC5_SNORM:return this.EXT_texture_compression_rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;case Je.D32F_S8:return wr(this.gl)?ke.DEPTH32F_STENCIL8:this.WEBGL_depth_texture?ke.DEPTH_STENCIL:ke.DEPTH_COMPONENT16;case Je.D24_S8:return wr(this.gl)?ke.DEPTH24_STENCIL8:this.WEBGL_depth_texture?ke.DEPTH_STENCIL:ke.DEPTH_COMPONENT16;case Je.D32F:return wr(this.gl)?ke.DEPTH_COMPONENT32F:this.WEBGL_depth_texture?ke.DEPTH_COMPONENT:ke.DEPTH_COMPONENT16;case Je.D24:return wr(this.gl)?ke.DEPTH_COMPONENT24:this.WEBGL_depth_texture?ke.DEPTH_COMPONENT:ke.DEPTH_COMPONENT16;default:throw new Error("whoops")}},t.prototype.translateTextureType=function(e){var n=r0(e);switch(n){case Qt.U8:return ke.UNSIGNED_BYTE;case Qt.U16:return ke.UNSIGNED_SHORT;case Qt.U32:return ke.UNSIGNED_INT;case Qt.S8:return ke.BYTE;case Qt.F16:return ke.HALF_FLOAT;case Qt.F32:return ke.FLOAT;case Qt.U16_PACKED_5551:return ke.UNSIGNED_SHORT_5_5_5_1;case Qt.D32F:return wr(this.gl)?ke.FLOAT:this.WEBGL_depth_texture?ke.UNSIGNED_INT:ke.UNSIGNED_BYTE;case Qt.D24:return wr(this.gl)?ke.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?ke.UNSIGNED_SHORT:ke.UNSIGNED_BYTE;case Qt.D24S8:return wr(this.gl)?ke.UNSIGNED_INT_24_8:this.WEBGL_depth_texture?ke.UNSIGNED_INT_24_8_WEBGL:ke.UNSIGNED_BYTE;case Qt.D32FS8:return ke.FLOAT_32_UNSIGNED_INT_24_8_REV;default:throw new Error("whoops")}},t.prototype.translateInternalTextureFormat=function(e){switch(e){case Je.F32_R:return ke.R32F;case Je.F32_RG:return ke.RG32F;case Je.F32_RGB:return ke.RGB32F;case Je.F32_RGBA:return ke.RGBA32F;case Je.F16_R:return ke.R16F;case Je.F16_RG:return ke.RG16F;case Je.F16_RGB:return ke.RGB16F;case Je.F16_RGBA:return ke.RGBA16F}return this.translateTextureFormat(e)},t.prototype.translateTextureFormat=function(e){if(I6e(e)||e===Je.F32_LUMINANCE||e===Je.U8_LUMINANCE)return this.translateTextureInternalFormat(e);var n=wr(this.gl)||!wr(this.gl)&&!!this.WEBGL_depth_texture;switch(e){case Je.D24_S8:case Je.D32F_S8:return n?ke.DEPTH_STENCIL:ke.RGBA;case Je.D24:case Je.D32F:return n?ke.DEPTH_COMPONENT:ke.RGBA}var r=L6e(e),i=ore(e);switch(i){case dr.A:return ke.ALPHA;case dr.R:return r?ke.RED_INTEGER:ke.RED;case dr.RG:return r?ke.RG_INTEGER:ke.RG;case dr.RGB:return r?ke.RGB_INTEGER:ke.RGB;case dr.RGBA:return ke.RGBA}},t.prototype.setActiveTexture=function(e){this.currentActiveTexture!==e&&(this.gl.activeTexture(e),this.currentActiveTexture=e)},t.prototype.bindVAO=function(e){this.currentBoundVAO!==e&&(wr(this.gl)?this.gl.bindVertexArray(e):this.OES_vertex_array_object.bindVertexArrayOES(e),this.currentBoundVAO=e)},t.prototype.programCompiled=function(e){mi(e.compileState!==Ch.NeedsCompile),e.compileState===Ch.Compiling&&(e.compileState=Ch.NeedsBind,this.shaderDebug&&this.checkProgramCompilationForErrors(e))},t.prototype.useProgram=function(e){this.currentProgram!==e&&(this.programCompiled(e),this.gl.useProgram(e.gl_program),this.currentProgram=e)},t.prototype.ensureResourceExists=function(e){if(e===null){var n=this.gl.getError();throw new Error("Created resource is null; GL error encountered: ".concat(n))}else return e},t.prototype.createBuffer=function(e){return new mXt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createTexture=function(e){return new jZ({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createSampler=function(e){return new wXt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderTarget=function(e){return new _Xt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderTargetFromTexture=function(e){var n=e,r=n.format,i=n.width,a=n.height,o=n.mipLevelCount;return mi(o===1),this.createRenderTarget({format:r,width:i,height:a,sampleCount:1,texture:e})},t.prototype.createProgram=function(e){var n,r,i,a=(n=e.vertex)===null||n===void 0?void 0:n.glsl;return!((r=e.vertex)===null||r===void 0)&&r.glsl&&(e.vertex.glsl=vw(this.queryVendorInfo(),"vert",e.vertex.glsl)),!((i=e.fragment)===null||i===void 0)&&i.glsl&&(e.fragment.glsl=vw(this.queryVendorInfo(),"frag",e.fragment.glsl)),this.createProgramSimple(e,a)},t.prototype.createProgramSimple=function(e,n){var r=new bXt({id:this.getNextUniqueId(),device:this,descriptor:e},n);return r},t.prototype.createBindings=function(e){return new lXt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createInputLayout=function(e){return new yXt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderPipeline=function(e){return new SXt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createComputePass=function(){return new OXt},t.prototype.createComputePipeline=function(e){return new TXt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createReadback=function(){return new xXt({id:this.getNextUniqueId(),device:this})},t.prototype.createQueryPool=function(e,n){return new EXt({id:this.getNextUniqueId(),device:this,descriptor:{type:e,elemCount:n}})},t.prototype.formatRenderPassDescriptor=function(e){var n,r,i,a,o,s,l=e.colorAttachment;e.depthClearValue=(n=e.depthClearValue)!==null&&n!==void 0?n:"load",e.stencilClearValue=(r=e.stencilClearValue)!==null&&r!==void 0?r:"load";for(var c=0;c<l.length;c++)e.colorAttachmentLevel||(e.colorAttachmentLevel=[]),e.colorAttachmentLevel[c]=(i=e.colorAttachmentLevel[c])!==null&&i!==void 0?i:0,e.colorResolveToLevel||(e.colorResolveToLevel=[]),e.colorResolveToLevel[c]=(a=e.colorResolveToLevel[c])!==null&&a!==void 0?a:0,e.colorClearColor||(e.colorClearColor=[]),e.colorClearColor[c]=(o=e.colorClearColor[c])!==null&&o!==void 0?o:"load",e.colorStore||(e.colorStore=[]),e.colorStore[c]=(s=e.colorStore[c])!==null&&s!==void 0?s:!1},t.prototype.createRenderBundle=function(){return new CXt({id:this.getNextUniqueId(),device:this})},t.prototype.beginBundle=function(e){this.renderBundle=e},t.prototype.endBundle=function(){this.renderBundle=void 0},t.prototype.executeBundles=function(e){e.forEach(function(n){n.replay()})},t.prototype.createRenderPass=function(e){this.currentRenderPassDescriptor!==null&&this.currentRenderPassDescriptorStack.push(this.currentRenderPassDescriptor),this.currentRenderPassDescriptor=e,this.formatRenderPassDescriptor(e);var n=e.colorAttachment,r=e.colorAttachmentLevel,i=e.colorClearColor,a=e.colorResolveTo,o=e.colorResolveToLevel,s=e.depthStencilAttachment,l=e.depthClearValue,c=e.stencilClearValue,u=e.depthStencilResolveTo,f=a&&a.length===1&&a[0]===this.scTexture;this.setRenderPassParametersBegin(n.length,f);for(var h=0;h<n.length;h++)this.setRenderPassParametersColor(h,n[h],r[h],a[h],o[h],f);this.setRenderPassParametersDepthStencil(s,u,f),this.validateCurrentAttachments();for(var h=0;h<n.length;h++){var d=i[h];d!=="load"&&this.setRenderPassParametersClearColor(h,d.r,d.g,d.b,d.a)}return this.setRenderPassParametersClearDepthStencil(l,c),this},t.prototype.submitPass=function(e){mi(this.currentRenderPassDescriptor!==null),this.endPass(),this.currentRenderPassDescriptorStack.length?this.currentRenderPassDescriptor=this.currentRenderPassDescriptorStack.pop():this.currentRenderPassDescriptor=null},t.prototype.copySubTexture2D=function(e,n,r,i,a,o){var s=this.gl,l=e,c=i;if(mi(c.mipLevelCount===1),mi(l.mipLevelCount===1),wr(s))l===this.scTexture?s.bindFramebuffer(s.DRAW_FRAMEBUFFER,this.scPlatformFramebuffer):(s.bindFramebuffer(s.DRAW_FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.bindFramebufferAttachment(s.DRAW_FRAMEBUFFER,s.COLOR_ATTACHMENT0,l,0)),s.bindFramebuffer(s.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.bindFramebufferAttachment(s.READ_FRAMEBUFFER,s.COLOR_ATTACHMENT0,c,0),s.blitFramebuffer(a,o,a+c.width,o+c.height,n,r,n+c.width,r+c.height,s.COLOR_BUFFER_BIT,s.LINEAR),s.bindFramebuffer(s.READ_FRAMEBUFFER,null),s.bindFramebuffer(s.DRAW_FRAMEBUFFER,null);else if(l===this.scTexture){var u=this.createRenderTargetFromTexture(i);this.submitBlitRenderPass(u,l)}},t.prototype.queryLimits=function(){return this},t.prototype.queryTextureFormatSupported=function(e,n,r){switch(e){case Je.BC1_SRGB:case Je.BC2_SRGB:case Je.BC3_SRGB:return this.WEBGL_compressed_texture_s3tc_srgb!==null?sV(n,r,4,4):!1;case Je.BC1:case Je.BC2:case Je.BC3:return this.WEBGL_compressed_texture_s3tc!==null?sV(n,r,4,4):!1;case Je.BC4_UNORM:case Je.BC4_SNORM:case Je.BC5_UNORM:case Je.BC5_SNORM:return this.EXT_texture_compression_rgtc!==null?sV(n,r,4,4):!1;case Je.U16_R_NORM:case Je.U16_RG_NORM:case Je.U16_RGBA_NORM:return this.EXT_texture_norm16!==null;case Je.F32_R:case Je.F32_RG:case Je.F32_RGB:case Je.F32_RGBA:return this.OES_texture_float_linear!==null;case Je.F16_R:case Je.F16_RG:case Je.F16_RGB:case Je.F16_RGBA:return this.OES_texture_half_float_linear!==null;default:return!0}},t.prototype.queryProgramReady=function(e){var n=this.gl;if(e.compileState===Ch.NeedsCompile)throw new Error("whoops");if(e.compileState===Ch.Compiling){var r=void 0;return this.KHR_parallel_shader_compile!==null?r=n.getProgramParameter(e.gl_program,this.KHR_parallel_shader_compile.COMPLETION_STATUS_KHR):r=!0,r&&this.programCompiled(e),r}return e.compileState===Ch.NeedsBind||e.compileState===Ch.ReadyToUse},t.prototype.queryPlatformAvailable=function(){return this.gl.isContextLost()},t.prototype.queryVendorInfo=function(){return this},t.prototype.queryRenderPass=function(e){return this.currentRenderPassDescriptor},t.prototype.queryRenderTarget=function(e){var n=e;return n},t.prototype.setResourceName=function(e,n){if(e.name=n,e.type===Aa.Buffer)for(var r=e.gl_buffer_pages,i=0;i<r.length;i++)F2(r[i],"".concat(n," Page ").concat(i));else if(e.type===Aa.Texture)F2(HT(e),n);else if(e.type===Aa.Sampler)F2(UZ(e),n);else if(e.type===Aa.RenderTarget){var a=e.gl_renderbuffer;a!==null&&F2(a,n)}else e.type===Aa.InputLayout&&F2(e.vao,n)},t.prototype.setResourceLeakCheck=function(e,n){this.resourceCreationTracker!==null&&this.resourceCreationTracker.setResourceLeakCheck(e,n)},t.prototype.checkForLeaks=function(){this.resourceCreationTracker!==null&&this.resourceCreationTracker.checkForLeaks()},t.prototype.pushDebugGroup=function(e){},t.prototype.popDebugGroup=function(){},t.prototype.insertDebugMarker=function(e){},t.prototype.programPatched=function(e,n){mi(this.shaderDebug)},t.prototype.getBufferData=function(e,n,r){r===void 0&&(r=0);var i=this.gl;wr(i)&&(i.bindBuffer(i.COPY_READ_BUFFER,MA(e,r*4)),i.getBufferSubData(i.COPY_READ_BUFFER,r*4,n))},t.prototype.debugGroupStatisticsDrawCall=function(e){e===void 0&&(e=1);for(var n=this.debugGroupStack.length-1;n>=0;n--)this.debugGroupStack[n].drawCallCount+=e},t.prototype.debugGroupStatisticsBufferUpload=function(e){e===void 0&&(e=1);for(var n=this.debugGroupStack.length-1;n>=0;n--)this.debugGroupStack[n].bufferUploadCount+=e},t.prototype.debugGroupStatisticsTextureBind=function(e){e===void 0&&(e=1);for(var n=this.debugGroupStack.length-1;n>=0;n--)this.debugGroupStack[n].textureBindCount+=e},t.prototype.debugGroupStatisticsTriangles=function(e){for(var n=this.debugGroupStack.length-1;n>=0;n--)this.debugGroupStack[n].triangleCount+=e},t.prototype.reportShaderError=function(e,n){var r=this.gl,i=r.getShaderParameter(e,r.COMPILE_STATUS);if(!i){console.error(PYt(n));var a=r.getExtension("WEBGL_debug_shaders");a&&console.error(a.getTranslatedShaderSource(e)),console.error(r.getShaderInfoLog(e))}return i},t.prototype.checkProgramCompilationForErrors=function(e){var n=this.gl,r=e.gl_program;if(!n.getProgramParameter(r,n.LINK_STATUS)){var i=e.descriptor;if(!this.reportShaderError(e.gl_shader_vert,i.vertex.glsl)||!this.reportShaderError(e.gl_shader_frag,i.fragment.glsl))return;console.error(n.getProgramInfoLog(e.gl_program))}},t.prototype.bindFramebufferAttachment=function(e,n,r,i){var a=this.gl;if(Kn(r))a.framebufferRenderbuffer(e,n,a.RENDERBUFFER,null);else if(r.type===Aa.RenderTarget)r.gl_renderbuffer!==null?a.framebufferRenderbuffer(e,n,a.RENDERBUFFER,r.gl_renderbuffer):r.texture!==null&&a.framebufferTexture2D(e,n,ke.TEXTURE_2D,HT(r.texture),i);else if(r.type===Aa.Texture){var o=HT(r);r.dimension===ea.TEXTURE_2D?a.framebufferTexture2D(e,n,ke.TEXTURE_2D,o,i):wr(a)&&(r.dimension,ea.TEXTURE_2D_ARRAY)}},t.prototype.bindFramebufferDepthStencilAttachment=function(e,n){var r=this.gl,i=Kn(n)?Qn.Depth|Qn.Stencil:dw(n.format),a=!!(i&Qn.Depth),o=!!(i&Qn.Stencil);if(a&&o){var s=wr(this.gl)||!wr(this.gl)&&!!this.WEBGL_depth_texture;s?this.bindFramebufferAttachment(e,r.DEPTH_STENCIL_ATTACHMENT,n,0):this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,n,0)}else a?(this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,n,0),this.bindFramebufferAttachment(e,r.STENCIL_ATTACHMENT,null,0)):o&&(this.bindFramebufferAttachment(e,r.STENCIL_ATTACHMENT,n,0),this.bindFramebufferAttachment(e,r.DEPTH_ATTACHMENT,null,0))},t.prototype.validateCurrentAttachments=function(){for(var e=-1,n=-1,r=-1,i=0;i<this.currentColorAttachments.length;i++){var a=this.currentColorAttachments[i];a!==null&&(e===-1?(e=a.sampleCount,n=a.width,r=a.height):(mi(e===a.sampleCount),mi(n===a.width),mi(r===a.height)))}this.currentDepthStencilAttachment&&(e===-1?e=this.currentDepthStencilAttachment.sampleCount:(mi(e===this.currentDepthStencilAttachment.sampleCount),mi(n===this.currentDepthStencilAttachment.width),mi(r===this.currentDepthStencilAttachment.height))),this.currentSampleCount=e},t.prototype.setRenderPassParametersBegin=function(e,n){n===void 0&&(n=!1);var r=this.gl;if(n)r.bindFramebuffer(ke.FRAMEBUFFER,null);else if(wr(r)?r.bindFramebuffer(ke.DRAW_FRAMEBUFFER,this.renderPassDrawFramebuffer):this.inBlitRenderPass||r.bindFramebuffer(ke.FRAMEBUFFER,this.renderPassDrawFramebuffer),wr(r)?r.drawBuffers([ke.COLOR_ATTACHMENT0,ke.COLOR_ATTACHMENT1,ke.COLOR_ATTACHMENT2,ke.COLOR_ATTACHMENT3]):!this.inBlitRenderPass&&this.WEBGL_draw_buffers&&this.WEBGL_draw_buffers.drawBuffersWEBGL([ke.COLOR_ATTACHMENT0_WEBGL,ke.COLOR_ATTACHMENT1_WEBGL,ke.COLOR_ATTACHMENT2_WEBGL,ke.COLOR_ATTACHMENT3_WEBGL]),!this.inBlitRenderPass)for(var i=e;i<this.currentColorAttachments.length;i++){var a=wr(r)?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,o=wr(r)?ke.COLOR_ATTACHMENT0:ke.COLOR_ATTACHMENT0_WEBGL;r.framebufferRenderbuffer(a,o+i,ke.RENDERBUFFER,null),r.framebufferTexture2D(a,o+i,ke.TEXTURE_2D,null,0)}this.currentColorAttachments.length=e},t.prototype.setRenderPassParametersColor=function(e,n,r,i,a,o){o===void 0&&(o=!1);var s=this.gl,l=wr(s);(this.currentColorAttachments[e]!==n||this.currentColorAttachmentLevels[e]!==r)&&(this.currentColorAttachments[e]=n,this.currentColorAttachmentLevels[e]=r,!o&&(l||!l&&this.WEBGL_draw_buffers)&&this.bindFramebufferAttachment(l?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,(l?ke.COLOR_ATTACHMENT0:ke.COLOR_ATTACHMENT0_WEBGL)+e,n,r),this.resolveColorAttachmentsChanged=!0),(this.currentColorResolveTos[e]!==i||this.currentColorResolveToLevels[e]!==a)&&(this.currentColorResolveTos[e]=i,this.currentColorResolveToLevels[e]=a,i!==null&&(this.resolveColorAttachmentsChanged=!0))},t.prototype.setRenderPassParametersDepthStencil=function(e,n,r){r===void 0&&(r=!1);var i=this.gl;this.currentDepthStencilAttachment!==e&&(this.currentDepthStencilAttachment=e,!r&&!this.inBlitRenderPass&&this.bindFramebufferDepthStencilAttachment(wr(i)?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,this.currentDepthStencilAttachment),this.resolveDepthStencilAttachmentsChanged=!0),this.currentDepthStencilResolveTo!==n&&(this.currentDepthStencilResolveTo=n,n&&(this.resolveDepthStencilAttachmentsChanged=!0))},t.prototype.setRenderPassParametersClearColor=function(e,n,r,i,a){var o=this.gl;if(this.OES_draw_buffers_indexed!==null){var s=this.currentMegaState.attachmentsState[e];s&&s.channelWriteMask!==Cc.ALL&&(this.OES_draw_buffers_indexed.colorMaskiOES(e,!0,!0,!0,!0),s.channelWriteMask=Cc.ALL)}else{var s=this.currentMegaState.attachmentsState[0];s&&s.channelWriteMask!==Cc.ALL&&(o.colorMask(!0,!0,!0,!0),s.channelWriteMask=Cc.ALL)}this.setScissorRectEnabled(!1),wr(o)?o.clearBufferfv(o.COLOR,e,[n,r,i,a]):(o.clearColor(n,r,i,a),o.clear(o.COLOR_BUFFER_BIT))},t.prototype.setRenderPassParametersClearDepthStencil=function(e,n){e===void 0&&(e="load"),n===void 0&&(n="load");var r=this.gl;e!=="load"&&(mi(!!this.currentDepthStencilAttachment),this.currentMegaState.depthWrite||(r.depthMask(!0),this.currentMegaState.depthWrite=!0),wr(r)?r.clearBufferfv(r.DEPTH,0,[e]):(r.clearDepth(e),r.clear(r.DEPTH_BUFFER_BIT))),n!=="load"&&(mi(!!this.currentDepthStencilAttachment),this.currentMegaState.stencilWrite||(r.enable(r.STENCIL_TEST),r.stencilMask(255),this.currentMegaState.stencilWrite=!0),wr(r)?r.clearBufferiv(r.STENCIL,0,[n]):(r.clearStencil(n),r.clear(r.STENCIL_BUFFER_BIT)))},t.prototype.setBindings=function(e){var n=this,r;if(this.renderBundle){this.renderBundle.push(function(){return n.setBindings(e)});return}var i=this.gl,a=e,o=a.uniformBufferBindings,s=a.samplerBindings,l=a.bindingLayouts;mi(0<l.bindingLayoutTables.length);var c=l.bindingLayoutTables[0];mi(o.length>=c.numUniformBuffers),mi(s.length>=c.numSamplers);for(var u=0;u<o.length;u++){var f=o[u];if(f.size!==0){var h=c.firstUniformBuffer+u,d=f.buffer,p=f.offset||0,g=f.size||d.byteSize;if(d!==this.currentUniformBuffers[h]||p!==this.currentUniformBufferByteOffsets[h]||g!==this.currentUniformBufferByteSizes[h]){var v=p%d.pageByteSize,y=d.gl_buffer_pages[p/d.pageByteSize|0];mi(v+g<=d.pageByteSize),wr(i)&&i.bindBufferRange(i.UNIFORM_BUFFER,h,y,v,g),this.currentUniformBuffers[h]=d,this.currentUniformBufferByteOffsets[h]=p,this.currentUniformBufferByteSizes[h]=g}}}for(var u=0;u<c.numSamplers;u++){var f=s[u],_=c.firstSampler+u,E=f!==null&&f.sampler!==null?UZ(f.sampler):null,x=f!==null&&f.texture!==null?HT(f.texture):null;if(this.currentSamplers[_]!==E&&(wr(i)&&i.bindSampler(_,E),this.currentSamplers[_]=E),this.currentTextures[_]!==x){if(this.setActiveTexture(i.TEXTURE0+_),x!==null){var T=VE(f).texture,S=T.gl_target,w=T.width,C=T.height;f.texture.textureIndex=_,i.bindTexture(S,x),wr(i)||(r=f.sampler)===null||r===void 0||r.setTextureParameters(S,w,C),this.debugGroupStatisticsTextureBind()}else{var D=Ot(Ot({},f),P6e),L=D.dimension,B=D.formatKind,S=vXt(L);i.bindTexture(S,this.getFallbackTexture(Ot({gl_target:S,formatKind:B},D)))}this.currentTextures[_]=x}}},t.prototype.setViewport=function(e,n,r,i){var a=this.gl;a.viewport(e,n,r,i)},t.prototype.setScissorRect=function(e,n,r,i){var a=this.gl;this.setScissorRectEnabled(!0),a.scissor(e,n,r,i)},t.prototype.applyAttachmentStateIndexed=function(e,n,r){var i=this.gl,a=this.OES_draw_buffers_indexed;n.channelWriteMask!==r.channelWriteMask&&(a.colorMaskiOES(e,!!(r.channelWriteMask&Cc.RED),!!(r.channelWriteMask&Cc.GREEN),!!(r.channelWriteMask&Cc.BLUE),!!(r.channelWriteMask&Cc.ALPHA)),n.channelWriteMask=r.channelWriteMask);var o=n.rgbBlendState.blendMode!==r.rgbBlendState.blendMode||n.alphaBlendState.blendMode!==r.alphaBlendState.blendMode,s=n.rgbBlendState.blendSrcFactor!==r.rgbBlendState.blendSrcFactor||n.alphaBlendState.blendSrcFactor!==r.alphaBlendState.blendSrcFactor||n.rgbBlendState.blendDstFactor!==r.rgbBlendState.blendDstFactor||n.alphaBlendState.blendDstFactor!==r.alphaBlendState.blendDstFactor;(s||o)&&(J1(n.rgbBlendState)&&J1(n.alphaBlendState)?a.enableiOES(e,i.BLEND):J1(r.rgbBlendState)&&J1(r.alphaBlendState)&&a.disableiOES(e,i.BLEND)),o&&(a.blendEquationSeparateiOES(e,r.rgbBlendState.blendMode,r.alphaBlendState.blendMode),n.rgbBlendState.blendMode=r.rgbBlendState.blendMode,n.alphaBlendState.blendMode=r.alphaBlendState.blendMode),s&&(a.blendFuncSeparateiOES(e,r.rgbBlendState.blendSrcFactor,r.rgbBlendState.blendDstFactor,r.alphaBlendState.blendSrcFactor,r.alphaBlendState.blendDstFactor),n.rgbBlendState.blendSrcFactor=r.rgbBlendState.blendSrcFactor,n.alphaBlendState.blendSrcFactor=r.alphaBlendState.blendSrcFactor,n.rgbBlendState.blendDstFactor=r.rgbBlendState.blendDstFactor,n.alphaBlendState.blendDstFactor=r.alphaBlendState.blendDstFactor)},t.prototype.applyAttachmentState=function(e,n){var r=this.gl;e.channelWriteMask!==n.channelWriteMask&&(r.colorMask(!!(n.channelWriteMask&Cc.RED),!!(n.channelWriteMask&Cc.GREEN),!!(n.channelWriteMask&Cc.BLUE),!!(n.channelWriteMask&Cc.ALPHA)),e.channelWriteMask=n.channelWriteMask);var i=e.rgbBlendState.blendMode!==n.rgbBlendState.blendMode||e.alphaBlendState.blendMode!==n.alphaBlendState.blendMode,a=e.rgbBlendState.blendSrcFactor!==n.rgbBlendState.blendSrcFactor||e.alphaBlendState.blendSrcFactor!==n.alphaBlendState.blendSrcFactor||e.rgbBlendState.blendDstFactor!==n.rgbBlendState.blendDstFactor||e.alphaBlendState.blendDstFactor!==n.alphaBlendState.blendDstFactor;(a||i)&&(J1(e.rgbBlendState)&&J1(e.alphaBlendState)?r.enable(r.BLEND):J1(n.rgbBlendState)&&J1(n.alphaBlendState)&&r.disable(r.BLEND)),i&&(r.blendEquationSeparate(n.rgbBlendState.blendMode,n.alphaBlendState.blendMode),e.rgbBlendState.blendMode=n.rgbBlendState.blendMode,e.alphaBlendState.blendMode=n.alphaBlendState.blendMode),a&&(r.blendFuncSeparate(n.rgbBlendState.blendSrcFactor,n.rgbBlendState.blendDstFactor,n.alphaBlendState.blendSrcFactor,n.alphaBlendState.blendDstFactor),e.rgbBlendState.blendSrcFactor=n.rgbBlendState.blendSrcFactor,e.alphaBlendState.blendSrcFactor=n.alphaBlendState.blendSrcFactor,e.rgbBlendState.blendDstFactor=n.rgbBlendState.blendDstFactor,e.alphaBlendState.blendDstFactor=n.alphaBlendState.blendDstFactor)},t.prototype.setMegaState=function(e){var n=this.gl,r=this.currentMegaState;if(this.OES_draw_buffers_indexed!==null)for(var i=0;i<e.attachmentsState.length;i++)this.applyAttachmentStateIndexed(i,r.attachmentsState[0],e.attachmentsState[0]);else mi(e.attachmentsState.length===1),this.applyAttachmentState(r.attachmentsState[0],e.attachmentsState[0]);w6e(r.blendConstant,e.blendConstant)||(n.blendColor(e.blendConstant.r,e.blendConstant.g,e.blendConstant.b,e.blendConstant.a),O6e(r.blendConstant,e.blendConstant)),r.depthCompare!==e.depthCompare&&(n.depthFunc(e.depthCompare),r.depthCompare=e.depthCompare),!!r.depthWrite!=!!e.depthWrite&&(n.depthMask(e.depthWrite),r.depthWrite=e.depthWrite),!!r.stencilWrite!=!!e.stencilWrite&&(n.stencilMask(e.stencilWrite?255:0),r.stencilWrite=e.stencilWrite);var a=!1;if(!pF(r.stencilFront,e.stencilFront)){a=!0;var o=e.stencilFront,s=o.passOp,l=o.failOp,c=o.depthFailOp,u=o.compare;(r.stencilFront.passOp!==s||r.stencilFront.failOp!==l||r.stencilFront.depthFailOp!==c)&&(n.stencilOpSeparate(n.FRONT,l,c,s),r.stencilFront.passOp=s,r.stencilFront.failOp=l,r.stencilFront.depthFailOp=c),r.stencilFront.compare!==u&&(this.setStencilReference(0),r.stencilFront.compare=u)}if(!pF(r.stencilBack,e.stencilBack)){a=!0;var f=e.stencilBack,s=f.passOp,l=f.failOp,c=f.depthFailOp,u=f.compare;(r.stencilBack.passOp!==s||r.stencilBack.failOp!==l||r.stencilBack.depthFailOp!==c)&&(n.stencilOpSeparate(n.BACK,l,c,s),r.stencilBack.passOp=s,r.stencilBack.failOp=l,r.stencilBack.depthFailOp=c),r.stencilBack.compare!==u&&(this.setStencilReference(0),r.stencilBack.compare=u)}(r.stencilFront.mask!==e.stencilFront.mask||r.stencilBack.mask!==e.stencilBack.mask)&&(a=!0,r.stencilFront.mask=e.stencilFront.mask,r.stencilBack.mask=e.stencilBack.mask),a&&this.applyStencil(),r.cullMode!==e.cullMode&&(r.cullMode===kh.NONE?n.enable(n.CULL_FACE):e.cullMode===kh.NONE&&n.disable(n.CULL_FACE),e.cullMode===kh.BACK?n.cullFace(n.BACK):e.cullMode===kh.FRONT?n.cullFace(n.FRONT):e.cullMode===kh.FRONT_AND_BACK&&n.cullFace(n.FRONT_AND_BACK),r.cullMode=e.cullMode),r.frontFace!==e.frontFace&&(n.frontFace(e.frontFace),r.frontFace=e.frontFace),r.polygonOffset!==e.polygonOffset&&(e.polygonOffset?n.enable(n.POLYGON_OFFSET_FILL):n.disable(n.POLYGON_OFFSET_FILL),r.polygonOffset=e.polygonOffset),(r.polygonOffsetFactor!==e.polygonOffsetFactor||r.polygonOffsetUnits!==e.polygonOffsetUnits)&&(n.polygonOffset(e.polygonOffsetFactor,e.polygonOffsetUnits),r.polygonOffsetFactor=e.polygonOffsetFactor,r.polygonOffsetUnits=e.polygonOffsetUnits)},t.prototype.validatePipelineFormats=function(e){for(var n=0;n<this.currentColorAttachments.length;n++)var r=this.currentColorAttachments[n];this.currentDepthStencilAttachment&&mi(this.currentDepthStencilAttachment.format===e.depthStencilAttachmentFormat),this.currentSampleCount!==-1&&mi(this.currentSampleCount===e.sampleCount)},t.prototype.setPipeline=function(e){var n=this;if(this.renderBundle){this.renderBundle.push(function(){return n.setPipeline(e)});return}this.currentPipeline=e,this.validatePipelineFormats(this.currentPipeline),this.setMegaState(this.currentPipeline.megaState);var r=this.currentPipeline.program;if(this.useProgram(r),r.compileState===Ch.NeedsBind){var i=this.gl,a=r.gl_program,o=r.descriptor,s=dEe(o.vertex.glsl,RXt);if(wr(i))for(var l=0;l<s.length;l++){var c=Ae(s[l],2),u=c[1],f=i.getUniformBlockIndex(a,u);f!==-1&&f!==4294967295&&i.uniformBlockBinding(a,f,l)}for(var h=dEe(o.fragment.glsl,/^uniform .*sampler\S+ (\w+);\s* \/\/ BINDING=(\d+)$/gm),l=0;l<h.length;l++){var d=Ae(h[l],3),p=d[1],g=d[2],v=i.getUniformLocation(a,p);i.uniform1i(v,parseInt(g))}r.compileState=Ch.ReadyToUse}},t.prototype.setVertexInput=function(e,n,r){var i,a,o=this,s;if(this.renderBundle){this.renderBundle.push(function(){return o.setVertexInput(e,n,r)});return}if(e!==null){mi(this.currentPipeline.inputLayout===e);var l=e;this.bindVAO(l.vao);for(var c=this.gl,u=0;u<l.vertexBufferDescriptors.length;u++){var f=l.vertexBufferDescriptors[u],h=f.arrayStride,d=f.attributes;try{for(var p=(i=void 0,$p(d)),g=p.next();!g.done;g=p.next()){var v=g.value,y=v.shaderLocation,_=v.offset,E=wr(c)?y:(s=l.program.attributes[y])===null||s===void 0?void 0:s.location;if(!Kn(E)){var x=n[u];if(x===null)continue;var T=v.vertexFormat;c.bindBuffer(c.ARRAY_BUFFER,MA(x.buffer));var S=(x.offset||0)+_;c.vertexAttribPointer(E,T.size,T.type,T.normalized,h,S)}}}catch(C){i={error:C}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}if(mi(r!==null==(l.indexBufferFormat!==null)),r!==null){var w=r.buffer;mi(w.usage===mo.INDEX),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,MA(w)),this.currentIndexBufferByteOffset=r.offset||0}else this.currentIndexBufferByteOffset=null}else mi(this.currentPipeline.inputLayout===null),mi(r===null),this.bindVAO(null),this.currentIndexBufferByteOffset=0},t.prototype.setStencilReference=function(e){this.currentStencilRef!==e&&(this.currentStencilRef=e,this.applyStencil())},t.prototype.draw=function(e,n,r,i){var a,o=this;if(this.renderBundle){this.renderBundle.push(function(){return o.draw(e,n,r,i)});return}var s=this.gl,l=this.currentPipeline;if(n){var c=[l.drawMode,r||0,e,n];wr(s)?s.drawArraysInstanced.apply(s,_r([],Ae(c),!1)):(a=this.ANGLE_instanced_arrays).drawArraysInstancedANGLE.apply(a,_r([],Ae(c),!1))}else s.drawArrays(l.drawMode,r,e);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(e/3*Math.max(n,1))},t.prototype.drawIndexed=function(e,n,r,i,a){var o,s=this;if(this.renderBundle){this.renderBundle.push(function(){return s.drawIndexed(e,n,r,i,a)});return}var l=this.gl,c=this.currentPipeline,u=VE(c.inputLayout),f=VE(this.currentIndexBufferByteOffset)+r*u.indexBufferCompByteSize;if(n){var h=[c.drawMode,e,u.indexBufferType,f,n];wr(l)?l.drawElementsInstanced.apply(l,_r([],Ae(h),!1)):(o=this.ANGLE_instanced_arrays).drawElementsInstancedANGLE.apply(o,_r([],Ae(h),!1))}else l.drawElements(c.drawMode,e,u.indexBufferType,f);this.debugGroupStatisticsDrawCall(),this.debugGroupStatisticsTriangles(e/3*Math.max(n,1))},t.prototype.drawIndirect=function(e,n){},t.prototype.drawIndexedIndirect=function(e,n){},t.prototype.beginOcclusionQuery=function(e){var n=this.gl;if(wr(n)){var r=this.currentRenderPassDescriptor.occlusionQueryPool;n.beginQuery(r.gl_query_type,r.gl_query[e])}},t.prototype.endOcclusionQuery=function(){var e=this.gl;if(wr(e)){var n=this.currentRenderPassDescriptor.occlusionQueryPool;e.endQuery(n.gl_query_type)}},t.prototype.pipelineQueryReady=function(e){var n=e;return this.queryProgramReady(n.program)},t.prototype.pipelineForceReady=function(e){},t.prototype.endPass=function(){for(var e=this.gl,n=wr(e),r=this.currentColorResolveTos.length===1&&this.currentColorResolveTos[0]===this.scTexture,i=!1,a=0;a<this.currentColorAttachments.length;a++){var o=this.currentColorAttachments[a];if(o!==null){var s=this.currentColorResolveTos[a],l=!1;s!==null&&(mi(o.width===s.width&&o.height===s.height),this.setScissorRectEnabled(!1),r||(n&&e.bindFramebuffer(e.READ_FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&n&&this.bindFramebufferAttachment(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,o,this.currentColorAttachmentLevels[a])),l=!0,r||(s===this.scTexture?e.bindFramebuffer(n?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,this.scPlatformFramebuffer):(e.bindFramebuffer(n?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,this.resolveColorDrawFramebuffer),this.resolveColorAttachmentsChanged&&e.framebufferTexture2D(n?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,s.gl_texture,this.currentColorResolveToLevels[a]))),r||(n?(e.blitFramebuffer(0,0,o.width,o.height,0,0,s.width,s.height,e.COLOR_BUFFER_BIT,e.LINEAR),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null)):this.submitBlitRenderPass(o,s)),i=!0),this.currentRenderPassDescriptor.colorStore[a]||!r&&!l&&(e.bindFramebuffer(n?ke.READ_FRAMEBUFFER:ke.FRAMEBUFFER,this.resolveColorReadFramebuffer),this.resolveColorAttachmentsChanged&&this.bindFramebufferAttachment(n?ke.READ_FRAMEBUFFER:ke.FRAMEBUFFER,e.COLOR_ATTACHMENT0,o,this.currentColorAttachmentLevels[a])),r||e.bindFramebuffer(n?ke.READ_FRAMEBUFFER:ke.FRAMEBUFFER,null)}}this.resolveColorAttachmentsChanged=!1;var c=this.currentDepthStencilAttachment;if(c){var u=this.currentDepthStencilResolveTo,l=!1;u&&(mi(c.width===u.width&&c.height===u.height),this.setScissorRectEnabled(!1),r||(e.bindFramebuffer(n?ke.READ_FRAMEBUFFER:ke.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),e.bindFramebuffer(n?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,this.resolveDepthStencilDrawFramebuffer),this.resolveDepthStencilAttachmentsChanged&&(this.bindFramebufferDepthStencilAttachment(n?ke.READ_FRAMEBUFFER:ke.FRAMEBUFFER,c),this.bindFramebufferDepthStencilAttachment(n?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,u))),l=!0,r||(n&&e.blitFramebuffer(0,0,c.width,c.height,0,0,u.width,u.height,e.DEPTH_BUFFER_BIT,e.NEAREST),e.bindFramebuffer(n?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,null)),i=!0),!r&&!this.currentRenderPassDescriptor.depthStencilStore&&(l||(e.bindFramebuffer(n?ke.READ_FRAMEBUFFER:ke.FRAMEBUFFER,this.resolveDepthStencilReadFramebuffer),this.resolveDepthStencilAttachmentsChanged&&this.bindFramebufferDepthStencilAttachment(n?ke.READ_FRAMEBUFFER:ke.FRAMEBUFFER,c),l=!0),n&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[e.DEPTH_STENCIL_ATTACHMENT])),!r&&l&&e.bindFramebuffer(n?ke.READ_FRAMEBUFFER:ke.FRAMEBUFFER,null),this.resolveDepthStencilAttachmentsChanged=!1}!r&&!i&&e.bindFramebuffer(n?ke.DRAW_FRAMEBUFFER:ke.FRAMEBUFFER,null)},t.prototype.setScissorRectEnabled=function(e){if(this.currentScissorEnabled!==e){var n=this.gl;e?n.enable(n.SCISSOR_TEST):n.disable(n.SCISSOR_TEST),this.currentScissorEnabled=e}},t.prototype.applyStencil=function(){Kn(this.currentStencilRef)||(this.gl.stencilFuncSeparate(ke.FRONT,this.currentMegaState.stencilFront.compare,this.currentStencilRef,this.currentMegaState.stencilFront.mask||255),this.gl.stencilFuncSeparate(ke.BACK,this.currentMegaState.stencilBack.compare,this.currentStencilRef,this.currentMegaState.stencilBack.mask||255))},t.prototype.getFallbackTexture=function(e){var n=e.gl_target,r=e.formatKind;if(n===ke.TEXTURE_2D)return r===Ls.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(n===ke.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(n===ke.TEXTURE_3D)return this.fallbackTexture3D;if(n===ke.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},t.prototype.submitBlitRenderPass=function(e,n){this.blitRenderPipeline||(this.blitProgram=this.createProgram({vertex:{glsl:`layout(location = 0) in vec2 a_Position;
out vec2 v_TexCoord;
void main() {
  v_TexCoord = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);

  #ifdef VIEWPORT_ORIGIN_TL
    v_TexCoord.y = 1.0 - v_TexCoord.y;
  #endif
}`},fragment:{glsl:`uniform sampler2D u_Texture;
in vec2 v_TexCoord;
out vec4 outputColor;
void main() {
  outputColor = texture(SAMPLER_2D(u_Texture), v_TexCoord);
}`}}),this.blitVertexBuffer=this.createBuffer({usage:mo.VERTEX|mo.COPY_DST,viewOrSize:new Float32Array([-4,-4,4,-4,0,4])}),this.blitInputLayout=this.createInputLayout({vertexBufferDescriptors:[{arrayStride:8,stepMode:Fx.VERTEX,attributes:[{format:Je.F32_RG,offset:0,shaderLocation:0}]}],indexBufferFormat:null,program:this.blitProgram}),this.blitRenderPipeline=this.createRenderPipeline({topology:Rl.TRIANGLES,sampleCount:1,program:this.blitProgram,colorAttachmentFormats:[Je.U8_RGBA_RT],depthStencilAttachmentFormat:null,inputLayout:this.blitInputLayout,megaStateDescriptor:pw(gw)}),this.blitBindings=this.createBindings({samplerBindings:[{sampler:null,texture:e.texture}],uniformBufferBindings:[]}),this.blitProgram.setUniformsLegacy({u_Texture:e}));var r=this.currentRenderPassDescriptor;this.currentRenderPassDescriptor=null,this.inBlitRenderPass=!0;var i=this.createRenderPass({colorAttachment:[e],colorResolveTo:[n],colorClearColor:[CYt]}),a=this.getCanvas(),o=a.width,s=a.height;i.setPipeline(this.blitRenderPipeline),i.setBindings(this.blitBindings),i.setVertexInput(this.blitInputLayout,[{buffer:this.blitVertexBuffer}],null),i.setViewport(0,0,o,s),this.gl.disable(this.gl.BLEND),i.draw(3,0),this.gl.enable(this.gl.BLEND),this.currentRenderPassDescriptor=r,this.inBlitRenderPass=!1},t})(),PXt=(function(){function t(e){this.pluginOptions=e}return t.prototype.createSwapChain=function(e){return Pi(this,void 0,void 0,function(){var n,r,i,a,o,s,l,c,u,f,h,d,p;return lA(this,function(g){return n=this.pluginOptions,r=n.targets,i=n.xrCompatible,a=n.antialias,o=a===void 0?!1:a,s=n.preserveDrawingBuffer,l=s===void 0?!1:s,c=n.premultipliedAlpha,u=c===void 0?!0:c,f=n.shaderDebug,h=n.trackResources,d={antialias:o,preserveDrawingBuffer:l,stencil:!0,premultipliedAlpha:u,xrCompatible:i},this.handleContextEvents(e),r.includes("webgl2")&&(p=e.getContext("webgl2",d)||e.getContext("experimental-webgl2",d)),!p&&r.includes("webgl1")&&(p=e.getContext("webgl",d)||e.getContext("experimental-webgl",d)),[2,new MXt(p,{shaderDebug:f,trackResources:h})]})})},t.prototype.handleContextEvents=function(e){var n=this.pluginOptions,r=n.onContextLost,i=n.onContextRestored,a=n.onContextCreationError;a&&e.addEventListener("webglcontextcreationerror",a,!1),r&&e.addEventListener("webglcontextlost",r,!1),i&&e.addEventListener("webglcontextrestored",i,!1)},t})();let Is;const k6e=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&k6e.decode();let wC=null;function Bk(){return(wC===null||wC.byteLength===0)&&(wC=new Uint8Array(Is.memory.buffer)),wC}function gF(t,e){return t=t>>>0,k6e.decode(Bk().subarray(t,t+e))}const ly=new Array(128).fill(void 0);ly.push(void 0,null,!0,!1);let cR=ly.length;function NXt(t){cR===ly.length&&ly.push(ly.length+1);const e=cR;return cR=ly[e],ly[e]=t,e}function Fk(t){return ly[t]}function IXt(t){t<132||(ly[t]=cR,cR=t)}function LXt(t){const e=Fk(t);return IXt(t),e}let mw=0;const Uk=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},kXt=typeof Uk.encodeInto=="function"?function(t,e){return Uk.encodeInto(t,e)}:function(t,e){const n=Uk.encode(t);return e.set(n),{read:t.length,written:n.length}};function vF(t,e,n){if(n===void 0){const s=Uk.encode(t),l=e(s.length,1)>>>0;return Bk().subarray(l,l+s.length).set(s),mw=s.length,l}let r=t.length,i=e(r,1)>>>0;const a=Bk();let o=0;for(;o<r;o++){const s=t.charCodeAt(o);if(s>127)break;a[i+o]=s}if(o!==r){o!==0&&(t=t.slice(o)),i=n(i,r,r=o+t.length*3,1)>>>0;const s=Bk().subarray(i+o,i+r),l=kXt(t,s);o+=l.written}return mw=o,i}let OC=null;function mF(){return(OC===null||OC.byteLength===0)&&(OC=new Int32Array(Is.memory.buffer)),OC}function DXt(t,e,n){let r,i;try{const s=Is.__wbindgen_add_to_stack_pointer(-16),l=vF(t,Is.__wbindgen_malloc,Is.__wbindgen_realloc),c=mw,u=vF(e,Is.__wbindgen_malloc,Is.__wbindgen_realloc),f=mw;Is.glsl_compile(s,l,c,u,f,n);var a=mF()[s/4+0],o=mF()[s/4+1];return r=a,i=o,gF(a,o)}finally{Is.__wbindgen_add_to_stack_pointer(16),Is.__wbindgen_free(r,i,1)}}class aP{static __wrap(e){e=e>>>0;const n=Object.create(aP.prototype);return n.__wbg_ptr=e,n}__destroy_into_raw(){const e=this.__wbg_ptr;return this.__wbg_ptr=0,e}free(){const e=this.__destroy_into_raw();Is.__wbg_wgslcomposer_free(e)}constructor(){const e=Is.wgslcomposer_new();return aP.__wrap(e)}load_composable(e){const n=vF(e,Is.__wbindgen_malloc,Is.__wbindgen_realloc),r=mw;Is.wgslcomposer_load_composable(this.__wbg_ptr,n,r)}wgsl_compile(e){let n,r;try{const o=Is.__wbindgen_add_to_stack_pointer(-16),s=vF(e,Is.__wbindgen_malloc,Is.__wbindgen_realloc),l=mw;Is.wgslcomposer_wgsl_compile(o,this.__wbg_ptr,s,l);var i=mF()[o/4+0],a=mF()[o/4+1];return n=i,r=a,gF(i,a)}finally{Is.__wbindgen_add_to_stack_pointer(16),Is.__wbindgen_free(n,r,1)}}}async function BXt(t,e){if(typeof Response=="function"&&t instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(t,e)}catch(r){if(t.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const n=await t.arrayBuffer();return await WebAssembly.instantiate(n,e)}else{const n=await WebAssembly.instantiate(t,e);return n instanceof WebAssembly.Instance?{instance:n,module:t}:n}}function FXt(){const t={};return t.wbg={},t.wbg.__wbindgen_string_new=function(e,n){const r=gF(e,n);return NXt(r)},t.wbg.__wbindgen_object_drop_ref=function(e){LXt(e)},t.wbg.__wbg_log_1d3ae0273d8f4f8a=function(e){console.log(Fk(e))},t.wbg.__wbg_log_576ca876af0d4a77=function(e,n){console.log(Fk(e),Fk(n))},t.wbg.__wbindgen_throw=function(e,n){throw new Error(gF(e,n))},t}function UXt(t,e){return Is=t.exports,D6e.__wbindgen_wasm_module=e,OC=null,wC=null,Is}async function D6e(t){if(Is!==void 0)return Is;const e=FXt();(typeof t=="string"||typeof Request=="function"&&t instanceof Request||typeof URL=="function"&&t instanceof URL)&&(t=fetch(t));const{instance:n,module:r}=await BXt(await t,e);return UXt(n,r)}var lc;(function(t){t[t.COPY_SRC=1]="COPY_SRC",t[t.COPY_DST=2]="COPY_DST",t[t.TEXTURE_BINDING=4]="TEXTURE_BINDING",t[t.STORAGE_BINDING=8]="STORAGE_BINDING",t[t.STORAGE=8]="STORAGE",t[t.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(lc||(lc={}));var zZ;(function(t){t[t.READ=1]="READ",t[t.WRITE=2]="WRITE"})(zZ||(zZ={}));function jXt(t){var e=0;return t&uf.SAMPLED&&(e|=lc.TEXTURE_BINDING|lc.COPY_DST|lc.COPY_SRC),t&uf.STORAGE&&(e|=lc.TEXTURE_BINDING|lc.STORAGE_BINDING|lc.COPY_SRC|lc.COPY_DST),t&uf.RENDER_TARGET&&(e|=lc.RENDER_ATTACHMENT|lc.TEXTURE_BINDING|lc.COPY_SRC|lc.COPY_DST),e}function lre(t){if(t===Je.U8_R_NORM)return"r8unorm";if(t===Je.S8_R_NORM)return"r8snorm";if(t===Je.U8_RG_NORM)return"rg8unorm";if(t===Je.S8_RG_NORM)return"rg8snorm";if(t===Je.U32_R)return"r32uint";if(t===Je.S32_R)return"r32sint";if(t===Je.F32_R)return"r32float";if(t===Je.U16_RG)return"rg16uint";if(t===Je.S16_RG)return"rg16sint";if(t===Je.F16_RG)return"rg16float";if(t===Je.U8_RGBA_RT)return"bgra8unorm";if(t===Je.U8_RGBA_RT_SRGB)return"bgra8unorm-srgb";if(t===Je.U8_RGBA_NORM)return"rgba8unorm";if(t===Je.U8_RGBA_SRGB)return"rgba8unorm-srgb";if(t===Je.S8_RGBA_NORM)return"rgba8snorm";if(t===Je.U32_RG)return"rg32uint";if(t===Je.S32_RG)return"rg32sint";if(t===Je.F32_RG)return"rg32float";if(t===Je.U16_RGBA)return"rgba16uint";if(t===Je.S16_RGBA)return"rgba16sint";if(t===Je.F16_RGBA)return"rgba16float";if(t===Je.F32_RGBA)return"rgba32float";if(t===Je.U32_RGBA)return"rgba32uint";if(t===Je.S32_RGBA)return"rgba32sint";if(t===Je.D24)return"depth24plus";if(t===Je.D24_S8)return"depth24plus-stencil8";if(t===Je.D32F)return"depth32float";if(t===Je.D32F_S8)return"depth32float-stencil8";if(t===Je.BC1)return"bc1-rgba-unorm";if(t===Je.BC1_SRGB)return"bc1-rgba-unorm-srgb";if(t===Je.BC2)return"bc2-rgba-unorm";if(t===Je.BC2_SRGB)return"bc2-rgba-unorm-srgb";if(t===Je.BC3)return"bc3-rgba-unorm";if(t===Je.BC3_SRGB)return"bc3-rgba-unorm-srgb";if(t===Je.BC4_SNORM)return"bc4-r-snorm";if(t===Je.BC4_UNORM)return"bc4-r-unorm";if(t===Je.BC5_SNORM)return"bc5-rg-snorm";if(t===Je.BC5_UNORM)return"bc5-rg-unorm";throw"whoops"}function zXt(t){if(t===ea.TEXTURE_2D)return"2d";if(t===ea.TEXTURE_CUBE_MAP)return"2d";if(t===ea.TEXTURE_2D_ARRAY)return"2d";if(t===ea.TEXTURE_3D)return"3d";throw new Error("whoops")}function $Xt(t){if(t===ea.TEXTURE_2D)return"2d";if(t===ea.TEXTURE_CUBE_MAP)return"cube";if(t===ea.TEXTURE_2D_ARRAY)return"2d-array";if(t===ea.TEXTURE_3D)return"3d";throw new Error("whoops")}function HXt(t){var e=0;return t&mo.INDEX&&(e|=GPUBufferUsage.INDEX),t&mo.VERTEX&&(e|=GPUBufferUsage.VERTEX),t&mo.UNIFORM&&(e|=GPUBufferUsage.UNIFORM),t&mo.STORAGE&&(e|=GPUBufferUsage.STORAGE),t&mo.COPY_SRC&&(e|=GPUBufferUsage.COPY_SRC),t&mo.INDIRECT&&(e|=GPUBufferUsage.INDIRECT),e|=GPUBufferUsage.COPY_DST,e}function lV(t){if(t===Xf.CLAMP_TO_EDGE)return"clamp-to-edge";if(t===Xf.REPEAT)return"repeat";if(t===Xf.MIRRORED_REPEAT)return"mirror-repeat";throw new Error("whoops")}function gEe(t){if(t===Ys.BILINEAR)return"linear";if(t===Ys.POINT)return"nearest";throw new Error("whoops")}function GXt(t){if(t===hc.LINEAR)return"linear";if(t===hc.NEAREST)return"nearest";if(t===hc.NO_MIP)return"nearest";throw new Error("whoops")}function aA(t){var e=t;return e.gpuBuffer}function WXt(t){var e=t;return e.gpuSampler}function VXt(t){var e=t;return e.querySet}function YXt(t){if(t===uF.OcclusionConservative)return"occlusion";throw new Error("whoops")}function XXt(t){switch(t){case Rl.TRIANGLES:return"triangle-list";case Rl.POINTS:return"point-list";case Rl.TRIANGLE_STRIP:return"triangle-strip";case Rl.LINES:return"line-list";case Rl.LINE_STRIP:return"line-strip";default:throw new Error("Unknown primitive topology mode")}}function qXt(t){if(t===kh.NONE)return"none";if(t===kh.FRONT)return"front";if(t===kh.BACK)return"back";throw new Error("whoops")}function ZXt(t){if(t===iP.CCW)return"ccw";if(t===iP.CW)return"cw";throw new Error("whoops")}function KXt(t,e){return{topology:XXt(t),cullMode:qXt(e.cullMode),frontFace:ZXt(e.frontFace)}}function vEe(t){if(t===Ji.ZERO)return"zero";if(t===Ji.ONE)return"one";if(t===Ji.SRC)return"src";if(t===Ji.ONE_MINUS_SRC)return"one-minus-src";if(t===Ji.DST)return"dst";if(t===Ji.ONE_MINUS_DST)return"one-minus-dst";if(t===Ji.SRC_ALPHA)return"src-alpha";if(t===Ji.ONE_MINUS_SRC_ALPHA)return"one-minus-src-alpha";if(t===Ji.DST_ALPHA)return"dst-alpha";if(t===Ji.ONE_MINUS_DST_ALPHA)return"one-minus-dst-alpha";if(t===Ji.CONST)return"constant";if(t===Ji.ONE_MINUS_CONSTANT)return"one-minus-constant";if(t===Ji.SRC_ALPHA_SATURATE)return"src-alpha-saturated";throw new Error("whoops")}function QXt(t){if(t===Pc.ADD)return"add";if(t===Pc.SUBSTRACT)return"subtract";if(t===Pc.REVERSE_SUBSTRACT)return"reverse-subtract";if(t===Pc.MIN)return"min";if(t===Pc.MAX)return"max";throw new Error("whoops")}function mEe(t){return{operation:QXt(t.blendMode),srcFactor:vEe(t.blendSrcFactor),dstFactor:vEe(t.blendDstFactor)}}function yEe(t){return t.blendMode===Pc.ADD&&t.blendSrcFactor===Ji.ONE&&t.blendDstFactor===Ji.ZERO}function JXt(t){if(!(yEe(t.rgbBlendState)&&yEe(t.alphaBlendState)))return{color:mEe(t.rgbBlendState),alpha:mEe(t.alphaBlendState)}}function eqt(t,e){return{format:lre(e),blend:JXt(t),writeMask:t.channelWriteMask}}function tqt(t,e){return e.attachmentsState.map(function(n,r){return eqt(n,t[r])})}function jk(t){if(t===Ua.NEVER)return"never";if(t===Ua.LESS)return"less";if(t===Ua.EQUAL)return"equal";if(t===Ua.LEQUAL)return"less-equal";if(t===Ua.GREATER)return"greater";if(t===Ua.NOTEQUAL)return"not-equal";if(t===Ua.GEQUAL)return"greater-equal";if(t===Ua.ALWAYS)return"always";throw new Error("whoops")}function LT(t){if(t===ks.KEEP)return"keep";if(t===ks.REPLACE)return"replace";if(t===ks.ZERO)return"zero";if(t===ks.DECREMENT_CLAMP)return"decrement-clamp";if(t===ks.DECREMENT_WRAP)return"decrement-wrap";if(t===ks.INCREMENT_CLAMP)return"increment-clamp";if(t===ks.INCREMENT_WRAP)return"increment-wrap";if(t===ks.INVERT)return"invert";throw new Error("whoops")}function nqt(t,e){if(!Kn(t))return{format:lre(t),depthWriteEnabled:!!e.depthWrite,depthCompare:jk(e.depthCompare),depthBias:e.polygonOffset?e.polygonOffsetUnits:0,depthBiasSlopeScale:e.polygonOffset?e.polygonOffsetFactor:0,stencilFront:{compare:jk(e.stencilFront.compare),passOp:LT(e.stencilFront.passOp),failOp:LT(e.stencilFront.failOp),depthFailOp:LT(e.stencilFront.depthFailOp)},stencilBack:{compare:jk(e.stencilBack.compare),passOp:LT(e.stencilBack.passOp),failOp:LT(e.stencilBack.failOp),depthFailOp:LT(e.stencilBack.depthFailOp)},stencilReadMask:4294967295,stencilWriteMask:4294967295}}function rqt(t){if(t!==null){if(t===Je.U16_R)return"uint16";if(t===Je.U32_R)return"uint32";throw new Error("whoops")}}function iqt(t){if(t===Fx.VERTEX)return"vertex";if(t===Fx.INSTANCE)return"instance";throw new Error("whoops")}function aqt(t){if(t===Je.U8_R)return"uint8x2";if(t===Je.U8_RG)return"uint8x2";if(t===Je.U8_RGB)return"uint8x4";if(t===Je.U8_RGBA)return"uint8x4";if(t===Je.U8_RG_NORM)return"unorm8x2";if(t===Je.U8_RGBA_NORM)return"unorm8x4";if(t===Je.S8_RGB_NORM)return"snorm8x4";if(t===Je.S8_RGBA_NORM)return"snorm8x4";if(t===Je.U16_RG_NORM)return"unorm16x2";if(t===Je.U16_RGBA_NORM)return"unorm16x4";if(t===Je.S16_RG_NORM)return"snorm16x2";if(t===Je.S16_RGBA_NORM)return"snorm16x4";if(t===Je.S16_RG)return"uint16x2";if(t===Je.F16_RG)return"float16x2";if(t===Je.F16_RGBA)return"float16x4";if(t===Je.F32_R)return"float32";if(t===Je.F32_RG)return"float32x2";if(t===Je.F32_RGB)return"float32x3";if(t===Je.F32_RGBA)return"float32x4";throw"whoops"}function oqt(t){var e=r0(t);switch(e){case Qt.BC1:case Qt.BC2:case Qt.BC3:case Qt.BC4_SNORM:case Qt.BC4_UNORM:case Qt.BC5_SNORM:case Qt.BC5_UNORM:return!0;default:return!1}}function sqt(t){var e=r0(t);switch(e){case Qt.BC1:case Qt.BC2:case Qt.BC3:case Qt.BC4_SNORM:case Qt.BC4_UNORM:case Qt.BC5_SNORM:case Qt.BC5_UNORM:return 4;default:return 1}}function _Ee(t,e,n,r){switch(n===void 0&&(n=!1),t){case Je.S8_R:case Je.S8_R_NORM:case Je.S8_RG_NORM:case Je.S8_RGB_NORM:case Je.S8_RGBA_NORM:{var i=e instanceof ArrayBuffer?new Int8Array(e):new Int8Array(e);return r&&i.set(new Int8Array(r)),i}case Je.U8_R:case Je.U8_R_NORM:case Je.U8_RG:case Je.U8_RG_NORM:case Je.U8_RGB:case Je.U8_RGB_NORM:case Je.U8_RGB_SRGB:case Je.U8_RGBA:case Je.U8_RGBA_NORM:case Je.U8_RGBA_SRGB:{var a=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e);return r&&a.set(new Uint8Array(r)),a}case Je.S16_R:case Je.S16_RG:case Je.S16_RG_NORM:case Je.S16_RGB_NORM:case Je.S16_RGBA:case Je.S16_RGBA_NORM:{var o=e instanceof ArrayBuffer?new Int16Array(e):new Int16Array(n?e/2:e);return r&&o.set(new Int16Array(r)),o}case Je.U16_R:case Je.U16_RGB:case Je.U16_RGBA_5551:case Je.U16_RGBA_NORM:case Je.U16_RG_NORM:case Je.U16_R_NORM:{var s=e instanceof ArrayBuffer?new Uint16Array(e):new Uint16Array(n?e/2:e);return r&&s.set(new Uint16Array(r)),s}case Je.S32_R:{var l=e instanceof ArrayBuffer?new Int32Array(e):new Int32Array(n?e/4:e);return r&&l.set(new Int32Array(r)),l}case Je.U32_R:case Je.U32_RG:{var c=e instanceof ArrayBuffer?new Uint32Array(e):new Uint32Array(n?e/4:e);return r&&c.set(new Uint32Array(r)),c}case Je.F32_R:case Je.F32_RG:case Je.F32_RGB:case Je.F32_RGBA:{var u=e instanceof ArrayBuffer?new Float32Array(e):new Float32Array(n?e/4:e);return r&&u.set(new Float32Array(r)),u}}var f=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e);return r&&f.set(new Uint8Array(r)),f}function lqt(t){var e=(t&32768)>>15,n=(t&31744)>>10,r=t&1023;return n===0?(e?-1:1)*Math.pow(2,-14)*(r/Math.pow(2,10)):n==31?r?NaN:(e?-1:1)*(1/0):(e?-1:1)*Math.pow(2,n-15)*(1+r/Math.pow(2,10))}function B6e(t){switch(t){case"r8unorm":case"r8snorm":case"r8uint":case"r8sint":return{width:1,height:1,length:1};case"r16uint":case"r16sint":case"r16float":case"rg8unorm":case"rg8snorm":case"rg8uint":case"rg8sint":return{width:1,height:1,length:2};case"r32uint":case"r32sint":case"r32float":case"rg16uint":case"rg16sint":case"rg16float":case"rgba8unorm":case"rgba8unorm-srgb":case"rgba8snorm":case"rgba8uint":case"rgba8sint":case"bgra8unorm":case"bgra8unorm-srgb":case"rgb9e5ufloat":case"rgb10a2unorm":case"rg11b10ufloat":return{width:1,height:1,length:4};case"rg32uint":case"rg32sint":case"rg32float":case"rgba16uint":case"rgba16sint":case"rgba16float":return{width:1,height:1,length:8};case"rgba32uint":case"rgba32sint":case"rgba32float":return{width:1,height:1,length:16};case"stencil8":throw new Error("No fixed size for Stencil8 format!");case"depth16unorm":return{width:1,height:1,length:2};case"depth24plus":throw new Error("No fixed size for Depth24Plus format!");case"depth24plus-stencil8":throw new Error("No fixed size for Depth24PlusStencil8 format!");case"depth32float":return{width:1,height:1,length:4};case"depth32float-stencil8":return{width:1,height:1,length:5};case"bc7-rgba-unorm":case"bc7-rgba-unorm-srgb":case"bc6h-rgb-ufloat":case"bc6h-rgb-float":case"bc2-rgba-unorm":case"bc2-rgba-unorm-srgb":case"bc3-rgba-unorm":case"bc3-rgba-unorm-srgb":case"bc5-rg-unorm":case"bc5-rg-snorm":return{width:4,height:4,length:16};case"bc4-r-unorm":case"bc4-r-snorm":case"bc1-rgba-unorm":case"bc1-rgba-unorm-srgb":return{width:4,height:4,length:8};default:return{width:1,height:1,length:4}}}var uv=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=t.call(this)||this;return a.id=r,a.device=i,a}return e.prototype.destroy=function(){},e})(Cw),cqt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o,s,l=t.call(this,{id:r,device:i})||this;l.type=Aa.Bindings;var c=a.pipeline;mi(!!c);var u=a.uniformBufferBindings,f=a.storageBufferBindings,h=a.samplerBindings,d=a.storageTextureBindings;l.numUniformBuffers=u?.length||0;var p=[[],[],[],[]],g=0;if(u&&u.length)for(var v=0;v<u.length;v++){var y=a.uniformBufferBindings[v],_=y.binding,E=y.size,x=y.offset,T=y.buffer,S={buffer:aA(T),offset:x??0,size:E};p[0].push({binding:_??g++,resource:S})}if(h&&h.length){g=0;for(var v=0;v<h.length;v++){var w=Ot(Ot({},h[v]),P6e),_=a.samplerBindings[v],C=_.texture!==null?_.texture:l.device.getFallbackTexture(w);w.dimension=C.dimension,w.formatKind=A6e(C.format);var D=C.gpuTextureView;if(p[1].push({binding:(o=_.textureBinding)!==null&&o!==void 0?o:g++,resource:D}),_.samplerBinding!==-1){var L=_.sampler!==null?_.sampler:l.device.getFallbackSampler(w),B=WXt(L);p[1].push({binding:(s=_.samplerBinding)!==null&&s!==void 0?s:g++,resource:B})}}}if(f&&f.length){g=0;for(var v=0;v<f.length;v++){var I=a.storageBufferBindings[v],_=I.binding,E=I.size,x=I.offset,T=I.buffer,S={buffer:aA(T),offset:x??0,size:E};p[2].push({binding:_??g++,resource:S})}}if(d&&d.length){g=0;for(var v=0;v<d.length;v++){var U=a.storageTextureBindings[v],_=U.binding,C=U.texture,D=C.gpuTextureView;p[3].push({binding:_??g++,resource:D})}}var $=p.findLastIndex(function(X){return!!X.length});return l.gpuBindGroup=p.map(function(X,N){return N<=$&&l.device.device.createBindGroup({layout:c.getBindGroupLayout(N),entries:X})}),l}return e})(uv),uqt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;o.type=Aa.Buffer;var s=a.usage,l=a.viewOrSize,c=!!(s&mo.MAP_READ);o.usage=HXt(s),c&&(o.usage=mo.MAP_READ|mo.COPY_DST);var u=!Ln(l);if(o.view=Ln(l)?null:l,o.size=Ln(l)?hF(l,4):hF(l.byteLength,4),Ln(l))o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:c?u:!1});else{o.gpuBuffer=o.device.device.createBuffer({usage:o.usage,size:o.size,mappedAtCreation:!0});var f=l&&l.constructor||Float32Array;new f(o.gpuBuffer.getMappedRange()).set(l),o.gpuBuffer.unmap()}return o}return e.prototype.setSubData=function(n,r,i,a){i===void 0&&(i=0),a===void 0&&(a=0);var o=this.gpuBuffer;a=a||r.byteLength,a=Math.min(a,this.size-n);var s=r.byteOffset+i,l=s+a,c=a+3&-4;if(c!==a){var u=new Uint8Array(r.buffer.slice(s,l));r=new Uint8Array(c),r.set(u),i=0,s=0,l=c,a=c}for(var f=1024*1024*15,h=0;l-(s+h)>f;)this.device.device.queue.writeBuffer(o,n+h,r.buffer,s+h,f),h+=f;this.device.device.queue.writeBuffer(o,n+h,r.buffer,s+h,a-h)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gpuBuffer.destroy()},e})(uv),bEe=(function(){function t(){this.gpuComputePassEncoder=null}return t.prototype.dispatchWorkgroups=function(e,n,r){this.gpuComputePassEncoder.dispatchWorkgroups(e,n,r)},t.prototype.dispatchWorkgroupsIndirect=function(e,n){this.gpuComputePassEncoder.dispatchWorkgroupsIndirect(e.gpuBuffer,n)},t.prototype.finish=function(){this.gpuComputePassEncoder.end(),this.gpuComputePassEncoder=null,this.frameCommandEncoder=null},t.prototype.beginComputePass=function(e){mi(this.gpuComputePassEncoder===null),this.frameCommandEncoder=e,this.gpuComputePassEncoder=this.frameCommandEncoder.beginComputePass(this.gpuComputePassDescriptor)},t.prototype.setPipeline=function(e){var n=e,r=VE(n.gpuComputePipeline);this.gpuComputePassEncoder.setPipeline(r)},t.prototype.setBindings=function(e){var n=this,r=e;r.gpuBindGroup.forEach(function(i,a){i&&n.gpuComputePassEncoder.setBindGroup(a,r.gpuBindGroup[a])})},t.prototype.pushDebugGroup=function(e){this.gpuComputePassEncoder.pushDebugGroup(e)},t.prototype.popDebugGroup=function(){this.gpuComputePassEncoder.popDebugGroup()},t.prototype.insertDebugMarker=function(e){this.gpuComputePassEncoder.insertDebugMarker(e)},t})(),fqt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;o.type=Aa.ComputePipeline,o.gpuComputePipeline=null,o.descriptor=a;var s=a.program,l=s.computeStage;if(l===null)return o;var c={layout:"auto",compute:Ot({},l)};return o.gpuComputePipeline=o.device.device.createComputePipeline(c),o.name!==void 0&&(o.gpuComputePipeline.label=o.name),o}return e.prototype.getBindGroupLayout=function(n){return this.gpuComputePipeline.getBindGroupLayout(n)},e})(uv),hqt=(function(t){Cr(e,t);function e(n){var r,i,a,o,s=n.id,l=n.device,c=n.descriptor,u=t.call(this,{id:s,device:l})||this;u.type=Aa.InputLayout;var f=[];try{for(var h=$p(c.vertexBufferDescriptors),d=h.next();!d.done;d=h.next()){var p=d.value,g=p.arrayStride,v=p.stepMode,y=p.attributes;f.push({arrayStride:g,stepMode:iqt(v),attributes:[]});try{for(var _=(a=void 0,$p(y)),E=_.next();!E.done;E=_.next()){var x=E.value,T=x.shaderLocation,S=x.format,w=x.offset;f[f.length-1].attributes.push({shaderLocation:T,format:aqt(S),offset:w})}}catch(C){a={error:C}}finally{try{E&&!E.done&&(o=_.return)&&o.call(_)}finally{if(a)throw a.error}}}}catch(C){r={error:C}}finally{try{d&&!d.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return u.indexFormat=rqt(c.indexBufferFormat),u.buffers=f,u}return e})(uv),EEe=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;return o.type=Aa.Program,o.vertexStage=null,o.fragmentStage=null,o.computeStage=null,o.descriptor=a,a.vertex&&(o.vertexStage=o.createShaderStage(a.vertex,"vertex")),a.fragment&&(o.fragmentStage=o.createShaderStage(a.fragment,"fragment")),a.compute&&(o.computeStage=o.createShaderStage(a.compute,"compute")),o}return e.prototype.setUniformsLegacy=function(n){},e.prototype.createShaderStage=function(n,r){var i,a,o=n.glsl,s=n.wgsl,l=n.entryPoint,c=n.postprocess,u=!1,f=s;if(!f)try{f=this.device.glsl_compile(o,r,u)}catch(y){throw console.error(y,o),new Error("whoops")}var h=function(y){if(!f.includes(y))return"continue";f=f.replace("var T_".concat(y,": texture_2d<f32>;"),"var T_".concat(y,": texture_depth_2d;")),f=f.replace(new RegExp("textureSample\\(T_".concat(y,"(.*)\\);$"),"gm"),function(_,E){return"vec4<f32>(textureSample(T_".concat(y).concat(E,"), 0.0, 0.0, 0.0);")})};try{for(var d=$p(["u_TextureFramebufferDepth"]),p=d.next();!p.done;p=d.next()){var g=p.value;h(g)}}catch(y){i={error:y}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}c&&(f=c(f));var v=this.device.device.createShaderModule({code:f});return{module:v,entryPoint:l||"main"}},e})(uv),dqt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;o.type=Aa.QueryPool;var s=a.elemCount,l=a.type;return o.querySet=o.device.device.createQuerySet({type:YXt(l),count:s}),o.resolveBuffer=o.device.device.createBuffer({size:s*8,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),o.cpuBuffer=o.device.device.createBuffer({size:s*8,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),o.results=null,o}return e.prototype.queryResultOcclusion=function(n){return this.results===null?null:this.results[n]!==BigInt(0)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.querySet.destroy(),this.resolveBuffer.destroy(),this.cpuBuffer.destroy()},e})(uv),pqt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=t.call(this,{id:r,device:i})||this;return a.type=Aa.Readback,a}return e.prototype.readTexture=function(n,r,i,a,o,s,l,c){return l===void 0&&(l=0),Pi(this,void 0,void 0,function(){var u,f,h,d,p,g,v,y;return lA(this,function(_){return u=n,f=0,h=B6e(u.gpuTextureformat),d=Math.ceil(a/h.width)*h.length,p=Math.ceil(d/256)*256,g=p*o,v=this.device.createBuffer({usage:mo.STORAGE|mo.MAP_READ|mo.COPY_DST,hint:Kg.STATIC,viewOrSize:g}),y=this.device.device.createCommandEncoder(),y.copyTextureToBuffer({texture:u.gpuTexture,mipLevel:0,origin:{x:r,y:i,z:Math.max(f,0)}},{buffer:v.gpuBuffer,offset:0,bytesPerRow:p},{width:a,height:o,depthOrArrayLayers:1}),this.device.device.queue.submit([y.finish()]),[2,this.readBuffer(v,0,s.byteLength===g?s:null,l,g,u.format,!0,!1,d,p,o)]})})},e.prototype.readTextureSync=function(n,r,i,a,o,s,l,c){throw new Error("ERROR_MSG_METHOD_NOT_IMPLEMENTED")},e.prototype.readBuffer=function(n,r,i,a,o,s,l,c,u,f,h){var d=this;r===void 0&&(r=0),i===void 0&&(i=null),o===void 0&&(o=0),s===void 0&&(s=Je.U8_RGB),l===void 0&&(l=!1),u===void 0&&(u=0),f===void 0&&(f=0),h===void 0&&(h=0);var p=n,g=o||p.size,v=i||p.view,y=v&&v.constructor&&v.constructor.BYTES_PER_ELEMENT||T6e(s),_=p;if(!(p.usage&mo.MAP_READ&&p.usage&mo.COPY_DST)){var E=this.device.device.createCommandEncoder();_=this.device.createBuffer({usage:mo.STORAGE|mo.MAP_READ|mo.COPY_DST,hint:Kg.STATIC,viewOrSize:g}),E.copyBufferToBuffer(p.gpuBuffer,r,_.gpuBuffer,0,g),this.device.device.queue.submit([E.finish()])}return new Promise(function(x,T){_.gpuBuffer.mapAsync(zZ.READ,r,g).then(function(){var S=_.gpuBuffer.getMappedRange(r,g),w=v;if(l)w===null?w=_Ee(s,g,!0,S):w=_Ee(s,w.buffer,void 0,S);else if(w===null)switch(y){case 1:w=new Uint8Array(g),w.set(new Uint8Array(S));break;case 2:w=d.getHalfFloatAsFloatRGBAArrayBuffer(g/2,S);break;case 4:w=new Float32Array(g/4),w.set(new Float32Array(S));break}else switch(y){case 1:w=new Uint8Array(w.buffer),w.set(new Uint8Array(S));break;case 2:w=d.getHalfFloatAsFloatRGBAArrayBuffer(g/2,S,v);break;case 4:var C=v&&v.constructor||Float32Array;w=new C(w.buffer),w.set(new C(S));break}if(u!==f){y===1&&!l&&(u*=2,f*=2);for(var D=new Uint8Array(w.buffer),L=u,B=0,I=1;I<h;++I){B=I*f;for(var U=0;U<u;++U)D[L++]=D[B++]}y!==0&&!l?w=new Float32Array(D.buffer,0,L/4):w=new Uint8Array(D.buffer,0,L)}_.gpuBuffer.unmap(),x(w)},function(S){return T(S)})})},e.prototype.getHalfFloatAsFloatRGBAArrayBuffer=function(n,r,i){i||(i=new Float32Array(n));for(var a=new Uint16Array(r);n--;)i[n]=lqt(a[n]);return i},e})(uv),xEe=(function(){function t(e){this.device=e,this.gpuRenderPassEncoder=null,this.gfxColorAttachment=[],this.gfxColorAttachmentLevel=[],this.gfxColorResolveTo=[],this.gfxColorResolveToLevel=[],this.gfxDepthStencilAttachment=null,this.gfxDepthStencilResolveTo=null,this.gpuColorAttachments=[],this.gpuDepthStencilAttachment={view:null,depthLoadOp:"load",depthStoreOp:"store",stencilLoadOp:"load",stencilStoreOp:"store"},this.gpuRenderPassDescriptor={colorAttachments:this.gpuColorAttachments,depthStencilAttachment:this.gpuDepthStencilAttachment}}return t.prototype.getEncoder=function(){var e;return((e=this.renderBundle)===null||e===void 0?void 0:e.renderBundleEncoder)||this.gpuRenderPassEncoder},t.prototype.getTextureView=function(e,n){return mi(n<e.mipLevelCount),e.mipLevelCount===1?e.gpuTextureView:e.gpuTexture.createView({baseMipLevel:n,mipLevelCount:1})},t.prototype.setRenderPassDescriptor=function(e){var n,r,i,a,o,s;this.descriptor=e,this.gpuRenderPassDescriptor.colorAttachments=this.gpuColorAttachments;var l=e.colorAttachment.length;this.gfxColorAttachment.length=l,this.gfxColorResolveTo.length=l;for(var c=0;c<e.colorAttachment.length;c++){var u=e.colorAttachment[c],f=e.colorResolveTo[c];if(u===null&&f!==null&&(u=f,f=null),this.gfxColorAttachment[c]=u,this.gfxColorResolveTo[c]=f,this.gfxColorAttachmentLevel[c]=((n=e.colorAttachmentLevel)===null||n===void 0?void 0:n[c])||0,this.gfxColorResolveToLevel[c]=((r=e.colorResolveToLevel)===null||r===void 0?void 0:r[c])||0,u!==null){this.gpuColorAttachments[c]===void 0&&(this.gpuColorAttachments[c]={});var h=this.gpuColorAttachments[c];h.view=this.getTextureView(u,((i=this.gfxColorAttachmentLevel)===null||i===void 0?void 0:i[c])||0);var d=(o=(a=e.colorClearColor)===null||a===void 0?void 0:a[c])!==null&&o!==void 0?o:"load";d==="load"?h.loadOp="load":(h.loadOp="clear",h.clearValue=d),h.storeOp=!((s=e.colorStore)===null||s===void 0)&&s[c]?"store":"discard",h.resolveTarget=void 0,f!==null&&(u.sampleCount>1?h.resolveTarget=this.getTextureView(f,this.gfxColorResolveToLevel[c]):h.storeOp="store")}else{this.gpuColorAttachments.length=c,this.gfxColorAttachment.length=c,this.gfxColorResolveTo.length=c;break}}if(this.gfxDepthStencilAttachment=e.depthStencilAttachment,this.gfxDepthStencilResolveTo=e.depthStencilResolveTo,e.depthStencilAttachment){var p=e.depthStencilAttachment,h=this.gpuDepthStencilAttachment;h.view=p.gpuTextureView;var g=!!(dw(p.format)&Qn.Depth);g?(e.depthClearValue==="load"?h.depthLoadOp="load":(h.depthLoadOp="clear",h.depthClearValue=e.depthClearValue),e.depthStencilStore||this.gfxDepthStencilResolveTo!==null?h.depthStoreOp="store":h.depthStoreOp="discard"):(h.depthLoadOp=void 0,h.depthStoreOp=void 0);var v=!!(dw(p.format)&Qn.Stencil);v?(e.stencilClearValue==="load"?h.stencilLoadOp="load":(h.stencilLoadOp="clear",h.stencilClearValue=e.stencilClearValue),e.depthStencilStore||this.gfxDepthStencilResolveTo!==null?h.stencilStoreOp="store":h.stencilStoreOp="discard"):(h.stencilLoadOp=void 0,h.stencilStoreOp=void 0),this.gpuRenderPassDescriptor.depthStencilAttachment=this.gpuDepthStencilAttachment}else this.gpuRenderPassDescriptor.depthStencilAttachment=void 0;this.gpuRenderPassDescriptor.occlusionQuerySet=Kn(e.occlusionQueryPool)?void 0:VXt(e.occlusionQueryPool)},t.prototype.beginRenderPass=function(e,n){mi(this.gpuRenderPassEncoder===null),this.setRenderPassDescriptor(n),this.frameCommandEncoder=e,this.gpuRenderPassEncoder=this.frameCommandEncoder.beginRenderPass(this.gpuRenderPassDescriptor)},t.prototype.flipY=function(e,n){var r=this.device.swapChainHeight;return r-e-n},t.prototype.setViewport=function(e,n,r,i,a,o){a===void 0&&(a=0),o===void 0&&(o=1),this.gpuRenderPassEncoder.setViewport(e,this.flipY(n,i),r,i,a,o)},t.prototype.setScissorRect=function(e,n,r,i){this.gpuRenderPassEncoder.setScissorRect(e,this.flipY(n,i),r,i)},t.prototype.setPipeline=function(e){var n=e,r=VE(n.gpuRenderPipeline);this.getEncoder().setPipeline(r)},t.prototype.setVertexInput=function(e,n,r){if(e!==null){var i=this.getEncoder(),a=e;r!==null&&i.setIndexBuffer(aA(r.buffer),VE(a.indexFormat),r.offset);for(var o=0;o<n.length;o++){var s=n[o];s!==null&&i.setVertexBuffer(o,aA(s.buffer),s.offset)}}},t.prototype.setBindings=function(e){var n=e,r=this.getEncoder();n.gpuBindGroup.forEach(function(i,a){i&&r.setBindGroup(a,n.gpuBindGroup[a])})},t.prototype.setStencilReference=function(e){this.gpuRenderPassEncoder.setStencilReference(e)},t.prototype.draw=function(e,n,r,i){this.getEncoder().draw(e,n,r,i)},t.prototype.drawIndexed=function(e,n,r,i,a){this.getEncoder().drawIndexed(e,n,r,i,a)},t.prototype.drawIndirect=function(e,n){this.getEncoder().drawIndirect(aA(e),n)},t.prototype.drawIndexedIndirect=function(e,n){this.getEncoder().drawIndexedIndirect(aA(e),n)},t.prototype.beginOcclusionQuery=function(e){this.gpuRenderPassEncoder.beginOcclusionQuery(e)},t.prototype.endOcclusionQuery=function(){this.gpuRenderPassEncoder.endOcclusionQuery()},t.prototype.pushDebugGroup=function(e){this.gpuRenderPassEncoder.pushDebugGroup(e)},t.prototype.popDebugGroup=function(){this.gpuRenderPassEncoder.popDebugGroup()},t.prototype.insertDebugMarker=function(e){this.gpuRenderPassEncoder.insertDebugMarker(e)},t.prototype.beginBundle=function(e){this.renderBundle=e},t.prototype.endBundle=function(){this.renderBundle.finish()},t.prototype.executeBundles=function(e){this.gpuRenderPassEncoder.executeBundles(e.map(function(n){return n.renderBundle}))},t.prototype.finish=function(){var e;(e=this.gpuRenderPassEncoder)===null||e===void 0||e.end(),this.gpuRenderPassEncoder=null;for(var n=0;n<this.gfxColorAttachment.length;n++){var r=this.gfxColorAttachment[n],i=this.gfxColorResolveTo[n];r!==null&&i!==null&&r.sampleCount===1&&this.copyAttachment(i,this.gfxColorAttachmentLevel[n],r,this.gfxColorResolveToLevel[n])}this.gfxDepthStencilAttachment&&this.gfxDepthStencilResolveTo&&(this.gfxDepthStencilAttachment.sampleCount>1||this.copyAttachment(this.gfxDepthStencilResolveTo,0,this.gfxDepthStencilAttachment,0)),this.frameCommandEncoder=null},t.prototype.copyAttachment=function(e,n,r,i){mi(r.sampleCount===1);var a={texture:r.gpuTexture,mipLevel:i},o={texture:e.gpuTexture,mipLevel:n};mi(r.width>>>i===e.width>>>n),mi(r.height>>>i===e.height>>>n),mi(!!(r.usage&lc.COPY_SRC)),mi(!!(e.usage&lc.COPY_DST)),this.frameCommandEncoder.copyTextureToTexture(a,o,[e.width,e.height,1])},t})(),gqt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=t.call(this,{id:r,device:i})||this;return o.type=Aa.RenderPipeline,o.isCreatingAsync=!1,o.gpuRenderPipeline=null,o.descriptor=a,o.device.createRenderPipelineInternal(o,!1),o}return e.prototype.getBindGroupLayout=function(n){return this.gpuRenderPipeline.getBindGroupLayout(n)},e})(uv),vqt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o,s,l=t.call(this,{id:r,device:i})||this;l.type=Aa.Sampler;var c=a.lodMinClamp,u=a.mipmapFilter===hc.NO_MIP?a.lodMinClamp:a.lodMaxClamp,f=(o=a.maxAnisotropy)!==null&&o!==void 0?o:1;return f>1&&mi(a.minFilter===Ys.BILINEAR&&a.magFilter===Ys.BILINEAR&&a.mipmapFilter===hc.LINEAR),l.gpuSampler=l.device.device.createSampler({addressModeU:lV(a.addressModeU),addressModeV:lV(a.addressModeV),addressModeW:lV((s=a.addressModeW)!==null&&s!==void 0?s:a.addressModeU),lodMinClamp:c,lodMaxClamp:u,minFilter:gEe(a.minFilter),magFilter:gEe(a.magFilter),mipmapFilter:GXt(a.mipmapFilter),compare:a.compareFunction!==void 0?jk(a.compareFunction):void 0,maxAnisotropy:f}),l}return e})(uv),NL=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=n.descriptor,o=n.skipCreate,s=n.sampleCount,l=t.call(this,{id:r,device:i})||this;l.type=Aa.Texture,l.flipY=!1;var c=a.format,u=a.dimension,f=a.width,h=a.height,d=a.depthOrArrayLayers,p=a.mipLevelCount,g=a.usage,v=a.pixelStore;return l.flipY=!!v?.unpackFlipY,l.device.createTextureShared({format:c,dimension:u??ea.TEXTURE_2D,width:f,height:h,depthOrArrayLayers:d??1,mipLevelCount:p??1,usage:g,sampleCount:s??1},l,o),l}return e.prototype.textureFromImageBitmapOrCanvas=function(n,r,i){for(var a=r[0].width,o=r[0].height,s={size:{width:a,height:o,depthOrArrayLayers:i},format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT},l=n.createTexture(s),c=0;c<r.length;c++)n.queue.copyExternalImageToTexture({source:r[c],flipY:this.flipY},{texture:l,origin:[0,0,c]},[a,o]);return[l,a,o]},e.prototype.isImageBitmapOrCanvases=function(n){var r=n[0];return r instanceof ImageBitmap||r instanceof HTMLCanvasElement||r instanceof OffscreenCanvas},e.prototype.isVideo=function(n){var r=n[0];return r instanceof HTMLVideoElement},e.prototype.setImageData=function(n,r){var i,a=this,o=this.device.device,s,l,c;if(this.isImageBitmapOrCanvases(n))i=Ae(this.textureFromImageBitmapOrCanvas(o,n,this.depthOrArrayLayers),3),s=i[0],l=i[1],c=i[2];else if(this.isVideo(n))s=o.importExternalTexture({source:n[0]});else{var u=B6e(this.gpuTextureformat),f=Math.ceil(this.width/u.width)*u.length;n.forEach(function(h){o.queue.writeTexture({texture:a.gpuTexture},h,{bytesPerRow:f},{width:a.width,height:a.height})})}this.width=l,this.height=c,s&&(this.gpuTexture=s),this.gpuTextureView=this.gpuTexture.createView({dimension:$Xt(this.dimension)})},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.gpuTexture.destroy()},e})(uv),mqt=(function(t){Cr(e,t);function e(n){var r=n.id,i=n.device,a=t.call(this,{id:r,device:i})||this;return a.type=Aa.RenderBundle,a.renderBundleEncoder=a.device.device.createRenderBundleEncoder({colorFormats:[a.device.swapChainFormat]}),a}return e.prototype.finish=function(){this.renderBundle=this.renderBundleEncoder.finish()},e})(uv),yqt=(function(){function t(e,n,r,i,a,o){this.swapChainWidth=0,this.swapChainHeight=0,this.swapChainTextureUsage=lc.RENDER_ATTACHMENT|lc.COPY_DST,this._resourceUniqueId=0,this.renderPassPool=[],this.computePassPool=[],this.frameCommandEncoderPool=[],this.featureTextureCompressionBC=!1,this.platformString="WebGPU",this.glslVersion="#version 440",this.explicitBindingLocations=!0,this.separateSamplerTextures=!0,this.viewportOrigin=Yg.UPPER_LEFT,this.clipSpaceNearZ=hw.ZERO,this.supportsSyncPipelineCompilation=!1,this.supportMRT=!0,this.device=n,this.canvas=r,this.canvasContext=i,this.glsl_compile=a,this.WGSLComposer=o,this.fallbackTexture2D=this.createFallbackTexture(ea.TEXTURE_2D,Ls.Float),this.setResourceName(this.fallbackTexture2D,"Fallback Texture2D"),this.fallbackTexture2DDepth=this.createFallbackTexture(ea.TEXTURE_2D,Ls.Depth),this.setResourceName(this.fallbackTexture2DDepth,"Fallback Depth Texture2D"),this.fallbackTexture2DArray=this.createFallbackTexture(ea.TEXTURE_2D_ARRAY,Ls.Float),this.setResourceName(this.fallbackTexture2DArray,"Fallback Texture2DArray"),this.fallbackTexture3D=this.createFallbackTexture(ea.TEXTURE_3D,Ls.Float),this.setResourceName(this.fallbackTexture3D,"Fallback Texture3D"),this.fallbackTextureCube=this.createFallbackTexture(ea.TEXTURE_CUBE_MAP,Ls.Float),this.setResourceName(this.fallbackTextureCube,"Fallback TextureCube"),this.fallbackSamplerFiltering=this.createSampler({addressModeU:Xf.REPEAT,addressModeV:Xf.REPEAT,minFilter:Ys.POINT,magFilter:Ys.POINT,mipmapFilter:hc.NEAREST}),this.setResourceName(this.fallbackSamplerFiltering,"Fallback Sampler Filtering"),this.fallbackSamplerComparison=this.createSampler({addressModeU:Xf.REPEAT,addressModeV:Xf.REPEAT,minFilter:Ys.POINT,magFilter:Ys.POINT,mipmapFilter:hc.NEAREST,compareFunction:Ua.ALWAYS}),this.setResourceName(this.fallbackSamplerComparison,"Fallback Sampler Comparison Filtering"),this.device.features&&(this.featureTextureCompressionBC=this.device.features.has("texture-compression-bc")),this.device.onuncapturederror=function(s){console.error(s.error)},this.swapChainFormat=navigator.gpu.getPreferredCanvasFormat(),this.canvasContext.configure({device:this.device,format:this.swapChainFormat,usage:this.swapChainTextureUsage,alphaMode:"premultiplied"})}return t.prototype.destroy=function(){},t.prototype.configureSwapChain=function(e,n){this.swapChainWidth===e&&this.swapChainHeight===n||(this.swapChainWidth=e,this.swapChainHeight=n)},t.prototype.getOnscreenTexture=function(){var e=this.canvasContext.getCurrentTexture(),n=e.createView(),r=new NL({id:0,device:this,descriptor:{format:Je.U8_RGBA_RT,width:this.swapChainWidth,height:this.swapChainHeight,depthOrArrayLayers:0,dimension:ea.TEXTURE_2D,mipLevelCount:1,usage:this.swapChainTextureUsage},skipCreate:!0});return r.depthOrArrayLayers=1,r.sampleCount=1,r.gpuTexture=e,r.gpuTextureView=n,r.name="Onscreen",this.setResourceName(r,"Onscreen Texture"),r},t.prototype.getDevice=function(){return this},t.prototype.getCanvas=function(){return this.canvas},t.prototype.beginFrame=function(){mi(this.frameCommandEncoderPool.length===0)},t.prototype.endFrame=function(){mi(this.frameCommandEncoderPool.every(function(e){return e!==null})),this.device.queue.submit(this.frameCommandEncoderPool.map(function(e){return e.finish()})),this.frameCommandEncoderPool=[]},t.prototype.getNextUniqueId=function(){return++this._resourceUniqueId},t.prototype.createBuffer=function(e){return new uqt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createTexture=function(e){return new NL({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createSampler=function(e){return new vqt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderTarget=function(e){var n=new NL({id:this.getNextUniqueId(),device:this,descriptor:Ot(Ot({},e),{dimension:ea.TEXTURE_2D,mipLevelCount:1,depthOrArrayLayers:1,usage:uf.RENDER_TARGET}),sampleCount:e.sampleCount});return n.depthOrArrayLayers=1,n.type=Aa.RenderTarget,n},t.prototype.createRenderTargetFromTexture=function(e){var n=e,r=n.format,i=n.width,a=n.height,o=n.depthOrArrayLayers,s=n.sampleCount,l=n.mipLevelCount,c=n.gpuTexture,u=n.gpuTextureView,f=n.usage;mi(!!(f&lc.RENDER_ATTACHMENT));var h=new NL({id:this.getNextUniqueId(),device:this,descriptor:{format:r,width:i,height:a,depthOrArrayLayers:o,dimension:ea.TEXTURE_2D,mipLevelCount:l,usage:f},skipCreate:!0});return h.depthOrArrayLayers=o,h.sampleCount=s,h.gpuTexture=c,h.gpuTextureView=u,h},t.prototype.createProgram=function(e){var n,r;return!((n=e.vertex)===null||n===void 0)&&n.glsl&&(e.vertex.glsl=vw(this.queryVendorInfo(),"vert",e.vertex.glsl)),!((r=e.fragment)===null||r===void 0)&&r.glsl&&(e.fragment.glsl=vw(this.queryVendorInfo(),"frag",e.fragment.glsl)),new EEe({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createProgramSimple=function(e){return new EEe({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createTextureShared=function(e,n,r){var i={width:e.width,height:e.height,depthOrArrayLayers:e.depthOrArrayLayers},a=e.mipLevelCount,o=lre(e.format),s=zXt(e.dimension),l=jXt(e.usage);if(n.gpuTextureformat=o,n.dimension=e.dimension,n.format=e.format,n.width=e.width,n.height=e.height,n.depthOrArrayLayers=e.depthOrArrayLayers,n.mipLevelCount=a,n.usage=l,n.sampleCount=e.sampleCount,!r){var c=this.device.createTexture({size:i,mipLevelCount:a,format:o,dimension:s,sampleCount:e.sampleCount,usage:l}),u=c.createView();n.gpuTexture=c,n.gpuTextureView=u}},t.prototype.getFallbackSampler=function(e){var n=e.formatKind;return n===Ls.Depth&&e.comparison?this.fallbackSamplerComparison:this.fallbackSamplerFiltering},t.prototype.getFallbackTexture=function(e){var n=e.dimension,r=e.formatKind;if(n===ea.TEXTURE_2D)return r===Ls.Depth?this.fallbackTexture2DDepth:this.fallbackTexture2D;if(n===ea.TEXTURE_2D_ARRAY)return this.fallbackTexture2DArray;if(n===ea.TEXTURE_3D)return this.fallbackTexture3D;if(n===ea.TEXTURE_CUBE_MAP)return this.fallbackTextureCube;throw new Error("whoops")},t.prototype.createFallbackTexture=function(e,n){var r=e===ea.TEXTURE_CUBE_MAP?6:1,i=n===Ls.Float?Je.U8_RGBA_NORM:Je.D24;return this.createTexture({dimension:e,format:i,usage:uf.SAMPLED,width:1,height:1,depthOrArrayLayers:r,mipLevelCount:1})},t.prototype.createBindings=function(e){return new cqt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createInputLayout=function(e){return new hqt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createComputePipeline=function(e){return new fqt({id:this.getNextUniqueId(),device:this,descriptor:e})},t.prototype.createRenderPipeline=function(e){return new gqt({id:this.getNextUniqueId(),device:this,descriptor:Ot({},e)})},t.prototype.createQueryPool=function(e,n){return new dqt({id:this.getNextUniqueId(),device:this,descriptor:{type:e,elemCount:n}})},t.prototype.createRenderPipelineInternal=function(e,n){var r;if(e.gpuRenderPipeline===null){var i=e.descriptor,a=i.program,o=a.vertexStage,s=a.fragmentStage;if(!(o===null||s===null)){var l=i.megaStateDescriptor||{},c=l.stencilBack,u=l.stencilFront,f=yo(l,["stencilBack","stencilFront"]),h=pw(gw);i.megaStateDescriptor=Ot(Ot(Ot({},h),{stencilBack:Ot(Ot({},h.stencilBack),c),stencilFront:Ot(Ot({},h.stencilFront),u)}),f);var d=i.megaStateDescriptor.attachmentsState[0];i.colorAttachmentFormats.forEach(function(x,T){i.megaStateDescriptor.attachmentsState[T]||(i.megaStateDescriptor.attachmentsState[T]=R6e(void 0,d))});var p=KXt((r=i.topology)!==null&&r!==void 0?r:Rl.TRIANGLES,i.megaStateDescriptor),g=tqt(i.colorAttachmentFormats,i.megaStateDescriptor),v=nqt(i.depthStencilAttachmentFormat,i.megaStateDescriptor),y=void 0;i.inputLayout!==null&&(y=i.inputLayout.buffers);var _=i.sampleCount,E={layout:"auto",vertex:Ot(Ot({},o),{buffers:y}),primitive:p,depthStencil:v,multisample:{count:_},fragment:Ot(Ot({},s),{targets:g})};e.gpuRenderPipeline=this.device.createRenderPipeline(E)}}},t.prototype.createReadback=function(){return new pqt({id:this.getNextUniqueId(),device:this})},t.prototype.createRenderBundle=function(){return new mqt({id:this.getNextUniqueId(),device:this})},t.prototype.createRenderPass=function(e){var n=this.renderPassPool.pop();n===void 0&&(n=new xEe(this));var r=this.frameCommandEncoderPool.pop();return r===void 0&&(r=this.device.createCommandEncoder()),n.beginRenderPass(r,e),n},t.prototype.createComputePass=function(){var e=this.computePassPool.pop();e===void 0&&(e=new bEe);var n=this.frameCommandEncoderPool.pop();return n===void 0&&(n=this.device.createCommandEncoder()),e.beginComputePass(n),e},t.prototype.submitPass=function(e){var n=e;n instanceof xEe?(this.frameCommandEncoderPool.push(n.frameCommandEncoder),n.finish(),this.renderPassPool.push(n)):n instanceof bEe&&(this.frameCommandEncoderPool.push(n.frameCommandEncoder),n.finish(),this.computePassPool.push(n))},t.prototype.copySubTexture2D=function(e,n,r,i,a,o,s){var l=this.device.createCommandEncoder(),c=e,u=i,f={texture:u.gpuTexture,origin:[a,o,0],mipLevel:0,aspect:"all"},h={texture:c.gpuTexture,origin:[n,r,0],mipLevel:0,aspect:"all"};mi(!!(u.usage&lc.COPY_SRC)),mi(!!(c.usage&lc.COPY_DST)),l.copyTextureToTexture(f,h,[u.width,u.height,s||1]),this.device.queue.submit([l.finish()])},t.prototype.queryLimits=function(){return{uniformBufferMaxPageWordSize:this.device.limits.maxUniformBufferBindingSize>>>2,uniformBufferWordAlignment:this.device.limits.minUniformBufferOffsetAlignment>>>2,supportedSampleCounts:[1],occlusionQueriesRecommended:!0,computeShadersSupported:!0}},t.prototype.queryTextureFormatSupported=function(e,n,r){if(oqt(e)){if(!this.featureTextureCompressionBC)return!1;var i=sqt(e);return n%i!==0||r%i!==0?!1:this.featureTextureCompressionBC}switch(e){case Je.U16_RGBA_NORM:return!1;case Je.F32_RGBA:return!1}return!0},t.prototype.queryPlatformAvailable=function(){return!0},t.prototype.queryVendorInfo=function(){return this},t.prototype.queryRenderPass=function(e){var n=e;return n.descriptor},t.prototype.queryRenderTarget=function(e){var n=e;return n},t.prototype.setResourceName=function(e,n){if(e.name=n,e.type===Aa.Buffer){var r=e;r.gpuBuffer.label=n}else if(e.type===Aa.Texture){var r=e;r.gpuTexture.label=n,r.gpuTextureView.label=n}else if(e.type===Aa.RenderTarget){var r=e;r.gpuTexture.label=n,r.gpuTextureView.label=n}else if(e.type===Aa.Sampler){var r=e;r.gpuSampler.label=n}else if(e.type===Aa.RenderPipeline){var r=e;r.gpuRenderPipeline!==null&&(r.gpuRenderPipeline.label=n)}},t.prototype.setResourceLeakCheck=function(e,n){},t.prototype.checkForLeaks=function(){},t.prototype.programPatched=function(e){},t.prototype.pipelineQueryReady=function(e){var n=e;return n.gpuRenderPipeline!==null},t.prototype.pipelineForceReady=function(e){var n=e;this.createRenderPipelineInternal(n,!1)},t})(),_qt=(function(){function t(e){this.pluginOptions=e}return t.prototype.createSwapChain=function(e){return Pi(this,void 0,void 0,function(){var n,r,i,a,o,s,l,c;return lA(this,function(u){switch(u.label){case 0:if(globalThis.navigator.gpu===void 0)return[2,null];n=null,u.label=1;case 1:return u.trys.push([1,3,,4]),r=this.pluginOptions.xrCompatible,[4,globalThis.navigator.gpu.requestAdapter({xrCompatible:r})];case 2:return n=u.sent(),[3,4];case 3:return i=u.sent(),console.log(i),[3,4];case 4:return n===null?[2,null]:(a=["depth32float-stencil8","texture-compression-bc","float32-filterable"],o=a.filter(function(f){return n.features.has(f)}),[4,n.requestDevice({requiredFeatures:o})]);case 5:if(s=u.sent(),s&&(l=this.pluginOptions.onContextLost,s.lost.then(function(){l&&l()})),s===null)return[2,null];if(c=e.getContext("webgpu"),!c)return[2,null];u.label=6;case 6:return u.trys.push([6,8,,9]),[4,D6e(this.pluginOptions.shaderCompilerPath)];case 7:return u.sent(),[3,9];case 8:return u.sent(),[3,9];case 9:return[2,new yqt(n,s,e,c,DXt,aP&&new aP)]}})})},t})(),bqt=class{constructor(t,e){const{buffer:n,offset:r,stride:i,normalized:a,size:o,divisor:s,shaderLocation:l}=e;this.buffer=n,this.attribute={shaderLocation:l,buffer:n.get(),offset:r||0,stride:i||0,normalized:a||!1,divisor:s||0},o&&(this.attribute.size=o)}get(){return this.buffer}updateBuffer(t){this.buffer.subData(t)}destroy(){this.buffer.destroy()}},yF={[se.FLOAT]:Float32Array,[se.UNSIGNED_BYTE]:Uint8Array,[se.SHORT]:Int16Array,[se.UNSIGNED_SHORT]:Uint16Array,[se.INT]:Int32Array,[se.UNSIGNED_INT]:Uint32Array},Eqt={[se.POINTS]:Rl.POINTS,[se.LINES]:Rl.LINES,[se.LINE_LOOP]:Rl.LINES,[se.LINE_STRIP]:Rl.LINE_STRIP,[se.TRIANGLES]:Rl.TRIANGLES,[se.TRIANGLE_FAN]:Rl.TRIANGLES,[se.TRIANGLE_STRIP]:Rl.TRIANGLE_STRIP},xqt={1:Je.F32_R,2:Je.F32_RG,3:Je.F32_RGB,4:Je.F32_RGBA},Sqt={[se.STATIC_DRAW]:Kg.STATIC,[se.DYNAMIC_DRAW]:Kg.DYNAMIC,[se.STREAM_DRAW]:Kg.DYNAMIC},SEe={[se.REPEAT]:Xf.REPEAT,[se.CLAMP_TO_EDGE]:Xf.CLAMP_TO_EDGE,[se.MIRRORED_REPEAT]:Xf.MIRRORED_REPEAT},Tqt={[se.NEVER]:Ua.NEVER,[se.ALWAYS]:Ua.ALWAYS,[se.LESS]:Ua.LESS,[se.LEQUAL]:Ua.LEQUAL,[se.GREATER]:Ua.GREATER,[se.GEQUAL]:Ua.GEQUAL,[se.EQUAL]:Ua.EQUAL,[se.NOTEQUAL]:Ua.NOTEQUAL},Aqt={[se.FRONT]:kh.FRONT,[se.BACK]:kh.BACK},TEe={[se.FUNC_ADD]:Pc.ADD,[se.MIN_EXT]:Pc.MIN,[se.MAX_EXT]:Pc.MAX,[se.FUNC_SUBTRACT]:Pc.SUBSTRACT,[se.FUNC_REVERSE_SUBTRACT]:Pc.REVERSE_SUBSTRACT},IL={[se.ZERO]:Ji.ZERO,[se.ONE]:Ji.ONE,[se.SRC_COLOR]:Ji.SRC,[se.ONE_MINUS_SRC_COLOR]:Ji.ONE_MINUS_SRC,[se.SRC_ALPHA]:Ji.SRC_ALPHA,[se.ONE_MINUS_SRC_ALPHA]:Ji.ONE_MINUS_SRC_ALPHA,[se.DST_COLOR]:Ji.DST,[se.ONE_MINUS_DST_COLOR]:Ji.ONE_MINUS_DST,[se.DST_ALPHA]:Ji.DST_ALPHA,[se.ONE_MINUS_DST_ALPHA]:Ji.ONE_MINUS_DST_ALPHA,[se.CONSTANT_COLOR]:Ji.CONST,[se.ONE_MINUS_CONSTANT_COLOR]:Ji.ONE_MINUS_CONSTANT,[se.CONSTANT_ALPHA]:Ji.CONST,[se.ONE_MINUS_CONSTANT_ALPHA]:Ji.ONE_MINUS_CONSTANT,[se.SRC_ALPHA_SATURATE]:Ji.SRC_ALPHA_SATURATE},kT={[se.REPLACE]:ks.REPLACE,[se.KEEP]:ks.KEEP,[se.ZERO]:ks.ZERO,[se.INVERT]:ks.INVERT,[se.INCR]:ks.INCREMENT_CLAMP,[se.DECR]:ks.DECREMENT_CLAMP,[se.INCR_WRAP]:ks.INCREMENT_WRAP,[se.DECR_WRAP]:ks.DECREMENT_WRAP},wqt={[se.ALWAYS]:Ua.ALWAYS,[se.EQUAL]:Ua.EQUAL,[se.GEQUAL]:Ua.GEQUAL,[se.GREATER]:Ua.GREATER,[se.LEQUAL]:Ua.LEQUAL,[se.LESS]:Ua.LESS,[se.NEVER]:Ua.NEVER,[se.NOTEQUAL]:Ua.NOTEQUAL},Oqt={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121};function _F(t){return Object.prototype.toString.call(t)in Oqt}function Cqt(t,e){const n=t.length,r=Math.ceil(n/3),i=n+r,a=new Float32Array(i);for(let o=0;o<i;o+=4)a[o]=t[o/4*3],a[o+1]=t[o/4*3+1],a[o+2]=t[o/4*3+2],a[o+3]=e;return a}var Rqt=class{constructor(t,e){this.isDestroyed=!1;const{data:n,usage:r,type:i,isUBO:a,label:o}=e;let s;_F(n)?s=n:s=new yF[this.type||se.FLOAT](n),this.type=i,this.size=s.byteLength,this.buffer=t.createBuffer({viewOrSize:s,usage:a?mo.UNIFORM:mo.VERTEX,hint:Sqt[r||se.STATIC_DRAW]}),o&&t.setResourceName(this.buffer,o)}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:t,offset:e}){let n;_F(t)?n=t:n=new yF[this.type||se.FLOAT](t),this.buffer.setSubData(e,new Uint8Array(n.buffer))}};function Va(t,e=0){return t+=e,t+=t<<10,t+=t>>>6,t>>>0}function F6e(t){return t+=t<<3,t^=t>>>11,t+=t<<15,t>>>0}function AEe(){return 0}var Mqt=class{constructor(){this.keys=[],this.values=[]}},LL=class{constructor(t,e){this.keyEqualFunc=t,this.keyHashFunc=e,this.buckets=new Map}findBucketIndex(t,e){for(let n=0;n<t.keys.length;n++)if(this.keyEqualFunc(e,t.keys[n]))return n;return-1}findBucket(t){const e=this.keyHashFunc(t);return this.buckets.get(e)}get(t){const e=this.findBucket(t);if(e===void 0)return null;const n=this.findBucketIndex(e,t);return n<0?null:e.values[n]}add(t,e){const n=this.keyHashFunc(t);this.buckets.get(n)===void 0&&this.buckets.set(n,new Mqt);const r=this.buckets.get(n);r.keys.push(t),r.values.push(e)}delete(t){const e=this.findBucket(t);if(e===void 0)return;const n=this.findBucketIndex(e,t);n!==-1&&(e.keys.splice(n,1),e.values.splice(n,1))}clear(){this.buckets.clear()}size(){let t=0;for(const e of this.buckets.values())t+=e.values.length;return t}*values(){for(const t of this.buckets.values())for(let e=t.values.length-1;e>=0;e--)yield t.values[e]}};function wEe(t,e){return t=Va(t,e.blendMode),t=Va(t,e.blendSrcFactor),t=Va(t,e.blendDstFactor),t}function Pqt(t,e){return t=wEe(t,e.rgbBlendState),t=wEe(t,e.alphaBlendState),t=Va(t,e.channelWriteMask),t}function Nqt(t,e){return t=Va(t,e.r<<24|e.g<<16|e.b<<8|e.a),t}function Iqt(t,e){var n,r,i,a,o,s,l,c;for(let u=0;u<e.attachmentsState.length;u++)t=Pqt(t,e.attachmentsState[u]);return t=Nqt(t,e.blendConstant||k5),t=Va(t,e.depthCompare),t=Va(t,e.depthWrite?1:0),t=Va(t,(n=e.stencilFront)==null?void 0:n.compare),t=Va(t,(r=e.stencilFront)==null?void 0:r.passOp),t=Va(t,(i=e.stencilFront)==null?void 0:i.failOp),t=Va(t,(a=e.stencilFront)==null?void 0:a.depthFailOp),t=Va(t,(o=e.stencilBack)==null?void 0:o.compare),t=Va(t,(s=e.stencilBack)==null?void 0:s.passOp),t=Va(t,(l=e.stencilBack)==null?void 0:l.failOp),t=Va(t,(c=e.stencilBack)==null?void 0:c.depthFailOp),t=Va(t,e.stencilWrite?1:0),t=Va(t,e.cullMode),t=Va(t,e.frontFace?1:0),t=Va(t,e.polygonOffset?1:0),t}function Lqt(t){let e=0;e=Va(e,t.program.id),t.inputLayout!==null&&(e=Va(e,t.inputLayout.id)),e=Iqt(e,t.megaStateDescriptor);for(let n=0;n<t.colorAttachmentFormats.length;n++)e=Va(e,t.colorAttachmentFormats[n]||0);return e=Va(e,t.depthStencilAttachmentFormat||0),F6e(e)}function kqt(t){let e=0;if(t.samplerBindings)for(let n=0;n<t.samplerBindings.length;n++){const r=t.samplerBindings[n];r!==null&&r.texture!==null&&(e=Va(e,r.texture.id))}if(t.uniformBufferBindings)for(let n=0;n<t.uniformBufferBindings.length;n++){const r=t.uniformBufferBindings[n];r!==null&&r.buffer!==null&&(e=Va(e,r.buffer.id),e=Va(e,r.binding),e=Va(e,r.offset),e=Va(e,r.size))}if(t.storageBufferBindings)for(let n=0;n<t.storageBufferBindings.length;n++){const r=t.storageBufferBindings[n];r!==null&&r.buffer!==null&&(e=Va(e,r.buffer.id),e=Va(e,r.binding),e=Va(e,r.offset),e=Va(e,r.size))}if(t.storageTextureBindings)for(let n=0;n<t.storageTextureBindings.length;n++){const r=t.storageTextureBindings[n];r!==null&&r.texture!==null&&(e=Va(e,r.texture.id),e=Va(e,r.binding))}return F6e(e)}function Dqt(t,e){var n,r,i,a;return((n=t.vertex)==null?void 0:n.glsl)===((r=e.vertex)==null?void 0:r.glsl)&&((i=t.fragment)==null?void 0:i.glsl)===((a=e.fragment)==null?void 0:a.glsl)}function Bqt(t){var e,n;return{vertex:{glsl:(e=t.vertex)==null?void 0:e.glsl},fragment:{glsl:(n=t.fragment)==null?void 0:n.glsl}}}var Fqt=class{constructor(t){this.device=t,this.bindingsCache=new LL(BYt,kqt),this.renderPipelinesCache=new LL(zYt,Lqt),this.inputLayoutsCache=new LL(GYt,AEe),this.programCache=new LL(Dqt,AEe)}createBindings(t){var e;let n=this.bindingsCache.get(t);if(n===null){const r=YYt(t);r.uniformBufferBindings=(e=r.uniformBufferBindings)==null?void 0:e.filter(({size:i})=>i&&i>0),n=this.device.createBindings(r),this.bindingsCache.add(r,n)}return n}createRenderPipeline(t){let e=this.renderPipelinesCache.get(t);if(e===null){const n=XYt(t);n.colorAttachmentFormats=n.colorAttachmentFormats.filter(r=>r),e=this.device.createRenderPipeline(n),this.renderPipelinesCache.add(n,e)}return e}createInputLayout(t){t.vertexBufferDescriptors=t.vertexBufferDescriptors.filter(n=>!!n);let e=this.inputLayoutsCache.get(t);if(e===null){const n=KYt(t);e=this.device.createInputLayout(n),this.inputLayoutsCache.add(n,e)}return e}createProgram(t){let e=this.programCache.get(t);if(e===null){const n=Bqt(t);e=this.device.createProgram(t),this.programCache.add(n,e)}return e}destroy(){for(const t of this.bindingsCache.values())t.destroy();for(const t of this.renderPipelinesCache.values())t.destroy();for(const t of this.inputLayoutsCache.values())t.destroy();for(const t of this.programCache.values())t.destroy();this.bindingsCache.clear(),this.renderPipelinesCache.clear(),this.inputLayoutsCache.clear(),this.programCache.clear()}},Uqt=class{constructor(t,e){const{data:n,type:r,count:i=0}=e;let a;_F(n)?a=n:a=new yF[this.type||se.UNSIGNED_INT](n),this.type=r,this.count=i,this.indexBuffer=t.createBuffer({viewOrSize:a,usage:mo.INDEX})}get(){return this.indexBuffer}subData({data:t}){let e;_F(t)?e=t:e=new yF[this.type||se.UNSIGNED_INT](t),this.indexBuffer.setSubData(0,new Uint8Array(e.buffer))}destroy(){this.indexBuffer.destroy()}};function OEe(t){return!!(t&&t.texture)}var U6e=class{constructor(t,e){this.device=t,this.options=e,this.isDestroy=!1;const{wrapS:n=se.CLAMP_TO_EDGE,wrapT:r=se.CLAMP_TO_EDGE,aniso:i,mag:a=se.NEAREST,min:o=se.NEAREST}=e;this.createTexture(e),this.sampler=t.createSampler({addressModeU:SEe[n],addressModeV:SEe[r],minFilter:o===se.NEAREST?Ys.POINT:Ys.BILINEAR,magFilter:a===se.NEAREST?Ys.POINT:Ys.BILINEAR,mipmapFilter:hc.NO_MIP,maxAnisotropy:i})}createTexture(t){const{type:e=se.UNSIGNED_BYTE,width:n,height:r,flipY:i=!1,format:a=se.RGBA,alignment:o=1,usage:s=Ix.SAMPLED,unorm:l=!1,label:c}=t;let{data:u}=t;this.width=n,this.height=r;let f=Je.U8_RGBA_RT;if(e===se.UNSIGNED_BYTE&&a===se.RGBA)f=l?Je.U8_RGBA_NORM:Je.U8_RGBA_RT;else if(e===se.UNSIGNED_BYTE&&a===se.LUMINANCE)f=Je.U8_LUMINANCE;else if(e===se.FLOAT&&a===se.LUMINANCE)f=Je.F32_LUMINANCE;else if(e===se.FLOAT&&a===se.RGB)this.device.queryVendorInfo().platformString==="WebGPU"?(u&&(u=Cqt(u,0)),f=Je.F32_RGBA):f=Je.F32_RGB;else if(e===se.FLOAT&&a===se.RGBA)f=Je.F32_RGBA;else if(e===se.FLOAT&&a===se.RED)f=Je.F32_R;else throw new Error(`create texture error, type: ${e}, format: ${a}`);this.texture=this.device.createTexture({format:f,width:n,height:r,usage:s===Ix.SAMPLED?uf.SAMPLED:uf.RENDER_TARGET,pixelStore:{unpackFlipY:i,packAlignment:o},mipLevelCount:1}),c&&this.device.setResourceName(this.texture,c),u&&this.texture.setImageData([u])}get(){return this.texture}update(t){const{data:e}=t;this.texture.setImageData([e])}bind(){}resize({width:t,height:e}){(this.width!==t||this.height!==e)&&this.destroy(),this.options.width=t,this.options.height=e,this.createTexture(this.options),this.isDestroy=!1}getSize(){return[this.width,this.height]}destroy(){var t;!this.isDestroy&&!this.texture.destroyed&&((t=this.texture)==null||t.destroy()),this.isDestroy=!0}},j6e=class{constructor(t,e){this.device=t,this.options=e,this.createColorRenderTarget(),this.createDepthRenderTarget()}createColorRenderTarget(t=!1){const{width:e,height:n,color:r}=this.options;r&&(OEe(r)?(t&&r.resize({width:e,height:n}),this.colorTexture=r.get(),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=r.width,this.height=r.height):e&&n&&(this.colorTexture=this.device.createTexture({format:Je.U8_RGBA_RT,usage:uf.RENDER_TARGET,width:e,height:n}),this.colorRenderTarget=this.device.createRenderTargetFromTexture(this.colorTexture),this.width=e,this.height=n))}createDepthRenderTarget(t=!1){const{width:e,height:n,depth:r}=this.options;r&&(OEe(r)?(t&&r.resize({width:e,height:n}),this.depthTexture=r.get(),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=r.width,this.height=r.height):e&&n&&(this.depthTexture=this.device.createTexture({format:Je.D24_S8,usage:uf.RENDER_TARGET,width:e,height:n}),this.depthRenderTarget=this.device.createRenderTargetFromTexture(this.depthTexture),this.width=e,this.height=n))}get(){return this.colorRenderTarget}destroy(){var t,e;(t=this.colorRenderTarget)==null||t.destroy(),(e=this.depthRenderTarget)==null||e.destroy()}resize({width:t,height:e}){(this.width!==t||this.height!==e)&&(this.destroy(),this.colorTexture.destroyed=!0,this.depthTexture.destroyed=!0,this.options.width=t,this.options.height=e,this.createColorRenderTarget(!0),this.createDepthRenderTarget(!0))}},jqt=Object.defineProperty,zqt=Object.defineProperties,$qt=Object.getOwnPropertyDescriptors,CEe=Object.getOwnPropertySymbols,Hqt=Object.prototype.hasOwnProperty,Gqt=Object.prototype.propertyIsEnumerable,REe=(t,e,n)=>e in t?jqt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,OE=(t,e)=>{for(var n in e||(e={}))Hqt.call(e,n)&&REe(t,n,e[n]);if(CEe)for(var n of CEe(e))Gqt.call(e,n)&&REe(t,n,e[n]);return t},Wqt=(t,e)=>zqt(t,$qt(e)),{isPlainObject:Vqt,isTypedArray:Yqt,isNil:MEe}=gs,Xqt=class{constructor(t,e,n){this.device=t,this.options=e,this.service=n,this.destroyed=!1,this.uniforms={},this.vertexBuffers=[];const{vs:r,fs:i,attributes:a,uniforms:o,count:s,elements:l,diagnosticDerivativeUniformityEnabled:c}=e;this.options=e;const u=c?"":this.service.viewportOrigin===Yg.UPPER_LEFT?"diagnostic(off,derivative_uniformity);":"";this.program=n.renderCache.createProgram({vertex:{glsl:r},fragment:{glsl:i,postprocess:p=>u+p}}),o&&(this.uniforms=this.extractUniforms(o));const f=[];let h=0;Object.keys(a).forEach(p=>{const g=a[p],v=g.get();this.vertexBuffers.push(v.get());const{offset:y=0,stride:_=0,size:E=1,divisor:x=0,shaderLocation:T=0}=g.attribute;f.push({arrayStride:_||E*4,stepMode:Fx.VERTEX,attributes:[{format:xqt[E],shaderLocation:T,offset:y,divisor:x}]}),h=v.size/E}),s||(this.options.count=h),l&&(this.indexBuffer=l.get());const d=n.renderCache.createInputLayout({vertexBufferDescriptors:f,indexBufferFormat:l?Je.U32_R:null,program:this.program});this.inputLayout=d,this.pipeline=this.createPipeline(e)}createPipeline(t,e){var n;const{primitive:r=se.TRIANGLES,depth:i,cull:a,blend:o,stencil:s}=t,l=this.initDepthDrawParams({depth:i}),c=!!(l&&l.enable),u=this.initCullDrawParams({cull:a}),f=!!(u&&u.enable),h=this.getBlendDrawParams({blend:o}),d=!!(h&&h.enable),p=this.getStencilDrawParams({stencil:s}),g=!!(p&&p.enable),v=this.device.createRenderPipeline({inputLayout:this.inputLayout,program:this.program,topology:Eqt[r],colorAttachmentFormats:[Je.U8_RGBA_RT],depthStencilAttachmentFormat:Je.D24_S8,megaStateDescriptor:{attachmentsState:[e?{channelWriteMask:Cc.ALL,rgbBlendState:{blendMode:Pc.ADD,blendSrcFactor:Ji.ONE,blendDstFactor:Ji.ZERO},alphaBlendState:{blendMode:Pc.ADD,blendSrcFactor:Ji.ONE,blendDstFactor:Ji.ZERO}}:{channelWriteMask:g&&p.opFront.zpass===ks.REPLACE?Cc.NONE:Cc.ALL,rgbBlendState:{blendMode:d&&h.equation.rgb||Pc.ADD,blendSrcFactor:d&&h.func.srcRGB||Ji.SRC_ALPHA,blendDstFactor:d&&h.func.dstRGB||Ji.ONE_MINUS_SRC_ALPHA},alphaBlendState:{blendMode:d&&h.equation.alpha||Pc.ADD,blendSrcFactor:d&&h.func.srcAlpha||Ji.ONE,blendDstFactor:d&&h.func.dstAlpha||Ji.ONE}}],blendConstant:d?k5:void 0,depthWrite:c,depthCompare:c&&l.func||Ua.LESS,cullMode:f&&u.face||kh.NONE,stencilWrite:g,stencilFront:{compare:g?p.func.cmp:Ua.ALWAYS,passOp:p.opFront.zpass,failOp:p.opFront.fail,depthFailOp:p.opFront.zfail,mask:p.opFront.mask},stencilBack:{compare:g?p.func.cmp:Ua.ALWAYS,passOp:p.opBack.zpass,failOp:p.opBack.fail,depthFailOp:p.opBack.zfail,mask:p.opBack.mask}}});return g&&!MEe((n=s?.func)==null?void 0:n.ref)&&(v.stencilFuncReference=s.func.ref),v}updateAttributesAndElements(){}updateAttributes(){}addUniforms(t){this.uniforms=OE(OE({},this.uniforms),this.extractUniforms(t))}draw(t,e){const n=OE(OE({},this.options),t),{count:r=0,instances:i,elements:a,uniforms:o={},uniformBuffers:s,textures:l}=n;this.uniforms=OE(OE({},this.uniforms),this.extractUniforms(o));const{renderPass:c,currentFramebuffer:u,width:f,height:h}=this.service;this.pipeline=this.createPipeline(n,e);const d=this.service.device,p=d.swapChainHeight;if(d.swapChainHeight=u?.height||h,c.setViewport(0,0,u?.width||f,u?.height||h),d.swapChainHeight=p,c.setPipeline(this.pipeline),MEe(this.pipeline.stencilFuncReference)||c.setStencilReference(this.pipeline.stencilFuncReference),c.setVertexInput(this.inputLayout,this.vertexBuffers.map(g=>({buffer:g})),a?{buffer:this.indexBuffer,offset:0}:null),s&&(this.bindings=d.createBindings({pipeline:this.pipeline,uniformBufferBindings:s.map((g,v)=>{const y=g;return{binding:v,buffer:y.get(),size:y.size}}),samplerBindings:l?.map(g=>({texture:g.texture,sampler:g.sampler}))})),this.bindings&&(c.setBindings(this.bindings),Object.keys(this.uniforms).forEach(g=>{const v=this.uniforms[g];v instanceof U6e?this.uniforms[g]=v.get():v instanceof j6e&&(this.uniforms[g]=v.get().texture)}),this.program.setUniformsLegacy(this.uniforms)),a){const g=a.count;g===0?c.draw(r,i):c.drawIndexed(g,i)}else c.draw(r,i)}destroy(){var t,e,n;(t=this.vertexBuffers)==null||t.forEach(r=>r.destroy()),(e=this.indexBuffer)==null||e.destroy(),(n=this.bindings)==null||n.destroy(),this.pipeline.destroy(),this.destroyed=!0}initDepthDrawParams({depth:t}){if(t)return{enable:t.enable===void 0?!0:!!t.enable,mask:t.mask===void 0?!0:!!t.mask,func:Tqt[t.func||se.LESS],range:t.range||[0,1]}}getBlendDrawParams({blend:t}){const{enable:e,func:n,equation:r,color:i=[0,0,0,0]}=t||{};return{enable:!!e,func:{srcRGB:IL[n&&n.srcRGB||se.SRC_ALPHA],srcAlpha:IL[n&&n.srcAlpha||se.SRC_ALPHA],dstRGB:IL[n&&n.dstRGB||se.ONE_MINUS_SRC_ALPHA],dstAlpha:IL[n&&n.dstAlpha||se.ONE_MINUS_SRC_ALPHA]},equation:{rgb:TEe[r&&r.rgb||se.FUNC_ADD],alpha:TEe[r&&r.alpha||se.FUNC_ADD]},color:i}}getStencilDrawParams({stencil:t}){const{enable:e,mask:n=4294967295,func:r={cmp:se.ALWAYS,ref:0,mask:4294967295},opFront:i={fail:se.KEEP,zfail:se.KEEP,zpass:se.KEEP},opBack:a={fail:se.KEEP,zfail:se.KEEP,zpass:se.KEEP}}=t||{};return{enable:!!e,mask:n,func:Wqt(OE({},r),{cmp:wqt[r.cmp]}),opFront:{fail:kT[i.fail],zfail:kT[i.zfail],zpass:kT[i.zpass],mask:r.mask},opBack:{fail:kT[a.fail],zfail:kT[a.zfail],zpass:kT[a.zpass],mask:r.mask}}}initCullDrawParams({cull:t}){if(t){const{enable:e,face:n=se.BACK}=t;return{enable:!!e,face:Aqt[n]}}}extractUniforms(t){const e={};return Object.keys(t).forEach(n=>{this.extractUniformsRecursively(n,t[n],e,"")}),e}extractUniformsRecursively(t,e,n,r){if(e===null||typeof e=="number"||typeof e=="boolean"||Array.isArray(e)&&typeof e[0]=="number"||Yqt(e)||e===""||"resize"in e){n[`${r&&r+"."}${t}`]=e;return}Vqt(e)&&Object.keys(e).forEach(i=>{this.extractUniformsRecursively(i,e[i],n,`${r&&r+"."}${t}`)}),Array.isArray(e)&&e.forEach((i,a)=>{Object.keys(i).forEach(o=>{this.extractUniformsRecursively(o,i[o],n,`${r&&r+"."}${t}[${a}]`)})})}};function qqt(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}var cV=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),{isUndefined:kL}=gs,Zqt=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>this.device.queryVendorInfo().platformString,this.createModel=t=>new Xqt(this.device,t,this),this.createAttribute=t=>new bqt(this.device,t),this.createBuffer=t=>new Rqt(this.device,t),this.createElements=t=>new Uqt(this.device,t),this.createTexture2D=t=>new U6e(this.device,t),this.createFramebuffer=t=>new j6e(this.device,t),this.useFramebuffer=(t,e)=>{this.currentFramebuffer=t,this.beginFrame(),e(),this.endFrame(),this.currentFramebuffer=null},this.useFramebufferAsync=(t,e)=>cV(this,null,function*(){this.currentFramebuffer=t,this.preRenderPass=this.renderPass,this.beginFrame(),yield e(),this.endFrame(),this.currentFramebuffer=null,this.renderPass=this.preRenderPass}),this.clear=t=>{const{color:e,depth:n,stencil:r,framebuffer:i=null}=t;if(i)i.clearOptions={color:e,depth:n,stencil:r};else{const a=this.queryVerdorInfo();if(a==="WebGL1"){const o=this.getGLContext();kL(r)?kL(n)||(o.clearDepth(n),o.clear(o.DEPTH_BUFFER_BIT)):(o.clearStencil(r),o.clear(o.STENCIL_BUFFER_BIT))}else if(a==="WebGL2"){const o=this.getGLContext();kL(r)?kL(n)||o.clearBufferfv(o.DEPTH,0,[n]):o.clearBufferiv(o.STENCIL,0,[r])}}},this.viewport=({width:t,height:e})=>{this.swapChain.configureSwapChain(t,e),this.createMainColorDepthRT(t,e),this.width=t,this.height=e},this.readPixels=t=>{const{framebuffer:e,x:n,y:r,width:i,height:a}=t,o=this.device.createReadback(),s=e.colorTexture,l=o.readTextureSync(s,n,this.viewportOrigin===Yg.LOWER_LEFT?r:this.height-r,i,a,new Uint8Array(i*a*4));if(this.viewportOrigin!==Yg.LOWER_LEFT)for(let c=0;c<l.length;c+=4){const u=l[c];l[c]=l[c+2],l[c+2]=u}return o.destroy(),l},this.readPixelsAsync=t=>cV(this,null,function*(){const{framebuffer:e,x:n,y:r,width:i,height:a}=t,o=this.device.createReadback(),s=e.colorTexture,l=yield o.readTexture(s,n,this.viewportOrigin===Yg.LOWER_LEFT?r:this.height-r,i,a,new Uint8Array(i*a*4));if(this.viewportOrigin!==Yg.LOWER_LEFT)for(let c=0;c<l.length;c+=4){const u=l[c];l[c]=l[c+2],l[c+2]=u}return o.destroy(),l}),this.getViewportSize=()=>({width:this.width,height:this.height}),this.getContainer=()=>{var t;return(t=this.canvas)==null?void 0:t.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.device.gl,this.destroy=()=>{var t;this.canvas=null,(t=this.uniformBuffers)==null||t.forEach(e=>{e.destroy()}),this.device.destroy(),this.renderCache.destroy()}}init(t,e){return cV(this,null,function*(){const{enableWebGPU:n,shaderCompilerPath:r,antialias:i}=e;this.canvas=t;const o=yield(n?new _qt({shaderCompilerPath:r}):new PXt({targets:["webgl2","webgl1"],antialias:i,onContextLost(l){console.warn("context lost",l)},onContextCreationError(l){console.warn("context creation error",l)},onContextRestored(l){console.warn("context restored",l)}})).createSwapChain(t);o.configureSwapChain(t.width,t.height),this.device=o.getDevice(),this.swapChain=o,this.renderCache=new Fqt(this.device),this.currentFramebuffer=null,this.viewportOrigin=this.device.queryVendorInfo().viewportOrigin;const s=this.device.gl;this.extensionObject={OES_texture_float:!qqt(s)&&this.device.OES_texture_float},this.createMainColorDepthRT(t.width,t.height)})}createMainColorDepthRT(t,e){this.mainColorRT&&this.mainColorRT.destroy(),this.mainDepthRT&&this.mainDepthRT.destroy(),this.mainColorRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Je.U8_RGBA_RT,width:t,height:e,usage:uf.RENDER_TARGET})),this.mainDepthRT=this.device.createRenderTargetFromTexture(this.device.createTexture({format:Je.D24_S8,width:t,height:e,usage:uf.RENDER_TARGET}))}beginFrame(){this.device.beginFrame();const{currentFramebuffer:t,swapChain:e,mainColorRT:n,mainDepthRT:r}=this,i=t?t.colorRenderTarget:n,a=t?null:e.getOnscreenTexture(),o=t?t.depthRenderTarget:r,{color:s=[0,0,0,0],depth:l=1,stencil:c=0}=t?.clearOptions||{},u=i?vN(s[0]*255,s[1]*255,s[2]*255,s[3]):k5,f=o?l:void 0,h=o?c:void 0,d=this.device.createRenderPass({colorAttachment:[i],colorResolveTo:[a],colorClearColor:[u],colorStore:[!0],depthStencilAttachment:o,depthClearValue:f,stencilClearValue:h});this.renderPass=d}endFrame(){this.device.submitPass(this.renderPass),this.device.endFrame()}getPointSizeRange(){const t=this.device.gl;return t.getParameter(t.ALIASED_POINT_SIZE_RANGE)}testExtension(t){return!!this.getGLContext().getExtension(t)}setState(){}setBaseState(){}setCustomLayerDefaults(){}setDirty(t){this.isDirty=t}getDirty(){return this.isDirty}},zk={exports:{}},Kqt=zk.exports,PEe;function Qqt(){return PEe||(PEe=1,(function(t,e){(function(n,r){t.exports=r()})(Kqt,(function(){var n=function(ae){return ae instanceof Uint8Array||ae instanceof Uint16Array||ae instanceof Uint32Array||ae instanceof Int8Array||ae instanceof Int16Array||ae instanceof Int32Array||ae instanceof Float32Array||ae instanceof Float64Array||ae instanceof Uint8ClampedArray},r=function(ae,Ee){for(var De=Object.keys(Ee),ut=0;ut<De.length;++ut)ae[De[ut]]=Ee[De[ut]];return ae},i=`
`;function a(ae){return typeof atob<"u"?atob(ae):"base64:"+ae}function o(ae){var Ee=new Error("(regl) "+ae);throw console.error(Ee),Ee}function s(ae,Ee){ae||o(Ee)}function l(ae){return ae?": "+ae:""}function c(ae,Ee,De){ae in Ee||o("unknown parameter ("+ae+")"+l(De)+". possible values: "+Object.keys(Ee).join())}function u(ae,Ee){n(ae)||o("invalid parameter type"+l(Ee)+". must be a typed array")}function f(ae,Ee){switch(Ee){case"number":return typeof ae=="number";case"object":return typeof ae=="object";case"string":return typeof ae=="string";case"boolean":return typeof ae=="boolean";case"function":return typeof ae=="function";case"undefined":return typeof ae>"u";case"symbol":return typeof ae=="symbol"}}function h(ae,Ee,De){f(ae,Ee)||o("invalid parameter type"+l(De)+". expected "+Ee+", got "+typeof ae)}function d(ae,Ee){ae>=0&&(ae|0)===ae||o("invalid parameter type, ("+ae+")"+l(Ee)+". must be a nonnegative integer")}function p(ae,Ee,De){Ee.indexOf(ae)<0&&o("invalid value"+l(De)+". must be one of: "+Ee)}var g=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function v(ae){Object.keys(ae).forEach(function(Ee){g.indexOf(Ee)<0&&o('invalid regl constructor argument "'+Ee+'". must be one of '+g)})}function y(ae,Ee){for(ae=ae+"";ae.length<Ee;)ae=" "+ae;return ae}function _(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function E(ae,Ee){this.number=ae,this.line=Ee,this.errors=[]}function x(ae,Ee,De){this.file=ae,this.line=Ee,this.message=De}function T(){var ae=new Error,Ee=(ae.stack||ae).toString(),De=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Ee);if(De)return De[1];var ut=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Ee);return ut?ut[1]:"unknown"}function S(){var ae=new Error,Ee=(ae.stack||ae).toString(),De=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Ee);if(De)return De[1];var ut=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Ee);return ut?ut[1]:"unknown"}function w(ae,Ee){var De=ae.split(`
`),ut=1,Ct=0,Qe={unknown:new _,0:new _};Qe.unknown.name=Qe[0].name=Ee||T(),Qe.unknown.lines.push(new E(0,""));for(var Pt=0;Pt<De.length;++Pt){var dn=De[Pt],cn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(dn);if(cn)switch(cn[1]){case"line":var Pn=/(\d+)(\s+\d+)?/.exec(cn[2]);Pn&&(ut=Pn[1]|0,Pn[2]&&(Ct=Pn[2]|0,Ct in Qe||(Qe[Ct]=new _)));break;case"define":var yn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(cn[2]);yn&&(Qe[Ct].name=yn[1]?a(yn[2]):yn[2]);break}Qe[Ct].lines.push(new E(ut++,dn))}return Object.keys(Qe).forEach(function(En){var pn=Qe[En];pn.lines.forEach(function(un){pn.index[un.number]=un})}),Qe}function C(ae){var Ee=[];return ae.split(`
`).forEach(function(De){if(!(De.length<5)){var ut=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(De);ut?Ee.push(new x(ut[1]|0,ut[2]|0,ut[3].trim())):De.length>0&&Ee.push(new x("unknown",0,De))}}),Ee}function D(ae,Ee){Ee.forEach(function(De){var ut=ae[De.file];if(ut){var Ct=ut.index[De.line];if(Ct){Ct.errors.push(De),ut.hasErrors=!0;return}}ae.unknown.hasErrors=!0,ae.unknown.lines[0].errors.push(De)})}function L(ae,Ee,De,ut,Ct){if(!ae.getShaderParameter(Ee,ae.COMPILE_STATUS)){var Qe=ae.getShaderInfoLog(Ee),Pt=ut===ae.FRAGMENT_SHADER?"fragment":"vertex";M(De,"string",Pt+" shader source must be a string",Ct);var dn=w(De,Ct),cn=C(Qe);D(dn,cn),Object.keys(dn).forEach(function(Pn){var yn=dn[Pn];if(!yn.hasErrors)return;var En=[""],pn=[""];function un(Tn,ot){En.push(Tn),pn.push(ot||"")}un("file number "+Pn+": "+yn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),yn.lines.forEach(function(Tn){if(Tn.errors.length>0){un(y(Tn.number,4)+"|  ","background-color:yellow; font-weight:bold"),un(Tn.line+i,"color:red; background-color:yellow; font-weight:bold");var ot=0;Tn.errors.forEach(function(wt){var gn=wt.message,zn=/^\s*'(.*)'\s*:\s*(.*)$/.exec(gn);if(zn){var Xt=zn[1];switch(gn=zn[2],Xt){case"assign":Xt="=";break}ot=Math.max(Tn.line.indexOf(Xt,ot),0)}else ot=0;un(y("| ",6)),un(y("^^^",ot+3)+i,"font-weight:bold"),un(y("| ",6)),un(gn+i,"font-weight:bold")}),un(y("| ",6)+i)}else un(y(Tn.number,4)+"|  "),un(Tn.line+i,"color:red")}),typeof document<"u"&&!window.chrome?(pn[0]=En.join("%c"),console.log.apply(console,pn)):console.log(En.join(""))}),s.raise("Error compiling "+Pt+" shader, "+dn[0].name)}}function B(ae,Ee,De,ut,Ct){if(!ae.getProgramParameter(Ee,ae.LINK_STATUS)){var Qe=ae.getProgramInfoLog(Ee),Pt=w(De,Ct),dn=w(ut,Ct),cn='Error linking program with vertex shader, "'+dn[0].name+'", and fragment shader "'+Pt[0].name+'"';typeof document<"u"?console.log("%c"+cn+i+"%c"+Qe,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(cn+i+Qe),s.raise(cn)}}function I(ae){ae._commandRef=T()}function U(ae,Ee,De,ut){I(ae);function Ct(cn){return cn?ut.id(cn):0}ae._fragId=Ct(ae.static.frag),ae._vertId=Ct(ae.static.vert);function Qe(cn,Pn){Object.keys(Pn).forEach(function(yn){cn[ut.id(yn)]=!0})}var Pt=ae._uniformSet={};Qe(Pt,Ee.static),Qe(Pt,Ee.dynamic);var dn=ae._attributeSet={};Qe(dn,De.static),Qe(dn,De.dynamic),ae._hasCount="count"in ae.static||"count"in ae.dynamic||"elements"in ae.static||"elements"in ae.dynamic}function $(ae,Ee){var De=S();o(ae+" in command "+(Ee||T())+(De==="unknown"?"":" called from "+De))}function X(ae,Ee,De){ae||$(Ee,De||T())}function N(ae,Ee,De,ut){ae in Ee||$("unknown parameter ("+ae+")"+l(De)+". possible values: "+Object.keys(Ee).join(),ut||T())}function M(ae,Ee,De,ut){f(ae,Ee)||$("invalid parameter type"+l(De)+". expected "+Ee+", got "+typeof ae,ut||T())}function k(ae){ae()}function z(ae,Ee,De){ae.texture?p(ae.texture._texture.internalformat,Ee,"unsupported texture format for attachment"):p(ae.renderbuffer._renderbuffer.format,De,"unsupported renderbuffer format for attachment")}var j=33071,V=9728,Q=9984,ee=9985,re=9986,ne=9987,le=5120,ue=5121,ve=5122,Se=5123,Re=5124,Xe=5125,Le=5126,Lt=32819,xt=32820,dt=33635,Bt=34042,At=36193,zt={};zt[le]=zt[ue]=1,zt[ve]=zt[Se]=zt[At]=zt[dt]=zt[Lt]=zt[xt]=2,zt[Re]=zt[Xe]=zt[Le]=zt[Bt]=4;function rn(ae,Ee){return ae===xt||ae===Lt||ae===dt?2:ae===Bt?4:zt[ae]*Ee}function Wn(ae){return!(ae&ae-1)&&!!ae}function Sn(ae,Ee,De){var ut,Ct=Ee.width,Qe=Ee.height,Pt=Ee.channels;s(Ct>0&&Ct<=De.maxTextureSize&&Qe>0&&Qe<=De.maxTextureSize,"invalid texture shape"),(ae.wrapS!==j||ae.wrapT!==j)&&s(Wn(Ct)&&Wn(Qe),"incompatible wrap mode for texture, both width and height must be power of 2"),Ee.mipmask===1?Ct!==1&&Qe!==1&&s(ae.minFilter!==Q&&ae.minFilter!==re&&ae.minFilter!==ee&&ae.minFilter!==ne,"min filter requires mipmap"):(s(Wn(Ct)&&Wn(Qe),"texture must be a square power of 2 to support mipmapping"),s(Ee.mipmask===(Ct<<1)-1,"missing or incomplete mipmap data")),Ee.type===Le&&(De.extensions.indexOf("oes_texture_float_linear")<0&&s(ae.minFilter===V&&ae.magFilter===V,"filter not supported, must enable oes_texture_float_linear"),s(!ae.genMipmaps,"mipmap generation not supported with float textures"));var dn=Ee.images;for(ut=0;ut<16;++ut)if(dn[ut]){var cn=Ct>>ut,Pn=Qe>>ut;s(Ee.mipmask&1<<ut,"missing mipmap data");var yn=dn[ut];if(s(yn.width===cn&&yn.height===Pn,"invalid shape for mip images"),s(yn.format===Ee.format&&yn.internalformat===Ee.internalformat&&yn.type===Ee.type,"incompatible type for mip image"),!yn.compressed)if(yn.data){var En=Math.ceil(rn(yn.type,Pt)*cn/yn.unpackAlignment)*yn.unpackAlignment;s(yn.data.byteLength===En*Pn,"invalid data for image, buffer size is inconsistent with image format")}else yn.element||yn.copy}else ae.genMipmaps||s((Ee.mipmask&1<<ut)===0,"extra mipmap data");Ee.compressed&&s(!ae.genMipmaps,"mipmap generation for compressed images not supported")}function In(ae,Ee,De,ut){var Ct=ae.width,Qe=ae.height,Pt=ae.channels;s(Ct>0&&Ct<=ut.maxTextureSize&&Qe>0&&Qe<=ut.maxTextureSize,"invalid texture shape"),s(Ct===Qe,"cube map must be square"),s(Ee.wrapS===j&&Ee.wrapT===j,"wrap mode not supported by cube map");for(var dn=0;dn<De.length;++dn){var cn=De[dn];s(cn.width===Ct&&cn.height===Qe,"inconsistent cube map face shape"),Ee.genMipmaps&&(s(!cn.compressed,"can not generate mipmap for compressed textures"),s(cn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Pn=cn.images,yn=0;yn<16;++yn){var En=Pn[yn];if(En){var pn=Ct>>yn,un=Qe>>yn;s(cn.mipmask&1<<yn,"missing mipmap data"),s(En.width===pn&&En.height===un,"invalid shape for mip images"),s(En.format===ae.format&&En.internalformat===ae.internalformat&&En.type===ae.type,"incompatible type for mip image"),En.compressed||(En.data?s(En.data.byteLength===pn*un*Math.max(rn(En.type,Pt),En.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):En.element||En.copy)}}}}var de=r(s,{optional:k,raise:o,commandRaise:$,command:X,parameter:c,commandParameter:N,constructor:v,type:h,commandType:M,isTypedArray:u,nni:d,oneOf:p,shaderError:L,linkError:B,callSite:S,saveCommandRef:I,saveDrawInfo:U,framebufferFormat:z,guessCommand:T,texture2D:Sn,textureCube:In}),sr=0,zr=0;function st(ae,Ee){this.id=sr++,this.type=ae,this.data=Ee}function Ft(ae){return ae.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function An(ae){if(ae.length===0)return[];var Ee=ae.charAt(0),De=ae.charAt(ae.length-1);if(ae.length>1&&Ee===De&&(Ee==='"'||Ee==="'"))return['"'+Ft(ae.substr(1,ae.length-2))+'"'];var ut=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ae);if(ut)return An(ae.substr(0,ut.index)).concat(An(ut[1])).concat(An(ae.substr(ut.index+ut[0].length)));var Ct=ae.split(".");if(Ct.length===1)return['"'+Ft(ae)+'"'];for(var Qe=[],Pt=0;Pt<Ct.length;++Pt)Qe=Qe.concat(An(Ct[Pt]));return Qe}function wn(ae){return"["+An(ae).join("][")+"]"}function $n(ae,Ee){return new st(ae,wn(Ee+""))}function Vr(ae){return typeof ae=="function"&&!ae._reglType||ae instanceof st}function Tr(ae,Ee){return typeof ae=="function"?new st(zr,ae):ae}var Rr={DynamicVariable:st,define:$n,isDynamic:Vr,unbox:Tr,accessor:wn},ei={next:typeof requestAnimationFrame=="function"?function(ae){return requestAnimationFrame(ae)}:function(ae){return setTimeout(ae,16)},cancel:typeof cancelAnimationFrame=="function"?function(ae){return cancelAnimationFrame(ae)}:clearTimeout},va=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function pi(){var ae={"":0},Ee=[""];return{id:function(De){var ut=ae[De];return ut||(ut=ae[De]=Ee.length,Ee.push(De),ut)},str:function(De){return Ee[De]}}}function qo(ae,Ee,De){var ut=document.createElement("canvas");r(ut.style,{border:0,margin:0,padding:0,top:0,left:0}),ae.appendChild(ut),ae===document.body&&(ut.style.position="absolute",r(ae.style,{margin:0,padding:0}));function Ct(){var dn=window.innerWidth,cn=window.innerHeight;if(ae!==document.body){var Pn=ae.getBoundingClientRect();dn=Pn.right-Pn.left,cn=Pn.bottom-Pn.top}ut.width=De*dn,ut.height=De*cn,r(ut.style,{width:dn+"px",height:cn+"px"})}var Qe;ae!==document.body&&typeof ResizeObserver=="function"?(Qe=new ResizeObserver(function(){setTimeout(Ct)}),Qe.observe(ae)):window.addEventListener("resize",Ct,!1);function Pt(){Qe?Qe.disconnect():window.removeEventListener("resize",Ct),ae.removeChild(ut)}return Ct(),{canvas:ut,onDestroy:Pt}}function ft(ae,Ee){function De(ut){try{return ae.getContext(ut,Ee)}catch{return null}}return De("webgl")||De("experimental-webgl")||De("webgl-experimental")}function nn(ae){return typeof ae.nodeName=="string"&&typeof ae.appendChild=="function"&&typeof ae.getBoundingClientRect=="function"}function Yn(ae){return typeof ae.drawArrays=="function"||typeof ae.drawElements=="function"}function Nr(ae){return typeof ae=="string"?ae.split():(de(Array.isArray(ae),"invalid extension array"),ae)}function ce(ae){return typeof ae=="string"?(de(typeof document<"u","not supported outside of DOM"),document.querySelector(ae)):ae}function H(ae){var Ee=ae||{},De,ut,Ct,Qe,Pt={},dn=[],cn=[],Pn=typeof window>"u"?1:window.devicePixelRatio,yn=!1,En=function(Tn){Tn&&de.raise(Tn)},pn=function(){};if(typeof Ee=="string"?(de(typeof document<"u","selector queries only supported in DOM enviroments"),De=document.querySelector(Ee),de(De,"invalid query string for element")):typeof Ee=="object"?nn(Ee)?De=Ee:Yn(Ee)?(Qe=Ee,Ct=Qe.canvas):(de.constructor(Ee),"gl"in Ee?Qe=Ee.gl:"canvas"in Ee?Ct=ce(Ee.canvas):"container"in Ee&&(ut=ce(Ee.container)),"attributes"in Ee&&(Pt=Ee.attributes,de.type(Pt,"object","invalid context attributes")),"extensions"in Ee&&(dn=Nr(Ee.extensions)),"optionalExtensions"in Ee&&(cn=Nr(Ee.optionalExtensions)),"onDone"in Ee&&(de.type(Ee.onDone,"function","invalid or missing onDone callback"),En=Ee.onDone),"profile"in Ee&&(yn=!!Ee.profile),"pixelRatio"in Ee&&(Pn=+Ee.pixelRatio,de(Pn>0,"invalid pixel ratio"))):de.raise("invalid arguments to regl"),De&&(De.nodeName.toLowerCase()==="canvas"?Ct=De:ut=De),!Qe){if(!Ct){de(typeof document<"u","must manually specify webgl context outside of DOM environments");var un=qo(ut||document.body,En,Pn);if(!un)return null;Ct=un.canvas,pn=un.onDestroy}Pt.premultipliedAlpha===void 0&&(Pt.premultipliedAlpha=!0),Qe=ft(Ct,Pt)}return Qe?{gl:Qe,canvas:Ct,container:ut,extensions:dn,optionalExtensions:cn,pixelRatio:Pn,profile:yn,onDone:En,onDestroy:pn}:(pn(),En("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function W(ae,Ee){var De={};function ut(Pt){de.type(Pt,"string","extension name must be string");var dn=Pt.toLowerCase(),cn;try{cn=De[dn]=ae.getExtension(dn)}catch{}return!!cn}for(var Ct=0;Ct<Ee.extensions.length;++Ct){var Qe=Ee.extensions[Ct];if(!ut(Qe))return Ee.onDestroy(),Ee.onDone('"'+Qe+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ee.optionalExtensions.forEach(ut),{extensions:De,restore:function(){Object.keys(De).forEach(function(Pt){if(De[Pt]&&!ut(Pt))throw new Error("(regl): error restoring extension "+Pt)})}}}function F(ae,Ee){for(var De=Array(ae),ut=0;ut<ae;++ut)De[ut]=Ee(ut);return De}var Y=5120,te=5121,pe=5122,me=5123,Ce=5124,Oe=5125,ct=5126;function Ge(ae){for(var Ee=16;Ee<=1<<28;Ee*=16)if(ae<=Ee)return Ee;return 0}function $t(ae){var Ee,De;return Ee=(ae>65535)<<4,ae>>>=Ee,De=(ae>255)<<3,ae>>>=De,Ee|=De,De=(ae>15)<<2,ae>>>=De,Ee|=De,De=(ae>3)<<1,ae>>>=De,Ee|=De,Ee|ae>>1}function kn(){var ae=F(8,function(){return[]});function Ee(Qe){var Pt=Ge(Qe),dn=ae[$t(Pt)>>2];return dn.length>0?dn.pop():new ArrayBuffer(Pt)}function De(Qe){ae[$t(Qe.byteLength)>>2].push(Qe)}function ut(Qe,Pt){var dn=null;switch(Qe){case Y:dn=new Int8Array(Ee(Pt),0,Pt);break;case te:dn=new Uint8Array(Ee(Pt),0,Pt);break;case pe:dn=new Int16Array(Ee(2*Pt),0,Pt);break;case me:dn=new Uint16Array(Ee(2*Pt),0,Pt);break;case Ce:dn=new Int32Array(Ee(4*Pt),0,Pt);break;case Oe:dn=new Uint32Array(Ee(4*Pt),0,Pt);break;case ct:dn=new Float32Array(Ee(4*Pt),0,Pt);break;default:return null}return dn.length!==Pt?dn.subarray(0,Pt):dn}function Ct(Qe){De(Qe.buffer)}return{alloc:Ee,free:De,allocType:ut,freeType:Ct}}var _t=kn();_t.zero=kn();var Jt=3408,Xn=3410,$e=3411,_n=3412,ar=3413,Hr=3414,ti=3415,ua=33901,Mr=33902,Ir=3379,ia=3386,nt=34921,tn=36347,er=36348,mn=35661,Yr=35660,Gi=34930,Fi=36349,Ti=34076,Oa=34024,ln=7936,Hn=7937,si=7938,Wi=35724,Lr=34047,Ii=36063,Xi=34852,Ai=3553,qi=34067,Zl=34069,Du=33984,yl=6408,js=5126,Ud=5121,Po=36160,ru=36053,Kl=36064,Hh=16384,iu=function(ae,Ee){var De=1;Ee.ext_texture_filter_anisotropic&&(De=ae.getParameter(Lr));var ut=1,Ct=1;Ee.webgl_draw_buffers&&(ut=ae.getParameter(Xi),Ct=ae.getParameter(Ii));var Qe=!!Ee.oes_texture_float;if(Qe){var Pt=ae.createTexture();ae.bindTexture(Ai,Pt),ae.texImage2D(Ai,0,yl,1,1,0,yl,js,null);var dn=ae.createFramebuffer();if(ae.bindFramebuffer(Po,dn),ae.framebufferTexture2D(Po,Kl,Ai,Pt,0),ae.bindTexture(Ai,null),ae.checkFramebufferStatus(Po)!==ru)Qe=!1;else{ae.viewport(0,0,1,1),ae.clearColor(1,0,0,1),ae.clear(Hh);var cn=_t.allocType(js,4);ae.readPixels(0,0,1,1,yl,js,cn),ae.getError()?Qe=!1:(ae.deleteFramebuffer(dn),ae.deleteTexture(Pt),Qe=cn[0]===1),_t.freeType(cn)}}var Pn=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),yn=!0;if(!Pn){var En=ae.createTexture(),pn=_t.allocType(Ud,36);ae.activeTexture(Du),ae.bindTexture(qi,En),ae.texImage2D(Zl,0,yl,3,3,0,yl,Ud,pn),_t.freeType(pn),ae.bindTexture(qi,null),ae.deleteTexture(En),yn=!ae.getError()}return{colorBits:[ae.getParameter(Xn),ae.getParameter($e),ae.getParameter(_n),ae.getParameter(ar)],depthBits:ae.getParameter(Hr),stencilBits:ae.getParameter(ti),subpixelBits:ae.getParameter(Jt),extensions:Object.keys(Ee).filter(function(un){return!!Ee[un]}),maxAnisotropic:De,maxDrawbuffers:ut,maxColorAttachments:Ct,pointSizeDims:ae.getParameter(ua),lineWidthDims:ae.getParameter(Mr),maxViewportDims:ae.getParameter(ia),maxCombinedTextureUnits:ae.getParameter(mn),maxCubeMapSize:ae.getParameter(Ti),maxRenderbufferSize:ae.getParameter(Oa),maxTextureUnits:ae.getParameter(Gi),maxTextureSize:ae.getParameter(Ir),maxAttributes:ae.getParameter(nt),maxVertexUniforms:ae.getParameter(tn),maxVertexTextureUnits:ae.getParameter(Yr),maxVaryingVectors:ae.getParameter(er),maxFragmentUniforms:ae.getParameter(Fi),glsl:ae.getParameter(Wi),renderer:ae.getParameter(Hn),vendor:ae.getParameter(ln),version:ae.getParameter(si),readFloat:Qe,npotTextureCube:yn}};function he(ae){return!!ae&&typeof ae=="object"&&Array.isArray(ae.shape)&&Array.isArray(ae.stride)&&typeof ae.offset=="number"&&ae.shape.length===ae.stride.length&&(Array.isArray(ae.data)||n(ae.data))}var Te=function(ae){return Object.keys(ae).map(function(Ee){return ae[Ee]})},Fe={shape:cr,flatten:No};function Et(ae,Ee,De){for(var ut=0;ut<Ee;++ut)De[ut]=ae[ut]}function On(ae,Ee,De,ut){for(var Ct=0,Qe=0;Qe<Ee;++Qe)for(var Pt=ae[Qe],dn=0;dn<De;++dn)ut[Ct++]=Pt[dn]}function lr(ae,Ee,De,ut,Ct,Qe){for(var Pt=Qe,dn=0;dn<Ee;++dn)for(var cn=ae[dn],Pn=0;Pn<De;++Pn)for(var yn=cn[Pn],En=0;En<ut;++En)Ct[Pt++]=yn[En]}function gi(ae,Ee,De,ut,Ct){for(var Qe=1,Pt=De+1;Pt<Ee.length;++Pt)Qe*=Ee[Pt];var dn=Ee[De];if(Ee.length-De===4){var cn=Ee[De+1],Pn=Ee[De+2],yn=Ee[De+3];for(Pt=0;Pt<dn;++Pt)lr(ae[Pt],cn,Pn,yn,ut,Ct),Ct+=Qe}else for(Pt=0;Pt<dn;++Pt)gi(ae[Pt],Ee,De+1,ut,Ct),Ct+=Qe}function No(ae,Ee,De,ut){var Ct=1;if(Ee.length)for(var Qe=0;Qe<Ee.length;++Qe)Ct*=Ee[Qe];else Ct=0;var Pt=ut||_t.allocType(De,Ct);switch(Ee.length){case 0:break;case 1:Et(ae,Ee[0],Pt);break;case 2:On(ae,Ee[0],Ee[1],Pt);break;case 3:lr(ae,Ee[0],Ee[1],Ee[2],Pt,0);break;default:gi(ae,Ee,0,Pt,0)}return Pt}function cr(ae){for(var Ee=[],De=ae;De.length;De=De[0])Ee.push(De.length);return Ee}var hr={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Xr=5120,Pa=5122,_l=5124,Bu=5121,jd=5123,cS=5125,_b=5126,uS=5126,au={int8:Xr,int16:Pa,int32:_l,uint8:Bu,uint16:jd,uint32:cS,float:_b,float32:uS},Gh=35048,bb=35040,zd={dynamic:Gh,stream:bb,static:35044},th=Fe.flatten,Gy=Fe.shape,Za=35044,lo=35040,hv=5121,dv=5126,Wh=[];Wh[5120]=1,Wh[5122]=2,Wh[5124]=4,Wh[5121]=1,Wh[5123]=2,Wh[5125]=4,Wh[5126]=4;function kl(ae){return hr[Object.prototype.toString.call(ae)]|0}function $d(ae,Ee){for(var De=0;De<Ee.length;++De)ae[De]=Ee[De]}function o0(ae,Ee,De,ut,Ct,Qe,Pt){for(var dn=0,cn=0;cn<De;++cn)for(var Pn=0;Pn<ut;++Pn)ae[dn++]=Ee[Ct*cn+Qe*Pn+Pt]}function pv(ae,Ee,De,ut){var Ct=0,Qe={};function Pt(ot){this.id=Ct++,this.buffer=ae.createBuffer(),this.type=ot,this.usage=Za,this.byteLength=0,this.dimension=1,this.dtype=hv,this.persistentData=null,De.profile&&(this.stats={size:0})}Pt.prototype.bind=function(){ae.bindBuffer(this.type,this.buffer)},Pt.prototype.destroy=function(){pn(this)};var dn=[];function cn(ot,wt){var gn=dn.pop();return gn||(gn=new Pt(ot)),gn.bind(),En(gn,wt,lo,0,1,!1),gn}function Pn(ot){dn.push(ot)}function yn(ot,wt,gn){ot.byteLength=wt.byteLength,ae.bufferData(ot.type,wt,gn)}function En(ot,wt,gn,zn,Xt,Zn){var sn;if(ot.usage=gn,Array.isArray(wt)){if(ot.dtype=zn||dv,wt.length>0){var Mn;if(Array.isArray(wt[0])){sn=Gy(wt);for(var Vt=1,Dn=1;Dn<sn.length;++Dn)Vt*=sn[Dn];ot.dimension=Vt,Mn=th(wt,sn,ot.dtype),yn(ot,Mn,gn),Zn?ot.persistentData=Mn:_t.freeType(Mn)}else if(typeof wt[0]=="number"){ot.dimension=Xt;var vr=_t.allocType(ot.dtype,wt.length);$d(vr,wt),yn(ot,vr,gn),Zn?ot.persistentData=vr:_t.freeType(vr)}else n(wt[0])?(ot.dimension=wt[0].length,ot.dtype=zn||kl(wt[0])||dv,Mn=th(wt,[wt.length,wt[0].length],ot.dtype),yn(ot,Mn,gn),Zn?ot.persistentData=Mn:_t.freeType(Mn)):de.raise("invalid buffer data")}}else if(n(wt))ot.dtype=zn||kl(wt),ot.dimension=Xt,yn(ot,wt,gn),Zn&&(ot.persistentData=new Uint8Array(new Uint8Array(wt.buffer)));else if(he(wt)){sn=wt.shape;var Kr=wt.stride,Un=wt.offset,fn=0,Ht=0,qr=0,ki=0;sn.length===1?(fn=sn[0],Ht=1,qr=Kr[0],ki=0):sn.length===2?(fn=sn[0],Ht=sn[1],qr=Kr[0],ki=Kr[1]):de.raise("invalid shape"),ot.dtype=zn||kl(wt.data)||dv,ot.dimension=Ht;var pr=_t.allocType(ot.dtype,fn*Ht);o0(pr,wt.data,fn,Ht,qr,ki,Un),yn(ot,pr,gn),Zn?ot.persistentData=pr:_t.freeType(pr)}else wt instanceof ArrayBuffer?(ot.dtype=hv,ot.dimension=Xt,yn(ot,wt,gn),Zn&&(ot.persistentData=new Uint8Array(new Uint8Array(wt)))):de.raise("invalid buffer data")}function pn(ot){Ee.bufferCount--,ut(ot);var wt=ot.buffer;de(wt,"buffer must not be deleted already"),ae.deleteBuffer(wt),ot.buffer=null,delete Qe[ot.id]}function un(ot,wt,gn,zn){Ee.bufferCount++;var Xt=new Pt(wt);Qe[Xt.id]=Xt;function Zn(Vt){var Dn=Za,vr=null,Kr=0,Un=0,fn=1;return Array.isArray(Vt)||n(Vt)||he(Vt)||Vt instanceof ArrayBuffer?vr=Vt:typeof Vt=="number"?Kr=Vt|0:Vt&&(de.type(Vt,"object","buffer arguments must be an object, a number or an array"),"data"in Vt&&(de(vr===null||Array.isArray(vr)||n(vr)||he(vr),"invalid data for buffer"),vr=Vt.data),"usage"in Vt&&(de.parameter(Vt.usage,zd,"invalid buffer usage"),Dn=zd[Vt.usage]),"type"in Vt&&(de.parameter(Vt.type,au,"invalid buffer type"),Un=au[Vt.type]),"dimension"in Vt&&(de.type(Vt.dimension,"number","invalid dimension"),fn=Vt.dimension|0),"length"in Vt&&(de.nni(Kr,"buffer length must be a nonnegative integer"),Kr=Vt.length|0)),Xt.bind(),vr?En(Xt,vr,Dn,Un,fn,zn):(Kr&&ae.bufferData(Xt.type,Kr,Dn),Xt.dtype=Un||hv,Xt.usage=Dn,Xt.dimension=fn,Xt.byteLength=Kr),De.profile&&(Xt.stats.size=Xt.byteLength*Wh[Xt.dtype]),Zn}function sn(Vt,Dn){de(Dn+Vt.byteLength<=Xt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Vt.byteLength+" starting from offset "+Dn+" to a buffer of size "+Xt.byteLength),ae.bufferSubData(Xt.type,Dn,Vt)}function Mn(Vt,Dn){var vr=(Dn||0)|0,Kr;if(Xt.bind(),n(Vt)||Vt instanceof ArrayBuffer)sn(Vt,vr);else if(Array.isArray(Vt)){if(Vt.length>0)if(typeof Vt[0]=="number"){var Un=_t.allocType(Xt.dtype,Vt.length);$d(Un,Vt),sn(Un,vr),_t.freeType(Un)}else if(Array.isArray(Vt[0])||n(Vt[0])){Kr=Gy(Vt);var fn=th(Vt,Kr,Xt.dtype);sn(fn,vr),_t.freeType(fn)}else de.raise("invalid buffer data")}else if(he(Vt)){Kr=Vt.shape;var Ht=Vt.stride,qr=0,ki=0,pr=0,ni=0;Kr.length===1?(qr=Kr[0],ki=1,pr=Ht[0],ni=0):Kr.length===2?(qr=Kr[0],ki=Kr[1],pr=Ht[0],ni=Ht[1]):de.raise("invalid shape");var Qr=Array.isArray(Vt.data)?Xt.dtype:kl(Vt.data),ui=_t.allocType(Qr,qr*ki);o0(ui,Vt.data,qr,ki,pr,ni,Vt.offset),sn(ui,vr),_t.freeType(ui)}else de.raise("invalid data for buffer subdata");return Zn}return gn||Zn(ot),Zn._reglType="buffer",Zn._buffer=Xt,Zn.subdata=Mn,De.profile&&(Zn.stats=Xt.stats),Zn.destroy=function(){pn(Xt)},Zn}function Tn(){Te(Qe).forEach(function(ot){ot.buffer=ae.createBuffer(),ae.bindBuffer(ot.type,ot.buffer),ae.bufferData(ot.type,ot.persistentData||ot.byteLength,ot.usage)})}return De.profile&&(Ee.getTotalBufferSize=function(){var ot=0;return Object.keys(Qe).forEach(function(wt){ot+=Qe[wt].stats.size}),ot}),{create:un,createStream:cn,destroyStream:Pn,clear:function(){Te(Qe).forEach(pn),dn.forEach(pn)},getBuffer:function(ot){return ot&&ot._buffer instanceof Pt?ot._buffer:null},restore:Tn,_initBuffer:En}}var lO=0,el=0,s0=1,gf=1,l0=4,Wy=4,Dl={points:lO,point:el,lines:s0,line:gf,triangles:l0,triangle:Wy,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},fS=0,hS=1,Hd=4,dS=5120,ng=5121,Eb=5122,bl=5123,pS=5124,tl=5125,xb=34963,gS=35040,Gd=35044;function Vy(ae,Ee,De,ut){var Ct={},Qe=0,Pt={uint8:ng,uint16:bl};Ee.oes_element_index_uint&&(Pt.uint32=tl);function dn(Tn){this.id=Qe++,Ct[this.id]=this,this.buffer=Tn,this.primType=Hd,this.vertCount=0,this.type=0}dn.prototype.bind=function(){this.buffer.bind()};var cn=[];function Pn(Tn){var ot=cn.pop();return ot||(ot=new dn(De.create(null,xb,!0,!1)._buffer)),En(ot,Tn,gS,-1,-1,0,0),ot}function yn(Tn){cn.push(Tn)}function En(Tn,ot,wt,gn,zn,Xt,Zn){Tn.buffer.bind();var sn;if(ot){var Mn=Zn;!Zn&&(!n(ot)||he(ot)&&!n(ot.data))&&(Mn=Ee.oes_element_index_uint?tl:bl),De._initBuffer(Tn.buffer,ot,wt,Mn,3)}else ae.bufferData(xb,Xt,wt),Tn.buffer.dtype=sn||ng,Tn.buffer.usage=wt,Tn.buffer.dimension=3,Tn.buffer.byteLength=Xt;if(sn=Zn,!Zn){switch(Tn.buffer.dtype){case ng:case dS:sn=ng;break;case bl:case Eb:sn=bl;break;case tl:case pS:sn=tl;break;default:de.raise("unsupported type for element array")}Tn.buffer.dtype=sn}Tn.type=sn,de(sn!==tl||!!Ee.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Vt=zn;Vt<0&&(Vt=Tn.buffer.byteLength,sn===bl?Vt>>=1:sn===tl&&(Vt>>=2)),Tn.vertCount=Vt;var Dn=gn;if(gn<0){Dn=Hd;var vr=Tn.buffer.dimension;vr===1&&(Dn=fS),vr===2&&(Dn=hS),vr===3&&(Dn=Hd)}Tn.primType=Dn}function pn(Tn){ut.elementsCount--,de(Tn.buffer!==null,"must not double destroy elements"),delete Ct[Tn.id],Tn.buffer.destroy(),Tn.buffer=null}function un(Tn,ot){var wt=De.create(null,xb,!0),gn=new dn(wt._buffer);ut.elementsCount++;function zn(Xt){if(!Xt)wt(),gn.primType=Hd,gn.vertCount=0,gn.type=ng;else if(typeof Xt=="number")wt(Xt),gn.primType=Hd,gn.vertCount=Xt|0,gn.type=ng;else{var Zn=null,sn=Gd,Mn=-1,Vt=-1,Dn=0,vr=0;Array.isArray(Xt)||n(Xt)||he(Xt)?Zn=Xt:(de.type(Xt,"object","invalid arguments for elements"),"data"in Xt&&(Zn=Xt.data,de(Array.isArray(Zn)||n(Zn)||he(Zn),"invalid data for element buffer")),"usage"in Xt&&(de.parameter(Xt.usage,zd,"invalid element buffer usage"),sn=zd[Xt.usage]),"primitive"in Xt&&(de.parameter(Xt.primitive,Dl,"invalid element buffer primitive"),Mn=Dl[Xt.primitive]),"count"in Xt&&(de(typeof Xt.count=="number"&&Xt.count>=0,"invalid vertex count for elements"),Vt=Xt.count|0),"type"in Xt&&(de.parameter(Xt.type,Pt,"invalid buffer type"),vr=Pt[Xt.type]),"length"in Xt?Dn=Xt.length|0:(Dn=Vt,vr===bl||vr===Eb?Dn*=2:(vr===tl||vr===pS)&&(Dn*=4))),En(gn,Zn,sn,Mn,Vt,Dn,vr)}return zn}return zn(Tn),zn._reglType="elements",zn._elements=gn,zn.subdata=function(Xt,Zn){return wt.subdata(Xt,Zn),zn},zn.destroy=function(){pn(gn)},zn}return{create:un,createStream:Pn,destroyStream:yn,getElements:function(Tn){return typeof Tn=="function"&&Tn._elements instanceof dn?Tn._elements:null},clear:function(){Te(Ct).forEach(pn)}}}var gv=new Float32Array(1),Zo=new Uint32Array(gv.buffer),Wd=5123;function Yy(ae){for(var Ee=_t.allocType(Wd,ae.length),De=0;De<ae.length;++De)if(isNaN(ae[De]))Ee[De]=65535;else if(ae[De]===1/0)Ee[De]=31744;else if(ae[De]===-1/0)Ee[De]=64512;else{gv[0]=ae[De];var ut=Zo[0],Ct=ut>>>31<<15,Qe=(ut<<1>>>24)-127,Pt=ut>>13&1023;if(Qe<-24)Ee[De]=Ct;else if(Qe<-14){var dn=-14-Qe;Ee[De]=Ct+(Pt+1024>>dn)}else Qe>15?Ee[De]=Ct+31744:Ee[De]=Ct+(Qe+15<<10)+Pt}return Ee}function Ko(ae){return Array.isArray(ae)||n(ae)}var Xy=function(ae){return!(ae&ae-1)&&!!ae},cO=34467,Vh=3553,vS=34067,c0=34069,nh=6408,Vd=6406,qy=6407,vv=6409,rg=6410,Yd=32854,u0=32855,Zy=36194,mS=32819,Ky=32820,Qy=33635,yS=34042,Yh=6402,Ql=34041,f0=35904,ig=35906,Xd=36193,h0=33776,ag=33777,og=33778,Sb=33779,d0=35986,Tb=35987,qd=34798,Jy=35840,e1=35841,p0=35842,t1=35843,rh=36196,Xh=5121,Ab=5123,wb=5125,g0=5126,mv=10242,os=10243,yv=10497,n1=33071,_S=33648,bS=10240,ES=10241,v0=9728,_v=9729,lt=9984,en=9985,Ut=9986,Er=9987,wi=33170,Zi=4352,Qo=4353,Ka=4354,r1=34046,sg=3317,ou=37440,m0=37441,xS=37443,lg=37444,cg=33984,i1=[lt,Ut,en,Er],Ca=[0,vv,rg,qy,nh],su={};su[vv]=su[Vd]=su[Yh]=1,su[Ql]=su[rg]=2,su[qy]=su[f0]=3,su[nh]=su[ig]=4;function qh(ae){return"[object "+ae+"]"}var Ec=qh("HTMLCanvasElement"),y0=qh("OffscreenCanvas"),lu=qh("CanvasRenderingContext2D"),ug=qh("ImageBitmap"),fg=qh("HTMLImageElement"),Fu=qh("HTMLVideoElement"),hg=Object.keys(hr).concat([Ec,y0,lu,ug,fg,Fu]),Zh=[];Zh[Xh]=1,Zh[g0]=4,Zh[Xd]=2,Zh[Ab]=2,Zh[wb]=4;var co=[];co[Yd]=2,co[u0]=2,co[Zy]=2,co[Ql]=4,co[h0]=.5,co[ag]=.5,co[og]=1,co[Sb]=1,co[d0]=.5,co[Tb]=1,co[qd]=1,co[Jy]=.5,co[e1]=.25,co[p0]=.5,co[t1]=.25,co[rh]=.5;function a1(ae){return Array.isArray(ae)&&(ae.length===0||typeof ae[0]=="number")}function bv(ae){if(!Array.isArray(ae))return!1;var Ee=ae.length;return!(Ee===0||!Ko(ae[0]))}function xc(ae){return Object.prototype.toString.call(ae)}function Ob(ae){return xc(ae)===Ec}function El(ae){return xc(ae)===y0}function Kh(ae){return xc(ae)===lu}function Uu(ae){return xc(ae)===ug}function SS(ae){return xc(ae)===fg}function o1(ae){return xc(ae)===Fu}function Qh(ae){if(!ae)return!1;var Ee=xc(ae);return hg.indexOf(Ee)>=0?!0:a1(ae)||bv(ae)||he(ae)}function dg(ae){return hr[Object.prototype.toString.call(ae)]|0}function _0(ae,Ee){var De=Ee.length;switch(ae.type){case Xh:case Ab:case wb:case g0:var ut=_t.allocType(ae.type,De);ut.set(Ee),ae.data=ut;break;case Xd:ae.data=Yy(Ee);break;default:de.raise("unsupported texture type, must specify a typed array")}}function Ev(ae,Ee){return _t.allocType(ae.type===Xd?g0:ae.type,Ee)}function Cb(ae,Ee){ae.type===Xd?(ae.data=Yy(Ee),_t.freeType(Ee)):ae.data=Ee}function cu(ae,Ee,De,ut,Ct,Qe){for(var Pt=ae.width,dn=ae.height,cn=ae.channels,Pn=Pt*dn*cn,yn=Ev(ae,Pn),En=0,pn=0;pn<dn;++pn)for(var un=0;un<Pt;++un)for(var Tn=0;Tn<cn;++Tn)yn[En++]=Ee[De*un+ut*pn+Ct*Tn+Qe];Cb(ae,yn)}function Jh(ae,Ee,De,ut,Ct,Qe){var Pt;if(typeof co[ae]<"u"?Pt=co[ae]:Pt=su[ae]*Zh[Ee],Qe&&(Pt*=6),Ct){for(var dn=0,cn=De;cn>=1;)dn+=Pt*cn*cn,cn/=2;return dn}else return Pt*De*ut}function xv(ae,Ee,De,ut,Ct,Qe,Pt){var dn={"don't care":Zi,"dont care":Zi,nice:Ka,fast:Qo},cn={repeat:yv,clamp:n1,mirror:_S},Pn={nearest:v0,linear:_v},yn=r({mipmap:Er,"nearest mipmap nearest":lt,"linear mipmap nearest":en,"nearest mipmap linear":Ut,"linear mipmap linear":Er},Pn),En={none:0,browser:lg},pn={uint8:Xh,rgba4:mS,rgb565:Qy,"rgb5 a1":Ky},un={alpha:Vd,luminance:vv,"luminance alpha":rg,rgb:qy,rgba:nh,rgba4:Yd,"rgb5 a1":u0,rgb565:Zy},Tn={};Ee.ext_srgb&&(un.srgb=f0,un.srgba=ig),Ee.oes_texture_float&&(pn.float32=pn.float=g0),Ee.oes_texture_half_float&&(pn.float16=pn["half float"]=Xd),Ee.webgl_depth_texture&&(r(un,{depth:Yh,"depth stencil":Ql}),r(pn,{uint16:Ab,uint32:wb,"depth stencil":yS})),Ee.webgl_compressed_texture_s3tc&&r(Tn,{"rgb s3tc dxt1":h0,"rgba s3tc dxt1":ag,"rgba s3tc dxt3":og,"rgba s3tc dxt5":Sb}),Ee.webgl_compressed_texture_atc&&r(Tn,{"rgb atc":d0,"rgba atc explicit alpha":Tb,"rgba atc interpolated alpha":qd}),Ee.webgl_compressed_texture_pvrtc&&r(Tn,{"rgb pvrtc 4bppv1":Jy,"rgb pvrtc 2bppv1":e1,"rgba pvrtc 4bppv1":p0,"rgba pvrtc 2bppv1":t1}),Ee.webgl_compressed_texture_etc1&&(Tn["rgb etc1"]=rh);var ot=Array.prototype.slice.call(ae.getParameter(cO));Object.keys(Tn).forEach(function(Me){var St=Tn[Me];ot.indexOf(St)>=0&&(un[Me]=St)});var wt=Object.keys(un);De.textureFormats=wt;var gn=[];Object.keys(un).forEach(function(Me){var St=un[Me];gn[St]=Me});var zn=[];Object.keys(pn).forEach(function(Me){var St=pn[Me];zn[St]=Me});var Xt=[];Object.keys(Pn).forEach(function(Me){var St=Pn[Me];Xt[St]=Me});var Zn=[];Object.keys(yn).forEach(function(Me){var St=yn[Me];Zn[St]=Me});var sn=[];Object.keys(cn).forEach(function(Me){var St=cn[Me];sn[St]=Me});var Mn=wt.reduce(function(Me,St){var vt=un[St];return vt===vv||vt===Vd||vt===vv||vt===rg||vt===Yh||vt===Ql||Ee.ext_srgb&&(vt===f0||vt===ig)?Me[vt]=vt:vt===u0||St.indexOf("rgba")>=0?Me[vt]=nh:Me[vt]=qy,Me},{});function Vt(){this.internalformat=nh,this.format=nh,this.type=Xh,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=lg,this.width=0,this.height=0,this.channels=0}function Dn(Me,St){Me.internalformat=St.internalformat,Me.format=St.format,Me.type=St.type,Me.compressed=St.compressed,Me.premultiplyAlpha=St.premultiplyAlpha,Me.flipY=St.flipY,Me.unpackAlignment=St.unpackAlignment,Me.colorSpace=St.colorSpace,Me.width=St.width,Me.height=St.height,Me.channels=St.channels}function vr(Me,St){if(!(typeof St!="object"||!St)){if("premultiplyAlpha"in St&&(de.type(St.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),Me.premultiplyAlpha=St.premultiplyAlpha),"flipY"in St&&(de.type(St.flipY,"boolean","invalid texture flip"),Me.flipY=St.flipY),"alignment"in St&&(de.oneOf(St.alignment,[1,2,4,8],"invalid texture unpack alignment"),Me.unpackAlignment=St.alignment),"colorSpace"in St&&(de.parameter(St.colorSpace,En,"invalid colorSpace"),Me.colorSpace=En[St.colorSpace]),"type"in St){var vt=St.type;de(Ee.oes_texture_float||!(vt==="float"||vt==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),de(Ee.oes_texture_half_float||!(vt==="half float"||vt==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),de(Ee.webgl_depth_texture||!(vt==="uint16"||vt==="uint32"||vt==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(vt,pn,"invalid texture type"),Me.type=pn[vt]}var Nn=Me.width,_i=Me.height,Ia=Me.channels,ge=!1;"shape"in St?(de(Array.isArray(St.shape)&&St.shape.length>=2,"shape must be an array"),Nn=St.shape[0],_i=St.shape[1],St.shape.length===3&&(Ia=St.shape[2],de(Ia>0&&Ia<=4,"invalid number of channels"),ge=!0),de(Nn>=0&&Nn<=De.maxTextureSize,"invalid width"),de(_i>=0&&_i<=De.maxTextureSize,"invalid height")):("radius"in St&&(Nn=_i=St.radius,de(Nn>=0&&Nn<=De.maxTextureSize,"invalid radius")),"width"in St&&(Nn=St.width,de(Nn>=0&&Nn<=De.maxTextureSize,"invalid width")),"height"in St&&(_i=St.height,de(_i>=0&&_i<=De.maxTextureSize,"invalid height")),"channels"in St&&(Ia=St.channels,de(Ia>0&&Ia<=4,"invalid number of channels"),ge=!0)),Me.width=Nn|0,Me.height=_i|0,Me.channels=Ia|0;var be=!1;if("format"in St){var Ie=St.format;de(Ee.webgl_depth_texture||!(Ie==="depth"||Ie==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),de.parameter(Ie,un,"invalid texture format");var gt=Me.internalformat=un[Ie];Me.format=Mn[gt],Ie in pn&&("type"in St||(Me.type=pn[Ie])),Ie in Tn&&(Me.compressed=!0),be=!0}!ge&&be?Me.channels=su[Me.format]:ge&&!be?Me.channels!==Ca[Me.format]&&(Me.format=Me.internalformat=Ca[Me.channels]):be&&ge&&de(Me.channels===su[Me.format],"number of channels inconsistent with specified format")}}function Kr(Me){ae.pixelStorei(ou,Me.flipY),ae.pixelStorei(m0,Me.premultiplyAlpha),ae.pixelStorei(xS,Me.colorSpace),ae.pixelStorei(sg,Me.unpackAlignment)}function Un(){Vt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function fn(Me,St){var vt=null;if(Qh(St)?vt=St:St&&(de.type(St,"object","invalid pixel data type"),vr(Me,St),"x"in St&&(Me.xOffset=St.x|0),"y"in St&&(Me.yOffset=St.y|0),Qh(St.data)&&(vt=St.data)),de(!Me.compressed||vt instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),St.copy){de(!vt,"can not specify copy and data field for the same texture");var Nn=Ct.viewportWidth,_i=Ct.viewportHeight;Me.width=Me.width||Nn-Me.xOffset,Me.height=Me.height||_i-Me.yOffset,Me.needsCopy=!0,de(Me.xOffset>=0&&Me.xOffset<Nn&&Me.yOffset>=0&&Me.yOffset<_i&&Me.width>0&&Me.width<=Nn&&Me.height>0&&Me.height<=_i,"copy texture read out of bounds")}else if(!vt)Me.width=Me.width||1,Me.height=Me.height||1,Me.channels=Me.channels||4;else if(n(vt))Me.channels=Me.channels||4,Me.data=vt,!("type"in St)&&Me.type===Xh&&(Me.type=dg(vt));else if(a1(vt))Me.channels=Me.channels||4,_0(Me,vt),Me.alignment=1,Me.needsFree=!0;else if(he(vt)){var Ia=vt.data;!Array.isArray(Ia)&&Me.type===Xh&&(Me.type=dg(Ia));var ge=vt.shape,be=vt.stride,Ie,gt,yt,je,qe,Ke;ge.length===3?(yt=ge[2],Ke=be[2]):(de(ge.length===2,"invalid ndarray pixel data, must be 2 or 3D"),yt=1,Ke=1),Ie=ge[0],gt=ge[1],je=be[0],qe=be[1],Me.alignment=1,Me.width=Ie,Me.height=gt,Me.channels=yt,Me.format=Me.internalformat=Ca[yt],Me.needsFree=!0,cu(Me,Ia,je,qe,Ke,vt.offset)}else if(Ob(vt)||El(vt)||Kh(vt))Ob(vt)||El(vt)?Me.element=vt:Me.element=vt.canvas,Me.width=Me.element.width,Me.height=Me.element.height,Me.channels=4;else if(Uu(vt))Me.element=vt,Me.width=vt.width,Me.height=vt.height,Me.channels=4;else if(SS(vt))Me.element=vt,Me.width=vt.naturalWidth,Me.height=vt.naturalHeight,Me.channels=4;else if(o1(vt))Me.element=vt,Me.width=vt.videoWidth,Me.height=vt.videoHeight,Me.channels=4;else if(bv(vt)){var Ne=Me.width||vt[0].length,Ue=Me.height||vt.length,xe=Me.channels;Ko(vt[0][0])?xe=xe||vt[0][0].length:xe=xe||1;for(var Ye=Fe.shape(vt),ht=1,Dt=0;Dt<Ye.length;++Dt)ht*=Ye[Dt];var Kt=Ev(Me,ht);Fe.flatten(vt,Ye,"",Kt),Cb(Me,Kt),Me.alignment=1,Me.width=Ne,Me.height=Ue,Me.channels=xe,Me.format=Me.internalformat=Ca[xe],Me.needsFree=!0}Me.type===g0?de(De.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):Me.type===Xd&&de(De.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Ht(Me,St,vt){var Nn=Me.element,_i=Me.data,Ia=Me.internalformat,ge=Me.format,be=Me.type,Ie=Me.width,gt=Me.height;Kr(Me),Nn?ae.texImage2D(St,vt,ge,ge,be,Nn):Me.compressed?ae.compressedTexImage2D(St,vt,Ia,Ie,gt,0,_i):Me.needsCopy?(ut(),ae.copyTexImage2D(St,vt,ge,Me.xOffset,Me.yOffset,Ie,gt,0)):ae.texImage2D(St,vt,ge,Ie,gt,0,ge,be,_i||null)}function qr(Me,St,vt,Nn,_i){var Ia=Me.element,ge=Me.data,be=Me.internalformat,Ie=Me.format,gt=Me.type,yt=Me.width,je=Me.height;Kr(Me),Ia?ae.texSubImage2D(St,_i,vt,Nn,Ie,gt,Ia):Me.compressed?ae.compressedTexSubImage2D(St,_i,vt,Nn,be,yt,je,ge):Me.needsCopy?(ut(),ae.copyTexSubImage2D(St,_i,vt,Nn,Me.xOffset,Me.yOffset,yt,je)):ae.texSubImage2D(St,_i,vt,Nn,yt,je,Ie,gt,ge)}var ki=[];function pr(){return ki.pop()||new Un}function ni(Me){Me.needsFree&&_t.freeType(Me.data),Un.call(Me),ki.push(Me)}function Qr(){Vt.call(this),this.genMipmaps=!1,this.mipmapHint=Zi,this.mipmask=0,this.images=Array(16)}function ui(Me,St,vt){var Nn=Me.images[0]=pr();Me.mipmask=1,Nn.width=Me.width=St,Nn.height=Me.height=vt,Nn.channels=Me.channels=4}function zi(Me,St){var vt=null;if(Qh(St))vt=Me.images[0]=pr(),Dn(vt,Me),fn(vt,St),Me.mipmask=1;else if(vr(Me,St),Array.isArray(St.mipmap))for(var Nn=St.mipmap,_i=0;_i<Nn.length;++_i)vt=Me.images[_i]=pr(),Dn(vt,Me),vt.width>>=_i,vt.height>>=_i,fn(vt,Nn[_i]),Me.mipmask|=1<<_i;else vt=Me.images[0]=pr(),Dn(vt,Me),fn(vt,St),Me.mipmask=1;Dn(Me,Me.images[0]),Me.compressed&&(Me.internalformat===h0||Me.internalformat===ag||Me.internalformat===og||Me.internalformat===Sb)&&de(Me.width%4===0&&Me.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function xo(Me,St){for(var vt=Me.images,Nn=0;Nn<vt.length;++Nn){if(!vt[Nn])return;Ht(vt[Nn],St,Nn)}}var yi=[];function Oi(){var Me=yi.pop()||new Qr;Vt.call(Me),Me.mipmask=0;for(var St=0;St<16;++St)Me.images[St]=null;return Me}function Lo(Me){for(var St=Me.images,vt=0;vt<St.length;++vt)St[vt]&&ni(St[vt]),St[vt]=null;yi.push(Me)}function Ba(){this.minFilter=v0,this.magFilter=v0,this.wrapS=n1,this.wrapT=n1,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Zi}function fo(Me,St){if("min"in St){var vt=St.min;de.parameter(vt,yn),Me.minFilter=yn[vt],i1.indexOf(Me.minFilter)>=0&&!("faces"in St)&&(Me.genMipmaps=!0)}if("mag"in St){var Nn=St.mag;de.parameter(Nn,Pn),Me.magFilter=Pn[Nn]}var _i=Me.wrapS,Ia=Me.wrapT;if("wrap"in St){var ge=St.wrap;typeof ge=="string"?(de.parameter(ge,cn),_i=Ia=cn[ge]):Array.isArray(ge)&&(de.parameter(ge[0],cn),de.parameter(ge[1],cn),_i=cn[ge[0]],Ia=cn[ge[1]])}else{if("wrapS"in St){var be=St.wrapS;de.parameter(be,cn),_i=cn[be]}if("wrapT"in St){var Ie=St.wrapT;de.parameter(Ie,cn),Ia=cn[Ie]}}if(Me.wrapS=_i,Me.wrapT=Ia,"anisotropic"in St){var gt=St.anisotropic;de(typeof gt=="number"&&gt>=1&&gt<=De.maxAnisotropic,"aniso samples must be between 1 and "),Me.anisotropic=St.anisotropic}if("mipmap"in St){var yt=!1;switch(typeof St.mipmap){case"string":de.parameter(St.mipmap,dn,"invalid mipmap hint"),Me.mipmapHint=dn[St.mipmap],Me.genMipmaps=!0,yt=!0;break;case"boolean":yt=Me.genMipmaps=St.mipmap;break;case"object":de(Array.isArray(St.mipmap),"invalid mipmap type"),Me.genMipmaps=!1,yt=!0;break;default:de.raise("invalid mipmap type")}yt&&!("min"in St)&&(Me.minFilter=lt)}}function Ja(Me,St){ae.texParameteri(St,ES,Me.minFilter),ae.texParameteri(St,bS,Me.magFilter),ae.texParameteri(St,mv,Me.wrapS),ae.texParameteri(St,os,Me.wrapT),Ee.ext_texture_filter_anisotropic&&ae.texParameteri(St,r1,Me.anisotropic),Me.genMipmaps&&(ae.hint(wi,Me.mipmapHint),ae.generateMipmap(St))}var ko=0,As={},$a=De.maxTextureUnits,fa=Array($a).map(function(){return null});function li(Me){Vt.call(this),this.mipmask=0,this.internalformat=nh,this.id=ko++,this.refCount=1,this.target=Me,this.texture=ae.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Ba,Pt.profile&&(this.stats={size:0})}function ws(Me){ae.activeTexture(cg),ae.bindTexture(Me.target,Me.texture)}function oa(){var Me=fa[0];Me?ae.bindTexture(Me.target,Me.texture):ae.bindTexture(Vh,null)}function kr(Me){var St=Me.texture;de(St,"must not double destroy texture");var vt=Me.unit,Nn=Me.target;vt>=0&&(ae.activeTexture(cg+vt),ae.bindTexture(Nn,null),fa[vt]=null),ae.deleteTexture(St),Me.texture=null,Me.params=null,Me.pixels=null,Me.refCount=0,delete As[Me.id],Qe.textureCount--}r(li.prototype,{bind:function(){var Me=this;Me.bindCount+=1;var St=Me.unit;if(St<0){for(var vt=0;vt<$a;++vt){var Nn=fa[vt];if(Nn){if(Nn.bindCount>0)continue;Nn.unit=-1}fa[vt]=Me,St=vt;break}St>=$a&&de.raise("insufficient number of texture units"),Pt.profile&&Qe.maxTextureUnits<St+1&&(Qe.maxTextureUnits=St+1),Me.unit=St,ae.activeTexture(cg+St),ae.bindTexture(Me.target,Me.texture)}return St},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&kr(this)}});function vi(Me,St){var vt=new li(Vh);As[vt.id]=vt,Qe.textureCount++;function Nn(ge,be){var Ie=vt.texInfo;Ba.call(Ie);var gt=Oi();return typeof ge=="number"?typeof be=="number"?ui(gt,ge|0,be|0):ui(gt,ge|0,ge|0):ge?(de.type(ge,"object","invalid arguments to regl.texture"),fo(Ie,ge),zi(gt,ge)):ui(gt,1,1),Ie.genMipmaps&&(gt.mipmask=(gt.width<<1)-1),vt.mipmask=gt.mipmask,Dn(vt,gt),de.texture2D(Ie,gt,De),vt.internalformat=gt.internalformat,Nn.width=gt.width,Nn.height=gt.height,ws(vt),xo(gt,Vh),Ja(Ie,Vh),oa(),Lo(gt),Pt.profile&&(vt.stats.size=Jh(vt.internalformat,vt.type,gt.width,gt.height,Ie.genMipmaps,!1)),Nn.format=gn[vt.internalformat],Nn.type=zn[vt.type],Nn.mag=Xt[Ie.magFilter],Nn.min=Zn[Ie.minFilter],Nn.wrapS=sn[Ie.wrapS],Nn.wrapT=sn[Ie.wrapT],Nn}function _i(ge,be,Ie,gt){de(!!ge,"must specify image data");var yt=be|0,je=Ie|0,qe=gt|0,Ke=pr();return Dn(Ke,vt),Ke.width=0,Ke.height=0,fn(Ke,ge),Ke.width=Ke.width||(vt.width>>qe)-yt,Ke.height=Ke.height||(vt.height>>qe)-je,de(vt.type===Ke.type&&vt.format===Ke.format&&vt.internalformat===Ke.internalformat,"incompatible format for texture.subimage"),de(yt>=0&&je>=0&&yt+Ke.width<=vt.width&&je+Ke.height<=vt.height,"texture.subimage write out of bounds"),de(vt.mipmask&1<<qe,"missing mipmap data"),de(Ke.data||Ke.element||Ke.needsCopy,"missing image data"),ws(vt),qr(Ke,Vh,yt,je,qe),oa(),ni(Ke),Nn}function Ia(ge,be){var Ie=ge|0,gt=be|0||Ie;if(Ie===vt.width&&gt===vt.height)return Nn;Nn.width=vt.width=Ie,Nn.height=vt.height=gt,ws(vt);for(var yt=0;vt.mipmask>>yt;++yt){var je=Ie>>yt,qe=gt>>yt;if(!je||!qe)break;ae.texImage2D(Vh,yt,vt.format,je,qe,0,vt.format,vt.type,null)}return oa(),Pt.profile&&(vt.stats.size=Jh(vt.internalformat,vt.type,Ie,gt,!1,!1)),Nn}return Nn(Me,St),Nn.subimage=_i,Nn.resize=Ia,Nn._reglType="texture2d",Nn._texture=vt,Pt.profile&&(Nn.stats=vt.stats),Nn.destroy=function(){vt.decRef()},Nn}function Di(Me,St,vt,Nn,_i,Ia){var ge=new li(vS);As[ge.id]=ge,Qe.cubeCount++;var be=new Array(6);function Ie(je,qe,Ke,Ne,Ue,xe){var Ye,ht=ge.texInfo;for(Ba.call(ht),Ye=0;Ye<6;++Ye)be[Ye]=Oi();if(typeof je=="number"||!je){var Dt=je|0||1;for(Ye=0;Ye<6;++Ye)ui(be[Ye],Dt,Dt)}else if(typeof je=="object")if(qe)zi(be[0],je),zi(be[1],qe),zi(be[2],Ke),zi(be[3],Ne),zi(be[4],Ue),zi(be[5],xe);else if(fo(ht,je),vr(ge,je),"faces"in je){var Kt=je.faces;for(de(Array.isArray(Kt)&&Kt.length===6,"cube faces must be a length 6 array"),Ye=0;Ye<6;++Ye)de(typeof Kt[Ye]=="object"&&!!Kt[Ye],"invalid input for cube map face"),Dn(be[Ye],ge),zi(be[Ye],Kt[Ye])}else for(Ye=0;Ye<6;++Ye)zi(be[Ye],je);else de.raise("invalid arguments to cube map");for(Dn(ge,be[0]),De.npotTextureCube||de(Xy(ge.width)&&Xy(ge.height),"your browser does not support non power or two texture dimensions"),ht.genMipmaps?ge.mipmask=(be[0].width<<1)-1:ge.mipmask=be[0].mipmask,de.textureCube(ge,ht,be,De),ge.internalformat=be[0].internalformat,Ie.width=be[0].width,Ie.height=be[0].height,ws(ge),Ye=0;Ye<6;++Ye)xo(be[Ye],c0+Ye);for(Ja(ht,vS),oa(),Pt.profile&&(ge.stats.size=Jh(ge.internalformat,ge.type,Ie.width,Ie.height,ht.genMipmaps,!0)),Ie.format=gn[ge.internalformat],Ie.type=zn[ge.type],Ie.mag=Xt[ht.magFilter],Ie.min=Zn[ht.minFilter],Ie.wrapS=sn[ht.wrapS],Ie.wrapT=sn[ht.wrapT],Ye=0;Ye<6;++Ye)Lo(be[Ye]);return Ie}function gt(je,qe,Ke,Ne,Ue){de(!!qe,"must specify image data"),de(typeof je=="number"&&je===(je|0)&&je>=0&&je<6,"invalid face");var xe=Ke|0,Ye=Ne|0,ht=Ue|0,Dt=pr();return Dn(Dt,ge),Dt.width=0,Dt.height=0,fn(Dt,qe),Dt.width=Dt.width||(ge.width>>ht)-xe,Dt.height=Dt.height||(ge.height>>ht)-Ye,de(ge.type===Dt.type&&ge.format===Dt.format&&ge.internalformat===Dt.internalformat,"incompatible format for texture.subimage"),de(xe>=0&&Ye>=0&&xe+Dt.width<=ge.width&&Ye+Dt.height<=ge.height,"texture.subimage write out of bounds"),de(ge.mipmask&1<<ht,"missing mipmap data"),de(Dt.data||Dt.element||Dt.needsCopy,"missing image data"),ws(ge),qr(Dt,c0+je,xe,Ye,ht),oa(),ni(Dt),Ie}function yt(je){var qe=je|0;if(qe!==ge.width){Ie.width=ge.width=qe,Ie.height=ge.height=qe,ws(ge);for(var Ke=0;Ke<6;++Ke)for(var Ne=0;ge.mipmask>>Ne;++Ne)ae.texImage2D(c0+Ke,Ne,ge.format,qe>>Ne,qe>>Ne,0,ge.format,ge.type,null);return oa(),Pt.profile&&(ge.stats.size=Jh(ge.internalformat,ge.type,Ie.width,Ie.height,!1,!0)),Ie}}return Ie(Me,St,vt,Nn,_i,Ia),Ie.subimage=gt,Ie.resize=yt,Ie._reglType="textureCube",Ie._texture=ge,Pt.profile&&(Ie.stats=ge.stats),Ie.destroy=function(){ge.decRef()},Ie}function Jo(){for(var Me=0;Me<$a;++Me)ae.activeTexture(cg+Me),ae.bindTexture(Vh,null),fa[Me]=null;Te(As).forEach(kr),Qe.cubeCount=0,Qe.textureCount=0}Pt.profile&&(Qe.getTotalTextureSize=function(){var Me=0;return Object.keys(As).forEach(function(St){Me+=As[St].stats.size}),Me});function Al(){for(var Me=0;Me<$a;++Me){var St=fa[Me];St&&(St.bindCount=0,St.unit=-1,fa[Me]=null)}Te(As).forEach(function(vt){vt.texture=ae.createTexture(),ae.bindTexture(vt.target,vt.texture);for(var Nn=0;Nn<32;++Nn)if((vt.mipmask&1<<Nn)!==0)if(vt.target===Vh)ae.texImage2D(Vh,Nn,vt.internalformat,vt.width>>Nn,vt.height>>Nn,0,vt.internalformat,vt.type,null);else for(var _i=0;_i<6;++_i)ae.texImage2D(c0+_i,Nn,vt.internalformat,vt.width>>Nn,vt.height>>Nn,0,vt.internalformat,vt.type,null);Ja(vt.texInfo,vt.target)})}return{create2D:vi,createCube:Di,clear:Jo,getTexture:function(Me){return null},restore:Al}}var Qa=36161,ss=32854,uu=32855,fu=36194,ih=33189,vf=36168,hu=34041,Dc=35907,b0=34836,ed=34842,Zd=34843,Jl=[];Jl[ss]=2,Jl[uu]=2,Jl[fu]=2,Jl[ih]=2,Jl[vf]=1,Jl[hu]=4,Jl[Dc]=4,Jl[b0]=16,Jl[ed]=8,Jl[Zd]=6;function xs(ae,Ee,De){return Jl[ae]*Ee*De}var za=function(ae,Ee,De,ut,Ct){var Qe={rgba4:ss,rgb565:fu,"rgb5 a1":uu,depth:ih,stencil:vf,"depth stencil":hu};Ee.ext_srgb&&(Qe.srgba=Dc),Ee.ext_color_buffer_half_float&&(Qe.rgba16f=ed,Qe.rgb16f=Zd),Ee.webgl_color_buffer_float&&(Qe.rgba32f=b0);var Pt=[];Object.keys(Qe).forEach(function(un){var Tn=Qe[un];Pt[Tn]=un});var dn=0,cn={};function Pn(un){this.id=dn++,this.refCount=1,this.renderbuffer=un,this.format=ss,this.width=0,this.height=0,Ct.profile&&(this.stats={size:0})}Pn.prototype.decRef=function(){--this.refCount<=0&&yn(this)};function yn(un){var Tn=un.renderbuffer;de(Tn,"must not double destroy renderbuffer"),ae.bindRenderbuffer(Qa,null),ae.deleteRenderbuffer(Tn),un.renderbuffer=null,un.refCount=0,delete cn[un.id],ut.renderbufferCount--}function En(un,Tn){var ot=new Pn(ae.createRenderbuffer());cn[ot.id]=ot,ut.renderbufferCount++;function wt(zn,Xt){var Zn=0,sn=0,Mn=ss;if(typeof zn=="object"&&zn){var Vt=zn;if("shape"in Vt){var Dn=Vt.shape;de(Array.isArray(Dn)&&Dn.length>=2,"invalid renderbuffer shape"),Zn=Dn[0]|0,sn=Dn[1]|0}else"radius"in Vt&&(Zn=sn=Vt.radius|0),"width"in Vt&&(Zn=Vt.width|0),"height"in Vt&&(sn=Vt.height|0);"format"in Vt&&(de.parameter(Vt.format,Qe,"invalid renderbuffer format"),Mn=Qe[Vt.format])}else typeof zn=="number"?(Zn=zn|0,typeof Xt=="number"?sn=Xt|0:sn=Zn):zn?de.raise("invalid arguments to renderbuffer constructor"):Zn=sn=1;if(de(Zn>0&&sn>0&&Zn<=De.maxRenderbufferSize&&sn<=De.maxRenderbufferSize,"invalid renderbuffer size"),!(Zn===ot.width&&sn===ot.height&&Mn===ot.format))return wt.width=ot.width=Zn,wt.height=ot.height=sn,ot.format=Mn,ae.bindRenderbuffer(Qa,ot.renderbuffer),ae.renderbufferStorage(Qa,Mn,Zn,sn),de(ae.getError()===0,"invalid render buffer format"),Ct.profile&&(ot.stats.size=xs(ot.format,ot.width,ot.height)),wt.format=Pt[ot.format],wt}function gn(zn,Xt){var Zn=zn|0,sn=Xt|0||Zn;return Zn===ot.width&&sn===ot.height||(de(Zn>0&&sn>0&&Zn<=De.maxRenderbufferSize&&sn<=De.maxRenderbufferSize,"invalid renderbuffer size"),wt.width=ot.width=Zn,wt.height=ot.height=sn,ae.bindRenderbuffer(Qa,ot.renderbuffer),ae.renderbufferStorage(Qa,ot.format,Zn,sn),de(ae.getError()===0,"invalid render buffer format"),Ct.profile&&(ot.stats.size=xs(ot.format,ot.width,ot.height))),wt}return wt(un,Tn),wt.resize=gn,wt._reglType="renderbuffer",wt._renderbuffer=ot,Ct.profile&&(wt.stats=ot.stats),wt.destroy=function(){ot.decRef()},wt}Ct.profile&&(ut.getTotalRenderbufferSize=function(){var un=0;return Object.keys(cn).forEach(function(Tn){un+=cn[Tn].stats.size}),un});function pn(){Te(cn).forEach(function(un){un.renderbuffer=ae.createRenderbuffer(),ae.bindRenderbuffer(Qa,un.renderbuffer),ae.renderbufferStorage(Qa,un.format,un.width,un.height)}),ae.bindRenderbuffer(Qa,null)}return{create:En,clear:function(){Te(cn).forEach(yn)},restore:pn}},Li=36160,ah=36161,xl=3553,Sv=34069,td=36064,Tv=36096,pg=36128,Kd=33306,ye=36053,Qd=36054,Jd=36055,Bc=36057,Ui=36061,nd=36193,ep=5121,rd=5126,oh=6407,s1=6408,Av=6402,l1=[oh,s1],id=[];id[s1]=4,id[oh]=3;var zs=[];zs[ep]=1,zs[rd]=4,zs[nd]=2;var ju=32854,TS=32855,uO=36194,fO=33189,hO=36168,Ss=34041,mf=35907,E0=34836,x0=34842,Rb=34843,wv=[ju,TS,uO,mf,x0,Rb,E0],yf={};yf[ye]="complete",yf[Qd]="incomplete attachment",yf[Bc]="incomplete dimensions",yf[Jd]="incomplete, missing attachment",yf[Ui]="unsupported";function gg(ae,Ee,De,ut,Ct,Qe){var Pt={cur:null,next:null,dirty:!1,setFBO:null},dn=["rgba"],cn=["rgba4","rgb565","rgb5 a1"];Ee.ext_srgb&&cn.push("srgba"),Ee.ext_color_buffer_half_float&&cn.push("rgba16f","rgb16f"),Ee.webgl_color_buffer_float&&cn.push("rgba32f");var Pn=["uint8"];Ee.oes_texture_half_float&&Pn.push("half float","float16"),Ee.oes_texture_float&&Pn.push("float","float32");function yn(Un,fn,Ht){this.target=Un,this.texture=fn,this.renderbuffer=Ht;var qr=0,ki=0;fn?(qr=fn.width,ki=fn.height):Ht&&(qr=Ht.width,ki=Ht.height),this.width=qr,this.height=ki}function En(Un){Un&&(Un.texture&&Un.texture._texture.decRef(),Un.renderbuffer&&Un.renderbuffer._renderbuffer.decRef())}function pn(Un,fn,Ht){if(Un)if(Un.texture){var qr=Un.texture._texture,ki=Math.max(1,qr.width),pr=Math.max(1,qr.height);de(ki===fn&&pr===Ht,"inconsistent width/height for supplied texture"),qr.refCount+=1}else{var ni=Un.renderbuffer._renderbuffer;de(ni.width===fn&&ni.height===Ht,"inconsistent width/height for renderbuffer"),ni.refCount+=1}}function un(Un,fn){fn&&(fn.texture?ae.framebufferTexture2D(Li,Un,fn.target,fn.texture._texture.texture,0):ae.framebufferRenderbuffer(Li,Un,ah,fn.renderbuffer._renderbuffer.renderbuffer))}function Tn(Un){var fn=xl,Ht=null,qr=null,ki=Un;typeof Un=="object"&&(ki=Un.data,"target"in Un&&(fn=Un.target|0)),de.type(ki,"function","invalid attachment data");var pr=ki._reglType;return pr==="texture2d"?(Ht=ki,de(fn===xl)):pr==="textureCube"?(Ht=ki,de(fn>=Sv&&fn<Sv+6,"invalid cube map target")):pr==="renderbuffer"?(qr=ki,fn=ah):de.raise("invalid regl object for attachment"),new yn(fn,Ht,qr)}function ot(Un,fn,Ht,qr,ki){if(Ht){var pr=ut.create2D({width:Un,height:fn,format:qr,type:ki});return pr._texture.refCount=0,new yn(xl,pr,null)}else{var ni=Ct.create({width:Un,height:fn,format:qr});return ni._renderbuffer.refCount=0,new yn(ah,null,ni)}}function wt(Un){return Un&&(Un.texture||Un.renderbuffer)}function gn(Un,fn,Ht){Un&&(Un.texture?Un.texture.resize(fn,Ht):Un.renderbuffer&&Un.renderbuffer.resize(fn,Ht),Un.width=fn,Un.height=Ht)}var zn=0,Xt={};function Zn(){this.id=zn++,Xt[this.id]=this,this.framebuffer=ae.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function sn(Un){Un.colorAttachments.forEach(En),En(Un.depthAttachment),En(Un.stencilAttachment),En(Un.depthStencilAttachment)}function Mn(Un){var fn=Un.framebuffer;de(fn,"must not double destroy framebuffer"),ae.deleteFramebuffer(fn),Un.framebuffer=null,Qe.framebufferCount--,delete Xt[Un.id]}function Vt(Un){var fn;ae.bindFramebuffer(Li,Un.framebuffer);var Ht=Un.colorAttachments;for(fn=0;fn<Ht.length;++fn)un(td+fn,Ht[fn]);for(fn=Ht.length;fn<De.maxColorAttachments;++fn)ae.framebufferTexture2D(Li,td+fn,xl,null,0);ae.framebufferTexture2D(Li,Kd,xl,null,0),ae.framebufferTexture2D(Li,Tv,xl,null,0),ae.framebufferTexture2D(Li,pg,xl,null,0),un(Tv,Un.depthAttachment),un(pg,Un.stencilAttachment),un(Kd,Un.depthStencilAttachment);var qr=ae.checkFramebufferStatus(Li);!ae.isContextLost()&&qr!==ye&&de.raise("framebuffer configuration not supported, status = "+yf[qr]),ae.bindFramebuffer(Li,Pt.next?Pt.next.framebuffer:null),Pt.cur=Pt.next,ae.getError()}function Dn(Un,fn){var Ht=new Zn;Qe.framebufferCount++;function qr(pr,ni){var Qr;de(Pt.next!==Ht,"can not update framebuffer which is currently in use");var ui=0,zi=0,xo=!0,yi=!0,Oi=null,Lo=!0,Ba="rgba",fo="uint8",Ja=1,ko=null,As=null,$a=null,fa=!1;if(typeof pr=="number")ui=pr|0,zi=ni|0||ui;else if(!pr)ui=zi=1;else{de.type(pr,"object","invalid arguments for framebuffer");var li=pr;if("shape"in li){var ws=li.shape;de(Array.isArray(ws)&&ws.length>=2,"invalid shape for framebuffer"),ui=ws[0],zi=ws[1]}else"radius"in li&&(ui=zi=li.radius),"width"in li&&(ui=li.width),"height"in li&&(zi=li.height);("color"in li||"colors"in li)&&(Oi=li.color||li.colors,Array.isArray(Oi)&&de(Oi.length===1||Ee.webgl_draw_buffers,"multiple render targets not supported")),Oi||("colorCount"in li&&(Ja=li.colorCount|0,de(Ja>0,"invalid color buffer count")),"colorTexture"in li&&(Lo=!!li.colorTexture,Ba="rgba4"),"colorType"in li&&(fo=li.colorType,Lo?(de(Ee.oes_texture_float||!(fo==="float"||fo==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),de(Ee.oes_texture_half_float||!(fo==="half float"||fo==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):fo==="half float"||fo==="float16"?(de(Ee.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Ba="rgba16f"):(fo==="float"||fo==="float32")&&(de(Ee.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Ba="rgba32f"),de.oneOf(fo,Pn,"invalid color type")),"colorFormat"in li&&(Ba=li.colorFormat,dn.indexOf(Ba)>=0?Lo=!0:cn.indexOf(Ba)>=0?Lo=!1:Lo?de.oneOf(li.colorFormat,dn,"invalid color format for texture"):de.oneOf(li.colorFormat,cn,"invalid color format for renderbuffer"))),("depthTexture"in li||"depthStencilTexture"in li)&&(fa=!!(li.depthTexture||li.depthStencilTexture),de(!fa||Ee.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in li&&(typeof li.depth=="boolean"?xo=li.depth:(ko=li.depth,yi=!1)),"stencil"in li&&(typeof li.stencil=="boolean"?yi=li.stencil:(As=li.stencil,xo=!1)),"depthStencil"in li&&(typeof li.depthStencil=="boolean"?xo=yi=li.depthStencil:($a=li.depthStencil,xo=!1,yi=!1))}var oa=null,kr=null,vi=null,Di=null;if(Array.isArray(Oi))oa=Oi.map(Tn);else if(Oi)oa=[Tn(Oi)];else for(oa=new Array(Ja),Qr=0;Qr<Ja;++Qr)oa[Qr]=ot(ui,zi,Lo,Ba,fo);de(Ee.webgl_draw_buffers||oa.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),de(oa.length<=De.maxColorAttachments,"too many color attachments, not supported"),ui=ui||oa[0].width,zi=zi||oa[0].height,ko?kr=Tn(ko):xo&&!yi&&(kr=ot(ui,zi,fa,"depth","uint32")),As?vi=Tn(As):yi&&!xo&&(vi=ot(ui,zi,!1,"stencil","uint8")),$a?Di=Tn($a):!ko&&!As&&yi&&xo&&(Di=ot(ui,zi,fa,"depth stencil","depth stencil")),de(!!ko+!!As+!!$a<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Jo=null;for(Qr=0;Qr<oa.length;++Qr)if(pn(oa[Qr],ui,zi),de(!oa[Qr]||oa[Qr].texture&&l1.indexOf(oa[Qr].texture._texture.format)>=0||oa[Qr].renderbuffer&&wv.indexOf(oa[Qr].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Qr+" is invalid"),oa[Qr]&&oa[Qr].texture){var Al=id[oa[Qr].texture._texture.format]*zs[oa[Qr].texture._texture.type];Jo===null?Jo=Al:de(Jo===Al,"all color attachments much have the same number of bits per pixel.")}return pn(kr,ui,zi),de(!kr||kr.texture&&kr.texture._texture.format===Av||kr.renderbuffer&&kr.renderbuffer._renderbuffer.format===fO,"invalid depth attachment for framebuffer object"),pn(vi,ui,zi),de(!vi||vi.renderbuffer&&vi.renderbuffer._renderbuffer.format===hO,"invalid stencil attachment for framebuffer object"),pn(Di,ui,zi),de(!Di||Di.texture&&Di.texture._texture.format===Ss||Di.renderbuffer&&Di.renderbuffer._renderbuffer.format===Ss,"invalid depth-stencil attachment for framebuffer object"),sn(Ht),Ht.width=ui,Ht.height=zi,Ht.colorAttachments=oa,Ht.depthAttachment=kr,Ht.stencilAttachment=vi,Ht.depthStencilAttachment=Di,qr.color=oa.map(wt),qr.depth=wt(kr),qr.stencil=wt(vi),qr.depthStencil=wt(Di),qr.width=Ht.width,qr.height=Ht.height,Vt(Ht),qr}function ki(pr,ni){de(Pt.next!==Ht,"can not resize a framebuffer which is currently in use");var Qr=Math.max(pr|0,1),ui=Math.max(ni|0||Qr,1);if(Qr===Ht.width&&ui===Ht.height)return qr;for(var zi=Ht.colorAttachments,xo=0;xo<zi.length;++xo)gn(zi[xo],Qr,ui);return gn(Ht.depthAttachment,Qr,ui),gn(Ht.stencilAttachment,Qr,ui),gn(Ht.depthStencilAttachment,Qr,ui),Ht.width=qr.width=Qr,Ht.height=qr.height=ui,Vt(Ht),qr}return qr(Un,fn),r(qr,{resize:ki,_reglType:"framebuffer",_framebuffer:Ht,destroy:function(){Mn(Ht),sn(Ht)},use:function(pr){Pt.setFBO({framebuffer:qr},pr)}})}function vr(Un){var fn=Array(6);function Ht(ki){var pr;de(fn.indexOf(Pt.next)<0,"can not update framebuffer which is currently in use");var ni={color:null},Qr=0,ui=null,zi="rgba",xo="uint8",yi=1;if(typeof ki=="number")Qr=ki|0;else if(!ki)Qr=1;else{de.type(ki,"object","invalid arguments for framebuffer");var Oi=ki;if("shape"in Oi){var Lo=Oi.shape;de(Array.isArray(Lo)&&Lo.length>=2,"invalid shape for framebuffer"),de(Lo[0]===Lo[1],"cube framebuffer must be square"),Qr=Lo[0]}else"radius"in Oi&&(Qr=Oi.radius|0),"width"in Oi?(Qr=Oi.width|0,"height"in Oi&&de(Oi.height===Qr,"must be square")):"height"in Oi&&(Qr=Oi.height|0);("color"in Oi||"colors"in Oi)&&(ui=Oi.color||Oi.colors,Array.isArray(ui)&&de(ui.length===1||Ee.webgl_draw_buffers,"multiple render targets not supported")),ui||("colorCount"in Oi&&(yi=Oi.colorCount|0,de(yi>0,"invalid color buffer count")),"colorType"in Oi&&(de.oneOf(Oi.colorType,Pn,"invalid color type"),xo=Oi.colorType),"colorFormat"in Oi&&(zi=Oi.colorFormat,de.oneOf(Oi.colorFormat,dn,"invalid color format for texture"))),"depth"in Oi&&(ni.depth=Oi.depth),"stencil"in Oi&&(ni.stencil=Oi.stencil),"depthStencil"in Oi&&(ni.depthStencil=Oi.depthStencil)}var Ba;if(ui)if(Array.isArray(ui))for(Ba=[],pr=0;pr<ui.length;++pr)Ba[pr]=ui[pr];else Ba=[ui];else{Ba=Array(yi);var fo={radius:Qr,format:zi,type:xo};for(pr=0;pr<yi;++pr)Ba[pr]=ut.createCube(fo)}for(ni.color=Array(Ba.length),pr=0;pr<Ba.length;++pr){var Ja=Ba[pr];de(typeof Ja=="function"&&Ja._reglType==="textureCube","invalid cube map"),Qr=Qr||Ja.width,de(Ja.width===Qr&&Ja.height===Qr,"invalid cube map shape"),ni.color[pr]={target:Sv,data:Ba[pr]}}for(pr=0;pr<6;++pr){for(var ko=0;ko<Ba.length;++ko)ni.color[ko].target=Sv+pr;pr>0&&(ni.depth=fn[0].depth,ni.stencil=fn[0].stencil,ni.depthStencil=fn[0].depthStencil),fn[pr]?fn[pr](ni):fn[pr]=Dn(ni)}return r(Ht,{width:Qr,height:Qr,color:Ba})}function qr(ki){var pr,ni=ki|0;if(de(ni>0&&ni<=De.maxCubeMapSize,"invalid radius for cube fbo"),ni===Ht.width)return Ht;var Qr=Ht.color;for(pr=0;pr<Qr.length;++pr)Qr[pr].resize(ni);for(pr=0;pr<6;++pr)fn[pr].resize(ni);return Ht.width=Ht.height=ni,Ht}return Ht(Un),r(Ht,{faces:fn,resize:qr,_reglType:"framebufferCube",destroy:function(){fn.forEach(function(ki){ki.destroy()})}})}function Kr(){Pt.cur=null,Pt.next=null,Pt.dirty=!0,Te(Xt).forEach(function(Un){Un.framebuffer=ae.createFramebuffer(),Vt(Un)})}return r(Pt,{getFramebuffer:function(Un){if(typeof Un=="function"&&Un._reglType==="framebuffer"){var fn=Un._framebuffer;if(fn instanceof Zn)return fn}return null},create:Dn,createCube:vr,clear:function(){Te(Xt).forEach(Mn)},restore:Kr})}var AS=5126,wS=34962;function Fc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=AS,this.offset=0,this.stride=0,this.divisor=0}function vg(ae,Ee,De,ut,Ct){for(var Qe=De.maxAttributes,Pt=new Array(Qe),dn=0;dn<Qe;++dn)Pt[dn]=new Fc;var cn=0,Pn={},yn={Record:Fc,scope:{},state:Pt,currentVAO:null,targetVAO:null,restore:pn()?Xt:function(){},createVAO:Zn,getVAO:Tn,destroyBuffer:En,setVAO:pn()?ot:wt,clear:pn()?gn:function(){}};function En(sn){for(var Mn=0;Mn<Pt.length;++Mn){var Vt=Pt[Mn];Vt.buffer===sn&&(ae.disableVertexAttribArray(Mn),Vt.buffer=null)}}function pn(){return Ee.oes_vertex_array_object}function un(){return Ee.angle_instanced_arrays}function Tn(sn){return typeof sn=="function"&&sn._vao?sn._vao:null}function ot(sn){if(sn!==yn.currentVAO){var Mn=pn();sn?Mn.bindVertexArrayOES(sn.vao):Mn.bindVertexArrayOES(null),yn.currentVAO=sn}}function wt(sn){if(sn!==yn.currentVAO){if(sn)sn.bindAttrs();else for(var Mn=un(),Vt=0;Vt<Pt.length;++Vt){var Dn=Pt[Vt];Dn.buffer?(ae.enableVertexAttribArray(Vt),ae.vertexAttribPointer(Vt,Dn.size,Dn.type,Dn.normalized,Dn.stride,Dn.offfset),Mn&&Mn.vertexAttribDivisorANGLE(Vt,Dn.divisor)):(ae.disableVertexAttribArray(Vt),ae.vertexAttrib4f(Vt,Dn.x,Dn.y,Dn.z,Dn.w))}yn.currentVAO=sn}}function gn(){Te(Pn).forEach(function(sn){sn.destroy()})}function zn(){this.id=++cn,this.attributes=[];var sn=pn();sn?this.vao=sn.createVertexArrayOES():this.vao=null,Pn[this.id]=this,this.buffers=[]}zn.prototype.bindAttrs=function(){for(var sn=un(),Mn=this.attributes,Vt=0;Vt<Mn.length;++Vt){var Dn=Mn[Vt];Dn.buffer?(ae.enableVertexAttribArray(Vt),ae.bindBuffer(wS,Dn.buffer.buffer),ae.vertexAttribPointer(Vt,Dn.size,Dn.type,Dn.normalized,Dn.stride,Dn.offset),sn&&sn.vertexAttribDivisorANGLE(Vt,Dn.divisor)):(ae.disableVertexAttribArray(Vt),ae.vertexAttrib4f(Vt,Dn.x,Dn.y,Dn.z,Dn.w))}for(var vr=Mn.length;vr<Qe;++vr)ae.disableVertexAttribArray(vr)},zn.prototype.refresh=function(){var sn=pn();sn&&(sn.bindVertexArrayOES(this.vao),this.bindAttrs(),yn.currentVAO=this)},zn.prototype.destroy=function(){if(this.vao){var sn=pn();this===yn.currentVAO&&(yn.currentVAO=null,sn.bindVertexArrayOES(null)),sn.deleteVertexArrayOES(this.vao),this.vao=null}Pn[this.id]&&(delete Pn[this.id],ut.vaoCount-=1)};function Xt(){var sn=pn();sn&&Te(Pn).forEach(function(Mn){Mn.refresh()})}function Zn(sn){var Mn=new zn;ut.vaoCount+=1;function Vt(Dn){de(Array.isArray(Dn),"arguments to vertex array constructor must be an array"),de(Dn.length<Qe,"too many attributes"),de(Dn.length>0,"must specify at least one attribute");for(var vr=0;vr<Mn.buffers.length;++vr)Mn.buffers[vr].destroy();Mn.buffers.length=0;var Kr=Mn.attributes;Kr.length=Dn.length;for(var Un=0;Un<Dn.length;++Un){var fn=Dn[Un],Ht=Kr[Un]=new Fc;if(Array.isArray(fn)||n(fn)||he(fn)){var qr=Ct.create(fn,wS,!1,!0);Ht.buffer=Ct.getBuffer(qr),Ht.size=Ht.buffer.dimension|0,Ht.normalized=!1,Ht.type=Ht.buffer.dtype,Ht.offset=0,Ht.stride=0,Ht.divisor=0,Ht.state=1,Mn.buffers.push(qr)}else Ct.getBuffer(fn)?(Ht.buffer=Ct.getBuffer(fn),Ht.size=Ht.buffer.dimension|0,Ht.normalized=!1,Ht.type=Ht.buffer.dtype,Ht.offset=0,Ht.stride=0,Ht.divisor=0,Ht.state=1):Ct.getBuffer(fn.buffer)?(Ht.buffer=Ct.getBuffer(fn.buffer),Ht.size=(+fn.size||Ht.buffer.dimension)|0,Ht.normalized=!!fn.normalized||!1,"type"in fn?(de.parameter(fn.type,au,"invalid buffer type"),Ht.type=au[fn.type]):Ht.type=Ht.buffer.dtype,Ht.offset=(fn.offset||0)|0,Ht.stride=(fn.stride||0)|0,Ht.divisor=(fn.divisor||0)|0,Ht.state=1,de(Ht.size>=1&&Ht.size<=4,"size must be between 1 and 4"),de(Ht.offset>=0,"invalid offset"),de(Ht.stride>=0&&Ht.stride<=255,"stride must be between 0 and 255"),de(Ht.divisor>=0,"divisor must be positive"),de(!Ht.divisor||!!Ee.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in fn?(de(Un>0,"first attribute must not be a constant"),Ht.x=+fn.x||0,Ht.y=+fn.y||0,Ht.z=+fn.z||0,Ht.w=+fn.w||0,Ht.state=2):de(!1,"invalid attribute spec for location "+Un)}return Mn.refresh(),Vt}return Vt.destroy=function(){Mn.destroy()},Vt._vao=Mn,Vt._reglType="vao",Vt(sn)}return yn}var c1=35632,u1=35633,OS=35718,Ov=35721;function f1(ae,Ee,De,ut){var Ct={},Qe={};function Pt(ot,wt,gn,zn){this.name=ot,this.id=wt,this.location=gn,this.info=zn}function dn(ot,wt){for(var gn=0;gn<ot.length;++gn)if(ot[gn].id===wt.id){ot[gn].location=wt.location;return}ot.push(wt)}function cn(ot,wt,gn){var zn=ot===c1?Ct:Qe,Xt=zn[wt];if(!Xt){var Zn=Ee.str(wt);Xt=ae.createShader(ot),ae.shaderSource(Xt,Zn),ae.compileShader(Xt),de.shaderError(ae,Xt,Zn,ot,gn),zn[wt]=Xt}return Xt}var Pn={},yn=[],En=0;function pn(ot,wt){this.id=En++,this.fragId=ot,this.vertId=wt,this.program=null,this.uniforms=[],this.attributes=[],ut.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function un(ot,wt,gn){var zn,Xt,Zn=cn(c1,ot.fragId),sn=cn(u1,ot.vertId),Mn=ot.program=ae.createProgram();if(ae.attachShader(Mn,Zn),ae.attachShader(Mn,sn),gn)for(zn=0;zn<gn.length;++zn){var Vt=gn[zn];ae.bindAttribLocation(Mn,Vt[0],Vt[1])}ae.linkProgram(Mn),de.linkError(ae,Mn,Ee.str(ot.fragId),Ee.str(ot.vertId),wt);var Dn=ae.getProgramParameter(Mn,OS);ut.profile&&(ot.stats.uniformsCount=Dn);var vr=ot.uniforms;for(zn=0;zn<Dn;++zn)if(Xt=ae.getActiveUniform(Mn,zn),Xt)if(Xt.size>1)for(var Kr=0;Kr<Xt.size;++Kr){var Un=Xt.name.replace("[0]","["+Kr+"]");dn(vr,new Pt(Un,Ee.id(Un),ae.getUniformLocation(Mn,Un),Xt))}else dn(vr,new Pt(Xt.name,Ee.id(Xt.name),ae.getUniformLocation(Mn,Xt.name),Xt));var fn=ae.getProgramParameter(Mn,Ov);ut.profile&&(ot.stats.attributesCount=fn);var Ht=ot.attributes;for(zn=0;zn<fn;++zn)Xt=ae.getActiveAttrib(Mn,zn),Xt&&dn(Ht,new Pt(Xt.name,Ee.id(Xt.name),ae.getAttribLocation(Mn,Xt.name),Xt))}ut.profile&&(De.getMaxUniformsCount=function(){var ot=0;return yn.forEach(function(wt){wt.stats.uniformsCount>ot&&(ot=wt.stats.uniformsCount)}),ot},De.getMaxAttributesCount=function(){var ot=0;return yn.forEach(function(wt){wt.stats.attributesCount>ot&&(ot=wt.stats.attributesCount)}),ot});function Tn(){Ct={},Qe={};for(var ot=0;ot<yn.length;++ot)un(yn[ot],null,yn[ot].attributes.map(function(wt){return[wt.location,wt.name]}))}return{clear:function(){var ot=ae.deleteShader.bind(ae);Te(Ct).forEach(ot),Ct={},Te(Qe).forEach(ot),Qe={},yn.forEach(function(wt){ae.deleteProgram(wt.program)}),yn.length=0,Pn={},De.shaderCount=0},program:function(ot,wt,gn,zn){de.command(ot>=0,"missing vertex shader",gn),de.command(wt>=0,"missing fragment shader",gn);var Xt=Pn[wt];Xt||(Xt=Pn[wt]={});var Zn=Xt[ot];if(Zn&&!zn)return Zn;var sn=new pn(wt,ot);return De.shaderCount++,un(sn,gn,zn),Zn||(Xt[ot]=sn),yn.push(sn),sn},restore:Tn,shader:cn,frag:-1,vert:-1}}var S0=6408,tp=5121,CS=3333,mg=5126;function _f(ae,Ee,De,ut,Ct,Qe,Pt){function dn(yn){var En;Ee.next===null?(de(Ct.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),En=tp):(de(Ee.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),En=Ee.next.colorAttachments[0].texture._texture.type,Qe.oes_texture_float?(de(En===tp||En===mg,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),En===mg&&de(Pt.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):de(En===tp,"Reading from a framebuffer is only allowed for the type 'uint8'"));var pn=0,un=0,Tn=ut.framebufferWidth,ot=ut.framebufferHeight,wt=null;n(yn)?wt=yn:yn&&(de.type(yn,"object","invalid arguments to regl.read()"),pn=yn.x|0,un=yn.y|0,de(pn>=0&&pn<ut.framebufferWidth,"invalid x offset for regl.read"),de(un>=0&&un<ut.framebufferHeight,"invalid y offset for regl.read"),Tn=(yn.width||ut.framebufferWidth-pn)|0,ot=(yn.height||ut.framebufferHeight-un)|0,wt=yn.data||null),wt&&(En===tp?de(wt instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):En===mg&&de(wt instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),de(Tn>0&&Tn+pn<=ut.framebufferWidth,"invalid width for read pixels"),de(ot>0&&ot+un<=ut.framebufferHeight,"invalid height for read pixels"),De();var gn=Tn*ot*4;return wt||(En===tp?wt=new Uint8Array(gn):En===mg&&(wt=wt||new Float32Array(gn))),de.isTypedArray(wt,"data buffer for regl.read() must be a typedarray"),de(wt.byteLength>=gn,"data buffer for regl.read() too small"),ae.pixelStorei(CS,4),ae.readPixels(pn,un,Tn,ot,S0,En,wt),wt}function cn(yn){var En;return Ee.setFBO({framebuffer:yn.framebuffer},function(){En=dn(yn)}),En}function Pn(yn){return!yn||!("framebuffer"in yn)?dn(yn):cn(yn)}return Pn}function Sc(ae){return Array.prototype.slice.call(ae)}function yg(ae){return Sc(ae).join("")}function Mb(){var ae=0,Ee=[],De=[];function ut(En){for(var pn=0;pn<De.length;++pn)if(De[pn]===En)return Ee[pn];var un="g"+ae++;return Ee.push(un),De.push(En),un}function Ct(){var En=[];function pn(){En.push.apply(En,Sc(arguments))}var un=[];function Tn(){var ot="v"+ae++;return un.push(ot),arguments.length>0&&(En.push(ot,"="),En.push.apply(En,Sc(arguments)),En.push(";")),ot}return r(pn,{def:Tn,toString:function(){return yg([un.length>0?"var "+un.join(",")+";":"",yg(En)])}})}function Qe(){var En=Ct(),pn=Ct(),un=En.toString,Tn=pn.toString;function ot(wt,gn){pn(wt,gn,"=",En.def(wt,gn),";")}return r(function(){En.apply(En,Sc(arguments))},{def:En.def,entry:En,exit:pn,save:ot,set:function(wt,gn,zn){ot(wt,gn),En(wt,gn,"=",zn,";")},toString:function(){return un()+Tn()}})}function Pt(){var En=yg(arguments),pn=Qe(),un=Qe(),Tn=pn.toString,ot=un.toString;return r(pn,{then:function(){return pn.apply(pn,Sc(arguments)),this},else:function(){return un.apply(un,Sc(arguments)),this},toString:function(){var wt=ot();return wt&&(wt="else{"+wt+"}"),yg(["if(",En,"){",Tn(),"}",wt])}})}var dn=Ct(),cn={};function Pn(En,pn){var un=[];function Tn(){var Xt="a"+un.length;return un.push(Xt),Xt}pn=pn||0;for(var ot=0;ot<pn;++ot)Tn();var wt=Qe(),gn=wt.toString,zn=cn[En]=r(wt,{arg:Tn,toString:function(){return yg(["function(",un.join(),"){",gn(),"}"])}});return zn}function yn(){var En=['"use strict";',dn,"return {"];Object.keys(cn).forEach(function(Tn){En.push('"',Tn,'":',cn[Tn].toString(),",")}),En.push("}");var pn=yg(En).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),un=Function.apply(null,Ee.concat(pn));return un.apply(null,De)}return{global:dn,link:ut,block:Ct,proc:Pn,scope:Qe,cond:Pt,compile:yn}}var bf="xyzw".split(""),Uc=5121,Ef=1,du=2,ec=0,Pb=1,ad=2,h1=3,jc=4,xf="dither",T0="blend.enable",od="blend.color",pu="blend.equation",_g="blend.func",A0="depth.enable",$s="depth.func",np="depth.range",bg="depth.mask",gu="colorMask",w0="cull.enable",sh="cull.face",zu="frontFace",O0="lineWidth",Sl="polygonOffset.enable",Eg="polygonOffset.offset",zc="sample.alpha",vu="sample.enable",lh="sample.coverage",Cv="stencil.enable",Nb="stencil.mask",$c="stencil.func",tc="stencil.opFront",Io="stencil.opBack",C0="scissor.enable",nc="scissor.box",ci="viewport",Na="profile",no="framebuffer",sd="vert",ch="frag",mu="elements",uh="primitive",$u="count",Sf="offset",d1="instances",ro="vao",Rv="Width",Mv="Height",rp=no+Rv,fh=no+Mv,dO=ci+Rv,p1=ci+Mv,R0="drawingBuffer",g1=R0+Rv,Bl=R0+Mv,Ts=[_g,pu,$c,tc,Io,lh,ci,nc,Eg],Tf=34962,Pv=34963,Nv=35632,Ib=35633,Hu=3553,ji=34067,Lb=2884,kb=3042,Iv=3024,Db=2960,RS=2929,MS=3089,yu=32823,PS=32926,Lv=32928,kv=5126,M0=35664,Dv=35665,Fl=35666,Af=5124,ip=35667,Bv=35668,ap=35669,P0=35670,xg=35671,Fv=35672,Uv=35673,op=35674,Ul=35675,jv=35676,Tc=35678,ld=35680,v1=4,cd=1028,Sg=1029,Bb=2304,m1=2305,Fb=32775,Ub=32776,NS=519,wf=7680,y1=0,rc=1,_u=32774,IS=513,jb=36160,_1=36064,jl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},b1=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],sp={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},hh={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},E1={frag:Nv,vert:Ib},ud={cw:Bb,ccw:m1};function lp(ae){return Array.isArray(ae)||n(ae)||he(ae)}function LS(ae){return ae.sort(function(Ee,De){return Ee===ci?-1:De===ci?1:Ee<De?-1:1})}function Ac(ae,Ee,De,ut){this.thisDep=ae,this.contextDep=Ee,this.propDep=De,this.append=ut}function bu(ae){return ae&&!(ae.thisDep||ae.contextDep||ae.propDep)}function uo(ae){return new Ac(!1,!1,!1,ae)}function Tl(ae,Ee){var De=ae.type;if(De===ec){var ut=ae.data.length;return new Ac(!0,ut>=1,ut>=2,Ee)}else if(De===jc){var Ct=ae.data;return new Ac(Ct.thisDep,Ct.contextDep,Ct.propDep,Ee)}else return new Ac(De===h1,De===ad,De===Pb,Ee)}var zv=new Ac(!1,!1,!1,function(){});function x1(ae,Ee,De,ut,Ct,Qe,Pt,dn,cn,Pn,yn,En,pn,un,Tn){var ot=Pn.Record,wt={add:32774,subtract:32778,"reverse subtract":32779};De.ext_blend_minmax&&(wt.min=Fb,wt.max=Ub);var gn=De.angle_instanced_arrays,zn=De.webgl_draw_buffers,Xt={dirty:!0,profile:Tn.profile},Zn={},sn=[],Mn={},Vt={};function Dn(ge){return ge.replace(".","_")}function vr(ge,be,Ie){var gt=Dn(ge);sn.push(ge),Zn[gt]=Xt[gt]=!!Ie,Mn[gt]=be}function Kr(ge,be,Ie){var gt=Dn(ge);sn.push(ge),Array.isArray(Ie)?(Xt[gt]=Ie.slice(),Zn[gt]=Ie.slice()):Xt[gt]=Zn[gt]=Ie,Vt[gt]=be}vr(xf,Iv),vr(T0,kb),Kr(od,"blendColor",[0,0,0,0]),Kr(pu,"blendEquationSeparate",[_u,_u]),Kr(_g,"blendFuncSeparate",[rc,y1,rc,y1]),vr(A0,RS,!0),Kr($s,"depthFunc",IS),Kr(np,"depthRange",[0,1]),Kr(bg,"depthMask",!0),Kr(gu,gu,[!0,!0,!0,!0]),vr(w0,Lb),Kr(sh,"cullFace",Sg),Kr(zu,zu,m1),Kr(O0,O0,1),vr(Sl,yu),Kr(Eg,"polygonOffset",[0,0]),vr(zc,PS),vr(vu,Lv),Kr(lh,"sampleCoverage",[1,!1]),vr(Cv,Db),Kr(Nb,"stencilMask",-1),Kr($c,"stencilFunc",[NS,0,-1]),Kr(tc,"stencilOpSeparate",[cd,wf,wf,wf]),Kr(Io,"stencilOpSeparate",[Sg,wf,wf,wf]),vr(C0,MS),Kr(nc,"scissor",[0,0,ae.drawingBufferWidth,ae.drawingBufferHeight]),Kr(ci,ci,[0,0,ae.drawingBufferWidth,ae.drawingBufferHeight]);var Un={gl:ae,context:pn,strings:Ee,next:Zn,current:Xt,draw:En,elements:Qe,buffer:Ct,shader:yn,attributes:Pn.state,vao:Pn,uniforms:cn,framebuffer:dn,extensions:De,timer:un,isBufferArgs:lp},fn={primTypes:Dl,compareFuncs:sp,blendFuncs:jl,blendEquations:wt,stencilOps:hh,glTypes:au,orientationType:ud};de.optional(function(){Un.isArrayLike=Ko}),zn&&(fn.backBuffer=[Sg],fn.drawBuffer=F(ut.maxDrawbuffers,function(ge){return ge===0?[0]:F(ge,function(be){return _1+be})}));var Ht=0;function qr(){var ge=Mb(),be=ge.link,Ie=ge.global;ge.id=Ht++,ge.batchId="0";var gt=be(Un),yt=ge.shared={props:"a0"};Object.keys(Un).forEach(function(Ue){yt[Ue]=Ie.def(gt,".",Ue)}),de.optional(function(){ge.CHECK=be(de),ge.commandStr=de.guessCommand(),ge.command=be(ge.commandStr),ge.assert=function(Ue,xe,Ye){Ue("if(!(",xe,"))",this.CHECK,".commandRaise(",be(Ye),",",this.command,");")},fn.invalidBlendCombinations=b1});var je=ge.next={},qe=ge.current={};Object.keys(Vt).forEach(function(Ue){Array.isArray(Xt[Ue])&&(je[Ue]=Ie.def(yt.next,".",Ue),qe[Ue]=Ie.def(yt.current,".",Ue))});var Ke=ge.constants={};Object.keys(fn).forEach(function(Ue){Ke[Ue]=Ie.def(JSON.stringify(fn[Ue]))}),ge.invoke=function(Ue,xe){switch(xe.type){case ec:var Ye=["this",yt.context,yt.props,ge.batchId];return Ue.def(be(xe.data),".call(",Ye.slice(0,Math.max(xe.data.length+1,4)),")");case Pb:return Ue.def(yt.props,xe.data);case ad:return Ue.def(yt.context,xe.data);case h1:return Ue.def("this",xe.data);case jc:return xe.data.append(ge,Ue),xe.data.ref}},ge.attribCache={};var Ne={};return ge.scopeAttrib=function(Ue){var xe=Ee.id(Ue);if(xe in Ne)return Ne[xe];var Ye=Pn.scope[xe];Ye||(Ye=Pn.scope[xe]=new ot);var ht=Ne[xe]=be(Ye);return ht},ge}function ki(ge){var be=ge.static,Ie=ge.dynamic,gt;if(Na in be){var yt=!!be[Na];gt=uo(function(qe,Ke){return yt}),gt.enable=yt}else if(Na in Ie){var je=Ie[Na];gt=Tl(je,function(qe,Ke){return qe.invoke(Ke,je)})}return gt}function pr(ge,be){var Ie=ge.static,gt=ge.dynamic;if(no in Ie){var yt=Ie[no];return yt?(yt=dn.getFramebuffer(yt),de.command(yt,"invalid framebuffer object"),uo(function(qe,Ke){var Ne=qe.link(yt),Ue=qe.shared;Ke.set(Ue.framebuffer,".next",Ne);var xe=Ue.context;return Ke.set(xe,"."+rp,Ne+".width"),Ke.set(xe,"."+fh,Ne+".height"),Ne})):uo(function(qe,Ke){var Ne=qe.shared;Ke.set(Ne.framebuffer,".next","null");var Ue=Ne.context;return Ke.set(Ue,"."+rp,Ue+"."+g1),Ke.set(Ue,"."+fh,Ue+"."+Bl),"null"})}else if(no in gt){var je=gt[no];return Tl(je,function(qe,Ke){var Ne=qe.invoke(Ke,je),Ue=qe.shared,xe=Ue.framebuffer,Ye=Ke.def(xe,".getFramebuffer(",Ne,")");de.optional(function(){qe.assert(Ke,"!"+Ne+"||"+Ye,"invalid framebuffer object")}),Ke.set(xe,".next",Ye);var ht=Ue.context;return Ke.set(ht,"."+rp,Ye+"?"+Ye+".width:"+ht+"."+g1),Ke.set(ht,"."+fh,Ye+"?"+Ye+".height:"+ht+"."+Bl),Ye})}else return null}function ni(ge,be,Ie){var gt=ge.static,yt=ge.dynamic;function je(Ne){if(Ne in gt){var Ue=gt[Ne];de.commandType(Ue,"object","invalid "+Ne,Ie.commandStr);var xe=!0,Ye=Ue.x|0,ht=Ue.y|0,Dt,Kt;return"width"in Ue?(Dt=Ue.width|0,de.command(Dt>=0,"invalid "+Ne,Ie.commandStr)):xe=!1,"height"in Ue?(Kt=Ue.height|0,de.command(Kt>=0,"invalid "+Ne,Ie.commandStr)):xe=!1,new Ac(!xe&&be&&be.thisDep,!xe&&be&&be.contextDep,!xe&&be&&be.propDep,function(gr,oi){var qn=gr.shared.context,Br=Dt;"width"in Ue||(Br=oi.def(qn,".",rp,"-",Ye));var $r=Kt;return"height"in Ue||($r=oi.def(qn,".",fh,"-",ht)),[Ye,ht,Br,$r]})}else if(Ne in yt){var Wt=yt[Ne],on=Tl(Wt,function(gr,oi){var qn=gr.invoke(oi,Wt);de.optional(function(){gr.assert(oi,qn+"&&typeof "+qn+'==="object"',"invalid "+Ne)});var Br=gr.shared.context,$r=oi.def(qn,".x|0"),Vi=oi.def(qn,".y|0"),So=oi.def('"width" in ',qn,"?",qn,".width|0:","(",Br,".",rp,"-",$r,")"),ic=oi.def('"height" in ',qn,"?",qn,".height|0:","(",Br,".",fh,"-",Vi,")");return de.optional(function(){gr.assert(oi,So+">=0&&"+ic+">=0","invalid "+Ne)}),[$r,Vi,So,ic]});return be&&(on.thisDep=on.thisDep||be.thisDep,on.contextDep=on.contextDep||be.contextDep,on.propDep=on.propDep||be.propDep),on}else return be?new Ac(be.thisDep,be.contextDep,be.propDep,function(gr,oi){var qn=gr.shared.context;return[0,0,oi.def(qn,".",rp),oi.def(qn,".",fh)]}):null}var qe=je(ci);if(qe){var Ke=qe;qe=new Ac(qe.thisDep,qe.contextDep,qe.propDep,function(Ne,Ue){var xe=Ke.append(Ne,Ue),Ye=Ne.shared.context;return Ue.set(Ye,"."+dO,xe[2]),Ue.set(Ye,"."+p1,xe[3]),xe})}return{viewport:qe,scissor_box:je(nc)}}function Qr(ge,be){var Ie=ge.static,gt=typeof Ie[ch]=="string"&&typeof Ie[sd]=="string";if(gt){if(Object.keys(be.dynamic).length>0)return null;var yt=be.static,je=Object.keys(yt);if(je.length>0&&typeof yt[je[0]]=="number"){for(var qe=[],Ke=0;Ke<je.length;++Ke)de(typeof yt[je[Ke]]=="number","must specify all vertex attribute locations when using vaos"),qe.push([yt[je[Ke]]|0,je[Ke]]);return qe}}return null}function ui(ge,be,Ie){var gt=ge.static,yt=ge.dynamic;function je(xe){if(xe in gt){var Ye=Ee.id(gt[xe]);de.optional(function(){yn.shader(E1[xe],Ye,de.guessCommand())});var ht=uo(function(){return Ye});return ht.id=Ye,ht}else if(xe in yt){var Dt=yt[xe];return Tl(Dt,function(Kt,Wt){var on=Kt.invoke(Wt,Dt),gr=Wt.def(Kt.shared.strings,".id(",on,")");return de.optional(function(){Wt(Kt.shared.shader,".shader(",E1[xe],",",gr,",",Kt.command,");")}),gr})}return null}var qe=je(ch),Ke=je(sd),Ne=null,Ue;return bu(qe)&&bu(Ke)?(Ne=yn.program(Ke.id,qe.id,null,Ie),Ue=uo(function(xe,Ye){return xe.link(Ne)})):Ue=new Ac(qe&&qe.thisDep||Ke&&Ke.thisDep,qe&&qe.contextDep||Ke&&Ke.contextDep,qe&&qe.propDep||Ke&&Ke.propDep,function(xe,Ye){var ht=xe.shared.shader,Dt;qe?Dt=qe.append(xe,Ye):Dt=Ye.def(ht,".",ch);var Kt;Ke?Kt=Ke.append(xe,Ye):Kt=Ye.def(ht,".",sd);var Wt=ht+".program("+Kt+","+Dt;return de.optional(function(){Wt+=","+xe.command}),Ye.def(Wt+")")}),{frag:qe,vert:Ke,progVar:Ue,program:Ne}}function zi(ge,be){var Ie=ge.static,gt=ge.dynamic;function yt(){if(mu in Ie){var xe=Ie[mu];lp(xe)?xe=Qe.getElements(Qe.create(xe,!0)):xe&&(xe=Qe.getElements(xe),de.command(xe,"invalid elements",be.commandStr));var Ye=uo(function(Dt,Kt){if(xe){var Wt=Dt.link(xe);return Dt.ELEMENTS=Wt,Wt}return Dt.ELEMENTS=null,null});return Ye.value=xe,Ye}else if(mu in gt){var ht=gt[mu];return Tl(ht,function(Dt,Kt){var Wt=Dt.shared,on=Wt.isBufferArgs,gr=Wt.elements,oi=Dt.invoke(Kt,ht),qn=Kt.def("null"),Br=Kt.def(on,"(",oi,")"),$r=Dt.cond(Br).then(qn,"=",gr,".createStream(",oi,");").else(qn,"=",gr,".getElements(",oi,");");return de.optional(function(){Dt.assert($r.else,"!"+oi+"||"+qn,"invalid elements")}),Kt.entry($r),Kt.exit(Dt.cond(Br).then(gr,".destroyStream(",qn,");")),Dt.ELEMENTS=qn,qn})}return null}var je=yt();function qe(){if(uh in Ie){var xe=Ie[uh];return de.commandParameter(xe,Dl,"invalid primitve",be.commandStr),uo(function(ht,Dt){return Dl[xe]})}else if(uh in gt){var Ye=gt[uh];return Tl(Ye,function(ht,Dt){var Kt=ht.constants.primTypes,Wt=ht.invoke(Dt,Ye);return de.optional(function(){ht.assert(Dt,Wt+" in "+Kt,"invalid primitive, must be one of "+Object.keys(Dl))}),Dt.def(Kt,"[",Wt,"]")})}else if(je)return bu(je)?je.value?uo(function(ht,Dt){return Dt.def(ht.ELEMENTS,".primType")}):uo(function(){return v1}):new Ac(je.thisDep,je.contextDep,je.propDep,function(ht,Dt){var Kt=ht.ELEMENTS;return Dt.def(Kt,"?",Kt,".primType:",v1)});return null}function Ke(xe,Ye){if(xe in Ie){var ht=Ie[xe]|0;return de.command(!Ye||ht>=0,"invalid "+xe,be.commandStr),uo(function(Kt,Wt){return Ye&&(Kt.OFFSET=ht),ht})}else if(xe in gt){var Dt=gt[xe];return Tl(Dt,function(Kt,Wt){var on=Kt.invoke(Wt,Dt);return Ye&&(Kt.OFFSET=on,de.optional(function(){Kt.assert(Wt,on+">=0","invalid "+xe)})),on})}else if(Ye&&je)return uo(function(Kt,Wt){return Kt.OFFSET="0",0});return null}var Ne=Ke(Sf,!0);function Ue(){if($u in Ie){var xe=Ie[$u]|0;return de.command(typeof xe=="number"&&xe>=0,"invalid vertex count",be.commandStr),uo(function(){return xe})}else if($u in gt){var Ye=gt[$u];return Tl(Ye,function(Kt,Wt){var on=Kt.invoke(Wt,Ye);return de.optional(function(){Kt.assert(Wt,"typeof "+on+'==="number"&&'+on+">=0&&"+on+"===("+on+"|0)","invalid vertex count")}),on})}else if(je)if(bu(je)){if(je)return Ne?new Ac(Ne.thisDep,Ne.contextDep,Ne.propDep,function(Kt,Wt){var on=Wt.def(Kt.ELEMENTS,".vertCount-",Kt.OFFSET);return de.optional(function(){Kt.assert(Wt,on+">=0","invalid vertex offset/element buffer too small")}),on}):uo(function(Kt,Wt){return Wt.def(Kt.ELEMENTS,".vertCount")});var ht=uo(function(){return-1});return de.optional(function(){ht.MISSING=!0}),ht}else{var Dt=new Ac(je.thisDep||Ne.thisDep,je.contextDep||Ne.contextDep,je.propDep||Ne.propDep,function(Kt,Wt){var on=Kt.ELEMENTS;return Kt.OFFSET?Wt.def(on,"?",on,".vertCount-",Kt.OFFSET,":-1"):Wt.def(on,"?",on,".vertCount:-1")});return de.optional(function(){Dt.DYNAMIC=!0}),Dt}return null}return{elements:je,primitive:qe(),count:Ue(),instances:Ke(d1,!1),offset:Ne}}function xo(ge,be){var Ie=ge.static,gt=ge.dynamic,yt={};return sn.forEach(function(je){var qe=Dn(je);function Ke(Ne,Ue){if(je in Ie){var xe=Ne(Ie[je]);yt[qe]=uo(function(){return xe})}else if(je in gt){var Ye=gt[je];yt[qe]=Tl(Ye,function(ht,Dt){return Ue(ht,Dt,ht.invoke(Dt,Ye))})}}switch(je){case w0:case T0:case xf:case Cv:case A0:case C0:case Sl:case zc:case vu:case bg:return Ke(function(Ne){return de.commandType(Ne,"boolean",je,be.commandStr),Ne},function(Ne,Ue,xe){return de.optional(function(){Ne.assert(Ue,"typeof "+xe+'==="boolean"',"invalid flag "+je,Ne.commandStr)}),xe});case $s:return Ke(function(Ne){return de.commandParameter(Ne,sp,"invalid "+je,be.commandStr),sp[Ne]},function(Ne,Ue,xe){var Ye=Ne.constants.compareFuncs;return de.optional(function(){Ne.assert(Ue,xe+" in "+Ye,"invalid "+je+", must be one of "+Object.keys(sp))}),Ue.def(Ye,"[",xe,"]")});case np:return Ke(function(Ne){return de.command(Ko(Ne)&&Ne.length===2&&typeof Ne[0]=="number"&&typeof Ne[1]=="number"&&Ne[0]<=Ne[1],"depth range is 2d array",be.commandStr),Ne},function(Ne,Ue,xe){de.optional(function(){Ne.assert(Ue,Ne.shared.isArrayLike+"("+xe+")&&"+xe+".length===2&&typeof "+xe+'[0]==="number"&&typeof '+xe+'[1]==="number"&&'+xe+"[0]<="+xe+"[1]","depth range must be a 2d array")});var Ye=Ue.def("+",xe,"[0]"),ht=Ue.def("+",xe,"[1]");return[Ye,ht]});case _g:return Ke(function(Ne){de.commandType(Ne,"object","blend.func",be.commandStr);var Ue="srcRGB"in Ne?Ne.srcRGB:Ne.src,xe="srcAlpha"in Ne?Ne.srcAlpha:Ne.src,Ye="dstRGB"in Ne?Ne.dstRGB:Ne.dst,ht="dstAlpha"in Ne?Ne.dstAlpha:Ne.dst;return de.commandParameter(Ue,jl,qe+".srcRGB",be.commandStr),de.commandParameter(xe,jl,qe+".srcAlpha",be.commandStr),de.commandParameter(Ye,jl,qe+".dstRGB",be.commandStr),de.commandParameter(ht,jl,qe+".dstAlpha",be.commandStr),de.command(b1.indexOf(Ue+", "+Ye)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Ue+", "+Ye+")",be.commandStr),[jl[Ue],jl[Ye],jl[xe],jl[ht]]},function(Ne,Ue,xe){var Ye=Ne.constants.blendFuncs;de.optional(function(){Ne.assert(Ue,xe+"&&typeof "+xe+'==="object"',"invalid blend func, must be an object")});function ht(qn,Br){var $r=Ue.def('"',qn,Br,'" in ',xe,"?",xe,".",qn,Br,":",xe,".",qn);return de.optional(function(){Ne.assert(Ue,$r+" in "+Ye,"invalid "+je+"."+qn+Br+", must be one of "+Object.keys(jl))}),$r}var Dt=ht("src","RGB"),Kt=ht("dst","RGB");de.optional(function(){var qn=Ne.constants.invalidBlendCombinations;Ne.assert(Ue,qn+".indexOf("+Dt+'+", "+'+Kt+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Wt=Ue.def(Ye,"[",Dt,"]"),on=Ue.def(Ye,"[",ht("src","Alpha"),"]"),gr=Ue.def(Ye,"[",Kt,"]"),oi=Ue.def(Ye,"[",ht("dst","Alpha"),"]");return[Wt,gr,on,oi]});case pu:return Ke(function(Ne){if(typeof Ne=="string")return de.commandParameter(Ne,wt,"invalid "+je,be.commandStr),[wt[Ne],wt[Ne]];if(typeof Ne=="object")return de.commandParameter(Ne.rgb,wt,je+".rgb",be.commandStr),de.commandParameter(Ne.alpha,wt,je+".alpha",be.commandStr),[wt[Ne.rgb],wt[Ne.alpha]];de.commandRaise("invalid blend.equation",be.commandStr)},function(Ne,Ue,xe){var Ye=Ne.constants.blendEquations,ht=Ue.def(),Dt=Ue.def(),Kt=Ne.cond("typeof ",xe,'==="string"');return de.optional(function(){function Wt(on,gr,oi){Ne.assert(on,oi+" in "+Ye,"invalid "+gr+", must be one of "+Object.keys(wt))}Wt(Kt.then,je,xe),Ne.assert(Kt.else,xe+"&&typeof "+xe+'==="object"',"invalid "+je),Wt(Kt.else,je+".rgb",xe+".rgb"),Wt(Kt.else,je+".alpha",xe+".alpha")}),Kt.then(ht,"=",Dt,"=",Ye,"[",xe,"];"),Kt.else(ht,"=",Ye,"[",xe,".rgb];",Dt,"=",Ye,"[",xe,".alpha];"),Ue(Kt),[ht,Dt]});case od:return Ke(function(Ne){return de.command(Ko(Ne)&&Ne.length===4,"blend.color must be a 4d array",be.commandStr),F(4,function(Ue){return+Ne[Ue]})},function(Ne,Ue,xe){return de.optional(function(){Ne.assert(Ue,Ne.shared.isArrayLike+"("+xe+")&&"+xe+".length===4","blend.color must be a 4d array")}),F(4,function(Ye){return Ue.def("+",xe,"[",Ye,"]")})});case Nb:return Ke(function(Ne){return de.commandType(Ne,"number",qe,be.commandStr),Ne|0},function(Ne,Ue,xe){return de.optional(function(){Ne.assert(Ue,"typeof "+xe+'==="number"',"invalid stencil.mask")}),Ue.def(xe,"|0")});case $c:return Ke(function(Ne){de.commandType(Ne,"object",qe,be.commandStr);var Ue=Ne.cmp||"keep",xe=Ne.ref||0,Ye="mask"in Ne?Ne.mask:-1;return de.commandParameter(Ue,sp,je+".cmp",be.commandStr),de.commandType(xe,"number",je+".ref",be.commandStr),de.commandType(Ye,"number",je+".mask",be.commandStr),[sp[Ue],xe,Ye]},function(Ne,Ue,xe){var Ye=Ne.constants.compareFuncs;de.optional(function(){function Wt(){Ne.assert(Ue,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Wt(xe+"&&typeof ",xe,'==="object"'),Wt('!("cmp" in ',xe,")||(",xe,".cmp in ",Ye,")")});var ht=Ue.def('"cmp" in ',xe,"?",Ye,"[",xe,".cmp]",":",wf),Dt=Ue.def(xe,".ref|0"),Kt=Ue.def('"mask" in ',xe,"?",xe,".mask|0:-1");return[ht,Dt,Kt]});case tc:case Io:return Ke(function(Ne){de.commandType(Ne,"object",qe,be.commandStr);var Ue=Ne.fail||"keep",xe=Ne.zfail||"keep",Ye=Ne.zpass||"keep";return de.commandParameter(Ue,hh,je+".fail",be.commandStr),de.commandParameter(xe,hh,je+".zfail",be.commandStr),de.commandParameter(Ye,hh,je+".zpass",be.commandStr),[je===Io?Sg:cd,hh[Ue],hh[xe],hh[Ye]]},function(Ne,Ue,xe){var Ye=Ne.constants.stencilOps;de.optional(function(){Ne.assert(Ue,xe+"&&typeof "+xe+'==="object"',"invalid "+je)});function ht(Dt){return de.optional(function(){Ne.assert(Ue,'!("'+Dt+'" in '+xe+")||("+xe+"."+Dt+" in "+Ye+")","invalid "+je+"."+Dt+", must be one of "+Object.keys(hh))}),Ue.def('"',Dt,'" in ',xe,"?",Ye,"[",xe,".",Dt,"]:",wf)}return[je===Io?Sg:cd,ht("fail"),ht("zfail"),ht("zpass")]});case Eg:return Ke(function(Ne){de.commandType(Ne,"object",qe,be.commandStr);var Ue=Ne.factor|0,xe=Ne.units|0;return de.commandType(Ue,"number",qe+".factor",be.commandStr),de.commandType(xe,"number",qe+".units",be.commandStr),[Ue,xe]},function(Ne,Ue,xe){de.optional(function(){Ne.assert(Ue,xe+"&&typeof "+xe+'==="object"',"invalid "+je)});var Ye=Ue.def(xe,".factor|0"),ht=Ue.def(xe,".units|0");return[Ye,ht]});case sh:return Ke(function(Ne){var Ue=0;return Ne==="front"?Ue=cd:Ne==="back"&&(Ue=Sg),de.command(!!Ue,qe,be.commandStr),Ue},function(Ne,Ue,xe){return de.optional(function(){Ne.assert(Ue,xe+'==="front"||'+xe+'==="back"',"invalid cull.face")}),Ue.def(xe,'==="front"?',cd,":",Sg)});case O0:return Ke(function(Ne){return de.command(typeof Ne=="number"&&Ne>=ut.lineWidthDims[0]&&Ne<=ut.lineWidthDims[1],"invalid line width, must be a positive number between "+ut.lineWidthDims[0]+" and "+ut.lineWidthDims[1],be.commandStr),Ne},function(Ne,Ue,xe){return de.optional(function(){Ne.assert(Ue,"typeof "+xe+'==="number"&&'+xe+">="+ut.lineWidthDims[0]+"&&"+xe+"<="+ut.lineWidthDims[1],"invalid line width")}),xe});case zu:return Ke(function(Ne){return de.commandParameter(Ne,ud,qe,be.commandStr),ud[Ne]},function(Ne,Ue,xe){return de.optional(function(){Ne.assert(Ue,xe+'==="cw"||'+xe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Ue.def(xe+'==="cw"?'+Bb+":"+m1)});case gu:return Ke(function(Ne){return de.command(Ko(Ne)&&Ne.length===4,"color.mask must be length 4 array",be.commandStr),Ne.map(function(Ue){return!!Ue})},function(Ne,Ue,xe){return de.optional(function(){Ne.assert(Ue,Ne.shared.isArrayLike+"("+xe+")&&"+xe+".length===4","invalid color.mask")}),F(4,function(Ye){return"!!"+xe+"["+Ye+"]"})});case lh:return Ke(function(Ne){de.command(typeof Ne=="object"&&Ne,qe,be.commandStr);var Ue="value"in Ne?Ne.value:1,xe=!!Ne.invert;return de.command(typeof Ue=="number"&&Ue>=0&&Ue<=1,"sample.coverage.value must be a number between 0 and 1",be.commandStr),[Ue,xe]},function(Ne,Ue,xe){de.optional(function(){Ne.assert(Ue,xe+"&&typeof "+xe+'==="object"',"invalid sample.coverage")});var Ye=Ue.def('"value" in ',xe,"?+",xe,".value:1"),ht=Ue.def("!!",xe,".invert");return[Ye,ht]})}}),yt}function yi(ge,be){var Ie=ge.static,gt=ge.dynamic,yt={};return Object.keys(Ie).forEach(function(je){var qe=Ie[je],Ke;if(typeof qe=="number"||typeof qe=="boolean")Ke=uo(function(){return qe});else if(typeof qe=="function"){var Ne=qe._reglType;Ne==="texture2d"||Ne==="textureCube"?Ke=uo(function(Ue){return Ue.link(qe)}):Ne==="framebuffer"||Ne==="framebufferCube"?(de.command(qe.color.length>0,'missing color attachment for framebuffer sent to uniform "'+je+'"',be.commandStr),Ke=uo(function(Ue){return Ue.link(qe.color[0])})):de.commandRaise('invalid data for uniform "'+je+'"',be.commandStr)}else Ko(qe)?Ke=uo(function(Ue){var xe=Ue.global.def("[",F(qe.length,function(Ye){return de.command(typeof qe[Ye]=="number"||typeof qe[Ye]=="boolean","invalid uniform "+je,Ue.commandStr),qe[Ye]}),"]");return xe}):de.commandRaise('invalid or missing data for uniform "'+je+'"',be.commandStr);Ke.value=qe,yt[je]=Ke}),Object.keys(gt).forEach(function(je){var qe=gt[je];yt[je]=Tl(qe,function(Ke,Ne){return Ke.invoke(Ne,qe)})}),yt}function Oi(ge,be){var Ie=ge.static,gt=ge.dynamic,yt={};return Object.keys(Ie).forEach(function(je){var qe=Ie[je],Ke=Ee.id(je),Ne=new ot;if(lp(qe))Ne.state=Ef,Ne.buffer=Ct.getBuffer(Ct.create(qe,Tf,!1,!0)),Ne.type=0;else{var Ue=Ct.getBuffer(qe);if(Ue)Ne.state=Ef,Ne.buffer=Ue,Ne.type=0;else if(de.command(typeof qe=="object"&&qe,"invalid data for attribute "+je,be.commandStr),"constant"in qe){var xe=qe.constant;Ne.buffer="null",Ne.state=du,typeof xe=="number"?Ne.x=xe:(de.command(Ko(xe)&&xe.length>0&&xe.length<=4,"invalid constant for attribute "+je,be.commandStr),bf.forEach(function(gr,oi){oi<xe.length&&(Ne[gr]=xe[oi])}))}else{lp(qe.buffer)?Ue=Ct.getBuffer(Ct.create(qe.buffer,Tf,!1,!0)):Ue=Ct.getBuffer(qe.buffer),de.command(!!Ue,'missing buffer for attribute "'+je+'"',be.commandStr);var Ye=qe.offset|0;de.command(Ye>=0,'invalid offset for attribute "'+je+'"',be.commandStr);var ht=qe.stride|0;de.command(ht>=0&&ht<256,'invalid stride for attribute "'+je+'", must be integer betweeen [0, 255]',be.commandStr);var Dt=qe.size|0;de.command(!("size"in qe)||Dt>0&&Dt<=4,'invalid size for attribute "'+je+'", must be 1,2,3,4',be.commandStr);var Kt=!!qe.normalized,Wt=0;"type"in qe&&(de.commandParameter(qe.type,au,"invalid type for attribute "+je,be.commandStr),Wt=au[qe.type]);var on=qe.divisor|0;"divisor"in qe&&(de.command(on===0||gn,'cannot specify divisor for attribute "'+je+'", instancing not supported',be.commandStr),de.command(on>=0,'invalid divisor for attribute "'+je+'"',be.commandStr)),de.optional(function(){var gr=be.commandStr,oi=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(qe).forEach(function(qn){de.command(oi.indexOf(qn)>=0,'unknown parameter "'+qn+'" for attribute pointer "'+je+'" (valid parameters are '+oi+")",gr)})}),Ne.buffer=Ue,Ne.state=Ef,Ne.size=Dt,Ne.normalized=Kt,Ne.type=Wt||Ue.dtype,Ne.offset=Ye,Ne.stride=ht,Ne.divisor=on}}yt[je]=uo(function(gr,oi){var qn=gr.attribCache;if(Ke in qn)return qn[Ke];var Br={isStream:!1};return Object.keys(Ne).forEach(function($r){Br[$r]=Ne[$r]}),Ne.buffer&&(Br.buffer=gr.link(Ne.buffer),Br.type=Br.type||Br.buffer+".dtype"),qn[Ke]=Br,Br})}),Object.keys(gt).forEach(function(je){var qe=gt[je];function Ke(Ne,Ue){var xe=Ne.invoke(Ue,qe),Ye=Ne.shared,ht=Ne.constants,Dt=Ye.isBufferArgs,Kt=Ye.buffer;de.optional(function(){Ne.assert(Ue,xe+"&&(typeof "+xe+'==="object"||typeof '+xe+'==="function")&&('+Dt+"("+xe+")||"+Kt+".getBuffer("+xe+")||"+Kt+".getBuffer("+xe+".buffer)||"+Dt+"("+xe+'.buffer)||("constant" in '+xe+"&&(typeof "+xe+'.constant==="number"||'+Ye.isArrayLike+"("+xe+".constant))))",'invalid dynamic attribute "'+je+'"')});var Wt={isStream:Ue.def(!1)},on=new ot;on.state=Ef,Object.keys(on).forEach(function(Br){Wt[Br]=Ue.def(""+on[Br])});var gr=Wt.buffer,oi=Wt.type;Ue("if(",Dt,"(",xe,")){",Wt.isStream,"=true;",gr,"=",Kt,".createStream(",Tf,",",xe,");",oi,"=",gr,".dtype;","}else{",gr,"=",Kt,".getBuffer(",xe,");","if(",gr,"){",oi,"=",gr,".dtype;",'}else if("constant" in ',xe,"){",Wt.state,"=",du,";","if(typeof "+xe+'.constant === "number"){',Wt[bf[0]],"=",xe,".constant;",bf.slice(1).map(function(Br){return Wt[Br]}).join("="),"=0;","}else{",bf.map(function(Br,$r){return Wt[Br]+"="+xe+".constant.length>"+$r+"?"+xe+".constant["+$r+"]:0;"}).join(""),"}}else{","if(",Dt,"(",xe,".buffer)){",gr,"=",Kt,".createStream(",Tf,",",xe,".buffer);","}else{",gr,"=",Kt,".getBuffer(",xe,".buffer);","}",oi,'="type" in ',xe,"?",ht.glTypes,"[",xe,".type]:",gr,".dtype;",Wt.normalized,"=!!",xe,".normalized;");function qn(Br){Ue(Wt[Br],"=",xe,".",Br,"|0;")}return qn("size"),qn("offset"),qn("stride"),qn("divisor"),Ue("}}"),Ue.exit("if(",Wt.isStream,"){",Kt,".destroyStream(",gr,");","}"),Wt}yt[je]=Tl(qe,Ke)}),yt}function Lo(ge,be){var Ie=ge.static,gt=ge.dynamic;if(ro in Ie){var yt=Ie[ro];return yt!==null&&Pn.getVAO(yt)===null&&(yt=Pn.createVAO(yt)),uo(function(qe){return qe.link(Pn.getVAO(yt))})}else if(ro in gt){var je=gt[ro];return Tl(je,function(qe,Ke){var Ne=qe.invoke(Ke,je);return Ke.def(qe.shared.vao+".getVAO("+Ne+")")})}return null}function Ba(ge){var be=ge.static,Ie=ge.dynamic,gt={};return Object.keys(be).forEach(function(yt){var je=be[yt];gt[yt]=uo(function(qe,Ke){return typeof je=="number"||typeof je=="boolean"?""+je:qe.link(je)})}),Object.keys(Ie).forEach(function(yt){var je=Ie[yt];gt[yt]=Tl(je,function(qe,Ke){return qe.invoke(Ke,je)})}),gt}function fo(ge,be,Ie,gt,yt){var je=ge.static,qe=ge.dynamic;de.optional(function(){var qn=[no,sd,ch,mu,uh,Sf,$u,d1,Na,ro].concat(sn);function Br($r){Object.keys($r).forEach(function(Vi){de.command(qn.indexOf(Vi)>=0,'unknown parameter "'+Vi+'"',yt.commandStr)})}Br(je),Br(qe)});var Ke=Qr(ge,be),Ne=pr(ge),Ue=ni(ge,Ne,yt),xe=zi(ge,yt),Ye=xo(ge,yt),ht=ui(ge,yt,Ke);function Dt(qn){var Br=Ue[qn];Br&&(Ye[qn]=Br)}Dt(ci),Dt(Dn(nc));var Kt=Object.keys(Ye).length>0,Wt={framebuffer:Ne,draw:xe,shader:ht,state:Ye,dirty:Kt,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Wt.profile=ki(ge),Wt.uniforms=yi(Ie,yt),Wt.drawVAO=Wt.scopeVAO=Lo(ge),!Wt.drawVAO&&ht.program&&!Ke&&De.angle_instanced_arrays){var on=!0,gr=ht.program.attributes.map(function(qn){var Br=be.static[qn];return on=on&&!!Br,Br});if(on&&gr.length>0){var oi=Pn.getVAO(Pn.createVAO(gr));Wt.drawVAO=new Ac(null,null,null,function(qn,Br){return qn.link(oi)}),Wt.useVAO=!0}}return Ke?Wt.useVAO=!0:Wt.attributes=Oi(be,yt),Wt.context=Ba(gt),Wt}function Ja(ge,be,Ie){var gt=ge.shared,yt=gt.context,je=ge.scope();Object.keys(Ie).forEach(function(qe){be.save(yt,"."+qe);var Ke=Ie[qe];je(yt,".",qe,"=",Ke.append(ge,be),";")}),be(je)}function ko(ge,be,Ie,gt){var yt=ge.shared,je=yt.gl,qe=yt.framebuffer,Ke;zn&&(Ke=be.def(yt.extensions,".webgl_draw_buffers"));var Ne=ge.constants,Ue=Ne.drawBuffer,xe=Ne.backBuffer,Ye;Ie?Ye=Ie.append(ge,be):Ye=be.def(qe,".next"),gt||be("if(",Ye,"!==",qe,".cur){"),be("if(",Ye,"){",je,".bindFramebuffer(",jb,",",Ye,".framebuffer);"),zn&&be(Ke,".drawBuffersWEBGL(",Ue,"[",Ye,".colorAttachments.length]);"),be("}else{",je,".bindFramebuffer(",jb,",null);"),zn&&be(Ke,".drawBuffersWEBGL(",xe,");"),be("}",qe,".cur=",Ye,";"),gt||be("}")}function As(ge,be,Ie){var gt=ge.shared,yt=gt.gl,je=ge.current,qe=ge.next,Ke=gt.current,Ne=gt.next,Ue=ge.cond(Ke,".dirty");sn.forEach(function(xe){var Ye=Dn(xe);if(!(Ye in Ie.state)){var ht,Dt;if(Ye in qe){ht=qe[Ye],Dt=je[Ye];var Kt=F(Xt[Ye].length,function(on){return Ue.def(ht,"[",on,"]")});Ue(ge.cond(Kt.map(function(on,gr){return on+"!=="+Dt+"["+gr+"]"}).join("||")).then(yt,".",Vt[Ye],"(",Kt,");",Kt.map(function(on,gr){return Dt+"["+gr+"]="+on}).join(";"),";"))}else{ht=Ue.def(Ne,".",Ye);var Wt=ge.cond(ht,"!==",Ke,".",Ye);Ue(Wt),Ye in Mn?Wt(ge.cond(ht).then(yt,".enable(",Mn[Ye],");").else(yt,".disable(",Mn[Ye],");"),Ke,".",Ye,"=",ht,";"):Wt(yt,".",Vt[Ye],"(",ht,");",Ke,".",Ye,"=",ht,";")}}}),Object.keys(Ie.state).length===0&&Ue(Ke,".dirty=false;"),be(Ue)}function $a(ge,be,Ie,gt){var yt=ge.shared,je=ge.current,qe=yt.current,Ke=yt.gl;LS(Object.keys(Ie)).forEach(function(Ne){var Ue=Ie[Ne];if(!(gt&&!gt(Ue))){var xe=Ue.append(ge,be);if(Mn[Ne]){var Ye=Mn[Ne];bu(Ue)?xe?be(Ke,".enable(",Ye,");"):be(Ke,".disable(",Ye,");"):be(ge.cond(xe).then(Ke,".enable(",Ye,");").else(Ke,".disable(",Ye,");")),be(qe,".",Ne,"=",xe,";")}else if(Ko(xe)){var ht=je[Ne];be(Ke,".",Vt[Ne],"(",xe,");",xe.map(function(Dt,Kt){return ht+"["+Kt+"]="+Dt}).join(";"),";")}else be(Ke,".",Vt[Ne],"(",xe,");",qe,".",Ne,"=",xe,";")}})}function fa(ge,be){gn&&(ge.instancing=be.def(ge.shared.extensions,".angle_instanced_arrays"))}function li(ge,be,Ie,gt,yt){var je=ge.shared,qe=ge.stats,Ke=je.current,Ne=je.timer,Ue=Ie.profile;function xe(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Ye,ht;function Dt(qn){Ye=be.def(),qn(Ye,"=",xe(),";"),typeof yt=="string"?qn(qe,".count+=",yt,";"):qn(qe,".count++;"),un&&(gt?(ht=be.def(),qn(ht,"=",Ne,".getNumPendingQueries();")):qn(Ne,".beginQuery(",qe,");"))}function Kt(qn){qn(qe,".cpuTime+=",xe(),"-",Ye,";"),un&&(gt?qn(Ne,".pushScopeStats(",ht,",",Ne,".getNumPendingQueries(),",qe,");"):qn(Ne,".endQuery();"))}function Wt(qn){var Br=be.def(Ke,".profile");be(Ke,".profile=",qn,";"),be.exit(Ke,".profile=",Br,";")}var on;if(Ue){if(bu(Ue)){Ue.enable?(Dt(be),Kt(be.exit),Wt("true")):Wt("false");return}on=Ue.append(ge,be),Wt(on)}else on=be.def(Ke,".profile");var gr=ge.block();Dt(gr),be("if(",on,"){",gr,"}");var oi=ge.block();Kt(oi),be.exit("if(",on,"){",oi,"}")}function ws(ge,be,Ie,gt,yt){var je=ge.shared;function qe(Ne){switch(Ne){case M0:case ip:case xg:return 2;case Dv:case Bv:case Fv:return 3;case Fl:case ap:case Uv:return 4;default:return 1}}function Ke(Ne,Ue,xe){var Ye=je.gl,ht=be.def(Ne,".location"),Dt=be.def(je.attributes,"[",ht,"]"),Kt=xe.state,Wt=xe.buffer,on=[xe.x,xe.y,xe.z,xe.w],gr=["buffer","normalized","offset","stride"];function oi(){be("if(!",Dt,".buffer){",Ye,".enableVertexAttribArray(",ht,");}");var Br=xe.type,$r;if(xe.size?$r=be.def(xe.size,"||",Ue):$r=Ue,be("if(",Dt,".type!==",Br,"||",Dt,".size!==",$r,"||",gr.map(function(So){return Dt+"."+So+"!=="+xe[So]}).join("||"),"){",Ye,".bindBuffer(",Tf,",",Wt,".buffer);",Ye,".vertexAttribPointer(",[ht,$r,Br,xe.normalized,xe.stride,xe.offset],");",Dt,".type=",Br,";",Dt,".size=",$r,";",gr.map(function(So){return Dt+"."+So+"="+xe[So]+";"}).join(""),"}"),gn){var Vi=xe.divisor;be("if(",Dt,".divisor!==",Vi,"){",ge.instancing,".vertexAttribDivisorANGLE(",[ht,Vi],");",Dt,".divisor=",Vi,";}")}}function qn(){be("if(",Dt,".buffer){",Ye,".disableVertexAttribArray(",ht,");",Dt,".buffer=null;","}if(",bf.map(function(Br,$r){return Dt+"."+Br+"!=="+on[$r]}).join("||"),"){",Ye,".vertexAttrib4f(",ht,",",on,");",bf.map(function(Br,$r){return Dt+"."+Br+"="+on[$r]+";"}).join(""),"}")}Kt===Ef?oi():Kt===du?qn():(be("if(",Kt,"===",Ef,"){"),oi(),be("}else{"),qn(),be("}"))}gt.forEach(function(Ne){var Ue=Ne.name,xe=Ie.attributes[Ue],Ye;if(xe){if(!yt(xe))return;Ye=xe.append(ge,be)}else{if(!yt(zv))return;var ht=ge.scopeAttrib(Ue);de.optional(function(){ge.assert(be,ht+".state","missing attribute "+Ue)}),Ye={},Object.keys(new ot).forEach(function(Dt){Ye[Dt]=be.def(ht,".",Dt)})}Ke(ge.link(Ne),qe(Ne.info.type),Ye)})}function oa(ge,be,Ie,gt,yt){for(var je=ge.shared,qe=je.gl,Ke,Ne=0;Ne<gt.length;++Ne){var Ue=gt[Ne],xe=Ue.name,Ye=Ue.info.type,ht=Ie.uniforms[xe],Dt=ge.link(Ue),Kt=Dt+".location",Wt;if(ht){if(!yt(ht))continue;if(bu(ht)){var on=ht.value;if(de.command(on!==null&&typeof on<"u",'missing uniform "'+xe+'"',ge.commandStr),Ye===Tc||Ye===ld){de.command(typeof on=="function"&&(Ye===Tc&&(on._reglType==="texture2d"||on._reglType==="framebuffer")||Ye===ld&&(on._reglType==="textureCube"||on._reglType==="framebufferCube")),"invalid texture for uniform "+xe,ge.commandStr);var gr=ge.link(on._texture||on.color[0]._texture);be(qe,".uniform1i(",Kt,",",gr+".bind());"),be.exit(gr,".unbind();")}else if(Ye===op||Ye===Ul||Ye===jv){de.optional(function(){de.command(Ko(on),"invalid matrix for uniform "+xe,ge.commandStr),de.command(Ye===op&&on.length===4||Ye===Ul&&on.length===9||Ye===jv&&on.length===16,"invalid length for matrix uniform "+xe,ge.commandStr)});var oi=ge.global.def("new Float32Array(["+Array.prototype.slice.call(on)+"])"),qn=2;Ye===Ul?qn=3:Ye===jv&&(qn=4),be(qe,".uniformMatrix",qn,"fv(",Kt,",false,",oi,");")}else{switch(Ye){case kv:de.commandType(on,"number","uniform "+xe,ge.commandStr),Ke="1f";break;case M0:de.command(Ko(on)&&on.length===2,"uniform "+xe,ge.commandStr),Ke="2f";break;case Dv:de.command(Ko(on)&&on.length===3,"uniform "+xe,ge.commandStr),Ke="3f";break;case Fl:de.command(Ko(on)&&on.length===4,"uniform "+xe,ge.commandStr),Ke="4f";break;case P0:de.commandType(on,"boolean","uniform "+xe,ge.commandStr),Ke="1i";break;case Af:de.commandType(on,"number","uniform "+xe,ge.commandStr),Ke="1i";break;case xg:de.command(Ko(on)&&on.length===2,"uniform "+xe,ge.commandStr),Ke="2i";break;case ip:de.command(Ko(on)&&on.length===2,"uniform "+xe,ge.commandStr),Ke="2i";break;case Fv:de.command(Ko(on)&&on.length===3,"uniform "+xe,ge.commandStr),Ke="3i";break;case Bv:de.command(Ko(on)&&on.length===3,"uniform "+xe,ge.commandStr),Ke="3i";break;case Uv:de.command(Ko(on)&&on.length===4,"uniform "+xe,ge.commandStr),Ke="4i";break;case ap:de.command(Ko(on)&&on.length===4,"uniform "+xe,ge.commandStr),Ke="4i";break}be(qe,".uniform",Ke,"(",Kt,",",Ko(on)?Array.prototype.slice.call(on):on,");")}continue}else Wt=ht.append(ge,be)}else{if(!yt(zv))continue;Wt=be.def(je.uniforms,"[",Ee.id(xe),"]")}Ye===Tc?be("if(",Wt,"&&",Wt,'._reglType==="framebuffer"){',Wt,"=",Wt,".color[0];","}"):Ye===ld&&be("if(",Wt,"&&",Wt,'._reglType==="framebufferCube"){',Wt,"=",Wt,".color[0];","}"),de.optional(function(){function ic(ph,L0){ge.assert(be,ph,'bad data or missing for uniform "'+xe+'".  '+L0)}function C1(ph){ic("typeof "+Wt+'==="'+ph+'"',"invalid type, expected "+ph)}function Eu(ph,L0){ic(je.isArrayLike+"("+Wt+")&&"+Wt+".length==="+ph,"invalid vector, should have length "+ph,ge.commandStr)}function Hv(ph){ic("typeof "+Wt+'==="function"&&'+Wt+'._reglType==="texture'+(ph===Hu?"2d":"Cube")+'"',"invalid texture type",ge.commandStr)}switch(Ye){case Af:C1("number");break;case ip:Eu(2);break;case Bv:Eu(3);break;case ap:Eu(4);break;case kv:C1("number");break;case M0:Eu(2);break;case Dv:Eu(3);break;case Fl:Eu(4);break;case P0:C1("boolean");break;case xg:Eu(2);break;case Fv:Eu(3);break;case Uv:Eu(4);break;case op:Eu(4);break;case Ul:Eu(9);break;case jv:Eu(16);break;case Tc:Hv(Hu);break;case ld:Hv(ji);break}});var Br=1;switch(Ye){case Tc:case ld:var $r=be.def(Wt,"._texture");be(qe,".uniform1i(",Kt,",",$r,".bind());"),be.exit($r,".unbind();");continue;case Af:case P0:Ke="1i";break;case ip:case xg:Ke="2i",Br=2;break;case Bv:case Fv:Ke="3i",Br=3;break;case ap:case Uv:Ke="4i",Br=4;break;case kv:Ke="1f";break;case M0:Ke="2f",Br=2;break;case Dv:Ke="3f",Br=3;break;case Fl:Ke="4f",Br=4;break;case op:Ke="Matrix2fv";break;case Ul:Ke="Matrix3fv";break;case jv:Ke="Matrix4fv";break}if(be(qe,".uniform",Ke,"(",Kt,","),Ke.charAt(0)==="M"){var Vi=Math.pow(Ye-op+2,2),So=ge.global.def("new Float32Array(",Vi,")");be("false,(Array.isArray(",Wt,")||",Wt," instanceof Float32Array)?",Wt,":(",F(Vi,function(ic){return So+"["+ic+"]="+Wt+"["+ic+"]"}),",",So,")")}else Br>1?be(F(Br,function(ic){return Wt+"["+ic+"]"})):be(Wt);be(");")}}function kr(ge,be,Ie,gt){var yt=ge.shared,je=yt.gl,qe=yt.draw,Ke=gt.draw;function Ne(){var $r=Ke.elements,Vi,So=be;return $r?(($r.contextDep&&gt.contextDynamic||$r.propDep)&&(So=Ie),Vi=$r.append(ge,So)):Vi=So.def(qe,".",mu),Vi&&So("if("+Vi+")"+je+".bindBuffer("+Pv+","+Vi+".buffer.buffer);"),Vi}function Ue(){var $r=Ke.count,Vi,So=be;return $r?(($r.contextDep&&gt.contextDynamic||$r.propDep)&&(So=Ie),Vi=$r.append(ge,So),de.optional(function(){$r.MISSING&&ge.assert(be,"false","missing vertex count"),$r.DYNAMIC&&ge.assert(So,Vi+">=0","missing vertex count")})):(Vi=So.def(qe,".",$u),de.optional(function(){ge.assert(So,Vi+">=0","missing vertex count")})),Vi}var xe=Ne();function Ye($r){var Vi=Ke[$r];return Vi?Vi.contextDep&&gt.contextDynamic||Vi.propDep?Vi.append(ge,Ie):Vi.append(ge,be):be.def(qe,".",$r)}var ht=Ye(uh),Dt=Ye(Sf),Kt=Ue();if(typeof Kt=="number"){if(Kt===0)return}else Ie("if(",Kt,"){"),Ie.exit("}");var Wt,on;gn&&(Wt=Ye(d1),on=ge.instancing);var gr=xe+".type",oi=Ke.elements&&bu(Ke.elements);function qn(){function $r(){Ie(on,".drawElementsInstancedANGLE(",[ht,Kt,gr,Dt+"<<(("+gr+"-"+Uc+")>>1)",Wt],");")}function Vi(){Ie(on,".drawArraysInstancedANGLE(",[ht,Dt,Kt,Wt],");")}xe?oi?$r():(Ie("if(",xe,"){"),$r(),Ie("}else{"),Vi(),Ie("}")):Vi()}function Br(){function $r(){Ie(je+".drawElements("+[ht,Kt,gr,Dt+"<<(("+gr+"-"+Uc+")>>1)"]+");")}function Vi(){Ie(je+".drawArrays("+[ht,Dt,Kt]+");")}xe?oi?$r():(Ie("if(",xe,"){"),$r(),Ie("}else{"),Vi(),Ie("}")):Vi()}gn&&(typeof Wt!="number"||Wt>=0)?typeof Wt=="string"?(Ie("if(",Wt,">0){"),qn(),Ie("}else if(",Wt,"<0){"),Br(),Ie("}")):qn():Br()}function vi(ge,be,Ie,gt,yt){var je=qr(),qe=je.proc("body",yt);return de.optional(function(){je.commandStr=be.commandStr,je.command=je.link(be.commandStr)}),gn&&(je.instancing=qe.def(je.shared.extensions,".angle_instanced_arrays")),ge(je,qe,Ie,gt),je.compile().body}function Di(ge,be,Ie,gt){fa(ge,be),Ie.useVAO?Ie.drawVAO?be(ge.shared.vao,".setVAO(",Ie.drawVAO.append(ge,be),");"):be(ge.shared.vao,".setVAO(",ge.shared.vao,".targetVAO);"):(be(ge.shared.vao,".setVAO(null);"),ws(ge,be,Ie,gt.attributes,function(){return!0})),oa(ge,be,Ie,gt.uniforms,function(){return!0}),kr(ge,be,be,Ie)}function Jo(ge,be){var Ie=ge.proc("draw",1);fa(ge,Ie),Ja(ge,Ie,be.context),ko(ge,Ie,be.framebuffer),As(ge,Ie,be),$a(ge,Ie,be.state),li(ge,Ie,be,!1,!0);var gt=be.shader.progVar.append(ge,Ie);if(Ie(ge.shared.gl,".useProgram(",gt,".program);"),be.shader.program)Di(ge,Ie,be,be.shader.program);else{Ie(ge.shared.vao,".setVAO(null);");var yt=ge.global.def("{}"),je=Ie.def(gt,".id"),qe=Ie.def(yt,"[",je,"]");Ie(ge.cond(qe).then(qe,".call(this,a0);").else(qe,"=",yt,"[",je,"]=",ge.link(function(Ke){return vi(Di,ge,be,Ke,1)}),"(",gt,");",qe,".call(this,a0);"))}Object.keys(be.state).length>0&&Ie(ge.shared.current,".dirty=true;")}function Al(ge,be,Ie,gt){ge.batchId="a1",fa(ge,be);function yt(){return!0}ws(ge,be,Ie,gt.attributes,yt),oa(ge,be,Ie,gt.uniforms,yt),kr(ge,be,be,Ie)}function Me(ge,be,Ie,gt){fa(ge,be);var yt=Ie.contextDep,je=be.def(),qe="a0",Ke="a1",Ne=be.def();ge.shared.props=Ne,ge.batchId=je;var Ue=ge.scope(),xe=ge.scope();be(Ue.entry,"for(",je,"=0;",je,"<",Ke,";++",je,"){",Ne,"=",qe,"[",je,"];",xe,"}",Ue.exit);function Ye(gr){return gr.contextDep&&yt||gr.propDep}function ht(gr){return!Ye(gr)}if(Ie.needsContext&&Ja(ge,xe,Ie.context),Ie.needsFramebuffer&&ko(ge,xe,Ie.framebuffer),$a(ge,xe,Ie.state,Ye),Ie.profile&&Ye(Ie.profile)&&li(ge,xe,Ie,!1,!0),gt)Ie.useVAO?Ie.drawVAO?Ye(Ie.drawVAO)?xe(ge.shared.vao,".setVAO(",Ie.drawVAO.append(ge,xe),");"):Ue(ge.shared.vao,".setVAO(",Ie.drawVAO.append(ge,Ue),");"):Ue(ge.shared.vao,".setVAO(",ge.shared.vao,".targetVAO);"):(Ue(ge.shared.vao,".setVAO(null);"),ws(ge,Ue,Ie,gt.attributes,ht),ws(ge,xe,Ie,gt.attributes,Ye)),oa(ge,Ue,Ie,gt.uniforms,ht),oa(ge,xe,Ie,gt.uniforms,Ye),kr(ge,Ue,xe,Ie);else{var Dt=ge.global.def("{}"),Kt=Ie.shader.progVar.append(ge,xe),Wt=xe.def(Kt,".id"),on=xe.def(Dt,"[",Wt,"]");xe(ge.shared.gl,".useProgram(",Kt,".program);","if(!",on,"){",on,"=",Dt,"[",Wt,"]=",ge.link(function(gr){return vi(Al,ge,Ie,gr,2)}),"(",Kt,");}",on,".call(this,a0[",je,"],",je,");")}}function St(ge,be){var Ie=ge.proc("batch",2);ge.batchId="0",fa(ge,Ie);var gt=!1,yt=!0;Object.keys(be.context).forEach(function(Dt){gt=gt||be.context[Dt].propDep}),gt||(Ja(ge,Ie,be.context),yt=!1);var je=be.framebuffer,qe=!1;je?(je.propDep?gt=qe=!0:je.contextDep&&gt&&(qe=!0),qe||ko(ge,Ie,je)):ko(ge,Ie,null),be.state.viewport&&be.state.viewport.propDep&&(gt=!0);function Ke(Dt){return Dt.contextDep&&gt||Dt.propDep}As(ge,Ie,be),$a(ge,Ie,be.state,function(Dt){return!Ke(Dt)}),(!be.profile||!Ke(be.profile))&&li(ge,Ie,be,!1,"a1"),be.contextDep=gt,be.needsContext=yt,be.needsFramebuffer=qe;var Ne=be.shader.progVar;if(Ne.contextDep&&gt||Ne.propDep)Me(ge,Ie,be,null);else{var Ue=Ne.append(ge,Ie);if(Ie(ge.shared.gl,".useProgram(",Ue,".program);"),be.shader.program)Me(ge,Ie,be,be.shader.program);else{Ie(ge.shared.vao,".setVAO(null);");var xe=ge.global.def("{}"),Ye=Ie.def(Ue,".id"),ht=Ie.def(xe,"[",Ye,"]");Ie(ge.cond(ht).then(ht,".call(this,a0,a1);").else(ht,"=",xe,"[",Ye,"]=",ge.link(function(Dt){return vi(Me,ge,be,Dt,2)}),"(",Ue,");",ht,".call(this,a0,a1);"))}}Object.keys(be.state).length>0&&Ie(ge.shared.current,".dirty=true;")}function vt(ge,be){var Ie=ge.proc("scope",3);ge.batchId="a2";var gt=ge.shared,yt=gt.current;Ja(ge,Ie,be.context),be.framebuffer&&be.framebuffer.append(ge,Ie),LS(Object.keys(be.state)).forEach(function(qe){var Ke=be.state[qe],Ne=Ke.append(ge,Ie);Ko(Ne)?Ne.forEach(function(Ue,xe){Ie.set(ge.next[qe],"["+xe+"]",Ue)}):Ie.set(gt.next,"."+qe,Ne)}),li(ge,Ie,be,!0,!0),[mu,Sf,$u,d1,uh].forEach(function(qe){var Ke=be.draw[qe];Ke&&Ie.set(gt.draw,"."+qe,""+Ke.append(ge,Ie))}),Object.keys(be.uniforms).forEach(function(qe){Ie.set(gt.uniforms,"["+Ee.id(qe)+"]",be.uniforms[qe].append(ge,Ie))}),Object.keys(be.attributes).forEach(function(qe){var Ke=be.attributes[qe].append(ge,Ie),Ne=ge.scopeAttrib(qe);Object.keys(new ot).forEach(function(Ue){Ie.set(Ne,"."+Ue,Ke[Ue])})}),be.scopeVAO&&Ie.set(gt.vao,".targetVAO",be.scopeVAO.append(ge,Ie));function je(qe){var Ke=be.shader[qe];Ke&&Ie.set(gt.shader,"."+qe,Ke.append(ge,Ie))}je(sd),je(ch),Object.keys(be.state).length>0&&(Ie(yt,".dirty=true;"),Ie.exit(yt,".dirty=true;")),Ie("a1(",ge.shared.context,",a0,",ge.batchId,");")}function Nn(ge){if(!(typeof ge!="object"||Ko(ge))){for(var be=Object.keys(ge),Ie=0;Ie<be.length;++Ie)if(Rr.isDynamic(ge[be[Ie]]))return!0;return!1}}function _i(ge,be,Ie){var gt=be.static[Ie];if(!gt||!Nn(gt))return;var yt=ge.global,je=Object.keys(gt),qe=!1,Ke=!1,Ne=!1,Ue=ge.global.def("{}");je.forEach(function(Ye){var ht=gt[Ye];if(Rr.isDynamic(ht)){typeof ht=="function"&&(ht=gt[Ye]=Rr.unbox(ht));var Dt=Tl(ht,null);qe=qe||Dt.thisDep,Ne=Ne||Dt.propDep,Ke=Ke||Dt.contextDep}else{switch(yt(Ue,".",Ye,"="),typeof ht){case"number":yt(ht);break;case"string":yt('"',ht,'"');break;case"object":Array.isArray(ht)&&yt("[",ht.join(),"]");break;default:yt(ge.link(ht));break}yt(";")}});function xe(Ye,ht){je.forEach(function(Dt){var Kt=gt[Dt];if(Rr.isDynamic(Kt)){var Wt=Ye.invoke(ht,Kt);ht(Ue,".",Dt,"=",Wt,";")}})}be.dynamic[Ie]=new Rr.DynamicVariable(jc,{thisDep:qe,contextDep:Ke,propDep:Ne,ref:Ue,append:xe}),delete be.static[Ie]}function Ia(ge,be,Ie,gt,yt){var je=qr();je.stats=je.link(yt),Object.keys(be.static).forEach(function(Ke){_i(je,be,Ke)}),Ts.forEach(function(Ke){_i(je,ge,Ke)});var qe=fo(ge,be,Ie,gt,je);return Jo(je,qe),vt(je,qe),St(je,qe),je.compile()}return{next:Zn,current:Xt,procs:(function(){var ge=qr(),be=ge.proc("poll"),Ie=ge.proc("refresh"),gt=ge.block();be(gt),Ie(gt);var yt=ge.shared,je=yt.gl,qe=yt.next,Ke=yt.current;gt(Ke,".dirty=false;"),ko(ge,be),ko(ge,Ie,null,!0);var Ne;gn&&(Ne=ge.link(gn)),De.oes_vertex_array_object&&Ie(ge.link(De.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Ue=0;Ue<ut.maxAttributes;++Ue){var xe=Ie.def(yt.attributes,"[",Ue,"]"),Ye=ge.cond(xe,".buffer");Ye.then(je,".enableVertexAttribArray(",Ue,");",je,".bindBuffer(",Tf,",",xe,".buffer.buffer);",je,".vertexAttribPointer(",Ue,",",xe,".size,",xe,".type,",xe,".normalized,",xe,".stride,",xe,".offset);").else(je,".disableVertexAttribArray(",Ue,");",je,".vertexAttrib4f(",Ue,",",xe,".x,",xe,".y,",xe,".z,",xe,".w);",xe,".buffer=null;"),Ie(Ye),gn&&Ie(Ne,".vertexAttribDivisorANGLE(",Ue,",",xe,".divisor);")}return Ie(ge.shared.vao,".currentVAO=null;",ge.shared.vao,".setVAO(",ge.shared.vao,".targetVAO);"),Object.keys(Mn).forEach(function(ht){var Dt=Mn[ht],Kt=gt.def(qe,".",ht),Wt=ge.block();Wt("if(",Kt,"){",je,".enable(",Dt,")}else{",je,".disable(",Dt,")}",Ke,".",ht,"=",Kt,";"),Ie(Wt),be("if(",Kt,"!==",Ke,".",ht,"){",Wt,"}")}),Object.keys(Vt).forEach(function(ht){var Dt=Vt[ht],Kt=Xt[ht],Wt,on,gr=ge.block();if(gr(je,".",Dt,"("),Ko(Kt)){var oi=Kt.length;Wt=ge.global.def(qe,".",ht),on=ge.global.def(Ke,".",ht),gr(F(oi,function(qn){return Wt+"["+qn+"]"}),");",F(oi,function(qn){return on+"["+qn+"]="+Wt+"["+qn+"];"}).join("")),be("if(",F(oi,function(qn){return Wt+"["+qn+"]!=="+on+"["+qn+"]"}).join("||"),"){",gr,"}")}else Wt=gt.def(qe,".",ht),on=gt.def(Ke,".",ht),gr(Wt,");",Ke,".",ht,"=",Wt,";"),be("if(",Wt,"!==",on,"){",gr,"}");Ie(gr)}),ge.compile()})(),compile:Ia}}function cp(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var kS=34918,S1=34919,$v=35007,T1=function(ae,Ee){if(!Ee.ext_disjoint_timer_query)return null;var De=[];function ut(){return De.pop()||Ee.ext_disjoint_timer_query.createQueryEXT()}function Ct(gn){De.push(gn)}var Qe=[];function Pt(gn){var zn=ut();Ee.ext_disjoint_timer_query.beginQueryEXT($v,zn),Qe.push(zn),un(Qe.length-1,Qe.length,gn)}function dn(){Ee.ext_disjoint_timer_query.endQueryEXT($v)}function cn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Pn=[];function yn(){return Pn.pop()||new cn}function En(gn){Pn.push(gn)}var pn=[];function un(gn,zn,Xt){var Zn=yn();Zn.startQueryIndex=gn,Zn.endQueryIndex=zn,Zn.sum=0,Zn.stats=Xt,pn.push(Zn)}var Tn=[],ot=[];function wt(){var gn,zn,Xt=Qe.length;if(Xt!==0){ot.length=Math.max(ot.length,Xt+1),Tn.length=Math.max(Tn.length,Xt+1),Tn[0]=0,ot[0]=0;var Zn=0;for(gn=0,zn=0;zn<Qe.length;++zn){var sn=Qe[zn];Ee.ext_disjoint_timer_query.getQueryObjectEXT(sn,S1)?(Zn+=Ee.ext_disjoint_timer_query.getQueryObjectEXT(sn,kS),Ct(sn)):Qe[gn++]=sn,Tn[zn+1]=Zn,ot[zn+1]=gn}for(Qe.length=gn,gn=0,zn=0;zn<pn.length;++zn){var Mn=pn[zn],Vt=Mn.startQueryIndex,Dn=Mn.endQueryIndex;Mn.sum+=Tn[Dn]-Tn[Vt];var vr=ot[Vt],Kr=ot[Dn];Kr===vr?(Mn.stats.gpuTime+=Mn.sum/1e6,En(Mn)):(Mn.startQueryIndex=vr,Mn.endQueryIndex=Kr,pn[gn++]=Mn)}pn.length=gn}}return{beginQuery:Pt,endQuery:dn,pushScopeStats:un,update:wt,getNumPendingQueries:function(){return Qe.length},clear:function(){De.push.apply(De,Qe);for(var gn=0;gn<De.length;gn++)Ee.ext_disjoint_timer_query.deleteQueryEXT(De[gn]);Qe.length=0,De.length=0},restore:function(){Qe.length=0,De.length=0}}},N0=16384,DS=256,zb=1024,wc=34962,A1="webglcontextlost",w1="webglcontextrestored",$b=1,I0=2,BS=3;function O1(ae,Ee){for(var De=0;De<ae.length;++De)if(ae[De]===Ee)return De;return-1}function dh(ae){var Ee=H(ae);if(!Ee)return null;var De=Ee.gl,ut=De.getContextAttributes(),Ct=De.isContextLost(),Qe=W(De,Ee);if(!Qe)return null;var Pt=pi(),dn=cp(),cn=Qe.extensions,Pn=T1(De,cn),yn=va(),En=De.drawingBufferWidth,pn=De.drawingBufferHeight,un={tick:0,time:0,viewportWidth:En,viewportHeight:pn,framebufferWidth:En,framebufferHeight:pn,drawingBufferWidth:En,drawingBufferHeight:pn,pixelRatio:Ee.pixelRatio},Tn={},ot={elements:null,primitive:4,count:-1,offset:0,instances:-1},wt=iu(De,cn),gn=pv(De,dn,Ee,Xt),zn=vg(De,cn,wt,dn,gn);function Xt(kr){return zn.destroyBuffer(kr)}var Zn=Vy(De,cn,gn,dn),sn=f1(De,Pt,dn,Ee),Mn=xv(De,cn,wt,function(){vr.procs.poll()},un,dn,Ee),Vt=za(De,cn,wt,dn,Ee),Dn=gg(De,cn,wt,Mn,Vt,dn),vr=x1(De,Pt,cn,wt,gn,Zn,Mn,Dn,Tn,zn,sn,ot,un,Pn,Ee),Kr=_f(De,Dn,vr.procs.poll,un,ut,cn,wt),Un=vr.next,fn=De.canvas,Ht=[],qr=[],ki=[],pr=[Ee.onDestroy],ni=null;function Qr(){if(Ht.length===0){Pn&&Pn.update(),ni=null;return}ni=ei.next(Qr),$a();for(var kr=Ht.length-1;kr>=0;--kr){var vi=Ht[kr];vi&&vi(un,null,0)}De.flush(),Pn&&Pn.update()}function ui(){!ni&&Ht.length>0&&(ni=ei.next(Qr))}function zi(){ni&&(ei.cancel(Qr),ni=null)}function xo(kr){kr.preventDefault(),Ct=!0,zi(),qr.forEach(function(vi){vi()})}function yi(kr){De.getError(),Ct=!1,Qe.restore(),sn.restore(),gn.restore(),Mn.restore(),Vt.restore(),Dn.restore(),zn.restore(),Pn&&Pn.restore(),vr.procs.refresh(),ui(),ki.forEach(function(vi){vi()})}fn&&(fn.addEventListener(A1,xo,!1),fn.addEventListener(w1,yi,!1));function Oi(){Ht.length=0,zi(),fn&&(fn.removeEventListener(A1,xo),fn.removeEventListener(w1,yi)),sn.clear(),Dn.clear(),Vt.clear(),Mn.clear(),Zn.clear(),gn.clear(),zn.clear(),Pn&&Pn.clear(),pr.forEach(function(kr){kr()})}function Lo(kr){de(!!kr,"invalid args to regl({...})"),de.type(kr,"object","invalid args to regl({...})");function vi(yt){var je=r({},yt);delete je.uniforms,delete je.attributes,delete je.context,delete je.vao,"stencil"in je&&je.stencil.op&&(je.stencil.opBack=je.stencil.opFront=je.stencil.op,delete je.stencil.op);function qe(Ke){if(Ke in je){var Ne=je[Ke];delete je[Ke],Object.keys(Ne).forEach(function(Ue){je[Ke+"."+Ue]=Ne[Ue]})}}return qe("blend"),qe("depth"),qe("cull"),qe("stencil"),qe("polygonOffset"),qe("scissor"),qe("sample"),"vao"in yt&&(je.vao=yt.vao),je}function Di(yt){var je={},qe={};return Object.keys(yt).forEach(function(Ke){var Ne=yt[Ke];Rr.isDynamic(Ne)?qe[Ke]=Rr.unbox(Ne,Ke):je[Ke]=Ne}),{dynamic:qe,static:je}}var Jo=Di(kr.context||{}),Al=Di(kr.uniforms||{}),Me=Di(kr.attributes||{}),St=Di(vi(kr)),vt={gpuTime:0,cpuTime:0,count:0},Nn=vr.compile(St,Me,Al,Jo,vt),_i=Nn.draw,Ia=Nn.batch,ge=Nn.scope,be=[];function Ie(yt){for(;be.length<yt;)be.push(null);return be}function gt(yt,je){var qe;if(Ct&&de.raise("context lost"),typeof yt=="function")return ge.call(this,null,yt,0);if(typeof je=="function")if(typeof yt=="number")for(qe=0;qe<yt;++qe)ge.call(this,null,je,qe);else if(Array.isArray(yt))for(qe=0;qe<yt.length;++qe)ge.call(this,yt[qe],je,qe);else return ge.call(this,yt,je,0);else if(typeof yt=="number"){if(yt>0)return Ia.call(this,Ie(yt|0),yt|0)}else if(Array.isArray(yt)){if(yt.length)return Ia.call(this,yt,yt.length)}else return _i.call(this,yt)}return r(gt,{stats:vt})}var Ba=Dn.setFBO=Lo({framebuffer:Rr.define.call(null,$b,"framebuffer")});function fo(kr,vi){var Di=0;vr.procs.poll();var Jo=vi.color;Jo&&(De.clearColor(+Jo[0]||0,+Jo[1]||0,+Jo[2]||0,+Jo[3]||0),Di|=N0),"depth"in vi&&(De.clearDepth(+vi.depth),Di|=DS),"stencil"in vi&&(De.clearStencil(vi.stencil|0),Di|=zb),de(!!Di,"called regl.clear with no buffer specified"),De.clear(Di)}function Ja(kr){if(de(typeof kr=="object"&&kr,"regl.clear() takes an object as input"),"framebuffer"in kr)if(kr.framebuffer&&kr.framebuffer_reglType==="framebufferCube")for(var vi=0;vi<6;++vi)Ba(r({framebuffer:kr.framebuffer.faces[vi]},kr),fo);else Ba(kr,fo);else fo(null,kr)}function ko(kr){de.type(kr,"function","regl.frame() callback must be a function"),Ht.push(kr);function vi(){var Di=O1(Ht,kr);de(Di>=0,"cannot cancel a frame twice");function Jo(){var Al=O1(Ht,Jo);Ht[Al]=Ht[Ht.length-1],Ht.length-=1,Ht.length<=0&&zi()}Ht[Di]=Jo}return ui(),{cancel:vi}}function As(){var kr=Un.viewport,vi=Un.scissor_box;kr[0]=kr[1]=vi[0]=vi[1]=0,un.viewportWidth=un.framebufferWidth=un.drawingBufferWidth=kr[2]=vi[2]=De.drawingBufferWidth,un.viewportHeight=un.framebufferHeight=un.drawingBufferHeight=kr[3]=vi[3]=De.drawingBufferHeight}function $a(){un.tick+=1,un.time=li(),As(),vr.procs.poll()}function fa(){As(),vr.procs.refresh(),Pn&&Pn.update()}function li(){return(va()-yn)/1e3}fa();function ws(kr,vi){de.type(vi,"function","listener callback must be a function");var Di;switch(kr){case"frame":return ko(vi);case"lost":Di=qr;break;case"restore":Di=ki;break;case"destroy":Di=pr;break;default:de.raise("invalid event, must be one of frame,lost,restore,destroy")}return Di.push(vi),{cancel:function(){for(var Jo=0;Jo<Di.length;++Jo)if(Di[Jo]===vi){Di[Jo]=Di[Di.length-1],Di.pop();return}}}}var oa=r(Lo,{clear:Ja,prop:Rr.define.bind(null,$b),context:Rr.define.bind(null,I0),this:Rr.define.bind(null,BS),draw:Lo({}),buffer:function(kr){return gn.create(kr,wc,!1,!1)},elements:function(kr){return Zn.create(kr,!1)},texture:Mn.create2D,cube:Mn.createCube,renderbuffer:Vt.create,framebuffer:Dn.create,framebufferCube:Dn.createCube,vao:zn.createVAO,attributes:ut,frame:ko,on:ws,limits:wt,hasExtension:function(kr){return wt.extensions.indexOf(kr.toLowerCase())>=0},read:Kr,destroy:Oi,_gl:De,_refresh:fa,poll:function(){$a(),Pn&&Pn.update()},now:li,stats:dn});return Ee.onDone(null,oa),oa}return dh}))})(zk)),zk.exports}var Jqt=Qqt();const eZt=Ni(Jqt);var tZt=class{constructor(t,e){const{buffer:n,offset:r,stride:i,normalized:a,size:o,divisor:s}=e;this.buffer=n,this.attribute={buffer:n.get(),offset:r||0,stride:i||0,normalized:a||!1,divisor:s||0},o&&(this.attribute.size=o)}get(){return this.attribute}updateBuffer(t){this.buffer.subData(t)}destroy(){this.buffer.destroy()}},nZt={[se.POINTS]:"points",[se.LINES]:"lines",[se.LINE_LOOP]:"line loop",[se.LINE_STRIP]:"line strip",[se.TRIANGLES]:"triangles",[se.TRIANGLE_FAN]:"triangle fan",[se.TRIANGLE_STRIP]:"triangle strip"},z6e={[se.STATIC_DRAW]:"static",[se.DYNAMIC_DRAW]:"dynamic",[se.STREAM_DRAW]:"stream"},cre={[se.BYTE]:"int8",[se.INT]:"int32",[se.UNSIGNED_BYTE]:"uint8",[se.UNSIGNED_SHORT]:"uint16",[se.UNSIGNED_INT]:"uint32",[se.FLOAT]:"float"},rZt={[se.ALPHA]:"alpha",[se.LUMINANCE]:"luminance",[se.LUMINANCE_ALPHA]:"luminance alpha",[se.RGB]:"rgb",[se.RGBA]:"rgba",[se.RGBA4]:"rgba4",[se.RGB5_A1]:"rgb5 a1",[se.RGB565]:"rgb565",[se.DEPTH_COMPONENT]:"depth",[se.DEPTH_STENCIL]:"depth stencil"},iZt={[se.DONT_CARE]:"dont care",[se.NICEST]:"nice",[se.FASTEST]:"fast"},NEe={[se.NEAREST]:"nearest",[se.LINEAR]:"linear",[se.LINEAR_MIPMAP_LINEAR]:"mipmap",[se.NEAREST_MIPMAP_LINEAR]:"nearest mipmap linear",[se.LINEAR_MIPMAP_NEAREST]:"linear mipmap nearest",[se.NEAREST_MIPMAP_NEAREST]:"nearest mipmap nearest"},IEe={[se.REPEAT]:"repeat",[se.CLAMP_TO_EDGE]:"clamp",[se.MIRRORED_REPEAT]:"mirror"},aZt={[se.NONE]:"none",[se.BROWSER_DEFAULT_WEBGL]:"browser"},oZt={[se.NEVER]:"never",[se.ALWAYS]:"always",[se.LESS]:"less",[se.LEQUAL]:"lequal",[se.GREATER]:"greater",[se.GEQUAL]:"gequal",[se.EQUAL]:"equal",[se.NOTEQUAL]:"notequal"},LEe={[se.FUNC_ADD]:"add",[se.MIN_EXT]:"min",[se.MAX_EXT]:"max",[se.FUNC_SUBTRACT]:"subtract",[se.FUNC_REVERSE_SUBTRACT]:"reverse subtract"},DL={[se.ZERO]:"zero",[se.ONE]:"one",[se.SRC_COLOR]:"src color",[se.ONE_MINUS_SRC_COLOR]:"one minus src color",[se.SRC_ALPHA]:"src alpha",[se.ONE_MINUS_SRC_ALPHA]:"one minus src alpha",[se.DST_COLOR]:"dst color",[se.ONE_MINUS_DST_COLOR]:"one minus dst color",[se.DST_ALPHA]:"dst alpha",[se.ONE_MINUS_DST_ALPHA]:"one minus dst alpha",[se.CONSTANT_COLOR]:"constant color",[se.ONE_MINUS_CONSTANT_COLOR]:"one minus constant color",[se.CONSTANT_ALPHA]:"constant alpha",[se.ONE_MINUS_CONSTANT_ALPHA]:"one minus constant alpha",[se.SRC_ALPHA_SATURATE]:"src alpha saturate"},sZt={[se.NEVER]:"never",[se.ALWAYS]:"always",[se.LESS]:"less",[se.LEQUAL]:"lequal",[se.GREATER]:"greater",[se.GEQUAL]:"gequal",[se.EQUAL]:"equal",[se.NOTEQUAL]:"notequal"},DT={[se.ZERO]:"zero",[se.KEEP]:"keep",[se.REPLACE]:"replace",[se.INVERT]:"invert",[se.INCR]:"increment",[se.DECR]:"decrement",[se.INCR_WRAP]:"increment wrap",[se.DECR_WRAP]:"decrement wrap"},lZt={[se.FRONT]:"front",[se.BACK]:"back"},cZt=class{constructor(t,e){this.isDestroyed=!1;const{data:n,usage:r,type:i}=e;this.buffer=t.buffer({data:n,usage:z6e[r||se.STATIC_DRAW],type:cre[i||se.UNSIGNED_BYTE]})}get(){return this.buffer}destroy(){this.isDestroyed||this.buffer.destroy(),this.isDestroyed=!0}subData({data:t,offset:e}){this.buffer.subdata(t,e)}},uZt=class{constructor(t,e){const{data:n,usage:r,type:i,count:a}=e;this.elements=t.elements({data:n,usage:z6e[r||se.STATIC_DRAW],type:cre[i||se.UNSIGNED_BYTE],count:a})}get(){return this.elements}subData({data:t}){this.elements.subdata(t)}destroy(){}},fZt=class{constructor(t,e){const{width:n,height:r,color:i,colors:a}=e,o={width:n,height:r};Array.isArray(a)&&(o.colors=a.map(s=>s.get())),i&&typeof i!="boolean"&&(o.color=i.get()),this.framebuffer=t.framebuffer(o)}get(){return this.framebuffer}destroy(){this.framebuffer.destroy()}resize({width:t,height:e}){this.framebuffer.resize(t,e)}},hZt=Object.defineProperty,dZt=Object.defineProperties,pZt=Object.getOwnPropertyDescriptors,kEe=Object.getOwnPropertySymbols,gZt=Object.prototype.hasOwnProperty,vZt=Object.prototype.propertyIsEnumerable,DEe=(t,e,n)=>e in t?hZt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,U2=(t,e)=>{for(var n in e||(e={}))gZt.call(e,n)&&DEe(t,n,e[n]);if(kEe)for(var n of kEe(e))vZt.call(e,n)&&DEe(t,n,e[n]);return t},mZt=(t,e)=>dZt(t,pZt(e)),{isPlainObject:yZt,isTypedArray:_Zt}=gs,bZt=class{constructor(t,e){this.destroyed=!1,this.uniforms={},this.reGl=t;const{vs:n,fs:r,attributes:i,uniforms:a,primitive:o,count:s,elements:l,depth:c,cull:u,instances:f}=e,h={glslVersion:"#version 100",explicitBindingLocations:!1,separateSamplerTextures:!1,viewportOrigin:Yg.LOWER_LEFT,clipSpaceNearZ:hw.NEGATIVE_ONE},d={};this.options=e,a&&(this.uniforms=this.extractUniforms(a),Object.keys(a).forEach(_=>{d[_]=t.prop(_)}));const p={};Object.keys(i).forEach(_=>{p[_]=i[_].get()});const g=u1e(vw(h,"frag",r,null,!1)),v=u1e(vw(h,"vert",n,null,!1)),y={attributes:p,frag:g,uniforms:d,vert:v,colorMask:t.prop("colorMask"),lineWidth:1,blend:{enable:t.prop("blend.enable"),func:t.prop("blend.func"),equation:t.prop("blend.equation"),color:t.prop("blend.color")},stencil:{enable:t.prop("stencil.enable"),mask:t.prop("stencil.mask"),func:t.prop("stencil.func"),opFront:t.prop("stencil.opFront"),opBack:t.prop("stencil.opBack")},primitive:nZt[o===void 0?se.TRIANGLES:o]};f&&(y.instances=f),s?y.count=s:l&&(y.elements=l.get()),this.initDepthDrawParams({depth:c},y),this.initCullDrawParams({cull:u},y),this.drawCommand=t(y),this.drawParams=y}updateAttributesAndElements(t,e){const n={};Object.keys(t).forEach(r=>{n[r]=t[r].get()}),this.drawParams.attributes=n,this.drawParams.elements=e.get(),this.drawCommand=this.reGl(this.drawParams)}updateAttributes(t){const e={};Object.keys(t).forEach(n=>{e[n]=t[n].get()}),this.drawParams.attributes=e,this.drawCommand=this.reGl(this.drawParams)}addUniforms(t){this.uniforms=U2(U2({},this.uniforms),this.extractUniforms(t))}draw(t,e){if(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)return;const n=U2(U2({},this.uniforms),this.extractUniforms(t.uniforms||{})),r={};Object.keys(n).forEach(i=>{const a=typeof n[i];a==="boolean"||a==="number"||Array.isArray(n[i])||n[i].BYTES_PER_ELEMENT?r[i]=n[i]:r[i]=n[i].get()}),r.blend=e?this.getBlendDrawParams({blend:{enable:!1}}):this.getBlendDrawParams(t),r.stencil=this.getStencilDrawParams(t),r.colorMask=this.getColorMaskDrawParams(t,e),this.drawCommand(r)}destroy(){var t,e;(e=(t=this.drawParams)==null?void 0:t.elements)==null||e.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(n=>{n?.destroy()}),this.destroyed=!0}initDepthDrawParams({depth:t},e){t&&(e.depth={enable:t.enable===void 0?!0:!!t.enable,mask:t.mask===void 0?!0:!!t.mask,func:oZt[t.func||se.LESS],range:t.range||[0,1]})}getBlendDrawParams({blend:t}){const{enable:e,func:n,equation:r,color:i=[0,0,0,0]}=t||{};return{enable:!!e,func:{srcRGB:DL[n&&n.srcRGB||se.SRC_ALPHA],srcAlpha:DL[n&&n.srcAlpha||se.SRC_ALPHA],dstRGB:DL[n&&n.dstRGB||se.ONE_MINUS_SRC_ALPHA],dstAlpha:DL[n&&n.dstAlpha||se.ONE_MINUS_SRC_ALPHA]},equation:{rgb:LEe[r&&r.rgb||se.FUNC_ADD],alpha:LEe[r&&r.alpha||se.FUNC_ADD]},color:i}}getStencilDrawParams({stencil:t}){const{enable:e,mask:n=-1,func:r={cmp:se.ALWAYS,ref:0,mask:-1},opFront:i={fail:se.KEEP,zfail:se.KEEP,zpass:se.KEEP},opBack:a={fail:se.KEEP,zfail:se.KEEP,zpass:se.KEEP}}=t||{};return{enable:!!e,mask:n,func:mZt(U2({},r),{cmp:sZt[r.cmp]}),opFront:{fail:DT[i.fail],zfail:DT[i.zfail],zpass:DT[i.zpass]},opBack:{fail:DT[a.fail],zfail:DT[a.zfail],zpass:DT[a.zpass]}}}getColorMaskDrawParams({stencil:t},e){return t?.enable&&t.opFront&&!e?[!1,!1,!1,!1]:[!0,!0,!0,!0]}initCullDrawParams({cull:t},e){if(t){const{enable:n,face:r=se.BACK}=t;e.cull={enable:!!n,face:lZt[r]}}}extractUniforms(t){const e={};return Object.keys(t).forEach(n=>{this.extractUniformsRecursively(n,t[n],e,"")}),e}extractUniformsRecursively(t,e,n,r){if(e===null||typeof e=="number"||typeof e=="boolean"||Array.isArray(e)&&typeof e[0]=="number"||_Zt(e)||e===""||"resize"in e){n[`${r&&r+"."}${t}`]=e;return}yZt(e)&&Object.keys(e).forEach(i=>{this.extractUniformsRecursively(i,e[i],n,`${r&&r+"."}${t}`)}),Array.isArray(e)&&e.forEach((i,a)=>{Object.keys(i).forEach(o=>{this.extractUniformsRecursively(o,i[o],n,`${r&&r+"."}${t}[${a}]`)})})}},EZt=class{constructor(t,e){this.isDestroy=!1;const{data:n,type:r=se.UNSIGNED_BYTE,width:i,height:a,flipY:o=!1,format:s=se.RGBA,mipmap:l=!1,wrapS:c=se.CLAMP_TO_EDGE,wrapT:u=se.CLAMP_TO_EDGE,aniso:f=0,alignment:h=1,premultiplyAlpha:d=!1,mag:p=se.NEAREST,min:g=se.NEAREST,colorSpace:v=se.BROWSER_DEFAULT_WEBGL,x:y=0,y:_=0,copy:E=!1}=e;this.width=i,this.height=a;const x={width:i,height:a,type:cre[r],format:rZt[s],wrapS:IEe[c],wrapT:IEe[u],mag:NEe[p],min:NEe[g],alignment:h,flipY:o,colorSpace:aZt[v],premultiplyAlpha:d,aniso:f,x:y,y:_,copy:E};n&&(x.data=n),typeof l=="number"?x.mipmap=iZt[l]:typeof l=="boolean"&&(x.mipmap=l),this.texture=t.texture(x)}get(){return this.texture}update(t={}){this.texture(t)}bind(){this.texture._texture.bind()}resize({width:t,height:e}){this.texture.resize(t,e),this.width=t,this.height=e}getSize(){return[this.width,this.height]}destroy(){var t;this.isDestroy||(t=this.texture)==null||t.destroy(),this.isDestroy=!0}},uV=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),xZt=class{constructor(){this.uniformBuffers=[],this.queryVerdorInfo=()=>"WebGL1",this.createModel=t=>new bZt(this.gl,t),this.createAttribute=t=>new tZt(this.gl,t),this.createBuffer=t=>new cZt(this.gl,t),this.createElements=t=>new uZt(this.gl,t),this.createTexture2D=t=>new EZt(this.gl,t),this.createFramebuffer=t=>new fZt(this.gl,t),this.useFramebuffer=(t,e)=>{this.gl({framebuffer:t?t.get():null})(e)},this.useFramebufferAsync=(t,e)=>uV(this,null,function*(){this.gl({framebuffer:t?t.get():null})(e)}),this.clear=t=>{var e;const{color:n,depth:r,stencil:i,framebuffer:a=null}=t,o={color:n,depth:r,stencil:i};o.framebuffer=a===null?a:a.get(),(e=this.gl)==null||e.clear(o)},this.viewport=({x:t,y:e,width:n,height:r})=>{this.gl._gl.viewport(t,e,n,r),this.width=n,this.height=r,this.gl._refresh()},this.readPixels=t=>{const{framebuffer:e,x:n,y:r,width:i,height:a}=t,o={x:n,y:r,width:i,height:a};return e&&(o.framebuffer=e.get()),this.gl.read(o)},this.readPixelsAsync=t=>uV(this,null,function*(){return this.readPixels(t)}),this.getViewportSize=()=>({width:this.gl._gl.drawingBufferWidth,height:this.gl._gl.drawingBufferHeight}),this.getContainer=()=>{var t;return(t=this.canvas)==null?void 0:t.parentElement},this.getCanvas=()=>this.canvas,this.getGLContext=()=>this.gl._gl,this.destroy=()=>{var t,e,n;this.canvas=null,(n=(e=(t=this.gl)==null?void 0:t._gl)==null?void 0:e.getExtension("WEBGL_lose_context"))==null||n.loseContext(),this.gl.destroy(),this.gl=null}}init(t,e,n){return uV(this,null,function*(){this.canvas=t,n?this.gl=n:this.gl=yield new Promise((r,i)=>{eZt({canvas:this.canvas,attributes:{alpha:!0,antialias:e.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,stencil:e.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture","WEBGL_lose_context"],profile:!0,onDone:(a,o)=>{(a||!o)&&i(a),r(o)}})}),this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")}})}getPointSizeRange(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}testExtension(t){return!!this.getGLContext().getExtension(t)}setState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}setBaseState(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}setCustomLayerDefaults(){const t=this.getGLContext();t.disable(t.CULL_FACE)}setDirty(t){this.isDirty=t}getDirty(){return this.isDirty}beginFrame(){}endFrame(){}},fV=["selectstart","selecting","selectend"],SZt=class extends ku.EventEmitter{constructor(t,e={}){super(),this.isEnable=!1,this.onDragStart=n=>{this.box.style.display="block",this.startEvent=this.endEvent=n,this.syncBoxBound(),this.emit("selectstart",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragging=n=>{this.endEvent=n,this.syncBoxBound(),this.emit("selecting",this.getLngLatBox(),this.startEvent,this.endEvent)},this.onDragEnd=n=>{this.endEvent=n,this.box.style.display="none",this.emit("selectend",this.getLngLatBox(),this.startEvent,this.endEvent)},this.scene=t,this.options=e}get container(){return this.scene.getMapService().getMarkerContainer()}enable(){if(this.isEnable)return;const{className:t}=this.options;if(this.scene.setMapStatus({dragEnable:!1}),this.container.style.cursor="crosshair",!this.box){const e=is("div",void 0,this.container);e.classList.add("l7-select-box"),t&&e.classList.add(t),e.style.display="none",this.box=e}this.scene.on("dragstart",this.onDragStart),this.scene.on("dragging",this.onDragging),this.scene.on("dragend",this.onDragEnd),this.isEnable=!0}disable(){this.isEnable&&(this.scene.setMapStatus({dragEnable:!0}),this.container.style.cursor="auto",this.scene.off("dragstart",this.onDragStart),this.scene.off("dragging",this.onDragging),this.scene.off("dragend",this.onDragEnd),this.isEnable=!1)}syncBoxBound(){const{x:t,y:e}=this.startEvent,{x:n,y:r}=this.endEvent,i=Math.min(t,n),a=Math.min(e,r),o=Math.abs(t-n),s=Math.abs(e-r);this.box.style.top=`${a}px`,this.box.style.left=`${i}px`,this.box.style.width=`${o}px`,this.box.style.height=`${s}px`}getLngLatBox(){const{lngLat:{lng:t,lat:e}}=this.startEvent,{lngLat:{lng:n,lat:r}}=this.endEvent;return yFt([[t,e],[n,r]])}},TZt=Object.defineProperty,AZt=Object.defineProperties,wZt=Object.getOwnPropertyDescriptors,BEe=Object.getOwnPropertySymbols,OZt=Object.prototype.hasOwnProperty,CZt=Object.prototype.propertyIsEnumerable,FEe=(t,e,n)=>e in t?TZt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,RZt=(t,e)=>{for(var n in e||(e={}))OZt.call(e,n)&&FEe(t,n,e[n]);if(BEe)for(var n of BEe(e))CZt.call(e,n)&&FEe(t,n,e[n]);return t},MZt=(t,e)=>AZt(t,wZt(e)),j2=(t,e,n)=>new Promise((r,i)=>{var a=l=>{try{s(n.next(l))}catch(c){i(c)}},o=l=>{try{s(n.throw(l))}catch(c){i(c)}},s=l=>l.done?r(l.value):Promise.resolve(l.value).then(a,o);s((n=n.apply(t,e)).next())}),PZt=class{constructor(t){const{id:e,map:n,renderer:r="device"}=t,i=s7t();this.container=i,n.setContainer(i,e),r==="regl"?i.rendererService=new xZt:i.rendererService=new Zqt,this.sceneService=i.sceneService,this.mapService=i.mapService,this.iconService=i.iconService,this.fontService=i.fontService,this.controlService=i.controlService,this.layerService=i.layerService,this.debugService=i.debugService,this.debugService.setEnable(t.debug),this.markerService=i.markerService,this.interactionService=i.interactionService,this.popupService=i.popupService,this.boxSelect=new SZt(this,{}),this.initComponent(e),this.sceneService.init(t),this.initControl()}get map(){return this.mapService.map}get loaded(){return this.sceneService.loaded}getServiceContainer(){return this.container}getSize(){return this.mapService.getSize()}getMinZoom(){return this.mapService.getMinZoom()}getMaxZoom(){return this.mapService.getMaxZoom()}getType(){return this.mapService.getType()}getMapContainer(){return this.mapService.getMapContainer()}getMapCanvasContainer(){return this.mapService.getMapCanvasContainer()}getMapService(){return this.mapService}getDebugService(){return this.debugService}exportPng(t){return j2(this,null,function*(){return this.sceneService.exportPng(t)})}exportMap(t){return j2(this,null,function*(){return this.sceneService.exportPng(t)})}registerRenderService(t){this.sceneService.loaded?new t(this).init():this.on("loaded",()=>{new t(this).init()})}setBgColor(t){this.mapService.setBgColor(t)}addLayer(t){this.loaded?this.preAddLayer(t):this.once("loaded",()=>{this.preAddLayer(t)})}preAddLayer(t){const e=sR(this.container);if(t.setContainer(e),this.sceneService.addLayer(t),t.inited){this.initTileLayer(t);const n=this.initMask(t);this.addMask(n,t.id)}else t.on("inited",()=>{this.initTileLayer(t);const n=this.initMask(t);this.addMask(n,t.id)})}initMask(t){const{mask:e,maskfence:n,maskColor:r="#000",maskOpacity:i=0}=t.getLayerConfig();return!e||!n?void 0:new u6e().source(n).shape("fill").style({color:r,opacity:i})}addMask(t,e){if(!t)return;const n=this.getLayer(e);if(n){const r=sR(this.container);t.setContainer(r),n.addMaskLayer(t),this.sceneService.addMask(t)}else console.warn("parent layer not find!")}getPickedLayer(){return this.layerService.pickedLayerId}getLayers(){return this.layerService.getLayers()}getLayer(t){return this.layerService.getLayer(t)}getLayerByName(t){return this.layerService.getLayerByName(t)}removeLayer(t,e){return j2(this,null,function*(){yield this.layerService.remove(t,e)})}removeAllLayer(){return j2(this,null,function*(){yield this.layerService.removeAllLayers()})}render(){this.sceneService.render()}setEnableRender(t){this.layerService.setEnableRender(t)}addIconFont(t,e){this.fontService.addIconFont(t,e)}addIconFonts(t){t.forEach(([e,n])=>{this.fontService.addIconFont(e,n)})}addFontFace(t,e){this.fontService.once("fontloaded",n=>{this.emit("fontloaded",n)}),this.fontService.addFontFace(t,e)}addImage(t,e){return j2(this,null,function*(){yield this.iconService.addImage(t,e)})}hasImage(t){return this.iconService.hasImage(t)}removeImage(t){this.iconService.removeImage(t)}addIconFontGlyphs(t,e){this.fontService.addIconGlyphs(e)}addControl(t){this.controlService.addControl(t,this.container)}removeControl(t){this.controlService.removeControl(t)}getControlByName(t){return this.controlService.getControlByName(t)}addMarker(t){this.markerService.addMarker(t)}addMarkerLayer(t){this.markerService.addMarkerLayer(t)}removeMarkerLayer(t){this.markerService.removeMarkerLayer(t)}removeAllMarkers(){this.markerService.removeAllMarkers()}removeAllMakers(){console.warn("removeAllMakers  removeAllMarkers"),this.markerService.removeAllMarkers()}addPopup(t){this.popupService.addPopup(t)}removePopup(t){this.popupService.removePopup(t)}on(t,e){var n;fV.includes(t)?(n=this.boxSelect)==null||n.on(t,e):pL.includes(t)?this.sceneService.on(t,e):this.mapService.on(t,e)}once(t,e){var n;fV.includes(t)?(n=this.boxSelect)==null||n.once(t,e):pL.includes(t)?this.sceneService.once(t,e):this.mapService.once(t,e)}emit(t,e){pL.includes(t)?this.sceneService.emit(t,e):this.mapService.on(t,e)}off(t,e){var n;fV.includes(t)?(n=this.boxSelect)==null||n.off(t,e):pL.includes(t)?this.sceneService.off(t,e):this.mapService.off(t,e)}getZoom(){return this.mapService.getZoom()}getCenter(t){return this.mapService.getCenter(t)}setCenter(t,e){return this.mapService.setCenter(t,e)}getPitch(){return this.mapService.getPitch()}setPitch(t){return this.mapService.setPitch(t)}getRotation(){return this.mapService.getRotation()}getBounds(){return this.mapService.getBounds()}setRotation(t){this.mapService.setRotation(t)}zoomIn(){this.mapService.zoomIn()}zoomOut(){this.mapService.zoomOut()}panTo(t){this.mapService.panTo(t)}panBy(t,e){this.mapService.panBy(t,e)}getContainer(){return this.mapService.getContainer()}setZoom(t){this.mapService.setZoom(t)}fitBounds(t,e){const{fitBoundsOptions:n,animate:r}=this.sceneService.getSceneConfig();this.mapService.fitBounds(t,e||MZt(RZt({},n),{animate:r}))}setZoomAndCenter(t,e){this.mapService.setZoomAndCenter(t,e)}setMapStyle(t){this.mapService.setMapStyle(t)}setMapStatus(t){this.mapService.setMapStatus(t)}pixelToLngLat(t){return this.mapService.pixelToLngLat(t)}lngLatToPixel(t){return this.mapService.lngLatToPixel(t)}containerToLngLat(t){return this.mapService.containerToLngLat(t)}lngLatToContainer(t){return this.mapService.lngLatToContainer(t)}destroy(){this.sceneService.destroy()}registerPostProcessingPass(t){this.container.postProcessingPass.name=new t}enableShaderPick(){this.layerService.enableShaderPick()}diasbleShaderPick(){this.layerService.disableShaderPick()}enableBoxSelect(t=!0){this.boxSelect.enable(),t&&this.boxSelect.once("selectend",()=>{this.disableBoxSelect()})}disableBoxSelect(){this.boxSelect.disable()}static addProtocol(t,e){Ak.REGISTERED_PROTOCOLS[t]=e}static removeProtocol(t){delete Ak.REGISTERED_PROTOCOLS[t]}getProtocol(t){return Ak.REGISTERED_PROTOCOLS[t]}startAnimate(){this.layerService.startAnimate()}stopAnimate(){this.layerService.stopAnimate()}getPointSizeRange(){return this.sceneService.getPointSizeRange()}initComponent(t){this.controlService.init({container:_5(t)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}initControl(){const{logoVisible:t,logoPosition:e}=this.sceneService.getSceneConfig();t&&this.addControl(new pjt({position:e}))}initTileLayer(t){t.getSource().isTile&&(t.tileLayer=new SWt(t))}},NZt=function(t){return function(e,n){var r=jt.useRef(!1);t(function(){return function(){r.current=!1}},[]),t(function(){if(!r.current)r.current=!0;else return e()},n)}};const UEe=NZt(jt.useEffect);function IZt(t){var e=jt.useRef(t);return e.current=t,e}var $6e=function(t){var e=IZt(t);jt.useEffect(function(){return function(){e.current()}},[])},hV,jEe;function LZt(){if(jEe)return hV;jEe=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(a,o){if(a===o)return!0;if(a&&o&&typeof a=="object"&&typeof o=="object"){if(a.constructor!==o.constructor)return!1;var s,l,c;if(Array.isArray(a)){if(s=a.length,s!=o.length)return!1;for(l=s;l--!==0;)if(!i(a[l],o[l]))return!1;return!0}var u;if(e&&a instanceof Map&&o instanceof Map){if(a.size!==o.size)return!1;for(u=a.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;for(u=a.entries();!(l=u.next()).done;)if(!i(l.value[1],o.get(l.value[0])))return!1;return!0}if(n&&a instanceof Set&&o instanceof Set){if(a.size!==o.size)return!1;for(u=a.entries();!(l=u.next()).done;)if(!o.has(l.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(o)){if(s=a.length,s!=o.length)return!1;for(l=s;l--!==0;)if(a[l]!==o[l])return!1;return!0}if(a.constructor===RegExp)return a.source===o.source&&a.flags===o.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof o.valueOf=="function")return a.valueOf()===o.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof o.toString=="function")return a.toString()===o.toString();if(c=Object.keys(a),s=c.length,s!==Object.keys(o).length)return!1;for(l=s;l--!==0;)if(!Object.prototype.hasOwnProperty.call(o,c[l]))return!1;if(t&&a instanceof Element)return!1;for(l=s;l--!==0;)if(!((c[l]==="_owner"||c[l]==="__v"||c[l]==="__o")&&a.$$typeof)&&!i(a[c[l]],o[c[l]]))return!1;return!0}return a!==a&&o!==o}return hV=function(o,s){try{return i(o,s)}catch(l){if((l.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw l}},hV}var kZt=LZt();const DZt=Ni(kZt);var BZt=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=[]),DZt(t,e)},FZt=function(t){return function(e,n){var r=jt.useRef(void 0),i=jt.useRef(0);(n===void 0||!BZt(n,r.current))&&(i.current+=1),r.current=n,t(e,[i.current])}};const UZt=FZt(jt.useEffect);var jZt=function(t,e){return t?t.map(function(n,r){return Object.is(t[r],e?.[r])?-1:r}).filter(function(n){return n>=0}):e?e.map(function(n,r){return r}):[]},zZt=function(t,e){var n=jt.useRef(void 0);jt.useEffect(function(){var r=jZt(n.current,e),i=n.current;return n.current=e,t(r,i,e)},e)};function yw(t){"@babel/helpers - typeof";return yw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yw(t)}function $Zt(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=HZt(t))||e){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,s;return{s:function(){n=n.call(t)},n:function(){var c=n.next();return a=c.done,c},e:function(c){o=!0,s=c},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function HZt(t,e){if(t){if(typeof t=="string")return zEe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zEe(t,e)}}function zEe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function GZt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WZt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,H6e(r.key),r)}}function VZt(t,e,n){return e&&WZt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function YZt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$Z(t,e)}function $Z(t,e){return $Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},$Z(t,e)}function XZt(t){var e=ZZt();return function(){var r=bF(t),i;if(e){var a=bF(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return qZt(this,i)}}function qZt(t,e){if(e&&(yw(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $k(t)}function $k(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZZt(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function bF(t){return bF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bF(t)}function dV(t,e,n){return e=H6e(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function H6e(t){var e=KZt(t,"string");return yw(e)=="symbol"?e:String(e)}function KZt(t,e){if(yw(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(yw(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var QZt=0,JZt=(function(t){YZt(n,t);var e=XZt(n);function n(r){var i;return GZt(this,n),i=e.call(this),dV($k(i),"scene",void 0),dV($k(i),"options",void 0),dV($k(i),"layerMap",new Map),i.scene=r.scene,i.options=r,i}return VZt(n,[{key:"hasLayer",value:function(i){return this.layerMap.has(i)}},{key:"addLayer",value:function(i){var a=this.getLayerId(i);this.layerMap.set(a,i),i.addTo(this.scene),this.emit("add",i)}},{key:"addLayers",value:function(i){var a=this;i.forEach(function(o){a.addLayer(o)})}},{key:"removeLayer",value:function(i){var a=typeof i=="string"?i:this.getLayerId(i),o=this.layerMap.get(a);return o?(this.layerMap.delete(a),o.remove(),this.emit("remove",a),!0):!1}},{key:"getLayers",value:function(){return Array.from(this.layerMap.values())}},{key:"getLayerById",value:function(i){return this.layerMap.get(i)}},{key:"getLayer",value:function(i){return this.getLayerById(i)}},{key:"removeAllLayer",value:function(){var i=$Zt(this.layerMap.values()),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.remove()}}catch(s){i.e(s)}finally{i.f()}this.layerMap.clear()}},{key:"isEmpty",value:function(){return this.layerMap.size===0}},{key:"getLayerId",value:function(i){return"id"in i?i.id:"".concat(QZt++)}},{key:"destroy",value:function(){this.removeAllLayer()}}]),n})(Jm);function EF(t){"@babel/helpers - typeof";return EF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},EF(t)}function HZ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */HZ=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(N,M,k){N[M]=k.value},a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(N,M,k){return Object.defineProperty(N,M,{value:k,enumerable:!0,configurable:!0,writable:!0}),N[M]}try{c({},"")}catch{c=function(k,z,j){return k[z]=j}}function u(N,M,k,z){var j=M&&M.prototype instanceof y?M:y,V=Object.create(j.prototype),Q=new $(z||[]);return i(V,"_invoke",{value:L(N,k,Q)}),V}function f(N,M,k){try{return{type:"normal",arg:N.call(M,k)}}catch(z){return{type:"throw",arg:z}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",g="completed",v={};function y(){}function _(){}function E(){}var x={};c(x,o,function(){return this});var T=Object.getPrototypeOf,S=T&&T(T(X([])));S&&S!==n&&r.call(S,o)&&(x=S);var w=E.prototype=y.prototype=Object.create(x);function C(N){["next","throw","return"].forEach(function(M){c(N,M,function(k){return this._invoke(M,k)})})}function D(N,M){function k(j,V,Q,ee){var re=f(N[j],N,V);if(re.type!=="throw"){var ne=re.arg,le=ne.value;return le&&EF(le)=="object"&&r.call(le,"__await")?M.resolve(le.__await).then(function(ue){k("next",ue,Q,ee)},function(ue){k("throw",ue,Q,ee)}):M.resolve(le).then(function(ue){ne.value=ue,Q(ne)},function(ue){return k("throw",ue,Q,ee)})}ee(re.arg)}var z;i(this,"_invoke",{value:function(V,Q){function ee(){return new M(function(re,ne){k(V,Q,re,ne)})}return z=z?z.then(ee,ee):ee()}})}function L(N,M,k){var z=h;return function(j,V){if(z===p)throw new Error("Generator is already running");if(z===g){if(j==="throw")throw V;return{value:t,done:!0}}for(k.method=j,k.arg=V;;){var Q=k.delegate;if(Q){var ee=B(Q,k);if(ee){if(ee===v)continue;return ee}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(z===h)throw z=g,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);z=p;var re=f(N,M,k);if(re.type==="normal"){if(z=k.done?g:d,re.arg===v)continue;return{value:re.arg,done:k.done}}re.type==="throw"&&(z=g,k.method="throw",k.arg=re.arg)}}}function B(N,M){var k=M.method,z=N.iterator[k];if(z===t)return M.delegate=null,k==="throw"&&N.iterator.return&&(M.method="return",M.arg=t,B(N,M),M.method==="throw")||k!=="return"&&(M.method="throw",M.arg=new TypeError("The iterator does not provide a '"+k+"' method")),v;var j=f(z,N.iterator,M.arg);if(j.type==="throw")return M.method="throw",M.arg=j.arg,M.delegate=null,v;var V=j.arg;return V?V.done?(M[N.resultName]=V.value,M.next=N.nextLoc,M.method!=="return"&&(M.method="next",M.arg=t),M.delegate=null,v):V:(M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,v)}function I(N){var M={tryLoc:N[0]};1 in N&&(M.catchLoc=N[1]),2 in N&&(M.finallyLoc=N[2],M.afterLoc=N[3]),this.tryEntries.push(M)}function U(N){var M=N.completion||{};M.type="normal",delete M.arg,N.completion=M}function $(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(I,this),this.reset(!0)}function X(N){if(N||N===""){var M=N[o];if(M)return M.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var k=-1,z=function j(){for(;++k<N.length;)if(r.call(N,k))return j.value=N[k],j.done=!1,j;return j.value=t,j.done=!0,j};return z.next=z}}throw new TypeError(EF(N)+" is not iterable")}return _.prototype=E,i(w,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(N){var M=typeof N=="function"&&N.constructor;return!!M&&(M===_||(M.displayName||M.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,E):(N.__proto__=E,c(N,l,"GeneratorFunction")),N.prototype=Object.create(w),N},e.awrap=function(N){return{__await:N}},C(D.prototype),c(D.prototype,s,function(){return this}),e.AsyncIterator=D,e.async=function(N,M,k,z,j){j===void 0&&(j=Promise);var V=new D(u(N,M,k,z),j);return e.isGeneratorFunction(M)?V:V.next().then(function(Q){return Q.done?Q.value:V.next()})},C(w),c(w,l,"Generator"),c(w,o,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),e.keys=function(N){var M=Object(N),k=[];for(var z in M)k.push(z);return k.reverse(),function j(){for(;k.length;){var V=k.pop();if(V in M)return j.value=V,j.done=!1,j}return j.done=!0,j}},e.values=X,$.prototype={constructor:$,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!M)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var M=this.tryEntries[0].completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var k=this;function z(ne,le){return Q.type="throw",Q.arg=M,k.next=ne,le&&(k.method="next",k.arg=t),!!le}for(var j=this.tryEntries.length-1;j>=0;--j){var V=this.tryEntries[j],Q=V.completion;if(V.tryLoc==="root")return z("end");if(V.tryLoc<=this.prev){var ee=r.call(V,"catchLoc"),re=r.call(V,"finallyLoc");if(ee&&re){if(this.prev<V.catchLoc)return z(V.catchLoc,!0);if(this.prev<V.finallyLoc)return z(V.finallyLoc)}else if(ee){if(this.prev<V.catchLoc)return z(V.catchLoc,!0)}else{if(!re)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return z(V.finallyLoc)}}}},abrupt:function(M,k){for(var z=this.tryEntries.length-1;z>=0;--z){var j=this.tryEntries[z];if(j.tryLoc<=this.prev&&r.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var V=j;break}}V&&(M==="break"||M==="continue")&&V.tryLoc<=k&&k<=V.finallyLoc&&(V=null);var Q=V?V.completion:{};return Q.type=M,Q.arg=k,V?(this.method="next",this.next=V.finallyLoc,v):this.complete(Q)},complete:function(M,k){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&k&&(this.next=k),v},finish:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.finallyLoc===M)return this.complete(z.completion,z.afterLoc),U(z),v}},catch:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.tryLoc===M){var j=z.completion;if(j.type==="throw"){var V=j.arg;U(z)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(M,k,z){return this.delegate={iterator:X(M),resultName:k,nextLoc:z},this.method==="next"&&(this.arg=t),v}},e}function $Ee(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){n(c);return}s.done?e(l):Promise.resolve(l).then(r,i)}function eKt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(l){$Ee(a,r,i,o,s,"next",l)}function s(l){$Ee(a,r,i,o,s,"throw",l)}o(void 0)})}}var tKt=(function(){var t=eKt(HZ().mark(function e(n,r){return HZ().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(n!=="Map"){a.next=2;break}return a.abrupt("return",new pYt(r));case 2:if(n!=="Gaode"){a.next=6;break}return a.abrupt("return",new TYt(r));case 6:if(n!=="GaodeV1"){a.next=10;break}return a.abrupt("return",new AYt(r));case 10:if(n!=="GaodeV2"){a.next=12;break}return a.abrupt("return",new wYt(r));case 12:if(n!=="Tencent"){a.next=14;break}return a.abrupt("return",new SYt(r));case 14:if(n!=="Baidu"){a.next=16;break}return a.abrupt("return",new fYt(r));case 16:return a.abrupt("return",Promise.resolve(JV(()=>import("./chunk-5g5JI2bR.js"),__vite__mapDeps([59,42,3,1,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,2,41,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57]))).then(function(o){var s=o.Mapbox;return new s(r)}));case 17:case"end":return a.stop()}},e)}));return function(n,r){return t.apply(this,arguments)}})(),GZ={onLoaded:"loaded",onDestroy:"destroy",onResize:"resize",onMapMove:"mapmove",onMoveStart:"movestart",onMoveEnd:"moveend",onZoomChange:"zoomchange",onZoomStart:"zoomstart",onZoomEnd:"zoomend",onClick:"click",onDblclick:"dblclick",onContextMenu:"contextmenu",onMouseMove:"mousemove",onMouseWheel:"mousewheel",onMouseDown:"mousedown",onMouseOver:"mouseover",onMouseOut:"mouseout",onMouseUp:"mouseup",onDragStart:"dragstart",onDragging:"dragging",onDragEnd:"dragend"},BL=Object.keys(GZ);function nKt(t){return oKt(t)||aKt(t)||iKt(t)||rKt()}function rKt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iKt(t,e){if(t){if(typeof t=="string")return WZ(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WZ(t,e)}}function aKt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function oKt(t){if(Array.isArray(t))return WZ(t)}function WZ(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var sKt=function(e,n){zZt(function(r,i,a){if(e){var o=r.filter(function(s){return!!s}).map(function(s){return s-1});r.includes(0)&&(o=BL.map(function(s,l){return l})),o.forEach(function(s){var l=GZ[BL[s]],c=i[s+1],u=a[s+1];c&&e.off(l,c),u&&e.on(l,u)})}},[e].concat(nKt(BL.map(function(r){return n[r]})))),$6e(function(){e&&BL.forEach(function(r){var i=GZ[r],a=n[r];i&&a&&e.off(i,a)})})};function oP(t){"@babel/helpers - typeof";return oP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oP(t)}var lKt=["id","style","className","map","mapType","mapOptions","onLayerManagerCreated","onSceneLoaded","children"];function HEe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pV(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HEe(Object(n),!0).forEach(function(r){cKt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HEe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cKt(t,e,n){return e=uKt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function uKt(t){var e=fKt(t,"string");return oP(e)=="symbol"?e:String(e)}function fKt(t,e){if(oP(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(oP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hKt(t,e){return vKt(t)||gKt(t,e)||pKt(t,e)||dKt()}function dKt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pKt(t,e){if(t){if(typeof t=="string")return GEe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return GEe(t,e)}}function GEe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gKt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function vKt(t){if(Array.isArray(t))return t}function mKt(t,e){if(t==null)return{};var n=yKt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function yKt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var ure=et.createContext(null),_Kt=jt.memo(jt.forwardRef(function(e,n){var r=e.id,i=e.style,a=e.className,o=e.map,s=e.mapType,l=s===void 0?"Gaode":s,c=e.mapOptions,u=c===void 0?{}:c,f=e.onLayerManagerCreated,h=e.onSceneLoaded,d=e.children,p=mKt(e,lKt),g=jt.useRef(),v=jt.useState(null),y=hKt(v,2),_=y[0],E=y[1],x=jt.useRef({scene:null,layerManager:null}),T=x.current;jt.useEffect(function(){var w,C=!0,D=i7e(o)?tKt(l,u):typeof o=="function"?o():o;return Promise.resolve(D).then(function(L){if(C){w=new PZt(pV(pV({},p),{},{id:g.current,map:L}));var B=new JZt({scene:w});T.scene=w,T.layerManager=B,w.once("loaded",function(){h&&h(w),f&&f(B),E(w)})}}).catch(function(L){console.error(L)}),function(){C=!1,w&&(T.scene=null,T.layerManager=null,w.destroy())}},[]),sKt(_,e),jt.useImperativeHandle(n,function(){return{getScene:function(){return _},getMap:function(){return _.map}}},[_]),jt.useEffect(function(){_&&u.style&&_.setMapStyle(u.style)},[u.style]),UZt(function(){a7e(_)||(u.center&&y3(u.zoom)?_.setZoomAndCenter(u.zoom,u.center):y3(u.zoom)?_.setZoom(u.zoom):u.center&&_.setCenter(u.center))},[u.zoom,u.center]),jt.useEffect(function(){_&&y3(u.pitch)&&_.setPitch(u.pitch)},[u.pitch]),jt.useEffect(function(){_&&y3(u.rotation)&&_.setRotation(u.rotation)},[u.rotation]);var S=jt.useMemo(function(){return pV({position:"relative"},i)},[i]);return et.createElement("div",{id:r,ref:g,style:S,className:XIe("larkmap",a)},_&&et.createElement(ure.Provider,{value:T},d))})),fre=function(){var e=jt.useContext(ure);if(!e)throw new Error("The useScene must be used in the LarkMap container");var n=e.scene;return n},bKt=function(){var e=jt.useContext(ure);if(!e)throw new Error("The useLayerManager must be used in the LarkMap container");var n=e.layerManager;return n};const EKt=["click","dblclick","unclick","undblclick","contextmenu","uncontextmenu","mouseenter","unmouseenter","mousemove","unmousemove","mouseout","mouseup","unmouseup","mousedown","unpick"],gV=["show","hide","dataUpdate","destroy","legend","legend:color","legend:size",...EKt];var u_;(function(t){t.CREATED="created",t.INITED="inited",t.ADD="add",t.REMOVE="remove"})(u_||(u_={}));var WEe;(function(t){t.CREATED="created",t.INITED="inited",t.ADD="add",t.REMOVE="remove"})(WEe||(WEe={}));var VEe;(function(t){t.INITED_LAYER="inited-layer",t.INITED_LAYERS="inited-layers"})(VEe||(VEe={}));function CE(t,e){return(...n)=>{const r={};return t.forEach((i,a)=>{r[i]=n[a]}),delete r.undefined,e(r)}}class uR{static shape(e,n){if(dm(n))e.shape(n);else if(V0(n)){const r=[];e.shape(r.join("*"),CE(r,n))}else if(dC(n)){const r=n.field?n.field:"";if(V0(n.value)){const i=ry(r)?r:r.split("*");e.shape(r,CE(i,n.value))}else e.shape(r,n.value);dm(r)&&n.scale&&uR.scale(e,r,n.scale)}}static size(e,n){if(Flt(n))e.size(n);else if(ry(n))e.size(n);else if(V0(n)){const r=[];e.size(r.join("*"),CE(r,n))}else if(dC(n)){const r=n.field?n.field:"";if(V0(n.value)){const i=ry(r)?r:r.split("*");e.size(r,CE(i,n.value))}else e.size(r,n.value);dm(r)&&n.scale&&uR.scale(e,r,n.scale)}}static color(e,n){if(dm(n))e.color(n);else if(V0(n)){const r=[];e.color(r.join("*"),CE(r,n))}else if(dC(n)){const r=n.field?n.field:"";if(V0(n.value)){const i=ry(r)?r:r.split("*");e.color(r,CE(i,n.value))}else e.color(r,n.value);dm(r)&&n.scale&&uR.scale(e,r,n.scale)}}static scale(e,n,r){e.scale(n,r)}static rotate(e,n){dm(n)||V0(n)}static texture(e,n){dm(n)&&e.texture(n)}static animate(e,n){(jlt(n)||dC(n))&&e.animate(n)}static filter(e,n){const r=n.field?n.field:"",i=ry(r)?r:r.split("*");e.filter(i.join("*"),CE(i,n.value))}static style(e,n){n&&e.style(n)}static state(e,n){const{active:r,select:i}=n;r&&e.active(r),i&&e.select(i)}}function G6e(t,e,n=0,r=5){for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];a!==null&&ZR(a)?(ZR(t[i])||(t[i]={}),n<r?G6e(t[i],a,n+1,r):t[i]=e[i]):Array.isArray(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}const xKt=(t,...e)=>{for(let n=0;n<e.length;n+=1)G6e(t,e[n],0,1);return t},YEe=(t,e)=>{const{source:n}=t,r=yo(t,["source"]),{source:i}=e,a=yo(e,["source"]),o=xKt({},r,a);return i instanceof lw?o.source=i:n instanceof lw?o.source=n:o.source=Object.assign(Object.assign({},n),i),o},SKt=(t,e)=>{if(t instanceof lw&&e instanceof lw)return t!==e;const{data:n}=t,r=yo(t,["data"]),{data:i}=e,a=yo(e,["data"]);return n!==i||!K0(r,a)};class D5 extends Jm{get inited(){return this.layer.inited}get source(){return this.layer.getSource()}constructor(e){super(),this.isComposite=!1;const{id:n,name:r,source:i,interaction:a=!1}=e;this.id=n||Glt("core-layer"),this.name=r||this.id,this.interaction=a,this.options=YEe(this.getDefaultOptions(),e),this.lastOptions=this.options,this.layer=this.createLayer(),this.adaptorLayerAttr(!1),this.setSource(i),this.emit(u_.CREATED,this)}getDefaultOptions(){return D5.DefaultOptions}getLayerConfig(){return Hlt(this.options,["source","shape","color","size","scale","texture","style","animate","state"])}adaptorAttrOptions(e){return e}adaptorLayerAttr(e=!0){const n=["shape","color","size","scale","texture","filter","style","animate","state"],r=this.adaptorAttrOptions(this.options),i=this.adaptorAttrOptions(this.lastOptions);for(let a=0;a<n.length;a++){const o=n[a],s=r[o],l=i[o];!G1(s)&&(!e||!K0(s,l))&&uR[o](this.layer,s)}}setSource(e){if(e instanceof lw)this.layer.setSource(e);else{const{data:n}=e,r=yo(e,["data"]);this.layer.getSource()?this.layer.setData(n,r):this.layer.source(n,r)}}getSource(){return this.source}addTo(e){this.scene=e,this.layer.once(u_.INITED,()=>{this.emit(u_.INITED,this)}),this.layer.once(u_.ADD,()=>{this.emit(u_.ADD,this)}),e.addLayer(this.layer)}remove(){this.scene&&(this.scene.removeLayer(this.layer),this.emit(u_.REMOVE))}update(e,n=!0){var r,i;this.updateOption(e),this.updateConfig(e),n&&((r=this.scene)===null||r===void 0||r.setEnableRender(!1)),(G1(this.options.visible)||this.options.visible)&&this.adaptorLayerAttr(),e.source&&SKt(e.source,this.lastOptions.source)&&this.changeData(e.source),n&&((i=this.scene)===null||i===void 0||i.setEnableRender(!0),this.render())}updateOption(e){this.lastOptions=this.options,this.options=YEe(this.options,e)}updateConfig(e){!G1(e.zIndex)&&!K0(this.lastOptions.zIndex,this.options.zIndex)&&this.setIndex(e.zIndex),!G1(e.blend)&&!K0(this.lastOptions.blend,this.options.blend)&&this.setBlend(e.blend),!G1(e.minZoom)&&!K0(this.lastOptions.minZoom,this.options.minZoom)&&this.setMinZoom(e.minZoom),!G1(e.maxZoom)&&!K0(this.lastOptions.maxZoom,this.options.maxZoom)&&this.setMaxZoom(e.maxZoom),!G1(e.visible)&&!K0(this.lastOptions.visible,this.options.visible)&&(e.visible?this.show():this.hide())}render(){this.scene&&this.scene.render()}changeData(e){this.setSource(e)}setIndex(e){this.layer.setIndex(e)}setBlend(e){this.layer.setBlend(e)}setMinZoom(e){this.layer.setMinZoom(e)}setMaxZoom(e){this.layer.setMaxZoom(e)}show(){this.layer.inited&&this.layer.show()}hide(){this.layer.inited&&this.layer.hide()}toggleVisible(){this.isVisible()?this.hide():this.show()}isVisible(){return this.layer.inited?this.layer.isVisible():G1(this.options.visible)?!0:this.options.visible}boxSelect(e,n){this.layer.boxSelect(e,n)}fitBounds(e){this.layer.fitBounds(e)}getLegend(e){return this.layer.getLegend(e)}getLegendItems(e){return this.layer.getLegendItems(e)}on(e,n,r){return gV.indexOf(e)!==-1?this.layer.on(e,n):super.on(e,n,r),this}once(e,n){return gV.indexOf(e)!==-1?this.layer.once(e,n):super.once(e,n),this}off(e,n){return gV.indexOf(e)!==-1?this.layer.off(e,n):super.off(e,n),this}destroy(){this.layer.destroy()}}D5.DefaultOptions={};let TKt=class extends D5{constructor(){super(...arguments),this.type="heatmapLayer"}createLayer(){const e=this.getLayerConfig();return new B$t(e)}};function sP(t){"@babel/helpers - typeof";return sP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sP(t)}var AKt=["onCreated","source"],wKt=["data"],OKt=["data"];function XEe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function CKt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XEe(Object(n),!0).forEach(function(r){RKt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XEe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function RKt(t,e,n){return e=MKt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MKt(t){var e=PKt(t,"string");return sP(e)=="symbol"?e:String(e)}function PKt(t,e){if(sP(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(sP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vV(t,e){if(t==null)return{};var n=NKt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function NKt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var IKt=function(e,n){var r=n.onCreated,i=n.source,a=vV(n,AKt),o=bKt(),s=jt.useRef(),l=jt.useRef(a),c=jt.useRef(i);return s.current||(s.current=new e(n),r&&s.current.once("inited",function(){return r(s.current)}),o.addLayer(s.current)),UEe(function(){if(s.current){var u=!jre(l.current,a);u&&(s.current.update(a),l.current=o7e(a))}},[a]),UEe(function(){if(s.current){var u=i.data,f=vV(i,wKt),h=c.current,d=h.data,p=vV(h,OKt),g=u!==d||!jre(f,p);g&&(s.current.changeData(i),c.current=CKt({},i))}},[i]),jt.useEffect(function(){return function(){s.current&&(o.removeLayer(s.current),s.current=null)}},[]),s},LKt={onRemove:"remove",onShow:"show",onHide:"hide",onDataUpdate:"dataUpdate",onLegend:"legend",onLegendColor:"legend:color",onLegendSize:"legend:size",onClick:"click",onUnClick:"unclick",onDblClick:"dblclick",onUndblclick:"undblclick",onContextMenu:"contextmenu",onUnContextMenu:"uncontextmenu",onMouseEnter:"mouseenter",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseUp:"mouseup",onMouseDown:"mousedown",onUnMousemove:"unmousemove",onUnMouseup:"unmouseup",onUnMousedown:"unmousedown",onUnPick:"unpick"},kKt=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:LKt,i=jt.useMemo(function(){return Object.keys(r)},[r]),a=function(u){i.forEach(function(f){var h=r[f],d=n[f];f&&d&&e[u](h,d)})},o=function(){return a("on")},s=function(){return a("off")},l=jt.useRef(!0);l.current&&o(),jt.useEffect(function(){return l.current?l.current=!1:o(),function(){s()}},i.map(function(c){return n[c]})),$6e(function(){s()})},DKt=jt.memo(jt.forwardRef(function(e,n){var r=IKt(TKt,e);return kKt(r.current,e),jt.useImperativeHandle(n,function(){return r.current}),null}));function W6e(t){var e=0;if(t.length>0)for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;var r=Math.abs(e%1e4).toString().padStart(4,"0");return"marker-".concat(r)}function xF(t){"@babel/helpers - typeof";return xF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xF(t)}function VZ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */VZ=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(N,M,k){N[M]=k.value},a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(N,M,k){return Object.defineProperty(N,M,{value:k,enumerable:!0,configurable:!0,writable:!0}),N[M]}try{c({},"")}catch{c=function(k,z,j){return k[z]=j}}function u(N,M,k,z){var j=M&&M.prototype instanceof y?M:y,V=Object.create(j.prototype),Q=new $(z||[]);return i(V,"_invoke",{value:L(N,k,Q)}),V}function f(N,M,k){try{return{type:"normal",arg:N.call(M,k)}}catch(z){return{type:"throw",arg:z}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",g="completed",v={};function y(){}function _(){}function E(){}var x={};c(x,o,function(){return this});var T=Object.getPrototypeOf,S=T&&T(T(X([])));S&&S!==n&&r.call(S,o)&&(x=S);var w=E.prototype=y.prototype=Object.create(x);function C(N){["next","throw","return"].forEach(function(M){c(N,M,function(k){return this._invoke(M,k)})})}function D(N,M){function k(j,V,Q,ee){var re=f(N[j],N,V);if(re.type!=="throw"){var ne=re.arg,le=ne.value;return le&&xF(le)=="object"&&r.call(le,"__await")?M.resolve(le.__await).then(function(ue){k("next",ue,Q,ee)},function(ue){k("throw",ue,Q,ee)}):M.resolve(le).then(function(ue){ne.value=ue,Q(ne)},function(ue){return k("throw",ue,Q,ee)})}ee(re.arg)}var z;i(this,"_invoke",{value:function(V,Q){function ee(){return new M(function(re,ne){k(V,Q,re,ne)})}return z=z?z.then(ee,ee):ee()}})}function L(N,M,k){var z=h;return function(j,V){if(z===p)throw new Error("Generator is already running");if(z===g){if(j==="throw")throw V;return{value:t,done:!0}}for(k.method=j,k.arg=V;;){var Q=k.delegate;if(Q){var ee=B(Q,k);if(ee){if(ee===v)continue;return ee}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(z===h)throw z=g,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);z=p;var re=f(N,M,k);if(re.type==="normal"){if(z=k.done?g:d,re.arg===v)continue;return{value:re.arg,done:k.done}}re.type==="throw"&&(z=g,k.method="throw",k.arg=re.arg)}}}function B(N,M){var k=M.method,z=N.iterator[k];if(z===t)return M.delegate=null,k==="throw"&&N.iterator.return&&(M.method="return",M.arg=t,B(N,M),M.method==="throw")||k!=="return"&&(M.method="throw",M.arg=new TypeError("The iterator does not provide a '"+k+"' method")),v;var j=f(z,N.iterator,M.arg);if(j.type==="throw")return M.method="throw",M.arg=j.arg,M.delegate=null,v;var V=j.arg;return V?V.done?(M[N.resultName]=V.value,M.next=N.nextLoc,M.method!=="return"&&(M.method="next",M.arg=t),M.delegate=null,v):V:(M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,v)}function I(N){var M={tryLoc:N[0]};1 in N&&(M.catchLoc=N[1]),2 in N&&(M.finallyLoc=N[2],M.afterLoc=N[3]),this.tryEntries.push(M)}function U(N){var M=N.completion||{};M.type="normal",delete M.arg,N.completion=M}function $(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(I,this),this.reset(!0)}function X(N){if(N||N===""){var M=N[o];if(M)return M.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var k=-1,z=function j(){for(;++k<N.length;)if(r.call(N,k))return j.value=N[k],j.done=!1,j;return j.value=t,j.done=!0,j};return z.next=z}}throw new TypeError(xF(N)+" is not iterable")}return _.prototype=E,i(w,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(N){var M=typeof N=="function"&&N.constructor;return!!M&&(M===_||(M.displayName||M.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,E):(N.__proto__=E,c(N,l,"GeneratorFunction")),N.prototype=Object.create(w),N},e.awrap=function(N){return{__await:N}},C(D.prototype),c(D.prototype,s,function(){return this}),e.AsyncIterator=D,e.async=function(N,M,k,z,j){j===void 0&&(j=Promise);var V=new D(u(N,M,k,z),j);return e.isGeneratorFunction(M)?V:V.next().then(function(Q){return Q.done?Q.value:V.next()})},C(w),c(w,l,"Generator"),c(w,o,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),e.keys=function(N){var M=Object(N),k=[];for(var z in M)k.push(z);return k.reverse(),function j(){for(;k.length;){var V=k.pop();if(V in M)return j.value=V,j.done=!1,j}return j.done=!0,j}},e.values=X,$.prototype={constructor:$,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!M)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var M=this.tryEntries[0].completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var k=this;function z(ne,le){return Q.type="throw",Q.arg=M,k.next=ne,le&&(k.method="next",k.arg=t),!!le}for(var j=this.tryEntries.length-1;j>=0;--j){var V=this.tryEntries[j],Q=V.completion;if(V.tryLoc==="root")return z("end");if(V.tryLoc<=this.prev){var ee=r.call(V,"catchLoc"),re=r.call(V,"finallyLoc");if(ee&&re){if(this.prev<V.catchLoc)return z(V.catchLoc,!0);if(this.prev<V.finallyLoc)return z(V.finallyLoc)}else if(ee){if(this.prev<V.catchLoc)return z(V.catchLoc,!0)}else{if(!re)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return z(V.finallyLoc)}}}},abrupt:function(M,k){for(var z=this.tryEntries.length-1;z>=0;--z){var j=this.tryEntries[z];if(j.tryLoc<=this.prev&&r.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var V=j;break}}V&&(M==="break"||M==="continue")&&V.tryLoc<=k&&k<=V.finallyLoc&&(V=null);var Q=V?V.completion:{};return Q.type=M,Q.arg=k,V?(this.method="next",this.next=V.finallyLoc,v):this.complete(Q)},complete:function(M,k){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&k&&(this.next=k),v},finish:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.finallyLoc===M)return this.complete(z.completion,z.afterLoc),U(z),v}},catch:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.tryLoc===M){var j=z.completion;if(j.type==="throw"){var V=j.arg;U(z)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(M,k,z){return this.delegate={iterator:X(M),resultName:k,nextLoc:z},this.method==="next"&&(this.arg=t),v}},e}function qEe(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){n(c);return}s.done?e(l):Promise.resolve(l).then(r,i)}function BKt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(l){qEe(a,r,i,o,s,"next",l)}function s(l){qEe(a,r,i,o,s,"throw",l)}o(void 0)})}}function FKt(t,e){if(t.markers){var n=new Set(t.markers.filter(function(r){return r.iconPath!==void 0}).map(function(r){return r.iconPath}));return Promise.all(Array.from(n.values()).map((function(){var r=BKt(VZ().mark(function i(a){var o;return VZ().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(o=W6e(a),!e.hasImage(o)){l.next=3;break}return l.abrupt("return");case 3:return l.next=5,e.addImage(o,a);case 5:return l.abrupt("return",l.sent);case 6:case"end":return l.stop()}},i)}));return function(i){return r.apply(this,arguments)}})()))}}function lP(t){"@babel/helpers - typeof";return lP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lP(t)}function ZEe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZEe(Object(n),!0).forEach(function(r){UKt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZEe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function UKt(t,e,n){return e=jKt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jKt(t){var e=zKt(t,"string");return lP(e)=="symbol"?e:String(e)}function zKt(t,e){if(lP(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(lP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $Kt(t){var e=t.map(function(f){var h,d,p;return KEe(KEe({},f),{},{label:Ve.isObject(f.label)?f.label.content:f.label,color:(h=f.label)===null||h===void 0?void 0:h.color,bgColor:(d=f.label)===null||d===void 0?void 0:d.bgColor,fontSize:(p=f.label)===null||p===void 0?void 0:p.fontSize,offsets:[f.anchorX||0,f.anchorY||-1],iconPath:f.iconPath?W6e(f.iconPath):void 0})}),n=e.filter(function(f){return f.iconPath!==void 0}),r=e.filter(function(f){return f.label!==void 0}),i=[];if(r.length>0){var a=r[0].offsets,o=r[0].fontSize||10,s=new tP({zIndex:2}).source(r,{parser:{type:"json",x:"longitude",y:"latitude"}}).shape("label","text").size("fontSize").color("color").style({opacity:1,textOffset:[a[0],-2*a[1]*o],fontWeight:600,textAnchor:"center",stroke:r[0].bgColor||"#ffffff",strokeWidth:2,strokeOpacity:1,padding:[10,10]});i.push(s)}if(n.length!==0){var l=n[0].offsets,c=n[0].width||10,u=new tP().source(n,{parser:{type:"json",x:"longitude",y:"latitude"}}).shape("iconPath").size("width").style({offsets:[l[0],l[1]*c]});i.push(u)}return i}function cP(t){"@babel/helpers - typeof";return cP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cP(t)}function QEe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function JEe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?QEe(Object(n),!0).forEach(function(r){HKt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QEe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function HKt(t,e,n){return e=GKt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GKt(t){var e=WKt(t,"string");return cP(e)=="symbol"?e:String(e)}function WKt(t,e){if(cP(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(cP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function VKt(t){var e=t.map(function(i){var a=i.points.map(function(o){return[o.longitude,o.latitude]});return JEe(JEe({},i),{},{coordinates:a,color:i.color,width:i.width})}),n=e[0].dottedLine,r=new Hne().source(e,{parser:{type:"json",coordinates:"coordinates"}}).size("width").shape("line").color("color").style({opacity:1,lineType:n?"dash":"solid",dashArray:[3,1]});return[r]}var YKt=["label","id"];function uP(t){"@babel/helpers - typeof";return uP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uP(t)}function XKt(t,e){if(t==null)return{};var n=qKt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function qKt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function exe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function f_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?exe(Object(n),!0).forEach(function(r){ZKt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):exe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ZKt(t,e,n){return e=KKt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function KKt(t){var e=QKt(t,"string");return uP(e)=="symbol"?e:String(e)}function QKt(t,e){if(uP(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(uP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var RE={mapOptions:{center:[120.210792,30.246026],zoom:16,maxZoom:18,pitch:0,rotation:0,zoomEnable:!0,pitchEnable:!0}},JKt=function(e){var n={mapOptions:f_(f_({},RE.mapOptions),{},{center:e.longitude&&e.latitude?[e.longitude,e.latitude]:RE.mapOptions.center,zoom:e.scale||RE.mapOptions.zoom,pitch:e.skew||RE.mapOptions.pitch,rotation:e.rotate||RE.mapOptions.rotation,zoomEnable:e.enableZoom||RE.mapOptions.zoomEnable,pitchEnable:e.enableRotate||RE.mapOptions.pitchEnable,style:e?.mapType,token:e?.token}),logoVisible:!1};return n},txe={width:12,anchorX:0,anchorY:1,label:{content:"",color:"#000000",fontSize:10,borderRadius:5,bgColor:"#ffffff",padding:5},iconPath:"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*3XdDTbsQ84QAAAAAAAAAAAAADmJ7AQ/original"},eQt=function(e,n){var r=Object.assign({},txe.label,n?.label);return e.map(function(i,a){var o=i.label,s=i.id,l=XKt(i,YKt);return f_(f_(f_(f_({},txe),n),l),{},{label:f_(f_({},r),Ve.isObject(o)?o:{content:o}),id:s||a.toString()})})};function nxe(t,e,n){if(t.length===1)e.setCenter([t[0].longitude,t[0].latitude]);else{var r=[180,90,-180,-90];t.forEach(function(p){r[0]>p.longitude&&(r[0]=p.longitude),r[1]>p.latitude&&(r[1]=p.latitude),r[2]<p.longitude&&(r[2]=p.longitude),r[3]<p.latitude&&(r[3]=p.latitude)});var i=n||{},a=i.left,o=a===void 0?20:a,s=i.right,l=s===void 0?20:s,c=i.bottom,u=c===void 0?20:c,f=i.top,h=f===void 0?20:f,d=[o,h,l,u];e.map.setBounds(r,!1,d)}}var tQt=function(e,n){V6e(e,n),Y6e(e,n)},V6e=function(e,n){var r;if((r=e.includePoints)!==null&&r!==void 0&&r.length)nxe(e.includePoints,n,e.includePadding);else{var i=[];e.markers&&e.markers.forEach(function(a){i.push({longitude:a.longitude,latitude:a.latitude})}),e.polyline&&e.polyline.forEach(function(a){a.points.forEach(function(o){i.push({longitude:o.longitude,latitude:o.latitude})})}),i.length&&nxe(i,n,e.includePadding)}},Y6e=function(e,n){e.enableZoom!==void 0&&n.setMapStatus({zoomEnable:e.enableZoom}),e.enableRotate!==void 0&&n.setMapStatus({rotateEnable:e.enableRotate}),e.enableScroll!==void 0&&n.setMapStatus({dragEnable:e.enableScroll})};const nQt=(function(t){var e=fre();return jt.useEffect(function(){tQt(t,e)},[]),jt.useEffect(function(){Y6e(t,e)},[t.enableRotate,t.enableScroll,t.enableZoom]),jt.useEffect(function(){V6e(t,e)},[t.includePoints,t.markers,t.polyline,t.includePadding]),null});function rQt(t,e){return sQt(t)||oQt(t,e)||aQt(t,e)||iQt()}function iQt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aQt(t,e){if(t){if(typeof t=="string")return rxe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rxe(t,e)}}function rxe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oQt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function sQt(t){if(Array.isArray(t))return t}const lQt=(function(t){var e=fre(),n=jt.useState([]),r=rQt(n,2),i=r[0],a=r[1],o=function(){i.forEach(function(l){e.removeLayer(l)})};return jt.useEffect(function(){var s;if(t.markers)return(s=FKt(t,e))===null||s===void 0||s.then(function(){var l=$Kt(t.markers||[]);o(),l.forEach(function(c){e.addLayer(c)}),a(l)}),function(){o()}},[t.markers]),null});function cQt(t,e){return dQt(t)||hQt(t,e)||fQt(t,e)||uQt()}function uQt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fQt(t,e){if(t){if(typeof t=="string")return ixe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ixe(t,e)}}function ixe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hQt(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function dQt(t){if(Array.isArray(t))return t}const pQt=(function(t){var e=fre(),n=jt.useState([]),r=cQt(n,2),i=r[0],a=r[1],o=function(){i.forEach(function(l){e.removeLayer(l)})};return jt.useEffect(function(){if(t.polyline){var s=VKt(t.polyline||[]);return o(),s.forEach(function(l){e.addLayer(l)}),a(s),function(){o()}}},[t.polyline]),null});function Ux(t){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ux(t)}function YZ(){return YZ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},YZ.apply(this,arguments)}function axe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?axe(Object(n),!0).forEach(function(r){gQt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):axe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gQt(t,e,n){return e=vQt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vQt(t){var e=mQt(t,"string");return Ux(e)=="symbol"?e:String(e)}function mQt(t,e){if(Ux(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Ux(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function XZ(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */XZ=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(N,M,k){N[M]=k.value},a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(N,M,k){return Object.defineProperty(N,M,{value:k,enumerable:!0,configurable:!0,writable:!0}),N[M]}try{c({},"")}catch{c=function(k,z,j){return k[z]=j}}function u(N,M,k,z){var j=M&&M.prototype instanceof y?M:y,V=Object.create(j.prototype),Q=new $(z||[]);return i(V,"_invoke",{value:L(N,k,Q)}),V}function f(N,M,k){try{return{type:"normal",arg:N.call(M,k)}}catch(z){return{type:"throw",arg:z}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",g="completed",v={};function y(){}function _(){}function E(){}var x={};c(x,o,function(){return this});var T=Object.getPrototypeOf,S=T&&T(T(X([])));S&&S!==n&&r.call(S,o)&&(x=S);var w=E.prototype=y.prototype=Object.create(x);function C(N){["next","throw","return"].forEach(function(M){c(N,M,function(k){return this._invoke(M,k)})})}function D(N,M){function k(j,V,Q,ee){var re=f(N[j],N,V);if(re.type!=="throw"){var ne=re.arg,le=ne.value;return le&&Ux(le)=="object"&&r.call(le,"__await")?M.resolve(le.__await).then(function(ue){k("next",ue,Q,ee)},function(ue){k("throw",ue,Q,ee)}):M.resolve(le).then(function(ue){ne.value=ue,Q(ne)},function(ue){return k("throw",ue,Q,ee)})}ee(re.arg)}var z;i(this,"_invoke",{value:function(V,Q){function ee(){return new M(function(re,ne){k(V,Q,re,ne)})}return z=z?z.then(ee,ee):ee()}})}function L(N,M,k){var z=h;return function(j,V){if(z===p)throw new Error("Generator is already running");if(z===g){if(j==="throw")throw V;return{value:t,done:!0}}for(k.method=j,k.arg=V;;){var Q=k.delegate;if(Q){var ee=B(Q,k);if(ee){if(ee===v)continue;return ee}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(z===h)throw z=g,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);z=p;var re=f(N,M,k);if(re.type==="normal"){if(z=k.done?g:d,re.arg===v)continue;return{value:re.arg,done:k.done}}re.type==="throw"&&(z=g,k.method="throw",k.arg=re.arg)}}}function B(N,M){var k=M.method,z=N.iterator[k];if(z===t)return M.delegate=null,k==="throw"&&N.iterator.return&&(M.method="return",M.arg=t,B(N,M),M.method==="throw")||k!=="return"&&(M.method="throw",M.arg=new TypeError("The iterator does not provide a '"+k+"' method")),v;var j=f(z,N.iterator,M.arg);if(j.type==="throw")return M.method="throw",M.arg=j.arg,M.delegate=null,v;var V=j.arg;return V?V.done?(M[N.resultName]=V.value,M.next=N.nextLoc,M.method!=="return"&&(M.method="next",M.arg=t),M.delegate=null,v):V:(M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,v)}function I(N){var M={tryLoc:N[0]};1 in N&&(M.catchLoc=N[1]),2 in N&&(M.finallyLoc=N[2],M.afterLoc=N[3]),this.tryEntries.push(M)}function U(N){var M=N.completion||{};M.type="normal",delete M.arg,N.completion=M}function $(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(I,this),this.reset(!0)}function X(N){if(N||N===""){var M=N[o];if(M)return M.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var k=-1,z=function j(){for(;++k<N.length;)if(r.call(N,k))return j.value=N[k],j.done=!1,j;return j.value=t,j.done=!0,j};return z.next=z}}throw new TypeError(Ux(N)+" is not iterable")}return _.prototype=E,i(w,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(N){var M=typeof N=="function"&&N.constructor;return!!M&&(M===_||(M.displayName||M.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,E):(N.__proto__=E,c(N,l,"GeneratorFunction")),N.prototype=Object.create(w),N},e.awrap=function(N){return{__await:N}},C(D.prototype),c(D.prototype,s,function(){return this}),e.AsyncIterator=D,e.async=function(N,M,k,z,j){j===void 0&&(j=Promise);var V=new D(u(N,M,k,z),j);return e.isGeneratorFunction(M)?V:V.next().then(function(Q){return Q.done?Q.value:V.next()})},C(w),c(w,l,"Generator"),c(w,o,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),e.keys=function(N){var M=Object(N),k=[];for(var z in M)k.push(z);return k.reverse(),function j(){for(;k.length;){var V=k.pop();if(V in M)return j.value=V,j.done=!1,j}return j.done=!0,j}},e.values=X,$.prototype={constructor:$,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!M)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var M=this.tryEntries[0].completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var k=this;function z(ne,le){return Q.type="throw",Q.arg=M,k.next=ne,le&&(k.method="next",k.arg=t),!!le}for(var j=this.tryEntries.length-1;j>=0;--j){var V=this.tryEntries[j],Q=V.completion;if(V.tryLoc==="root")return z("end");if(V.tryLoc<=this.prev){var ee=r.call(V,"catchLoc"),re=r.call(V,"finallyLoc");if(ee&&re){if(this.prev<V.catchLoc)return z(V.catchLoc,!0);if(this.prev<V.finallyLoc)return z(V.finallyLoc)}else if(ee){if(this.prev<V.catchLoc)return z(V.catchLoc,!0)}else{if(!re)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return z(V.finallyLoc)}}}},abrupt:function(M,k){for(var z=this.tryEntries.length-1;z>=0;--z){var j=this.tryEntries[z];if(j.tryLoc<=this.prev&&r.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var V=j;break}}V&&(M==="break"||M==="continue")&&V.tryLoc<=k&&k<=V.finallyLoc&&(V=null);var Q=V?V.completion:{};return Q.type=M,Q.arg=k,V?(this.method="next",this.next=V.finallyLoc,v):this.complete(Q)},complete:function(M,k){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&k&&(this.next=k),v},finish:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.finallyLoc===M)return this.complete(z.completion,z.afterLoc),U(z),v}},catch:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.tryLoc===M){var j=z.completion;if(j.type==="throw"){var V=j.arg;U(z)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(M,k,z){return this.delegate={iterator:X(M),resultName:k,nextLoc:z},this.method==="next"&&(this.arg=t),v}},e}function sxe(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){n(c);return}s.done?e(l):Promise.resolve(l).then(r,i)}function yQt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(l){sxe(a,r,i,o,s,"next",l)}function s(l){sxe(a,r,i,o,s,"throw",l)}o(void 0)})}}var X6e=function(e){var n=e.className,r=e.containerStyle,i=e.style,a=e.children,o=jt.useMemo(function(){return JKt(e)},[e]),s=(function(){var l=yQt(XZ().mark(function c(){return XZ().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:e.onInitComplete&&e.onInitComplete();case 1:case"end":return f.stop()}},c)}));return function(){return l.apply(this,arguments)}})();return et.createElement(_Kt,YZ({className:n,style:oxe(oxe({height:300},r),i)},o,{onSceneLoaded:s}),et.createElement(nQt,e),et.createElement(lQt,e),et.createElement(pQt,e),a)},_Qt=["data","markerStyle"];function qZ(){return qZ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qZ.apply(this,arguments)}function bQt(t,e){if(t==null)return{};var n=EQt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function EQt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var xQt=function(e){var n=LLe("PinMap",e),r=n.data,i=n.markerStyle,a=bQt(n,_Qt),o=jt.useMemo(function(){return eQt(r||[],i)},[r,i]);return et.createElement(X6e,qZ({markers:o,includePoints:o},a))},SQt=["children","data"];function ZZ(){return ZZ=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ZZ.apply(this,arguments)}function TQt(t,e){if(t==null)return{};var n=AQt(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function AQt(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var wQt={autoFit:!0,shape:"heatmap",size:{field:"value",value:[0,1]},style:{intensity:3,radius:20,opacity:1,rampColors:{colors:["#FF4818","#F7B74A","#FFF598","#F27DEB","#8C1EB2","#421EB2"],positions:[0,.2,.4,.6,.8,1]}}},OQt=function(e){var n=LLe("HeatMap",e),r=n.children,i=n.data,a=TQt(n,SQt),o=jt.useMemo(function(){return{data:i||[],parser:{type:"json",x:"longitude",y:"latitude"}}},[i]);return et.createElement(et.Fragment,null,et.createElement(X6e,a,et.createElement(DKt,ZZ({},wQt,{source:o})),r))},CQt=_c.div.withConfig({displayName:"TableWrapper",componentId:"gpt-vis-c7ef__sc-1l8e4lx-0"})([".table-title{font-size:16px;font-weight:500;margin-bottom:12px;color:#1d2129;}table{width:100%;border-collapse:separate;border-spacing:0;background:#fff;border-radius:8px;overflow:hidden;th,td{border-bottom:1px solid #f0f0f0;padding:8px;text-align:left;font-size:14px;color:#333;}th{background:#f5f5f5;font-weight:600;color:#000000e0;position:relative;}th:not(:last-child)::after{content:'';position:absolute;top:25%;right:0;width:1px;height:50%;background:#e0e0e0;}tr:{transition:background 0.2s;cursor:pointer;}tr:hover{background:#f5f5f5;}}"]),RQt=function(e){var n=e.data,r=e.title,i=n.length>0?Object.keys(n[0]).map(function(a){return{title:a,key:a}}):[];return et.createElement(CQt,null,r&&et.createElement("div",{className:"table-title"},r),et.createElement("table",null,et.createElement("thead",null,et.createElement("tr",null,i.map(function(a){return et.createElement("th",{key:a.key},a.title)}))),et.createElement("tbody",null,n.map(function(a,o){return et.createElement("tr",{key:o},i.map(function(s){return et.createElement("td",null,a[s.key])}))}))))},FL;function fP(t){"@babel/helpers - typeof";return fP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fP(t)}function ms(t,e,n){return e=MQt(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MQt(t){var e=PQt(t,"string");return fP(e)=="symbol"?e:String(e)}function PQt(t,e){if(fP(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(fP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var NQt=(FL={},ms(ms(ms(ms(ms(ms(ms(ms(ms(ms(FL,Bo.Area,CEt),Bo.Bar,IEt),Bo.Boxplot,FEt),Bo.Column,HEt),Bo.DualAxes,ixt),Bo.FishboneDiagram,WLt),Bo.FlowDiagram,JLt),Bo.Funnel,cxt),Bo.HeatMap,OQt),Bo.Histogram,pxt),ms(ms(ms(ms(ms(ms(ms(ms(ms(ms(FL,Bo.IndentedTree,qkt),Bo.Line,_xt),Bo.Liquid,Rxt),Bo.MindMap,hkt),Bo.NetworkGraph,xkt),Bo.Pie,Lxt),Bo.PinMap,xQt),Bo.Radar,Wxt),Bo.Sankey,Zxt),Bo.Scatter,tSt),ms(ms(ms(ms(ms(ms(FL,Bo.Treemap,uSt),Bo.Venn,gSt),Bo.Violin,bSt),Bo.Table,RQt),Bo.WordCloud,ASt),Bo.OrganizationChart,Dkt)),Or={image:new Map,background:new Map,resource:new Map,defaultStyle:new Map,baseStyle:new Map,computedStyle:new WeakMap,font:new Set,session:{styleMap:new Map,styleCache:new WeakMap,nodeMap:new Map}};function IQt(t="soft"){switch(t){case"auto":{Or.session.styleMap=new Map,Or.session.nodeMap=new Map;return}case"soft":{Or.session.styleMap=new Map,Or.session.nodeMap=new Map,Or.session.styleCache=new WeakMap;return}case"full":return;case"disabled":{Or.session.styleMap=new Map,Or.session.nodeMap=new Map,Or.session.styleCache=new WeakMap,Or.computedStyle=new WeakMap,Or.baseStyle=new Map,Or.defaultStyle=new Map,Or.image=new Map,Or.background=new Map,Or.resource=new Map,Or.font=new Set;return}default:{Or.session.styleMap=new Map,Or.session.nodeMap=new Map,Or.session.styleCache=new WeakMap;return}}}function hre(t){const e=t.match(/url\((['"]?)(.*?)(\1)\)/);if(!e)return null;const n=e[2].trim();return n.startsWith("#")?null:n}function LQt(t){if(!t||t==="none")return"";let e=t.replace(/translate[XY]?\([^)]*\)/g,"");return e=e.replace(/matrix\(([^)]+)\)/g,(n,r)=>{const i=r.split(",").map(a=>a.trim());return i.length!==6?`matrix(${r})`:(i[4]="0",i[5]="0",`matrix(${i.join(", ")})`)}),e=e.replace(/matrix3d\(([^)]+)\)/g,(n,r)=>{const i=r.split(",").map(a=>a.trim());return i.length!==16?`matrix3d(${r})`:(i[12]="0",i[13]="0",`matrix3d(${i.join(", ")})`)}),e.trim().replace(/\s{2,}/g," ")}function SF(t){if(/%[0-9A-Fa-f]{2}/.test(t))return t;try{return encodeURI(t)}catch{return t}}function kQt(t="[snapDOM]",{ttlMs:e=5*6e4,maxEntries:n=12}={}){const r=new Map;let i=0;function a(o,s,l){if(i>=n)return;const c=Date.now();(r.get(s)||0)>c||(r.set(s,c+e),i++,o==="warn"&&console&&console.warn?console.warn(`${t} ${l}`):console&&console.error&&console.error(`${t} ${l}`))}return{warnOnce(o,s){a("warn",o,s)},errorOnce(o,s){a("error",o,s)},reset(){r.clear(),i=0}}}var lxe=kQt("[snapDOM]",{ttlMs:3*6e4,maxEntries:10}),mV=new Map,UL=new Map;function DQt(t){return/^data:|^blob:|^about:blank$/i.test(t)}function BQt(t,e){try{const n=typeof location<"u"&&location.href?location.href:"http://localhost/",r=e.includes("{url}")?e.split("{url}")[0]:e,i=new URL(r||".",n),a=new URL(t,n);if(a.origin===i.origin)return!0;const o=a.searchParams;if(o&&(o.has("url")||o.has("target")))return!0}catch{}return!1}function FQt(t,e){if(!e||DQt(t)||BQt(t,e))return!1;try{const n=typeof location<"u"&&location.href?location.href:"http://localhost/",r=new URL(t,n);return typeof location<"u"?r.origin!==location.origin:!0}catch{return!!e}}function UQt(t,e){if(!e)return t;if(e.includes("{url}"))return e.replace("{urlRaw}",SF(t)).replace("{url}",encodeURIComponent(t));if(/[?&]url=?$/.test(e))return`${e}${encodeURIComponent(t)}`;if(e.endsWith("?"))return`${e}url=${encodeURIComponent(t)}`;if(e.endsWith("/"))return`${e}${SF(t)}`;const n=e.includes("?")?"&":"?";return`${e}${n}url=${encodeURIComponent(t)}`}function cxe(t){return new Promise((e,n)=>{const r=new FileReader;r.onload=()=>e(String(r.result||"")),r.onerror=()=>n(new Error("read_failed")),r.readAsDataURL(t)})}function jQt(t,e){return[e.as||"blob",e.timeout??3e3,e.useProxy||"",e.errorTTL??8e3,t].join("|")}async function Fm(t,e={}){const n=e.as??"blob",r=e.timeout??3e3,i=e.useProxy||"",a=e.errorTTL??8e3,o=e.headers||{},s=!!e.silent;if(/^data:/i.test(t))try{if(n==="text")return{ok:!0,data:String(t),status:200,url:t,fromCache:!1};if(n==="dataURL")return{ok:!0,data:String(t),status:200,url:t,fromCache:!1,mime:String(t).slice(5).split(";")[0]||""};const[,v="",y=""]=String(t).match(/^data:([^,]*),(.*)$/)||[],E=/;base64/i.test(v)?atob(y):decodeURIComponent(y),x=new Uint8Array([...E].map(S=>S.charCodeAt(0))),T=new Blob([x],{type:(v||"").split(";")[0]||""});return{ok:!0,data:T,status:200,url:t,fromCache:!1,mime:T.type||""}}catch{return{ok:!1,data:null,status:0,url:t,fromCache:!1,reason:"special_url_error"}}if(/^blob:/i.test(t))try{const v=await fetch(t);if(!v.ok)return{ok:!1,data:null,status:v.status,url:t,fromCache:!1,reason:"http_error"};const y=await v.blob(),_=y.type||v.headers.get("content-type")||"";return n==="dataURL"?{ok:!0,data:await cxe(y),status:v.status,url:t,fromCache:!1,mime:_}:n==="text"?{ok:!0,data:await y.text(),status:v.status,url:t,fromCache:!1,mime:_}:{ok:!0,data:y,status:v.status,url:t,fromCache:!1,mime:_}}catch{return{ok:!1,data:null,status:0,url:t,fromCache:!1,reason:"network"}}if(/^about:blank$/i.test(t))return n==="dataURL"?{ok:!0,data:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGMAAQAABQABDQottAAAAABJRU5ErkJggg==",status:200,url:t,fromCache:!1,mime:"image/png"}:{ok:!0,data:n==="text"?"":new Blob([]),status:200,url:t,fromCache:!1};const l=jQt(t,{as:n,timeout:r,useProxy:i,errorTTL:a}),c=UL.get(l);if(c&&c.until>Date.now())return{...c.result,fromCache:!0};c&&UL.delete(l);const u=mV.get(l);if(u)return u;const f=FQt(t,i)?UQt(t,i):t;let h=e.credentials;if(!h)try{const v=typeof location<"u"&&location.href?location.href:"http://localhost/",y=new URL(t,v);h=typeof location<"u"&&y.origin===location.origin?"include":"omit"}catch{h="omit"}const d=new AbortController,p=setTimeout(()=>d.abort("timeout"),r),g=(async()=>{try{const v=await fetch(f,{signal:d.signal,credentials:h,headers:o});if(!v.ok){const E={ok:!1,data:null,status:v.status,url:f,fromCache:!1,reason:"http_error"};if(a>0&&UL.set(l,{until:Date.now()+a,result:E}),!s){const x=`${v.status} ${v.statusText||""}`.trim();lxe.warnOnce(`http:${v.status}:${n}:${new URL(t,location?.href??"http://localhost/").origin}`,`HTTP error ${x} while fetching ${n} ${t}`)}return e.onError&&e.onError(E),E}if(n==="text")return{ok:!0,data:await v.text(),status:v.status,url:f,fromCache:!1};const y=await v.blob(),_=y.type||v.headers.get("content-type")||"";return n==="dataURL"?{ok:!0,data:await cxe(y),status:v.status,url:f,fromCache:!1,mime:_}:{ok:!0,data:y,status:v.status,url:f,fromCache:!1,mime:_}}catch(v){const y=v&&typeof v=="object"&&"name"in v&&v.name==="AbortError"?String(v.message||"").includes("timeout")?"timeout":"abort":"network",_={ok:!1,data:null,status:0,url:f,fromCache:!1,reason:y};if(!/^blob:/i.test(t)&&a>0&&UL.set(l,{until:Date.now()+a,result:_}),!s){const E=`${y}:${n}:${new URL(t,location?.href??"http://localhost/").origin}`,x=y==="timeout"?`Timeout after ${r}ms. Consider increasing timeout or using a proxy for ${t}`:y==="abort"?`Request aborted while fetching ${n} ${t}`:`Network/CORS issue while fetching ${n} ${t}. A proxy may be required`;lxe.errorOnce(E,x)}return e.onError&&e.onError(_),_}finally{clearTimeout(p),mV.delete(l)}})();return mV.set(l,g),g}function dre(t,e){if(!e||!t.width||!t.height)return t;const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");return r.fillStyle=e,r.fillRect(0,0,n.width,n.height),r.drawImage(t,0,0),n}async function q6e(t,e={}){if(/^((repeating-)?(linear|radial|conic)-gradient)\(/i.test(t)||t.trim()==="none")return t;const r=hre(t);if(!r)return t;const i=SF(r);if(Or.background.has(i)){const a=Or.background.get(i);return a?`url("${a}")`:"none"}try{const a=await Fm(i,{as:"dataURL",useProxy:e.useProxy});return a.ok?(Or.background.set(i,a.data),`url("${a.data}")`):(Or.background.set(i,null),"none")}catch{return Or.background.set(i,null),"none"}}var zQt=new Set(["meta","script","noscript","title","link","template"]),pre=new Set(["meta","link","style","title","noscript","script","template","g","defs","use","marker","mask","clipPath","pattern","path","polygon","polyline","line","circle","ellipse","rect","filter","lineargradient","radialgradient","stop"]);function $Qt(t){if(t=String(t).toLowerCase(),pre.has(t)){const a={};return Or.defaultStyle.set(t,a),a}if(Or.defaultStyle.has(t))return Or.defaultStyle.get(t);let e=document.getElementById("snapdom-sandbox");e||(e=document.createElement("div"),e.id="snapdom-sandbox",e.setAttribute("data-snapdom-sandbox","true"),e.setAttribute("aria-hidden","true"),e.style.position="absolute",e.style.left="-9999px",e.style.top="-9999px",e.style.width="0px",e.style.height="0px",e.style.overflow="hidden",document.body.appendChild(e));const n=document.createElement(t);n.style.all="initial",e.appendChild(n);const r=getComputedStyle(n),i={};for(let a of r){if(Z6e(a))continue;const o=r.getPropertyValue(a);i[a]=o}return e.removeChild(n),Or.defaultStyle.set(t,i),i}var HQt=/(?:^|-)(animation|transition)(?:-|$)/i,GQt=/^(--|view-timeline|scroll-timeline|animation-trigger|offset-|position-try|app-region|interactivity|overlay|view-transition|-webkit-locale|-webkit-user-(?:drag|modify)|-webkit-tap-highlight-color|-webkit-text-security)$/i,WQt=new Set(["cursor","pointer-events","touch-action","user-select","print-color-adjust","speak","reading-flow","reading-order","anchor-name","anchor-scope","container-name","container-type","timeline-scope"]);function Z6e(t){const e=String(t).toLowerCase();return!!(WQt.has(e)||GQt.test(e)||HQt.test(e))}function KZ(t,e){if(e=String(e||"").toLowerCase(),pre.has(e))return"";const n=[],r=$Qt(e);for(let[i,a]of Object.entries(t)){if(Z6e(i))continue;const o=r[i];a&&a!==o&&n.push(`${i}:${a}`)}return n.sort(),n.join(";")}function VQt(t){const e=new Set;return t.nodeType!==Node.ELEMENT_NODE&&t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE?[]:(t.tagName&&e.add(t.tagName.toLowerCase()),typeof t.querySelectorAll=="function"&&t.querySelectorAll("*").forEach(n=>e.add(n.tagName.toLowerCase())),Array.from(e))}function YQt(t){const e=new Map;for(let r of t){const i=Or.defaultStyle.get(r);if(!i)continue;const a=Object.entries(i).map(([o,s])=>`${o}:${s};`).sort().join("");a&&(e.has(a)||e.set(a,[]),e.get(a).push(r))}let n="";for(let[r,i]of e.entries())n+=`${i.join(",")} { ${r} }
`;return n}function XQt(t){const e=Array.from(new Set(t.values())).filter(Boolean).sort(),n=new Map;let r=1;for(const i of e)n.set(i,`c${r++}`);return n}function K6e(t,e=null){if(!(t instanceof Element))return window.getComputedStyle(t,e);let n=Or.computedStyle.get(t);if(n||(n=new Map,Or.computedStyle.set(t,n)),!n.has(e)){const r=window.getComputedStyle(t,e);n.set(e,r)}return n.get(e)}function uxe(t){const e={};for(let n of t)e[n]=t.getPropertyValue(n);return e}function Q6e(t){const e=[];let n=0,r=0;for(let i=0;i<t.length;i++){const a=t[i];a==="("&&n++,a===")"&&n--,a===","&&n===0&&(e.push(t.slice(r,i).trim()),r=i+1)}return e.push(t.slice(r).trim()),e}function GT(t,{fast:e=!1}={}){if(e)return t();"requestIdleCallback"in window?requestIdleCallback(t,{timeout:50}):setTimeout(t,1)}function YE(){const t=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"",e=/^((?!chrome|android).)*safari/i.test(t),n=/AppleWebKit/i.test(t)&&/Mobile/i.test(t)&&!/Safari/i.test(t),r=/(MicroMessenger|wxwork|WeCom|WindowsWechat|MacWechat)/i.test(t);return e||n||r}var fxe=new WeakMap,QZ=new Map,JZ=0;function CC(){JZ++}var hxe=!1;function qQt(t=document.documentElement){if(!hxe){hxe=!0;try{new MutationObserver(()=>CC()).observe(t,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{new MutationObserver(()=>CC()).observe(document.head,{subtree:!0,childList:!0,characterData:!0,attributes:!0})}catch{}try{const e=document.fonts;e&&(e.addEventListener?.("loadingdone",CC),e.ready?.then(()=>CC()).catch(()=>{}))}catch{}}}function ZQt(t,e={}){const n={},r=t.getPropertyValue("visibility");for(let i=0;i<t.length;i++){const a=t[i];let o=t.getPropertyValue(a);(a==="background-image"||a==="content")&&o.includes("url(")&&!o.includes("data:")&&(o="none"),n[a]=o}if(e.embedFonts){const i=["font-feature-settings","font-variation-settings","font-kerning","font-variant","font-variant-ligatures","font-optical-sizing"];for(const a of i)if(!n[a])try{const o=t.getPropertyValue(a);o&&(n[a]=o)}catch{}}return r==="hidden"&&(n.opacity="0"),n}var dxe=new WeakMap;function KQt(t){let e=dxe.get(t);return e||(e=Object.entries(t).sort((r,i)=>r[0]<i[0]?-1:r[0]>i[0]?1:0).map(([r,i])=>`${r}:${i}`).join(";"),dxe.set(t,e),e)}function QQt(t,e=null,n={}){const r=fxe.get(t);if(r&&r.epoch===JZ)return r.snapshot;const i=e||getComputedStyle(t),a=ZQt(i,n);return iJt(t,i,a),fxe.set(t,{epoch:JZ,snapshot:a}),a}function JQt(t,e){return t&&t.session&&t.persist?t:t&&(t.styleMap||t.styleCache||t.nodeMap)?{session:t,persist:{snapshotKeyCache:QZ,defaultStyle:Or.defaultStyle,baseStyle:Or.baseStyle,image:Or.image,resource:Or.resource,background:Or.background,font:Or.font},options:e||{}}:{session:Or.session,persist:{snapshotKeyCache:QZ,defaultStyle:Or.defaultStyle,baseStyle:Or.baseStyle,image:Or.image,resource:Or.resource,background:Or.background,font:Or.font},options:t||e||{}}}async function WT(t,e,n,r){if(t.tagName==="STYLE")return;const i=JQt(n,r),a=i.options&&i.options.cache||"auto";if(a!=="disabled"&&qQt(document.documentElement),a==="disabled"&&!i.session.__bumpedForDisabled&&(CC(),QZ.clear(),i.session.__bumpedForDisabled=!0),pre.has(t.tagName?.toLowerCase())){const h=t.getAttribute?.("style");h&&e.setAttribute("style",h)}const{session:o,persist:s}=i;o.styleCache.has(t)||o.styleCache.set(t,getComputedStyle(t));const l=o.styleCache.get(t),c=QQt(t,l,i.options),u=KQt(c);let f=s.snapshotKeyCache.get(u);if(!f){const h=t.tagName?.toLowerCase()||"div";f=KZ(c,h),s.snapshotKeyCache.set(u,f)}o.styleMap.set(e,f)}function eJt(t){return t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof HTMLIFrameElement||t instanceof SVGElement||t instanceof HTMLObjectElement||t instanceof HTMLEmbedElement}function tJt(t){return t.backgroundImage&&t.backgroundImage!=="none"||t.backgroundColor&&t.backgroundColor!=="rgba(0, 0, 0, 0)"&&t.backgroundColor!=="transparent"||(parseFloat(t.borderTopWidth)||0)>0||(parseFloat(t.borderBottomWidth)||0)>0||(parseFloat(t.paddingTop)||0)>0||(parseFloat(t.paddingBottom)||0)>0?!0:(t.overflowBlock||t.overflowY||"visible")!=="visible"}function nJt(t){const e=t.parentElement;if(!e)return!1;const n=getComputedStyle(e).display||"";return n.includes("flex")||n.includes("grid")}function rJt(t,e){if(t.textContent&&/\S/.test(t.textContent))return!0;const n=t.firstElementChild,r=t.lastElementChild;if(n&&n.tagName==="BR"||r&&r.tagName==="BR")return!0;const i=t.scrollHeight;if(i===0)return!1;const a=parseFloat(e.paddingTop)||0,o=parseFloat(e.paddingBottom)||0;return i>a+o}function iJt(t,e,n){if(t instanceof HTMLElement&&t.style&&t.style.height)return;const r=e.display||"";if(r.includes("flex")||r.includes("grid")||eJt(t))return;const i=e.position;i==="absolute"||i==="fixed"||i==="sticky"||e.transform==="none"&&(tJt(e)||nJt(t)||rJt(t,e)&&(delete n.height,delete n["block-size"]))}function aJt(t,e){if(!(t instanceof Element)||!(e instanceof Element))return;const n=t.getAttribute?.("style");let r=!!(n&&n.includes("var("));if(!r&&t.attributes?.length){const o=t.attributes;for(let s=0;s<o.length;s++){const l=o[s];if(l&&typeof l.value=="string"&&l.value.includes("var(")){r=!0;break}}}if(!r)return;let i;try{i=getComputedStyle(t)}catch{return}const a=t.style;if(a&&a.length)for(let o=0;o<a.length;o++){const s=a[o],l=a.getPropertyValue(s);if(!l||!l.includes("var("))continue;const c=i.getPropertyValue(s);if(c)try{e.style.setProperty(s,c.trim(),a.getPropertyPriority(s))}catch{}}if(t.attributes?.length){const o=t.attributes;for(let s=0;s<o.length;s++){const l=o[s];if(!l||typeof l.value!="string"||!l.value.includes("var("))continue;const c=l.name;let u="";try{u=i.getPropertyValue(c)}catch{}if(u)try{e.style.setProperty(c,u.trim())}catch{}}}}function yV(t,e,n){return Promise.all(t.map(r=>new Promise(i=>{function a(){GT(o=>{(o&&typeof o.timeRemaining=="function"?o.timeRemaining()>0:!0)?e(r,i):a()},{fast:n})}a()})))}function oJt(t){return t=t.trim(),!t||/:not\(\s*\[data-sd-slotted\]\s*\)\s*$/.test(t)?t:`${t}:not([data-sd-slotted])`}function sJt(t,e,n=!0){return t.split(",").map(r=>r.trim()).filter(Boolean).map(r=>{if(r.startsWith(":where(")||r.startsWith("@"))return r;const i=n?oJt(r):r;return`:where(${e} ${i})`}).join(", ")}function lJt(t,e){return t?(t=t.replace(/:host\(([^)]+)\)/g,(n,r)=>`:where(${e}:is(${r.trim()}))`),t=t.replace(/:host\b/g,`:where(${e})`),t=t.replace(/:host-context\(([^)]+)\)/g,(n,r)=>`:where(:where(${r.trim()}) ${e})`),t=t.replace(/::slotted\(([^)]+)\)/g,(n,r)=>`:where(${e} ${r.trim()})`),t=t.replace(/(^|})(\s*)([^@}{]+){/g,(n,r,i,a)=>{const o=sJt(a,e,!0);return`${r}${i}${o}{`}),t):""}function cJt(t){return t.shadowScopeSeq=(t.shadowScopeSeq||0)+1,`s${t.shadowScopeSeq}`}function uJt(t){let e="";try{t.querySelectorAll("style").forEach(r=>{e+=(r.textContent||"")+`
`});const n=t.adoptedStyleSheets||[];for(const r of n)try{if(r&&r.cssRules)for(const i of r.cssRules)e+=i.cssText+`
`}catch{}}catch{}return e}function fJt(t,e,n){if(!e)return;const r=document.createElement("style");r.setAttribute("data-sd",n),r.textContent=e,t.insertBefore(r,t.firstChild||null)}function hJt(t,e){try{const n=t.currentSrc||t.src||"";if(!n)return;e.setAttribute("src",n),e.removeAttribute("srcset"),e.removeAttribute("sizes"),e.loading="eager",e.decoding="sync"}catch{}}function dJt(t){const e=new Set;if(!t)return e;const n=/var\(\s*(--[A-Za-z0-9_-]+)\b/g;let r;for(;r=n.exec(t);)e.add(r[1]);return e}function pJt(t,e){try{let r=getComputedStyle(t).getPropertyValue(e).trim();if(r)return r}catch{}try{let r=getComputedStyle(document.documentElement).getPropertyValue(e).trim();if(r)return r}catch{}return""}function gJt(t,e,n){const r=[];for(const i of e){const a=pJt(t,i);a&&r.push(`${i}: ${a};`)}return r.length?`${n}{${r.join("")}}
`:""}function vJt(t){t&&(t.nodeType===Node.ELEMENT_NODE&&t.setAttribute("data-sd-slotted",""),t.querySelectorAll&&t.querySelectorAll("*").forEach(e=>e.setAttribute("data-sd-slotted","")))}async function mJt(t,e=3){const n=()=>{try{return t.contentDocument||t.contentWindow?.document||null}catch{return null}};let r=n(),i=0;for(;i<e&&(!r||!r.body&&!r.documentElement);)await new Promise(a=>setTimeout(a,0)),r=n(),i++;return r&&(r.body||r.documentElement)?r:null}function yJt(t){const e=t.getBoundingClientRect();let n=0,r=0,i=0,a=0;try{const l=getComputedStyle(t);n=parseFloat(l.borderLeftWidth)||0,r=parseFloat(l.borderRightWidth)||0,i=parseFloat(l.borderTopWidth)||0,a=parseFloat(l.borderBottomWidth)||0}catch{}const o=Math.max(0,Math.round(e.width-(n+r))),s=Math.max(0,Math.round(e.height-(i+a)));return{contentWidth:o,contentHeight:s,rect:e}}function _Jt(t,e,n){const r=t.createElement("style");return r.setAttribute("data-sd-iframe-pin",""),r.textContent=`html, body {margin: 0 !important;padding: 0 !important;width: ${e}px !important;height: ${n}px !important;min-width: ${e}px !important;min-height: ${n}px !important;box-sizing: border-box !important;overflow: hidden !important;background-clip: border-box !important;}`,(t.head||t.documentElement).appendChild(r),()=>{try{r.remove()}catch{}}}async function bJt(t,e,n){const r=await mJt(t,3);if(!r)throw new Error("iframe document not accessible/ready");const{contentWidth:i,contentHeight:a,rect:o}=yJt(t),s=n?.snap;if(!s||typeof s.toPng!="function")throw new Error("snapdom.toPng not available in iframe or window");const l={...n,scale:1},c=_Jt(r,i,a);let u;try{u=await s.toPng(r.documentElement,l)}finally{c()}u.style.display="block",u.style.width=`${i}px`,u.style.height=`${a}px`;const f=document.createElement("div");return e.nodeMap.set(f,t),WT(t,f,e,n),f.style.overflow="hidden",f.style.display="block",f.style.width||(f.style.width=`${Math.round(o.width)}px`),f.style.height||(f.style.height=`${Math.round(o.height)}px`),f.appendChild(u),f}async function Hk(t,e,n){if(!t)throw new Error("Invalid node");const r=new Set;let i=null,a=null;if(t.nodeType===Node.ELEMENT_NODE){const c=(t.localName||t.tagName||"").toLowerCase();if(t.id==="snapdom-sandbox"||t.hasAttribute("data-snapdom-sandbox")||zQt.has(c))return null}if(t.nodeType===Node.TEXT_NODE||t.nodeType!==Node.ELEMENT_NODE)return t.cloneNode(!0);if(t.getAttribute("data-capture")==="exclude"){if(n.excludeMode==="hide"){const c=document.createElement("div"),u=t.getBoundingClientRect();return c.style.cssText=`display:inline-block;width:${u.width}px;height:${u.height}px;visibility:hidden;`,c}else if(n.excludeMode==="remove")return null}if(n.exclude&&Array.isArray(n.exclude))for(const c of n.exclude)try{if(t.matches?.(c)){if(n.excludeMode==="hide"){const u=document.createElement("div"),f=t.getBoundingClientRect();return u.style.cssText=`display:inline-block;width:${f.width}px;height:${f.height}px;visibility:hidden;`,u}else if(n.excludeMode==="remove")return null}}catch(u){console.warn(`Invalid selector in exclude option: ${c}`,u)}if(typeof n.filter=="function")try{if(!n.filter(t)){if(n.filterMode==="hide"){const c=document.createElement("div"),u=t.getBoundingClientRect();return c.style.cssText=`display:inline-block;width:${u.width}px;height:${u.height}px;visibility:hidden;`,c}else if(n.filterMode==="remove")return null}}catch(c){console.warn("Error in filter function:",c)}if(t.tagName==="IFRAME"){let c=!1;try{c=!!(t.contentDocument||t.contentWindow?.document)}catch{c=!1}if(c)try{return await bJt(t,e,n)}catch(u){console.warn("[SnapDOM] iframe rasterization failed, fallback:",u)}if(n.placeholders){const u=document.createElement("div");return u.style.cssText=`width:${t.offsetWidth}px;height:${t.offsetHeight}px;background-image:repeating-linear-gradient(45deg,#ddd,#ddd 5px,#f9f9f9 5px,#f9f9f9 10px);display:flex;align-items:center;justify-content:center;font-size:12px;color:#555;border:1px solid #aaa;`,WT(t,u,e,n),u}else{const u=t.getBoundingClientRect(),f=document.createElement("div");return f.style.cssText=`display:inline-block;width:${u.width}px;height:${u.height}px;visibility:hidden;`,WT(t,f,e,n),f}}if(t.getAttribute("data-capture")==="placeholder"){const c=t.cloneNode(!1);e.nodeMap.set(c,t),WT(t,c,e,n);const u=document.createElement("div");return u.textContent=t.getAttribute("data-placeholder-text")||"",u.style.cssText="color:#666;font-size:12px;text-align:center;line-height:1.4;padding:0.5em;box-sizing:border-box;",c.appendChild(u),c}if(t.tagName==="CANVAS"){const c=t.toDataURL(),u=document.createElement("img");return u.src=c,u.width=t.width,u.height=t.height,e.nodeMap.set(u,t),WT(t,u,e,n),u}let o;try{if(o=t.cloneNode(!1),aJt(t,o),e.nodeMap.set(o,t),t.tagName==="IMG"){hJt(t,o);try{const c=t.getBoundingClientRect();let u=Math.round(c.width||0),f=Math.round(c.height||0);if(!u||!f){const h=window.getComputedStyle(t),d=parseFloat(h.width)||0,p=parseFloat(h.height)||0,g=parseInt(t.getAttribute("width")||"",10)||0,v=parseInt(t.getAttribute("height")||"",10)||0,y=t.width||t.naturalWidth||0,_=t.height||t.naturalHeight||0;u=Math.round(u||d||g||y||0),f=Math.round(f||p||v||_||0)}u&&(o.dataset.snapdomWidth=String(u)),f&&(o.dataset.snapdomHeight=String(f))}catch{}}}catch(c){throw console.error("[Snapdom] Failed to clone node:",t,c),c}if(t instanceof HTMLTextAreaElement){const c=t.getBoundingClientRect();o.style.width=`${c.width}px`,o.style.height=`${c.height}px`}if(t instanceof HTMLInputElement&&(o.value=t.value,o.setAttribute("value",t.value),t.checked!==void 0&&(o.checked=t.checked,t.checked&&o.setAttribute("checked",""),t.indeterminate&&(o.indeterminate=t.indeterminate))),t instanceof HTMLSelectElement&&(i=t.value),t instanceof HTMLTextAreaElement&&(a=t.value),WT(t,o,e,n),t.shadowRoot){let c=function(_,E){if(_.nodeType===Node.ELEMENT_NODE&&_.tagName==="STYLE")return E(null);Hk(_,e,n).then(x=>{E(x||null)}).catch(()=>{E(null)})};try{const _=t.shadowRoot.querySelectorAll("slot");for(const E of _){let x=[];try{x=E.assignedNodes?.({flatten:!0})||E.assignedNodes?.()||[]}catch{x=E.assignedNodes?.()||[]}for(const T of x)r.add(T)}}catch{}const u=cJt(e),f=`[data-sd="${u}"]`;try{o.setAttribute("data-sd",u)}catch{}const h=uJt(t.shadowRoot),d=lJt(h,f),p=dJt(h),g=gJt(t,p,f);fJt(o,g+d,u);const v=document.createDocumentFragment(),y=await yV(Array.from(t.shadowRoot.childNodes),c,n.fast);v.append(...y.filter(_=>!!_)),o.appendChild(v)}if(t.tagName==="SLOT"){let c=function(p,g){Hk(p,e,n).then(v=>{v&&vJt(v),g(v||null)}).catch(()=>{g(null)})};const u=t.assignedNodes?.({flatten:!0})||[],f=u.length>0?u:Array.from(t.childNodes),h=document.createDocumentFragment(),d=await yV(Array.from(f),c,n.fast);return h.append(...d.filter(p=>!!p)),h}function s(c,u){if(r.has(c))return u(null);Hk(c,e,n).then(f=>{u(f||null)}).catch(()=>{u(null)})}const l=await yV(Array.from(t.childNodes),s,n.fast);if(o.append(...l.filter(c=>!!c)),i!==null&&o instanceof HTMLSelectElement){o.value=i;for(const c of o.options)c.value===i?c.setAttribute("selected",""):c.removeAttribute("selected")}return a!==null&&o instanceof HTMLTextAreaElement&&(o.textContent=a),o}var EJt=[/font\s*awesome/i,/material\s*icons/i,/ionicons/i,/glyphicons/i,/feather/i,/bootstrap\s*icons/i,/remix\s*icons/i,/heroicons/i,/layui/i,/lucide/i],eK=[];function xJt(t){const e=Array.isArray(t)?t:[t];for(const n of e)n instanceof RegExp?eK.push(n):typeof n=="string"?eK.push(new RegExp(n,"i")):console.warn("[snapdom] Ignored invalid iconFont value:",n)}function ey(t){const e=typeof t=="string"?t:"",n=[...EJt,...eK];for(const r of n)if(r instanceof RegExp&&r.test(e))return!0;return!!(/icon/i.test(e)||/glyph/i.test(e)||/symbols/i.test(e)||/feather/i.test(e)||/fontawesome/i.test(e))}async function SJt(t,e,n,r=32,i="#000"){e=e.replace(/^['"]+|['"]+$/g,"");const a=window.devicePixelRatio||1;try{await document.fonts.ready}catch{}const o=document.createElement("span");o.textContent=t,o.style.position="absolute",o.style.visibility="hidden",o.style.fontFamily=`"${e}"`,o.style.fontWeight=n||"normal",o.style.fontSize=`${r}px`,o.style.lineHeight="1",o.style.whiteSpace="nowrap",o.style.padding="0",o.style.margin="0",document.body.appendChild(o);const s=o.getBoundingClientRect(),l=Math.ceil(s.width),c=Math.ceil(s.height);document.body.removeChild(o);const u=document.createElement("canvas");u.width=Math.max(1,l*a),u.height=Math.max(1,c*a);const f=u.getContext("2d");return f.scale(a,a),f.font=n?`${n} ${r}px "${e}"`:`${r}px "${e}"`,f.textAlign="left",f.textBaseline="top",f.fillStyle=i,f.fillText(t,0,0),{dataUrl:u.toDataURL(),width:l,height:c}}var TJt=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","emoji","math","fangsong","ui-serif","ui-sans-serif","ui-monospace","ui-rounded"]);function B5(t){if(!t)return"";for(let e of t.split(",")){let n=e.trim().replace(/^['"]+|['"]+$/g,"");if(n&&!TJt.has(n.toLowerCase()))return n}return""}function Gk(t){const e=String(t??"400").trim().toLowerCase();if(e==="normal")return 400;if(e==="bold")return 700;const n=parseInt(e,10);return Number.isFinite(n)?Math.min(900,Math.max(100,n)):400}function tK(t){const e=String(t??"normal").trim().toLowerCase();return e.startsWith("italic")?"italic":e.startsWith("oblique")?"oblique":"normal"}function AJt(t){const e=String(t??"100%").match(/(\d+(?:\.\d+)?)\s*%/);return e?Math.max(50,Math.min(200,parseFloat(e[1]))):100}function wJt(t){const e=String(t||"400").trim(),n=e.match(/^(\d{2,3})\s+(\d{2,3})$/);if(n){const i=Gk(n[1]),a=Gk(n[2]);return{min:Math.min(i,a),max:Math.max(i,a)}}const r=Gk(e);return{min:r,max:r}}function OJt(t){const e=String(t||"normal").trim().toLowerCase();return e==="italic"?{kind:"italic"}:e.startsWith("oblique")?{kind:"oblique"}:{kind:"normal"}}function CJt(t){const e=String(t||"100%").trim(),n=e.match(/(\d+(?:\.\d+)?)\s*%\s+(\d+(?:\.\d+)?)\s*%/);if(n){const a=parseFloat(n[1]),o=parseFloat(n[2]);return{min:Math.min(a,o),max:Math.max(a,o)}}const r=e.match(/(\d+(?:\.\d+)?)\s*%/),i=r?parseFloat(r[1]):100;return{min:i,max:i}}function RJt(t,e){if(!t)return!1;try{const n=new URL(t,location.href);if(n.origin===location.origin)return!0;const i=n.host.toLowerCase();if(["fonts.googleapis.com","fonts.gstatic.com","use.typekit.net","p.typekit.net","kit.fontawesome.com","use.fontawesome.com"].some(s=>i.endsWith(s)))return!0;const o=(n.pathname+n.search).toLowerCase();if(/\bfont(s)?\b/.test(o)||/\.woff2?(\b|$)/.test(o))return!0;for(const s of e){const l=s.toLowerCase().replace(/\s+/g,"+"),c=s.toLowerCase().replace(/\s+/g,"-");if(o.includes(l)||o.includes(c))return!0}return!1}catch{return!1}}function MJt(t){const e=new Set;for(const n of t||[]){const r=String(n).split("__")[0]?.trim();r&&e.add(r)}return e}function pxe(t,e){return t&&t.replace(/url\(\s*(['"]?)([^)'"]+)\1\s*\)/g,(n,r,i)=>{const a=(i||"").trim();if(!a||/^data:|^blob:|^https?:|^file:|^about:/i.test(a))return n;let o=a;try{o=new URL(a,e||location.href).href}catch{}return`url("${o}")`})}var nK=/@import\s+(?:url\(\s*(['"]?)([^)"']+)\1\s*\)|(['"])([^"']+)\3)([^;]*);/g,TF=4;async function PJt(t,e,n){if(!t)return t;const r=new Set;function i(s,l){try{return new URL(s,l||location.href).href}catch{return s}}async function a(s,l,c=0){if(c>TF)return console.warn(`[snapDOM] @import depth exceeded (${TF}) at ${l}`),s;let u="",f=0,h;for(;h=nK.exec(s);){u+=s.slice(f,h.index),f=nK.lastIndex;const d=(h[2]||h[4]||"").trim(),p=i(d,l);if(r.has(p)){console.warn(`[snapDOM] Skipping circular @import: ${p}`);continue}r.add(p);let g="";try{const v=await Fm(p,{as:"text",useProxy:n,silent:!0});v.ok&&typeof v.data=="string"&&(g=v.data)}catch{}g?(g=pxe(g,p),g=await a(g,p,c+1),u+=`
/* inlined: ${p} */
${g}
`):u+=h[0]}return u+=s.slice(f),u}let o=pxe(t,e||location.href);return o=await a(o,e||location.href,0),o}var J6e=/url\((["']?)([^"')]+)\1\)/g,NJt=/@font-face[^{}]*\{[^}]*\}/g;function e5e(t){if(!t)return[];const e=[],n=t.split(",").map(r=>r.trim()).filter(Boolean);for(const r of n){const i=r.match(/^U\+([0-9A-Fa-f?]+)(?:-([0-9A-Fa-f?]+))?$/);if(!i)continue;const a=i[1],o=i[2],s=l=>{if(!l.includes("?"))return parseInt(l,16);const c=parseInt(l.replace(/\?/g,"0"),16),u=parseInt(l.replace(/\?/g,"F"),16);return[c,u]};if(o){const l=s(a),c=s(o),u=Array.isArray(l)?l[0]:l,f=Array.isArray(c)?c[1]:c;e.push([Math.min(u,f),Math.max(u,f)])}else{const l=s(a);Array.isArray(l)?e.push([l[0],l[1]]):e.push([l,l])}}return e}function t5e(t,e){if(!e.length||!t||t.size===0)return!0;for(const n of t)for(const[r,i]of e)if(n>=r&&n<=i)return!0;return!1}function gre(t,e){const n=[];if(!t)return n;for(const r of t.matchAll(J6e)){let i=(r[2]||"").trim();if(!(!i||i.startsWith("data:"))){if(!/^https?:/i.test(i))try{i=new URL(i,e||location.href).href}catch{}n.push(i)}}return n}async function n5e(t,e,n=""){let r=t;for(const i of t.matchAll(J6e)){const a=hre(i[0]);if(!a)continue;let o=a;if(!o.startsWith("http")&&!o.startsWith("data:"))try{o=new URL(o,e||location.href).href}catch{}if(!ey(o)){if(Or.resource?.has(o)){Or.font?.add(o),r=r.replace(i[0],`url(${Or.resource.get(o)})`);continue}if(!Or.font?.has(o))try{const s=await Fm(o,{as:"dataURL",useProxy:n,silent:!0});if(s.ok&&typeof s.data=="string"){const l=s.data;Or.resource?.set(o,l),Or.font?.add(o),r=r.replace(i[0],`url(${l})`)}}catch{console.warn("[snapDOM] Failed to fetch font resource:",o)}}}return r}function IJt(t){if(!t.length)return null;const e=(s,l)=>t.some(([c,u])=>!(u<s||c>l)),n=e(0,255)||e(305,305),r=e(256,591)||e(7680,7935),i=e(880,1023),a=e(1024,1279);return e(7840,7929)||e(258,259)||e(416,417)||e(431,432)?"vietnamese":a?"cyrillic":i?"greek":r?"latin-ext":n?"latin":null}function gxe(t={}){const e=new Set((t.families||[]).map(i=>String(i).toLowerCase())),n=new Set((t.domains||[]).map(i=>String(i).toLowerCase())),r=new Set((t.subsets||[]).map(i=>String(i).toLowerCase()));return(i,a)=>{if(e.size&&e.has(i.family.toLowerCase()))return!0;if(n.size)for(const o of i.srcUrls)try{if(n.has(new URL(o).host.toLowerCase()))return!0}catch{}if(r.size){const o=IJt(a);if(o&&r.has(o))return!0}return!1}}function LJt(t){if(!t)return t;const e=/@font-face[^{}]*\{[^}]*\}/gi,n=new Set,r=[];for(const a of t.match(e)||[]){const o=a.match(/font-family:\s*([^;]+);/i)?.[1]||"",s=B5(o),l=(a.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),c=(a.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),u=(a.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),f=(a.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),h=(a.match(/src\s*:\s*([^;]+);/i)?.[1]||"").trim(),d=gre(h,location.href),p=d.length?d.map(v=>String(v).toLowerCase()).sort().join("|"):h.toLowerCase(),g=[String(s||"").toLowerCase(),l,c,u,f.toLowerCase(),p].join("|");n.has(g)||(n.add(g),r.push(a))}if(r.length===0)return t;let i=0;return t.replace(e,()=>r[i++]||"")}function kJt(t,e,n,r){const i=Array.from(t||[]).sort().join("|"),a=e?JSON.stringify({families:(e.families||[]).map(l=>String(l).toLowerCase()).sort(),domains:(e.domains||[]).map(l=>String(l).toLowerCase()).sort(),subsets:(e.subsets||[]).map(l=>String(l).toLowerCase()).sort()}):"",o=(n||[]).map(l=>`${(l.family||"").toLowerCase()}::${l.weight||"normal"}::${l.style||"normal"}::${l.src||""}`).sort().join("|");return`fonts-embed-css::req=${i}::ex=${a}::lf=${o}::px=${r||""}`}async function r5e(t,e,n,r){let i;try{i=t.cssRules||[]}catch{return}const a=(o,s)=>{try{return new URL(o,s||location.href).href}catch{return o}};for(const o of i){if(o.type===CSSRule.IMPORT_RULE&&o.styleSheet){const s=o.href?a(o.href,e):e;if(r.depth>=TF){console.warn(`[snapDOM] CSSOM import depth exceeded (${TF}) at ${s}`);continue}if(s&&r.visitedSheets.has(s)){console.warn(`[snapDOM] Skipping circular CSSOM import: ${s}`);continue}s&&r.visitedSheets.add(s);const l={...r,depth:(r.depth||0)+1};await r5e(o.styleSheet,s,n,l);continue}if(o.type===CSSRule.FONT_FACE_RULE){const s=(o.style.getPropertyValue("font-family")||"").trim(),l=B5(s);if(!l||ey(l))continue;const c=(o.style.getPropertyValue("font-weight")||"400").trim(),u=(o.style.getPropertyValue("font-style")||"normal").trim(),f=(o.style.getPropertyValue("font-stretch")||"100%").trim(),h=(o.style.getPropertyValue("src")||"").trim(),d=(o.style.getPropertyValue("unicode-range")||"").trim();if(!r.faceMatchesRequired(l,u,c,f))continue;const p=e5e(d);if(!t5e(r.usedCodepoints,p))continue;const g={family:l,weightSpec:c,styleSpec:u,stretchSpec:f,unicodeRange:d,srcRaw:h,srcUrls:gre(h,e||location.href),href:e||location.href};if(r.simpleExcluder&&r.simpleExcluder(g,p))continue;if(/url\(/i.test(h)){const v=await n5e(h,e||location.href,r.useProxy);await n(`@font-face{font-family:${l};src:${v};font-style:${u};font-weight:${c};font-stretch:${f};${d?`unicode-range:${d};`:""}}`)}else await n(`@font-face{font-family:${l};src:${h};font-style:${u};font-weight:${c};font-stretch:${f};${d?`unicode-range:${d};`:""}}`)}}}async function DJt({required:t,usedCodepoints:e,exclude:n=void 0,localFonts:r=[],useProxy:i=""}={}){t instanceof Set||(t=new Set),e instanceof Set||(e=new Set);const a=new Map;for(const g of t){const[v,y,_,E]=String(g).split("__");if(!v)continue;const x=a.get(v)||[];x.push({w:parseInt(y,10),s:_,st:parseInt(E,10)}),a.set(v,x)}function o(g,v,y,_){if(!a.has(g))return!1;const E=a.get(g),x=wJt(y),T=OJt(v),S=CJt(_),w=x.min!==x.max,C=x.min,D=B=>T.kind==="normal"&&B==="normal"||T.kind!=="normal"&&(B==="italic"||B==="oblique");let L=!1;for(const B of E){const I=w?B.w>=x.min&&B.w<=x.max:B.w===C,U=D(tK(B.s)),$=B.st>=S.min&&B.st<=S.max;if(I&&U&&$){L=!0;break}}if(L)return!0;if(!w)for(const B of E){const I=D(tK(B.s)),U=B.st>=S.min&&B.st<=S.max;if(Math.abs(C-B.w)<=300&&I&&U)return!0}return!1}const s=gxe(n),l=kJt(t,n,r,i);if(Or.resource?.has(l))return Or.resource.get(l);const c=MJt(t),u=[],f=nK;for(const g of document.querySelectorAll("style")){const v=g.textContent||"";for(const y of v.matchAll(f)){const _=(y[2]||y[4]||"").trim();if(!_||ey(_))continue;!!document.querySelector(`link[rel="stylesheet"][href="${_}"]`)||u.push(_)}}u.length&&await Promise.all(u.map(g=>new Promise(v=>{if(document.querySelector(`link[rel="stylesheet"][href="${g}"]`))return v(null);const y=document.createElement("link");y.rel="stylesheet",y.href=g,y.setAttribute("data-snapdom","injected-import"),y.onload=()=>v(y),y.onerror=()=>v(null),document.head.appendChild(y)})));let h="";const d=Array.from(document.querySelectorAll('link[rel="stylesheet"]')).filter(g=>!!g.href);for(const g of d)try{if(ey(g.href))continue;let v="",y=!1;try{y=new URL(g.href,location.href).origin===location.origin}catch{}if(!y&&!RJt(g.href,c))continue;if(y){const E=Array.from(document.styleSheets).find(x=>x.href===g.href);if(E)try{const x=E.cssRules||[];v=Array.from(x).map(T=>T.cssText).join("")}catch{}}if(!v&&(v=(await Fm(g.href,{as:"text",useProxy:i})).data,ey(g.href)))continue;v=await PJt(v,g.href,i);let _="";for(const E of v.match(NJt)||[]){const x=(E.match(/font-family:\s*([^;]+);/i)?.[1]||"").trim(),T=B5(x);if(!T||ey(T))continue;const S=(E.match(/font-weight:\s*([^;]+);/i)?.[1]||"400").trim(),w=(E.match(/font-style:\s*([^;]+);/i)?.[1]||"normal").trim(),C=(E.match(/font-stretch:\s*([^;]+);/i)?.[1]||"100%").trim(),D=(E.match(/unicode-range:\s*([^;]+);/i)?.[1]||"").trim(),L=(E.match(/src\s*:\s*([^;]+);/i)?.[1]||"").trim(),B=gre(L,g.href);if(!o(T,w,S,C))continue;const I=e5e(D);if(!t5e(e,I))continue;const U={family:T,weightSpec:S,styleSpec:w,stretchSpec:C,unicodeRange:D,srcRaw:L,srcUrls:B,href:g.href};if(n&&s(U,I))continue;const $=/url\(/i.test(L)?await n5e(E,g.href,i):E;_+=$}_.trim()&&(h+=_)}catch{console.warn("[snapDOM] Failed to process stylesheet:",g.href)}const p={requiredIndex:a,usedCodepoints:e,faceMatchesRequired:o,simpleExcluder:n?gxe(n):null,useProxy:i,visitedSheets:new Set,depth:0};for(const g of document.styleSheets)if(!(g.href&&d.some(v=>v.href===g.href)))try{const v=g.href||location.href;v&&p.visitedSheets.add(v),await r5e(g,v,async y=>{h+=y},p)}catch{}try{for(const g of document.fonts||[]){if(!g||!g.family||g.status!=="loaded"||!g._snapdomSrc)continue;const v=String(g.family).replace(/^['"]+|['"]+$/g,"");if(ey(v)||!a.has(v)||n?.families&&n.families.some(_=>String(_).toLowerCase()===v.toLowerCase()))continue;let y=g._snapdomSrc;if(!String(y).startsWith("data:")){if(Or.resource?.has(g._snapdomSrc))y=Or.resource.get(g._snapdomSrc),Or.font?.add(g._snapdomSrc);else if(!Or.font?.has(g._snapdomSrc))try{const _=await Fm(g._snapdomSrc,{as:"dataURL",useProxy:i,silent:!0});if(_.ok&&typeof _.data=="string")y=_.data,Or.resource?.set(g._snapdomSrc,y),Or.font?.add(g._snapdomSrc);else continue}catch{console.warn("[snapDOM] Failed to fetch dynamic font src:",g._snapdomSrc);continue}}h+=`@font-face{font-family:'${v}';src:url(${y});font-style:${g.style||"normal"};font-weight:${g.weight||"normal"};}`}}catch{}for(const g of r){if(!g||typeof g!="object")continue;const v=String(g.family||"").replace(/^['"]+|['"]+$/g,"");if(!v||ey(v)||!a.has(v)||n?.families&&n.families.some(S=>String(S).toLowerCase()===v.toLowerCase()))continue;const y=g.weight!=null?String(g.weight):"normal",_=g.style!=null?String(g.style):"normal",E=g.stretchPct!=null?`${g.stretchPct}%`:"100%",x=String(g.src||"");let T=x;if(!T.startsWith("data:")){if(Or.resource?.has(x))T=Or.resource.get(x),Or.font?.add(x);else if(!Or.font?.has(x))try{const S=await Fm(x,{as:"dataURL",useProxy:i,silent:!0});if(S.ok&&typeof S.data=="string")T=S.data,Or.resource?.set(x,T),Or.font?.add(x);else continue}catch{console.warn("[snapDOM] Failed to fetch localFonts src:",x);continue}}h+=`@font-face{font-family:'${v}';src:url(${T});font-style:${_};font-weight:${y};font-stretch:${E};}`}return h&&(h=LJt(h),Or.resource?.set(l,h)),h}function BJt(t){const e=new Set;if(!t)return e;const n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null),r=o=>{const s=B5(o.fontFamily);if(!s)return;const l=(c,u,f)=>`${s}__${Gk(c)}__${tK(u)}__${AJt(f)}`;e.add(l(o.fontWeight,o.fontStyle,o.fontStretch))};r(getComputedStyle(t));const i=getComputedStyle(t,"::before");i&&i.content&&i.content!=="none"&&r(i);const a=getComputedStyle(t,"::after");for(a&&a.content&&a.content!=="none"&&r(a);n.nextNode();){const o=n.currentNode,s=getComputedStyle(o);r(s);const l=getComputedStyle(o,"::before");l&&l.content&&l.content!=="none"&&r(l);const c=getComputedStyle(o,"::after");c&&c.content&&c.content!=="none"&&r(c)}return e}function FJt(t){const e=new Set,n=i=>{if(i)for(const a of i)e.add(a.codePointAt(0))},r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null);for(;r.nextNode();){const i=r.currentNode;if(i.nodeType===Node.TEXT_NODE)n(i.nodeValue||"");else if(i.nodeType===Node.ELEMENT_NODE){const a=i;for(const o of["::before","::after"]){const l=getComputedStyle(a,o)?.getPropertyValue("content");if(!(!l||l==="none"))if(/^"/.test(l)||/^'/.test(l))n(l.slice(1,-1));else{const c=l.match(/\\[0-9A-Fa-f]{1,6}/g);if(c)for(const u of c)try{e.add(parseInt(u.slice(1),16))}catch{}}}}}return e}async function UJt(t,e=2){try{await document.fonts.ready}catch{}const n=Array.from(t||[]).filter(Boolean);if(n.length===0)return;const r=()=>{const i=document.createElement("div");i.style.cssText="position:absolute!important;left:-9999px!important;top:0!important;opacity:0!important;pointer-events:none!important;contain:layout size style;";for(const a of n){const o=document.createElement("span");o.textContent="AaBbGg1234",o.style.fontFamily=`"${a}"`,o.style.fontWeight="700",o.style.fontStyle="italic",o.style.fontSize="32px",o.style.lineHeight="1",o.style.whiteSpace="nowrap",o.style.margin="0",o.style.padding="0",i.appendChild(o)}document.body.appendChild(i),i.offsetWidth,document.body.removeChild(i)};for(let i=0;i<Math.max(1,e);i++)r(),await new Promise(a=>requestAnimationFrame(()=>requestAnimationFrame(a)))}function jJt(t){return/\bcounter\s*\(|\bcounters\s*\(/.test(t||"")}function zJt(t){return(t||"").replace(/"([^"]*)"/g,"$1")}function vxe(t,e=!1){let n="",r=Math.max(1,t);for(;r>0;)r--,n=String.fromCharCode(97+r%26)+n,r=Math.floor(r/26);return e?n.toUpperCase():n}function mxe(t,e=!0){const n=[[1e3,"M"],[900,"CM"],[500,"D"],[400,"CD"],[100,"C"],[90,"XC"],[50,"L"],[40,"XL"],[10,"X"],[9,"IX"],[5,"V"],[4,"IV"],[1,"I"]];let r=Math.max(1,Math.min(3999,t)),i="";for(const[a,o]of n)for(;r>=a;)i+=o,r-=a;return e?i:i.toLowerCase()}function yxe(t,e){switch((e||"decimal").toLowerCase()){case"decimal":return String(Math.max(0,t));case"decimal-leading-zero":return(t<10?"0":"")+String(Math.max(0,t));case"lower-alpha":return vxe(t,!1);case"upper-alpha":return vxe(t,!0);case"lower-roman":return mxe(t,!1);case"upper-roman":return mxe(t,!0);default:return String(Math.max(0,t))}}function $Jt(t){const e=new WeakMap,n=t instanceof Document?t.documentElement:t,r=c=>c&&c.tagName==="LI",i=c=>{let u=0,f=c?.parentElement;if(!f)return 0;for(const h of f.children){if(h===c)break;h.tagName==="LI"&&u++}return u},a=c=>{const u=new Map;for(const[f,h]of c)u.set(f,h.slice());return u},o=(c,u,f)=>{const h=a(c);let d;try{d=f.style?.counterReset||getComputedStyle(f).counterReset}catch{}if(d&&d!=="none")for(const g of d.split(",")){const v=g.trim().split(/\s+/),y=v[0],_=Number.isFinite(Number(v[1]))?Number(v[1]):0;if(!y)continue;const E=u.get(y);if(E&&E.length){const x=E.slice();x.push(_),h.set(y,x)}else h.set(y,[_])}let p;try{p=f.style?.counterIncrement||getComputedStyle(f).counterIncrement}catch{}if(p&&p!=="none")for(const g of p.split(",")){const v=g.trim().split(/\s+/),y=v[0],_=Number.isFinite(Number(v[1]))?Number(v[1]):1;if(!y)continue;const E=h.get(y)||[];E.length===0&&E.push(0),E[E.length-1]+=_,h.set(y,E)}try{if(getComputedStyle(f).display==="list-item"&&r(f)){const v=f.parentElement;let y=1;if(v&&v.tagName==="OL"){const E=v.getAttribute("start"),x=Number.isFinite(Number(E))?Number(E):1,T=i(f),S=f.getAttribute("value");y=Number.isFinite(Number(S))?Number(S):x+T}else y=1+i(f);const _=h.get("list-item")||[];_.length===0&&_.push(0),_[_.length-1]=y,h.set("list-item",_)}}catch{}return h},s=(c,u,f)=>{const h=o(f,u,c);e.set(c,h);let d=h;for(const p of c.children)d=s(p,h,d);return h},l=new Map;return s(n,l,l),{get(c,u){const f=e.get(c)?.get(u);return f&&f.length?f[f.length-1]:0},getStack(c,u){const f=e.get(c)?.get(u);return f?f.slice():[]}}}function HJt(t,e,n){if(!t||t==="none")return t;try{const r=/\b(counter|counters)\s*\(([^)]+)\)/g;let i=t.replace(r,(a,o,s)=>{const l=String(s).split(",").map(c=>c.trim());if(o==="counter"){const c=l[0]?.replace(/^["']|["']$/g,""),u=(l[1]||"decimal").toLowerCase(),f=n.get(e,c);return yxe(f,u)}else{const c=l[0]?.replace(/^["']|["']$/g,""),u=l[1]?.replace(/^["']|["']$/g,"")??"",f=(l[2]||"decimal").toLowerCase(),h=n.getStack(e,c);return h.length?h.map(p=>yxe(p,f)).join(u):""}});return zJt(i)}catch{return"- "}}var z2=null,RC=new WeakMap;function GJt(t){return(t||"").replace(/"([^"]*)"/g,"$1")}function WJt(t){if(!t)return"";const e=[],n=/"([^"]*)"/g;let r;for(;r=n.exec(t);)e.push(r[1]);return e.length?e.join(""):GJt(t)}function rK(t,e){const n=t.parentElement,r=n?RC.get(n):null;return r?{get(i,a){const o=e.get(i,a),s=r.get(a);return typeof s=="number"?Math.max(o,s):o},getStack(i,a){const o=e.getStack(i,a);if(!o.length)return o;const s=r.get(a);if(typeof s=="number"){const l=o.slice();return l[l.length-1]=Math.max(l[l.length-1],s),l}return o}}:e}function iK(t,e,n){const r=new Map;function i(l){const c=[];if(!l||l==="none")return c;for(const u of String(l).split(",")){const f=u.trim().split(/\s+/),h=f[0],d=Number.isFinite(Number(f[1]))?Number(f[1]):void 0;h&&c.push({name:h,num:d})}return c}const a=i(e?.counterReset),o=i(e?.counterIncrement);function s(l){if(r.has(l))return r.get(l).slice();let c=n.getStack(t,l);c=c.length?c.slice():[];const u=a.find(h=>h.name===l);if(u){const h=Number.isFinite(u.num)?u.num:0;c=c.length?[...c,h]:[h]}const f=o.find(h=>h.name===l);if(f){const h=Number.isFinite(f.num)?f.num:1;c.length===0&&(c=[0]),c[c.length-1]+=h}return r.set(l,c.slice()),c}return{get(l,c){const u=s(c);return u.length?u[u.length-1]:0},getStack(l,c){return s(c)},__incs:o}}function VJt(t,e,n){let r;try{r=getComputedStyle(t,e)}catch{}const i=r?.content;if(!i||i==="none"||i==="normal")return{text:"",incs:[]};const a=rK(t,n),o=iK(t,r,a);let s=jJt(i)?HJt(i,t,o):i;return{text:WJt(s),incs:o.__incs||[]}}async function i5e(t,e,n,r){if(!(t instanceof Element)||!(e instanceof Element))return;if(!z2)try{z2=$Jt(t.ownerDocument||document)}catch{}for(const o of["::before","::after","::first-letter"])try{const s=K6e(t,o);if(!s||typeof s[Symbol.iterator]!="function"||s.content==="none"&&s.backgroundImage==="none"&&s.backgroundColor==="transparent"&&(s.borderStyle==="none"||parseFloat(s.borderWidth)===0)&&(!s.transform||s.transform==="none")&&s.display==="inline")continue;if(o==="::first-letter"){const M=getComputedStyle(t);if(!(s.color!==M.color||s.fontSize!==M.fontSize||s.fontWeight!==M.fontWeight))continue;const z=Array.from(e.childNodes).find(ve=>ve.nodeType===Node.TEXT_NODE&&ve.textContent?.trim().length>0);if(!z)continue;const j=z.textContent,Q=j.match(/^([^\p{L}\p{N}\s]*[\p{L}\p{N}](?:['])?)/u)?.[0],ee=j.slice(Q?.length||0);if(!Q||/[\uD800-\uDFFF]/.test(Q))continue;const re=document.createElement("span");re.textContent=Q,re.dataset.snapdomPseudo="::first-letter";const ne=uxe(s),le=KZ(ne,"span");n.styleMap.set(re,le);const ue=document.createTextNode(ee);e.replaceChild(ue,z),e.insertBefore(re,ue);continue}const c=s.content,{text:u,incs:f}=VJt(t,o,z2),h=s.backgroundImage,d=s.backgroundColor,p=s.fontFamily,g=parseInt(s.fontSize)||32,v=parseInt(s.fontWeight)||!1,y=s.color||"#000",_=s.borderStyle,E=parseFloat(s.borderWidth),x=s.transform,T=ey(p),S=c!=="none"&&u!=="",w=h&&h!=="none",C=d&&d!=="transparent"&&d!=="rgba(0, 0, 0, 0)",D=_&&_!=="none"&&E>0,L=x&&x!=="none";if(!(S||w||C||D||L)){if(f&&f.length&&t.parentElement){const M=RC.get(t.parentElement)||new Map;for(const{name:k}of f){if(!k)continue;const z=rK(t,z2),V=iK(t,getComputedStyle(t,o),z).get(t,k);M.set(k,V)}RC.set(t.parentElement,M)}continue}const I=document.createElement("span");I.dataset.snapdomPseudo=o,I.style.verticalAlign="middle",I.style.pointerEvents="none";const U=uxe(s),$=KZ(U,"span");if(n.styleMap.set(I,$),T&&u&&u.length===1){const{dataUrl:M,width:k,height:z}=await SJt(u,p,v,g,y),j=document.createElement("img");j.src=M,j.style=`height:${g}px;width:${k/z*g}px;object-fit:contain;`,I.appendChild(j),e.dataset.snapdomHasIcon="true"}else if(u&&u.startsWith("url(")){const M=hre(u);if(M?.trim())try{const k=document.createElement("img"),z=await Fm(SF(M),{as:"dataURL",useProxy:r.useProxy});k.src=z.data,k.style=`width:${g}px;height:auto;object-fit:contain;`,I.appendChild(k)}catch(k){console.error(`[snapdom] Error in pseudo ${o} for`,t,k)}}else!T&&S&&(I.textContent=u);if(I.style.background="none","mask"in I.style&&(I.style.mask="none"),w)try{const M=Q6e(h),k=await Promise.all(M.map(q6e));I.style.backgroundImage=k.join(", ")}catch(M){console.warn(`[snapdom] Failed to inline background-image for ${o}`,M)}C&&(I.style.backgroundColor=d);const N=I.childNodes.length>0||I.textContent?.trim()!==""||w||C||D||L;if(f&&f.length&&t.parentElement){const M=RC.get(t.parentElement)||new Map,k=rK(t,z2),z=iK(t,getComputedStyle(t,o),k);for(const{name:j}of f){if(!j)continue;const V=z.get(t,j);M.set(j,V)}RC.set(t.parentElement,M)}if(!N)continue;o==="::before"?e.insertBefore(I,e.firstChild):e.appendChild(I)}catch(s){console.warn(`[snapdom] Failed to capture ${o} for`,t,s)}const i=Array.from(t.children),a=Array.from(e.children).filter(o=>!o.dataset.snapdomPseudo);for(let o=0;o<Math.min(i.length,a.length);o++)await i5e(i[o],a[o],n,r)}function YJt(t){if(!t)return;const e=new Set;if(t.querySelectorAll("use").forEach(s=>{const l=s.getAttribute("xlink:href")||s.getAttribute("href");l&&l.startsWith("#")&&e.add(l.slice(1))}),!e.size)return;const n=Array.from(document.querySelectorAll("svg > symbol, svg > defs")),r=n.filter(s=>s.tagName.toLowerCase()==="symbol"),i=n.filter(s=>s.tagName.toLowerCase()==="defs");let a=t.querySelector("svg.inline-defs-container");a||(a=document.createElementNS("http://www.w3.org/2000/svg","svg"),a.setAttribute("aria-hidden","true"),a.setAttribute("style","position: absolute; width: 0; height: 0; overflow: hidden;"),a.classList.add("inline-defs-container"),t.insertBefore(a,t.firstChild));const o=new Set;t.querySelectorAll("symbol[id], defs > *[id]").forEach(s=>{o.add(s.id)}),e.forEach(s=>{if(o.has(s))return;const l=r.find(c=>c.id===s);if(l){a.appendChild(l.cloneNode(!0)),o.add(s);return}for(const c of i){const u=c.querySelector(`#${CSS.escape(s)}`);if(u){let f=a.querySelector("defs");f||(f=document.createElementNS("http://www.w3.org/2000/svg","defs"),a.appendChild(f)),f.appendChild(u.cloneNode(!0)),o.add(s);break}}})}function XJt(t,e){if(!t||!e)return;const n=t.scrollTop||0;if(!n)return;getComputedStyle(e).position==="static"&&(e.style.position="relative");const r=t.getBoundingClientRect(),i=t.clientHeight,a="data-snap-ph",o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT);for(;o.nextNode();){const s=o.currentNode,l=getComputedStyle(s),c=l.position;if(c!=="sticky"&&c!=="-webkit-sticky")continue;const u=_xe(l.top),f=_xe(l.bottom);if(u==null&&f==null)continue;const h=qJt(s,t),d=ZJt(e,h,a);if(!d)continue;const p=s.getBoundingClientRect(),g=p.width,v=p.height,y=p.left-r.left;if(!(g>0&&v>0)||!Number.isFinite(y))continue;const _=u!=null?u+n:n+(i-v-f);if(!Number.isFinite(_))continue;const E=Number.parseInt(l.zIndex,10),x=Number.isFinite(E),T=x?Math.max(E,1)+1:2,S=x?E-1:0,w=d.cloneNode(!1);w.setAttribute(a,"1"),w.style.position="sticky",w.style.left=`${y}px`,w.style.top=`${_}px`,w.style.width=`${g}px`,w.style.height=`${v}px`,w.style.visibility="hidden",w.style.zIndex=String(S),w.style.overflow="hidden",w.style.background="transparent",w.style.boxShadow="none",w.style.filter="none",d.parentElement?.insertBefore(w,d),d.style.position="absolute",d.style.left=`${y}px`,d.style.top=`${_}px`,d.style.bottom="auto",d.style.zIndex=String(T),d.style.pointerEvents="none"}}function _xe(t){if(!t||t==="auto")return null;const e=Number.parseFloat(t);return Number.isFinite(e)?e:null}function qJt(t,e){const n=[];for(let r=t;r&&r!==e;){const i=r.parentElement;if(!i)break;n.push(Array.prototype.indexOf.call(i.children,r)),r=i}return n.reverse()}function ZJt(t,e,n){let r=t;for(let i=0;i<e.length;i++)if(r=KJt(r,n)[e[i]],!r)return null;return r instanceof HTMLElement?r:null}function KJt(t,e){const n=[],r=t.children;for(let i=0;i<r.length;i++){const a=r[i];a.hasAttribute(e)||n.push(a)}return n}async function QJt(t,e={}){const n={styleMap:Or.session.styleMap,styleCache:Or.session.styleCache,nodeMap:Or.session.nodeMap};let r,i="",a="";JJt(t);try{YJt(t)}catch(l){console.warn("inlineExternal defs or symbol failed:",l)}try{r=await Hk(t,n,e,t)}catch(l){throw console.warn("deepClone failed:",l),l}try{await i5e(t,r,n,e)}catch(l){console.warn("inlinePseudoElements failed:",l)}await ren(r);try{const l=r.querySelectorAll("style[data-sd]");for(const c of l)a+=c.textContent||"",c.remove()}catch{}const o=XQt(n.styleMap);i=Array.from(o.entries()).map(([l,c])=>`.${c}{${l}}`).join(""),i=a+i;for(const[l,c]of n.styleMap.entries()){if(l.tagName==="STYLE")continue;if(l.getRootNode&&l.getRootNode()instanceof ShadowRoot){l.setAttribute("style",c.replace(/;/g,"; "));continue}const u=o.get(c);u&&l.classList.add(u);const f=l.style?.backgroundImage,h=l.dataset?.snapdomHasIcon;f&&f!=="none"&&(l.style.backgroundImage=f),h&&(l.style.verticalAlign="middle",l.style.display="inline")}for(const[l,c]of n.nodeMap.entries()){const u=c.scrollLeft,f=c.scrollTop;if((u||f)&&l instanceof HTMLElement){l.style.overflow="hidden",l.style.scrollbarWidth="none",l.style.msOverflowStyle="none";const d=document.createElement("div");for(d.style.transform=`translate(${-u}px, ${-f}px)`,d.style.willChange="transform",d.style.display="inline-block",d.style.width="100%";l.firstChild;)d.appendChild(l.firstChild);l.appendChild(d)}}const s=r instanceof HTMLElement&&r.firstElementChild instanceof HTMLElement?r.firstElementChild:r;if(XJt(t,s),t===n.nodeMap.get(r)){const l=n.styleCache.get(t)||window.getComputedStyle(t);n.styleCache.set(t,l);const c=LQt(l.transform);r.style.margin="0",r.style.top="auto",r.style.left="auto",r.style.right="auto",r.style.bottom="auto",r.style.animation="none",r.style.transition="none",r.style.willChange="auto",r.style.float="none",r.style.clear="none",r.style.transform=c||""}for(const[l,c]of n.nodeMap.entries())c.tagName==="PRE"&&(l.style.marginTop="0",l.style.marginBlockStart="0");return{clone:r,classCSS:i,styleCache:n.styleCache}}function JJt(t){const e=getComputedStyle(t),n=e.outlineStyle,r=e.outlineWidth,i=e.borderStyle,a=e.borderWidth,o=n!=="none"&&parseFloat(r)>0,s=i==="none"||parseFloat(a)===0;o&&s&&(t.style.border=`${r} solid transparent`)}var $2=new Map;async function MC(t){if(Or.resource?.has(t))return Or.resource.get(t);if($2.has(t))return $2.get(t);const e=(async()=>{const n=await Fm(t,{as:"dataURL",silent:!0});if(!n.ok||typeof n.data!="string")throw new Error(`[snapDOM] Failed to read blob URL: ${t}`);return Or.resource?.set(t,n.data),n.data})();$2.set(t,e);try{const n=await e;return $2.set(t,n),n}catch(n){throw $2.delete(t),n}}var een=/\bblob:[^)"'\s]+/g;async function bxe(t){if(!t||t.indexOf("blob:")===-1)return t;const e=Array.from(new Set(t.match(een)||[]));if(e.length===0)return t;let n=t;for(const r of e)try{const i=await MC(r);n=n.split(r).join(i)}catch{}return n}function jL(t){return typeof t=="string"&&t.startsWith("blob:")}function ten(t){return(t||"").split(",").map(e=>e.trim()).filter(Boolean).map(e=>{const n=e.match(/^(\S+)(\s+.+)?$/);return n?{url:n[1],desc:n[2]||""}:null}).filter(Boolean)}function nen(t){return t.map(e=>e.desc?`${e.url} ${e.desc.trim()}`:e.url).join(", ")}async function ren(t){if(!t)return;const e=t.querySelectorAll?t.querySelectorAll("img"):[];for(const o of e)try{const l=o.getAttribute("src")||o.currentSrc||"";if(jL(l)){const u=await MC(l);o.setAttribute("src",u)}const c=o.getAttribute("srcset");if(c&&c.includes("blob:")){const u=ten(c);let f=!1;for(const h of u)if(jL(h.url))try{h.url=await MC(h.url),f=!0}catch{}f&&o.setAttribute("srcset",nen(u))}}catch{}const n=t.querySelectorAll?t.querySelectorAll("image"):[];for(const o of n)try{const s="http://www.w3.org/1999/xlink",l=o.getAttribute("href")||o.getAttributeNS?.(s,"href");if(jL(l)){const c=await MC(l);o.setAttribute("href",c),o.removeAttributeNS?.(s,"href")}}catch{}const r=t.querySelectorAll?t.querySelectorAll("[style*='blob:']"):[];for(const o of r)try{const s=o.getAttribute("style");if(s&&s.includes("blob:")){const l=await bxe(s);o.setAttribute("style",l)}}catch{}const i=t.querySelectorAll?t.querySelectorAll("style"):[];for(const o of i)try{const s=o.textContent||"";s.includes("blob:")&&(o.textContent=await bxe(s))}catch{}const a=["poster"];for(const o of a){const s=t.querySelectorAll?t.querySelectorAll(`[${o}^='blob:']`):[];for(const l of s)try{const c=l.getAttribute(o);jL(c)&&l.setAttribute(o,await MC(c))}catch{}}}async function ien(t,e={}){const n=Array.from(t.querySelectorAll("img")),r=async i=>{if(!i.getAttribute("src")){const u=i.currentSrc||i.src||"";u&&i.setAttribute("src",u)}i.removeAttribute("srcset"),i.removeAttribute("sizes");const a=i.src||"";if(!a)return;const o=await Fm(a,{as:"dataURL",useProxy:e.useProxy});if(o.ok&&typeof o.data=="string"&&o.data.startsWith("data:")){i.src=o.data,i.width||(i.width=i.naturalWidth||100),i.height||(i.height=i.naturalHeight||100);return}const{fallbackURL:s}=e||{};if(s)try{const u=parseInt(i.dataset?.snapdomWidth||"",10)||0,f=parseInt(i.dataset?.snapdomHeight||"",10)||0,h=parseInt(i.getAttribute("width")||"",10)||0,d=parseInt(i.getAttribute("height")||"",10)||0,p=parseFloat(i.style?.width||"")||0,g=parseFloat(i.style?.height||"")||0,v=u||p||h||i.width||void 0,y=f||g||d||i.height||void 0,_=typeof s=="function"?await s({width:v,height:y,src:a,element:i}):s;if(_){const E=await Fm(_,{as:"dataURL",useProxy:e.useProxy});i.src=E.data,!i.width&&v&&(i.width=v),!i.height&&y&&(i.height=y),i.width||(i.width=i.naturalWidth||100),i.height||(i.height=i.naturalHeight||100);return}}catch{}const l=i.width||i.naturalWidth||100,c=i.height||i.naturalHeight||100;if(e.placeholders!==!1){const u=document.createElement("div");u.style.cssText=[`width:${l}px`,`height:${c}px`,"background:#ccc","display:inline-block","text-align:center",`line-height:${c}px`,"color:#666","font-size:12px","overflow:hidden"].join(";"),u.textContent="img",i.replaceWith(u)}else{const u=document.createElement("div");u.style.cssText=`display:inline-block;width:${l}px;height:${c}px;visibility:hidden;`,i.replaceWith(u)}};for(let i=0;i<n.length;i+=4){const a=n.slice(i,i+4).map(r);await Promise.allSettled(a)}}async function aen(t,e,n,r={}){const i=[[t,e]],a=["background-image","mask","mask-image","-webkit-mask","-webkit-mask-image","mask-source","mask-box-image-source","mask-border-source","-webkit-mask-box-image-source","border-image","border-image-source"],o=["mask-position","mask-size","mask-repeat","-webkit-mask-position","-webkit-mask-size","-webkit-mask-repeat","mask-origin","mask-clip","-webkit-mask-origin","-webkit-mask-clip","-webkit-mask-position-x","-webkit-mask-position-y"],s=["border-image-slice","border-image-width","border-image-outset","border-image-repeat"];for(;i.length;){const[l,c]=i.shift(),u=n.get(l)||K6e(l);n.has(l)||n.set(l,u);const f=(()=>{const p=u.getPropertyValue("border-image"),g=u.getPropertyValue("border-image-source");return p&&p!=="none"||g&&g!=="none"})();for(const p of a){const g=u.getPropertyValue(p);if(!g||g==="none")continue;const v=Q6e(g),y=await Promise.all(v.map(_=>q6e(_,r)));y.some(_=>_&&_!=="none"&&!/^url\(undefined/.test(_))&&c.style.setProperty(p,y.join(", "))}for(const p of o){const g=u.getPropertyValue(p);!g||g==="initial"||c.style.setProperty(p,g)}if(f)for(const p of s){const g=u.getPropertyValue(p);!g||g==="initial"||c.style.setProperty(p,g)}const h=Array.from(l.children),d=Array.from(c.children);for(let p=0;p<Math.min(h.length,d.length);p++)i.push([h[p],d[p]])}}function oen(t){if(!t)return()=>{};const e=sen(t);if(e<=0)return()=>{};if(!uen(t))return()=>{};const n=getComputedStyle(t),r=Math.round(len(n)*e+cen(n)),i=t.textContent??"",a=i;if(t.scrollHeight<=r+.5)return()=>{};let o=0,s=i.length,l=-1;for(;o<=s;){const c=o+s>>1;t.textContent=i.slice(0,c)+"",t.scrollHeight<=r+.5?(l=c,o=c+1):s=c-1}return t.textContent=(l>=0?i.slice(0,l):"")+"",()=>{t.textContent=a}}function sen(t){const e=getComputedStyle(t);let n=e.getPropertyValue("-webkit-line-clamp")||e.getPropertyValue("line-clamp");n=(n||"").trim();const r=parseInt(n,10);return Number.isFinite(r)&&r>0?r:0}function len(t){const e=(t.lineHeight||"").trim(),n=parseFloat(t.fontSize)||16;return!e||e==="normal"?Math.round(n*1.2):e.endsWith("px")?parseFloat(e):/^\d+(\.\d+)?$/.test(e)?Math.round(parseFloat(e)*n):e.endsWith("%")?Math.round(parseFloat(e)/100*n):Math.round(n*1.2)}function cen(t){return(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0)}function uen(t){return t.childElementCount>0?!1:Array.from(t.childNodes).some(e=>e.nodeType===Node.TEXT_NODE)}function fen(t,e){if(!t||!e||!e.style)return;const n=getComputedStyle(t);try{e.style.boxShadow="none"}catch{}try{e.style.textShadow="none"}catch{}try{e.style.outline="none"}catch{}const i=(n.filter||"").replace(/\bblur\([^()]*\)\s*/gi,"").replace(/\bdrop-shadow\([^()]*\)\s*/gi,"").trim().replace(/\s+/g," ");try{e.style.filter=i.length?i:"none"}catch{}}async function a5e(t,e){if(!t)throw new Error("Element cannot be null or undefined");IQt(e.cache);const n=e.fast,r=!!e.straighten,i=!!e.noShadows;let a,o,s,l="",c="",u,f,h=null;const d=oen(t);try{({clone:a,classCSS:o,styleCache:s}=await QJt(t,e)),r&&a&&(h=hen(t,a)),i&&a&&fen(t,a)}finally{d()}await new Promise(y=>{GT(async()=>{await ien(a,e),y()},{fast:n})}),await new Promise(y=>{GT(async()=>{await aen(t,a,s,e),y()},{fast:n})}),e.embedFonts&&await new Promise(y=>{GT(async()=>{const _=BJt(t),E=FJt(t);if(YE()){const x=new Set(Array.from(_).map(T=>String(T).split("__")[0]).filter(Boolean));await UJt(x,1)}l=await DJt({required:_,usedCodepoints:E,exclude:e.excludeFonts,useProxy:e.useProxy}),y()},{fast:n})});const p=VQt(a).sort(),g=p.join(",");Or.baseStyle.has(g)?c=Or.baseStyle.get(g):await new Promise(y=>{GT(()=>{c=YQt(p),Or.baseStyle.set(g,c),y()},{fast:n})}),await new Promise(y=>{GT(()=>{const _=getComputedStyle(t);function E(st){const Ft=`${st.filter||""} ${st.webkitFilter||""}`.trim();if(!Ft||Ft==="none")return{bleed:{top:0,right:0,bottom:0,left:0},has:!1};const An=Ft.match(/drop-shadow\((?:[^()]|\([^()]*\))*\)/gi)||[];let wn=0,$n=0,Vr=0,Tr=0,Rr=!1;for(const ei of An){Rr=!0;const va=ei.match(/-?\d+(?:\.\d+)?px/gi)?.map(Nr=>parseFloat(Nr))||[],[pi=0,qo=0,ft=0]=va,nn=Math.abs(pi)+ft,Yn=Math.abs(qo)+ft;$n=Math.max($n,nn+Math.max(pi,0)),Tr=Math.max(Tr,nn+Math.max(-pi,0)),Vr=Math.max(Vr,Yn+Math.max(qo,0)),wn=Math.max(wn,Yn+Math.max(-qo,0))}return{bleed:{top:Math.ceil(wn),right:Math.ceil($n),bottom:Math.ceil(Vr),left:Math.ceil(Tr)},has:Rr}}const x=t.getBoundingClientRect(),T=Math.max(1,Math.ceil(t.offsetWidth||parseFloat(_.width)||x.width||1)),S=Math.max(1,Math.ceil(t.offsetHeight||parseFloat(_.height)||x.height||1)),w=(st,Ft=NaN)=>{const An=typeof st=="string"?parseFloat(st):st;return Number.isFinite(An)?An:Ft},C=w(e.width),D=w(e.height);let L=T,B=S;const I=Number.isFinite(C),U=Number.isFinite(D),$=S>0?T/S:1;I&&U?(L=Math.max(1,Math.ceil(C)),B=Math.max(1,Math.ceil(D))):I?(L=Math.max(1,Math.ceil(C)),B=Math.max(1,Math.ceil(L/($||1)))):U?(B=Math.max(1,Math.ceil(D)),L=Math.max(1,Math.ceil(B*($||1)))):(L=T,B=S);let X=0,N=0,M=T,k=S;if(r&&h&&Number.isFinite(h.a)){const st={a:h.a,b:h.b||0,c:h.c||0,d:h.d||1,e:0,f:0},Ft=Exe(T,S,st,0,0);X=Ft.minX,N=Ft.minY,M=Ft.maxX,k=Ft.maxY}else if(!r&&ven(t)){const Ft=_.transform&&_.transform!=="none"?_.transform:"",An=men(t),wn=Een({baseTransform:Ft,rotate:An.rotate||"0deg",scale:An.scale,translate:An.translate}),{ox:$n,oy:Vr}=_en(_,T,S),Tr=wn.is2D?wn:new DOMMatrix(wn.toString()),Rr=Exe(T,S,Tr,$n,Vr);X=Rr.minX,N=Rr.minY,M=Rr.maxX,k=Rr.maxY}const z=den(_),j=pen(_),V=gen(_),Q=E(_),ee=i?{top:0,right:0,bottom:0,left:0}:{top:z.top+j.top+V.top+Q.bleed.top,right:z.right+j.right+V.right+Q.bleed.right,bottom:z.bottom+j.bottom+V.bottom+Q.bleed.bottom,left:z.left+j.left+V.left+Q.bleed.left};X-=ee.left,N-=ee.top,M+=ee.right,k+=ee.bottom;const re=Math.max(1,Math.ceil(M-X)),ne=Math.max(1,Math.ceil(k-N)),le=Math.max(1,Math.round(re*(I||U?L/T:1))),ue=Math.max(1,Math.round(ne*(U||I?B/S:1))),ve="http://www.w3.org/2000/svg",Xe=(YE()?1:0)+(r?1:0),Le=document.createElementNS(ve,"foreignObject"),Lt=Math.floor(X),xt=Math.floor(N);Le.setAttribute("x",String(-(Lt-Xe))),Le.setAttribute("y",String(-(xt-Xe))),Le.setAttribute("width",String(Math.ceil(T+Xe*2))),Le.setAttribute("height",String(Math.ceil(S+Xe*2))),Le.style.overflow="visible";const dt=document.createElement("style");dt.textContent=c+l+"svg{overflow:visible;} foreignObject{overflow:visible;}"+o,Le.appendChild(dt);const Bt=document.createElement("div");Bt.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),Bt.style.width=`${T}px`,Bt.style.height=`${S}px`,Bt.style.overflow="visible",a.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),Bt.appendChild(a),Le.appendChild(Bt);const zt=new XMLSerializer().serializeToString(Le),rn=re+Xe*2,Wn=ne+Xe*2,Sn=I||U;e.meta={w0:T,h0:S,vbW:rn,vbH:Wn,targetW:L,targetH:B};const In=YE()&&Sn?rn:le+Xe*2,de=YE()&&Sn?Wn:ue+Xe*2;f=`<svg xmlns="${ve}" width="${In}" height="${de}" viewBox="0 0 ${rn} ${Wn}">`+zt+"</svg>",u=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(f)}`,y()},{fast:n})});const v=document.getElementById("snapdom-sandbox");return v&&v.style.position==="absolute"&&v.remove(),u}function hen(t,e){if(!t||!e||!e.style)return null;const n=getComputedStyle(t);try{e.style.transformOrigin="0 0"}catch{}try{"translate"in e.style&&(e.style.translate="none"),"rotate"in e.style&&(e.style.rotate="none")}catch{}const r=n.transform||"none";if(r==="none")try{const a=o5e(t);if(a.a===1&&a.b===0&&a.c===0&&a.d===1)return e.style.transform="none",{a:1,b:0,c:0,d:1}}catch{}const i=r.match(/^matrix\(\s*([^)]+)\)$/i);if(i){const a=i[1].split(",").map(o=>parseFloat(o.trim()));if(a.length===6&&a.every(Number.isFinite)){const[o,s,l,c]=a,u=Math.sqrt(o*o+s*s)||0;let f=0,h=0,d=0,p=0,g=0,v=0;u>0&&(f=o/u,h=s/u,d=f*l+h*c,p=l-f*d,g=c-h*d,v=Math.sqrt(p*p+g*g)||0,v>0?d=d/v:d=0);const y=u,_=0,E=d*v,x=v;try{e.style.transform=`matrix(${y}, ${_}, ${E}, ${x}, 0, 0)`}catch{}return{a:y,b:_,c:E,d:x}}}try{const a=String(r).trim();return e.style.transform=a+" translate(0px, 0px) rotate(0deg)",null}catch{return null}}function den(t){const e=t.boxShadow||"";if(!e||e==="none")return{top:0,right:0,bottom:0,left:0};const n=e.split(/\),(?=(?:[^()]*\([^()]*\))*[^()]*$)/).map(s=>s.trim());let r=0,i=0,a=0,o=0;for(const s of n){const l=s.match(/-?\d+(\.\d+)?px/g)?.map(g=>parseFloat(g))||[];if(l.length<2)continue;const[c,u,f=0,h=0]=l,d=Math.abs(c)+f+h,p=Math.abs(u)+f+h;i=Math.max(i,d+Math.max(c,0)),o=Math.max(o,d+Math.max(-c,0)),a=Math.max(a,p+Math.max(u,0)),r=Math.max(r,p+Math.max(-u,0))}return{top:Math.ceil(r),right:Math.ceil(i),bottom:Math.ceil(a),left:Math.ceil(o)}}function pen(t){const e=(t.filter||"").match(/blur\(\s*([0-9.]+)px\s*\)/),n=e?Math.ceil(parseFloat(e[1])||0):0;return{top:n,right:n,bottom:n,left:n}}function gen(t){if((t.outlineStyle||"none")==="none")return{top:0,right:0,bottom:0,left:0};const e=Math.ceil(parseFloat(t.outlineWidth||"0")||0);return{top:e,right:e,bottom:e,left:e}}function Exe(t,e,n,r,i){const a=n.a,o=n.b,s=n.c,l=n.d,c=n.e||0,u=n.f||0;function f(y,_){let E=y-r,x=_-i,T=a*E+s*x,S=o*E+l*x;return T+=r+c,S+=i+u,[T,S]}const h=[f(0,0),f(t,0),f(0,e),f(t,e)];let d=1/0,p=1/0,g=-1/0,v=-1/0;for(const[y,_]of h)y<d&&(d=y),_<p&&(p=_),y>g&&(g=y),_>v&&(v=_);return{minX:d,minY:p,maxX:g,maxY:v,width:g-d,height:v-p}}function ven(t){return yen(t)}function o5e(t){const e=getComputedStyle(t).transform;if(!e||e==="none")return new DOMMatrix;try{return new DOMMatrix(e)}catch{return new WebKitCSSMatrix(e)}}function men(t){const e={rotate:"0deg",scale:null,translate:null},n=typeof t.computedStyleMap=="function"?t.computedStyleMap():null;if(n){const i=l=>{try{return typeof n.has=="function"&&!n.has(l)||typeof n.get!="function"?null:n.get(l)}catch{return null}},a=i("rotate");if(a)if(a.angle){const l=a.angle;e.rotate=l.unit==="rad"?l.value*180/Math.PI+"deg":l.value+l.unit}else a.unit?e.rotate=a.unit==="rad"?a.value*180/Math.PI+"deg":a.value+a.unit:e.rotate=String(a);else{const l=getComputedStyle(t);e.rotate=l.rotate&&l.rotate!=="none"?l.rotate:"0deg"}const o=i("scale");if(o){const l="x"in o&&o.x?.value!=null?o.x.value:Array.isArray(o)?o[0]?.value:Number(o)||1,c="y"in o&&o.y?.value!=null?o.y.value:Array.isArray(o)?o[1]?.value:l;e.scale=`${l} ${c}`}else{const l=getComputedStyle(t);e.scale=l.scale&&l.scale!=="none"?l.scale:null}const s=i("translate");if(s){const l="x"in s&&"value"in s.x?s.x.value:Array.isArray(s)?s[0]?.value:0,c="y"in s&&"value"in s.y?s.y.value:Array.isArray(s)?s[1]?.value:0,u="x"in s&&s.x?.unit?s.x.unit:"px",f="y"in s&&s.y?.unit?s.y.unit:"px";e.translate=`${l}${u} ${c}${f}`}else{const l=getComputedStyle(t);e.translate=l.translate&&l.translate!=="none"?l.translate:null}return e}const r=getComputedStyle(t);return e.rotate=r.rotate&&r.rotate!=="none"?r.rotate:"0deg",e.scale=r.scale&&r.scale!=="none"?r.scale:null,e.translate=r.translate&&r.translate!=="none"?r.translate:null,e}function yen(t){const e=getComputedStyle(t),n=e.transform||"none";if(n!=="none"&&!/^matrix\(\s*1\s*,\s*0\s*,\s*0\s*,\s*1\s*,\s*0\s*,\s*0\s*\)$/i.test(n))return!0;const i=e.rotate&&e.rotate!=="none"&&e.rotate!=="0deg",a=e.scale&&e.scale!=="none"&&e.scale!=="1",o=e.translate&&e.translate!=="none"&&e.translate!=="0px 0px";return!!(i||a||o)}function _en(t,e,n){const r=(t.transformOrigin||"0 0").trim().split(/\s+/),[i,a]=[r[0]||"0",r[1]||"0"],o=(s,l)=>{const c=s.toLowerCase();return c==="left"||c==="top"?0:c==="center"?l/2:c==="right"||c==="bottom"?l:c.endsWith("px")?parseFloat(c)||0:c.endsWith("%")?(parseFloat(c)||0)*l/100:/^-?\d+(\.\d+)?$/.test(c)&&parseFloat(c)||0};return{ox:o(i,e),oy:o(a,n)}}var _V=null;function ben(){if(_V)return _V;const t=document.createElement("div");return t.id="snapdom-measure-slot",t.setAttribute("aria-hidden","true"),Object.assign(t.style,{position:"absolute",left:"-99999px",top:"0px",width:"0px",height:"0px",overflow:"hidden",opacity:"0",pointerEvents:"none",contain:"size layout style"}),document.documentElement.appendChild(t),_V=t,t}function Een(t){const e=ben(),n=document.createElement("div");n.style.transformOrigin="0 0",t.baseTransform&&(n.style.transform=t.baseTransform),t.rotate&&(n.style.rotate=t.rotate),t.scale&&(n.style.scale=t.scale),t.translate&&(n.style.translate=t.translate),e.appendChild(n);const r=o5e(n);return e.removeChild(n),r}function xen(t){if(typeof t=="string"){const e=t.toLowerCase().trim();if(e==="disabled"||e==="full"||e==="auto"||e==="soft")return e}return"soft"}function Sen(t={}){const e=t.format??"png",n=xen(t.cache);return{debug:t.debug??!1,fast:t.fast??!0,scale:t.scale??1,exclude:t.exclude??[],excludeMode:t.excludeMode??"hide",filter:t.filter??null,filterMode:t.filterMode??"hide",placeholders:t.placeholders!==!1,embedFonts:t.embedFonts??!1,iconFonts:Array.isArray(t.iconFonts)?t.iconFonts:t.iconFonts?[t.iconFonts]:[],localFonts:Array.isArray(t.localFonts)?t.localFonts:[],excludeFonts:t.excludeFonts??void 0,fallbackURL:t.fallbackURL??void 0,cache:n,useProxy:typeof t.useProxy=="string"?t.useProxy:"",width:t.width??null,height:t.height??null,format:e,type:t.type??"svg",quality:t.quality??.92,dpr:t.dpr??(window.devicePixelRatio||1),backgroundColor:t.backgroundColor??(["jpg","jpeg","webp"].includes(e)?"#ffffff":null),filename:t.filename??"snapDOM",straighten:t.straighten??!1,noShadows:t.noShadows??!1}}function Ten(t){return typeof t=="string"&&/^data:image\/svg\+xml/i.test(t)}function Aen(t){const e=t.indexOf(",");return e>=0?decodeURIComponent(t.slice(e+1)):""}function wen(t){return`data:image/svg+xml;charset=utf-8,${encodeURIComponent(t)}`}function Oen(t){let e=[],n="",r=0;for(let i=0;i<t.length;i++){const a=t[i];a==="("&&r++,a===")"&&(r=Math.max(0,r-1)),a===";"&&r===0?(e.push(n),n=""):n+=a}return n.trim()&&e.push(n),e.map(i=>i.trim()).filter(Boolean)}function Cen(t){const e=[];let n="",r=0;for(let a=0;a<t.length;a++){const o=t[a];o==="("&&r++,o===")"&&(r=Math.max(0,r-1)),o===","&&r===0?(e.push(n.trim()),n=""):n+=o}n.trim()&&e.push(n.trim());const i=[];for(const a of e){if(/\binset\b/i.test(a))continue;const o=a.match(/-?\d+(?:\.\d+)?px/gi)||[],[s="0px",l="0px",c="0px"]=o;let u=a.replace(/-?\d+(?:\.\d+)?px/gi,"").replace(/\binset\b/ig,"").trim().replace(/\s{2,}/g," ");const f=!!u&&u!==",";i.push(`drop-shadow(${s} ${l} ${c}${f?` ${u}`:""})`)}return i.join(" ")}function s5e(t){const e=Oen(t);let n=null,r=null,i=null;const a=[];for(const s of e){const l=s.indexOf(":");if(l<0)continue;const c=s.slice(0,l).trim().toLowerCase(),u=s.slice(l+1).trim();c==="box-shadow"?i=u:c==="filter"?n=u:c==="-webkit-filter"?r=u:a.push([c,u])}if(i){const s=Cen(i);s&&(n=n?`${n} ${s}`:s,r=r?`${r} ${s}`:s)}const o=[...a];return n&&o.push(["filter",n]),r&&o.push(["-webkit-filter",r]),o.map(([s,l])=>`${s}:${l}`).join(";")}function Ren(t){return t.replace(/([^{}]+)\{([^}]*)\}/g,(e,n,r)=>`${n}{${s5e(r)}}`)}function Men(t){return t=t.replace(/<style[^>]*>([\s\S]*?)<\/style>/gi,(e,n)=>e.replace(n,Ren(n))),t=t.replace(/style=(['"])([\s\S]*?)\1/gi,(e,n,r)=>`style=${n}${s5e(r)}${n}`),t}function Pen(t){if(!YE()||!Ten(t))return t;try{const e=Aen(t),n=Men(e);return wen(n)}catch{return t}}async function F5(t,e){let{width:n,height:r,scale:i=1,dpr:a=1,meta:o={}}=e;t=Pen(t);const s=new Image;s.loading="eager",s.decoding="sync",s.crossOrigin="anonymous",s.src=t,await s.decode();const l=s.naturalWidth,c=s.naturalHeight,u=Number.isFinite(o.w0)?o.w0:l,f=Number.isFinite(o.h0)?o.h0:c;let h,d;const p=Number.isFinite(n),g=Number.isFinite(r);if(p&&g)h=Math.max(1,n),d=Math.max(1,r);else if(p){const _=n/Math.max(1,u);h=n,d=Math.round(f*_)}else if(g){const _=r/Math.max(1,f);d=r,h=Math.round(u*_)}else h=l,d=c;h=Math.round(h*i),d=Math.round(d*i);const v=document.createElement("canvas");v.width=Math.ceil(h*a),v.height=Math.ceil(d*a),v.style.width=`${h}px`,v.style.height=`${d}px`;const y=v.getContext("2d");return a!==1&&y.scale(a,a),y.drawImage(s,0,0,h,d),v}async function l5e(t,e){const n=await F5(t,e),r=e.backgroundColor?dre(n,e.backgroundColor):n,i=new Image;return i.src=r.toDataURL(`image/${e.format}`,e.quality),await i.decode(),i.style.width=`${r.width/e.dpr}px`,i.style.height=`${r.height/e.dpr}px`,i}async function xxe(t,e){const{scale:n=1,width:r,height:i,meta:a={}}=e,o=Number.isFinite(r),s=Number.isFinite(i),l=Number.isFinite(n)&&n!==1||o||s;if(YE()&&l)return await l5e(t,{...e,format:"png",quality:1,meta:a});const c=new Image;if(c.decoding="sync",c.loading="eager",c.src=t,await c.decode(),o&&s)c.style.width=`${r}px`,c.style.height=`${i}px`;else if(o){const u=Number.isFinite(a.w0)?a.w0:c.naturalWidth,f=Number.isFinite(a.h0)?a.h0:c.naturalHeight,h=r/Math.max(1,u);c.style.width=`${r}px`,c.style.height=`${Math.round(f*h)}px`}else if(s){const u=Number.isFinite(a.w0)?a.w0:c.naturalWidth,f=Number.isFinite(a.h0)?a.h0:c.naturalHeight,h=i/Math.max(1,f);c.style.height=`${i}px`,c.style.width=`${Math.round(u*h)}px`}else{const u=Math.round(c.naturalWidth*n),f=Math.round(c.naturalHeight*n);if(c.style.width=`${u}px`,c.style.height=`${f}px`,typeof t=="string"&&t.startsWith("data:image/svg+xml"))try{const d=decodeURIComponent(t.split(",")[1]).replace(/width="[^"]*"/,`width="${u}"`).replace(/height="[^"]*"/,`height="${f}"`);t=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(d)}`,c.src=t}catch{}}return c}async function c5e(t,e){const n=e.type;if(n==="svg"){const a=decodeURIComponent(t.split(",")[1]);return new Blob([a],{type:"image/svg+xml"})}const r=await F5(t,e),i=e.backgroundColor?dre(r,e.backgroundColor):r;return new Promise(a=>i.toBlob(o=>a(o),`image/${n}`,e.quality))}async function Nen(t,e){if(e.dpr=1,e.format==="svg"){const a=await c5e(t,{...e,type:"svg"}),o=URL.createObjectURL(a),s=document.createElement("a");s.href=o,s.download=e.filename,s.click(),URL.revokeObjectURL(o);return}const n=await F5(t,e),r=e.backgroundColor?dre(n,e.backgroundColor):n,i=document.createElement("a");i.href=r.toDataURL(`image/${e.format}`,e.quality),i.download=e.filename,i.click()}var u5e=Symbol("snapdom.internal"),aK=!1;async function gl(t,e){if(!t)throw new Error("Element cannot be null or undefined");const n=Sen(e);if(YE()&&(n.embedFonts===!0||Len(t)))for(let r=0;r<3;r++)try{await Ien(t,e),console.log("Iteracin nmero:",r),aK=!1}catch{}return n.iconFonts&&n.iconFonts.length>0&&xJt(n.iconFonts),n.snap||(n.snap={toPng:(r,i)=>gl.toPng(r,i),toSvg:(r,i)=>gl.toSvg(r,i)}),gl.capture(t,n,u5e)}gl.capture=async(t,e,n)=>{if(n!==u5e)throw new Error("[snapdom.capture] is internal. Use snapdom(...) instead.");const r=await a5e(t,e),i=o=>({...e,...o||{}}),a=o=>s=>{const l=i({...s||{},format:o}),c=o==="jpeg"||o==="jpg",u=l.backgroundColor==null||l.backgroundColor==="transparent";return c&&u&&(l.backgroundColor="#ffffff"),l5e(r,l)};return{url:r,toRaw:()=>r,toImg:o=>xxe(r,i(o)),toSvg:o=>xxe(r,i(o)),toCanvas:o=>F5(r,i(o)),toBlob:o=>c5e(r,i(o)),toPng:a("png"),toJpg:a("jpeg"),toWebp:a("webp"),download:o=>Nen(r,i(o))}};gl.toRaw=(t,e)=>gl(t,e).then(n=>n.toRaw());gl.toImg=(t,e)=>gl(t,e).then(n=>n.toImg());gl.toSvg=(t,e)=>gl(t,e).then(n=>n.toSvg());gl.toCanvas=(t,e)=>gl(t,e).then(n=>n.toCanvas());gl.toBlob=(t,e)=>gl(t,e).then(n=>n.toBlob());gl.toPng=(t,e)=>gl(t,{...e,format:"png"}).then(n=>n.toPng());gl.toJpg=(t,e)=>gl(t,{...e,format:"jpeg"}).then(n=>n.toJpg());gl.toWebp=(t,e)=>gl(t,{...e,format:"webp"}).then(n=>n.toWebp());gl.download=(t,e)=>gl(t,e).then(n=>n.download());async function Ien(t,e){if(aK)return;const n={...e,fast:!0,embedFonts:!0,scale:.2};let r;try{r=await a5e(t,n)}catch{return}await new Promise(i=>{const a=new Image;a.decoding="sync",a.loading="eager",a.style.position="fixed",a.style.left=0,a.style.top=0,a.style.width="10px",a.style.height="10px",a.style.opacity="0.01",a.style.transform="translateZ(10px)",a.style.willChange="transform,opacity;",a.src=r;const o=async()=>{await new Promise(s=>setTimeout(s,100)),a&&a.parentNode&&a.parentNode.removeChild(a),aK=!0,i()};document.body.appendChild(a),o()})}function Len(t){const e=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT);for(;e.nextNode();){const n=e.currentNode,r=getComputedStyle(n),i=r.backgroundImage&&r.backgroundImage!=="none",a=r.maskImage&&r.maskImage!=="none"||r.webkitMaskImage&&r.webkitMaskImage!=="none";if(i||a)return!0}return!1}const ken=jt.createContext(null),bV={didCatch:!1,error:null};class Sxe extends jt.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=bV}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,r,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:a,reason:"imperative-api"}),this.setState(bV)}}componentDidCatch(e,n){var r,i;(r=(i=this.props).onError)===null||r===void 0||r.call(i,e,n)}componentDidUpdate(e,n){const{didCatch:r}=this.state,{resetKeys:i}=this.props;if(r&&n.error!==null&&Den(e.resetKeys,i)){var a,o;(a=(o=this.props).onReset)===null||a===void 0||a.call(o,{next:i,prev:e.resetKeys,reason:"keys"}),this.setState(bV)}}render(){const{children:e,fallbackRender:n,FallbackComponent:r,fallback:i}=this.props,{didCatch:a,error:o}=this.state;let s=e;if(a){const l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")s=n(l);else if(r)s=jt.createElement(r,l);else if(i!==void 0)s=i;else throw o}return jt.createElement(ken.Provider,{value:{didCatch:a,error:o,resetErrorBoundary:this.resetErrorBoundary}},s)}}function Den(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,r)=>!Object.is(n,e[r]))}function Txe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Txe(Object(n),!0).forEach(function(r){Z(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Txe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ben(t){var e=t.length;if(e===0||e===1)return t;if(e===2)return[t[0],t[1],"".concat(t[0],".").concat(t[1]),"".concat(t[1],".").concat(t[0])];if(e===3)return[t[0],t[1],t[2],"".concat(t[0],".").concat(t[1]),"".concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[0]),"".concat(t[1],".").concat(t[2]),"".concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[1],".").concat(t[0])];if(e>=4)return[t[0],t[1],t[2],t[3],"".concat(t[0],".").concat(t[1]),"".concat(t[0],".").concat(t[2]),"".concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[0]),"".concat(t[1],".").concat(t[2]),"".concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[1]),"".concat(t[2],".").concat(t[3]),"".concat(t[3],".").concat(t[0]),"".concat(t[3],".").concat(t[1]),"".concat(t[3],".").concat(t[2]),"".concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[1],".").concat(t[3]),"".concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[2],".").concat(t[3]),"".concat(t[0],".").concat(t[3],".").concat(t[1]),"".concat(t[0],".").concat(t[3],".").concat(t[2]),"".concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[1],".").concat(t[2],".").concat(t[3]),"".concat(t[1],".").concat(t[3],".").concat(t[0]),"".concat(t[1],".").concat(t[3],".").concat(t[2]),"".concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[0],".").concat(t[3]),"".concat(t[2],".").concat(t[1],".").concat(t[0]),"".concat(t[2],".").concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[3],".").concat(t[0]),"".concat(t[2],".").concat(t[3],".").concat(t[1]),"".concat(t[3],".").concat(t[0],".").concat(t[1]),"".concat(t[3],".").concat(t[0],".").concat(t[2]),"".concat(t[3],".").concat(t[1],".").concat(t[0]),"".concat(t[3],".").concat(t[1],".").concat(t[2]),"".concat(t[3],".").concat(t[2],".").concat(t[0]),"".concat(t[3],".").concat(t[2],".").concat(t[1]),"".concat(t[0],".").concat(t[1],".").concat(t[2],".").concat(t[3]),"".concat(t[0],".").concat(t[1],".").concat(t[3],".").concat(t[2]),"".concat(t[0],".").concat(t[2],".").concat(t[1],".").concat(t[3]),"".concat(t[0],".").concat(t[2],".").concat(t[3],".").concat(t[1]),"".concat(t[0],".").concat(t[3],".").concat(t[1],".").concat(t[2]),"".concat(t[0],".").concat(t[3],".").concat(t[2],".").concat(t[1]),"".concat(t[1],".").concat(t[0],".").concat(t[2],".").concat(t[3]),"".concat(t[1],".").concat(t[0],".").concat(t[3],".").concat(t[2]),"".concat(t[1],".").concat(t[2],".").concat(t[0],".").concat(t[3]),"".concat(t[1],".").concat(t[2],".").concat(t[3],".").concat(t[0]),"".concat(t[1],".").concat(t[3],".").concat(t[0],".").concat(t[2]),"".concat(t[1],".").concat(t[3],".").concat(t[2],".").concat(t[0]),"".concat(t[2],".").concat(t[0],".").concat(t[1],".").concat(t[3]),"".concat(t[2],".").concat(t[0],".").concat(t[3],".").concat(t[1]),"".concat(t[2],".").concat(t[1],".").concat(t[0],".").concat(t[3]),"".concat(t[2],".").concat(t[1],".").concat(t[3],".").concat(t[0]),"".concat(t[2],".").concat(t[3],".").concat(t[0],".").concat(t[1]),"".concat(t[2],".").concat(t[3],".").concat(t[1],".").concat(t[0]),"".concat(t[3],".").concat(t[0],".").concat(t[1],".").concat(t[2]),"".concat(t[3],".").concat(t[0],".").concat(t[2],".").concat(t[1]),"".concat(t[3],".").concat(t[1],".").concat(t[0],".").concat(t[2]),"".concat(t[3],".").concat(t[1],".").concat(t[2],".").concat(t[0]),"".concat(t[3],".").concat(t[2],".").concat(t[0],".").concat(t[1]),"".concat(t[3],".").concat(t[2],".").concat(t[1],".").concat(t[0])]}var EV={};function Fen(t){if(t.length===0||t.length===1)return t;var e=t.join(".");return EV[e]||(EV[e]=Ben(t)),EV[e]}function Uen(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.filter(function(a){return a!=="token"}),i=Fen(r);return i.reduce(function(a,o){return oA(oA({},a),n[o])},e)}function Axe(t){return t.join(" ")}function jen(t,e){var n=0;return function(r){return n+=1,r.map(function(i,a){return f5e({node:i,stylesheet:t,useInlineStyles:e,key:"code-segment-".concat(n,"-").concat(a)})})}}function f5e(t){var e=t.node,n=t.stylesheet,r=t.style,i=r===void 0?{}:r,a=t.useInlineStyles,o=t.key,s=e.properties,l=e.type,c=e.tagName,u=e.value;if(l==="text")return u;if(c){var f=jen(n,a),h;if(!a)h=oA(oA({},s),{},{className:Axe(s.className)});else{var d=Object.keys(n).reduce(function(y,_){return _.split(".").forEach(function(E){y.includes(E)||y.push(E)}),y},[]),p=s.className&&s.className.includes("token")?["token"]:[],g=s.className&&p.concat(s.className.filter(function(y){return!d.includes(y)}));h=oA(oA({},s),{},{className:Axe(g)||void 0,style:Uen(s.className,Object.assign({},s.style,i),n)})}var v=f(e.children);return et.createElement(c,wK({key:o},h),v)}}const zen=(function(t,e){var n=t.listLanguages();return n.indexOf(e)!==-1});var $en=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function wxe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function L_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wxe(Object(n),!0).forEach(function(r){Z(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wxe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Hen=/\n/g;function Gen(t){return t.match(Hen)}function Wen(t){var e=t.lines,n=t.startingLineNumber,r=t.style;return e.map(function(i,a){var o=a+n;return et.createElement("span",{key:"line-".concat(a),className:"react-syntax-highlighter-line-number",style:typeof r=="function"?r(o):r},"".concat(o,`
`))})}function Ven(t){var e=t.codeString,n=t.codeStyle,r=t.containerStyle,i=r===void 0?{float:"left",paddingRight:"10px"}:r,a=t.numberStyle,o=a===void 0?{}:a,s=t.startingLineNumber;return et.createElement("code",{style:Object.assign({},n,i)},Wen({lines:e.replace(/\n$/,"").split(`
`),style:o,startingLineNumber:s}))}function Yen(t){return"".concat(t.toString().length,".25em")}function h5e(t,e){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(t),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:e},children:[{type:"text",value:t}]}}function d5e(t,e,n){var r={display:"inline-block",minWidth:Yen(n),paddingRight:"1em",textAlign:"right",userSelect:"none"},i=typeof t=="function"?t(e):t,a=L_(L_({},r),i);return a}function Wk(t){var e=t.children,n=t.lineNumber,r=t.lineNumberStyle,i=t.largestLineNumber,a=t.showInlineLineNumbers,o=t.lineProps,s=o===void 0?{}:o,l=t.className,c=l===void 0?[]:l,u=t.showLineNumbers,f=t.wrapLongLines,h=t.wrapLines,d=h===void 0?!1:h,p=d?L_({},typeof s=="function"?s(n):s):{};if(p.className=p.className?[].concat(Dr(p.className.trim().split(/\s+/)),Dr(c)):c,n&&a){var g=d5e(r,n,i);e.unshift(h5e(n,g))}return f&u&&(p.style=L_({display:"flex"},p.style)),{type:"element",tagName:"span",properties:p,children:e}}function p5e(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=0;r<t.length;r++){var i=t[r];if(i.type==="text")n.push(Wk({children:[i],className:Dr(new Set(e))}));else if(i.children){var a=e.concat(i.properties.className);p5e(i.children,a).forEach(function(o){return n.push(o)})}}return n}function Xen(t,e,n,r,i,a,o,s,l){var c,u=p5e(t.value),f=[],h=-1,d=0;function p(T,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return Wk({children:T,lineNumber:S,lineNumberStyle:s,largestLineNumber:o,showInlineLineNumbers:i,lineProps:n,className:w,showLineNumbers:r,wrapLongLines:l,wrapLines:e})}function g(T,S){if(r&&S&&i){var w=d5e(s,S,o);T.unshift(h5e(S,w))}return T}function v(T,S){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return e||w.length>0?p(T,S,w):g(T,S)}for(var y=function(){var S=u[d],w=S.children[0].value,C=Gen(w);if(C){var D=w.split(`
`);D.forEach(function(L,B){var I=r&&f.length+a,U={type:"text",value:"".concat(L,`
`)};if(B===0){var $=u.slice(h+1,d).concat(Wk({children:[U],className:S.properties.className})),X=v($,I);f.push(X)}else if(B===D.length-1){var N=u[d+1]&&u[d+1].children&&u[d+1].children[0],M={type:"text",value:"".concat(L)};if(N){var k=Wk({children:[M],className:S.properties.className});u.splice(d+1,0,k)}else{var z=[M],j=v(z,I,S.properties.className);f.push(j)}}else{var V=[U],Q=v(V,I,S.properties.className);f.push(Q)}}),h=d}d++};d<u.length;)y();if(h!==u.length-1){var _=u.slice(h+1,u.length);if(_&&_.length){var E=r&&f.length+a,x=v(_,E);f.push(x)}}return e?f:(c=[]).concat.apply(c,f)}function qen(t){var e=t.rows,n=t.stylesheet,r=t.useInlineStyles;return e.map(function(i,a){return f5e({node:i,stylesheet:n,useInlineStyles:r,key:"code-segment-".concat(a)})})}function g5e(t){return t&&typeof t.highlightAuto<"u"}function Zen(t){var e=t.astGenerator,n=t.language,r=t.code,i=t.defaultCodeValue;if(g5e(e)){var a=zen(e,n);return n==="text"?{value:i,language:"text"}:a?e.highlight(n,r):e.highlightAuto(r)}try{return n&&n!=="text"?{value:e.highlight(r,n)}:{value:i}}catch{return{value:i}}}function Ken(t,e){return function(r){var i,a,o=r.language,s=r.children,l=r.style,c=l===void 0?e:l,u=r.customStyle,f=u===void 0?{}:u,h=r.codeTagProps,d=h===void 0?{className:o?"language-".concat(o):void 0,style:L_(L_({},c['code[class*="language-"]']),c['code[class*="language-'.concat(o,'"]')])}:h,p=r.useInlineStyles,g=p===void 0?!0:p,v=r.showLineNumbers,y=v===void 0?!1:v,_=r.showInlineLineNumbers,E=_===void 0?!0:_,x=r.startingLineNumber,T=x===void 0?1:x,S=r.lineNumberContainerStyle,w=r.lineNumberStyle,C=w===void 0?{}:w,D=r.wrapLines,L=r.wrapLongLines,B=L===void 0?!1:L,I=r.lineProps,U=I===void 0?{}:I,$=r.renderer,X=r.PreTag,N=X===void 0?"pre":X,M=r.CodeTag,k=M===void 0?"code":M,z=r.code,j=z===void 0?(Array.isArray(s)?s[0]:s)||"":z,V=r.astGenerator,Q=Ro(r,$en);V=V||t;var ee=y?et.createElement(Ven,{containerStyle:S,codeStyle:d.style||{},numberStyle:C,startingLineNumber:T,codeString:j}):null,re=c.hljs||c['pre[class*="language-"]']||{backgroundColor:"#fff"},ne=g5e(V)?"hljs":"prismjs",le=g?Object.assign({},Q,{style:Object.assign({},re,f)}):Object.assign({},Q,{className:Q.className?"".concat(ne," ").concat(Q.className):ne,style:Object.assign({},f)});if(B?d.style=L_({whiteSpace:"pre-wrap"},d.style):d.style=L_({whiteSpace:"pre"},d.style),!V)return et.createElement(N,le,ee,et.createElement(k,d,j));(D===void 0&&$||B)&&(D=!0),$=$||qen;var ue=[{type:"text",value:j}],ve=Zen({astGenerator:V,language:o,code:j,defaultCodeValue:ue});ve.language===null&&(ve.value=ue);var Se=(i=(a=j.match(/\n/g))===null||a===void 0?void 0:a.length)!==null&&i!==void 0?i:0,Re=T+Se,Xe=Xen(ve,D,U,y,E,T,Re,C,B);return et.createElement(N,le,et.createElement(k,d,!E&&ee,$({rows:Xe,stylesheet:c,useInlineStyles:g})))}}var ME={},xV,Oxe;function Qen(){if(Oxe)return xV;Oxe=1;function t(ft){return ft instanceof Map?ft.clear=ft.delete=ft.set=function(){throw new Error("map is read-only")}:ft instanceof Set&&(ft.add=ft.clear=ft.delete=function(){throw new Error("set is read-only")}),Object.freeze(ft),Object.getOwnPropertyNames(ft).forEach(function(nn){var Yn=ft[nn];typeof Yn=="object"&&!Object.isFrozen(Yn)&&t(Yn)}),ft}var e=t,n=t;e.default=n;class r{constructor(nn){nn.data===void 0&&(nn.data={}),this.data=nn.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function i(ft){return ft.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function a(ft,...nn){const Yn=Object.create(null);for(const Nr in ft)Yn[Nr]=ft[Nr];return nn.forEach(function(Nr){for(const ce in Nr)Yn[ce]=Nr[ce]}),Yn}const o="</span>",s=ft=>!!ft.kind;class l{constructor(nn,Yn){this.buffer="",this.classPrefix=Yn.classPrefix,nn.walk(this)}addText(nn){this.buffer+=i(nn)}openNode(nn){if(!s(nn))return;let Yn=nn.kind;nn.sublanguage||(Yn=`${this.classPrefix}${Yn}`),this.span(Yn)}closeNode(nn){s(nn)&&(this.buffer+=o)}value(){return this.buffer}span(nn){this.buffer+=`<span class="${nn}">`}}class c{constructor(){this.rootNode={children:[]},this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(nn){this.top.children.push(nn)}openNode(nn){const Yn={kind:nn,children:[]};this.add(Yn),this.stack.push(Yn)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(nn){return this.constructor._walk(nn,this.rootNode)}static _walk(nn,Yn){return typeof Yn=="string"?nn.addText(Yn):Yn.children&&(nn.openNode(Yn),Yn.children.forEach(Nr=>this._walk(nn,Nr)),nn.closeNode(Yn)),nn}static _collapse(nn){typeof nn!="string"&&nn.children&&(nn.children.every(Yn=>typeof Yn=="string")?nn.children=[nn.children.join("")]:nn.children.forEach(Yn=>{c._collapse(Yn)}))}}class u extends c{constructor(nn){super(),this.options=nn}addKeyword(nn,Yn){nn!==""&&(this.openNode(Yn),this.addText(nn),this.closeNode())}addText(nn){nn!==""&&this.add(nn)}addSublanguage(nn,Yn){const Nr=nn.root;Nr.kind=Yn,Nr.sublanguage=!0,this.add(Nr)}toHTML(){return new l(this,this.options).value()}finalize(){return!0}}function f(ft){return new RegExp(ft.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function h(ft){return ft?typeof ft=="string"?ft:ft.source:null}function d(...ft){return ft.map(Yn=>h(Yn)).join("")}function p(...ft){return"("+ft.map(Yn=>h(Yn)).join("|")+")"}function g(ft){return new RegExp(ft.toString()+"|").exec("").length-1}function v(ft,nn){const Yn=ft&&ft.exec(nn);return Yn&&Yn.index===0}const y=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function _(ft,nn="|"){let Yn=0;return ft.map(Nr=>{Yn+=1;const ce=Yn;let H=h(Nr),W="";for(;H.length>0;){const F=y.exec(H);if(!F){W+=H;break}W+=H.substring(0,F.index),H=H.substring(F.index+F[0].length),F[0][0]==="\\"&&F[1]?W+="\\"+String(Number(F[1])+ce):(W+=F[0],F[0]==="("&&Yn++)}return W}).map(Nr=>`(${Nr})`).join(nn)}const E=/\b\B/,x="[a-zA-Z]\\w*",T="[a-zA-Z_]\\w*",S="\\b\\d+(\\.\\d+)?",w="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",C="\\b(0b[01]+)",D="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",L=(ft={})=>{const nn=/^#![ ]*\//;return ft.binary&&(ft.begin=d(nn,/.*\b/,ft.binary,/\b.*/)),a({className:"meta",begin:nn,end:/$/,relevance:0,"on:begin":(Yn,Nr)=>{Yn.index!==0&&Nr.ignoreMatch()}},ft)},B={begin:"\\\\[\\s\\S]",relevance:0},I={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[B]},U={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[B]},$={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},X=function(ft,nn,Yn={}){const Nr=a({className:"comment",begin:ft,end:nn,contains:[]},Yn);return Nr.contains.push($),Nr.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),Nr},N=X("//","$"),M=X("/\\*","\\*/"),k=X("#","$"),z={className:"number",begin:S,relevance:0},j={className:"number",begin:w,relevance:0},V={className:"number",begin:C,relevance:0},Q={className:"number",begin:S+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},ee={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[B,{begin:/\[/,end:/\]/,relevance:0,contains:[B]}]}]},re={className:"title",begin:x,relevance:0},ne={className:"title",begin:T,relevance:0},le={begin:"\\.\\s*"+T,relevance:0};var ve=Object.freeze({__proto__:null,MATCH_NOTHING_RE:E,IDENT_RE:x,UNDERSCORE_IDENT_RE:T,NUMBER_RE:S,C_NUMBER_RE:w,BINARY_NUMBER_RE:C,RE_STARTERS_RE:D,SHEBANG:L,BACKSLASH_ESCAPE:B,APOS_STRING_MODE:I,QUOTE_STRING_MODE:U,PHRASAL_WORDS_MODE:$,COMMENT:X,C_LINE_COMMENT_MODE:N,C_BLOCK_COMMENT_MODE:M,HASH_COMMENT_MODE:k,NUMBER_MODE:z,C_NUMBER_MODE:j,BINARY_NUMBER_MODE:V,CSS_NUMBER_MODE:Q,REGEXP_MODE:ee,TITLE_MODE:re,UNDERSCORE_TITLE_MODE:ne,METHOD_GUARD:le,END_SAME_AS_BEGIN:function(ft){return Object.assign(ft,{"on:begin":(nn,Yn)=>{Yn.data._beginMatch=nn[1]},"on:end":(nn,Yn)=>{Yn.data._beginMatch!==nn[1]&&Yn.ignoreMatch()}})}});function Se(ft,nn){ft.input[ft.index-1]==="."&&nn.ignoreMatch()}function Re(ft,nn){nn&&ft.beginKeywords&&(ft.begin="\\b("+ft.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",ft.__beforeBegin=Se,ft.keywords=ft.keywords||ft.beginKeywords,delete ft.beginKeywords,ft.relevance===void 0&&(ft.relevance=0))}function Xe(ft,nn){Array.isArray(ft.illegal)&&(ft.illegal=p(...ft.illegal))}function Le(ft,nn){if(ft.match){if(ft.begin||ft.end)throw new Error("begin & end are not supported with match");ft.begin=ft.match,delete ft.match}}function Lt(ft,nn){ft.relevance===void 0&&(ft.relevance=1)}const xt=["of","and","for","in","not","or","if","then","parent","list","value"],dt="keyword";function Bt(ft,nn,Yn=dt){const Nr={};return typeof ft=="string"?ce(Yn,ft.split(" ")):Array.isArray(ft)?ce(Yn,ft):Object.keys(ft).forEach(function(H){Object.assign(Nr,Bt(ft[H],nn,H))}),Nr;function ce(H,W){nn&&(W=W.map(F=>F.toLowerCase())),W.forEach(function(F){const Y=F.split("|");Nr[Y[0]]=[H,At(Y[0],Y[1])]})}}function At(ft,nn){return nn?Number(nn):zt(ft)?0:1}function zt(ft){return xt.includes(ft.toLowerCase())}function rn(ft,{plugins:nn}){function Yn(F,Y){return new RegExp(h(F),"m"+(ft.case_insensitive?"i":"")+(Y?"g":""))}class Nr{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(Y,te){te.position=this.position++,this.matchIndexes[this.matchAt]=te,this.regexes.push([te,Y]),this.matchAt+=g(Y)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const Y=this.regexes.map(te=>te[1]);this.matcherRe=Yn(_(Y),!0),this.lastIndex=0}exec(Y){this.matcherRe.lastIndex=this.lastIndex;const te=this.matcherRe.exec(Y);if(!te)return null;const pe=te.findIndex((Ce,Oe)=>Oe>0&&Ce!==void 0),me=this.matchIndexes[pe];return te.splice(0,pe),Object.assign(te,me)}}class ce{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(Y){if(this.multiRegexes[Y])return this.multiRegexes[Y];const te=new Nr;return this.rules.slice(Y).forEach(([pe,me])=>te.addRule(pe,me)),te.compile(),this.multiRegexes[Y]=te,te}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(Y,te){this.rules.push([Y,te]),te.type==="begin"&&this.count++}exec(Y){const te=this.getMatcher(this.regexIndex);te.lastIndex=this.lastIndex;let pe=te.exec(Y);if(this.resumingScanAtSamePosition()&&!(pe&&pe.index===this.lastIndex)){const me=this.getMatcher(0);me.lastIndex=this.lastIndex+1,pe=me.exec(Y)}return pe&&(this.regexIndex+=pe.position+1,this.regexIndex===this.count&&this.considerAll()),pe}}function H(F){const Y=new ce;return F.contains.forEach(te=>Y.addRule(te.begin,{rule:te,type:"begin"})),F.terminatorEnd&&Y.addRule(F.terminatorEnd,{type:"end"}),F.illegal&&Y.addRule(F.illegal,{type:"illegal"}),Y}function W(F,Y){const te=F;if(F.isCompiled)return te;[Le].forEach(me=>me(F,Y)),ft.compilerExtensions.forEach(me=>me(F,Y)),F.__beforeBegin=null,[Re,Xe,Lt].forEach(me=>me(F,Y)),F.isCompiled=!0;let pe=null;if(typeof F.keywords=="object"&&(pe=F.keywords.$pattern,delete F.keywords.$pattern),F.keywords&&(F.keywords=Bt(F.keywords,ft.case_insensitive)),F.lexemes&&pe)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return pe=pe||F.lexemes||/\w+/,te.keywordPatternRe=Yn(pe,!0),Y&&(F.begin||(F.begin=/\B|\b/),te.beginRe=Yn(F.begin),F.endSameAsBegin&&(F.end=F.begin),!F.end&&!F.endsWithParent&&(F.end=/\B|\b/),F.end&&(te.endRe=Yn(F.end)),te.terminatorEnd=h(F.end)||"",F.endsWithParent&&Y.terminatorEnd&&(te.terminatorEnd+=(F.end?"|":"")+Y.terminatorEnd)),F.illegal&&(te.illegalRe=Yn(F.illegal)),F.contains||(F.contains=[]),F.contains=[].concat(...F.contains.map(function(me){return Sn(me==="self"?F:me)})),F.contains.forEach(function(me){W(me,te)}),F.starts&&W(F.starts,Y),te.matcher=H(te),te}if(ft.compilerExtensions||(ft.compilerExtensions=[]),ft.contains&&ft.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return ft.classNameAliases=a(ft.classNameAliases||{}),W(ft)}function Wn(ft){return ft?ft.endsWithParent||Wn(ft.starts):!1}function Sn(ft){return ft.variants&&!ft.cachedVariants&&(ft.cachedVariants=ft.variants.map(function(nn){return a(ft,{variants:null},nn)})),ft.cachedVariants?ft.cachedVariants:Wn(ft)?a(ft,{starts:ft.starts?a(ft.starts):null}):Object.isFrozen(ft)?a(ft):ft}var In="10.7.3";function de(ft){return!!(ft||ft==="")}function sr(ft){const nn={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){if(!this.autoDetect&&!ft.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),this.unknownLanguage=!0,i(this.code);let Nr={};return this.autoDetect?(Nr=ft.highlightAuto(this.code),this.detectedLanguage=Nr.language):(Nr=ft.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),Nr.value},autoDetect(){return!this.language||de(this.autodetect)},ignoreIllegals(){return!0}},render(Nr){return Nr("pre",{},[Nr("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:nn,VuePlugin:{install(Nr){Nr.component("highlightjs",nn)}}}}const zr={"after:highlightElement":({el:ft,result:nn,text:Yn})=>{const Nr=Ft(ft);if(!Nr.length)return;const ce=document.createElement("div");ce.innerHTML=nn.value,nn.value=An(Nr,Ft(ce),Yn)}};function st(ft){return ft.nodeName.toLowerCase()}function Ft(ft){const nn=[];return(function Yn(Nr,ce){for(let H=Nr.firstChild;H;H=H.nextSibling)H.nodeType===3?ce+=H.nodeValue.length:H.nodeType===1&&(nn.push({event:"start",offset:ce,node:H}),ce=Yn(H,ce),st(H).match(/br|hr|img|input/)||nn.push({event:"stop",offset:ce,node:H}));return ce})(ft,0),nn}function An(ft,nn,Yn){let Nr=0,ce="";const H=[];function W(){return!ft.length||!nn.length?ft.length?ft:nn:ft[0].offset!==nn[0].offset?ft[0].offset<nn[0].offset?ft:nn:nn[0].event==="start"?ft:nn}function F(pe){function me(Ce){return" "+Ce.nodeName+'="'+i(Ce.value)+'"'}ce+="<"+st(pe)+[].map.call(pe.attributes,me).join("")+">"}function Y(pe){ce+="</"+st(pe)+">"}function te(pe){(pe.event==="start"?F:Y)(pe.node)}for(;ft.length||nn.length;){let pe=W();if(ce+=i(Yn.substring(Nr,pe[0].offset)),Nr=pe[0].offset,pe===ft){H.reverse().forEach(Y);do te(pe.splice(0,1)[0]),pe=W();while(pe===ft&&pe.length&&pe[0].offset===Nr);H.reverse().forEach(F)}else pe[0].event==="start"?H.push(pe[0].node):H.pop(),te(pe.splice(0,1)[0])}return ce+i(Yn.substr(Nr))}const wn={},$n=ft=>{console.error(ft)},Vr=(ft,...nn)=>{console.log(`WARN: ${ft}`,...nn)},Tr=(ft,nn)=>{wn[`${ft}/${nn}`]||(console.log(`Deprecated as of ${ft}. ${nn}`),wn[`${ft}/${nn}`]=!0)},Rr=i,ei=a,va=Symbol("nomatch");var qo=function(ft){const nn=Object.create(null),Yn=Object.create(null),Nr=[];let ce=!0;const H=/(^(<[^>]+>|\t|)+|\n)/gm,W="Could not find the language '{}', did you forget to load/include a language module?",F={disableAutodetect:!0,name:"Plain text",contains:[]};let Y={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:u};function te(ln){return Y.noHighlightRe.test(ln)}function pe(ln){let Hn=ln.className+" ";Hn+=ln.parentNode?ln.parentNode.className:"";const si=Y.languageDetectRe.exec(Hn);if(si){const Wi=tn(si[1]);return Wi||(Vr(W.replace("{}",si[1])),Vr("Falling back to no-highlight mode for this block.",ln)),Wi?si[1]:"no-highlight"}return Hn.split(/\s+/).find(Wi=>te(Wi)||tn(Wi))}function me(ln,Hn,si,Wi){let Lr="",Ii="";typeof Hn=="object"?(Lr=ln,si=Hn.ignoreIllegals,Ii=Hn.language,Wi=void 0):(Tr("10.7.0","highlight(lang, code, ...args) has been deprecated."),Tr("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),Ii=ln,Lr=Hn);const Xi={code:Lr,language:Ii};Fi("before:highlight",Xi);const Ai=Xi.result?Xi.result:Ce(Xi.language,Xi.code,si,Wi);return Ai.code=Xi.code,Fi("after:highlight",Ai),Ai}function Ce(ln,Hn,si,Wi){function Lr(cr,hr){const Xr=Kl.case_insensitive?hr[0].toLowerCase():hr[0];return Object.prototype.hasOwnProperty.call(cr.keywords,Xr)&&cr.keywords[Xr]}function Ii(){if(!he.keywords){Fe.addText(Et);return}let cr=0;he.keywordPatternRe.lastIndex=0;let hr=he.keywordPatternRe.exec(Et),Xr="";for(;hr;){Xr+=Et.substring(cr,hr.index);const Pa=Lr(he,hr);if(Pa){const[_l,Bu]=Pa;if(Fe.addText(Xr),Xr="",On+=Bu,_l.startsWith("_"))Xr+=hr[0];else{const jd=Kl.classNameAliases[_l]||_l;Fe.addKeyword(hr[0],jd)}}else Xr+=hr[0];cr=he.keywordPatternRe.lastIndex,hr=he.keywordPatternRe.exec(Et)}Xr+=Et.substr(cr),Fe.addText(Xr)}function Xi(){if(Et==="")return;let cr=null;if(typeof he.subLanguage=="string"){if(!nn[he.subLanguage]){Fe.addText(Et);return}cr=Ce(he.subLanguage,Et,!0,Te[he.subLanguage]),Te[he.subLanguage]=cr.top}else cr=ct(Et,he.subLanguage.length?he.subLanguage:null);he.relevance>0&&(On+=cr.relevance),Fe.addSublanguage(cr.emitter,cr.language)}function Ai(){he.subLanguage!=null?Xi():Ii(),Et=""}function qi(cr){return cr.className&&Fe.openNode(Kl.classNameAliases[cr.className]||cr.className),he=Object.create(cr,{parent:{value:he}}),he}function Zl(cr,hr,Xr){let Pa=v(cr.endRe,Xr);if(Pa){if(cr["on:end"]){const _l=new r(cr);cr["on:end"](hr,_l),_l.isMatchIgnored&&(Pa=!1)}if(Pa){for(;cr.endsParent&&cr.parent;)cr=cr.parent;return cr}}if(cr.endsWithParent)return Zl(cr.parent,hr,Xr)}function Du(cr){return he.matcher.regexIndex===0?(Et+=cr[0],1):(No=!0,0)}function yl(cr){const hr=cr[0],Xr=cr.rule,Pa=new r(Xr),_l=[Xr.__beforeBegin,Xr["on:begin"]];for(const Bu of _l)if(Bu&&(Bu(cr,Pa),Pa.isMatchIgnored))return Du(hr);return Xr&&Xr.endSameAsBegin&&(Xr.endRe=f(hr)),Xr.skip?Et+=hr:(Xr.excludeBegin&&(Et+=hr),Ai(),!Xr.returnBegin&&!Xr.excludeBegin&&(Et=hr)),qi(Xr),Xr.returnBegin?0:hr.length}function js(cr){const hr=cr[0],Xr=Hn.substr(cr.index),Pa=Zl(he,cr,Xr);if(!Pa)return va;const _l=he;_l.skip?Et+=hr:(_l.returnEnd||_l.excludeEnd||(Et+=hr),Ai(),_l.excludeEnd&&(Et=hr));do he.className&&Fe.closeNode(),!he.skip&&!he.subLanguage&&(On+=he.relevance),he=he.parent;while(he!==Pa.parent);return Pa.starts&&(Pa.endSameAsBegin&&(Pa.starts.endRe=Pa.endRe),qi(Pa.starts)),_l.returnEnd?0:hr.length}function Ud(){const cr=[];for(let hr=he;hr!==Kl;hr=hr.parent)hr.className&&cr.unshift(hr.className);cr.forEach(hr=>Fe.openNode(hr))}let Po={};function ru(cr,hr){const Xr=hr&&hr[0];if(Et+=cr,Xr==null)return Ai(),0;if(Po.type==="begin"&&hr.type==="end"&&Po.index===hr.index&&Xr===""){if(Et+=Hn.slice(hr.index,hr.index+1),!ce){const Pa=new Error("0 width match regex");throw Pa.languageName=ln,Pa.badRule=Po.rule,Pa}return 1}if(Po=hr,hr.type==="begin")return yl(hr);if(hr.type==="illegal"&&!si){const Pa=new Error('Illegal lexeme "'+Xr+'" for mode "'+(he.className||"<unnamed>")+'"');throw Pa.mode=he,Pa}else if(hr.type==="end"){const Pa=js(hr);if(Pa!==va)return Pa}if(hr.type==="illegal"&&Xr==="")return 1;if(gi>1e5&&gi>hr.index*3)throw new Error("potential infinite loop, way more iterations than matches");return Et+=Xr,Xr.length}const Kl=tn(ln);if(!Kl)throw $n(W.replace("{}",ln)),new Error('Unknown language: "'+ln+'"');const Hh=rn(Kl,{plugins:Nr});let iu="",he=Wi||Hh;const Te={},Fe=new Y.__emitter(Y);Ud();let Et="",On=0,lr=0,gi=0,No=!1;try{for(he.matcher.considerAll();;){gi++,No?No=!1:he.matcher.considerAll(),he.matcher.lastIndex=lr;const cr=he.matcher.exec(Hn);if(!cr)break;const hr=Hn.substring(lr,cr.index),Xr=ru(hr,cr);lr=cr.index+Xr}return ru(Hn.substr(lr)),Fe.closeAllNodes(),Fe.finalize(),iu=Fe.toHTML(),{relevance:Math.floor(On),value:iu,language:ln,illegal:!1,emitter:Fe,top:he}}catch(cr){if(cr.message&&cr.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:cr.message,context:Hn.slice(lr-100,lr+100),mode:cr.mode},sofar:iu,relevance:0,value:Rr(Hn),emitter:Fe};if(ce)return{illegal:!1,relevance:0,value:Rr(Hn),emitter:Fe,language:ln,top:he,errorRaised:cr};throw cr}}function Oe(ln){const Hn={relevance:0,emitter:new Y.__emitter(Y),value:Rr(ln),illegal:!1,top:F};return Hn.emitter.addText(ln),Hn}function ct(ln,Hn){Hn=Hn||Y.languages||Object.keys(nn);const si=Oe(ln),Wi=Hn.filter(tn).filter(mn).map(qi=>Ce(qi,ln,!1));Wi.unshift(si);const Lr=Wi.sort((qi,Zl)=>{if(qi.relevance!==Zl.relevance)return Zl.relevance-qi.relevance;if(qi.language&&Zl.language){if(tn(qi.language).supersetOf===Zl.language)return 1;if(tn(Zl.language).supersetOf===qi.language)return-1}return 0}),[Ii,Xi]=Lr,Ai=Ii;return Ai.second_best=Xi,Ai}function Ge(ln){return Y.tabReplace||Y.useBR?ln.replace(H,Hn=>Hn===`
`?Y.useBR?"<br>":Hn:Y.tabReplace?Hn.replace(/\t/g,Y.tabReplace):Hn):ln}function $t(ln,Hn,si){const Wi=Hn?Yn[Hn]:si;ln.classList.add("hljs"),Wi&&ln.classList.add(Wi)}const kn={"before:highlightElement":({el:ln})=>{Y.useBR&&(ln.innerHTML=ln.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,`
`))},"after:highlightElement":({result:ln})=>{Y.useBR&&(ln.value=ln.value.replace(/\n/g,"<br>"))}},_t=/^(<[^>]+>|\t)+/gm,Jt={"after:highlightElement":({result:ln})=>{Y.tabReplace&&(ln.value=ln.value.replace(_t,Hn=>Hn.replace(/\t/g,Y.tabReplace)))}};function Xn(ln){let Hn=null;const si=pe(ln);if(te(si))return;Fi("before:highlightElement",{el:ln,language:si}),Hn=ln;const Wi=Hn.textContent,Lr=si?me(Wi,{language:si,ignoreIllegals:!0}):ct(Wi);Fi("after:highlightElement",{el:ln,result:Lr,text:Wi}),ln.innerHTML=Lr.value,$t(ln,si,Lr.language),ln.result={language:Lr.language,re:Lr.relevance,relavance:Lr.relevance},Lr.second_best&&(ln.second_best={language:Lr.second_best.language,re:Lr.second_best.relevance,relavance:Lr.second_best.relevance})}function $e(ln){ln.useBR&&(Tr("10.3.0","'useBR' will be removed entirely in v11.0"),Tr("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),Y=ei(Y,ln)}const _n=()=>{if(_n.called)return;_n.called=!0,Tr("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),document.querySelectorAll("pre code").forEach(Xn)};function ar(){Tr("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),Hr=!0}let Hr=!1;function ti(){if(document.readyState==="loading"){Hr=!0;return}document.querySelectorAll("pre code").forEach(Xn)}function ua(){Hr&&ti()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",ua,!1);function Mr(ln,Hn){let si=null;try{si=Hn(ft)}catch(Wi){if($n("Language definition for '{}' could not be registered.".replace("{}",ln)),ce)$n(Wi);else throw Wi;si=F}si.name||(si.name=ln),nn[ln]=si,si.rawDefinition=Hn.bind(null,ft),si.aliases&&er(si.aliases,{languageName:ln})}function Ir(ln){delete nn[ln];for(const Hn of Object.keys(Yn))Yn[Hn]===ln&&delete Yn[Hn]}function ia(){return Object.keys(nn)}function nt(ln){Tr("10.4.0","requireLanguage will be removed entirely in v11."),Tr("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");const Hn=tn(ln);if(Hn)return Hn;throw new Error("The '{}' language is required, but not loaded.".replace("{}",ln))}function tn(ln){return ln=(ln||"").toLowerCase(),nn[ln]||nn[Yn[ln]]}function er(ln,{languageName:Hn}){typeof ln=="string"&&(ln=[ln]),ln.forEach(si=>{Yn[si.toLowerCase()]=Hn})}function mn(ln){const Hn=tn(ln);return Hn&&!Hn.disableAutodetect}function Yr(ln){ln["before:highlightBlock"]&&!ln["before:highlightElement"]&&(ln["before:highlightElement"]=Hn=>{ln["before:highlightBlock"](Object.assign({block:Hn.el},Hn))}),ln["after:highlightBlock"]&&!ln["after:highlightElement"]&&(ln["after:highlightElement"]=Hn=>{ln["after:highlightBlock"](Object.assign({block:Hn.el},Hn))})}function Gi(ln){Yr(ln),Nr.push(ln)}function Fi(ln,Hn){const si=ln;Nr.forEach(function(Wi){Wi[si]&&Wi[si](Hn)})}function Ti(ln){return Tr("10.2.0","fixMarkup will be removed entirely in v11.0"),Tr("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),Ge(ln)}function Oa(ln){return Tr("10.7.0","highlightBlock will be removed entirely in v12.0"),Tr("10.7.0","Please use highlightElement now."),Xn(ln)}Object.assign(ft,{highlight:me,highlightAuto:ct,highlightAll:ti,fixMarkup:Ti,highlightElement:Xn,highlightBlock:Oa,configure:$e,initHighlighting:_n,initHighlightingOnLoad:ar,registerLanguage:Mr,unregisterLanguage:Ir,listLanguages:ia,getLanguage:tn,registerAliases:er,requireLanguage:nt,autoDetection:mn,inherit:ei,addPlugin:Gi,vuePlugin:sr(ft).VuePlugin}),ft.debugMode=function(){ce=!1},ft.safeMode=function(){ce=!0},ft.versionString=In;for(const ln in ve)typeof ve[ln]=="object"&&e(ve[ln]);return Object.assign(ft,ve),ft.addPlugin(kn),ft.addPlugin(zr),ft.addPlugin(Jt),ft}({});return xV=qo,xV}var SV={exports:{}},Cxe;function Jen(){return Cxe||(Cxe=1,(function(t){(function(){var e;e=t.exports=i,e.format=i,e.vsprintf=r,typeof console<"u"&&typeof console.log=="function"&&(e.printf=n);function n(){console.log(i.apply(null,arguments))}function r(a,o){return i.apply(null,[a].concat(o))}function i(a){for(var o=1,s=[].slice.call(arguments),l=0,c=a.length,u="",f,h=!1,d,p,g=!1,v,y=function(){return s[o++]},_=function(){for(var E="";/\d/.test(a[l]);)E+=a[l++],f=a[l];return E.length>0?parseInt(E):null};l<c;++l)if(f=a[l],h)switch(h=!1,f=="."?(g=!1,f=a[++l]):f=="0"&&a[l+1]=="."?(g=!0,l+=2,f=a[l]):g=!0,v=_(),f){case"b":u+=parseInt(y(),10).toString(2);break;case"c":d=y(),typeof d=="string"||d instanceof String?u+=d:u+=String.fromCharCode(parseInt(d,10));break;case"d":u+=parseInt(y(),10);break;case"f":p=String(parseFloat(y()).toFixed(v||6)),u+=g?p:p.replace(/^0/,"");break;case"j":u+=JSON.stringify(y());break;case"o":u+="0"+parseInt(y(),10).toString(8);break;case"s":u+=y();break;case"x":u+="0x"+parseInt(y(),10).toString(16);break;case"X":u+="0x"+parseInt(y(),10).toString(16).toUpperCase();break;default:u+=f;break}else f==="%"?h=!0:u+=f;return u}})()})(SV)),SV.exports}var TV,Rxe;function etn(){if(Rxe)return TV;Rxe=1;var t=Jen(),e=n(Error);TV=e,e.eval=n(EvalError),e.range=n(RangeError),e.reference=n(ReferenceError),e.syntax=n(SyntaxError),e.type=n(TypeError),e.uri=n(URIError),e.create=n;function n(r){return i.displayName=r.displayName||r.name,i;function i(a){return a&&(a=t.apply(null,arguments)),new r(a)}}return TV}var Mxe;function ttn(){if(Mxe)return ME;Mxe=1;var t=Qen(),e=etn();ME.highlight=r,ME.highlightAuto=i,ME.registerLanguage=a,ME.listLanguages=o,ME.registerAlias=s,l.prototype.addText=f,l.prototype.addKeyword=c,l.prototype.addSublanguage=u,l.prototype.openNode=h,l.prototype.closeNode=d,l.prototype.closeAllNodes=g,l.prototype.finalize=g,l.prototype.toHTML=p;var n="hljs-";function r(v,y,_){var E=t.configure({}),x=_||{},T=x.prefix,S;if(typeof v!="string")throw e("Expected `string` for name, got `%s`",v);if(!t.getLanguage(v))throw e("Unknown language: `%s` is not registered",v);if(typeof y!="string")throw e("Expected `string` for value, got `%s`",y);if(T==null&&(T=n),t.configure({__emitter:l,classPrefix:T}),S=t.highlight(y,{language:v,ignoreIllegals:!0}),t.configure(E||{}),S.errorRaised)throw S.errorRaised;return{relevance:S.relevance,language:S.language,value:S.emitter.rootNode.children}}function i(v,y){var _=y||{},E=_.subset||t.listLanguages();_.prefix;var x=E.length,T=-1,S,w,C,D;if(typeof v!="string")throw e("Expected `string` for value, got `%s`",v);for(w={relevance:0,language:null,value:[]},S={relevance:0,language:null,value:[]};++T<x;)D=E[T],t.getLanguage(D)&&(C=r(D,v,y),C.language=D,C.relevance>w.relevance&&(w=C),C.relevance>S.relevance&&(w=S,S=C));return w.language&&(S.secondBest=w),S}function a(v,y){t.registerLanguage(v,y)}function o(){return t.listLanguages()}function s(v,y){var _=v,E;y&&(_={},_[v]=y);for(E in _)t.registerAliases(_[E],{languageName:E})}function l(v){this.options=v,this.rootNode={children:[]},this.stack=[this.rootNode]}function c(v,y){this.openNode(y),this.addText(v),this.closeNode()}function u(v,y){var _=this.stack,E=_[_.length-1],x=v.rootNode.children,T=y?{type:"element",tagName:"span",properties:{className:[y]},children:x}:x;E.children=E.children.concat(T)}function f(v){var y=this.stack,_,E;v!==""&&(_=y[y.length-1],E=_.children[_.children.length-1],E&&E.type==="text"?E.value+=v:_.children.push({type:"text",value:v}))}function h(v){var y=this.stack,_=this.options.classPrefix+v,E=y[y.length-1],x={type:"element",tagName:"span",properties:{className:[_]},children:[]};E.children.push(x),y.push(x)}function d(){this.stack.pop()}function p(){return""}function g(){}return ME}var AV,Pxe;function ntn(){if(Pxe)return AV;Pxe=1;function t(e){const n={literal:"true false null"},r=[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],i=[e.QUOTE_STRING_MODE,e.C_NUMBER_MODE],a={end:",",endsWithParent:!0,excludeEnd:!0,contains:i,keywords:n},o={begin:/\{/,end:/\}/,contains:[{className:"attr",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE],illegal:"\\n"},e.inherit(a,{begin:/:/})].concat(r),illegal:"\\S"},s={begin:"\\[",end:"\\]",contains:[e.inherit(a)],illegal:"\\S"};return i.push(o,s),r.forEach(function(l){i.push(l)}),{name:"JSON",contains:i,keywords:n,illegal:"\\S"}}return AV=t,AV}var rtn=ttn();const v5e=Ni(rtn);var vre=Ken(v5e,{});vre.registerLanguage=v5e.registerLanguage;var itn=ntn();const atn=Ni(itn),otn={hljs:{display:"block",overflowX:"auto",padding:"0.5em",backgroundColor:"#f4f4f4",color:"black"},"hljs-subst":{color:"black"},"hljs-string":{color:"#050"},"hljs-title":{color:"navy",fontWeight:"bold"},"hljs-symbol":{color:"#050"},"hljs-bullet":{color:"#050"},"hljs-attribute":{color:"#050"},"hljs-addition":{color:"#050"},"hljs-variable":{color:"#050"},"hljs-template-tag":{color:"#050"},"hljs-template-variable":{color:"#050"},"hljs-comment":{color:"#777"},"hljs-quote":{color:"#777"},"hljs-number":{color:"#800"},"hljs-regexp":{color:"#800"},"hljs-literal":{color:"#800"},"hljs-type":{color:"#800"},"hljs-link":{color:"#800"},"hljs-deletion":{color:"#00e"},"hljs-meta":{color:"#00e"},"hljs-keyword":{fontWeight:"bold",color:"navy"},"hljs-selector-tag":{fontWeight:"bold",color:"navy"},"hljs-doctag":{fontWeight:"bold",color:"navy"},"hljs-section":{fontWeight:"bold",color:"navy"},"hljs-built_in":{fontWeight:"bold",color:"navy"},"hljs-tag":{fontWeight:"bold",color:"navy"},"hljs-name":{fontWeight:"bold",color:"navy"},"hljs-emphasis":{fontStyle:"italic"},"hljs-strong":{fontWeight:"bold"}};var stn=function(e){var n=e.size,r=n===void 0?14:n,i=e.fill,a=i===void 0?"#707070":i;return et.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5503",width:r,height:r,fill:a},et.createElement("path",{d:"M768 682.666667V170.666667a85.333333 85.333333 0 0 0-85.333333-85.333334H170.666667a85.333333 85.333333 0 0 0-85.333334 85.333334v512a85.333333 85.333333 0 0 0 85.333334 85.333333h512a85.333333 85.333333 0 0 0 85.333333-85.333333zM170.666667 170.666667h512v512H170.666667z m682.666666 85.333333v512a85.333333 85.333333 0 0 1-85.333333 85.333333H256a85.333333 85.333333 0 0 0 85.333333 85.333334h426.666667a170.666667 170.666667 0 0 0 170.666667-170.666667V341.333333a85.333333 85.333333 0 0 0-85.333334-85.333333z","p-id":"5504"}))},ltn=function(e){var n=e.size,r=n===void 0?14:n,i=e.fill,a=i===void 0?"#707070":i;return et.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5664",width:r,height:r,fill:a},et.createElement("path",{d:"M889.5 852.7l-220-219.9c45-53.4 72.1-122.3 72.1-197.5 0-169.4-137.8-307.3-307.3-307.3S127.1 265.8 127.1 435.3s137.8 307.3 307.3 307.3c76.1 0 145.7-27.8 199.4-73.8l219.8 219.8c4.9 5 11.4 7.4 17.9 7.4s13-2.5 17.9-7.4c10-9.9 10-26 0.1-35.9zM434.4 691.8c-141.4 0-256.5-115.1-256.5-256.5 0-141.5 115.1-256.5 256.5-256.5s256.5 115.1 256.5 256.5-115.1 256.5-256.5 256.5z",fill:"#231815","p-id":"5665"}),et.createElement("path",{d:"M555 418.3h-99.8v-99.8c0-14-11.4-25.4-25.4-25.4s-25.4 11.4-25.4 25.4v99.8h-99.8c-14 0-25.4 11.4-25.4 25.4s11.4 25.4 25.4 25.4h99.8v99.8c0 14 11.4 25.4 25.4 25.4s25.4-11.4 25.4-25.4v-99.8H555c14 0 25.4-11.4 25.4-25.4S569 418.3 555 418.3z",fill:"#231815","p-id":"5666"}))},ctn=function(e){var n=e.size,r=n===void 0?14:n,i=e.fill,a=i===void 0?"#707070":i;return et.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5826",width:r,height:r,fill:a},et.createElement("path",{d:"M889.5 852.7l-220-219.9c45-53.4 72.1-122.3 72.1-197.5 0-169.4-137.8-307.3-307.3-307.3S127.1 265.8 127.1 435.3s137.8 307.3 307.3 307.3c76.1 0 145.7-27.8 199.4-73.8l219.8 219.8c4.9 5 11.4 7.4 17.9 7.4s13-2.5 17.9-7.4c10-9.9 10-26 0.1-35.9zM434.4 691.8c-141.4 0-256.5-115.1-256.5-256.5 0-141.5 115.1-256.5 256.5-256.5s256.5 115.1 256.5 256.5-115.1 256.5-256.5 256.5z",fill:"#231815","p-id":"5827"}),et.createElement("path",{d:"M555 418.3H304.7c-14 0-25.4 11.4-25.4 25.4s11.4 25.4 25.4 25.4H555c14 0 25.4-11.4 25.4-25.4S569 418.3 555 418.3z",fill:"#231815","p-id":"5828"}))},utn=function(e){var n=e.size,r=n===void 0?14:n,i=e.fill,a=i===void 0?"#707070":i;return et.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5988",width:r,height:r,fill:a},et.createElement("path",{d:"M380.416 822.144c-10.432 0-20.864-3.968-28.8-11.968L75.968 534.592c-15.936-15.936-15.936-41.664 0-57.6 15.872-15.872 41.664-15.872 57.536 0L380.416 723.84l510.08-510.016c15.872-15.936 41.664-15.936 57.536 0 15.936 15.936 15.936 41.664 0 57.6L409.216 810.24c-7.936 7.936-18.368 11.904-28.8 11.904z",fill:"","p-id":"5989"}))},ftn=function(e){var n=e.size,r=n===void 0?14:n,i=e.fill,a=i===void 0?"#707070":i;return et.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5988",width:r,height:r,fill:a},et.createElement("path",{d:"M512 165.93q13.645 0 23.31 9.666t9.665 23.31V580.77L653.37 472.103q9.517-9.517 23.434-9.517 14.164 0 23.558 9.394t9.393 23.557q0 13.917-9.517 23.434L535.434 683.774q-9.517 9.517-23.434 9.517t-23.434-9.517L323.763 518.971q-9.517-10.036-9.517-23.434 0-13.645 9.665-23.31t23.31-9.665q13.917 0 23.434 9.516L479.05 580.744V198.881q0-13.645 9.665-23.31t23.31-9.665z m329.582 461.435q13.645 0 23.31 9.665t9.665 23.31v131.828q0 41.207-28.575 69.782-29.095 29.095-69.536 29.095H248.32q-40.416 0-70.03-28.848-28.847-29.613-28.847-70.03V660.34q0-13.645 9.665-23.31t23.31-9.665 23.31 9.665 9.666 23.31v131.828q0 13.645 9.665 23.31t23.31 9.665h528.127q13.398 0 22.791-9.665t9.393-23.31V660.34q0-13.645 9.666-23.31t23.31-9.665z","p-id":"1178",fill:"#494949"}))},htn=_c.div.withConfig({displayName:"StyledLoading",componentId:"gpt-vis-c7ef__sc-4x7w8p-0"})(["display:flex;align-items:center;justify-content:center;flex-direction:column;height:300px;background-image:linear-gradient(135deg,#e3f3ff 0%,#f1eeff 100%);color:rgba(0,0,0,88%);&-icon{margin-bottom:6px;}"]),dtn=function(){return et.createElement(htn,{className:"gpt-vis-loading"},et.createElement("div",{className:"gpt-vis-loading-icon"},et.createElement(G_t,{style:{fontSize:"24px",color:"rgb(56, 177, 246)"}})),et.createElement("p",null,""))},wV=_c.div.withConfig({displayName:"StyledGPTVis",componentId:"gpt-vis-c7ef__sc-2dc7ka-0"})(["min-width:300px;max-width:100%;height:",";overflow:hidden;position:relative;padding:16px;"],function(t){var e=t.type;return e==="table"?"auto":"300px"}),zL=_c.button.withConfig({displayName:"TextButton",componentId:"gpt-vis-c7ef__sc-2dc7ka-1"})(["border:none;box-shadow:none;background:transparent;color:#494949;height:26px;padding:0 8px;font-size:12px;transition:all 0.2s cubic-bezier(0.645,0.045,0.355,1);transform:scale(1);border-radius:8px;display:inline-flex;align-items:center;justify-content:center;gap:4px;cursor:pointer;outline:none;font-family:inherit;&:hover,&:focus{color:#666;background:#e8e8e8;transform:scale(1.02);}&:active{background:#e8e8e8;transform:scale(0.98);}.anticon{font-size:12px;}&:disabled{cursor:not-allowed;opacity:0.6;&:hover,&:focus,&:active{background:transparent;transform:scale(1);}}"]),Nxe=_c.div.withConfig({displayName:"ChartWrapper",componentId:"gpt-vis-c7ef__sc-2dc7ka-2"})(["width:100%;height:100%;overflow:scroll;scrollbar-width:none;-ms-overflow-style:none;&::-webkit-scrollbar{display:none;}h5{font-size:12px;font-weight:400;color:#666;height:150px;display:flex;align-items:center;justify-content:center;}& > *{max-width:100%;max-height:100%;}"]),ptn=_c.div.withConfig({displayName:"TabContainer",componentId:"gpt-vis-c7ef__sc-2dc7ka-3"})(["border-radius:8px;overflow:hidden;"]),gtn=_c.div.withConfig({displayName:"TabHeader",componentId:"gpt-vis-c7ef__sc-2dc7ka-4"})(["display:flex;justify-content:space-between;align-items:center;background:#f5f5f5;padding:6px 14px 6px 6px;gap:2px;position:relative;z-index:10;"]),vtn=_c.div.withConfig({displayName:"TabLeftGroup",componentId:"gpt-vis-c7ef__sc-2dc7ka-5"})(["display:flex;gap:2px;"]),mtn=_c.div.withConfig({displayName:"TabRightGroup",componentId:"gpt-vis-c7ef__sc-2dc7ka-6"})(["display:flex;gap:4px;align-items:center;"]),ytn=_c.div.withConfig({displayName:"TabContent",componentId:"gpt-vis-c7ef__sc-2dc7ka-7"})(["background:#fff;overflow:hidden;position:relative;background:#fafafa;"]),_tn=_c.div.withConfig({displayName:"ErrorMessage",componentId:"gpt-vis-c7ef__sc-2dc7ka-8"})(["padding:16px;height:150px;font-size:12px;color:#666;border-radius:4px;display:flex;align-items:center;justify-content:center;"]),Ixe=Gbt(["pre:has(.gpt-vis){overflow:hidden;}"]),Lxe=_c.button.withConfig({displayName:"StyledTabButton",componentId:"gpt-vis-c7ef__sc-2dc7ka-9"})(["border:none;box-shadow:none;background:",";color:#494949;border-radius:8px;height:26px;width:52px;font-size:12px;transition:all 0.2s cubic-bezier(0.645,0.045,0.355,1);transform:scale(1);cursor:pointer;outline:none;font-family:inherit;display:inline-flex;align-items:center;justify-content:center;"," &:hover,&:focus{background:",";color:#494949;box-shadow:",";transform:scale(1.02);}&:active{background:",";transform:scale(0.96);box-shadow:",";transition:all 0.1s cubic-bezier(0.645,0.045,0.355,1);}"],function(t){return t.active?"#fff":"transparent"},function(t){return t.active&&`
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.08);
  `},function(t){return t.active?"#fff":"#f0f0f0"},function(t){return t.active?"0 2px 6px rgba(0, 0, 0, 0.12)":"0 1px 3px rgba(0, 0, 0, 0.06)"},function(t){return t.active?"#fff":"#e8e8e8"},function(t){return t.active?"0 1px 2px rgba(0, 0, 0, 0.1)":"0 1px 2px rgba(0, 0, 0, 0.04)"}),btn=_c.div.withConfig({displayName:"Divider",componentId:"gpt-vis-c7ef__sc-2dc7ka-10"})(["width:1px;height:16px;background-color:#d9d9d9;margin:0 8px;flex-shrink:0;"]);function Etn(t,{target:e=document.body}={}){if(typeof t!="string")throw new TypeError(`Expected parameter \`text\` to be a \`string\`, got \`${typeof t}\`.`);const n=document.createElement("textarea"),r=document.activeElement;n.value=t,n.setAttribute("readonly",""),n.style.all="unset",n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.width="2em",n.style.height="2em",n.style.padding="0",n.style.border="none",n.style.outline="none",n.style.boxShadow="none",n.style.background="transparent",n.style.fontSize="12pt",n.style.whiteSpace="pre";const i=document.getSelection(),a=i.rangeCount>0&&i.getRangeAt(0);e.append(n),n.select(),n.selectionStart=0,n.selectionEnd=t.length;let o=!1;try{o=document.execCommand("copy")}catch{}return n.remove(),a&&(i.removeAllRanges(),i.addRange(a)),r&&r.focus(),o}function AF(t){"@babel/helpers - typeof";return AF=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},AF(t)}function oK(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */oK=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(N,M,k){N[M]=k.value},a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(N,M,k){return Object.defineProperty(N,M,{value:k,enumerable:!0,configurable:!0,writable:!0}),N[M]}try{c({},"")}catch{c=function(k,z,j){return k[z]=j}}function u(N,M,k,z){var j=M&&M.prototype instanceof y?M:y,V=Object.create(j.prototype),Q=new $(z||[]);return i(V,"_invoke",{value:L(N,k,Q)}),V}function f(N,M,k){try{return{type:"normal",arg:N.call(M,k)}}catch(z){return{type:"throw",arg:z}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",g="completed",v={};function y(){}function _(){}function E(){}var x={};c(x,o,function(){return this});var T=Object.getPrototypeOf,S=T&&T(T(X([])));S&&S!==n&&r.call(S,o)&&(x=S);var w=E.prototype=y.prototype=Object.create(x);function C(N){["next","throw","return"].forEach(function(M){c(N,M,function(k){return this._invoke(M,k)})})}function D(N,M){function k(j,V,Q,ee){var re=f(N[j],N,V);if(re.type!=="throw"){var ne=re.arg,le=ne.value;return le&&AF(le)=="object"&&r.call(le,"__await")?M.resolve(le.__await).then(function(ue){k("next",ue,Q,ee)},function(ue){k("throw",ue,Q,ee)}):M.resolve(le).then(function(ue){ne.value=ue,Q(ne)},function(ue){return k("throw",ue,Q,ee)})}ee(re.arg)}var z;i(this,"_invoke",{value:function(V,Q){function ee(){return new M(function(re,ne){k(V,Q,re,ne)})}return z=z?z.then(ee,ee):ee()}})}function L(N,M,k){var z=h;return function(j,V){if(z===p)throw new Error("Generator is already running");if(z===g){if(j==="throw")throw V;return{value:t,done:!0}}for(k.method=j,k.arg=V;;){var Q=k.delegate;if(Q){var ee=B(Q,k);if(ee){if(ee===v)continue;return ee}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(z===h)throw z=g,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);z=p;var re=f(N,M,k);if(re.type==="normal"){if(z=k.done?g:d,re.arg===v)continue;return{value:re.arg,done:k.done}}re.type==="throw"&&(z=g,k.method="throw",k.arg=re.arg)}}}function B(N,M){var k=M.method,z=N.iterator[k];if(z===t)return M.delegate=null,k==="throw"&&N.iterator.return&&(M.method="return",M.arg=t,B(N,M),M.method==="throw")||k!=="return"&&(M.method="throw",M.arg=new TypeError("The iterator does not provide a '"+k+"' method")),v;var j=f(z,N.iterator,M.arg);if(j.type==="throw")return M.method="throw",M.arg=j.arg,M.delegate=null,v;var V=j.arg;return V?V.done?(M[N.resultName]=V.value,M.next=N.nextLoc,M.method!=="return"&&(M.method="next",M.arg=t),M.delegate=null,v):V:(M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,v)}function I(N){var M={tryLoc:N[0]};1 in N&&(M.catchLoc=N[1]),2 in N&&(M.finallyLoc=N[2],M.afterLoc=N[3]),this.tryEntries.push(M)}function U(N){var M=N.completion||{};M.type="normal",delete M.arg,N.completion=M}function $(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(I,this),this.reset(!0)}function X(N){if(N||N===""){var M=N[o];if(M)return M.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var k=-1,z=function j(){for(;++k<N.length;)if(r.call(N,k))return j.value=N[k],j.done=!1,j;return j.value=t,j.done=!0,j};return z.next=z}}throw new TypeError(AF(N)+" is not iterable")}return _.prototype=E,i(w,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(N){var M=typeof N=="function"&&N.constructor;return!!M&&(M===_||(M.displayName||M.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,E):(N.__proto__=E,c(N,l,"GeneratorFunction")),N.prototype=Object.create(w),N},e.awrap=function(N){return{__await:N}},C(D.prototype),c(D.prototype,s,function(){return this}),e.AsyncIterator=D,e.async=function(N,M,k,z,j){j===void 0&&(j=Promise);var V=new D(u(N,M,k,z),j);return e.isGeneratorFunction(M)?V:V.next().then(function(Q){return Q.done?Q.value:V.next()})},C(w),c(w,l,"Generator"),c(w,o,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),e.keys=function(N){var M=Object(N),k=[];for(var z in M)k.push(z);return k.reverse(),function j(){for(;k.length;){var V=k.pop();if(V in M)return j.value=V,j.done=!1,j}return j.done=!0,j}},e.values=X,$.prototype={constructor:$,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!M)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var M=this.tryEntries[0].completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var k=this;function z(ne,le){return Q.type="throw",Q.arg=M,k.next=ne,le&&(k.method="next",k.arg=t),!!le}for(var j=this.tryEntries.length-1;j>=0;--j){var V=this.tryEntries[j],Q=V.completion;if(V.tryLoc==="root")return z("end");if(V.tryLoc<=this.prev){var ee=r.call(V,"catchLoc"),re=r.call(V,"finallyLoc");if(ee&&re){if(this.prev<V.catchLoc)return z(V.catchLoc,!0);if(this.prev<V.finallyLoc)return z(V.finallyLoc)}else if(ee){if(this.prev<V.catchLoc)return z(V.catchLoc,!0)}else{if(!re)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return z(V.finallyLoc)}}}},abrupt:function(M,k){for(var z=this.tryEntries.length-1;z>=0;--z){var j=this.tryEntries[z];if(j.tryLoc<=this.prev&&r.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var V=j;break}}V&&(M==="break"||M==="continue")&&V.tryLoc<=k&&k<=V.finallyLoc&&(V=null);var Q=V?V.completion:{};return Q.type=M,Q.arg=k,V?(this.method="next",this.next=V.finallyLoc,v):this.complete(Q)},complete:function(M,k){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&k&&(this.next=k),v},finish:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.finallyLoc===M)return this.complete(z.completion,z.afterLoc),U(z),v}},catch:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.tryLoc===M){var j=z.completion;if(j.type==="throw"){var V=j.arg;U(z)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(M,k,z){return this.delegate={iterator:X(M),resultName:k,nextLoc:z},this.method==="next"&&(this.arg=t),v}},e}function kxe(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){n(c);return}s.done?e(l):Promise.resolve(l).then(r,i)}function xtn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(l){kxe(a,r,i,o,s,"next",l)}function s(l){kxe(a,r,i,o,s,"throw",l)}o(void 0)})}}var Stn=(function(){var t=xtn(oK().mark(function e(n){var r,i;return oK().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,r=JSON.stringify(n,null,2),i=Etn(r),i){o.next=5;break}throw new Error("");case 5:o.next=11;break;case 7:throw o.prev=7,o.t0=o.catch(0),console.error(":",o.t0),o.t0;case 11:case"end":return o.stop()}},e,null,[[0,7]])}));return function(n){return t.apply(this,arguments)}})();function jx(t){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jx(t)}var Ttn=["type"];function wF(){return wF=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wF.apply(this,arguments)}function PC(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */PC=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(N,M,k){N[M]=k.value},a=typeof Symbol=="function"?Symbol:{},o=a.iterator||"@@iterator",s=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(N,M,k){return Object.defineProperty(N,M,{value:k,enumerable:!0,configurable:!0,writable:!0}),N[M]}try{c({},"")}catch{c=function(k,z,j){return k[z]=j}}function u(N,M,k,z){var j=M&&M.prototype instanceof y?M:y,V=Object.create(j.prototype),Q=new $(z||[]);return i(V,"_invoke",{value:L(N,k,Q)}),V}function f(N,M,k){try{return{type:"normal",arg:N.call(M,k)}}catch(z){return{type:"throw",arg:z}}}e.wrap=u;var h="suspendedStart",d="suspendedYield",p="executing",g="completed",v={};function y(){}function _(){}function E(){}var x={};c(x,o,function(){return this});var T=Object.getPrototypeOf,S=T&&T(T(X([])));S&&S!==n&&r.call(S,o)&&(x=S);var w=E.prototype=y.prototype=Object.create(x);function C(N){["next","throw","return"].forEach(function(M){c(N,M,function(k){return this._invoke(M,k)})})}function D(N,M){function k(j,V,Q,ee){var re=f(N[j],N,V);if(re.type!=="throw"){var ne=re.arg,le=ne.value;return le&&jx(le)=="object"&&r.call(le,"__await")?M.resolve(le.__await).then(function(ue){k("next",ue,Q,ee)},function(ue){k("throw",ue,Q,ee)}):M.resolve(le).then(function(ue){ne.value=ue,Q(ne)},function(ue){return k("throw",ue,Q,ee)})}ee(re.arg)}var z;i(this,"_invoke",{value:function(V,Q){function ee(){return new M(function(re,ne){k(V,Q,re,ne)})}return z=z?z.then(ee,ee):ee()}})}function L(N,M,k){var z=h;return function(j,V){if(z===p)throw new Error("Generator is already running");if(z===g){if(j==="throw")throw V;return{value:t,done:!0}}for(k.method=j,k.arg=V;;){var Q=k.delegate;if(Q){var ee=B(Q,k);if(ee){if(ee===v)continue;return ee}}if(k.method==="next")k.sent=k._sent=k.arg;else if(k.method==="throw"){if(z===h)throw z=g,k.arg;k.dispatchException(k.arg)}else k.method==="return"&&k.abrupt("return",k.arg);z=p;var re=f(N,M,k);if(re.type==="normal"){if(z=k.done?g:d,re.arg===v)continue;return{value:re.arg,done:k.done}}re.type==="throw"&&(z=g,k.method="throw",k.arg=re.arg)}}}function B(N,M){var k=M.method,z=N.iterator[k];if(z===t)return M.delegate=null,k==="throw"&&N.iterator.return&&(M.method="return",M.arg=t,B(N,M),M.method==="throw")||k!=="return"&&(M.method="throw",M.arg=new TypeError("The iterator does not provide a '"+k+"' method")),v;var j=f(z,N.iterator,M.arg);if(j.type==="throw")return M.method="throw",M.arg=j.arg,M.delegate=null,v;var V=j.arg;return V?V.done?(M[N.resultName]=V.value,M.next=N.nextLoc,M.method!=="return"&&(M.method="next",M.arg=t),M.delegate=null,v):V:(M.method="throw",M.arg=new TypeError("iterator result is not an object"),M.delegate=null,v)}function I(N){var M={tryLoc:N[0]};1 in N&&(M.catchLoc=N[1]),2 in N&&(M.finallyLoc=N[2],M.afterLoc=N[3]),this.tryEntries.push(M)}function U(N){var M=N.completion||{};M.type="normal",delete M.arg,N.completion=M}function $(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(I,this),this.reset(!0)}function X(N){if(N||N===""){var M=N[o];if(M)return M.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var k=-1,z=function j(){for(;++k<N.length;)if(r.call(N,k))return j.value=N[k],j.done=!1,j;return j.value=t,j.done=!0,j};return z.next=z}}throw new TypeError(jx(N)+" is not iterable")}return _.prototype=E,i(w,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:_,configurable:!0}),_.displayName=c(E,l,"GeneratorFunction"),e.isGeneratorFunction=function(N){var M=typeof N=="function"&&N.constructor;return!!M&&(M===_||(M.displayName||M.name)==="GeneratorFunction")},e.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,E):(N.__proto__=E,c(N,l,"GeneratorFunction")),N.prototype=Object.create(w),N},e.awrap=function(N){return{__await:N}},C(D.prototype),c(D.prototype,s,function(){return this}),e.AsyncIterator=D,e.async=function(N,M,k,z,j){j===void 0&&(j=Promise);var V=new D(u(N,M,k,z),j);return e.isGeneratorFunction(M)?V:V.next().then(function(Q){return Q.done?Q.value:V.next()})},C(w),c(w,l,"Generator"),c(w,o,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),e.keys=function(N){var M=Object(N),k=[];for(var z in M)k.push(z);return k.reverse(),function j(){for(;k.length;){var V=k.pop();if(V in M)return j.value=V,j.done=!1,j}return j.done=!0,j}},e.values=X,$.prototype={constructor:$,reset:function(M){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(U),!M)for(var k in this)k.charAt(0)==="t"&&r.call(this,k)&&!isNaN(+k.slice(1))&&(this[k]=t)},stop:function(){this.done=!0;var M=this.tryEntries[0].completion;if(M.type==="throw")throw M.arg;return this.rval},dispatchException:function(M){if(this.done)throw M;var k=this;function z(ne,le){return Q.type="throw",Q.arg=M,k.next=ne,le&&(k.method="next",k.arg=t),!!le}for(var j=this.tryEntries.length-1;j>=0;--j){var V=this.tryEntries[j],Q=V.completion;if(V.tryLoc==="root")return z("end");if(V.tryLoc<=this.prev){var ee=r.call(V,"catchLoc"),re=r.call(V,"finallyLoc");if(ee&&re){if(this.prev<V.catchLoc)return z(V.catchLoc,!0);if(this.prev<V.finallyLoc)return z(V.finallyLoc)}else if(ee){if(this.prev<V.catchLoc)return z(V.catchLoc,!0)}else{if(!re)throw new Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return z(V.finallyLoc)}}}},abrupt:function(M,k){for(var z=this.tryEntries.length-1;z>=0;--z){var j=this.tryEntries[z];if(j.tryLoc<=this.prev&&r.call(j,"finallyLoc")&&this.prev<j.finallyLoc){var V=j;break}}V&&(M==="break"||M==="continue")&&V.tryLoc<=k&&k<=V.finallyLoc&&(V=null);var Q=V?V.completion:{};return Q.type=M,Q.arg=k,V?(this.method="next",this.next=V.finallyLoc,v):this.complete(Q)},complete:function(M,k){if(M.type==="throw")throw M.arg;return M.type==="break"||M.type==="continue"?this.next=M.arg:M.type==="return"?(this.rval=this.arg=M.arg,this.method="return",this.next="end"):M.type==="normal"&&k&&(this.next=k),v},finish:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.finallyLoc===M)return this.complete(z.completion,z.afterLoc),U(z),v}},catch:function(M){for(var k=this.tryEntries.length-1;k>=0;--k){var z=this.tryEntries[k];if(z.tryLoc===M){var j=z.completion;if(j.type==="throw"){var V=j.arg;U(z)}return V}}throw new Error("illegal catch attempt")},delegateYield:function(M,k,z){return this.delegate={iterator:X(M),resultName:k,nextLoc:z},this.method==="next"&&(this.arg=t),v}},e}function Dxe(t,e,n,r,i,a,o){try{var s=t[a](o),l=s.value}catch(c){n(c);return}s.done?e(l):Promise.resolve(l).then(r,i)}function Bxe(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(l){Dxe(a,r,i,o,s,"next",l)}function s(l){Dxe(a,r,i,o,s,"throw",l)}o(void 0)})}}function Atn(t,e){if(t==null)return{};var n=wtn(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function wtn(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Fxe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Uxe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fxe(Object(n),!0).forEach(function(r){Otn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fxe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Otn(t,e,n){return e=Ctn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ctn(t){var e=Rtn(t,"string");return jx(e)=="symbol"?e:String(e)}function Rtn(t,e){if(jx(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(jx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function $L(t,e){return Itn(t)||Ntn(t,e)||Ptn(t,e)||Mtn()}function Mtn(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ptn(t,e){if(t){if(typeof t=="string")return jxe(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jxe(t,e)}}function jxe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ntn(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,a,o,s=[],l=!0,c=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return s}}function Itn(t){if(Array.isArray(t))return t}vre.registerLanguage("json",atn);var Ltn=["mind-map","fishbone-diagram","flow-diagram","organization-chart","network-graph","indented-tree"],zxe={"zh-CN":{chartTab:"",codeTab:"",download:"",copy:"",copied:"",renderError:"",parseError:"GPT-Vis parse content error!",unsupportedChart:"Chart type not supported"},"en-US":{chartTab:"Chart",codeTab:"Code",download:"Download",copy:"Copy",copied:"Copied",renderError:"Chart render failed",parseError:"Parse content error!",unsupportedChart:"Chart type not supported"},"pt-BR":{chartTab:"Grfico",codeTab:"Cdigo",download:"Baixar",copy:"Copiar",copied:"Copiado",renderError:"Erro ao renderizar grfico",parseError:"Erro ao analisar contedo!",unsupportedChart:"Tipo de grfico no suportado"}},ktn=jt.memo(function(t){var e=t.style,n=t.content,r=t.components,i=t.debug,a=i===void 0?!1:i,o=t.loadingTimeout,s=t.componentErrorRender,l=t.errorRender,c=t.showTabs,u=c===void 0?!0:c,f=t.showCodeTab,h=f===void 0?!0:f,d=t.showChartTab,p=d===void 0?!0:d,g=t.defaultTab,v=g===void 0?"chart":g,y=t.textLabels,_=y===void 0?{}:y,E=t.locale,x=E===void 0?"zh-CN":E,T=jt.useRef(),S=jt.useRef(),w=jt.useState(!0),C=$L(w,2),D=C[0],L=C[1],B=jt.useState(!1),I=$L(B,2),U=I[0],$=I[1],X=jt.useState(!1),N=$L(X,2),M=N[0],k=N[1],z=jt.useRef(null),j=jt.useRef(null),V=Uxe(Uxe({},zxe[x]||zxe["en-US"]),_),Q=function(){return v==="chart"&&p?"chart":v==="code"&&h?"code":p?"chart":h?"code":"chart"},ee=jt.useState(Q()),re=$L(ee,2),ne=re[0],le=re[1],ue;try{ue=JSON.parse(n)}catch(Wn){var ve=Wn;return T.current&&(clearTimeout(T.current),a&&console.warn("GPT-Vis parse content timeout!")),T.current=setTimeout(function(){L(!1)},o),D?et.createElement(wV,{className:"gpt-vis",style:e},et.createElement(dtn,null)):l?l({error:ve,content:n}):et.createElement("div",null,V.parseError)}var Se=ue,Re=Se.type,Xe=Atn(Se,Ttn),Le=r[Re];if(a&&console.log("GPT-Vis withChartCode get chartJson parse from vis-chart code block",ue),!Le){var Lt="".concat(V.unsupportedChart,': "').concat(Re,'"');return l?l({error:new Error(Lt),content:n}):et.createElement("div",null,Lt)}var xt=function(Sn){var In=Sn.error;return U||($(!0),h&&u&&le("code")),s?s({error:In,content:n}):et.createElement("div",null,et.createElement(_tn,null,V.renderError))},dt=(function(){var Wn=Bxe(PC().mark(function Sn(){return PC().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.prev=0,de.next=3,Stn(ue);case 3:k(!0),S.current&&clearTimeout(S.current),S.current=setTimeout(function(){k(!1)},1e3),de.next=11;break;case 8:de.prev=8,de.t0=de.catch(0),console.error("Copy failed:",de.t0);case 11:case"end":return de.stop()}},Sn,null,[[0,8]])}));return function(){return Wn.apply(this,arguments)}})(),Bt=(function(){var Wn=Bxe(PC().mark(function Sn(){var In;return PC().wrap(function(sr){for(;;)switch(sr.prev=sr.next){case 0:if(sr.prev=0,!j.current){sr.next=7;break}return sr.next=4,gl(j.current,{scale:2});case 4:return In=sr.sent,sr.next=7,In.download({format:"png",filename:"chart-".concat(Re,"-").concat(Date.now())});case 7:sr.next=12;break;case 9:sr.prev=9,sr.t0=sr.catch(0),console.error("Download image failed:",sr.t0);case 12:case"end":return sr.stop()}},Sn,null,[[0,9]])}));return function(){return Wn.apply(this,arguments)}})(),At=Ltn.includes(Re),zt=function(){if(z.current&&typeof z.current.zoomTo=="function"){var Sn=z.current.getZoom()||1,In=Math.min(Sn*1.15,1.5);z.current.zoomTo(In)}},rn=function(){if(z.current&&typeof z.current.zoomTo=="function"){var Sn=z.current.getZoom()||1,In=Math.max(Sn/1.15,.1);z.current.zoomTo(In)}};return u?et.createElement(ptn,{style:e},et.createElement(gtn,null,et.createElement(vtn,null,p&&et.createElement(Lxe,{active:ne==="chart",onClick:function(){return le("chart")}},V.chartTab),h&&et.createElement(Lxe,{active:ne==="code",onClick:function(){return le("code")}},V.codeTab)),et.createElement(mtn,null,ne==="chart"?et.createElement(et.Fragment,null,At&&et.createElement(et.Fragment,null,et.createElement(zL,{onClick:rn,style:{width:"24px",height:"24px",padding:0}},et.createElement(ctn,{size:18})),et.createElement(zL,{onClick:zt,style:{width:"24px",height:"24px",padding:0}},et.createElement(ltn,{size:18})),et.createElement(btn,null)),et.createElement(zL,{onClick:Bt},et.createElement(ftn,{size:16}),V.download)):et.createElement(et.Fragment,null,et.createElement(zL,{onClick:dt},M?et.createElement(utn,null):et.createElement(stn,null),M?V.copied:V.copy)))),et.createElement(ytn,null,ne==="chart"?et.createElement(Sxe,{FallbackComponent:xt,onError:function(Sn,In){console.error("GPT-Vis Render error:",Sn),U||($(!0),h&&le("code")),a&&console.error("GPT-Vis Render error info:",In)}},et.createElement(wV,{className:"gpt-vis",type:Re},et.createElement(Ixe,null),et.createElement(Nxe,{ref:j},et.createElement(Le,wF({},Xe,{onReady:function(Sn){z.current=Sn}}))))):et.createElement("div",{style:{maxHeight:500,overflow:"auto"}},et.createElement(vre,{language:"json",style:otn,showLineNumbers:!1,wrapLines:!0,customStyle:{background:"transparent",padding:"16px",margin:0,fontSize:"12px",lineHeight:"1"}},JSON.stringify(ue,null,2)||n)))):et.createElement(wV,{className:"gpt-vis",style:e},et.createElement(Ixe,null),et.createElement(Nxe,{ref:j},et.createElement(Sxe,{FallbackComponent:xt,onError:function(Sn,In){console.error("GPT-Vis Render error:",Sn),a&&console.error("GPT-Vis Render error info:",In)}},et.createElement(Le,wF({},Xe,{onReady:function(Sn){z.current=Sn}})))))});function hP(t){"@babel/helpers - typeof";return hP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hP(t)}var Dtn=["children","className","node"];function $xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function HL(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$xe(Object(n),!0).forEach(function(r){Btn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$xe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Btn(t,e,n){return e=Ftn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ftn(t){var e=Utn(t,"string");return hP(e)=="symbol"?e:String(e)}function Utn(t,e){if(hP(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(hP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sK(){return sK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sK.apply(this,arguments)}function jtn(t,e){if(t==null)return{};var n=ztn(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function ztn(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var $tn=function(e){var n=e.children,r=e.className,i=r===void 0?"":r;e.node;var a=jtn(e,Dtn);return et.createElement("code",sK({},a,{className:i}),n)},Htn=function(e){return function(r){var i,a=r.children,o=r.className,s=o===void 0?"":o,l=String(a).trim(),c=s.includes("language-vis-chart"),u=e.components,f=e.languageRenderers,h=e.defaultRenderer,d=e.debug,p=e.loadingTimeout,g=p===void 0?5e3:p,v=e.style,y=e.errorRender,_=e.componentErrorRender,E=e.showTabs,x=e.showCodeTab,T=e.showChartTab,S=e.defaultTab,w=e.textLabels,C=e.locale;if(c)return et.createElement(ktn,{style:v,content:l,components:u,debug:d,loadingTimeout:g,errorRender:y,componentErrorRender:_,showTabs:E,showCodeTab:x,showChartTab:T,defaultTab:S,textLabels:w,locale:C});var D=((i=s.match(/language-(.*)/))===null||i===void 0?void 0:i[1])||"",L=f,B=L&&L[D];return B?et.createElement(B,r):h?et.createElement(h,r):et.createElement($tn,r)}},Gtn=function(e){return Htn(e)},Wtn=function(e){return Gtn(HL(HL({},e),{},{components:HL(HL({},NQt),Ve.get(e,"components",{}))}))};const Vtn=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ytn=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Xtn={};function Hxe(t,e){return(Xtn.jsx?Ytn:Vtn).test(t)}const qtn={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"};var BT={},OV,Gxe;function Ztn(){if(Gxe)return OV;Gxe=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,e=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,a=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,s=/^\s+|\s+$/g,l=`
`,c="/",u="*",f="",h="comment",d="declaration";function p(v,y){if(typeof v!="string")throw new TypeError("First argument must be a string");if(!v)return[];y=y||{};var _=1,E=1;function x($){var X=$.match(e);X&&(_+=X.length);var N=$.lastIndexOf(l);E=~N?$.length-N:E+$.length}function T(){var $={line:_,column:E};return function(X){return X.position=new S($),D(),X}}function S($){this.start=$,this.end={line:_,column:E},this.source=y.source}S.prototype.content=v;function w($){var X=new Error(y.source+":"+_+":"+E+": "+$);if(X.reason=$,X.filename=y.source,X.line=_,X.column=E,X.source=v,!y.silent)throw X}function C($){var X=$.exec(v);if(X){var N=X[0];return x(N),v=v.slice(N.length),X}}function D(){C(n)}function L($){var X;for($=$||[];X=B();)X!==!1&&$.push(X);return $}function B(){var $=T();if(!(c!=v.charAt(0)||u!=v.charAt(1))){for(var X=2;f!=v.charAt(X)&&(u!=v.charAt(X)||c!=v.charAt(X+1));)++X;if(X+=2,f===v.charAt(X-1))return w("End of comment missing");var N=v.slice(2,X-2);return E+=2,x(N),v=v.slice(X),E+=2,$({type:h,comment:N})}}function I(){var $=T(),X=C(r);if(X){if(B(),!C(i))return w("property missing ':'");var N=C(a),M=$({type:d,property:g(X[0].replace(t,f)),value:N?g(N[0].replace(t,f)):f});return C(o),M}}function U(){var $=[];L($);for(var X;X=I();)X!==!1&&($.push(X),L($));return $}return D(),U()}function g(v){return v?v.replace(s,f):f}return OV=p,OV}var Wxe;function Ktn(){if(Wxe)return BT;Wxe=1;var t=BT&&BT.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(BT,"__esModule",{value:!0}),BT.default=n;const e=t(Ztn());function n(r,i){let a=null;if(!r||typeof r!="string")return a;const o=(0,e.default)(r),s=typeof i=="function";return o.forEach(l=>{if(l.type!=="declaration")return;const{property:c,value:u}=l;s?i(c,u,l):u&&(a=a||{},a[c]=u)}),a}return BT}var H2={},Vxe;function Qtn(){if(Vxe)return H2;Vxe=1,Object.defineProperty(H2,"__esModule",{value:!0}),H2.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,e=/-([a-z])/g,n=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,i=/^-(ms)-/,a=function(c){return!c||n.test(c)||t.test(c)},o=function(c,u){return u.toUpperCase()},s=function(c,u){return"".concat(u,"-")},l=function(c,u){return u===void 0&&(u={}),a(c)?c:(c=c.toLowerCase(),u.reactCompat?c=c.replace(i,s):c=c.replace(r,s),c.replace(e,o))};return H2.camelCase=l,H2}var G2,Yxe;function Jtn(){if(Yxe)return G2;Yxe=1;var t=G2&&G2.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},e=t(Ktn()),n=Qtn();function r(i,a){var o={};return!i||typeof i!="string"||(0,e.default)(i,function(s,l){s&&l&&(o[(0,n.camelCase)(s,a)]=l)}),o}return r.default=r,G2=r,G2}var enn=Jtn();const tnn=Ni(enn),U5=m5e("end"),i0=m5e("start");function m5e(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function nnn(t){const e=i0(t),n=U5(t);if(e&&n)return{start:e,end:n}}function fR(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Xxe(t.position):"start"in t||"end"in t?Xxe(t):"line"in t||"column"in t?lK(t):""}function lK(t){return qxe(t&&t.line)+":"+qxe(t&&t.column)}function Xxe(t){return lK(t&&t.start)+"-"+lK(t&&t.end)}function qxe(t){return t&&typeof t=="number"?t:1}class df extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",a={},o=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof e=="string"?i=e:!a.cause&&e&&(o=!0,i=e.message,a.cause=e),!a.ruleId&&!a.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?a.ruleId=r:(a.source=r.slice(0,l),a.ruleId=r.slice(l+1))}if(!a.place&&a.ancestors&&a.ancestors){const l=a.ancestors[a.ancestors.length-1];l&&(a.place=l.position)}const s=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=s?s.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=s?s.line:void 0,this.name=fR(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=o&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}df.prototype.file="";df.prototype.name="";df.prototype.reason="";df.prototype.message="";df.prototype.stack="";df.prototype.column=void 0;df.prototype.line=void 0;df.prototype.ancestors=void 0;df.prototype.cause=void 0;df.prototype.fatal=void 0;df.prototype.place=void 0;df.prototype.ruleId=void 0;df.prototype.source=void 0;const mre={}.hasOwnProperty,rnn=new Map,inn=/[A-Z]/g,ann=new Set(["table","tbody","thead","tfoot","tr"]),onn=new Set(["td","th"]),y5e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function snn(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=gnn(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=pnn(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?J_:mP,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},a=_5e(i,t,void 0);return a&&typeof a!="string"?a:i.create(t,i.Fragment,{children:a||void 0},void 0)}function _5e(t,e,n){if(e.type==="element")return lnn(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return cnn(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return fnn(t,e,n);if(e.type==="mdxjsEsm")return unn(t,e);if(e.type==="root")return hnn(t,e,n);if(e.type==="text")return dnn(t,e)}function lnn(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=J_,t.schema=i),t.ancestors.push(e);const a=E5e(t,e.tagName,!1),o=vnn(t,e);let s=_re(t,e);return ann.has(e.tagName)&&(s=s.filter(function(l){return typeof l=="string"?!j7e(l):!0})),b5e(t,o,a,e),yre(o,s),t.ancestors.pop(),t.schema=r,t.create(e,a,o,n)}function cnn(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}dP(t,e.position)}function unn(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);dP(t,e.position)}function fnn(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=J_,t.schema=i),t.ancestors.push(e);const a=e.name===null?t.Fragment:E5e(t,e.name,!0),o=mnn(t,e),s=_re(t,e);return b5e(t,o,a,e),yre(o,s),t.ancestors.pop(),t.schema=r,t.create(e,a,o,n)}function hnn(t,e,n){const r={};return yre(r,_re(t,e)),t.create(e,t.Fragment,r,n)}function dnn(t,e){return e.value}function b5e(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function yre(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function pnn(t,e,n){return r;function r(i,a,o,s){const c=Array.isArray(o.children)?n:e;return s?c(a,o,s):c(a,o)}}function gnn(t,e){return n;function n(r,i,a,o){const s=Array.isArray(a.children),l=i0(r);return e(i,a,o,s,{columnNumber:l?l.column-1:void 0,fileName:t,lineNumber:l?l.line:void 0},void 0)}}function vnn(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&mre.call(e.properties,i)){const a=ynn(t,i,e.properties[i]);if(a){const[o,s]=a;t.tableCellAlignToStyle&&o==="align"&&typeof s=="string"&&onn.has(e.tagName)?r=s:n[o]=s}}if(r){const a=n.style||(n.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function mnn(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const o=a.expression;o.type;const s=o.properties[0];s.type,Object.assign(n,t.evaluater.evaluateExpression(s.argument))}else dP(t,e.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const s=r.value.data.estree.body[0];s.type,a=t.evaluater.evaluateExpression(s.expression)}else dP(t,e.position);else a=r.value===null?!0:r.value;n[i]=a}return n}function _re(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:rnn;for(;++r<e.children.length;){const a=e.children[r];let o;if(t.passKeys){const l=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(l){const c=i.get(l)||0;o=l+"-"+c,i.set(l,c+1)}}const s=_5e(t,a,o);s!==void 0&&n.push(s)}return n}function ynn(t,e,n){const r=kF(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?hTe(n):dTe(n)),r.property==="style"){let i=typeof n=="object"?n:_nn(t,String(n));return t.stylePropertyNameCase==="css"&&(i=bnn(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?qtn[r.property]||r.property:r.attribute,n]}}function _nn(t,e){try{return tnn(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new df("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=y5e+"#cannot-parse-style-attribute",i}}function E5e(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let a=-1,o;for(;++a<i.length;){const s=Hxe(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};o=o?{type:"MemberExpression",object:o,property:s,computed:!!(a&&s.type==="Literal"),optional:!1}:s}r=o}else r=Hxe(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return mre.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);dP(t)}function dP(t,e){const n=new df("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=y5e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function bnn(t){const e={};let n;for(n in t)mre.call(t,n)&&(e[Enn(n)]=t[n]);return e}function Enn(t){let e=t.replace(inn,xnn);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function xnn(t){return"-"+t.toLowerCase()}const CV={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]};var RV={exports:{}},W2={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zxe;function Snn(){if(Zxe)return W2;Zxe=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,a){var o=null;if(a!==void 0&&(o=""+a),i.key!==void 0&&(o=""+i.key),"key"in i){a={};for(var s in i)s!=="key"&&(a[s]=i[s])}else a=i;return i=a.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:a}}return W2.Fragment=e,W2.jsx=n,W2.jsxs=n,W2}var Kxe;function Tnn(){return Kxe||(Kxe=1,RV.exports=Snn()),RV.exports}var MV=Tnn();const Ann={};function bre(t,e){const n=Ann,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return x5e(t,r,i)}function x5e(t,e,n){if(wnn(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Qxe(t.children,e,n)}return Array.isArray(t)?Qxe(t,e,n):""}function Qxe(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=x5e(t[i],e,n);return r.join("")}function wnn(t){return!!(t&&typeof t=="object")}const Jxe=document.createElement("i");function Ere(t){const e="&"+t+";";Jxe.innerHTML=e;const n=Jxe.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Pd(t,e,n,r){const i=t.length;let a=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);a<r.length;)o=r.slice(a,a+1e4),o.unshift(e,0),t.splice(...o),a+=1e4,e+=1e4}function Mp(t,e){return t.length>0?(Pd(t,t.length,0,e),t):e}const eSe={}.hasOwnProperty;function S5e(t){const e={};let n=-1;for(;++n<t.length;)Onn(e,t[n]);return e}function Onn(t,e){let n;for(n in e){const i=(eSe.call(t,n)?t[n]:void 0)||(t[n]={}),a=e[n];let o;if(a)for(o in a){eSe.call(i,o)||(i[o]=[]);const s=a[o];Cnn(i[o],Array.isArray(s)?s:s?[s]:[])}}}function Cnn(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);Pd(t,0,0,r)}function T5e(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Qg(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Wf=yb(/[A-Za-z]/),lf=yb(/[\dA-Za-z]/),Rnn=yb(/[#-'*+\--9=?A-Z^-~]/);function OF(t){return t!==null&&(t<32||t===127)}const cK=yb(/\d/),Mnn=yb(/[\dA-Fa-f]/),Pnn=yb(/[!-/:-@[-`{-~]/);function di(t){return t!==null&&t<-2}function ds(t){return t!==null&&(t<0||t===32)}function Ma(t){return t===-2||t===-1||t===32}const j5=yb(/\p{P}|\p{S}/u),zx=yb(/\s/);function yb(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function iO(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const a=t.charCodeAt(n);let o="";if(a===37&&lf(t.charCodeAt(n+1))&&lf(t.charCodeAt(n+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(o=String.fromCharCode(a));else if(a>55295&&a<57344){const s=t.charCodeAt(n+1);a<56320&&s>56319&&s<57344?(o=String.fromCharCode(a,s),i=1):o=""}else o=String.fromCharCode(a);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Xa(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return o;function o(l){return Ma(l)?(t.enter(n),s(l)):e(l)}function s(l){return Ma(l)&&a++<i?(t.consume(l),s):(t.exit(n),e(l))}}const Nnn={tokenize:Inn};function Inn(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),Xa(t,e,"linePrefix")}function i(s){return t.enter("paragraph"),a(s)}function a(s){const l=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(s)}function o(s){if(s===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(s);return}return di(s)?(t.consume(s),t.exit("chunkText"),a):(t.consume(s),o)}}const Lnn={tokenize:knn},tSe={tokenize:Dnn};function knn(t){const e=this,n=[];let r=0,i,a,o;return s;function s(E){if(r<n.length){const x=n[r];return e.containerState=x[1],t.attempt(x[0].continuation,l,c)(E)}return c(E)}function l(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&_();const x=e.events.length;let T=x,S;for(;T--;)if(e.events[T][0]==="exit"&&e.events[T][1].type==="chunkFlow"){S=e.events[T][1].end;break}y(r);let w=x;for(;w<e.events.length;)e.events[w][1].end={...S},w++;return Pd(e.events,T+1,0,e.events.slice(x)),e.events.length=w,c(E)}return s(E)}function c(E){if(r===n.length){if(!i)return h(E);if(i.currentConstruct&&i.currentConstruct.concrete)return p(E);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(tSe,u,f)(E)}function u(E){return i&&_(),y(r),h(E)}function f(E){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,p(E)}function h(E){return e.containerState={},t.attempt(tSe,d,p)(E)}function d(E){return r++,n.push([e.currentConstruct,e.containerState]),h(E)}function p(E){if(E===null){i&&_(),y(0),t.consume(E);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),g(E)}function g(E){if(E===null){v(t.exit("chunkFlow"),!0),y(0),t.consume(E);return}return di(E)?(t.consume(E),v(t.exit("chunkFlow")),r=0,e.interrupt=void 0,s):(t.consume(E),g)}function v(E,x){const T=e.sliceStream(E);if(x&&T.push(null),E.previous=a,a&&(a.next=E),a=E,i.defineSkip(E.start),i.write(T),e.parser.lazy[E.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const w=e.events.length;let C=w,D,L;for(;C--;)if(e.events[C][0]==="exit"&&e.events[C][1].type==="chunkFlow"){if(D){L=e.events[C][1].end;break}D=!0}for(y(r),S=w;S<e.events.length;)e.events[S][1].end={...L},S++;Pd(e.events,C+1,0,e.events.slice(w)),e.events.length=S}}function y(E){let x=n.length;for(;x-- >E;){const T=n[x];e.containerState=T[1],T[0].exit.call(e,t)}n.length=E}function _(){i.write([null]),a=void 0,i=void 0,e.containerState._closeFlow=void 0}}function Dnn(t,e,n){return Xa(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function _w(t){if(t===null||ds(t)||zx(t))return 1;if(j5(t))return 2}function z5(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const a=t[i].resolveAll;a&&!r.includes(a)&&(e=a(e,n),r.push(a))}return e}const uK={name:"attention",resolveAll:Bnn,tokenize:Fnn};function Bnn(t,e){let n=-1,r,i,a,o,s,l,c,u;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;l=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},h={...t[n][1].start};nSe(f,-l),nSe(h,l),o={type:l>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},s={type:l>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:h},a={type:l>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:l>1?"strong":"emphasis",start:{...o.start},end:{...s.end}},t[r][1].end={...o.start},t[n][1].start={...s.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=Mp(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=Mp(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",a,e]]),c=Mp(c,z5(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=Mp(c,[["exit",a,e],["enter",s,e],["exit",s,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(u=2,c=Mp(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):u=0,Pd(t,r-1,n-r+3,c),n=r+c.length-u-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function Fnn(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=_w(r);let a;return o;function o(l){return a=l,t.enter("attentionSequence"),s(l)}function s(l){if(l===a)return t.consume(l),s;const c=t.exit("attentionSequence"),u=_w(l),f=!u||u===2&&i||n.includes(l),h=!i||i===2&&u||n.includes(r);return c._open=!!(a===42?f:f&&(i||!h)),c._close=!!(a===42?h:h&&(u||!f)),e(l)}}function nSe(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const Unn={name:"autolink",tokenize:jnn};function jnn(t,e,n){let r=0;return i;function i(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(d){return Wf(d)?(t.consume(d),o):d===64?n(d):c(d)}function o(d){return d===43||d===45||d===46||lf(d)?(r=1,s(d)):c(d)}function s(d){return d===58?(t.consume(d),r=0,l):(d===43||d===45||d===46||lf(d))&&r++<32?(t.consume(d),s):(r=0,c(d))}function l(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||OF(d)?n(d):(t.consume(d),l)}function c(d){return d===64?(t.consume(d),u):Rnn(d)?(t.consume(d),c):n(d)}function u(d){return lf(d)?f(d):n(d)}function f(d){return d===46?(t.consume(d),r=0,u):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):h(d)}function h(d){if((d===45||lf(d))&&r++<63){const p=d===45?h:f;return t.consume(d),p}return n(d)}}const mN={partial:!0,tokenize:znn};function znn(t,e,n){return r;function r(a){return Ma(a)?Xa(t,i,"linePrefix")(a):i(a)}function i(a){return a===null||di(a)?e(a):n(a)}}const A5e={continuation:{tokenize:Hnn},exit:Gnn,name:"blockQuote",tokenize:$nn};function $nn(t,e,n){const r=this;return i;function i(o){if(o===62){const s=r.containerState;return s.open||(t.enter("blockQuote",{_container:!0}),s.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),a}return n(o)}function a(o){return Ma(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function Hnn(t,e,n){const r=this;return i;function i(o){return Ma(o)?Xa(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):a(o)}function a(o){return t.attempt(A5e,e,n)(o)}}function Gnn(t){t.exit("blockQuote")}const w5e={name:"characterEscape",tokenize:Wnn};function Wnn(t,e,n){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),i}function i(a){return Pnn(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(a)}}const O5e={name:"characterReference",tokenize:Vnn};function Vnn(t,e,n){const r=this;let i=0,a,o;return s;function s(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),l}function l(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),a=31,o=lf,u(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,o=Mnn,u):(t.enter("characterReferenceValue"),a=7,o=cK,u(f))}function u(f){if(f===59&&i){const h=t.exit("characterReferenceValue");return o===lf&&!Ere(r.sliceSerialize(h))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(f)&&i++<a?(t.consume(f),u):n(f)}}const rSe={partial:!0,tokenize:Xnn},iSe={concrete:!0,name:"codeFenced",tokenize:Ynn};function Ynn(t,e,n){const r=this,i={partial:!0,tokenize:T};let a=0,o=0,s;return l;function l(S){return c(S)}function c(S){const w=r.events[r.events.length-1];return a=w&&w[1].type==="linePrefix"?w[2].sliceSerialize(w[1],!0).length:0,s=S,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),u(S)}function u(S){return S===s?(o++,t.consume(S),u):o<3?n(S):(t.exit("codeFencedFenceSequence"),Ma(S)?Xa(t,f,"whitespace")(S):f(S))}function f(S){return S===null||di(S)?(t.exit("codeFencedFence"),r.interrupt?e(S):t.check(rSe,g,x)(S)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),h(S))}function h(S){return S===null||di(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(S)):Ma(S)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Xa(t,d,"whitespace")(S)):S===96&&S===s?n(S):(t.consume(S),h)}function d(S){return S===null||di(S)?f(S):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||di(S)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(S)):S===96&&S===s?n(S):(t.consume(S),p)}function g(S){return t.attempt(i,x,v)(S)}function v(S){return t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),y}function y(S){return a>0&&Ma(S)?Xa(t,_,"linePrefix",a+1)(S):_(S)}function _(S){return S===null||di(S)?t.check(rSe,g,x)(S):(t.enter("codeFlowValue"),E(S))}function E(S){return S===null||di(S)?(t.exit("codeFlowValue"),_(S)):(t.consume(S),E)}function x(S){return t.exit("codeFenced"),e(S)}function T(S,w,C){let D=0;return L;function L(X){return S.enter("lineEnding"),S.consume(X),S.exit("lineEnding"),B}function B(X){return S.enter("codeFencedFence"),Ma(X)?Xa(S,I,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):I(X)}function I(X){return X===s?(S.enter("codeFencedFenceSequence"),U(X)):C(X)}function U(X){return X===s?(D++,S.consume(X),U):D>=o?(S.exit("codeFencedFenceSequence"),Ma(X)?Xa(S,$,"whitespace")(X):$(X)):C(X)}function $(X){return X===null||di(X)?(S.exit("codeFencedFence"),w(X)):C(X)}}}function Xnn(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a)}function a(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const PV={name:"codeIndented",tokenize:Znn},qnn={partial:!0,tokenize:Knn};function Znn(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),Xa(t,a,"linePrefix",5)(c)}function a(c){const u=r.events[r.events.length-1];return u&&u[1].type==="linePrefix"&&u[2].sliceSerialize(u[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?l(c):di(c)?t.attempt(qnn,o,l)(c):(t.enter("codeFlowValue"),s(c))}function s(c){return c===null||di(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),s)}function l(c){return t.exit("codeIndented"),e(c)}}function Knn(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):di(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Xa(t,a,"linePrefix",5)(o)}function a(o){const s=r.events[r.events.length-1];return s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):di(o)?i(o):n(o)}}const Qnn={name:"codeText",previous:ern,resolve:Jnn,tokenize:trn};function Jnn(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function ern(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function trn(t,e,n){let r=0,i,a;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),s(f)}function s(f){return f===96?(t.consume(f),r++,s):(t.exit("codeTextSequence"),l(f))}function l(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),l):f===96?(a=t.enter("codeTextSequence"),i=0,u(f)):di(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),l):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||di(f)?(t.exit("codeTextData"),l(f)):(t.consume(f),c)}function u(f){return f===96?(t.consume(f),i++,u):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(a.type="codeTextData",c(f))}}class nrn{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&V2(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),V2(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),V2(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);V2(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);V2(this.left,n.reverse())}}}function V2(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function C5e(t){const e={};let n=-1,r,i,a,o,s,l,c;const u=new nrn(t);for(;++n<u.length;){for(;n in e;)n=e[n];if(r=u.get(n),n&&r[1].type==="chunkFlow"&&u.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,a=0,a<l.length&&l[a][1].type==="lineEndingBlank"&&(a+=2),a<l.length&&l[a][1].type==="content"))for(;++a<l.length&&l[a][1].type!=="content";)l[a][1].type==="chunkText"&&(l[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,rrn(u,n)),n=e[n],c=!0);else if(r[1]._container){for(a=n,i=void 0;a--;)if(o=u.get(a),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(u.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=a);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...u.get(i)[1].start},s=u.slice(i,n),s.unshift(r),u.splice(i,n-i+1,s))}}return Pd(t,0,Number.POSITIVE_INFINITY,u.slice(0)),!c}function rrn(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const a=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const s=o.events,l=[],c={};let u,f,h=-1,d=n,p=0,g=0;const v=[g];for(;d;){for(;t.get(++i)[1]!==d;);a.push(i),d._tokenizer||(u=r.sliceStream(d),d.next||u.push(null),f&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(u),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=d,d=d.next}for(d=n;++h<s.length;)s[h][0]==="exit"&&s[h-1][0]==="enter"&&s[h][1].type===s[h-1][1].type&&s[h][1].start.line!==s[h][1].end.line&&(g=h+1,v.push(g),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):v.pop(),h=v.length;h--;){const y=s.slice(v[h],v[h+1]),_=a.pop();l.push([_,_+y.length-1]),t.splice(_,2,y)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const irn={resolve:orn,tokenize:srn},arn={partial:!0,tokenize:lrn};function orn(t){return C5e(t),t}function srn(t,e){let n;return r;function r(s){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(s)}function i(s){return s===null?a(s):di(s)?t.check(arn,o,a)(s):(t.consume(s),i)}function a(s){return t.exit("chunkContent"),t.exit("content"),e(s)}function o(s){return t.consume(s),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function lrn(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Xa(t,a,"linePrefix")}function a(o){if(o===null||di(o))return n(o);const s=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&s&&s[1].type==="linePrefix"&&s[2].sliceSerialize(s[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function R5e(t,e,n,r,i,a,o,s,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return f;function f(y){return y===60?(t.enter(r),t.enter(i),t.enter(a),t.consume(y),t.exit(a),h):y===null||y===32||y===41||OF(y)?n(y):(t.enter(r),t.enter(o),t.enter(s),t.enter("chunkString",{contentType:"string"}),g(y))}function h(y){return y===62?(t.enter(a),t.consume(y),t.exit(a),t.exit(i),t.exit(r),e):(t.enter(s),t.enter("chunkString",{contentType:"string"}),d(y))}function d(y){return y===62?(t.exit("chunkString"),t.exit(s),h(y)):y===null||y===60||di(y)?n(y):(t.consume(y),y===92?p:d)}function p(y){return y===60||y===62||y===92?(t.consume(y),d):d(y)}function g(y){return!u&&(y===null||y===41||ds(y))?(t.exit("chunkString"),t.exit(s),t.exit(o),t.exit(r),e(y)):u<c&&y===40?(t.consume(y),u++,g):y===41?(t.consume(y),u--,g):y===null||y===32||y===40||OF(y)?n(y):(t.consume(y),y===92?v:g)}function v(y){return y===40||y===41||y===92?(t.consume(y),g):g(y)}}function M5e(t,e,n,r,i,a){const o=this;let s=0,l;return c;function c(d){return t.enter(r),t.enter(i),t.consume(d),t.exit(i),t.enter(a),u}function u(d){return s>999||d===null||d===91||d===93&&!l||d===94&&!s&&"_hiddenFootnoteSupport"in o.parser.constructs?n(d):d===93?(t.exit(a),t.enter(i),t.consume(d),t.exit(i),t.exit(r),e):di(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),u):(t.enter("chunkString",{contentType:"string"}),f(d))}function f(d){return d===null||d===91||d===93||di(d)||s++>999?(t.exit("chunkString"),u(d)):(t.consume(d),l||(l=!Ma(d)),d===92?h:f)}function h(d){return d===91||d===92||d===93?(t.consume(d),s++,f):f(d)}}function P5e(t,e,n,r,i,a){let o;return s;function s(h){return h===34||h===39||h===40?(t.enter(r),t.enter(i),t.consume(h),t.exit(i),o=h===40?41:h,l):n(h)}function l(h){return h===o?(t.enter(i),t.consume(h),t.exit(i),t.exit(r),e):(t.enter(a),c(h))}function c(h){return h===o?(t.exit(a),l(o)):h===null?n(h):di(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),Xa(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),u(h))}function u(h){return h===o||h===null||di(h)?(t.exit("chunkString"),c(h)):(t.consume(h),h===92?f:u)}function f(h){return h===o||h===92?(t.consume(h),u):u(h)}}function hR(t,e){let n;return r;function r(i){return di(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Ma(i)?Xa(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const crn={name:"definition",tokenize:frn},urn={partial:!0,tokenize:hrn};function frn(t,e,n){const r=this;let i;return a;function a(d){return t.enter("definition"),o(d)}function o(d){return M5e.call(r,t,s,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function s(d){return i=Qg(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),l):n(d)}function l(d){return ds(d)?hR(t,c)(d):c(d)}function c(d){return R5e(t,u,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function u(d){return t.attempt(urn,f,f)(d)}function f(d){return Ma(d)?Xa(t,h,"whitespace")(d):h(d)}function h(d){return d===null||di(d)?(t.exit("definition"),r.parser.defined.push(i),e(d)):n(d)}}function hrn(t,e,n){return r;function r(s){return ds(s)?hR(t,i)(s):n(s)}function i(s){return P5e(t,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(s)}function a(s){return Ma(s)?Xa(t,o,"whitespace")(s):o(s)}function o(s){return s===null||di(s)?e(s):n(s)}}const drn={name:"hardBreakEscape",tokenize:prn};function prn(t,e,n){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),i}function i(a){return di(a)?(t.exit("hardBreakEscape"),e(a)):n(a)}}const grn={name:"headingAtx",resolve:vrn,tokenize:mrn};function vrn(t,e){let n=t.length-2,r=3,i,a;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},a={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},Pd(t,r,n-r+1,[["enter",i,e],["enter",a,e],["exit",a,e],["exit",i,e]])),t}function mrn(t,e,n){let r=0;return i;function i(u){return t.enter("atxHeading"),a(u)}function a(u){return t.enter("atxHeadingSequence"),o(u)}function o(u){return u===35&&r++<6?(t.consume(u),o):u===null||ds(u)?(t.exit("atxHeadingSequence"),s(u)):n(u)}function s(u){return u===35?(t.enter("atxHeadingSequence"),l(u)):u===null||di(u)?(t.exit("atxHeading"),e(u)):Ma(u)?Xa(t,s,"whitespace")(u):(t.enter("atxHeadingText"),c(u))}function l(u){return u===35?(t.consume(u),l):(t.exit("atxHeadingSequence"),s(u))}function c(u){return u===null||u===35||ds(u)?(t.exit("atxHeadingText"),s(u)):(t.consume(u),c)}}const yrn=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],aSe=["pre","script","style","textarea"],_rn={concrete:!0,name:"htmlFlow",resolveTo:xrn,tokenize:Srn},brn={partial:!0,tokenize:Arn},Ern={partial:!0,tokenize:Trn};function xrn(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function Srn(t,e,n){const r=this;let i,a,o,s,l;return c;function c(ee){return u(ee)}function u(ee){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(ee),f}function f(ee){return ee===33?(t.consume(ee),h):ee===47?(t.consume(ee),a=!0,g):ee===63?(t.consume(ee),i=3,r.interrupt?e:j):Wf(ee)?(t.consume(ee),o=String.fromCharCode(ee),v):n(ee)}function h(ee){return ee===45?(t.consume(ee),i=2,d):ee===91?(t.consume(ee),i=5,s=0,p):Wf(ee)?(t.consume(ee),i=4,r.interrupt?e:j):n(ee)}function d(ee){return ee===45?(t.consume(ee),r.interrupt?e:j):n(ee)}function p(ee){const re="CDATA[";return ee===re.charCodeAt(s++)?(t.consume(ee),s===re.length?r.interrupt?e:I:p):n(ee)}function g(ee){return Wf(ee)?(t.consume(ee),o=String.fromCharCode(ee),v):n(ee)}function v(ee){if(ee===null||ee===47||ee===62||ds(ee)){const re=ee===47,ne=o.toLowerCase();return!re&&!a&&aSe.includes(ne)?(i=1,r.interrupt?e(ee):I(ee)):yrn.includes(o.toLowerCase())?(i=6,re?(t.consume(ee),y):r.interrupt?e(ee):I(ee)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(ee):a?_(ee):E(ee))}return ee===45||lf(ee)?(t.consume(ee),o+=String.fromCharCode(ee),v):n(ee)}function y(ee){return ee===62?(t.consume(ee),r.interrupt?e:I):n(ee)}function _(ee){return Ma(ee)?(t.consume(ee),_):L(ee)}function E(ee){return ee===47?(t.consume(ee),L):ee===58||ee===95||Wf(ee)?(t.consume(ee),x):Ma(ee)?(t.consume(ee),E):L(ee)}function x(ee){return ee===45||ee===46||ee===58||ee===95||lf(ee)?(t.consume(ee),x):T(ee)}function T(ee){return ee===61?(t.consume(ee),S):Ma(ee)?(t.consume(ee),T):E(ee)}function S(ee){return ee===null||ee===60||ee===61||ee===62||ee===96?n(ee):ee===34||ee===39?(t.consume(ee),l=ee,w):Ma(ee)?(t.consume(ee),S):C(ee)}function w(ee){return ee===l?(t.consume(ee),l=null,D):ee===null||di(ee)?n(ee):(t.consume(ee),w)}function C(ee){return ee===null||ee===34||ee===39||ee===47||ee===60||ee===61||ee===62||ee===96||ds(ee)?T(ee):(t.consume(ee),C)}function D(ee){return ee===47||ee===62||Ma(ee)?E(ee):n(ee)}function L(ee){return ee===62?(t.consume(ee),B):n(ee)}function B(ee){return ee===null||di(ee)?I(ee):Ma(ee)?(t.consume(ee),B):n(ee)}function I(ee){return ee===45&&i===2?(t.consume(ee),N):ee===60&&i===1?(t.consume(ee),M):ee===62&&i===4?(t.consume(ee),V):ee===63&&i===3?(t.consume(ee),j):ee===93&&i===5?(t.consume(ee),z):di(ee)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(brn,Q,U)(ee)):ee===null||di(ee)?(t.exit("htmlFlowData"),U(ee)):(t.consume(ee),I)}function U(ee){return t.check(Ern,$,Q)(ee)}function $(ee){return t.enter("lineEnding"),t.consume(ee),t.exit("lineEnding"),X}function X(ee){return ee===null||di(ee)?U(ee):(t.enter("htmlFlowData"),I(ee))}function N(ee){return ee===45?(t.consume(ee),j):I(ee)}function M(ee){return ee===47?(t.consume(ee),o="",k):I(ee)}function k(ee){if(ee===62){const re=o.toLowerCase();return aSe.includes(re)?(t.consume(ee),V):I(ee)}return Wf(ee)&&o.length<8?(t.consume(ee),o+=String.fromCharCode(ee),k):I(ee)}function z(ee){return ee===93?(t.consume(ee),j):I(ee)}function j(ee){return ee===62?(t.consume(ee),V):ee===45&&i===2?(t.consume(ee),j):I(ee)}function V(ee){return ee===null||di(ee)?(t.exit("htmlFlowData"),Q(ee)):(t.consume(ee),V)}function Q(ee){return t.exit("htmlFlow"),e(ee)}}function Trn(t,e,n){const r=this;return i;function i(o){return di(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),a):n(o)}function a(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function Arn(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(mN,e,n)}}const wrn={name:"htmlText",tokenize:Orn};function Orn(t,e,n){const r=this;let i,a,o;return s;function s(j){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(j),l}function l(j){return j===33?(t.consume(j),c):j===47?(t.consume(j),T):j===63?(t.consume(j),E):Wf(j)?(t.consume(j),C):n(j)}function c(j){return j===45?(t.consume(j),u):j===91?(t.consume(j),a=0,p):Wf(j)?(t.consume(j),_):n(j)}function u(j){return j===45?(t.consume(j),d):n(j)}function f(j){return j===null?n(j):j===45?(t.consume(j),h):di(j)?(o=f,M(j)):(t.consume(j),f)}function h(j){return j===45?(t.consume(j),d):f(j)}function d(j){return j===62?N(j):j===45?h(j):f(j)}function p(j){const V="CDATA[";return j===V.charCodeAt(a++)?(t.consume(j),a===V.length?g:p):n(j)}function g(j){return j===null?n(j):j===93?(t.consume(j),v):di(j)?(o=g,M(j)):(t.consume(j),g)}function v(j){return j===93?(t.consume(j),y):g(j)}function y(j){return j===62?N(j):j===93?(t.consume(j),y):g(j)}function _(j){return j===null||j===62?N(j):di(j)?(o=_,M(j)):(t.consume(j),_)}function E(j){return j===null?n(j):j===63?(t.consume(j),x):di(j)?(o=E,M(j)):(t.consume(j),E)}function x(j){return j===62?N(j):E(j)}function T(j){return Wf(j)?(t.consume(j),S):n(j)}function S(j){return j===45||lf(j)?(t.consume(j),S):w(j)}function w(j){return di(j)?(o=w,M(j)):Ma(j)?(t.consume(j),w):N(j)}function C(j){return j===45||lf(j)?(t.consume(j),C):j===47||j===62||ds(j)?D(j):n(j)}function D(j){return j===47?(t.consume(j),N):j===58||j===95||Wf(j)?(t.consume(j),L):di(j)?(o=D,M(j)):Ma(j)?(t.consume(j),D):N(j)}function L(j){return j===45||j===46||j===58||j===95||lf(j)?(t.consume(j),L):B(j)}function B(j){return j===61?(t.consume(j),I):di(j)?(o=B,M(j)):Ma(j)?(t.consume(j),B):D(j)}function I(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),i=j,U):di(j)?(o=I,M(j)):Ma(j)?(t.consume(j),I):(t.consume(j),$)}function U(j){return j===i?(t.consume(j),i=void 0,X):j===null?n(j):di(j)?(o=U,M(j)):(t.consume(j),U)}function $(j){return j===null||j===34||j===39||j===60||j===61||j===96?n(j):j===47||j===62||ds(j)?D(j):(t.consume(j),$)}function X(j){return j===47||j===62||ds(j)?D(j):n(j)}function N(j){return j===62?(t.consume(j),t.exit("htmlTextData"),t.exit("htmlText"),e):n(j)}function M(j){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),k}function k(j){return Ma(j)?Xa(t,z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):z(j)}function z(j){return t.enter("htmlTextData"),o(j)}}const xre={name:"labelEnd",resolveAll:Prn,resolveTo:Nrn,tokenize:Irn},Crn={tokenize:Lrn},Rrn={tokenize:krn},Mrn={tokenize:Drn};function Prn(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&Pd(t,0,t.length,n),t}function Nrn(t,e){let n=t.length,r=0,i,a,o,s;for(;n--;)if(i=t[n][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[a][1].start},end:{...t[o][1].end}},u={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[o-2][1].start}};return s=[["enter",l,e],["enter",c,e]],s=Mp(s,t.slice(a+1,a+r+3)),s=Mp(s,[["enter",u,e]]),s=Mp(s,z5(e.parser.constructs.insideSpan.null,t.slice(a+r+4,o-3),e)),s=Mp(s,[["exit",u,e],t[o-2],t[o-1],["exit",c,e]]),s=Mp(s,t.slice(o+1)),s=Mp(s,[["exit",l,e]]),Pd(t,a,t.length,s),t}function Irn(t,e,n){const r=this;let i=r.events.length,a,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return s;function s(h){return a?a._inactive?f(h):(o=r.parser.defined.includes(Qg(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(h),t.exit("labelMarker"),t.exit("labelEnd"),l):n(h)}function l(h){return h===40?t.attempt(Crn,u,o?u:f)(h):h===91?t.attempt(Rrn,u,o?c:f)(h):o?u(h):f(h)}function c(h){return t.attempt(Mrn,u,f)(h)}function u(h){return e(h)}function f(h){return a._balanced=!0,n(h)}}function Lrn(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return ds(f)?hR(t,a)(f):a(f)}function a(f){return f===41?u(f):R5e(t,o,s,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return ds(f)?hR(t,l)(f):u(f)}function s(f){return n(f)}function l(f){return f===34||f===39||f===40?P5e(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):u(f)}function c(f){return ds(f)?hR(t,u)(f):u(f)}function u(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function krn(t,e,n){const r=this;return i;function i(s){return M5e.call(r,t,a,o,"reference","referenceMarker","referenceString")(s)}function a(s){return r.parser.defined.includes(Qg(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(s):n(s)}function o(s){return n(s)}}function Drn(t,e,n){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),i}function i(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),e):n(a)}}const Brn={name:"labelStartImage",resolveAll:xre.resolveAll,tokenize:Frn};function Frn(t,e,n){const r=this;return i;function i(s){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(s),t.exit("labelImageMarker"),a}function a(s){return s===91?(t.enter("labelMarker"),t.consume(s),t.exit("labelMarker"),t.exit("labelImage"),o):n(s)}function o(s){return s===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(s):e(s)}}const Urn={name:"labelStartLink",resolveAll:xre.resolveAll,tokenize:jrn};function jrn(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),a}function a(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const NV={name:"lineEnding",tokenize:zrn};function zrn(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Xa(t,e,"linePrefix")}}const Vk={name:"thematicBreak",tokenize:$rn};function $rn(t,e,n){let r=0,i;return a;function a(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,s(c)}function s(c){return c===i?(t.enter("thematicBreakSequence"),l(c)):r>=3&&(c===null||di(c))?(t.exit("thematicBreak"),e(c)):n(c)}function l(c){return c===i?(t.consume(c),r++,l):(t.exit("thematicBreakSequence"),Ma(c)?Xa(t,s,"whitespace")(c):s(c))}}const Sh={continuation:{tokenize:Vrn},exit:Xrn,name:"list",tokenize:Wrn},Hrn={partial:!0,tokenize:qrn},Grn={partial:!0,tokenize:Yrn};function Wrn(t,e,n){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return s;function s(d){const p=r.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||d===r.containerState.marker:cK(d)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(Vk,n,c)(d):c(d);if(!r.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),l(d)}return n(d)}function l(d){return cK(d)&&++o<10?(t.consume(d),l):(!r.interrupt||o<2)&&(r.containerState.marker?d===r.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),c(d)):n(d)}function c(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||d,t.check(mN,r.interrupt?n:u,t.attempt(Hrn,h,f))}function u(d){return r.containerState.initialBlankLine=!0,a++,h(d)}function f(d){return Ma(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),h):n(d)}function h(d){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function Vrn(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(mN,i,a);function i(s){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Xa(t,e,"listItemIndent",r.containerState.size+1)(s)}function a(s){return r.containerState.furtherBlankLines||!Ma(s)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(s)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(Grn,e,o)(s))}function o(s){return r.containerState._closeFlow=!0,r.interrupt=void 0,Xa(t,t.attempt(Sh,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(s)}}function Yrn(t,e,n){const r=this;return Xa(t,i,"listItemIndent",r.containerState.size+1);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(a):n(a)}}function Xrn(t){t.exit(this.containerState.type)}function qrn(t,e,n){const r=this;return Xa(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(a){const o=r.events[r.events.length-1];return!Ma(a)&&o&&o[1].type==="listItemPrefixWhitespace"?e(a):n(a)}}const oSe={name:"setextUnderline",resolveTo:Zrn,tokenize:Krn};function Zrn(t,e){let n=t.length,r,i,a;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!a&&t[n][1].type==="definition"&&(a=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",a?(t.splice(i,0,["enter",o,e]),t.splice(a+1,0,["exit",t[r][1],e]),t[r][1].end={...t[a][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function Krn(t,e,n){const r=this;let i;return a;function a(c){let u=r.events.length,f;for(;u--;)if(r.events[u][1].type!=="lineEnding"&&r.events[u][1].type!=="linePrefix"&&r.events[u][1].type!=="content"){f=r.events[u][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),s(c)}function s(c){return c===i?(t.consume(c),s):(t.exit("setextHeadingLineSequence"),Ma(c)?Xa(t,l,"lineSuffix")(c):l(c))}function l(c){return c===null||di(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const Qrn={tokenize:Jrn};function Jrn(t){const e=this,n=t.attempt(mN,r,t.attempt(this.parser.constructs.flowInitial,i,Xa(t,t.attempt(this.parser.constructs.flow,i,t.attempt(irn,i)),"linePrefix")));return n;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const ein={resolveAll:I5e()},tin=N5e("string"),nin=N5e("text");function N5e(t){return{resolveAll:I5e(t==="text"?rin:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],a=n.attempt(i,o,s);return o;function o(u){return c(u)?a(u):s(u)}function s(u){if(u===null){n.consume(u);return}return n.enter("data"),n.consume(u),l}function l(u){return c(u)?(n.exit("data"),a(u)):(n.consume(u),l)}function c(u){if(u===null)return!0;const f=i[u];let h=-1;if(f)for(;++h<f.length;){const d=f[h];if(!d.previous||d.previous.call(r,r.previous))return!0}return!1}}}function I5e(t){return e;function e(n,r){let i=-1,a;for(;++i<=n.length;)a===void 0?n[i]&&n[i][1].type==="data"&&(a=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==a+2&&(n[a][1].end=n[i-1][1].end,n.splice(a+2,i-a-2),i=a+2),a=void 0);return t?t(n,r):n}}function rin(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let a=i.length,o=-1,s=0,l;for(;a--;){const c=i[a];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)s++,o--;if(o)break;o=-1}else if(c===-2)l=!0,s++;else if(c!==-1){a++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(s=0),s){const c={type:n===t.length||l||s<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:r.start._bufferIndex+o,_index:r.start._index+a,line:r.end.line,column:r.end.column-s,offset:r.end.offset-s},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const iin={42:Sh,43:Sh,45:Sh,48:Sh,49:Sh,50:Sh,51:Sh,52:Sh,53:Sh,54:Sh,55:Sh,56:Sh,57:Sh,62:A5e},ain={91:crn},oin={[-2]:PV,[-1]:PV,32:PV},sin={35:grn,42:Vk,45:[oSe,Vk],60:_rn,61:oSe,95:Vk,96:iSe,126:iSe},lin={38:O5e,92:w5e},cin={[-5]:NV,[-4]:NV,[-3]:NV,33:Brn,38:O5e,42:uK,60:[Unn,wrn],91:Urn,92:[drn,w5e],93:xre,95:uK,96:Qnn},uin={null:[uK,ein]},fin={null:[42,95]},hin={null:[]},din=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:fin,contentInitial:ain,disable:hin,document:iin,flow:sin,flowInitial:oin,insideSpan:uin,string:lin,text:cin},Symbol.toStringTag,{value:"Module"}));function pin(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},a=[];let o=[],s=[];const l={attempt:w(T),check:w(S),consume:_,enter:E,exit:x,interrupt:w(S,{interrupt:!0})},c={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:t,previous:null,sliceSerialize:h,sliceStream:d,write:f};let u=e.tokenize.call(c,l);return e.resolveAll&&a.push(e),c;function f(B){return o=Mp(o,B),v(),o[o.length-1]!==null?[]:(C(e,0),c.events=z5(a,c.events,c),c.events)}function h(B,I){return vin(d(B),I)}function d(B){return gin(o,B)}function p(){const{_bufferIndex:B,_index:I,line:U,column:$,offset:X}=r;return{_bufferIndex:B,_index:I,line:U,column:$,offset:X}}function g(B){i[B.line]=B.column,L()}function v(){let B;for(;r._index<o.length;){const I=o[r._index];if(typeof I=="string")for(B=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===B&&r._bufferIndex<I.length;)y(I.charCodeAt(r._bufferIndex));else y(I)}}function y(B){u=u(B)}function _(B){di(B)?(r.line++,r.column=1,r.offset+=B===-3?2:1,L()):B!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=B}function E(B,I){const U=I||{};return U.type=B,U.start=p(),c.events.push(["enter",U,c]),s.push(U),U}function x(B){const I=s.pop();return I.end=p(),c.events.push(["exit",I,c]),I}function T(B,I){C(B,I.from)}function S(B,I){I.restore()}function w(B,I){return U;function U($,X,N){let M,k,z,j;return Array.isArray($)?Q($):"tokenize"in $?Q([$]):V($);function V(le){return ue;function ue(ve){const Se=ve!==null&&le[ve],Re=ve!==null&&le.null,Xe=[...Array.isArray(Se)?Se:Se?[Se]:[],...Array.isArray(Re)?Re:Re?[Re]:[]];return Q(Xe)(ve)}}function Q(le){return M=le,k=0,le.length===0?N:ee(le[k])}function ee(le){return ue;function ue(ve){return j=D(),z=le,le.partial||(c.currentConstruct=le),le.name&&c.parser.constructs.disable.null.includes(le.name)?ne():le.tokenize.call(I?Object.assign(Object.create(c),I):c,l,re,ne)(ve)}}function re(le){return B(z,j),X}function ne(le){return j.restore(),++k<M.length?ee(M[k]):N}}}function C(B,I){B.resolveAll&&!a.includes(B)&&a.push(B),B.resolve&&Pd(c.events,I,c.events.length-I,B.resolve(c.events.slice(I),c)),B.resolveTo&&(c.events=B.resolveTo(c.events,c))}function D(){const B=p(),I=c.previous,U=c.currentConstruct,$=c.events.length,X=Array.from(s);return{from:$,restore:N};function N(){r=B,c.previous=I,c.currentConstruct=U,c.events.length=$,s=X,L()}}function L(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function gin(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,a=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,a)];else{if(o=t.slice(n,i),r>-1){const s=o[0];typeof s=="string"?o[0]=s.slice(r):o.shift()}a>0&&o.push(t[i].slice(0,a))}return o}function vin(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const a=t[n];let o;if(typeof a=="string")o=a;else switch(a){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(a)}i=a===-2,r.push(o)}return r.join("")}function min(t){const r={constructs:S5e([din,...(t||{}).extensions||[]]),content:i(Nnn),defined:[],document:i(Lnn),flow:i(Qrn),lazy:{},string:i(tin),text:i(nin)};return r;function i(a){return o;function o(s){return pin(r,a,s)}}}function yin(t){for(;!C5e(t););return t}const sSe=/[\0\t\n\r]/g;function _in(){let t=1,e="",n=!0,r;return i;function i(a,o,s){const l=[];let c,u,f,h,d;for(a=e+(typeof a=="string"?a.toString():new TextDecoder(o||void 0).decode(a)),f=0,e="",n&&(a.charCodeAt(0)===65279&&f++,n=void 0);f<a.length;){if(sSe.lastIndex=f,c=sSe.exec(a),h=c&&c.index!==void 0?c.index:a.length,d=a.charCodeAt(h),!c){e=a.slice(f);break}if(d===10&&f===h&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),f<h&&(l.push(a.slice(f,h)),t+=h-f),d){case 0:{l.push(65533),t++;break}case 9:{for(u=Math.ceil(t/4)*4,l.push(-2);t++<u;)l.push(-1);break}case 10:{l.push(-4),t=1;break}default:r=!0,t=1}f=h+1}return s&&(r&&l.push(-5),e&&l.push(e),l.push(null)),l}}const bin=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ein(t){return t.replace(bin,xin)}function xin(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),a=i===120||i===88;return T5e(n.slice(a?2:1),a?16:10)}return Ere(n)||t}const L5e={}.hasOwnProperty;function Sin(t,e,n){return typeof e!="string"&&(n=e,e=void 0),Tin(n)(yin(min(n).document().write(_in()(t,e,!0))))}function Tin(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(rn),autolinkProtocol:D,autolinkEmail:D,atxHeading:a(dt),blockQuote:a(Re),characterEscape:D,characterReference:D,codeFenced:a(Xe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:a(Xe,o),codeText:a(Le,o),codeTextData:D,data:D,codeFlowValue:D,definition:a(Lt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:a(xt),hardBreakEscape:a(Bt),hardBreakTrailing:a(Bt),htmlFlow:a(At,o),htmlFlowData:D,htmlText:a(At,o),htmlTextData:D,image:a(zt),label:o,link:a(rn),listItem:a(Sn),listItemValue:h,listOrdered:a(Wn,f),listUnordered:a(Wn),paragraph:a(In),reference:ee,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:a(dt),strong:a(de),thematicBreak:a(zr)},exit:{atxHeading:l(),atxHeadingSequence:T,autolink:l(),autolinkEmail:Se,autolinkProtocol:ve,blockQuote:l(),characterEscapeValue:L,characterReferenceMarkerHexadecimal:ne,characterReferenceMarkerNumeric:ne,characterReferenceValue:le,characterReference:ue,codeFenced:l(v),codeFencedFence:g,codeFencedFenceInfo:d,codeFencedFenceMeta:p,codeFlowValue:L,codeIndented:l(y),codeText:l(X),codeTextData:L,data:L,definition:l(),definitionDestinationString:x,definitionLabelString:_,definitionTitleString:E,emphasis:l(),hardBreakEscape:l(I),hardBreakTrailing:l(I),htmlFlow:l(U),htmlFlowData:L,htmlText:l($),htmlTextData:L,image:l(M),label:z,labelText:k,lineEnding:B,link:l(N),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:re,resourceDestinationString:j,resourceTitleString:V,resource:Q,setextHeading:l(C),setextHeadingLineSequence:w,setextHeadingText:S,strong:l(),thematicBreak:l()}};k5e(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(st){let Ft={type:"root",children:[]};const An={stack:[Ft],tokenStack:[],config:e,enter:s,exit:c,buffer:o,resume:u,data:n},wn=[];let $n=-1;for(;++$n<st.length;)if(st[$n][1].type==="listOrdered"||st[$n][1].type==="listUnordered")if(st[$n][0]==="enter")wn.push($n);else{const Vr=wn.pop();$n=i(st,Vr,$n)}for($n=-1;++$n<st.length;){const Vr=e[st[$n][0]];L5e.call(Vr,st[$n][1].type)&&Vr[st[$n][1].type].call(Object.assign({sliceSerialize:st[$n][2].sliceSerialize},An),st[$n][1])}if(An.tokenStack.length>0){const Vr=An.tokenStack[An.tokenStack.length-1];(Vr[1]||lSe).call(An,void 0,Vr[0])}for(Ft.position={start:e_(st.length>0?st[0][1].start:{line:1,column:1,offset:0}),end:e_(st.length>0?st[st.length-2][1].end:{line:1,column:1,offset:0})},$n=-1;++$n<e.transforms.length;)Ft=e.transforms[$n](Ft)||Ft;return Ft}function i(st,Ft,An){let wn=Ft-1,$n=-1,Vr=!1,Tr,Rr,ei,va;for(;++wn<=An;){const pi=st[wn];switch(pi[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{pi[0]==="enter"?$n++:$n--,va=void 0;break}case"lineEndingBlank":{pi[0]==="enter"&&(Tr&&!va&&!$n&&!ei&&(ei=wn),va=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:va=void 0}if(!$n&&pi[0]==="enter"&&pi[1].type==="listItemPrefix"||$n===-1&&pi[0]==="exit"&&(pi[1].type==="listUnordered"||pi[1].type==="listOrdered")){if(Tr){let qo=wn;for(Rr=void 0;qo--;){const ft=st[qo];if(ft[1].type==="lineEnding"||ft[1].type==="lineEndingBlank"){if(ft[0]==="exit")continue;Rr&&(st[Rr][1].type="lineEndingBlank",Vr=!0),ft[1].type="lineEnding",Rr=qo}else if(!(ft[1].type==="linePrefix"||ft[1].type==="blockQuotePrefix"||ft[1].type==="blockQuotePrefixWhitespace"||ft[1].type==="blockQuoteMarker"||ft[1].type==="listItemIndent"))break}ei&&(!Rr||ei<Rr)&&(Tr._spread=!0),Tr.end=Object.assign({},Rr?st[Rr][1].start:pi[1].end),st.splice(Rr||wn,0,["exit",Tr,pi[2]]),wn++,An++}if(pi[1].type==="listItemPrefix"){const qo={type:"listItem",_spread:!1,start:Object.assign({},pi[1].start),end:void 0};Tr=qo,st.splice(wn,0,["enter",qo,pi[2]]),wn++,An++,ei=void 0,va=!0}}}return st[Ft][1]._spread=Vr,An}function a(st,Ft){return An;function An(wn){s.call(this,st(wn),wn),Ft&&Ft.call(this,wn)}}function o(){this.stack.push({type:"fragment",children:[]})}function s(st,Ft,An){this.stack[this.stack.length-1].children.push(st),this.stack.push(st),this.tokenStack.push([Ft,An||void 0]),st.position={start:e_(Ft.start),end:void 0}}function l(st){return Ft;function Ft(An){st&&st.call(this,An),c.call(this,An)}}function c(st,Ft){const An=this.stack.pop(),wn=this.tokenStack.pop();if(wn)wn[0].type!==st.type&&(Ft?Ft.call(this,st,wn[0]):(wn[1]||lSe).call(this,st,wn[0]));else throw new Error("Cannot close `"+st.type+"` ("+fR({start:st.start,end:st.end})+"): its not open");An.position.end=e_(st.end)}function u(){return bre(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function h(st){if(this.data.expectingFirstListItemValue){const Ft=this.stack[this.stack.length-2];Ft.start=Number.parseInt(this.sliceSerialize(st),10),this.data.expectingFirstListItemValue=void 0}}function d(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.lang=st}function p(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.meta=st}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.value=st.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.value=st.replace(/(\r?\n|\r)$/g,"")}function _(st){const Ft=this.resume(),An=this.stack[this.stack.length-1];An.label=Ft,An.identifier=Qg(this.sliceSerialize(st)).toLowerCase()}function E(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.title=st}function x(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.url=st}function T(st){const Ft=this.stack[this.stack.length-1];if(!Ft.depth){const An=this.sliceSerialize(st).length;Ft.depth=An}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function w(st){const Ft=this.stack[this.stack.length-1];Ft.depth=this.sliceSerialize(st).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function D(st){const An=this.stack[this.stack.length-1].children;let wn=An[An.length-1];(!wn||wn.type!=="text")&&(wn=sr(),wn.position={start:e_(st.start),end:void 0},An.push(wn)),this.stack.push(wn)}function L(st){const Ft=this.stack.pop();Ft.value+=this.sliceSerialize(st),Ft.position.end=e_(st.end)}function B(st){const Ft=this.stack[this.stack.length-1];if(this.data.atHardBreak){const An=Ft.children[Ft.children.length-1];An.position.end=e_(st.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(Ft.type)&&(D.call(this,st),L.call(this,st))}function I(){this.data.atHardBreak=!0}function U(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.value=st}function $(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.value=st}function X(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.value=st}function N(){const st=this.stack[this.stack.length-1];if(this.data.inReference){const Ft=this.data.referenceType||"shortcut";st.type+="Reference",st.referenceType=Ft,delete st.url,delete st.title}else delete st.identifier,delete st.label;this.data.referenceType=void 0}function M(){const st=this.stack[this.stack.length-1];if(this.data.inReference){const Ft=this.data.referenceType||"shortcut";st.type+="Reference",st.referenceType=Ft,delete st.url,delete st.title}else delete st.identifier,delete st.label;this.data.referenceType=void 0}function k(st){const Ft=this.sliceSerialize(st),An=this.stack[this.stack.length-2];An.label=Ein(Ft),An.identifier=Qg(Ft).toLowerCase()}function z(){const st=this.stack[this.stack.length-1],Ft=this.resume(),An=this.stack[this.stack.length-1];if(this.data.inReference=!0,An.type==="link"){const wn=st.children;An.children=wn}else An.alt=Ft}function j(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.url=st}function V(){const st=this.resume(),Ft=this.stack[this.stack.length-1];Ft.title=st}function Q(){this.data.inReference=void 0}function ee(){this.data.referenceType="collapsed"}function re(st){const Ft=this.resume(),An=this.stack[this.stack.length-1];An.label=Ft,An.identifier=Qg(this.sliceSerialize(st)).toLowerCase(),this.data.referenceType="full"}function ne(st){this.data.characterReferenceType=st.type}function le(st){const Ft=this.sliceSerialize(st),An=this.data.characterReferenceType;let wn;An?(wn=T5e(Ft,An==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):wn=Ere(Ft);const $n=this.stack[this.stack.length-1];$n.value+=wn}function ue(st){const Ft=this.stack.pop();Ft.position.end=e_(st.end)}function ve(st){L.call(this,st);const Ft=this.stack[this.stack.length-1];Ft.url=this.sliceSerialize(st)}function Se(st){L.call(this,st);const Ft=this.stack[this.stack.length-1];Ft.url="mailto:"+this.sliceSerialize(st)}function Re(){return{type:"blockquote",children:[]}}function Xe(){return{type:"code",lang:null,meta:null,value:""}}function Le(){return{type:"inlineCode",value:""}}function Lt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function xt(){return{type:"emphasis",children:[]}}function dt(){return{type:"heading",depth:0,children:[]}}function Bt(){return{type:"break"}}function At(){return{type:"html",value:""}}function zt(){return{type:"image",title:null,url:"",alt:null}}function rn(){return{type:"link",title:null,url:"",children:[]}}function Wn(st){return{type:"list",ordered:st.type==="listOrdered",start:null,spread:st._spread,children:[]}}function Sn(st){return{type:"listItem",spread:st._spread,checked:null,children:[]}}function In(){return{type:"paragraph",children:[]}}function de(){return{type:"strong",children:[]}}function sr(){return{type:"text",value:""}}function zr(){return{type:"thematicBreak"}}}function e_(t){return{line:t.line,column:t.column,offset:t.offset}}function k5e(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?k5e(t,r):Ain(t,r)}}function Ain(t,e){let n;for(n in e)if(L5e.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function lSe(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+fR({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+fR({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+fR({start:e.start,end:e.end})+") is still open")}function win(t){const e=this;e.parser=n;function n(r){return Sin(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function Oin(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function Cin(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function Rin(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let a={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(a.data={meta:e.meta}),t.patch(e,a),a=t.applyData(e,a),a={type:"element",tagName:"pre",properties:{},children:[a]},t.patch(e,a),a}function Min(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Pin(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Nin(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=iO(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let o,s=t.footnoteCounts.get(r);s===void 0?(s=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=a+1,s+=1,t.footnoteCounts.set(r,s);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(s>1?"-"+s:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return t.patch(e,c),t.applyData(e,c)}function Iin(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Lin(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function D5e(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function kin(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return D5e(t,e);const i={src:iO(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,a),t.applyData(e,a)}function Din(t,e){const n={src:iO(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function Bin(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function Fin(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return D5e(t,e);const i={href:iO(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,a),t.applyData(e,a)}function Uin(t,e){const n={href:iO(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function jin(t,e,n){const r=t.all(e),i=n?zin(n):B5e(e),a={},o=[];if(typeof e.checked=="boolean"){const u=r[0];let f;u&&u.type==="element"&&u.tagName==="p"?f=u:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let s=-1;for(;++s<r.length;){const u=r[s];(i||s!==0||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`}),u.type==="element"&&u.tagName==="p"&&!i?o.push(...u.children):o.push(u)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:a,children:o};return t.patch(e,c),t.applyData(e,c)}function zin(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=B5e(n[r])}return e}function B5e(t){const e=t.spread;return e??t.children.length>1}function $in(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,a),t.applyData(e,a)}function Hin(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Gin(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function Win(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function Vin(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},s=i0(e.children[1]),l=U5(e.children[e.children.length-1]);s&&l&&(o.position={start:s,end:l}),i.push(o)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,a),t.applyData(e,a)}function Yin(t,e,n){const r=n?n.children:void 0,a=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,s=o?o.length:e.children.length;let l=-1;const c=[];for(;++l<s;){const f=e.children[l],h={},d=o?o[l]:void 0;d&&(h.align=d);let p={type:"element",tagName:a,properties:h,children:[]};f&&(p.children=t.all(f),t.patch(f,p),p=t.applyData(f,p)),c.push(p)}const u={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,u),t.applyData(e,u)}function Xin(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const cSe=9,uSe=32;function qin(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const a=[];for(;r;)a.push(fSe(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return a.push(fSe(e.slice(i),i>0,!1)),a.join("")}function fSe(t,e,n){let r=0,i=t.length;if(e){let a=t.codePointAt(r);for(;a===cSe||a===uSe;)r++,a=t.codePointAt(r)}if(n){let a=t.codePointAt(i-1);for(;a===cSe||a===uSe;)i--,a=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function Zin(t,e){const n={type:"text",value:qin(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function Kin(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const Qin={blockquote:Oin,break:Cin,code:Rin,delete:Min,emphasis:Pin,footnoteReference:Nin,heading:Iin,html:Lin,imageReference:kin,image:Din,inlineCode:Bin,linkReference:Fin,link:Uin,listItem:jin,list:$in,paragraph:Hin,root:Gin,strong:Win,table:Vin,tableCell:Xin,tableRow:Yin,text:Zin,thematicBreak:Kin,toml:GL,yaml:GL,definition:GL,footnoteDefinition:GL};function GL(){}const F5e=-1,$5=0,dR=1,CF=2,Sre=3,Tre=4,Are=5,wre=6,U5e=7,j5e=8,hSe=typeof self=="object"?self:globalThis,Jin=(t,e)=>{const n=(i,a)=>(t.set(a,i),i),r=i=>{if(t.has(i))return t.get(i);const[a,o]=e[i];switch(a){case $5:case F5e:return n(o,i);case dR:{const s=n([],i);for(const l of o)s.push(r(l));return s}case CF:{const s=n({},i);for(const[l,c]of o)s[r(l)]=r(c);return s}case Sre:return n(new Date(o),i);case Tre:{const{source:s,flags:l}=o;return n(new RegExp(s,l),i)}case Are:{const s=n(new Map,i);for(const[l,c]of o)s.set(r(l),r(c));return s}case wre:{const s=n(new Set,i);for(const l of o)s.add(r(l));return s}case U5e:{const{name:s,message:l}=o;return n(new hSe[s](l),i)}case j5e:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:s}=new Uint8Array(o);return n(new DataView(s),o)}}return n(new hSe[a](o),i)};return r},dSe=t=>Jin(new Map,t)(0),FT="",{toString:ean}={},{keys:tan}=Object,Y2=t=>{const e=typeof t;if(e!=="object"||!t)return[$5,e];const n=ean.call(t).slice(8,-1);switch(n){case"Array":return[dR,FT];case"Object":return[CF,FT];case"Date":return[Sre,FT];case"RegExp":return[Tre,FT];case"Map":return[Are,FT];case"Set":return[wre,FT];case"DataView":return[dR,n]}return n.includes("Array")?[dR,n]:n.includes("Error")?[U5e,n]:[CF,n]},WL=([t,e])=>t===$5&&(e==="function"||e==="symbol"),nan=(t,e,n,r)=>{const i=(o,s)=>{const l=r.push(o)-1;return n.set(s,l),l},a=o=>{if(n.has(o))return n.get(o);let[s,l]=Y2(o);switch(s){case $5:{let u=o;switch(l){case"bigint":s=j5e,u=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+l);u=null;break;case"undefined":return i([F5e],o)}return i([s,u],o)}case dR:{if(l){let h=o;return l==="DataView"?h=new Uint8Array(o.buffer):l==="ArrayBuffer"&&(h=new Uint8Array(o)),i([l,[...h]],o)}const u=[],f=i([s,u],o);for(const h of o)u.push(a(h));return f}case CF:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(e&&"toJSON"in o)return a(o.toJSON());const u=[],f=i([s,u],o);for(const h of tan(o))(t||!WL(Y2(o[h])))&&u.push([a(h),a(o[h])]);return f}case Sre:return i([s,o.toISOString()],o);case Tre:{const{source:u,flags:f}=o;return i([s,{source:u,flags:f}],o)}case Are:{const u=[],f=i([s,u],o);for(const[h,d]of o)(t||!(WL(Y2(h))||WL(Y2(d))))&&u.push([a(h),a(d)]);return f}case wre:{const u=[],f=i([s,u],o);for(const h of o)(t||!WL(Y2(h)))&&u.push(a(h));return f}}const{message:c}=o;return i([s,{name:l,message:c}],o)};return a},pSe=(t,{json:e,lossy:n}={})=>{const r=[];return nan(!(e||n),!!e,new Map,r)(t),r},bw=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?dSe(pSe(t,e)):structuredClone(t):(t,e)=>dSe(pSe(t,e));function ran(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function ian(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function aan(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||ran,r=t.options.footnoteBackLabel||ian,i=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},s=[];let l=-1;for(;++l<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[l]);if(!c)continue;const u=t.all(c),f=String(c.identifier).toUpperCase(),h=iO(f.toLowerCase());let d=0;const p=[],g=t.footnoteCounts.get(f);for(;g!==void 0&&++d<=g;){p.length>0&&p.push({type:"text",value:" "});let _=typeof n=="string"?n:n(l,d);typeof _=="string"&&(_={type:"text",value:_}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+h+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,d),className:["data-footnote-backref"]},children:Array.isArray(_)?_:[_]})}const v=u[u.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const _=v.children[v.children.length-1];_&&_.type==="text"?_.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...p)}else u.push(...p);const y={type:"element",tagName:"li",properties:{id:e+"fn-"+h},children:t.wrap(u,!0)};t.patch(c,y),s.push(y)}if(s.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...bw(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(s,!0)},{type:"text",value:`
`}]}}const H5=(function(t){if(t==null)return can;if(typeof t=="function")return G5(t);if(typeof t=="object")return Array.isArray(t)?oan(t):san(t);if(typeof t=="string")return lan(t);throw new Error("Expected function, string, or object as test")});function oan(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=H5(t[n]);return G5(r);function r(...i){let a=-1;for(;++a<e.length;)if(e[a].apply(this,i))return!0;return!1}}function san(t){const e=t;return G5(n);function n(r){const i=r;let a;for(a in t)if(i[a]!==e[a])return!1;return!0}}function lan(t){return G5(e);function e(n){return n&&n.type===t}}function G5(t){return e;function e(n,r,i){return!!(uan(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function can(){return!0}function uan(t){return t!==null&&typeof t=="object"&&"type"in t}const z5e=[],fan=!0,fK=!1,han="skip";function $5e(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const a=H5(i),o=r?-1:1;s(t,void 0,[])();function s(l,c,u){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const d=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(h,"name",{value:"node ("+(l.type+(d?"<"+d+">":""))+")"})}return h;function h(){let d=z5e,p,g,v;if((!e||a(l,c,u[u.length-1]||void 0))&&(d=dan(n(l,u)),d[0]===fK))return d;if("children"in l&&l.children){const y=l;if(y.children&&d[0]!==han)for(g=(r?y.children.length:-1)+o,v=u.concat(y);g>-1&&g<y.children.length;){const _=y.children[g];if(p=s(_,g,v)(),p[0]===fK)return p;g=typeof p[1]=="number"?p[1]:g+o}}return d}}}function dan(t){return Array.isArray(t)?t:typeof t=="number"?[fan,t]:t==null?z5e:[t]}function W5(t,e,n,r){let i,a,o;typeof e=="function"&&typeof n!="function"?(a=void 0,o=e,i=n):(a=e,o=n,i=r),$5e(t,a,s,i);function s(l,c){const u=c[c.length-1],f=u?u.children.indexOf(l):void 0;return o(l,f,u)}}const hK={}.hasOwnProperty,pan={};function gan(t,e){const n=e||pan,r=new Map,i=new Map,a=new Map,o={...Qin,...n.handlers},s={all:c,applyData:man,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:o,one:l,options:n,patch:van,wrap:_an};return W5(t,function(u){if(u.type==="definition"||u.type==="footnoteDefinition"){const f=u.type==="definition"?r:i,h=String(u.identifier).toUpperCase();f.has(h)||f.set(h,u)}}),s;function l(u,f){const h=u.type,d=s.handlers[h];if(hK.call(s.handlers,h)&&d)return d(s,u,f);if(s.options.passThrough&&s.options.passThrough.includes(h)){if("children"in u){const{children:g,...v}=u,y=bw(v);return y.children=s.all(u),y}return bw(u)}return(s.options.unknownHandler||yan)(s,u,f)}function c(u){const f=[];if("children"in u){const h=u.children;let d=-1;for(;++d<h.length;){const p=s.one(h[d],u);if(p){if(d&&h[d-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=gSe(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=gSe(g.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function van(t,e){t.position&&(e.position=nnn(t))}function man(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&a&&Object.assign(n.properties,bw(a)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function yan(t,e){const n=e.data||{},r="value"in e&&!(hK.call(n,"hProperties")||hK.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function _an(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function gSe(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function vSe(t,e){const n=gan(t,e),r=n.one(t,void 0),i=aan(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function ban(t,e){return t&&"run"in t?async function(n,r){const i=vSe(n,{file:r,...e});await t.run(i,r)}:function(n,r){return vSe(n,{file:r,...t||e})}}function mSe(t){if(t)throw t}var IV,ySe;function Ean(){if(ySe)return IV;ySe=1;var t=Object.prototype.hasOwnProperty,e=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(c){return typeof Array.isArray=="function"?Array.isArray(c):e.call(c)==="[object Array]"},a=function(c){if(!c||e.call(c)!=="[object Object]")return!1;var u=t.call(c,"constructor"),f=c.constructor&&c.constructor.prototype&&t.call(c.constructor.prototype,"isPrototypeOf");if(c.constructor&&!u&&!f)return!1;var h;for(h in c);return typeof h>"u"||t.call(c,h)},o=function(c,u){n&&u.name==="__proto__"?n(c,u.name,{enumerable:!0,configurable:!0,value:u.newValue,writable:!0}):c[u.name]=u.newValue},s=function(c,u){if(u==="__proto__")if(t.call(c,u)){if(r)return r(c,u).value}else return;return c[u]};return IV=function l(){var c,u,f,h,d,p,g=arguments[0],v=1,y=arguments.length,_=!1;for(typeof g=="boolean"&&(_=g,g=arguments[1]||{},v=2),(g==null||typeof g!="object"&&typeof g!="function")&&(g={});v<y;++v)if(c=arguments[v],c!=null)for(u in c)f=s(g,u),h=s(c,u),g!==h&&(_&&h&&(a(h)||(d=i(h)))?(d?(d=!1,p=f&&i(f)?f:[]):p=f&&a(f)?f:{},o(g,{name:u,newValue:l(_,p,h)})):typeof h<"u"&&o(g,{name:u,newValue:h}));return g},IV}var xan=Ean();const LV=Ni(xan);function dK(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function San(){const t=[],e={run:n,use:r};return e;function n(...i){let a=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);s(null,...i);function s(l,...c){const u=t[++a];let f=-1;if(l){o(l);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,u?Tan(u,s)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function Tan(t,e){let n;return r;function r(...o){const s=t.length>o.length;let l;s&&o.push(i);try{l=t.apply(this,o)}catch(c){const u=c;if(s&&n)throw u;return i(u)}s||(l&&l.then&&typeof l.then=="function"?l.then(a,i):l instanceof Error?i(l):a(l))}function i(o,...s){n||(n=!0,e(o,...s))}function a(o){i(null,o)}}const hm={basename:Aan,dirname:wan,extname:Oan,join:Can,sep:"/"};function Aan(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');yN(t);let n=0,r=-1,i=t.length,a;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,s=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(a){n=i+1;break}}else o<0&&(a=!0,o=i+1),s>-1&&(t.codePointAt(i)===e.codePointAt(s--)?s<0&&(r=i):(s=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function wan(t){if(yN(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function Oan(t){yN(t);let e=t.length,n=-1,r=0,i=-1,a=0,o;for(;e--;){const s=t.codePointAt(e);if(s===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),s===46?i<0?i=e:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||n<0||a===0||a===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function Can(...t){let e=-1,n;for(;++e<t.length;)yN(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":Ran(n)}function Ran(t){yN(t);const e=t.codePointAt(0)===47;let n=Man(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function Man(t,e){let n="",r=0,i=-1,a=0,o=-1,s,l;for(;++o<=t.length;){if(o<t.length)s=t.codePointAt(o);else{if(s===47)break;s=47}if(s===47){if(!(i===o-1||a===1))if(i!==o-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,a=0;continue}}else if(n.length>0){n="",r=0,i=o,a=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,a=0}else s===46&&a>-1?a++:a=-1}return n}function yN(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const Pan={cwd:Nan};function Nan(){return"/"}function pK(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function Ian(t){if(typeof t=="string")t=new URL(t);else if(!pK(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Lan(t)}function Lan(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const kV=["history","path","basename","stem","extname","dirname"];class H5e{constructor(e){let n;e?pK(e)?n={path:e}:typeof e=="string"||kan(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":Pan.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<kV.length;){const a=kV[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let i;for(i in n)kV.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?hm.basename(this.path):void 0}set basename(e){BV(e,"basename"),DV(e,"basename"),this.path=hm.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?hm.dirname(this.path):void 0}set dirname(e){_Se(this.basename,"dirname"),this.path=hm.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?hm.extname(this.path):void 0}set extname(e){if(DV(e,"extname"),_Se(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hm.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){pK(e)&&(e=Ian(e)),BV(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?hm.basename(this.path,this.extname):void 0}set stem(e){BV(e,"stem"),DV(e,"stem"),this.path=hm.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new df(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function DV(t,e){if(t&&t.includes(hm.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+hm.sep+"`")}function BV(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function _Se(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function kan(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Dan=(function(t){const r=this.constructor.prototype,i=r[t],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a}),Ban={}.hasOwnProperty;class Ore extends Dan{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=San()}copy(){const e=new Ore;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(LV(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(jV("data",this.frozen),this.namespace[e]=n,this):Ban.call(this.namespace,e)&&this.namespace[e]||void 0:e?(jV("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=VL(e),r=this.parser||this.Parser;return FV("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),FV("process",this.parser||this.Parser),UV("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(a,o){const s=VL(e),l=r.parse(s);r.run(l,s,function(u,f,h){if(u||!f||!h)return c(u);const d=f,p=r.stringify(d,h);jan(p)?h.value=p:h.result=p,c(u,h)});function c(u,f){u||!f?o(u):a?a(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),FV("processSync",this.parser||this.Parser),UV("processSync",this.compiler||this.Compiler),this.process(e,i),ESe("processSync","process",n),r;function i(a,o){n=!0,mSe(a),r=o}}run(e,n,r){bSe(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(o,s){const l=VL(n);i.run(e,l,c);function c(u,f,h){const d=f||e;u?s(u):o?o(d):r(void 0,d,h)}}}runSync(e,n){let r=!1,i;return this.run(e,n,a),ESe("runSync","run",r),i;function a(o,s){mSe(o),i=s,r=!0}}stringify(e,n){this.freeze();const r=VL(n),i=this.compiler||this.Compiler;return UV("stringify",i),bSe(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(jV("use",this.frozen),e!=null)if(typeof e=="function")l(e,n);else if(typeof e=="object")Array.isArray(e)?s(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function a(c){if(typeof c=="function")l(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[u,...f]=c;l(u,f)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");s(c.plugins),c.settings&&(i.settings=LV(!0,i.settings,c.settings))}function s(c){let u=-1;if(c!=null)if(Array.isArray(c))for(;++u<c.length;){const f=c[u];a(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function l(c,u){let f=-1,h=-1;for(;++f<r.length;)if(r[f][0]===c){h=f;break}if(h===-1)r.push([c,...u]);else if(u.length>0){let[d,...p]=u;const g=r[h][1];dK(g)&&dK(d)&&(d=LV(!0,g,d)),r[h]=[c,d,...p]}}}}const Fan=new Ore().freeze();function FV(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function UV(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function jV(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function bSe(t){if(!dK(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function ESe(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function VL(t){return Uan(t)?t:new H5e(t)}function Uan(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function jan(t){return typeof t=="string"||zan(t)}function zan(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const $an="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",xSe=[],SSe={allowDangerousHtml:!0},Han=/^(https?|ircs?|mailto|xmpp)$/i,Gan=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Wan(t){const e=Van(t),n=Yan(t);return Xan(e.runSync(e.parse(n),n),t)}function Van(t){const e=t.rehypePlugins||xSe,n=t.remarkPlugins||xSe,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...SSe}:SSe;return Fan().use(win).use(n).use(ban,r).use(e)}function Yan(t){const e=t.children||"",n=new H5e;return typeof e=="string"&&(n.value=e),n}function Xan(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,a=e.disallowedElements,o=e.skipHtml,s=e.unwrapDisallowed,l=e.urlTransform||qan;for(const u of Gan)Object.hasOwn(e,u.from)&&(""+u.from+(u.to?"use `"+u.to+"` instead":"remove it")+$an+u.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),W5(t,c),snn(t,{Fragment:MV.Fragment,components:i,ignoreInvalidStyle:!0,jsx:MV.jsx,jsxs:MV.jsxs,passKeys:!0,passNode:!0});function c(u,f,h){if(u.type==="raw"&&h&&typeof f=="number")return o?h.children.splice(f,1):h.children[f]={type:"text",value:u.value},f;if(u.type==="element"){let d;for(d in CV)if(Object.hasOwn(CV,d)&&Object.hasOwn(u.properties,d)){const p=u.properties[d],g=CV[d];(g===null||g.includes(u.tagName))&&(u.properties[d]=l(String(p||""),d,u))}}if(u.type==="element"){let d=n?!n.includes(u.tagName):a?a.includes(u.tagName):!1;if(!d&&r&&typeof f=="number"&&(d=!r(u,f,h)),d&&h&&typeof f=="number")return s&&u.children?h.children.splice(f,1,...u.children):h.children.splice(f,1),f}}}function qan(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||Han.test(t.slice(0,e))?t:""}const TSe=/[#.]/g;function Zan(t,e){const n=t||"",r={};let i=0,a,o;for(;i<n.length;){TSe.lastIndex=i;const s=TSe.exec(n),l=n.slice(i,s?s.index:n.length);l&&(a?a==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),s&&(a=s[0],i++)}return{type:"element",tagName:o||e||"div",properties:r,children:[]}}function G5e(t,e,n){const r=n?eon(n):void 0;function i(a,o,...s){let l;if(a==null){l={type:"root",children:[]};const c=o;s.unshift(c)}else{l=Zan(a,e);const c=l.tagName.toLowerCase(),u=r?r.get(c):void 0;if(l.tagName=u||c,Kan(o))s.unshift(o);else for(const[f,h]of Object.entries(o))Qan(t,l.properties,f,h)}for(const c of s)gK(l.children,c);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Kan(t){if(t===null||typeof t!="object"||Array.isArray(t))return!0;if(typeof t.type!="string")return!1;const e=t,n=Object.keys(t);for(const r of n){const i=e[r];if(i&&typeof i=="object"){if(!Array.isArray(i))return!0;const a=i;for(const o of a)if(typeof o!="number"&&typeof o!="string")return!0}}return!!("children"in t&&Array.isArray(t.children))}function Qan(t,e,n,r){const i=kF(t,n);let a;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;a=r}else typeof r=="boolean"?a=r:typeof r=="string"?i.spaceSeparated?a=Wre(r):i.commaSeparated?a=Vre(r):i.commaOrSpaceSeparated?a=Wre(Vre(r).join(" ")):a=ASe(i,i.property,r):Array.isArray(r)?a=[...r]:a=i.property==="style"?Jan(r):String(r);if(Array.isArray(a)){const o=[];for(const s of a)o.push(ASe(i,i.property,s));a=o}i.property==="className"&&Array.isArray(e.className)&&(a=e.className.concat(a)),e[i.property]=a}}function gK(t,e){if(e!=null)if(typeof e=="number"||typeof e=="string")t.push({type:"text",value:String(e)});else if(Array.isArray(e))for(const n of e)gK(t,n);else if(typeof e=="object"&&"type"in e)e.type==="root"?gK(t,e.children):t.push(e);else throw new Error("Expected node, nodes, or string, got `"+e+"`")}function ASe(t,e,n){if(typeof n=="string"){if(t.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((t.boolean||t.overloadedBoolean)&&(n===""||Yre(n)===Yre(e)))return!0}return n}function Jan(t){const e=[];for(const[n,r]of Object.entries(t))e.push([n,r].join(": "));return e.join("; ")}function eon(t){const e=new Map;for(const n of t)e.set(n.toLowerCase(),n);return e}const ton=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],non=G5e(mP,"div"),ron=G5e(J_,"g",ton);function ion(t){const e=String(t),n=[];return{toOffset:i,toPoint:r};function r(a){if(typeof a=="number"&&a>-1&&a<=e.length){let o=0;for(;;){let s=n[o];if(s===void 0){const l=wSe(e,n[o-1]);s=l===-1?e.length+1:l+1,n[o]=s}if(s>a)return{line:o+1,column:a-(o>0?n[o-1]:0)+1,offset:a};o++}}}function i(a){if(a&&typeof a.line=="number"&&typeof a.column=="number"&&!Number.isNaN(a.line)&&!Number.isNaN(a.column)){for(;n.length<a.line;){const s=n[n.length-1],l=wSe(e,s),c=l===-1?e.length+1:l+1;if(s===c)break;n.push(c)}const o=(a.line>1?n[a.line-2]:0)+a.column-1;if(o<n[a.line-1])return o}}}function wSe(t,e){const n=t.indexOf("\r",e),r=t.indexOf(`
`,e);return r===-1?n:n===-1||n+1===r?r:n<r?n:r}const XE={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},W5e={}.hasOwnProperty,aon=Object.prototype;function oon(t,e){const n=e||{};return Cre({file:n.file||void 0,location:!1,schema:n.space==="svg"?J_:mP,verbose:n.verbose||!1},t)}function Cre(t,e){let n;switch(e.nodeName){case"#comment":{const r=e;return n={type:"comment",value:r.data},Yk(t,r,n),n}case"#document":case"#document-fragment":{const r=e,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:V5e(t,e.childNodes),data:{quirksMode:i}},t.file&&t.location){const a=String(t.file),o=ion(a),s=o.toPoint(0),l=o.toPoint(a.length);n.position={start:s,end:l}}return n}case"#documentType":{const r=e;return n={type:"doctype"},Yk(t,r,n),n}case"#text":{const r=e;return n={type:"text",value:r.value},Yk(t,r,n),n}default:return n=son(t,e),n}}function V5e(t,e){let n=-1;const r=[];for(;++n<e.length;){const i=Cre(t,e[n]);r.push(i)}return r}function son(t,e){const n=t.schema;t.schema=e.namespaceURI===XE.svg?J_:mP;let r=-1;const i={};for(;++r<e.attrs.length;){const s=e.attrs[r],l=(s.prefix?s.prefix+":":"")+s.name;W5e.call(aon,l)||(i[l]=s.value)}const o=(t.schema.space==="svg"?ron:non)(e.tagName,i,V5e(t,e.childNodes));if(Yk(t,e,o),o.tagName==="template"){const s=e,l=s.sourceCodeLocation,c=l&&l.startTag&&sA(l.startTag),u=l&&l.endTag&&sA(l.endTag),f=Cre(t,s.content);c&&u&&t.file&&(f.position={start:c.end,end:u.start}),o.content=f}return t.schema=n,o}function Yk(t,e,n){if("sourceCodeLocation"in e&&e.sourceCodeLocation&&t.file){const r=lon(t,n,e.sourceCodeLocation);r&&(t.location=!0,n.position=r)}}function lon(t,e,n){const r=sA(n);if(e.type==="element"){const i=e.children[e.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),t.verbose){const a={};let o;if(n.attrs)for(o in n.attrs)W5e.call(n.attrs,o)&&(a[kF(t.schema,o).property]=sA(n.attrs[o]));n.startTag;const s=sA(n.startTag),l=n.endTag?sA(n.endTag):void 0,c={opening:s};l&&(c.closing=l),c.properties=a,e.data={position:c}}}return r}function sA(t){const e=OSe({line:t.startLine,column:t.startCol,offset:t.startOffset}),n=OSe({line:t.endLine,column:t.endCol,offset:t.endOffset});return e||n?{start:e,end:n}:void 0}function OSe(t){return t.line&&t.column?t:void 0}const con={},uon={}.hasOwnProperty,Y5e=pTe("type",{handlers:{root:hon,element:mon,text:gon,comment:von,doctype:pon}});function fon(t,e){const r=(e||con).space;return Y5e(t,r==="svg"?J_:mP)}function hon(t,e){const n={nodeName:"#document",mode:(t.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=Rre(t.children,n,e),aO(t,n),n}function don(t,e){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=Rre(t.children,n,e),aO(t,n),n}function pon(t){const e={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return aO(t,e),e}function gon(t){const e={nodeName:"#text",value:t.value,parentNode:null};return aO(t,e),e}function von(t){const e={nodeName:"#comment",data:t.value,parentNode:null};return aO(t,e),e}function mon(t,e){const n=e;let r=n;t.type==="element"&&t.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=J_);const i=[];let a;if(t.properties){for(a in t.properties)if(a!=="children"&&uon.call(t.properties,a)){const l=yon(r,a,t.properties[a]);l&&i.push(l)}}const o=r.space,s={nodeName:t.tagName,tagName:t.tagName,attrs:i,namespaceURI:XE[o],childNodes:[],parentNode:null};return s.childNodes=Rre(t.children,s,r),aO(t,s),t.tagName==="template"&&t.content&&(s.content=don(t.content,r)),s}function yon(t,e,n){const r=kF(t,e);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?hTe(n):dTe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const a=i.name.indexOf(":");a<0?i.prefix="":(i.name=i.name.slice(a+1),i.prefix=r.attribute.slice(0,a)),i.namespace=XE[r.space]}return i}function Rre(t,e,n){let r=-1;const i=[];if(t)for(;++r<t.length;){const a=Y5e(t[r],n);a.parentNode=e,i.push(a)}return i}function aO(t,e){const n=t.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,e.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const _on=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Gs="";var Pe;(function(t){t[t.EOF=-1]="EOF",t[t.NULL=0]="NULL",t[t.TABULATION=9]="TABULATION",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.LINE_FEED=10]="LINE_FEED",t[t.FORM_FEED=12]="FORM_FEED",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_0=48]="DIGIT_0",t[t.DIGIT_9=57]="DIGIT_9",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",t[t.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_A=97]="LATIN_SMALL_A",t[t.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(Pe||(Pe={}));const Eh={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function X5e(t){return t>=55296&&t<=57343}function bon(t){return t>=56320&&t<=57343}function Eon(t,e){return(t-55296)*1024+9216+e}function q5e(t){return t!==32&&t!==10&&t!==13&&t!==9&&t!==12&&t>=1&&t<=31||t>=127&&t<=159}function Z5e(t){return t>=64976&&t<=65007||_on.has(t)}var qt;(function(t){t.controlCharacterInInputStream="control-character-in-input-stream",t.noncharacterInInputStream="noncharacter-in-input-stream",t.surrogateInInputStream="surrogate-in-input-stream",t.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",t.endTagWithAttributes="end-tag-with-attributes",t.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",t.unexpectedSolidusInTag="unexpected-solidus-in-tag",t.unexpectedNullCharacter="unexpected-null-character",t.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",t.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",t.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",t.missingEndTagName="missing-end-tag-name",t.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",t.unknownNamedCharacterReference="unknown-named-character-reference",t.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",t.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",t.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",t.eofBeforeTagName="eof-before-tag-name",t.eofInTag="eof-in-tag",t.missingAttributeValue="missing-attribute-value",t.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",t.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",t.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",t.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",t.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",t.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",t.missingDoctypePublicIdentifier="missing-doctype-public-identifier",t.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",t.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",t.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",t.cdataInHtmlContent="cdata-in-html-content",t.incorrectlyOpenedComment="incorrectly-opened-comment",t.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",t.eofInDoctype="eof-in-doctype",t.nestedComment="nested-comment",t.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",t.eofInComment="eof-in-comment",t.incorrectlyClosedComment="incorrectly-closed-comment",t.eofInCdata="eof-in-cdata",t.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",t.nullCharacterReference="null-character-reference",t.surrogateCharacterReference="surrogate-character-reference",t.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",t.controlCharacterReference="control-character-reference",t.noncharacterCharacterReference="noncharacter-character-reference",t.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",t.missingDoctypeName="missing-doctype-name",t.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",t.duplicateAttribute="duplicate-attribute",t.nonConformingDoctype="non-conforming-doctype",t.missingDoctype="missing-doctype",t.misplacedDoctype="misplaced-doctype",t.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",t.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",t.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",t.openElementsLeftAfterEof="open-elements-left-after-eof",t.abandonedHeadElementChild="abandoned-head-element-child",t.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",t.nestedNoscriptInHead="nested-noscript-in-head",t.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(qt||(qt={}));const xon=65536;class Son{constructor(e){this.handler=e,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=xon,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(e,n){const{line:r,col:i,offset:a}=this,o=i+n,s=a+n;return{code:e,startLine:r,endLine:r,startCol:o,endCol:o,startOffset:s,endOffset:s}}_err(e){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(e,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(e){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(bon(n))return this.pos++,this._addGap(),Eon(e,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,Pe.EOF;return this._err(qt.surrogateInInputStream),e}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(e,n){this.html.length>0?this.html+=e:this.html=e,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(e){this.html=this.html.substring(0,this.pos+1)+e+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(e,n){if(this.pos+e.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(e,this.pos);for(let r=0;r<e.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==e.charCodeAt(r))return!1;return!0}peek(e){const n=this.pos+e;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Pe.EOF;const r=this.html.charCodeAt(n);return r===Pe.CARRIAGE_RETURN?Pe.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,Pe.EOF;let e=this.html.charCodeAt(this.pos);return e===Pe.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,Pe.LINE_FEED):e===Pe.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,X5e(e)&&(e=this._processSurrogate(e)),this.handler.onParseError===null||e>31&&e<127||e===Pe.LINE_FEED||e===Pe.CARRIAGE_RETURN||e>159&&e<64976||this._checkForProblematicCharacters(e),e)}_checkForProblematicCharacters(e){q5e(e)?this._err(qt.controlCharacterInInputStream):Z5e(e)&&this._err(qt.noncharacterInInputStream)}retreat(e){for(this.pos-=e;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Sa;(function(t){t[t.CHARACTER=0]="CHARACTER",t[t.NULL_CHARACTER=1]="NULL_CHARACTER",t[t.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",t[t.START_TAG=3]="START_TAG",t[t.END_TAG=4]="END_TAG",t[t.COMMENT=5]="COMMENT",t[t.DOCTYPE=6]="DOCTYPE",t[t.EOF=7]="EOF",t[t.HIBERNATION=8]="HIBERNATION"})(Sa||(Sa={}));function K5e(t,e){for(let n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null}var Fn;(function(t){t.HTML="http://www.w3.org/1999/xhtml",t.MATHML="http://www.w3.org/1998/Math/MathML",t.SVG="http://www.w3.org/2000/svg",t.XLINK="http://www.w3.org/1999/xlink",t.XML="http://www.w3.org/XML/1998/namespace",t.XMLNS="http://www.w3.org/2000/xmlns/"})(Fn||(Fn={}));var lx;(function(t){t.TYPE="type",t.ACTION="action",t.ENCODING="encoding",t.PROMPT="prompt",t.NAME="name",t.COLOR="color",t.FACE="face",t.SIZE="size"})(lx||(lx={}));var Pp;(function(t){t.NO_QUIRKS="no-quirks",t.QUIRKS="quirks",t.LIMITED_QUIRKS="limited-quirks"})(Pp||(Pp={}));var Tt;(function(t){t.A="a",t.ADDRESS="address",t.ANNOTATION_XML="annotation-xml",t.APPLET="applet",t.AREA="area",t.ARTICLE="article",t.ASIDE="aside",t.B="b",t.BASE="base",t.BASEFONT="basefont",t.BGSOUND="bgsound",t.BIG="big",t.BLOCKQUOTE="blockquote",t.BODY="body",t.BR="br",t.BUTTON="button",t.CAPTION="caption",t.CENTER="center",t.CODE="code",t.COL="col",t.COLGROUP="colgroup",t.DD="dd",t.DESC="desc",t.DETAILS="details",t.DIALOG="dialog",t.DIR="dir",t.DIV="div",t.DL="dl",t.DT="dt",t.EM="em",t.EMBED="embed",t.FIELDSET="fieldset",t.FIGCAPTION="figcaption",t.FIGURE="figure",t.FONT="font",t.FOOTER="footer",t.FOREIGN_OBJECT="foreignObject",t.FORM="form",t.FRAME="frame",t.FRAMESET="frameset",t.H1="h1",t.H2="h2",t.H3="h3",t.H4="h4",t.H5="h5",t.H6="h6",t.HEAD="head",t.HEADER="header",t.HGROUP="hgroup",t.HR="hr",t.HTML="html",t.I="i",t.IMG="img",t.IMAGE="image",t.INPUT="input",t.IFRAME="iframe",t.KEYGEN="keygen",t.LABEL="label",t.LI="li",t.LINK="link",t.LISTING="listing",t.MAIN="main",t.MALIGNMARK="malignmark",t.MARQUEE="marquee",t.MATH="math",t.MENU="menu",t.META="meta",t.MGLYPH="mglyph",t.MI="mi",t.MO="mo",t.MN="mn",t.MS="ms",t.MTEXT="mtext",t.NAV="nav",t.NOBR="nobr",t.NOFRAMES="noframes",t.NOEMBED="noembed",t.NOSCRIPT="noscript",t.OBJECT="object",t.OL="ol",t.OPTGROUP="optgroup",t.OPTION="option",t.P="p",t.PARAM="param",t.PLAINTEXT="plaintext",t.PRE="pre",t.RB="rb",t.RP="rp",t.RT="rt",t.RTC="rtc",t.RUBY="ruby",t.S="s",t.SCRIPT="script",t.SEARCH="search",t.SECTION="section",t.SELECT="select",t.SOURCE="source",t.SMALL="small",t.SPAN="span",t.STRIKE="strike",t.STRONG="strong",t.STYLE="style",t.SUB="sub",t.SUMMARY="summary",t.SUP="sup",t.TABLE="table",t.TBODY="tbody",t.TEMPLATE="template",t.TEXTAREA="textarea",t.TFOOT="tfoot",t.TD="td",t.TH="th",t.THEAD="thead",t.TITLE="title",t.TR="tr",t.TRACK="track",t.TT="tt",t.U="u",t.UL="ul",t.SVG="svg",t.VAR="var",t.WBR="wbr",t.XMP="xmp"})(Tt||(Tt={}));var J;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.A=1]="A",t[t.ADDRESS=2]="ADDRESS",t[t.ANNOTATION_XML=3]="ANNOTATION_XML",t[t.APPLET=4]="APPLET",t[t.AREA=5]="AREA",t[t.ARTICLE=6]="ARTICLE",t[t.ASIDE=7]="ASIDE",t[t.B=8]="B",t[t.BASE=9]="BASE",t[t.BASEFONT=10]="BASEFONT",t[t.BGSOUND=11]="BGSOUND",t[t.BIG=12]="BIG",t[t.BLOCKQUOTE=13]="BLOCKQUOTE",t[t.BODY=14]="BODY",t[t.BR=15]="BR",t[t.BUTTON=16]="BUTTON",t[t.CAPTION=17]="CAPTION",t[t.CENTER=18]="CENTER",t[t.CODE=19]="CODE",t[t.COL=20]="COL",t[t.COLGROUP=21]="COLGROUP",t[t.DD=22]="DD",t[t.DESC=23]="DESC",t[t.DETAILS=24]="DETAILS",t[t.DIALOG=25]="DIALOG",t[t.DIR=26]="DIR",t[t.DIV=27]="DIV",t[t.DL=28]="DL",t[t.DT=29]="DT",t[t.EM=30]="EM",t[t.EMBED=31]="EMBED",t[t.FIELDSET=32]="FIELDSET",t[t.FIGCAPTION=33]="FIGCAPTION",t[t.FIGURE=34]="FIGURE",t[t.FONT=35]="FONT",t[t.FOOTER=36]="FOOTER",t[t.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",t[t.FORM=38]="FORM",t[t.FRAME=39]="FRAME",t[t.FRAMESET=40]="FRAMESET",t[t.H1=41]="H1",t[t.H2=42]="H2",t[t.H3=43]="H3",t[t.H4=44]="H4",t[t.H5=45]="H5",t[t.H6=46]="H6",t[t.HEAD=47]="HEAD",t[t.HEADER=48]="HEADER",t[t.HGROUP=49]="HGROUP",t[t.HR=50]="HR",t[t.HTML=51]="HTML",t[t.I=52]="I",t[t.IMG=53]="IMG",t[t.IMAGE=54]="IMAGE",t[t.INPUT=55]="INPUT",t[t.IFRAME=56]="IFRAME",t[t.KEYGEN=57]="KEYGEN",t[t.LABEL=58]="LABEL",t[t.LI=59]="LI",t[t.LINK=60]="LINK",t[t.LISTING=61]="LISTING",t[t.MAIN=62]="MAIN",t[t.MALIGNMARK=63]="MALIGNMARK",t[t.MARQUEE=64]="MARQUEE",t[t.MATH=65]="MATH",t[t.MENU=66]="MENU",t[t.META=67]="META",t[t.MGLYPH=68]="MGLYPH",t[t.MI=69]="MI",t[t.MO=70]="MO",t[t.MN=71]="MN",t[t.MS=72]="MS",t[t.MTEXT=73]="MTEXT",t[t.NAV=74]="NAV",t[t.NOBR=75]="NOBR",t[t.NOFRAMES=76]="NOFRAMES",t[t.NOEMBED=77]="NOEMBED",t[t.NOSCRIPT=78]="NOSCRIPT",t[t.OBJECT=79]="OBJECT",t[t.OL=80]="OL",t[t.OPTGROUP=81]="OPTGROUP",t[t.OPTION=82]="OPTION",t[t.P=83]="P",t[t.PARAM=84]="PARAM",t[t.PLAINTEXT=85]="PLAINTEXT",t[t.PRE=86]="PRE",t[t.RB=87]="RB",t[t.RP=88]="RP",t[t.RT=89]="RT",t[t.RTC=90]="RTC",t[t.RUBY=91]="RUBY",t[t.S=92]="S",t[t.SCRIPT=93]="SCRIPT",t[t.SEARCH=94]="SEARCH",t[t.SECTION=95]="SECTION",t[t.SELECT=96]="SELECT",t[t.SOURCE=97]="SOURCE",t[t.SMALL=98]="SMALL",t[t.SPAN=99]="SPAN",t[t.STRIKE=100]="STRIKE",t[t.STRONG=101]="STRONG",t[t.STYLE=102]="STYLE",t[t.SUB=103]="SUB",t[t.SUMMARY=104]="SUMMARY",t[t.SUP=105]="SUP",t[t.TABLE=106]="TABLE",t[t.TBODY=107]="TBODY",t[t.TEMPLATE=108]="TEMPLATE",t[t.TEXTAREA=109]="TEXTAREA",t[t.TFOOT=110]="TFOOT",t[t.TD=111]="TD",t[t.TH=112]="TH",t[t.THEAD=113]="THEAD",t[t.TITLE=114]="TITLE",t[t.TR=115]="TR",t[t.TRACK=116]="TRACK",t[t.TT=117]="TT",t[t.U=118]="U",t[t.UL=119]="UL",t[t.SVG=120]="SVG",t[t.VAR=121]="VAR",t[t.WBR=122]="WBR",t[t.XMP=123]="XMP"})(J||(J={}));const Ton=new Map([[Tt.A,J.A],[Tt.ADDRESS,J.ADDRESS],[Tt.ANNOTATION_XML,J.ANNOTATION_XML],[Tt.APPLET,J.APPLET],[Tt.AREA,J.AREA],[Tt.ARTICLE,J.ARTICLE],[Tt.ASIDE,J.ASIDE],[Tt.B,J.B],[Tt.BASE,J.BASE],[Tt.BASEFONT,J.BASEFONT],[Tt.BGSOUND,J.BGSOUND],[Tt.BIG,J.BIG],[Tt.BLOCKQUOTE,J.BLOCKQUOTE],[Tt.BODY,J.BODY],[Tt.BR,J.BR],[Tt.BUTTON,J.BUTTON],[Tt.CAPTION,J.CAPTION],[Tt.CENTER,J.CENTER],[Tt.CODE,J.CODE],[Tt.COL,J.COL],[Tt.COLGROUP,J.COLGROUP],[Tt.DD,J.DD],[Tt.DESC,J.DESC],[Tt.DETAILS,J.DETAILS],[Tt.DIALOG,J.DIALOG],[Tt.DIR,J.DIR],[Tt.DIV,J.DIV],[Tt.DL,J.DL],[Tt.DT,J.DT],[Tt.EM,J.EM],[Tt.EMBED,J.EMBED],[Tt.FIELDSET,J.FIELDSET],[Tt.FIGCAPTION,J.FIGCAPTION],[Tt.FIGURE,J.FIGURE],[Tt.FONT,J.FONT],[Tt.FOOTER,J.FOOTER],[Tt.FOREIGN_OBJECT,J.FOREIGN_OBJECT],[Tt.FORM,J.FORM],[Tt.FRAME,J.FRAME],[Tt.FRAMESET,J.FRAMESET],[Tt.H1,J.H1],[Tt.H2,J.H2],[Tt.H3,J.H3],[Tt.H4,J.H4],[Tt.H5,J.H5],[Tt.H6,J.H6],[Tt.HEAD,J.HEAD],[Tt.HEADER,J.HEADER],[Tt.HGROUP,J.HGROUP],[Tt.HR,J.HR],[Tt.HTML,J.HTML],[Tt.I,J.I],[Tt.IMG,J.IMG],[Tt.IMAGE,J.IMAGE],[Tt.INPUT,J.INPUT],[Tt.IFRAME,J.IFRAME],[Tt.KEYGEN,J.KEYGEN],[Tt.LABEL,J.LABEL],[Tt.LI,J.LI],[Tt.LINK,J.LINK],[Tt.LISTING,J.LISTING],[Tt.MAIN,J.MAIN],[Tt.MALIGNMARK,J.MALIGNMARK],[Tt.MARQUEE,J.MARQUEE],[Tt.MATH,J.MATH],[Tt.MENU,J.MENU],[Tt.META,J.META],[Tt.MGLYPH,J.MGLYPH],[Tt.MI,J.MI],[Tt.MO,J.MO],[Tt.MN,J.MN],[Tt.MS,J.MS],[Tt.MTEXT,J.MTEXT],[Tt.NAV,J.NAV],[Tt.NOBR,J.NOBR],[Tt.NOFRAMES,J.NOFRAMES],[Tt.NOEMBED,J.NOEMBED],[Tt.NOSCRIPT,J.NOSCRIPT],[Tt.OBJECT,J.OBJECT],[Tt.OL,J.OL],[Tt.OPTGROUP,J.OPTGROUP],[Tt.OPTION,J.OPTION],[Tt.P,J.P],[Tt.PARAM,J.PARAM],[Tt.PLAINTEXT,J.PLAINTEXT],[Tt.PRE,J.PRE],[Tt.RB,J.RB],[Tt.RP,J.RP],[Tt.RT,J.RT],[Tt.RTC,J.RTC],[Tt.RUBY,J.RUBY],[Tt.S,J.S],[Tt.SCRIPT,J.SCRIPT],[Tt.SEARCH,J.SEARCH],[Tt.SECTION,J.SECTION],[Tt.SELECT,J.SELECT],[Tt.SOURCE,J.SOURCE],[Tt.SMALL,J.SMALL],[Tt.SPAN,J.SPAN],[Tt.STRIKE,J.STRIKE],[Tt.STRONG,J.STRONG],[Tt.STYLE,J.STYLE],[Tt.SUB,J.SUB],[Tt.SUMMARY,J.SUMMARY],[Tt.SUP,J.SUP],[Tt.TABLE,J.TABLE],[Tt.TBODY,J.TBODY],[Tt.TEMPLATE,J.TEMPLATE],[Tt.TEXTAREA,J.TEXTAREA],[Tt.TFOOT,J.TFOOT],[Tt.TD,J.TD],[Tt.TH,J.TH],[Tt.THEAD,J.THEAD],[Tt.TITLE,J.TITLE],[Tt.TR,J.TR],[Tt.TRACK,J.TRACK],[Tt.TT,J.TT],[Tt.U,J.U],[Tt.UL,J.UL],[Tt.SVG,J.SVG],[Tt.VAR,J.VAR],[Tt.WBR,J.WBR],[Tt.XMP,J.XMP]]);function oO(t){var e;return(e=Ton.get(t))!==null&&e!==void 0?e:J.UNKNOWN}const Gn=J,Aon={[Fn.HTML]:new Set([Gn.ADDRESS,Gn.APPLET,Gn.AREA,Gn.ARTICLE,Gn.ASIDE,Gn.BASE,Gn.BASEFONT,Gn.BGSOUND,Gn.BLOCKQUOTE,Gn.BODY,Gn.BR,Gn.BUTTON,Gn.CAPTION,Gn.CENTER,Gn.COL,Gn.COLGROUP,Gn.DD,Gn.DETAILS,Gn.DIR,Gn.DIV,Gn.DL,Gn.DT,Gn.EMBED,Gn.FIELDSET,Gn.FIGCAPTION,Gn.FIGURE,Gn.FOOTER,Gn.FORM,Gn.FRAME,Gn.FRAMESET,Gn.H1,Gn.H2,Gn.H3,Gn.H4,Gn.H5,Gn.H6,Gn.HEAD,Gn.HEADER,Gn.HGROUP,Gn.HR,Gn.HTML,Gn.IFRAME,Gn.IMG,Gn.INPUT,Gn.LI,Gn.LINK,Gn.LISTING,Gn.MAIN,Gn.MARQUEE,Gn.MENU,Gn.META,Gn.NAV,Gn.NOEMBED,Gn.NOFRAMES,Gn.NOSCRIPT,Gn.OBJECT,Gn.OL,Gn.P,Gn.PARAM,Gn.PLAINTEXT,Gn.PRE,Gn.SCRIPT,Gn.SECTION,Gn.SELECT,Gn.SOURCE,Gn.STYLE,Gn.SUMMARY,Gn.TABLE,Gn.TBODY,Gn.TD,Gn.TEMPLATE,Gn.TEXTAREA,Gn.TFOOT,Gn.TH,Gn.THEAD,Gn.TITLE,Gn.TR,Gn.TRACK,Gn.UL,Gn.WBR,Gn.XMP]),[Fn.MATHML]:new Set([Gn.MI,Gn.MO,Gn.MN,Gn.MS,Gn.MTEXT,Gn.ANNOTATION_XML]),[Fn.SVG]:new Set([Gn.TITLE,Gn.FOREIGN_OBJECT,Gn.DESC]),[Fn.XLINK]:new Set,[Fn.XML]:new Set,[Fn.XMLNS]:new Set},vK=new Set([Gn.H1,Gn.H2,Gn.H3,Gn.H4,Gn.H5,Gn.H6]);Tt.STYLE,Tt.SCRIPT,Tt.XMP,Tt.IFRAME,Tt.NOEMBED,Tt.NOFRAMES,Tt.PLAINTEXT;var Be;(function(t){t[t.DATA=0]="DATA",t[t.RCDATA=1]="RCDATA",t[t.RAWTEXT=2]="RAWTEXT",t[t.SCRIPT_DATA=3]="SCRIPT_DATA",t[t.PLAINTEXT=4]="PLAINTEXT",t[t.TAG_OPEN=5]="TAG_OPEN",t[t.END_TAG_OPEN=6]="END_TAG_OPEN",t[t.TAG_NAME=7]="TAG_NAME",t[t.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",t[t.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",t[t.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",t[t.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",t[t.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",t[t.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",t[t.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",t[t.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",t[t.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",t[t.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",t[t.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",t[t.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",t[t.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",t[t.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",t[t.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",t[t.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",t[t.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",t[t.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",t[t.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",t[t.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",t[t.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",t[t.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",t[t.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",t[t.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",t[t.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",t[t.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",t[t.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",t[t.BOGUS_COMMENT=40]="BOGUS_COMMENT",t[t.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",t[t.COMMENT_START=42]="COMMENT_START",t[t.COMMENT_START_DASH=43]="COMMENT_START_DASH",t[t.COMMENT=44]="COMMENT",t[t.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",t[t.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",t[t.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",t[t.COMMENT_END_DASH=49]="COMMENT_END_DASH",t[t.COMMENT_END=50]="COMMENT_END",t[t.COMMENT_END_BANG=51]="COMMENT_END_BANG",t[t.DOCTYPE=52]="DOCTYPE",t[t.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",t[t.DOCTYPE_NAME=54]="DOCTYPE_NAME",t[t.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",t[t.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",t[t.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",t[t.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",t[t.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",t[t.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",t[t.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",t[t.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",t[t.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",t[t.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",t[t.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",t[t.CDATA_SECTION=68]="CDATA_SECTION",t[t.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",t[t.CDATA_SECTION_END=70]="CDATA_SECTION_END",t[t.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",t[t.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(Be||(Be={}));const Xl={DATA:Be.DATA,RCDATA:Be.RCDATA,RAWTEXT:Be.RAWTEXT,SCRIPT_DATA:Be.SCRIPT_DATA,PLAINTEXT:Be.PLAINTEXT,CDATA_SECTION:Be.CDATA_SECTION};function won(t){return t>=Pe.DIGIT_0&&t<=Pe.DIGIT_9}function NC(t){return t>=Pe.LATIN_CAPITAL_A&&t<=Pe.LATIN_CAPITAL_Z}function Oon(t){return t>=Pe.LATIN_SMALL_A&&t<=Pe.LATIN_SMALL_Z}function r_(t){return Oon(t)||NC(t)}function CSe(t){return r_(t)||won(t)}function YL(t){return t+32}function Q5e(t){return t===Pe.SPACE||t===Pe.LINE_FEED||t===Pe.TABULATION||t===Pe.FORM_FEED}function RSe(t){return Q5e(t)||t===Pe.SOLIDUS||t===Pe.GREATER_THAN_SIGN}function Con(t){return t===Pe.NULL?qt.nullCharacterReference:t>1114111?qt.characterReferenceOutsideUnicodeRange:X5e(t)?qt.surrogateCharacterReference:Z5e(t)?qt.noncharacterCharacterReference:q5e(t)||t===Pe.CARRIAGE_RETURN?qt.controlCharacterReference:null}class Ron{constructor(e,n){this.options=e,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Be.DATA,this.returnState=Be.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Son(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new J8e(e7e,(r,i)=>{this.preprocessor.pos=this.entityStartPos+i-1,this._flushCodePointConsumedAsCharacterReference(r)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(qt.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:r=>{this._err(qt.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+r)},validateNumericCharacterReference:r=>{const i=Con(r);i&&this._err(i,1)}}:void 0)}_err(e,n=0){var r,i;(i=(r=this.handler).onParseError)===null||i===void 0||i.call(r,this.preprocessor.getError(e,n))}getCurrentLocation(e){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-e,startOffset:this.preprocessor.offset-e,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const e=this._consume();this._ensureHibernation()||this._callState(e)}this.inLoop=!1}}pause(){this.paused=!0}resume(e){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||e?.())}write(e,n,r){this.active=!0,this.preprocessor.write(e,n),this._runParsingLoop(),this.paused||r?.()}insertHtmlAtCurrentPos(e){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(e),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(e){this.consumedAfterSnapshot+=e;for(let n=0;n<e;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(e,n){return this.preprocessor.startsWith(e,n)?(this._advanceBy(e.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Sa.START_TAG,tagName:"",tagID:J.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Sa.END_TAG,tagName:"",tagID:J.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(e){this.currentToken={type:Sa.COMMENT,data:"",location:this.getCurrentLocation(e)}}_createDoctypeToken(e){this.currentToken={type:Sa.DOCTYPE,name:e,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(e,n){this.currentCharacterToken={type:e,chars:n,location:this.currentLocation}}_createAttr(e){this.currentAttr={name:e,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var e,n;const r=this.currentToken;if(K5e(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(e=(n=r.location).attrs)!==null&&e!==void 0?e:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(qt.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(e){this._emitCurrentCharacterToken(e.location),this.currentToken=null,e.location&&(e.location.endLine=this.preprocessor.line,e.location.endCol=this.preprocessor.col+1,e.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const e=this.currentToken;this.prepareToken(e),e.tagID=oO(e.tagName),e.type===Sa.START_TAG?(this.lastStartTagName=e.tagName,this.handler.onStartTag(e)):(e.attrs.length>0&&this._err(qt.endTagWithAttributes),e.selfClosing&&this._err(qt.endTagWithTrailingSolidus),this.handler.onEndTag(e)),this.preprocessor.dropParsedChunk()}emitCurrentComment(e){this.prepareToken(e),this.handler.onComment(e),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(e){this.prepareToken(e),this.handler.onDoctype(e),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(e){if(this.currentCharacterToken){switch(e&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=e.startLine,this.currentCharacterToken.location.endCol=e.startCol,this.currentCharacterToken.location.endOffset=e.startOffset),this.currentCharacterToken.type){case Sa.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Sa.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Sa.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const e=this.getCurrentLocation(0);e&&(e.endLine=e.startLine,e.endCol=e.startCol,e.endOffset=e.startOffset),this._emitCurrentCharacterToken(e),this.handler.onEof({type:Sa.EOF,location:e}),this.active=!1}_appendCharToCurrentCharacterToken(e,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===e){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(e,n)}_emitCodePoint(e){const n=Q5e(e)?Sa.WHITESPACE_CHARACTER:e===Pe.NULL?Sa.NULL_CHARACTER:Sa.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(e))}_emitChars(e){this._appendCharToCurrentCharacterToken(Sa.CHARACTER,e)}_startCharacterReference(){this.returnState=this.state,this.state=Be.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?Ure.Attribute:Ure.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===Be.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Be.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Be.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(e){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(e):this._emitCodePoint(e)}_callState(e){switch(this.state){case Be.DATA:{this._stateData(e);break}case Be.RCDATA:{this._stateRcdata(e);break}case Be.RAWTEXT:{this._stateRawtext(e);break}case Be.SCRIPT_DATA:{this._stateScriptData(e);break}case Be.PLAINTEXT:{this._statePlaintext(e);break}case Be.TAG_OPEN:{this._stateTagOpen(e);break}case Be.END_TAG_OPEN:{this._stateEndTagOpen(e);break}case Be.TAG_NAME:{this._stateTagName(e);break}case Be.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(e);break}case Be.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(e);break}case Be.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(e);break}case Be.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(e);break}case Be.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(e);break}case Be.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(e);break}case Be.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(e);break}case Be.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(e);break}case Be.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(e);break}case Be.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(e);break}case Be.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(e);break}case Be.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(e);break}case Be.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(e);break}case Be.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(e);break}case Be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(e);break}case Be.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(e);break}case Be.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(e);break}case Be.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(e);break}case Be.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(e);break}case Be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(e);break}case Be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(e);break}case Be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(e);break}case Be.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(e);break}case Be.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(e);break}case Be.ATTRIBUTE_NAME:{this._stateAttributeName(e);break}case Be.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(e);break}case Be.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(e);break}case Be.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(e);break}case Be.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(e);break}case Be.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(e);break}case Be.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(e);break}case Be.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(e);break}case Be.BOGUS_COMMENT:{this._stateBogusComment(e);break}case Be.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(e);break}case Be.COMMENT_START:{this._stateCommentStart(e);break}case Be.COMMENT_START_DASH:{this._stateCommentStartDash(e);break}case Be.COMMENT:{this._stateComment(e);break}case Be.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(e);break}case Be.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(e);break}case Be.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(e);break}case Be.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(e);break}case Be.COMMENT_END_DASH:{this._stateCommentEndDash(e);break}case Be.COMMENT_END:{this._stateCommentEnd(e);break}case Be.COMMENT_END_BANG:{this._stateCommentEndBang(e);break}case Be.DOCTYPE:{this._stateDoctype(e);break}case Be.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(e);break}case Be.DOCTYPE_NAME:{this._stateDoctypeName(e);break}case Be.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(e);break}case Be.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(e);break}case Be.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(e);break}case Be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(e);break}case Be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(e);break}case Be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(e);break}case Be.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(e);break}case Be.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(e);break}case Be.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(e);break}case Be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(e);break}case Be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(e);break}case Be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(e);break}case Be.BOGUS_DOCTYPE:{this._stateBogusDoctype(e);break}case Be.CDATA_SECTION:{this._stateCdataSection(e);break}case Be.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(e);break}case Be.CDATA_SECTION_END:{this._stateCdataSectionEnd(e);break}case Be.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case Be.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(e);break}default:throw new Error("Unknown state")}}_stateData(e){switch(e){case Pe.LESS_THAN_SIGN:{this.state=Be.TAG_OPEN;break}case Pe.AMPERSAND:{this._startCharacterReference();break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this._emitCodePoint(e);break}case Pe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRcdata(e){switch(e){case Pe.AMPERSAND:{this._startCharacterReference();break}case Pe.LESS_THAN_SIGN:{this.state=Be.RCDATA_LESS_THAN_SIGN;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this._emitChars(Gs);break}case Pe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateRawtext(e){switch(e){case Pe.LESS_THAN_SIGN:{this.state=Be.RAWTEXT_LESS_THAN_SIGN;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this._emitChars(Gs);break}case Pe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptData(e){switch(e){case Pe.LESS_THAN_SIGN:{this.state=Be.SCRIPT_DATA_LESS_THAN_SIGN;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this._emitChars(Gs);break}case Pe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_statePlaintext(e){switch(e){case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this._emitChars(Gs);break}case Pe.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateTagOpen(e){if(r_(e))this._createStartTagToken(),this.state=Be.TAG_NAME,this._stateTagName(e);else switch(e){case Pe.EXCLAMATION_MARK:{this.state=Be.MARKUP_DECLARATION_OPEN;break}case Pe.SOLIDUS:{this.state=Be.END_TAG_OPEN;break}case Pe.QUESTION_MARK:{this._err(qt.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Be.BOGUS_COMMENT,this._stateBogusComment(e);break}case Pe.EOF:{this._err(qt.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(qt.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Be.DATA,this._stateData(e)}}_stateEndTagOpen(e){if(r_(e))this._createEndTagToken(),this.state=Be.TAG_NAME,this._stateTagName(e);else switch(e){case Pe.GREATER_THAN_SIGN:{this._err(qt.missingEndTagName),this.state=Be.DATA;break}case Pe.EOF:{this._err(qt.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(qt.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Be.BOGUS_COMMENT,this._stateBogusComment(e)}}_stateTagName(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:{this.state=Be.BEFORE_ATTRIBUTE_NAME;break}case Pe.SOLIDUS:{this.state=Be.SELF_CLOSING_START_TAG;break}case Pe.GREATER_THAN_SIGN:{this.state=Be.DATA,this.emitCurrentTagToken();break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),n.tagName+=Gs;break}case Pe.EOF:{this._err(qt.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(NC(e)?YL(e):e)}}_stateRcdataLessThanSign(e){e===Pe.SOLIDUS?this.state=Be.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Be.RCDATA,this._stateRcdata(e))}_stateRcdataEndTagOpen(e){r_(e)?(this.state=Be.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(e)):(this._emitChars("</"),this.state=Be.RCDATA,this._stateRcdata(e))}handleSpecialEndTag(e){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Be.BEFORE_ATTRIBUTE_NAME,!1;case Pe.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Be.SELF_CLOSING_START_TAG,!1;case Pe.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Be.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Be.RCDATA,this._stateRcdata(e))}_stateRawtextLessThanSign(e){e===Pe.SOLIDUS?this.state=Be.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Be.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagOpen(e){r_(e)?(this.state=Be.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(e)):(this._emitChars("</"),this.state=Be.RAWTEXT,this._stateRawtext(e))}_stateRawtextEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Be.RAWTEXT,this._stateRawtext(e))}_stateScriptDataLessThanSign(e){switch(e){case Pe.SOLIDUS:{this.state=Be.SCRIPT_DATA_END_TAG_OPEN;break}case Pe.EXCLAMATION_MARK:{this.state=Be.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Be.SCRIPT_DATA,this._stateScriptData(e)}}_stateScriptDataEndTagOpen(e){r_(e)?(this.state=Be.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(e)):(this._emitChars("</"),this.state=Be.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Be.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStart(e){e===Pe.HYPHEN_MINUS?(this.state=Be.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Be.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscapeStartDash(e){e===Pe.HYPHEN_MINUS?(this.state=Be.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Be.SCRIPT_DATA,this._stateScriptData(e))}_stateScriptDataEscaped(e){switch(e){case Pe.HYPHEN_MINUS:{this.state=Be.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case Pe.LESS_THAN_SIGN:{this.state=Be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this._emitChars(Gs);break}case Pe.EOF:{this._err(qt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataEscapedDash(e){switch(e){case Pe.HYPHEN_MINUS:{this.state=Be.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case Pe.LESS_THAN_SIGN:{this.state=Be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this.state=Be.SCRIPT_DATA_ESCAPED,this._emitChars(Gs);break}case Pe.EOF:{this._err(qt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Be.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedDashDash(e){switch(e){case Pe.HYPHEN_MINUS:{this._emitChars("-");break}case Pe.LESS_THAN_SIGN:{this.state=Be.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case Pe.GREATER_THAN_SIGN:{this.state=Be.SCRIPT_DATA,this._emitChars(">");break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this.state=Be.SCRIPT_DATA_ESCAPED,this._emitChars(Gs);break}case Pe.EOF:{this._err(qt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Be.SCRIPT_DATA_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataEscapedLessThanSign(e){e===Pe.SOLIDUS?this.state=Be.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:r_(e)?(this._emitChars("<"),this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(e)):(this._emitChars("<"),this.state=Be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagOpen(e){r_(e)?(this.state=Be.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(e)):(this._emitChars("</"),this.state=Be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataEscapedEndTagName(e){this.handleSpecialEndTag(e)&&(this._emitChars("</"),this.state=Be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscapeStart(e){if(this.preprocessor.startsWith(Eh.SCRIPT,!1)&&RSe(this.preprocessor.peek(Eh.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Eh.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Be.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(e))}_stateScriptDataDoubleEscaped(e){switch(e){case Pe.HYPHEN_MINUS:{this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case Pe.LESS_THAN_SIGN:{this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this._emitChars(Gs);break}case Pe.EOF:{this._err(qt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDash(e){switch(e){case Pe.HYPHEN_MINUS:{this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case Pe.LESS_THAN_SIGN:{this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Gs);break}case Pe.EOF:{this._err(qt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedDashDash(e){switch(e){case Pe.HYPHEN_MINUS:{this._emitChars("-");break}case Pe.LESS_THAN_SIGN:{this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case Pe.GREATER_THAN_SIGN:{this.state=Be.SCRIPT_DATA,this._emitChars(">");break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Gs);break}case Pe.EOF:{this._err(qt.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(e)}}_stateScriptDataDoubleEscapedLessThanSign(e){e===Pe.SOLIDUS?(this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateScriptDataDoubleEscapeEnd(e){if(this.preprocessor.startsWith(Eh.SCRIPT,!1)&&RSe(this.preprocessor.peek(Eh.SCRIPT.length))){this._emitCodePoint(e);for(let n=0;n<Eh.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Be.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Be.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(e))}_stateBeforeAttributeName(e){switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.SOLIDUS:case Pe.GREATER_THAN_SIGN:case Pe.EOF:{this.state=Be.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case Pe.EQUALS_SIGN:{this._err(qt.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Be.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Be.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateAttributeName(e){switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:case Pe.SOLIDUS:case Pe.GREATER_THAN_SIGN:case Pe.EOF:{this._leaveAttrName(),this.state=Be.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(e);break}case Pe.EQUALS_SIGN:{this._leaveAttrName(),this.state=Be.BEFORE_ATTRIBUTE_VALUE;break}case Pe.QUOTATION_MARK:case Pe.APOSTROPHE:case Pe.LESS_THAN_SIGN:{this._err(qt.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(e);break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this.currentAttr.name+=Gs;break}default:this.currentAttr.name+=String.fromCodePoint(NC(e)?YL(e):e)}}_stateAfterAttributeName(e){switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.SOLIDUS:{this.state=Be.SELF_CLOSING_START_TAG;break}case Pe.EQUALS_SIGN:{this.state=Be.BEFORE_ATTRIBUTE_VALUE;break}case Pe.GREATER_THAN_SIGN:{this.state=Be.DATA,this.emitCurrentTagToken();break}case Pe.EOF:{this._err(qt.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Be.ATTRIBUTE_NAME,this._stateAttributeName(e)}}_stateBeforeAttributeValue(e){switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.QUOTATION_MARK:{this.state=Be.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case Pe.APOSTROPHE:{this.state=Be.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.missingAttributeValue),this.state=Be.DATA,this.emitCurrentTagToken();break}default:this.state=Be.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(e)}}_stateAttributeValueDoubleQuoted(e){switch(e){case Pe.QUOTATION_MARK:{this.state=Be.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Pe.AMPERSAND:{this._startCharacterReference();break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this.currentAttr.value+=Gs;break}case Pe.EOF:{this._err(qt.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueSingleQuoted(e){switch(e){case Pe.APOSTROPHE:{this.state=Be.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case Pe.AMPERSAND:{this._startCharacterReference();break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this.currentAttr.value+=Gs;break}case Pe.EOF:{this._err(qt.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAttributeValueUnquoted(e){switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:{this._leaveAttrValue(),this.state=Be.BEFORE_ATTRIBUTE_NAME;break}case Pe.AMPERSAND:{this._startCharacterReference();break}case Pe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Be.DATA,this.emitCurrentTagToken();break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this.currentAttr.value+=Gs;break}case Pe.QUOTATION_MARK:case Pe.APOSTROPHE:case Pe.LESS_THAN_SIGN:case Pe.EQUALS_SIGN:case Pe.GRAVE_ACCENT:{this._err(qt.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(e);break}case Pe.EOF:{this._err(qt.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(e)}}_stateAfterAttributeValueQuoted(e){switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:{this._leaveAttrValue(),this.state=Be.BEFORE_ATTRIBUTE_NAME;break}case Pe.SOLIDUS:{this._leaveAttrValue(),this.state=Be.SELF_CLOSING_START_TAG;break}case Pe.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Be.DATA,this.emitCurrentTagToken();break}case Pe.EOF:{this._err(qt.eofInTag),this._emitEOFToken();break}default:this._err(qt.missingWhitespaceBetweenAttributes),this.state=Be.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateSelfClosingStartTag(e){switch(e){case Pe.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Be.DATA,this.emitCurrentTagToken();break}case Pe.EOF:{this._err(qt.eofInTag),this._emitEOFToken();break}default:this._err(qt.unexpectedSolidusInTag),this.state=Be.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(e)}}_stateBogusComment(e){const n=this.currentToken;switch(e){case Pe.GREATER_THAN_SIGN:{this.state=Be.DATA,this.emitCurrentComment(n);break}case Pe.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),n.data+=Gs;break}default:n.data+=String.fromCodePoint(e)}}_stateMarkupDeclarationOpen(e){this._consumeSequenceIfMatch(Eh.DASH_DASH,!0)?(this._createCommentToken(Eh.DASH_DASH.length+1),this.state=Be.COMMENT_START):this._consumeSequenceIfMatch(Eh.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Eh.DOCTYPE.length+1),this.state=Be.DOCTYPE):this._consumeSequenceIfMatch(Eh.CDATA_START,!0)?this.inForeignNode?this.state=Be.CDATA_SECTION:(this._err(qt.cdataInHtmlContent),this._createCommentToken(Eh.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Be.BOGUS_COMMENT):this._ensureHibernation()||(this._err(qt.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Be.BOGUS_COMMENT,this._stateBogusComment(e))}_stateCommentStart(e){switch(e){case Pe.HYPHEN_MINUS:{this.state=Be.COMMENT_START_DASH;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.abruptClosingOfEmptyComment),this.state=Be.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Be.COMMENT,this._stateComment(e)}}_stateCommentStartDash(e){const n=this.currentToken;switch(e){case Pe.HYPHEN_MINUS:{this.state=Be.COMMENT_END;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.abruptClosingOfEmptyComment),this.state=Be.DATA,this.emitCurrentComment(n);break}case Pe.EOF:{this._err(qt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Be.COMMENT,this._stateComment(e)}}_stateComment(e){const n=this.currentToken;switch(e){case Pe.HYPHEN_MINUS:{this.state=Be.COMMENT_END_DASH;break}case Pe.LESS_THAN_SIGN:{n.data+="<",this.state=Be.COMMENT_LESS_THAN_SIGN;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),n.data+=Gs;break}case Pe.EOF:{this._err(qt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(e)}}_stateCommentLessThanSign(e){const n=this.currentToken;switch(e){case Pe.EXCLAMATION_MARK:{n.data+="!",this.state=Be.COMMENT_LESS_THAN_SIGN_BANG;break}case Pe.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Be.COMMENT,this._stateComment(e)}}_stateCommentLessThanSignBang(e){e===Pe.HYPHEN_MINUS?this.state=Be.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Be.COMMENT,this._stateComment(e))}_stateCommentLessThanSignBangDash(e){e===Pe.HYPHEN_MINUS?this.state=Be.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Be.COMMENT_END_DASH,this._stateCommentEndDash(e))}_stateCommentLessThanSignBangDashDash(e){e!==Pe.GREATER_THAN_SIGN&&e!==Pe.EOF&&this._err(qt.nestedComment),this.state=Be.COMMENT_END,this._stateCommentEnd(e)}_stateCommentEndDash(e){const n=this.currentToken;switch(e){case Pe.HYPHEN_MINUS:{this.state=Be.COMMENT_END;break}case Pe.EOF:{this._err(qt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Be.COMMENT,this._stateComment(e)}}_stateCommentEnd(e){const n=this.currentToken;switch(e){case Pe.GREATER_THAN_SIGN:{this.state=Be.DATA,this.emitCurrentComment(n);break}case Pe.EXCLAMATION_MARK:{this.state=Be.COMMENT_END_BANG;break}case Pe.HYPHEN_MINUS:{n.data+="-";break}case Pe.EOF:{this._err(qt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Be.COMMENT,this._stateComment(e)}}_stateCommentEndBang(e){const n=this.currentToken;switch(e){case Pe.HYPHEN_MINUS:{n.data+="--!",this.state=Be.COMMENT_END_DASH;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.incorrectlyClosedComment),this.state=Be.DATA,this.emitCurrentComment(n);break}case Pe.EOF:{this._err(qt.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Be.COMMENT,this._stateComment(e)}}_stateDoctype(e){switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:{this.state=Be.BEFORE_DOCTYPE_NAME;break}case Pe.GREATER_THAN_SIGN:{this.state=Be.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e);break}case Pe.EOF:{this._err(qt.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(qt.missingWhitespaceBeforeDoctypeName),this.state=Be.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(e)}}_stateBeforeDoctypeName(e){if(NC(e))this._createDoctypeToken(String.fromCharCode(YL(e))),this.state=Be.DOCTYPE_NAME;else switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.NULL:{this._err(qt.unexpectedNullCharacter),this._createDoctypeToken(Gs),this.state=Be.DOCTYPE_NAME;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Be.DATA;break}case Pe.EOF:{this._err(qt.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(e)),this.state=Be.DOCTYPE_NAME}}_stateDoctypeName(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:{this.state=Be.AFTER_DOCTYPE_NAME;break}case Pe.GREATER_THAN_SIGN:{this.state=Be.DATA,this.emitCurrentDoctype(n);break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),n.name+=Gs;break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(NC(e)?YL(e):e)}}_stateAfterDoctypeName(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.GREATER_THAN_SIGN:{this.state=Be.DATA,this.emitCurrentDoctype(n);break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Eh.PUBLIC,!1)?this.state=Be.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Eh.SYSTEM,!1)?this.state=Be.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(qt.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Be.BOGUS_DOCTYPE,this._stateBogusDoctype(e))}}_stateAfterDoctypePublicKeyword(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:{this.state=Be.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case Pe.QUOTATION_MARK:{this._err(qt.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Pe.APOSTROPHE:{this._err(qt.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Be.DATA,this.emitCurrentDoctype(n);break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(qt.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Be.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.QUOTATION_MARK:{n.publicId="",this.state=Be.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case Pe.APOSTROPHE:{n.publicId="",this.state=Be.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Be.DATA,this.emitCurrentDoctype(n);break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(qt.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Be.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypePublicIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case Pe.QUOTATION_MARK:{this.state=Be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),n.publicId+=Gs;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Be.DATA;break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateDoctypePublicIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case Pe.APOSTROPHE:{this.state=Be.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),n.publicId+=Gs;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Be.DATA;break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(e)}}_stateAfterDoctypePublicIdentifier(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:{this.state=Be.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case Pe.GREATER_THAN_SIGN:{this.state=Be.DATA,this.emitCurrentDoctype(n);break}case Pe.QUOTATION_MARK:{this._err(qt.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Pe.APOSTROPHE:{this._err(qt.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(qt.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Be.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBetweenDoctypePublicAndSystemIdentifiers(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Be.DATA;break}case Pe.QUOTATION_MARK:{n.systemId="",this.state=Be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Pe.APOSTROPHE:{n.systemId="",this.state=Be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(qt.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Be.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateAfterDoctypeSystemKeyword(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:{this.state=Be.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case Pe.QUOTATION_MARK:{this._err(qt.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Pe.APOSTROPHE:{this._err(qt.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Be.DATA,this.emitCurrentDoctype(n);break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(qt.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Be.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBeforeDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.QUOTATION_MARK:{n.systemId="",this.state=Be.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case Pe.APOSTROPHE:{n.systemId="",this.state=Be.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Be.DATA,this.emitCurrentDoctype(n);break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(qt.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Be.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateDoctypeSystemIdentifierDoubleQuoted(e){const n=this.currentToken;switch(e){case Pe.QUOTATION_MARK:{this.state=Be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),n.systemId+=Gs;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Be.DATA;break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateDoctypeSystemIdentifierSingleQuoted(e){const n=this.currentToken;switch(e){case Pe.APOSTROPHE:{this.state=Be.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter),n.systemId+=Gs;break}case Pe.GREATER_THAN_SIGN:{this._err(qt.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Be.DATA;break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(e)}}_stateAfterDoctypeSystemIdentifier(e){const n=this.currentToken;switch(e){case Pe.SPACE:case Pe.LINE_FEED:case Pe.TABULATION:case Pe.FORM_FEED:break;case Pe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Be.DATA;break}case Pe.EOF:{this._err(qt.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(qt.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Be.BOGUS_DOCTYPE,this._stateBogusDoctype(e)}}_stateBogusDoctype(e){const n=this.currentToken;switch(e){case Pe.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Be.DATA;break}case Pe.NULL:{this._err(qt.unexpectedNullCharacter);break}case Pe.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(e){switch(e){case Pe.RIGHT_SQUARE_BRACKET:{this.state=Be.CDATA_SECTION_BRACKET;break}case Pe.EOF:{this._err(qt.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(e)}}_stateCdataSectionBracket(e){e===Pe.RIGHT_SQUARE_BRACKET?this.state=Be.CDATA_SECTION_END:(this._emitChars("]"),this.state=Be.CDATA_SECTION,this._stateCdataSection(e))}_stateCdataSectionEnd(e){switch(e){case Pe.GREATER_THAN_SIGN:{this.state=Be.DATA;break}case Pe.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Be.CDATA_SECTION,this._stateCdataSection(e)}}_stateCharacterReference(){let e=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(e<0)if(this.preprocessor.lastChunkWritten)e=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}e===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(Pe.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&CSe(this.preprocessor.peek(1))?Be.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(e){CSe(e)?this._flushCodePointConsumedAsCharacterReference(e):(e===Pe.SEMICOLON&&this._err(qt.unknownNamedCharacterReference),this.state=this.returnState,this._callState(e))}}const J5e=new Set([J.DD,J.DT,J.LI,J.OPTGROUP,J.OPTION,J.P,J.RB,J.RP,J.RT,J.RTC]),MSe=new Set([...J5e,J.CAPTION,J.COLGROUP,J.TBODY,J.TD,J.TFOOT,J.TH,J.THEAD,J.TR]),RF=new Set([J.APPLET,J.CAPTION,J.HTML,J.MARQUEE,J.OBJECT,J.TABLE,J.TD,J.TEMPLATE,J.TH]),Mon=new Set([...RF,J.OL,J.UL]),Pon=new Set([...RF,J.BUTTON]),PSe=new Set([J.ANNOTATION_XML,J.MI,J.MN,J.MO,J.MS,J.MTEXT]),NSe=new Set([J.DESC,J.FOREIGN_OBJECT,J.TITLE]),Non=new Set([J.TR,J.TEMPLATE,J.HTML]),Ion=new Set([J.TBODY,J.TFOOT,J.THEAD,J.TEMPLATE,J.HTML]),Lon=new Set([J.TABLE,J.TEMPLATE,J.HTML]),kon=new Set([J.TD,J.TH]);class Don{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(e,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=J.UNKNOWN,this.current=e}_indexOf(e){return this.items.lastIndexOf(e,this.stackTop)}_isInTemplate(){return this.currentTagId===J.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fn.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(e,n){this.stackTop++,this.items[this.stackTop]=e,this.current=e,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(e,n,!0)}pop(){const e=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!0)}replace(e,n){const r=this._indexOf(e);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(e,n,r){const i=this._indexOf(e)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(e){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(e,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fn.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(e){for(;this.stackTop>=e;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<e)}}popUntilElementPopped(e){const n=this._indexOf(e);this.shortenToLength(Math.max(n,0))}popUntilPopped(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(Math.max(r,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(vK,Fn.HTML)}popUntilTableCellPopped(){this.popUntilPopped(kon,Fn.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(e,n){for(let r=this.stackTop;r>=0;r--)if(e.has(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(e,n){const r=this._indexOfTagNames(e,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Lon,Fn.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Ion,Fn.HTML)}clearBackToTableRowContext(){this.clearBackTo(Non,Fn.HTML)}remove(e){const n=this._indexOf(e);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(e,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===J.BODY?this.items[1]:null}contains(e){return this._indexOf(e)>-1}getCommonAncestor(e){const n=this._indexOf(e)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===J.HTML}hasInDynamicScope(e,n){for(let r=this.stackTop;r>=0;r--){const i=this.tagIDs[r];switch(this.treeAdapter.getNamespaceURI(this.items[r])){case Fn.HTML:{if(i===e)return!0;if(n.has(i))return!1;break}case Fn.SVG:{if(NSe.has(i))return!1;break}case Fn.MATHML:{if(PSe.has(i))return!1;break}}}return!0}hasInScope(e){return this.hasInDynamicScope(e,RF)}hasInListItemScope(e){return this.hasInDynamicScope(e,Mon)}hasInButtonScope(e){return this.hasInDynamicScope(e,Pon)}hasNumberedHeaderInScope(){for(let e=this.stackTop;e>=0;e--){const n=this.tagIDs[e];switch(this.treeAdapter.getNamespaceURI(this.items[e])){case Fn.HTML:{if(vK.has(n))return!0;if(RF.has(n))return!1;break}case Fn.SVG:{if(NSe.has(n))return!1;break}case Fn.MATHML:{if(PSe.has(n))return!1;break}}}return!0}hasInTableScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Fn.HTML)switch(this.tagIDs[n]){case e:return!0;case J.TABLE:case J.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let e=this.stackTop;e>=0;e--)if(this.treeAdapter.getNamespaceURI(this.items[e])===Fn.HTML)switch(this.tagIDs[e]){case J.TBODY:case J.THEAD:case J.TFOOT:return!0;case J.TABLE:case J.HTML:return!1}return!0}hasInSelectScope(e){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===Fn.HTML)switch(this.tagIDs[n]){case e:return!0;case J.OPTION:case J.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&J5e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&MSe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(e){for(;this.currentTagId!==void 0&&this.currentTagId!==e&&MSe.has(this.currentTagId);)this.pop()}}const zV=3;var ym;(function(t){t[t.Marker=0]="Marker",t[t.Element=1]="Element"})(ym||(ym={}));const ISe={type:ym.Marker};class Bon{constructor(e){this.treeAdapter=e,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(e,n){const r=[],i=n.length,a=this.treeAdapter.getTagName(e),o=this.treeAdapter.getNamespaceURI(e);for(let s=0;s<this.entries.length;s++){const l=this.entries[s];if(l.type===ym.Marker)break;const{element:c}=l;if(this.treeAdapter.getTagName(c)===a&&this.treeAdapter.getNamespaceURI(c)===o){const u=this.treeAdapter.getAttrList(c);u.length===i&&r.push({idx:s,attrs:u})}}return r}_ensureNoahArkCondition(e){if(this.entries.length<zV)return;const n=this.treeAdapter.getAttrList(e),r=this._getNoahArkConditionCandidates(e,n);if(r.length<zV)return;const i=new Map(n.map(o=>[o.name,o.value]));let a=0;for(let o=0;o<r.length;o++){const s=r[o];s.attrs.every(l=>i.get(l.name)===l.value)&&(a+=1,a>=zV&&this.entries.splice(s.idx,1))}}insertMarker(){this.entries.unshift(ISe)}pushElement(e,n){this._ensureNoahArkCondition(e),this.entries.unshift({type:ym.Element,element:e,token:n})}insertElementAfterBookmark(e,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:ym.Element,element:e,token:n})}removeEntry(e){const n=this.entries.indexOf(e);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const e=this.entries.indexOf(ISe);e===-1?this.entries.length=0:this.entries.splice(0,e+1)}getElementEntryInScopeWithTagName(e){const n=this.entries.find(r=>r.type===ym.Marker||this.treeAdapter.getTagName(r.element)===e);return n&&n.type===ym.Element?n:null}getElementEntry(e){return this.entries.find(n=>n.type===ym.Element&&n.element===e)}}const i_={createDocument(){return{nodeName:"#document",mode:Pp.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},createCommentNode(t){return{nodeName:"#comment",data:t,parentNode:null}},createTextNode(t){return{nodeName:"#text",value:t,parentNode:null}},appendChild(t,e){t.childNodes.push(e),e.parentNode=t},insertBefore(t,e,n){const r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t},setTemplateContent(t,e){t.content=e},getTemplateContent(t){return t.content},setDocumentType(t,e,n,r){const i=t.childNodes.find(a=>a.nodeName==="#documentType");if(i)i.name=e,i.publicId=n,i.systemId=r;else{const a={nodeName:"#documentType",name:e,publicId:n,systemId:r,parentNode:null};i_.appendChild(t,a)}},setDocumentMode(t,e){t.mode=e},getDocumentMode(t){return t.mode},detachNode(t){if(t.parentNode){const e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},insertText(t,e){if(t.childNodes.length>0){const n=t.childNodes[t.childNodes.length-1];if(i_.isTextNode(n)){n.value+=e;return}}i_.appendChild(t,i_.createTextNode(e))},insertTextBefore(t,e,n){const r=t.childNodes[t.childNodes.indexOf(n)-1];r&&i_.isTextNode(r)?r.value+=e:i_.insertBefore(t,i_.createTextNode(e),n)},adoptAttributes(t,e){const n=new Set(t.attrs.map(r=>r.name));for(let r=0;r<e.length;r++)n.has(e[r].name)||t.attrs.push(e[r])},getFirstChild(t){return t.childNodes[0]},getChildNodes(t){return t.childNodes},getParentNode(t){return t.parentNode},getAttrList(t){return t.attrs},getTagName(t){return t.tagName},getNamespaceURI(t){return t.namespaceURI},getTextNodeContent(t){return t.value},getCommentNodeContent(t){return t.data},getDocumentTypeNodeName(t){return t.name},getDocumentTypeNodePublicId(t){return t.publicId},getDocumentTypeNodeSystemId(t){return t.systemId},isTextNode(t){return t.nodeName==="#text"},isCommentNode(t){return t.nodeName==="#comment"},isDocumentTypeNode(t){return t.nodeName==="#documentType"},isElementNode(t){return Object.prototype.hasOwnProperty.call(t,"tagName")},setNodeSourceCodeLocation(t,e){t.sourceCodeLocation=e},getNodeSourceCodeLocation(t){return t.sourceCodeLocation},updateNodeSourceCodeLocation(t,e){t.sourceCodeLocation={...t.sourceCodeLocation,...e}}},e8e="html",Fon="about:legacy-compat",Uon="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",t8e=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],jon=[...t8e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],zon=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),n8e=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],$on=[...n8e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function LSe(t,e){return e.some(n=>t.startsWith(n))}function Hon(t){return t.name===e8e&&t.publicId===null&&(t.systemId===null||t.systemId===Fon)}function Gon(t){if(t.name!==e8e)return Pp.QUIRKS;const{systemId:e}=t;if(e&&e.toLowerCase()===Uon)return Pp.QUIRKS;let{publicId:n}=t;if(n!==null){if(n=n.toLowerCase(),zon.has(n))return Pp.QUIRKS;let r=e===null?jon:t8e;if(LSe(n,r))return Pp.QUIRKS;if(r=e===null?n8e:$on,LSe(n,r))return Pp.LIMITED_QUIRKS}return Pp.NO_QUIRKS}const kSe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Won="definitionurl",Von="definitionURL",Yon=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(t=>[t.toLowerCase(),t])),Xon=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fn.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fn.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fn.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fn.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fn.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fn.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fn.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fn.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fn.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fn.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fn.XMLNS}]]),qon=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(t=>[t.toLowerCase(),t])),Zon=new Set([J.B,J.BIG,J.BLOCKQUOTE,J.BODY,J.BR,J.CENTER,J.CODE,J.DD,J.DIV,J.DL,J.DT,J.EM,J.EMBED,J.H1,J.H2,J.H3,J.H4,J.H5,J.H6,J.HEAD,J.HR,J.I,J.IMG,J.LI,J.LISTING,J.MENU,J.META,J.NOBR,J.OL,J.P,J.PRE,J.RUBY,J.S,J.SMALL,J.SPAN,J.STRONG,J.STRIKE,J.SUB,J.SUP,J.TABLE,J.TT,J.U,J.UL,J.VAR]);function Kon(t){const e=t.tagID;return e===J.FONT&&t.attrs.some(({name:r})=>r===lx.COLOR||r===lx.SIZE||r===lx.FACE)||Zon.has(e)}function r8e(t){for(let e=0;e<t.attrs.length;e++)if(t.attrs[e].name===Won){t.attrs[e].name=Von;break}}function i8e(t){for(let e=0;e<t.attrs.length;e++){const n=Yon.get(t.attrs[e].name);n!=null&&(t.attrs[e].name=n)}}function Mre(t){for(let e=0;e<t.attrs.length;e++){const n=Xon.get(t.attrs[e].name);n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}}function Qon(t){const e=qon.get(t.tagName);e!=null&&(t.tagName=e,t.tagID=oO(t.tagName))}function Jon(t,e){return e===Fn.MATHML&&(t===J.MI||t===J.MO||t===J.MN||t===J.MS||t===J.MTEXT)}function esn(t,e,n){if(e===Fn.MATHML&&t===J.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===lx.ENCODING){const i=n[r].value.toLowerCase();return i===kSe.TEXT_HTML||i===kSe.APPLICATION_XML}}return e===Fn.SVG&&(t===J.FOREIGN_OBJECT||t===J.DESC||t===J.TITLE)}function tsn(t,e,n,r){return(!r||r===Fn.HTML)&&esn(t,e,n)||(!r||r===Fn.MATHML)&&Jon(t,e)}const nsn="hidden",rsn=8,isn=3;var We;(function(t){t[t.INITIAL=0]="INITIAL",t[t.BEFORE_HTML=1]="BEFORE_HTML",t[t.BEFORE_HEAD=2]="BEFORE_HEAD",t[t.IN_HEAD=3]="IN_HEAD",t[t.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",t[t.AFTER_HEAD=5]="AFTER_HEAD",t[t.IN_BODY=6]="IN_BODY",t[t.TEXT=7]="TEXT",t[t.IN_TABLE=8]="IN_TABLE",t[t.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",t[t.IN_CAPTION=10]="IN_CAPTION",t[t.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",t[t.IN_TABLE_BODY=12]="IN_TABLE_BODY",t[t.IN_ROW=13]="IN_ROW",t[t.IN_CELL=14]="IN_CELL",t[t.IN_SELECT=15]="IN_SELECT",t[t.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",t[t.IN_TEMPLATE=17]="IN_TEMPLATE",t[t.AFTER_BODY=18]="AFTER_BODY",t[t.IN_FRAMESET=19]="IN_FRAMESET",t[t.AFTER_FRAMESET=20]="AFTER_FRAMESET",t[t.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",t[t.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(We||(We={}));const asn={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},a8e=new Set([J.TABLE,J.TBODY,J.TFOOT,J.THEAD,J.TR]),DSe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:i_,onParseError:null};class BSe{constructor(e,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=We.INITIAL,this.originalInsertionMode=We.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...DSe,...e},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Ron(this.options,this),this.activeFormattingElements=new Bon(this.treeAdapter),this.fragmentContextID=r?oO(this.treeAdapter.getTagName(r)):J.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Don(this.document,this.treeAdapter,this)}static parse(e,n){const r=new this(n);return r.tokenizer.write(e,!0),r.document}static getFragmentParser(e,n){const r={...DSe,...n};e??(e=r.treeAdapter.createElement(Tt.TEMPLATE,Fn.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fn.HTML,[]),a=new this(r,i,e);return a.fragmentContextID===J.TEMPLATE&&a.tmplInsertionModeStack.unshift(We.IN_TEMPLATE),a._initTokenizerForFragmentParsing(),a._insertFakeRootElement(),a._resetInsertionMode(),a._findFormInFragmentContext(),a}getFragment(){const e=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(e,n),n}_err(e,n,r){var i;if(!this.onParseError)return;const a=(i=e.location)!==null&&i!==void 0?i:asn,o={code:n,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:r?a.startLine:a.endLine,endCol:r?a.startCol:a.endCol,endOffset:r?a.startOffset:a.endOffset};this.onParseError(o)}onItemPush(e,n,r){var i,a;(a=(i=this.treeAdapter).onItemPush)===null||a===void 0||a.call(i,e),r&&this.openElements.stackTop>0&&this._setContextModes(e,n)}onItemPop(e,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(e,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,e,this.openElements.current),n){let a,o;this.openElements.stackTop===0&&this.fragmentContext?(a=this.fragmentContext,o=this.fragmentContextID):{current:a,currentTagId:o}=this.openElements,this._setContextModes(a,o)}}_setContextModes(e,n){const r=e===this.document||e&&this.treeAdapter.getNamespaceURI(e)===Fn.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&e!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,e)}_switchToTextParsing(e,n){this._insertElement(e,Fn.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=We.TEXT}switchToPlaintextParsing(){this.insertionMode=We.TEXT,this.originalInsertionMode=We.IN_BODY,this.tokenizer.state=Xl.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let e=this.fragmentContext;for(;e;){if(this.treeAdapter.getTagName(e)===Tt.FORM){this.formElement=e;break}e=this.treeAdapter.getParentNode(e)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fn.HTML))switch(this.fragmentContextID){case J.TITLE:case J.TEXTAREA:{this.tokenizer.state=Xl.RCDATA;break}case J.STYLE:case J.XMP:case J.IFRAME:case J.NOEMBED:case J.NOFRAMES:case J.NOSCRIPT:{this.tokenizer.state=Xl.RAWTEXT;break}case J.SCRIPT:{this.tokenizer.state=Xl.SCRIPT_DATA;break}case J.PLAINTEXT:{this.tokenizer.state=Xl.PLAINTEXT;break}}}_setDocumentType(e){const n=e.name||"",r=e.publicId||"",i=e.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),e.location){const o=this.treeAdapter.getChildNodes(this.document).find(s=>this.treeAdapter.isDocumentTypeNode(s));o&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}}_attachElementToTree(e,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(e,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(e);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r??this.document,e)}}_appendElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location)}_insertElement(e,n){const r=this.treeAdapter.createElement(e.tagName,n,e.attrs);this._attachElementToTree(r,e.location),this.openElements.push(r,e.tagID)}_insertFakeElement(e,n){const r=this.treeAdapter.createElement(e,Fn.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(e){const n=this.treeAdapter.createElement(e.tagName,Fn.HTML,e.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,e.location),this.openElements.push(n,e.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const e=this.treeAdapter.createElement(Tt.HTML,Fn.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(e,null),this.treeAdapter.appendChild(this.openElements.current,e),this.openElements.push(e,J.HTML)}_appendCommentNode(e,n){const r=this.treeAdapter.createCommentNode(e.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,e.location)}_insertCharacters(e){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,e.chars,r):this.treeAdapter.insertText(n,e.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,e.chars)),!e.location)return;const i=this.treeAdapter.getChildNodes(n),a=r?i.lastIndexOf(r):i.length,o=i[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:c,endOffset:u}=e.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:c,endOffset:u})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,e.location)}_adoptNodes(e,n){for(let r=this.treeAdapter.getFirstChild(e);r;r=this.treeAdapter.getFirstChild(e))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(e,n){if(this.treeAdapter.getNodeSourceCodeLocation(e)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(e),a=n.type===Sa.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(e,a)}}shouldProcessStartTagTokenInForeignContent(e){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,e.tagID===J.SVG&&this.treeAdapter.getTagName(n)===Tt.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fn.MATHML?!1:this.tokenizer.inForeignNode||(e.tagID===J.MGLYPH||e.tagID===J.MALIGNMARK)&&r!==void 0&&!this._isIntegrationPoint(r,n,Fn.HTML)}_processToken(e){switch(e.type){case Sa.CHARACTER:{this.onCharacter(e);break}case Sa.NULL_CHARACTER:{this.onNullCharacter(e);break}case Sa.COMMENT:{this.onComment(e);break}case Sa.DOCTYPE:{this.onDoctype(e);break}case Sa.START_TAG:{this._processStartTag(e);break}case Sa.END_TAG:{this.onEndTag(e);break}case Sa.EOF:{this.onEof(e);break}case Sa.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(e);break}}}_isIntegrationPoint(e,n,r){const i=this.treeAdapter.getNamespaceURI(n),a=this.treeAdapter.getAttrList(n);return tsn(e,i,a,r)}_reconstructActiveFormattingElements(){const e=this.activeFormattingElements.entries.length;if(e){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===ym.Marker||this.openElements.contains(i.element)),r=n===-1?e-1:n-1;for(let i=r;i>=0;i--){const a=this.activeFormattingElements.entries[i];this._insertElement(a.token,this.treeAdapter.getNamespaceURI(a.element)),a.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=We.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(J.P),this.openElements.popUntilTagNamePopped(J.P)}_resetInsertionMode(){for(let e=this.openElements.stackTop;e>=0;e--)switch(e===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[e]){case J.TR:{this.insertionMode=We.IN_ROW;return}case J.TBODY:case J.THEAD:case J.TFOOT:{this.insertionMode=We.IN_TABLE_BODY;return}case J.CAPTION:{this.insertionMode=We.IN_CAPTION;return}case J.COLGROUP:{this.insertionMode=We.IN_COLUMN_GROUP;return}case J.TABLE:{this.insertionMode=We.IN_TABLE;return}case J.BODY:{this.insertionMode=We.IN_BODY;return}case J.FRAMESET:{this.insertionMode=We.IN_FRAMESET;return}case J.SELECT:{this._resetInsertionModeForSelect(e);return}case J.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case J.HTML:{this.insertionMode=this.headElement?We.AFTER_HEAD:We.BEFORE_HEAD;return}case J.TD:case J.TH:{if(e>0){this.insertionMode=We.IN_CELL;return}break}case J.HEAD:{if(e>0){this.insertionMode=We.IN_HEAD;return}break}}this.insertionMode=We.IN_BODY}_resetInsertionModeForSelect(e){if(e>0)for(let n=e-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===J.TEMPLATE)break;if(r===J.TABLE){this.insertionMode=We.IN_SELECT_IN_TABLE;return}}this.insertionMode=We.IN_SELECT}_isElementCausesFosterParenting(e){return a8e.has(e)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let e=this.openElements.stackTop;e>=0;e--){const n=this.openElements.items[e];switch(this.openElements.tagIDs[e]){case J.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fn.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case J.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[e-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(e){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,e,n.beforeElement):this.treeAdapter.appendChild(n.parent,e)}_isSpecialElement(e,n){const r=this.treeAdapter.getNamespaceURI(e);return Aon[r].has(n)}onCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){kln(this,e);return}switch(this.insertionMode){case We.INITIAL:{X2(this,e);break}case We.BEFORE_HTML:{pR(this,e);break}case We.BEFORE_HEAD:{gR(this,e);break}case We.IN_HEAD:{vR(this,e);break}case We.IN_HEAD_NO_SCRIPT:{mR(this,e);break}case We.AFTER_HEAD:{yR(this,e);break}case We.IN_BODY:case We.IN_CAPTION:case We.IN_CELL:case We.IN_TEMPLATE:{s8e(this,e);break}case We.TEXT:case We.IN_SELECT:case We.IN_SELECT_IN_TABLE:{this._insertCharacters(e);break}case We.IN_TABLE:case We.IN_TABLE_BODY:case We.IN_ROW:{$V(this,e);break}case We.IN_TABLE_TEXT:{d8e(this,e);break}case We.IN_COLUMN_GROUP:{MF(this,e);break}case We.AFTER_BODY:{PF(this,e);break}case We.AFTER_AFTER_BODY:{Xk(this,e);break}}}onNullCharacter(e){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Lln(this,e);return}switch(this.insertionMode){case We.INITIAL:{X2(this,e);break}case We.BEFORE_HTML:{pR(this,e);break}case We.BEFORE_HEAD:{gR(this,e);break}case We.IN_HEAD:{vR(this,e);break}case We.IN_HEAD_NO_SCRIPT:{mR(this,e);break}case We.AFTER_HEAD:{yR(this,e);break}case We.TEXT:{this._insertCharacters(e);break}case We.IN_TABLE:case We.IN_TABLE_BODY:case We.IN_ROW:{$V(this,e);break}case We.IN_COLUMN_GROUP:{MF(this,e);break}case We.AFTER_BODY:{PF(this,e);break}case We.AFTER_AFTER_BODY:{Xk(this,e);break}}}onComment(e){if(this.skipNextNewLine=!1,this.currentNotInHTML){mK(this,e);return}switch(this.insertionMode){case We.INITIAL:case We.BEFORE_HTML:case We.BEFORE_HEAD:case We.IN_HEAD:case We.IN_HEAD_NO_SCRIPT:case We.AFTER_HEAD:case We.IN_BODY:case We.IN_TABLE:case We.IN_CAPTION:case We.IN_COLUMN_GROUP:case We.IN_TABLE_BODY:case We.IN_ROW:case We.IN_CELL:case We.IN_SELECT:case We.IN_SELECT_IN_TABLE:case We.IN_TEMPLATE:case We.IN_FRAMESET:case We.AFTER_FRAMESET:{mK(this,e);break}case We.IN_TABLE_TEXT:{q2(this,e);break}case We.AFTER_BODY:{hsn(this,e);break}case We.AFTER_AFTER_BODY:case We.AFTER_AFTER_FRAMESET:{dsn(this,e);break}}}onDoctype(e){switch(this.skipNextNewLine=!1,this.insertionMode){case We.INITIAL:{psn(this,e);break}case We.BEFORE_HEAD:case We.IN_HEAD:case We.IN_HEAD_NO_SCRIPT:case We.AFTER_HEAD:{this._err(e,qt.misplacedDoctype);break}case We.IN_TABLE_TEXT:{q2(this,e);break}}}onStartTag(e){this.skipNextNewLine=!1,this.currentToken=e,this._processStartTag(e),e.selfClosing&&!e.ackSelfClosing&&this._err(e,qt.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(e){this.shouldProcessStartTagTokenInForeignContent(e)?Dln(this,e):this._startTagOutsideForeignContent(e)}_startTagOutsideForeignContent(e){switch(this.insertionMode){case We.INITIAL:{X2(this,e);break}case We.BEFORE_HTML:{gsn(this,e);break}case We.BEFORE_HEAD:{msn(this,e);break}case We.IN_HEAD:{fv(this,e);break}case We.IN_HEAD_NO_SCRIPT:{bsn(this,e);break}case We.AFTER_HEAD:{xsn(this,e);break}case We.IN_BODY:{pf(this,e);break}case We.IN_TABLE:{Ew(this,e);break}case We.IN_TABLE_TEXT:{q2(this,e);break}case We.IN_CAPTION:{yln(this,e);break}case We.IN_COLUMN_GROUP:{Ire(this,e);break}case We.IN_TABLE_BODY:{X5(this,e);break}case We.IN_ROW:{q5(this,e);break}case We.IN_CELL:{Eln(this,e);break}case We.IN_SELECT:{v8e(this,e);break}case We.IN_SELECT_IN_TABLE:{Sln(this,e);break}case We.IN_TEMPLATE:{Aln(this,e);break}case We.AFTER_BODY:{Oln(this,e);break}case We.IN_FRAMESET:{Cln(this,e);break}case We.AFTER_FRAMESET:{Mln(this,e);break}case We.AFTER_AFTER_BODY:{Nln(this,e);break}case We.AFTER_AFTER_FRAMESET:{Iln(this,e);break}}}onEndTag(e){this.skipNextNewLine=!1,this.currentToken=e,this.currentNotInHTML?Bln(this,e):this._endTagOutsideForeignContent(e)}_endTagOutsideForeignContent(e){switch(this.insertionMode){case We.INITIAL:{X2(this,e);break}case We.BEFORE_HTML:{vsn(this,e);break}case We.BEFORE_HEAD:{ysn(this,e);break}case We.IN_HEAD:{_sn(this,e);break}case We.IN_HEAD_NO_SCRIPT:{Esn(this,e);break}case We.AFTER_HEAD:{Ssn(this,e);break}case We.IN_BODY:{Y5(this,e);break}case We.TEXT:{lln(this,e);break}case We.IN_TABLE:{pP(this,e);break}case We.IN_TABLE_TEXT:{q2(this,e);break}case We.IN_CAPTION:{_ln(this,e);break}case We.IN_COLUMN_GROUP:{bln(this,e);break}case We.IN_TABLE_BODY:{yK(this,e);break}case We.IN_ROW:{g8e(this,e);break}case We.IN_CELL:{xln(this,e);break}case We.IN_SELECT:{m8e(this,e);break}case We.IN_SELECT_IN_TABLE:{Tln(this,e);break}case We.IN_TEMPLATE:{wln(this,e);break}case We.AFTER_BODY:{_8e(this,e);break}case We.IN_FRAMESET:{Rln(this,e);break}case We.AFTER_FRAMESET:{Pln(this,e);break}case We.AFTER_AFTER_BODY:{Xk(this,e);break}}}onEof(e){switch(this.insertionMode){case We.INITIAL:{X2(this,e);break}case We.BEFORE_HTML:{pR(this,e);break}case We.BEFORE_HEAD:{gR(this,e);break}case We.IN_HEAD:{vR(this,e);break}case We.IN_HEAD_NO_SCRIPT:{mR(this,e);break}case We.AFTER_HEAD:{yR(this,e);break}case We.IN_BODY:case We.IN_TABLE:case We.IN_CAPTION:case We.IN_COLUMN_GROUP:case We.IN_TABLE_BODY:case We.IN_ROW:case We.IN_CELL:case We.IN_SELECT:case We.IN_SELECT_IN_TABLE:{f8e(this,e);break}case We.TEXT:{cln(this,e);break}case We.IN_TABLE_TEXT:{q2(this,e);break}case We.IN_TEMPLATE:{y8e(this,e);break}case We.AFTER_BODY:case We.IN_FRAMESET:case We.AFTER_FRAMESET:case We.AFTER_AFTER_BODY:case We.AFTER_AFTER_FRAMESET:{Nre(this,e);break}}}onWhitespaceCharacter(e){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.chars.charCodeAt(0)===Pe.LINE_FEED)){if(e.chars.length===1)return;e.chars=e.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(e);return}switch(this.insertionMode){case We.IN_HEAD:case We.IN_HEAD_NO_SCRIPT:case We.AFTER_HEAD:case We.TEXT:case We.IN_COLUMN_GROUP:case We.IN_SELECT:case We.IN_SELECT_IN_TABLE:case We.IN_FRAMESET:case We.AFTER_FRAMESET:{this._insertCharacters(e);break}case We.IN_BODY:case We.IN_CAPTION:case We.IN_CELL:case We.IN_TEMPLATE:case We.AFTER_BODY:case We.AFTER_AFTER_BODY:case We.AFTER_AFTER_FRAMESET:{o8e(this,e);break}case We.IN_TABLE:case We.IN_TABLE_BODY:case We.IN_ROW:{$V(this,e);break}case We.IN_TABLE_TEXT:{h8e(this,e);break}}}}function osn(t,e){let n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagID)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):u8e(t,e),n}function ssn(t,e){let n=null,r=t.openElements.stackTop;for(;r>=0;r--){const i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i,t.openElements.tagIDs[r])&&(n=i)}return n||(t.openElements.shortenToLength(Math.max(r,0)),t.activeFormattingElements.removeEntry(e)),n}function lsn(t,e,n){let r=e,i=t.openElements.getCommonAncestor(e);for(let a=0,o=i;o!==n;a++,o=i){i=t.openElements.getCommonAncestor(o);const s=t.activeFormattingElements.getElementEntry(o),l=s&&a>=isn;!s||l?(l&&t.activeFormattingElements.removeEntry(s),t.openElements.remove(o)):(o=csn(t,s),r===e&&(t.activeFormattingElements.bookmark=s),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(o,r),r=o)}return r}function csn(t,e){const n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function usn(t,e,n){const r=t.treeAdapter.getTagName(e),i=oO(r);if(t._isElementCausesFosterParenting(i))t._fosterParentElement(n);else{const a=t.treeAdapter.getNamespaceURI(e);i===J.TEMPLATE&&a===Fn.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function fsn(t,e,n){const r=t.treeAdapter.getNamespaceURI(n.element),{token:i}=n,a=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,a),t.treeAdapter.appendChild(e,a),t.activeFormattingElements.insertElementAfterBookmark(a,i),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,a,i.tagID)}function Pre(t,e){for(let n=0;n<rsn;n++){const r=osn(t,e);if(!r)break;const i=ssn(t,r);if(!i)break;t.activeFormattingElements.bookmark=r;const a=lsn(t,i,r.element),o=t.openElements.getCommonAncestor(r.element);t.treeAdapter.detachNode(a),o&&usn(t,o,a),fsn(t,i,r)}}function mK(t,e){t._appendCommentNode(e,t.openElements.currentTmplContentOrNode)}function hsn(t,e){t._appendCommentNode(e,t.openElements.items[0])}function dsn(t,e){t._appendCommentNode(e,t.document)}function Nre(t,e){if(t.stopped=!0,e.location){const n=t.fragmentContext?0:2;for(let r=t.openElements.stackTop;r>=n;r--)t._setEndLocation(t.openElements.items[r],e);if(!t.fragmentContext&&t.openElements.stackTop>=0){const r=t.openElements.items[0],i=t.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(t._setEndLocation(r,e),t.openElements.stackTop>=1)){const a=t.openElements.items[1],o=t.treeAdapter.getNodeSourceCodeLocation(a);o&&!o.endTag&&t._setEndLocation(a,e)}}}}function psn(t,e){t._setDocumentType(e);const n=e.forceQuirks?Pp.QUIRKS:Gon(e);Hon(e)||t._err(e,qt.nonConformingDoctype),t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=We.BEFORE_HTML}function X2(t,e){t._err(e,qt.missingDoctype,!0),t.treeAdapter.setDocumentMode(t.document,Pp.QUIRKS),t.insertionMode=We.BEFORE_HTML,t._processToken(e)}function gsn(t,e){e.tagID===J.HTML?(t._insertElement(e,Fn.HTML),t.insertionMode=We.BEFORE_HEAD):pR(t,e)}function vsn(t,e){const n=e.tagID;(n===J.HTML||n===J.HEAD||n===J.BODY||n===J.BR)&&pR(t,e)}function pR(t,e){t._insertFakeRootElement(),t.insertionMode=We.BEFORE_HEAD,t._processToken(e)}function msn(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.HEAD:{t._insertElement(e,Fn.HTML),t.headElement=t.openElements.current,t.insertionMode=We.IN_HEAD;break}default:gR(t,e)}}function ysn(t,e){const n=e.tagID;n===J.HEAD||n===J.BODY||n===J.HTML||n===J.BR?gR(t,e):t._err(e,qt.endTagWithoutMatchingOpenElement)}function gR(t,e){t._insertFakeElement(Tt.HEAD,J.HEAD),t.headElement=t.openElements.current,t.insertionMode=We.IN_HEAD,t._processToken(e)}function fv(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.BASE:case J.BASEFONT:case J.BGSOUND:case J.LINK:case J.META:{t._appendElement(e,Fn.HTML),e.ackSelfClosing=!0;break}case J.TITLE:{t._switchToTextParsing(e,Xl.RCDATA);break}case J.NOSCRIPT:{t.options.scriptingEnabled?t._switchToTextParsing(e,Xl.RAWTEXT):(t._insertElement(e,Fn.HTML),t.insertionMode=We.IN_HEAD_NO_SCRIPT);break}case J.NOFRAMES:case J.STYLE:{t._switchToTextParsing(e,Xl.RAWTEXT);break}case J.SCRIPT:{t._switchToTextParsing(e,Xl.SCRIPT_DATA);break}case J.TEMPLATE:{t._insertTemplate(e),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=We.IN_TEMPLATE,t.tmplInsertionModeStack.unshift(We.IN_TEMPLATE);break}case J.HEAD:{t._err(e,qt.misplacedStartTagForHeadElement);break}default:vR(t,e)}}function _sn(t,e){switch(e.tagID){case J.HEAD:{t.openElements.pop(),t.insertionMode=We.AFTER_HEAD;break}case J.BODY:case J.BR:case J.HTML:{vR(t,e);break}case J.TEMPLATE:{lS(t,e);break}default:t._err(e,qt.endTagWithoutMatchingOpenElement)}}function lS(t,e){t.openElements.tmplCount>0?(t.openElements.generateImpliedEndTagsThoroughly(),t.openElements.currentTagId!==J.TEMPLATE&&t._err(e,qt.closingOfElementWithOpenChildElements),t.openElements.popUntilTagNamePopped(J.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode()):t._err(e,qt.endTagWithoutMatchingOpenElement)}function vR(t,e){t.openElements.pop(),t.insertionMode=We.AFTER_HEAD,t._processToken(e)}function bsn(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.BASEFONT:case J.BGSOUND:case J.HEAD:case J.LINK:case J.META:case J.NOFRAMES:case J.STYLE:{fv(t,e);break}case J.NOSCRIPT:{t._err(e,qt.nestedNoscriptInHead);break}default:mR(t,e)}}function Esn(t,e){switch(e.tagID){case J.NOSCRIPT:{t.openElements.pop(),t.insertionMode=We.IN_HEAD;break}case J.BR:{mR(t,e);break}default:t._err(e,qt.endTagWithoutMatchingOpenElement)}}function mR(t,e){const n=e.type===Sa.EOF?qt.openElementsLeftAfterEof:qt.disallowedContentInNoscriptInHead;t._err(e,n),t.openElements.pop(),t.insertionMode=We.IN_HEAD,t._processToken(e)}function xsn(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.BODY:{t._insertElement(e,Fn.HTML),t.framesetOk=!1,t.insertionMode=We.IN_BODY;break}case J.FRAMESET:{t._insertElement(e,Fn.HTML),t.insertionMode=We.IN_FRAMESET;break}case J.BASE:case J.BASEFONT:case J.BGSOUND:case J.LINK:case J.META:case J.NOFRAMES:case J.SCRIPT:case J.STYLE:case J.TEMPLATE:case J.TITLE:{t._err(e,qt.abandonedHeadElementChild),t.openElements.push(t.headElement,J.HEAD),fv(t,e),t.openElements.remove(t.headElement);break}case J.HEAD:{t._err(e,qt.misplacedStartTagForHeadElement);break}default:yR(t,e)}}function Ssn(t,e){switch(e.tagID){case J.BODY:case J.HTML:case J.BR:{yR(t,e);break}case J.TEMPLATE:{lS(t,e);break}default:t._err(e,qt.endTagWithoutMatchingOpenElement)}}function yR(t,e){t._insertFakeElement(Tt.BODY,J.BODY),t.insertionMode=We.IN_BODY,V5(t,e)}function V5(t,e){switch(e.type){case Sa.CHARACTER:{s8e(t,e);break}case Sa.WHITESPACE_CHARACTER:{o8e(t,e);break}case Sa.COMMENT:{mK(t,e);break}case Sa.START_TAG:{pf(t,e);break}case Sa.END_TAG:{Y5(t,e);break}case Sa.EOF:{f8e(t,e);break}}}function o8e(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function s8e(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function Tsn(t,e){t.openElements.tmplCount===0&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}function Asn(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t.openElements.tmplCount===0&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}function wsn(t,e){const n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,Fn.HTML),t.insertionMode=We.IN_FRAMESET)}function Osn(t,e){t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t._insertElement(e,Fn.HTML)}function Csn(t,e){t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t.openElements.currentTagId!==void 0&&vK.has(t.openElements.currentTagId)&&t.openElements.pop(),t._insertElement(e,Fn.HTML)}function Rsn(t,e){t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t._insertElement(e,Fn.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function Msn(t,e){const n=t.openElements.tmplCount>0;(!t.formElement||n)&&(t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t._insertElement(e,Fn.HTML),n||(t.formElement=t.openElements.current))}function Psn(t,e){t.framesetOk=!1;const n=e.tagID;for(let r=t.openElements.stackTop;r>=0;r--){const i=t.openElements.tagIDs[r];if(n===J.LI&&i===J.LI||(n===J.DD||n===J.DT)&&(i===J.DD||i===J.DT)){t.openElements.generateImpliedEndTagsWithExclusion(i),t.openElements.popUntilTagNamePopped(i);break}if(i!==J.ADDRESS&&i!==J.DIV&&i!==J.P&&t._isSpecialElement(t.openElements.items[r],i))break}t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t._insertElement(e,Fn.HTML)}function Nsn(t,e){t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t._insertElement(e,Fn.HTML),t.tokenizer.state=Xl.PLAINTEXT}function Isn(t,e){t.openElements.hasInScope(J.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(J.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,Fn.HTML),t.framesetOk=!1}function Lsn(t,e){const n=t.activeFormattingElements.getElementEntryInScopeWithTagName(Tt.A);n&&(Pre(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,Fn.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function ksn(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Fn.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Dsn(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(J.NOBR)&&(Pre(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,Fn.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function Bsn(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Fn.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function Fsn(t,e){t.treeAdapter.getDocumentMode(t.document)!==Pp.QUIRKS&&t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t._insertElement(e,Fn.HTML),t.framesetOk=!1,t.insertionMode=We.IN_TABLE}function l8e(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Fn.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function c8e(t){const e=K5e(t,lx.TYPE);return e!=null&&e.toLowerCase()===nsn}function Usn(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,Fn.HTML),c8e(e)||(t.framesetOk=!1),e.ackSelfClosing=!0}function jsn(t,e){t._appendElement(e,Fn.HTML),e.ackSelfClosing=!0}function zsn(t,e){t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t._appendElement(e,Fn.HTML),t.framesetOk=!1,e.ackSelfClosing=!0}function $sn(t,e){e.tagName=Tt.IMG,e.tagID=J.IMG,l8e(t,e)}function Hsn(t,e){t._insertElement(e,Fn.HTML),t.skipNextNewLine=!0,t.tokenizer.state=Xl.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=We.TEXT}function Gsn(t,e){t.openElements.hasInButtonScope(J.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,Xl.RAWTEXT)}function Wsn(t,e){t.framesetOk=!1,t._switchToTextParsing(e,Xl.RAWTEXT)}function FSe(t,e){t._switchToTextParsing(e,Xl.RAWTEXT)}function Vsn(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Fn.HTML),t.framesetOk=!1,t.insertionMode=t.insertionMode===We.IN_TABLE||t.insertionMode===We.IN_CAPTION||t.insertionMode===We.IN_TABLE_BODY||t.insertionMode===We.IN_ROW||t.insertionMode===We.IN_CELL?We.IN_SELECT_IN_TABLE:We.IN_SELECT}function Ysn(t,e){t.openElements.currentTagId===J.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,Fn.HTML)}function Xsn(t,e){t.openElements.hasInScope(J.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,Fn.HTML)}function qsn(t,e){t.openElements.hasInScope(J.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(J.RTC),t._insertElement(e,Fn.HTML)}function Zsn(t,e){t._reconstructActiveFormattingElements(),r8e(e),Mre(e),e.selfClosing?t._appendElement(e,Fn.MATHML):t._insertElement(e,Fn.MATHML),e.ackSelfClosing=!0}function Ksn(t,e){t._reconstructActiveFormattingElements(),i8e(e),Mre(e),e.selfClosing?t._appendElement(e,Fn.SVG):t._insertElement(e,Fn.SVG),e.ackSelfClosing=!0}function USe(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,Fn.HTML)}function pf(t,e){switch(e.tagID){case J.I:case J.S:case J.B:case J.U:case J.EM:case J.TT:case J.BIG:case J.CODE:case J.FONT:case J.SMALL:case J.STRIKE:case J.STRONG:{ksn(t,e);break}case J.A:{Lsn(t,e);break}case J.H1:case J.H2:case J.H3:case J.H4:case J.H5:case J.H6:{Csn(t,e);break}case J.P:case J.DL:case J.OL:case J.UL:case J.DIV:case J.DIR:case J.NAV:case J.MAIN:case J.MENU:case J.ASIDE:case J.CENTER:case J.FIGURE:case J.FOOTER:case J.HEADER:case J.HGROUP:case J.DIALOG:case J.DETAILS:case J.ADDRESS:case J.ARTICLE:case J.SEARCH:case J.SECTION:case J.SUMMARY:case J.FIELDSET:case J.BLOCKQUOTE:case J.FIGCAPTION:{Osn(t,e);break}case J.LI:case J.DD:case J.DT:{Psn(t,e);break}case J.BR:case J.IMG:case J.WBR:case J.AREA:case J.EMBED:case J.KEYGEN:{l8e(t,e);break}case J.HR:{zsn(t,e);break}case J.RB:case J.RTC:{Xsn(t,e);break}case J.RT:case J.RP:{qsn(t,e);break}case J.PRE:case J.LISTING:{Rsn(t,e);break}case J.XMP:{Gsn(t,e);break}case J.SVG:{Ksn(t,e);break}case J.HTML:{Tsn(t,e);break}case J.BASE:case J.LINK:case J.META:case J.STYLE:case J.TITLE:case J.SCRIPT:case J.BGSOUND:case J.BASEFONT:case J.TEMPLATE:{fv(t,e);break}case J.BODY:{Asn(t,e);break}case J.FORM:{Msn(t,e);break}case J.NOBR:{Dsn(t,e);break}case J.MATH:{Zsn(t,e);break}case J.TABLE:{Fsn(t,e);break}case J.INPUT:{Usn(t,e);break}case J.PARAM:case J.TRACK:case J.SOURCE:{jsn(t,e);break}case J.IMAGE:{$sn(t,e);break}case J.BUTTON:{Isn(t,e);break}case J.APPLET:case J.OBJECT:case J.MARQUEE:{Bsn(t,e);break}case J.IFRAME:{Wsn(t,e);break}case J.SELECT:{Vsn(t,e);break}case J.OPTION:case J.OPTGROUP:{Ysn(t,e);break}case J.NOEMBED:case J.NOFRAMES:{FSe(t,e);break}case J.FRAMESET:{wsn(t,e);break}case J.TEXTAREA:{Hsn(t,e);break}case J.NOSCRIPT:{t.options.scriptingEnabled?FSe(t,e):USe(t,e);break}case J.PLAINTEXT:{Nsn(t,e);break}case J.COL:case J.TH:case J.TD:case J.TR:case J.HEAD:case J.FRAME:case J.TBODY:case J.TFOOT:case J.THEAD:case J.CAPTION:case J.COLGROUP:break;default:USe(t,e)}}function Qsn(t,e){if(t.openElements.hasInScope(J.BODY)&&(t.insertionMode=We.AFTER_BODY,t.options.sourceCodeLocationInfo)){const n=t.openElements.tryPeekProperlyNestedBodyElement();n&&t._setEndLocation(n,e)}}function Jsn(t,e){t.openElements.hasInScope(J.BODY)&&(t.insertionMode=We.AFTER_BODY,_8e(t,e))}function eln(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function tln(t){const e=t.openElements.tmplCount>0,{formElement:n}=t;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(J.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(J.FORM):n&&t.openElements.remove(n))}function nln(t){t.openElements.hasInButtonScope(J.P)||t._insertFakeElement(Tt.P,J.P),t._closePElement()}function rln(t){t.openElements.hasInListItemScope(J.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(J.LI),t.openElements.popUntilTagNamePopped(J.LI))}function iln(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}function aln(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}function oln(t,e){const n=e.tagID;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function sln(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(Tt.BR,J.BR),t.openElements.pop(),t.framesetOk=!1}function u8e(t,e){const n=e.tagName,r=e.tagID;for(let i=t.openElements.stackTop;i>0;i--){const a=t.openElements.items[i],o=t.openElements.tagIDs[i];if(r===o&&(r!==J.UNKNOWN||t.treeAdapter.getTagName(a)===n)){t.openElements.generateImpliedEndTagsWithExclusion(r),t.openElements.stackTop>=i&&t.openElements.shortenToLength(i);break}if(t._isSpecialElement(a,o))break}}function Y5(t,e){switch(e.tagID){case J.A:case J.B:case J.I:case J.S:case J.U:case J.EM:case J.TT:case J.BIG:case J.CODE:case J.FONT:case J.NOBR:case J.SMALL:case J.STRIKE:case J.STRONG:{Pre(t,e);break}case J.P:{nln(t);break}case J.DL:case J.UL:case J.OL:case J.DIR:case J.DIV:case J.NAV:case J.PRE:case J.MAIN:case J.MENU:case J.ASIDE:case J.BUTTON:case J.CENTER:case J.FIGURE:case J.FOOTER:case J.HEADER:case J.HGROUP:case J.DIALOG:case J.ADDRESS:case J.ARTICLE:case J.DETAILS:case J.SEARCH:case J.SECTION:case J.SUMMARY:case J.LISTING:case J.FIELDSET:case J.BLOCKQUOTE:case J.FIGCAPTION:{eln(t,e);break}case J.LI:{rln(t);break}case J.DD:case J.DT:{iln(t,e);break}case J.H1:case J.H2:case J.H3:case J.H4:case J.H5:case J.H6:{aln(t);break}case J.BR:{sln(t);break}case J.BODY:{Qsn(t,e);break}case J.HTML:{Jsn(t,e);break}case J.FORM:{tln(t);break}case J.APPLET:case J.OBJECT:case J.MARQUEE:{oln(t,e);break}case J.TEMPLATE:{lS(t,e);break}default:u8e(t,e)}}function f8e(t,e){t.tmplInsertionModeStack.length>0?y8e(t,e):Nre(t,e)}function lln(t,e){var n;e.tagID===J.SCRIPT&&((n=t.scriptHandler)===null||n===void 0||n.call(t,t.openElements.current)),t.openElements.pop(),t.insertionMode=t.originalInsertionMode}function cln(t,e){t._err(e,qt.eofInElementThatCanContainOnlyText),t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t.onEof(e)}function $V(t,e){if(t.openElements.currentTagId!==void 0&&a8e.has(t.openElements.currentTagId))switch(t.pendingCharacterTokens.length=0,t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=We.IN_TABLE_TEXT,e.type){case Sa.CHARACTER:{d8e(t,e);break}case Sa.WHITESPACE_CHARACTER:{h8e(t,e);break}}else _N(t,e)}function uln(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,Fn.HTML),t.insertionMode=We.IN_CAPTION}function fln(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Fn.HTML),t.insertionMode=We.IN_COLUMN_GROUP}function hln(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Tt.COLGROUP,J.COLGROUP),t.insertionMode=We.IN_COLUMN_GROUP,Ire(t,e)}function dln(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,Fn.HTML),t.insertionMode=We.IN_TABLE_BODY}function pln(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(Tt.TBODY,J.TBODY),t.insertionMode=We.IN_TABLE_BODY,X5(t,e)}function gln(t,e){t.openElements.hasInTableScope(J.TABLE)&&(t.openElements.popUntilTagNamePopped(J.TABLE),t._resetInsertionMode(),t._processStartTag(e))}function vln(t,e){c8e(e)?t._appendElement(e,Fn.HTML):_N(t,e),e.ackSelfClosing=!0}function mln(t,e){!t.formElement&&t.openElements.tmplCount===0&&(t._insertElement(e,Fn.HTML),t.formElement=t.openElements.current,t.openElements.pop())}function Ew(t,e){switch(e.tagID){case J.TD:case J.TH:case J.TR:{pln(t,e);break}case J.STYLE:case J.SCRIPT:case J.TEMPLATE:{fv(t,e);break}case J.COL:{hln(t,e);break}case J.FORM:{mln(t,e);break}case J.TABLE:{gln(t,e);break}case J.TBODY:case J.TFOOT:case J.THEAD:{dln(t,e);break}case J.INPUT:{vln(t,e);break}case J.CAPTION:{uln(t,e);break}case J.COLGROUP:{fln(t,e);break}default:_N(t,e)}}function pP(t,e){switch(e.tagID){case J.TABLE:{t.openElements.hasInTableScope(J.TABLE)&&(t.openElements.popUntilTagNamePopped(J.TABLE),t._resetInsertionMode());break}case J.TEMPLATE:{lS(t,e);break}case J.BODY:case J.CAPTION:case J.COL:case J.COLGROUP:case J.HTML:case J.TBODY:case J.TD:case J.TFOOT:case J.TH:case J.THEAD:case J.TR:break;default:_N(t,e)}}function _N(t,e){const n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,V5(t,e),t.fosterParentingEnabled=n}function h8e(t,e){t.pendingCharacterTokens.push(e)}function d8e(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0}function q2(t,e){let n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)_N(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)}const p8e=new Set([J.CAPTION,J.COL,J.COLGROUP,J.TBODY,J.TD,J.TFOOT,J.TH,J.THEAD,J.TR]);function yln(t,e){const n=e.tagID;p8e.has(n)?t.openElements.hasInTableScope(J.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(J.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=We.IN_TABLE,Ew(t,e)):pf(t,e)}function _ln(t,e){const n=e.tagID;switch(n){case J.CAPTION:case J.TABLE:{t.openElements.hasInTableScope(J.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(J.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=We.IN_TABLE,n===J.TABLE&&pP(t,e));break}case J.BODY:case J.COL:case J.COLGROUP:case J.HTML:case J.TBODY:case J.TD:case J.TFOOT:case J.TH:case J.THEAD:case J.TR:break;default:Y5(t,e)}}function Ire(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.COL:{t._appendElement(e,Fn.HTML),e.ackSelfClosing=!0;break}case J.TEMPLATE:{fv(t,e);break}default:MF(t,e)}}function bln(t,e){switch(e.tagID){case J.COLGROUP:{t.openElements.currentTagId===J.COLGROUP&&(t.openElements.pop(),t.insertionMode=We.IN_TABLE);break}case J.TEMPLATE:{lS(t,e);break}case J.COL:break;default:MF(t,e)}}function MF(t,e){t.openElements.currentTagId===J.COLGROUP&&(t.openElements.pop(),t.insertionMode=We.IN_TABLE,t._processToken(e))}function X5(t,e){switch(e.tagID){case J.TR:{t.openElements.clearBackToTableBodyContext(),t._insertElement(e,Fn.HTML),t.insertionMode=We.IN_ROW;break}case J.TH:case J.TD:{t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(Tt.TR,J.TR),t.insertionMode=We.IN_ROW,q5(t,e);break}case J.CAPTION:case J.COL:case J.COLGROUP:case J.TBODY:case J.TFOOT:case J.THEAD:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE,Ew(t,e));break}default:Ew(t,e)}}function yK(t,e){const n=e.tagID;switch(e.tagID){case J.TBODY:case J.TFOOT:case J.THEAD:{t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE);break}case J.TABLE:{t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE,pP(t,e));break}case J.BODY:case J.CAPTION:case J.COL:case J.COLGROUP:case J.HTML:case J.TD:case J.TH:case J.TR:break;default:pP(t,e)}}function q5(t,e){switch(e.tagID){case J.TH:case J.TD:{t.openElements.clearBackToTableRowContext(),t._insertElement(e,Fn.HTML),t.insertionMode=We.IN_CELL,t.activeFormattingElements.insertMarker();break}case J.CAPTION:case J.COL:case J.COLGROUP:case J.TBODY:case J.TFOOT:case J.THEAD:case J.TR:{t.openElements.hasInTableScope(J.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE_BODY,X5(t,e));break}default:Ew(t,e)}}function g8e(t,e){switch(e.tagID){case J.TR:{t.openElements.hasInTableScope(J.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE_BODY);break}case J.TABLE:{t.openElements.hasInTableScope(J.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE_BODY,yK(t,e));break}case J.TBODY:case J.TFOOT:case J.THEAD:{(t.openElements.hasInTableScope(e.tagID)||t.openElements.hasInTableScope(J.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=We.IN_TABLE_BODY,yK(t,e));break}case J.BODY:case J.CAPTION:case J.COL:case J.COLGROUP:case J.HTML:case J.TD:case J.TH:break;default:pP(t,e)}}function Eln(t,e){const n=e.tagID;p8e.has(n)?(t.openElements.hasInTableScope(J.TD)||t.openElements.hasInTableScope(J.TH))&&(t._closeTableCell(),q5(t,e)):pf(t,e)}function xln(t,e){const n=e.tagID;switch(n){case J.TD:case J.TH:{t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=We.IN_ROW);break}case J.TABLE:case J.TBODY:case J.TFOOT:case J.THEAD:case J.TR:{t.openElements.hasInTableScope(n)&&(t._closeTableCell(),g8e(t,e));break}case J.BODY:case J.CAPTION:case J.COL:case J.COLGROUP:case J.HTML:break;default:Y5(t,e)}}function v8e(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.OPTION:{t.openElements.currentTagId===J.OPTION&&t.openElements.pop(),t._insertElement(e,Fn.HTML);break}case J.OPTGROUP:{t.openElements.currentTagId===J.OPTION&&t.openElements.pop(),t.openElements.currentTagId===J.OPTGROUP&&t.openElements.pop(),t._insertElement(e,Fn.HTML);break}case J.HR:{t.openElements.currentTagId===J.OPTION&&t.openElements.pop(),t.openElements.currentTagId===J.OPTGROUP&&t.openElements.pop(),t._appendElement(e,Fn.HTML),e.ackSelfClosing=!0;break}case J.INPUT:case J.KEYGEN:case J.TEXTAREA:case J.SELECT:{t.openElements.hasInSelectScope(J.SELECT)&&(t.openElements.popUntilTagNamePopped(J.SELECT),t._resetInsertionMode(),e.tagID!==J.SELECT&&t._processStartTag(e));break}case J.SCRIPT:case J.TEMPLATE:{fv(t,e);break}}}function m8e(t,e){switch(e.tagID){case J.OPTGROUP:{t.openElements.stackTop>0&&t.openElements.currentTagId===J.OPTION&&t.openElements.tagIDs[t.openElements.stackTop-1]===J.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagId===J.OPTGROUP&&t.openElements.pop();break}case J.OPTION:{t.openElements.currentTagId===J.OPTION&&t.openElements.pop();break}case J.SELECT:{t.openElements.hasInSelectScope(J.SELECT)&&(t.openElements.popUntilTagNamePopped(J.SELECT),t._resetInsertionMode());break}case J.TEMPLATE:{lS(t,e);break}}}function Sln(t,e){const n=e.tagID;n===J.CAPTION||n===J.TABLE||n===J.TBODY||n===J.TFOOT||n===J.THEAD||n===J.TR||n===J.TD||n===J.TH?(t.openElements.popUntilTagNamePopped(J.SELECT),t._resetInsertionMode(),t._processStartTag(e)):v8e(t,e)}function Tln(t,e){const n=e.tagID;n===J.CAPTION||n===J.TABLE||n===J.TBODY||n===J.TFOOT||n===J.THEAD||n===J.TR||n===J.TD||n===J.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(J.SELECT),t._resetInsertionMode(),t.onEndTag(e)):m8e(t,e)}function Aln(t,e){switch(e.tagID){case J.BASE:case J.BASEFONT:case J.BGSOUND:case J.LINK:case J.META:case J.NOFRAMES:case J.SCRIPT:case J.STYLE:case J.TEMPLATE:case J.TITLE:{fv(t,e);break}case J.CAPTION:case J.COLGROUP:case J.TBODY:case J.TFOOT:case J.THEAD:{t.tmplInsertionModeStack[0]=We.IN_TABLE,t.insertionMode=We.IN_TABLE,Ew(t,e);break}case J.COL:{t.tmplInsertionModeStack[0]=We.IN_COLUMN_GROUP,t.insertionMode=We.IN_COLUMN_GROUP,Ire(t,e);break}case J.TR:{t.tmplInsertionModeStack[0]=We.IN_TABLE_BODY,t.insertionMode=We.IN_TABLE_BODY,X5(t,e);break}case J.TD:case J.TH:{t.tmplInsertionModeStack[0]=We.IN_ROW,t.insertionMode=We.IN_ROW,q5(t,e);break}default:t.tmplInsertionModeStack[0]=We.IN_BODY,t.insertionMode=We.IN_BODY,pf(t,e)}}function wln(t,e){e.tagID===J.TEMPLATE&&lS(t,e)}function y8e(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(J.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t.tmplInsertionModeStack.shift(),t._resetInsertionMode(),t.onEof(e)):Nre(t,e)}function Oln(t,e){e.tagID===J.HTML?pf(t,e):PF(t,e)}function _8e(t,e){var n;if(e.tagID===J.HTML){if(t.fragmentContext||(t.insertionMode=We.AFTER_AFTER_BODY),t.options.sourceCodeLocationInfo&&t.openElements.tagIDs[0]===J.HTML){t._setEndLocation(t.openElements.items[0],e);const r=t.openElements.items[1];r&&!(!((n=t.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&t._setEndLocation(r,e)}}else PF(t,e)}function PF(t,e){t.insertionMode=We.IN_BODY,V5(t,e)}function Cln(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.FRAMESET:{t._insertElement(e,Fn.HTML);break}case J.FRAME:{t._appendElement(e,Fn.HTML),e.ackSelfClosing=!0;break}case J.NOFRAMES:{fv(t,e);break}}}function Rln(t,e){e.tagID===J.FRAMESET&&!t.openElements.isRootHtmlElementCurrent()&&(t.openElements.pop(),!t.fragmentContext&&t.openElements.currentTagId!==J.FRAMESET&&(t.insertionMode=We.AFTER_FRAMESET))}function Mln(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.NOFRAMES:{fv(t,e);break}}}function Pln(t,e){e.tagID===J.HTML&&(t.insertionMode=We.AFTER_AFTER_FRAMESET)}function Nln(t,e){e.tagID===J.HTML?pf(t,e):Xk(t,e)}function Xk(t,e){t.insertionMode=We.IN_BODY,V5(t,e)}function Iln(t,e){switch(e.tagID){case J.HTML:{pf(t,e);break}case J.NOFRAMES:{fv(t,e);break}}}function Lln(t,e){e.chars=Gs,t._insertCharacters(e)}function kln(t,e){t._insertCharacters(e),t.framesetOk=!1}function b8e(t){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==Fn.HTML&&t.openElements.currentTagId!==void 0&&!t._isIntegrationPoint(t.openElements.currentTagId,t.openElements.current);)t.openElements.pop()}function Dln(t,e){if(Kon(e))b8e(t),t._startTagOutsideForeignContent(e);else{const n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===Fn.MATHML?r8e(e):r===Fn.SVG&&(Qon(e),i8e(e)),Mre(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r),e.ackSelfClosing=!0}}function Bln(t,e){if(e.tagID===J.P||e.tagID===J.BR){b8e(t),t._endTagOutsideForeignContent(e);return}for(let n=t.openElements.stackTop;n>0;n--){const r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===Fn.HTML){t._endTagOutsideForeignContent(e);break}const i=t.treeAdapter.getTagName(r);if(i.toLowerCase()===e.tagName){e.tagName=i,t.openElements.shortenToLength(n);break}}}Tt.AREA,Tt.BASE,Tt.BASEFONT,Tt.BGSOUND,Tt.BR,Tt.COL,Tt.EMBED,Tt.FRAME,Tt.HR,Tt.IMG,Tt.INPUT,Tt.KEYGEN,Tt.LINK,Tt.META,Tt.PARAM,Tt.SOURCE,Tt.TRACK,Tt.WBR;const Fln=/<(\/?)(iframe|noembed|noframes|plaintext|script|style|textarea|title|xmp)(?=[\t\n\f\r />])/gi,Uln=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),jSe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function E8e(t,e){const n=qln(t),r=pTe("type",{handlers:{root:jln,element:zln,text:$ln,comment:S8e,doctype:Hln,raw:Wln},unknown:Vln}),i={parser:n?new BSe(jSe):BSe.getFragmentParser(void 0,jSe),handle(s){r(s,i)},stitches:!1,options:e||{}};r(t,i),sO(i,i0());const a=n?i.parser.document:i.parser.getFragment(),o=oon(a,{file:i.options.file});return i.stitches&&W5(o,"comment",function(s,l,c){const u=s;if(u.value.stitch&&c&&l!==void 0){const f=c.children;return f[l]=u.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===t.type?o.children[0]:o}function x8e(t,e){let n=-1;if(t)for(;++n<t.length;)e.handle(t[n])}function jln(t,e){x8e(t.children,e)}function zln(t,e){Yln(t,e),x8e(t.children,e),Xln(t,e)}function $ln(t,e){e.parser.tokenizer.state>4&&(e.parser.tokenizer.state=0);const n={type:Sa.CHARACTER,chars:t.value,location:bN(t)};sO(e,i0(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Hln(t,e){const n={type:Sa.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:bN(t)};sO(e,i0(t)),e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)}function Gln(t,e){e.stitches=!0;const n=Zln(t);if("children"in t&&"children"in n){const r=E8e({type:"root",children:t.children},e.options);n.children=r.children}S8e({type:"comment",value:{stitch:n}},e)}function S8e(t,e){const n=t.value,r={type:Sa.COMMENT,data:n,location:bN(t)};sO(e,i0(t)),e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken)}function Wln(t,e){if(e.parser.tokenizer.preprocessor.html="",e.parser.tokenizer.preprocessor.pos=-1,e.parser.tokenizer.preprocessor.lastGapPos=-2,e.parser.tokenizer.preprocessor.gapStack=[],e.parser.tokenizer.preprocessor.skipNextNewLine=!1,e.parser.tokenizer.preprocessor.lastChunkWritten=!1,e.parser.tokenizer.preprocessor.endOfChunkHit=!1,e.parser.tokenizer.preprocessor.isEol=!1,T8e(e,i0(t)),e.parser.tokenizer.write(e.options.tagfilter?t.value.replace(Fln,"&lt;$1$2"):t.value,!1),e.parser.tokenizer._runParsingLoop(),e.parser.tokenizer.state===72||e.parser.tokenizer.state===78){e.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=e.parser.tokenizer._consume();e.parser.tokenizer._callState(n)}}function Vln(t,e){const n=t;if(e.options.passThrough&&e.options.passThrough.includes(n.type))Gln(n,e);else{let r="";throw Uln.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function sO(t,e){T8e(t,e);const n=t.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=t.parser.tokenizer.preprocessor.line,n.location.endCol=t.parser.tokenizer.preprocessor.col+1,n.location.endOffset=t.parser.tokenizer.preprocessor.offset+1,t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)),t.parser.tokenizer.paused=!1,t.parser.tokenizer.inLoop=!1,t.parser.tokenizer.active=!1,t.parser.tokenizer.returnState=Xl.DATA,t.parser.tokenizer.charRefCode=-1,t.parser.tokenizer.consumedAfterSnapshot=-1,t.parser.tokenizer.currentLocation=null,t.parser.tokenizer.currentCharacterToken=null,t.parser.tokenizer.currentToken=null,t.parser.tokenizer.currentAttr={name:"",value:""}}function T8e(t,e){if(e&&e.offset!==void 0){const n={startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:-1,endCol:-1,endOffset:-1};t.parser.tokenizer.preprocessor.lineStartPos=-e.column+1,t.parser.tokenizer.preprocessor.droppedBufferSize=e.offset,t.parser.tokenizer.preprocessor.line=e.line,t.parser.tokenizer.currentLocation=n}}function Yln(t,e){const n=t.tagName.toLowerCase();if(e.parser.tokenizer.state===Xl.PLAINTEXT)return;sO(e,i0(t));const r=e.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:XE.html;i===XE.html&&n==="svg"&&(i=XE.svg);const a=fon({...t,children:[]},{space:i===XE.svg?"svg":"html"}),o={type:Sa.START_TAG,tagName:n,tagID:oO(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in a?a.attrs:[],location:bN(t)};e.parser.currentToken=o,e.parser._processToken(e.parser.currentToken),e.parser.tokenizer.lastStartTagName=n}function Xln(t,e){const n=t.tagName.toLowerCase();if(!e.parser.tokenizer.inForeignNode&&z7e.includes(n)||e.parser.tokenizer.state===Xl.PLAINTEXT)return;sO(e,U5(t));const r={type:Sa.END_TAG,tagName:n,tagID:oO(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:bN(t)};e.parser.currentToken=r,e.parser._processToken(e.parser.currentToken),n===e.parser.tokenizer.lastStartTagName&&(e.parser.tokenizer.state===Xl.RCDATA||e.parser.tokenizer.state===Xl.RAWTEXT||e.parser.tokenizer.state===Xl.SCRIPT_DATA)&&(e.parser.tokenizer.state=Xl.DATA)}function qln(t){const e=t.type==="root"?t.children[0]:t;return!!(e&&(e.type==="doctype"||e.type==="element"&&e.tagName.toLowerCase()==="html"))}function bN(t){const e=i0(t)||{line:void 0,column:void 0,offset:void 0},n=U5(t)||{line:void 0,column:void 0,offset:void 0};return{startLine:e.line,startCol:e.column,startOffset:e.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Zln(t){return"children"in t?bw({...t,children:[]}):bw(t)}function Kln(t){return function(e,n){return E8e(e,{...t,file:n})}}function Qln(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Jln(t,e,n){const i=H5((n||{}).ignore||[]),a=ecn(e);let o=-1;for(;++o<a.length;)$5e(t,"text",s);function s(c,u){let f=-1,h;for(;++f<u.length;){const d=u[f],p=h?h.children:void 0;if(i(d,p?p.indexOf(d):void 0,h))return;h=d}if(h)return l(c,u)}function l(c,u){const f=u[u.length-1],h=a[o][0],d=a[o][1];let p=0;const v=f.children.indexOf(c);let y=!1,_=[];h.lastIndex=0;let E=h.exec(c.value);for(;E;){const x=E.index,T={index:E.index,input:E.input,stack:[...u,c]};let S=d(...E,T);if(typeof S=="string"&&(S=S.length>0?{type:"text",value:S}:void 0),S===!1?h.lastIndex=x+1:(p!==x&&_.push({type:"text",value:c.value.slice(p,x)}),Array.isArray(S)?_.push(...S):S&&_.push(S),p=x+E[0].length,y=!0),!h.global)break;E=h.exec(c.value)}return y?(p<c.value.length&&_.push({type:"text",value:c.value.slice(p)}),f.children.splice(v,1,..._)):_=[c],v+_.length}}function ecn(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([tcn(i[0]),ncn(i[1])])}return e}function tcn(t){return typeof t=="string"?new RegExp(Qln(t),"g"):t}function ncn(t){return typeof t=="function"?t:function(){return t}}const HV="phrasing",GV=["autolink","link","image","label"];function rcn(){return{transforms:[ucn],enter:{literalAutolink:acn,literalAutolinkEmail:WV,literalAutolinkHttp:WV,literalAutolinkWww:WV},exit:{literalAutolink:ccn,literalAutolinkEmail:lcn,literalAutolinkHttp:ocn,literalAutolinkWww:scn}}}function icn(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:HV,notInConstruct:GV},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:HV,notInConstruct:GV},{character:":",before:"[ps]",after:"\\/",inConstruct:HV,notInConstruct:GV}]}}function acn(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function WV(t){this.config.enter.autolinkProtocol.call(this,t)}function ocn(t){this.config.exit.autolinkProtocol.call(this,t)}function scn(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function lcn(t){this.config.exit.autolinkEmail.call(this,t)}function ccn(t){this.exit(t)}function ucn(t){Jln(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,fcn],[/(?<=^|\s|\p{P}|\p{S})([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/gu,hcn]],{ignore:["link","linkReference"]})}function fcn(t,e,n,r,i){let a="";if(!A8e(i)||(/^w/i.test(e)&&(n=e+n,e="",a="http://"),!dcn(n)))return!1;const o=pcn(n+r);if(!o[0])return!1;const s={type:"link",title:null,url:a+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[s,{type:"text",value:o[1]}]:s}function hcn(t,e,n,r){return!A8e(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function dcn(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function pcn(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],r=n.indexOf(")");const i=Xre(t,"(");let a=Xre(t,")");for(;r!==-1&&i>a;)t+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[t,n]}function A8e(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||zx(n)||j5(n))&&(!e||n!==47)}w8e.peek=Scn;function gcn(){this.buffer()}function vcn(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function mcn(){this.buffer()}function ycn(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function _cn(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Qg(this.sliceSerialize(t)).toLowerCase(),n.label=e}function bcn(t){this.exit(t)}function Ecn(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=Qg(this.sliceSerialize(t)).toLowerCase(),n.label=e}function xcn(t){this.exit(t)}function Scn(){return"["}function w8e(t,e,n,r){const i=n.createTracker(r);let a=i.move("[^");const o=n.enter("footnoteReference"),s=n.enter("reference");return a+=i.move(n.safe(n.associationId(t),{after:"]",before:a})),s(),o(),a+=i.move("]"),a}function Tcn(){return{enter:{gfmFootnoteCallString:gcn,gfmFootnoteCall:vcn,gfmFootnoteDefinitionLabelString:mcn,gfmFootnoteDefinition:ycn},exit:{gfmFootnoteCallString:_cn,gfmFootnoteCall:bcn,gfmFootnoteDefinitionLabelString:Ecn,gfmFootnoteDefinition:xcn}}}function Acn(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:w8e},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(r,i,a,o){const s=a.createTracker(o);let l=s.move("[^");const c=a.enter("footnoteDefinition"),u=a.enter("label");return l+=s.move(a.safe(a.associationId(r),{before:l,after:"]"})),u(),l+=s.move("]:"),r.children&&r.children.length>0&&(s.shift(4),l+=s.move((e?`
`:" ")+a.indentLines(a.containerFlow(r,s.current()),e?O8e:wcn))),c(),l}}function wcn(t,e,n){return e===0?t:O8e(t,e,n)}function O8e(t,e,n){return(n?"":"    ")+t}const Ocn=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];C8e.peek=Ncn;function Ccn(){return{canContainEols:["delete"],enter:{strikethrough:Mcn},exit:{strikethrough:Pcn}}}function Rcn(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:Ocn}],handlers:{delete:C8e}}}function Mcn(t){this.enter({type:"delete",children:[]},t)}function Pcn(t){this.exit(t)}function C8e(t,e,n,r){const i=n.createTracker(r),a=n.enter("strikethrough");let o=i.move("~~");return o+=n.containerPhrasing(t,{...i.current(),before:o,after:"~"}),o+=i.move("~~"),a(),o}function Ncn(){return"~"}function Icn(t){return t.length}function Lcn(t,e){const n=e||{},r=(n.align||[]).concat(),i=n.stringLength||Icn,a=[],o=[],s=[],l=[];let c=0,u=-1;for(;++u<t.length;){const g=[],v=[];let y=-1;for(t[u].length>c&&(c=t[u].length);++y<t[u].length;){const _=kcn(t[u][y]);if(n.alignDelimiters!==!1){const E=i(_);v[y]=E,(l[y]===void 0||E>l[y])&&(l[y]=E)}g.push(_)}o[u]=g,s[u]=v}let f=-1;if(typeof r=="object"&&"length"in r)for(;++f<c;)a[f]=zSe(r[f]);else{const g=zSe(r);for(;++f<c;)a[f]=g}f=-1;const h=[],d=[];for(;++f<c;){const g=a[f];let v="",y="";g===99?(v=":",y=":"):g===108?v=":":g===114&&(y=":");let _=n.alignDelimiters===!1?1:Math.max(1,l[f]-v.length-y.length);const E=v+"-".repeat(_)+y;n.alignDelimiters!==!1&&(_=v.length+_+y.length,_>l[f]&&(l[f]=_),d[f]=_),h[f]=E}o.splice(1,0,h),s.splice(1,0,d),u=-1;const p=[];for(;++u<o.length;){const g=o[u],v=s[u];f=-1;const y=[];for(;++f<c;){const _=g[f]||"";let E="",x="";if(n.alignDelimiters!==!1){const T=l[f]-(v[f]||0),S=a[f];S===114?E=" ".repeat(T):S===99?T%2?(E=" ".repeat(T/2+.5),x=" ".repeat(T/2-.5)):(E=" ".repeat(T/2),x=E):x=" ".repeat(T)}n.delimiterStart!==!1&&!f&&y.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&_==="")&&(n.delimiterStart!==!1||f)&&y.push(" "),n.alignDelimiters!==!1&&y.push(E),y.push(_),n.alignDelimiters!==!1&&y.push(x),n.padding!==!1&&y.push(" "),(n.delimiterEnd!==!1||f!==c-1)&&y.push("|")}p.push(n.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return p.join(`
`)}function kcn(t){return t==null?"":String(t)}function zSe(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function Dcn(t,e,n,r){const i=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const o=n.indentLines(n.containerFlow(t,a.current()),Bcn);return i(),o}function Bcn(t,e,n){return">"+(n?"":" ")+t}function Fcn(t,e){return $Se(t,e.inConstruct,!0)&&!$Se(t,e.notInConstruct,!1)}function $Se(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let r=-1;for(;++r<e.length;)if(t.includes(e[r]))return!0;return!1}function HSe(t,e,n,r){let i=-1;for(;++i<n.unsafe.length;)if(n.unsafe[i].character===`
`&&Fcn(n.stack,n.unsafe[i]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function Ucn(t,e){const n=String(t);let r=n.indexOf(e),i=r,a=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===i?++a>o&&(o=a):a=1,i=r+e.length,r=n.indexOf(e,i);return o}function jcn(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function zcn(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function $cn(t,e,n,r){const i=zcn(n),a=t.value||"",o=i==="`"?"GraveAccent":"Tilde";if(jcn(t,n)){const f=n.enter("codeIndented"),h=n.indentLines(a,Hcn);return f(),h}const s=n.createTracker(r),l=i.repeat(Math.max(Ucn(a,i)+1,3)),c=n.enter("codeFenced");let u=s.move(l);if(t.lang){const f=n.enter(`codeFencedLang${o}`);u+=s.move(n.safe(t.lang,{before:u,after:" ",encode:["`"],...s.current()})),f()}if(t.lang&&t.meta){const f=n.enter(`codeFencedMeta${o}`);u+=s.move(" "),u+=s.move(n.safe(t.meta,{before:u,after:`
`,encode:["`"],...s.current()})),f()}return u+=s.move(`
`),a&&(u+=s.move(a+`
`)),u+=s.move(l),c(),u}function Hcn(t,e,n){return(n?"":"    ")+t}function Lre(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Gcn(t,e,n,r){const i=Lre(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("definition");let s=n.enter("label");const l=n.createTracker(r);let c=l.move("[");return c+=l.move(n.safe(n.associationId(t),{before:c,after:"]",...l.current()})),c+=l.move("]: "),s(),!t.url||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":`
`,...l.current()}))),s(),t.title&&(s=n.enter(`title${a}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),s()),o(),c}function Wcn(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function gP(t){return"&#x"+t.toString(16).toUpperCase()+";"}function NF(t,e,n){const r=_w(t),i=_w(e);return r===void 0?i===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:i===void 0?{inside:!1,outside:!1}:i===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}R8e.peek=Vcn;function R8e(t,e,n,r){const i=Wcn(n),a=n.enter("emphasis"),o=n.createTracker(r),s=o.move(i);let l=o.move(n.containerPhrasing(t,{after:i,before:s,...o.current()}));const c=l.charCodeAt(0),u=NF(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=gP(c)+l.slice(1));const f=l.charCodeAt(l.length-1),h=NF(r.after.charCodeAt(0),f,i);h.inside&&(l=l.slice(0,-1)+gP(f));const d=o.move(i);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},s+l+d}function Vcn(t,e,n){return n.options.emphasis||"*"}function Ycn(t,e){let n=!1;return W5(t,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,fK}),!!((!t.depth||t.depth<3)&&bre(t)&&(e.options.setext||n))}function Xcn(t,e,n,r){const i=Math.max(Math.min(6,t.depth||1),1),a=n.createTracker(r);if(Ycn(t,n)){const u=n.enter("headingSetext"),f=n.enter("phrasing"),h=n.containerPhrasing(t,{...a.current(),before:`
`,after:`
`});return f(),u(),h+`
`+(i===1?"=":"-").repeat(h.length-(Math.max(h.lastIndexOf("\r"),h.lastIndexOf(`
`))+1))}const o="#".repeat(i),s=n.enter("headingAtx"),l=n.enter("phrasing");a.move(o+" ");let c=n.containerPhrasing(t,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(c)&&(c=gP(c.charCodeAt(0))+c.slice(1)),c=c?o+" "+c:o,n.options.closeAtx&&(c+=" "+o),l(),s(),c}M8e.peek=qcn;function M8e(t){return t.value||""}function qcn(){return"<"}P8e.peek=Zcn;function P8e(t,e,n,r){const i=Lre(n),a=i==='"'?"Quote":"Apostrophe",o=n.enter("image");let s=n.enter("label");const l=n.createTracker(r);let c=l.move("![");return c+=l.move(n.safe(t.alt,{before:c,after:"]",...l.current()})),c+=l.move("]("),s(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(s=n.enter("destinationLiteral"),c+=l.move("<"),c+=l.move(n.safe(t.url,{before:c,after:">",...l.current()})),c+=l.move(">")):(s=n.enter("destinationRaw"),c+=l.move(n.safe(t.url,{before:c,after:t.title?" ":")",...l.current()}))),s(),t.title&&(s=n.enter(`title${a}`),c+=l.move(" "+i),c+=l.move(n.safe(t.title,{before:c,after:i,...l.current()})),c+=l.move(i),s()),c+=l.move(")"),o(),c}function Zcn(){return"!"}N8e.peek=Kcn;function N8e(t,e,n,r){const i=t.referenceType,a=n.enter("imageReference");let o=n.enter("label");const s=n.createTracker(r);let l=s.move("![");const c=n.safe(t.alt,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...s.current()});return o(),n.stack=u,a(),i==="full"||!c||c!==f?l+=s.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function Kcn(){return"!"}I8e.peek=Qcn;function I8e(t,e,n){let r=t.value||"",i="`",a=-1;for(;new RegExp("(^|[^`])"+i+"([^`]|$)").test(r);)i+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const o=n.unsafe[a],s=n.compilePattern(o);let l;if(o.atBreak)for(;l=s.exec(r);){let c=l.index;r.charCodeAt(c)===10&&r.charCodeAt(c-1)===13&&c--,r=r.slice(0,c)+" "+r.slice(l.index+1)}}return i+r+i}function Qcn(){return"`"}function L8e(t,e){const n=bre(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}k8e.peek=Jcn;function k8e(t,e,n,r){const i=Lre(n),a=i==='"'?"Quote":"Apostrophe",o=n.createTracker(r);let s,l;if(L8e(t,n)){const u=n.stack;n.stack=[],s=n.enter("autolink");let f=o.move("<");return f+=o.move(n.containerPhrasing(t,{before:f,after:">",...o.current()})),f+=o.move(">"),s(),n.stack=u,f}s=n.enter("link"),l=n.enter("label");let c=o.move("[");return c+=o.move(n.containerPhrasing(t,{before:c,after:"](",...o.current()})),c+=o.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),c+=o.move("<"),c+=o.move(n.safe(t.url,{before:c,after:">",...o.current()})),c+=o.move(">")):(l=n.enter("destinationRaw"),c+=o.move(n.safe(t.url,{before:c,after:t.title?" ":")",...o.current()}))),l(),t.title&&(l=n.enter(`title${a}`),c+=o.move(" "+i),c+=o.move(n.safe(t.title,{before:c,after:i,...o.current()})),c+=o.move(i),l()),c+=o.move(")"),s(),c}function Jcn(t,e,n){return L8e(t,n)?"<":"["}D8e.peek=eun;function D8e(t,e,n,r){const i=t.referenceType,a=n.enter("linkReference");let o=n.enter("label");const s=n.createTracker(r);let l=s.move("[");const c=n.containerPhrasing(t,{before:l,after:"]",...s.current()});l+=s.move(c+"]["),o();const u=n.stack;n.stack=[],o=n.enter("reference");const f=n.safe(n.associationId(t),{before:l,after:"]",...s.current()});return o(),n.stack=u,a(),i==="full"||!c||c!==f?l+=s.move(f+"]"):i==="shortcut"?l=l.slice(0,-1):l+=s.move("]"),l}function eun(){return"["}function kre(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function tun(t){const e=kre(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function nun(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function B8e(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function run(t,e,n,r){const i=n.enter("list"),a=n.bulletCurrent;let o=t.ordered?nun(n):kre(n);const s=t.ordered?o==="."?")":".":tun(n);let l=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const u=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&u&&(!u.children||!u.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(l=!0),B8e(n)===o&&u){let f=-1;for(;++f<t.children.length;){const h=t.children[f];if(h&&h.type==="listItem"&&h.children&&h.children[0]&&h.children[0].type==="thematicBreak"){l=!0;break}}}}l&&(o=s),n.bulletCurrent=o;const c=n.containerFlow(t,r);return n.bulletLastUsed=o,n.bulletCurrent=a,i(),c}function iun(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function aun(t,e,n,r){const i=iun(n);let a=n.bulletCurrent||kre(n);e&&e.type==="list"&&e.ordered&&(a=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+a);let o=a.length+1;(i==="tab"||i==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const s=n.createTracker(r);s.move(a+" ".repeat(o-a.length)),s.shift(o);const l=n.enter("listItem"),c=n.indentLines(n.containerFlow(t,s.current()),u);return l(),c;function u(f,h,d){return h?(d?"":" ".repeat(o))+f:(d?a:a+" ".repeat(o-a.length))+f}}function oun(t,e,n,r){const i=n.enter("paragraph"),a=n.enter("phrasing"),o=n.containerPhrasing(t,r);return a(),i(),o}const sun=H5(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function lun(t,e,n,r){return(t.children.some(function(o){return sun(o)})?n.containerPhrasing:n.containerFlow).call(n,t,r)}function cun(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}F8e.peek=uun;function F8e(t,e,n,r){const i=cun(n),a=n.enter("strong"),o=n.createTracker(r),s=o.move(i+i);let l=o.move(n.containerPhrasing(t,{after:i,before:s,...o.current()}));const c=l.charCodeAt(0),u=NF(r.before.charCodeAt(r.before.length-1),c,i);u.inside&&(l=gP(c)+l.slice(1));const f=l.charCodeAt(l.length-1),h=NF(r.after.charCodeAt(0),f,i);h.inside&&(l=l.slice(0,-1)+gP(f));const d=o.move(i+i);return a(),n.attentionEncodeSurroundingInfo={after:h.outside,before:u.outside},s+l+d}function uun(t,e,n){return n.options.strong||"*"}function fun(t,e,n,r){return n.safe(t.value,r)}function hun(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function dun(t,e,n){const r=(B8e(n)+(n.options.ruleSpaces?" ":"")).repeat(hun(n));return n.options.ruleSpaces?r.slice(0,-1):r}const U8e={blockquote:Dcn,break:HSe,code:$cn,definition:Gcn,emphasis:R8e,hardBreak:HSe,heading:Xcn,html:M8e,image:P8e,imageReference:N8e,inlineCode:I8e,link:k8e,linkReference:D8e,list:run,listItem:aun,paragraph:oun,root:lun,strong:F8e,text:fun,thematicBreak:dun};function pun(){return{enter:{table:gun,tableData:GSe,tableHeader:GSe,tableRow:mun},exit:{codeText:yun,table:vun,tableData:VV,tableHeader:VV,tableRow:VV}}}function gun(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function vun(t){this.exit(t),this.data.inTable=void 0}function mun(t){this.enter({type:"tableRow",children:[]},t)}function VV(t){this.exit(t)}function GSe(t){this.enter({type:"tableCell",children:[]},t)}function yun(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,_un));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function _un(t,e){return e==="|"?e:t}function bun(t){const e=t||{},n=e.tableCellPadding,r=e.tablePipeAlign,i=e.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:h,table:o,tableCell:l,tableRow:s}};function o(d,p,g,v){return c(u(d,g,v),d.align)}function s(d,p,g,v){const y=f(d,g,v),_=c([y]);return _.slice(0,_.indexOf(`
`))}function l(d,p,g,v){const y=g.enter("tableCell"),_=g.enter("phrasing"),E=g.containerPhrasing(d,{...v,before:a,after:a});return _(),y(),E}function c(d,p){return Lcn(d,{align:p,alignDelimiters:r,padding:n,stringLength:i})}function u(d,p,g){const v=d.children;let y=-1;const _=[],E=p.enter("table");for(;++y<v.length;)_[y]=f(v[y],p,g);return E(),_}function f(d,p,g){const v=d.children;let y=-1;const _=[],E=p.enter("tableRow");for(;++y<v.length;)_[y]=l(v[y],d,p,g);return E(),_}function h(d,p,g){let v=U8e.inlineCode(d,p,g);return g.stack.includes("tableCell")&&(v=v.replace(/\|/g,"\\$&")),v}}function Eun(){return{exit:{taskListCheckValueChecked:WSe,taskListCheckValueUnchecked:WSe,paragraph:Sun}}}function xun(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Tun}}}function WSe(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Sun(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const i=e.children;let a=-1,o;for(;++a<i.length;){const s=i[a];if(s.type==="paragraph"){o=s;break}}o===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(t)}function Tun(t,e,n,r){const i=t.children[0],a=typeof t.checked=="boolean"&&i&&i.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",s=n.createTracker(r);a&&s.move(o);let l=U8e.listItem(t,e,n,{...r,...s.current()});return a&&(l=l.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,c)),l;function c(u){return u+o}}function Aun(){return[rcn(),Tcn(),Ccn(),pun(),Eun()]}function wun(t){return{extensions:[icn(),Acn(t),Rcn(),bun(t),xun()]}}const Oun={tokenize:Iun,partial:!0},j8e={tokenize:Lun,partial:!0},z8e={tokenize:kun,partial:!0},$8e={tokenize:Dun,partial:!0},Cun={tokenize:Bun,partial:!0},H8e={name:"wwwAutolink",tokenize:Pun,previous:W8e},G8e={name:"protocolAutolink",tokenize:Nun,previous:V8e},Hy={name:"emailAutolink",tokenize:Mun,previous:Y8e},a0={};function Run(){return{text:a0}}let PE=48;for(;PE<123;)a0[PE]=Hy,PE++,PE===58?PE=65:PE===91&&(PE=97);a0[43]=Hy;a0[45]=Hy;a0[46]=Hy;a0[95]=Hy;a0[72]=[Hy,G8e];a0[104]=[Hy,G8e];a0[87]=[Hy,H8e];a0[119]=[Hy,H8e];function Mun(t,e,n){const r=this;let i,a;return o;function o(f){return!_K(f)||!Y8e.call(r,r.previous)||Dre(r.events)?n(f):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),s(f))}function s(f){return _K(f)?(t.consume(f),s):f===64?(t.consume(f),l):n(f)}function l(f){return f===46?t.check(Cun,u,c)(f):f===45||f===95||lf(f)?(a=!0,t.consume(f),l):u(f)}function c(f){return t.consume(f),i=!0,l}function u(f){return a&&i&&Wf(r.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(f)):n(f)}}function Pun(t,e,n){const r=this;return i;function i(o){return o!==87&&o!==119||!W8e.call(r,r.previous)||Dre(r.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Oun,t.attempt(j8e,t.attempt(z8e,a),n),n)(o))}function a(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Nun(t,e,n){const r=this;let i="",a=!1;return o;function o(f){return(f===72||f===104)&&V8e.call(r,r.previous)&&!Dre(r.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),i+=String.fromCodePoint(f),t.consume(f),s):n(f)}function s(f){if(Wf(f)&&i.length<5)return i+=String.fromCodePoint(f),t.consume(f),s;if(f===58){const h=i.toLowerCase();if(h==="http"||h==="https")return t.consume(f),l}return n(f)}function l(f){return f===47?(t.consume(f),a?c:(a=!0,l)):n(f)}function c(f){return f===null||OF(f)||ds(f)||zx(f)||j5(f)?n(f):t.attempt(j8e,t.attempt(z8e,u),n)(f)}function u(f){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(f)}}function Iun(t,e,n){let r=0;return i;function i(o){return(o===87||o===119)&&r<3?(r++,t.consume(o),i):o===46&&r===3?(t.consume(o),a):n(o)}function a(o){return o===null?n(o):e(o)}}function Lun(t,e,n){let r,i,a;return o;function o(c){return c===46||c===95?t.check($8e,l,s)(c):c===null||ds(c)||zx(c)||c!==45&&j5(c)?l(c):(a=!0,t.consume(c),o)}function s(c){return c===95?r=!0:(i=r,r=void 0),t.consume(c),o}function l(c){return i||r||!a?n(c):e(c)}}function kun(t,e){let n=0,r=0;return i;function i(o){return o===40?(n++,t.consume(o),i):o===41&&r<n?a(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check($8e,e,a)(o):o===null||ds(o)||zx(o)?e(o):(t.consume(o),i)}function a(o){return o===41&&r++,t.consume(o),i}}function Dun(t,e,n){return r;function r(s){return s===33||s===34||s===39||s===41||s===42||s===44||s===46||s===58||s===59||s===63||s===95||s===126?(t.consume(s),r):s===38?(t.consume(s),a):s===93?(t.consume(s),i):s===60||s===null||ds(s)||zx(s)?e(s):n(s)}function i(s){return s===null||s===40||s===91||ds(s)||zx(s)?e(s):r(s)}function a(s){return Wf(s)?o(s):n(s)}function o(s){return s===59?(t.consume(s),r):Wf(s)?(t.consume(s),o):n(s)}}function Bun(t,e,n){return r;function r(a){return t.consume(a),i}function i(a){return lf(a)?n(a):e(a)}}function W8e(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||ds(t)}function V8e(t){return!Wf(t)}function Y8e(t){return!(t===47||_K(t))}function _K(t){return t===43||t===45||t===46||t===95||lf(t)}function Dre(t){let e=t.length,n=!1;for(;e--;){const r=t[e][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Fun={tokenize:Vun,partial:!0};function Uun(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Hun,continuation:{tokenize:Gun},exit:Wun}},text:{91:{name:"gfmFootnoteCall",tokenize:$un},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:jun,resolveTo:zun}}}}function jun(t,e,n){const r=this;let i=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let o;for(;i--;){const l=r.events[i][1];if(l.type==="labelImage"){o=l;break}if(l.type==="gfmFootnoteCall"||l.type==="labelLink"||l.type==="label"||l.type==="image"||l.type==="link")break}return s;function s(l){if(!o||!o._balanced)return n(l);const c=Qg(r.sliceSerialize({start:o.end,end:r.now()}));return c.codePointAt(0)!==94||!a.includes(c.slice(1))?n(l):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(l),t.exit("gfmFootnoteCallLabelMarker"),e(l))}}function zun(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},i={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};i.end.column++,i.end.offset++,i.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},i.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},s=[t[n+1],t[n+2],["enter",r,e],t[n+3],t[n+4],["enter",i,e],["exit",i,e],["enter",a,e],["enter",o,e],["exit",o,e],["exit",a,e],t[t.length-2],t[t.length-1],["exit",r,e]];return t.splice(n,t.length-n+1,...s),t}function $un(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,o;return s;function s(f){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),l}function l(f){return f!==94?n(f):(t.enter("gfmFootnoteCallMarker"),t.consume(f),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",c)}function c(f){if(a>999||f===93&&!o||f===null||f===91||ds(f))return n(f);if(f===93){t.exit("chunkString");const h=t.exit("gfmFootnoteCallString");return i.includes(Qg(r.sliceSerialize(h)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(f),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(f)}return ds(f)||(o=!0),a++,t.consume(f),f===92?u:c}function u(f){return f===91||f===92||f===93?(t.consume(f),a++,c):c(f)}}function Hun(t,e,n){const r=this,i=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,o=0,s;return l;function l(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),c}function c(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",u):n(p)}function u(p){if(o>999||p===93&&!s||p===null||p===91||ds(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return a=Qg(r.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),h}return ds(p)||(s=!0),o++,t.consume(p),p===92?f:u}function f(p){return p===91||p===92||p===93?(t.consume(p),o++,u):u(p)}function h(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),i.includes(a)||i.push(a),Xa(t,d,"gfmFootnoteDefinitionWhitespace")):n(p)}function d(p){return e(p)}}function Gun(t,e,n){return t.check(mN,e,t.attempt(Fun,e,n))}function Wun(t){t.exit("gfmFootnoteDefinition")}function Vun(t,e,n){const r=this;return Xa(t,i,"gfmFootnoteDefinitionIndent",5);function i(a){const o=r.events[r.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(a):n(a)}}function Yun(t){let n=(t||{}).singleTilde;const r={name:"strikethrough",tokenize:a,resolveAll:i};return n==null&&(n=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function i(o,s){let l=-1;for(;++l<o.length;)if(o[l][0]==="enter"&&o[l][1].type==="strikethroughSequenceTemporary"&&o[l][1]._close){let c=l;for(;c--;)if(o[c][0]==="exit"&&o[c][1].type==="strikethroughSequenceTemporary"&&o[c][1]._open&&o[l][1].end.offset-o[l][1].start.offset===o[c][1].end.offset-o[c][1].start.offset){o[l][1].type="strikethroughSequence",o[c][1].type="strikethroughSequence";const u={type:"strikethrough",start:Object.assign({},o[c][1].start),end:Object.assign({},o[l][1].end)},f={type:"strikethroughText",start:Object.assign({},o[c][1].end),end:Object.assign({},o[l][1].start)},h=[["enter",u,s],["enter",o[c][1],s],["exit",o[c][1],s],["enter",f,s]],d=s.parser.constructs.insideSpan.null;d&&Pd(h,h.length,0,z5(d,o.slice(c+1,l),s)),Pd(h,h.length,0,[["exit",f,s],["enter",o[l][1],s],["exit",o[l][1],s],["exit",u,s]]),Pd(o,c-1,l-c+3,h),l=c+h.length-2;break}}for(l=-1;++l<o.length;)o[l][1].type==="strikethroughSequenceTemporary"&&(o[l][1].type="data");return o}function a(o,s,l){const c=this.previous,u=this.events;let f=0;return h;function h(p){return c===126&&u[u.length-1][1].type!=="characterEscape"?l(p):(o.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const g=_w(c);if(p===126)return f>1?l(p):(o.consume(p),f++,d);if(f<2&&!n)return l(p);const v=o.exit("strikethroughSequenceTemporary"),y=_w(p);return v._open=!y||y===2&&!!g,v._close=!g||g===2&&!!y,s(p)}}}class Xun{constructor(){this.map=[]}add(e,n,r){qun(this,e,n,r)}consume(e){if(this.map.sort(function(a,o){return a[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];r.push(e.slice()),e.length=0;let i=r.pop();for(;i;){for(const a of i)e.push(a);i=r.pop()}this.map.length=0}}function qun(t,e,n,r){let i=0;if(!(n===0&&r.length===0)){for(;i<t.map.length;){if(t.map[i][0]===e){t.map[i][1]+=n,t.map[i][2].push(...r);return}i+=1}t.map.push([e,n,r])}}function Zun(t,e){let n=!1;const r=[];for(;e<t.length;){const i=t[e];if(n){if(i[0]==="enter")i[1].type==="tableContent"&&r.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(i[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(i[1].type==="tableDelimiterRow")break}else i[0]==="enter"&&i[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return r}function Kun(){return{flow:{null:{name:"table",tokenize:Qun,resolveAll:Jun}}}}function Qun(t,e,n){const r=this;let i=0,a=0,o;return s;function s(L){let B=r.events.length-1;for(;B>-1;){const $=r.events[B][1].type;if($==="lineEnding"||$==="linePrefix")B--;else break}const I=B>-1?r.events[B][1].type:null,U=I==="tableHead"||I==="tableRow"?S:l;return U===S&&r.parser.lazy[r.now().line]?n(L):U(L)}function l(L){return t.enter("tableHead"),t.enter("tableRow"),c(L)}function c(L){return L===124||(o=!0,a+=1),u(L)}function u(L){return L===null?n(L):di(L)?a>1?(a=0,r.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(L),t.exit("lineEnding"),d):n(L):Ma(L)?Xa(t,u,"whitespace")(L):(a+=1,o&&(o=!1,i+=1),L===124?(t.enter("tableCellDivider"),t.consume(L),t.exit("tableCellDivider"),o=!0,u):(t.enter("data"),f(L)))}function f(L){return L===null||L===124||ds(L)?(t.exit("data"),u(L)):(t.consume(L),L===92?h:f)}function h(L){return L===92||L===124?(t.consume(L),f):f(L)}function d(L){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(L):(t.enter("tableDelimiterRow"),o=!1,Ma(L)?Xa(t,p,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):p(L))}function p(L){return L===45||L===58?v(L):L===124?(o=!0,t.enter("tableCellDivider"),t.consume(L),t.exit("tableCellDivider"),g):T(L)}function g(L){return Ma(L)?Xa(t,v,"whitespace")(L):v(L)}function v(L){return L===58?(a+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(L),t.exit("tableDelimiterMarker"),y):L===45?(a+=1,y(L)):L===null||di(L)?x(L):T(L)}function y(L){return L===45?(t.enter("tableDelimiterFiller"),_(L)):T(L)}function _(L){return L===45?(t.consume(L),_):L===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(L),t.exit("tableDelimiterMarker"),E):(t.exit("tableDelimiterFiller"),E(L))}function E(L){return Ma(L)?Xa(t,x,"whitespace")(L):x(L)}function x(L){return L===124?p(L):L===null||di(L)?!o||i!==a?T(L):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(L)):T(L)}function T(L){return n(L)}function S(L){return t.enter("tableRow"),w(L)}function w(L){return L===124?(t.enter("tableCellDivider"),t.consume(L),t.exit("tableCellDivider"),w):L===null||di(L)?(t.exit("tableRow"),e(L)):Ma(L)?Xa(t,w,"whitespace")(L):(t.enter("data"),C(L))}function C(L){return L===null||L===124||ds(L)?(t.exit("data"),w(L)):(t.consume(L),L===92?D:C)}function D(L){return L===92||L===124?(t.consume(L),C):C(L)}}function Jun(t,e){let n=-1,r=!0,i=0,a=[0,0,0,0],o=[0,0,0,0],s=!1,l=0,c,u,f;const h=new Xun;for(;++n<t.length;){const d=t[n],p=d[1];d[0]==="enter"?p.type==="tableHead"?(s=!1,l!==0&&(VSe(h,e,l,c,u),u=void 0,l=0),c={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",c,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(r=!0,f=void 0,a=[0,0,0,0],o=[0,n+1,0,0],s&&(s=!1,u={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},h.add(n,0,[["enter",u,e]])),i=p.type==="tableDelimiterRow"?2:u?3:1):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(r=!1,o[2]===0&&(a[1]!==0&&(o[0]=o[1],f=XL(h,e,a,i,void 0,f),a=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(o[0]=o[1],f=XL(h,e,a,i,void 0,f)),a=o,o=[a[1],n,0,0])):p.type==="tableHead"?(s=!0,l=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(l=n,a[1]!==0?(o[0]=o[1],f=XL(h,e,a,i,n,f)):o[1]!==0&&(f=XL(h,e,o,i,n,f)),i=0):i&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(l!==0&&VSe(h,e,l,c,u),h.consume(e.events),n=-1;++n<e.events.length;){const d=e.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=Zun(e.events,n))}return t}function XL(t,e,n,r,i,a){const o=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",s="tableContent";n[0]!==0&&(a.end=Object.assign({},VT(e.events,n[0])),t.add(n[0],0,[["exit",a,e]]));const l=VT(e.events,n[1]);if(a={type:o,start:Object.assign({},l),end:Object.assign({},l)},t.add(n[1],0,[["enter",a,e]]),n[2]!==0){const c=VT(e.events,n[2]),u=VT(e.events,n[3]),f={type:s,start:Object.assign({},c),end:Object.assign({},u)};if(t.add(n[2],0,[["enter",f,e]]),r!==2){const h=e.events[n[2]],d=e.events[n[3]];if(h[1].end=Object.assign({},d[1].end),h[1].type="chunkText",h[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,g=n[3]-n[2]-1;t.add(p,g,[])}}t.add(n[3]+1,0,[["exit",f,e]])}return i!==void 0&&(a.end=Object.assign({},VT(e.events,i)),t.add(i,0,[["exit",a,e]]),a=void 0),a}function VSe(t,e,n,r,i){const a=[],o=VT(e.events,n);i&&(i.end=Object.assign({},o),a.push(["exit",i,e])),r.end=Object.assign({},o),a.push(["exit",r,e]),t.add(n+1,0,a)}function VT(t,e){const n=t[e],r=n[0]==="enter"?"start":"end";return n[1][r]}const efn={name:"tasklistCheck",tokenize:nfn};function tfn(){return{text:{91:efn}}}function nfn(t,e,n){const r=this;return i;function i(l){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(l):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),a)}function a(l){return ds(l)?(t.enter("taskListCheckValueUnchecked"),t.consume(l),t.exit("taskListCheckValueUnchecked"),o):l===88||l===120?(t.enter("taskListCheckValueChecked"),t.consume(l),t.exit("taskListCheckValueChecked"),o):n(l)}function o(l){return l===93?(t.enter("taskListCheckMarker"),t.consume(l),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),s):n(l)}function s(l){return di(l)?e(l):Ma(l)?t.check({tokenize:rfn},e,n)(l):n(l)}}function rfn(t,e,n){return Xa(t,r,"whitespace");function r(i){return i===null?n(i):e(i)}}function ifn(t){return S5e([Run(),Uun(),Yun(t),Kun(),tfn()])}const afn={};function ofn(t){const e=this,n=t||afn,r=e.data(),i=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),o=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);i.push(ifn(n)),a.push(Aun()),o.push(wun(n))}var sfn=et.createContext(null),lfn=["children","components","rehypePlugins","remarkPlugins","eventSubs"];function bK(){return bK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bK.apply(this,arguments)}function YSe(t){return hfn(t)||ffn(t)||ufn(t)||cfn()}function cfn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ufn(t,e){if(t){if(typeof t=="string")return EK(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return EK(t,e)}}function ffn(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hfn(t){if(Array.isArray(t))return EK(t)}function EK(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function dfn(t,e){if(t==null)return{};var n=pfn(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function pfn(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var gfn=function(e){var n=e.children,r=e.components,i=e.rehypePlugins,a=e.remarkPlugins,o=e.eventSubs,s=dfn(e,lfn),l=jt.useMemo(function(){return new Jm},[]),c=jt.useMemo(function(){return{eventBus:l}},[l]);return jt.useEffect(function(){if(o){for(var u=Object.keys(o),f=0,h=u;f<h.length;f++){var d=h[f];l.on(d,o[d])}return function(){for(var p=0,g=u;p<g.length;p++){var v=g[p];l.off(v,o[v])}}}},[l,o]),et.createElement(sfn.Provider,{value:c},et.createElement(Wan,bK({components:r,rehypePlugins:[Kln].concat(YSe(i||[])),remarkPlugins:[ofn].concat(YSe(a||[]))},s),n))};const vfn=jt.memo(gfn);function vP(t){"@babel/helpers - typeof";return vP=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vP(t)}var mfn=["children","components"];function xK(){return xK=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xK.apply(this,arguments)}function XSe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yfn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XSe(Object(n),!0).forEach(function(r){_fn(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XSe(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _fn(t,e,n){return e=bfn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bfn(t){var e=Efn(t,"string");return vP(e)=="symbol"?e:String(e)}function Efn(t,e){if(vP(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(vP(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function xfn(t,e){if(t==null)return{};var n=Sfn(t,e),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Sfn(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var Tfn=Wtn(),Afn=function(e){var n=e.children,r=e.components,i=xfn(e,mfn);return et.createElement(vfn,xK({components:yfn({code:Tfn},r)},i),n)};const wfn=jt.memo(Afn);var YV={exports:{}},Z2={},XV={exports:{}},qV={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qSe;function Ofn(){return qSe||(qSe=1,(function(t){function e(N,M){var k=N.length;N.push(M);e:for(;0<k;){var z=k-1>>>1,j=N[z];if(0<i(j,M))N[z]=M,N[k]=j,k=z;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var M=N[0],k=N.pop();if(k!==M){N[0]=k;e:for(var z=0,j=N.length,V=j>>>1;z<V;){var Q=2*(z+1)-1,ee=N[Q],re=Q+1,ne=N[re];if(0>i(ee,k))re<j&&0>i(ne,ee)?(N[z]=ne,N[re]=k,z=re):(N[z]=ee,N[Q]=k,z=Q);else if(re<j&&0>i(ne,k))N[z]=ne,N[re]=k,z=re;else break e}}return M}function i(N,M){var k=N.sortIndex-M.sortIndex;return k!==0?k:N.id-M.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,s=o.now();t.unstable_now=function(){return o.now()-s}}var l=[],c=[],u=1,f=null,h=3,d=!1,p=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function x(N){for(var M=n(c);M!==null;){if(M.callback===null)r(c);else if(M.startTime<=N)r(c),M.sortIndex=M.expirationTime,e(l,M);else break;M=n(c)}}function T(N){if(g=!1,x(N),!p)if(n(l)!==null)p=!0,S||(S=!0,I());else{var M=n(c);M!==null&&X(T,M.startTime-N)}}var S=!1,w=-1,C=5,D=-1;function L(){return v?!0:!(t.unstable_now()-D<C)}function B(){if(v=!1,S){var N=t.unstable_now();D=N;var M=!0;try{e:{p=!1,g&&(g=!1,_(w),w=-1),d=!0;var k=h;try{t:{for(x(N),f=n(l);f!==null&&!(f.expirationTime>N&&L());){var z=f.callback;if(typeof z=="function"){f.callback=null,h=f.priorityLevel;var j=z(f.expirationTime<=N);if(N=t.unstable_now(),typeof j=="function"){f.callback=j,x(N),M=!0;break t}f===n(l)&&r(l),x(N)}else r(l);f=n(l)}if(f!==null)M=!0;else{var V=n(c);V!==null&&X(T,V.startTime-N),M=!1}}break e}finally{f=null,h=k,d=!1}M=void 0}}finally{M?I():S=!1}}}var I;if(typeof E=="function")I=function(){E(B)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,$=U.port2;U.port1.onmessage=B,I=function(){$.postMessage(null)}}else I=function(){y(B,0)};function X(N,M){w=y(function(){N(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(N){N.callback=null},t.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_next=function(N){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var k=h;h=M;try{return N()}finally{h=k}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(N,M){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var k=h;h=N;try{return M()}finally{h=k}},t.unstable_scheduleCallback=function(N,M,k){var z=t.unstable_now();switch(typeof k=="object"&&k!==null?(k=k.delay,k=typeof k=="number"&&0<k?z+k:z):k=z,N){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=k+j,N={id:u++,callback:M,priorityLevel:N,startTime:k,expirationTime:j,sortIndex:-1},k>z?(N.sortIndex=k,e(c,N),n(l)===null&&N===n(c)&&(g?(_(w),w=-1):g=!0,X(T,k-z))):(N.sortIndex=j,e(l,N),p||d||(p=!0,S||(S=!0,I()))),N},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(N){var M=h;return function(){var k=h;h=M;try{return N.apply(this,arguments)}finally{h=k}}}})(qV)),qV}var ZSe;function Cfn(){return ZSe||(ZSe=1,XV.exports=Ofn()),XV.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KSe;function Rfn(){if(KSe)return Z2;KSe=1;var t=Cfn(),e=Jee(),n=ZIe();function r(m){var b="https://react.dev/errors/"+m;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var A=2;A<arguments.length;A++)b+="&args[]="+encodeURIComponent(arguments[A])}return"Minified React error #"+m+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function a(m){var b=m,A=m;if(m.alternate)for(;b.return;)b=b.return;else{m=b;do b=m,(b.flags&4098)!==0&&(A=b.return),m=b.return;while(m)}return b.tag===3?A:null}function o(m){if(m.tag===13){var b=m.memoizedState;if(b===null&&(m=m.alternate,m!==null&&(b=m.memoizedState)),b!==null)return b.dehydrated}return null}function s(m){if(m.tag===31){var b=m.memoizedState;if(b===null&&(m=m.alternate,m!==null&&(b=m.memoizedState)),b!==null)return b.dehydrated}return null}function l(m){if(a(m)!==m)throw Error(r(188))}function c(m){var b=m.alternate;if(!b){if(b=a(m),b===null)throw Error(r(188));return b!==m?null:m}for(var A=m,R=b;;){var G=A.return;if(G===null)break;var K=G.alternate;if(K===null){if(R=G.return,R!==null){A=R;continue}break}if(G.child===K.child){for(K=G.child;K;){if(K===A)return l(G),m;if(K===R)return l(G),b;K=K.sibling}throw Error(r(188))}if(A.return!==R.return)A=G,R=K;else{for(var oe=!1,_e=G.child;_e;){if(_e===A){oe=!0,A=G,R=K;break}if(_e===R){oe=!0,R=G,A=K;break}_e=_e.sibling}if(!oe){for(_e=K.child;_e;){if(_e===A){oe=!0,A=K,R=G;break}if(_e===R){oe=!0,R=K,A=G;break}_e=_e.sibling}if(!oe)throw Error(r(189))}}if(A.alternate!==R)throw Error(r(190))}if(A.tag!==3)throw Error(r(188));return A.stateNode.current===A?m:b}function u(m){var b=m.tag;if(b===5||b===26||b===27||b===6)return m;for(m=m.child;m!==null;){if(b=u(m),b!==null)return b;m=m.sibling}return null}var f=Object.assign,h=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),E=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function I(m){return m===null||typeof m!="object"?null:(m=B&&m[B]||m["@@iterator"],typeof m=="function"?m:null)}var U=Symbol.for("react.client.reference");function $(m){if(m==null)return null;if(typeof m=="function")return m.$$typeof===U?null:m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case T:return"Suspense";case S:return"SuspenseList";case D:return"Activity"}if(typeof m=="object")switch(m.$$typeof){case p:return"Portal";case E:return m.displayName||"Context";case _:return(m._context.displayName||"Context")+".Consumer";case x:var b=m.render;return m=m.displayName,m||(m=b.displayName||b.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case w:return b=m.displayName||null,b!==null?b:$(m.type)||"Memo";case C:b=m._payload,m=m._init;try{return $(m(b))}catch{}}return null}var X=Array.isArray,N=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,k={pending:!1,data:null,method:null,action:null},z=[],j=-1;function V(m){return{current:m}}function Q(m){0>j||(m.current=z[j],z[j]=null,j--)}function ee(m,b){j++,z[j]=m.current,m.current=b}var re=V(null),ne=V(null),le=V(null),ue=V(null);function ve(m,b){switch(ee(le,b),ee(ne,m),ee(re,null),b.nodeType){case 9:case 11:m=(m=b.documentElement)&&(m=m.namespaceURI)?nE(m):0;break;default:if(m=b.tagName,b=b.namespaceURI)b=nE(b),m=Yu(b,m);else switch(m){case"svg":m=1;break;case"math":m=2;break;default:m=0}}Q(re),ee(re,m)}function Se(){Q(re),Q(ne),Q(le)}function Re(m){m.memoizedState!==null&&ee(ue,m);var b=re.current,A=Yu(b,m.type);b!==A&&(ee(ne,m),ee(re,A))}function Xe(m){ne.current===m&&(Q(re),Q(ne)),ue.current===m&&(Q(ue),z1._currentValue=k)}var Le,Lt;function xt(m){if(Le===void 0)try{throw Error()}catch(A){var b=A.stack.trim().match(/\n( *(at )?)/);Le=b&&b[1]||"",Lt=-1<A.stack.indexOf(`
    at`)?" (<anonymous>)":-1<A.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Le+m+Lt}var dt=!1;function Bt(m,b){if(!m||dt)return"";dt=!0;var A=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var R={DetermineComponentFrameRoot:function(){try{if(b){var vn=function(){throw Error()};if(Object.defineProperty(vn.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(vn,[])}catch(Gt){var It=Gt}Reflect.construct(m,[],vn)}else{try{vn.call()}catch(Gt){It=Gt}m.call(vn.prototype)}}else{try{throw Error()}catch(Gt){It=Gt}(vn=m())&&typeof vn.catch=="function"&&vn.catch(function(){})}}catch(Gt){if(Gt&&It&&typeof Gt.stack=="string")return[Gt.stack,It.stack]}return[null,null]}};R.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var G=Object.getOwnPropertyDescriptor(R.DetermineComponentFrameRoot,"name");G&&G.configurable&&Object.defineProperty(R.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var K=R.DetermineComponentFrameRoot(),oe=K[0],_e=K[1];if(oe&&_e){var Ze=oe.split(`
`),Mt=_e.split(`
`);for(G=R=0;R<Ze.length&&!Ze[R].includes("DetermineComponentFrameRoot");)R++;for(;G<Mt.length&&!Mt[G].includes("DetermineComponentFrameRoot");)G++;if(R===Ze.length||G===Mt.length)for(R=Ze.length-1,G=Mt.length-1;1<=R&&0<=G&&Ze[R]!==Mt[G];)G--;for(;1<=R&&0<=G;R--,G--)if(Ze[R]!==Mt[G]){if(R!==1||G!==1)do if(R--,G--,0>G||Ze[R]!==Mt[G]){var an=`
`+Ze[R].replace(" at new "," at ");return m.displayName&&an.includes("<anonymous>")&&(an=an.replace("<anonymous>",m.displayName)),an}while(1<=R&&0<=G);break}}}finally{dt=!1,Error.prepareStackTrace=A}return(A=m?m.displayName||m.name:"")?xt(A):""}function At(m,b){switch(m.tag){case 26:case 27:case 5:return xt(m.type);case 16:return xt("Lazy");case 13:return m.child!==b&&b!==null?xt("Suspense Fallback"):xt("Suspense");case 19:return xt("SuspenseList");case 0:case 15:return Bt(m.type,!1);case 11:return Bt(m.type.render,!1);case 1:return Bt(m.type,!0);case 31:return xt("Activity");default:return""}}function zt(m){try{var b="",A=null;do b+=At(m,A),A=m,m=m.return;while(m);return b}catch(R){return`
Error generating stack: `+R.message+`
`+R.stack}}var rn=Object.prototype.hasOwnProperty,Wn=t.unstable_scheduleCallback,Sn=t.unstable_cancelCallback,In=t.unstable_shouldYield,de=t.unstable_requestPaint,sr=t.unstable_now,zr=t.unstable_getCurrentPriorityLevel,st=t.unstable_ImmediatePriority,Ft=t.unstable_UserBlockingPriority,An=t.unstable_NormalPriority,wn=t.unstable_LowPriority,$n=t.unstable_IdlePriority,Vr=t.log,Tr=t.unstable_setDisableYieldValue,Rr=null,ei=null;function va(m){if(typeof Vr=="function"&&Tr(m),ei&&typeof ei.setStrictMode=="function")try{ei.setStrictMode(Rr,m)}catch{}}var pi=Math.clz32?Math.clz32:nn,qo=Math.log,ft=Math.LN2;function nn(m){return m>>>=0,m===0?32:31-(qo(m)/ft|0)|0}var Yn=256,Nr=262144,ce=4194304;function H(m){var b=m&42;if(b!==0)return b;switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return m&261888;case 262144:case 524288:case 1048576:case 2097152:return m&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return m&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return m}}function W(m,b,A){var R=m.pendingLanes;if(R===0)return 0;var G=0,K=m.suspendedLanes,oe=m.pingedLanes;m=m.warmLanes;var _e=R&134217727;return _e!==0?(R=_e&~K,R!==0?G=H(R):(oe&=_e,oe!==0?G=H(oe):A||(A=_e&~m,A!==0&&(G=H(A))))):(_e=R&~K,_e!==0?G=H(_e):oe!==0?G=H(oe):A||(A=R&~m,A!==0&&(G=H(A)))),G===0?0:b!==0&&b!==G&&(b&K)===0&&(K=G&-G,A=b&-b,K>=A||K===32&&(A&4194048)!==0)?b:G}function F(m,b){return(m.pendingLanes&~(m.suspendedLanes&~m.pingedLanes)&b)===0}function Y(m,b){switch(m){case 1:case 2:case 4:case 8:case 64:return b+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function te(){var m=ce;return ce<<=1,(ce&62914560)===0&&(ce=4194304),m}function pe(m){for(var b=[],A=0;31>A;A++)b.push(m);return b}function me(m,b){m.pendingLanes|=b,b!==268435456&&(m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0)}function Ce(m,b,A,R,G,K){var oe=m.pendingLanes;m.pendingLanes=A,m.suspendedLanes=0,m.pingedLanes=0,m.warmLanes=0,m.expiredLanes&=A,m.entangledLanes&=A,m.errorRecoveryDisabledLanes&=A,m.shellSuspendCounter=0;var _e=m.entanglements,Ze=m.expirationTimes,Mt=m.hiddenUpdates;for(A=oe&~A;0<A;){var an=31-pi(A),vn=1<<an;_e[an]=0,Ze[an]=-1;var It=Mt[an];if(It!==null)for(Mt[an]=null,an=0;an<It.length;an++){var Gt=It[an];Gt!==null&&(Gt.lane&=-536870913)}A&=~vn}R!==0&&Oe(m,R,0),K!==0&&G===0&&m.tag!==0&&(m.suspendedLanes|=K&~(oe&~b))}function Oe(m,b,A){m.pendingLanes|=b,m.suspendedLanes&=~b;var R=31-pi(b);m.entangledLanes|=b,m.entanglements[R]=m.entanglements[R]|1073741824|A&261930}function ct(m,b){var A=m.entangledLanes|=b;for(m=m.entanglements;A;){var R=31-pi(A),G=1<<R;G&b|m[R]&b&&(m[R]|=b),A&=~G}}function Ge(m,b){var A=b&-b;return A=(A&42)!==0?1:$t(A),(A&(m.suspendedLanes|b))!==0?0:A}function $t(m){switch(m){case 2:m=1;break;case 8:m=4;break;case 32:m=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:m=128;break;case 268435456:m=134217728;break;default:m=0}return m}function kn(m){return m&=-m,2<m?8<m?(m&134217727)!==0?32:268435456:8:2}function _t(){var m=M.p;return m!==0?m:(m=window.event,m===void 0?32:h3(m.type))}function Jt(m,b){var A=M.p;try{return M.p=m,b()}finally{M.p=A}}var Xn=Math.random().toString(36).slice(2),$e="__reactFiber$"+Xn,_n="__reactProps$"+Xn,ar="__reactContainer$"+Xn,Hr="__reactEvents$"+Xn,ti="__reactListeners$"+Xn,ua="__reactHandles$"+Xn,Mr="__reactResources$"+Xn,Ir="__reactMarker$"+Xn;function ia(m){delete m[$e],delete m[_n],delete m[Hr],delete m[ti],delete m[ua]}function nt(m){var b=m[$e];if(b)return b;for(var A=m.parentNode;A;){if(b=A[ar]||A[$e]){if(A=b.alternate,b.child!==null||A!==null&&A.child!==null)for(m=qN(m);m!==null;){if(A=m[$e])return A;m=qN(m)}return b}m=A,A=m.parentNode}return null}function tn(m){if(m=m[$e]||m[ar]){var b=m.tag;if(b===5||b===6||b===13||b===31||b===26||b===27||b===3)return m}return null}function er(m){var b=m.tag;if(b===5||b===26||b===27||b===6)return m.stateNode;throw Error(r(33))}function mn(m){var b=m[Mr];return b||(b=m[Mr]={hoistableStyles:new Map,hoistableScripts:new Map}),b}function Yr(m){m[Ir]=!0}var Gi=new Set,Fi={};function Ti(m,b){Oa(m,b),Oa(m+"Capture",b)}function Oa(m,b){for(Fi[m]=b,m=0;m<b.length;m++)Gi.add(b[m])}var ln=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hn={},si={};function Wi(m){return rn.call(si,m)?!0:rn.call(Hn,m)?!1:ln.test(m)?si[m]=!0:(Hn[m]=!0,!1)}function Lr(m,b,A){if(Wi(b))if(A===null)m.removeAttribute(b);else{switch(typeof A){case"undefined":case"function":case"symbol":m.removeAttribute(b);return;case"boolean":var R=b.toLowerCase().slice(0,5);if(R!=="data-"&&R!=="aria-"){m.removeAttribute(b);return}}m.setAttribute(b,""+A)}}function Ii(m,b,A){if(A===null)m.removeAttribute(b);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(b);return}m.setAttribute(b,""+A)}}function Xi(m,b,A,R){if(R===null)m.removeAttribute(A);else{switch(typeof R){case"undefined":case"function":case"symbol":case"boolean":m.removeAttribute(A);return}m.setAttributeNS(b,A,""+R)}}function Ai(m){switch(typeof m){case"bigint":case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function qi(m){var b=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function Zl(m,b,A){var R=Object.getOwnPropertyDescriptor(m.constructor.prototype,b);if(!m.hasOwnProperty(b)&&typeof R<"u"&&typeof R.get=="function"&&typeof R.set=="function"){var G=R.get,K=R.set;return Object.defineProperty(m,b,{configurable:!0,get:function(){return G.call(this)},set:function(oe){A=""+oe,K.call(this,oe)}}),Object.defineProperty(m,b,{enumerable:R.enumerable}),{getValue:function(){return A},setValue:function(oe){A=""+oe},stopTracking:function(){m._valueTracker=null,delete m[b]}}}}function Du(m){if(!m._valueTracker){var b=qi(m)?"checked":"value";m._valueTracker=Zl(m,b,""+m[b])}}function yl(m){if(!m)return!1;var b=m._valueTracker;if(!b)return!0;var A=b.getValue(),R="";return m&&(R=qi(m)?m.checked?"true":"false":m.value),m=R,m!==A?(b.setValue(m),!0):!1}function js(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}var Ud=/[\n"\\]/g;function Po(m){return m.replace(Ud,function(b){return"\\"+b.charCodeAt(0).toString(16)+" "})}function ru(m,b,A,R,G,K,oe,_e){m.name="",oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"?m.type=oe:m.removeAttribute("type"),b!=null?oe==="number"?(b===0&&m.value===""||m.value!=b)&&(m.value=""+Ai(b)):m.value!==""+Ai(b)&&(m.value=""+Ai(b)):oe!=="submit"&&oe!=="reset"||m.removeAttribute("value"),b!=null?Hh(m,oe,Ai(b)):A!=null?Hh(m,oe,Ai(A)):R!=null&&m.removeAttribute("value"),G==null&&K!=null&&(m.defaultChecked=!!K),G!=null&&(m.checked=G&&typeof G!="function"&&typeof G!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?m.name=""+Ai(_e):m.removeAttribute("name")}function Kl(m,b,A,R,G,K,oe,_e){if(K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(m.type=K),b!=null||A!=null){if(!(K!=="submit"&&K!=="reset"||b!=null)){Du(m);return}A=A!=null?""+Ai(A):"",b=b!=null?""+Ai(b):A,_e||b===m.value||(m.value=b),m.defaultValue=b}R=R??G,R=typeof R!="function"&&typeof R!="symbol"&&!!R,m.checked=_e?m.checked:!!R,m.defaultChecked=!!R,oe!=null&&typeof oe!="function"&&typeof oe!="symbol"&&typeof oe!="boolean"&&(m.name=oe),Du(m)}function Hh(m,b,A){b==="number"&&js(m.ownerDocument)===m||m.defaultValue===""+A||(m.defaultValue=""+A)}function iu(m,b,A,R){if(m=m.options,b){b={};for(var G=0;G<A.length;G++)b["$"+A[G]]=!0;for(A=0;A<m.length;A++)G=b.hasOwnProperty("$"+m[A].value),m[A].selected!==G&&(m[A].selected=G),G&&R&&(m[A].defaultSelected=!0)}else{for(A=""+Ai(A),b=null,G=0;G<m.length;G++){if(m[G].value===A){m[G].selected=!0,R&&(m[G].defaultSelected=!0);return}b!==null||m[G].disabled||(b=m[G])}b!==null&&(b.selected=!0)}}function he(m,b,A){if(b!=null&&(b=""+Ai(b),b!==m.value&&(m.value=b),A==null)){m.defaultValue!==b&&(m.defaultValue=b);return}m.defaultValue=A!=null?""+Ai(A):""}function Te(m,b,A,R){if(b==null){if(R!=null){if(A!=null)throw Error(r(92));if(X(R)){if(1<R.length)throw Error(r(93));R=R[0]}A=R}A==null&&(A=""),b=A}A=Ai(b),m.defaultValue=A,R=m.textContent,R===A&&R!==""&&R!==null&&(m.value=R),Du(m)}function Fe(m,b){if(b){var A=m.firstChild;if(A&&A===m.lastChild&&A.nodeType===3){A.nodeValue=b;return}}m.textContent=b}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function On(m,b,A){var R=b.indexOf("--")===0;A==null||typeof A=="boolean"||A===""?R?m.setProperty(b,""):b==="float"?m.cssFloat="":m[b]="":R?m.setProperty(b,A):typeof A!="number"||A===0||Et.has(b)?b==="float"?m.cssFloat=A:m[b]=(""+A).trim():m[b]=A+"px"}function lr(m,b,A){if(b!=null&&typeof b!="object")throw Error(r(62));if(m=m.style,A!=null){for(var R in A)!A.hasOwnProperty(R)||b!=null&&b.hasOwnProperty(R)||(R.indexOf("--")===0?m.setProperty(R,""):R==="float"?m.cssFloat="":m[R]="");for(var G in b)R=b[G],b.hasOwnProperty(G)&&A[G]!==R&&On(m,G,R)}else for(var K in b)b.hasOwnProperty(K)&&On(m,K,b[K])}function gi(m){if(m.indexOf("-")===-1)return!1;switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var No=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hr(m){return cr.test(""+m)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":m}function Xr(){}var Pa=null;function _l(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var Bu=null,jd=null;function cS(m){var b=tn(m);if(b&&(m=b.stateNode)){var A=m[_n]||null;e:switch(m=b.stateNode,b.type){case"input":if(ru(m,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name),b=A.name,A.type==="radio"&&b!=null){for(A=m;A.parentNode;)A=A.parentNode;for(A=A.querySelectorAll('input[name="'+Po(""+b)+'"][type="radio"]'),b=0;b<A.length;b++){var R=A[b];if(R!==m&&R.form===m.form){var G=R[_n]||null;if(!G)throw Error(r(90));ru(R,G.value,G.defaultValue,G.defaultValue,G.checked,G.defaultChecked,G.type,G.name)}}for(b=0;b<A.length;b++)R=A[b],R.form===m.form&&yl(R)}break e;case"textarea":he(m,A.value,A.defaultValue);break e;case"select":b=A.value,b!=null&&iu(m,!!A.multiple,b,!1)}}}var _b=!1;function uS(m,b,A){if(_b)return m(b,A);_b=!0;try{var R=m(b);return R}finally{if(_b=!1,(Bu!==null||jd!==null)&&(US(),Bu&&(b=Bu,m=jd,jd=Bu=null,cS(b),m)))for(b=0;b<m.length;b++)cS(m[b])}}function au(m,b){var A=m.stateNode;if(A===null)return null;var R=A[_n]||null;if(R===null)return null;A=R[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(R=!R.disabled)||(m=m.type,R=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!R;break e;default:m=!1}if(m)return null;if(A&&typeof A!="function")throw Error(r(231,b,typeof A));return A}var Gh=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bb=!1;if(Gh)try{var zd={};Object.defineProperty(zd,"passive",{get:function(){bb=!0}}),window.addEventListener("test",zd,zd),window.removeEventListener("test",zd,zd)}catch{bb=!1}var th=null,Gy=null,Za=null;function lo(){if(Za)return Za;var m,b=Gy,A=b.length,R,G="value"in th?th.value:th.textContent,K=G.length;for(m=0;m<A&&b[m]===G[m];m++);var oe=A-m;for(R=1;R<=oe&&b[A-R]===G[K-R];R++);return Za=G.slice(m,1<R?1-R:void 0)}function hv(m){var b=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&b===13&&(m=13)):m=b,m===10&&(m=13),32<=m||m===13?m:0}function dv(){return!0}function Wh(){return!1}function kl(m){function b(A,R,G,K,oe){this._reactName=A,this._targetInst=G,this.type=R,this.nativeEvent=K,this.target=oe,this.currentTarget=null;for(var _e in m)m.hasOwnProperty(_e)&&(A=m[_e],this[_e]=A?A(K):K[_e]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?dv:Wh,this.isPropagationStopped=Wh,this}return f(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var A=this.nativeEvent;A&&(A.preventDefault?A.preventDefault():typeof A.returnValue!="unknown"&&(A.returnValue=!1),this.isDefaultPrevented=dv)},stopPropagation:function(){var A=this.nativeEvent;A&&(A.stopPropagation?A.stopPropagation():typeof A.cancelBubble!="unknown"&&(A.cancelBubble=!0),this.isPropagationStopped=dv)},persist:function(){},isPersistent:dv}),b}var $d={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o0=kl($d),pv=f({},$d,{view:0,detail:0}),lO=kl(pv),el,s0,gf,l0=f({},pv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gv,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==gf&&(gf&&m.type==="mousemove"?(el=m.screenX-gf.screenX,s0=m.screenY-gf.screenY):s0=el=0,gf=m),el)},movementY:function(m){return"movementY"in m?m.movementY:s0}}),Wy=kl(l0),Dl=f({},l0,{dataTransfer:0}),fS=kl(Dl),hS=f({},pv,{relatedTarget:0}),Hd=kl(hS),dS=f({},$d,{animationName:0,elapsedTime:0,pseudoElement:0}),ng=kl(dS),Eb=f({},$d,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),bl=kl(Eb),pS=f({},$d,{data:0}),tl=kl(pS),xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Vy(m){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(m):(m=Gd[m])?!!b[m]:!1}function gv(){return Vy}var Zo=f({},pv,{key:function(m){if(m.key){var b=xb[m.key]||m.key;if(b!=="Unidentified")return b}return m.type==="keypress"?(m=hv(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?gS[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gv,charCode:function(m){return m.type==="keypress"?hv(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?hv(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),Wd=kl(Zo),Yy=f({},l0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ko=kl(Yy),Xy=f({},pv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gv}),cO=kl(Xy),Vh=f({},$d,{propertyName:0,elapsedTime:0,pseudoElement:0}),vS=kl(Vh),c0=f({},l0,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),nh=kl(c0),Vd=f({},$d,{newState:0,oldState:0}),qy=kl(Vd),vv=[9,13,27,32],rg=Gh&&"CompositionEvent"in window,Yd=null;Gh&&"documentMode"in document&&(Yd=document.documentMode);var u0=Gh&&"TextEvent"in window&&!Yd,Zy=Gh&&(!rg||Yd&&8<Yd&&11>=Yd),mS=" ",Ky=!1;function Qy(m,b){switch(m){case"keyup":return vv.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yS(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Yh=!1;function Ql(m,b){switch(m){case"compositionend":return yS(b);case"keypress":return b.which!==32?null:(Ky=!0,mS);case"textInput":return m=b.data,m===mS&&Ky?null:m;default:return null}}function f0(m,b){if(Yh)return m==="compositionend"||!rg&&Qy(m,b)?(m=lo(),Za=Gy=th=null,Yh=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return Zy&&b.locale!=="ko"?null:b.data;default:return null}}var ig={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xd(m){var b=m&&m.nodeName&&m.nodeName.toLowerCase();return b==="input"?!!ig[m.type]:b==="textarea"}function h0(m,b,A,R){Bu?jd?jd.push(R):jd=[R]:Bu=R,b=Qb(b,"onChange"),0<b.length&&(A=new o0("onChange","change",null,A,R),m.push({event:A,listeners:b}))}var ag=null,og=null;function Sb(m){jN(m,0)}function d0(m){var b=er(m);if(yl(b))return m}function Tb(m,b){if(m==="change")return b}var qd=!1;if(Gh){var Jy;if(Gh){var e1="oninput"in document;if(!e1){var p0=document.createElement("div");p0.setAttribute("oninput","return;"),e1=typeof p0.oninput=="function"}Jy=e1}else Jy=!1;qd=Jy&&(!document.documentMode||9<document.documentMode)}function t1(){ag&&(ag.detachEvent("onpropertychange",rh),og=ag=null)}function rh(m){if(m.propertyName==="value"&&d0(og)){var b=[];h0(b,og,m,_l(m)),uS(Sb,b)}}function Xh(m,b,A){m==="focusin"?(t1(),ag=b,og=A,ag.attachEvent("onpropertychange",rh)):m==="focusout"&&t1()}function Ab(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return d0(og)}function wb(m,b){if(m==="click")return d0(b)}function g0(m,b){if(m==="input"||m==="change")return d0(b)}function mv(m,b){return m===b&&(m!==0||1/m===1/b)||m!==m&&b!==b}var os=typeof Object.is=="function"?Object.is:mv;function yv(m,b){if(os(m,b))return!0;if(typeof m!="object"||m===null||typeof b!="object"||b===null)return!1;var A=Object.keys(m),R=Object.keys(b);if(A.length!==R.length)return!1;for(R=0;R<A.length;R++){var G=A[R];if(!rn.call(b,G)||!os(m[G],b[G]))return!1}return!0}function n1(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function _S(m,b){var A=n1(m);m=0;for(var R;A;){if(A.nodeType===3){if(R=m+A.textContent.length,m<=b&&R>=b)return{node:A,offset:b-m};m=R}e:{for(;A;){if(A.nextSibling){A=A.nextSibling;break e}A=A.parentNode}A=void 0}A=n1(A)}}function bS(m,b){return m&&b?m===b?!0:m&&m.nodeType===3?!1:b&&b.nodeType===3?bS(m,b.parentNode):"contains"in m?m.contains(b):m.compareDocumentPosition?!!(m.compareDocumentPosition(b)&16):!1:!1}function ES(m){m=m!=null&&m.ownerDocument!=null&&m.ownerDocument.defaultView!=null?m.ownerDocument.defaultView:window;for(var b=js(m.document);b instanceof m.HTMLIFrameElement;){try{var A=typeof b.contentWindow.location.href=="string"}catch{A=!1}if(A)m=b.contentWindow;else break;b=js(m.document)}return b}function v0(m){var b=m&&m.nodeName&&m.nodeName.toLowerCase();return b&&(b==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||b==="textarea"||m.contentEditable==="true")}var _v=Gh&&"documentMode"in document&&11>=document.documentMode,lt=null,en=null,Ut=null,Er=!1;function wi(m,b,A){var R=A.window===A?A.document:A.nodeType===9?A:A.ownerDocument;Er||lt==null||lt!==js(R)||(R=lt,"selectionStart"in R&&v0(R)?R={start:R.selectionStart,end:R.selectionEnd}:(R=(R.ownerDocument&&R.ownerDocument.defaultView||window).getSelection(),R={anchorNode:R.anchorNode,anchorOffset:R.anchorOffset,focusNode:R.focusNode,focusOffset:R.focusOffset}),Ut&&yv(Ut,R)||(Ut=R,R=Qb(en,"onSelect"),0<R.length&&(b=new o0("onSelect","select",null,b,A),m.push({event:b,listeners:R}),b.target=lt)))}function Zi(m,b){var A={};return A[m.toLowerCase()]=b.toLowerCase(),A["Webkit"+m]="webkit"+b,A["Moz"+m]="moz"+b,A}var Qo={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Ka={},r1={};Gh&&(r1=document.createElement("div").style,"AnimationEvent"in window||(delete Qo.animationend.animation,delete Qo.animationiteration.animation,delete Qo.animationstart.animation),"TransitionEvent"in window||delete Qo.transitionend.transition);function sg(m){if(Ka[m])return Ka[m];if(!Qo[m])return m;var b=Qo[m],A;for(A in b)if(b.hasOwnProperty(A)&&A in r1)return Ka[m]=b[A];return m}var ou=sg("animationend"),m0=sg("animationiteration"),xS=sg("animationstart"),lg=sg("transitionrun"),cg=sg("transitionstart"),i1=sg("transitioncancel"),Ca=sg("transitionend"),su=new Map,qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");qh.push("scrollEnd");function Ec(m,b){su.set(m,b),Ti(b,[m])}var y0=typeof reportError=="function"?reportError:function(m){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var b=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof m=="object"&&m!==null&&typeof m.message=="string"?String(m.message):String(m),error:m});if(!window.dispatchEvent(b))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",m);return}console.error(m)},lu=[],ug=0,fg=0;function Fu(){for(var m=ug,b=fg=ug=0;b<m;){var A=lu[b];lu[b++]=null;var R=lu[b];lu[b++]=null;var G=lu[b];lu[b++]=null;var K=lu[b];if(lu[b++]=null,R!==null&&G!==null){var oe=R.pending;oe===null?G.next=G:(G.next=oe.next,oe.next=G),R.pending=G}K!==0&&a1(A,G,K)}}function hg(m,b,A,R){lu[ug++]=m,lu[ug++]=b,lu[ug++]=A,lu[ug++]=R,fg|=R,m.lanes|=R,m=m.alternate,m!==null&&(m.lanes|=R)}function Zh(m,b,A,R){return hg(m,b,A,R),bv(m)}function co(m,b){return hg(m,null,null,b),bv(m)}function a1(m,b,A){m.lanes|=A;var R=m.alternate;R!==null&&(R.lanes|=A);for(var G=!1,K=m.return;K!==null;)K.childLanes|=A,R=K.alternate,R!==null&&(R.childLanes|=A),K.tag===22&&(m=K.stateNode,m===null||m._visibility&1||(G=!0)),m=K,K=K.return;return m.tag===3?(K=m.stateNode,G&&b!==null&&(G=31-pi(A),m=K.hiddenUpdates,R=m[G],R===null?m[G]=[b]:R.push(b),b.lane=A|536870912),K):null}function bv(m){if(50<Wb)throw Wb=0,_O=null,Error(r(185));for(var b=m.return;b!==null;)m=b,b=m.return;return m.tag===3?m.stateNode:null}var xc={};function Ob(m,b,A,R){this.tag=m,this.key=A,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=R,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function El(m,b,A,R){return new Ob(m,b,A,R)}function Kh(m){return m=m.prototype,!(!m||!m.isReactComponent)}function Uu(m,b){var A=m.alternate;return A===null?(A=El(m.tag,b,m.key,m.mode),A.elementType=m.elementType,A.type=m.type,A.stateNode=m.stateNode,A.alternate=m,m.alternate=A):(A.pendingProps=b,A.type=m.type,A.flags=0,A.subtreeFlags=0,A.deletions=null),A.flags=m.flags&65011712,A.childLanes=m.childLanes,A.lanes=m.lanes,A.child=m.child,A.memoizedProps=m.memoizedProps,A.memoizedState=m.memoizedState,A.updateQueue=m.updateQueue,b=m.dependencies,A.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},A.sibling=m.sibling,A.index=m.index,A.ref=m.ref,A.refCleanup=m.refCleanup,A}function SS(m,b){m.flags&=65011714;var A=m.alternate;return A===null?(m.childLanes=0,m.lanes=b,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=A.childLanes,m.lanes=A.lanes,m.child=A.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=A.memoizedProps,m.memoizedState=A.memoizedState,m.updateQueue=A.updateQueue,m.type=A.type,b=A.dependencies,m.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),m}function o1(m,b,A,R,G,K){var oe=0;if(R=m,typeof m=="function")Kh(m)&&(oe=1);else if(typeof m=="string")oe=y8(m,A,re.current)?26:m==="html"||m==="head"||m==="body"?27:5;else e:switch(m){case D:return m=El(31,A,b,G),m.elementType=D,m.lanes=K,m;case g:return Qh(A.children,G,K,b);case v:oe=8,G|=24;break;case y:return m=El(12,A,b,G|2),m.elementType=y,m.lanes=K,m;case T:return m=El(13,A,b,G),m.elementType=T,m.lanes=K,m;case S:return m=El(19,A,b,G),m.elementType=S,m.lanes=K,m;default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case E:oe=10;break e;case _:oe=9;break e;case x:oe=11;break e;case w:oe=14;break e;case C:oe=16,R=null;break e}oe=29,A=Error(r(130,m===null?"null":typeof m,"")),R=null}return b=El(oe,A,b,G),b.elementType=m,b.type=R,b.lanes=K,b}function Qh(m,b,A,R){return m=El(7,m,R,b),m.lanes=A,m}function dg(m,b,A){return m=El(6,m,null,b),m.lanes=A,m}function _0(m){var b=El(18,null,null,0);return b.stateNode=m,b}function Ev(m,b,A){return b=El(4,m.children!==null?m.children:[],m.key,b),b.lanes=A,b.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},b}var Cb=new WeakMap;function cu(m,b){if(typeof m=="object"&&m!==null){var A=Cb.get(m);return A!==void 0?A:(b={value:m,source:b,stack:zt(b)},Cb.set(m,b),b)}return{value:m,source:b,stack:zt(b)}}var Jh=[],xv=0,Qa=null,ss=0,uu=[],fu=0,ih=null,vf=1,hu="";function Dc(m,b){Jh[xv++]=ss,Jh[xv++]=Qa,Qa=m,ss=b}function b0(m,b,A){uu[fu++]=vf,uu[fu++]=hu,uu[fu++]=ih,ih=m;var R=vf;m=hu;var G=32-pi(R)-1;R&=~(1<<G),A+=1;var K=32-pi(b)+G;if(30<K){var oe=G-G%5;K=(R&(1<<oe)-1).toString(32),R>>=oe,G-=oe,vf=1<<32-pi(b)+G|A<<G|R,hu=K+m}else vf=1<<K|A<<G|R,hu=m}function ed(m){m.return!==null&&(Dc(m,1),b0(m,1,0))}function Zd(m){for(;m===Qa;)Qa=Jh[--xv],Jh[xv]=null,ss=Jh[--xv],Jh[xv]=null;for(;m===ih;)ih=uu[--fu],uu[fu]=null,hu=uu[--fu],uu[fu]=null,vf=uu[--fu],uu[fu]=null}function Jl(m,b){uu[fu++]=vf,uu[fu++]=hu,uu[fu++]=ih,vf=b.id,hu=b.overflow,ih=m}var xs=null,za=null,Li=!1,ah=null,xl=!1,Sv=Error(r(519));function td(m){var b=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Jd(cu(b,m)),Sv}function Tv(m){var b=m.stateNode,A=m.type,R=m.memoizedProps;switch(b[$e]=m,b[_n]=R,A){case"dialog":ya("cancel",b),ya("close",b);break;case"iframe":case"object":case"embed":ya("load",b);break;case"video":case"audio":for(A=0;A<Kb.length;A++)ya(Kb[A],b);break;case"source":ya("error",b);break;case"img":case"image":case"link":ya("error",b),ya("load",b);break;case"details":ya("toggle",b);break;case"input":ya("invalid",b),Kl(b,R.value,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name,!0);break;case"select":ya("invalid",b);break;case"textarea":ya("invalid",b),Te(b,R.value,R.defaultValue,R.children)}A=R.children,typeof A!="string"&&typeof A!="number"&&typeof A!="bigint"||b.textContent===""+A||R.suppressHydrationWarning===!0||HN(b.textContent,A)?(R.popover!=null&&(ya("beforetoggle",b),ya("toggle",b)),R.onScroll!=null&&ya("scroll",b),R.onScrollEnd!=null&&ya("scrollend",b),R.onClick!=null&&(b.onclick=Xr),b=!0):b=!1,b||td(m,!0)}function pg(m){for(xs=m.return;xs;)switch(xs.tag){case 5:case 31:case 13:xl=!1;return;case 27:case 3:xl=!0;return;default:xs=xs.return}}function Kd(m){if(m!==xs)return!1;if(!Li)return pg(m),Li=!0,!1;var b=m.tag,A;if((A=b!==3&&b!==27)&&((A=b===5)&&(A=m.type,A=!(A!=="form"&&A!=="button")||Zv(m.type,m.memoizedProps)),A=!A),A&&za&&td(m),pg(m),b===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));za=XN(m)}else if(b===31){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));za=XN(m)}else b===27?(b=za,bi(m.type)?(m=UO,UO=null,za=m):za=b):za=xs?gh(m.stateNode.nextSibling):null;return!0}function ye(){za=xs=null,Li=!1}function Qd(){var m=ah;return m!==null&&(Gu===null?Gu=m:Gu.push.apply(Gu,m),ah=null),m}function Jd(m){ah===null?ah=[m]:ah.push(m)}var Bc=V(null),Ui=null,nd=null;function ep(m,b,A){ee(Bc,b._currentValue),b._currentValue=A}function rd(m){m._currentValue=Bc.current,Q(Bc)}function oh(m,b,A){for(;m!==null;){var R=m.alternate;if((m.childLanes&b)!==b?(m.childLanes|=b,R!==null&&(R.childLanes|=b)):R!==null&&(R.childLanes&b)!==b&&(R.childLanes|=b),m===A)break;m=m.return}}function s1(m,b,A,R){var G=m.child;for(G!==null&&(G.return=m);G!==null;){var K=G.dependencies;if(K!==null){var oe=G.child;K=K.firstContext;e:for(;K!==null;){var _e=K;K=G;for(var Ze=0;Ze<b.length;Ze++)if(_e.context===b[Ze]){K.lanes|=A,_e=K.alternate,_e!==null&&(_e.lanes|=A),oh(K.return,A,m),R||(oe=null);break e}K=_e.next}}else if(G.tag===18){if(oe=G.return,oe===null)throw Error(r(341));oe.lanes|=A,K=oe.alternate,K!==null&&(K.lanes|=A),oh(oe,A,m),oe=null}else oe=G.child;if(oe!==null)oe.return=G;else for(oe=G;oe!==null;){if(oe===m){oe=null;break}if(G=oe.sibling,G!==null){G.return=oe.return,oe=G;break}oe=oe.return}G=oe}}function Av(m,b,A,R){m=null;for(var G=b,K=!1;G!==null;){if(!K){if((G.flags&524288)!==0)K=!0;else if((G.flags&262144)!==0)break}if(G.tag===10){var oe=G.alternate;if(oe===null)throw Error(r(387));if(oe=oe.memoizedProps,oe!==null){var _e=G.type;os(G.pendingProps.value,oe.value)||(m!==null?m.push(_e):m=[_e])}}else if(G===ue.current){if(oe=G.alternate,oe===null)throw Error(r(387));oe.memoizedState.memoizedState!==G.memoizedState.memoizedState&&(m!==null?m.push(z1):m=[z1])}G=G.return}m!==null&&s1(b,m,A,R),b.flags|=262144}function l1(m){for(m=m.firstContext;m!==null;){if(!os(m.context._currentValue,m.memoizedValue))return!0;m=m.next}return!1}function id(m){Ui=m,nd=null,m=m.dependencies,m!==null&&(m.firstContext=null)}function zs(m){return TS(Ui,m)}function ju(m,b){return Ui===null&&id(m),TS(m,b)}function TS(m,b){var A=b._currentValue;if(b={context:b,memoizedValue:A,next:null},nd===null){if(m===null)throw Error(r(308));nd=b,m.dependencies={lanes:0,firstContext:b},m.flags|=524288}else nd=nd.next=b;return A}var uO=typeof AbortController<"u"?AbortController:function(){var m=[],b=this.signal={aborted:!1,addEventListener:function(A,R){m.push(R)}};this.abort=function(){b.aborted=!0,m.forEach(function(A){return A()})}},fO=t.unstable_scheduleCallback,hO=t.unstable_NormalPriority,Ss={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mf(){return{controller:new uO,data:new Map,refCount:0}}function E0(m){m.refCount--,m.refCount===0&&fO(hO,function(){m.controller.abort()})}var x0=null,Rb=0,wv=0,yf=null;function gg(m,b){if(x0===null){var A=x0=[];Rb=0,wv=Mf(),yf={status:"pending",value:void 0,then:function(R){A.push(R)}}}return Rb++,b.then(AS,AS),b}function AS(){if(--Rb===0&&x0!==null){yf!==null&&(yf.status="fulfilled");var m=x0;x0=null,wv=0,yf=null;for(var b=0;b<m.length;b++)(0,m[b])()}}function wS(m,b){var A=[],R={status:"pending",value:null,reason:null,then:function(G){A.push(G)}};return m.then(function(){R.status="fulfilled",R.value=b;for(var G=0;G<A.length;G++)(0,A[G])(b)},function(G){for(R.status="rejected",R.reason=G,G=0;G<A.length;G++)(0,A[G])(void 0)}),R}var Fc=N.S;N.S=function(m,b){xN=sr(),typeof b=="object"&&b!==null&&typeof b.then=="function"&&gg(m,b),Fc!==null&&Fc(m,b)};var vg=V(null);function c1(){var m=vg.current;return m!==null?m:Do.pooledCache}function u1(m,b){b===null?ee(vg,vg.current):ee(vg,b.pool)}function OS(){var m=c1();return m===null?null:{parent:Ss._currentValue,pool:m}}var Ov=Error(r(460)),f1=Error(r(474)),S0=Error(r(542)),tp={then:function(){}};function CS(m){return m=m.status,m==="fulfilled"||m==="rejected"}function mg(m,b,A){switch(A=m[A],A===void 0?m.push(b):A!==b&&(b.then(Xr,Xr),b=A),b.status){case"fulfilled":return b.value;case"rejected":throw m=b.reason,Mb(m),m;default:if(typeof b.status=="string")b.then(Xr,Xr);else{if(m=Do,m!==null&&100<m.shellSuspendCounter)throw Error(r(482));m=b,m.status="pending",m.then(function(R){if(b.status==="pending"){var G=b;G.status="fulfilled",G.value=R}},function(R){if(b.status==="pending"){var G=b;G.status="rejected",G.reason=R}})}switch(b.status){case"fulfilled":return b.value;case"rejected":throw m=b.reason,Mb(m),m}throw Sc=b,Ov}}function _f(m){try{var b=m._init;return b(m._payload)}catch(A){throw A!==null&&typeof A=="object"&&typeof A.then=="function"?(Sc=A,Ov):A}}var Sc=null;function yg(){if(Sc===null)throw Error(r(459));var m=Sc;return Sc=null,m}function Mb(m){if(m===Ov||m===S0)throw Error(r(483))}var bf=null,Uc=0;function Ef(m){var b=Uc;return Uc+=1,bf===null&&(bf=[]),mg(bf,m,b)}function du(m,b){b=b.props.ref,m.ref=b!==void 0?b:null}function ec(m,b){throw b.$$typeof===h?Error(r(525)):(m=Object.prototype.toString.call(b),Error(r(31,m==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":m)))}function Pb(m){function b(mt,rt){if(m){var Rt=mt.deletions;Rt===null?(mt.deletions=[rt],mt.flags|=16):Rt.push(rt)}}function A(mt,rt){if(!m)return null;for(;rt!==null;)b(mt,rt),rt=rt.sibling;return null}function R(mt){for(var rt=new Map;mt!==null;)mt.key!==null?rt.set(mt.key,mt):rt.set(mt.index,mt),mt=mt.sibling;return rt}function G(mt,rt){return mt=Uu(mt,rt),mt.index=0,mt.sibling=null,mt}function K(mt,rt,Rt){return mt.index=Rt,m?(Rt=mt.alternate,Rt!==null?(Rt=Rt.index,Rt<rt?(mt.flags|=67108866,rt):Rt):(mt.flags|=67108866,rt)):(mt.flags|=1048576,rt)}function oe(mt){return m&&mt.alternate===null&&(mt.flags|=67108866),mt}function _e(mt,rt,Rt,hn){return rt===null||rt.tag!==6?(rt=dg(Rt,mt.mode,hn),rt.return=mt,rt):(rt=G(rt,Rt),rt.return=mt,rt)}function Ze(mt,rt,Rt,hn){var ri=Rt.type;return ri===g?an(mt,rt,Rt.props.children,hn,Rt.key):rt!==null&&(rt.elementType===ri||typeof ri=="object"&&ri!==null&&ri.$$typeof===C&&_f(ri)===rt.type)?(rt=G(rt,Rt.props),du(rt,Rt),rt.return=mt,rt):(rt=o1(Rt.type,Rt.key,Rt.props,null,mt.mode,hn),du(rt,Rt),rt.return=mt,rt)}function Mt(mt,rt,Rt,hn){return rt===null||rt.tag!==4||rt.stateNode.containerInfo!==Rt.containerInfo||rt.stateNode.implementation!==Rt.implementation?(rt=Ev(Rt,mt.mode,hn),rt.return=mt,rt):(rt=G(rt,Rt.children||[]),rt.return=mt,rt)}function an(mt,rt,Rt,hn,ri){return rt===null||rt.tag!==7?(rt=Qh(Rt,mt.mode,hn,ri),rt.return=mt,rt):(rt=G(rt,Rt),rt.return=mt,rt)}function vn(mt,rt,Rt){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return rt=dg(""+rt,mt.mode,Rt),rt.return=mt,rt;if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case d:return Rt=o1(rt.type,rt.key,rt.props,null,mt.mode,Rt),du(Rt,rt),Rt.return=mt,Rt;case p:return rt=Ev(rt,mt.mode,Rt),rt.return=mt,rt;case C:return rt=_f(rt),vn(mt,rt,Rt)}if(X(rt)||I(rt))return rt=Qh(rt,mt.mode,Rt,null),rt.return=mt,rt;if(typeof rt.then=="function")return vn(mt,Ef(rt),Rt);if(rt.$$typeof===E)return vn(mt,ju(mt,rt),Rt);ec(mt,rt)}return null}function It(mt,rt,Rt,hn){var ri=rt!==null?rt.key:null;if(typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint")return ri!==null?null:_e(mt,rt,""+Rt,hn);if(typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case d:return Rt.key===ri?Ze(mt,rt,Rt,hn):null;case p:return Rt.key===ri?Mt(mt,rt,Rt,hn):null;case C:return Rt=_f(Rt),It(mt,rt,Rt,hn)}if(X(Rt)||I(Rt))return ri!==null?null:an(mt,rt,Rt,hn,null);if(typeof Rt.then=="function")return It(mt,rt,Ef(Rt),hn);if(Rt.$$typeof===E)return It(mt,rt,ju(mt,Rt),hn);ec(mt,Rt)}return null}function Gt(mt,rt,Rt,hn,ri){if(typeof hn=="string"&&hn!==""||typeof hn=="number"||typeof hn=="bigint")return mt=mt.get(Rt)||null,_e(rt,mt,""+hn,ri);if(typeof hn=="object"&&hn!==null){switch(hn.$$typeof){case d:return mt=mt.get(hn.key===null?Rt:hn.key)||null,Ze(rt,mt,hn,ri);case p:return mt=mt.get(hn.key===null?Rt:hn.key)||null,Mt(rt,mt,hn,ri);case C:return hn=_f(hn),Gt(mt,rt,Rt,hn,ri)}if(X(hn)||I(hn))return mt=mt.get(Rt)||null,an(rt,mt,hn,ri,null);if(typeof hn.then=="function")return Gt(mt,rt,Rt,Ef(hn),ri);if(hn.$$typeof===E)return Gt(mt,rt,Rt,ju(rt,hn),ri);ec(rt,hn)}return null}function Fr(mt,rt,Rt,hn){for(var ri=null,Ha=null,Gr=rt,na=rt=0,xa=null;Gr!==null&&na<Rt.length;na++){Gr.index>na?(xa=Gr,Gr=null):xa=Gr.sibling;var Ga=It(mt,Gr,Rt[na],hn);if(Ga===null){Gr===null&&(Gr=xa);break}m&&Gr&&Ga.alternate===null&&b(mt,Gr),rt=K(Ga,rt,na),Ha===null?ri=Ga:Ha.sibling=Ga,Ha=Ga,Gr=xa}if(na===Rt.length)return A(mt,Gr),Li&&Dc(mt,na),ri;if(Gr===null){for(;na<Rt.length;na++)Gr=vn(mt,Rt[na],hn),Gr!==null&&(rt=K(Gr,rt,na),Ha===null?ri=Gr:Ha.sibling=Gr,Ha=Gr);return Li&&Dc(mt,na),ri}for(Gr=R(Gr);na<Rt.length;na++)xa=Gt(Gr,mt,na,Rt[na],hn),xa!==null&&(m&&xa.alternate!==null&&Gr.delete(xa.key===null?na:xa.key),rt=K(xa,rt,na),Ha===null?ri=xa:Ha.sibling=xa,Ha=xa);return m&&Gr.forEach(function(nm){return b(mt,nm)}),Li&&Dc(mt,na),ri}function hi(mt,rt,Rt,hn){if(Rt==null)throw Error(r(151));for(var ri=null,Ha=null,Gr=rt,na=rt=0,xa=null,Ga=Rt.next();Gr!==null&&!Ga.done;na++,Ga=Rt.next()){Gr.index>na?(xa=Gr,Gr=null):xa=Gr.sibling;var nm=It(mt,Gr,Ga.value,hn);if(nm===null){Gr===null&&(Gr=xa);break}m&&Gr&&nm.alternate===null&&b(mt,Gr),rt=K(nm,rt,na),Ha===null?ri=nm:Ha.sibling=nm,Ha=nm,Gr=xa}if(Ga.done)return A(mt,Gr),Li&&Dc(mt,na),ri;if(Gr===null){for(;!Ga.done;na++,Ga=Rt.next())Ga=vn(mt,Ga.value,hn),Ga!==null&&(rt=K(Ga,rt,na),Ha===null?ri=Ga:Ha.sibling=Ga,Ha=Ga);return Li&&Dc(mt,na),ri}for(Gr=R(Gr);!Ga.done;na++,Ga=Rt.next())Ga=Gt(Gr,mt,na,Ga.value,hn),Ga!==null&&(m&&Ga.alternate!==null&&Gr.delete(Ga.key===null?na:Ga.key),rt=K(Ga,rt,na),Ha===null?ri=Ga:Ha.sibling=Ga,Ha=Ga);return m&&Gr.forEach(function(w8){return b(mt,w8)}),Li&&Dc(mt,na),ri}function Ao(mt,rt,Rt,hn){if(typeof Rt=="object"&&Rt!==null&&Rt.type===g&&Rt.key===null&&(Rt=Rt.props.children),typeof Rt=="object"&&Rt!==null){switch(Rt.$$typeof){case d:e:{for(var ri=Rt.key;rt!==null;){if(rt.key===ri){if(ri=Rt.type,ri===g){if(rt.tag===7){A(mt,rt.sibling),hn=G(rt,Rt.props.children),hn.return=mt,mt=hn;break e}}else if(rt.elementType===ri||typeof ri=="object"&&ri!==null&&ri.$$typeof===C&&_f(ri)===rt.type){A(mt,rt.sibling),hn=G(rt,Rt.props),du(hn,Rt),hn.return=mt,mt=hn;break e}A(mt,rt);break}else b(mt,rt);rt=rt.sibling}Rt.type===g?(hn=Qh(Rt.props.children,mt.mode,hn,Rt.key),hn.return=mt,mt=hn):(hn=o1(Rt.type,Rt.key,Rt.props,null,mt.mode,hn),du(hn,Rt),hn.return=mt,mt=hn)}return oe(mt);case p:e:{for(ri=Rt.key;rt!==null;){if(rt.key===ri)if(rt.tag===4&&rt.stateNode.containerInfo===Rt.containerInfo&&rt.stateNode.implementation===Rt.implementation){A(mt,rt.sibling),hn=G(rt,Rt.children||[]),hn.return=mt,mt=hn;break e}else{A(mt,rt);break}else b(mt,rt);rt=rt.sibling}hn=Ev(Rt,mt.mode,hn),hn.return=mt,mt=hn}return oe(mt);case C:return Rt=_f(Rt),Ao(mt,rt,Rt,hn)}if(X(Rt))return Fr(mt,rt,Rt,hn);if(I(Rt)){if(ri=I(Rt),typeof ri!="function")throw Error(r(150));return Rt=ri.call(Rt),hi(mt,rt,Rt,hn)}if(typeof Rt.then=="function")return Ao(mt,rt,Ef(Rt),hn);if(Rt.$$typeof===E)return Ao(mt,rt,ju(mt,Rt),hn);ec(mt,Rt)}return typeof Rt=="string"&&Rt!==""||typeof Rt=="number"||typeof Rt=="bigint"?(Rt=""+Rt,rt!==null&&rt.tag===6?(A(mt,rt.sibling),hn=G(rt,Rt),hn.return=mt,mt=hn):(A(mt,rt),hn=dg(Rt,mt.mode,hn),hn.return=mt,mt=hn),oe(mt)):A(mt,rt)}return function(mt,rt,Rt,hn){try{Uc=0;var ri=Ao(mt,rt,Rt,hn);return bf=null,ri}catch(Gr){if(Gr===Ov||Gr===S0)throw Gr;var Ha=El(29,Gr,null,mt.mode);return Ha.lanes=hn,Ha.return=mt,Ha}finally{}}}var ad=Pb(!0),h1=Pb(!1),jc=!1;function xf(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function T0(m,b){m=m.updateQueue,b.updateQueue===m&&(b.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,callbacks:null})}function od(m){return{lane:m,tag:0,payload:null,callback:null,next:null}}function pu(m,b,A){var R=m.updateQueue;if(R===null)return null;if(R=R.shared,(eo&2)!==0){var G=R.pending;return G===null?b.next=b:(b.next=G.next,G.next=b),R.pending=b,b=bv(m),a1(m,null,A),b}return hg(m,R,b,A),bv(m)}function _g(m,b,A){if(b=b.updateQueue,b!==null&&(b=b.shared,(A&4194048)!==0)){var R=b.lanes;R&=m.pendingLanes,A|=R,b.lanes=A,ct(m,A)}}function A0(m,b){var A=m.updateQueue,R=m.alternate;if(R!==null&&(R=R.updateQueue,A===R)){var G=null,K=null;if(A=A.firstBaseUpdate,A!==null){do{var oe={lane:A.lane,tag:A.tag,payload:A.payload,callback:null,next:null};K===null?G=K=oe:K=K.next=oe,A=A.next}while(A!==null);K===null?G=K=b:K=K.next=b}else G=K=b;A={baseState:R.baseState,firstBaseUpdate:G,lastBaseUpdate:K,shared:R.shared,callbacks:R.callbacks},m.updateQueue=A;return}m=A.lastBaseUpdate,m===null?A.firstBaseUpdate=b:m.next=b,A.lastBaseUpdate=b}var $s=!1;function np(){if($s){var m=yf;if(m!==null)throw m}}function bg(m,b,A,R){$s=!1;var G=m.updateQueue;jc=!1;var K=G.firstBaseUpdate,oe=G.lastBaseUpdate,_e=G.shared.pending;if(_e!==null){G.shared.pending=null;var Ze=_e,Mt=Ze.next;Ze.next=null,oe===null?K=Mt:oe.next=Mt,oe=Ze;var an=m.alternate;an!==null&&(an=an.updateQueue,_e=an.lastBaseUpdate,_e!==oe&&(_e===null?an.firstBaseUpdate=Mt:_e.next=Mt,an.lastBaseUpdate=Ze))}if(K!==null){var vn=G.baseState;oe=0,an=Mt=Ze=null,_e=K;do{var It=_e.lane&-536870913,Gt=It!==_e.lane;if(Gt?(Ea&It)===It:(R&It)===It){It!==0&&It===wv&&($s=!0),an!==null&&(an=an.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Fr=m,hi=_e;It=b;var Ao=A;switch(hi.tag){case 1:if(Fr=hi.payload,typeof Fr=="function"){vn=Fr.call(Ao,vn,It);break e}vn=Fr;break e;case 3:Fr.flags=Fr.flags&-65537|128;case 0:if(Fr=hi.payload,It=typeof Fr=="function"?Fr.call(Ao,vn,It):Fr,It==null)break e;vn=f({},vn,It);break e;case 2:jc=!0}}It=_e.callback,It!==null&&(m.flags|=64,Gt&&(m.flags|=8192),Gt=G.callbacks,Gt===null?G.callbacks=[It]:Gt.push(It))}else Gt={lane:It,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},an===null?(Mt=an=Gt,Ze=vn):an=an.next=Gt,oe|=It;if(_e=_e.next,_e===null){if(_e=G.shared.pending,_e===null)break;Gt=_e,_e=Gt.next,Gt.next=null,G.lastBaseUpdate=Gt,G.shared.pending=null}}while(!0);an===null&&(Ze=vn),G.baseState=Ze,G.firstBaseUpdate=Mt,G.lastBaseUpdate=an,K===null&&(G.shared.lanes=0),Wv|=oe,m.lanes=oe,m.memoizedState=vn}}function gu(m,b){if(typeof m!="function")throw Error(r(191,m));m.call(b)}function w0(m,b){var A=m.callbacks;if(A!==null)for(m.callbacks=null,m=0;m<A.length;m++)gu(A[m],b)}var sh=V(null),zu=V(0);function O0(m,b){m=fd,ee(zu,m),ee(sh,b),fd=m|b.baseLanes}function Sl(){ee(zu,fd),ee(sh,sh.current)}function Eg(){fd=zu.current,Q(sh),Q(zu)}var zc=V(null),vu=null;function lh(m){var b=m.alternate;ee(Io,Io.current&1),ee(zc,m),vu===null&&(b===null||sh.current!==null||b.memoizedState!==null)&&(vu=m)}function Cv(m){ee(Io,Io.current),ee(zc,m),vu===null&&(vu=m)}function Nb(m){m.tag===22?(ee(Io,Io.current),ee(zc,m),vu===null&&(vu=m)):$c()}function $c(){ee(Io,Io.current),ee(zc,zc.current)}function tc(m){Q(zc),vu===m&&(vu=null),Q(Io)}var Io=V(0);function C0(m){for(var b=m;b!==null;){if(b.tag===13){var A=b.memoizedState;if(A!==null&&(A=A.dehydrated,A===null||qS(A)||k1(A)))return b}else if(b.tag===19&&(b.memoizedProps.revealOrder==="forwards"||b.memoizedProps.revealOrder==="backwards"||b.memoizedProps.revealOrder==="unstable_legacy-backwards"||b.memoizedProps.revealOrder==="together")){if((b.flags&128)!==0)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var nc=0,ci=null,Na=null,no=null,sd=!1,ch=!1,mu=!1,uh=0,$u=0,Sf=null,d1=0;function ro(){throw Error(r(321))}function Rv(m,b){if(b===null)return!1;for(var A=0;A<b.length&&A<m.length;A++)if(!os(m[A],b[A]))return!1;return!0}function Mv(m,b,A,R,G,K){return nc=K,ci=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,N.H=m===null||m.memoizedState===null?kS:S1,mu=!1,K=A(R,G),mu=!1,ch&&(K=fh(b,A,R,G)),rp(m),K}function rp(m){N.H=cp;var b=Na!==null&&Na.next!==null;if(nc=0,no=Na=ci=null,sd=!1,$u=0,Sf=null,b)throw Error(r(300));m===null||ut||(m=m.dependencies,m!==null&&l1(m)&&(ut=!0))}function fh(m,b,A,R){ci=m;var G=0;do{if(ch&&(Sf=null),$u=0,ch=!1,25<=G)throw Error(r(301));if(G+=1,no=Na=null,m.updateQueue!=null){var K=m.updateQueue;K.lastEffect=null,K.events=null,K.stores=null,K.memoCache!=null&&(K.memoCache.index=0)}N.H=$v,K=b(A,R)}while(ch);return K}function dO(){var m=N.H,b=m.useState()[0];return b=typeof b.then=="function"?Pv(b):b,m=m.useState()[0],(Na!==null?Na.memoizedState:null)!==m&&(ci.flags|=1024),b}function p1(){var m=uh!==0;return uh=0,m}function R0(m,b,A){b.updateQueue=m.updateQueue,b.flags&=-2053,m.lanes&=~A}function g1(m){if(sd){for(m=m.memoizedState;m!==null;){var b=m.queue;b!==null&&(b.pending=null),m=m.next}sd=!1}nc=0,no=Na=ci=null,ch=!1,$u=uh=0,Sf=null}function Bl(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return no===null?ci.memoizedState=no=m:no=no.next=m,no}function Ts(){if(Na===null){var m=ci.alternate;m=m!==null?m.memoizedState:null}else m=Na.next;var b=no===null?ci.memoizedState:no.next;if(b!==null)no=b,Na=m;else{if(m===null)throw ci.alternate===null?Error(r(467)):Error(r(310));Na=m,m={memoizedState:Na.memoizedState,baseState:Na.baseState,baseQueue:Na.baseQueue,queue:Na.queue,next:null},no===null?ci.memoizedState=no=m:no=no.next=m}return no}function Tf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pv(m){var b=$u;return $u+=1,Sf===null&&(Sf=[]),m=mg(Sf,m,b),b=ci,(no===null?b.memoizedState:no.next)===null&&(b=b.alternate,N.H=b===null||b.memoizedState===null?kS:S1),m}function Nv(m){if(m!==null&&typeof m=="object"){if(typeof m.then=="function")return Pv(m);if(m.$$typeof===E)return zs(m)}throw Error(r(438,String(m)))}function Ib(m){var b=null,A=ci.updateQueue;if(A!==null&&(b=A.memoCache),b==null){var R=ci.alternate;R!==null&&(R=R.updateQueue,R!==null&&(R=R.memoCache,R!=null&&(b={data:R.data.map(function(G){return G.slice()}),index:0})))}if(b==null&&(b={data:[],index:0}),A===null&&(A=Tf(),ci.updateQueue=A),A.memoCache=b,A=b.data[b.index],A===void 0)for(A=b.data[b.index]=Array(m),R=0;R<m;R++)A[R]=L;return b.index++,A}function Hu(m,b){return typeof b=="function"?b(m):b}function ji(m){var b=Ts();return Lb(b,Na,m)}function Lb(m,b,A){var R=m.queue;if(R===null)throw Error(r(311));R.lastRenderedReducer=A;var G=m.baseQueue,K=R.pending;if(K!==null){if(G!==null){var oe=G.next;G.next=K.next,K.next=oe}b.baseQueue=G=K,R.pending=null}if(K=m.baseState,G===null)m.memoizedState=K;else{b=G.next;var _e=oe=null,Ze=null,Mt=b,an=!1;do{var vn=Mt.lane&-536870913;if(vn!==Mt.lane?(Ea&vn)===vn:(nc&vn)===vn){var It=Mt.revertLane;if(It===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,gesture:null,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null}),vn===wv&&(an=!0);else if((nc&It)===It){Mt=Mt.next,It===wv&&(an=!0);continue}else vn={lane:0,revertLane:Mt.revertLane,gesture:null,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},Ze===null?(_e=Ze=vn,oe=K):Ze=Ze.next=vn,ci.lanes|=It,Wv|=It;vn=Mt.action,mu&&A(K,vn),K=Mt.hasEagerState?Mt.eagerState:A(K,vn)}else It={lane:vn,revertLane:Mt.revertLane,gesture:Mt.gesture,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null},Ze===null?(_e=Ze=It,oe=K):Ze=Ze.next=It,ci.lanes|=vn,Wv|=vn;Mt=Mt.next}while(Mt!==null&&Mt!==b);if(Ze===null?oe=K:Ze.next=_e,!os(K,m.memoizedState)&&(ut=!0,an&&(A=yf,A!==null)))throw A;m.memoizedState=K,m.baseState=oe,m.baseQueue=Ze,R.lastRenderedState=K}return G===null&&(R.lanes=0),[m.memoizedState,R.dispatch]}function kb(m){var b=Ts(),A=b.queue;if(A===null)throw Error(r(311));A.lastRenderedReducer=m;var R=A.dispatch,G=A.pending,K=b.memoizedState;if(G!==null){A.pending=null;var oe=G=G.next;do K=m(K,oe.action),oe=oe.next;while(oe!==G);os(K,b.memoizedState)||(ut=!0),b.memoizedState=K,b.baseQueue===null&&(b.baseState=K),A.lastRenderedState=K}return[K,R]}function Iv(m,b,A){var R=ci,G=Ts(),K=Li;if(K){if(A===void 0)throw Error(r(407));A=A()}else A=b();var oe=!os((Na||G).memoizedState,A);if(oe&&(G.memoizedState=A,ut=!0),G=G.queue,cd(MS.bind(null,R,G,m),[m]),G.getSnapshot!==b||oe||no!==null&&no.memoizedState.tag&1){if(R.flags|=2048,Ul(9,{destroy:void 0},RS.bind(null,R,G,A,b),null),Do===null)throw Error(r(349));K||(nc&127)!==0||Db(R,b,A)}return A}function Db(m,b,A){m.flags|=16384,m={getSnapshot:b,value:A},b=ci.updateQueue,b===null?(b=Tf(),ci.updateQueue=b,b.stores=[m]):(A=b.stores,A===null?b.stores=[m]:A.push(m))}function RS(m,b,A,R){b.value=A,b.getSnapshot=R,yu(b)&&PS(m)}function MS(m,b,A){return A(function(){yu(b)&&PS(m)})}function yu(m){var b=m.getSnapshot;m=m.value;try{var A=b();return!os(m,A)}catch{return!0}}function PS(m){var b=co(m,2);b!==null&&Wu(b,m,2)}function Lv(m){var b=Bl();if(typeof m=="function"){var A=m;if(m=A(),mu){va(!0);try{A()}finally{va(!1)}}}return b.memoizedState=b.baseState=m,b.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:m},b}function kv(m,b,A,R){return m.baseState=A,Lb(m,Na,typeof R=="function"?R:Hu)}function M0(m,b,A,R,G){if(Tl(m))throw Error(r(485));if(m=b.action,m!==null){var K={payload:G,action:m,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(oe){K.listeners.push(oe)}};N.T!==null?A(!0):K.isTransition=!1,R(K),A=b.pending,A===null?(K.next=b.pending=K,Dv(b,K)):(K.next=A.next,b.pending=A.next=K)}}function Dv(m,b){var A=b.action,R=b.payload,G=m.state;if(b.isTransition){var K=N.T,oe={};N.T=oe;try{var _e=A(G,R),Ze=N.S;Ze!==null&&Ze(oe,_e),Fl(m,b,_e)}catch(Mt){ip(m,b,Mt)}finally{K!==null&&oe.types!==null&&(K.types=oe.types),N.T=K}}else try{K=A(G,R),Fl(m,b,K)}catch(Mt){ip(m,b,Mt)}}function Fl(m,b,A){A!==null&&typeof A=="object"&&typeof A.then=="function"?A.then(function(R){Af(m,b,R)},function(R){return ip(m,b,R)}):Af(m,b,A)}function Af(m,b,A){b.status="fulfilled",b.value=A,Bv(b),m.state=A,b=m.pending,b!==null&&(A=b.next,A===b?m.pending=null:(A=A.next,b.next=A,Dv(m,A)))}function ip(m,b,A){var R=m.pending;if(m.pending=null,R!==null){R=R.next;do b.status="rejected",b.reason=A,Bv(b),b=b.next;while(b!==R)}m.action=null}function Bv(m){m=m.listeners;for(var b=0;b<m.length;b++)(0,m[b])()}function ap(m,b){return b}function P0(m,b){if(Li){var A=Do.formState;if(A!==null){e:{var R=ci;if(Li){if(za){t:{for(var G=za,K=xl;G.nodeType!==8;){if(!K){G=null;break t}if(G=gh(G.nextSibling),G===null){G=null;break t}}K=G.data,G=K==="F!"||K==="F"?G:null}if(G){za=gh(G.nextSibling),R=G.data==="F!";break e}}td(R)}R=!1}R&&(b=A[0])}}return A=Bl(),A.memoizedState=A.baseState=b,R={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ap,lastRenderedState:b},A.queue=R,A=Ac.bind(null,ci,R),R.dispatch=A,R=Lv(!1),K=uo.bind(null,ci,!1,R.queue),R=Bl(),G={state:b,dispatch:null,action:m,pending:null},R.queue=G,A=M0.bind(null,ci,G,K,A),G.dispatch=A,R.memoizedState=m,[b,A,!1]}function xg(m){var b=Ts();return Fv(b,Na,m)}function Fv(m,b,A){if(b=Lb(m,b,ap)[0],m=ji(Hu)[0],typeof b=="object"&&b!==null&&typeof b.then=="function")try{var R=Pv(b)}catch(oe){throw oe===Ov?S0:oe}else R=b;b=Ts();var G=b.queue,K=G.dispatch;return A!==b.memoizedState&&(ci.flags|=2048,Ul(9,{destroy:void 0},Uv.bind(null,G,A),null)),[R,K,m]}function Uv(m,b){m.action=b}function op(m){var b=Ts(),A=Na;if(A!==null)return Fv(b,A,m);Ts(),b=b.memoizedState,A=Ts();var R=A.queue.dispatch;return A.memoizedState=m,[b,R,!1]}function Ul(m,b,A,R){return m={tag:m,create:A,deps:R,inst:b,next:null},b=ci.updateQueue,b===null&&(b=Tf(),ci.updateQueue=b),A=b.lastEffect,A===null?b.lastEffect=m.next=m:(R=A.next,A.next=m,m.next=R,b.lastEffect=m),m}function jv(){return Ts().memoizedState}function Tc(m,b,A,R){var G=Bl();ci.flags|=m,G.memoizedState=Ul(1|b,{destroy:void 0},A,R===void 0?null:R)}function ld(m,b,A,R){var G=Ts();R=R===void 0?null:R;var K=G.memoizedState.inst;Na!==null&&R!==null&&Rv(R,Na.memoizedState.deps)?G.memoizedState=Ul(b,K,A,R):(ci.flags|=m,G.memoizedState=Ul(1|b,K,A,R))}function v1(m,b){Tc(8390656,8,m,b)}function cd(m,b){ld(2048,8,m,b)}function Sg(m){ci.flags|=4;var b=ci.updateQueue;if(b===null)b=Tf(),ci.updateQueue=b,b.events=[m];else{var A=b.events;A===null?b.events=[m]:A.push(m)}}function Bb(m){var b=Ts().memoizedState;return Sg({ref:b,nextImpl:m}),function(){if((eo&2)!==0)throw Error(r(440));return b.impl.apply(void 0,arguments)}}function m1(m,b){return ld(4,2,m,b)}function Fb(m,b){return ld(4,4,m,b)}function Ub(m,b){if(typeof b=="function"){m=m();var A=b(m);return function(){typeof A=="function"?A():b(null)}}if(b!=null)return m=m(),b.current=m,function(){b.current=null}}function NS(m,b,A){A=A!=null?A.concat([m]):null,ld(4,4,Ub.bind(null,b,m),A)}function wf(){}function y1(m,b){var A=Ts();b=b===void 0?null:b;var R=A.memoizedState;return b!==null&&Rv(b,R[1])?R[0]:(A.memoizedState=[m,b],m)}function rc(m,b){var A=Ts();b=b===void 0?null:b;var R=A.memoizedState;if(b!==null&&Rv(b,R[1]))return R[0];if(R=m(),mu){va(!0);try{m()}finally{va(!1)}}return A.memoizedState=[R,b],R}function _u(m,b,A){return A===void 0||(nc&1073741824)!==0&&(Ea&261930)===0?m.memoizedState=b:(m.memoizedState=A,m=TN(),ci.lanes|=m,Wv|=m,A)}function IS(m,b,A,R){return os(A,b)?A:sh.current!==null?(m=_u(m,A,R),os(m,b)||(ut=!0),m):(nc&42)===0||(nc&1073741824)!==0&&(Ea&261930)===0?(ut=!0,m.memoizedState=A):(m=TN(),ci.lanes|=m,Wv|=m,b)}function jb(m,b,A,R,G){var K=M.p;M.p=K!==0&&8>K?K:8;var oe=N.T,_e={};N.T=_e,uo(m,!1,b,A);try{var Ze=G(),Mt=N.S;if(Mt!==null&&Mt(_e,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var an=wS(Ze,R);bu(m,b,an,Rf(m))}else bu(m,b,R,Rf(m))}catch(vn){bu(m,b,{then:function(){},status:"rejected",reason:vn},Rf())}finally{M.p=K,oe!==null&&_e.types!==null&&(oe.types=_e.types),N.T=oe}}function _1(){}function jl(m,b,A,R){if(m.tag!==5)throw Error(r(476));var G=b1(m).queue;jb(m,G,b,k,A===null?_1:function(){return sp(m),A(R)})}function b1(m){var b=m.memoizedState;if(b!==null)return b;b={memoizedState:k,baseState:k,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:k},next:null};var A={};return b.next={memoizedState:A,baseState:A,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hu,lastRenderedState:A},next:null},m.memoizedState=b,m=m.alternate,m!==null&&(m.memoizedState=b),b}function sp(m){var b=b1(m);b.next===null&&(b=m.alternate.memoizedState),bu(m,b.next.queue,{},Rf())}function hh(){return zs(z1)}function E1(){return Ts().memoizedState}function ud(){return Ts().memoizedState}function lp(m){for(var b=m.return;b!==null;){switch(b.tag){case 24:case 3:var A=Rf();m=od(A);var R=pu(b,m,A);R!==null&&(Wu(R,b,A),_g(R,b,A)),b={cache:mf()},m.payload=b;return}b=b.return}}function LS(m,b,A){var R=Rf();A={lane:R,revertLane:0,gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},Tl(m)?zv(b,A):(A=Zh(m,b,A,R),A!==null&&(Wu(A,m,R),x1(A,b,R)))}function Ac(m,b,A){var R=Rf();bu(m,b,A,R)}function bu(m,b,A,R){var G={lane:R,revertLane:0,gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null};if(Tl(m))zv(b,G);else{var K=m.alternate;if(m.lanes===0&&(K===null||K.lanes===0)&&(K=b.lastRenderedReducer,K!==null))try{var oe=b.lastRenderedState,_e=K(oe,A);if(G.hasEagerState=!0,G.eagerState=_e,os(_e,oe))return hg(m,b,G,0),Do===null&&Fu(),!1}catch{}finally{}if(A=Zh(m,b,G,R),A!==null)return Wu(A,m,R),x1(A,b,R),!0}return!1}function uo(m,b,A,R){if(R={lane:2,revertLane:Mf(),gesture:null,action:R,hasEagerState:!1,eagerState:null,next:null},Tl(m)){if(b)throw Error(r(479))}else b=Zh(m,A,R,2),b!==null&&Wu(b,m,2)}function Tl(m){var b=m.alternate;return m===ci||b!==null&&b===ci}function zv(m,b){ch=sd=!0;var A=m.pending;A===null?b.next=b:(b.next=A.next,A.next=b),m.pending=b}function x1(m,b,A){if((A&4194048)!==0){var R=b.lanes;R&=m.pendingLanes,A|=R,b.lanes=A,ct(m,A)}}var cp={readContext:zs,use:Nv,useCallback:ro,useContext:ro,useEffect:ro,useImperativeHandle:ro,useLayoutEffect:ro,useInsertionEffect:ro,useMemo:ro,useReducer:ro,useRef:ro,useState:ro,useDebugValue:ro,useDeferredValue:ro,useTransition:ro,useSyncExternalStore:ro,useId:ro,useHostTransitionStatus:ro,useFormState:ro,useActionState:ro,useOptimistic:ro,useMemoCache:ro,useCacheRefresh:ro};cp.useEffectEvent=ro;var kS={readContext:zs,use:Nv,useCallback:function(m,b){return Bl().memoizedState=[m,b===void 0?null:b],m},useContext:zs,useEffect:v1,useImperativeHandle:function(m,b,A){A=A!=null?A.concat([m]):null,Tc(4194308,4,Ub.bind(null,b,m),A)},useLayoutEffect:function(m,b){return Tc(4194308,4,m,b)},useInsertionEffect:function(m,b){Tc(4,2,m,b)},useMemo:function(m,b){var A=Bl();b=b===void 0?null:b;var R=m();if(mu){va(!0);try{m()}finally{va(!1)}}return A.memoizedState=[R,b],R},useReducer:function(m,b,A){var R=Bl();if(A!==void 0){var G=A(b);if(mu){va(!0);try{A(b)}finally{va(!1)}}}else G=b;return R.memoizedState=R.baseState=G,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:G},R.queue=m,m=m.dispatch=LS.bind(null,ci,m),[R.memoizedState,m]},useRef:function(m){var b=Bl();return m={current:m},b.memoizedState=m},useState:function(m){m=Lv(m);var b=m.queue,A=Ac.bind(null,ci,b);return b.dispatch=A,[m.memoizedState,A]},useDebugValue:wf,useDeferredValue:function(m,b){var A=Bl();return _u(A,m,b)},useTransition:function(){var m=Lv(!1);return m=jb.bind(null,ci,m.queue,!0,!1),Bl().memoizedState=m,[!1,m]},useSyncExternalStore:function(m,b,A){var R=ci,G=Bl();if(Li){if(A===void 0)throw Error(r(407));A=A()}else{if(A=b(),Do===null)throw Error(r(349));(Ea&127)!==0||Db(R,b,A)}G.memoizedState=A;var K={value:A,getSnapshot:b};return G.queue=K,v1(MS.bind(null,R,K,m),[m]),R.flags|=2048,Ul(9,{destroy:void 0},RS.bind(null,R,K,A,b),null),A},useId:function(){var m=Bl(),b=Do.identifierPrefix;if(Li){var A=hu,R=vf;A=(R&~(1<<32-pi(R)-1)).toString(32)+A,b="_"+b+"R_"+A,A=uh++,0<A&&(b+="H"+A.toString(32)),b+="_"}else A=d1++,b="_"+b+"r_"+A.toString(32)+"_";return m.memoizedState=b},useHostTransitionStatus:hh,useFormState:P0,useActionState:P0,useOptimistic:function(m){var b=Bl();b.memoizedState=b.baseState=m;var A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return b.queue=A,b=uo.bind(null,ci,!0,A),A.dispatch=b,[m,b]},useMemoCache:Ib,useCacheRefresh:function(){return Bl().memoizedState=lp.bind(null,ci)},useEffectEvent:function(m){var b=Bl(),A={impl:m};return b.memoizedState=A,function(){if((eo&2)!==0)throw Error(r(440));return A.impl.apply(void 0,arguments)}}},S1={readContext:zs,use:Nv,useCallback:y1,useContext:zs,useEffect:cd,useImperativeHandle:NS,useInsertionEffect:m1,useLayoutEffect:Fb,useMemo:rc,useReducer:ji,useRef:jv,useState:function(){return ji(Hu)},useDebugValue:wf,useDeferredValue:function(m,b){var A=Ts();return IS(A,Na.memoizedState,m,b)},useTransition:function(){var m=ji(Hu)[0],b=Ts().memoizedState;return[typeof m=="boolean"?m:Pv(m),b]},useSyncExternalStore:Iv,useId:E1,useHostTransitionStatus:hh,useFormState:xg,useActionState:xg,useOptimistic:function(m,b){var A=Ts();return kv(A,Na,m,b)},useMemoCache:Ib,useCacheRefresh:ud};S1.useEffectEvent=Bb;var $v={readContext:zs,use:Nv,useCallback:y1,useContext:zs,useEffect:cd,useImperativeHandle:NS,useInsertionEffect:m1,useLayoutEffect:Fb,useMemo:rc,useReducer:kb,useRef:jv,useState:function(){return kb(Hu)},useDebugValue:wf,useDeferredValue:function(m,b){var A=Ts();return Na===null?_u(A,m,b):IS(A,Na.memoizedState,m,b)},useTransition:function(){var m=kb(Hu)[0],b=Ts().memoizedState;return[typeof m=="boolean"?m:Pv(m),b]},useSyncExternalStore:Iv,useId:E1,useHostTransitionStatus:hh,useFormState:op,useActionState:op,useOptimistic:function(m,b){var A=Ts();return Na!==null?kv(A,Na,m,b):(A.baseState=m,[m,A.queue.dispatch])},useMemoCache:Ib,useCacheRefresh:ud};$v.useEffectEvent=Bb;function T1(m,b,A,R){b=m.memoizedState,A=A(R,b),A=A==null?b:f({},b,A),m.memoizedState=A,m.lanes===0&&(m.updateQueue.baseState=A)}var N0={enqueueSetState:function(m,b,A){m=m._reactInternals;var R=Rf(),G=od(R);G.payload=b,A!=null&&(G.callback=A),b=pu(m,G,R),b!==null&&(Wu(b,m,R),_g(b,m,R))},enqueueReplaceState:function(m,b,A){m=m._reactInternals;var R=Rf(),G=od(R);G.tag=1,G.payload=b,A!=null&&(G.callback=A),b=pu(m,G,R),b!==null&&(Wu(b,m,R),_g(b,m,R))},enqueueForceUpdate:function(m,b){m=m._reactInternals;var A=Rf(),R=od(A);R.tag=2,b!=null&&(R.callback=b),b=pu(m,R,A),b!==null&&(Wu(b,m,A),_g(b,m,A))}};function DS(m,b,A,R,G,K,oe){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(R,K,oe):b.prototype&&b.prototype.isPureReactComponent?!yv(A,R)||!yv(G,K):!0}function zb(m,b,A,R){m=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(A,R),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(A,R),b.state!==m&&N0.enqueueReplaceState(b,b.state,null)}function wc(m,b){var A=b;if("ref"in b){A={};for(var R in b)R!=="ref"&&(A[R]=b[R])}if(m=m.defaultProps){A===b&&(A=f({},A));for(var G in m)A[G]===void 0&&(A[G]=m[G])}return A}function A1(m){y0(m)}function w1(m){console.error(m)}function $b(m){y0(m)}function I0(m,b){try{var A=m.onUncaughtError;A(b.value,{componentStack:b.stack})}catch(R){setTimeout(function(){throw R})}}function BS(m,b,A){try{var R=m.onCaughtError;R(A.value,{componentStack:A.stack,errorBoundary:b.tag===1?b.stateNode:null})}catch(G){setTimeout(function(){throw G})}}function O1(m,b,A){return A=od(A),A.tag=3,A.payload={element:null},A.callback=function(){I0(m,b)},A}function dh(m){return m=od(m),m.tag=3,m}function ae(m,b,A,R){var G=A.type.getDerivedStateFromError;if(typeof G=="function"){var K=R.value;m.payload=function(){return G(K)},m.callback=function(){BS(b,A,R)}}var oe=A.stateNode;oe!==null&&typeof oe.componentDidCatch=="function"&&(m.callback=function(){BS(b,A,R),typeof G!="function"&&(Vv===null?Vv=new Set([this]):Vv.add(this));var _e=R.stack;this.componentDidCatch(R.value,{componentStack:_e!==null?_e:""})})}function Ee(m,b,A,R,G){if(A.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){if(b=A.alternate,b!==null&&Av(b,A,G,!0),A=zc.current,A!==null){switch(A.tag){case 31:case 13:return vu===null?jS():A.alternate===null&&Os===0&&(Os=3),A.flags&=-257,A.flags|=65536,A.lanes=G,R===tp?A.flags|=16384:(b=A.updateQueue,b===null?A.updateQueue=new Set([R]):b.add(R),OO(m,R,G)),!1;case 22:return A.flags|=65536,R===tp?A.flags|=16384:(b=A.updateQueue,b===null?(b={transitions:null,markerInstances:null,retryQueue:new Set([R])},A.updateQueue=b):(A=b.retryQueue,A===null?b.retryQueue=new Set([R]):A.add(R)),OO(m,R,G)),!1}throw Error(r(435,A.tag))}return OO(m,R,G),jS(),!1}if(Li)return b=zc.current,b!==null?((b.flags&65536)===0&&(b.flags|=256),b.flags|=65536,b.lanes=G,R!==Sv&&(m=Error(r(422),{cause:R}),Jd(cu(m,A)))):(R!==Sv&&(b=Error(r(423),{cause:R}),Jd(cu(b,A))),m=m.current.alternate,m.flags|=65536,G&=-G,m.lanes|=G,R=cu(R,A),G=O1(m.stateNode,R,G),A0(m,G),Os!==4&&(Os=2)),!1;var K=Error(r(520),{cause:R});if(K=cu(K,A),Hb===null?Hb=[K]:Hb.push(K),Os!==4&&(Os=2),b===null)return!0;R=cu(R,A),A=b;do{switch(A.tag){case 3:return A.flags|=65536,m=G&-G,A.lanes|=m,m=O1(A.stateNode,R,m),A0(A,m),!1;case 1:if(b=A.type,K=A.stateNode,(A.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(Vv===null||!Vv.has(K))))return A.flags|=65536,G&=-G,A.lanes|=G,G=dh(G),ae(G,m,A,R),A0(A,G),!1}A=A.return}while(A!==null);return!1}var De=Error(r(461)),ut=!1;function Ct(m,b,A,R){b.child=m===null?h1(b,null,A,R):ad(b,m.child,A,R)}function Qe(m,b,A,R,G){A=A.render;var K=b.ref;if("ref"in R){var oe={};for(var _e in R)_e!=="ref"&&(oe[_e]=R[_e])}else oe=R;return id(b),R=Mv(m,b,A,oe,K,G),_e=p1(),m!==null&&!ut?(R0(m,b,G),Ht(m,b,G)):(Li&&_e&&ed(b),b.flags|=1,Ct(m,b,R,G),b.child)}function Pt(m,b,A,R,G){if(m===null){var K=A.type;return typeof K=="function"&&!Kh(K)&&K.defaultProps===void 0&&A.compare===null?(b.tag=15,b.type=K,dn(m,b,K,R,G)):(m=o1(A.type,null,R,b,b.mode,G),m.ref=b.ref,m.return=b,b.child=m)}if(K=m.child,!qr(m,G)){var oe=K.memoizedProps;if(A=A.compare,A=A!==null?A:yv,A(oe,R)&&m.ref===b.ref)return Ht(m,b,G)}return b.flags|=1,m=Uu(K,R),m.ref=b.ref,m.return=b,b.child=m}function dn(m,b,A,R,G){if(m!==null){var K=m.memoizedProps;if(yv(K,R)&&m.ref===b.ref)if(ut=!1,b.pendingProps=R=K,qr(m,G))(m.flags&131072)!==0&&(ut=!0);else return b.lanes=m.lanes,Ht(m,b,G)}return ot(m,b,A,R,G)}function cn(m,b,A,R){var G=R.children,K=m!==null?m.memoizedState:null;if(m===null&&b.stateNode===null&&(b.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),R.mode==="hidden"){if((b.flags&128)!==0){if(K=K!==null?K.baseLanes|A:A,m!==null){for(R=b.child=m.child,G=0;R!==null;)G=G|R.lanes|R.childLanes,R=R.sibling;R=G&~K}else R=0,b.child=null;return yn(m,b,K,A,R)}if((A&536870912)!==0)b.memoizedState={baseLanes:0,cachePool:null},m!==null&&u1(b,K!==null?K.cachePool:null),K!==null?O0(b,K):Sl(),Nb(b);else return R=b.lanes=536870912,yn(m,b,K!==null?K.baseLanes|A:A,A,R)}else K!==null?(u1(b,K.cachePool),O0(b,K),$c(),b.memoizedState=null):(m!==null&&u1(b,null),Sl(),$c());return Ct(m,b,G,A),b.child}function Pn(m,b){return m!==null&&m.tag===22||b.stateNode!==null||(b.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.sibling}function yn(m,b,A,R,G){var K=c1();return K=K===null?null:{parent:Ss._currentValue,pool:K},b.memoizedState={baseLanes:A,cachePool:K},m!==null&&u1(b,null),Sl(),Nb(b),m!==null&&Av(m,b,R,!0),b.childLanes=G,null}function En(m,b){return b=Dn({mode:b.mode,children:b.children},m.mode),b.ref=m.ref,m.child=b,b.return=m,b}function pn(m,b,A){return ad(b,m.child,null,A),m=En(b,b.pendingProps),m.flags|=2,tc(b),b.memoizedState=null,m}function un(m,b,A){var R=b.pendingProps,G=(b.flags&128)!==0;if(b.flags&=-129,m===null){if(Li){if(R.mode==="hidden")return m=En(b,R),b.lanes=536870912,Pn(null,m);if(Cv(b),(m=za)?(m=YN(m,xl),m=m!==null&&m.data==="&"?m:null,m!==null&&(b.memoizedState={dehydrated:m,treeContext:ih!==null?{id:vf,overflow:hu}:null,retryLane:536870912,hydrationErrors:null},A=_0(m),A.return=b,b.child=A,xs=b,za=null)):m=null,m===null)throw td(b);return b.lanes=536870912,null}return En(b,R)}var K=m.memoizedState;if(K!==null){var oe=K.dehydrated;if(Cv(b),G)if(b.flags&256)b.flags&=-257,b=pn(m,b,A);else if(b.memoizedState!==null)b.child=m.child,b.flags|=128,b=null;else throw Error(r(558));else if(ut||Av(m,b,A,!1),G=(A&m.childLanes)!==0,ut||G){if(R=Do,R!==null&&(oe=Ge(R,A),oe!==0&&oe!==K.retryLane))throw K.retryLane=oe,co(m,oe),Wu(R,m,oe),De;jS(),b=pn(m,b,A)}else m=K.treeContext,za=gh(oe.nextSibling),xs=b,Li=!0,ah=null,xl=!1,m!==null&&Jl(b,m),b=En(b,R),b.flags|=4096;return b}return m=Uu(m.child,{mode:R.mode,children:R.children}),m.ref=b.ref,b.child=m,m.return=b,m}function Tn(m,b){var A=b.ref;if(A===null)m!==null&&m.ref!==null&&(b.flags|=4194816);else{if(typeof A!="function"&&typeof A!="object")throw Error(r(284));(m===null||m.ref!==A)&&(b.flags|=4194816)}}function ot(m,b,A,R,G){return id(b),A=Mv(m,b,A,R,void 0,G),R=p1(),m!==null&&!ut?(R0(m,b,G),Ht(m,b,G)):(Li&&R&&ed(b),b.flags|=1,Ct(m,b,A,G),b.child)}function wt(m,b,A,R,G,K){return id(b),b.updateQueue=null,A=fh(b,R,A,G),rp(m),R=p1(),m!==null&&!ut?(R0(m,b,K),Ht(m,b,K)):(Li&&R&&ed(b),b.flags|=1,Ct(m,b,A,K),b.child)}function gn(m,b,A,R,G){if(id(b),b.stateNode===null){var K=xc,oe=A.contextType;typeof oe=="object"&&oe!==null&&(K=zs(oe)),K=new A(R,K),b.memoizedState=K.state!==null&&K.state!==void 0?K.state:null,K.updater=N0,b.stateNode=K,K._reactInternals=b,K=b.stateNode,K.props=R,K.state=b.memoizedState,K.refs={},xf(b),oe=A.contextType,K.context=typeof oe=="object"&&oe!==null?zs(oe):xc,K.state=b.memoizedState,oe=A.getDerivedStateFromProps,typeof oe=="function"&&(T1(b,A,oe,R),K.state=b.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof K.getSnapshotBeforeUpdate=="function"||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(oe=K.state,typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount(),oe!==K.state&&N0.enqueueReplaceState(K,K.state,null),bg(b,R,K,G),np(),K.state=b.memoizedState),typeof K.componentDidMount=="function"&&(b.flags|=4194308),R=!0}else if(m===null){K=b.stateNode;var _e=b.memoizedProps,Ze=wc(A,_e);K.props=Ze;var Mt=K.context,an=A.contextType;oe=xc,typeof an=="object"&&an!==null&&(oe=zs(an));var vn=A.getDerivedStateFromProps;an=typeof vn=="function"||typeof K.getSnapshotBeforeUpdate=="function",_e=b.pendingProps!==_e,an||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(_e||Mt!==oe)&&zb(b,K,R,oe),jc=!1;var It=b.memoizedState;K.state=It,bg(b,R,K,G),np(),Mt=b.memoizedState,_e||It!==Mt||jc?(typeof vn=="function"&&(T1(b,A,vn,R),Mt=b.memoizedState),(Ze=jc||DS(b,A,Ze,R,It,Mt,oe))?(an||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(b.flags|=4194308)):(typeof K.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=R,b.memoizedState=Mt),K.props=R,K.state=Mt,K.context=oe,R=Ze):(typeof K.componentDidMount=="function"&&(b.flags|=4194308),R=!1)}else{K=b.stateNode,T0(m,b),oe=b.memoizedProps,an=wc(A,oe),K.props=an,vn=b.pendingProps,It=K.context,Mt=A.contextType,Ze=xc,typeof Mt=="object"&&Mt!==null&&(Ze=zs(Mt)),_e=A.getDerivedStateFromProps,(Mt=typeof _e=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(oe!==vn||It!==Ze)&&zb(b,K,R,Ze),jc=!1,It=b.memoizedState,K.state=It,bg(b,R,K,G),np();var Gt=b.memoizedState;oe!==vn||It!==Gt||jc||m!==null&&m.dependencies!==null&&l1(m.dependencies)?(typeof _e=="function"&&(T1(b,A,_e,R),Gt=b.memoizedState),(an=jc||DS(b,A,an,R,It,Gt,Ze)||m!==null&&m.dependencies!==null&&l1(m.dependencies))?(Mt||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(R,Gt,Ze),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(R,Gt,Ze)),typeof K.componentDidUpdate=="function"&&(b.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof K.componentDidUpdate!="function"||oe===m.memoizedProps&&It===m.memoizedState||(b.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||oe===m.memoizedProps&&It===m.memoizedState||(b.flags|=1024),b.memoizedProps=R,b.memoizedState=Gt),K.props=R,K.state=Gt,K.context=Ze,R=an):(typeof K.componentDidUpdate!="function"||oe===m.memoizedProps&&It===m.memoizedState||(b.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||oe===m.memoizedProps&&It===m.memoizedState||(b.flags|=1024),R=!1)}return K=R,Tn(m,b),R=(b.flags&128)!==0,K||R?(K=b.stateNode,A=R&&typeof A.getDerivedStateFromError!="function"?null:K.render(),b.flags|=1,m!==null&&R?(b.child=ad(b,m.child,null,G),b.child=ad(b,null,A,G)):Ct(m,b,A,G),b.memoizedState=K.state,m=b.child):m=Ht(m,b,G),m}function zn(m,b,A,R){return ye(),b.flags|=256,Ct(m,b,A,R),b.child}var Xt={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zn(m){return{baseLanes:m,cachePool:OS()}}function sn(m,b,A){return m=m!==null?m.childLanes&~A:0,b&&(m|=Cf),m}function Mn(m,b,A){var R=b.pendingProps,G=!1,K=(b.flags&128)!==0,oe;if((oe=K)||(oe=m!==null&&m.memoizedState===null?!1:(Io.current&2)!==0),oe&&(G=!0,b.flags&=-129),oe=(b.flags&32)!==0,b.flags&=-33,m===null){if(Li){if(G?lh(b):$c(),(m=za)?(m=YN(m,xl),m=m!==null&&m.data!=="&"?m:null,m!==null&&(b.memoizedState={dehydrated:m,treeContext:ih!==null?{id:vf,overflow:hu}:null,retryLane:536870912,hydrationErrors:null},A=_0(m),A.return=b,b.child=A,xs=b,za=null)):m=null,m===null)throw td(b);return k1(m)?b.lanes=32:b.lanes=536870912,null}var _e=R.children;return R=R.fallback,G?($c(),G=b.mode,_e=Dn({mode:"hidden",children:_e},G),R=Qh(R,G,A,null),_e.return=b,R.return=b,_e.sibling=R,b.child=_e,R=b.child,R.memoizedState=Zn(A),R.childLanes=sn(m,oe,A),b.memoizedState=Xt,Pn(null,R)):(lh(b),Vt(b,_e))}var Ze=m.memoizedState;if(Ze!==null&&(_e=Ze.dehydrated,_e!==null)){if(K)b.flags&256?(lh(b),b.flags&=-257,b=vr(m,b,A)):b.memoizedState!==null?($c(),b.child=m.child,b.flags|=128,b=null):($c(),_e=R.fallback,G=b.mode,R=Dn({mode:"visible",children:R.children},G),_e=Qh(_e,G,A,null),_e.flags|=2,R.return=b,_e.return=b,R.sibling=_e,b.child=R,ad(b,m.child,null,A),R=b.child,R.memoizedState=Zn(A),R.childLanes=sn(m,oe,A),b.memoizedState=Xt,b=Pn(null,R));else if(lh(b),k1(_e)){if(oe=_e.nextSibling&&_e.nextSibling.dataset,oe)var Mt=oe.dgst;oe=Mt,R=Error(r(419)),R.stack="",R.digest=oe,Jd({value:R,source:null,stack:null}),b=vr(m,b,A)}else if(ut||Av(m,b,A,!1),oe=(A&m.childLanes)!==0,ut||oe){if(oe=Do,oe!==null&&(R=Ge(oe,A),R!==0&&R!==Ze.retryLane))throw Ze.retryLane=R,co(m,R),Wu(oe,m,R),De;qS(_e)||jS(),b=vr(m,b,A)}else qS(_e)?(b.flags|=192,b.child=m.child,b=null):(m=Ze.treeContext,za=gh(_e.nextSibling),xs=b,Li=!0,ah=null,xl=!1,m!==null&&Jl(b,m),b=Vt(b,R.children),b.flags|=4096);return b}return G?($c(),_e=R.fallback,G=b.mode,Ze=m.child,Mt=Ze.sibling,R=Uu(Ze,{mode:"hidden",children:R.children}),R.subtreeFlags=Ze.subtreeFlags&65011712,Mt!==null?_e=Uu(Mt,_e):(_e=Qh(_e,G,A,null),_e.flags|=2),_e.return=b,R.return=b,R.sibling=_e,b.child=R,Pn(null,R),R=b.child,_e=m.child.memoizedState,_e===null?_e=Zn(A):(G=_e.cachePool,G!==null?(Ze=Ss._currentValue,G=G.parent!==Ze?{parent:Ze,pool:Ze}:G):G=OS(),_e={baseLanes:_e.baseLanes|A,cachePool:G}),R.memoizedState=_e,R.childLanes=sn(m,oe,A),b.memoizedState=Xt,Pn(m.child,R)):(lh(b),A=m.child,m=A.sibling,A=Uu(A,{mode:"visible",children:R.children}),A.return=b,A.sibling=null,m!==null&&(oe=b.deletions,oe===null?(b.deletions=[m],b.flags|=16):oe.push(m)),b.child=A,b.memoizedState=null,A)}function Vt(m,b){return b=Dn({mode:"visible",children:b},m.mode),b.return=m,m.child=b}function Dn(m,b){return m=El(22,m,null,b),m.lanes=0,m}function vr(m,b,A){return ad(b,m.child,null,A),m=Vt(b,b.pendingProps.children),m.flags|=2,b.memoizedState=null,m}function Kr(m,b,A){m.lanes|=b;var R=m.alternate;R!==null&&(R.lanes|=b),oh(m.return,b,A)}function Un(m,b,A,R,G,K){var oe=m.memoizedState;oe===null?m.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:R,tail:A,tailMode:G,treeForkCount:K}:(oe.isBackwards=b,oe.rendering=null,oe.renderingStartTime=0,oe.last=R,oe.tail=A,oe.tailMode=G,oe.treeForkCount=K)}function fn(m,b,A){var R=b.pendingProps,G=R.revealOrder,K=R.tail;R=R.children;var oe=Io.current,_e=(oe&2)!==0;if(_e?(oe=oe&1|2,b.flags|=128):oe&=1,ee(Io,oe),Ct(m,b,R,A),R=Li?ss:0,!_e&&m!==null&&(m.flags&128)!==0)e:for(m=b.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&Kr(m,A,b);else if(m.tag===19)Kr(m,A,b);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===b)break e;for(;m.sibling===null;){if(m.return===null||m.return===b)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}switch(G){case"forwards":for(A=b.child,G=null;A!==null;)m=A.alternate,m!==null&&C0(m)===null&&(G=A),A=A.sibling;A=G,A===null?(G=b.child,b.child=null):(G=A.sibling,A.sibling=null),Un(b,!1,G,A,K,R);break;case"backwards":case"unstable_legacy-backwards":for(A=null,G=b.child,b.child=null;G!==null;){if(m=G.alternate,m!==null&&C0(m)===null){b.child=G;break}m=G.sibling,G.sibling=A,A=G,G=m}Un(b,!0,A,null,K,R);break;case"together":Un(b,!1,null,null,void 0,R);break;default:b.memoizedState=null}return b.child}function Ht(m,b,A){if(m!==null&&(b.dependencies=m.dependencies),Wv|=b.lanes,(A&b.childLanes)===0)if(m!==null){if(Av(m,b,A,!1),(A&b.childLanes)===0)return null}else return null;if(m!==null&&b.child!==m.child)throw Error(r(153));if(b.child!==null){for(m=b.child,A=Uu(m,m.pendingProps),b.child=A,A.return=b;m.sibling!==null;)m=m.sibling,A=A.sibling=Uu(m,m.pendingProps),A.return=b;A.sibling=null}return b.child}function qr(m,b){return(m.lanes&b)!==0?!0:(m=m.dependencies,!!(m!==null&&l1(m)))}function ki(m,b,A){switch(b.tag){case 3:ve(b,b.stateNode.containerInfo),ep(b,Ss,m.memoizedState.cache),ye();break;case 27:case 5:Re(b);break;case 4:ve(b,b.stateNode.containerInfo);break;case 10:ep(b,b.type,b.memoizedProps.value);break;case 31:if(b.memoizedState!==null)return b.flags|=128,Cv(b),null;break;case 13:var R=b.memoizedState;if(R!==null)return R.dehydrated!==null?(lh(b),b.flags|=128,null):(A&b.child.childLanes)!==0?Mn(m,b,A):(lh(b),m=Ht(m,b,A),m!==null?m.sibling:null);lh(b);break;case 19:var G=(m.flags&128)!==0;if(R=(A&b.childLanes)!==0,R||(Av(m,b,A,!1),R=(A&b.childLanes)!==0),G){if(R)return fn(m,b,A);b.flags|=128}if(G=b.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),ee(Io,Io.current),R)break;return null;case 22:return b.lanes=0,cn(m,b,A,b.pendingProps);case 24:ep(b,Ss,m.memoizedState.cache)}return Ht(m,b,A)}function pr(m,b,A){if(m!==null)if(m.memoizedProps!==b.pendingProps)ut=!0;else{if(!qr(m,A)&&(b.flags&128)===0)return ut=!1,ki(m,b,A);ut=(m.flags&131072)!==0}else ut=!1,Li&&(b.flags&1048576)!==0&&b0(b,ss,b.index);switch(b.lanes=0,b.tag){case 16:e:{var R=b.pendingProps;if(m=_f(b.elementType),b.type=m,typeof m=="function")Kh(m)?(R=wc(m,R),b.tag=1,b=gn(null,b,m,R,A)):(b.tag=0,b=ot(null,b,m,R,A));else{if(m!=null){var G=m.$$typeof;if(G===x){b.tag=11,b=Qe(null,b,m,R,A);break e}else if(G===w){b.tag=14,b=Pt(null,b,m,R,A);break e}}throw b=$(m)||m,Error(r(306,b,""))}}return b;case 0:return ot(m,b,b.type,b.pendingProps,A);case 1:return R=b.type,G=wc(R,b.pendingProps),gn(m,b,R,G,A);case 3:e:{if(ve(b,b.stateNode.containerInfo),m===null)throw Error(r(387));R=b.pendingProps;var K=b.memoizedState;G=K.element,T0(m,b),bg(b,R,null,A);var oe=b.memoizedState;if(R=oe.cache,ep(b,Ss,R),R!==K.cache&&s1(b,[Ss],A,!0),np(),R=oe.element,K.isDehydrated)if(K={element:R,isDehydrated:!1,cache:oe.cache},b.updateQueue.baseState=K,b.memoizedState=K,b.flags&256){b=zn(m,b,R,A);break e}else if(R!==G){G=cu(Error(r(424)),b),Jd(G),b=zn(m,b,R,A);break e}else{switch(m=b.stateNode.containerInfo,m.nodeType){case 9:m=m.body;break;default:m=m.nodeName==="HTML"?m.ownerDocument.body:m}for(za=gh(m.firstChild),xs=b,Li=!0,ah=null,xl=!0,A=h1(b,null,R,A),b.child=A;A;)A.flags=A.flags&-3|4096,A=A.sibling}else{if(ye(),R===G){b=Ht(m,b,A);break e}Ct(m,b,R,A)}b=b.child}return b;case 26:return Tn(m,b),m===null?(A=JN(b.type,null,b.pendingProps,null))?b.memoizedState=A:Li||(A=b.type,m=b.pendingProps,R=tE(le.current).createElement(A),R[$e]=b,R[_n]=m,Oc(R,A,m),Yr(R),b.stateNode=R):b.memoizedState=JN(b.type,m.memoizedProps,b.pendingProps,m.memoizedState),null;case 27:return Re(b),m===null&&Li&&(R=b.stateNode=ZN(b.type,b.pendingProps,le.current),xs=b,xl=!0,G=za,bi(b.type)?(UO=G,za=gh(R.firstChild)):za=G),Ct(m,b,b.pendingProps.children,A),Tn(m,b),m===null&&(b.flags|=4194304),b.child;case 5:return m===null&&Li&&((G=R=za)&&(R=c8(R,b.type,b.pendingProps,xl),R!==null?(b.stateNode=R,xs=b,za=gh(R.firstChild),xl=!1,G=!0):G=!1),G||td(b)),Re(b),G=b.type,K=b.pendingProps,oe=m!==null?m.memoizedProps:null,R=K.children,Zv(G,K)?R=null:oe!==null&&Zv(G,oe)&&(b.flags|=32),b.memoizedState!==null&&(G=Mv(m,b,dO,null,null,A),z1._currentValue=G),Tn(m,b),Ct(m,b,R,A),b.child;case 6:return m===null&&Li&&((m=A=za)&&(A=io(A,b.pendingProps,xl),A!==null?(b.stateNode=A,xs=b,za=null,m=!0):m=!1),m||td(b)),null;case 13:return Mn(m,b,A);case 4:return ve(b,b.stateNode.containerInfo),R=b.pendingProps,m===null?b.child=ad(b,null,R,A):Ct(m,b,R,A),b.child;case 11:return Qe(m,b,b.type,b.pendingProps,A);case 7:return Ct(m,b,b.pendingProps,A),b.child;case 8:return Ct(m,b,b.pendingProps.children,A),b.child;case 12:return Ct(m,b,b.pendingProps.children,A),b.child;case 10:return R=b.pendingProps,ep(b,b.type,R.value),Ct(m,b,R.children,A),b.child;case 9:return G=b.type._context,R=b.pendingProps.children,id(b),G=zs(G),R=R(G),b.flags|=1,Ct(m,b,R,A),b.child;case 14:return Pt(m,b,b.type,b.pendingProps,A);case 15:return dn(m,b,b.type,b.pendingProps,A);case 19:return fn(m,b,A);case 31:return un(m,b,A);case 22:return cn(m,b,A,b.pendingProps);case 24:return id(b),R=zs(Ss),m===null?(G=c1(),G===null&&(G=Do,K=mf(),G.pooledCache=K,K.refCount++,K!==null&&(G.pooledCacheLanes|=A),G=K),b.memoizedState={parent:R,cache:G},xf(b),ep(b,Ss,G)):((m.lanes&A)!==0&&(T0(m,b),bg(b,null,null,A),np()),G=m.memoizedState,K=b.memoizedState,G.parent!==R?(G={parent:R,cache:R},b.memoizedState=G,b.lanes===0&&(b.memoizedState=b.updateQueue.baseState=G),ep(b,Ss,R)):(R=K.cache,ep(b,Ss,R),R!==G.cache&&s1(b,[Ss],A,!0))),Ct(m,b,b.pendingProps.children,A),b.child;case 29:throw b.pendingProps}throw Error(r(156,b.tag))}function ni(m){m.flags|=4}function Qr(m,b,A,R,G){if((b=(m.mode&32)!==0)&&(b=!1),b){if(m.flags|=16777216,(G&335544128)===G)if(m.stateNode.complete)m.flags|=8192;else if(Vb())m.flags|=8192;else throw Sc=tp,f1}else m.flags&=-16777217}function ui(m,b){if(b.type!=="stylesheet"||(b.state.loading&4)!==0)m.flags&=-16777217;else if(m.flags|=16777216,!i3(b))if(Vb())m.flags|=8192;else throw Sc=tp,f1}function zi(m,b){b!==null&&(m.flags|=4),m.flags&16384&&(b=m.tag!==22?te():536870912,m.lanes|=b,M1|=b)}function xo(m,b){if(!Li)switch(m.tailMode){case"hidden":b=m.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?m.tail=null:A.sibling=null;break;case"collapsed":A=m.tail;for(var R=null;A!==null;)A.alternate!==null&&(R=A),A=A.sibling;R===null?b||m.tail===null?m.tail=null:m.tail.sibling=null:R.sibling=null}}function yi(m){var b=m.alternate!==null&&m.alternate.child===m.child,A=0,R=0;if(b)for(var G=m.child;G!==null;)A|=G.lanes|G.childLanes,R|=G.subtreeFlags&65011712,R|=G.flags&65011712,G.return=m,G=G.sibling;else for(G=m.child;G!==null;)A|=G.lanes|G.childLanes,R|=G.subtreeFlags,R|=G.flags,G.return=m,G=G.sibling;return m.subtreeFlags|=R,m.childLanes=A,b}function Oi(m,b,A){var R=b.pendingProps;switch(Zd(b),b.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yi(b),null;case 1:return yi(b),null;case 3:return A=b.stateNode,R=null,m!==null&&(R=m.memoizedState.cache),b.memoizedState.cache!==R&&(b.flags|=2048),rd(Ss),Se(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(m===null||m.child===null)&&(Kd(b)?ni(b):m===null||m.memoizedState.isDehydrated&&(b.flags&256)===0||(b.flags|=1024,Qd())),yi(b),null;case 26:var G=b.type,K=b.memoizedState;return m===null?(ni(b),K!==null?(yi(b),ui(b,K)):(yi(b),Qr(b,G,null,R,A))):K?K!==m.memoizedState?(ni(b),yi(b),ui(b,K)):(yi(b),b.flags&=-16777217):(m=m.memoizedProps,m!==R&&ni(b),yi(b),Qr(b,G,m,R,A)),null;case 27:if(Xe(b),A=le.current,G=b.type,m!==null&&b.stateNode!=null)m.memoizedProps!==R&&ni(b);else{if(!R){if(b.stateNode===null)throw Error(r(166));return yi(b),null}m=re.current,Kd(b)?Tv(b):(m=ZN(G,R,A),b.stateNode=m,ni(b))}return yi(b),null;case 5:if(Xe(b),G=b.type,m!==null&&b.stateNode!=null)m.memoizedProps!==R&&ni(b);else{if(!R){if(b.stateNode===null)throw Error(r(166));return yi(b),null}if(K=re.current,Kd(b))Tv(b);else{var oe=tE(le.current);switch(K){case 1:K=oe.createElementNS("http://www.w3.org/2000/svg",G);break;case 2:K=oe.createElementNS("http://www.w3.org/1998/Math/MathML",G);break;default:switch(G){case"svg":K=oe.createElementNS("http://www.w3.org/2000/svg",G);break;case"math":K=oe.createElementNS("http://www.w3.org/1998/Math/MathML",G);break;case"script":K=oe.createElement("div"),K.innerHTML="<script><\/script>",K=K.removeChild(K.firstChild);break;case"select":K=typeof R.is=="string"?oe.createElement("select",{is:R.is}):oe.createElement("select"),R.multiple?K.multiple=!0:R.size&&(K.size=R.size);break;default:K=typeof R.is=="string"?oe.createElement(G,{is:R.is}):oe.createElement(G)}}K[$e]=b,K[_n]=R;e:for(oe=b.child;oe!==null;){if(oe.tag===5||oe.tag===6)K.appendChild(oe.stateNode);else if(oe.tag!==4&&oe.tag!==27&&oe.child!==null){oe.child.return=oe,oe=oe.child;continue}if(oe===b)break e;for(;oe.sibling===null;){if(oe.return===null||oe.return===b)break e;oe=oe.return}oe.sibling.return=oe.return,oe=oe.sibling}b.stateNode=K;e:switch(Oc(K,G,R),G){case"button":case"input":case"select":case"textarea":R=!!R.autoFocus;break e;case"img":R=!0;break e;default:R=!1}R&&ni(b)}}return yi(b),Qr(b,b.type,m===null?null:m.memoizedProps,b.pendingProps,A),null;case 6:if(m&&b.stateNode!=null)m.memoizedProps!==R&&ni(b);else{if(typeof R!="string"&&b.stateNode===null)throw Error(r(166));if(m=le.current,Kd(b)){if(m=b.stateNode,A=b.memoizedProps,R=null,G=xs,G!==null)switch(G.tag){case 27:case 5:R=G.memoizedProps}m[$e]=b,m=!!(m.nodeValue===A||R!==null&&R.suppressHydrationWarning===!0||HN(m.nodeValue,A)),m||td(b,!0)}else m=tE(m).createTextNode(R),m[$e]=b,b.stateNode=m}return yi(b),null;case 31:if(A=b.memoizedState,m===null||m.memoizedState!==null){if(R=Kd(b),A!==null){if(m===null){if(!R)throw Error(r(318));if(m=b.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(557));m[$e]=b}else ye(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;yi(b),m=!1}else A=Qd(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=A),m=!0;if(!m)return b.flags&256?(tc(b),b):(tc(b),null);if((b.flags&128)!==0)throw Error(r(558))}return yi(b),null;case 13:if(R=b.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(G=Kd(b),R!==null&&R.dehydrated!==null){if(m===null){if(!G)throw Error(r(318));if(G=b.memoizedState,G=G!==null?G.dehydrated:null,!G)throw Error(r(317));G[$e]=b}else ye(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;yi(b),G=!1}else G=Qd(),m!==null&&m.memoizedState!==null&&(m.memoizedState.hydrationErrors=G),G=!0;if(!G)return b.flags&256?(tc(b),b):(tc(b),null)}return tc(b),(b.flags&128)!==0?(b.lanes=A,b):(A=R!==null,m=m!==null&&m.memoizedState!==null,A&&(R=b.child,G=null,R.alternate!==null&&R.alternate.memoizedState!==null&&R.alternate.memoizedState.cachePool!==null&&(G=R.alternate.memoizedState.cachePool.pool),K=null,R.memoizedState!==null&&R.memoizedState.cachePool!==null&&(K=R.memoizedState.cachePool.pool),K!==G&&(R.flags|=2048)),A!==m&&A&&(b.child.flags|=8192),zi(b,b.updateQueue),yi(b),null);case 4:return Se(),m===null&&NO(b.stateNode.containerInfo),yi(b),null;case 10:return rd(b.type),yi(b),null;case 19:if(Q(Io),R=b.memoizedState,R===null)return yi(b),null;if(G=(b.flags&128)!==0,K=R.rendering,K===null)if(G)xo(R,!1);else{if(Os!==0||m!==null&&(m.flags&128)!==0)for(m=b.child;m!==null;){if(K=C0(m),K!==null){for(b.flags|=128,xo(R,!1),m=K.updateQueue,b.updateQueue=m,zi(b,m),b.subtreeFlags=0,m=A,A=b.child;A!==null;)SS(A,m),A=A.sibling;return ee(Io,Io.current&1|2),Li&&Dc(b,R.treeForkCount),b.child}m=m.sibling}R.tail!==null&&sr()>D0&&(b.flags|=128,G=!0,xo(R,!1),b.lanes=4194304)}else{if(!G)if(m=C0(K),m!==null){if(b.flags|=128,G=!0,m=m.updateQueue,b.updateQueue=m,zi(b,m),xo(R,!0),R.tail===null&&R.tailMode==="hidden"&&!K.alternate&&!Li)return yi(b),null}else 2*sr()-R.renderingStartTime>D0&&A!==536870912&&(b.flags|=128,G=!0,xo(R,!1),b.lanes=4194304);R.isBackwards?(K.sibling=b.child,b.child=K):(m=R.last,m!==null?m.sibling=K:b.child=K,R.last=K)}return R.tail!==null?(m=R.tail,R.rendering=m,R.tail=m.sibling,R.renderingStartTime=sr(),m.sibling=null,A=Io.current,ee(Io,G?A&1|2:A&1),Li&&Dc(b,R.treeForkCount),m):(yi(b),null);case 22:case 23:return tc(b),Eg(),R=b.memoizedState!==null,m!==null?m.memoizedState!==null!==R&&(b.flags|=8192):R&&(b.flags|=8192),R?(A&536870912)!==0&&(b.flags&128)===0&&(yi(b),b.subtreeFlags&6&&(b.flags|=8192)):yi(b),A=b.updateQueue,A!==null&&zi(b,A.retryQueue),A=null,m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),R=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(R=b.memoizedState.cachePool.pool),R!==A&&(b.flags|=2048),m!==null&&Q(vg),null;case 24:return A=null,m!==null&&(A=m.memoizedState.cache),b.memoizedState.cache!==A&&(b.flags|=2048),rd(Ss),yi(b),null;case 25:return null;case 30:return null}throw Error(r(156,b.tag))}function Lo(m,b){switch(Zd(b),b.tag){case 1:return m=b.flags,m&65536?(b.flags=m&-65537|128,b):null;case 3:return rd(Ss),Se(),m=b.flags,(m&65536)!==0&&(m&128)===0?(b.flags=m&-65537|128,b):null;case 26:case 27:case 5:return Xe(b),null;case 31:if(b.memoizedState!==null){if(tc(b),b.alternate===null)throw Error(r(340));ye()}return m=b.flags,m&65536?(b.flags=m&-65537|128,b):null;case 13:if(tc(b),m=b.memoizedState,m!==null&&m.dehydrated!==null){if(b.alternate===null)throw Error(r(340));ye()}return m=b.flags,m&65536?(b.flags=m&-65537|128,b):null;case 19:return Q(Io),null;case 4:return Se(),null;case 10:return rd(b.type),null;case 22:case 23:return tc(b),Eg(),m!==null&&Q(vg),m=b.flags,m&65536?(b.flags=m&-65537|128,b):null;case 24:return rd(Ss),null;case 25:return null;default:return null}}function Ba(m,b){switch(Zd(b),b.tag){case 3:rd(Ss),Se();break;case 26:case 27:case 5:Xe(b);break;case 4:Se();break;case 31:b.memoizedState!==null&&tc(b);break;case 13:tc(b);break;case 19:Q(Io);break;case 10:rd(b.type);break;case 22:case 23:tc(b),Eg(),m!==null&&Q(vg);break;case 24:rd(Ss)}}function fo(m,b){try{var A=b.updateQueue,R=A!==null?A.lastEffect:null;if(R!==null){var G=R.next;A=G;do{if((A.tag&m)===m){R=void 0;var K=A.create,oe=A.inst;R=K(),oe.destroy=R}A=A.next}while(A!==G)}}catch(_e){po(b,b.return,_e)}}function Ja(m,b,A){try{var R=b.updateQueue,G=R!==null?R.lastEffect:null;if(G!==null){var K=G.next;R=K;do{if((R.tag&m)===m){var oe=R.inst,_e=oe.destroy;if(_e!==void 0){oe.destroy=void 0,G=b;var Ze=A,Mt=_e;try{Mt()}catch(an){po(G,Ze,an)}}}R=R.next}while(R!==K)}}catch(an){po(b,b.return,an)}}function ko(m){var b=m.updateQueue;if(b!==null){var A=m.stateNode;try{w0(b,A)}catch(R){po(m,m.return,R)}}}function As(m,b,A){A.props=wc(m.type,m.memoizedProps),A.state=m.memoizedState;try{A.componentWillUnmount()}catch(R){po(m,b,R)}}function $a(m,b){try{var A=m.ref;if(A!==null){switch(m.tag){case 26:case 27:case 5:var R=m.stateNode;break;case 30:R=m.stateNode;break;default:R=m.stateNode}typeof A=="function"?m.refCleanup=A(R):A.current=R}}catch(G){po(m,b,G)}}function fa(m,b){var A=m.ref,R=m.refCleanup;if(A!==null)if(typeof R=="function")try{R()}catch(G){po(m,b,G)}finally{m.refCleanup=null,m=m.alternate,m!=null&&(m.refCleanup=null)}else if(typeof A=="function")try{A(null)}catch(G){po(m,b,G)}else A.current=null}function li(m){var b=m.type,A=m.memoizedProps,R=m.stateNode;try{e:switch(b){case"button":case"input":case"select":case"textarea":A.autoFocus&&R.focus();break e;case"img":A.src?R.src=A.src:A.srcSet&&(R.srcset=A.srcSet)}}catch(G){po(m,m.return,G)}}function ws(m,b,A){try{var R=m.stateNode;o8(R,m.type,A,b),R[_n]=b}catch(G){po(m,m.return,G)}}function oa(m){return m.tag===5||m.tag===3||m.tag===26||m.tag===27&&bi(m.type)||m.tag===4}function kr(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||oa(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.tag===27&&bi(m.type)||m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function vi(m,b,A){var R=m.tag;if(R===5||R===6)m=m.stateNode,b?(A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A).insertBefore(m,b):(b=A.nodeType===9?A.body:A.nodeName==="HTML"?A.ownerDocument.body:A,b.appendChild(m),A=A._reactRootContainer,A!=null||b.onclick!==null||(b.onclick=Xr));else if(R!==4&&(R===27&&bi(m.type)&&(A=m.stateNode,b=null),m=m.child,m!==null))for(vi(m,b,A),m=m.sibling;m!==null;)vi(m,b,A),m=m.sibling}function Di(m,b,A){var R=m.tag;if(R===5||R===6)m=m.stateNode,b?A.insertBefore(m,b):A.appendChild(m);else if(R!==4&&(R===27&&bi(m.type)&&(A=m.stateNode),m=m.child,m!==null))for(Di(m,b,A),m=m.sibling;m!==null;)Di(m,b,A),m=m.sibling}function Jo(m){var b=m.stateNode,A=m.memoizedProps;try{for(var R=m.type,G=b.attributes;G.length;)b.removeAttributeNode(G[0]);Oc(b,R,A),b[$e]=m,b[_n]=A}catch(K){po(m,m.return,K)}}var Al=!1,Me=!1,St=!1,vt=typeof WeakSet=="function"?WeakSet:Set,Nn=null;function _i(m,b){if(m=m.containerInfo,eE=nT,m=ES(m),v0(m)){if("selectionStart"in m)var A={start:m.selectionStart,end:m.selectionEnd};else e:{A=(A=m.ownerDocument)&&A.defaultView||window;var R=A.getSelection&&A.getSelection();if(R&&R.rangeCount!==0){A=R.anchorNode;var G=R.anchorOffset,K=R.focusNode;R=R.focusOffset;try{A.nodeType,K.nodeType}catch{A=null;break e}var oe=0,_e=-1,Ze=-1,Mt=0,an=0,vn=m,It=null;t:for(;;){for(var Gt;vn!==A||G!==0&&vn.nodeType!==3||(_e=oe+G),vn!==K||R!==0&&vn.nodeType!==3||(Ze=oe+R),vn.nodeType===3&&(oe+=vn.nodeValue.length),(Gt=vn.firstChild)!==null;)It=vn,vn=Gt;for(;;){if(vn===m)break t;if(It===A&&++Mt===G&&(_e=oe),It===K&&++an===R&&(Ze=oe),(Gt=vn.nextSibling)!==null)break;vn=It,It=vn.parentNode}vn=Gt}A=_e===-1||Ze===-1?null:{start:_e,end:Ze}}else A=null}A=A||{start:0,end:0}}else A=null;for(DO={focusedElem:m,selectionRange:A},nT=!1,Nn=b;Nn!==null;)if(b=Nn,m=b.child,(b.subtreeFlags&1028)!==0&&m!==null)m.return=b,Nn=m;else for(;Nn!==null;){switch(b=Nn,K=b.alternate,m=b.flags,b.tag){case 0:if((m&4)!==0&&(m=b.updateQueue,m=m!==null?m.events:null,m!==null))for(A=0;A<m.length;A++)G=m[A],G.ref.impl=G.nextImpl;break;case 11:case 15:break;case 1:if((m&1024)!==0&&K!==null){m=void 0,A=b,G=K.memoizedProps,K=K.memoizedState,R=A.stateNode;try{var Fr=wc(A.type,G);m=R.getSnapshotBeforeUpdate(Fr,K),R.__reactInternalSnapshotBeforeUpdate=m}catch(hi){po(A,A.return,hi)}}break;case 3:if((m&1024)!==0){if(m=b.stateNode.containerInfo,A=m.nodeType,A===9)XS(m);else if(A===1)switch(m.nodeName){case"HEAD":case"HTML":case"BODY":XS(m);break;default:m.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((m&1024)!==0)throw Error(r(163))}if(m=b.sibling,m!==null){m.return=b.return,Nn=m;break}Nn=b.return}}function Ia(m,b,A){var R=A.flags;switch(A.tag){case 0:case 11:case 15:Kt(m,A),R&4&&fo(5,A);break;case 1:if(Kt(m,A),R&4)if(m=A.stateNode,b===null)try{m.componentDidMount()}catch(oe){po(A,A.return,oe)}else{var G=wc(A.type,b.memoizedProps);b=b.memoizedState;try{m.componentDidUpdate(G,b,m.__reactInternalSnapshotBeforeUpdate)}catch(oe){po(A,A.return,oe)}}R&64&&ko(A),R&512&&$a(A,A.return);break;case 3:if(Kt(m,A),R&64&&(m=A.updateQueue,m!==null)){if(b=null,A.child!==null)switch(A.child.tag){case 27:case 5:b=A.child.stateNode;break;case 1:b=A.child.stateNode}try{w0(m,b)}catch(oe){po(A,A.return,oe)}}break;case 27:b===null&&R&4&&Jo(A);case 26:case 5:Kt(m,A),b===null&&R&4&&li(A),R&512&&$a(A,A.return);break;case 12:Kt(m,A);break;case 31:Kt(m,A),R&4&&je(m,A);break;case 13:Kt(m,A),R&4&&qe(m,A),R&64&&(m=A.memoizedState,m!==null&&(m=m.dehydrated,m!==null&&(A=HS.bind(null,A),u8(m,A))));break;case 22:if(R=A.memoizedState!==null||Al,!R){b=b!==null&&b.memoizedState!==null||Me,G=Al;var K=Me;Al=R,(Me=b)&&!K?on(m,A,(A.subtreeFlags&8772)!==0):Kt(m,A),Al=G,Me=K}break;case 30:break;default:Kt(m,A)}}function ge(m){var b=m.alternate;b!==null&&(m.alternate=null,ge(b)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(b=m.stateNode,b!==null&&ia(b)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}var be=null,Ie=!1;function gt(m,b,A){for(A=A.child;A!==null;)yt(m,b,A),A=A.sibling}function yt(m,b,A){if(ei&&typeof ei.onCommitFiberUnmount=="function")try{ei.onCommitFiberUnmount(Rr,A)}catch{}switch(A.tag){case 26:Me||fa(A,b),gt(m,b,A),A.memoizedState?A.memoizedState.count--:A.stateNode&&(A=A.stateNode,A.parentNode.removeChild(A));break;case 27:Me||fa(A,b);var R=be,G=Ie;bi(A.type)&&(be=A.stateNode,Ie=!1),gt(m,b,A),rE(A.stateNode),be=R,Ie=G;break;case 5:Me||fa(A,b);case 6:if(R=be,G=Ie,be=null,gt(m,b,A),be=R,Ie=G,be!==null)if(Ie)try{(be.nodeType===9?be.body:be.nodeName==="HTML"?be.ownerDocument.body:be).removeChild(A.stateNode)}catch(K){po(A,b,K)}else try{be.removeChild(A.stateNode)}catch(K){po(A,b,K)}break;case 18:be!==null&&(Ie?(m=be,FO(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,A.stateNode),H1(m)):FO(be,A.stateNode));break;case 4:R=be,G=Ie,be=A.stateNode.containerInfo,Ie=!0,gt(m,b,A),be=R,Ie=G;break;case 0:case 11:case 14:case 15:Ja(2,A,b),Me||Ja(4,A,b),gt(m,b,A);break;case 1:Me||(fa(A,b),R=A.stateNode,typeof R.componentWillUnmount=="function"&&As(A,b,R)),gt(m,b,A);break;case 21:gt(m,b,A);break;case 22:Me=(R=Me)||A.memoizedState!==null,gt(m,b,A),Me=R;break;default:gt(m,b,A)}}function je(m,b){if(b.memoizedState===null&&(m=b.alternate,m!==null&&(m=m.memoizedState,m!==null))){m=m.dehydrated;try{H1(m)}catch(A){po(b,b.return,A)}}}function qe(m,b){if(b.memoizedState===null&&(m=b.alternate,m!==null&&(m=m.memoizedState,m!==null&&(m=m.dehydrated,m!==null))))try{H1(m)}catch(A){po(b,b.return,A)}}function Ke(m){switch(m.tag){case 31:case 13:case 19:var b=m.stateNode;return b===null&&(b=m.stateNode=new vt),b;case 22:return m=m.stateNode,b=m._retryCache,b===null&&(b=m._retryCache=new vt),b;default:throw Error(r(435,m.tag))}}function Ne(m,b){var A=Ke(m);b.forEach(function(R){if(!A.has(R)){A.add(R);var G=n8.bind(null,m,R);R.then(G,G)}})}function Ue(m,b){var A=b.deletions;if(A!==null)for(var R=0;R<A.length;R++){var G=A[R],K=m,oe=b,_e=oe;e:for(;_e!==null;){switch(_e.tag){case 27:if(bi(_e.type)){be=_e.stateNode,Ie=!1;break e}break;case 5:be=_e.stateNode,Ie=!1;break e;case 3:case 4:be=_e.stateNode.containerInfo,Ie=!0;break e}_e=_e.return}if(be===null)throw Error(r(160));yt(K,oe,G),be=null,Ie=!1,K=G.alternate,K!==null&&(K.return=null),G.return=null}if(b.subtreeFlags&13886)for(b=b.child;b!==null;)Ye(b,m),b=b.sibling}var xe=null;function Ye(m,b){var A=m.alternate,R=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:Ue(b,m),ht(m),R&4&&(Ja(3,m,m.return),fo(3,m),Ja(5,m,m.return));break;case 1:Ue(b,m),ht(m),R&512&&(Me||A===null||fa(A,A.return)),R&64&&Al&&(m=m.updateQueue,m!==null&&(R=m.callbacks,R!==null&&(A=m.shared.hiddenCallbacks,m.shared.hiddenCallbacks=A===null?R:A.concat(R))));break;case 26:var G=xe;if(Ue(b,m),ht(m),R&512&&(Me||A===null||fa(A,A.return)),R&4){var K=A!==null?A.memoizedState:null;if(R=m.memoizedState,A===null)if(R===null)if(m.stateNode===null){e:{R=m.type,A=m.memoizedProps,G=G.ownerDocument||G;t:switch(R){case"title":K=G.getElementsByTagName("title")[0],(!K||K[Ir]||K[$e]||K.namespaceURI==="http://www.w3.org/2000/svg"||K.hasAttribute("itemprop"))&&(K=G.createElement(R),G.head.insertBefore(K,G.querySelector("head > title"))),Oc(K,R,A),K[$e]=m,Yr(K),R=K;break e;case"link":var oe=n3("link","href",G).get(R+(A.href||""));if(oe){for(var _e=0;_e<oe.length;_e++)if(K=oe[_e],K.getAttribute("href")===(A.href==null||A.href===""?null:A.href)&&K.getAttribute("rel")===(A.rel==null?null:A.rel)&&K.getAttribute("title")===(A.title==null?null:A.title)&&K.getAttribute("crossorigin")===(A.crossOrigin==null?null:A.crossOrigin)){oe.splice(_e,1);break t}}K=G.createElement(R),Oc(K,R,A),G.head.appendChild(K);break;case"meta":if(oe=n3("meta","content",G).get(R+(A.content||""))){for(_e=0;_e<oe.length;_e++)if(K=oe[_e],K.getAttribute("content")===(A.content==null?null:""+A.content)&&K.getAttribute("name")===(A.name==null?null:A.name)&&K.getAttribute("property")===(A.property==null?null:A.property)&&K.getAttribute("http-equiv")===(A.httpEquiv==null?null:A.httpEquiv)&&K.getAttribute("charset")===(A.charSet==null?null:A.charSet)){oe.splice(_e,1);break t}}K=G.createElement(R),Oc(K,R,A),G.head.appendChild(K);break;default:throw Error(r(468,R))}K[$e]=m,Yr(K),R=K}m.stateNode=R}else r3(G,m.type,m.stateNode);else m.stateNode=t3(G,R,m.memoizedProps);else K!==R?(K===null?A.stateNode!==null&&(A=A.stateNode,A.parentNode.removeChild(A)):K.count--,R===null?r3(G,m.type,m.stateNode):t3(G,R,m.memoizedProps)):R===null&&m.stateNode!==null&&ws(m,m.memoizedProps,A.memoizedProps)}break;case 27:Ue(b,m),ht(m),R&512&&(Me||A===null||fa(A,A.return)),A!==null&&R&4&&ws(m,m.memoizedProps,A.memoizedProps);break;case 5:if(Ue(b,m),ht(m),R&512&&(Me||A===null||fa(A,A.return)),m.flags&32){G=m.stateNode;try{Fe(G,"")}catch(Fr){po(m,m.return,Fr)}}R&4&&m.stateNode!=null&&(G=m.memoizedProps,ws(m,G,A!==null?A.memoizedProps:G)),R&1024&&(St=!0);break;case 6:if(Ue(b,m),ht(m),R&4){if(m.stateNode===null)throw Error(r(162));R=m.memoizedProps,A=m.stateNode;try{A.nodeValue=R}catch(Fr){po(m,m.return,Fr)}}break;case 3:if(iE=null,G=xe,xe=ZS(b.containerInfo),Ue(b,m),xe=G,ht(m),R&4&&A!==null&&A.memoizedState.isDehydrated)try{H1(b.containerInfo)}catch(Fr){po(m,m.return,Fr)}St&&(St=!1,Dt(m));break;case 4:R=xe,xe=ZS(m.stateNode.containerInfo),Ue(b,m),ht(m),xe=R;break;case 12:Ue(b,m),ht(m);break;case 31:Ue(b,m),ht(m),R&4&&(R=m.updateQueue,R!==null&&(m.updateQueue=null,Ne(m,R)));break;case 13:Ue(b,m),ht(m),m.child.flags&8192&&m.memoizedState!==null!=(A!==null&&A.memoizedState!==null)&&(Gb=sr()),R&4&&(R=m.updateQueue,R!==null&&(m.updateQueue=null,Ne(m,R)));break;case 22:G=m.memoizedState!==null;var Ze=A!==null&&A.memoizedState!==null,Mt=Al,an=Me;if(Al=Mt||G,Me=an||Ze,Ue(b,m),Me=an,Al=Mt,ht(m),R&8192)e:for(b=m.stateNode,b._visibility=G?b._visibility&-2:b._visibility|1,G&&(A===null||Ze||Al||Me||Wt(m)),A=null,b=m;;){if(b.tag===5||b.tag===26){if(A===null){Ze=A=b;try{if(K=Ze.stateNode,G)oe=K.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none";else{_e=Ze.stateNode;var vn=Ze.memoizedProps.style,It=vn!=null&&vn.hasOwnProperty("display")?vn.display:null;_e.style.display=It==null||typeof It=="boolean"?"":(""+It).trim()}}catch(Fr){po(Ze,Ze.return,Fr)}}}else if(b.tag===6){if(A===null){Ze=b;try{Ze.stateNode.nodeValue=G?"":Ze.memoizedProps}catch(Fr){po(Ze,Ze.return,Fr)}}}else if(b.tag===18){if(A===null){Ze=b;try{var Gt=Ze.stateNode;G?Nf(Gt,!0):Nf(Ze.stateNode,!1)}catch(Fr){po(Ze,Ze.return,Fr)}}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===m)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break e;for(;b.sibling===null;){if(b.return===null||b.return===m)break e;A===b&&(A=null),b=b.return}A===b&&(A=null),b.sibling.return=b.return,b=b.sibling}R&4&&(R=m.updateQueue,R!==null&&(A=R.retryQueue,A!==null&&(R.retryQueue=null,Ne(m,A))));break;case 19:Ue(b,m),ht(m),R&4&&(R=m.updateQueue,R!==null&&(m.updateQueue=null,Ne(m,R)));break;case 30:break;case 21:break;default:Ue(b,m),ht(m)}}function ht(m){var b=m.flags;if(b&2){try{for(var A,R=m.return;R!==null;){if(oa(R)){A=R;break}R=R.return}if(A==null)throw Error(r(160));switch(A.tag){case 27:var G=A.stateNode,K=kr(m);Di(m,K,G);break;case 5:var oe=A.stateNode;A.flags&32&&(Fe(oe,""),A.flags&=-33);var _e=kr(m);Di(m,_e,oe);break;case 3:case 4:var Ze=A.stateNode.containerInfo,Mt=kr(m);vi(m,Mt,Ze);break;default:throw Error(r(161))}}catch(an){po(m,m.return,an)}m.flags&=-3}b&4096&&(m.flags&=-4097)}function Dt(m){if(m.subtreeFlags&1024)for(m=m.child;m!==null;){var b=m;Dt(b),b.tag===5&&b.flags&1024&&b.stateNode.reset(),m=m.sibling}}function Kt(m,b){if(b.subtreeFlags&8772)for(b=b.child;b!==null;)Ia(m,b.alternate,b),b=b.sibling}function Wt(m){for(m=m.child;m!==null;){var b=m;switch(b.tag){case 0:case 11:case 14:case 15:Ja(4,b,b.return),Wt(b);break;case 1:fa(b,b.return);var A=b.stateNode;typeof A.componentWillUnmount=="function"&&As(b,b.return,A),Wt(b);break;case 27:rE(b.stateNode);case 26:case 5:fa(b,b.return),Wt(b);break;case 22:b.memoizedState===null&&Wt(b);break;case 30:Wt(b);break;default:Wt(b)}m=m.sibling}}function on(m,b,A){for(A=A&&(b.subtreeFlags&8772)!==0,b=b.child;b!==null;){var R=b.alternate,G=m,K=b,oe=K.flags;switch(K.tag){case 0:case 11:case 15:on(G,K,A),fo(4,K);break;case 1:if(on(G,K,A),R=K,G=R.stateNode,typeof G.componentDidMount=="function")try{G.componentDidMount()}catch(Mt){po(R,R.return,Mt)}if(R=K,G=R.updateQueue,G!==null){var _e=R.stateNode;try{var Ze=G.shared.hiddenCallbacks;if(Ze!==null)for(G.shared.hiddenCallbacks=null,G=0;G<Ze.length;G++)gu(Ze[G],_e)}catch(Mt){po(R,R.return,Mt)}}A&&oe&64&&ko(K),$a(K,K.return);break;case 27:Jo(K);case 26:case 5:on(G,K,A),A&&R===null&&oe&4&&li(K),$a(K,K.return);break;case 12:on(G,K,A);break;case 31:on(G,K,A),A&&oe&4&&je(G,K);break;case 13:on(G,K,A),A&&oe&4&&qe(G,K);break;case 22:K.memoizedState===null&&on(G,K,A),$a(K,K.return);break;case 30:break;default:on(G,K,A)}b=b.sibling}}function gr(m,b){var A=null;m!==null&&m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(A=m.memoizedState.cachePool.pool),m=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(m=b.memoizedState.cachePool.pool),m!==A&&(m!=null&&m.refCount++,A!=null&&E0(A))}function oi(m,b){m=null,b.alternate!==null&&(m=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==m&&(b.refCount++,m!=null&&E0(m))}function qn(m,b,A,R){if(b.subtreeFlags&10256)for(b=b.child;b!==null;)Br(m,b,A,R),b=b.sibling}function Br(m,b,A,R){var G=b.flags;switch(b.tag){case 0:case 11:case 15:qn(m,b,A,R),G&2048&&fo(9,b);break;case 1:qn(m,b,A,R);break;case 3:qn(m,b,A,R),G&2048&&(m=null,b.alternate!==null&&(m=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==m&&(b.refCount++,m!=null&&E0(m)));break;case 12:if(G&2048){qn(m,b,A,R),m=b.stateNode;try{var K=b.memoizedProps,oe=K.id,_e=K.onPostCommit;typeof _e=="function"&&_e(oe,b.alternate===null?"mount":"update",m.passiveEffectDuration,-0)}catch(Ze){po(b,b.return,Ze)}}else qn(m,b,A,R);break;case 31:qn(m,b,A,R);break;case 13:qn(m,b,A,R);break;case 23:break;case 22:K=b.stateNode,oe=b.alternate,b.memoizedState!==null?K._visibility&2?qn(m,b,A,R):Vi(m,b):K._visibility&2?qn(m,b,A,R):(K._visibility|=2,$r(m,b,A,R,(b.subtreeFlags&10256)!==0||!1)),G&2048&&gr(oe,b);break;case 24:qn(m,b,A,R),G&2048&&oi(b.alternate,b);break;default:qn(m,b,A,R)}}function $r(m,b,A,R,G){for(G=G&&((b.subtreeFlags&10256)!==0||!1),b=b.child;b!==null;){var K=m,oe=b,_e=A,Ze=R,Mt=oe.flags;switch(oe.tag){case 0:case 11:case 15:$r(K,oe,_e,Ze,G),fo(8,oe);break;case 23:break;case 22:var an=oe.stateNode;oe.memoizedState!==null?an._visibility&2?$r(K,oe,_e,Ze,G):Vi(K,oe):(an._visibility|=2,$r(K,oe,_e,Ze,G)),G&&Mt&2048&&gr(oe.alternate,oe);break;case 24:$r(K,oe,_e,Ze,G),G&&Mt&2048&&oi(oe.alternate,oe);break;default:$r(K,oe,_e,Ze,G)}b=b.sibling}}function Vi(m,b){if(b.subtreeFlags&10256)for(b=b.child;b!==null;){var A=m,R=b,G=R.flags;switch(R.tag){case 22:Vi(A,R),G&2048&&gr(R.alternate,R);break;case 24:Vi(A,R),G&2048&&oi(R.alternate,R);break;default:Vi(A,R)}b=b.sibling}}var So=8192;function ic(m,b,A){if(m.subtreeFlags&So)for(m=m.child;m!==null;)C1(m,b,A),m=m.sibling}function C1(m,b,A){switch(m.tag){case 26:ic(m,b,A),m.flags&So&&m.memoizedState!==null&&j1(A,xe,m.memoizedState,m.memoizedProps);break;case 5:ic(m,b,A);break;case 3:case 4:var R=xe;xe=ZS(m.stateNode.containerInfo),ic(m,b,A),xe=R;break;case 22:m.memoizedState===null&&(R=m.alternate,R!==null&&R.memoizedState!==null?(R=So,So=16777216,ic(m,b,A),So=R):ic(m,b,A));break;default:ic(m,b,A)}}function Eu(m){var b=m.alternate;if(b!==null&&(m=b.child,m!==null)){b.child=null;do b=m.sibling,m.sibling=null,m=b;while(m!==null)}}function Hv(m){var b=m.deletions;if((m.flags&16)!==0){if(b!==null)for(var A=0;A<b.length;A++){var R=b[A];Nn=R,EN(R,m)}Eu(m)}if(m.subtreeFlags&10256)for(m=m.child;m!==null;)ph(m),m=m.sibling}function ph(m){switch(m.tag){case 0:case 11:case 15:Hv(m),m.flags&2048&&Ja(9,m,m.return);break;case 3:Hv(m);break;case 12:Hv(m);break;case 22:var b=m.stateNode;m.memoizedState!==null&&b._visibility&2&&(m.return===null||m.return.tag!==13)?(b._visibility&=-3,L0(m)):Hv(m);break;default:Hv(m)}}function L0(m){var b=m.deletions;if((m.flags&16)!==0){if(b!==null)for(var A=0;A<b.length;A++){var R=b[A];Nn=R,EN(R,m)}Eu(m)}for(m=m.child;m!==null;){switch(b=m,b.tag){case 0:case 11:case 15:Ja(8,b,b.return),L0(b);break;case 22:A=b.stateNode,A._visibility&2&&(A._visibility&=-3,L0(b));break;default:L0(b)}m=m.sibling}}function EN(m,b){for(;Nn!==null;){var A=Nn;switch(A.tag){case 0:case 11:case 15:Ja(8,A,b);break;case 23:case 22:if(A.memoizedState!==null&&A.memoizedState.cachePool!==null){var R=A.memoizedState.cachePool.pool;R!=null&&R.refCount++}break;case 24:E0(A.memoizedState.cache)}if(R=A.child,R!==null)R.return=A,Nn=R;else e:for(A=m;Nn!==null;){R=Nn;var G=R.sibling,K=R.return;if(ge(R),R===A){Nn=null;break e}if(G!==null){G.return=K,Nn=G;break e}Nn=K}}}var Z5={getCacheForType:function(m){var b=zs(Ss),A=b.data.get(m);return A===void 0&&(A=m(),b.data.set(m,A)),A},cacheSignal:function(){return zs(Ss).controller.signal}},K5=typeof WeakMap=="function"?WeakMap:Map,eo=0,Do=null,ma=null,Ea=0,ho=0,Of=null,Gv=!1,R1=!1,pO=!1,fd=0,Os=0,Wv=0,k0=0,gO=0,Cf=0,M1=0,Hb=null,Gu=null,vO=!1,Gb=0,xN=0,D0=1/0,FS=null,Vv=null,zl=0,Yv=null,P1=null,Tg=0,mO=0,yO=null,SN=null,Wb=0,_O=null;function Rf(){return(eo&2)!==0&&Ea!==0?Ea&-Ea:N.T!==null?Mf():_t()}function TN(){if(Cf===0)if((Ea&536870912)===0||Li){var m=Nr;Nr<<=1,(Nr&3932160)===0&&(Nr=262144),Cf=m}else Cf=536870912;return m=zc.current,m!==null&&(m.flags|=32),Cf}function Wu(m,b,A){(m===Do&&(ho===2||ho===9)||m.cancelPendingCommit!==null)&&(N1(m,0),Ag(m,Ea,Cf,!1)),me(m,A),((eo&2)===0||m!==Do)&&(m===Do&&((eo&2)===0&&(k0|=A),Os===4&&Ag(m,Ea,Cf,!1)),up(m))}function AN(m,b,A){if((eo&6)!==0)throw Error(r(327));var R=!A&&(b&127)===0&&(b&m.expiredLanes)===0||F(m,b),G=R?J5(m,b):EO(m,b,!0),K=R;do{if(G===0){R1&&!R&&Ag(m,b,0,!1);break}else{if(A=m.current.alternate,K&&!ON(A)){G=EO(m,b,!1),K=!1;continue}if(G===2){if(K=b,m.errorRecoveryDisabledLanes&K)var oe=0;else oe=m.pendingLanes&-536870913,oe=oe!==0?oe:oe&536870912?536870912:0;if(oe!==0){b=oe;e:{var _e=m;G=Hb;var Ze=_e.current.memoizedState.isDehydrated;if(Ze&&(N1(_e,oe).flags|=256),oe=EO(_e,oe,!1),oe!==2){if(pO&&!Ze){_e.errorRecoveryDisabledLanes|=K,k0|=K,G=4;break e}K=Gu,Gu=G,K!==null&&(Gu===null?Gu=K:Gu.push.apply(Gu,K))}G=oe}if(K=!1,G!==2)continue}}if(G===1){N1(m,0),Ag(m,b,0,!0);break}e:{switch(R=m,K=G,K){case 0:case 1:throw Error(r(345));case 4:if((b&4194048)!==b)break;case 6:Ag(R,b,Cf,!Gv);break e;case 2:Gu=null;break;case 3:case 5:break;default:throw Error(r(329))}if((b&62914560)===b&&(G=Gb+300-sr(),10<G)){if(Ag(R,b,Cf,!Gv),W(R,0,!0)!==0)break e;Tg=b,R.timeoutHandle=GN(wN.bind(null,R,A,Gu,FS,vO,b,Cf,k0,M1,Gv,K,"Throttled",-0,0),G);break e}wN(R,A,Gu,FS,vO,b,Cf,k0,M1,Gv,K,null,-0,0)}}break}while(!0);up(m)}function wN(m,b,A,R,G,K,oe,_e,Ze,Mt,an,vn,It,Gt){if(m.timeoutHandle=-1,vn=b.subtreeFlags,vn&8192||(vn&16785408)===16785408){vn={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xr},C1(b,K,vn);var Fr=(K&62914560)===K?Gb-sr():(K&4194048)===K?xN-sr():0;if(Fr=_8(vn,Fr),Fr!==null){Tg=K,m.cancelPendingCommit=Fr(IN.bind(null,m,b,K,A,R,G,oe,_e,Ze,an,vn,null,It,Gt)),Ag(m,K,oe,!Mt);return}}IN(m,b,K,A,R,G,oe,_e,Ze)}function ON(m){for(var b=m;;){var A=b.tag;if((A===0||A===11||A===15)&&b.flags&16384&&(A=b.updateQueue,A!==null&&(A=A.stores,A!==null)))for(var R=0;R<A.length;R++){var G=A[R],K=G.getSnapshot;G=G.value;try{if(!os(K(),G))return!1}catch{return!1}}if(A=b.child,b.subtreeFlags&16384&&A!==null)A.return=b,b=A;else{if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function Ag(m,b,A,R){b&=~gO,b&=~k0,m.suspendedLanes|=b,m.pingedLanes&=~b,R&&(m.warmLanes|=b),R=m.expirationTimes;for(var G=b;0<G;){var K=31-pi(G),oe=1<<K;R[K]=-1,G&=~oe}A!==0&&Oe(m,A,b)}function US(){return(eo&6)===0?(Zb(0),!1):!0}function bO(){if(ma!==null){if(ho===0)var m=ma.return;else m=ma,nd=Ui=null,g1(m),bf=null,Uc=0,m=ma;for(;m!==null;)Ba(m.alternate,m),m=m.return;ma=null}}function N1(m,b){var A=m.timeoutHandle;A!==-1&&(m.timeoutHandle=-1,l8(A)),A=m.cancelPendingCommit,A!==null&&(m.cancelPendingCommit=null,A()),Tg=0,bO(),Do=m,ma=A=Uu(m.current,null),Ea=b,ho=0,Of=null,Gv=!1,R1=F(m,b),pO=!1,M1=Cf=gO=k0=Wv=Os=0,Gu=Hb=null,vO=!1,(b&8)!==0&&(b|=b&32);var R=m.entangledLanes;if(R!==0)for(m=m.entanglements,R&=b;0<R;){var G=31-pi(R),K=1<<G;b|=m[G],R&=~K}return fd=b,Fu(),A}function CN(m,b){ci=null,N.H=cp,b===Ov||b===S0?(b=yg(),ho=3):b===f1?(b=yg(),ho=4):ho=b===De?8:b!==null&&typeof b=="object"&&typeof b.then=="function"?6:1,Of=b,ma===null&&(Os=1,I0(m,cu(b,m.current)))}function Vb(){var m=zc.current;return m===null?!0:(Ea&4194048)===Ea?vu===null:(Ea&62914560)===Ea||(Ea&536870912)!==0?m===vu:!1}function RN(){var m=N.H;return N.H=cp,m===null?cp:m}function MN(){var m=N.A;return N.A=Z5,m}function jS(){Os=4,Gv||(Ea&4194048)!==Ea&&zc.current!==null||(R1=!0),(Wv&134217727)===0&&(k0&134217727)===0||Do===null||Ag(Do,Ea,Cf,!1)}function EO(m,b,A){var R=eo;eo|=2;var G=RN(),K=MN();(Do!==m||Ea!==b)&&(FS=null,N1(m,b)),b=!1;var oe=Os;e:do try{if(ho!==0&&ma!==null){var _e=ma,Ze=Of;switch(ho){case 8:bO(),oe=6;break e;case 3:case 2:case 9:case 6:zc.current===null&&(b=!0);var Mt=ho;if(ho=0,Of=null,I1(m,_e,Ze,Mt),A&&R1){oe=0;break e}break;default:Mt=ho,ho=0,Of=null,I1(m,_e,Ze,Mt)}}Q5(),oe=Os;break}catch(an){CN(m,an)}while(!0);return b&&m.shellSuspendCounter++,nd=Ui=null,eo=R,N.H=G,N.A=K,ma===null&&(Do=null,Ea=0,Fu()),oe}function Q5(){for(;ma!==null;)PN(ma)}function J5(m,b){var A=eo;eo|=2;var R=RN(),G=MN();Do!==m||Ea!==b?(FS=null,D0=sr()+500,N1(m,b)):R1=F(m,b);e:do try{if(ho!==0&&ma!==null){b=ma;var K=Of;t:switch(ho){case 1:ho=0,Of=null,I1(m,b,K,1);break;case 2:case 9:if(CS(K)){ho=0,Of=null,NN(b);break}b=function(){ho!==2&&ho!==9||Do!==m||(ho=7),up(m)},K.then(b,b);break e;case 3:ho=7;break e;case 4:ho=5;break e;case 7:CS(K)?(ho=0,Of=null,NN(b)):(ho=0,Of=null,I1(m,b,K,7));break;case 5:var oe=null;switch(ma.tag){case 26:oe=ma.memoizedState;case 5:case 27:var _e=ma;if(oe?i3(oe):_e.stateNode.complete){ho=0,Of=null;var Ze=_e.sibling;if(Ze!==null)ma=Ze;else{var Mt=_e.return;Mt!==null?(ma=Mt,zS(Mt)):ma=null}break t}}ho=0,Of=null,I1(m,b,K,5);break;case 6:ho=0,Of=null,I1(m,b,K,6);break;case 8:bO(),Os=6;break e;default:throw Error(r(462))}}e8();break}catch(an){CN(m,an)}while(!0);return nd=Ui=null,N.H=R,N.A=G,eo=A,ma!==null?0:(Do=null,Ea=0,Fu(),Os)}function e8(){for(;ma!==null&&!In();)PN(ma)}function PN(m){var b=pr(m.alternate,m,fd);m.memoizedProps=m.pendingProps,b===null?zS(m):ma=b}function NN(m){var b=m,A=b.alternate;switch(b.tag){case 15:case 0:b=wt(A,b,b.pendingProps,b.type,void 0,Ea);break;case 11:b=wt(A,b,b.pendingProps,b.type.render,b.ref,Ea);break;case 5:g1(b);default:Ba(A,b),b=ma=SS(b,fd),b=pr(A,b,fd)}m.memoizedProps=m.pendingProps,b===null?zS(m):ma=b}function I1(m,b,A,R){nd=Ui=null,g1(b),bf=null,Uc=0;var G=b.return;try{if(Ee(m,G,b,A,Ea)){Os=1,I0(m,cu(A,m.current)),ma=null;return}}catch(K){if(G!==null)throw ma=G,K;Os=1,I0(m,cu(A,m.current)),ma=null;return}b.flags&32768?(Li||R===1?m=!0:R1||(Ea&536870912)!==0?m=!1:(Gv=m=!0,(R===2||R===9||R===3||R===6)&&(R=zc.current,R!==null&&R.tag===13&&(R.flags|=16384))),Yb(b,m)):zS(b)}function zS(m){var b=m;do{if((b.flags&32768)!==0){Yb(b,Gv);return}m=b.return;var A=Oi(b.alternate,b,fd);if(A!==null){ma=A;return}if(b=b.sibling,b!==null){ma=b;return}ma=b=m}while(b!==null);Os===0&&(Os=5)}function Yb(m,b){do{var A=Lo(m.alternate,m);if(A!==null){A.flags&=32767,ma=A;return}if(A=m.return,A!==null&&(A.flags|=32768,A.subtreeFlags=0,A.deletions=null),!b&&(m=m.sibling,m!==null)){ma=m;return}ma=m=A}while(m!==null);Os=6,ma=null}function IN(m,b,A,R,G,K,oe,_e,Ze){m.cancelPendingCommit=null;do Xb();while(zl!==0);if((eo&6)!==0)throw Error(r(327));if(b!==null){if(b===m.current)throw Error(r(177));if(K=b.lanes|b.childLanes,K|=fg,Ce(m,A,K,oe,_e,Ze),m===Do&&(ma=Do=null,Ea=0),P1=b,Yv=m,Tg=A,mO=K,yO=G,SN=R,(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?(m.callbackNode=null,m.callbackPriority=0,r8(An,function(){return AO(),null})):(m.callbackNode=null,m.callbackPriority=0),R=(b.flags&13878)!==0,(b.subtreeFlags&13878)!==0||R){R=N.T,N.T=null,G=M.p,M.p=2,oe=eo,eo|=4;try{_i(m,b,A)}finally{eo=oe,M.p=G,N.T=R}}zl=1,xO(),SO(),$S()}}function xO(){if(zl===1){zl=0;var m=Yv,b=P1,A=(b.flags&13878)!==0;if((b.subtreeFlags&13878)!==0||A){A=N.T,N.T=null;var R=M.p;M.p=2;var G=eo;eo|=4;try{Ye(b,m);var K=DO,oe=ES(m.containerInfo),_e=K.focusedElem,Ze=K.selectionRange;if(oe!==_e&&_e&&_e.ownerDocument&&bS(_e.ownerDocument.documentElement,_e)){if(Ze!==null&&v0(_e)){var Mt=Ze.start,an=Ze.end;if(an===void 0&&(an=Mt),"selectionStart"in _e)_e.selectionStart=Mt,_e.selectionEnd=Math.min(an,_e.value.length);else{var vn=_e.ownerDocument||document,It=vn&&vn.defaultView||window;if(It.getSelection){var Gt=It.getSelection(),Fr=_e.textContent.length,hi=Math.min(Ze.start,Fr),Ao=Ze.end===void 0?hi:Math.min(Ze.end,Fr);!Gt.extend&&hi>Ao&&(oe=Ao,Ao=hi,hi=oe);var mt=_S(_e,hi),rt=_S(_e,Ao);if(mt&&rt&&(Gt.rangeCount!==1||Gt.anchorNode!==mt.node||Gt.anchorOffset!==mt.offset||Gt.focusNode!==rt.node||Gt.focusOffset!==rt.offset)){var Rt=vn.createRange();Rt.setStart(mt.node,mt.offset),Gt.removeAllRanges(),hi>Ao?(Gt.addRange(Rt),Gt.extend(rt.node,rt.offset)):(Rt.setEnd(rt.node,rt.offset),Gt.addRange(Rt))}}}}for(vn=[],Gt=_e;Gt=Gt.parentNode;)Gt.nodeType===1&&vn.push({element:Gt,left:Gt.scrollLeft,top:Gt.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<vn.length;_e++){var hn=vn[_e];hn.element.scrollLeft=hn.left,hn.element.scrollTop=hn.top}}nT=!!eE,DO=eE=null}finally{eo=G,M.p=R,N.T=A}}m.current=b,zl=2}}function SO(){if(zl===2){zl=0;var m=Yv,b=P1,A=(b.flags&8772)!==0;if((b.subtreeFlags&8772)!==0||A){A=N.T,N.T=null;var R=M.p;M.p=2;var G=eo;eo|=4;try{Ia(m,b.alternate,b)}finally{eo=G,M.p=R,N.T=A}}zl=3}}function $S(){if(zl===4||zl===3){zl=0,de();var m=Yv,b=P1,A=Tg,R=SN;(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?zl=5:(zl=0,P1=Yv=null,TO(m,m.pendingLanes));var G=m.pendingLanes;if(G===0&&(Vv=null),kn(A),b=b.stateNode,ei&&typeof ei.onCommitFiberRoot=="function")try{ei.onCommitFiberRoot(Rr,b,void 0,(b.current.flags&128)===128)}catch{}if(R!==null){b=N.T,G=M.p,M.p=2,N.T=null;try{for(var K=m.onRecoverableError,oe=0;oe<R.length;oe++){var _e=R[oe];K(_e.value,{componentStack:_e.stack})}}finally{N.T=b,M.p=G}}(Tg&3)!==0&&Xb(),up(m),G=m.pendingLanes,(A&261930)!==0&&(G&42)!==0?m===_O?Wb++:(Wb=0,_O=m):Wb=0,Zb(0)}}function TO(m,b){(m.pooledCacheLanes&=b)===0&&(b=m.pooledCache,b!=null&&(m.pooledCache=null,E0(b)))}function Xb(){return xO(),SO(),$S(),AO()}function AO(){if(zl!==5)return!1;var m=Yv,b=mO;mO=0;var A=kn(Tg),R=N.T,G=M.p;try{M.p=32>A?32:A,N.T=null,A=yO,yO=null;var K=Yv,oe=Tg;if(zl=0,P1=Yv=null,Tg=0,(eo&6)!==0)throw Error(r(331));var _e=eo;if(eo|=4,ph(K.current),Br(K,K.current,oe,A),eo=_e,Zb(0,!1),ei&&typeof ei.onPostCommitFiberRoot=="function")try{ei.onPostCommitFiberRoot(Rr,K)}catch{}return!0}finally{M.p=G,N.T=R,TO(m,b)}}function wO(m,b,A){b=cu(A,b),b=O1(m.stateNode,b,2),m=pu(m,b,2),m!==null&&(me(m,2),up(m))}function po(m,b,A){if(m.tag===3)wO(m,m,A);else for(;b!==null;){if(b.tag===3){wO(b,m,A);break}else if(b.tag===1){var R=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof R.componentDidCatch=="function"&&(Vv===null||!Vv.has(R))){m=cu(A,m),A=dh(2),R=pu(b,A,2),R!==null&&(ae(A,R,b,m),me(R,2),up(R));break}}b=b.return}}function OO(m,b,A){var R=m.pingCache;if(R===null){R=m.pingCache=new K5;var G=new Set;R.set(b,G)}else G=R.get(b),G===void 0&&(G=new Set,R.set(b,G));G.has(A)||(pO=!0,G.add(A),m=t8.bind(null,m,b,A),b.then(m,m))}function t8(m,b,A){var R=m.pingCache;R!==null&&R.delete(b),m.pingedLanes|=m.suspendedLanes&A,m.warmLanes&=~A,Do===m&&(Ea&A)===A&&(Os===4||Os===3&&(Ea&62914560)===Ea&&300>sr()-Gb?(eo&2)===0&&N1(m,0):gO|=A,M1===Ea&&(M1=0)),up(m)}function qb(m,b){b===0&&(b=te()),m=co(m,b),m!==null&&(me(m,b),up(m))}function HS(m){var b=m.memoizedState,A=0;b!==null&&(A=b.retryLane),qb(m,A)}function n8(m,b){var A=0;switch(m.tag){case 31:case 13:var R=m.stateNode,G=m.memoizedState;G!==null&&(A=G.retryLane);break;case 19:R=m.stateNode;break;case 22:R=m.stateNode._retryCache;break;default:throw Error(r(314))}R!==null&&R.delete(b),qb(m,A)}function r8(m,b){return Wn(m,b)}var L1=null,B0=null,CO=!1,GS=!1,RO=!1,Xv=0;function up(m){m!==B0&&m.next===null&&(B0===null?L1=B0=m:B0=B0.next=m),GS=!0,CO||(CO=!0,a8())}function Zb(m,b){if(!RO&&GS){RO=!0;do for(var A=!1,R=L1;R!==null;){if(m!==0){var G=R.pendingLanes;if(G===0)var K=0;else{var oe=R.suspendedLanes,_e=R.pingedLanes;K=(1<<31-pi(42|m)+1)-1,K&=G&~(oe&~_e),K=K&201326741?K&201326741|1:K?K|2:0}K!==0&&(A=!0,BN(R,K))}else K=Ea,K=W(R,R===Do?K:0,R.cancelPendingCommit!==null||R.timeoutHandle!==-1),(K&3)===0||F(R,K)||(A=!0,BN(R,K));R=R.next}while(A);RO=!1}}function i8(){LN()}function LN(){GS=CO=!1;var m=0;Xv!==0&&s8()&&(m=Xv);for(var b=sr(),A=null,R=L1;R!==null;){var G=R.next,K=kN(R,b);K===0?(R.next=null,A===null?L1=G:A.next=G,G===null&&(B0=A)):(A=R,(m!==0||(K&3)!==0)&&(GS=!0)),R=G}zl!==0&&zl!==5||Zb(m),Xv!==0&&(Xv=0)}function kN(m,b){for(var A=m.suspendedLanes,R=m.pingedLanes,G=m.expirationTimes,K=m.pendingLanes&-62914561;0<K;){var oe=31-pi(K),_e=1<<oe,Ze=G[oe];Ze===-1?((_e&A)===0||(_e&R)!==0)&&(G[oe]=Y(_e,b)):Ze<=b&&(m.expiredLanes|=_e),K&=~_e}if(b=Do,A=Ea,A=W(m,m===b?A:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),R=m.callbackNode,A===0||m===b&&(ho===2||ho===9)||m.cancelPendingCommit!==null)return R!==null&&R!==null&&Sn(R),m.callbackNode=null,m.callbackPriority=0;if((A&3)===0||F(m,A)){if(b=A&-A,b===m.callbackPriority)return b;switch(R!==null&&Sn(R),kn(A)){case 2:case 8:A=Ft;break;case 32:A=An;break;case 268435456:A=$n;break;default:A=An}return R=DN.bind(null,m),A=Wn(A,R),m.callbackPriority=b,m.callbackNode=A,b}return R!==null&&R!==null&&Sn(R),m.callbackPriority=2,m.callbackNode=null,2}function DN(m,b){if(zl!==0&&zl!==5)return m.callbackNode=null,m.callbackPriority=0,null;var A=m.callbackNode;if(Xb()&&m.callbackNode!==A)return null;var R=Ea;return R=W(m,m===Do?R:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),R===0?null:(AN(m,R,b),kN(m,sr()),m.callbackNode!=null&&m.callbackNode===A?DN.bind(null,m):null)}function BN(m,b){if(Xb())return null;AN(m,b,!0)}function a8(){VN(function(){(eo&6)!==0?Wn(st,i8):LN()})}function Mf(){if(Xv===0){var m=wv;m===0&&(m=Yn,Yn<<=1,(Yn&261888)===0&&(Yn=256)),Xv=m}return Xv}function FN(m){return m==null||typeof m=="symbol"||typeof m=="boolean"?null:typeof m=="function"?m:hr(""+m)}function UN(m,b){var A=b.ownerDocument.createElement("input");return A.name=b.name,A.value=b.value,m.id&&A.setAttribute("form",m.id),b.parentNode.insertBefore(A,b),m=new FormData(m),A.parentNode.removeChild(A),m}function F0(m,b,A,R,G){if(b==="submit"&&A&&A.stateNode===G){var K=FN((G[_n]||null).action),oe=R.submitter;oe&&(b=(b=oe[_n]||null)?FN(b.formAction):oe.getAttribute("formAction"),b!==null&&(K=b,oe=null));var _e=new o0("action","action",null,R,G);m.push({event:_e,listeners:[{instance:null,listener:function(){if(R.defaultPrevented){if(Xv!==0){var Ze=oe?UN(G,oe):new FormData(G);jl(A,{pending:!0,data:Ze,method:G.method,action:K},null,Ze)}}else typeof K=="function"&&(_e.preventDefault(),Ze=oe?UN(G,oe):new FormData(G),jl(A,{pending:!0,data:Ze,method:G.method,action:K},K,Ze))},currentTarget:G}]})}}for(var Bi=0;Bi<qh.length;Bi++){var MO=qh[Bi],Vu=MO.toLowerCase(),nl=MO[0].toUpperCase()+MO.slice(1);Ec(Vu,"on"+nl)}Ec(ou,"onAnimationEnd"),Ec(m0,"onAnimationIteration"),Ec(xS,"onAnimationStart"),Ec("dblclick","onDoubleClick"),Ec("focusin","onFocus"),Ec("focusout","onBlur"),Ec(lg,"onTransitionRun"),Ec(cg,"onTransitionStart"),Ec(i1,"onTransitionCancel"),Ec(Ca,"onTransitionEnd"),Oa("onMouseEnter",["mouseout","mouseover"]),Oa("onMouseLeave",["mouseout","mouseover"]),Oa("onPointerEnter",["pointerout","pointerover"]),Oa("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Kb="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qv=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Kb));function jN(m,b){b=(b&4)!==0;for(var A=0;A<m.length;A++){var R=m[A],G=R.event;R=R.listeners;e:{var K=void 0;if(b)for(var oe=R.length-1;0<=oe;oe--){var _e=R[oe],Ze=_e.instance,Mt=_e.currentTarget;if(_e=_e.listener,Ze!==K&&G.isPropagationStopped())break e;K=_e,G.currentTarget=Mt;try{K(G)}catch(an){y0(an)}G.currentTarget=null,K=Ze}else for(oe=0;oe<R.length;oe++){if(_e=R[oe],Ze=_e.instance,Mt=_e.currentTarget,_e=_e.listener,Ze!==K&&G.isPropagationStopped())break e;K=_e,G.currentTarget=Mt;try{K(G)}catch(an){y0(an)}G.currentTarget=null,K=Ze}}}}function ya(m,b){var A=b[Hr];A===void 0&&(A=b[Hr]=new Set);var R=m+"__bubble";A.has(R)||(VS(b,m,2,!1),A.add(R))}function PO(m,b,A){var R=0;b&&(R|=4),VS(A,m,R,b)}var WS="_reactListening"+Math.random().toString(36).slice(2);function NO(m){if(!m[WS]){m[WS]=!0,Gi.forEach(function(A){A!=="selectionchange"&&(qv.has(A)||PO(A,!1,m),PO(A,!0,m))});var b=m.nodeType===9?m:m.ownerDocument;b===null||b[WS]||(b[WS]=!0,PO("selectionchange",!1,b))}}function VS(m,b,A,R){switch(h3(b)){case 2:var G=E8;break;case 8:G=x8;break;default:G=GO}A=G.bind(null,b,A,m),G=void 0,!bb||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(G=!0),R?G!==void 0?m.addEventListener(b,A,{capture:!0,passive:G}):m.addEventListener(b,A,!0):G!==void 0?m.addEventListener(b,A,{passive:G}):m.addEventListener(b,A,!1)}function IO(m,b,A,R,G){var K=R;if((b&1)===0&&(b&2)===0&&R!==null)e:for(;;){if(R===null)return;var oe=R.tag;if(oe===3||oe===4){var _e=R.stateNode.containerInfo;if(_e===G)break;if(oe===4)for(oe=R.return;oe!==null;){var Ze=oe.tag;if((Ze===3||Ze===4)&&oe.stateNode.containerInfo===G)return;oe=oe.return}for(;_e!==null;){if(oe=nt(_e),oe===null)return;if(Ze=oe.tag,Ze===5||Ze===6||Ze===26||Ze===27){R=K=oe;continue e}_e=_e.parentNode}}R=R.return}uS(function(){var Mt=K,an=_l(A),vn=[];e:{var It=su.get(m);if(It!==void 0){var Gt=o0,Fr=m;switch(m){case"keypress":if(hv(A)===0)break e;case"keydown":case"keyup":Gt=Wd;break;case"focusin":Fr="focus",Gt=Hd;break;case"focusout":Fr="blur",Gt=Hd;break;case"beforeblur":case"afterblur":Gt=Hd;break;case"click":if(A.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Gt=Wy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Gt=fS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Gt=cO;break;case ou:case m0:case xS:Gt=ng;break;case Ca:Gt=vS;break;case"scroll":case"scrollend":Gt=lO;break;case"wheel":Gt=nh;break;case"copy":case"cut":case"paste":Gt=bl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Gt=Ko;break;case"toggle":case"beforetoggle":Gt=qy}var hi=(b&4)!==0,Ao=!hi&&(m==="scroll"||m==="scrollend"),mt=hi?It!==null?It+"Capture":null:It;hi=[];for(var rt=Mt,Rt;rt!==null;){var hn=rt;if(Rt=hn.stateNode,hn=hn.tag,hn!==5&&hn!==26&&hn!==27||Rt===null||mt===null||(hn=au(rt,mt),hn!=null&&hi.push(Pf(rt,hn,Rt))),Ao)break;rt=rt.return}0<hi.length&&(It=new Gt(It,Fr,null,A,an),vn.push({event:It,listeners:hi}))}}if((b&7)===0){e:{if(It=m==="mouseover"||m==="pointerover",Gt=m==="mouseout"||m==="pointerout",It&&A!==Pa&&(Fr=A.relatedTarget||A.fromElement)&&(nt(Fr)||Fr[ar]))break e;if((Gt||It)&&(It=an.window===an?an:(It=an.ownerDocument)?It.defaultView||It.parentWindow:window,Gt?(Fr=A.relatedTarget||A.toElement,Gt=Mt,Fr=Fr?nt(Fr):null,Fr!==null&&(Ao=a(Fr),hi=Fr.tag,Fr!==Ao||hi!==5&&hi!==27&&hi!==6)&&(Fr=null)):(Gt=null,Fr=Mt),Gt!==Fr)){if(hi=Wy,hn="onMouseLeave",mt="onMouseEnter",rt="mouse",(m==="pointerout"||m==="pointerover")&&(hi=Ko,hn="onPointerLeave",mt="onPointerEnter",rt="pointer"),Ao=Gt==null?It:er(Gt),Rt=Fr==null?It:er(Fr),It=new hi(hn,rt+"leave",Gt,A,an),It.target=Ao,It.relatedTarget=Rt,hn=null,nt(an)===Mt&&(hi=new hi(mt,rt+"enter",Fr,A,an),hi.target=Rt,hi.relatedTarget=Ao,hn=hi),Ao=hn,Gt&&Fr)t:{for(hi=YS,mt=Gt,rt=Fr,Rt=0,hn=mt;hn;hn=hi(hn))Rt++;hn=0;for(var ri=rt;ri;ri=hi(ri))hn++;for(;0<Rt-hn;)mt=hi(mt),Rt--;for(;0<hn-Rt;)rt=hi(rt),hn--;for(;Rt--;){if(mt===rt||rt!==null&&mt===rt.alternate){hi=mt;break t}mt=hi(mt),rt=hi(rt)}hi=null}else hi=null;Gt!==null&&vs(vn,It,Gt,hi,!1),Fr!==null&&Ao!==null&&vs(vn,Ao,Fr,hi,!0)}}e:{if(It=Mt?er(Mt):window,Gt=It.nodeName&&It.nodeName.toLowerCase(),Gt==="select"||Gt==="input"&&It.type==="file")var Ha=Tb;else if(Xd(It))if(qd)Ha=g0;else{Ha=Ab;var Gr=Xh}else Gt=It.nodeName,!Gt||Gt.toLowerCase()!=="input"||It.type!=="checkbox"&&It.type!=="radio"?Mt&&gi(Mt.elementType)&&(Ha=Tb):Ha=wb;if(Ha&&(Ha=Ha(m,Mt))){h0(vn,Ha,A,an);break e}Gr&&Gr(m,It,Mt),m==="focusout"&&Mt&&It.type==="number"&&Mt.memoizedProps.value!=null&&Hh(It,"number",It.value)}switch(Gr=Mt?er(Mt):window,m){case"focusin":(Xd(Gr)||Gr.contentEditable==="true")&&(lt=Gr,en=Mt,Ut=null);break;case"focusout":Ut=en=lt=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,wi(vn,A,an);break;case"selectionchange":if(_v)break;case"keydown":case"keyup":wi(vn,A,an)}var na;if(rg)e:{switch(m){case"compositionstart":var xa="onCompositionStart";break e;case"compositionend":xa="onCompositionEnd";break e;case"compositionupdate":xa="onCompositionUpdate";break e}xa=void 0}else Yh?Qy(m,A)&&(xa="onCompositionEnd"):m==="keydown"&&A.keyCode===229&&(xa="onCompositionStart");xa&&(Zy&&A.locale!=="ko"&&(Yh||xa!=="onCompositionStart"?xa==="onCompositionEnd"&&Yh&&(na=lo()):(th=an,Gy="value"in th?th.value:th.textContent,Yh=!0)),Gr=Qb(Mt,xa),0<Gr.length&&(xa=new tl(xa,m,null,A,an),vn.push({event:xa,listeners:Gr}),na?xa.data=na:(na=yS(A),na!==null&&(xa.data=na)))),(na=u0?Ql(m,A):f0(m,A))&&(xa=Qb(Mt,"onBeforeInput"),0<xa.length&&(Gr=new tl("onBeforeInput","beforeinput",null,A,an),vn.push({event:Gr,listeners:xa}),Gr.data=na)),F0(vn,m,Mt,A,an)}jN(vn,b)})}function Pf(m,b,A){return{instance:m,listener:b,currentTarget:A}}function Qb(m,b){for(var A=b+"Capture",R=[];m!==null;){var G=m,K=G.stateNode;if(G=G.tag,G!==5&&G!==26&&G!==27||K===null||(G=au(m,A),G!=null&&R.unshift(Pf(m,G,K)),G=au(m,b),G!=null&&R.push(Pf(m,G,K))),m.tag===3)return R;m=m.return}return[]}function YS(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5&&m.tag!==27);return m||null}function vs(m,b,A,R,G){for(var K=b._reactName,oe=[];A!==null&&A!==R;){var _e=A,Ze=_e.alternate,Mt=_e.stateNode;if(_e=_e.tag,Ze!==null&&Ze===R)break;_e!==5&&_e!==26&&_e!==27||Mt===null||(Ze=Mt,G?(Mt=au(A,K),Mt!=null&&oe.unshift(Pf(A,Mt,Ze))):G||(Mt=au(A,K),Mt!=null&&oe.push(Pf(A,Mt,Ze)))),A=A.return}oe.length!==0&&m.push({event:b,listeners:oe})}var Hs=/\r\n?/g,zN=/\u0000|\uFFFD/g;function $N(m){return(typeof m=="string"?m:""+m).replace(Hs,`
`).replace(zN,"")}function HN(m,b){return b=$N(b),$N(m)===b}function To(m,b,A,R,G,K){switch(A){case"children":typeof R=="string"?b==="body"||b==="textarea"&&R===""||Fe(m,R):(typeof R=="number"||typeof R=="bigint")&&b!=="body"&&Fe(m,""+R);break;case"className":Ii(m,"class",R);break;case"tabIndex":Ii(m,"tabindex",R);break;case"dir":case"role":case"viewBox":case"width":case"height":Ii(m,A,R);break;case"style":lr(m,R,K);break;case"data":if(b!=="object"){Ii(m,"data",R);break}case"src":case"href":if(R===""&&(b!=="a"||A!=="href")){m.removeAttribute(A);break}if(R==null||typeof R=="function"||typeof R=="symbol"||typeof R=="boolean"){m.removeAttribute(A);break}R=hr(""+R),m.setAttribute(A,R);break;case"action":case"formAction":if(typeof R=="function"){m.setAttribute(A,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof K=="function"&&(A==="formAction"?(b!=="input"&&To(m,b,"name",G.name,G,null),To(m,b,"formEncType",G.formEncType,G,null),To(m,b,"formMethod",G.formMethod,G,null),To(m,b,"formTarget",G.formTarget,G,null)):(To(m,b,"encType",G.encType,G,null),To(m,b,"method",G.method,G,null),To(m,b,"target",G.target,G,null)));if(R==null||typeof R=="symbol"||typeof R=="boolean"){m.removeAttribute(A);break}R=hr(""+R),m.setAttribute(A,R);break;case"onClick":R!=null&&(m.onclick=Xr);break;case"onScroll":R!=null&&ya("scroll",m);break;case"onScrollEnd":R!=null&&ya("scrollend",m);break;case"dangerouslySetInnerHTML":if(R!=null){if(typeof R!="object"||!("__html"in R))throw Error(r(61));if(A=R.__html,A!=null){if(G.children!=null)throw Error(r(60));m.innerHTML=A}}break;case"multiple":m.multiple=R&&typeof R!="function"&&typeof R!="symbol";break;case"muted":m.muted=R&&typeof R!="function"&&typeof R!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(R==null||typeof R=="function"||typeof R=="boolean"||typeof R=="symbol"){m.removeAttribute("xlink:href");break}A=hr(""+R),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",A);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":R!=null&&typeof R!="function"&&typeof R!="symbol"?m.setAttribute(A,""+R):m.removeAttribute(A);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":R&&typeof R!="function"&&typeof R!="symbol"?m.setAttribute(A,""):m.removeAttribute(A);break;case"capture":case"download":R===!0?m.setAttribute(A,""):R!==!1&&R!=null&&typeof R!="function"&&typeof R!="symbol"?m.setAttribute(A,R):m.removeAttribute(A);break;case"cols":case"rows":case"size":case"span":R!=null&&typeof R!="function"&&typeof R!="symbol"&&!isNaN(R)&&1<=R?m.setAttribute(A,R):m.removeAttribute(A);break;case"rowSpan":case"start":R==null||typeof R=="function"||typeof R=="symbol"||isNaN(R)?m.removeAttribute(A):m.setAttribute(A,R);break;case"popover":ya("beforetoggle",m),ya("toggle",m),Lr(m,"popover",R);break;case"xlinkActuate":Xi(m,"http://www.w3.org/1999/xlink","xlink:actuate",R);break;case"xlinkArcrole":Xi(m,"http://www.w3.org/1999/xlink","xlink:arcrole",R);break;case"xlinkRole":Xi(m,"http://www.w3.org/1999/xlink","xlink:role",R);break;case"xlinkShow":Xi(m,"http://www.w3.org/1999/xlink","xlink:show",R);break;case"xlinkTitle":Xi(m,"http://www.w3.org/1999/xlink","xlink:title",R);break;case"xlinkType":Xi(m,"http://www.w3.org/1999/xlink","xlink:type",R);break;case"xmlBase":Xi(m,"http://www.w3.org/XML/1998/namespace","xml:base",R);break;case"xmlLang":Xi(m,"http://www.w3.org/XML/1998/namespace","xml:lang",R);break;case"xmlSpace":Xi(m,"http://www.w3.org/XML/1998/namespace","xml:space",R);break;case"is":Lr(m,"is",R);break;case"innerText":case"textContent":break;default:(!(2<A.length)||A[0]!=="o"&&A[0]!=="O"||A[1]!=="n"&&A[1]!=="N")&&(A=No.get(A)||A,Lr(m,A,R))}}function LO(m,b,A,R,G,K){switch(A){case"style":lr(m,R,K);break;case"dangerouslySetInnerHTML":if(R!=null){if(typeof R!="object"||!("__html"in R))throw Error(r(61));if(A=R.__html,A!=null){if(G.children!=null)throw Error(r(60));m.innerHTML=A}}break;case"children":typeof R=="string"?Fe(m,R):(typeof R=="number"||typeof R=="bigint")&&Fe(m,""+R);break;case"onScroll":R!=null&&ya("scroll",m);break;case"onScrollEnd":R!=null&&ya("scrollend",m);break;case"onClick":R!=null&&(m.onclick=Xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fi.hasOwnProperty(A))e:{if(A[0]==="o"&&A[1]==="n"&&(G=A.endsWith("Capture"),b=A.slice(2,G?A.length-7:void 0),K=m[_n]||null,K=K!=null?K[A]:null,typeof K=="function"&&m.removeEventListener(b,K,G),typeof R=="function")){typeof K!="function"&&K!==null&&(A in m?m[A]=null:m.hasAttribute(A)&&m.removeAttribute(A)),m.addEventListener(b,R,G);break e}A in m?m[A]=R:R===!0?m.setAttribute(A,""):Lr(m,A,R)}}}function Oc(m,b,A){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ya("error",m),ya("load",m);var R=!1,G=!1,K;for(K in A)if(A.hasOwnProperty(K)){var oe=A[K];if(oe!=null)switch(K){case"src":R=!0;break;case"srcSet":G=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,b));default:To(m,b,K,oe,A,null)}}G&&To(m,b,"srcSet",A.srcSet,A,null),R&&To(m,b,"src",A.src,A,null);return;case"input":ya("invalid",m);var _e=K=oe=G=null,Ze=null,Mt=null;for(R in A)if(A.hasOwnProperty(R)){var an=A[R];if(an!=null)switch(R){case"name":G=an;break;case"type":oe=an;break;case"checked":Ze=an;break;case"defaultChecked":Mt=an;break;case"value":K=an;break;case"defaultValue":_e=an;break;case"children":case"dangerouslySetInnerHTML":if(an!=null)throw Error(r(137,b));break;default:To(m,b,R,an,A,null)}}Kl(m,K,_e,Ze,Mt,oe,G,!1);return;case"select":ya("invalid",m),R=oe=K=null;for(G in A)if(A.hasOwnProperty(G)&&(_e=A[G],_e!=null))switch(G){case"value":K=_e;break;case"defaultValue":oe=_e;break;case"multiple":R=_e;default:To(m,b,G,_e,A,null)}b=K,A=oe,m.multiple=!!R,b!=null?iu(m,!!R,b,!1):A!=null&&iu(m,!!R,A,!0);return;case"textarea":ya("invalid",m),K=G=R=null;for(oe in A)if(A.hasOwnProperty(oe)&&(_e=A[oe],_e!=null))switch(oe){case"value":R=_e;break;case"defaultValue":G=_e;break;case"children":K=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(91));break;default:To(m,b,oe,_e,A,null)}Te(m,R,G,K);return;case"option":for(Ze in A)if(A.hasOwnProperty(Ze)&&(R=A[Ze],R!=null))switch(Ze){case"selected":m.selected=R&&typeof R!="function"&&typeof R!="symbol";break;default:To(m,b,Ze,R,A,null)}return;case"dialog":ya("beforetoggle",m),ya("toggle",m),ya("cancel",m),ya("close",m);break;case"iframe":case"object":ya("load",m);break;case"video":case"audio":for(R=0;R<Kb.length;R++)ya(Kb[R],m);break;case"image":ya("error",m),ya("load",m);break;case"details":ya("toggle",m);break;case"embed":case"source":case"link":ya("error",m),ya("load",m);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Mt in A)if(A.hasOwnProperty(Mt)&&(R=A[Mt],R!=null))switch(Mt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,b));default:To(m,b,Mt,R,A,null)}return;default:if(gi(b)){for(an in A)A.hasOwnProperty(an)&&(R=A[an],R!==void 0&&LO(m,b,an,R,A,void 0));return}}for(_e in A)A.hasOwnProperty(_e)&&(R=A[_e],R!=null&&To(m,b,_e,R,A,null))}function o8(m,b,A,R){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var G=null,K=null,oe=null,_e=null,Ze=null,Mt=null,an=null;for(Gt in A){var vn=A[Gt];if(A.hasOwnProperty(Gt)&&vn!=null)switch(Gt){case"checked":break;case"value":break;case"defaultValue":Ze=vn;default:R.hasOwnProperty(Gt)||To(m,b,Gt,null,R,vn)}}for(var It in R){var Gt=R[It];if(vn=A[It],R.hasOwnProperty(It)&&(Gt!=null||vn!=null))switch(It){case"type":K=Gt;break;case"name":G=Gt;break;case"checked":Mt=Gt;break;case"defaultChecked":an=Gt;break;case"value":oe=Gt;break;case"defaultValue":_e=Gt;break;case"children":case"dangerouslySetInnerHTML":if(Gt!=null)throw Error(r(137,b));break;default:Gt!==vn&&To(m,b,It,Gt,R,vn)}}ru(m,oe,_e,Ze,Mt,an,K,G);return;case"select":Gt=oe=_e=It=null;for(K in A)if(Ze=A[K],A.hasOwnProperty(K)&&Ze!=null)switch(K){case"value":break;case"multiple":Gt=Ze;default:R.hasOwnProperty(K)||To(m,b,K,null,R,Ze)}for(G in R)if(K=R[G],Ze=A[G],R.hasOwnProperty(G)&&(K!=null||Ze!=null))switch(G){case"value":It=K;break;case"defaultValue":_e=K;break;case"multiple":oe=K;default:K!==Ze&&To(m,b,G,K,R,Ze)}b=_e,A=oe,R=Gt,It!=null?iu(m,!!A,It,!1):!!R!=!!A&&(b!=null?iu(m,!!A,b,!0):iu(m,!!A,A?[]:"",!1));return;case"textarea":Gt=It=null;for(_e in A)if(G=A[_e],A.hasOwnProperty(_e)&&G!=null&&!R.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:To(m,b,_e,null,R,G)}for(oe in R)if(G=R[oe],K=A[oe],R.hasOwnProperty(oe)&&(G!=null||K!=null))switch(oe){case"value":It=G;break;case"defaultValue":Gt=G;break;case"children":break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(91));break;default:G!==K&&To(m,b,oe,G,R,K)}he(m,It,Gt);return;case"option":for(var Fr in A)if(It=A[Fr],A.hasOwnProperty(Fr)&&It!=null&&!R.hasOwnProperty(Fr))switch(Fr){case"selected":m.selected=!1;break;default:To(m,b,Fr,null,R,It)}for(Ze in R)if(It=R[Ze],Gt=A[Ze],R.hasOwnProperty(Ze)&&It!==Gt&&(It!=null||Gt!=null))switch(Ze){case"selected":m.selected=It&&typeof It!="function"&&typeof It!="symbol";break;default:To(m,b,Ze,It,R,Gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var hi in A)It=A[hi],A.hasOwnProperty(hi)&&It!=null&&!R.hasOwnProperty(hi)&&To(m,b,hi,null,R,It);for(Mt in R)if(It=R[Mt],Gt=A[Mt],R.hasOwnProperty(Mt)&&It!==Gt&&(It!=null||Gt!=null))switch(Mt){case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(r(137,b));break;default:To(m,b,Mt,It,R,Gt)}return;default:if(gi(b)){for(var Ao in A)It=A[Ao],A.hasOwnProperty(Ao)&&It!==void 0&&!R.hasOwnProperty(Ao)&&LO(m,b,Ao,void 0,R,It);for(an in R)It=R[an],Gt=A[an],!R.hasOwnProperty(an)||It===Gt||It===void 0&&Gt===void 0||LO(m,b,an,It,R,Gt);return}}for(var mt in A)It=A[mt],A.hasOwnProperty(mt)&&It!=null&&!R.hasOwnProperty(mt)&&To(m,b,mt,null,R,It);for(vn in R)It=R[vn],Gt=A[vn],!R.hasOwnProperty(vn)||It===Gt||It==null&&Gt==null||To(m,b,vn,It,R,Gt)}function kO(m){switch(m){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Jb(){if(typeof performance.getEntriesByType=="function"){for(var m=0,b=0,A=performance.getEntriesByType("resource"),R=0;R<A.length;R++){var G=A[R],K=G.transferSize,oe=G.initiatorType,_e=G.duration;if(K&&_e&&kO(oe)){for(oe=0,_e=G.responseEnd,R+=1;R<A.length;R++){var Ze=A[R],Mt=Ze.startTime;if(Mt>_e)break;var an=Ze.transferSize,vn=Ze.initiatorType;an&&kO(vn)&&(Ze=Ze.responseEnd,oe+=an*(Ze<_e?1:(_e-Mt)/(Ze-Mt)))}if(--R,b+=8*(K+oe)/(G.duration/1e3),m++,10<m)break}}if(0<m)return b/m/1e6}return navigator.connection&&(m=navigator.connection.downlink,typeof m=="number")?m:5}var eE=null,DO=null;function tE(m){return m.nodeType===9?m:m.ownerDocument}function nE(m){switch(m){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Yu(m,b){if(m===0)switch(b){case"svg":return 1;case"math":return 2;default:return 0}return m===1&&b==="foreignObject"?0:m}function Zv(m,b){return m==="textarea"||m==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.children=="bigint"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var BO=null;function s8(){var m=window.event;return m&&m.type==="popstate"?m===BO?!1:(BO=m,!0):(BO=null,!1)}var GN=typeof setTimeout=="function"?setTimeout:void 0,l8=typeof clearTimeout=="function"?clearTimeout:void 0,WN=typeof Promise=="function"?Promise:void 0,VN=typeof queueMicrotask=="function"?queueMicrotask:typeof WN<"u"?function(m){return WN.resolve(null).then(m).catch(wg)}:GN;function wg(m){setTimeout(function(){throw m})}function bi(m){return m==="head"}function FO(m,b){var A=b,R=0;do{var G=A.nextSibling;if(m.removeChild(A),G&&G.nodeType===8)if(A=G.data,A==="/$"||A==="/&"){if(R===0){m.removeChild(G),H1(b);return}R--}else if(A==="$"||A==="$?"||A==="$~"||A==="$!"||A==="&")R++;else if(A==="html")rE(m.ownerDocument.documentElement);else if(A==="head"){A=m.ownerDocument.head,rE(A);for(var K=A.firstChild;K;){var oe=K.nextSibling,_e=K.nodeName;K[Ir]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&K.rel.toLowerCase()==="stylesheet"||A.removeChild(K),K=oe}}else A==="body"&&rE(m.ownerDocument.body);A=G}while(A);H1(b)}function Nf(m,b){var A=m;m=0;do{var R=A.nextSibling;if(A.nodeType===1?b?(A._stashedDisplay=A.style.display,A.style.display="none"):(A.style.display=A._stashedDisplay||"",A.getAttribute("style")===""&&A.removeAttribute("style")):A.nodeType===3&&(b?(A._stashedText=A.nodeValue,A.nodeValue=""):A.nodeValue=A._stashedText||""),R&&R.nodeType===8)if(A=R.data,A==="/$"){if(m===0)break;m--}else A!=="$"&&A!=="$?"&&A!=="$~"&&A!=="$!"||m++;A=R}while(A)}function XS(m){var b=m.firstChild;for(b&&b.nodeType===10&&(b=b.nextSibling);b;){var A=b;switch(b=b.nextSibling,A.nodeName){case"HTML":case"HEAD":case"BODY":XS(A),ia(A);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(A.rel.toLowerCase()==="stylesheet")continue}m.removeChild(A)}}function c8(m,b,A,R){for(;m.nodeType===1;){var G=A;if(m.nodeName.toLowerCase()!==b.toLowerCase()){if(!R&&(m.nodeName!=="INPUT"||m.type!=="hidden"))break}else if(R){if(!m[Ir])switch(b){case"meta":if(!m.hasAttribute("itemprop"))break;return m;case"link":if(K=m.getAttribute("rel"),K==="stylesheet"&&m.hasAttribute("data-precedence"))break;if(K!==G.rel||m.getAttribute("href")!==(G.href==null||G.href===""?null:G.href)||m.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin)||m.getAttribute("title")!==(G.title==null?null:G.title))break;return m;case"style":if(m.hasAttribute("data-precedence"))break;return m;case"script":if(K=m.getAttribute("src"),(K!==(G.src==null?null:G.src)||m.getAttribute("type")!==(G.type==null?null:G.type)||m.getAttribute("crossorigin")!==(G.crossOrigin==null?null:G.crossOrigin))&&K&&m.hasAttribute("async")&&!m.hasAttribute("itemprop"))break;return m;default:return m}}else if(b==="input"&&m.type==="hidden"){var K=G.name==null?null:""+G.name;if(G.type==="hidden"&&m.getAttribute("name")===K)return m}else return m;if(m=gh(m.nextSibling),m===null)break}return null}function io(m,b,A){if(b==="")return null;for(;m.nodeType!==3;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!A||(m=gh(m.nextSibling),m===null))return null;return m}function YN(m,b){for(;m.nodeType!==8;)if((m.nodeType!==1||m.nodeName!=="INPUT"||m.type!=="hidden")&&!b||(m=gh(m.nextSibling),m===null))return null;return m}function qS(m){return m.data==="$?"||m.data==="$~"}function k1(m){return m.data==="$!"||m.data==="$?"&&m.ownerDocument.readyState!=="loading"}function u8(m,b){var A=m.ownerDocument;if(m.data==="$~")m._reactRetry=b;else if(m.data!=="$?"||A.readyState!=="loading")b();else{var R=function(){b(),A.removeEventListener("DOMContentLoaded",R)};A.addEventListener("DOMContentLoaded",R),m._reactRetry=R}}function gh(m){for(;m!=null;m=m.nextSibling){var b=m.nodeType;if(b===1||b===3)break;if(b===8){if(b=m.data,b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"||b==="F!"||b==="F")break;if(b==="/$"||b==="/&")return null}}return m}var UO=null;function XN(m){m=m.nextSibling;for(var b=0;m;){if(m.nodeType===8){var A=m.data;if(A==="/$"||A==="/&"){if(b===0)return gh(m.nextSibling);b--}else A!=="$"&&A!=="$!"&&A!=="$?"&&A!=="$~"&&A!=="&"||b++}m=m.nextSibling}return null}function qN(m){m=m.previousSibling;for(var b=0;m;){if(m.nodeType===8){var A=m.data;if(A==="$"||A==="$!"||A==="$?"||A==="$~"||A==="&"){if(b===0)return m;b--}else A!=="/$"&&A!=="/&"||b++}m=m.previousSibling}return null}function ZN(m,b,A){switch(b=tE(A),m){case"html":if(m=b.documentElement,!m)throw Error(r(452));return m;case"head":if(m=b.head,!m)throw Error(r(453));return m;case"body":if(m=b.body,!m)throw Error(r(454));return m;default:throw Error(r(451))}}function rE(m){for(var b=m.attributes;b.length;)m.removeAttributeNode(b[0]);ia(m)}var vh=new Map,KN=new Set;function ZS(m){return typeof m.getRootNode=="function"?m.getRootNode():m.nodeType===9?m:m.ownerDocument}var Og=M.d;M.d={f:f8,r:h8,D:jO,C:d8,L:p8,m:g8,X:Xu,S:ac,M:v8};function f8(){var m=Og.f(),b=US();return m||b}function h8(m){var b=tn(m);b!==null&&b.tag===5&&b.type==="form"?sp(b):Og.r(m)}var Kv=typeof document>"u"?null:document;function QN(m,b,A){var R=Kv;if(R&&typeof b=="string"&&b){var G=Po(b);G='link[rel="'+m+'"][href="'+G+'"]',typeof A=="string"&&(G+='[crossorigin="'+A+'"]'),KN.has(G)||(KN.add(G),m={rel:m,crossOrigin:A,href:b},R.querySelector(G)===null&&(b=R.createElement("link"),Oc(b,"link",m),Yr(b),R.head.appendChild(b)))}}function jO(m){Og.D(m),QN("dns-prefetch",m,null)}function d8(m,b){Og.C(m,b),QN("preconnect",m,b)}function p8(m,b,A){Og.L(m,b,A);var R=Kv;if(R&&m&&b){var G='link[rel="preload"][as="'+Po(b)+'"]';b==="image"&&A&&A.imageSrcSet?(G+='[imagesrcset="'+Po(A.imageSrcSet)+'"]',typeof A.imageSizes=="string"&&(G+='[imagesizes="'+Po(A.imageSizes)+'"]')):G+='[href="'+Po(m)+'"]';var K=G;switch(b){case"style":K=D1(m);break;case"script":K=F1(m)}vh.has(K)||(m=f({rel:"preload",href:b==="image"&&A&&A.imageSrcSet?void 0:m,as:b},A),vh.set(K,m),R.querySelector(G)!==null||b==="style"&&R.querySelector(B1(K))||b==="script"&&R.querySelector(U1(K))||(b=R.createElement("link"),Oc(b,"link",m),Yr(b),R.head.appendChild(b)))}}function g8(m,b){Og.m(m,b);var A=Kv;if(A&&m){var R=b&&typeof b.as=="string"?b.as:"script",G='link[rel="modulepreload"][as="'+Po(R)+'"][href="'+Po(m)+'"]',K=G;switch(R){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":K=F1(m)}if(!vh.has(K)&&(m=f({rel:"modulepreload",href:m},b),vh.set(K,m),A.querySelector(G)===null)){switch(R){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(A.querySelector(U1(K)))return}R=A.createElement("link"),Oc(R,"link",m),Yr(R),A.head.appendChild(R)}}}function ac(m,b,A){Og.S(m,b,A);var R=Kv;if(R&&m){var G=mn(R).hoistableStyles,K=D1(m);b=b||"default";var oe=G.get(K);if(!oe){var _e={loading:0,preload:null};if(oe=R.querySelector(B1(K)))_e.loading=5;else{m=f({rel:"stylesheet",href:m,"data-precedence":b},A),(A=vh.get(K))&&zO(m,A);var Ze=oe=R.createElement("link");Yr(Ze),Oc(Ze,"link",m),Ze._p=new Promise(function(Mt,an){Ze.onload=Mt,Ze.onerror=an}),Ze.addEventListener("load",function(){_e.loading|=1}),Ze.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,KS(oe,b,R)}oe={type:"stylesheet",instance:oe,count:1,state:_e},G.set(K,oe)}}}function Xu(m,b){Og.X(m,b);var A=Kv;if(A&&m){var R=mn(A).hoistableScripts,G=F1(m),K=R.get(G);K||(K=A.querySelector(U1(G)),K||(m=f({src:m,async:!0},b),(b=vh.get(G))&&QS(m,b),K=A.createElement("script"),Yr(K),Oc(K,"link",m),A.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},R.set(G,K))}}function v8(m,b){Og.M(m,b);var A=Kv;if(A&&m){var R=mn(A).hoistableScripts,G=F1(m),K=R.get(G);K||(K=A.querySelector(U1(G)),K||(m=f({src:m,async:!0,type:"module"},b),(b=vh.get(G))&&QS(m,b),K=A.createElement("script"),Yr(K),Oc(K,"link",m),A.head.appendChild(K)),K={type:"script",instance:K,count:1,state:null},R.set(G,K))}}function JN(m,b,A,R){var G=(G=le.current)?ZS(G):null;if(!G)throw Error(r(446));switch(m){case"meta":case"title":return null;case"style":return typeof A.precedence=="string"&&typeof A.href=="string"?(b=D1(A.href),A=mn(G).hoistableStyles,R=A.get(b),R||(R={type:"style",instance:null,count:0,state:null},A.set(b,R)),R):{type:"void",instance:null,count:0,state:null};case"link":if(A.rel==="stylesheet"&&typeof A.href=="string"&&typeof A.precedence=="string"){m=D1(A.href);var K=mn(G).hoistableStyles,oe=K.get(m);if(oe||(G=G.ownerDocument||G,oe={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},K.set(m,oe),(K=G.querySelector(B1(m)))&&!K._p&&(oe.instance=K,oe.state.loading=5),vh.has(m)||(A={rel:"preload",as:"style",href:A.href,crossOrigin:A.crossOrigin,integrity:A.integrity,media:A.media,hrefLang:A.hrefLang,referrerPolicy:A.referrerPolicy},vh.set(m,A),K||m8(G,m,A,oe.state))),b&&R===null)throw Error(r(528,""));return oe}if(b&&R!==null)throw Error(r(529,""));return null;case"script":return b=A.async,A=A.src,typeof A=="string"&&b&&typeof b!="function"&&typeof b!="symbol"?(b=F1(A),A=mn(G).hoistableScripts,R=A.get(b),R||(R={type:"script",instance:null,count:0,state:null},A.set(b,R)),R):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,m))}}function D1(m){return'href="'+Po(m)+'"'}function B1(m){return'link[rel="stylesheet"]['+m+"]"}function e3(m){return f({},m,{"data-precedence":m.precedence,precedence:null})}function m8(m,b,A,R){m.querySelector('link[rel="preload"][as="style"]['+b+"]")?R.loading=1:(b=m.createElement("link"),R.preload=b,b.addEventListener("load",function(){return R.loading|=1}),b.addEventListener("error",function(){return R.loading|=2}),Oc(b,"link",A),Yr(b),m.head.appendChild(b))}function F1(m){return'[src="'+Po(m)+'"]'}function U1(m){return"script[async]"+m}function t3(m,b,A){if(b.count++,b.instance===null)switch(b.type){case"style":var R=m.querySelector('style[data-href~="'+Po(A.href)+'"]');if(R)return b.instance=R,Yr(R),R;var G=f({},A,{"data-href":A.href,"data-precedence":A.precedence,href:null,precedence:null});return R=(m.ownerDocument||m).createElement("style"),Yr(R),Oc(R,"style",G),KS(R,A.precedence,m),b.instance=R;case"stylesheet":G=D1(A.href);var K=m.querySelector(B1(G));if(K)return b.state.loading|=4,b.instance=K,Yr(K),K;R=e3(A),(G=vh.get(G))&&zO(R,G),K=(m.ownerDocument||m).createElement("link"),Yr(K);var oe=K;return oe._p=new Promise(function(_e,Ze){oe.onload=_e,oe.onerror=Ze}),Oc(K,"link",R),b.state.loading|=4,KS(K,A.precedence,m),b.instance=K;case"script":return K=F1(A.src),(G=m.querySelector(U1(K)))?(b.instance=G,Yr(G),G):(R=A,(G=vh.get(K))&&(R=f({},A),QS(R,G)),m=m.ownerDocument||m,G=m.createElement("script"),Yr(G),Oc(G,"link",R),m.head.appendChild(G),b.instance=G);case"void":return null;default:throw Error(r(443,b.type))}else b.type==="stylesheet"&&(b.state.loading&4)===0&&(R=b.instance,b.state.loading|=4,KS(R,A.precedence,m));return b.instance}function KS(m,b,A){for(var R=A.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),G=R.length?R[R.length-1]:null,K=G,oe=0;oe<R.length;oe++){var _e=R[oe];if(_e.dataset.precedence===b)K=_e;else if(K!==G)break}K?K.parentNode.insertBefore(m,K.nextSibling):(b=A.nodeType===9?A.head:A,b.insertBefore(m,b.firstChild))}function zO(m,b){m.crossOrigin==null&&(m.crossOrigin=b.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=b.referrerPolicy),m.title==null&&(m.title=b.title)}function QS(m,b){m.crossOrigin==null&&(m.crossOrigin=b.crossOrigin),m.referrerPolicy==null&&(m.referrerPolicy=b.referrerPolicy),m.integrity==null&&(m.integrity=b.integrity)}var iE=null;function n3(m,b,A){if(iE===null){var R=new Map,G=iE=new Map;G.set(A,R)}else G=iE,R=G.get(A),R||(R=new Map,G.set(A,R));if(R.has(m))return R;for(R.set(m,null),A=A.getElementsByTagName(m),G=0;G<A.length;G++){var K=A[G];if(!(K[Ir]||K[$e]||m==="link"&&K.getAttribute("rel")==="stylesheet")&&K.namespaceURI!=="http://www.w3.org/2000/svg"){var oe=K.getAttribute(b)||"";oe=m+oe;var _e=R.get(oe);_e?_e.push(K):R.set(oe,[K])}}return R}function r3(m,b,A){m=m.ownerDocument||m,m.head.insertBefore(A,b==="title"?m.querySelector("head > title"):null)}function y8(m,b,A){if(A===1||b.itemProp!=null)return!1;switch(m){case"meta":case"title":return!0;case"style":if(typeof b.precedence!="string"||typeof b.href!="string"||b.href==="")break;return!0;case"link":if(typeof b.rel!="string"||typeof b.href!="string"||b.href===""||b.onLoad||b.onError)break;switch(b.rel){case"stylesheet":return m=b.disabled,typeof b.precedence=="string"&&m==null;default:return!0}case"script":if(b.async&&typeof b.async!="function"&&typeof b.async!="symbol"&&!b.onLoad&&!b.onError&&b.src&&typeof b.src=="string")return!0}return!1}function i3(m){return!(m.type==="stylesheet"&&(m.state.loading&3)===0)}function j1(m,b,A,R){if(A.type==="stylesheet"&&(typeof R.media!="string"||matchMedia(R.media).matches!==!1)&&(A.state.loading&4)===0){if(A.instance===null){var G=D1(R.href),K=b.querySelector(B1(G));if(K){b=K._p,b!==null&&typeof b=="object"&&typeof b.then=="function"&&(m.count++,m=JS.bind(m),b.then(m,m)),A.state.loading|=4,A.instance=K,Yr(K);return}K=b.ownerDocument||b,R=e3(R),(G=vh.get(G))&&zO(R,G),K=K.createElement("link"),Yr(K);var oe=K;oe._p=new Promise(function(_e,Ze){oe.onload=_e,oe.onerror=Ze}),Oc(K,"link",R),A.instance=K}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(A,b),(b=A.state.preload)&&(A.state.loading&3)===0&&(m.count++,A=JS.bind(m),b.addEventListener("load",A),b.addEventListener("error",A))}}var $O=0;function _8(m,b){return m.stylesheets&&m.count===0&&tT(m,m.stylesheets),0<m.count||0<m.imgCount?function(A){var R=setTimeout(function(){if(m.stylesheets&&tT(m,m.stylesheets),m.unsuspend){var K=m.unsuspend;m.unsuspend=null,K()}},6e4+b);0<m.imgBytes&&$O===0&&($O=62500*Jb());var G=setTimeout(function(){if(m.waitingForImages=!1,m.count===0&&(m.stylesheets&&tT(m,m.stylesheets),m.unsuspend)){var K=m.unsuspend;m.unsuspend=null,K()}},(m.imgBytes>$O?50:800)+b);return m.unsuspend=A,function(){m.unsuspend=null,clearTimeout(R),clearTimeout(G)}}:null}function JS(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)tT(this,this.stylesheets);else if(this.unsuspend){var m=this.unsuspend;this.unsuspend=null,m()}}}var eT=null;function tT(m,b){m.stylesheets=null,m.unsuspend!==null&&(m.count++,eT=new Map,b.forEach(a3,m),eT=null,JS.call(m))}function a3(m,b){if(!(b.state.loading&4)){var A=eT.get(m);if(A)var R=A.get(null);else{A=new Map,eT.set(m,A);for(var G=m.querySelectorAll("link[data-precedence],style[data-precedence]"),K=0;K<G.length;K++){var oe=G[K];(oe.nodeName==="LINK"||oe.getAttribute("media")!=="not all")&&(A.set(oe.dataset.precedence,oe),R=oe)}R&&A.set(null,R)}G=b.instance,oe=G.getAttribute("data-precedence"),K=A.get(oe)||R,K===R&&A.set(null,G),A.set(oe,G),this.count++,R=JS.bind(this),G.addEventListener("load",R),G.addEventListener("error",R),K?K.parentNode.insertBefore(G,K.nextSibling):(m=m.nodeType===9?m.head:m,m.insertBefore(G,m.firstChild)),b.state.loading|=4}}var z1={$$typeof:E,Provider:null,Consumer:null,_currentValue:k,_currentValue2:k,_threadCount:0};function b8(m,b,A,R,G,K,oe,_e,Ze){this.tag=1,this.containerInfo=m,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pe(0),this.hiddenUpdates=pe(null),this.identifierPrefix=R,this.onUncaughtError=G,this.onCaughtError=K,this.onRecoverableError=oe,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ze,this.incompleteTransitions=new Map}function o3(m,b,A,R,G,K,oe,_e,Ze,Mt,an,vn){return m=new b8(m,b,A,oe,Ze,Mt,an,vn,_e),b=1,K===!0&&(b|=24),K=El(3,null,null,b),m.current=K,K.stateNode=m,b=mf(),b.refCount++,m.pooledCache=b,b.refCount++,K.memoizedState={element:R,isDehydrated:A,cache:b},xf(K),m}function s3(m){return m?(m=xc,m):xc}function l3(m,b,A,R,G,K){G=s3(G),R.context===null?R.context=G:R.pendingContext=G,R=od(b),R.payload={element:A},K=K===void 0?null:K,K!==null&&(R.callback=K),A=pu(m,R,b),A!==null&&(Wu(A,m,b),_g(A,m,b))}function c3(m,b){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var A=m.retryLane;m.retryLane=A!==0&&A<b?A:b}}function HO(m,b){c3(m,b),(m=m.alternate)&&c3(m,b)}function u3(m){if(m.tag===13||m.tag===31){var b=co(m,67108864);b!==null&&Wu(b,m,67108864),HO(m,67108864)}}function f3(m){if(m.tag===13||m.tag===31){var b=Rf();b=$t(b);var A=co(m,b);A!==null&&Wu(A,m,b),HO(m,b)}}var nT=!0;function E8(m,b,A,R){var G=N.T;N.T=null;var K=M.p;try{M.p=2,GO(m,b,A,R)}finally{M.p=K,N.T=G}}function x8(m,b,A,R){var G=N.T;N.T=null;var K=M.p;try{M.p=8,GO(m,b,A,R)}finally{M.p=K,N.T=G}}function GO(m,b,A,R){if(nT){var G=WO(R);if(G===null)IO(m,b,R,rT,A),d3(m,R);else if(p3(G,m,b,A,R))R.stopPropagation();else if(d3(m,R),b&4&&-1<S8.indexOf(m)){for(;G!==null;){var K=tn(G);if(K!==null)switch(K.tag){case 3:if(K=K.stateNode,K.current.memoizedState.isDehydrated){var oe=H(K.pendingLanes);if(oe!==0){var _e=K;for(_e.pendingLanes|=2,_e.entangledLanes|=2;oe;){var Ze=1<<31-pi(oe);_e.entanglements[1]|=Ze,oe&=~Ze}up(K),(eo&6)===0&&(D0=sr()+500,Zb(0))}}break;case 31:case 13:_e=co(K,2),_e!==null&&Wu(_e,K,2),US(),HO(K,2)}if(K=WO(R),K===null&&IO(m,b,R,rT,A),K===G)break;G=K}G!==null&&R.stopPropagation()}else IO(m,b,R,null,A)}}function WO(m){return m=_l(m),VO(m)}var rT=null;function VO(m){if(rT=null,m=nt(m),m!==null){var b=a(m);if(b===null)m=null;else{var A=b.tag;if(A===13){if(m=o(b),m!==null)return m;m=null}else if(A===31){if(m=s(b),m!==null)return m;m=null}else if(A===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;m=null}else b!==m&&(m=null)}}return rT=m,null}function h3(m){switch(m){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zr()){case st:return 2;case Ft:return 8;case An:case wn:return 32;case $n:return 268435456;default:return 32}default:return 32}}var YO=!1,Qv=null,Jv=null,em=null,aE=new Map,oE=new Map,tm=[],S8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d3(m,b){switch(m){case"focusin":case"focusout":Qv=null;break;case"dragenter":case"dragleave":Jv=null;break;case"mouseover":case"mouseout":em=null;break;case"pointerover":case"pointerout":aE.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":oE.delete(b.pointerId)}}function U0(m,b,A,R,G,K){return m===null||m.nativeEvent!==K?(m={blockedOn:b,domEventName:A,eventSystemFlags:R,nativeEvent:K,targetContainers:[G]},b!==null&&(b=tn(b),b!==null&&u3(b)),m):(m.eventSystemFlags|=R,b=m.targetContainers,G!==null&&b.indexOf(G)===-1&&b.push(G),m)}function p3(m,b,A,R,G){switch(b){case"focusin":return Qv=U0(Qv,m,b,A,R,G),!0;case"dragenter":return Jv=U0(Jv,m,b,A,R,G),!0;case"mouseover":return em=U0(em,m,b,A,R,G),!0;case"pointerover":var K=G.pointerId;return aE.set(K,U0(aE.get(K)||null,m,b,A,R,G)),!0;case"gotpointercapture":return K=G.pointerId,oE.set(K,U0(oE.get(K)||null,m,b,A,R,G)),!0}return!1}function XO(m){var b=nt(m.target);if(b!==null){var A=a(b);if(A!==null){if(b=A.tag,b===13){if(b=o(A),b!==null){m.blockedOn=b,Jt(m.priority,function(){f3(A)});return}}else if(b===31){if(b=s(A),b!==null){m.blockedOn=b,Jt(m.priority,function(){f3(A)});return}}else if(b===3&&A.stateNode.current.memoizedState.isDehydrated){m.blockedOn=A.tag===3?A.stateNode.containerInfo:null;return}}}m.blockedOn=null}function iT(m){if(m.blockedOn!==null)return!1;for(var b=m.targetContainers;0<b.length;){var A=WO(m.nativeEvent);if(A===null){A=m.nativeEvent;var R=new A.constructor(A.type,A);Pa=R,A.target.dispatchEvent(R),Pa=null}else return b=tn(A),b!==null&&u3(b),m.blockedOn=A,!1;b.shift()}return!0}function g3(m,b,A){iT(m)&&A.delete(b)}function T8(){YO=!1,Qv!==null&&iT(Qv)&&(Qv=null),Jv!==null&&iT(Jv)&&(Jv=null),em!==null&&iT(em)&&(em=null),aE.forEach(g3),oE.forEach(g3)}function $1(m,b){m.blockedOn===b&&(m.blockedOn=null,YO||(YO=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,T8)))}var aT=null;function v3(m){aT!==m&&(aT=m,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){aT===m&&(aT=null);for(var b=0;b<m.length;b+=3){var A=m[b],R=m[b+1],G=m[b+2];if(typeof R!="function"){if(VO(R||A)===null)continue;break}var K=tn(A);K!==null&&(m.splice(b,3),b-=3,jl(K,{pending:!0,data:G,method:A.method,action:R},R,G))}}))}function H1(m){function b(Ze){return $1(Ze,m)}Qv!==null&&$1(Qv,m),Jv!==null&&$1(Jv,m),em!==null&&$1(em,m),aE.forEach(b),oE.forEach(b);for(var A=0;A<tm.length;A++){var R=tm[A];R.blockedOn===m&&(R.blockedOn=null)}for(;0<tm.length&&(A=tm[0],A.blockedOn===null);)XO(A),A.blockedOn===null&&tm.shift();if(A=(m.ownerDocument||m).$$reactFormReplay,A!=null)for(R=0;R<A.length;R+=3){var G=A[R],K=A[R+1],oe=G[_n]||null;if(typeof K=="function")oe||v3(A);else if(oe){var _e=null;if(K&&K.hasAttribute("formAction")){if(G=K,oe=K[_n]||null)_e=oe.formAction;else if(VO(G)!==null)continue}else _e=oe.action;typeof _e=="function"?A[R+1]=_e:(A.splice(R,3),R-=3),v3(A)}}}function xu(){function m(K){K.canIntercept&&K.info==="react-transition"&&K.intercept({handler:function(){return new Promise(function(oe){return G=oe})},focusReset:"manual",scroll:"manual"})}function b(){G!==null&&(G(),G=null),R||setTimeout(A,20)}function A(){if(!R&&!navigation.transition){var K=navigation.currentEntry;K&&K.url!=null&&navigation.navigate(K.url,{state:K.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var R=!1,G=null;return navigation.addEventListener("navigate",m),navigation.addEventListener("navigatesuccess",b),navigation.addEventListener("navigateerror",b),setTimeout(A,100),function(){R=!0,navigation.removeEventListener("navigate",m),navigation.removeEventListener("navigatesuccess",b),navigation.removeEventListener("navigateerror",b),G!==null&&(G(),G=null)}}}function sE(m){this._internalRoot=m}oT.prototype.render=sE.prototype.render=function(m){var b=this._internalRoot;if(b===null)throw Error(r(409));var A=b.current,R=Rf();l3(A,R,m,b,null,null)},oT.prototype.unmount=sE.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var b=m.containerInfo;l3(m.current,2,null,m,null,null),US(),b[ar]=null}};function oT(m){this._internalRoot=m}oT.prototype.unstable_scheduleHydration=function(m){if(m){var b=_t();m={blockedOn:null,target:m,priority:b};for(var A=0;A<tm.length&&b!==0&&b<tm[A].priority;A++);tm.splice(A,0,m),A===0&&XO(m)}};var m3=e.version;if(m3!=="19.2.1")throw Error(r(527,m3,"19.2.1"));M.findDOMNode=function(m){var b=m._reactInternals;if(b===void 0)throw typeof m.render=="function"?Error(r(188)):(m=Object.keys(m).join(","),Error(r(268,m)));return m=c(b),m=m!==null?u(m):null,m=m===null?null:m.stateNode,m};var A8={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sT=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sT.isDisabled&&sT.supportsFiber)try{Rr=sT.inject(A8),ei=sT}catch{}}return Z2.createRoot=function(m,b){if(!i(m))throw Error(r(299));var A=!1,R="",G=A1,K=w1,oe=$b;return b!=null&&(b.unstable_strictMode===!0&&(A=!0),b.identifierPrefix!==void 0&&(R=b.identifierPrefix),b.onUncaughtError!==void 0&&(G=b.onUncaughtError),b.onCaughtError!==void 0&&(K=b.onCaughtError),b.onRecoverableError!==void 0&&(oe=b.onRecoverableError)),b=o3(m,1,!1,null,null,A,R,null,G,K,oe,xu),m[ar]=b.current,NO(m),new sE(b)},Z2.hydrateRoot=function(m,b,A){if(!i(m))throw Error(r(299));var R=!1,G="",K=A1,oe=w1,_e=$b,Ze=null;return A!=null&&(A.unstable_strictMode===!0&&(R=!0),A.identifierPrefix!==void 0&&(G=A.identifierPrefix),A.onUncaughtError!==void 0&&(K=A.onUncaughtError),A.onCaughtError!==void 0&&(oe=A.onCaughtError),A.onRecoverableError!==void 0&&(_e=A.onRecoverableError),A.formState!==void 0&&(Ze=A.formState)),b=o3(m,1,!0,b,A??null,R,G,Ze,K,oe,_e,xu),b.context=s3(null),A=b.current,R=Rf(),R=$t(R),G=od(R),G.callback=null,pu(A,G,R),A=R,b.current.lanes=A,me(b,A),up(b),m[ar]=b.current,NO(m),new oT(b)},Z2.version="19.2.1",Z2}var QSe;function Mfn(){if(QSe)return YV.exports;QSe=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),YV.exports=Rfn(),YV.exports}var Bre=Mfn();const Pfn=Ni(Bre),rdn=gTe({__proto__:null,default:Pfn},[Bre]),Nfn=SK({__name:"core",props:{content:{}},setup(t){const e=t,n=tTe();function r(){const[i,a]=jt.useState(["```vis-chart",e.content,"```"].join(`
`));return c7e(()=>e.content,o=>{a(["```vis-chart",o,"```"].join(`
`))}),jt.createElement(wfn,null,i)}return s7e(()=>{Bre.createRoot(n.value).render(jt.createElement(r))}),(i,a)=>(TK(),l7e("div",{ref_key:"elRef",ref:n},null,512))}}),qk=SK({name:"VkTemplateVis",__name:"index",setup(t){return(e,n)=>(TK(),nTe(qL(t7e),{type:"fence:vis-chart"},{default:rTe(({raw:r})=>[ZV(Nfn,{content:r.content},null,8,["content"])]),_:1}))}});qk.install=t=>{t.component(qk.name||"VkTemplateVis",qk)};const JSe=`
# GPT-VIS 

Components for GPTs, generative AI, and LLM projects. Not only UI Components.

Heres a visualization of Haidilao's food delivery revenue from 2013 to 2022. You can see a steady increase over the years, with notable *growth* particularly in recent years.

\`\`\`vis-chart
{
  "type": "line",
  "data": [
    { "time": "2013", "value": 59.3 },
    { "time": "2014", "value": 64.4 },
    { "time": "2015", "value": 68.9 },
    { "time": "2016", "value": 74.4 },
    { "time": "2017", "value": 82.7 },
    { "time": "2018", "value": 91.9 },
    { "time": "2019", "value": 99.1 },
    { "time": "2020", "value": 101.6 },
    { "time": "2021", "value": 114.4 },
    { "time": "2022", "value": 121 }
  ]
}
\`\`\`
`,Ifn=SK({__name:"basic",setup(t){const e=tTe(0),n=u7e(()=>JSe.slice(0,e.value)),r=setInterval(()=>{e.value<JSe.length?e.value+=4:clearInterval(r)},60);return(i,a)=>(TK(),nTe(qL(r7e),{source:n.value,fences:["vis-chart"]},{default:rTe(()=>[ZV(qL(n7e)),ZV(qL(qk))]),_:1},8,["source"]))}}),idn=Object.freeze(Object.defineProperty({__proto__:null,default:Ifn},Symbol.toStringTag,{value:"Module"}));export{Wg as $,fr as A,Eo as B,QM as C,sR as D,Pr as E,bhn as F,Zr as G,vQ as H,yr as I,Ic as J,nwe as K,Ay as L,uA as M,_Q as N,SP as O,ZB as P,qa as Q,QIe as R,Fhn as S,are as T,sw as U,Nx as V,Ro as W,jVt as X,I5 as Y,rP as Z,kt as _,is as a,dhn as a$,Vs as a0,Hf as a1,Qm as a2,Dy as a3,eb as a4,x6e as a5,lw as a6,fjt as a7,Bhn as a8,pjt as a9,Gne as aA,SWt as aB,jhn as aC,rbe as aD,o$t as aE,jne as aF,fYt as aG,TYt as aH,AYt as aI,wYt as aJ,pYt as aK,SYt as aL,PZt as aM,Rhn as aN,vhn as aO,Phn as aP,y2 as aQ,Mhn as aR,_Ft as aS,pDt as aT,yDt as aU,hne as aV,mDt as aW,Kq as aX,vDt as aY,fne as aZ,gDt as a_,Khn as aa,TWt as ab,$y as ac,Lhn as ad,u1e as ae,TE as af,RT as ag,Lc as ah,Oh as ai,c_ as aj,WE as ak,w5 as al,Mu as am,go as an,MT as ao,VFe as ap,s7t as aq,fN as ar,Ix as as,pL as at,wu as au,B$t as av,$$t as aw,Hne as ax,u6e as ay,tP as az,Ip as b,phn as b0,BB as b1,dne as b2,ZBe as b3,ox as b4,ow as b5,MDt as b6,JBe as b7,NDt as b8,RDt as b9,wk as bA,fFt as bB,xhn as bC,pFt as bD,VM as bE,whn as bF,Ehn as bG,Shn as bH,dFt as bI,bFt as bJ,vc as bK,dW as bL,IFt as bM,HFt as bN,bp as bO,aR as bP,MFt as bQ,PFt as bR,eZ as bS,Tye as bT,bFe as bU,EFe as bV,OA as bW,GFt as bX,Nhn as bY,idn as bZ,PDt as ba,vne as bb,ghn as bc,Ak as bd,mhn as be,_hn as bf,sFt as bg,sFe as bh,lFt as bi,yhn as bj,lFe as bk,Rp as bl,pW as bm,Thn as bn,$B as bo,Sne as bp,Ohn as bq,fFe as br,Px as bs,mFt as bt,uFt as bu,Chn as bv,vFt as bw,yFt as bx,hFt as by,cFt as bz,rdn as c,cL as d,Mx as e,Md as f,oFt as g,djt as h,_5 as i,GB as j,E5 as k,Ahn as l,xne as m,zhn as n,oS as o,Xo as p,se as q,hhn as r,aFe as s,eFt as t,Z4e as u,gs as v,$hn as w,Hhn as x,N5 as y,s6e as z};
