import{fZ as A,f_ as I,f$ as s,g0 as i,b9 as C,g1 as _,g2 as p,d7 as m}from"./chunk-CET6Djna.js";function P(r,o,t,u){if(o==null||u==null)return!1;const n=A(o,u);if(n?.projector==null)return!1;if(n.projector===I)return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],!0;const{source:e,dest:c,projector:R}=n;if(c.spatialReferenceId===s.WEB_MERCATOR){const a=i[e.spatialReferenceId][s.WGS84];return a!=null&&(a(r,0,E,0),_(E,0,t,0),t[3]=d(E[1],r[2],r[3],p.radius),!0)}if(e.spatialReferenceId!==s.WGS84&&e.spatialReferenceId!==s.CGCS2000||c.spatialReferenceId!==s.PLATE_CARREE){R(r,0,t,0);const a=e.metersPerUnit??1,f=c.metersPerUnit??1;t[3]=r[3]*a/f}else{const a=i[e.spatialReferenceId][s.SPHERICAL_ECEF],f=i[s.SPHERICAL_ECEF][s.PLATE_CARREE];let l=r[3];a!=null&&f!=null&&(l=d(r[1],r[2],r[3],p.radius)),R(r,0,t,0),t[3]=l}return!0}function d(r,o,t,u){const n=u+o;if(n<u/2||t>n)return Number.MAX_VALUE;const e=Math.abs(L*r)+Math.asin(t/n);return e>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(e)}const E=C(),L=m(1);export{P as l};
