import{d6 as e}from"./chunk-Dx0VeHfy.js";function g(r){const{objectIdField:n,uniqueIdFields:t}=r;return t?.length?t.length>=2?{type:"unique-id-composite",fieldNames:t}:{type:"unique-id-simple",fieldName:t[0]}:{type:"object-id",fieldName:n}}function P(r,n,t,i,o,s){const a=x(i);if(!(e("featurelayer-snapshot-enabled")&&t?.query.supportsPagination&&!t?.operations.supportsEditing&&!n))return null;const u=f(o,s),{min:m,max:h}=a,p=u?h:m,c=d(i);let l=e("featurelayer-snapshot-initial-tolerance");return i!=="esriGeometryPoint"&&i!=="esriGeometryMultipoint"||(l=null),{supportsExceedsLimit:y(r,t),initialTolerance:l,maxFeatureCount:p,maxVertexCount:c}}function y(r,n){return!(!r&&!e("featurelayer-snapshot-non-hosted-exceedslimit-enabled"))&&n?.operations.supportsExceedsLimitStatistics}function d(r){switch(r){case"esriGeometryPoint":return null;case"esriGeometryPolyline":case"esriGeometryPolygon":case"esriGeometryMultiPatch":case"esriGeometryMultipoint":return e("featurelayer-snapshot-max-vertex-count")}}function f(r,n){const t=n?.clone().intersection(r),i=t!=null?t.width*t.height:0,o=n?n.width*n.height:0,s=o===0?0:i/o,a=e("featurelayer-snapshot-coverage");return!isNaN(s)&&s>=a}function x(r){switch(r){case"esriGeometryMultipoint":return{min:e("featurelayer-snapshot-multipoint-min-threshold"),max:e("featurelayer-snapshot-multipoint-max-threshold")};case"esriGeometryPoint":return{min:e("featurelayer-snapshot-point-min-threshold"),max:e("featurelayer-snapshot-point-max-threshold")};case"esriGeometryMultiPatch":case"esriGeometryPolygon":return{min:e("featurelayer-snapshot-polygon-min-threshold"),max:e("featurelayer-snapshot-polygon-max-threshold")};case"esriGeometryPolyline":return{min:e("featurelayer-snapshot-polyline-min-threshold"),max:e("featurelayer-snapshot-polyline-max-threshold")}}}export{g as e,P as t};
