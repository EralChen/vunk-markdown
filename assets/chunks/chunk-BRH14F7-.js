import{a,$ as s,k as b,p,K as c,C as f,l as T,j as y,i as v,o as A,D as g,B as x,O as D,q as O,u as F,W as P}from"./chunk-mCK8WXPa.js";import{iO as d,iP as u}from"./chunk-CuaFhuP3.js";import{b as l}from"./chunk-Dwg2b3X_.js";import"./chunk-Dpk1TJd9.js";import"./chunk-iOPJXyP1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./chunk-BPVd6ESQ.js";import"./chunk-CjfP9KU1.js";import"./chunk-DHiB1uzW.js";import"./chunk-DGmg3LSc.js";function w(e,n){return e&&e.domain?e.domain.type==="coded-value"||e.domain.type==="codedValue"?y.convertObjectToArcadeDictionary({type:"codedValue",name:e.domain.name,dataType:l[e.field.type],codedValues:e.domain.codedValues.map((r=>({name:r.name,code:r.code})))},v(n)):y.convertObjectToArcadeDictionary({type:"range",name:e.domain.name,dataType:l[e.field.type],min:e.domain.minValue,max:e.domain.maxValue},v(n)):null}function bt(e){e.mode==="async"&&(e.functions.domain=function(n,r){return e.standardFunctionAsync(n,r,(async(o,m,t)=>{if(a(t,2,3,n,r),s(t[0]))return w(b(t[0],p(t[1]),t[2]===void 0?void 0:t[2]),n);if(c(t[0]))return await t[0]._ensureLoaded(),w(f(p(t[1]),t[0],null,t[2]===void 0?void 0:t[2]),n);throw new d(n,u.InvalidParameter,r)}))},e.functions.subtypes=function(n,r){return e.standardFunctionAsync(n,r,(async(o,m,t)=>{if(a(t,1,1,n,r),s(t[0])){const i=T(t[0]);return i?y.convertObjectToArcadeDictionary(i,v(n)):null}if(c(t[0])){await t[0]._ensureLoaded();const i=t[0].subtypeMetaData();return i?y.convertObjectToArcadeDictionary(i,v(n)):null}throw new d(n,u.InvalidParameter,r)}))},e.functions.domainname=function(n,r){return e.standardFunctionAsync(n,r,(async(o,m,t)=>{if(a(t,2,4,n,r),s(t[0]))return A(t[0],p(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(c(t[0])){await t[0]._ensureLoaded();const i=f(p(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return g(i,t[2])}throw new d(n,u.InvalidParameter,r)}))},e.signatures.push({name:"domainname",min:2,max:4}),e.functions.domaincode=function(n,r){return e.standardFunctionAsync(n,r,(async(o,m,t)=>{if(a(t,2,4,n,r),s(t[0]))return x(t[0],p(t[1]),t[2],t[3]===void 0?void 0:t[3]);if(c(t[0])){await t[0]._ensureLoaded();const i=f(p(t[1]),t[0],null,t[3]===void 0?void 0:t[3]);return D(i,t[2])}throw new d(n,u.InvalidParameter,r)}))},e.signatures.push({name:"domaincode",min:2,max:4}),e.functions.text=function(n,r){return e.standardFunctionAsync(n,r,(async(o,m,t)=>{if(a(t,1,2,n,r),c(t[0])){const i=O(t[1],"");if(i==="")return t[0].castToText();if(i.toLowerCase()==="schema")return t[0].convertToText("schema",o.abortSignal);if(i.toLowerCase()==="featureset")return t[0].convertToText("featureset",o.abortSignal);throw new d(n,u.InvalidParameter,r)}return F(t[0],t[1])}))},e.functions.gdbversion=function(n,r){return e.standardFunctionAsync(n,r,(async(o,m,t)=>{if(a(t,1,1,n,r),s(t[0]))return t[0].gdbVersion();if(c(t[0]))return(await t[0].load()).gdbVersion;throw new d(n,u.InvalidParameter,r)}))},e.functions.schema=function(n,r){return e.standardFunctionAsync(n,r,(async(o,m,t)=>{if(a(t,1,1,n,r),c(t[0]))return await t[0].load(),y.convertObjectToArcadeDictionary(t[0].schema(),v(n));if(s(t[0])){const i=P(t[0]);return i?y.convertObjectToArcadeDictionary(i,v(n)):null}throw new d(n,u.InvalidParameter,r)}))})}export{bt as registerFunctions};
