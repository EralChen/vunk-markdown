import"./chunk-BIRRZM3s.js";import"./chunk-BdhyOCBG.js";import{a8 as Se,a6 as ye,a as F,x as T,a9 as Ie,ae as He,a7 as et}from"./chunk-B0S82j6z.js";import{i as Tt}from"./chunk-DJeyQkAF.js";import{s as ut,g as di}from"./chunk-CrRYQxQ2.js";import"./chunk-DRIFyX3i.js";import"./chunk-D6c7sZzl.js";import"./chunk-CPlgmK1_.js";import"./chunk-Eyk4hzuH.js";import{e as ui,n as fe}from"./chunk-B7BSWw46.js";import{f as ee}from"./chunk-CNSv5SoW.js";import{u as Ge,I as Be}from"./chunk-CJLDe-NJ.js";import{u as ze}from"./chunk-BuNoImXm.js";import{u as Xe}from"./chunk-DL1dTXTt.js";import{u as Ye}from"./chunk-Dq3QnjSH.js";import{d as Ue}from"./chunk-D0Dr7phT.js";import{c as hi}from"./chunk-Bd597skW.js";import{b as Ct,i as Rt,l as ie,u as fi,c as pe,e as Ae}from"./chunk-mzNrCwTJ.js";import{n as Te}from"./chunk-51fT3n0h.js";import{g as pi}from"./chunk-DlHjpvET.js";import"./chunk-DsYbGKja.js";import"./chunk-BuZVacDv.js";/* empty css              */import"./chunk-DomUsyan.js";import"./chunk-C-PlgT25.js";import"./chunk-CGu8X_rL.js";import"./chunk-VrgITMzo.js";import"./chunk-DPP4gGxb.js";import"./chunk-BcDq6IQy.js";import"./chunk-HTOW8iPe.js";import"./chunk-Ckmy1hl-.js";import"./chunk--D9csBsD.js";import"./chunk-CGg2Zy-O.js";import"./chunk-Bs6O-qg_.js";/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const ht={container:"container",actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},mt={actionsStart:"actions-start",contentStart:"content-start",contentEnd:"content-end",actionsEnd:"actions-end"};/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const gi=Se`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]) .content{cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) .content *,:host([disabled]) .content ::slotted(*){pointer-events:none}:host{display:flex;flex:1 1 0%;flex-direction:column}.container{display:flex;flex:1 1 auto;align-items:stretch;font-weight:var(--calcite-font-weight-normal);color:var(--calcite-color-text-2)}.content{display:flex;flex:1 1 auto;flex-direction:column;justify-content:center;font-size:var(--calcite-font-size--2);line-height:1.375;padding-inline:var(--calcite-stack-padding-inline, .75rem);padding-block:var(--calcite-stack-padding-block, .5rem)}.content-start{justify-content:flex-start}.content-end{justify-content:flex-end}.content-start,.content-end{flex:0 1 auto}.content-start ::slotted(calcite-icon),.content-end ::slotted(calcite-icon){margin-inline:.75rem;align-self:center}.actions-start,.actions-end,.content-start,.content-end{display:flex;align-items:center}.actions-start ::slotted(calcite-action),.actions-start ::slotted(calcite-action-menu),.actions-start ::slotted(calcite-handle),.actions-start ::slotted(calcite-dropdown),.actions-end ::slotted(calcite-action),.actions-end ::slotted(calcite-action-menu),.actions-end ::slotted(calcite-handle),.actions-end ::slotted(calcite-dropdown){align-self:stretch;color:inherit}:host([hidden]){display:none}[hidden]{display:none}`;class mi extends ye{constructor(){super(...arguments),this.hasActionsEnd=!1,this.hasActionsStart=!1,this.hasContentEnd=!1,this.hasContentStart=!1,this.disabled=!1}static{this.properties={hasActionsEnd:[16,{},{state:!0}],hasActionsStart:[16,{},{state:!0}],hasContentEnd:[16,{},{state:!0}],hasContentStart:[16,{},{state:!0}],disabled:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=gi}handleActionsStartSlotChange(t){this.hasActionsStart=ut(t)}handleActionsEndSlotChange(t){this.hasActionsEnd=ut(t)}handleContentStartSlotChange(t){this.hasContentStart=ut(t)}handleContentEndSlotChange(t){this.hasContentEnd=ut(t)}renderActionsStart(){const{hasActionsStart:t}=this;return Tt("actions-start-container",T`<div class=${F(ht.actionsStart)} .hidden=${!t}><slot name=${mt.actionsStart} @slotchange=${this.handleActionsStartSlotChange}></slot></div>`)}renderActionsEnd(){const{hasActionsEnd:t}=this;return Tt("actions-end-container",T`<div class=${F(ht.actionsEnd)} .hidden=${!t}><slot name=${mt.actionsEnd} @slotchange=${this.handleActionsEndSlotChange}></slot></div>`)}renderContentStart(){const{hasContentStart:t}=this;return T`<div class=${F(ht.contentStart)} .hidden=${!t}><slot name=${mt.contentStart} @slotchange=${this.handleContentStartSlotChange}></slot></div>`}renderDefaultContent(){return T`<div class=${F(ht.content)}><slot></slot></div>`}renderContentEnd(){const{hasContentEnd:t}=this;return T`<div class=${F(ht.contentEnd)} .hidden=${!t}><slot name=${mt.contentEnd} @slotchange=${this.handleContentEndSlotChange}></slot></div>`}render(){return T`<div class=${F(ht.container)}>${this.renderActionsStart()}${this.renderContentStart()}${this.renderDefaultContent()}${this.renderContentEnd()}${this.renderActionsEnd()}</div>`}}Ie("calcite-stack",mi);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const vi={container:"container"},bi={search:"search"},Ei=Se`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host{box-sizing:border-box;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-2);font-size:var(--calcite-font-size--1)}:host *{box-sizing:border-box}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:flex;inline-size:100%}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{display:flex;inline-size:100%}:host([scale=s]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-sm))}:host([scale=m]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-md))}:host([scale=l]) .container{padding:var(--calcite-filter-content-space, var(--calcite-spacing-lg))}label{position:relative;margin-block:0px;display:flex;inline-size:100%;align-items:center;overflow:hidden}calcite-input{inline-size:100%;--calcite-input-background-color: var(--calcite-filter-input-background-color);--calcite-input-border-color: var(--calcite-filter-input-border-color);--calcite-input-corner-radius: var(--calcite-filter-input-corner-radius);--calcite-input-shadow: var(--calcite-filter-input-shadow);--calcite-input-icon-color: var(--calcite-filter-input-icon-color);--calcite-input-text-color: var(--calcite-filter-input-text-color);--calcite-input-placeholder-text-color: var(--calcite-filter-input-placeholder-text-color);--calcite-input-actions-background-color: var(--calcite-filter-input-actions-background-color);--calcite-input-actions-background-color-hover: var(--calcite-filter-input-actions-background-color-hover);--calcite-input-actions-background-color-press: var(--calcite-filter-input-actions-background-color-press);--calcite-input-actions-icon-color: var(--calcite-filter-input-actions-icon-color);--calcite-input-actions-icon-color-hover: var(--calcite-filter-input-actions-icon-color-hover);--calcite-input-actions-icon-color-press: var(--calcite-filter-input-actions-icon-color-press)}:host([hidden]){display:none}[hidden]{display:none}`;class Si extends ye{constructor(){super(...arguments),this.cancelable=ze()(this),this.filterDebounced=Ue((t,e=!1,i)=>this.updateFiltered(ee(this.items??[],t,this.filterProps),e,i),He.filter),this.textInput=ui(),this._value="",this.messages=Xe(),this.focusSetter=Ye()(this),this.disabled=!1,this.filteredItems=[],this.items=[],this.scale="m",this.calciteFilterChange=et({cancelable:!1})}static{this.properties={disabled:[7,{},{reflect:!0,type:Boolean}],filterProps:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],items:[0,{},{attribute:!1}],label:1,messageOverrides:[0,{},{attribute:!1}],placeholder:1,scale:[3,{},{reflect:!0}],value:1}}static{this.shadowRootOptions={mode:"open",delegatesFocus:!0}}static{this.styles=Ei}get value(){return this._value}set value(t){const e=this._value;t!==e&&(this._value=t,this.valueHandler(t))}async filter(t=this.value){return new Promise(e=>{this.value=t,this.updateFiltered(ee(this.items??[],t,this.filterProps),!1,e)})}async setFocus(t){return this.focusSetter(()=>this.textInput.value,t)}connectedCallback(){super.connectedCallback(),this.cancelable.add(this.filterDebounced)}async load(){this.updateFiltered(ee(this.items??[],this.value,this.filterProps))}willUpdate(t){(t.has("items")&&(this.hasUpdated||this.items?.length>0)||t.has("filterProps"))&&this.filterDebounced(this.value)}updated(){Ge(this)}valueHandler(t){this.filterDebounced(t)}inputHandler(t){const e=t.target;this.value=e.value,this.filterDebounced(e.value,!0)}keyDownHandler(t){t.defaultPrevented||(t.key==="Escape"&&(this.clear(),t.preventDefault()),t.key==="Enter"&&t.preventDefault())}clear(){this.value="",this.filterDebounced("",!0),this.setFocus()}updateFiltered(t,e=!1,i){this.filteredItems=t,e&&this.calciteFilterChange.emit(),i?.()}render(){const{disabled:t,scale:e}=this;return Be({disabled:t,children:T`<div class=${F(vi.container)}><label><calcite-input clearable .disabled=${t} .icon=${bi.search} .label=${this.label??this.messages.label} .messageOverrides=${{clear:this.messages.clear}} @keydown=${this.keyDownHandler} @calciteInputInput=${this.inputHandler} .placeholder=${this.placeholder} .scale=${e} type=text .value=${this.value} ${fe(this.textInput)}></calcite-input></label></div>`})}}Ie("calcite-filter",Si);/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Oe(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,i)}return e}function W(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Oe(Object(e),!0).forEach(function(i){yi(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Oe(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Xt(n){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xt=function(t){return typeof t}:Xt=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xt(n)}function yi(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Z(){return Z=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},Z.apply(this,arguments)}function Ii(n,t){if(n==null)return{};var e={},i=Object.keys(n),a,r;for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&(e[a]=n[a]);return e}function Di(n,t){if(n==null)return{};var e=Ii(n,t),i,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(e[i]=n[i])}return e}var wi="1.15.6";function K(n){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(n)}var Q=K(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),$t=K(/Edge/i),Pe=K(/firefox/i),Ot=K(/safari/i)&&!K(/chrome/i)&&!K(/android/i),De=K(/iP(ad|od|hone)/i),We=K(/chrome/i)&&K(/android/i),je={capture:!1,passive:!1};function E(n,t,e){n.addEventListener(t,e,!Q&&je)}function b(n,t,e){n.removeEventListener(t,e,!Q&&je)}function qt(n,t){if(t){if(t[0]===">"&&(t=t.substring(1)),n)try{if(n.matches)return n.matches(t);if(n.msMatchesSelector)return n.msMatchesSelector(t);if(n.webkitMatchesSelector)return n.webkitMatchesSelector(t)}catch{return!1}return!1}}function qe(n){return n.host&&n!==document&&n.host.nodeType?n.host:n.parentNode}function X(n,t,e,i){if(n){e=e||document;do{if(t!=null&&(t[0]===">"?n.parentNode===e&&qt(n,t):qt(n,t))||i&&n===e)return n;if(n===e)break}while(n=qe(n))}return null}var Fe=/\s+/g;function N(n,t,e){if(n&&t)if(n.classList)n.classList[e?"add":"remove"](t);else{var i=(" "+n.className+" ").replace(Fe," ").replace(" "+t+" "," ");n.className=(i+(e?" "+t:"")).replace(Fe," ")}}function p(n,t,e){var i=n&&n.style;if(i){if(e===void 0)return document.defaultView&&document.defaultView.getComputedStyle?e=document.defaultView.getComputedStyle(n,""):n.currentStyle&&(e=n.currentStyle),t===void 0?e:e[t];!(t in i)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),i[t]=e+(typeof e=="string"?"":"px")}}function bt(n,t){var e="";if(typeof n=="string")e=n;else do{var i=p(n,"transform");i&&i!=="none"&&(e=i+" "+e)}while(!t&&(n=n.parentNode));var a=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return a&&new a(e)}function Ve(n,t,e){if(n){var i=n.getElementsByTagName(t),a=0,r=i.length;if(e)for(;a<r;a++)e(i[a],a);return i}return[]}function U(){var n=document.scrollingElement;return n||document.documentElement}function x(n,t,e,i,a){if(!(!n.getBoundingClientRect&&n!==window)){var r,o,s,l,c,u,h;if(n!==window&&n.parentNode&&n!==U()?(r=n.getBoundingClientRect(),o=r.top,s=r.left,l=r.bottom,c=r.right,u=r.height,h=r.width):(o=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(t||e)&&n!==window&&(a=a||n.parentNode,!Q))do if(a&&a.getBoundingClientRect&&(p(a,"transform")!=="none"||e&&p(a,"position")!=="static")){var v=a.getBoundingClientRect();o-=v.top+parseInt(p(a,"border-top-width")),s-=v.left+parseInt(p(a,"border-left-width")),l=o+r.height,c=s+r.width;break}while(a=a.parentNode);if(i&&n!==window){var y=bt(a||n),f=y&&y.a,S=y&&y.d;y&&(o/=S,s/=f,h/=f,u/=S,l=o+u,c=s+h)}return{top:o,left:s,bottom:l,right:c,width:h,height:u}}}function Le(n,t,e){for(var i=at(n,!0),a=x(n)[t];i;){var r=x(i)[e],o=void 0;if(o=a>=r,!o)return i;if(i===U())break;i=at(i,!1)}return!1}function Et(n,t,e,i){for(var a=0,r=0,o=n.children;r<o.length;){if(o[r].style.display!=="none"&&o[r]!==g.ghost&&(i||o[r]!==g.dragged)&&X(o[r],e.draggable,n,!1)){if(a===t)return o[r];a++}r++}return null}function we(n,t){for(var e=n.lastElementChild;e&&(e===g.ghost||p(e,"display")==="none"||t&&!qt(e,t));)e=e.previousElementSibling;return e||null}function H(n,t){var e=0;if(!n||!n.parentNode)return-1;for(;n=n.previousElementSibling;)n.nodeName.toUpperCase()!=="TEMPLATE"&&n!==g.clone&&(!t||qt(n,t))&&e++;return e}function Me(n){var t=0,e=0,i=U();if(n)do{var a=bt(n),r=a.a,o=a.d;t+=n.scrollLeft*r,e+=n.scrollTop*o}while(n!==i&&(n=n.parentNode));return[t,e]}function Ci(n,t){for(var e in n)if(n.hasOwnProperty(e)){for(var i in t)if(t.hasOwnProperty(i)&&t[i]===n[e][i])return Number(e)}return-1}function at(n,t){if(!n||!n.getBoundingClientRect)return U();var e=n,i=!1;do if(e.clientWidth<e.scrollWidth||e.clientHeight<e.scrollHeight){var a=p(e);if(e.clientWidth<e.scrollWidth&&(a.overflowX=="auto"||a.overflowX=="scroll")||e.clientHeight<e.scrollHeight&&(a.overflowY=="auto"||a.overflowY=="scroll")){if(!e.getBoundingClientRect||e===document.body)return U();if(i||t)return e;i=!0}}while(e=e.parentNode);return U()}function xi(n,t){if(n&&t)for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function ne(n,t){return Math.round(n.top)===Math.round(t.top)&&Math.round(n.left)===Math.round(t.left)&&Math.round(n.height)===Math.round(t.height)&&Math.round(n.width)===Math.round(t.width)}var Pt;function Ke(n,t){return function(){if(!Pt){var e=arguments,i=this;e.length===1?n.call(i,e[0]):n.apply(i,e),Pt=setTimeout(function(){Pt=void 0},t)}}}function _i(){clearTimeout(Pt),Pt=void 0}function Ze(n,t,e){n.scrollLeft+=t,n.scrollTop+=e}function Qe(n){var t=window.Polymer,e=window.jQuery||window.Zepto;return t&&t.dom?t.dom(n).cloneNode(!0):e?e(n).clone(!0)[0]:n.cloneNode(!0)}function Je(n,t,e){var i={};return Array.from(n.children).forEach(function(a){var r,o,s,l;if(!(!X(a,t.draggable,n,!1)||a.animated||a===e)){var c=x(a);i.left=Math.min((r=i.left)!==null&&r!==void 0?r:1/0,c.left),i.top=Math.min((o=i.top)!==null&&o!==void 0?o:1/0,c.top),i.right=Math.max((s=i.right)!==null&&s!==void 0?s:-1/0,c.right),i.bottom=Math.max((l=i.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var M="Sortable"+new Date().getTime();function Ai(){var n=[],t;return{captureAnimationState:function(){if(n=[],!!this.options.animation){var i=[].slice.call(this.el.children);i.forEach(function(a){if(!(p(a,"display")==="none"||a===g.ghost)){n.push({target:a,rect:x(a)});var r=W({},n[n.length-1].rect);if(a.thisAnimationDuration){var o=bt(a,!0);o&&(r.top-=o.f,r.left-=o.e)}a.fromRect=r}})}},addAnimationState:function(i){n.push(i)},removeAnimationState:function(i){n.splice(Ci(n,{target:i}),1)},animateAll:function(i){var a=this;if(!this.options.animation){clearTimeout(t),typeof i=="function"&&i();return}var r=!1,o=0;n.forEach(function(s){var l=0,c=s.target,u=c.fromRect,h=x(c),v=c.prevFromRect,y=c.prevToRect,f=s.rect,S=bt(c,!0);S&&(h.top-=S.f,h.left-=S.e),c.toRect=h,c.thisAnimationDuration&&ne(v,h)&&!ne(u,h)&&(f.top-h.top)/(f.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=Oi(f,v,y,a.options)),ne(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=a.options.animation),a.animate(c,f,h,l)),l&&(r=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(t),r?t=setTimeout(function(){typeof i=="function"&&i()},o):typeof i=="function"&&i(),n=[]},animate:function(i,a,r,o){if(o){p(i,"transition",""),p(i,"transform","");var s=bt(this.el),l=s&&s.a,c=s&&s.d,u=(a.left-r.left)/(l||1),h=(a.top-r.top)/(c||1);i.animatingX=!!u,i.animatingY=!!h,p(i,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=Ti(i),p(i,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),p(i,"transform","translate3d(0,0,0)"),typeof i.animated=="number"&&clearTimeout(i.animated),i.animated=setTimeout(function(){p(i,"transition",""),p(i,"transform",""),i.animated=!1,i.animatingX=!1,i.animatingY=!1},o)}}}}function Ti(n){return n.offsetWidth}function Oi(n,t,e,i){return Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))/Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))*i.animation}var ft=[],ae={initializeByDefault:!0},kt={mount:function(t){for(var e in ae)ae.hasOwnProperty(e)&&!(e in t)&&(t[e]=ae[e]);ft.forEach(function(i){if(i.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ft.push(t)},pluginEvent:function(t,e,i){var a=this;this.eventCanceled=!1,i.cancel=function(){a.eventCanceled=!0};var r=t+"Global";ft.forEach(function(o){e[o.pluginName]&&(e[o.pluginName][r]&&e[o.pluginName][r](W({sortable:e},i)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](W({sortable:e},i)))})},initializePlugins:function(t,e,i,a){ft.forEach(function(s){var l=s.pluginName;if(!(!t.options[l]&&!s.initializeByDefault)){var c=new s(t,e,t.options);c.sortable=t,c.options=t.options,t[l]=c,Z(i,c.defaults)}});for(var r in t.options)if(t.options.hasOwnProperty(r)){var o=this.modifyOption(t,r,t.options[r]);typeof o<"u"&&(t.options[r]=o)}},getEventProperties:function(t,e){var i={};return ft.forEach(function(a){typeof a.eventProperties=="function"&&Z(i,a.eventProperties.call(e[a.pluginName],t))}),i},modifyOption:function(t,e,i){var a;return ft.forEach(function(r){t[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[e]=="function"&&(a=r.optionListeners[e].call(t[r.pluginName],i))}),a}};function Pi(n){var t=n.sortable,e=n.rootEl,i=n.name,a=n.targetEl,r=n.cloneEl,o=n.toEl,s=n.fromEl,l=n.oldIndex,c=n.newIndex,u=n.oldDraggableIndex,h=n.newDraggableIndex,v=n.originalEvent,y=n.putSortable,f=n.extraEventProperties;if(t=t||e&&e[M],!!t){var S,G=t.options,j="on"+i.charAt(0).toUpperCase()+i.substr(1);window.CustomEvent&&!Q&&!$t?S=new CustomEvent(i,{bubbles:!0,cancelable:!0}):(S=document.createEvent("Event"),S.initEvent(i,!0,!0)),S.to=o||e,S.from=s||e,S.item=a||e,S.clone=r,S.oldIndex=l,S.newIndex=c,S.oldDraggableIndex=u,S.newDraggableIndex=h,S.originalEvent=v,S.pullMode=y?y.lastPutMode:void 0;var O=W(W({},f),kt.getEventProperties(i,t));for(var B in O)S[B]=O[B];e&&e.dispatchEvent(S),G[j]&&G[j].call(t,S)}}var Fi=["evt"],L=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i.evt,r=Di(i,Fi);kt.pluginEvent.bind(g)(t,e,W({dragEl:d,parentEl:w,ghostEl:m,rootEl:I,nextEl:dt,lastDownEl:Yt,cloneEl:D,cloneHidden:nt,dragStarted:xt,putSortable:_,activeSortable:g.active,originalEvent:a,oldIndex:vt,oldDraggableIndex:Ft,newIndex:R,newDraggableIndex:it,hideGhostForTarget:ni,unhideGhostForTarget:ai,cloneNowHidden:function(){nt=!0},cloneNowShown:function(){nt=!1},dispatchSortableEvent:function(s){P({sortable:e,name:s,originalEvent:a})}},r))};function P(n){Pi(W({putSortable:_,cloneEl:D,targetEl:d,rootEl:I,oldIndex:vt,oldDraggableIndex:Ft,newIndex:R,newDraggableIndex:it},n))}var d,w,m,I,dt,Yt,D,nt,vt,R,Ft,it,Ht,_,gt=!1,Vt=!1,Kt=[],lt,z,re,oe,$e,ke,xt,pt,Lt,Mt=!1,Gt=!1,Ut,A,se=[],ge=!1,Zt=[],Jt=typeof document<"u",Bt=De,Ne=$t||Q?"cssFloat":"float",Li=Jt&&!We&&!De&&"draggable"in document.createElement("div"),ti=(function(){if(Jt){if(Q)return!1;var n=document.createElement("x");return n.style.cssText="pointer-events:auto",n.style.pointerEvents==="auto"}})(),ei=function(t,e){var i=p(t),a=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=Et(t,0,e),o=Et(t,1,e),s=r&&p(r),l=o&&p(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+x(r).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+x(o).width;if(i.display==="flex")return i.flexDirection==="column"||i.flexDirection==="column-reverse"?"vertical":"horizontal";if(i.display==="grid")return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s.float&&s.float!=="none"){var h=s.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return r&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||c>=a&&i[Ne]==="none"||o&&i[Ne]==="none"&&c+u>a)?"vertical":"horizontal"},Mi=function(t,e,i){var a=i?t.left:t.top,r=i?t.right:t.bottom,o=i?t.width:t.height,s=i?e.left:e.top,l=i?e.right:e.bottom,c=i?e.width:e.height;return a===s||r===l||a+o/2===s+c/2},$i=function(t,e){var i;return Kt.some(function(a){var r=a[M].options.emptyInsertThreshold;if(!(!r||we(a))){var o=x(a),s=t>=o.left-r&&t<=o.right+r,l=e>=o.top-r&&e<=o.bottom+r;if(s&&l)return i=a}}),i},ii=function(t){function e(r,o){return function(s,l,c,u){var h=s.options.group.name&&l.options.group.name&&s.options.group.name===l.options.group.name;if(r==null&&(o||h))return!0;if(r==null||r===!1)return!1;if(o&&r==="clone")return r;if(typeof r=="function")return e(r(s,l,c,u),o)(s,l,c,u);var v=(o?s:l).options.group.name;return r===!0||typeof r=="string"&&r===v||r.join&&r.indexOf(v)>-1}}var i={},a=t.group;(!a||Xt(a)!="object")&&(a={name:a}),i.name=a.name,i.checkPull=e(a.pull,!0),i.checkPut=e(a.put),i.revertClone=a.revertClone,t.group=i},ni=function(){!ti&&m&&p(m,"display","none")},ai=function(){!ti&&m&&p(m,"display","")};Jt&&!We&&document.addEventListener("click",function(n){if(Vt)return n.preventDefault(),n.stopPropagation&&n.stopPropagation(),n.stopImmediatePropagation&&n.stopImmediatePropagation(),Vt=!1,!1},!0);var ct=function(t){if(d){t=t.touches?t.touches[0]:t;var e=$i(t.clientX,t.clientY);if(e){var i={};for(var a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[M]._onDragOver(i)}}},ki=function(t){d&&d.parentNode[M]._isOutsideThisEl(t.target)};function g(n,t){if(!(n&&n.nodeType&&n.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(n));this.el=n,this.options=t=Z({},t),n[M]=this;var e={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(n.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return ei(n,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,s){o.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:g.supportPointer!==!1&&"PointerEvent"in window&&(!Ot||De),emptyInsertThreshold:5};kt.initializePlugins(this,n,e);for(var i in e)!(i in t)&&(t[i]=e[i]);ii(t);for(var a in this)a.charAt(0)==="_"&&typeof this[a]=="function"&&(this[a]=this[a].bind(this));this.nativeDraggable=t.forceFallback?!1:Li,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?E(n,"pointerdown",this._onTapStart):(E(n,"mousedown",this._onTapStart),E(n,"touchstart",this._onTapStart)),this.nativeDraggable&&(E(n,"dragover",this),E(n,"dragenter",this)),Kt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Z(this,Ai())}g.prototype={constructor:g,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&(pt=null)},_getDirection:function(t,e){return typeof this.options.direction=="function"?this.options.direction.call(this,t,e,d):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,a=this.options,r=a.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,l=(s||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||l,u=a.filter;if(Yi(i),!d&&!(/mousedown|pointerdown/.test(o)&&t.button!==0||a.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Ot&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=X(l,a.draggable,i,!1),!(l&&l.animated)&&Yt!==l)){if(vt=H(l),Ft=H(l,a.draggable),typeof u=="function"){if(u.call(this,t,l,this)){P({sortable:e,rootEl:c,name:"filter",targetEl:l,toEl:i,fromEl:i}),L("filter",e,{evt:t}),r&&t.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=X(c,h.trim(),i,!1),h)return P({sortable:e,rootEl:h,name:"filter",targetEl:l,fromEl:i,toEl:i}),L("filter",e,{evt:t}),!0}),u)){r&&t.preventDefault();return}a.handle&&!X(c,a.handle,i,!1)||this._prepareDragStart(t,s,l)}}},_prepareDragStart:function(t,e,i){var a=this,r=a.el,o=a.options,s=r.ownerDocument,l;if(i&&!d&&i.parentNode===r){var c=x(i);if(I=r,d=i,w=d.parentNode,dt=d.nextSibling,Yt=i,Ht=o.group,g.dragged=d,lt={target:d,clientX:(e||t).clientX,clientY:(e||t).clientY},$e=lt.clientX-c.left,ke=lt.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,d.style["will-change"]="all",l=function(){if(L("delayEnded",a,{evt:t}),g.eventCanceled){a._onDrop();return}a._disableDelayedDragEvents(),!Pe&&a.nativeDraggable&&(d.draggable=!0),a._triggerDragStart(t,e),P({sortable:a,name:"choose",originalEvent:t}),N(d,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){Ve(d,u.trim(),le)}),E(s,"dragover",ct),E(s,"mousemove",ct),E(s,"touchmove",ct),o.supportPointer?(E(s,"pointerup",a._onDrop),!this.nativeDraggable&&E(s,"pointercancel",a._onDrop)):(E(s,"mouseup",a._onDrop),E(s,"touchend",a._onDrop),E(s,"touchcancel",a._onDrop)),Pe&&this.nativeDraggable&&(this.options.touchStartThreshold=4,d.draggable=!0),L("delayStart",this,{evt:t}),o.delay&&(!o.delayOnTouchOnly||e)&&(!this.nativeDraggable||!($t||Q))){if(g.eventCanceled){this._onDrop();return}o.supportPointer?(E(s,"pointerup",a._disableDelayedDrag),E(s,"pointercancel",a._disableDelayedDrag)):(E(s,"mouseup",a._disableDelayedDrag),E(s,"touchend",a._disableDelayedDrag),E(s,"touchcancel",a._disableDelayedDrag)),E(s,"mousemove",a._delayedDragTouchMoveHandler),E(s,"touchmove",a._delayedDragTouchMoveHandler),o.supportPointer&&E(s,"pointermove",a._delayedDragTouchMoveHandler),a._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){d&&le(d),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._disableDelayedDrag),b(t,"touchend",this._disableDelayedDrag),b(t,"touchcancel",this._disableDelayedDrag),b(t,"pointerup",this._disableDelayedDrag),b(t,"pointercancel",this._disableDelayedDrag),b(t,"mousemove",this._delayedDragTouchMoveHandler),b(t,"touchmove",this._delayedDragTouchMoveHandler),b(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||t.pointerType=="touch"&&t,!this.nativeDraggable||e?this.options.supportPointer?E(document,"pointermove",this._onTouchMove):e?E(document,"touchmove",this._onTouchMove):E(document,"mousemove",this._onTouchMove):(E(d,"dragend",this),E(I,"dragstart",this._onDragStart));try{document.selection?Wt(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,e){if(gt=!1,I&&d){L("dragStarted",this,{evt:e}),this.nativeDraggable&&E(document,"dragover",ki);var i=this.options;!t&&N(d,i.dragClass,!1),N(d,i.ghostClass,!0),g.active=this,t&&this._appendGhost(),P({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(z){this._lastX=z.clientX,this._lastY=z.clientY,ni();for(var t=document.elementFromPoint(z.clientX,z.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(z.clientX,z.clientY),t!==e);)e=t;if(d.parentNode[M]._isOutsideThisEl(t),e)do{if(e[M]){var i=void 0;if(i=e[M]._onDragOver({clientX:z.clientX,clientY:z.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=qe(e));ai()}},_onTouchMove:function(t){if(lt){var e=this.options,i=e.fallbackTolerance,a=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=m&&bt(m,!0),s=m&&o&&o.a,l=m&&o&&o.d,c=Bt&&A&&Me(A),u=(r.clientX-lt.clientX+a.x)/(s||1)+(c?c[0]-se[0]:0)/(s||1),h=(r.clientY-lt.clientY+a.y)/(l||1)+(c?c[1]-se[1]:0)/(l||1);if(!g.active&&!gt){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(m){o?(o.e+=u-(re||0),o.f+=h-(oe||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");p(m,"webkitTransform",v),p(m,"mozTransform",v),p(m,"msTransform",v),p(m,"transform",v),re=u,oe=h,z=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!m){var t=this.options.fallbackOnBody?document.body:I,e=x(d,!0,Bt,!0,t),i=this.options;if(Bt){for(A=t;p(A,"position")==="static"&&p(A,"transform")==="none"&&A!==document;)A=A.parentNode;A!==document.body&&A!==document.documentElement?(A===document&&(A=U()),e.top+=A.scrollTop,e.left+=A.scrollLeft):A=U(),se=Me(A)}m=d.cloneNode(!0),N(m,i.ghostClass,!1),N(m,i.fallbackClass,!0),N(m,i.dragClass,!0),p(m,"transition",""),p(m,"transform",""),p(m,"box-sizing","border-box"),p(m,"margin",0),p(m,"top",e.top),p(m,"left",e.left),p(m,"width",e.width),p(m,"height",e.height),p(m,"opacity","0.8"),p(m,"position",Bt?"absolute":"fixed"),p(m,"zIndex","100000"),p(m,"pointerEvents","none"),g.ghost=m,t.appendChild(m),p(m,"transform-origin",$e/parseInt(m.style.width)*100+"% "+ke/parseInt(m.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,a=t.dataTransfer,r=i.options;if(L("dragStart",this,{evt:t}),g.eventCanceled){this._onDrop();return}L("setupClone",this),g.eventCanceled||(D=Qe(d),D.removeAttribute("id"),D.draggable=!1,D.style["will-change"]="",this._hideClone(),N(D,this.options.chosenClass,!1),g.clone=D),i.cloneId=Wt(function(){L("clone",i),!g.eventCanceled&&(i.options.removeCloneOnHide||I.insertBefore(D,d),i._hideClone(),P({sortable:i,name:"clone"}))}),!e&&N(d,r.dragClass,!0),e?(Vt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(b(document,"mouseup",i._onDrop),b(document,"touchend",i._onDrop),b(document,"touchcancel",i._onDrop),a&&(a.effectAllowed="move",r.setData&&r.setData.call(i,a,d)),E(document,"drop",i),p(d,"transform","translateZ(0)")),gt=!0,i._dragStartId=Wt(i._dragStarted.bind(i,e,t)),E(document,"selectstart",i),xt=!0,window.getSelection().removeAllRanges(),Ot&&p(document.body,"user-select","none")},_onDragOver:function(t){var e=this.el,i=t.target,a,r,o,s=this.options,l=s.group,c=g.active,u=Ht===l,h=s.sort,v=_||c,y,f=this,S=!1;if(ge)return;function G(wt,li){L(wt,f,W({evt:t,isOwner:u,axis:y?"vertical":"horizontal",revert:o,dragRect:a,targetRect:r,canSort:h,fromSortable:v,target:i,completed:O,onMove:function(_e,ci){return zt(I,e,d,a,_e,x(_e),t,ci)},changed:B},li))}function j(){G("dragOverAnimationCapture"),f.captureAnimationState(),f!==v&&v.captureAnimationState()}function O(wt){return G("dragOverCompleted",{insertion:wt}),wt&&(u?c._hideClone():c._showClone(f),f!==v&&(N(d,_?_.options.ghostClass:c.options.ghostClass,!1),N(d,s.ghostClass,!0)),_!==f&&f!==g.active?_=f:f===g.active&&_&&(_=null),v===f&&(f._ignoreWhileAnimating=i),f.animateAll(function(){G("dragOverAnimationComplete"),f._ignoreWhileAnimating=null}),f!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(i===d&&!d.animated||i===e&&!i.animated)&&(pt=null),!s.dragoverBubble&&!t.rootEl&&i!==document&&(d.parentNode[M]._isOutsideThisEl(t.target),!wt&&ct(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),S=!0}function B(){R=H(d),it=H(d,s.draggable),P({sortable:f,name:"change",toEl:e,newIndex:R,newDraggableIndex:it,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),i=X(i,s.draggable,e,!0),G("dragOver"),g.eventCanceled)return S;if(d.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||f._ignoreWhileAnimating===i)return O(!1);if(Vt=!1,c&&!s.disabled&&(u?h||(o=w!==I):_===this||(this.lastPutMode=Ht.checkPull(this,c,d,t))&&l.checkPut(this,c,d,t))){if(y=this._getDirection(t,i)==="vertical",a=x(d),G("dragOverValid"),g.eventCanceled)return S;if(o)return w=I,j(),this._hideClone(),G("revert"),g.eventCanceled||(dt?I.insertBefore(d,dt):I.appendChild(d)),O(!0);var $=we(e,s.draggable);if(!$||Gi(t,y,this)&&!$.animated){if($===d)return O(!1);if($&&e===t.target&&(i=$),i&&(r=x(i)),zt(I,e,d,a,i,r,t,!!i)!==!1)return j(),$&&$.nextSibling?e.insertBefore(d,$.nextSibling):e.appendChild(d),w=e,B(),O(!0)}else if($&&Hi(t,y,this)){var rt=Et(e,0,s,!0);if(rt===d)return O(!1);if(i=rt,r=x(i),zt(I,e,d,a,i,r,t,!1)!==!1)return j(),e.insertBefore(d,rt),w=e,B(),O(!0)}else if(i.parentNode===e){r=x(i);var Y=0,ot,St=d.parentNode!==e,k=!Mi(d.animated&&d.toRect||a,i.animated&&i.toRect||r,y),yt=y?"top":"left",J=Le(i,"top","top")||Le(d,"top","top"),It=J?J.scrollTop:void 0;pt!==i&&(ot=r[yt],Mt=!1,Gt=!k&&s.invertSwap||St),Y=Bi(t,i,r,y,k?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,Gt,pt===i);var q;if(Y!==0){var st=H(d);do st-=Y,q=w.children[st];while(q&&(p(q,"display")==="none"||q===m))}if(Y===0||q===i)return O(!1);pt=i,Lt=Y;var Dt=i.nextElementSibling,tt=!1;tt=Y===1;var Nt=zt(I,e,d,a,i,r,t,tt);if(Nt!==!1)return(Nt===1||Nt===-1)&&(tt=Nt===1),ge=!0,setTimeout(Ri,30),j(),tt&&!Dt?e.appendChild(d):i.parentNode.insertBefore(d,tt?Dt:i),J&&Ze(J,0,It-J.scrollTop),w=d.parentNode,ot!==void 0&&!Gt&&(Ut=Math.abs(ot-x(i)[yt])),B(),O(!0)}if(e.contains(d))return O(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){b(document,"mousemove",this._onTouchMove),b(document,"touchmove",this._onTouchMove),b(document,"pointermove",this._onTouchMove),b(document,"dragover",ct),b(document,"mousemove",ct),b(document,"touchmove",ct)},_offUpEvents:function(){var t=this.el.ownerDocument;b(t,"mouseup",this._onDrop),b(t,"touchend",this._onDrop),b(t,"pointerup",this._onDrop),b(t,"pointercancel",this._onDrop),b(t,"touchcancel",this._onDrop),b(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;if(R=H(d),it=H(d,i.draggable),L("drop",this,{evt:t}),w=d&&d.parentNode,R=H(d),it=H(d,i.draggable),g.eventCanceled){this._nulling();return}gt=!1,Gt=!1,Mt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),me(this.cloneId),me(this._dragStartId),this.nativeDraggable&&(b(document,"drop",this),b(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ot&&p(document.body,"user-select",""),p(d,"transform",""),t&&(xt&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),m&&m.parentNode&&m.parentNode.removeChild(m),(I===w||_&&_.lastPutMode!=="clone")&&D&&D.parentNode&&D.parentNode.removeChild(D),d&&(this.nativeDraggable&&b(d,"dragend",this),le(d),d.style["will-change"]="",xt&&!gt&&N(d,_?_.options.ghostClass:this.options.ghostClass,!1),N(d,this.options.chosenClass,!1),P({sortable:this,name:"unchoose",toEl:w,newIndex:null,newDraggableIndex:null,originalEvent:t}),I!==w?(R>=0&&(P({rootEl:w,name:"add",toEl:w,fromEl:I,originalEvent:t}),P({sortable:this,name:"remove",toEl:w,originalEvent:t}),P({rootEl:w,name:"sort",toEl:w,fromEl:I,originalEvent:t}),P({sortable:this,name:"sort",toEl:w,originalEvent:t})),_&&_.save()):R!==vt&&R>=0&&(P({sortable:this,name:"update",toEl:w,originalEvent:t}),P({sortable:this,name:"sort",toEl:w,originalEvent:t})),g.active&&((R==null||R===-1)&&(R=vt,it=Ft),P({sortable:this,name:"end",toEl:w,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){L("nulling",this),I=d=w=m=dt=D=Yt=nt=lt=z=xt=R=it=vt=Ft=pt=Lt=_=Ht=g.dragged=g.ghost=g.clone=g.active=null,Zt.forEach(function(t){t.checked=!0}),Zt.length=re=oe=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":d&&(this._onDragOver(t),Ni(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],e,i=this.el.children,a=0,r=i.length,o=this.options;a<r;a++)e=i[a],X(e,o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||Xi(e));return t},sort:function(t,e){var i={},a=this.el;this.toArray().forEach(function(r,o){var s=a.children[o];X(s,this.options.draggable,a,!1)&&(i[r]=s)},this),e&&this.captureAnimationState(),t.forEach(function(r){i[r]&&(a.removeChild(i[r]),a.appendChild(i[r]))}),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return X(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(e===void 0)return i[t];var a=kt.modifyOption(this,t,e);typeof a<"u"?i[t]=a:i[t]=e,t==="group"&&ii(i)},destroy:function(){L("destroy",this);var t=this.el;t[M]=null,b(t,"mousedown",this._onTapStart),b(t,"touchstart",this._onTapStart),b(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(b(t,"dragover",this),b(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Kt.splice(Kt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!nt){if(L("hideClone",this),g.eventCanceled)return;p(D,"display","none"),this.options.removeCloneOnHide&&D.parentNode&&D.parentNode.removeChild(D),nt=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(nt){if(L("showClone",this),g.eventCanceled)return;d.parentNode==I&&!this.options.group.revertClone?I.insertBefore(D,d):dt?I.insertBefore(D,dt):I.appendChild(D),this.options.group.revertClone&&this.animate(d,D),p(D,"display",""),nt=!1}}};function Ni(n){n.dataTransfer&&(n.dataTransfer.dropEffect="move"),n.cancelable&&n.preventDefault()}function zt(n,t,e,i,a,r,o,s){var l,c=n[M],u=c.options.onMove,h;return window.CustomEvent&&!Q&&!$t?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=t,l.from=n,l.dragged=e,l.draggedRect=i,l.related=a||t,l.relatedRect=r||x(t),l.willInsertAfter=s,l.originalEvent=o,n.dispatchEvent(l),u&&(h=u.call(c,l,o)),h}function le(n){n.draggable=!1}function Ri(){ge=!1}function Hi(n,t,e){var i=x(Et(e.el,0,e.options,!0)),a=Je(e.el,e.options,m),r=10;return t?n.clientX<a.left-r||n.clientY<i.top&&n.clientX<i.right:n.clientY<a.top-r||n.clientY<i.bottom&&n.clientX<i.left}function Gi(n,t,e){var i=x(we(e.el,e.options.draggable)),a=Je(e.el,e.options,m),r=10;return t?n.clientX>a.right+r||n.clientY>i.bottom&&n.clientX>i.left:n.clientY>a.bottom+r||n.clientX>i.right&&n.clientY>i.top}function Bi(n,t,e,i,a,r,o,s){var l=i?n.clientY:n.clientX,c=i?e.height:e.width,u=i?e.top:e.left,h=i?e.bottom:e.right,v=!1;if(!o){if(s&&Ut<c*a){if(!Mt&&(Lt===1?l>u+c*r/2:l<h-c*r/2)&&(Mt=!0),Mt)v=!0;else if(Lt===1?l<u+Ut:l>h-Ut)return-Lt}else if(l>u+c*(1-a)/2&&l<h-c*(1-a)/2)return zi(t)}return v=v||o,v&&(l<u+c*r/2||l>h-c*r/2)?l>u+c/2?1:-1:0}function zi(n){return H(d)<H(n)?1:-1}function Xi(n){for(var t=n.tagName+n.className+n.src+n.href+n.textContent,e=t.length,i=0;e--;)i+=t.charCodeAt(e);return i.toString(36)}function Yi(n){Zt.length=0;for(var t=n.getElementsByTagName("input"),e=t.length;e--;){var i=t[e];i.checked&&Zt.push(i)}}function Wt(n){return setTimeout(n,0)}function me(n){return clearTimeout(n)}Jt&&E(document,"touchmove",function(n){(g.active||gt)&&n.cancelable&&n.preventDefault()});g.utils={on:E,off:b,css:p,find:Ve,is:function(t,e){return!!X(t,e,t,!1)},extend:xi,throttle:Ke,closest:X,toggleClass:N,clone:Qe,index:H,nextTick:Wt,cancelNextTick:me,detectDirection:ei,getChild:Et,expando:M};g.get=function(n){return n[M]};g.mount=function(){for(var n=arguments.length,t=new Array(n),e=0;e<n;e++)t[e]=arguments[e];t[0].constructor===Array&&(t=t[0]),t.forEach(function(i){if(!i.prototype||!i.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(i));i.utils&&(g.utils=W(W({},g.utils),i.utils)),kt.mount(i)})};g.create=function(n,t){return new g(n,t)};g.version=wi;var C=[],_t,ve,be=!1,ce,de,Qt,At;function Ui(){function n(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return n.prototype={dragStarted:function(e){var i=e.originalEvent;this.sortable.nativeDraggable?E(document,"dragover",this._handleAutoScroll):this.options.supportPointer?E(document,"pointermove",this._handleFallbackAutoScroll):i.touches?E(document,"touchmove",this._handleFallbackAutoScroll):E(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var i=e.originalEvent;!this.options.dragOverBubble&&!i.rootEl&&this._handleAutoScroll(i)},drop:function(){this.sortable.nativeDraggable?b(document,"dragover",this._handleAutoScroll):(b(document,"pointermove",this._handleFallbackAutoScroll),b(document,"touchmove",this._handleFallbackAutoScroll),b(document,"mousemove",this._handleFallbackAutoScroll)),Re(),jt(),_i()},nulling:function(){Qt=ve=_t=be=At=ce=de=null,C.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,i){var a=this,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,s=document.elementFromPoint(r,o);if(Qt=e,i||this.options.forceAutoScrollFallback||$t||Q||Ot){ue(e,this.options,s,i);var l=at(s,!0);be&&(!At||r!==ce||o!==de)&&(At&&Re(),At=setInterval(function(){var c=at(document.elementFromPoint(r,o),!0);c!==l&&(l=c,jt()),ue(e,a.options,c,i)},10),ce=r,de=o)}else{if(!this.options.bubbleScroll||at(s,!0)===U()){jt();return}ue(e,this.options,at(s,!1),!1)}}},Z(n,{pluginName:"scroll",initializeByDefault:!0})}function jt(){C.forEach(function(n){clearInterval(n.pid)}),C=[]}function Re(){clearInterval(At)}var ue=Ke(function(n,t,e,i){if(t.scroll){var a=(n.touches?n.touches[0]:n).clientX,r=(n.touches?n.touches[0]:n).clientY,o=t.scrollSensitivity,s=t.scrollSpeed,l=U(),c=!1,u;ve!==e&&(ve=e,jt(),_t=t.scroll,u=t.scrollFn,_t===!0&&(_t=at(e,!0)));var h=0,v=_t;do{var y=v,f=x(y),S=f.top,G=f.bottom,j=f.left,O=f.right,B=f.width,$=f.height,rt=void 0,Y=void 0,ot=y.scrollWidth,St=y.scrollHeight,k=p(y),yt=y.scrollLeft,J=y.scrollTop;y===l?(rt=B<ot&&(k.overflowX==="auto"||k.overflowX==="scroll"||k.overflowX==="visible"),Y=$<St&&(k.overflowY==="auto"||k.overflowY==="scroll"||k.overflowY==="visible")):(rt=B<ot&&(k.overflowX==="auto"||k.overflowX==="scroll"),Y=$<St&&(k.overflowY==="auto"||k.overflowY==="scroll"));var It=rt&&(Math.abs(O-a)<=o&&yt+B<ot)-(Math.abs(j-a)<=o&&!!yt),q=Y&&(Math.abs(G-r)<=o&&J+$<St)-(Math.abs(S-r)<=o&&!!J);if(!C[h])for(var st=0;st<=h;st++)C[st]||(C[st]={});(C[h].vx!=It||C[h].vy!=q||C[h].el!==y)&&(C[h].el=y,C[h].vx=It,C[h].vy=q,clearInterval(C[h].pid),(It!=0||q!=0)&&(c=!0,C[h].pid=setInterval(function(){i&&this.layer===0&&g.active._onTouchMove(Qt);var Dt=C[this.layer].vy?C[this.layer].vy*s:0,tt=C[this.layer].vx?C[this.layer].vx*s:0;typeof u=="function"&&u.call(g.dragged.parentNode[M],tt,Dt,n,Qt,C[this.layer].el)!=="continue"||Ze(C[this.layer].el,tt,Dt)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&v!==l&&(v=at(v,!1)));be=c}},30),ri=function(t){var e=t.originalEvent,i=t.putSortable,a=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,l=t.unhideGhostForTarget;if(e){var c=i||r;s();var u=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:a,putSortable:i}))}};function Ce(){}Ce.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var a=Et(this.sortable.el,this.startIndex,this.options);a?this.sortable.el.insertBefore(e,a):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:ri};Z(Ce,{pluginName:"revertOnSpill"});function xe(){}xe.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,a=i||this.sortable;a.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),a.animateAll()},drop:ri};Z(xe,{pluginName:"removeOnSpill"});g.mount(new Ui);g.mount(xe,Ce);/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const te=new Set,Wi={ghostClass:"calcite-sortable--ghost",chosenClass:"calcite-sortable--chosen",dragClass:"calcite-sortable--drag",fallbackClass:"calcite-sortable--fallback"};function ji(n){if(si(n))return;oi(n),te.add(n);const t="id",{group:e,handleSelector:i,dragSelector:a,sortDisabled:r}=n;n.sortable=g.create(n.el,{dataIdAttr:t,swapThreshold:.5,...Wi,...!!a&&{draggable:a},...!!e&&{sort:!r,group:{name:e,...!!n.canPull&&{pull:(o,s,l,{newDraggableIndex:c,oldDraggableIndex:u})=>n.canPull({toEl:o.el,fromEl:s.el,dragEl:l,newIndex:c,oldIndex:u})},...!!n.canPut&&{put:(o,s,l,{newDraggableIndex:c,oldDraggableIndex:u})=>n.canPut({toEl:o.el,fromEl:s.el,dragEl:l,newIndex:c,oldIndex:u})}}},onMove:({from:o,dragged:s,to:l,related:c})=>{n.onDragMove&&n.onDragMove({fromEl:o,dragEl:s,toEl:l,relatedEl:c})},handle:i,filter:`${i}[disabled]`,onStart:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:u})=>{Ee.active=!0,qi(),n.onDragStart({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:u})},onEnd:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:u})=>{Ee.active=!1,Vi(),n.onDragEnd({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:u})},onSort:({from:o,item:s,to:l,newDraggableIndex:c,oldDraggableIndex:u})=>{n.onDragSort({fromEl:o,dragEl:s,toEl:l,newIndex:c,oldIndex:u})}})}function oi(n){si(n)||(te.delete(n),n.sortable?.destroy(),n.sortable=null)}const Ee={active:!1};function si(n){return n.dragEnabled&&Ee.active}function qi(){Array.from(te).forEach(n=>n.onGlobalDragStart())}function Vi(){Array.from(te).forEach(n=>n.onGlobalDragEnd())}/*! All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
v3.3.3 */const V={container:"container",table:"table",scrim:"scrim",stack:"stack",tableContainer:"table-container",sticky:"sticky-pos",assistiveText:"assistive-text",containerHeight:"container-height"},he={filterNoResults:"filter-no-results",filterActionsStart:"filter-actions-start",filterActionsEnd:"filter-actions-end"},Ki=Se`:host{--calcite-internal-color-focus: var( --calcite-color-focus, var(--calcite-ui-focus-color, var(--calcite-color-brand)) )}:host([disabled]){cursor:default;-webkit-user-select:none;user-select:none;opacity:var(--calcite-opacity-disabled)}:host([disabled]) *,:host([disabled]) ::slotted(*){pointer-events:none}:host{display:block}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}.interaction-container{display:contents}.container{position:relative;background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.container-height{block-size:100%}.table-container{box-sizing:border-box;display:flex;inline-size:100%;flex-direction:column;background-color:transparent}.table-container *{box-sizing:border-box}.table{inline-size:100%}.stack{--calcite-stack-padding-inline: 0;--calcite-stack-padding-block: 0}.sticky-pos{position:sticky;inset-block-start:0px;z-index:var(--calcite-z-index-sticky);background-color:var(--calcite-list-background-color, var(--calcite-color-foreground-1))}.assistive-text{position:absolute;inline-size:1px;block-size:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}:host([hidden]){display:none}[hidden]{display:none}`,Zi=`${pe}, ${Ct}`;class Qi extends ye{constructor(){super(),this.dragSelector=Ct,this.focusableItems=[],this.handleSelector="calcite-sort-handle",this.listItems=[],this.listItemGroups=[],this.mutationObserver=hi("mutation",()=>{this.willPerformFilter=!0,this.updateListItemsDebounced()}),this.cancelable=ze()(this),this.updateListItemsDebounced=Ue(this.updateListItems,He.nextTick),this.visibleItems=[],this.willFilterEmit=!1,this.willPerformFilter=!1,this.messages=Xe({blocking:!0}),this.focusSetter=Ye()(this),this.dataForFilter=[],this.hasFilterActionsEnd=!1,this.hasFilterActionsStart=!1,this.hasFilterNoResults=!1,this.sortHandleMenuItems=[],this.disabled=!1,this.dragEnabled=!1,this.filterEnabled=!1,this.filteredData=[],this.filteredItems=[],this.interactionMode="interactive",this.loading=!1,this.displayMode="flat",this.scale="m",this.selectedItems=[],this.selectionAppearance="icon",this.selectionMode="none",this.sortDisabled=!1,this.calciteInternalListDefaultSlotChange=et({cancelable:!1}),this.calciteListChange=et({cancelable:!1}),this.calciteListDragEnd=et({cancelable:!1}),this.calciteListDragStart=et({cancelable:!1}),this.calciteListFilter=et({cancelable:!1}),this.calciteListMoveHalt=et({cancelable:!1}),this.calciteListOrderChange=et({cancelable:!1}),this.listen("calciteInternalListItemToggle",this.handleCalciteListItemToggle),this.listen("calciteInternalFocusPreviousItem",this.handleCalciteInternalFocusPreviousItem),this.listen("calciteInternalListItemActive",this.handleCalciteInternalListItemActive),this.listen("calciteListItemSelect",this.handleCalciteListItemSelect),this.listen("calciteInternalAssistiveTextChange",this.handleCalciteInternalAssistiveTextChange),this.listen("calciteListItemSortHandleBeforeOpen",this.updateListItemsDebounced),this.listen("calciteSortHandleReorder",this.handleSortReorder),this.listen("calciteSortHandleMove",this.handleSortMove),this.listen("calciteSortHandleAdd",this.handleSortAdd),this.listen("calciteInternalListItemSelect",this.handleCalciteInternalListItemSelect),this.listen("calciteInternalListItemSelectMultiple",this.handleCalciteInternalListItemSelectMultiple),this.listen("calciteInternalListItemChange",this.handleCalciteInternalListItemChange),this.listen("calciteInternalListItemGroupDefaultSlotChange",this.handleCalciteInternalListItemGroupDefaultSlotChange)}static{this.properties={assistiveText:[16,{},{state:!0}],dataForFilter:[16,{},{state:!0}],hasFilterActionsEnd:[16,{},{state:!0}],hasFilterActionsStart:[16,{},{state:!0}],hasFilterNoResults:[16,{},{state:!0}],sortHandleMenuItems:[16,{},{state:!0}],canPull:[0,{},{attribute:!1}],canPut:[0,{},{attribute:!1}],disabled:[7,{},{reflect:!0,type:Boolean}],dragEnabled:[7,{},{reflect:!0,type:Boolean}],filterEnabled:[7,{},{reflect:!0,type:Boolean}],filterPredicate:[0,{},{attribute:!1}],filterLabel:[3,{},{reflect:!0}],filterPlaceholder:[3,{},{reflect:!0}],filterProps:[0,{},{attribute:!1}],filterText:[3,{},{reflect:!0}],filteredData:[0,{},{attribute:!1}],filteredItems:[0,{},{attribute:!1}],group:[3,{},{reflect:!0}],interactionMode:[3,{},{reflect:!0}],label:1,loading:[7,{},{reflect:!0,type:Boolean}],messageOverrides:[0,{},{attribute:!1}],displayMode:[3,{},{reflect:!0}],numberingSystem:1,scale:[3,{},{reflect:!0}],selectedItems:[0,{},{attribute:!1}],selectionAppearance:[3,{},{reflect:!0}],selectionMode:[3,{},{reflect:!0}],sortDisabled:[7,{},{reflect:!0,type:Boolean}]}}static{this.styles=Ki}get hasActiveFilter(){return this.filterEnabled&&this.filterText&&this.filteredItems.length!==this.visibleItems.length}get showNoResultsContainer(){return this.filterEnabled&&this.filterText&&this.hasFilterNoResults&&this.visibleItems.length&&!this.filteredItems.length}async setFocus(t){return this.focusSetter(()=>this.filterEnabled?this.filterEl:this.focusableItems.find(e=>e.active),t)}emitOrderChangeEvent(t){this.calciteListOrderChange.emit(t)}connectedCallback(){super.connectedCallback(),this.connectObserver(),this.willPerformFilter=!0,this.updateListItemsDebounced(),this.setUpSorting(),this.setParentList(),this.setListItemGroups(),this.cancelable.add(this.updateListItemsDebounced)}async load(){this.handleInteractionModeWarning()}willUpdate(t){(t.has("filterText")||t.has("filterProps")||t.has("filterPredicate"))&&this.performFilter(),(t.has("filterEnabled")&&(this.hasUpdated||this.filterEnabled!==!1)||t.has("group")||t.has("sortDisabled")&&(this.hasUpdated||this.sortDisabled!==!1)||t.has("dragEnabled")&&(this.hasUpdated||this.dragEnabled!==!1)||t.has("selectionMode")&&(this.hasUpdated||this.selectionMode!=="none")||t.has("selectionAppearance")&&(this.hasUpdated||this.selectionAppearance!=="icon")||t.has("displayMode")&&this.hasUpdated||t.has("scale")&&this.hasUpdated||t.has("canPull")&&this.hasUpdated||t.has("canPut")&&this.hasUpdated||t.has("filterPredicate")&&this.hasUpdated)&&this.handleListItemChange()}updated(){Ge(this)}disconnectedCallback(){super.disconnectedCallback(),this.disconnectObserver(),oi(this)}updateListItems(){this.updateGroupItems();const{selectionAppearance:t,selectionMode:e,interactionMode:i,dragEnabled:a,el:r,filterEl:o,displayMode:s,scale:l,sortDisabled:c,sortHandleMenuItems:u}=this,h=Array.from(this.el.querySelectorAll(Ct)),v=r,y=Array.from(v.children).filter(Rt);if(h.forEach(f=>{f.scale=l,f.selectionAppearance=t,f.selectionMode=e,f.interactionMode=i,f.closest(ie)===r&&(f.moveToItems=u.filter(S=>this.validateSortMenuItem({type:"move",fromEl:v,toEl:S.element,dragEl:f,newIndex:0,oldIndex:y.indexOf(f)})),f.addToItems=this.sortHandleMenuItems.filter(S=>this.validateSortMenuItem({type:"add",fromEl:v,toEl:S.element,dragEl:f,newIndex:0,oldIndex:y.indexOf(f)})),f.dragHandle=a,f.displayMode=s,f.sortDisabled=c)}),this.parentListEl){this.setUpSorting();return}this.listItems=h,this.filterEnabled&&this.willPerformFilter&&(this.willPerformFilter=!1,this.dataForFilter=this.getItemData(),o&&(o.items=this.dataForFilter,this.filterAndUpdateData())),this.visibleItems=this.listItems.filter(f=>!f.closed&&!f.hidden),this.updateFilteredItems(),this.borderItems(),this.focusableItems=this.filteredItems.filter(f=>!f.disabled),this.setActiveListItem(),this.updateSelectedItems(),this.setUpSorting()}handleListItemChange(){this.willPerformFilter=!0,this.updateListItemsDebounced()}handleCalciteListItemToggle(t){this.parentListEl||(t.stopPropagation(),this.borderItems())}handleCalciteInternalFocusPreviousItem(t){if(this.parentListEl)return;t.stopPropagation();const{focusableItems:e}=this,a=e.findIndex(r=>r.active)-1;e[a]&&this.focusRow(e[a])}handleCalciteInternalListItemActive(t){if(this.parentListEl)return;t.stopPropagation();const e=t.target,{listItems:i}=this;i.forEach(a=>{a.active=a===e})}handleCalciteListItemSelect(){this.parentListEl||this.updateSelectedItems(!0)}handleCalciteInternalAssistiveTextChange(t){this.assistiveText=t.detail.message,t.stopPropagation()}handleSortReorder(t){this.parentListEl||t.defaultPrevented||(t.preventDefault(),this.handleReorder(t))}handleSortAdd(t){this.parentListEl||t.defaultPrevented||(t.preventDefault(),this.handleAdd(t))}handleSortMove(t){this.parentListEl||t.defaultPrevented||(t.preventDefault(),this.handleMove(t))}handleCalciteInternalListItemSelect(t){if(this.parentListEl)return;t.stopPropagation();const e=t.target,{listItems:i,selectionMode:a}=this;e.selected&&(a==="single"||a==="single-persist")&&i.forEach(r=>r.selected=r===e),this.updateSelectedItems()}handleCalciteInternalListItemSelectMultiple(t){if(this.parentListEl)return;t.stopPropagation();const{target:e,detail:i}=t,{focusableItems:a,lastSelectedInfo:r}=this,o=e;if(i.selectMultiple&&r){const s=a.indexOf(o),l=a.indexOf(r.selectedItem),c=Math.min(l,s),u=Math.max(l,s);a.slice(c,u+1).forEach(h=>h.selected=r.selected)}else this.lastSelectedInfo={selectedItem:o,selected:o.selected}}handleCalciteInternalListItemChange(t){this.parentListEl||(t.stopPropagation(),this.updateListItemsDebounced())}handleCalciteInternalListItemGroupDefaultSlotChange(t){t.stopPropagation()}connectObserver(){this.mutationObserver?.observe(this.el,{childList:!0,subtree:!0})}disconnectObserver(){this.mutationObserver?.disconnect()}setUpSorting(){const{dragEnabled:t,defaultSlotEl:e}=this;t&&(e&&fi(e),ji(this))}onGlobalDragStart(){this.disconnectObserver()}onGlobalDragEnd(){this.connectObserver()}onDragEnd(t){this.calciteListDragEnd.emit(t)}onDragStart(t){t.dragEl.sortHandleOpen=!1,this.calciteListDragStart.emit(t)}onDragSort(t){this.setParentList(),this.updateListItemsDebounced(),this.calciteListOrderChange.emit(t)}setParentList(){this.parentListEl=this.el.parentElement?.closest(ie)}handleDefaultSlotChange(){this.parentListEl&&this.calciteInternalListDefaultSlotChange.emit()}setListItemGroups(){this.listItemGroups=Array.from(this.el.querySelectorAll(pe))}handleFilterActionsStartSlotChange(t){this.hasFilterActionsStart=ut(t)}handleFilterActionsEndSlotChange(t){this.hasFilterActionsEnd=ut(t)}handleFilterNoResultsSlotChange(t){this.hasFilterNoResults=ut(t)}setActiveListItem(){const{focusableItems:t}=this;t.some(e=>e.active)||t[0]&&(t[0].active=!0)}async updateSelectedItems(t=!1){await this.updateComplete,this.selectedItems=this.visibleItems.filter(e=>e.selected),t&&this.calciteListChange.emit()}filterElements({el:t,filteredItems:e,visibleParents:i}){const a=!i.has(t)&&!e.includes(t);t.filterHidden=a;const r=t.parentElement.closest(Zi);r&&(a||i.add(r),this.filterElements({el:r,filteredItems:e,visibleParents:i}))}allParentListItemsExpanded(t){const e=t.parentElement?.closest(Ct);if(e){if(!e.expanded)return!1}else return!0;return this.allParentListItemsExpanded(e)}borderItems(){const t=this.visibleItems.filter(e=>!e.filterHidden&&this.allParentListItemsExpanded(e));t.forEach(e=>e.bordered=e!==t[t.length-1])}updateFilteredItems(){const{visibleItems:t,filteredData:e,filterText:i,filterPredicate:a}=this,r=t?.filter(l=>t.every(c=>c===l||!l.contains(c))),o=a?t.filter(a):i?e.map(l=>l.el):t||[],s=new WeakSet;r.forEach(l=>this.filterElements({el:l,filteredItems:o,visibleParents:s})),this.filteredItems=o,this.willFilterEmit&&(this.willFilterEmit=!1,this.calciteListFilter.emit())}updateFilteredData(){const{filterEl:t}=this;t&&(t.filteredItems&&(this.filteredData=t.filteredItems),this.updateListItemsDebounced())}async filterAndUpdateData(){await this.filterEl?.filter(this.filterText),this.updateFilteredData()}get effectiveFilterProps(){return this.filterProps?this.filterProps.filter(t=>t!=="el"):["description","label","metadata","heading"]}performFilter(){const{filterEl:t,filterText:e,effectiveFilterProps:i}=this;t&&(t.value=e,t.filterProps=i,this.filterAndUpdateData())}setDefaultSlotEl(t){this.defaultSlotEl=t}setFilterEl(t){this.filterEl=t,this.performFilter()}handleFilterChange(t){t.stopPropagation();const{value:e}=t.currentTarget;this.filterText=e,this.willFilterEmit=!0,this.updateFilteredData()}getItemData(){return this.listItems.map(t=>({label:t.label,description:t.description,metadata:t.metadata,heading:this.getGroupHeading(t),el:t}))}getGroupHeading(t){return this.listItemGroups.filter(i=>i.contains(t)).map(i=>i.heading)}updateGroupItems(){const{el:t,group:e,scale:i}=this,a=di(t),r=e?Array.from(a.querySelectorAll(`${ie}[group="${e}"]`)).filter(s=>!s.disabled&&s.dragEnabled):[];this.sortHandleMenuItems=r.map(s=>({element:s,label:s.label??s.id,id:pi()})),Array.from(this.el.querySelectorAll(pe)).forEach(s=>{s.scale=i})}focusRow(t){const{focusableItems:e}=this;t&&(e.forEach(i=>i.active=i===t),t.setFocus())}isNavigable(t){const e=t.parentElement?.closest(Ct);return e?e.expanded&&this.isNavigable(e):!0}handleListKeydown(t){if(t.defaultPrevented||this.parentListEl)return;const{key:e}=t,i=this.focusableItems.filter(r=>this.isNavigable(r)),a=i.findIndex(r=>r.active);if(e==="ArrowDown"){t.preventDefault();const r=t.target===this.filterEl?0:a+1;i[r]&&this.focusRow(i[r])}else if(e==="ArrowUp"){if(t.preventDefault(),a===0&&this.filterEnabled){this.filterEl.setFocus();return}const r=a-1;i[r]&&this.focusRow(i[r])}else if(e==="Home"){t.preventDefault();const r=i[0];r&&this.focusRow(r)}else if(e==="End"){t.preventDefault();const r=i[i.length-1];r&&this.focusRow(r)}}handleInteractionModeWarning(){this.interactionMode==="static"&&this.selectionMode!=="none"&&this.selectionAppearance==="border"&&console.warn('selection-appearance="border" requires interaction-mode="interactive"')}validateSortMenuItem({fromEl:t,toEl:e,dragEl:i,newIndex:a,oldIndex:r,type:o}){if(!t||!e||e===t||i.contains(e))return!1;const s=t.canPull?.({toEl:e,fromEl:t,dragEl:i,newIndex:a,oldIndex:r})??!0,l=e.canPut?.({toEl:e,fromEl:t,dragEl:i,newIndex:a,oldIndex:r})??!0;return(o==="add"?s==="clone":s===!0)&&l}handleAdd(t){const{addTo:e}=t.detail,i=t.target,a=i?.parentElement,r=e.element,s=Array.from(a.children).filter(Rt).indexOf(i),l=0;if(!this.validateSortMenuItem({type:"add",fromEl:a,toEl:r,dragEl:i,newIndex:l,oldIndex:s}))return;i.sortHandleOpen=!1,this.disconnectObserver();const c=i.cloneNode();r.prepend(c),Ae(i),this.updateListItemsDebounced(),this.connectObserver();const u={dragEl:i,fromEl:a,toEl:r,newIndex:l,oldIndex:s};this.calciteListOrderChange.emit(u),r.emitOrderChangeEvent(u)}handleMove(t){const{moveTo:e}=t.detail,i=t.target,a=i?.parentElement,r=e.element,s=Array.from(a.children).filter(Rt).indexOf(i),l=0;if(!this.validateSortMenuItem({type:"move",fromEl:a,toEl:r,dragEl:i,newIndex:l,oldIndex:s}))return;i.sortHandleOpen=!1,this.disconnectObserver(),r.prepend(i),Ae(i),this.updateListItemsDebounced(),this.connectObserver();const c={dragEl:i,fromEl:a,toEl:r,newIndex:l,oldIndex:s};this.calciteListOrderChange.emit(c),r.emitOrderChangeEvent(c)}handleReorder(t){const{reorder:e}=t.detail,i=t.target,a=i?.parentElement;if(!a)return;i.sortHandleOpen=!1;const r=Array.from(a.children).filter(Rt),o=r.length-1,s=r.indexOf(i);let l=s;switch(e){case"top":l=0;break;case"bottom":l=o;break;case"up":l=s===0?0:s-1;break;case"down":l=s===o?o:s+1;break}this.disconnectObserver();const c=e==="up"||e==="top"?r[l]:r[l].nextSibling;a.insertBefore(i,c),this.updateListItemsDebounced(),this.connectObserver(),this.calciteListOrderChange.emit({dragEl:i,fromEl:a,toEl:a,newIndex:l,oldIndex:s})}render(){const{loading:t,label:e,disabled:i,dataForFilter:a,filterEnabled:r,filterPlaceholder:o,filterText:s,filterLabel:l,hasFilterActionsStart:c,hasFilterActionsEnd:u,effectiveFilterProps:h}=this;return Be({disabled:this.disabled,children:T`<div class=${F({[V.container]:!0,[V.containerHeight]:this.listItems.length<1&&t})}>${this.dragEnabled?T`<span aria-live=assertive class=${F(V.assistiveText)}>${this.assistiveText}</span>`:null}${this.renderItemAriaLive()}${t?T`<calcite-scrim class=${F(V.scrim)} .loading=${t}></calcite-scrim>`:null}<div .ariaBusy=${t} .ariaLabel=${e||""} class=${F(V.table)} @keydown=${this.handleListKeydown} role=treegrid>${r||c||u?T`<div class=${F(V.sticky)} role=rowgroup><div role=row><div role=columnheader><calcite-stack class=${F(V.stack)}><slot name=${he.filterActionsStart} @slotchange=${this.handleFilterActionsStartSlotChange} slot=${mt.actionsStart}></slot><calcite-filter .ariaLabel=${o} .disabled=${i} .filterProps=${h} .items=${a} .label=${l} @calciteFilterChange=${this.handleFilterChange} .placeholder=${o} .scale=${this.scale} .value=${s} ${fe(this.setFilterEl)}></calcite-filter><slot name=${he.filterActionsEnd} @slotchange=${this.handleFilterActionsEndSlotChange} slot=${mt.actionsEnd}></slot></calcite-stack></div></div></div>`:null}<div class=${F(V.tableContainer)} role=rowgroup><slot @slotchange=${this.handleDefaultSlotChange} ${fe(this.setDefaultSlotEl)}></slot></div></div><div aria-live=polite data-test-id=no-results-container .hidden=${!this.showNoResultsContainer}><slot name=${he.filterNoResults} @slotchange=${this.handleFilterNoResultsSlotChange}></slot></div></div>`})}renderItemAriaLive(){const{messages:t,filteredItems:e,parentListEl:i,messages:{_lang:a},numberingSystem:r}=this;return Te.numberFormatOptions={locale:a,numberingSystem:r},i?null:T`<div aria-live=polite class=${F(V.assistiveText)}>${this.hasActiveFilter?Tt("aria-filter-enabled",T`<div>${t.filterEnabled}</div>`):null}${Tt("aria-item-count",T`<div>${t.total.replace("{count}",Te.localize(e.length.toString()))}</div>`)}${e.length?Tt("aria-item-list",T`<ol>${e.map(o=>T`<li>${o.label}</li>`)}</ol>`):null}</div>`}}Ie("calcite-list",Qi);export{Qi as List};
