import{d as j,t as d,x as w,g as m,b as B,o as C,y as s,a as l,w as n,u as t,f as i,z as R,A as x,V as y,l as L}from"./chunk-DyqHK6XP.js";import{u as z}from"./chunk-CnGCtVXf.js";import{V as D,a as I}from"./chunk-CVmHI4oV.js";import"./chunk-DsSV5A-D.js";const S={class:"vk-chat-independent"},T={class:"vk-chat-independent-main__bubbles"},$={class:"vk-chat-independent-footer"},A={class:"vk-chat-independent-background"},M=j({name:"ChatIndependent",__name:"view",setup(N){const b=d(),a=d(""),u=w(),p=u.resolve,{simplicity:f,chat:v}=z(),{items:o,onRequest:h}=f;v.setMessages([{id:"assistant-start",message:{role:"assistant",content:["```json layer","[",'{ "url": "https://geojson.cn/api/china/1.6.2/china.json", "label": "中国地图" },','{ "url": "https://raw.githubusercontent.com/johan/world.geo.json/master/countries.geo.json", "label": "各国边界" }',"]","```"].join(`
`)},status:"success"}]);const _=m(()=>o.value.at(-1)),g=m(()=>_.value?.loading===!0);function k(e){e&&(h(e),L(()=>{a.value=""}),setTimeout(()=>{u.value?.scrollToBottom()},400))}function V(){const e=o.value.at(-1);e&&e.abortController?.abort("User Cancel")}return(e,c)=>(C(),B("div",S,[s("div",{ref_key:"mainRef",ref:b,class:"vk-chat-independent-main"},[l(t(y),{"with-flex":"one",class:"vk-chat-independent-main__duplex"},{one:n(()=>[s("div",T,[l(t(I),{"el-ref":t(p),items:t(o)},{renderer:n(()=>[i(e.$slots,"bubble_renderer")]),footer:n(r=>[i(e.$slots,"bubble_footer",R(x(r)))]),_:3},8,["el-ref","items"])])]),two:n(()=>[s("div",$,[l(t(D),{modelValue:a.value,"onUpdate:modelValue":c[0]||(c[0]=r=>a.value=r),"auto-size":!0,placeholder:"请输入内容",loading:g.value,onSubmit:k,onCancel:V},null,8,["modelValue","loading"])])]),_:3})],512),s("div",A,[i(e.$slots,"background")])]))}});export{M as _};
