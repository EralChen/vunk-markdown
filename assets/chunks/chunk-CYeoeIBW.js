import{P as l,$ as y}from"./chunk-CfMSyd_K.js";import{hn as a,q as f,t as m,b7 as v,r as d,B as I}from"./chunk-Cpdp9qXA.js";import"./chunk-BIY0MvRL.js";import"./chunk-DKLxNM5h.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */const p="Group Layer",g="group-layer-save",P="group-layer-save-as",i=m.GROUP_LAYER_MAP;function s(r){return{isValid:r.type==="group",errorMessage:"Layer.type should be 'group'"}}function A(r){return{isValid:v(r,i),errorMessage:`Layer.portalItem.typeKeywords should have '${i}'`}}function n(r,e){return{...f(r,"web-map",!0),initiator:e}}function c(r){const e=r.layerJSON;return Promise.resolve(e&&Object.keys(e).length?e:null)}async function R(r,e){e.title||=r.title,d(e,m.METADATA),I(e,i)}async function sr(r,e){return l({layer:r,itemType:p,validateLayer:s,validateItem:A,createJSONContext:t=>n(t,r),createItemData:c,errorNamePrefix:g,saveResources:async(t,o)=>(r.sourceIsPortalItem||await t.removeAllResources().catch(()=>{}),a(r.resourceReferences,o))},e)}async function nr(r,e,t){return y({layer:r,itemType:p,validateLayer:s,createJSONContext:o=>n(o,r),createItemData:c,errorNamePrefix:P,newItem:e,setItemProperties:R,saveResources:(o,u)=>a(r.resourceReferences,u)},t)}export{sr as save,nr as saveAs};
