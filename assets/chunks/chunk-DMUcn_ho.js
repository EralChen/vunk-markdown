import{u as p,p as d}from"./chunk-_NTBoosj.js";import{d as h,r as v,w as s,n as m,a as u,c as y,t as w}from"./chunk-mTyH_f-_.js";const x=h({props:{source:{type:Array,default:()=>[]}},setup(n){const o=p(),i=v("");s(async()=>{m(n.source),await u();const a=n.source.find(r=>r.info==="yaml");i.value=a?.content||""});const e=y(()=>{try{return d(i.value)}catch{return{}}}),c={title:{text:"",left:"center",top:20,textStyle:{fontSize:20}},tooltip:{trigger:"item",formatter:"{b}: {d}%"},legend:{orient:"vertical",left:"left",top:"middle",textStyle:{fontSize:14}},series:[{name:"",type:"pie",radius:["40%","70%"],avoidLabelOverlap:!1,label:{show:!0,position:"outside",formatter:"{b}: {d}%"},emphasis:{label:{show:!0,fontSize:18,fontWeight:"bold"}},labelLine:{show:!0},data:[]}]};s(()=>{!e.value||!e.value.title||o.setOption({title:{text:e.value?.title}})});const f=w(a=>{o.setOption({series:[{data:a}]})},900,{trailing:!0});return s(()=>{const r=(e.value?.data||[]).reduce((l,t)=>(t&&t.key&&t.value&&l.push({name:t.key,value:t.value}),l),[]);r.length!==0&&f(r)}),u(()=>{o.setOption(c)}),()=>null}});export{x as _};
