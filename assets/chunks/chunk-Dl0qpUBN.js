import{lP as s,V as c,lQ as i,lR as u,bJ as l,fK as p,aN as f,lS as d,lT as y}from"./chunk-DadqOv6U.js";const g=c.ofType(i);function m(t,e){const n=s((()=>t.map?.allLayers),(o=>new i({layer:o})),{recycleItems:!0,createCollection:()=>new g}),a=new u({enabled:!0,selfEnabled:!1,featureEnabled:!0,featureSources:n,distance:e?.distance,touchSensitivityMultiplier:e?.touchSensitivityMultiplier??l.touchSensitivityMultiplier});return{...p(n),options:a}}const r=new Map;function C(t){if(!r.has(t)){const a=m(t,{distance:10}),o=M(t,a.options);r.set(t,{referenceCount:0,snappingManager:o,remove:()=>{a.remove(),o.destroy()}})}const e=r.get(t);e.referenceCount++;const n=f((()=>v(t,e)));return{snappingManager:e.snappingManager,...n}}function v(t,e){e.referenceCount--,e.referenceCount>0||y((()=>{e.referenceCount===0&&(e.remove(),r.delete(t))}))}function M(t,e){return new d({view:t,options:e})}export{C as a};
