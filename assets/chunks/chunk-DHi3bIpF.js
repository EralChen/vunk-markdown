import{a as $}from"./chunk-BwYhd1Kc.js";import{u as E,p as d,s as T}from"./chunk-B7TWnS18.js";import{d as w,f as c,J as m,K as y,F as j,i as k,az as _,L as O,aZ as g,a_ as B,a$ as S,b as C,j as N,g as D,o as F,k as o,v as b,a as f}from"./chunk-yDgrv90l.js";import{j as J}from"./chunk-DJT3kRBj.js";/* empty css              *//* empty css              */const z=w({props:{source:{type:Array,default:()=>[]},close:{type:Object,default:()=>({})}},setup(e){const r=E(),t=c(),a=c(),s=c(!1);m(async()=>{y(e.source),await j();const n=e.source.find(i=>i.info?.includes("yaml")||i.info?.includes("json"));t.value=n});const l=k(()=>t.value?.info.includes("json")?t.value.content:""),p=c({});m(async()=>{y(l.value),await j();try{p.value=d(l.value)}catch{try{const n=J(l.value);p.value=d(n)}catch{}}});const u=k(()=>{if(!t.value)return{};try{if(t.value.info.includes("json"))return p.value;if(t.value.info.includes("yaml"))return d(t.value.content)}catch{return{}}return{}});function h(){s.value=!0,a.value=void 0}r.on("finished",h),_(()=>{r.off("finished",h)});const V=O(n=>{s.value||r.clear();try{r.setOption(n,!0,!0),s.value=!1}catch(i){a.value=i}},1400,{trailing:!0});return m(()=>{!u.value||!g(u.value)||B(u.value)||setTimeout(()=>{V(u.value)})}),{error:a,finished:s}}}),A={key:0,class:"vk-template-echarts__error"};function K(e,r,t,a,s,l){return C(e.$slots,"default",{close:e.close,error:e.error,finished:e.finished},()=>[e.error?(F(),N("div",A,[r[0]||(r[0]=o("br",null,null,-1)),o("span",null,b(e.error.message),1),r[1]||(r[1]=o("br",null,null,-1)),r[2]||(r[2]=o("br",null,null,-1)),o("pre",null,b(e.error.stack),1)])):D("",!0)])}const L=S(z,[["render",K]]),R={modelValue:{type:Object,default:()=>({})}},U={},v=w({name:"VkTemplateEcharts",props:R,emits:U,setup(e,{slots:r}){return()=>f($,{type:"container:echarts"},{default:t=>{const a=t.raw.children,s=t.raw.close;return f("div",{class:"vk-template-echarts__wrapper"},[f(T,null,{default:()=>[f(L,{source:a,close:s},{default:r.default})]})])}})}});v.install=e=>{e.component(v.name||"VkTemplateEcharts",v)};export{v as _};
