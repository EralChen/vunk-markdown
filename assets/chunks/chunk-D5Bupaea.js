import{P as l,$ as n}from"./chunk-CuzwIw5H.js";import{n as c,r as u,t as m,u as g}from"./chunk-BLrLWCUc.js";import"./chunk-CWUYlh1e.js";import"./chunk-BDqMgIU1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */const o="Image Service",v="imagery-layer-save",f="imagery-layer-save-as",d="imagery-tile-layer-save",I="imagery-tile-layer-save-as",p="WCS",T="wcs-layer-save",w="wcs-layer-save-as";function s(r){if(r.type==="imagery"||r.type==="wcs")return{isValid:!0};const{raster:t}=r,e=t?.datasetFormat==="Function"?t.primaryRasters?.rasters[0]:t;return{isValid:e?.datasetFormat==="RasterTileServer"&&(e.tileType==="Raster"||e.tileType==="Map"),errorMessage:"imagery tile layer should be created from a tiled image service."}}function y(r){const t=r.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function x(r,t){const{parsedUrl:e,title:i,fullExtent:a}=r;t.url=e.path,t.title||=i;try{t.extent=await c(a)}catch{t.extent=void 0}u(t,m.METADATA),g(t,m.TILED_IMAGERY,r.type==="imagery-tile")}async function sr(r,t){const e=r.type==="imagery"?v:r.type==="imagery-tile"?d:T,i=r.type==="wcs"?p:o;return l({layer:r,itemType:i,validateLayer:s,createItemData:y,errorNamePrefix:e},t)}async function yr(r,t,e){const i=r.type==="imagery"?f:r.type==="imagery-tile"?I:w,a=r.type==="wcs"?p:o;return n({layer:r,itemType:a,validateLayer:s,createItemData:y,errorNamePrefix:i,newItem:t,setItemProperties:x},e)}export{sr as save,yr as saveAs};
