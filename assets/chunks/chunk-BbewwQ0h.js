import{I as l,Q as f,fR as c,P as y,dz as S,fZ as u,fY as R,a4 as g,kQ as d,fV as x,kR as J}from"./chunk-DB7j5ecc.js";import"./chunk-BtTM1THp.js";import"./chunk-mTyH_f-_.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */function N(r){const i=r.geometry,e=r.toJSON(),t=e;let m,o,n;if(i!=null&&(o=i.spatialReference,n=u(o),t.geometryType=R(i),t.geometry=JSON.stringify(i),t.inSR=n),e.outSR?(t.outSR=u(e.outSR),m=r.outSpatialReference):i&&(t.outSR=t.inSR,m=o),t.bin&&=JSON.stringify(t.bin),t.quantizationParameters&&=JSON.stringify(t.quantizationParameters),t.outStatistics&&=JSON.stringify(t.outStatistics),t.outTimeReference&&=JSON.stringify(t.outTimeReference),e.timeExtent){const p=e.timeExtent,{start:a,end:s}=p;a==null&&s==null||(t.time=a===s?a:`${a??"null"},${s??"null"}`),delete e.timeExtent}return r.defaultSpatialReference&&g(o,m)&&(t.defaultSR=t.inSR,delete t.inSR,delete t.outSR),t}async function O(r,i,e){return i.timeExtent!=null&&i.timeExtent.isEmpty?{data:{features:[]}}:await q(r,i,e)}async function q(r,i,e={}){const t=typeof r=="string"?l(r):r,m=i.geometry?[i.geometry]:[],o=await f(m,null,{signal:e.signal}),n=o?.[0];n!=null&&((i=i.clone()).geometry=n);const p=c({...t.query,f:"json",...N(i)});return y(S(t.path,"queryBins"),{...e,query:{...p,...e.query}})}async function st(r,i,e){const{data:t}=await O(x(r),d.from(i),e);return J.fromJSON(t)}export{st as executeAttributeBinsQuery};
