const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-DxHEgTW8.js","assets/chunks/chunk-CuaFhuP3.js","assets/chunks/chunk-Dpk1TJd9.js","assets/chunks/chunk-iOPJXyP1.js","assets/static/onCreateApp.DRclb75I.css","assets/static/src_layouts_default_aside-6ea01de8.BjbON5Ij.css","assets/static/src_layouts_default_navbar-403af73f.u3IytZI2.css","assets/static/vitepress_components_VPDocOutlineItem-0942cada.tkRPm3MX.css","assets/static/vitepress_components_VPDocAsideOutline-b0d47973.Ds9uynvM.css","assets/static/src_styles_common_reset-f7a68b0e.BAKp5MHC.css","assets/static/src_styles_common_color-a7a524c7.CVau4Kly.css","assets/static/src_styles_common_is-19c6c24d.DKAKruk7.css","assets/static/style-bd199161.DVw0mqUT.css","assets/static/style-ee024ed9.COZrvgTQ.css","assets/static/src_styles_element-plus_reset-752cc03d.htEpr2M-.css","assets/static/src_styles_element-plus_form-item-877afd6a.Dy4HJB2K.css","assets/static/src_styles_element-plus_table-6cbc5816.DXG1SsxY.css","assets/static/src_styles_element-plus_tabs-67d1a98b.BMDMQPDv.css","assets/static/src_styles_element-plus_tree-cc28503d.nmT5n0wM.css","assets/static/src_styles_element-plus_dialog-7f91a00e.D4nTsJge.css","assets/static/src_styles_element-plus_breadcrumb-8ce3a1a1.CwEEGJYc.css","assets/static/src_styles_element-plus_menu-33b44202.hFAFO4eV.css","assets/static/style-769e248f.DDhCRjCR.css","assets/static/style-22d30bfc.TwvRHEyK.css","assets/static/style-d089cd8f.Cc2PI5FU.css","assets/static/style-e86a26b0.CqxSaK_p.css","assets/static/style-51eec318.o0zCZ1y4.css","assets/static/src_styles_form_sub-7371c85e.y3zh-mS3.css","assets/static/src_styles_layout_index-2891f17b.BNCqvENj.css","assets/static/style-ab3e4bd5.BuWAVw4m.css","assets/static/style-2bf8ed1f.CRScSR0a.css","assets/static/style-603b4474.BZwgKm1s.css","assets/static/style-c5252da0.CFNWXuiE.css","assets/static/style-6fd0e256.X9gIGpBH.css","assets/static/style-3c45b3af.Di2LGzYR.css","assets/static/style-27a3a9b4.C8H6Fcyw.css","assets/static/src_styles_markdown_reset-fbd16bdd.D3vNaEcf.css","assets/static/src_styles_markdown_shiki-0d2326df.uut6VZYd.css","assets/static/style-b2fddf65.BmytK7dW.css","assets/static/style-2208d37a.ChwmoEkt.css","assets/static/pages_uno-88a4f3d7.lpyrja-g.css","assets/chunks/chunk-DGmg3LSc.js","assets/chunks/chunk-DnTQQas5.js","assets/chunks/chunk-Bp0h8fOB.js","assets/chunks/chunk-CUw01iZy.js","assets/chunks/chunk-0U0Uh5jz.js","assets/chunks/chunk-CcGqYjy7.js","assets/chunks/chunk-CgEmLg0e.js","assets/chunks/chunk-Ba47yop0.js","assets/chunks/chunk-Cc_KHkZu.js"])))=>i.map(i=>d[i]);
import{_ as c}from"./chunk-iOPJXyP1.js";import{ao as u,fL as d,aq as w,bG as m,bH as _,ap as y,aK as g,fB as f,aG as v,aM as V,fM as G,eU as H,af as a,ag as o,ai as $}from"./chunk-CuaFhuP3.js";import{S as L}from"./chunk-Dpk1TJd9.js";import{i as M}from"./chunk-DB5UqKLc.js";let r=class extends u{get updating(){return this.graphicsView?.updating??!1}constructor(s){super(s),this._highlightCounts=new Map,this._graphicsViewLoader=null,this.graphics=new d,this.graphicsView=null,this.suspended=!1;const e=new w([255,255,255,1/255]);this._symbols=new Map([["point",new m({size:"2px",style:"square",color:e})],["polyline",new _({width:"2px",color:e})],["polygon",new y({outline:null,color:e})]])}highlight(s,e){const t=M(s);if(t.length===0)return g();let p,i=!1;return this.updatingHandles.addPromise(Promise.all([this._createHighlightGraphics(t),this._ensureGraphicsView3D()]).then((([h,n])=>{!i&&n&&(p=this._addHighlightGraphics(n,h,e))}))),g((()=>{i=!0,p?.remove()}))}preload(){this._ensureGraphicsView3D()}_addHighlightGraphics(s,e,t){for(const i of e)this._highlightCounts.set(i,(this._highlightCounts.get(i)??0)+1);this.graphics.addMany(e);const p=s.highlight(e,t);return g((()=>{this._removeHighlightGraphics(e),p.remove()}))}_removeHighlightGraphics(s){this.graphics.removeMany(s.filter((e=>{const t=Math.max(0,(this._highlightCounts.get(e)??0)-1);return t===0?(this._highlightCounts.delete(e),!0):(this._highlightCounts.set(e,t),!1)})))}async _ensureGraphicsView3D(){if(this.graphicsView)return this.graphicsView;this._graphicsViewLoader||(this._graphicsViewLoader=c(()=>import("./chunk-DxHEgTW8.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49])));const{default:s}=await this._graphicsViewLoader;if(this.destroyed)return null;const e=new s({view:this.view,layer:this.layer,getGraphics:()=>this.graphics,drapeSourcePriorityOffset:.5});return this._set("graphicsView",e),this.addHandles([f(this.graphicsView),v((()=>this.suspended),(t=>{e.suspended=t}),V)]),e}async _createHighlightGraphics(s){const e=s.map((({geometry:i})=>i?.spatialReference)).filter(L).reduce(((i,h)=>(i.length!==0&&i.at(-1)?.equals(h)||i.push(h),i)),[]),t=this.view.spatialReference,p=e.map((i=>({source:i,dest:t})));try{await G(p)}catch{return[]}return s.map((i=>{const{geometry:h}=i;try{const n=h?H(h,t):null,l=i.cloneShallow();return l.geometry=n,l.symbol=this._symbols.get(n?.type),l}catch{return i}}))}};a([o()],r.prototype,"graphics",void 0),a([o()],r.prototype,"graphicsView",void 0),a([o()],r.prototype,"view",void 0),a([o()],r.prototype,"layer",void 0),a([o()],r.prototype,"updatingHandles",void 0),a([o()],r.prototype,"suspended",void 0),a([o()],r.prototype,"updating",null),r=a([$("esri.views.3d.layers.support.ImageHighlightHelper3D")],r);export{r as w};
