const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-5lpBCmpS.js","assets/chunks/chunk-CuaFhuP3.js","assets/chunks/chunk-Dpk1TJd9.js","assets/chunks/chunk-iOPJXyP1.js","assets/static/onCreateApp.DRclb75I.css","assets/static/src_layouts_default_aside-6ea01de8.BjbON5Ij.css","assets/static/src_layouts_default_navbar-403af73f.u3IytZI2.css","assets/static/vitepress_components_VPDocOutlineItem-0942cada.tkRPm3MX.css","assets/static/vitepress_components_VPDocAsideOutline-b0d47973.Ds9uynvM.css","assets/static/src_styles_common_reset-f7a68b0e.BAKp5MHC.css","assets/static/src_styles_common_color-a7a524c7.CVau4Kly.css","assets/static/src_styles_common_is-19c6c24d.DKAKruk7.css","assets/static/style-bd199161.DVw0mqUT.css","assets/static/style-ee024ed9.COZrvgTQ.css","assets/static/src_styles_element-plus_reset-752cc03d.htEpr2M-.css","assets/static/src_styles_element-plus_form-item-877afd6a.Dy4HJB2K.css","assets/static/src_styles_element-plus_table-6cbc5816.DXG1SsxY.css","assets/static/src_styles_element-plus_tabs-67d1a98b.BMDMQPDv.css","assets/static/src_styles_element-plus_tree-cc28503d.nmT5n0wM.css","assets/static/src_styles_element-plus_dialog-7f91a00e.D4nTsJge.css","assets/static/src_styles_element-plus_breadcrumb-8ce3a1a1.CwEEGJYc.css","assets/static/src_styles_element-plus_menu-33b44202.hFAFO4eV.css","assets/static/style-769e248f.DDhCRjCR.css","assets/static/style-22d30bfc.TwvRHEyK.css","assets/static/style-d089cd8f.Cc2PI5FU.css","assets/static/style-e86a26b0.CqxSaK_p.css","assets/static/style-51eec318.o0zCZ1y4.css","assets/static/src_styles_form_sub-7371c85e.y3zh-mS3.css","assets/static/src_styles_layout_index-2891f17b.BNCqvENj.css","assets/static/style-ab3e4bd5.BuWAVw4m.css","assets/static/style-2bf8ed1f.CRScSR0a.css","assets/static/style-603b4474.BZwgKm1s.css","assets/static/style-c5252da0.CFNWXuiE.css","assets/static/style-6fd0e256.X9gIGpBH.css","assets/static/style-3c45b3af.Di2LGzYR.css","assets/static/style-27a3a9b4.C8H6Fcyw.css","assets/static/src_styles_markdown_reset-fbd16bdd.D3vNaEcf.css","assets/static/src_styles_markdown_shiki-0d2326df.uut6VZYd.css","assets/static/style-b2fddf65.BmytK7dW.css","assets/static/style-2208d37a.ChwmoEkt.css","assets/static/pages_uno-88a4f3d7.lpyrja-g.css","assets/chunks/chunk-DGmg3LSc.js","assets/chunks/chunk-CKL2xzr-.js"])))=>i.map(i=>d[i]);
import{_ as le}from"./chunk-iOPJXyP1.js";import{qO as ue,qP as ce,qQ as j,jX as z,l2 as V,qR as de,qS as me,qT as fe,k4 as pe,j4 as Te,b3 as I,e7 as U,ck as xe,qU as N,cZ as ge,gs as he,nH as be,jT as X,qV as K,gq as ye,nd as F,gr as D,kh as J,qW as M,qX as $e,qY as Re,qZ as we,nb as W,ky as H,q_ as ve,bn as q,kg as Be,b8 as v,bi as B,jY as Se,j5 as Me,jZ as Z,j_ as G,j$ as Ae,q$ as Oe,r0 as qe,r1 as Q,r2 as _e,r3 as Ee,bg as je,oH as Ie,r4 as Fe,r5 as Le}from"./chunk-CuaFhuP3.js";import{a as Pe}from"./chunk-CB8wlU_f.js";import{o as Ce,d as Y}from"./chunk-BIcMZiQX.js";import{o as ke,n as Ve}from"./chunk-D7aMCmt3.js";import{n as _}from"./chunk-CKL2xzr-.js";function S(t){if(t==null)return null;const r=t.offset!=null?t.offset:ue,o=t.rotation!=null?t.rotation:0,s=t.scale!=null?t.scale:ce,c=j(1,0,0,0,1,0,r[0],r[1],1),f=j(Math.cos(o),-Math.sin(o),0,Math.sin(o),Math.cos(o),0,0,0,1),a=j(s[0],0,0,0,s[1],0,0,0,1),i=z();return V(i,f,a),V(i,c,i),i}class Ue{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class Ne{constructor(r,o,s){this.name=r,this.lodThreshold=o,this.pivotOffset=s,this.stageResources=new Ue,this.numberOfVertices=0}}async function De(t,r){const o=ee(Pe(t));if(o.fileType==="wosr"){const l=await(r.cache?r.cache.loadWOSR(o.url,r):de(o.url,r)),{engineResources:p,referenceBoundingBox:T}=me(l,r);return{lods:p,referenceBoundingBox:T,isEsriSymbolResource:!1,isWosr:!0}}let s;if(r.cache)s=await r.cache.loadGLTF(o.url,r,!!r.usePBR);else{const{loadGLTF:l}=await le(()=>import("./chunk-5lpBCmpS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42]));s=await l(new fe(r.streamDataRequester),o.url,r,r.usePBR)}const c=s.model.meta?.ESRI_proxyEllipsoid,f=s.meta.isEsriSymbolResource&&c!=null&&s.meta.ESRI_webstyle==="EsriRealisticTreesStyle";f&&!s.customMeta.esriTreeRendering&&(s.customMeta.esriTreeRendering=!0,Qe(s,c));const a=!!r.usePBR,i=s.meta.isEsriSymbolResource?{usePBR:a,isSchematic:!1,treeRendering:f,mrrFactors:Fe}:{usePBR:a,isSchematic:!1,treeRendering:!1,mrrFactors:Le},u={...r.materialParameters,treeRendering:f},{engineResources:e,referenceBoundingBox:n}=We(s,i,u,r,o.specifiedLodIndex,f);return{lods:e,referenceBoundingBox:n,isEsriSymbolResource:s.meta.isEsriSymbolResource,isWosr:!1}}function ee(t){const r=t.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return r?{fileType:"gltf",url:r[1],specifiedLodIndex:r[4]!=null?Number(r[4]):null}:t.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:t,specifiedLodIndex:null}:{fileType:"unknown",url:t,specifiedLodIndex:null}}function We(t,r,o,s,c,f){const a=t.model,i=new Array,u=new Map,e=new Map,n=a.lods.length,l=ye();return a.lods.forEach(((p,T)=>{const x=s.skipHighLods===!0&&(n>1&&T===0||n>3&&T===1)||s.skipHighLods===!1&&c!=null&&T!==c;if(x&&T!==0)return;const d=new Ne(p.name,p.lodThreshold,[0,0,0]);p.parts.forEach((g=>{const h=x?new F({},s):He(a,g,d,r,o,u,e,s,f),{geometry:y,vertexCount:m}=Ze(g,h??new F({},s)),b=y.boundingInfo;b!=null&&T===0&&(D(l,b.bbMin),D(l,b.bbMax)),h!=null&&(d.stageResources.geometries.push(y),d.numberOfVertices+=m)})),x||i.push(d)})),{engineResources:i,referenceBoundingBox:l}}function He(t,r,o,s,c,f,a,i,u){const e=t.materials.get(r.material);if(e==null)return null;const{normal:n,color:l,texCoord0:p,tangent:T}=r.attributes,x=r.material+(n?"_normal":"")+(l?"_color":"")+(p?"_texCoord0":"")+(T?"_tangent":""),d=r.attributes.texCoord0!=null,g=r.attributes.normal!=null,h=Ge(e.alphaMode);if(!f.has(x)){if(d){const w=(O,ne=!1,ae=!1)=>{if(O!=null&&!a.has(O)){const E=t.textures.get(O);if(E){const $=E.data,ie=ne&&!_($)?i.compressionOptions:void 0;a.set(O,new Ie(_($)?$.data:$,{...E.parameters,preMultiplyAlpha:!_($)&&ae,encoding:_($)?$.encoding:void 0,compressionOptions:ie}))}}},oe=h!==M.Opaque&&!u;w(e.colorTexture,oe,h!==M.Opaque),w(e.normalTexture),w(e.occlusionTexture,!0),w(e.emissiveTexture),w(e.metallicRoughnessTexture,!0)}const m=1/J,b=e.color[0]**m,L=e.color[1]**m,P=e.color[2]**m,te=e.emissiveFactor[0]**m,re=e.emissiveFactor[1]**m,se=e.emissiveFactor[2]**m,A=e.colorTexture!=null&&d?a.get(e.colorTexture):null,C=$e(e),k=e.normalTextureTransform?.scale!=null?e.normalTextureTransform?.scale:Re;f.set(x,new F({...s,customDepthTest:ve.Lequal,textureAlphaMode:h,textureAlphaCutoff:e.alphaCutoff,diffuse:[b,L,P],ambient:[b,L,P],opacity:e.alphaMode==="OPAQUE"?1:e.opacity,doubleSided:e.doubleSided,doubleSidedType:"winding-order",cullFace:e.doubleSided?H.None:H.Back,hasVertexColors:!!r.attributes.color,hasVertexTangents:!!r.attributes.tangent,normalType:g?W.Attribute:W.ScreenDerivative,castShadows:!0,receiveShadows:e.receiveShadows,receiveAmbientOcclusion:e.receiveAmbientOcclusion,textureId:A?.id,colorMixMode:e.colorMixMode,normalTextureId:e.normalTexture!=null&&d?a.get(e.normalTexture).id:void 0,textureAlphaPremultiplied:A!=null&&!!A.parameters.preMultiplyAlpha,occlusionTextureId:e.occlusionTexture!=null&&d?a.get(e.occlusionTexture).id:void 0,emissiveTextureId:e.emissiveTexture!=null&&d?a.get(e.emissiveTexture).id:void 0,metallicRoughnessTextureId:e.metallicRoughnessTexture!=null&&d?a.get(e.metallicRoughnessTexture).id:void 0,emissiveBaseColor:[te,re,se],mrrFactors:C?we:[e.metallicFactor,e.roughnessFactor,s.mrrFactors[2]],isSchematic:C,colorTextureTransformMatrix:S(e.colorTextureTransform),normalTextureTransformMatrix:S(e.normalTextureTransform),scale:[k[0],k[1]],occlusionTextureTransformMatrix:S(e.occlusionTextureTransform),emissiveTextureTransformMatrix:S(e.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:S(e.metallicRoughnessTextureTransform),...c},i))}const y=f.get(x);if(o.stageResources.materials.push(y),d){const m=b=>{b!=null&&o.stageResources.textures.push(a.get(b))};m(e.colorTexture),m(e.normalTexture),m(e.occlusionTexture),m(e.emissiveTexture),m(e.metallicRoughnessTexture)}return y}function Ze(t,r){const o=t.attributes.position.count,s=ke(t.indices||o,t.primitiveType),c=q(3*o),{typedBuffer:f,typedBufferStride:a}=t.attributes.position;Be(c,f,t.transform,3,a);const i=[[v.POSITION,new B(c,s,3,!0)]];if(t.attributes.normal!=null){const e=q(3*o),{typedBuffer:n,typedBufferStride:l}=t.attributes.normal;Se(R,t.transform),Me(e,n,R,3,l),Z(R)&&G(e,e),i.push([v.NORMAL,new B(e,s,3,!0)])}if(t.attributes.tangent!=null){const e=q(4*o),{typedBuffer:n,typedBufferStride:l}=t.attributes.tangent;Ae(R,t.transform),Ce(e,n,R,4,l),Z(R)&&G(e,e,4),i.push([v.TANGENT,new B(e,s,4,!0)])}if(t.attributes.texCoord0!=null){const e=q(2*o),{typedBuffer:n,typedBufferStride:l}=t.attributes.texCoord0;Ve(e,n,2,l),i.push([v.UV0,new B(e,s,2,!0)])}const u=t.attributes.color;if(u!=null){const e=new Uint8Array(4*o);u.elementCount===4?u instanceof K?Y(e,u,1,255):(u instanceof Oe||u instanceof qe)&&Y(e,u,1/255,255):(e.fill(255),u instanceof X?Q(e,u.typedBuffer,1,255,4,u.typedBufferStride):(t.attributes.color instanceof _e||t.attributes.color instanceof Ee)&&Q(e,u.typedBuffer,1/255,255,4,t.attributes.color.typedBufferStride)),i.push([v.COLOR,new B(e,s,4,!0)])}return{geometry:new je(r,i),vertexCount:o}}const R=z();function Ge(t){switch(t){case"BLEND":return M.Blend;case"MASK":return M.Mask;case"OPAQUE":case null:case void 0:return M.Opaque}}function Qe(t,r){for(let o=0;o<t.model.lods.length;++o){const s=t.model.lods[o];for(const c of s.parts){const f=c.attributes.normal;if(f==null)return;const a=c.attributes.position,i=a.count,u=I(),e=I(),n=I(),l=new Float32Array(4*i),p=new Float32Array(3*i),T=pe(Te(),c.transform);let x=0,d=0;for(let g=0;g<i;g++){a.getVec(g,e),f.getVec(g,u),U(e,e,c.transform),xe(n,e,r.center),N(n,n,r.radius);const h=n[2],y=ge(n),m=Math.min(.45+.55*y*y,1)**J;N(n,n,r.radius),T!==null&&U(n,n,T),he(n,n),o+1!==t.model.lods.length&&t.model.lods.length>1&&be(n,n,u,h>-1?.2:Math.min(-4*h-3.8,1)),p[x]=n[0],p[x+1]=n[1],p[x+2]=n[2],x+=3,l[d]=m,l[d+1]=m,l[d+2]=m,l[d+3]=1,d+=4}c.attributes.normal=new X(p),c.attributes.color=new K(l)}}}const tt=Object.freeze(Object.defineProperty({__proto__:null,fetch:De,parseUrl:ee},Symbol.toStringTag,{value:"Module"}));export{De as Y,tt as o,S as s};
