import{a as $}from"./chunk-XokVNh2R.js";import{u as E,p as d,s as T}from"./chunk-8pJRsQxn.js";import{d as w,r as c,J as m,K as y,D as j,g as k,az as _,L as O,aZ as g,a_ as B,a$ as S,b as C,h as D,e as N,o as J,i as o,t as b,a as p}from"./chunk-D3r4aXmB.js";import{j as z}from"./chunk-DJT3kRBj.js";/* empty css              *//* empty css              */const A=w({props:{source:{type:Array,default:()=>[]},close:{type:Object,default:()=>({})}},setup(e){const r=E(),t=c(),a=c(),s=c(!1);m(async()=>{y(e.source),await j();const n=e.source.find(i=>i.info?.includes("yaml")||i.info?.includes("json"));t.value=n});const l=k(()=>t.value?.info.includes("json")?t.value.content:""),f=c({});m(async()=>{y(l.value),await j();try{f.value=d(l.value)}catch{try{const n=z(l.value);f.value=d(n)}catch{}}});const u=k(()=>{if(!t.value)return{};try{if(t.value.info.includes("json"))return f.value;if(t.value.info.includes("yaml"))return d(t.value.content)}catch{return{}}return{}});function h(){s.value=!0,a.value=void 0}r.on("finished",h),_(()=>{r.off("finished",h)});const V=O(n=>{s.value||r.clear();try{r.setOption(n,!0,!0),s.value=!1}catch(i){a.value=i}},1400,{trailing:!0});return m(()=>{!u.value||!g(u.value)||B(u.value)||setTimeout(()=>{V(u.value)})}),{error:a,finished:s}}}),F={key:0,class:"vk-template-echarts__error"};function K(e,r,t,a,s,l){return C(e.$slots,"default",{close:e.close,error:e.error,finished:e.finished},()=>[e.error?(J(),D("div",F,[r[0]||(r[0]=o("br",null,null,-1)),o("span",null,b(e.error.message),1),r[1]||(r[1]=o("br",null,null,-1)),r[2]||(r[2]=o("br",null,null,-1)),o("pre",null,b(e.error.stack),1)])):N("",!0)])}const L=S(A,[["render",K]]),R={modelValue:{type:Object,default:()=>({})}},U={},v=w({name:"VkTemplateEcharts",props:R,emits:U,setup(e,{slots:r}){return()=>p($,{type:"container:echarts"},{default:t=>{const a=t.raw.children,s=t.raw.close;return p("div",{class:"vk-template-echarts__wrapper"},[p(T,null,{default:()=>[p(L,{source:a,close:s},{default:r.default})]})])}})}});v.install=e=>{e.component(v.name||"VkTemplateEcharts",v)};export{v as _};
