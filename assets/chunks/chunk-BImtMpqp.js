import{a as E}from"./chunk-icCS9XUz.js";import{u as T,p as d,s as $}from"./chunk-MDMvtqur.js";import{d as w,f as c,J as m,K as y,F as j,i as k,aC as O,L as _,b0 as g,b1 as B,b2 as C,b as S,j as N,g as D,o as F,k as o,v as b,a as f}from"./chunk-AYRxNqGd.js";import{j as J}from"./chunk-B8h3Mgtp.js";/* empty css              *//* empty css              */const A=w({props:{source:{type:Array,default:()=>[]},close:{type:Object,default:()=>({})}},setup(e){const r=T(),t=c(),a=c(),s=c(!1);m(async()=>{y(e.source),await j();const n=e.source.find(i=>i.info?.includes("yaml")||i.info?.includes("json"));t.value=n});const l=k(()=>t.value?.info.includes("json")?t.value.content:""),p=c({});m(async()=>{y(l.value),await j();try{p.value=d(l.value)}catch{try{const n=J(l.value);p.value=d(n)}catch{}}});const u=k(()=>{if(!t.value)return{};try{if(t.value.info.includes("json"))return p.value;if(t.value.info.includes("yaml"))return d(t.value.content)}catch{return{}}return{}});function h(){s.value=!0,a.value=void 0}r.on("finished",h),O(()=>{r.off("finished",h)});const V=_(n=>{s.value||r.clear();try{r.setOption(n,!0,!0),s.value=!1}catch(i){a.value=i}},1400,{trailing:!0});return m(()=>{!u.value||!g(u.value)||B(u.value)||setTimeout(()=>{V(u.value)})}),{error:a,finished:s}}}),K={key:0,class:"vk-template-echarts__error"};function L(e,r,t,a,s,l){return S(e.$slots,"default",{close:e.close,error:e.error,finished:e.finished},()=>[e.error?(F(),N("div",K,[r[0]||(r[0]=o("br",null,null,-1)),o("span",null,b(e.error.message),1),r[1]||(r[1]=o("br",null,null,-1)),r[2]||(r[2]=o("br",null,null,-1)),o("pre",null,b(e.error.stack),1)])):D("",!0)])}const R=C(A,[["render",L]]),U={modelValue:{type:Object,default:()=>({})}},q={},v=w({name:"VkTemplateEcharts",props:U,emits:q,setup(e,{slots:r}){return()=>f(E,{type:"container:echarts"},{default:t=>{const a=t.raw.children,s=t.raw.close;return f("div",{class:"vk-template-echarts__wrapper"},[f($,null,{default:()=>[f(R,{source:a,close:s},{default:r.default})]})])}})}});v.install=e=>{e.component(v.name||"VkTemplateEcharts",v)};export{v as _};
