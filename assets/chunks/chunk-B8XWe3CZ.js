import{b as E}from"./chunk-tB-sggU7.js";import{u as T,p as d,s as $}from"./chunk-Ciq0u-Qh.js";import{d as w,t as i,G as m,H as v,l as b,g as k,az as B,I as O,b3 as _,b4 as g,b5 as S,f as C,b as N,e as D,o as z,B as o,y as j,a as f}from"./chunk-D28Ltzg9.js";import{j as A}from"./chunk-B8h3Mgtp.js";/* empty css              *//* empty css              */const F=w({props:{source:{type:Array,default:()=>[]},close:{type:Object,default:()=>({})}},setup(e){const t=T(),r=i(),a=i(),s=i(!1);m(async()=>{v(e.source),await b();const n=e.source.find(c=>c.info?.includes("yaml")||c.info?.includes("json"));r.value=n});const l=k(()=>r.value?.info.includes("json")?r.value.content:""),p=i({});m(async()=>{v(l.value),await b();try{p.value=d(l.value)}catch{try{const n=A(l.value);p.value=d(n)}catch{}}});const u=k(()=>{if(!r.value)return{};try{if(r.value.info.includes("json"))return p.value;if(r.value.info.includes("yaml"))return d(r.value.content)}catch{return{}}return{}});function y(){s.value=!0,a.value=void 0}t.on("finished",y),B(()=>{t.off("finished",y)});const V=O(n=>{s.value||t.clear();try{t.setOption(n,!0,!0),s.value=!1}catch(c){a.value=c}},1400,{trailing:!0});return m(()=>{v(e.close.markup),!(!u.value||!_(u.value))&&(g(u.value)||setTimeout(()=>{V(u.value)}))}),{error:a,finished:s}}}),G={key:0,class:"vk-template-echarts__error"};function H(e,t,r,a,s,l){return C(e.$slots,"default",{close:e.close,error:e.error,finished:e.finished},()=>[e.error?(z(),N("div",G,[t[0]||(t[0]=o("br",null,null,-1)),o("span",null,j(e.error.message),1),t[1]||(t[1]=o("br",null,null,-1)),t[2]||(t[2]=o("br",null,null,-1)),o("pre",null,j(e.error.stack),1)])):D("",!0)])}const I=S(F,[["render",H]]),J={modelValue:{type:Object,default:()=>({})}},R={},h=w({name:"VkTemplateEcharts",props:J,emits:R,setup(e,{slots:t}){return()=>f(E,{type:"container:echarts"},{default:r=>{const a=r.raw.children,s=r.raw.close;return f("div",{class:"vk-template-echarts__wrapper"},[f($,null,{default:()=>[f(I,{source:a,close:s},{default:t.default})]})])}})}});h.install=e=>{e.component(h.name||"VkTemplateEcharts",h)};export{h as _};
