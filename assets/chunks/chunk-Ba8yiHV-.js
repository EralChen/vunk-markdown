import{fQ as A,fR as I,fS as s,fT as i,b3 as C,fU as m,fV as p,d0 as L}from"./chunk-CuaFhuP3.js";function _(r,f,t,u){if(f==null||u==null)return!1;const n=A(f,u);if(n?.projector==null)return!1;if(n.projector===I)return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],!0;const{source:e,dest:o,projector:R}=n;if(o.spatialReferenceId===s.WEB_MERCATOR){const a=i[e.spatialReferenceId][s.WGS84];return a!=null&&(a(r,0,E,0),m(E,0,t,0),t[3]=d(E[1],r[2],r[3],p.radius),!0)}if(e.spatialReferenceId!==s.WGS84&&e.spatialReferenceId!==s.CGCS2000||o.spatialReferenceId!==s.PLATE_CARREE){R(r,0,t,0);const a=e.metersPerUnit??1,c=o.metersPerUnit??1;t[3]=r[3]*a/c}else{const a=i[e.spatialReferenceId][s.SPHERICAL_ECEF],c=i[s.SPHERICAL_ECEF][s.PLATE_CARREE];let l=r[3];a!=null&&c!=null&&(l=d(r[1],r[2],r[3],p.radius)),R(r,0,t,0),t[3]=l}return!0}function d(r,f,t,u){const n=u+f;if(n<u/2||t>n)return Number.MAX_VALUE;const e=Math.abs(M*r)+Math.asin(t/n);return e>=Math.PI/2?Number.MAX_VALUE:t/Math.cos(e)}const E=C(),M=L(1);export{_ as l};
