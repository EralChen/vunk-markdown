import{iH as m}from"./chunk-XGpVqsM_.js";import{e as c}from"./chunk-DAY7Vx0p.js";import"./chunk-DyqHK6XP.js";import"./chunk-Dix477Sg.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./chunk-CrMA_peF.js";let n,i;async function rt(s){await f();const t={status:m.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]};if(s.inputs.length<1)return{result:t,transferList:[]};const e={ptrs:[],sizes:[]};for(const r of s.inputs){const l=i._malloc(r.byteLength);new Uint8Array(i.HEAPU8.buffer,l,r.byteLength).set(new Uint8Array(r)),e.ptrs.push(l),e.sizes.push(r.byteLength)}const o=i.process(s.jobDescJson,s.id,e,s.isMissingResourceCase);t.status=o.status,t.missingInputUrls=o.missingInputUrls.slice();const a=o.status===m.Succeeded&&o.data,u=t.status===m.MissingInputs&&t.missingInputUrls.length>0;t.jobDescJson=o.jobDescJson.slice(),t.error=o.error.slice(),a?t.data=o.data.slice():u&&(t.originalInputs=s.inputs.slice());for(let r=0;r<e.ptrs.length;++r)i._free(e.ptrs[r]);const p=[];if(a)p.push(t.data.buffer);else if(u)for(const r of s.inputs)p.push(r);return{result:t,transferList:p}}function it(){i&&(i.uninitialize_lyr3d_worker_wasm(),i=null)}function f(){return i?Promise.resolve():(n||(n=c().then((s=>{i=s,i.initialize_lyr3d_worker_wasm(),n=null}))),n)}export{it as destroyWasm,f as initialize,rt as process};
