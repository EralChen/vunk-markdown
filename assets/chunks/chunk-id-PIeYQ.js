const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/chunks/chunk-Claegtdl.js","assets/chunks/chunk-DB7j5ecc.js","assets/chunks/chunk-BtTM1THp.js","assets/chunks/chunk-mTyH_f-_.js","assets/static/onCreateApp.DRclb75I.css","assets/static/src_layouts_default_aside-6ea01de8.BjbON5Ij.css","assets/static/src_layouts_default_navbar-403af73f.u3IytZI2.css","assets/static/vitepress_components_VPDocOutlineItem-0942cada.tkRPm3MX.css","assets/static/vitepress_components_VPDocAsideOutline-b0d47973.Ds9uynvM.css","assets/static/src_styles_common_reset-f7a68b0e.BAKp5MHC.css","assets/static/src_styles_common_color-a7a524c7.CVau4Kly.css","assets/static/src_styles_common_is-19c6c24d.DKAKruk7.css","assets/static/style-96df6854.BAFyCb-T.css","assets/static/style-a1e6feee.Beul3IQx.css","assets/static/src_styles_element-plus_reset-752cc03d.htEpr2M-.css","assets/static/src_styles_element-plus_form-item-877afd6a.Dy4HJB2K.css","assets/static/src_styles_element-plus_table-6cbc5816.DXG1SsxY.css","assets/static/src_styles_element-plus_tabs-67d1a98b.BMDMQPDv.css","assets/static/src_styles_element-plus_tree-cc28503d.nmT5n0wM.css","assets/static/src_styles_element-plus_dialog-7f91a00e.D4nTsJge.css","assets/static/src_styles_element-plus_breadcrumb-8ce3a1a1.CwEEGJYc.css","assets/static/src_styles_element-plus_menu-33b44202.hFAFO4eV.css","assets/static/style-972dd62f.DKHZNGtr.css","assets/static/style-bf255db2.BBK-T9RK.css","assets/static/style-d089cd8f.Cc2PI5FU.css","assets/static/style-f1e9d87d.LlbyWA9E.css","assets/static/style-51eec318.o0zCZ1y4.css","assets/static/src_styles_form_sub-7371c85e.y3zh-mS3.css","assets/static/src_styles_layout_index-2891f17b.BNCqvENj.css","assets/static/style-ab3e4bd5.BuWAVw4m.css","assets/static/style-347ea3e4.CRScSR0a.css","assets/static/style-1a418a90.BZwgKm1s.css","assets/static/style-f7ca24cc.CFNWXuiE.css","assets/static/style-3993dd47.X9gIGpBH.css","assets/static/style-4af18548.Di2LGzYR.css","assets/static/style-cdb3fcab.C8H6Fcyw.css","assets/static/src_styles_markdown_reset-fbd16bdd.D3vNaEcf.css","assets/static/src_styles_markdown_shiki-0d2326df.uut6VZYd.css","assets/static/style-adaa428b.6mnjyT16.css","assets/static/style-a769b432.ChwmoEkt.css","assets/static/pages_uno-88a4f3d7.BFEw1PGl.css","assets/chunks/chunk-vw8H-DSw.js"])))=>i.map(i=>d[i]);
import{_ as oe}from"./chunk-BtTM1THp.js";import{pw as ne,px as ae,py as _,io as X,jX as V,pz as ie,pA as le,pB as ue,iy as ce,hC as fe,bh as I,d1 as k,c$ as de,pC as q,dE as me,fo as pe,nU as xe,ij as J,pD as Q,fl as he,pe as L,fm as D,iO as Y,pE as S,pF as Te,pG as ge,pg as be,pH as U,jb as z,pI as ye,bX as E,iN as we,bR as $,bS as v,ip as Re,iq as $e,ir as G,is as H,it as ve,pJ as Be,pK as Se,pL as W,pM as Me,pN as Ae,bP as Ee,kw as Oe,pO as _e,pP as Ie}from"./chunk-DB7j5ecc.js";import{a as Fe}from"./chunk-8WtPGj6h.js";import{o as Le,d as K}from"./chunk-DRe07DzX.js";import{o as Ce,n as Pe}from"./chunk-DxeBREtI.js";import{n as F}from"./chunk-vw8H-DSw.js";function B(t){if(t==null)return null;const r=t.offset!=null?t.offset:ne,o=t.rotation!=null?t.rotation:0,s=t.scale!=null?t.scale:ae,c=_(1,0,0,0,1,0,r[0],r[1],1),f=_(Math.cos(o),-Math.sin(o),0,Math.sin(o),Math.cos(o),0,0,0,1),i=_(s[0],0,0,0,s[1],0,0,0,1),u=X();return V(u,f,i),V(u,c,u),u}class je{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class Ne{constructor(r,o,s){this.name=r,this.lodThreshold=o,this.pivotOffset=s,this.stageResources=new je,this.numberOfVertices=0}}async function Ve(t,r){const o=Z(Fe(t));if(o.fileType==="wosr"){const l=await(r.cache?r.cache.loadWOSR(o.url,r):ie(o.url,r)),{engineResources:p,referenceBoundingBox:h}=le(l,r);return{lods:p,referenceBoundingBox:h,isEsriSymbolResource:!1,isWosr:!0}}let s;if(r.cache)s=await r.cache.loadGLTF(o.url,r,!!r.usePBR);else{const{loadGLTF:l}=await oe(()=>import("./chunk-Claegtdl.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41]));s=await l(new ue(r.streamDataRequester),o.url,r,r.usePBR)}const c=s.model.meta?.ESRI_proxyEllipsoid,f=s.meta.isEsriSymbolResource&&c!=null&&s.meta.ESRI_webstyle==="EsriRealisticTreesStyle";f&&!s.customMeta.esriTreeRendering&&(s.customMeta.esriTreeRendering=!0,ze(s,c));const i=!!r.usePBR,u=s.meta.isEsriSymbolResource?{usePBR:i,isSchematic:!1,treeRendering:f,mrrFactors:_e}:{usePBR:i,isSchematic:!1,treeRendering:!1,mrrFactors:Ie},e={...r.materialParameters,treeRendering:f},{engineResources:n,referenceBoundingBox:a}=ke(s,u,e,r,o.specifiedLodIndex);return{lods:n,referenceBoundingBox:a,isEsriSymbolResource:s.meta.isEsriSymbolResource,isWosr:!1}}function Z(t){const r=t.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return r?{fileType:"gltf",url:r[1],specifiedLodIndex:r[4]!=null?Number(r[4]):null}:t.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:t,specifiedLodIndex:null}:{fileType:"unknown",url:t,specifiedLodIndex:null}}function ke(t,r,o,s,c){const f=t.model,i=new Array,u=new Map,e=new Map,n=f.lods.length,a=he();return f.lods.forEach((l,p)=>{const h=s.skipHighLods===!0&&(n>1&&p===0||n>3&&p===1)||s.skipHighLods===!1&&c!=null&&p!==c;if(h&&p!==0)return;const d=new Ne(l.name,l.lodThreshold,[0,0,0]);l.parts.forEach(g=>{const T=h?new L({},s):qe(f,g,d,r,o,u,e,s),{geometry:b,vertexCount:m}=De(g,T??new L({},s)),x=b.boundingInfo;x!=null&&p===0&&(D(a,x.bbMin),D(a,x.bbMax)),T!=null&&(d.stageResources.geometries.push(b),d.numberOfVertices+=m)}),h||i.push(d)}),{engineResources:i,referenceBoundingBox:a}}function qe(t,r,o,s,c,f,i,u){const e=t.materials.get(r.material);if(e==null)return null;const{normal:n,color:a,texCoord0:l,tangent:p}=r.attributes,h=r.material+(n?"_normal":"")+(a?"_color":"")+(l?"_texCoord0":"")+(p?"_tangent":""),d=r.attributes.texCoord0!=null,g=r.attributes.normal!=null,T=Ue(e.alphaMode);if(!f.has(h)){if(d){const R=(A,se=!1)=>{if(A!=null&&!i.has(A)){const O=t.textures.get(A);if(O){const y=O.data;i.set(A,new Oe(F(y)?y.data:y,{...O.parameters,preMultiplyAlpha:!F(y)&&se,encoding:F(y)?y.encoding:void 0}))}}};R(e.colorTexture,T!==S.Opaque),R(e.normalTexture),R(e.occlusionTexture),R(e.emissiveTexture),R(e.metallicRoughnessTexture)}const m=1/Y,x=e.color[0]**m,C=e.color[1]**m,P=e.color[2]**m,ee=e.emissiveFactor[0]**m,te=e.emissiveFactor[1]**m,re=e.emissiveFactor[2]**m,M=e.colorTexture!=null&&d?i.get(e.colorTexture):null,j=Te(e),N=e.normalTextureTransform?.scale!=null?e.normalTextureTransform?.scale:ge;f.set(h,new L({...s,transparent:T===S.Blend,customDepthTest:ye.Lequal,textureAlphaMode:T,textureAlphaCutoff:e.alphaCutoff,diffuse:[x,C,P],ambient:[x,C,P],opacity:e.opacity,doubleSided:e.doubleSided,doubleSidedType:"winding-order",cullFace:e.doubleSided?z.None:z.Back,hasVertexColors:!!r.attributes.color,hasVertexTangents:!!r.attributes.tangent,normalType:g?U.Attribute:U.ScreenDerivative,castShadows:!0,receiveShadows:e.receiveShadows,receiveAmbientOcclusion:e.receiveAmbientOcclustion,textureId:M?.id,colorMixMode:e.colorMixMode,normalTextureId:e.normalTexture!=null&&d?i.get(e.normalTexture).id:void 0,textureAlphaPremultiplied:M!=null&&!!M.parameters.preMultiplyAlpha,occlusionTextureId:e.occlusionTexture!=null&&d?i.get(e.occlusionTexture).id:void 0,emissiveTextureId:e.emissiveTexture!=null&&d?i.get(e.emissiveTexture).id:void 0,metallicRoughnessTextureId:e.metallicRoughnessTexture!=null&&d?i.get(e.metallicRoughnessTexture).id:void 0,emissiveFactor:[ee,te,re],mrrFactors:j?be:[e.metallicFactor,e.roughnessFactor,s.mrrFactors[2]],isSchematic:j,colorTextureTransformMatrix:B(e.colorTextureTransform),normalTextureTransformMatrix:B(e.normalTextureTransform),scale:[N[0],N[1]],occlusionTextureTransformMatrix:B(e.occlusionTextureTransform),emissiveTextureTransformMatrix:B(e.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:B(e.metallicRoughnessTextureTransform),...c},u))}const b=f.get(h);if(o.stageResources.materials.push(b),d){const m=x=>{x!=null&&o.stageResources.textures.push(i.get(x))};m(e.colorTexture),m(e.normalTexture),m(e.occlusionTexture),m(e.emissiveTexture),m(e.metallicRoughnessTexture)}return b}function De(t,r){const o=t.attributes.position.count,s=Ce(t.indices||o,t.primitiveType),c=E(3*o),{typedBuffer:f,typedBufferStride:i}=t.attributes.position;we(c,f,t.transform,3,i);const u=[[$.POSITION,new v(c,s,3,!0)]];if(t.attributes.normal!=null){const n=E(3*o),{typedBuffer:a,typedBufferStride:l}=t.attributes.normal;Re(w,t.transform),$e(n,a,w,3,l),G(w)&&H(n,n),u.push([$.NORMAL,new v(n,s,3,!0)])}if(t.attributes.tangent!=null){const n=E(4*o),{typedBuffer:a,typedBufferStride:l}=t.attributes.tangent;ve(w,t.transform),Le(n,a,w,4,l),G(w)&&H(n,n,4),u.push([$.TANGENT,new v(n,s,4,!0)])}if(t.attributes.texCoord0!=null){const n=E(2*o),{typedBuffer:a,typedBufferStride:l}=t.attributes.texCoord0;Pe(n,a,2,l),u.push([$.UV0,new v(n,s,2,!0)])}const e=t.attributes.color;if(e!=null){const n=new Uint8Array(4*o);e.elementCount===4?e instanceof Q?K(n,e,1,255):(e instanceof Be||e instanceof Se)&&K(n,e,1/255,255):(n.fill(255),e instanceof J?W(n,e.typedBuffer,1,255,4,e.typedBufferStride):(t.attributes.color instanceof Me||t.attributes.color instanceof Ae)&&W(n,e.typedBuffer,1/255,255,4,t.attributes.color.typedBufferStride)),u.push([$.COLOR,new v(n,s,4,!0)])}return{geometry:new Ee(r,u),vertexCount:o}}const w=X();function Ue(t){switch(t){case"BLEND":return S.Blend;case"MASK":return S.Mask;case"OPAQUE":case null:case void 0:return S.Opaque}}function ze(t,r){for(let o=0;o<t.model.lods.length;++o){const s=t.model.lods[o];for(const c of s.parts){const f=c.attributes.normal;if(f==null)return;const i=c.attributes.position,u=i.count,e=I(),n=I(),a=I(),l=new Float32Array(4*u),p=new Float32Array(3*u),h=ce(fe(),c.transform);let d=0,g=0;for(let T=0;T<u;T++){i.getVec(T,n),f.getVec(T,e),k(n,n,c.transform),de(a,n,r.center),q(a,a,r.radius);const b=a[2],m=me(a),x=Math.min(.45+.55*m*m,1)**Y;q(a,a,r.radius),h!==null&&k(a,a,h),pe(a,a),o+1!==t.model.lods.length&&t.model.lods.length>1&&xe(a,a,e,b>-1?.2:Math.min(-4*b-3.8,1)),p[d]=a[0],p[d+1]=a[1],p[d+2]=a[2],d+=3,l[g]=x,l[g+1]=x,l[g+2]=x,l[g+3]=1,g+=4}c.attributes.normal=new J(p),c.attributes.color=new Q(l)}}}const Qe=Object.freeze(Object.defineProperty({__proto__:null,fetch:Ve,parseUrl:Z},Symbol.toStringTag,{value:"Module"}));export{Ve as Y,Qe as o,B as s};
